[{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791163748","html_url":"https://github.com/apache/pinot/pull/6641#issuecomment-791163748","issue_url":"https://api.github.com/repos/apache/pinot/issues/6641","id":791163748,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTE2Mzc0OA==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T05:24:33Z","updated_at":"2021-03-05T05:24:33Z","author_association":"CONTRIBUTOR","body":"Aah - good point. I can make that change. The map for the most part is just\nfor better error message - the validation logic will still work. However,\nthat will break for the current startree validation.\n\nOn Thu, Mar 4, 2021 at 6:46 PM Xiaotian (Jackie) Jiang <\nnotifications@github.com> wrote:\n\n> *@Jackie-Jiang* commented on this pull request.\n>\n> We should not store columnNameToConfigMap as a map because the same\n> column can show up in multiple indexes, and override the previous entry\n>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-pinot/pull/6641#pullrequestreview-604758985>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAFRXV7SQAF6VLL7KOXXE63TCBA2DANCNFSM4YSRQTGQ>\n> .\n>\n\n\n-- \nThanks and regards\n\nChinmay Soman\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791163748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791174352","html_url":"https://github.com/apache/pinot/pull/6197#issuecomment-791174352","issue_url":"https://api.github.com/repos/apache/pinot/issues/6197","id":791174352,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTE3NDM1Mg==","user":{"login":"KKcorps","id":5559703,"node_id":"MDQ6VXNlcjU1NTk3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/5559703?v=4","gravatar_id":"","url":"https://api.github.com/users/KKcorps","html_url":"https://github.com/KKcorps","followers_url":"https://api.github.com/users/KKcorps/followers","following_url":"https://api.github.com/users/KKcorps/following{/other_user}","gists_url":"https://api.github.com/users/KKcorps/gists{/gist_id}","starred_url":"https://api.github.com/users/KKcorps/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KKcorps/subscriptions","organizations_url":"https://api.github.com/users/KKcorps/orgs","repos_url":"https://api.github.com/users/KKcorps/repos","events_url":"https://api.github.com/users/KKcorps/events{/privacy}","received_events_url":"https://api.github.com/users/KKcorps/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T05:51:04Z","updated_at":"2021-03-05T05:51:04Z","author_association":"CONTRIBUTOR","body":" @elonazoulay How are you handling the case where sequential operations are must. e.g. Delete directory and then create a new directory and then copy contents to this new directory.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791174352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791256094","html_url":"https://github.com/apache/pinot/issues/6648#issuecomment-791256094","issue_url":"https://api.github.com/repos/apache/pinot/issues/6648","id":791256094,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTI1NjA5NA==","user":{"login":"dubin555","id":8174807,"node_id":"MDQ6VXNlcjgxNzQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/8174807?v=4","gravatar_id":"","url":"https://api.github.com/users/dubin555","html_url":"https://github.com/dubin555","followers_url":"https://api.github.com/users/dubin555/followers","following_url":"https://api.github.com/users/dubin555/following{/other_user}","gists_url":"https://api.github.com/users/dubin555/gists{/gist_id}","starred_url":"https://api.github.com/users/dubin555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubin555/subscriptions","organizations_url":"https://api.github.com/users/dubin555/orgs","repos_url":"https://api.github.com/users/dubin555/repos","events_url":"https://api.github.com/users/dubin555/events{/privacy}","received_events_url":"https://api.github.com/users/dubin555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T08:33:01Z","updated_at":"2021-03-05T08:33:01Z","author_association":"NONE","body":"Also does the kafka realtime ingest part have resource control? e.g. how many consumer thread","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791256094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791305421","html_url":"https://github.com/apache/pinot/pull/6640#issuecomment-791305421","issue_url":"https://api.github.com/repos/apache/pinot/issues/6640","id":791305421,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTMwNTQyMQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T09:48:51Z","updated_at":"2021-03-05T09:48:51Z","author_association":"CONTRIBUTOR","body":"@chenboat This is an important step towards pluggable metrics. I think you can create pinot-dropwizard very soon.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791305421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791640826","html_url":"https://github.com/apache/pinot/issues/6648#issuecomment-791640826","issue_url":"https://api.github.com/repos/apache/pinot/issues/6648","id":791640826,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY0MDgyNg==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T19:46:04Z","updated_at":"2021-03-05T19:46:04Z","author_association":"CONTRIBUTOR","body":"For the json field, you can configure it as string field in the schema, and enable json index for it (Check https://docs.pinot.apache.org/basics/indexing/json-index for more details)\r\nNote that the input data needs to be json strings. You may use `jsonFormat()` function to convert object to json string if needed.\r\n\r\nFor Kafka real-time ingestion, each Kafka partition is consumed by one thread (one consuming segment), and you can configure multiple replications of the segment","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791640826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791641953","html_url":"https://github.com/apache/pinot/issues/6645#issuecomment-791641953","issue_url":"https://api.github.com/repos/apache/pinot/issues/6645","id":791641953,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY0MTk1Mw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T19:48:09Z","updated_at":"2021-03-05T19:48:09Z","author_association":"CONTRIBUTOR","body":"Shall we list down all the validations we have now? I feel all (or at least most) of them are **must have** for pinot to properly work","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791641953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791657823","html_url":"https://github.com/apache/pinot/pull/6650#issuecomment-791657823","issue_url":"https://api.github.com/repos/apache/pinot/issues/6650","id":791657823,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY1NzgyMw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T20:16:26Z","updated_at":"2021-03-10T21:13:00Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=h1) Report\n> Merging [#6650](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=desc) (96cf993) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.43%`.\n> The diff coverage is `42.62%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6650/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6650       +/-   ##\n===========================================\n- Coverage   66.44%   44.01%   -22.44%     \n===========================================\n  Files        1075     1361      +286     \n  Lines       54773    66523    +11750     \n  Branches     8168     9702     +1534     \n===========================================\n- Hits        36396    29279     -7117     \n- Misses      15700    34796    +19096     \n+ Partials     2677     2448      -229     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `44.01% <42.62%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1387 more](https://codecov.io/gh/apache/incubator-pinot/pull/6650/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=footer). Last update [b2d716d...96cf993](https://codecov.io/gh/apache/incubator-pinot/pull/6650?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791657823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791664266","html_url":"https://github.com/apache/pinot/issues/6645#issuecomment-791664266","issue_url":"https://api.github.com/repos/apache/pinot/issues/6645","id":791664266,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY2NDI2Ng==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T20:21:58Z","updated_at":"2021-03-05T20:21:58Z","author_association":"CONTRIBUTOR","body":"> Shall we list down all the validations we have now? I feel all (or at least most) of them are **must have** for pinot to properly work\r\n\r\nLol! Pinot has been working for years now :)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791664266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791665873","html_url":"https://github.com/apache/pinot/issues/6645#issuecomment-791665873","issue_url":"https://api.github.com/repos/apache/pinot/issues/6645","id":791665873,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY2NTg3Mw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T20:23:07Z","updated_at":"2021-03-05T20:23:07Z","author_association":"CONTRIBUTOR","body":"Perhaps we should list all the checks that we WANT to perform, and then make sure that they get done in one go, so that we can have one (maybe two) levels of validation. This thing of doing part by part costs a lot in eng hours if a test fails some use case.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791665873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791675203","html_url":"https://github.com/apache/pinot/issues/6453#issuecomment-791675203","issue_url":"https://api.github.com/repos/apache/pinot/issues/6453","id":791675203,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTY3NTIwMw==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T20:41:10Z","updated_at":"2021-03-05T20:41:10Z","author_association":"MEMBER","body":"Hi, what's the pros and cons between creating an empty segment v.s. not creating a segment, e.g. in Kinesis connector?\r\n\r\nFailing the segment creation could be helpful to early detect the issue from the upstream. If we release this constraint, issues may appear underneath the creation job without any notice.\r\n\r\nIn realtime side, there could be no streaming data for newly created tables, thus it'd lead to empty segments flushed in the table.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791675203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791742340","html_url":"https://github.com/apache/pinot/pull/6651#issuecomment-791742340","issue_url":"https://api.github.com/repos/apache/pinot/issues/6651","id":791742340,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTc0MjM0MA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-05T22:07:09Z","updated_at":"2021-03-08T19:05:23Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=h1) Report\n> Merging [#6651](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=desc) (c2b6d17) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `0.60%`.\n> The diff coverage is `62.61%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6651/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6651      +/-   ##\n==========================================\n- Coverage   66.44%   65.84%   -0.61%     \n==========================================\n  Files        1075     1361     +286     \n  Lines       54773    66517   +11744     \n  Branches     8168     9702    +1534     \n==========================================\n+ Hits        36396    43795    +7399     \n- Misses      15700    19599    +3899     \n- Partials     2677     3123     +446     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.84% <62.61%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `0.00% <0.00%> (-27.28%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `82.85% <ø> (+10.12%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| ... and [1246 more](https://codecov.io/gh/apache/incubator-pinot/pull/6651/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=footer). Last update [1dbdd67...c2b6d17](https://codecov.io/gh/apache/incubator-pinot/pull/6651?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791742340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791825604","html_url":"https://github.com/apache/pinot/pull/6653#issuecomment-791825604","issue_url":"https://api.github.com/repos/apache/pinot/issues/6653","id":791825604,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTgyNTYwNA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-06T01:16:38Z","updated_at":"2021-03-28T18:19:59Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=h1) Report\n> Merging [#6653](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=desc) (6a73876) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `0.43%`.\n> The diff coverage is `62.64%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6653/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6653      +/-   ##\n==========================================\n- Coverage   66.44%   66.01%   -0.44%     \n==========================================\n  Files        1075     1396     +321     \n  Lines       54773    67797   +13024     \n  Branches     8168     9811    +1643     \n==========================================\n+ Hits        36396    44758    +8362     \n- Misses      15700    19866    +4166     \n- Partials     2677     3173     +496     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `66.01% <62.64%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `0.00% <0.00%> (-27.28%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `82.85% <ø> (+10.12%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| ... and [1282 more](https://codecov.io/gh/apache/incubator-pinot/pull/6653/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=footer). Last update [a84846e...6a73876](https://codecov.io/gh/apache/incubator-pinot/pull/6653?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791825604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791833134","html_url":"https://github.com/apache/pinot/pull/6653#issuecomment-791833134","issue_url":"https://api.github.com/repos/apache/pinot/issues/6653","id":791833134,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTgzMzEzNA==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-06T01:40:12Z","updated_at":"2021-03-06T01:41:41Z","author_association":"CONTRIBUTOR","body":"Hi @liuchang0520, this feature is already being worked on at https://github.com/apache/incubator-pinot/pull/6567. \r\n\r\nAre you aware of this? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791833134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791834095","html_url":"https://github.com/apache/pinot/pull/6649#issuecomment-791834095","issue_url":"https://api.github.com/repos/apache/pinot/issues/6649","id":791834095,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTgzNDA5NQ==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-06T01:44:29Z","updated_at":"2021-03-06T01:44:29Z","author_association":"CONTRIBUTOR","body":"Does this imply that we now support dropping columns?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791834095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791844297","html_url":"https://github.com/apache/pinot/pull/6653#issuecomment-791844297","issue_url":"https://api.github.com/repos/apache/pinot/issues/6653","id":791844297,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTg0NDI5Nw==","user":{"login":"liuchang0520","id":33030174,"node_id":"MDQ6VXNlcjMzMDMwMTc0","avatar_url":"https://avatars.githubusercontent.com/u/33030174?v=4","gravatar_id":"","url":"https://api.github.com/users/liuchang0520","html_url":"https://github.com/liuchang0520","followers_url":"https://api.github.com/users/liuchang0520/followers","following_url":"https://api.github.com/users/liuchang0520/following{/other_user}","gists_url":"https://api.github.com/users/liuchang0520/gists{/gist_id}","starred_url":"https://api.github.com/users/liuchang0520/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuchang0520/subscriptions","organizations_url":"https://api.github.com/users/liuchang0520/orgs","repos_url":"https://api.github.com/users/liuchang0520/repos","events_url":"https://api.github.com/users/liuchang0520/events{/privacy}","received_events_url":"https://api.github.com/users/liuchang0520/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-06T02:30:04Z","updated_at":"2021-03-06T02:30:04Z","author_association":"CONTRIBUTOR","body":"> Hi @liuchang0520, this feature is already being worked on at #6567.\r\n> \r\n> Are you aware of this?\r\n\r\nHi @snleee , my understanding is this change covers a different segment upload path: server uploads LLC segment to segment store, though I am not sure. @chenboat Is there an overlap between this pr and #6567 ?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791844297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791893908","html_url":"https://github.com/apache/pinot/pull/6649#issuecomment-791893908","issue_url":"https://api.github.com/repos/apache/pinot/issues/6649","id":791893908,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MTg5MzkwOA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-06T08:14:09Z","updated_at":"2021-03-06T08:14:09Z","author_association":"CONTRIBUTOR","body":"@snleee Not fully supported, but can reduce the inconsistency. Dropping columns won't take effect on consuming segments.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/791893908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792486881","html_url":"https://github.com/apache/pinot/issues/6648#issuecomment-792486881","issue_url":"https://api.github.com/repos/apache/pinot/issues/6648","id":792486881,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjQ4Njg4MQ==","user":{"login":"dubin555","id":8174807,"node_id":"MDQ6VXNlcjgxNzQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/8174807?v=4","gravatar_id":"","url":"https://api.github.com/users/dubin555","html_url":"https://github.com/dubin555","followers_url":"https://api.github.com/users/dubin555/followers","following_url":"https://api.github.com/users/dubin555/following{/other_user}","gists_url":"https://api.github.com/users/dubin555/gists{/gist_id}","starred_url":"https://api.github.com/users/dubin555/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dubin555/subscriptions","organizations_url":"https://api.github.com/users/dubin555/orgs","repos_url":"https://api.github.com/users/dubin555/repos","events_url":"https://api.github.com/users/dubin555/events{/privacy}","received_events_url":"https://api.github.com/users/dubin555/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T05:54:11Z","updated_at":"2021-03-08T05:54:11Z","author_association":"NONE","body":"> For the json field, you can configure it as string field in the schema, and enable json index for it (Check https://docs.pinot.apache.org/basics/indexing/json-index for more details)\r\n> Note that the input data needs to be json strings. You may use `jsonFormat()` function to convert object to json string if needed.\r\n\r\n> For Kafka real-time ingestion, each Kafka partition is consumed by one thread (one consuming segment), and you can configure multiple replications of the segment\r\n\r\nThanks for the reply! I check the link that you posted. If the upstream data is in nested json, like this: `{\"props\":{\"name\":\"tom\"}}`, can data be stored in a column field like 'name' WITHOUT nested 'props'? \r\n\r\nI don't quite understand. Suppose the upstream Kafka topic has 10 partitions, and I want to configure 2 consumer threads. Question 1, where to config the setting. Question 2. If lag happens, I want to increase to 10 threads, how to change the setting","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792486881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792509612","html_url":"https://github.com/apache/pinot/issues/6648#issuecomment-792509612","issue_url":"https://api.github.com/repos/apache/pinot/issues/6648","id":792509612,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjUwOTYxMg==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T06:38:29Z","updated_at":"2021-03-08T06:38:29Z","author_association":"MEMBER","body":"Yes. You can create a column “name” and use a transform function\r\n\r\nsee json functions here\r\nhttps://docs.pinot.apache.org/users/user-guide-query/supported-transformations\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792509612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792509991","html_url":"https://github.com/apache/pinot/issues/6648#issuecomment-792509991","issue_url":"https://api.github.com/repos/apache/pinot/issues/6648","id":792509991,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjUwOTk5MQ==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T06:39:14Z","updated_at":"2021-03-08T06:39:14Z","author_association":"MEMBER","body":"We create one thread per partition automatically.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792509991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792542351","html_url":"https://github.com/apache/pinot/pull/6588#issuecomment-792542351","issue_url":"https://api.github.com/repos/apache/pinot/issues/6588","id":792542351,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjU0MjM1MQ==","user":{"login":"xulinjintu","id":22777868,"node_id":"MDQ6VXNlcjIyNzc3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/22777868?v=4","gravatar_id":"","url":"https://api.github.com/users/xulinjintu","html_url":"https://github.com/xulinjintu","followers_url":"https://api.github.com/users/xulinjintu/followers","following_url":"https://api.github.com/users/xulinjintu/following{/other_user}","gists_url":"https://api.github.com/users/xulinjintu/gists{/gist_id}","starred_url":"https://api.github.com/users/xulinjintu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xulinjintu/subscriptions","organizations_url":"https://api.github.com/users/xulinjintu/orgs","repos_url":"https://api.github.com/users/xulinjintu/repos","events_url":"https://api.github.com/users/xulinjintu/events{/privacy}","received_events_url":"https://api.github.com/users/xulinjintu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T07:37:15Z","updated_at":"2021-03-08T07:37:15Z","author_association":"NONE","body":"@siddharthteotia any update on the doc and PR review?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792542351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792895637","html_url":"https://github.com/apache/pinot/issues/6654#issuecomment-792895637","issue_url":"https://api.github.com/repos/apache/pinot/issues/6654","id":792895637,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjg5NTYzNw==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T16:52:02Z","updated_at":"2021-03-08T16:52:02Z","author_association":"CONTRIBUTOR","body":"Helix 1.0 claims to have introduced paging when fetching items from zookeeper. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792895637/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792907941","html_url":"https://github.com/apache/pinot/issues/6654#issuecomment-792907941","issue_url":"https://api.github.com/repos/apache/pinot/issues/6654","id":792907941,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MjkwNzk0MQ==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T17:08:06Z","updated_at":"2021-03-08T17:08:06Z","author_association":"MEMBER","body":"I thinks it’s more to do with the controller api impl and UI implementation ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792907941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792980794","html_url":"https://github.com/apache/pinot/issues/6645#issuecomment-792980794","issue_url":"https://api.github.com/repos/apache/pinot/issues/6645","id":792980794,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk4MDc5NA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:38:23Z","updated_at":"2021-03-08T18:38:23Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu Several validations we added recently are for new features. E.g. Text and json index only works on string columns; upsert does not work with star-tree index; star-tree index won't work with MV columns etc. By saying `must have`, I mean if the config fails the validation, the table won't work as expected.\r\nWe should list down all the validations, and mark them either `must follow` or `suggested but still work`","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792980794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792985166","html_url":"https://github.com/apache/pinot/pull/6653#issuecomment-792985166","issue_url":"https://api.github.com/repos/apache/pinot/issues/6653","id":792985166,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Mjk4NTE2Ng==","user":{"login":"chenboat","id":2549137,"node_id":"MDQ6VXNlcjI1NDkxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2549137?v=4","gravatar_id":"","url":"https://api.github.com/users/chenboat","html_url":"https://github.com/chenboat","followers_url":"https://api.github.com/users/chenboat/followers","following_url":"https://api.github.com/users/chenboat/following{/other_user}","gists_url":"https://api.github.com/users/chenboat/gists{/gist_id}","starred_url":"https://api.github.com/users/chenboat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenboat/subscriptions","organizations_url":"https://api.github.com/users/chenboat/orgs","repos_url":"https://api.github.com/users/chenboat/repos","events_url":"https://api.github.com/users/chenboat/events{/privacy}","received_events_url":"https://api.github.com/users/chenboat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T18:45:16Z","updated_at":"2021-03-08T18:45:16Z","author_association":"CONTRIBUTOR","body":"Yes. This PR is about deep store by pass and not related to #6567. The added endpoint is for the Pinot servers to upload segments to deep store. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/792985166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793041935","html_url":"https://github.com/apache/pinot/pull/6655#issuecomment-793041935","issue_url":"https://api.github.com/repos/apache/pinot/issues/6655","id":793041935,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzA0MTkzNQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T20:11:11Z","updated_at":"2021-03-09T22:03:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=h1) Report\n> Merging [#6655](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=desc) (8008614) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `7.38%`.\n> The diff coverage is `80.45%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6655/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6655      +/-   ##\n==========================================\n+ Coverage   66.44%   73.83%   +7.38%     \n==========================================\n  Files        1075     1361     +286     \n  Lines       54773    66522   +11749     \n  Branches     8168     9702    +1534     \n==========================================\n+ Hits        36396    49116   +12720     \n+ Misses      15700    14197    -1503     \n- Partials     2677     3209     +532     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `44.10% <42.93%> (?)` | |\n| unittests | `65.85% <62.64%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `88.57% <ø> (+15.84%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| [...va/org/apache/pinot/client/ExternalViewReader.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4dGVybmFsVmlld1JlYWRlci5qYXZh) | `81.69% <ø> (+31.69%)` | :arrow_up: |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| ... and [1208 more](https://codecov.io/gh/apache/incubator-pinot/pull/6655/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=footer). Last update [5137025...ea57781](https://codecov.io/gh/apache/incubator-pinot/pull/6655?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793041935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793159466","html_url":"https://github.com/apache/pinot/pull/6657#issuecomment-793159466","issue_url":"https://api.github.com/repos/apache/pinot/issues/6657","id":793159466,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzE1OTQ2Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-08T23:15:41Z","updated_at":"2021-03-08T23:15:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=h1) Report\n> Merging [#6657](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=desc) (3c8a22b) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.45%`.\n> The diff coverage is `42.89%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6657/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6657       +/-   ##\n===========================================\n- Coverage   66.44%   43.99%   -22.46%     \n===========================================\n  Files        1075     1361      +286     \n  Lines       54773    66512    +11739     \n  Branches     8168     9700     +1532     \n===========================================\n- Hits        36396    29264     -7132     \n- Misses      15700    34806    +19106     \n+ Partials     2677     2442      -235     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.99% <42.89%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1389 more](https://codecov.io/gh/apache/incubator-pinot/pull/6657/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=footer). Last update [1dbdd67...3c8a22b](https://codecov.io/gh/apache/incubator-pinot/pull/6657?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793159466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793185590","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-793185590","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":793185590,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzE4NTU5MA==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T00:00:04Z","updated_at":"2021-03-09T00:00:04Z","author_association":"CONTRIBUTOR","body":"> Thanks so much for this PR. As part of this can we also add a new API to enable credential verification ? (eg: from the Cluster Manager UI). I'm thinking of something like this: \"http://controller-host:port/verifyauth\" where you pass in the token and verify whether its correct.\r\n> \r\n> The other option is to annotate one of the existing APIs eg: GET /tables with \"Authenticate\" and reuse that. However, a new API might be cleaner. What do you think ?\r\n\r\nadded `/auth/info` and `/auth/verify` endpoints.\r\n**info** provides a workflow name to be supported from the web UI, including `NONE`, `BASIC`, and `OAUTH2`\r\n**verify** allows to verify access to API endpoints in a generic fashion, or simply to sanity-check auth headers without additional query params","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793185590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793187627","html_url":"https://github.com/apache/pinot/pull/6658#issuecomment-793187627","issue_url":"https://api.github.com/repos/apache/pinot/issues/6658","id":793187627,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzE4NzYyNw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T00:03:37Z","updated_at":"2021-03-09T00:03:37Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=h1) Report\n> Merging [#6658](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=desc) (7df578c) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **increase** coverage by `7.41%`.\n> The diff coverage is `80.36%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6658/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6658      +/-   ##\n==========================================\n+ Coverage   66.44%   73.86%   +7.41%     \n==========================================\n  Files        1075     1361     +286     \n  Lines       54773    66520   +11747     \n  Branches     8168     9702    +1534     \n==========================================\n+ Hits        36396    49135   +12739     \n+ Misses      15700    14180    -1520     \n- Partials     2677     3205     +528     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `44.20% <42.81%> (?)` | |\n| unittests | `65.86% <62.61%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `73.33% <ø> (+16.19%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `44.44% <ø> (-4.40%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `88.57% <ø> (+15.84%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| [...va/org/apache/pinot/client/ExternalViewReader.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4dGVybmFsVmlld1JlYWRlci5qYXZh) | `81.69% <ø> (+31.69%)` | :arrow_up: |\n| [...inot/client/JsonAsyncHttpPinotClientTransport.java](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0pzb25Bc3luY0h0dHBQaW5vdENsaWVudFRyYW5zcG9ydC5qYXZh) | `56.36% <ø> (-5.64%)` | :arrow_down: |\n| ... and [1206 more](https://codecov.io/gh/apache/incubator-pinot/pull/6658/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=footer). Last update [1dbdd67...f72b2a5](https://codecov.io/gh/apache/incubator-pinot/pull/6658?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793187627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793207645","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-793207645","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":793207645,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzIwNzY0NQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T00:42:24Z","updated_at":"2021-03-09T00:42:24Z","author_association":"NONE","body":"@xulinjintu wondering whether your changes can be used for AWS as I am interested to use it there. Also once the segment is tagged with failure domain zone information how the segment replicas are handled to spread across different zones?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793207645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793636728","html_url":"https://github.com/apache/pinot/issues/6660#issuecomment-793636728","issue_url":"https://api.github.com/repos/apache/pinot/issues/6660","id":793636728,"node_id":"MDEyOklzc3VlQ29tbWVudDc5MzYzNjcyOA==","user":{"login":"Lvnszn","id":12541438,"node_id":"MDQ6VXNlcjEyNTQxNDM4","avatar_url":"https://avatars.githubusercontent.com/u/12541438?v=4","gravatar_id":"","url":"https://api.github.com/users/Lvnszn","html_url":"https://github.com/Lvnszn","followers_url":"https://api.github.com/users/Lvnszn/followers","following_url":"https://api.github.com/users/Lvnszn/following{/other_user}","gists_url":"https://api.github.com/users/Lvnszn/gists{/gist_id}","starred_url":"https://api.github.com/users/Lvnszn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Lvnszn/subscriptions","organizations_url":"https://api.github.com/users/Lvnszn/orgs","repos_url":"https://api.github.com/users/Lvnszn/repos","events_url":"https://api.github.com/users/Lvnszn/events{/privacy}","received_events_url":"https://api.github.com/users/Lvnszn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T09:47:49Z","updated_at":"2021-03-09T09:47:49Z","author_association":"NONE","body":"cc @fx19880617 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/793636728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/794537123","html_url":"https://github.com/apache/pinot/issues/6293#issuecomment-794537123","issue_url":"https://api.github.com/repos/apache/pinot/issues/6293","id":794537123,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NDUzNzEyMw==","user":{"login":"kkrugler","id":66217,"node_id":"MDQ6VXNlcjY2MjE3","avatar_url":"https://avatars.githubusercontent.com/u/66217?v=4","gravatar_id":"","url":"https://api.github.com/users/kkrugler","html_url":"https://github.com/kkrugler","followers_url":"https://api.github.com/users/kkrugler/followers","following_url":"https://api.github.com/users/kkrugler/following{/other_user}","gists_url":"https://api.github.com/users/kkrugler/gists{/gist_id}","starred_url":"https://api.github.com/users/kkrugler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kkrugler/subscriptions","organizations_url":"https://api.github.com/users/kkrugler/orgs","repos_url":"https://api.github.com/users/kkrugler/repos","events_url":"https://api.github.com/users/kkrugler/events{/privacy}","received_events_url":"https://api.github.com/users/kkrugler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-09T22:24:24Z","updated_at":"2021-03-09T22:24:24Z","author_association":"CONTRIBUTOR","body":"On Slack I'd asked:\r\n\r\n> I’m wondering if it would work better to have a separate Pinot sub-project/jar that can be used to spin up a stand-alone “mini” Pinot cluster, and have that jar be used by pinot-integration-tests (and 3rd parties wanting to do the same). This would provide cleaner separation for what’s used internally by Pinot, versus what projects using Pinot would need to use.\r\n\r\n@kishoreg responded with:\r\n\r\n> \\+100 for this\r\n> this is the right thing to do\r\n> in fact our quickstart is very similar to this\r\n> it just brings up everything in one process","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/794537123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/794686502","html_url":"https://github.com/apache/pinot/issues/6660#issuecomment-794686502","issue_url":"https://api.github.com/repos/apache/pinot/issues/6660","id":794686502,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NDY4NjUwMg==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T01:06:06Z","updated_at":"2021-03-10T01:06:06Z","author_association":"CONTRIBUTOR","body":"I was also thinking that we can return a long value if the column is INT or LONG (There could be an issue if the result is larger than LONG.MAX, then the only way to handle it is still DOUBLE).\r\n\r\nOr make the cast function work outside the aggregation functions.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/794686502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795146097","html_url":"https://github.com/apache/pinot/issues/6660#issuecomment-795146097","issue_url":"https://api.github.com/repos/apache/pinot/issues/6660","id":795146097,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTE0NjA5Nw==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T09:28:44Z","updated_at":"2021-03-10T09:28:44Z","author_association":"CONTRIBUTOR","body":"Another way is to have functions like `SumLong` to handle this case.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795146097/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795668118","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-795668118","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":795668118,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTY2ODExOA==","user":{"login":"Eywek","id":6900054,"node_id":"MDQ6VXNlcjY5MDAwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6900054?v=4","gravatar_id":"","url":"https://api.github.com/users/Eywek","html_url":"https://github.com/Eywek","followers_url":"https://api.github.com/users/Eywek/followers","following_url":"https://api.github.com/users/Eywek/following{/other_user}","gists_url":"https://api.github.com/users/Eywek/gists{/gist_id}","starred_url":"https://api.github.com/users/Eywek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eywek/subscriptions","organizations_url":"https://api.github.com/users/Eywek/orgs","repos_url":"https://api.github.com/users/Eywek/repos","events_url":"https://api.github.com/users/Eywek/events{/privacy}","received_events_url":"https://api.github.com/users/Eywek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T16:11:25Z","updated_at":"2021-08-03T12:08:05Z","author_association":"NONE","body":"> Question for the community: Are there others who need this feature?\r\n\r\n👋&nbsp; yes. We're planning to use Pinot to store some data from our customers. We currently pull data from some APIs for our customers, transform it and store it. As this data can be quite large it means we need to stream it, and we need to be able to push this transformed data as a stream into pinot. To do this we plan to use a REALTIME table because we don't want to use Batch ingestion as it means that we need rely on a s3 bucket and we won't be able to know when the data is available for queries. \r\nBut when we've finished to pull data from those APIs, we won't update the table anymore, so being able to stop the ingestion but keep the query available could be really useful to avoid putting useless pressure on our Apache Pulsar cluster ~~(we using [KoP](https://github.com/streamnative/kop) to be able to use Kafka ingestion plugin)~~.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795668118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795726785","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-795726785","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":795726785,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTcyNjc4NQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T16:51:45Z","updated_at":"2021-03-10T16:51:45Z","author_association":"CONTRIBUTOR","body":"@Eywek this seems to be a one-time operation as you describe it? Am I right? Once the data is loaded into pinot, you intend to shut off consumption and just query the data -- i.e. you do not expect more data to arrive in the realtime pipeline. Is that right? ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795726785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795729348","html_url":"https://github.com/apache/pinot/issues/6302#issuecomment-795729348","issue_url":"https://api.github.com/repos/apache/pinot/issues/6302","id":795729348,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTcyOTM0OA==","user":{"login":"Eywek","id":6900054,"node_id":"MDQ6VXNlcjY5MDAwNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6900054?v=4","gravatar_id":"","url":"https://api.github.com/users/Eywek","html_url":"https://github.com/Eywek","followers_url":"https://api.github.com/users/Eywek/followers","following_url":"https://api.github.com/users/Eywek/following{/other_user}","gists_url":"https://api.github.com/users/Eywek/gists{/gist_id}","starred_url":"https://api.github.com/users/Eywek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Eywek/subscriptions","organizations_url":"https://api.github.com/users/Eywek/orgs","repos_url":"https://api.github.com/users/Eywek/repos","events_url":"https://api.github.com/users/Eywek/events{/privacy}","received_events_url":"https://api.github.com/users/Eywek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T16:53:22Z","updated_at":"2021-03-10T16:53:22Z","author_association":"NONE","body":"yep exactly","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795729348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795805303","html_url":"https://github.com/apache/pinot/pull/6664#issuecomment-795805303","issue_url":"https://api.github.com/repos/apache/pinot/issues/6664","id":795805303,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTgwNTMwMw==","user":{"login":"kishoreg","id":850791,"node_id":"MDQ6VXNlcjg1MDc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/850791?v=4","gravatar_id":"","url":"https://api.github.com/users/kishoreg","html_url":"https://github.com/kishoreg","followers_url":"https://api.github.com/users/kishoreg/followers","following_url":"https://api.github.com/users/kishoreg/following{/other_user}","gists_url":"https://api.github.com/users/kishoreg/gists{/gist_id}","starred_url":"https://api.github.com/users/kishoreg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kishoreg/subscriptions","organizations_url":"https://api.github.com/users/kishoreg/orgs","repos_url":"https://api.github.com/users/kishoreg/repos","events_url":"https://api.github.com/users/kishoreg/events{/privacy}","received_events_url":"https://api.github.com/users/kishoreg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T17:43:45Z","updated_at":"2021-03-10T17:43:45Z","author_association":"MEMBER","body":"I don't think this handling all the cases properly. This is just checking if recordreader.next is empty which is handling empty input file but it's not handling the case where all rows get filtered. It's probably better to check for 0 records at the seal which will catch a lot of other use cases. \r\n\r\nAlso, this flag is not being passed from the segmentGeneration command\r\n\r\n @npawar please take a look at this.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795805303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795846709","html_url":"https://github.com/apache/pinot/pull/6664#issuecomment-795846709","issue_url":"https://api.github.com/repos/apache/pinot/issues/6664","id":795846709,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTg0NjcwOQ==","user":{"login":"jackjlli","id":35080149,"node_id":"MDQ6VXNlcjM1MDgwMTQ5","avatar_url":"https://avatars.githubusercontent.com/u/35080149?v=4","gravatar_id":"","url":"https://api.github.com/users/jackjlli","html_url":"https://github.com/jackjlli","followers_url":"https://api.github.com/users/jackjlli/followers","following_url":"https://api.github.com/users/jackjlli/following{/other_user}","gists_url":"https://api.github.com/users/jackjlli/gists{/gist_id}","starred_url":"https://api.github.com/users/jackjlli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackjlli/subscriptions","organizations_url":"https://api.github.com/users/jackjlli/orgs","repos_url":"https://api.github.com/users/jackjlli/repos","events_url":"https://api.github.com/users/jackjlli/events{/privacy}","received_events_url":"https://api.github.com/users/jackjlli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T18:11:59Z","updated_at":"2021-03-10T18:11:59Z","author_association":"MEMBER","body":"> I don't think this handling all the cases properly. This is just checking if recordreader.next is empty which is handling empty input file but it's not handling the case where all rows get filtered. It's probably better to check for 0 records at the seal which will catch a lot of other use cases.\r\n> \r\n> Also, this flag is not being passed from the segmentGeneration command\r\n> \r\n> @npawar please take a look at this.\r\n\r\nThat's good point. While I think it's worthwhile to check empty input file before segment creation so that all the object instantiations can be skipped. Will add one more check in `handlePostCreation` method and add the option in `CreateSegmentCommand`.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795846709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795925891","html_url":"https://github.com/apache/pinot/pull/6664#issuecomment-795925891","issue_url":"https://api.github.com/repos/apache/pinot/issues/6664","id":795925891,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NTkyNTg5MQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T19:07:21Z","updated_at":"2021-03-12T05:09:17Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=h1) Report\n> Merging [#6664](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=desc) (b740d5e) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.89%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6664/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6664       +/-   ##\n===========================================\n- Coverage   66.44%   43.54%   -22.90%     \n===========================================\n  Files        1075     1387      +312     \n  Lines       54773    67498    +12725     \n  Branches     8168     9796     +1628     \n===========================================\n- Hits        36396    29395     -7001     \n- Misses      15700    35649    +19949     \n+ Partials     2677     2454      -223     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.54% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1414 more](https://codecov.io/gh/apache/incubator-pinot/pull/6664/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=footer). Last update [3b70930...b740d5e](https://codecov.io/gh/apache/incubator-pinot/pull/6664?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/795925891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796023553","html_url":"https://github.com/apache/pinot/pull/6666#issuecomment-796023553","issue_url":"https://api.github.com/repos/apache/pinot/issues/6666","id":796023553,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjAyMzU1Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T20:13:53Z","updated_at":"2021-03-10T20:13:53Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=h1) Report\n> Merging [#6666](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=desc) (b0c1fa6) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.33%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6666/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6666       +/-   ##\n===========================================\n- Coverage   66.44%   44.11%   -22.34%     \n===========================================\n  Files        1075     1361      +286     \n  Lines       54773    66523    +11750     \n  Branches     8168     9702     +1534     \n===========================================\n- Hits        36396    29347     -7049     \n- Misses      15700    34714    +19014     \n+ Partials     2677     2462      -215     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `44.11% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1387 more](https://codecov.io/gh/apache/incubator-pinot/pull/6666/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=footer). Last update [31bdc2b...b0c1fa6](https://codecov.io/gh/apache/incubator-pinot/pull/6666?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796023553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796275454","html_url":"https://github.com/apache/pinot/pull/6667#issuecomment-796275454","issue_url":"https://api.github.com/repos/apache/pinot/issues/6667","id":796275454,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjI3NTQ1NA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-10T23:15:58Z","updated_at":"2021-04-05T22:26:00Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=h1) Report\n> Merging [#6667](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=desc) (00b0f78) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/98faf2bfac7ec69ced93eec25cf57237a911c560?el=desc) (98faf2b) will **decrease** coverage by `7.63%`.\n> The diff coverage is `74.78%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6667/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #6667      +/-   ##\n============================================\n- Coverage     73.75%   66.11%   -7.64%     \n  Complexity       12       12              \n============================================\n  Files          1407     1408       +1     \n  Lines         68455    68548      +93     \n  Branches       9896     9905       +9     \n============================================\n- Hits          50489    45321    -5168     \n- Misses        14681    20015    +5334     \n+ Partials       3285     3212      -73     \n```\n\n| Flag | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| integration | `?` | `?` | |\n| unittests | `66.11% <74.78%> (+0.05%)` | `0.00 <0.00> (ø)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...metadata/segment/LLCRealtimeSegmentZKMetadata.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vbWV0YWRhdGEvc2VnbWVudC9MTENSZWFsdGltZVNlZ21lbnRaS01ldGFkYXRhLmphdmE=) | `45.90% <ø> (-1.72%)` | `0.00 <0.00> (ø)` | |\n| [...segment/SegmentSizeBasedFlushThresholdUpdater.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL3JlYWx0aW1lL3NlZ21lbnQvU2VnbWVudFNpemVCYXNlZEZsdXNoVGhyZXNob2xkVXBkYXRlci5qYXZh) | `70.58% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...ava/org/apache/pinot/spi/stream/LongMsgOffset.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL0xvbmdNc2dPZmZzZXQuamF2YQ==) | `92.30% <0.00%> (-7.70%)` | `0.00 <0.00> (ø)` | |\n| [...java/org/apache/pinot/spi/stream/MessageBatch.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL01lc3NhZ2VCYXRjaC5qYXZh) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...pache/pinot/spi/stream/PartitionLevelConsumer.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1BhcnRpdGlvbkxldmVsQ29uc3VtZXIuamF2YQ==) | `0.00% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...manager/realtime/LLRealtimeSegmentDataManager.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3QtY29yZS9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29yZS9kYXRhL21hbmFnZXIvcmVhbHRpbWUvTExSZWFsdGltZVNlZ21lbnREYXRhTWFuYWdlci5qYXZh) | `47.24% <38.46%> (-27.02%)` | `0.00 <0.00> (ø)` | |\n| [.../apache/pinot/spi/stream/PartitionGroupStatus.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1BhcnRpdGlvbkdyb3VwU3RhdHVzLmphdmE=) | `40.00% <40.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...n/java/org/apache/pinot/common/utils/URIUtils.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3QtY29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9jb21tb24vdXRpbHMvVVJJVXRpbHMuamF2YQ==) | `62.06% <62.50%> (+0.16%)` | `0.00 <0.00> (ø)` | |\n| [...roller/helix/core/PinotTableIdealStateBuilder.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3QtY29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY29udHJvbGxlci9oZWxpeC9jb3JlL1Bpbm90VGFibGVJZGVhbFN0YXRlQnVpbGRlci5qYXZh) | `79.74% <62.50%> (-0.52%)` | `0.00 <0.00> (ø)` | |\n| [...pache/pinot/spi/stream/StreamMetadataProvider.java](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree#diff-cGlub3Qtc3BpL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9zcGkvc3RyZWFtL1N0cmVhbU1ldGFkYXRhUHJvdmlkZXIuamF2YQ==) | `62.50% <71.42%> (+62.50%)` | `0.00 <0.00> (ø)` | |\n| ... and [346 more](https://codecov.io/gh/apache/incubator-pinot/pull/6667/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=footer). Last update [98faf2b...00b0f78](https://codecov.io/gh/apache/incubator-pinot/pull/6667?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796275454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796394907","html_url":"https://github.com/apache/pinot/issues/6628#issuecomment-796394907","issue_url":"https://api.github.com/repos/apache/pinot/issues/6628","id":796394907,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM5NDkwNw==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:50:06Z","updated_at":"2021-03-11T02:50:06Z","author_association":"CONTRIBUTOR","body":"#6668 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796394907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796398254","html_url":"https://github.com/apache/pinot/pull/6611#issuecomment-796398254","issue_url":"https://api.github.com/repos/apache/pinot/issues/6611","id":796398254,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NjM5ODI1NA==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T02:57:29Z","updated_at":"2021-03-11T02:57:29Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu would you please review again and unblock from merging?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/796398254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797022781","html_url":"https://github.com/apache/pinot/issues/6669#issuecomment-797022781","issue_url":"https://api.github.com/repos/apache/pinot/issues/6669","id":797022781,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzAyMjc4MQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-11T20:20:52Z","updated_at":"2021-03-11T20:20:52Z","author_association":"CONTRIBUTOR","body":"hmm, can you try to start pinot-controller/broker/server separately in your docker compose?\r\nMeanwhile, I will take a look at the issue.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797022781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797162771","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-797162771","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":797162771,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzE2Mjc3MQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T01:10:48Z","updated_at":"2021-03-12T01:10:48Z","author_association":"CONTRIBUTOR","body":"There are other issues with the lease extender as well, as pointed out by @Jackie-Jiang . Looks like things changed during controller distribution and the lease extender was not fixed right.\r\nOverall, here is what needs to happen:\r\n- Lease extended should get instantiated in HelixServerStarter instead of table data manager. It should also get stopped there. It should be instantiated without a table name , of course.\r\n- The addSegment API of lease extender should be called with an addition argument of protocol handler , so that the extend lease request goes to the right controller for the table.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797162771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797163409","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-797163409","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":797163409,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzE2MzQwOQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T01:12:41Z","updated_at":"2021-03-12T01:12:41Z","author_association":"CONTRIBUTOR","body":"Looks like leases have not been working right since PR #4323 on multi-tenant realtime clusters. no effect on single-tenant clusters.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797163409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797210352","html_url":"https://github.com/apache/pinot/issues/6674#issuecomment-797210352","issue_url":"https://api.github.com/repos/apache/pinot/issues/6674","id":797210352,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzIxMDM1Mg==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T03:30:51Z","updated_at":"2021-03-12T03:30:51Z","author_association":"CONTRIBUTOR","body":"FYI @KKcorps and @mcvsubbu ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797210352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797229234","html_url":"https://github.com/apache/pinot/issues/6674#issuecomment-797229234","issue_url":"https://api.github.com/repos/apache/pinot/issues/6674","id":797229234,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzIyOTIzNA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T04:39:30Z","updated_at":"2021-03-12T04:39:30Z","author_association":"CONTRIBUTOR","body":"Using every partition to update the ratio does not work. The ratio will be too biased towards the latest segment. Why can't we use the 0th partition group ID (which is still an integer) to update the ratio?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797229234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797239827","html_url":"https://github.com/apache/pinot/issues/6674#issuecomment-797239827","issue_url":"https://api.github.com/repos/apache/pinot/issues/6674","id":797239827,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzIzOTgyNw==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T05:14:46Z","updated_at":"2021-03-12T05:14:46Z","author_association":"CONTRIBUTOR","body":"Like I mentioned in the description, once partition group 0 reaches end of life, we're never going to get segments for partition group 0. Especially in the implementation we're rolling out in the first phase, shard id maps to partition group id. Once shard 0 is split, we no longer will get segments for partition group 0.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797239827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797260643","html_url":"https://github.com/apache/pinot/pull/6675#issuecomment-797260643","issue_url":"https://api.github.com/repos/apache/pinot/issues/6675","id":797260643,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzI2MDY0Mw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T06:10:55Z","updated_at":"2021-03-12T06:10:55Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=h1) Report\n> Merging [#6675](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=desc) (1ea5270) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `23.01%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6675/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6675       +/-   ##\n===========================================\n- Coverage   66.44%   43.42%   -23.02%     \n===========================================\n  Files        1075     1387      +312     \n  Lines       54773    67479    +12706     \n  Branches     8168     9793     +1625     \n===========================================\n- Hits        36396    29306     -7090     \n- Misses      15700    35728    +20028     \n+ Partials     2677     2445      -232     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.42% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1416 more](https://codecov.io/gh/apache/incubator-pinot/pull/6675/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=footer). Last update [31bdc2b...1ea5270](https://codecov.io/gh/apache/incubator-pinot/pull/6675?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797260643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797621136","html_url":"https://github.com/apache/pinot/issues/6674#issuecomment-797621136","issue_url":"https://api.github.com/repos/apache/pinot/issues/6674","id":797621136,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzYyMTEzNg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T16:57:29Z","updated_at":"2021-03-12T16:57:29Z","author_association":"CONTRIBUTOR","body":"If (integer) partition groups are going to reach end of life, we have other problems with kinesis support right?\r\nAnyways, we should pick one partition group ID to be representative in the segment size computation. Maybe we should introduce a way to discover the lowest partition group ID available, and use that as a representative.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797621136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797678097","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-797678097","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":797678097,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY3ODA5Nw==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T18:44:58Z","updated_at":"2021-03-12T18:47:54Z","author_association":"NONE","body":"@xulinjintu Also I was trying to compare the Azure to AWS and wondering whether it is possible to add (if not already added)  following information for Azure\r\na) Region\r\nb) Availability Zone\r\nc) Availability Set\r\nd) Fault Domain (Already included) \r\n\r\nThis will enable AWS also to use this implementation directly and potentially works for GCP too. Because AWS High Availability  is driven by Availability Zones and Regions . This in-turn also helps Azure as well because then you can cover any failures from a particular Availability zone which is highly important for a proper HA design.\r\n\r\nFYI    @kishoreg ,  @siddharthteotia  \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797678097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797680709","html_url":"https://github.com/apache/pinot/issues/6674#issuecomment-797680709","issue_url":"https://api.github.com/repos/apache/pinot/issues/6674","id":797680709,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY4MDcwOQ==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T18:50:38Z","updated_at":"2021-03-12T18:50:38Z","author_association":"CONTRIBUTOR","body":"Why do we have other problems? We knew about this behavior for Kinesis, and have handled it in the Kinesis PRs.\r\nSure we can pick 1 partition group. That was the option 2 that i mentioned. But we have to handle the case that the partition can cease to exist.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797680709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797682547","html_url":"https://github.com/apache/pinot/issues/6524#issuecomment-797682547","issue_url":"https://api.github.com/repos/apache/pinot/issues/6524","id":797682547,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY4MjU0Nw==","user":{"login":"johighley","id":24573172,"node_id":"MDQ6VXNlcjI0NTczMTcy","avatar_url":"https://avatars.githubusercontent.com/u/24573172?v=4","gravatar_id":"","url":"https://api.github.com/users/johighley","html_url":"https://github.com/johighley","followers_url":"https://api.github.com/users/johighley/followers","following_url":"https://api.github.com/users/johighley/following{/other_user}","gists_url":"https://api.github.com/users/johighley/gists{/gist_id}","starred_url":"https://api.github.com/users/johighley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johighley/subscriptions","organizations_url":"https://api.github.com/users/johighley/orgs","repos_url":"https://api.github.com/users/johighley/repos","events_url":"https://api.github.com/users/johighley/events{/privacy}","received_events_url":"https://api.github.com/users/johighley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T18:53:29Z","updated_at":"2021-03-12T18:53:29Z","author_association":"NONE","body":"I was told to add this use case to this issue:  We're ingesting millions of records via Kafka to a realtime table as fast as Pinot can consume them.  It's 1 record per message.  We need some way to monitor the message ingestion for failures, especially due to data issues (ex: alpha chars in numeric field, missing data, or json format issue).  Looking through server logs isn't practical.  Ideally, Pinot would provide the raw message and the error it encountered.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797682547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797692623","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-797692623","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":797692623,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzY5MjYyMw==","user":{"login":"xulinjintu","id":22777868,"node_id":"MDQ6VXNlcjIyNzc3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/22777868?v=4","gravatar_id":"","url":"https://api.github.com/users/xulinjintu","html_url":"https://github.com/xulinjintu","followers_url":"https://api.github.com/users/xulinjintu/followers","following_url":"https://api.github.com/users/xulinjintu/following{/other_user}","gists_url":"https://api.github.com/users/xulinjintu/gists{/gist_id}","starred_url":"https://api.github.com/users/xulinjintu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xulinjintu/subscriptions","organizations_url":"https://api.github.com/users/xulinjintu/orgs","repos_url":"https://api.github.com/users/xulinjintu/repos","events_url":"https://api.github.com/users/xulinjintu/events{/privacy}","received_events_url":"https://api.github.com/users/xulinjintu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T19:09:06Z","updated_at":"2021-03-12T19:09:06Z","author_association":"NONE","body":"> So in this case, we need to set server instances metadata and use it for segment assignment.\r\n> I feel the complication is that we need to handle rack metadata change which involves the segment assignment reblance.\r\n\r\n@fx19880617 This is the first step, instance assignment strategy will be addressed in another issue.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797692623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797704873","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-797704873","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":797704873,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzcwNDg3Mw==","user":{"login":"xulinjintu","id":22777868,"node_id":"MDQ6VXNlcjIyNzc3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/22777868?v=4","gravatar_id":"","url":"https://api.github.com/users/xulinjintu","html_url":"https://github.com/xulinjintu","followers_url":"https://api.github.com/users/xulinjintu/followers","following_url":"https://api.github.com/users/xulinjintu/following{/other_user}","gists_url":"https://api.github.com/users/xulinjintu/gists{/gist_id}","starred_url":"https://api.github.com/users/xulinjintu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xulinjintu/subscriptions","organizations_url":"https://api.github.com/users/xulinjintu/orgs","repos_url":"https://api.github.com/users/xulinjintu/repos","events_url":"https://api.github.com/users/xulinjintu/events{/privacy}","received_events_url":"https://api.github.com/users/xulinjintu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T19:29:09Z","updated_at":"2021-03-12T19:29:09Z","author_association":"NONE","body":"@pabrahamusa This can definitely be extended to AWS, the additional work would be implementing AWS metadata retrieval processors. Special configs for AWS might be needed. \r\n\r\nRegarding those properties we retrieve, I wonder if fault domain is unique across different regions. Availability zone is essentially a combination of FD and UD. Since update domains are subsets of fault domains, I wonder if we only need to FD to achieve HA.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797704873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797730137","html_url":"https://github.com/apache/pinot/pull/6678#issuecomment-797730137","issue_url":"https://api.github.com/repos/apache/pinot/issues/6678","id":797730137,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzczMDEzNw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T20:15:14Z","updated_at":"2021-03-12T20:15:14Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=h1) Report\n> Merging [#6678](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=desc) (4d64627) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `0.57%`.\n> The diff coverage is `62.64%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6678/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6678      +/-   ##\n==========================================\n- Coverage   66.44%   65.87%   -0.58%     \n==========================================\n  Files        1075     1387     +312     \n  Lines       54773    67487   +12714     \n  Branches     8168     9789    +1621     \n==========================================\n+ Hits        36396    44456    +8060     \n- Misses      15700    19876    +4176     \n- Partials     2677     3155     +478     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.87% <62.64%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `0.00% <0.00%> (-27.28%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `82.85% <ø> (+10.12%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| ... and [1271 more](https://codecov.io/gh/apache/incubator-pinot/pull/6678/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=footer). Last update [c982721...4d64627](https://codecov.io/gh/apache/incubator-pinot/pull/6678?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797730137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797732964","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-797732964","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":797732964,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzczMjk2NA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T20:21:27Z","updated_at":"2021-03-12T20:21:27Z","author_association":"CONTRIBUTOR","body":"cc: @snleee , @sajjad-moradi ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797732964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797811858","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-797811858","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":797811858,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzgxMTg1OA==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-12T23:27:33Z","updated_at":"2021-03-12T23:27:33Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797811858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797826488","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-797826488","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":797826488,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzgyNjQ4OA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T00:13:23Z","updated_at":"2021-03-17T20:08:26Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=h1) Report\n> Merging [#6680](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=desc) (86e8cdd) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.89%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6680/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6680       +/-   ##\n===========================================\n- Coverage   66.44%   43.55%   -22.90%     \n===========================================\n  Files        1075     1391      +316     \n  Lines       54773    67585    +12812     \n  Branches     8168     9794     +1626     \n===========================================\n- Hits        36396    29436     -6960     \n- Misses      15700    35681    +19981     \n+ Partials     2677     2468      -209     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.55% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1418 more](https://codecov.io/gh/apache/incubator-pinot/pull/6680/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=footer). Last update [d1cf36a...86e8cdd](https://codecov.io/gh/apache/incubator-pinot/pull/6680?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797826488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797837587","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-797837587","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":797837587,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzgzNzU4Nw==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T01:02:08Z","updated_at":"2021-03-13T01:02:08Z","author_association":"CONTRIBUTOR","body":"We should emit the metric like other server metrics and also see if the measurement can be made configurable via instance level config. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797837587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797838599","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-797838599","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":797838599,"node_id":"MDEyOklzc3VlQ29tbWVudDc5NzgzODU5OQ==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T01:07:22Z","updated_at":"2021-03-13T01:07:22Z","author_association":"CONTRIBUTOR","body":"> We should emit the metric like other server metrics and also see if the measurement can be made configurable via instance level config.\r\n\r\nThis is a query level metric. If we emit it as BrokerMetrics/BrokerGauge, the number of metrics will explode. But we can expose it as a part of query response metadata, just like numServersQueried/numDocsScanned). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797838599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797866334","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-797866334","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":797866334,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzg2NjMzNA==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T04:47:04Z","updated_at":"2021-03-13T04:48:12Z","author_association":"NONE","body":"@xulinjintu  Adding just FD should work if FD is unique per AZ.  However do you think it will be better to add  Availability Sets , FD and UD  to provide more granular control and flexibility on replicas?  For HA, Muti AZ is only needed where Single points of failure (SPOF) are eliminated with an N+1 or 2N redundancy configuration. And Muti Region design can bring other complexities like replication lag so we could potentially ignore Region all together.  Please note that In AWS instead of Availability Sets,FD and UD it is just AZ (Availability Zone). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797866334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797884568","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-797884568","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":797884568,"node_id":"MDEyOklzc3VlQ29tbWVudDc5Nzg4NDU2OA==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T07:42:55Z","updated_at":"2021-03-13T07:42:55Z","author_association":"CONTRIBUTOR","body":"> > We should emit the metric like other server metrics and also see if the measurement can be made configurable via instance level config.\r\n> \r\n> This is a query level metric. If we emit it as BrokerMetrics/BrokerGauge, the number of metrics will explode. But we can expose it as a part of query response metadata, just like numServersQueried/numDocsScanned).\r\n\r\nI don't follow. I am not sure how BrokerMetric or BrokerGauge is involved here in the server context.  From the server we should emit this query level metric and we should also include this as part of data table metadata (numDocsScanned etc) that is sent to the broker. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/797884568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798771506","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-798771506","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":798771506,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc3MTUwNg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T19:23:13Z","updated_at":"2021-03-13T19:23:13Z","author_association":"CONTRIBUTOR","body":"@pabrahamusa , @fx19880617 , the idea here is to make it cloud neutral. The goal is to assign instances in such a way that each instance for a table is in an \"island\". The definition of an \"island\" is cloud-specific. The requirement is that the provider gives a guarantee that should there be some planned outage, no two \"island\"s will be taken down at the same time. For Azure, this happens to be called Fault Domain. For a data center providing native hardware, this turns out to be \"rack\". If there are APIs to recognize the \"island\" to which an instance belongs (or, APIs to ask for N instances in N -- or even M  different islands), then we can potentially use those APIs to arrive at an optimal instance assignment for a table.\r\n\r\nThe approach followed is that we mark in a single place in zookeeper (at cluster level) the \"ID\" of the provider (e.g. \"Azure\" or \"XYZ\"). We then have specific paths in ZK where the characteristics, the API, perhaps the name of the plugin to be loaded, etc. are specified for the \"ID\" in question. \r\n\r\nIf the ID is not specified, an installation will not see any modifications to Znodes or any new znodes. @xulinjintu  is driving the design for this, so please provide input in the design document.\r\n\r\ncc: @kishoreg \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798771506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798779416","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-798779416","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":798779416,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc3OTQxNg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T20:19:36Z","updated_at":"2021-03-13T20:19:36Z","author_association":"CONTRIBUTOR","body":"Just to clarify:\r\nThe value returned is in nanos. Initially in the prototype I had this converted to milli seconds, and most values turned out to be 0 when dividing nanos by 1_000_000 to get millis. So I changed it to log the values in nanos, and found that the resolution was much better (i;.e. we get non-zero numbers). It is ok to convert to microseconds. Or just leave it at nanoseconds. But converting to millis will not work","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798779416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798779528","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-798779528","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":798779528,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODc3OTUyOA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-13T20:20:25Z","updated_at":"2021-03-13T20:20:25Z","author_association":"CONTRIBUTOR","body":"Let us settle to use nanosecond resolution.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798779528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798820118","html_url":"https://github.com/apache/pinot/pull/6681#issuecomment-798820118","issue_url":"https://api.github.com/repos/apache/pinot/issues/6681","id":798820118,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODgyMDExOA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T02:09:14Z","updated_at":"2021-03-14T10:28:39Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=h1) Report\n> Merging [#6681](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=desc) (a36c73e) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `0.58%`.\n> The diff coverage is `62.64%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6681/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=tree)\n\n```diff\n@@            Coverage Diff             @@\n##           master    #6681      +/-   ##\n==========================================\n- Coverage   66.44%   65.86%   -0.59%     \n==========================================\n  Files        1075     1388     +313     \n  Lines       54773    67494   +12721     \n  Branches     8168     9790    +1622     \n==========================================\n+ Hits        36396    44457    +8061     \n- Misses      15700    19882    +4182     \n- Partials     2677     3155     +478     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| unittests | `65.86% <62.64%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...e/pinot/broker/api/resources/PinotBrokerDebug.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdEJyb2tlckRlYnVnLmphdmE=) | `0.00% <0.00%> (-79.32%)` | :arrow_down: |\n| [...pinot/broker/api/resources/PinotClientRequest.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYXBpL3Jlc291cmNlcy9QaW5vdENsaWVudFJlcXVlc3QuamF2YQ==) | `0.00% <0.00%> (-27.28%)` | :arrow_down: |\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `71.42% <ø> (-28.58%)` | :arrow_down: |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `33.96% <0.00%> (-32.71%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ava/org/apache/pinot/client/AbstractResultSet.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Fic3RyYWN0UmVzdWx0U2V0LmphdmE=) | `66.66% <ø> (+9.52%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/BrokerResponse.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Jyb2tlclJlc3BvbnNlLmphdmE=) | `100.00% <ø> (ø)` | |\n| [.../main/java/org/apache/pinot/client/Connection.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0Nvbm5lY3Rpb24uamF2YQ==) | `35.55% <ø> (-13.29%)` | :arrow_down: |\n| [...org/apache/pinot/client/DynamicBrokerSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0R5bmFtaWNCcm9rZXJTZWxlY3Rvci5qYXZh) | `82.85% <ø> (+10.12%)` | :arrow_up: |\n| [...n/java/org/apache/pinot/client/ExecutionStats.java](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree#diff-cGlub3QtY2xpZW50cy9waW5vdC1qYXZhLWNsaWVudC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcGlub3QvY2xpZW50L0V4ZWN1dGlvblN0YXRzLmphdmE=) | `68.88% <ø> (ø)` | |\n| ... and [1273 more](https://codecov.io/gh/apache/incubator-pinot/pull/6681/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=footer). Last update [53c2a3c...a36c73e](https://codecov.io/gh/apache/incubator-pinot/pull/6681?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798820118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798982231","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-798982231","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":798982231,"node_id":"MDEyOklzc3VlQ29tbWVudDc5ODk4MjIzMQ==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-14T21:22:20Z","updated_at":"2021-03-14T21:22:20Z","author_association":"CONTRIBUTOR","body":"> Just to clarify:\r\n> The value returned is in nanos. Initially in the prototype I had this converted to milli seconds, and most values turned out to be 0 when dividing nanos by 1_000_000 to get millis. So I changed it to log the values in nanos, and found that the resolution was much better (i;.e. we get non-zero numbers). It is ok to convert to microseconds. Or just leave it at nanoseconds. But converting to millis will not work\r\n\r\nAgreed. I also prefer nano resolution here.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/798982231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799620806","html_url":"https://github.com/apache/pinot/pull/6682#issuecomment-799620806","issue_url":"https://api.github.com/repos/apache/pinot/issues/6682","id":799620806,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTYyMDgwNg==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T17:51:06Z","updated_at":"2021-03-15T17:51:06Z","author_association":"CONTRIBUTOR","body":"#6671 ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799620806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799623646","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-799623646","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":799623646,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTYyMzY0Ng==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T17:55:17Z","updated_at":"2021-03-15T18:03:36Z","author_association":"CONTRIBUTOR","body":"1. The routing back to the proper leader controller has been happening. `ServerSegmentCompletionProtocolHandler:createSegmentCompletionUrl()`. \r\n2. The main issue was that the server-side only had the lease extender per instance id, so each server has had 1 single global lease extender. `shutdown()` call from a single data manager affected the lease extender for other data managers.\r\n3. @jtao15's fix changes servers to have lease extender per table. I think that this is cleaner and even simpler than having one global lease extender (1-1 mapping for lease extender - data manager for a table). It turns out that `ServerSegmentCompletionProtocolHandler` needs the table name so we actually need to instantiate the lease extender with the table name.\r\n\r\n@mcvsubbu How do you think? Can you also review the above PR?","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799623646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799636614","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-799636614","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":799636614,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTYzNjYxNA==","user":{"login":"Jackie-Jiang","id":17555551,"node_id":"MDQ6VXNlcjE3NTU1NTUx","avatar_url":"https://avatars.githubusercontent.com/u/17555551?v=4","gravatar_id":"","url":"https://api.github.com/users/Jackie-Jiang","html_url":"https://github.com/Jackie-Jiang","followers_url":"https://api.github.com/users/Jackie-Jiang/followers","following_url":"https://api.github.com/users/Jackie-Jiang/following{/other_user}","gists_url":"https://api.github.com/users/Jackie-Jiang/gists{/gist_id}","starred_url":"https://api.github.com/users/Jackie-Jiang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jackie-Jiang/subscriptions","organizations_url":"https://api.github.com/users/Jackie-Jiang/orgs","repos_url":"https://api.github.com/users/Jackie-Jiang/repos","events_url":"https://api.github.com/users/Jackie-Jiang/events{/privacy}","received_events_url":"https://api.github.com/users/Jackie-Jiang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T18:11:34Z","updated_at":"2021-03-15T18:11:34Z","author_association":"CONTRIBUTOR","body":"Instance pool concept can be used as the availability set. Please read: https://docs.pinot.apache.org/operators/operating-pinot/instance-assignment#pool-based-instance-assignment for more context","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799636614/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799773072","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-799773072","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":799773072,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTc3MzA3Mg==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T21:44:32Z","updated_at":"2021-03-15T21:44:32Z","author_association":"CONTRIBUTOR","body":"@snleee  The existing implementation may not route to the correct controller in multi-tenant use cases. If you notice, the constructor of lease extender takes a table name, and that table name is used to find the controller to talk to.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799773072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799799483","html_url":"https://github.com/apache/pinot/issues/6671#issuecomment-799799483","issue_url":"https://api.github.com/repos/apache/pinot/issues/6671","id":799799483,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTc5OTQ4Mw==","user":{"login":"snleee","id":27253407,"node_id":"MDQ6VXNlcjI3MjUzNDA3","avatar_url":"https://avatars.githubusercontent.com/u/27253407?v=4","gravatar_id":"","url":"https://api.github.com/users/snleee","html_url":"https://github.com/snleee","followers_url":"https://api.github.com/users/snleee/followers","following_url":"https://api.github.com/users/snleee/following{/other_user}","gists_url":"https://api.github.com/users/snleee/gists{/gist_id}","starred_url":"https://api.github.com/users/snleee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snleee/subscriptions","organizations_url":"https://api.github.com/users/snleee/orgs","repos_url":"https://api.github.com/users/snleee/repos","events_url":"https://api.github.com/users/snleee/events{/privacy}","received_events_url":"https://api.github.com/users/snleee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-15T22:32:52Z","updated_at":"2021-03-15T22:32:52Z","author_association":"CONTRIBUTOR","body":"@mcvsubbu You're right. I got confused. It keeps using the same lease extender since it looks up based on the instanceId","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799799483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799842929","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-799842929","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":799842929,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTg0MjkyOQ==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T00:05:41Z","updated_at":"2021-03-16T00:05:41Z","author_association":"CONTRIBUTOR","body":"> Do you need to change LLCSegmentCompletionHandlers to pay attention to the auth token?\r\n\r\nProbably. I'd appreciate your input on where this actually talks to controller APIs. I just noticed that this whole set of endpoints was excluded from my checklist (via swagger)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799842929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799867494","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-799867494","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":799867494,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTg2NzQ5NA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T01:09:39Z","updated_at":"2021-03-16T01:09:39Z","author_association":"CONTRIBUTOR","body":"> > Do you need to change LLCSegmentCompletionHandlers to pay attention to the auth token?\r\n> \r\n> Probably. I'd appreciate your input on where this actually talks to controller APIs. I just noticed that this whole set of endpoints was excluded from my checklist (via swagger)\r\n\r\nThese endpoints should not appear in Swagger because they are used by pinot-server to commit realtime segments using the segment commit protocol. They are not meant for administrative or user actions. These are completely pinot internal operations.\r\nThe client side of this call is in ServerSegmentProtocolCompletionHandler.\r\n\r\nIf you can make these changes in another PR, that will help reviewing a bit. If I miss something and it causes realtime segments not to complete segments, that will be really bad. \r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799867494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799883906","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-799883906","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":799883906,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTg4MzkwNg==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T01:57:35Z","updated_at":"2021-03-16T01:57:35Z","author_association":"CONTRIBUTOR","body":"> > > Do you need to change LLCSegmentCompletionHandlers to pay attention to the auth token?\r\n> > \r\n> > \r\n> > Probably. I'd appreciate your input on where this actually talks to controller APIs. I just noticed that this whole set of endpoints was excluded from my checklist (via swagger)\r\n> \r\n> These endpoints should not appear in Swagger because they are used by pinot-server to commit realtime segments using the segment commit protocol. They are not meant for administrative or user actions. These are completely pinot internal operations.\r\n> The client side of this call is in ServerSegmentProtocolCompletionHandler.\r\n> \r\n> If you can make these changes in another PR, that will help reviewing a bit. If I miss something and it causes realtime segments not to complete segments, that will be really bad.\r\n\r\n`ServerSegmentProtocolCompletionHandler` already has an `_authToken`. Imo the most important thing right now is getting out integration tests - batch is done, realtime is in the works.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799883906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799909360","html_url":"https://github.com/apache/pinot/pull/6682#issuecomment-799909360","issue_url":"https://api.github.com/repos/apache/pinot/issues/6682","id":799909360,"node_id":"MDEyOklzc3VlQ29tbWVudDc5OTkwOTM2MA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T03:09:33Z","updated_at":"2021-03-16T03:09:33Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=h1) Report\n> Merging [#6682](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=desc) (ada5299) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.97%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6682/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6682       +/-   ##\n===========================================\n- Coverage   66.44%   43.47%   -22.98%     \n===========================================\n  Files        1075     1388      +313     \n  Lines       54773    67508    +12735     \n  Branches     8168     9792     +1624     \n===========================================\n- Hits        36396    29346     -7050     \n- Misses      15700    35700    +20000     \n+ Partials     2677     2462      -215     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.47% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1414 more](https://codecov.io/gh/apache/incubator-pinot/pull/6682/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=footer). Last update [d877558...ada5299](https://codecov.io/gh/apache/incubator-pinot/pull/6682?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/799909360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800546727","html_url":"https://github.com/apache/pinot/pull/6665#issuecomment-800546727","issue_url":"https://api.github.com/repos/apache/pinot/issues/6665","id":800546727,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDU0NjcyNw==","user":{"login":"npawar","id":19693933,"node_id":"MDQ6VXNlcjE5NjkzOTMz","avatar_url":"https://avatars.githubusercontent.com/u/19693933?v=4","gravatar_id":"","url":"https://api.github.com/users/npawar","html_url":"https://github.com/npawar","followers_url":"https://api.github.com/users/npawar/followers","following_url":"https://api.github.com/users/npawar/following{/other_user}","gists_url":"https://api.github.com/users/npawar/gists{/gist_id}","starred_url":"https://api.github.com/users/npawar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/npawar/subscriptions","organizations_url":"https://api.github.com/users/npawar/orgs","repos_url":"https://api.github.com/users/npawar/repos","events_url":"https://api.github.com/users/npawar/events{/privacy}","received_events_url":"https://api.github.com/users/npawar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T19:32:51Z","updated_at":"2021-03-16T19:32:51Z","author_association":"CONTRIBUTOR","body":"@icefury71 not part of this PR but related. Do we also want to add the \"queryConsoleViewOnly\" property to HelixSetupUtils with default false? I'm thinking not from the perspective of default value for UI, but more for how will anyone discover this property exists, unless they look at UI code. If the default prop is added, it will show up in the cluster configs.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800546727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800583293","html_url":"https://github.com/apache/pinot/pull/6665#issuecomment-800583293","issue_url":"https://api.github.com/repos/apache/pinot/issues/6665","id":800583293,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDU4MzI5Mw==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T20:30:46Z","updated_at":"2021-03-16T20:30:46Z","author_association":"CONTRIBUTOR","body":"> @icefury71 not part of this PR but related. Do we also want to add the \"queryConsoleViewOnly\" property to HelixSetupUtils with default false? I'm thinking not from the perspective of default value for UI, but more for how will anyone discover this property exists, unless they look at UI code. If the default prop is added, it will show up in the cluster configs.\r\n\r\nYep - will open a simple PR for that","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800583293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800619799","html_url":"https://github.com/apache/pinot/pull/6685#issuecomment-800619799","issue_url":"https://api.github.com/repos/apache/pinot/issues/6685","id":800619799,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYxOTc5OQ==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:31:07Z","updated_at":"2021-03-16T21:31:07Z","author_association":"CONTRIBUTOR","body":"Isnt it better to have a property called clusterUI and set it to different modes? Query-only can be one mode, The next level can be query and data push and the next level can be to change table properties and the one after that will. be cluster admin,","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800619799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800622763","html_url":"https://github.com/apache/pinot/pull/6685#issuecomment-800622763","issue_url":"https://api.github.com/repos/apache/pinot/issues/6685","id":800622763,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYyMjc2Mw==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:37:00Z","updated_at":"2021-03-16T21:37:00Z","author_association":"CONTRIBUTOR","body":"> Isnt it better to have a property called clusterUI and set it to different modes? Query-only can be one mode, The next level can be query and data push and the next level can be to change table properties and the one after that will. be cluster admin,\r\n\r\nGood point - on that note - the more comprehensive solution will be to integrate UI with the AuthN/Z scheme Alex is working on (in conjunction with something like RBAC). We should discuss that in detail once the backend is ready. Adding flags for all such combinations might be a bit of an overhead. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800622763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800623814","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-800623814","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":800623814,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYyMzgxNA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:39:01Z","updated_at":"2021-03-16T21:39:01Z","author_association":"CONTRIBUTOR","body":"> > > > Do you need to change LLCSegmentCompletionHandlers to pay attention to the auth token?\r\n> > > \r\n> > > \r\n> > > Probably. I'd appreciate your input on where this actually talks to controller APIs. I just noticed that this whole set of endpoints was excluded from my checklist (via swagger)\r\n> > \r\n> > \r\n> > These endpoints should not appear in Swagger because they are used by pinot-server to commit realtime segments using the segment commit protocol. They are not meant for administrative or user actions. These are completely pinot internal operations.\r\n> > The client side of this call is in ServerSegmentProtocolCompletionHandler.\r\n> > If you can make these changes in another PR, that will help reviewing a bit. If I miss something and it causes realtime segments not to complete segments, that will be really bad.\r\n> \r\n> `ServerSegmentProtocolCompletionHandler` already has an `_authToken`. Imo the most important thing right now is getting out integration tests - batch is done, realtime is in the works.\r\n\r\nWorking the entire realtime flow inside an integration test is definitely useful. Where I am afraid things ay break is if servers are running older version and controllers newer, or vice versa. Realtime segment upload failure will block realtime consumption. If you can ascertain that as long as auth tokens are not configured anywhere the behavior is the same that would be awesome.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800623814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800633318","html_url":"https://github.com/apache/pinot/pull/6685#issuecomment-800633318","issue_url":"https://api.github.com/repos/apache/pinot/issues/6685","id":800633318,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYzMzMxOA==","user":{"login":"mcvsubbu","id":2279037,"node_id":"MDQ6VXNlcjIyNzkwMzc=","avatar_url":"https://avatars.githubusercontent.com/u/2279037?v=4","gravatar_id":"","url":"https://api.github.com/users/mcvsubbu","html_url":"https://github.com/mcvsubbu","followers_url":"https://api.github.com/users/mcvsubbu/followers","following_url":"https://api.github.com/users/mcvsubbu/following{/other_user}","gists_url":"https://api.github.com/users/mcvsubbu/gists{/gist_id}","starred_url":"https://api.github.com/users/mcvsubbu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mcvsubbu/subscriptions","organizations_url":"https://api.github.com/users/mcvsubbu/orgs","repos_url":"https://api.github.com/users/mcvsubbu/repos","events_url":"https://api.github.com/users/mcvsubbu/events{/privacy}","received_events_url":"https://api.github.com/users/mcvsubbu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:45:58Z","updated_at":"2021-03-16T21:45:58Z","author_association":"CONTRIBUTOR","body":"> > Isnt it better to have a property called clusterUI and set it to different modes? Query-only can be one mode, The next level can be query and data push and the next level can be to change table properties and the one after that will. be cluster admin,\r\n> \r\n> Good point - on that note - the more comprehensive solution will be to integrate UI with the AuthN/Z scheme Alex is working on (in conjunction with something like RBAC). We should discuss that in detail once the backend is ready. Adding flags for all such combinations might be a bit of an overhead.\r\n\r\nExactly. So, just add a UIMode. For starters, we will recognize an unset field (meaning all are allowed) or \"QueryConsoleOnly\".\r\n\r\nAnother way to do this will be to provide different http endpoints for the capabilities, but if we wanted step-wise capability, this will be a lot more code (or at least instances of code) but then may provide an easier path towards password on the console? (not sure)","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800633318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800634068","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-800634068","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":800634068,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYzNDA2OA==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:47:29Z","updated_at":"2021-03-16T21:47:29Z","author_association":"CONTRIBUTOR","body":"> Working the entire realtime flow inside an integration test is definitely useful. Where I am afraid things ay break is if servers are running older version and controllers newer, or vice versa. Realtime segment upload failure will block realtime consumption. If you can ascertain that as long as auth tokens are not configured anywhere the behavior is the same that would be awesome.\r\n\r\nFortunately, there aren't any logic changes here. Any auth tokens are passed via http headers and are therefore fully backwards-compatible.\r\n\r\nThe only way the segment upload can break is if controllers are configured to expect auth headers, while servers don't provide any. This would be an operations / configuration error, however. The inverse, i.e. servers providing auth headers without controllers expecting them, will work without issues (this also enables zero-downtime upgrades to authentication).","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800634068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800638140","html_url":"https://github.com/apache/pinot/pull/6685#issuecomment-800638140","issue_url":"https://api.github.com/repos/apache/pinot/issues/6685","id":800638140,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDYzODE0MA==","user":{"login":"icefury71","id":728023,"node_id":"MDQ6VXNlcjcyODAyMw==","avatar_url":"https://avatars.githubusercontent.com/u/728023?v=4","gravatar_id":"","url":"https://api.github.com/users/icefury71","html_url":"https://github.com/icefury71","followers_url":"https://api.github.com/users/icefury71/followers","following_url":"https://api.github.com/users/icefury71/following{/other_user}","gists_url":"https://api.github.com/users/icefury71/gists{/gist_id}","starred_url":"https://api.github.com/users/icefury71/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icefury71/subscriptions","organizations_url":"https://api.github.com/users/icefury71/orgs","repos_url":"https://api.github.com/users/icefury71/repos","events_url":"https://api.github.com/users/icefury71/events{/privacy}","received_events_url":"https://api.github.com/users/icefury71/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T21:54:43Z","updated_at":"2021-03-16T21:54:43Z","author_association":"CONTRIBUTOR","body":"> > > Isnt it better to have a property called clusterUI and set it to different modes? Query-only can be one mode, The next level can be query and data push and the next level can be to change table properties and the one after that will. be cluster admin,\r\n> > \r\n> > \r\n> > Good point - on that note - the more comprehensive solution will be to integrate UI with the AuthN/Z scheme Alex is working on (in conjunction with something like RBAC). We should discuss that in detail once the backend is ready. Adding flags for all such combinations might be a bit of an overhead.\r\n> \r\n> Exactly. So, just add a UIMode. For starters, we will recognize an unset field (meaning all are allowed) or \"QueryConsoleOnly\".\r\n> \r\n> Another way to do this will be to provide different http endpoints for the capabilities, but if we wanted step-wise capability, this will be a lot more code (or at least instances of code) but then may provide an easier path towards password on the console? (not sure)\r\n\r\nWe don't need to rely on flags for the advanced controls. For eg: Alex's PR adds an API for exposing the security capability configured within Pinot (None, Basic, OAuth2, ...). Cluster Manager should be able to use that API and figure out what needs to be done. Eg: for \"Basic\" -> display a login screen for username and password (in fact this PR is in progress as we speak). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800638140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800730885","html_url":"https://github.com/apache/pinot/pull/6672#issuecomment-800730885","issue_url":"https://api.github.com/repos/apache/pinot/issues/6672","id":800730885,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDczMDg4NQ==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T01:48:12Z","updated_at":"2021-03-17T01:48:12Z","author_association":"CONTRIBUTOR","body":"integration test stuck ~2 hours, close and re-open to trigger a re-run.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800730885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800757757","html_url":"https://github.com/apache/pinot/pull/6684#issuecomment-800757757","issue_url":"https://api.github.com/repos/apache/pinot/issues/6684","id":800757757,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDc1Nzc1Nw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T03:07:41Z","updated_at":"2021-03-17T08:14:09Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=h1) Report\n> Merging [#6684](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=desc) (92ad68a) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.91%`.\n> The diff coverage is `42.93%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6684/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6684       +/-   ##\n===========================================\n- Coverage   66.44%   43.52%   -22.92%     \n===========================================\n  Files        1075     1390      +315     \n  Lines       54773    67538    +12765     \n  Branches     8168     9793     +1625     \n===========================================\n- Hits        36396    29399     -6997     \n- Misses      15700    35673    +19973     \n+ Partials     2677     2466      -211     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.52% <42.93%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1416 more](https://codecov.io/gh/apache/incubator-pinot/pull/6684/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=footer). Last update [d1cf36a...92ad68a](https://codecov.io/gh/apache/incubator-pinot/pull/6684?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800757757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800820919","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-800820919","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":800820919,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDgyMDkxOQ==","user":{"login":"siddharthteotia","id":2150694,"node_id":"MDQ6VXNlcjIxNTA2OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2150694?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharthteotia","html_url":"https://github.com/siddharthteotia","followers_url":"https://api.github.com/users/siddharthteotia/followers","following_url":"https://api.github.com/users/siddharthteotia/following{/other_user}","gists_url":"https://api.github.com/users/siddharthteotia/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharthteotia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharthteotia/subscriptions","organizations_url":"https://api.github.com/users/siddharthteotia/orgs","repos_url":"https://api.github.com/users/siddharthteotia/repos","events_url":"https://api.github.com/users/siddharthteotia/events{/privacy}","received_events_url":"https://api.github.com/users/siddharthteotia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T06:03:38Z","updated_at":"2021-03-17T06:03:38Z","author_association":"CONTRIBUTOR","body":"@mqliang , can you please rebase this PR since https://github.com/apache/incubator-pinot/pull/6672 has been merged\r\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800820919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800831123","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-800831123","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":800831123,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDgzMTEyMw==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T06:27:03Z","updated_at":"2021-03-17T06:27:17Z","author_association":"CONTRIBUTOR","body":"@siddharthteotia rebased and all comments addressed.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800831123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800843180","html_url":"https://github.com/apache/pinot/pull/6690#issuecomment-800843180","issue_url":"https://api.github.com/repos/apache/pinot/issues/6690","id":800843180,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDg0MzE4MA==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T06:51:51Z","updated_at":"2021-03-17T06:51:51Z","author_association":"CONTRIBUTOR","body":"integration test failed due to flaky networking (`Could not transfer artifact software.amazon.awssdk:aws-xml-protocol:jar:2.13.46 from/to central (https://repo.maven.apache.org/maven2)`). \r\n\r\nClose and re-open to trigger a re-run.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800843180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800922616","html_url":"https://github.com/apache/pinot/pull/6690#issuecomment-800922616","issue_url":"https://api.github.com/repos/apache/pinot/issues/6690","id":800922616,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDkyMjYxNg==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T09:12:18Z","updated_at":"2021-03-17T09:12:18Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=h1) Report\n> Merging [#6690](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=desc) (5f9fdc1) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `23.03%`.\n> The diff coverage is `42.85%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6690/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6690       +/-   ##\n===========================================\n- Coverage   66.44%   43.41%   -23.04%     \n===========================================\n  Files        1075     1390      +315     \n  Lines       54773    67536    +12763     \n  Branches     8168     9793     +1625     \n===========================================\n- Hits        36396    29322     -7074     \n- Misses      15700    35743    +20043     \n+ Partials     2677     2471      -206     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.41% <42.85%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1415 more](https://codecov.io/gh/apache/incubator-pinot/pull/6690/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=footer). Last update [d1cf36a...5f9fdc1](https://codecov.io/gh/apache/incubator-pinot/pull/6690?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/800922616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801201275","html_url":"https://github.com/apache/pinot/issues/6532#issuecomment-801201275","issue_url":"https://api.github.com/repos/apache/pinot/issues/6532","id":801201275,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTIwMTI3NQ==","user":{"login":"opschronicle","id":47830507,"node_id":"MDQ6VXNlcjQ3ODMwNTA3","avatar_url":"https://avatars.githubusercontent.com/u/47830507?v=4","gravatar_id":"","url":"https://api.github.com/users/opschronicle","html_url":"https://github.com/opschronicle","followers_url":"https://api.github.com/users/opschronicle/followers","following_url":"https://api.github.com/users/opschronicle/following{/other_user}","gists_url":"https://api.github.com/users/opschronicle/gists{/gist_id}","starred_url":"https://api.github.com/users/opschronicle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/opschronicle/subscriptions","organizations_url":"https://api.github.com/users/opschronicle/orgs","repos_url":"https://api.github.com/users/opschronicle/repos","events_url":"https://api.github.com/users/opschronicle/events{/privacy}","received_events_url":"https://api.github.com/users/opschronicle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T15:59:23Z","updated_at":"2021-03-17T15:59:23Z","author_association":"NONE","body":"@mcvsubbu I am  using AWS so the terms could be more AWS specific. However anything like 'island'  will  cover my requirement and should work for all cloud providers as well. \r\n\r\nSo for AWS to achieve HA the steps could be\r\n\r\na) Dynamic tag segment with island(FD/AZ).  (Current PR)\r\nb) Dynamic tag servers based on island(FD/AZ).  (https://github.com/apache/incubator-pinot/issues/6688)\r\nc) All I have to do is to just provide an implementation for AWS metadata fetch as @xulinjintu suggested and rest should work for me. ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801201275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801255621","html_url":"https://github.com/apache/pinot/pull/6613#issuecomment-801255621","issue_url":"https://api.github.com/repos/apache/pinot/issues/6613","id":801255621,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTI1NTYyMQ==","user":{"login":"apucher","id":25439965,"node_id":"MDQ6VXNlcjI1NDM5OTY1","avatar_url":"https://avatars.githubusercontent.com/u/25439965?v=4","gravatar_id":"","url":"https://api.github.com/users/apucher","html_url":"https://github.com/apucher","followers_url":"https://api.github.com/users/apucher/followers","following_url":"https://api.github.com/users/apucher/following{/other_user}","gists_url":"https://api.github.com/users/apucher/gists{/gist_id}","starred_url":"https://api.github.com/users/apucher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/apucher/subscriptions","organizations_url":"https://api.github.com/users/apucher/orgs","repos_url":"https://api.github.com/users/apucher/repos","events_url":"https://api.github.com/users/apucher/events{/privacy}","received_events_url":"https://api.github.com/users/apucher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T17:07:56Z","updated_at":"2021-03-17T17:07:56Z","author_association":"CONTRIBUTOR","body":"> I think it should be \"AccessType\" because AccessControl.hasAccess() takes an AccessType object as its argument. Implementations of AccessControl can't change AccessType.\r\n\r\nI agree with this from the controller side, however, `AccessType` is a controller concept only - broker implementations may specify other types of access in an extensible way. One could imagine limiting access to PII data and similar","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801255621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801320325","html_url":"https://github.com/apache/pinot/issues/6688#issuecomment-801320325","issue_url":"https://api.github.com/repos/apache/pinot/issues/6688","id":801320325,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTMyMDMyNQ==","user":{"login":"xulinjintu","id":22777868,"node_id":"MDQ6VXNlcjIyNzc3ODY4","avatar_url":"https://avatars.githubusercontent.com/u/22777868?v=4","gravatar_id":"","url":"https://api.github.com/users/xulinjintu","html_url":"https://github.com/xulinjintu","followers_url":"https://api.github.com/users/xulinjintu/followers","following_url":"https://api.github.com/users/xulinjintu/following{/other_user}","gists_url":"https://api.github.com/users/xulinjintu/gists{/gist_id}","starred_url":"https://api.github.com/users/xulinjintu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xulinjintu/subscriptions","organizations_url":"https://api.github.com/users/xulinjintu/orgs","repos_url":"https://api.github.com/users/xulinjintu/repos","events_url":"https://api.github.com/users/xulinjintu/events{/privacy}","received_events_url":"https://api.github.com/users/xulinjintu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T18:38:19Z","updated_at":"2021-03-17T18:38:19Z","author_association":"NONE","body":"PS: I chose the cloud neutral term \"Failure Domain\" by referencing [wikipedia](https://en.wikipedia.org/wiki/Failure_domain). ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801320325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801328858","html_url":"https://github.com/apache/pinot/issues/6692#issuecomment-801328858","issue_url":"https://api.github.com/repos/apache/pinot/issues/6692","id":801328858,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTMyODg1OA==","user":{"login":"xiangfu0","id":1202120,"node_id":"MDQ6VXNlcjEyMDIxMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1202120?v=4","gravatar_id":"","url":"https://api.github.com/users/xiangfu0","html_url":"https://github.com/xiangfu0","followers_url":"https://api.github.com/users/xiangfu0/followers","following_url":"https://api.github.com/users/xiangfu0/following{/other_user}","gists_url":"https://api.github.com/users/xiangfu0/gists{/gist_id}","starred_url":"https://api.github.com/users/xiangfu0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiangfu0/subscriptions","organizations_url":"https://api.github.com/users/xiangfu0/orgs","repos_url":"https://api.github.com/users/xiangfu0/repos","events_url":"https://api.github.com/users/xiangfu0/events{/privacy}","received_events_url":"https://api.github.com/users/xiangfu0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T18:52:25Z","updated_at":"2021-03-17T18:52:25Z","author_association":"CONTRIBUTOR","body":"This seems to be an issue of license check.\r\nCan you try to add `-Drat.skip=true` into your maven command to bypass this error ?\r\nOr you can add the exclude for `apache-rat-plugin` section into root `pom.xml` file, after line here: https://github.com/apache/incubator-pinot/blob/621ceb021cefa1640708f3bb4d576270717f70d6/pom.xml#L1636","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801328858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801488551","html_url":"https://github.com/apache/pinot/pull/6693#issuecomment-801488551","issue_url":"https://api.github.com/repos/apache/pinot/issues/6693","id":801488551,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTQ4ODU1MQ==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-17T22:40:44Z","updated_at":"2021-03-17T22:40:44Z","author_association":"CONTRIBUTOR","body":"unit test failed due to flaky networking:\r\n```\r\nError:  Failed to execute goal on project pinot-kafka-0.9: Could not resolve dependencies for project org.apache.pinot:pinot-kafka-0.9:jar:0.7.0-SNAPSHOT: Failed to collect dependencies at org.apache.kafka:kafka_2.10:jar:0.9.0.1: Failed to read artifact descriptor for org.apache.kafka:kafka_2.10:jar:0.9.0.1: Could not transfer artifact org.apache.kafka:kafka_2.10:pom:0.9.0.1 from/to central (https://repo.maven.apache.org/maven2): Transfer failed for https://repo.maven.apache.org/maven2/org/apache/kafka/kafka_2.10/0.9.0.1/kafka_2.10-0.9.0.1.pom: Connection reset -> [Help 1]\r\n```\r\n\r\nclose&re-open to trigger a re-run.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801488551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801521348","html_url":"https://github.com/apache/pinot/pull/6693#issuecomment-801521348","issue_url":"https://api.github.com/repos/apache/pinot/issues/6693","id":801521348,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTUyMTM0OA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-18T00:09:39Z","updated_at":"2021-03-18T04:15:03Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=h1) Report\n> Merging [#6693](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=desc) (5170a40) into [master](https://codecov.io/gh/apache/incubator-pinot/commit/1beaab59b73f26c4e35f3b9bc856b03806cddf5a?el=desc) (1beaab5) will **decrease** coverage by `22.95%`.\n> The diff coverage is `42.93%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-pinot/pull/6693/graphs/tree.svg?width=650&height=150&src=pr&token=4ibza2ugkz)](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff             @@\n##           master    #6693       +/-   ##\n===========================================\n- Coverage   66.44%   43.49%   -22.96%     \n===========================================\n  Files        1075     1390      +315     \n  Lines       54773    67538    +12765     \n  Branches     8168     9793     +1625     \n===========================================\n- Hits        36396    29375     -7021     \n- Misses      15700    35703    +20003     \n+ Partials     2677     2460      -217     \n```\n\n| Flag | Coverage Δ | |\n|---|---|---|\n| integration | `43.49% <42.93%> (?)` | |\n\nFlags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags#carryforward-flags-in-the-pull-request-comment) to find out more.\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=tree) | Coverage Δ | |\n|---|---|---|\n| [...ot/broker/broker/AllowAllAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0FsbG93QWxsQWNjZXNzQ29udHJvbEZhY3RvcnkuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...t/broker/broker/BasicAuthAccessControlFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL0Jhc2ljQXV0aEFjY2Vzc0NvbnRyb2xGYWN0b3J5LmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [.../helix/BrokerUserDefinedMessageHandlerFactory.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvYnJva2VyL2hlbGl4L0Jyb2tlclVzZXJEZWZpbmVkTWVzc2FnZUhhbmRsZXJGYWN0b3J5LmphdmE=) | `52.83% <0.00%> (-13.84%)` | :arrow_down: |\n| [...org/apache/pinot/broker/queryquota/HitCounter.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9IaXRDb3VudGVyLmphdmE=) | `0.00% <0.00%> (-100.00%)` | :arrow_down: |\n| [...che/pinot/broker/queryquota/MaxHitRateTracker.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9NYXhIaXRSYXRlVHJhY2tlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...ache/pinot/broker/queryquota/QueryQuotaEntity.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcXVlcnlxdW90YS9RdWVyeVF1b3RhRW50aXR5LmphdmE=) | `0.00% <0.00%> (-50.00%)` | :arrow_down: |\n| [...ker/routing/instanceselector/InstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL0luc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `100.00% <ø> (ø)` | |\n| [...ceselector/StrictReplicaGroupInstanceSelector.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9pbnN0YW5jZXNlbGVjdG9yL1N0cmljdFJlcGxpY2FHcm91cEluc3RhbmNlU2VsZWN0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/TimeSegmentPruner.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL1RpbWVTZWdtZW50UHJ1bmVyLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...roker/routing/segmentpruner/interval/Interval.java](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree#diff-cGlub3QtYnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9waW5vdC9icm9rZXIvcm91dGluZy9zZWdtZW50cHJ1bmVyL2ludGVydmFsL0ludGVydmFsLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| ... and [1414 more](https://codecov.io/gh/apache/incubator-pinot/pull/6693/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=footer). Last update [656f279...5170a40](https://codecov.io/gh/apache/incubator-pinot/pull/6693?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801521348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801577577","html_url":"https://github.com/apache/pinot/pull/6680#issuecomment-801577577","issue_url":"https://api.github.com/repos/apache/pinot/issues/6680","id":801577577,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTU3NzU3Nw==","user":{"login":"mqliang","id":12423751,"node_id":"MDQ6VXNlcjEyNDIzNzUx","avatar_url":"https://avatars.githubusercontent.com/u/12423751?v=4","gravatar_id":"","url":"https://api.github.com/users/mqliang","html_url":"https://github.com/mqliang","followers_url":"https://api.github.com/users/mqliang/followers","following_url":"https://api.github.com/users/mqliang/following{/other_user}","gists_url":"https://api.github.com/users/mqliang/gists{/gist_id}","starred_url":"https://api.github.com/users/mqliang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mqliang/subscriptions","organizations_url":"https://api.github.com/users/mqliang/orgs","repos_url":"https://api.github.com/users/mqliang/repos","events_url":"https://api.github.com/users/mqliang/events{/privacy}","received_events_url":"https://api.github.com/users/mqliang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-18T02:52:51Z","updated_at":"2021-03-18T02:52:51Z","author_association":"CONTRIBUTOR","body":"conflict with master since https://github.com/apache/incubator-pinot/pull/6690 get merged. Rebased and updated.","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801577577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801726533","html_url":"https://github.com/apache/pinot/issues/6692#issuecomment-801726533","issue_url":"https://api.github.com/repos/apache/pinot/issues/6692","id":801726533,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMTcyNjUzMw==","user":{"login":"LutzWeischerFujitsu","id":73179197,"node_id":"MDQ6VXNlcjczMTc5MTk3","avatar_url":"https://avatars.githubusercontent.com/u/73179197?v=4","gravatar_id":"","url":"https://api.github.com/users/LutzWeischerFujitsu","html_url":"https://github.com/LutzWeischerFujitsu","followers_url":"https://api.github.com/users/LutzWeischerFujitsu/followers","following_url":"https://api.github.com/users/LutzWeischerFujitsu/following{/other_user}","gists_url":"https://api.github.com/users/LutzWeischerFujitsu/gists{/gist_id}","starred_url":"https://api.github.com/users/LutzWeischerFujitsu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LutzWeischerFujitsu/subscriptions","organizations_url":"https://api.github.com/users/LutzWeischerFujitsu/orgs","repos_url":"https://api.github.com/users/LutzWeischerFujitsu/repos","events_url":"https://api.github.com/users/LutzWeischerFujitsu/events{/privacy}","received_events_url":"https://api.github.com/users/LutzWeischerFujitsu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-18T08:20:54Z","updated_at":"2021-03-18T08:20:54Z","author_association":"NONE","body":"Thanks, that helped. But for ThirdEye I get this problem: \r\n[jw@cn05 thirdeye]$ ./install.sh\r\n*******************************************************\r\nBuilding ThirdEye\r\n*******************************************************\r\n[INFO] Scanning for projects...\r\n[WARNING]\r\n[WARNING] Some problems were encountered while building the effective model for org.apache.pinot.thirdeye:thirdeye-pinot:jar:1.0.0-SNAPSHOT\r\n[WARNING] Reporting configuration should be done in <reporting> section, not in maven-site-plugin <configuration> as reportPlugins parameter. @ org.apache.pinot.thirdeye:thirdeye-pinot:${revision}${sha1}, /home/jw/thirdeye/thirdeye-pinot/pom.xml, line 372, column 24\r\n[WARNING]\r\n[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.\r\n[WARNING]\r\n[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.\r\n[WARNING]\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Build Order:\r\n[INFO]\r\n[INFO] thirdeye-frontend                                                  [jar]\r\n[INFO] thirdeye                                                           [pom]\r\n[INFO] thirdeye-spi                                                       [jar]\r\n[INFO] thirdeye-pinot                                                     [jar]\r\n[INFO] thirdeye-coordinator                                               [jar]\r\n[INFO] thirdeye-dashboard                                                 [jar]\r\n[INFO] thirdeye-dist                                                      [jar]\r\n[INFO]\r\n[INFO] ------------< org.apache.pinot.thirdeye:thirdeye-frontend >-------------\r\n[INFO] Building thirdeye-frontend 1.0.0-SNAPSHOT                          [1/7]\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- frontend-maven-plugin:1.9.1:install-node-and-yarn (install node and npm) @ thirdeye-frontend ---\r\n[INFO] Found proxies: [http{protocol='http', host='...', port=...}, https{protocol='https', host='...', port=...]\r\n[INFO] Node v10.16.3 is already installed.\r\n[INFO] Yarn 1.22.4 is already installed.\r\n[INFO]\r\n[INFO] --- frontend-maven-plugin:1.9.1:yarn (yarn config) @ thirdeye-frontend ---\r\n[INFO] Found proxies: [http{protocol='http', host='...', port=...}, https{protocol='https', host='...', port=...}]\r\n[INFO] Running 'yarn config set registry http://registry.npmjs.org/ --https-proxy=http://...:... --proxy=http://...:...' in /home/jw/thirdeye/thirdeye-frontend\r\n[INFO] yarn config v1.22.4\r\n[INFO] success Set \"registry\" to \"http://registry.npmjs.org/\".\r\n[INFO] Done in 0.19s.\r\n[INFO]\r\n[INFO] --- frontend-maven-plugin:1.9.1:yarn (yarn list config) @ thirdeye-frontend ---\r\n[INFO] Found proxies: [http{protocol='http', host='...', port=...}, https{protocol='https', host='...', port=...}]\r\n[INFO] Running 'yarn config list --https-proxy=http://...:... --proxy=http://...:...' in /home/jw/thirdeye/thirdeye-frontend\r\n[INFO] yarn config v1.22.4\r\n[INFO] info yarn config\r\n[INFO] { 'version-tag-prefix':\r\n[INFO]    'v',\r\n[INFO]   'version-git-tag':\r\n[INFO]    true,\r\n[INFO]   'version-commit-hooks':\r\n[INFO]    true,\r\n[INFO]   'version-git-sign':\r\n[INFO]    false,\r\n[INFO]   'version-git-message':\r\n[INFO]    'v%s',\r\n[INFO]   'init-version':\r\n[INFO]    '1.0.0',\r\n[INFO]   'init-license':\r\n[INFO]    'MIT',\r\n[INFO]   'save-prefix':\r\n[INFO]    '^',\r\n[INFO]   'bin-links':\r\n[INFO]    true,\r\n[INFO]   'ignore-scripts':\r\n[INFO]    false,\r\n[INFO]   'ignore-optional':\r\n[INFO]    false,\r\n[INFO]   registry:\r\n[INFO]    'http://registry.npmjs.org/',\r\n[INFO]   'strict-ssl':\r\n[INFO]    true,\r\n[INFO]   'user-agent':\r\n[INFO]    'yarn/1.22.4 npm/? node/v10.16.3 linux arm64',\r\n[INFO]   'cache-folder':\r\n[INFO]    '/data/jw/apache/zeppelin/local-repo/helium-bundle/yarn-cache',\r\n[INFO]   lastUpdateCheck:\r\n[INFO]    1605275717839 }\r\n[INFO] info npm config\r\n[INFO] { 'https-proxy':\r\n[INFO]    'https://...:.../',\r\n[INFO]   registry:\r\n[INFO]    'https://registry.npmjs.org/',\r\n[INFO]   'jttps-proxy':\r\n[INFO]    'https://...:...',\r\n[INFO]   list:\r\n[INFO]    '',\r\n[INFO]   proxy:\r\n[INFO]    'http://...:.../',\r\n[INFO]   https_proxy:\r\n[INFO]    'https://...:...',\r\n[INFO]   'strict-ssl':\r\n[INFO]    false }\r\n[INFO] Done in 0.18s.\r\n[INFO]\r\n[INFO] --- frontend-maven-plugin:1.9.1:yarn (yarn install) @ thirdeye-frontend ---\r\n[INFO] Found proxies: [http{protocol='http', host='...', port=...}, https{protocol='https', host='...', port=...}]\r\n[INFO] Running 'yarn install --https-proxy=http://...:... --proxy=http://...:...' in /home/jw/thirdeye/thirdeye-frontend\r\n[INFO] yarn install v1.22.4\r\n[INFO] [1/5] Validating package.json...\r\n[INFO] [2/5] Resolving packages...\r\n[INFO] warning Resolution field \"human-signals@1.1.0\" is incompatible with requested version \"human-signals@^2.1.0\"\r\n[INFO] warning Resolution field \"human-signals@1.1.0\" is incompatible with requested version \"human-signals@^1.1.1\"\r\n[INFO] [3/5] Fetching packages...\r\n[INFO] error An unexpected error occurred: \"EACCES: permission denied, mkdir '/data/jw/apache/zeppelin/local-repo/helium-bundle/yarn-cache/v6/npm-human-signals-1.1.0-6f5878f93f94776ff667b6d8666d5d9cad6b524c-integrity'\".\r\n[INFO] error An unexpected error occurred: \"EACCES: permission denied, mkdir '/data/jw/apache/zeppelin/local-repo/helium-bundle/yarn-cache/v6/npm-human-signals-1.1.0-6f5878f93f94776ff667b6d8666d5d9cad6b524c-integrity'\".info If you think this is a bug, please open a bug report with the information provided in \"/home/jw/thirdeye/thirdeye-frontend/yarn-error.log\".\r\n[INFO] info Visit https://yarnpkg.com/en/docs/cli/install for documentation about this command.\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Reactor Summary for thirdeye 1.0.0-SNAPSHOT:\r\n[INFO]\r\n[INFO] thirdeye-frontend .................................. FAILURE [  9.246 s]\r\n[INFO] thirdeye ........................................... SKIPPED\r\n[INFO] thirdeye-spi ....................................... SKIPPED\r\n[INFO] thirdeye-pinot ..................................... SKIPPED\r\n[INFO] thirdeye-coordinator ............................... SKIPPED\r\n[INFO] thirdeye-dashboard ................................. SKIPPED\r\n[INFO] thirdeye-dist ...................................... SKIPPED\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  9.936 s\r\n[INFO] Finished at: 2021-03-18T09:14:25+01:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:1.9.1:yarn (yarn install) on project thirdeye-frontend: Failed to run task: 'yarn install --https-proxy=http://... --proxy=http://...:...' failed. org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1) -> [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n[jw@cn05 thirdeye]$ yarn install --https-proxy=http://...:... --proxy=http://...:...\r\nyarn install v1.22.10\r\n[1/4] Resolving packages...\r\nsuccess Already up-to-date.\r\nDone in 1.09s.\r\n[jw@cn05 thirdeye]$ ","reactions":{"url":"https://api.github.com/repos/apache/pinot/issues/comments/801726533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]