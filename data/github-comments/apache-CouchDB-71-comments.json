[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499422726","html_url":"https://github.com/apache/couchdb/issues/2047#issuecomment-499422726","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2047","id":499422726,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQyMjcyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T09:34:27Z","updated_at":"2019-06-06T09:34:27Z","author_association":"MEMBER","body":"The workaround is to install a newer Erlang from e.g. https://packages.erlang-solutions.com/ or from scratch or from e.g. unstable repositories/PPAs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499422726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499424858","html_url":"https://github.com/apache/couchdb/issues/2045#issuecomment-499424858","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2045","id":499424858,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQyNDg1OA==","user":{"login":"priyath","id":10166923,"node_id":"MDQ6VXNlcjEwMTY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/10166923?v=4","gravatar_id":"","url":"https://api.github.com/users/priyath","html_url":"https://github.com/priyath","followers_url":"https://api.github.com/users/priyath/followers","following_url":"https://api.github.com/users/priyath/following{/other_user}","gists_url":"https://api.github.com/users/priyath/gists{/gist_id}","starred_url":"https://api.github.com/users/priyath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priyath/subscriptions","organizations_url":"https://api.github.com/users/priyath/orgs","repos_url":"https://api.github.com/users/priyath/repos","events_url":"https://api.github.com/users/priyath/events{/privacy}","received_events_url":"https://api.github.com/users/priyath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T09:40:42Z","updated_at":"2019-06-06T09:41:15Z","author_association":"NONE","body":"> Not sure whether you are familiar with `remsh` and we can use https://github.com/apache/couchdb-couch/blob/21c8d37ac6ee1a7fed1de1f54f95a4d3cd9f5248/src/couch_db.erl#L304\r\n\r\nThe purge sequence between the CouchDB and the view index shows a diff > 1 so it should go through the reset code branch. But this does not remove the purged conflicted revision from the index unless we completely delete the *.view files.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499424858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499426621","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499426621","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499426621,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQyNjYyMQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T09:46:08Z","updated_at":"2019-06-06T09:46:08Z","author_association":"CONTRIBUTOR","body":"Hi,\r\n\r\nThanks for the reply.\r\n\r\nI installed the following on Ubuntu 18.04 for PowerPC64LE inside a clean container:-\r\n\r\n- Python 3.6.7 (Python 2 version is not installed)\r\n- pip 9.0.1 from /usr/lib/python3/dist-packages (python 3.6)\r\n- Erlang/OTP 20 [erts-9.2] [source] [64-bit] [smp:16:16] [ds:16:16:10] [async-threads:10] [kernel-poll:false]\r\n\r\nI tried building latest CouchDB from the master branch - https://github.com/apache/couchdb.git\r\nHowever now I am facing the following error:-\r\n    \"CouchDB does not support this version of Erlang (\"20.2.2\").\"\r\n\r\nDoes CouchDB depend on specific versions of Erlang? If so, are the exact version requirements documented anywhere?\r\n\r\nBelow are the version/configure details:-\r\n\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$ py\r\n    py3clean           pybabel            pydoc3             pygettext3.6       python3-config     python3.6m         python3m-config\r\n    py3compile         pybabel-python3    pydoc3.6           pygmentize         python3.6          python3.6m-config\r\n    py3versions        pybuild            pygettext3         python3            python3.6-config   python3m\r\n\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$ python3 -V\r\n    Python 3.6.7\r\n\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$ pip3 -V\r\n    pip 9.0.1 from /usr/lib/python3/dist-packages (python 3.6)\r\n\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$ erl -V\r\n    Erlang/OTP 20 [erts-9.2] [source] [64-bit] [smp:16:16] [ds:16:16:10] [async-threads:10] [kernel-poll:false]\r\n\r\n    Eshell V9.2  (abort with ^G)\r\n    1>\r\n    [2]+  Stopped                 erl -V\r\n\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$ ./configure\r\n    ==> configuring couchdb in rel/couchdb.config\r\n    ==> updating dependencies\r\n    CouchDB does not support this version of Erlang (\"20.2.2\").\r\n    Check https://docs.couchdb.org/en/latest/whatsnew/index.html for the\r\n    latest information on supported releases.\r\n    sar@ca6f5b10ec5b:~/couchdb/couchdb$","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499426621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499433043","html_url":"https://github.com/apache/couchdb/issues/2047#issuecomment-499433043","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2047","id":499433043,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQzMzA0Mw==","user":{"login":"danikp","id":3479747,"node_id":"MDQ6VXNlcjM0Nzk3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3479747?v=4","gravatar_id":"","url":"https://api.github.com/users/danikp","html_url":"https://github.com/danikp","followers_url":"https://api.github.com/users/danikp/followers","following_url":"https://api.github.com/users/danikp/following{/other_user}","gists_url":"https://api.github.com/users/danikp/gists{/gist_id}","starred_url":"https://api.github.com/users/danikp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danikp/subscriptions","organizations_url":"https://api.github.com/users/danikp/orgs","repos_url":"https://api.github.com/users/danikp/repos","events_url":"https://api.github.com/users/danikp/events{/privacy}","received_events_url":"https://api.github.com/users/danikp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T10:05:31Z","updated_at":"2019-06-06T10:05:31Z","author_association":"NONE","body":"1. now docs still point to wrong issue\r\n2. it's wrong to send us search between dozens of comments, it will be much better to list all blacklisted versions in docs directly\r\n\r\nthanks for pointing to correct issue\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499433043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499443762","html_url":"https://github.com/apache/couchdb/issues/1977#issuecomment-499443762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1977","id":499443762,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQ0Mzc2Mg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T10:41:17Z","updated_at":"2019-06-06T10:41:17Z","author_association":"CONTRIBUTOR","body":"Just an idea: Instead of introduction of a new option we could try using #1658. We might check how many nodes are configured in a seed list and create databases if it is a single node install.\r\n```\r\n[cluster]\r\nseedlist = couchdb@localhost\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499443762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499460161","html_url":"https://github.com/apache/couchdb/issues/2047#issuecomment-499460161","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2047","id":499460161,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQ2MDE2MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T11:42:08Z","updated_at":"2019-06-06T11:42:08Z","author_association":"MEMBER","body":"@danikp Yeah, we can't change the 2.3.1 docs now that they've been published, it's a limitation of how our documentation system works. We did merge a fix a few days ago for this problem:\r\n\r\nhttps://github.com/apache/couchdb-documentation/pull/414\r\n\r\nIf you want to improve our documentation, please submit a PR to the apache/couchdb-documentation repo. This is an all-volunteer effort, and sometimes things don't get done. Your help and understanding is especially appreciated in this matter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499460161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499460388","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499460388","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499460388,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQ2MDM4OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T11:42:55Z","updated_at":"2019-06-06T11:42:55Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nUnfortunately, we have had to blacklist a number of Erlang releases for bugs that can lead to scheduler collapse based on reports from IBM staff and confirmation from the Erlang developers.\r\n\r\nSee #1857 and #2047 .\r\n\r\nSorry about that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499460388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499480018","html_url":"https://github.com/apache/couchdb/issues/2045#issuecomment-499480018","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2045","id":499480018,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQ4MDAxOA==","user":{"login":"priyath","id":10166923,"node_id":"MDQ6VXNlcjEwMTY2OTIz","avatar_url":"https://avatars.githubusercontent.com/u/10166923?v=4","gravatar_id":"","url":"https://api.github.com/users/priyath","html_url":"https://github.com/priyath","followers_url":"https://api.github.com/users/priyath/followers","following_url":"https://api.github.com/users/priyath/following{/other_user}","gists_url":"https://api.github.com/users/priyath/gists{/gist_id}","starred_url":"https://api.github.com/users/priyath/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/priyath/subscriptions","organizations_url":"https://api.github.com/users/priyath/orgs","repos_url":"https://api.github.com/users/priyath/repos","events_url":"https://api.github.com/users/priyath/events{/privacy}","received_events_url":"https://api.github.com/users/priyath/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T12:51:03Z","updated_at":"2019-06-06T12:53:40Z","author_association":"NONE","body":"> This is a known issue in the 1.x series. Did you try the scenario with current 2.x version?\r\n\r\nCan confirm this issue **does not** recreate in CouchDB 2.3.1\r\n\r\n> As described in the mailing list, small reproducer is 1) purge more than one document and 2) query the index.\r\n\r\nAlso, even on 1.6.1 this only happens when purging a reverted leaf revision of a conflicted revision tree. A normal purge of more than 1 document updates the indexes as expected. Still unsure of the root cause for this behavior.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499480018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499483545","html_url":"https://github.com/apache/couchdb/issues/2045#issuecomment-499483545","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2045","id":499483545,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTQ4MzU0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-06T13:01:14Z","updated_at":"2019-06-06T13:01:14Z","author_association":"MEMBER","body":"@priyath I'm not sure there's much more we can do for you here, especially because this is 1.x and support is long done by now.\r\n\r\nIf you know you're going to be purging >1 doc at a time between view reads, then the best you can do is intentionally make a trivial change to each design document in that database. This will force the recalculation of the view on next view access.\r\n\r\nAdd a space or something to change one map function in a trivial way; this changes the checksum of the ddoc and triggers the full rebuild from scratch, without having to remove the `.view` file on disk.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499483545/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499791994","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499791994","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499791994,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTc5MTk5NA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-07T07:50:03Z","updated_at":"2019-06-07T07:50:03Z","author_association":"CONTRIBUTOR","body":"Hi @wohali ,\r\n\r\nI have managed to build Erlang/OTP 21.3.8.3 on Ubunutu 16.04 after resolving all dependencies for Erlang:-\r\n\r\n        sar@50c649c461fc:~/otp$ erl -eval '{ok, Version} = file:read_file(filename:join([code:root_dir(), \"releases\", erlang:system_info(otp_release), \"OTP_VERSION\"])), io:fwrite(Version), halt().' -noshell\r\n        21.3.8.3\r\n        sar@50c649c461fc:/usr/local/lib/erlang$ cat releases/RELEASES\r\n        %% coding: utf-8\r\n        [{release,\"Erlang/OTP\",\"21\",\"10.3.5.2\",\r\n                  [{kernel,\"6.3.1.1\",\"/usr/local/lib/erlang/lib/kernel-6.3.1.1\"},\r\n                   {stdlib,\"3.8.2.1\",\"/usr/local/lib/erlang/lib/stdlib-3.8.2.1\"},\r\n                   {sasl,\"3.3\",\"/usr/local/lib/erlang/lib/sasl-3.3\"}],\r\n                  permanent}].\r\n        sar@50c649c461fc:~/couchdb/couchdb$ erl\r\n        Erlang/OTP 21 [erts-10.3.5.2] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1]\r\n\r\n        Eshell V10.3.5.2  (abort with ^G)\r\n        1>\r\n\r\nI tried building latest CouchDB from the master branch - https://github.com/apache/couchdb.git\r\nHowever now I am facing the following error:-  \r\n\r\n        Running \"copy:dist\" (copy) task\r\n\r\n\r\n        Running \"copy:couchdb\" (copy) task\r\n        Created 4 directories, copied 22 files\r\n\r\n        Done.\r\n        make[1]: Entering directory '/home/sar/couchdb/couchdb/src/docs'\r\n        sphinx-build -b html -a -W -n -A local=1 -D latex_elements.papersize=a4 -d build/doctree src/ build/html\r\n        Running Sphinx v1.3.6\r\n        making output directory...\r\n        loading pickled environment... not yet created\r\n        building [mo]: all of 0 po files\r\n        building [html]: all source files\r\n        updating environment: 124 added, 0 changed, 0 removed\r\n        reading sources... [100%] whatsnew/index\r\n        looking for now-outdated files... none found\r\n        pickling environment... done\r\n        checking consistency... done\r\n        preparing documents...\r\n        Theme error:\r\n        unsupported theme option 'canonical_url' given\r\n        Makefile:32: recipe for target 'html' failed\r\n        make[1]: *** [html] Error 1\r\n        make[1]: Leaving directory '/home/sar/couchdb/couchdb/src/docs'\r\n        Makefile:520: recipe for target 'src/docs/build' failed\r\n        make: *** [src/docs/build] Error 2\r\n  \r\nAm I missing anything?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499791994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499832610","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499832610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499832610,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTgzMjYxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-07T10:13:17Z","updated_at":"2019-06-07T10:13:17Z","author_association":"MEMBER","body":"Your Sphinx is outdated:\r\n\r\n```\r\nRunning Sphinx v1.3.6\r\n```\r\n\r\nYou need v1.7 at least, I believe.\r\n\r\nI recommend you install `python3-pip` and do `# pip3 install sphinx` instead of relying on the very old Ubuntu 16.04 package.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499832610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499837716","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499837716","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499837716,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTgzNzcxNg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-07T10:33:20Z","updated_at":"2019-06-07T10:33:20Z","author_association":"CONTRIBUTOR","body":"> Your Sphinx is outdated:\r\n> \r\n> ```\r\n> Running Sphinx v1.3.6\r\n> ```\r\n> \r\n> You need v1.7 at least, I believe.\r\n> \r\n> I recommend you install `python3-pip` and do `# pip3 install sphinx` instead of relying on the very old Ubuntu 16.04 package.\r\n\r\nTried that, getting the below error:-\r\n\r\n```\r\n==> setup (compile)\r\nCompiled src/setup_httpd_handlers.erl\r\nCompiled src/setup_epi.erl\r\nCompiled src/setup_sup.erl\r\nCompiled src/setup_app.erl\r\nCompiled src/setup_httpd.erl\r\nCompiled src/setup.erl\r\n==> rel (compile)\r\n==> couchdb (compile)\r\nInstalling CouchDB into rel/couchdb/ ...\r\n==> rel (generate)\r\nWARN:  'generate' command does not apply to directory /home/sar/couchdb/couchdb\r\ncp: cannot stat 'src/docs/build/man/apachecouchdb.1': No such file or directory\r\nMakefile:407: recipe for target 'release' failed\r\nmake: *** [release] Error 1\r\nsar@50c649c461fc:~/couchdb/couchdb$\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499837716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499890246","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-499890246","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":499890246,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5OTg5MDI0Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-07T13:44:29Z","updated_at":"2019-06-07T13:44:29Z","author_association":"MEMBER","body":"Try with a brand new git clone, there's some bugs in the Makefile if the docs only partially fail to build that no one's ever cleaned up.\r\n\r\nSphinx makes the manpage in a second step, see https://github.com/apache/couchdb-documentation/blob/master/Makefile#L44-L45 . If that failed but the first step succeeded, it won't try again to build it today. You could also `cd src/docs && make man` to diagnose if there is a problem.\r\n\r\nIf that all still fails, let me know and I'll look at it next week.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/499890246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500386844","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-500386844","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":500386844,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDM4Njg0NA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T11:40:12Z","updated_at":"2019-06-10T11:40:12Z","author_association":"CONTRIBUTOR","body":"Hi @wohali ,\r\n\r\nI tried with a clean git clone of couchdb with all the pre-requisites installed.\r\n\r\nI ran into the following issue:-\r\n\r\n        make[1]: Entering directory '/home/sar/couchdb/couchdb/src/docs'\r\n        sphinx-build -b html -a -W -n -A local=1 -D latex_elements.papersize=a4 -d build/doctree src/ build/html\r\n        Running Sphinx v2.1.0\r\n        making output directory... done\r\n        building [mo]: all of 0 po files\r\n        building [html]: all source files\r\n        updating environment: 124 added, 0 changed, 0 removed\r\n        reading sources... [100%] whatsnew/index\r\n        looking for now-outdated files... none found\r\n        pickling environment... done\r\n        checking consistency... done\r\n        preparing documents... done\r\n        writing output... [100%] whatsnew/index\r\n\r\n        Warning, treated as error:\r\n        /home/sar/couchdb/couchdb/src/docs/src/api/server/common.rst:1489:Could not lex literal_block as \"http\". Highlighting skipped.\r\n        Makefile:32: recipe for target 'html' failed\r\n        make[1]: *** [html] Error 2\r\n        make[1]: Leaving directory '/home/sar/couchdb/couchdb/src/docs'\r\n        Makefile:520: recipe for target 'src/docs/build' failed\r\n        make: *** [src/docs/build] Error 2\r\n\r\nHowever I executed the workaround ```cd src/docs && make man``` as suggested and then re-built couchdb, the build completed successfully.\r\n\r\n        Installing CouchDB into rel/couchdb/ ...\r\n        ==> rel (generate)\r\n        WARN:  'generate' command does not apply to directory /home/sar/couchdb/couchdb\r\n        ... done\r\n\r\n            You can now copy the rel/couchdb directory anywhere on your system.\r\n            Start CouchDB with ./bin/couchdb from within that directory.\r\n\r\nQuestion 1:-\r\nIs this a known/documented issue and any resolution for this workaround?\r\n\r\nNext, I started the couchdb instance as per steps in the INSTALL.Unix.md readme, and ran into following issues at startup:-\r\n\r\n```[notice] 2019-06-10T08:25:53.103784Z couchdb@localhost <0.325.0> -------- chttpd_auth_cache changes listener died database_does_not_exist at mem3_shards:load_shards_from_db/6(line:403) <= mem3_shards:load_shards_from_disk/1(line:378) <= mem3_shards:load_shards_from_disk/2(line:407) <= mem3_shards:for_docid/3(line:91) <= fabric_doc_open:go/3(line:38) <= chttpd_auth_cache:ensure_auth_ddoc_exists/2(line:187) <= chttpd_auth_cache:listen_for_changes/1(line:134)\r\n[error] 2019-06-10T08:25:53.103978Z couchdb@localhost emulator -------- Error in process <0.326.0> on node couchdb@localhost with exit value:\r\n{database_does_not_exist,[{mem3_shards,load_shards_from_db,\"_users\",[{file,\"src/mem3_shards.erl\"},{line,403}]},{mem3_shards,load_shards_from_disk,1,[{file,\"src/mem3_shards.erl\"},{line,378}]},{mem3_shards,load_shards_from_disk,2,[{file,\"src/mem3_shards.erl\"},{line,407}]},{mem3_shards,for_docid,3,[{file,\"src/mem3_shards.erl\"},{line,91}]},{fabric_doc_open,go,3,[{file,\"src/fabric_doc_open.erl\"},{line,38}]},{chttpd_auth_cache,ensure_auth_ddoc_exists,2,[{file,\"src/chttpd_auth_cache.erl\"},{line,187}]},{chttpd_auth_cache,listen_for_changes,1,[{file,\"src/chttpd_auth_cache.erl\"},{line,134}]}]}\r\n```\r\n\r\nI was able to resolve this after creating the three system databases manually on startup in another shell, while the couchdb instance was running in the first shell as per http://docs.couchdb.org/en/latest/setup/single-node.html:\r\n\r\n    curl -X PUT http://127.0.0.1:5984/_users\r\n    curl -X PUT http://127.0.0.1:5984/_replicator\r\n    curl -X PUT http://127.0.0.1:5984/_global_changes\r\n\r\nQuestion 2:-\r\nInitially I tried inside a docker container, however opening another shell in a docker container is not possible.\r\nHow do we proceed in this case?\r\n\r\nPost this I was able to perform some operations as per https://guide.couchdb.org/draft/tour.html:-\r\n\r\n        root@pts00452-vm13:~# curl http://127.0.0.1:5984/\r\n        {\"couchdb\":\"Welcome\",\"version\":\"2.1.0-cf00dc2\",\"features\":[\"scheduler\"],\"vendor\":{\"name\":\"The Apache Software Foundation\"}}\r\n        root@pts00452-vm13:~# curl -X GET http://127.0.0.1:5984/_all_dbs\r\n        [\"_global_changes\",\"_replicator\",\"_users\"]\r\n        root@pts00452-vm13:~# curl -X PUT http://127.0.0.1:5984/baseball\r\n        {\"ok\":true}\r\n        root@pts00452-vm13:~# curl -X GET http://127.0.0.1:5984/_all_dbs\r\n        [\"_global_changes\",\"_replicator\",\"_users\",\"baseball\"]\r\n        root@pts00452-vm13:~# curl -X PUT http://127.0.0.1:5984/baseball\r\n        {\"error\":\"file_exists\",\"reason\":\"The database could not be created, the file already exists.\"}\r\n        root@pts00452-vm13:~# curl -X PUT http://127.0.0.1:5984/plankton\r\n        {\"ok\":true}\r\n        root@pts00452-vm13:~# curl -X GET http://127.0.0.1:5984/_all_dbs\r\n        [\"_global_changes\",\"_replicator\",\"_users\",\"baseball\",\"plankton\"]\r\n        root@pts00452-vm13:~# curl -X DELETE http://127.0.0.1:5984/plankton\r\n        {\"ok\":true}\r\n        root@pts00452-vm13:~# curl -X GET http://127.0.0.1:5984/_all_dbs\r\n        [\"_global_changes\",\"_replicator\",\"_users\",\"baseball\"]\r\n\r\nLet me know your thoughts on this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500386844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500429635","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500429635","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500429635,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDQyOTYzNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T14:07:30Z","updated_at":"2019-06-10T16:48:46Z","author_association":"CONTRIBUTOR","body":"Very nice work, @iilyak !\r\n\r\nI noticed there was a formatting error in mix, let's fix that.  Was also wondering if there is any way to avoid renaming all the paths to the eunit tests. If it would make things harder, that's fine, but didn't know what reason was. Maybe also squash some commits","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500429635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500481657","html_url":"https://github.com/apache/couchdb/issues/1920#issuecomment-500481657","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1920","id":500481657,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDQ4MTY1Nw==","user":{"login":"dsshane","id":15656251,"node_id":"MDQ6VXNlcjE1NjU2MjUx","avatar_url":"https://avatars.githubusercontent.com/u/15656251?v=4","gravatar_id":"","url":"https://api.github.com/users/dsshane","html_url":"https://github.com/dsshane","followers_url":"https://api.github.com/users/dsshane/followers","following_url":"https://api.github.com/users/dsshane/following{/other_user}","gists_url":"https://api.github.com/users/dsshane/gists{/gist_id}","starred_url":"https://api.github.com/users/dsshane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsshane/subscriptions","organizations_url":"https://api.github.com/users/dsshane/orgs","repos_url":"https://api.github.com/users/dsshane/repos","events_url":"https://api.github.com/users/dsshane/events{/privacy}","received_events_url":"https://api.github.com/users/dsshane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T16:23:52Z","updated_at":"2019-06-10T16:23:52Z","author_association":"NONE","body":"I found this very helpful for my case. When/which release will this feature will available? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500481657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500502544","html_url":"https://github.com/apache/couchdb/issues/1920#issuecomment-500502544","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1920","id":500502544,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUwMjU0NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T17:20:41Z","updated_at":"2019-06-10T17:20:48Z","author_association":"CONTRIBUTOR","body":"@dsshane It is available in CouchDB master already. So if you build from source it should be there. \r\n\r\nOtherwise it will probably be in the next release of CouchDB (2.4) or (3.0)\r\n\r\nDocumentation link http://docs.couchdb.org/en/latest/cluster/sharding.html#splitting-shards","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500502544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500513950","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500513950","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500513950,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUxMzk1MA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T17:51:08Z","updated_at":"2019-06-10T17:51:08Z","author_association":"CONTRIBUTOR","body":"> @nickva if there is any way to avoid renaming all the paths to the eunit tests. If it would make things harder, that's fine, but didn't know what reason was. \r\n\r\nI moved eunit tests for better readability. I personally find it easier when tests are organized in separate directories. It is possible to keep eunit tests in the old location. In this case the structure would be:\r\n\r\n```\r\n<app>/test/some_test.erl\r\n<app>/test/exunit/test_helper.exs\r\n<app>/test/exunit/some_test.exs\r\n```\r\n\r\nPlease let me know if you want me to change directory structure to keep old eunit where they were.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500513950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500514684","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500514684","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500514684,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUxNDY4NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T17:52:45Z","updated_at":"2019-06-10T17:52:45Z","author_association":"CONTRIBUTOR","body":"> @nickva Maybe also squash some commits\r\n\r\nI was trying to avoid rebase when review is in progress. I can do a cleanup. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500514684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500529520","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-500529520","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":500529520,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUyOTUyMA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T18:20:23Z","updated_at":"2019-06-10T18:20:23Z","author_association":"CONTRIBUTOR","body":"> @eiri I once tried to write custom eunit runner to skip rebar all together, it was doable and fwiw the tests ran faster, but it wasn't finished solution and it was getting hairy pretty quick.\r\n> @iilyak I wonder if it's possible to use that ExUnit to run eunit tests instead of rebar's eunit? Maybe this could be a perspective solution.\r\n\r\nI am not sure if ExUnit can be used to run eunit tests (I think unlikely). However mix definitely can (with a plugin). Mix is introduced [here](https://github.com/apache/couchdb/pull/2039). We might need to modify the mix plugin though. I doubt the eunit plugin is smart enough to extend timeout. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500529520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500538273","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500538273","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500538273,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDUzODI3Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T18:33:27Z","updated_at":"2019-06-10T18:33:27Z","author_association":"CONTRIBUTOR","body":"@nickva I did a rebase to reduce number of commits.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500538273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500601722","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500601722","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500601722,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDYwMTcyMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T21:27:42Z","updated_at":"2019-06-10T21:27:42Z","author_association":"CONTRIBUTOR","body":"> > @nickva if there is any way to avoid renaming all the paths to the eunit tests. If it would make things harder, that's fine, but didn't know what reason was.\r\n> \r\n> I moved eunit tests for better readability. I personally find it easier when tests are organized in separate directories. It is possible to keep eunit tests in the old location. In this case the structure would be:\r\n> \r\n> ```\r\n> <app>/test/some_test.erl\r\n> <app>/test/exunit/test_helper.exs\r\n> <app>/test/exunit/some_test.exs\r\n> ```\r\n> \r\n> Please let me know if you want me to change directory structure to keep old eunit where they were.\r\n\r\nAh ok, `eunit` and `exunit` folders do look better.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500601722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500602047","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-500602047","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":500602047,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDYwMjA0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T21:28:39Z","updated_at":"2019-06-10T21:28:55Z","author_association":"CONTRIBUTOR","body":"The commits look good. Thanks for rebasing.\r\n\r\nThere is some issue with mix still it looks like:\r\n\r\n```\r\nAll dependencies up to date\r\nmix format --check-formatted\r\nmix credo\r\n^[[31m^[[1mUnchecked dependencies for environment dev:^[[0m\r\n^[[31m^[[1m* jiffy (Hex package)^[[0m\r\n^[[31m^[[1m  lock mismatch: the dependency is out of date. To fetch locked version run \"mix deps.get\"^[[0m\r\n^[[31m^[[1m* httpotion (Hex package)^[[0m\r\n^[[31m^[[1m  the dependency is not available, run \"mix deps.get\"^[[0m\r\n^[[31m^[[1m* credo (Hex package)^[[0m\r\n^[[31m^[[1m  the dependency is not available, run \"mix deps.get\"^[[0m\r\n^[[31m^[[1m** (Mix) Can't continue due to errors on dependencies^[[0m\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500602047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500607164","html_url":"https://github.com/apache/couchdb/issues/2048#issuecomment-500607164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2048","id":500607164,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDYwNzE2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-10T21:45:53Z","updated_at":"2019-06-10T21:45:53Z","author_association":"MEMBER","body":"For a single node install:\r\n\r\nStop CouchDB, then delete your entire `data/` directory contents, then update the `vm.args` file, then start CouchDB.\r\n\r\nThis should make everything fine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500607164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500772485","html_url":"https://github.com/apache/couchdb/pull/1443#issuecomment-500772485","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1443","id":500772485,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDc3MjQ4NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-11T09:55:18Z","updated_at":"2019-06-11T09:55:18Z","author_association":"MEMBER","body":"bump, if anyone wants to take this I'd love to see it land sooner rather than later.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/500772485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501176972","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-501176972","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":501176972,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTE3Njk3Mg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T08:39:38Z","updated_at":"2019-06-12T08:39:38Z","author_association":"CONTRIBUTOR","body":"@wohali any inputs?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501176972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501177176","html_url":"https://github.com/apache/couchdb/issues/2049#issuecomment-501177176","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2049","id":501177176,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTE3NzE3Ng==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T08:40:16Z","updated_at":"2019-06-12T08:40:16Z","author_association":"CONTRIBUTOR","body":"@wohali please provide your guidance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501177176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501207181","html_url":"https://github.com/apache/couchdb/issues/2049#issuecomment-501207181","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2049","id":501207181,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTIwNzE4MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T10:05:46Z","updated_at":"2019-06-12T10:05:46Z","author_association":"MEMBER","body":"@sarveshtamba \r\n\r\nHi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501207181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501207894","html_url":"https://github.com/apache/couchdb/issues/2044#issuecomment-501207894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2044","id":501207894,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTIwNzg5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T10:08:01Z","updated_at":"2019-06-12T10:08:01Z","author_association":"MEMBER","body":"I'm not sure about your problem with the build, but this shouldn't be happening. Will leave this open until someone can look at it. I'm out of time for this week, sorry.\r\n\r\nYou _can_ open another shell in a Docker container: https://stackoverflow.com/questions/17903705/is-it-possible-to-start-a-shell-session-in-a-running-container-without-ssh\r\n\r\nFor any other user-level questions these are not CouchDB bugs and you should seek assistance on our user@couchdb.apache.org mailing list or Slack, whichever you prefer.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501207894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501465463","html_url":"https://github.com/apache/couchdb/pull/2051#issuecomment-501465463","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2051","id":501465463,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTQ2NTQ2Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-12T21:41:03Z","updated_at":"2019-06-13T19:04:02Z","author_association":"CONTRIBUTOR","body":"Unit tests\r\n\r\n```\r\n$ make eunit apps=couch_jobs\r\n      couch_jobs_tests:107: add_remove_pending...[0.043 s] ok\r\n      couch_jobs_tests:135: add_remove_errors...[0.029 s] ok\r\n      couch_jobs_tests:123: get_job_data_and_state...[0.021 s] ok\r\n      couch_jobs_tests:148: resubmit_as_job_creator...[0.080 s] ok\r\n      couch_jobs_tests:177: type_timeouts_and_server...[0.027 s] ok\r\n      couch_jobs_tests:207: dead_notifier_restarts_jobs_server...[0.017 s] ok\r\n      couch_jobs_tests:222: bad_messages_restart_couch_jobs_server...[0.025 s] ok\r\n      couch_jobs_tests:250: bad_messages_restart_notifier...[0.035 s] ok\r\n      couch_jobs_tests:281: bad_messages_restart_activity_monitor...[0.029 s] ok\r\n      couch_jobs_tests:311: basic_accept_and_finish...[0.028 s] ok\r\n      couch_jobs_tests:329: accept_blocking...[0.548 s] ok\r\n      couch_jobs_tests:349: job_processor_update...[0.077 s] ok\r\n      couch_jobs_tests:391: resubmit_enqueues_job...[0.055 s] ok\r\n      couch_jobs_tests:404: add_with_scheduled_time...[0.034 s] ok\r\n      couch_jobs_tests:415: resubmit_custom_schedtime...[0.037 s] ok\r\n      couch_jobs_tests:425: accept_max_schedtime...[0.032 s] ok\r\n      couch_jobs_tests:434: subscribe...[0.371 s] ok\r\n      couch_jobs_tests:468: subscribe_wait_multiple...[0.735 s] ok\r\n      couch_jobs_tests:512: enqueue_inactive...[5.101 s] ok\r\n      couch_jobs_tests:530: remove_running_job...[0.024 s] ok\r\n      couch_jobs_tests:541: check_get_jobs...[0.025 s] ok\r\n=======================================================\r\n  All 21 tests passed.\r\nCover analysis: /Users/nvatama/asf/src/couch_jobs/.eunit/index.html\r\n\r\nCode Coverage:\r\ncouch_jobs                      :  89%\r\ncouch_jobs_activity_monitor     :  91%\r\ncouch_jobs_activity_monitor_sup : 100%\r\ncouch_jobs_app                  : 100%\r\ncouch_jobs_fdb                  :  96%\r\ncouch_jobs_notifier             :  94%\r\ncouch_jobs_notifier_sup         : 100%\r\ncouch_jobs_pending              : 100%\r\ncouch_jobs_server               :  83%\r\ncouch_jobs_sup                  : 100%\r\ncouch_jobs_type_monitor         :  94%\r\n\r\nTotal                           : 93%\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501465463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501928063","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-501928063","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":501928063,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTkyODA2Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T00:46:47Z","updated_at":"2019-06-14T00:46:47Z","author_association":"CONTRIBUTOR","body":"@nickva I changed the definition for `jiffy` dependency. Could you try again?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/501928063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502079409","html_url":"https://github.com/apache/couchdb/issues/1305#issuecomment-502079409","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1305","id":502079409,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjA3OTQwOQ==","user":{"login":"papswell","id":8167151,"node_id":"MDQ6VXNlcjgxNjcxNTE=","avatar_url":"https://avatars.githubusercontent.com/u/8167151?v=4","gravatar_id":"","url":"https://api.github.com/users/papswell","html_url":"https://github.com/papswell","followers_url":"https://api.github.com/users/papswell/followers","following_url":"https://api.github.com/users/papswell/following{/other_user}","gists_url":"https://api.github.com/users/papswell/gists{/gist_id}","starred_url":"https://api.github.com/users/papswell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/papswell/subscriptions","organizations_url":"https://api.github.com/users/papswell/orgs","repos_url":"https://api.github.com/users/papswell/repos","events_url":"https://api.github.com/users/papswell/events{/privacy}","received_events_url":"https://api.github.com/users/papswell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T11:51:19Z","updated_at":"2019-06-14T11:51:19Z","author_association":"NONE","body":"Hi there, \r\n\r\nOn macOS, i finally managed to resolve this with the following config : \r\n```\r\n# ~/Library/Preferences/couchdb2-local.ini\r\n\r\n[httpd]\r\nWWW-Authenticate = Basic realm=\"Welcome to the Couch!\"\r\n```\r\n\r\nFound in the [official documentation](https://docs.couchdb.org/en/stable/config/http.html#httpd/WWW-Authenticate) :)\r\n\r\nHope this helps,\r\nRegards\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502079409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502194788","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-502194788","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":502194788,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjE5NDc4OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T17:22:34Z","updated_at":"2019-06-14T17:22:34Z","author_association":"CONTRIBUTOR","body":"@iilyak \r\n\r\nI gave it a try and still get the error:\r\n\r\n```\r\n==> asf-master (compile)\r\nmix format --check-formatted\r\nmix credo\r\nUnchecked dependencies for environment test:\r\n* jiffy (../jiffy)\r\n  the dependency is not available\r\n* httpotion (Hex package)\r\n  the dependency is not available, run \"mix deps.get\"\r\n* credo (Hex package)\r\n  the dependency is not available, run \"mix deps.get\"\r\n** (Mix) Can't continue due to errors on dependencies\r\n```\r\n\r\nBoth locally and CI as well it seems","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502194788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502258830","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502258830","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502258830,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI1ODgzMA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T20:50:25Z","updated_at":"2019-06-14T20:50:25Z","author_association":"MEMBER","body":"@nowisesys pointed out an interesting issue with this Pull Request. We have an ancient pattern in Mango which does a `module_loaded(dreyfus_index)` to check for the presence of Dreyfus before advertising text indexes. In release mode that module is not loaded on startup, so even if Dreyfus is included in a release the check can fail. Oops!\r\n\r\nA trivial switch here would be to use `dreyfus_sup` instead of `dreyfus_index` as the former will be loaded as part of the supervision tree, but that doesn't actually confirm a working Search system since this PR proposes to always start the Dreyfus app. I think we should come up with a smarter approach -- perhaps testing for a connected Clouseau node instead?\r\n\r\n/cc @rnewson @tonysun83 for comment","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502258830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502259805","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502259805","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502259805,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI1OTgwNQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T20:53:51Z","updated_at":"2019-06-14T20:53:51Z","author_association":"MEMBER","body":"Also, lifting the draft PR flag since we now have an associated documentation PR in apache/couchdb-documentation#418, and we also have a public Clouseau release:\r\n\r\n* https://github.com/cloudant-labs/clouseau/releases\r\n* https://maven.cloudant.com/repo/com/cloudant/clouseau/2.17.0/\r\n* https://cloud.docker.com/repository/docker/kocolosk/couchdb-search","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502259805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502288641","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502288641","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502288641,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI4ODY0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T21:38:45Z","updated_at":"2019-06-14T21:38:45Z","author_association":"MEMBER","body":"-1 on landing until this gets cleared up and my previous comment (re: \nprinciple of least astonishment and Search not working if Clouseau isn't \nconnected) is addressed.\n\n+1 once it is. :)\n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502288641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502291263","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502291263","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502291263,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjI5MTI2Mw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T21:50:18Z","updated_at":"2019-06-14T21:50:18Z","author_association":"MEMBER","body":"Yep understood and agreed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502291263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502304981","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502304981","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502304981,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjMwNDk4MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-14T22:58:34Z","updated_at":"2019-06-14T22:58:34Z","author_association":"MEMBER","body":"Testing for clouseau is a better approach but be aware that dreyfus intentionally tolerates clouseau not being up, any search request is retried a few times (with a sleep inbetween) if its down, in order to mask a clouseau reboot (typically for upgrades, but JVMs do sometimes OOM).\n\n> On 14 Jun 2019, at 21:50, Adam Kocoloski <notifications@github.com> wrote:\n> \n> @nowisesys pointed out an interesting issue with this Pull Request. We have an ancient pattern in Mango which does a module_loaded(dreyfus_index) to check for the presence of Dreyfus before advertising text indexes. In release mode that module is not loaded on startup, so even if Dreyfus is included in a release the check can fail. Oops!\n> \n> A trivial switch here would be to use dreyfus_sup instead of dreyfus_index as the former will be loaded as part of the supervision tree, but that doesn't actually confirm a working Search system since this PR proposes to always start the Dreyfus app. I think we should come up with a smarter approach -- perhaps testing for a connected Clouseau node instead?\n> \n> /cc @rnewson @tonysun83 for comment\n> \n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub, or mute the thread.\n> \n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502304981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502330265","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502330265","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502330265,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjMzMDI2NQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T03:22:09Z","updated_at":"2019-06-15T03:24:38Z","author_association":"MEMBER","body":"I made a small change to replace the check for the `dreyfus_index` module with a test message to the Clouseau node. Here's a summary how CouchDB behaves when Clouseau is not connected:\r\n\r\n### Search\r\n\r\n* Updates to a Search design document (i.e., one with a top-level `\"indexes\"` field) **succeed**. I doubt we want to change this as it would have significant implications for replication.\r\n* Search requests fail after ~30 seconds with a 500 status code and `{\"error\":\"timeout\",\"reason\":\"The request could not be processed in a reasonable amount of time.\"}`. This could be improved.\r\n\r\n### Mango\r\n\r\n* Attempts to create a Mango text index via the `_index` endpoint fail ~immediately with a 503 status and the following response: `{\"error\":\"required index service unavailable\",\"reason\":\"text\"}`. I think this is the right behavior.\r\n* The Mango query optimizer will skip any existing \"text\" indexes if the Clouseau subsystem is not available at query time. This could result in a previously fast query falling back to a full database scan. I'm OK with this.\r\n\r\nI think there are three followups:\r\n\r\n1. Reject the Search request immediately instead of timing out with a generic error\r\n1. Consider some retry logic to mask Clouseau reboots during upgrades as suggested by @rnewson. I could see doing a short bounded exponential backoff for a couple of seconds.\r\n1. Quantify the cost of the RPC-based check for Clouseau's presence; both the amount of time to do the check, and the number of times the check is invoked in the request path for a healthy system.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502330265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502363197","html_url":"https://github.com/apache/couchdb/issues/2054#issuecomment-502363197","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2054","id":502363197,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM2MzE5Nw==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T12:33:53Z","updated_at":"2019-06-17T03:39:56Z","author_association":"NONE","body":"And I also tried http://COORD-IP:PORT/_utils/#/setup to setup a cluster, after adding nodes, I clicked \"Configure Cluster\" button and received the same error message.\r\n\r\nSo I switched to CouchDB 2.3.0 and with _cluster_setup API I successfully created a cluster, then I stop the CouchDB services and switch to 2.3.1 , seems it could work.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502363197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502382227","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502382227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502382227,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjM4MjIyNw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-15T16:53:37Z","updated_at":"2019-06-15T16:53:37Z","author_association":"MEMBER","body":"for ref this is what dreyfus does for retries: https://github.com/cloudant-labs/dreyfus/blob/master/src/dreyfus_httpd.erl#L585 but obviously that is only for direct _search http requests, not via mango.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502382227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502501652","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-502501652","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":502501652,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjUwMTY1Mg==","user":{"login":"zhengpenghou","id":173097,"node_id":"MDQ6VXNlcjE3MzA5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/173097?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengpenghou","html_url":"https://github.com/zhengpenghou","followers_url":"https://api.github.com/users/zhengpenghou/followers","following_url":"https://api.github.com/users/zhengpenghou/following{/other_user}","gists_url":"https://api.github.com/users/zhengpenghou/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengpenghou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengpenghou/subscriptions","organizations_url":"https://api.github.com/users/zhengpenghou/orgs","repos_url":"https://api.github.com/users/zhengpenghou/repos","events_url":"https://api.github.com/users/zhengpenghou/events{/privacy}","received_events_url":"https://api.github.com/users/zhengpenghou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T00:59:25Z","updated_at":"2019-06-17T00:59:25Z","author_association":"NONE","body":"make sure you have the gpg public key used to sign the repo imported, otherwise, it is disbled  by default in 1804\r\ncurl -sSL https://couchdb.apache.org/repo/bintray-pubkey.asc | sudo apt-key add - ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502501652/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502673021","html_url":"https://github.com/apache/couchdb/issues/2055#issuecomment-502673021","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2055","id":502673021,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY3MzAyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T13:01:54Z","updated_at":"2019-06-17T13:01:54Z","author_association":"MEMBER","body":"@sarveshtamba This says that you changed the version of Erlang you have installed, but still have newer versions of Erlang in your `/usr/local/bin/erlang` directory, specifically the `tools-3.2/ebin/make.beam` file. This isn't a CouchDB error.\r\n\r\nCompletely remove all traces of your prior Erlang version before installing the newer version.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502673021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502674215","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-502674215","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":502674215,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjY3NDIxNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T13:05:29Z","updated_at":"2019-06-17T13:05:29Z","author_association":"MEMBER","body":"What @zhengpenghou is probably your issue. I'm unable to reproduce this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502674215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502722995","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502722995","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502722995,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjcyMjk5NQ==","user":{"login":"chintan-mishra","id":24296709,"node_id":"MDQ6VXNlcjI0Mjk2NzA5","avatar_url":"https://avatars.githubusercontent.com/u/24296709?v=4","gravatar_id":"","url":"https://api.github.com/users/chintan-mishra","html_url":"https://github.com/chintan-mishra","followers_url":"https://api.github.com/users/chintan-mishra/followers","following_url":"https://api.github.com/users/chintan-mishra/following{/other_user}","gists_url":"https://api.github.com/users/chintan-mishra/gists{/gist_id}","starred_url":"https://api.github.com/users/chintan-mishra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chintan-mishra/subscriptions","organizations_url":"https://api.github.com/users/chintan-mishra/orgs","repos_url":"https://api.github.com/users/chintan-mishra/repos","events_url":"https://api.github.com/users/chintan-mishra/events{/privacy}","received_events_url":"https://api.github.com/users/chintan-mishra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T15:07:10Z","updated_at":"2019-06-17T15:07:10Z","author_association":"NONE","body":"As a user, I have a question.\r\n\r\nWhy not include Clouseau as well?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502722995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502833369","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-502833369","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":502833369,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMjgzMzM2OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-17T20:13:19Z","updated_at":"2019-06-17T20:13:19Z","author_association":"MEMBER","body":"@chintan-mishra good question.\r\n\r\nThe Closeau codebase is a very different thing. It's all Scala/Java, so the release packaging machinery that we use for the main Erlang codebase wouldn't be applicable. It runs as a completely separate process, so the scripts that we use to start/stop/manage CouchDB wouldn't apply. It's also a relatively mature project and not one where the current IBM maintainers foresee a lot of additional contributions.\r\n\r\nI'd like to hear your opinion as a user. I can imagine you want the Search add-on to be enabled as simply as possible. I'd like to see that too, but personally I think the right approach is to ensure that when the Clouseau service is installed using the convenience binaries CouchDB recognizes it and uses it automatically, rather than pulling the whole codebase \"in-tree\".","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/502833369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503019843","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-503019843","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":503019843,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzAxOTg0Mw==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-18T09:14:21Z","updated_at":"2019-06-18T09:14:21Z","author_association":"CONTRIBUTOR","body":"@wohali any thoughts on this one? Still optimistic of some pointers/inputs here. Does the log \"log_make_check.log\" help?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503019843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503034193","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-503034193","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":503034193,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzAzNDE5Mw==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-18T09:52:49Z","updated_at":"2019-06-18T09:52:49Z","author_association":"CONTRIBUTOR","body":"I ran through the log once again and here is what I found for the following test cases:-\r\n\r\n```\r\nmem3_reshard_api_test:441: create_job_with_db...*timed out*\r\nmem3_reshard_api_test:472: create_job_with_shard_name...*timed out*\r\nmem3_reshard_test:314: split_twice...*timed out*\r\n```\r\n\r\nAnd these tests fail consistently across all the test suite runs.\r\n\r\nCould these tests be the reason of failure?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503034193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503150733","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-503150733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":503150733,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzE1MDczMw==","user":{"login":"AlexanderKaraberov","id":3254818,"node_id":"MDQ6VXNlcjMyNTQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3254818?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexanderKaraberov","html_url":"https://github.com/AlexanderKaraberov","followers_url":"https://api.github.com/users/AlexanderKaraberov/followers","following_url":"https://api.github.com/users/AlexanderKaraberov/following{/other_user}","gists_url":"https://api.github.com/users/AlexanderKaraberov/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexanderKaraberov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexanderKaraberov/subscriptions","organizations_url":"https://api.github.com/users/AlexanderKaraberov/orgs","repos_url":"https://api.github.com/users/AlexanderKaraberov/repos","events_url":"https://api.github.com/users/AlexanderKaraberov/events{/privacy}","received_events_url":"https://api.github.com/users/AlexanderKaraberov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-18T14:05:25Z","updated_at":"2019-06-18T14:07:42Z","author_association":"CONTRIBUTOR","body":"Hello @kocolosk \r\n\r\n> It's also a relatively mature project and not one where the current IBM maintainers foresee a lot of additional contributions.\r\n\r\nThe most fantastic thing would be to update Clouseau to Java 8+ and the latest Lucene .  I've already opened an issue for this: https://github.com/cloudant-labs/clouseau/issues/22 \r\nbut I'm still not sure about the approximate timeframe for this to land. Are there any plans in the Cloudant roadmap to update Clouseau? JDK8 compatibility would be a major boost for this project as well as Lucene upgrade. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503150733/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503218030","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-503218030","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":503218030,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzIxODAzMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-18T16:46:22Z","updated_at":"2019-06-18T16:46:22Z","author_association":"MEMBER","body":"@jiangphcn any ideas? ^^^","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503218030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503314150","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-503314150","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":503314150,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzMxNDE1MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-18T21:13:05Z","updated_at":"2019-06-18T21:13:05Z","author_association":"MEMBER","body":"Updating to Java 8 is non-trivial as several dependencies need updating and there is no upstream support for them anymore. a Pull Request for all that work would move things forward, of course, but an Issue reporting what we already know isn't going to.\r\n\r\nAs the author of dreyfus/clouseau, I should point out that those projects apply to CouchDB 2.0 specifically, they are tightly coupled/aligned with that architecture.\r\n\r\nFuture versions of CouchDB that use FoundationDB as the base layer will need an alternative solution, which I, and my team, are working on right now (http://github.com/cloudant-labs/fdblucene is the fundamental piece). This work is pure Java and targets JDK 8, though I personally develop against JDK 11.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503314150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503371250","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-503371250","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":503371250,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzM3MTI1MA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T01:34:01Z","updated_at":"2019-06-19T01:34:01Z","author_association":"CONTRIBUTOR","body":"> @wohali Another repro on this: saw it when enabling maintenance mode on a node.\r\n\r\n# Theory : Some update events are not delivered when node is in MM.\r\n\r\nThe `chttpd_auth_cache` server listens for changes to users database. So it can [evict](https://github.com/apache/couchdb/blob/master/src/chttpd/src/chttpd_auth_cache.erl#L165) updated entries from the cache. The changes listener is implemented using `fabric:changes/4`. The `fabric:changes` [iterates](https://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_db_update_listener.erl#L70:L73) over all shards for users database and calls [`start_update_notifier/1`](https://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_db_update_listener.erl#L76) for every shard. The [`start_update_notifier/1`](https://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_db_update_listener.erl#L76:L81) is implemented as follows:\r\n```\r\nstart_update_notifier(DbNames) ->\r\n    {Caller, Ref} = get(rexi_from),\r\n    Notify = config:get(\"couchdb\", \"maintenance_mode\", \"false\") /= \"true\",\r\n    State = #cb_state{client_pid = Caller, client_ref = Ref, notify = Notify},\r\n    Options = [{parent, Caller}, {dbnames, DbNames}],\r\n    couch_event:listen(?MODULE, handle_db_event, State, Options).\r\n```\r\n\r\nThe notification about a database update is not send if node is in the maintenance mode. The failure mode is as follows:\r\n\r\n- put node in the MM\r\n- cause changes listener restart (it would be restarted automatically after config:get(\"httpd\", \"changes_timeout\", \"60000\")) milliseconds.\r\n- update user \r\n- we would miss db_update event (because Notify would be false)\r\n- the ets_lru cache backing chttpd_auth_cache would still be holding old entry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503371250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503388033","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-503388033","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":503388033,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzM4ODAzMw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T03:07:36Z","updated_at":"2019-06-19T03:07:36Z","author_association":"MEMBER","body":"The latest commit preserves the exponential backoff for Search requests, but if the final error message indicates an inability to connect to Clouseau the error message will be\r\n\r\n```\r\n{\"error\":\"ou_est_clouseau\",\"reason\":\"Could not connect to the Clouseau Java service at clouseau@127.0.0.1\"}\r\n```\r\n\r\nThat seems like a reasonable improvement to me.\r\n\r\nI also did an ad hoc measurement of the time required to do the `clouseau_rpc:connected()` check. Unfortunately, on a Kubernetes deployment with CouchDB and Clouseau in the same Pod this check cost more than **3 milliseconds**, which seems an unacceptably long amount of time to waste on the happy path. I will think a bit more about how to guard those Mango requests in a way that doesn't introduce too much latency to a well-configured system.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503388033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503390056","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-503390056","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":503390056,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzM5MDA1Ng==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T03:19:19Z","updated_at":"2019-06-19T03:19:19Z","author_association":"MEMBER","body":"OK, so now the `connected()` check first looks at the hidden nodes to see if we already have a connection to Clouseau. This check is much cheaper, around 0.1 ms. If no connection exists already, it tries the `version()` RPC to see if a connection can be made.\r\n\r\nPersonally I'm satisfied with the PR at this point.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503390056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503418241","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-503418241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":503418241,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzQxODI0MQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T05:58:35Z","updated_at":"2019-06-19T05:58:35Z","author_association":"CONTRIBUTOR","body":"I found timer values in the respective erl files as below. I increased them from values 100 to 10000(not sure if thats the clean way to do it):-\r\n        src/mem3/test/mem3_reshard_test.erl\r\n        src/mem3/test/mem3_reshard_api_test.erl\r\nHowever, not much effect by increasing the timeouts, the tests still fail. Is there any other way to increase the timeout values or anything that I am missing?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503418241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503452610","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-503452610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":503452610,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzQ1MjYxMA==","user":{"login":"chintan-mishra","id":24296709,"node_id":"MDQ6VXNlcjI0Mjk2NzA5","avatar_url":"https://avatars.githubusercontent.com/u/24296709?v=4","gravatar_id":"","url":"https://api.github.com/users/chintan-mishra","html_url":"https://github.com/chintan-mishra","followers_url":"https://api.github.com/users/chintan-mishra/followers","following_url":"https://api.github.com/users/chintan-mishra/following{/other_user}","gists_url":"https://api.github.com/users/chintan-mishra/gists{/gist_id}","starred_url":"https://api.github.com/users/chintan-mishra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chintan-mishra/subscriptions","organizations_url":"https://api.github.com/users/chintan-mishra/orgs","repos_url":"https://api.github.com/users/chintan-mishra/repos","events_url":"https://api.github.com/users/chintan-mishra/events{/privacy}","received_events_url":"https://api.github.com/users/chintan-mishra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T08:01:43Z","updated_at":"2019-06-19T08:03:27Z","author_association":"NONE","body":"@kocolosk yes I would prefer Full-Text Search to be one of the config options in the CouchDB config.\r\n\r\nEdit: The approach mentioned by you looks easy. I am up for that type of setup.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503452610/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503523833","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-503523833","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":503523833,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzUyMzgzMw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T11:37:59Z","updated_at":"2019-06-19T11:37:59Z","author_association":"CONTRIBUTOR","body":"> @iilyak Theory : Some update events are not delivered when node is in MM.\r\n\r\nHowever it wouldn't explain why errors are happening only with system databases.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503523833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503654943","html_url":"https://github.com/apache/couchdb/pull/2056#issuecomment-503654943","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2056","id":503654943,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzY1NDk0Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T17:27:32Z","updated_at":"2019-06-19T17:27:32Z","author_association":"MEMBER","body":"Related PR suggested by @wohali: https://github.com/apache/couchdb-documentation/pull/422","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503654943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503682023","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-503682023","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":503682023,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMzY4MjAyMw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-19T18:43:13Z","updated_at":"2019-06-19T18:43:13Z","author_association":"CONTRIBUTOR","body":"In general, you can increase the timeout by wrapping tests in a tuple of the form\r\n```\r\n{timeout, Time::number(), Tests}\r\n```\r\nas detailed in http://erlang.org/doc/apps/eunit/chapter.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/503682023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504002702","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-504002702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":504002702,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDAwMjcwMg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-20T12:16:13Z","updated_at":"2019-06-20T12:16:13Z","author_association":"CONTRIBUTOR","body":"> In general, you can increase the timeout by wrapping tests in a tuple of the form\r\n> \r\n> ```\r\n> {timeout, Time::number(), Tests}\r\n> ```\r\n> \r\n> as detailed in http://erlang.org/doc/apps/eunit/chapter.html\r\n\r\nCan you please tell me where do I make these changes? Sorry, but I am new to Erlang/CouchDB :) Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504002702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504106821","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-504106821","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":504106821,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDEwNjgyMQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-20T17:07:56Z","updated_at":"2019-06-20T17:07:56Z","author_association":"CONTRIBUTOR","body":"> mem3_reshard_api_test:441: create_job_with_db...*timed out*\r\n> mem3_reshard_api_test:472: create_job_with_shard_name...*timed out*\r\n> mem3_reshard_test:314: split_twice...*timed out*\r\n\r\nFor the first failure, you could try replacing [this line](https://github.com/apache/couchdb/blob/master/src/mem3/test/mem3_reshard_api_test.erl#L86) with something like:\r\n ```\r\n{timeout, 20, fun create_job_with_db/1},\r\n```\r\nwhere the numerical value is in seconds. The default is 5, so you can play around with larger values to see if that allows the test to pass. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504106821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504139045","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-504139045","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":504139045,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDEzOTA0NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-20T18:45:19Z","updated_at":"2019-06-20T18:45:19Z","author_association":"MEMBER","body":"very happy to see this, thanks everyone!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504139045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504175553","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-504175553","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":504175553,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDE3NTU1Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-20T20:42:48Z","updated_at":"2019-06-20T20:42:48Z","author_association":"CONTRIBUTOR","body":"This PR is almost there. You did an enormous amount of work. It just needs little refactoring. My worry is that in the current form it is too close to JavaScript's big monolithic test. It would be nice to split big test into multiple smaller ones. The elixir framework in its current shape has few features which can be used here. For example instead of relying on `run_on_modified_server` it might be possible to use `@moduletag config`\r\n\r\n```\r\ndefmodule CookieAuthTest do\r\n  ...\r\n  @moduletag config: [\r\n     {\"chttpd_auth\", \"authentication_db\", db_name},\r\n     {\"chttpd_auth\", \"auth_cache_size\", \"3\"},\r\n     {\"httpd\", \"authentication_handlers\", \"{couch_httpd_auth, default_authentication_handler}\"},\r\n     {\"chttpd_auth\", \"secret\", generate_secret(64)}  \r\n  ]\r\n  test \"that the users db is born with the auth ddoc\" do\r\n     ...\r\n  end\r\n\r\n  test \"we can't create _names\" do\r\n    ...\r\n  end\r\n\r\n  test \"we can't create malformed ids\" do\r\n    ...\r\n  end\r\n\r\n  test \"login works\" do\r\n    ...\r\n  end\r\n\r\n  test \"can't delete another users doc unless you are admin\" do\r\n    ...\r\n  end\r\n\r\n  test \"redirect on success\" do\r\n    ...\r\n  end\r\n\r\n  test \"redirect on failure\" do\r\n    ...\r\n  end\r\n\r\n  ...and so on...\r\nend\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504175553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504439968","html_url":"https://github.com/apache/couchdb/pull/2037#issuecomment-504439968","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2037","id":504439968,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDQzOTk2OA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-21T14:10:18Z","updated_at":"2019-06-21T14:10:18Z","author_association":"MEMBER","body":"Doing a traditional merge commit here to be consistent with our past process on `git-subtree` merges. Thanks for the review everyone!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504439968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504893632","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-504893632","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":504893632,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDg5MzYzMg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-24T07:31:29Z","updated_at":"2019-06-24T07:31:29Z","author_association":"CONTRIBUTOR","body":"I did the following change:-\r\n```\r\nsar@pts00452-vm13:~/couchdb/couchdb$ git diff\r\ndiff --git a/src/mem3/test/mem3_reshard_api_test.erl b/src/mem3/test/mem3_reshard_api_test.erl\r\nindex 982fed1..61ac32a 100644\r\n--- a/src/mem3/test/mem3_reshard_api_test.erl\r\n+++ b/src/mem3/test/mem3_reshard_api_test.erl\r\n@@ -83,7 +83,8 @@ mem3_reshard_api_test_() ->\r\n                     fun individual_job_start_stop/1,\r\n                     fun individual_job_stop_when_cluster_stopped/1,\r\n                     fun create_job_with_invalid_arguments/1,\r\n-                    fun create_job_with_db/1,\r\n+                    %fun create_job_with_db/1,\r\n+                   {timeout, 20, fun create_job_with_db/1},\r\n                     fun create_job_with_shard_name/1,\r\n                     fun completed_job_handling/1,\r\n                     fun handle_db_deletion_in_initial_copy/1,\r\n```\r\n\r\nHowever now im following this below error:-\r\n```\r\nmodule 'mem3_reshard_api_test'\r\n  mem3 shard split api tests\r\n    mem3_reshard_api_test:114: basics...[0.019 s] ok\r\n    mem3_reshard_api_test:145: create_job_basic...[0.235 s] ok\r\n    mem3_reshard_api_test:200: create_two_jobs...[0.614 s] ok\r\n    mem3_reshard_api_test:226: create_multiple_jobs_from_one_post...[0.314 s] ok\r\n    mem3_reshard_api_test:235: start_stop_cluster_basic...[0.299 s] ok\r\n    mem3_reshard_api_test:269: test_disabled...[0.010 s] ok\r\n    mem3_reshard_api_test:281: start_stop_cluster_with_a_job...[0.623 s] ok\r\n    mem3_reshard_api_test:324: individual_job_start_stop...[2.012 s] ok\r\n    mem3_reshard_api_test:360: individual_job_stop_when_cluster_stopped...[2.816 s] ok\r\n    mem3_reshard_api_test:405: create_job_with_invalid_arguments...[0.023 s] ok\r\n  undefined\r\n  *** bad test descriptor ***\r\n**#Fun<mem3_reshard_api_test.7.17670752>\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/504893632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505030624","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505030624","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505030624,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTAzMDYyNA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-24T14:19:15Z","updated_at":"2019-06-24T14:19:15Z","author_association":"CONTRIBUTOR","body":"@wohali @jaydoane @jiangphcn any inputs, this is blocking our task on having couchdb on ppc64le. Appreciate any prompt help. Thanks! :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505030624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505245702","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505245702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505245702,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTI0NTcwMg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T01:55:04Z","updated_at":"2019-06-25T01:55:04Z","author_association":"CONTRIBUTOR","body":"Sorry for lateness. I missed the ping from @wohali. Please try to use below snippet. Currently, I use 60, and you can adjust it to proper value in your environment.\r\n\r\n```\r\n create_job_with_db({Top, {Db1, _, _}}) ->\r\n-    ?_test(begin\r\n+    {timeout, 60, ?_test(begin\r\n         Jobs = Top ++ ?JOBS,\r\n         Body1 = #{type => split, db => Db1},\r\n\r\n@@ -465,7 +466,7 @@ create_job_with_db({Top, {Db1, _, _}}) ->\r\n             [16#80000000, 16#bfffffff],\r\n             [16#c0000000, 16#ffffffff]\r\n         ], [mem3:range(S) || S <- lists:sort(mem3:shards(Db1))])\r\n-    end).\r\n+    end)}.\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505245702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505313048","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505313048","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505313048,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTMxMzA0OA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T06:56:12Z","updated_at":"2019-06-25T06:56:32Z","author_association":"CONTRIBUTOR","body":"@jiangphcn thanks for your inputs. :)\r\nThe test suite execution proceeds ahead and fails at the following step:-\r\n```\r\nOK (SKIP=128)\r\nmake[1]: Leaving directory '/home/sar/couchdb/couchdb'\r\nmake[1]: Entering directory '/home/sar/couchdb/couchdb'\r\n=CRASH REPORT==== 25-Jun-2019::11:55:01.509626 ===\r\n  crasher:\r\n    initial call: Elixir.GenEvent:init_it/6\r\n    pid: <0.87.0>\r\n    registered_name: 'Elixir.Logger'\r\n    exception error: undefined function gen:debug_options/1\r\n      in function  'Elixir.GenEvent':init_it/6 (lib/gen_event.ex, line 538)\r\n    ancestors: ['Elixir.Logger.Supervisor',<0.85.0>]\r\n    message_queue_len: 0\r\n    messages: []\r\n    links: [<0.86.0>]\r\n    dictionary: []\r\n    trap_exit: false\r\n    status: running\r\n    heap_size: 376\r\n    stack_size: 27\r\n    reductions: 244\r\n  neighbours:\r\n\r\n=SUPERVISOR REPORT==== 25-Jun-2019::11:55:01.517883 ===\r\n    supervisor: {local,'Elixir.Logger.Supervisor'}\r\n    errorContext: start_error\r\n    reason: {undef,\r\n                [{gen,debug_options,[[]],[]},\r\n                 {'Elixir.GenEvent',init_it,6,\r\n                     [{file,\"lib/gen_event.ex\"},{line,538}]},\r\n                 {proc_lib,init_p_do_apply,3,\r\n                     [{file,\"proc_lib.erl\"},{line,249}]}]}\r\n    offender: [{pid,undefined},\r\n               {id,'Elixir.GenEvent'},\r\n               {mfargs,\r\n                   {'Elixir.GenEvent',start_link,[[{name,'Elixir.Logger'}]]}},\r\n               {restart_type,permanent},\r\n               {shutdown,5000},\r\n               {child_type,worker}]\r\n=CRASH REPORT==== 25-Jun-2019::11:55:01.518202 ===\r\n  crasher:\r\n    initial call: application_master:init/4\r\n    pid: <0.84.0>\r\n    registered_name: []\r\n    exception exit: {{shutdown,\r\n                         {failed_to_start_child,'Elixir.GenEvent',\r\n                             {undef,\r\n                                 [{gen,debug_options,[[]],[]},\r\n                                  {'Elixir.GenEvent',init_it,6,\r\n                                      [{file,\"lib/gen_event.ex\"},{line,538}]},\r\n                                  {proc_lib,init_p_do_apply,3,\r\n                                      [{file,\"proc_lib.erl\"},{line,249}]}]}}},\r\n                     {'Elixir.Logger.App',start,[normal,[]]}}\r\n      in function  application_master:init/4 (application_master.erl, line 138)\r\n    ancestors: [<0.83.0>]\r\n    message_queue_len: 1\r\n    messages: [{'EXIT',<0.85.0>,normal}]\r\n    links: [<0.83.0>,<0.43.0>]\r\n    dictionary: []\r\n    trap_exit: true\r\n    status: running\r\n    heap_size: 610\r\n    stack_size: 27\r\n    reductions: 207\r\n  neighbours:\r\n\r\n=INFO REPORT==== 25-Jun-2019::11:55:01.518827 ===\r\n    application: logger\r\n    exited: {{shutdown,\r\n                 {failed_to_start_child,'Elixir.GenEvent',\r\n                     {undef,\r\n                         [{gen,debug_options,[[]],[]},\r\n                          {'Elixir.GenEvent',init_it,6,\r\n                              [{file,\"lib/gen_event.ex\"},{line,538}]},\r\n                          {proc_lib,init_p_do_apply,3,\r\n                              [{file,\"proc_lib.erl\"},{line,249}]}]}}},\r\n             {'Elixir.Logger.App',start,[normal,[]]}}\r\n    type: temporary\r\n** (Mix) Invalid Elixir version requirement ~> 1.6 in mix.exs file\r\nMakefile:220: recipe for target 'elixir-init' failed\r\nmake[1]: *** [elixir-init] Error 1\r\nmake[1]: Leaving directory '/home/sar/couchdb/couchdb'\r\nMakefile:148: recipe for target 'check' failed\r\nmake: *** [check] Error 2\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505313048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505319872","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505319872","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505319872,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTMxOTg3Mg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T07:19:12Z","updated_at":"2019-06-25T07:19:12Z","author_association":"CONTRIBUTOR","body":"do you install proper elixir `** (Mix) Invalid Elixir version requirement ~> 1.6 in mix.exs file`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505319872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505357593","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505357593","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505357593,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTM1NzU5Mw==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T09:08:23Z","updated_at":"2019-06-25T09:08:23Z","author_association":"CONTRIBUTOR","body":"I made the above suggested changes from @jiangphcn for all the 3 failing test cases, post which all them passed successfully.\r\nThe next failure was seen due to Elixir version issues.\r\n\r\nThe Elixir version available and installed for powerpc64le via apt is elixir/xenial 1.1.0~0.20150708-1 ppc64el which is lower than the Elixir version requirement ~> 1.6 for CouchDB. Hence built the latest Elixir version 1.10.0-dev from source.\r\n\r\nWith this the test suite proceeded ahead and now failing at the following step:-\r\n```\r\n    ** (Mix) mix format failed due to --check-formatted.\r\n    The following files were not formatted:\r\n\r\n      * /home/sar/couchdb/couchdb/test/elixir/test/replication_test.exs\r\n      * /home/sar/couchdb/couchdb/test/elixir/test/attachments_multipart_test.exs\r\n      * /home/sar/couchdb/couchdb/test/elixir/test/conflicts_test.exs\r\n\r\n    Makefile:236: recipe for target 'elixir-check-formatted' failed\r\n    make[1]: *** [elixir-check-formatted] Error 1\r\n    make[1]: Leaving directory '/home/sar/couchdb/couchdb'\r\n    Makefile:148: recipe for target 'check' failed\r\n    make: *** [check] Error 2\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505357593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505364283","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505364283","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505364283,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTM2NDI4Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T09:27:10Z","updated_at":"2019-06-25T09:27:10Z","author_association":"CONTRIBUTOR","body":"Can you add `mix format` before `mix test`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505364283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505459649","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-505459649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":505459649,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTQ1OTY0OQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-25T14:03:40Z","updated_at":"2019-06-25T14:03:40Z","author_association":"CONTRIBUTOR","body":"> Can you add `mix format` before `mix test`?\r\n\r\n@jiangphcn \r\nI tried adding `mix format` before `mix test` in the following files, yet facing the same errors as before\r\ntest/elixir/Makefile\r\ntest/elixir/run\r\ntest/elixir/run.cmd\r\nIs there any other specific file or specific convention for calling mix format/mix test?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505459649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505812699","html_url":"https://github.com/apache/couchdb/issues/1254#issuecomment-505812699","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1254","id":505812699,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTgxMjY5OQ==","user":{"login":"htejwani","id":5311510,"node_id":"MDQ6VXNlcjUzMTE1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/5311510?v=4","gravatar_id":"","url":"https://api.github.com/users/htejwani","html_url":"https://github.com/htejwani","followers_url":"https://api.github.com/users/htejwani/followers","following_url":"https://api.github.com/users/htejwani/following{/other_user}","gists_url":"https://api.github.com/users/htejwani/gists{/gist_id}","starred_url":"https://api.github.com/users/htejwani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/htejwani/subscriptions","organizations_url":"https://api.github.com/users/htejwani/orgs","repos_url":"https://api.github.com/users/htejwani/repos","events_url":"https://api.github.com/users/htejwani/events{/privacy}","received_events_url":"https://api.github.com/users/htejwani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-26T10:13:48Z","updated_at":"2019-06-26T10:13:48Z","author_association":"NONE","body":"Is there any time estimate for the aggregate feature to be released?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505812699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505833224","html_url":"https://github.com/apache/couchdb/issues/1254#issuecomment-505833224","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1254","id":505833224,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNTgzMzIyNA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-26T11:21:50Z","updated_at":"2019-06-26T11:21:50Z","author_association":"MEMBER","body":"Not at the moment. Its not being worked on at the moment.\n\n\n________________________________\nFrom: htejwani <notifications@github.com>\nSent: Wednesday, June 26, 2019 12:13 PM\nTo: apache/couchdb\nCc: garren smith; Comment\nSubject: Re: [apache/couchdb] Add aggregation functions to Mango (#1254)\n\n\nIs there any time estimate for the aggregate feature to be released?\n\n\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/1254?email_source=notifications&email_token=AABL2ARNCA6JPS6EZ7C2N2TP4M6N7A5CNFSM4EYCBVF2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODYTBNWY#issuecomment-505812699>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AABL2AVIEPMTRJEX2WRK3EDP4M6N7ANCNFSM4EYCBVFQ>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/505833224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506057171","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-506057171","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":506057171,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjA1NzE3MQ==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-26T21:45:26Z","updated_at":"2019-06-26T21:45:26Z","author_association":"CONTRIBUTOR","body":"Thanks @iilyak  for your review. I've updated the PR with the changes you proposed.\r\n\r\nI agree with you that the current form of the test is not ideal but I tried to do just a transcription of the original test keeping the previous test structure. \r\n\r\nI'll check if we can use new elixir test suite features for test splitting ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506057171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506069402","html_url":"https://github.com/apache/couchdb/issues/2061#issuecomment-506069402","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2061","id":506069402,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjA2OTQwMg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-26T22:33:34Z","updated_at":"2019-06-26T22:33:34Z","author_association":"MEMBER","body":"In your third step you remove the 'name' property of the document, and thus it no longer matches your selector. \r\n\r\nThe DELETE method performs a PUT preserving only _id, _rev and _deleted (set to true).\r\n\r\nInstead do a PUT, keeping the \"name\" field and adding \"_deleted\":true","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506069402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506192592","html_url":"https://github.com/apache/couchdb/issues/2061#issuecomment-506192592","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2061","id":506192592,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjE5MjU5Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T05:13:28Z","updated_at":"2019-06-27T05:13:28Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506192592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506210407","html_url":"https://github.com/apache/couchdb/issues/2061#issuecomment-506210407","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2061","id":506210407,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjIxMDQwNw==","user":{"login":"modul","id":700246,"node_id":"MDQ6VXNlcjcwMDI0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/700246?v=4","gravatar_id":"","url":"https://api.github.com/users/modul","html_url":"https://github.com/modul","followers_url":"https://api.github.com/users/modul/followers","following_url":"https://api.github.com/users/modul/following{/other_user}","gists_url":"https://api.github.com/users/modul/gists{/gist_id}","starred_url":"https://api.github.com/users/modul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/modul/subscriptions","organizations_url":"https://api.github.com/users/modul/orgs","repos_url":"https://api.github.com/users/modul/repos","events_url":"https://api.github.com/users/modul/events{/privacy}","received_events_url":"https://api.github.com/users/modul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T06:27:19Z","updated_at":"2019-06-27T06:27:19Z","author_association":"NONE","body":"Well, that does make sense. I would suggest to mention this in the docs even though it is self-explanatory.\r\n\r\nThanks for the quick response and sorry for opening this as a bug.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506210407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506215736","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-506215736","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":506215736,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjIxNTczNg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T06:47:26Z","updated_at":"2019-06-27T06:47:26Z","author_association":"CONTRIBUTOR","body":"@sarveshtamba I failed to reproduce problem in my environment.  The elixir I used is 1.8.0-1. Can you have a try with this version?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506215736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506223028","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-506223028","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":506223028,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjIyMzAyOA==","user":{"login":"MadhuMPandurangi","id":27917751,"node_id":"MDQ6VXNlcjI3OTE3NzUx","avatar_url":"https://avatars.githubusercontent.com/u/27917751?v=4","gravatar_id":"","url":"https://api.github.com/users/MadhuMPandurangi","html_url":"https://github.com/MadhuMPandurangi","followers_url":"https://api.github.com/users/MadhuMPandurangi/followers","following_url":"https://api.github.com/users/MadhuMPandurangi/following{/other_user}","gists_url":"https://api.github.com/users/MadhuMPandurangi/gists{/gist_id}","starred_url":"https://api.github.com/users/MadhuMPandurangi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MadhuMPandurangi/subscriptions","organizations_url":"https://api.github.com/users/MadhuMPandurangi/orgs","repos_url":"https://api.github.com/users/MadhuMPandurangi/repos","events_url":"https://api.github.com/users/MadhuMPandurangi/events{/privacy}","received_events_url":"https://api.github.com/users/MadhuMPandurangi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T07:13:24Z","updated_at":"2019-06-27T07:13:24Z","author_association":"NONE","body":"Even I was facing the same issue. I couldn't install couchdb on ubutnu 18.04. So i Switched to Ubuntu 16.04 where I was able to  instal succesfully.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506223028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506223748","html_url":"https://github.com/apache/couchdb/issues/1856#issuecomment-506223748","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1856","id":506223748,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjIyMzc0OA==","user":{"login":"zhengpenghou","id":173097,"node_id":"MDQ6VXNlcjE3MzA5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/173097?v=4","gravatar_id":"","url":"https://api.github.com/users/zhengpenghou","html_url":"https://github.com/zhengpenghou","followers_url":"https://api.github.com/users/zhengpenghou/followers","following_url":"https://api.github.com/users/zhengpenghou/following{/other_user}","gists_url":"https://api.github.com/users/zhengpenghou/gists{/gist_id}","starred_url":"https://api.github.com/users/zhengpenghou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhengpenghou/subscriptions","organizations_url":"https://api.github.com/users/zhengpenghou/orgs","repos_url":"https://api.github.com/users/zhengpenghou/repos","events_url":"https://api.github.com/users/zhengpenghou/events{/privacy}","received_events_url":"https://api.github.com/users/zhengpenghou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T07:15:51Z","updated_at":"2019-06-27T07:15:51Z","author_association":"NONE","body":"What exactly was the error?\n\nOn Thu, Jun 27, 2019 at 15:13 Madhu M Pandurangi <notifications@github.com>\nwrote:\n\n> Even I was facing the same issue. I couldn't install couchdb on ubutnu\n> 18.04. So i Switched to Ubuntu 16.04 where I was able to instal succesfully.\n>\n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/1856?email_source=notifications&email_token=AABKIKOO67WQYVRXGF4U343P4RSB7A5CNFSM4GPWLTI2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGODYWFTNA#issuecomment-506223028>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AABKIKJ47HZSEWKIWXJ4KGDP4RSB7ANCNFSM4GPWLTIQ>\n> .\n>\n-- \nMobile: +86 185 0003 6513 <185%200003%206513>\nWechat: zhengpenghou\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506223748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506295036","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-506295036","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":506295036,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjI5NTAzNg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T10:45:15Z","updated_at":"2019-06-27T10:45:15Z","author_association":"CONTRIBUTOR","body":"> @sarveshtamba I failed to reproduce problem in my environment. The elixir I used is 1.8.0-1. Can you have a try with this version?\r\n\r\nThanks @jiangphcn , it works fine with Elixir v1.8.2 and the test suite proceeds ahead.\r\nSeeing the below new errors and trying to understand them. Are these related to any network settings/proxy issues?\r\nItem no. 8 is a timeout.\r\n```\r\n  1) test replication by doc ids - local-to-local (ReplicationTest)\r\n     test/replication_test.exs:228\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     code: run_by_id_repl(@src_prefix, @tgt_prefix)\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/replication_test.exs:994: ReplicationTest.run_by_id_repl_impl/3\r\n       (elixir) lib/enum.ex:783: Enum.\"-each/2-lists^foreach/1-0-\"/2\r\n       (elixir) lib/enum.ex:783: Enum.each/2\r\n       test/replication_test.exs:229: (test)\r\n  2) test replication restarts after filter change - COUCHDB-892 - remote-to-local (ReplicationTest)\r\n     test/replication_test.exs:224\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     code: run_filter_changed_repl(@src_prefix, @tgt_prefix)\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/replication_test.exs:847: ReplicationTest.run_filter_changed_repl/2\r\n       test/replication_test.exs:225: (test)\r\n  3) test create_target filter option - remote-to-remote (ReplicationTest)\r\n     test/replication_test.exs:216\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     code: run_create_target_repl(@src_prefix, @tgt_prefix)\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/replication_test.exs:705: ReplicationTest.run_create_target_repl/2\r\n       test/replication_test.exs:217: (test)\r\n 10) SecurityValidationTest: failure on setup_all callback, all tests have been invalidated\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/security_validation_test.exs:52: SecurityValidationTest.__ex_unit_setup_all_1/1\r\n       test/security_validation_test.exs:1: SecurityValidationTest.__ex_unit__/2\r\n  4) test PUT fails for partitions with _ (PartitionCrudTest)\r\n     test/partition_crud_test.exs:48\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       (foo) lib/couch/db_test.ex:38: Couch.DBTest.set_db_context/1\r\n       (elixir) lib/enum.ex:1947: Enum.\"-reduce/3-lists^foldl/2-0-\"/3\r\n       (foo) test/support/couch_test_case.ex:23: CouchTestCase.__ex_unit_setup_0/1\r\n       (foo) test/support/couch_test_case.ex:1: CouchTestCase.__ex_unit__/2\r\n       test/partition_crud_test.exs:1: PartitionCrudTest.__ex_unit__/2\r\n  5) test _bulk_docs errors with bad partition key (PartitionCrudTest)\r\n     test/partition_crud_test.exs:208\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       (foo) lib/couch/db_test.ex:38: Couch.DBTest.set_db_context/1\r\n       (elixir) lib/enum.ex:1947: Enum.\"-reduce/3-lists^foldl/2-0-\"/3\r\n       (foo) test/support/couch_test_case.ex:23: CouchTestCase.__ex_unit_setup_0/1\r\n       (foo) test/support/couch_test_case.ex:1: CouchTestCase.__ex_unit__/2\r\n       test/partition_crud_test.exs:1: PartitionCrudTest.__ex_unit__/2\r\n  6) test accidental POST to form handling code (InvalidDocIDsTest)\r\n     test/invalid_docids_test.exs:46\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       (foo) lib/couch/db_test.ex:38: Couch.DBTest.set_db_context/1\r\n       (elixir) lib/enum.ex:1947: Enum.\"-reduce/3-lists^foldl/2-0-\"/3\r\n       (foo) test/support/couch_test_case.ex:23: CouchTestCase.__ex_unit_setup_0/1\r\n       (foo) test/support/couch_test_case.ex:1: CouchTestCase.__ex_unit__/2\r\n       test/invalid_docids_test.exs:1: InvalidDocIDsTest.__ex_unit__/2\r\n  7) test Database should be in _all_dbs (BasicsTest)\r\n     test/basics_test.exs:57\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       (foo) lib/couch/db_test.ex:38: Couch.DBTest.set_db_context/1\r\n       (elixir) lib/enum.ex:1947: Enum.\"-reduce/3-lists^foldl/2-0-\"/3\r\n       (foo) test/support/couch_test_case.ex:23: CouchTestCase.__ex_unit_setup_0/1\r\n       (foo) test/support/couch_test_case.ex:1: CouchTestCase.__ex_unit__/2\r\n       test/basics_test.exs:1: BasicsTest.__ex_unit__/2\r\n  8) test compaction reduces size of deleted docs (CompactTest)\r\n     test/compact_test.exs:17\r\n     ** (RuntimeError) timed out after 5105 ms\r\n     code: retry_until(fn ->\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/compact_test.exs:38: (test)\r\n  9) test manages attachments in views successfully (AttachmentViewTest)\r\n     test/attachment_views_test.exs:12\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     code: query(db_name, map_function, reduce_function, %{\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:257: Couch.DBTest.query/6\r\n       test/attachment_views_test.exs:83: (test)\r\n\r\nReshardHelpers\r\n\r\nPartitionHelpers\r\n\r\n\r\nFinished in 2296.3 seconds\r\n298 tests, 9 failures, 23 excluded, 7 invalid\r\n\r\nRandomized with seed 324747\r\nMakefile:216: recipe for target 'elixir' failed\r\nmake[1]: *** [elixir] Error 1\r\nmake[1]: Leaving directory '/home/sar/couchdb/couchdb'\r\nMakefile:148: recipe for target 'check' failed\r\nmake: *** [check] Error 2\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506295036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506312673","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-506312673","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":506312673,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjMxMjY3Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T11:46:07Z","updated_at":"2019-06-27T11:46:07Z","author_association":"CONTRIBUTOR","body":"@sarveshtamba from error, i can see that database can't be created due to timeout. Most likely, it is related to connection. You may have a try to start couchdb instance, and use `curl` to create database, and see whether there is similar issue. And then debugging the difference from the case in elixir. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506312673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506395738","html_url":"https://github.com/apache/couchdb/issues/2064#issuecomment-506395738","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2064","id":506395738,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjM5NTczOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T15:31:34Z","updated_at":"2019-06-27T15:31:34Z","author_association":"MEMBER","body":"Deleting and immediately recreating a database in CouchDB 2.x is a known anti-pattern that can lead to the problem you described.\r\n\r\nThere's no good workaround other than not doing this, **especially** for the `_users` and `_replicator` databases.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506395738/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506896012","html_url":"https://github.com/apache/couchdb/pull/2039#issuecomment-506896012","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2039","id":506896012,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjg5NjAxMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-28T22:34:08Z","updated_at":"2019-06-28T22:34:08Z","author_association":"CONTRIBUTOR","body":"Almost there. I see a few errors like\r\n\r\n```\r\n^[[31m** (File.Error) could not read file \"test/data/lorem.txt\": no such file or directory^[[0m\r\n``` \r\n\r\nIn Travis logs. It doesn't seem like a timing issue. Maybe we changed some default paths or something of that sort.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/506896012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/507043600","html_url":"https://github.com/apache/couchdb/pull/1253#issuecomment-507043600","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1253","id":507043600,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzA0MzYwMA==","user":{"login":"nkosi23","id":6731436,"node_id":"MDQ6VXNlcjY3MzE0MzY=","avatar_url":"https://avatars.githubusercontent.com/u/6731436?v=4","gravatar_id":"","url":"https://api.github.com/users/nkosi23","html_url":"https://github.com/nkosi23","followers_url":"https://api.github.com/users/nkosi23/followers","following_url":"https://api.github.com/users/nkosi23/following{/other_user}","gists_url":"https://api.github.com/users/nkosi23/gists{/gist_id}","starred_url":"https://api.github.com/users/nkosi23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkosi23/subscriptions","organizations_url":"https://api.github.com/users/nkosi23/orgs","repos_url":"https://api.github.com/users/nkosi23/repos","events_url":"https://api.github.com/users/nkosi23/events{/privacy}","received_events_url":"https://api.github.com/users/nkosi23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-30T15:05:21Z","updated_at":"2019-06-30T15:05:21Z","author_association":"NONE","body":"When we talk about 64Mb, 2Gb etc... are we talking about default values that can be raised by the user, or hard limits that the end user cannot change?\r\n\r\nFor example, if 64Mb is selected for 3.0, would individual users still be able to set 4Gb and more?\r\n\r\nAs far as we are concerned, we enjoy CouchDb for the ability to use it as a file server / streaming server and keep all the data in one place to ensure database consistency (compared to keeping references to third party storage services such as S3, and then keeping everything in sync, ensuring links are not dead etc... Couchdb is a blackbox neatly integrated with the Application Layer, thus greatly simplifying maintenance and system administration).\r\n\r\nFiltered replication is particularly nice with this regard, since it becomes extremely easy to create clusters of multimedia attachments to balance load. For example, one cluster may only contains replicated videos, and the Application Layer uses Command-Query separation to route the user to the right cluster depending on the type of Query being performed. All of this is transparent from the application's perspective, the various addresses of clusters handling specific query types simply need to be configured during the deployment of the application, and further load balancing can be done at the DNS level.\r\n\r\nCouchDb hugely simplifies the infrastructure work. The management of large multimedia clusters becomes a breeze with continuous filtered replication, and consumption by application users is very efficient thanks to CouchDb support for HTTP range requests. \r\n\r\nIt would be interesting to retain the ability to have large documents / attachments / requests sizes for those who know what they are doing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/507043600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/507833848","html_url":"https://github.com/apache/couchdb/issues/2067#issuecomment-507833848","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2067","id":507833848,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNzgzMzg0OA==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-02T20:32:59Z","updated_at":"2019-07-02T20:32:59Z","author_association":"CONTRIBUTOR","body":"Here's an initial version exposing the ICU sort key logic: https://github.com/apache/couchdb/compare/2067-add-get-sort-key","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/507833848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508087636","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-508087636","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":508087636,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODA4NzYzNg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T13:14:26Z","updated_at":"2019-07-03T13:14:26Z","author_association":"CONTRIBUTOR","body":"> @sarveshtamba from error, i can see that database can't be created due to timeout. Most likely, it is related to connection. You may have a try to start couchdb instance, and use `curl` to create database, and see whether there is similar issue. And then debugging the difference from the case in elixir.\r\n\r\nHi @jiangphcn I tried to manually create databases as per `http://docs.couchdb.org/en/stable/setup/single-node.html`\r\nHowever the databases are already created(by the test cases in the test suites I suppose).\r\n```\r\nroot@pts00452-vm13:~# curl -X PUT root:eUMWzuP4@127.0.0.1:15984/_users\r\n{\"error\":\"file_exists\",\"reason\":\"The database could not be created, the file already exists.\"}\r\nroot@pts00452-vm13:~# curl -X PUT root:eUMWzuP4@127.0.0.1:15984/_replicator\r\n{\"error\":\"file_exists\",\"reason\":\"The database could not be created, the file already exists.\"}\r\nroot@pts00452-vm13:~# curl -X PUT root:eUMWzuP4@127.0.0.1:15984/_global_changes\r\n{\"error\":\"file_exists\",\"reason\":\"The database could not be created, the file already exists.\"}\r\n```\r\nHowever new sample test DB could be created:-\r\n```\r\nroot@pts00452-vm13:~# curl -X PUT root:SfwUbHfo@127.0.0.1:15984/testcouchdb\r\n{\"ok\":true}\r\n```\r\nI also tried to increase the timeout in `test/elixir/lib/couch/db_test.ex`, that did not help as well.\r\n```\r\n  def retry_until(condition, sleep \\\\ 100, timeout \\\\ 5000) do\r\n    retry_until(condition, now(:ms), sleep, timeout)\r\n  end\r\n```\r\n\r\nAlso the tests fail inconsistently, since in one of the runs only 2 failures were seen as below:-\r\n```\r\n  1) test replication by doc ids - remote-to-remote (ReplicationTest)\r\n     test/replication_test.exs:228\r\n     ** (KeyError) key :status_code not found in: %HTTPotion.ErrorResponse{message: \"req_timedout\"}\r\n     code: run_by_id_repl(@src_prefix, @tgt_prefix)\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:166: anonymous fn/2 in Couch.DBTest.create_db/2\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/replication_test.exs:994: anonymous fn/2 in ReplicationTest.run_by_id_repl_impl/3\r\n       (foo) lib/couch/db_test.ex:304: Couch.DBTest.retry_until/4\r\n       test/replication_test.exs:993: ReplicationTest.run_by_id_repl_impl/3\r\n       (elixir) lib/enum.ex:769: Enum.\"-each/2-lists^foreach/1-0-\"/2\r\n       (elixir) lib/enum.ex:769: Enum.each/2\r\n       test/replication_test.exs:229: (test)\r\n  2) test compaction reduces size of deleted docs (CompactTest)\r\n     test/compact_test.exs:17\r\n     ** (RuntimeError) timed out after 5046 ms\r\n     code: retry_until(fn ->\r\n     stacktrace:\r\n       (foo) lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/compact_test.exs:38: (test)\r\n\r\nFinished in 2232.4 seconds\r\n298 tests, 2 failures, 23 excluded\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508087636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508194795","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508194795","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508194795,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODE5NDc5NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T17:55:04Z","updated_at":"2019-07-03T17:55:04Z","author_association":"MEMBER","body":"Couch log doesn't have level \"none\", so it defaults to \"info\". The minimum verbose log's level is \"emergency\"","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508194795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508198287","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508198287","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508198287,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODE5ODI4Nw==","user":{"login":"andrewborell","id":12565131,"node_id":"MDQ6VXNlcjEyNTY1MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12565131?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewborell","html_url":"https://github.com/andrewborell","followers_url":"https://api.github.com/users/andrewborell/followers","following_url":"https://api.github.com/users/andrewborell/following{/other_user}","gists_url":"https://api.github.com/users/andrewborell/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewborell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewborell/subscriptions","organizations_url":"https://api.github.com/users/andrewborell/orgs","repos_url":"https://api.github.com/users/andrewborell/repos","events_url":"https://api.github.com/users/andrewborell/events{/privacy}","received_events_url":"https://api.github.com/users/andrewborell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:04:42Z","updated_at":"2019-07-03T18:06:34Z","author_association":"NONE","body":"that is good information. In the default.ini file it certainly lists \"none\" as a valid log option, so perhaps that should be updated.  I will try \"emergency\". \r\n\r\n_[log]\r\n; Possible log levels:\r\n;  debug\r\n;  info\r\n;  notice\r\n;  warning, warn\r\n;  error, err\r\n;  critical, crit\r\n;  alert\r\n;  emergency, emerg_\r\n**;  none**\r\n\r\nAdditionally I see this in the documentation \r\n[https://docs.couchdb.org/en/stable/config/logging.html](https://docs.couchdb.org/en/stable/config/logging.html)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508198287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508200731","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508200731","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508200731,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwMDczMQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:11:48Z","updated_at":"2019-07-03T18:11:48Z","author_association":"MEMBER","body":"You right, \"none\" should be a valid option, my bad. Thank you for the reporting. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508200731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508204134","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508204134","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508204134,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwNDEzNA==","user":{"login":"andrewborell","id":12565131,"node_id":"MDQ6VXNlcjEyNTY1MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12565131?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewborell","html_url":"https://github.com/andrewborell","followers_url":"https://api.github.com/users/andrewborell/followers","following_url":"https://api.github.com/users/andrewborell/following{/other_user}","gists_url":"https://api.github.com/users/andrewborell/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewborell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewborell/subscriptions","organizations_url":"https://api.github.com/users/andrewborell/orgs","repos_url":"https://api.github.com/users/andrewborell/repos","events_url":"https://api.github.com/users/andrewborell/events{/privacy}","received_events_url":"https://api.github.com/users/andrewborell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:21:44Z","updated_at":"2019-07-03T18:21:44Z","author_association":"NONE","body":"I tried emergency and it didnt resolve the problem. I expected to only see messages begining with [emerg] or [emergency].  \r\n\r\nI dont know the cause, but ill throw my config out there. I havent spent much time optimizing so much as opening up the number of connections and extending timeouts.\r\n\r\n; Upgrading CouchDB will overwrite this file.\r\n[vendor]\r\nname = The Apache Software Foundation\r\n\r\n[couchdb]\r\nuuid =\r\ndatabase_dir = ./data\r\nview_index_dir = ./data\r\n; util_driver_dir =\r\n; plugin_dir =\r\nos_process_timeout = 50000 ; 5 seconds. for view servers.\r\nmax_dbs_open = 5000\r\ndelayed_commits = true\r\n; Method used to compress everything that is appended to database and view index files, except\r\n; for attachments (see the attachments section). Available methods are:\r\n;\r\n; none         - no compression\r\n; snappy       - use google snappy, a very fast compressor/decompressor\r\n; deflate_N    - use zlib's deflate, N is the compression level which ranges from 1 (fastest,\r\n;                lowest compression ratio) to 9 (slowest, highest compression ratio)\r\nfile_compression = snappy\r\n; Higher values may give better read performance due to less read operations\r\n; and/or more OS page cache hits, but they can also increase overall response\r\n; time for writes when there are many attachment write requests in parallel.\r\nattachment_stream_buffer_size = 4096\r\n; Default security object for databases if not explicitly set\r\n; everyone - same as couchdb 1.0, everyone can read/write\r\n; admin_only - only admins can read/write\r\n; admin_local - sharded dbs on :5984 are read/write for everyone,\r\n;               local dbs on :5986 are read/write for admins only\r\ndefault_security = admin_local\r\n; btree_chunk_size = 1279\r\n; maintenance_mode = false\r\n; stem_interactive_updates = true\r\n; uri_file =\r\n; The speed of processing the _changes feed with doc_ids filter can be\r\n; influenced directly with this setting - increase for faster processing at the\r\n; expense of more memory usage.\r\nchanges_doc_ids_optimization_threshold = 1000\r\n; Maximum document ID length. Can be set to an integer or 'infinity'.\r\n;max_document_id_length = infinity\r\n;\r\n; Limit maximum document size. Requests to create / update documents with a body\r\n; size larger than this will fail with a 413 http error. This limit applies to\r\n; requests which update a single document as well as individual documents from\r\n; a _bulk_docs request. Since there is no canonical size of json encoded data,\r\n; due to variabiliy in what is escaped or how floats are encoded, this limit is\r\n; applied conservatively. For example 1.0e+16 could be encoded as 1e16, so 4 used\r\n; for size calculation instead of 7.\r\n;max_document_size = 4294967296 ; bytes\r\n;\r\n; Maximum attachment size.\r\n; max_attachment_size = infinity\r\n;\r\n; Do not update the least recently used DB cache on reads, only writes\r\n;update_lru_on_read = false\r\n;\r\n; The default storage engine to use when creating databases\r\n; is set as a key into the [couchdb_engines] section.\r\ndefault_engine = couch\r\n;\r\n; Enable this to only \"soft-delete\" databases when DELETE /{db} requests are\r\n; made. This will place a .recovery directory in your data directory and\r\n; move deleted databases/shards there instead. You can then manually delete\r\n; these files later, as desired.\r\n;enable_database_recovery = false\r\n\r\n[couchdb_engines]\r\n; The keys in this section are the filename extension that\r\n; the specified engine module will use. This is important so\r\n; that couch_server is able to find an existing database without\r\n; having to ask every configured engine.\r\ncouch = couch_bt_engine\r\n\r\n[cluster]\r\nq=8\r\nn=3\r\n; placement = metro-dc-a:2,metro-dc-b:1\r\n\r\n; Supply a comma-delimited list of node names that this node should\r\n; contact in order to join a cluster. If a seedlist is configured the ``_up``\r\n; endpoint will return a 404 until the node has successfully contacted at\r\n; least one of the members of the seedlist and replicated an up-to-date copy\r\n; of the ``_nodes``, ``_dbs``, and ``_users`` system databases.\r\n; seedlist = couchdb@node1.example.com,couchdb@node2.example.com\r\n\r\n[chttpd]\r\n; These settings affect the main, clustered port (5984 by default).\r\nport = 5984\r\nbind_address = 0.0.0.0\r\nbacklog = 512\r\ndocroot = ./share/www\r\nsocket_options = [{sndbuf, 262144}, {nodelay, true}]\r\nserver_options = [{recbuf, undefined}]\r\nrequire_valid_user = false\r\n; List of headers that will be kept when the header Prefer: return=minimal is included in a request.\r\n; If Server header is left out, Mochiweb will add its own one in.\r\nprefer_minimal = Cache-Control, Content-Length, Content-Range, Content-Type, ETag, Server, Transfer-Encoding, Vary\r\n;\r\n; Limit maximum number of databases when tying to get detailed information using\r\n; _dbs_info in a request\r\nmax_db_number_for_dbs_info_req = 1000\r\n\r\n; authentication handlers\r\n; authentication_handlers = {chttpd_auth, cookie_authentication_handler}, {chttpd_auth, default_authentication_handler}\r\n; uncomment the next line to enable proxy authentication\r\n; authentication_handlers = {chttpd_auth, proxy_authentication_handler}, {chttpd_auth, cookie_authentication_handler}, {chttpd_auth, default_authentication_handler}\r\n\r\n; prevent non-admins from accessing /_all_dbs\r\n;admin_only_all_dbs = false\r\n\r\n[database_compaction]\r\n; larger buffer sizes can originate smaller files\r\ndoc_buffer_size = 524288 ; value in bytes\r\ncheckpoint_after = 5242880 ; checkpoint after every N bytes were written\r\n\r\n[view_compaction]\r\n; larger buffer sizes can originate smaller files\r\nkeyvalue_buffer_size = 2097152 ; value in bytes\r\n\r\n[couch_peruser]\r\n; If enabled, couch_peruser ensures that a private per-user database\r\n; exists for each document in _users. These databases are writable only\r\n; by the corresponding user. Databases are in the following form:\r\n; userdb-{hex encoded username}\r\nenable = false\r\n; If set to true and a user is deleted, the respective database gets\r\n; deleted as well.\r\ndelete_dbs = false\r\n; Set a default q value for peruser-created databases that is different from\r\n; cluster / q\r\n;q = 1\r\n; prefix for user databases. If you change this after user dbs have been\r\n; created, the existing databases won't get deleted if the associated user\r\n; gets deleted because of the then prefix mismatch.\r\ndatabase_prefix = userdb-\r\n\r\n[httpd]\r\nport = 5968\r\nbind_address = 127.0.0.1\r\nauthentication_handlers = {couch_httpd_auth, cookie_authentication_handler}, {couch_httpd_auth, default_authentication_handler}\r\nsecure_rewrites = true\r\nallow_jsonp = false\r\n; Options for the MochiWeb HTTP server.\r\n;server_options = [{backlog, 128}, {acceptor_pool_size, 16}]\r\n; For more socket options, consult Erlang's module 'inet' man page.\r\n;socket_options = [{recbuf, undefined}, {sndbuf, 262144}, {nodelay, true}]\r\nsocket_options = [{sndbuf, 262144}]\r\nenable_cors = true\r\nenable_xframe_options = false\r\n; CouchDB can optionally enforce a maximum uri length;\r\n; max_uri_length = 8000\r\n; changes_timeout = 60000\r\n; config_whitelist =\r\n; max_uri_length =\r\n; rewrite_limit = 100\r\n; x_forwarded_host = X-Forwarded-Host\r\n; x_forwarded_proto = X-Forwarded-Proto\r\n; x_forwarded_ssl = X-Forwarded-Ssl\r\n; Maximum allowed http request size. Applies to both clustered and local port.\r\nmax_http_request_size = 4294967296 ; 4GB\r\n\r\n; [httpd_design_handlers]\r\n; _view =\r\n\r\n; [ioq]\r\n; concurrency = 10\r\n; ratio = 0.01\r\n\r\n[ssl]\r\nport = 6984\r\n\r\n; [chttpd_auth]\r\n; authentication_db = _users\r\n\r\n; [chttpd_auth_cache]\r\n; max_lifetime = 600000\r\n; max_objects =\r\n; max_size = 104857600\r\n\r\n; [mem3]\r\n; nodes_db = _nodes\r\n; shard_cache_size = 25000\r\n; shards_db = _dbs\r\n; sync_concurrency = 10\r\n\r\n; [fabric]\r\n; all_docs_concurrency = 10\r\n; changes_duration =\r\n; shard_timeout_factor = 2\r\n; uuid_prefix_len = 7\r\n; request_timeout = 60000\r\n; all_docs_timeout = 10000\r\n; attachments_timeout = 60000\r\n; view_timeout = 3600000\r\n; partition_view_timeout = 3600000\r\n\r\n; [rexi]\r\n; buffer_count = 2000\r\n; server_per_node = true\r\n\r\n; [global_changes]\r\n; max_event_delay = 25\r\n; max_write_delay = 500\r\n; update_db = true\r\n\r\n; [view_updater]\r\n; min_writer_items = 100\r\n; min_writer_size = 16777216\r\n\r\n[couch_httpd_auth]\r\n; WARNING! This only affects the node-local port (5986 by default).\r\n; You probably want the settings under [chttpd].\r\nauthentication_db = _users\r\nauthentication_redirect = /_utils/session.html\r\nrequire_valid_user = false\r\ntimeout = 600 ; number of seconds before automatic logout\r\nauth_cache_size = 50 ; size is number of cache entries\r\nallow_persistent_cookies = true ; set to false to disallow persistent cookies\r\niterations = 10 ; iterations for password hashing\r\n; min_iterations = 1\r\n; max_iterations = 1000000000\r\n; password_scheme = pbkdf2\r\n; proxy_use_secret = false\r\n; comma-separated list of public fields, 404 if empty\r\n; public_fields =\r\n; secret =\r\n; users_db_public = false\r\n; cookie_domain = example.com\r\n\r\n; CSP (Content Security Policy) Support for _utils\r\n[csp]\r\nenable = true\r\n; header_value = default-src 'self'; img-src 'self'; font-src *; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline';\r\n\r\n[cors]\r\ncredentials = false\r\n; List of origins separated by a comma, * means accept all\r\n; Origins must include the scheme: http://example.com\r\n; You can't set origins: * and credentials = true at the same time.\r\norigins = *\r\n; List of accepted headers separated by a comma\r\n; headers =\r\n; List of accepted methods\r\n; methods =\r\n\r\n; Configuration for a vhost\r\n;[cors:http://example.com]\r\n; credentials = false\r\n; List of origins separated by a comma\r\n; Origins must include the scheme: http://example.com\r\n; You can't set origins: * and credentials = true at the same time.\r\n;origins =\r\n; List of accepted headers separated by a comma\r\n; headers =\r\n; List of accepted methods\r\n; methods =\r\n\r\n; Configuration for the design document cache\r\n;[ddoc_cache]\r\n; The maximum size of the cache in bytes\r\n;max_size = 104857600 ; 100MiB\r\n; The period each cache entry should wait before\r\n; automatically refreshing in milliseconds\r\n;refresh_timeout = 67000\r\n\r\n[x_frame_options]\r\n; Settings same-origin will return X-Frame-Options: SAMEORIGIN.\r\n; If same origin is set, it will ignore the hosts setting\r\n; same_origin = true\r\n; Settings hosts will return X-Frame-Options: ALLOW-FROM https://example.com/\r\n; List of hosts separated by a comma. * means accept all\r\n; hosts =\r\n\r\n[native_query_servers]\r\n; erlang query server\r\n; enable_erlang_query_server = false\r\n\r\n; Changing reduce_limit to false will disable reduce_limit.\r\n; If you think you're hitting reduce_limit with a \"good\" reduce function,\r\n; please let us know on the mailing list so we can fine tune the heuristic.\r\n[query_server_config]\r\n; commit_freq = 5\r\nreduce_limit = true\r\nos_process_limit = 100\r\n; os_process_idle_limit = 300\r\n; os_process_soft_limit = 100\r\n; Timeout for how long a response from a busy view group server can take.\r\n; \"infinity\" is also a valid configuration value.\r\n;group_info_timeout = 5000\r\n\r\n[mango]\r\n; Set to true to disable the \"index all fields\" text index, which can lead\r\n; to out of memory issues when users have documents with nested array fields.\r\nindex_all_disabled = false\r\n; Default limit value for mango _find queries.\r\ndefault_limit = 2500\r\n\r\n[indexers]\r\ncouch_mrview = true\r\n\r\n[uuids]\r\n; Known algorithms:\r\n;   random - 128 bits of random awesome\r\n;     All awesome, all the time.\r\n;   sequential - monotonically increasing ids with random increments\r\n;     First 26 hex characters are random. Last 6 increment in\r\n;     random amounts until an overflow occurs. On overflow, the\r\n;     random prefix is regenerated and the process starts over.\r\n;   utc_random - Time since Jan 1, 1970 UTC with microseconds\r\n;     First 14 characters are the time in hex. Last 18 are random.\r\n;   utc_id - Time since Jan 1, 1970 UTC with microseconds, plus utc_id_suffix string\r\n;     First 14 characters are the time in hex. uuids/utc_id_suffix string value is appended to these.\r\nalgorithm = sequential\r\n; The utc_id_suffix value will be appended to uuids generated by the utc_id algorithm.\r\n; Replicating instances should have unique utc_id_suffix values to ensure uniqueness of utc_id ids.\r\nutc_id_suffix =\r\n# Maximum number of UUIDs retrievable from /_uuids in a single request\r\nmax_count = 1000\r\n\r\n[attachments]\r\ncompression_level = 8 ; from 1 (lowest, fastest) to 9 (highest, slowest), 0 to disable compression\r\ncompressible_types = text/*, application/javascript, application/json, application/xml\r\n\r\n[replicator]\r\n; Random jitter applied on replication job startup (milliseconds)\r\nstartup_jitter = 5000\r\n; Number of actively running replications\r\nmax_jobs = 5000\r\n;Scheduling interval in milliseconds. During each reschedule cycle\r\ninterval = 60000\r\n; Maximum number of replications to start and stop during rescheduling.\r\nmax_churn = 20\r\n; More worker processes can give higher network throughput but can also\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508204134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508204917","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508204917","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508204917,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwNDkxNw==","user":{"login":"andrewborell","id":12565131,"node_id":"MDQ6VXNlcjEyNTY1MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12565131?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewborell","html_url":"https://github.com/andrewborell","followers_url":"https://api.github.com/users/andrewborell/followers","following_url":"https://api.github.com/users/andrewborell/following{/other_user}","gists_url":"https://api.github.com/users/andrewborell/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewborell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewborell/subscriptions","organizations_url":"https://api.github.com/users/andrewborell/orgs","repos_url":"https://api.github.com/users/andrewborell/repos","events_url":"https://api.github.com/users/andrewborell/events{/privacy}","received_events_url":"https://api.github.com/users/andrewborell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:23:46Z","updated_at":"2019-07-03T18:23:46Z","author_association":"NONE","body":"> You right, \"none\" should be a valid option, my bad. Thank you for the reporting.\r\n\r\nI knew this already -- I checked the source before I even thought about opening an issue  :-p.  Just havent had time to debug the issue myself today so I was hoping someone could point out an easy solution.  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508204917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508205442","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508205442","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508205442,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwNTQ0Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:25:04Z","updated_at":"2019-07-03T18:25:04Z","author_association":"MEMBER","body":"As far as I can see you don't have `[log]` section in the config you've pasted.\r\n\r\nFwiw I just checked and `level = none` works for me. Do you happened to have other .ini files in your setup? Can you check, please, if by any chance you have a log's config override in any of them?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508205442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508208626","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508208626","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508208626,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwODYyNg==","user":{"login":"andrewborell","id":12565131,"node_id":"MDQ6VXNlcjEyNTY1MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12565131?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewborell","html_url":"https://github.com/andrewborell","followers_url":"https://api.github.com/users/andrewborell/followers","following_url":"https://api.github.com/users/andrewborell/following{/other_user}","gists_url":"https://api.github.com/users/andrewborell/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewborell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewborell/subscriptions","organizations_url":"https://api.github.com/users/andrewborell/orgs","repos_url":"https://api.github.com/users/andrewborell/repos","events_url":"https://api.github.com/users/andrewborell/events{/privacy}","received_events_url":"https://api.github.com/users/andrewborell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:33:35Z","updated_at":"2019-07-03T18:33:35Z","author_association":"NONE","body":"oh snap.  I dont think it all pasted in, but I think you are right.  Here is the relevant section. \r\n\r\n[log]\r\n; Possible log levels:\r\n;  debug\r\n;  info\r\n;  notice\r\n;  warning, warn\r\n;  error, err\r\n;  critical, crit\r\n;  alert\r\n;  emergency, emerg\r\n;  none\r\n;\r\nlevel = emergency\r\n\r\nhere is what I see in fauxton \r\nlog\tfile\t/var/log/couchdb/couchdb.log\t\r\nlevel\tinfo\t\r\nwriter\tfile\r\n\r\nBut my default.ini says stderr, not file.  so strange.  wonder where this config is being pulled from.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508208626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508208751","html_url":"https://github.com/apache/couchdb/issues/963#issuecomment-508208751","issue_url":"https://api.github.com/repos/apache/couchdb/issues/963","id":508208751,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIwODc1MQ==","user":{"login":"bajaj-hitesh","id":5739620,"node_id":"MDQ6VXNlcjU3Mzk2MjA=","avatar_url":"https://avatars.githubusercontent.com/u/5739620?v=4","gravatar_id":"","url":"https://api.github.com/users/bajaj-hitesh","html_url":"https://github.com/bajaj-hitesh","followers_url":"https://api.github.com/users/bajaj-hitesh/followers","following_url":"https://api.github.com/users/bajaj-hitesh/following{/other_user}","gists_url":"https://api.github.com/users/bajaj-hitesh/gists{/gist_id}","starred_url":"https://api.github.com/users/bajaj-hitesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bajaj-hitesh/subscriptions","organizations_url":"https://api.github.com/users/bajaj-hitesh/orgs","repos_url":"https://api.github.com/users/bajaj-hitesh/repos","events_url":"https://api.github.com/users/bajaj-hitesh/events{/privacy}","received_events_url":"https://api.github.com/users/bajaj-hitesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:33:54Z","updated_at":"2019-07-03T18:33:54Z","author_association":"NONE","body":"> So the issue was due to my mix misuse of ports httpd (5986) vs chttpd (5984). This can close now.\r\n\r\nCan you please highlight where to use 5984 and where to use 5986. I am also facing this issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508208751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508210582","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508210582","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508210582,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIxMDU4Mg==","user":{"login":"andrewborell","id":12565131,"node_id":"MDQ6VXNlcjEyNTY1MTMx","avatar_url":"https://avatars.githubusercontent.com/u/12565131?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewborell","html_url":"https://github.com/andrewborell","followers_url":"https://api.github.com/users/andrewborell/followers","following_url":"https://api.github.com/users/andrewborell/following{/other_user}","gists_url":"https://api.github.com/users/andrewborell/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewborell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewborell/subscriptions","organizations_url":"https://api.github.com/users/andrewborell/orgs","repos_url":"https://api.github.com/users/andrewborell/repos","events_url":"https://api.github.com/users/andrewborell/events{/privacy}","received_events_url":"https://api.github.com/users/andrewborell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:39:16Z","updated_at":"2019-07-03T18:41:18Z","author_association":"NONE","body":"found it. \r\n\r\n_grep -rnw '/opt/couchdb/' -e '= info'_\r\n**/opt/couchdb/etc/default.d/10-filelog.ini:4:level = info**\r\n/opt/couchdb/share/docs/couchdb.1:17712:level = info\r\n/opt/couchdb/share/server/main.js:920:    var path = info.path;\r\n/opt/couchdb/share/server/main-coffee.js:920:    var path = info.path;\r\n/opt/couchdb/share/www/docs/_sources/config/logging.rst.txt:80:            level = info\r\n\r\nis this documented anywhere? \r\n\r\nI changed the setting to none and it stopped logging.  So the config in default.ini is no longer valid.  Should remove that and update the site.  Perhaps this only relates to ubuntu tho? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508210582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508211990","html_url":"https://github.com/apache/couchdb/issues/2068#issuecomment-508211990","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2068","id":508211990,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODIxMTk5MA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T18:43:31Z","updated_at":"2019-07-03T18:43:31Z","author_association":"MEMBER","body":"> is this documented anywhere?\r\n\r\nThe ability to override config - yes, sure [[link]](https://docs.couchdb.org/en/stable/config/intro.html#configuration-files)\r\n\r\nThis particular setup, though, I expect to be ubuntu's package specific.\r\n\r\nGlad this worked out for you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508211990/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508253084","html_url":"https://github.com/apache/couchdb/issues/963#issuecomment-508253084","issue_url":"https://api.github.com/repos/apache/couchdb/issues/963","id":508253084,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODI1MzA4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-03T20:59:57Z","updated_at":"2019-07-03T20:59:57Z","author_association":"MEMBER","body":"Unless the docs tell you to use port 5986, assume port 5984. 5986 is used to manually move shards between nodes or to manually add/remove nodes from a cluster when not using the cluster setup wizard. That's it.\r\n\r\nTo set up a cluster, follow the documentation, especially the section on the Cluster Setup Wizard:\r\n\r\nhttp://docs.couchdb.org/en/latest/setup/cluster.html\r\n\r\nThe **entire setup process only uses port 5984**.\r\n\r\nIf you're not successful following the documentation, file a new bug over at https://github.com/apache/couchdb-documentation/issues .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508253084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508517581","html_url":"https://github.com/apache/couchdb/issues/2053#issuecomment-508517581","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2053","id":508517581,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODUxNzU4MQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-04T15:22:03Z","updated_at":"2019-07-04T15:22:03Z","author_association":"CONTRIBUTOR","body":"@jiangphcn hopeful of some inputs on the above. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/508517581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]