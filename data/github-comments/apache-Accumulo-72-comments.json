[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904732539","html_url":"https://github.com/apache/accumulo/pull/2241#issuecomment-904732539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2241","id":904732539,"node_id":"IC_kwDOACaFSM417R97","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T15:14:52Z","updated_at":"2021-08-24T15:15:42Z","author_association":"CONTRIBUTOR","body":"Just comparing what is already in the code... To change the name to `serverContext` would require changing 147 files vs `context`  in this PR only changes 23. The name `context` is used in MR classes for `JobContext`, for a private Context object in ContextManager, both of which are deprecated. But it is used for ClientContext in about 100 files and for a String type in `ContextClassLoaderFactory`, which is new. \r\n\r\nThe way that the String type is used in `ContextClassLoaderFactory`, makes me think that it is the only object that should use the `context` variable name. As opposed to everywhere else we have specific types of context objects (ClientContext, ServerContext, JobContext, etc) that we can be more specific with the variable names.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904732539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904777442","html_url":"https://github.com/apache/accumulo/pull/2241#issuecomment-904777442","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2241","id":904777442,"node_id":"IC_kwDOACaFSM417c7i","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T16:09:06Z","updated_at":"2021-08-24T16:09:06Z","author_association":"CONTRIBUTOR","body":"I started renaming `context` to `serverContext` but it is a lot more work. It would be nice to have both consistency and specificity, but I am going to go with this PR so we at least have consistency.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904777442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904871734","html_url":"https://github.com/apache/accumulo/issues/2239#issuecomment-904871734","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2239","id":904871734,"node_id":"IC_kwDOACaFSM417z82","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T18:22:13Z","updated_at":"2021-08-24T18:22:13Z","author_association":"CONTRIBUTOR","body":"I ran the configuration from the testing branch CI locally just using Uno and I was surprised how quickly this error showed up.  It happened after only running CI for a few minutes. I will take a closer look at this code again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904871734/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904898339","html_url":"https://github.com/apache/accumulo/issues/2239#issuecomment-904898339","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2239","id":904898339,"node_id":"IC_kwDOACaFSM4176cj","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T19:02:57Z","updated_at":"2021-08-24T19:02:57Z","author_association":"CONTRIBUTOR","body":"> To help differentiate between all files and compacting files, I edited the log message slightly:\r\n> \r\n> ```\r\n> Compacting not in set of all files [[C00000o6.rf, 30685229 787039], [F00000on.rf, 1723078 46410], [A00000ed.rf, 34076028 870729]],\r\n>  compacting files [[C00000k7.rf, 10046277 266635], [C00000mz.rf, 9978439 255846], [F00000ny.rf, 2311671 61351], [C00000h4.rf, 7956997 203207]]\r\n> ```\r\n\r\n@Manno15 can you push this improvement up to main? I think it would be a good start to improve the log message.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904898339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904913510","html_url":"https://github.com/apache/accumulo/issues/2239#issuecomment-904913510","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2239","id":904913510,"node_id":"IC_kwDOACaFSM417-Jm","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T19:25:58Z","updated_at":"2021-08-24T20:20:46Z","author_association":"CONTRIBUTOR","body":"@milleruntime I created PR #2243 for this. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/904913510/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905429930","html_url":"https://github.com/apache/accumulo/pull/2243#issuecomment-905429930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2243","id":905429930,"node_id":"IC_kwDOACaFSM4198Oq","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T11:51:37Z","updated_at":"2021-08-25T11:51:37Z","author_association":"CONTRIBUTOR","body":"Thanks @Manno15 !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905429930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905716826","html_url":"https://github.com/apache/accumulo/issues/2245#issuecomment-905716826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2245","id":905716826,"node_id":"IC_kwDOACaFSM41_CRa","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T17:07:37Z","updated_at":"2021-08-25T17:20:59Z","author_association":"MEMBER","body":"Looks like the ComapactionService might take a while longer to be created. Not sure what the best solution might be. One possibility is adding a retry loop if this case occurs to check again for the service after a short delay.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905716826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905728624","html_url":"https://github.com/apache/accumulo/issues/2244#issuecomment-905728624","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2244","id":905728624,"node_id":"IC_kwDOACaFSM41_FJw","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T17:24:30Z","updated_at":"2021-08-25T17:24:30Z","author_association":"MEMBER","body":"If this seems like a viable change, `TableOperations` may benefit from something similar as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/905728624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/906517768","html_url":"https://github.com/apache/accumulo/pull/2248#issuecomment-906517768","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2248","id":906517768,"node_id":"IC_kwDOACaFSM42CF0I","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T15:33:10Z","updated_at":"2021-08-26T15:33:10Z","author_association":"CONTRIBUTOR","body":"> From a testing standpoint, these changes look good. I did test them locally and ran into no issues. It is still interesting how often that sanity check fails but it is better now that it is a debug statement and not something that kills the thread. \r\n\r\nI agree. I tested them as well and things seem to run more smoothly. My only concern is that this change is masking an underlying bug that is causing the check to fail. \r\n\r\n> I like the move of the sanity checks out of the files constructor and doing only one copy of runningJobs.\r\n\r\nAt the very least I think we can keep these changes. The question I have is: do we want to keep failing loudly because there is a bug or is it OK to fail gracefully.\r\n\r\nI am going to leave this open for now until I can confirm with @keith-turner or find an answer to that question.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/906517768/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/906544766","html_url":"https://github.com/apache/accumulo/issues/2245#issuecomment-906544766","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2245","id":906544766,"node_id":"IC_kwDOACaFSM42CMZ-","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-26T16:06:47Z","updated_at":"2021-08-26T16:06:47Z","author_association":"CONTRIBUTOR","body":"The interesting thing about this specific error is I only recall getting this on my initial test runs but I haven't been able to reproduce it since. Even when starting with a fresh cluster. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/906544766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907191636","html_url":"https://github.com/apache/accumulo/issues/2245#issuecomment-907191636","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2245","id":907191636,"node_id":"IC_kwDOACaFSM42EqVU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:10:44Z","updated_at":"2021-08-27T13:10:44Z","author_association":"CONTRIBUTOR","body":"`CompactionManager.checkForConfigChanges()` creates new CompactionServices in the main loop, but `checkForConfigChanges` will only check at most every second. It might be useful to refactor `checkForConfigChanges` to enforce the 1 second rule from the main loop, but not if it's called from somewhere else, like `compact`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907191636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907201752","html_url":"https://github.com/apache/accumulo/issues/2245#issuecomment-907201752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2245","id":907201752,"node_id":"IC_kwDOACaFSM42EszY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:26:03Z","updated_at":"2021-08-27T13:26:03Z","author_association":"CONTRIBUTOR","body":"I put up a possible solution","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907201752/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907205490","html_url":"https://github.com/apache/accumulo/issues/2245#issuecomment-907205490","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2245","id":907205490,"node_id":"IC_kwDOACaFSM42Etty","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T13:31:33Z","updated_at":"2021-08-27T13:31:33Z","author_association":"CONTRIBUTOR","body":"I will run some initial tests on it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907205490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907295646","html_url":"https://github.com/apache/accumulo/pull/2247#issuecomment-907295646","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2247","id":907295646,"node_id":"IC_kwDOACaFSM42FDue","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T15:43:09Z","updated_at":"2021-08-27T15:43:09Z","author_association":"CONTRIBUTOR","body":"I would prefer we wait until changes related to #2224 are completed before adding new property methods. The method you added doesn't allow for the properties to be atomic (all changed at once), which is something we may be able to achieve in the near future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907295646/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907319111","html_url":"https://github.com/apache/accumulo/pull/2247#issuecomment-907319111","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2247","id":907319111,"node_id":"IC_kwDOACaFSM42FJdH","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T16:18:46Z","updated_at":"2021-08-27T16:18:46Z","author_association":"CONTRIBUTOR","body":"While these changes will likely be modified with PR #2224, incorporating them now is a step that would need to be taken anyway.  I'm neutral on making these changes now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907319111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907362652","html_url":"https://github.com/apache/accumulo/pull/2247#issuecomment-907362652","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2247","id":907362652,"node_id":"IC_kwDOACaFSM42FUFc","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T17:34:38Z","updated_at":"2021-08-27T17:34:38Z","author_association":"MEMBER","body":"I am neutral as well. If these changes are merged I could start on a PR to use this new method in places that would see benefit. Either way is fine with me, I'll wait on more input/approval before taking any action.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907362652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907424863","html_url":"https://github.com/apache/accumulo/pull/2247#issuecomment-907424863","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2247","id":907424863,"node_id":"IC_kwDOACaFSM42FjRf","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T19:22:23Z","updated_at":"2021-08-30T14:59:07Z","author_association":"MEMBER","body":"This was here before I made these changes but after re-reading the javadoc comments here:\r\nhttps://github.com/apache/accumulo/blob/66d85b872a0ff5cbc9e56ddb521fff3e2157c30f/core/src/main/java/org/apache/accumulo/core/client/admin/InstanceOperations.java#L37-L60\r\n\r\nDoes it seem like \"per-table property\" is correct? To me it seems something like \"system property\" may be more appropriate here. Might be a copy/paste error from tableOperations which has the same wording?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/907424863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908566885","html_url":"https://github.com/apache/accumulo/issues/1126#issuecomment-908566885","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1126","id":908566885,"node_id":"IC_kwDOACaFSM42J6Fl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T18:06:51Z","updated_at":"2021-08-30T18:06:51Z","author_association":"CONTRIBUTOR","body":"It appears that Hadoop is looking to remove HTrace. The HTrace functionality looks to be disabled in the 3.4.0 release (see https://issues.apache.org/jira/browse/HADOOP-17424). There is an umbrella ticket (https://issues.apache.org/jira/browse/HADOOP-15566) for moving to OpenTelemetry.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908566885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908749373","html_url":"https://github.com/apache/accumulo/issues/2239#issuecomment-908749373","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2239","id":908749373,"node_id":"IC_kwDOACaFSM42Kmo9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T22:31:09Z","updated_at":"2021-08-30T22:31:09Z","author_association":"CONTRIBUTOR","body":"@Manno15  would you happen to know the specific commit you were using for Accumulo 2.1.0-SNAP?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908749373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908752423","html_url":"https://github.com/apache/accumulo/issues/2239#issuecomment-908752423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2239","id":908752423,"node_id":"IC_kwDOACaFSM42KnYn","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T22:37:44Z","updated_at":"2021-08-30T22:37:44Z","author_association":"CONTRIBUTOR","body":"The latest commit should still have the error occur. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/908752423/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/909731756","html_url":"https://github.com/apache/accumulo/pull/2248#issuecomment-909731756","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2248","id":909731756,"node_id":"IC_kwDOACaFSM42OWes","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T23:38:49Z","updated_at":"2021-08-31T23:38:49Z","author_association":"CONTRIBUTOR","body":"Changes made in #2252 seem to have fixed the issue in #2239. I still think some of the changes here are useful to keep, specifically moving the sanity check out of the files constructor and reducing to only one copy of runningJobs. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/909731756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910206139","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-910206139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":910206139,"node_id":"IC_kwDOACaFSM42QKS7","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T11:46:34Z","updated_at":"2021-09-01T11:46:34Z","author_association":"CONTRIBUTOR","body":"@wx930910 thanks for the contribution. If you run the build using \"mvn clean verify -DskipTests\" it will take care of a bunch of code quality assurance checks automatically.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910206139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910213010","html_url":"https://github.com/apache/accumulo/pull/2248#issuecomment-910213010","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2248","id":910213010,"node_id":"IC_kwDOACaFSM42QL-S","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T11:57:22Z","updated_at":"2021-09-01T11:57:22Z","author_association":"CONTRIBUTOR","body":"> Changes made in #2252 seem to have fixed the issue in #2239. I still think some of the changes here are useful to keep, specifically moving the sanity check out of the files constructor and reducing to only one copy of runningJobs.\r\n\r\nI agree there is some usefulness to changes here. I do feel like we should leave the exceptions in the constructor though since they served their original purpose of getting our attention. I don't want a future bug to go unnoticed in the debug logging. I will redo this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910213010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910321741","html_url":"https://github.com/apache/accumulo/pull/2213#issuecomment-910321741","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2213","id":910321741,"node_id":"IC_kwDOACaFSM42QmhN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T14:08:01Z","updated_at":"2021-09-01T14:08:01Z","author_association":"CONTRIBUTOR","body":"@keith-turner Did you consider a more object oriented design to this code, to avoid the large switch statements?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910321741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910393786","html_url":"https://github.com/apache/accumulo/pull/2213#issuecomment-910393786","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2213","id":910393786,"node_id":"IC_kwDOACaFSM42Q4G6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T15:25:21Z","updated_at":"2021-09-01T15:25:21Z","author_association":"CONTRIBUTOR","body":"> @keith-turner Did you consider a more object oriented design to this code, to avoid the large switch statements?\r\n\r\nNo I didn't.  What did you have in mind?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910393786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910410984","html_url":"https://github.com/apache/accumulo/pull/2248#issuecomment-910410984","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2248","id":910410984,"node_id":"IC_kwDOACaFSM42Q8To","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T15:44:49Z","updated_at":"2021-09-01T15:44:49Z","author_association":"CONTRIBUTOR","body":"The impl of Set.of() takes care of this for us so this PR is obsolete.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910410984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910429293","html_url":"https://github.com/apache/accumulo/pull/2213#issuecomment-910429293","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2213","id":910429293,"node_id":"IC_kwDOACaFSM42RAxt","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T16:03:55Z","updated_at":"2021-09-01T16:03:55Z","author_association":"CONTRIBUTOR","body":"> > @keith-turner Did you consider a more object oriented design to this code, to avoid the large switch statements?\r\n> \r\n> No I didn't. What did you have in mind?\r\n\r\nSomething like this as an alternative approach: https://github.com/apache/accumulo/pull/2256","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910429293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910473079","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910473079","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910473079,"node_id":"IC_kwDOACaFSM42RLd3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T16:57:54Z","updated_at":"2021-09-01T16:57:54Z","author_association":"CONTRIBUTOR","body":"This change does make some of the methods shorter, but IMO it does not make them easier to understand vs the switch stmts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910473079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910487770","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910487770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910487770,"node_id":"IC_kwDOACaFSM42RPDa","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:15:13Z","updated_at":"2021-09-01T17:15:13Z","author_association":"CONTRIBUTOR","body":"> This change does make some of the methods shorter, but IMO it does not make them easier to understand vs the switch stmts.\r\n\r\nThe goal was to make it easier to understand but I only have a limited understanding of the code. This was only one attempt an a more object oriented approach. Any ideas of how this could be more Object oriented?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910487770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910496731","html_url":"https://github.com/apache/accumulo/issues/2226#issuecomment-910496731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2226","id":910496731,"node_id":"IC_kwDOACaFSM42RRPb","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:26:43Z","updated_at":"2021-09-01T17:26:43Z","author_association":"CONTRIBUTOR","body":"I can work on this if needed. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910496731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910498495","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910498495","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910498495,"node_id":"IC_kwDOACaFSM42RRq_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:28:59Z","updated_at":"2021-09-01T17:28:59Z","author_association":"CONTRIBUTOR","body":"> Any ideas of how this could be more Object oriented?\r\n\r\nOO can have many goals.  One goal w/ interfaces and class impls is that many different impls can be added over time.  In this case there is a fixed universe of impls that will not be expanding, so in my mind adding the indirection has little or no benefit in terms of making the code easier to maintain and understand. \r\n\r\nMaybe making some of the changes like @DomGarguilo suggested to the current switch stmts will make them shorter and easier to follow.  Seems like some comments about the importance of taking a snapshot may also be useful. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910498495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910521541","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910521541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910521541,"node_id":"IC_kwDOACaFSM42RXTF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:58:52Z","updated_at":"2021-09-01T17:58:52Z","author_association":"CONTRIBUTOR","body":"> > Any ideas of how this could be more Object oriented?\r\n> \r\n> OO can have many goals. One goal w/ interfaces and class impls is that many different impls can be added over time. In this case there is a fixed universe of impls that will not be expanding, so in my mind adding the indirection has little or no benefit in terms of making the code easier to maintain and understand.\r\n> \r\n> Maybe making some of the changes like @DomGarguilo suggested to the current switch stmts will make them shorter and easier to follow. Seems like some comments about the importance of taking a snapshot may also be useful.\r\n\r\nIt seems like there is a concrete state in this code (a User compaction with specific settings selected X files) that could be encapsulated in an object. Then that object could be passed around. There is a lot of checking the CompactionKind and different status objects, keeping some type of state. I think what you did with the FileManager is a step in the right direction but there could be more encapsulation that would make the code easier to understand and maintain.\r\n\r\nA large if or switch statement is almost always a clear indicator of code that needs an OO design. I just don't know the code like you do to know the specifics of that design.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910521541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910524069","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910524069","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910524069,"node_id":"IC_kwDOACaFSM42RX6l","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T18:01:48Z","updated_at":"2021-09-01T18:01:48Z","author_association":"CONTRIBUTOR","body":"My goal was to encapsulate the different status objects, sets of files and compaction type into a concrete object. I will try again in a diff PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910524069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910559404","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910559404","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910559404,"node_id":"IC_kwDOACaFSM42Rgis","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T18:39:17Z","updated_at":"2021-09-01T18:39:17Z","author_association":"CONTRIBUTOR","body":"> A large if or switch statement is almost always a clear indicator of code that needs an OO design. \r\n\r\nThere may be an OO design that is easier to understand, I am not sure what it would look like though.  I suspect it may need to cut across multiple methods within FileManager but not completely sure.  Also not sure how the shared state in FileManager would cleanly interact with this design.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910559404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910593721","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-910593721","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":910593721,"node_id":"IC_kwDOACaFSM42Ro65","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T18:59:47Z","updated_at":"2021-09-01T18:59:47Z","author_association":"MEMBER","body":"I don't think accumulo has mockito as a depenency yet. It does have EasyMock though. Does it seem like what you are trying to do with mockito can be done with easymock?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910593721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910638914","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910638914","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910638914,"node_id":"IC_kwDOACaFSM42Rz9C","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T19:36:51Z","updated_at":"2021-09-01T19:36:51Z","author_association":"CONTRIBUTOR","body":"> > A large if or switch statement is almost always a clear indicator of code that needs an OO design.\r\n> \r\n> There may be an OO design that is easier to understand, I am not sure what it would look like though. I suspect it may need to cut across multiple methods within FileManager but not completely sure. Also not sure how the shared state in FileManager would cleanly interact with this design.\r\n\r\nMaybe have the different select methods in FileManager return an object instead of boolean. We could have the objects return the next step, similar to how FATE works.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910638914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910648494","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910648494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910648494,"node_id":"IC_kwDOACaFSM42R2Su","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T19:42:10Z","updated_at":"2021-09-01T19:42:10Z","author_association":"CONTRIBUTOR","body":"We could integrate the `CompactionHelper` and the selection methods. They seem to go hand and hand (at least in this method):\r\nhttps://github.com/apache/accumulo/blob/fc32430a15004a9f5e1427b72295d785e7dc563c/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L922-L923","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910648494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910705139","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-910705139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":910705139,"node_id":"IC_kwDOACaFSM42SEHz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T20:22:20Z","updated_at":"2021-09-01T20:22:20Z","author_association":"CONTRIBUTOR","body":"> We could integrate the CompactionHelper and the selection methods. They seem to go hand and hand (at least in this method):\r\n\r\nOne goal I had was to segregate the code that tracks state (like files compacting, files selected, jobs running, ext compactions running, etc) from code that actually does work (like running compactions and selecting files).  Not sure I completely achieved this goal.  The Helper may fall more in the do work category and the filemgr may fall more in the state tracking category, but not completely sure.  Also not sure if this help you any, just sharing some info.    I hope to be able to write unit test for some of the state tracking code that is independent of the code that actually does work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/910705139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911234941","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-911234941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":911234941,"node_id":"IC_kwDOACaFSM42UFd9","user":{"login":"wx930910","id":22060531,"node_id":"MDQ6VXNlcjIyMDYwNTMx","avatar_url":"https://avatars.githubusercontent.com/u/22060531?v=4","gravatar_id":"","url":"https://api.github.com/users/wx930910","html_url":"https://github.com/wx930910","followers_url":"https://api.github.com/users/wx930910/followers","following_url":"https://api.github.com/users/wx930910/following{/other_user}","gists_url":"https://api.github.com/users/wx930910/gists{/gist_id}","starred_url":"https://api.github.com/users/wx930910/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wx930910/subscriptions","organizations_url":"https://api.github.com/users/wx930910/orgs","repos_url":"https://api.github.com/users/wx930910/repos","events_url":"https://api.github.com/users/wx930910/events{/privacy}","received_events_url":"https://api.github.com/users/wx930910/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T06:05:42Z","updated_at":"2021-09-02T06:09:20Z","author_association":"CONTRIBUTOR","body":"> @wx930910 thanks for the contribution. If you run the build using \"mvn clean verify -DskipTests\" it will take care of a bunch of code quality assurance checks automatically.\r\n\r\n@milleruntime Thanks! Will do that and revise the code accordingly!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911234941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911237339","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-911237339","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":911237339,"node_id":"IC_kwDOACaFSM42UGDb","user":{"login":"wx930910","id":22060531,"node_id":"MDQ6VXNlcjIyMDYwNTMx","avatar_url":"https://avatars.githubusercontent.com/u/22060531?v=4","gravatar_id":"","url":"https://api.github.com/users/wx930910","html_url":"https://github.com/wx930910","followers_url":"https://api.github.com/users/wx930910/followers","following_url":"https://api.github.com/users/wx930910/following{/other_user}","gists_url":"https://api.github.com/users/wx930910/gists{/gist_id}","starred_url":"https://api.github.com/users/wx930910/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wx930910/subscriptions","organizations_url":"https://api.github.com/users/wx930910/orgs","repos_url":"https://api.github.com/users/wx930910/repos","events_url":"https://api.github.com/users/wx930910/events{/privacy}","received_events_url":"https://api.github.com/users/wx930910/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T06:08:46Z","updated_at":"2021-09-02T06:09:33Z","author_association":"CONTRIBUTOR","body":"> I don't think accumulo has mockito as a depenency yet. It does have EasyMock though. Does it seem like what you are trying to do with mockito can be done with easymock?\r\n\r\n@DomGarguilo No, we do not have Mockito dependency in Accumulo. I think EasyMock can do similar logic and I will migrate the code change to EasyMock.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911237339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911673017","html_url":"https://github.com/apache/accumulo/pull/2256#issuecomment-911673017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2256","id":911673017,"node_id":"IC_kwDOACaFSM42Vwa5","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T13:17:58Z","updated_at":"2021-09-02T13:17:58Z","author_association":"CONTRIBUTOR","body":"> One goal I had was to segregate the code that tracks state (like files compacting, files selected, jobs running, ext compactions running, etc) from code that actually does work (like running compactions and selecting files). \r\n\r\nThat would be good. I can see where you did this is some parts. I will keep this in mind if I look at it again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911673017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911857889","html_url":"https://github.com/apache/accumulo/pull/2260#issuecomment-911857889","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2260","id":911857889,"node_id":"IC_kwDOACaFSM42Wdjh","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:26:56Z","updated_at":"2021-09-02T16:26:56Z","author_association":"CONTRIBUTOR","body":"@keith-turner One comment I was hoping we could expand on was \"So the selected set must be initialized.\" I am not sure if that means in the current method or before calling the current method.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911857889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911867521","html_url":"https://github.com/apache/accumulo/pull/2260#issuecomment-911867521","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2260","id":911867521,"node_id":"IC_kwDOACaFSM42Wf6B","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:39:12Z","updated_at":"2021-09-02T16:39:12Z","author_association":"CONTRIBUTOR","body":"> @keith-turner One comment I was hoping we could expand on was \"So the selected set must be initialized.\" I am not sure if that means in the current method or before calling the current method.\r\n\r\nSeems like it initializes some instance var in the method and also uses the returned value to initialize some more instance var later in the constructor.  I don't think anything is initialized before the method call.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911867521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911867562","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-911867562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":911867562,"node_id":"IC_kwDOACaFSM42Wf6q","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:39:16Z","updated_at":"2021-09-02T16:39:16Z","author_association":"CONTRIBUTOR","body":"I was still unable to escape a ':' for the example mentioned in the original jira ticket (linked in the issue for this ticket). Did you do testing locally to confirm that functionality works? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911867562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911875985","html_url":"https://github.com/apache/accumulo/pull/2260#issuecomment-911875985","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2260","id":911875985,"node_id":"IC_kwDOACaFSM42Wh-R","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:50:52Z","updated_at":"2021-09-02T16:50:52Z","author_association":"CONTRIBUTOR","body":"> > @keith-turner One comment I was hoping we could expand on was \"So the selected set must be initialized.\" I am not sure if that means in the current method or before calling the current method.\r\n> \r\n> Seems like it initializes some instance var in the method and also uses the returned value to initialize some more instance var later in the constructor. I don't think anything is initialized before the method call.\r\n\r\nOK I think I am going to just drop that sentence since it doesn't really add anything and is just confusing me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911875985/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911880105","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-911880105","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":911880105,"node_id":"IC_kwDOACaFSM42Wi-p","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:56:04Z","updated_at":"2021-09-02T16:56:04Z","author_association":"CONTRIBUTOR","body":"Complex regular expressions are difficult to read and maintain. Please try to avoid long regular expressions.\r\n\r\nAlso please include a test with these changes to verify it is working correctly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911880105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911890771","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-911890771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":911890771,"node_id":"IC_kwDOACaFSM42WllT","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T17:09:10Z","updated_at":"2021-09-02T17:09:10Z","author_association":"CONTRIBUTOR","body":"> Complex regular expressions are difficult to read and maintain. Please try to avoid long regular expressions.\r\n> \r\n> Also please include a test with these changes to verify it is working correctly.\r\n\r\n\r\nAre there any existing test for the ShellCommands ?  I will see if I can simplify the RegularExpression. I don't want to add to many if and conditions to parse something, that's not a good practice in general. \r\n\r\nI actually tested the RE in a JavaPlayGround to make sure it was splitting the way we wanted. I used the expression test:\\test:test1  it gave me two strings  1) test:\\test and  2) test1.  I hope that is what is expected. Its possible that we may have to remove the \\ from the first string so that the string is passed with : instead of it being escaped. DownStream code may not be handling the escaped string well. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911890771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911931463","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-911931463","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":911931463,"node_id":"IC_kwDOACaFSM42WvhH","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T18:04:31Z","updated_at":"2021-09-02T18:04:31Z","author_association":"CONTRIBUTOR","body":"We have the `ShellServerIT` which tests a bunch of shell commands and then some of the commands have their own unit tests. You could add to the `ScanCommandTest` which tests the `ScanCommand` by itself.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/911931463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912582316","html_url":"https://github.com/apache/accumulo/issues/2147#issuecomment-912582316","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2147","id":912582316,"node_id":"IC_kwDOACaFSM42ZOas","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T14:29:01Z","updated_at":"2021-09-03T14:29:01Z","author_association":"CONTRIBUTOR","body":"I missed some when I opened this ticket. There are actually 7 Sunny day ITs. The 4 above plus these:\r\n<pre>\r\nmain/java/org/apache/accumulo/test/ShellIT.java:@Category({MiniClusterOnlyTests.class, SunnyDayTests.class})\r\nmain/java/org/apache/accumulo/test/functional/ReadWriteIT.java:@Category({StandaloneCapableClusterTests.class, SunnyDayTests.class})\r\nmain/java/org/apache/accumulo/test/ShellServerIT.java:@Category({MiniClusterOnlyTests.class, SunnyDayTests.class})\r\n</pre>\r\n\r\nThis is a lot better than what I initially thought. Maybe a bulk import and WAL test would be nice.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912582316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912605360","html_url":"https://github.com/apache/accumulo/pull/2258#issuecomment-912605360","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2258","id":912605360,"node_id":"IC_kwDOACaFSM42ZUCw","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T15:02:58Z","updated_at":"2021-09-03T15:02:58Z","author_association":"CONTRIBUTOR","body":"Asking for clarification - what happens if the check fails?  Is it rescheduled or is that left up to the caller that scheduled the compaction?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912605360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912615399","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-912615399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":912615399,"node_id":"IC_kwDOACaFSM42ZWfn","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T15:17:41Z","updated_at":"2021-09-03T15:17:41Z","author_association":"CONTRIBUTOR","body":">  I used the expression test:\\test:test1 it gave me two strings 1) test:\\test and 2) test1\r\n\r\nThe example in the jira ticket was scan -r foo -c person\\:information:name, which has the '\\' before the colon. Not sure if that changes anything but wanted to make sure that was clarified. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912615399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912630790","html_url":"https://github.com/apache/accumulo/pull/2261#issuecomment-912630790","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2261","id":912630790,"node_id":"IC_kwDOACaFSM42ZaQG","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T15:41:12Z","updated_at":"2021-09-03T15:41:12Z","author_association":"CONTRIBUTOR","body":"Are there any possible reliability issues with these tests? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912630790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912640384","html_url":"https://github.com/apache/accumulo/pull/2261#issuecomment-912640384","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2261","id":912640384,"node_id":"IC_kwDOACaFSM42ZcmA","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T15:53:01Z","updated_at":"2021-09-03T15:53:01Z","author_association":"CONTRIBUTOR","body":"> Are there any possible reliability issues with these tests?\r\n\r\nI considered that when picking them and I don't recall these being flaky. They haven't failed the Jenkins build in the past year either.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912640384/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912642552","html_url":"https://github.com/apache/accumulo/pull/2261#issuecomment-912642552","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2261","id":912642552,"node_id":"IC_kwDOACaFSM42ZdH4","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T15:54:35Z","updated_at":"2021-09-03T15:54:35Z","author_association":"CONTRIBUTOR","body":"I will go ahead and merge. These can easily be removed if someone doesn't like them in the profile or we find them to be flaky.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912642552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912790866","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-912790866","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":912790866,"node_id":"IC_kwDOACaFSM42aBVS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T20:24:27Z","updated_at":"2021-09-03T20:24:27Z","author_association":"CONTRIBUTOR","body":"Commit d873448 includes changes from testing locally. It includes:\r\n\r\n  1. bug fixes and fixes for build issues\r\n  2. Removing tracer from scripts\r\n  3. Addition of dependencies to export traces to Jaeger*\r\n\r\n*It's intended that these changes will be backed out as I had to include all of the transitive dependencies in the poms and component.xml for everything to run. There does appear to be dependency convergence issues between our jars and the dependencies of OpenTelemetry. With this commit I had to build the code with the `-Denforcer.skip` property to get past the dependency convergence checks.\r\n\r\nWith this commit I was able to build the binary tarball using `mvn clean package -DskipTests -Denforcer.skip` and visualize traces in [Jaeger](https://www.jaegertracing.io/) by doing the following:\r\n\r\n1. Use the Jaeger [All-In-One](https://www.jaegertracing.io/docs/1.25/getting-started/#all-in-one) Docker image to start Jaeger.\r\n```\r\ndocker run -d --name jaeger -e COLLECTOR_ZIPKIN_HOST_PORT=:9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 14250:14250 -p 9411:9411 jaegertracing/all-in-one:1.25\r\n```\r\n\r\n2. Configure the OpenTracing implementation to export to Jaeger by setting the following environment variable\r\n```\r\nexport OTEL_TRACES_EXPORTER=jaeger\r\n```\r\n\r\n3. Then, in the same terminal where  step 2 was performed, start Accumulo.\r\n\r\nI'm thinking that we might want to move the tracer module into it's own repository.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/912790866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913212831","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-913212831","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":913212831,"node_id":"IC_kwDOACaFSM42boWf","user":{"login":"wx930910","id":22060531,"node_id":"MDQ6VXNlcjIyMDYwNTMx","avatar_url":"https://avatars.githubusercontent.com/u/22060531?v=4","gravatar_id":"","url":"https://api.github.com/users/wx930910","html_url":"https://github.com/wx930910","followers_url":"https://api.github.com/users/wx930910/followers","following_url":"https://api.github.com/users/wx930910/following{/other_user}","gists_url":"https://api.github.com/users/wx930910/gists{/gist_id}","starred_url":"https://api.github.com/users/wx930910/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wx930910/subscriptions","organizations_url":"https://api.github.com/users/wx930910/orgs","repos_url":"https://api.github.com/users/wx930910/repos","events_url":"https://api.github.com/users/wx930910/events{/privacy}","received_events_url":"https://api.github.com/users/wx930910/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-05T19:19:52Z","updated_at":"2021-09-05T19:19:52Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo I revised the code and use similar logic to create mock object by EasyMock, please let me know if you have any other suggestions!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913212831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913863466","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-913863466","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":913863466,"node_id":"IC_kwDOACaFSM42eHMq","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-06T21:44:52Z","updated_at":"2021-09-06T21:44:52Z","author_association":"CONTRIBUTOR","body":"The build failed because of formatting issues - as said earlier, if you build locally it will automatically reformat the code.  Most of the QA checks and your tests can be run using:\r\n\r\n```mvn clean verify javadoc:jar -Psec-bugs -DskipITs=true -Dtest=RateLimitedInputStreamTest,RateLimitedOutputStreamTest```\r\n\r\nSome of these checks will add to the build time so you might want to run the full set when you are ready to commit.  The original suggestion:\r\n\r\n```mvn clean verify -DskipTests```\r\n\r\nShould correct your current issue.  I was able to get the full set to pass from your current branch.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913863466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913913757","html_url":"https://github.com/apache/accumulo/pull/2254#issuecomment-913913757","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2254","id":913913757,"node_id":"IC_kwDOACaFSM42eTed","user":{"login":"wx930910","id":22060531,"node_id":"MDQ6VXNlcjIyMDYwNTMx","avatar_url":"https://avatars.githubusercontent.com/u/22060531?v=4","gravatar_id":"","url":"https://api.github.com/users/wx930910","html_url":"https://github.com/wx930910","followers_url":"https://api.github.com/users/wx930910/followers","following_url":"https://api.github.com/users/wx930910/following{/other_user}","gists_url":"https://api.github.com/users/wx930910/gists{/gist_id}","starred_url":"https://api.github.com/users/wx930910/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wx930910/subscriptions","organizations_url":"https://api.github.com/users/wx930910/orgs","repos_url":"https://api.github.com/users/wx930910/repos","events_url":"https://api.github.com/users/wx930910/events{/privacy}","received_events_url":"https://api.github.com/users/wx930910/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T00:38:09Z","updated_at":"2021-09-07T00:38:09Z","author_association":"CONTRIBUTOR","body":"@EdColeman Thank you for your help! I reformat the code and now it passed the QA check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/913913757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914415014","html_url":"https://github.com/apache/accumulo/issues/2076#issuecomment-914415014","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2076","id":914415014,"node_id":"IC_kwDOACaFSM42gN2m","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T15:38:48Z","updated_at":"2021-09-07T15:38:48Z","author_association":"CONTRIBUTOR","body":"Need to finish #2197 before completing this task.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914415014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914489357","html_url":"https://github.com/apache/accumulo/pull/2247#issuecomment-914489357","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2247","id":914489357,"node_id":"IC_kwDOACaFSM42ggAN","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T17:27:17Z","updated_at":"2021-09-07T17:27:17Z","author_association":"MEMBER","body":"> the other changes likely will be superseded\r\n\r\nIn that case, should I change this PR to only include the doc updates or keep everything?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914489357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914572025","html_url":"https://github.com/apache/accumulo/pull/2258#issuecomment-914572025","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2258","id":914572025,"node_id":"IC_kwDOACaFSM42g0L5","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-07T19:34:12Z","updated_at":"2021-09-07T19:34:12Z","author_association":"CONTRIBUTOR","body":"> Asking for clarification - what happens if the check fails? Is it rescheduled or is that left up to the caller that scheduled the compaction?\r\n\r\n@EdColeman tablets are periodically examined and a compaction planner is asked to create zero or more compaction jobs (an immutable object the describes compaction work to do).  These jobs are queued to run later.  When the job actually goes to run, maybe things have changed (like this PR is checking for) in which case the job is ignored.  Later when the tablet is examined again, new jobs will be created that incorporate the changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914572025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914717385","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-914717385","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":914717385,"node_id":"IC_kwDOACaFSM42hXrJ","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T00:06:18Z","updated_at":"2021-09-08T00:06:18Z","author_association":"CONTRIBUTOR","body":"> > I used the expression test:\\test:test1 it gave me two strings 1) test:\\test and 2) test1\r\n> \r\n> The example in the jira ticket was scan -r foo -c person:information:name, which has the '' before the colon. Not sure if that changes anything but wanted to make sure that was clarified.\r\n\r\nNo it doesn't that just a way to say its a character. Writing Tests now\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/914717385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915361363","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915361363","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915361363,"node_id":"IC_kwDOACaFSM42j05T","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T15:54:24Z","updated_at":"2021-09-08T15:54:24Z","author_association":"CONTRIBUTOR","body":"@Manno15  @milleruntime  - I'm not sure what needs to be written for ScanCommandTest. There are not too many tests for those.\r\n Any pointers would be helpful.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915361363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915374935","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915374935","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915374935,"node_id":"IC_kwDOACaFSM42j4NX","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:11:28Z","updated_at":"2021-09-08T16:19:15Z","author_association":"CONTRIBUTOR","body":"You could look at `HistoryCommandTest` or `SetIterCommandTest` to get a better idea of how to implement a possible unit test for the command. If you think it needs to be tested on an actual cluster then adding a test to `ShellServerIT` (there are multiple tests utilizing scan there) would be the next step. For the actual test, I think you only need to create a table, insert the row into the table, and exec the scan command and if escape is done correctly then you should get the entire row back as output. \r\n\r\nBelow is my shell history of when I tested this manually. I hope this helps. Let me know if you need anything else. \r\n\r\n```\r\ncreatetable test\r\n insert foo person:information name bob\r\n scan\r\n scan -r foo -c person:information\r\n scan -r foo -c person\\:information:name\r\n scan -r foo -c person\\:information\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915374935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915379810","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915379810","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915379810,"node_id":"IC_kwDOACaFSM42j5Zi","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:17:44Z","updated_at":"2021-09-08T16:17:44Z","author_association":"CONTRIBUTOR","body":"@Manno15  I have the ShellServerIT tests done for the command, my questions was very specific for ScanCommandTest. I see lots of tests using the same validation like ScanCommandTest and MergeCommandTest, so I wasn't sure what was suppose to be done for that. Thanks for all your help.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915379810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915384960","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915384960","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915384960,"node_id":"IC_kwDOACaFSM42j6qA","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:24:49Z","updated_at":"2021-09-08T16:27:04Z","author_association":"CONTRIBUTOR","body":"> @Manno15 I have the ShellServerIT tests done for the command, my questions was very specific for ScanCommandTest. I see lots of tests using the same validation like ScanCommandTest and MergeCommandTest, so I wasn't sure what was suppose to be done for that. Thanks for all your help.\r\n\r\nIf you already created the test in `ShellServerIT` then you don't need to add anything to `ScanCommandTest`.  Does that answer your question? Sorry for the confusion. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915384960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915397040","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915397040","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915397040,"node_id":"IC_kwDOACaFSM42j9mw","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T16:42:29Z","updated_at":"2021-09-08T16:42:29Z","author_association":"CONTRIBUTOR","body":"Pushed. Please let me know if you see any issues","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915397040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915453611","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-915453611","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":915453611,"node_id":"IC_kwDOACaFSM42kLar","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:02:19Z","updated_at":"2021-09-08T18:02:19Z","author_association":"CONTRIBUTOR","body":"Confirmed that the monitor still works, there is a menu item for traces, but there is nothing in the table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915453611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915461189","html_url":"https://github.com/apache/accumulo/pull/1780#issuecomment-915461189","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1780","id":915461189,"node_id":"IC_kwDOACaFSM42kNRF","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:13:24Z","updated_at":"2021-09-08T18:13:24Z","author_association":"CONTRIBUTOR","body":"FYI there is another vulnerability in 0.13.0. So if we are going to upgrade, we will probably want to go to 0.14.0. See https://github.com/apache/accumulo/security/dependabot/pom.xml/org.apache.thrift:libthrift/open","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915461189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915464034","html_url":"https://github.com/apache/accumulo/pull/2259#issuecomment-915464034","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2259","id":915464034,"node_id":"IC_kwDOACaFSM42kN9i","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:17:24Z","updated_at":"2021-09-08T18:17:24Z","author_association":"CONTRIBUTOR","body":"For anyone that wants to try this, here are the latest instructions:\r\n\r\n### Trace Mechanism\r\nDetermine which trace tool you want to use: `logging`, `jaeger`, or `zipkin`. I have tested with all three and will say that Jaeger seems to be the most user friendly. There is a `prometheus` option, but Prometheus has to be configured to pull/scrape metrics from an endpoint whereas the others use a push mechanism. I didn't bother configuring Prometheus to test it out.\r\n\r\n  To log the traces to the log file, do the following:\r\n  ```\r\n  export OTEL_TRACES_EXPORTER=logging\r\n  ```\r\n  \r\n  To send the traces to Jaeger, do the following:\r\n  ```\r\n  docker run -d --name jaeger -e COLLECTOR_ZIPKIN_HOST_PORT=:9411 -p 5775:5775/udp -p 6831:6831/udp -p 6832:6832/udp -p 5778:5778 -p 16686:16686 -p 14268:14268 -p 14250:14250 -p 9411:9411 jaegertracing/all-in-one:1.25\r\n  export OTEL_TRACES_EXPORTER=jaeger\r\n  ```\r\n\r\n  To send the traces to Zipkin, do the following:\r\n  ```\r\n  docker run --name zipkin -d -p 9411:9411 openzipkin/zipkin\r\n  export OTEL_TRACES_EXPORTER=zipkin\r\n  ```\r\n  \r\n### Trace UI\r\nThe Jaeger and Zipkin docker containers have a user interface for visualizing the traces.\r\n\r\n   Jaeger - http://localhost:16686/\r\n   Zipkin - http://localhost:9411/\r\n   \r\n### Start Accumulo\r\nI built the binary tarball, extracted in somewhere and started it locally. Like:\r\n```\r\n$ZOOKEEPER_HOME/bin/zkServer.sh start &\r\n$HADOOP_HOME/sbin/start-dfs.sh &\r\ncp /home/dlmari2/workspace/accumulo/assemble/target/accumulo-2.1.0-SNAPSHOT-bin.tar.gz .\r\ntar zxf accumulo-2.1.0-SNAPSHOT-bin.tar.gz \r\ncd accumulo-2.1.0-SNAPSHOT\r\n# initialize Accumulo or configure it to point to an existing instance\r\ncp ~/workspace/accumulo/server/tracer/target/accumulo-tracer-2.1.0-SNAPSHOT-shaded.jar lib/.\r\nbin/accumulo-cluster create-config\r\nbin/accumulo-cluster start\r\n```\r\n\r\nNOTE: The `accumulo-tracer-2.1.0-SNAPSHOT-shaded.jar` is optional. If you don't copy it into the `lib` directory, no trace information will be generated. Be sure to start Accumulo from the same shell (or set the `OTEL_TRACES_EXPORTER` env variable first)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915464034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915472780","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-915472780","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":915472780,"node_id":"IC_kwDOACaFSM42kQGM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:30:32Z","updated_at":"2021-09-08T18:43:25Z","author_association":"CONTRIBUTOR","body":"~~Just curious, would the unicode colon character work here as a substitute?~~\r\n\r\nNevermind, that does not work","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915472780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915491210","html_url":"https://github.com/apache/accumulo/issues/1126#issuecomment-915491210","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1126","id":915491210,"node_id":"IC_kwDOACaFSM42kUmK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T18:59:22Z","updated_at":"2021-09-08T18:59:22Z","author_association":"CONTRIBUTOR","body":"I think we should close this in favor of moving to OpenTelemetry (#2257)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915491210/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915603391","html_url":"https://github.com/apache/accumulo/issues/2264#issuecomment-915603391","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2264","id":915603391,"node_id":"IC_kwDOACaFSM42kv-_","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T22:02:22Z","updated_at":"2021-09-08T22:02:22Z","author_association":"CONTRIBUTOR","body":"Commands that seem to have this issue: \r\n\r\n```\r\nGrepCommand\r\nEGrepCommand\r\nMaxRowCommand\r\n```\r\n`DeleteManyCommand` does extend `ScanCommand` but overwrites the '-f' arg with a force option. If the usefulness of the --show-few option is low for these commands then a solution might be to just remove it so it doesn't show up as an option in the shell.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915603391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915606874","html_url":"https://github.com/apache/accumulo/issues/2264#issuecomment-915606874","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2264","id":915606874,"node_id":"IC_kwDOACaFSM42kw1a","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T22:09:08Z","updated_at":"2021-09-08T22:09:08Z","author_association":"CONTRIBUTOR","body":"Going from memory, does show few does work with scan (and is useful)? I seem to think it does, but maybe I'm thinking of something else.   grep and egrep would seem to similar to a scan that it should apply, but I don't recall using those commands as frequently as scan during development and troubleshooting.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915606874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915610704","html_url":"https://github.com/apache/accumulo/issues/2264#issuecomment-915610704","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2264","id":915610704,"node_id":"IC_kwDOACaFSM42kxxQ","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-08T22:16:21Z","updated_at":"2021-09-17T21:24:05Z","author_association":"CONTRIBUTOR","body":"It does work for scan. It might be useful in some applications but I do not know what they are. Just the commands that extend ScanCommand it does not work. I could see grep/egrep being useful in the same vein. MaxRow is one I am unsure of since it will only return the row name. It also doesn't currently utilize a formatter like the other commands do.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915610704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915987296","html_url":"https://github.com/apache/accumulo/pull/2265#issuecomment-915987296","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2265","id":915987296,"node_id":"IC_kwDOACaFSM42mNtg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T11:06:11Z","updated_at":"2021-09-09T11:06:11Z","author_association":"CONTRIBUTOR","body":"With this change, is it the case that a user compaction could be delayed indefinitely if ingest is occurring into that tablet at such a rate that system compactions are always being run? My concern here would be the case where an admin kicks off compactions to perform some necessary work that needs to be run in a timely fashion, but it's not run in a timely fashion. I'm wondering if the user compaction should preempt the system compaction.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/915987296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916017881","html_url":"https://github.com/apache/accumulo/issues/1383#issuecomment-916017881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1383","id":916017881,"node_id":"IC_kwDOACaFSM42mVLZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T11:51:10Z","updated_at":"2021-09-09T11:51:10Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - it looks like your PR #1440 resolved this. Can this be closed or is there more work?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916017881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916148161","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916148161","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916148161,"node_id":"IC_kwDOACaFSM42m0_B","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T14:25:45Z","updated_at":"2021-09-09T14:25:45Z","author_association":"CONTRIBUTOR","body":"@dlmarion Were you able to run the ChangeSecret utility successfully? It is erroring out for me but it's unrelated to this change. Happens on main as well. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916148161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916166996","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-916166996","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":916166996,"node_id":"IC_kwDOACaFSM42m5lU","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T14:44:50Z","updated_at":"2021-09-09T14:44:50Z","author_association":"CONTRIBUTOR","body":"Fixed the issues. Replaced RE with a function because we never get the escaped string in the method. Now I'm getting expected results.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916166996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916199485","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916199485","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916199485,"node_id":"IC_kwDOACaFSM42nBg9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:22:26Z","updated_at":"2021-09-09T15:23:12Z","author_association":"CONTRIBUTOR","body":"No, I did not do that yet. Good find though. Are you going to write a new issue for the ChangeSecret failure?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916199485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916205784","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916205784","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916205784,"node_id":"IC_kwDOACaFSM42nDDY","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:30:25Z","updated_at":"2021-09-09T15:30:25Z","author_association":"CONTRIBUTOR","body":"> No, I did not do that yet. Good find though. Are you going to write a new issue for the ChangeSecret failure?\r\n\r\nIf you can confirm that it happens on your end too then I will. It is possible I am not running it correctly.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916205784/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916209567","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916209567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916209567,"node_id":"IC_kwDOACaFSM42nD-f","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:35:14Z","updated_at":"2021-09-09T15:35:14Z","author_association":"CONTRIBUTOR","body":"Let me check....","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916209567/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916226081","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916226081","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916226081,"node_id":"IC_kwDOACaFSM42nIAh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:55:12Z","updated_at":"2021-09-09T15:55:12Z","author_association":"CONTRIBUTOR","body":"So, I did the following:\r\n\r\n```\r\n~/Software/accumulo-2.1.0-SNAPSHOT/bin$ ./accumulo org.apache.accumulo.server.util.ChangeSecret --old secret --new secret2\r\n2021-09-09T15:48:30,014 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/dlmari2/Software/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\nold zookeeper password: \r\nnew zookeeper password: \r\nUsage: org.apache.accumulo.server.util.ChangeSecret [options]\r\n  Options:\r\n    -auths, --auths\r\n      the authorizations to use when reading or writing\r\n      Default: <empty string>\r\n    -c, --config-file\r\n      Read the given client config file. If omitted, the classpath will be \r\n      searched for file named accumulo-client.properties\r\n    -h, -?, --help, -help\r\n\r\n    --password\r\n      connection password (can be specified as '<password>', \r\n      'pass:<password>', 'file:<local file containing the password>' or \r\n      'env:<variable containing the pass>')\r\n    --trace\r\n      turn on distributed tracing\r\n      Default: false\r\n    -u, --user\r\n      Connection user\r\n    -o\r\n      Overrides property in accumulo-client.properties. Expected format: -o \r\n      <key>=<value> \r\n      Default: []\r\n\r\nCan only specify option --old once.\r\n```\r\n\r\nSo, I guess I don't know how to run it. So I tried it w/out args and it did not fail.\r\n\r\n```\r\n~/Software/accumulo-2.1.0-SNAPSHOT/bin$ ./accumulo org.apache.accumulo.server.util.ChangeSecret\r\n2021-09-09T15:49:29,824 [conf.SiteConfiguration] INFO : Found Accumulo configuration on classpath at /home/dlmari2/Software/accumulo-2.1.0-SNAPSHOT/conf/accumulo.properties\r\nold zookeeper password: \r\nnew zookeeper password: \r\n~/Software/accumulo-2.1.0-SNAPSHOT/bin$ \r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916226081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916227958","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916227958","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916227958,"node_id":"IC_kwDOACaFSM42nId2","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T15:57:39Z","updated_at":"2021-09-09T15:57:39Z","author_association":"CONTRIBUTOR","body":"Interesting. That is what I did but I get a zookeeper KeeperException. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916227958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916230283","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916230283","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916230283,"node_id":"IC_kwDOACaFSM42nJCL","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:00:29Z","updated_at":"2021-09-09T16:00:29Z","author_association":"CONTRIBUTOR","body":"I'm not sure what password it's changing. But I noticed that using the old and new password in the shell worked. For example, both worked:\r\n```\r\n./bin/accumulo shell -u root -p secret\r\n./bin/accumulo shell -u root -p secret2\r\n```\r\n\r\nAlso, the following worked too:\r\n```\r\n./bin/accumulo shell -u root -p secret3\r\n./bin/accumulo shell -u root -p foo\r\n```\r\n\r\n\r\nThis doesn't make sense to me. I am going to init a new instance on `main` and try.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916230283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916238269","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916238269","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916238269,"node_id":"IC_kwDOACaFSM42nK-9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:09:13Z","updated_at":"2021-09-09T16:09:13Z","author_association":"CONTRIBUTOR","body":"Ok, I think I see what's happening now. It looks like you can log into the shell with whatever password you want, and it fails later when you try to do something. However, some things work (list tables):\r\n\r\n```\r\n~/Software/accumulo-2.1.0-SNAPSHOT/bin$ ./accumulo shell -u root -p foo\r\nLoading configuration from /home/dlmari2/Software/accumulo-2.1.0-SNAPSHOT/conf/accumulo-client.properties\r\n\r\nShell - Apache Accumulo Interactive Shell\r\n- \r\n- version: 2.1.0-SNAPSHOT\r\n- instance name: password-test\r\n- instance id: a467172e-f040-420e-acb9-3cc0ec9dc02f\r\n- \r\n- type 'help' for a list of available commands\r\n- \r\nWARNING: An illegal reflective access operation has occurred\r\nWARNING: Illegal reflective access by org.apache.hadoop.security.authentication.util.KerberosUtil (file:/home/dlmari2/Software/hadoop-3.2.1/share/hadoop/client/hadoop-client-api-3.2.1.jar) to method sun.security.krb5.Config.getInstance()\r\nWARNING: Please consider reporting this to the maintainers of org.apache.hadoop.security.authentication.util.KerberosUtil\r\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\r\nWARNING: All illegal access operations will be denied in a future release\r\nroot@password-test> tables\r\naccumulo.metadata\r\naccumulo.replication\r\naccumulo.root\r\ntrace\r\nroot@password-test> scan -t accumulo.root\r\n2021-09-09T16:05:33,102 [shell.Shell] ERROR: Could not load the specified formatter. Using the DefaultFormatter\r\n2021-09-09T16:05:33,137 [shell.Shell] ERROR: org.apache.accumulo.core.client.AccumuloSecurityException: Error BAD_CREDENTIALS for user root - Username or Password is Invalid\r\n```\r\nMaybe this changed with 2.0, I'm more familiar with bad passwords failing to let you in the shell at all.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916238269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916248401","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916248401","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916248401,"node_id":"IC_kwDOACaFSM42nNdR","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:21:28Z","updated_at":"2021-09-09T16:21:28Z","author_association":"MEMBER","body":"> It looks like you can log into the shell with whatever password you want, and it fails later when you try to do something.\r\n\r\nThis reminded me of #1868. Not too sure if they are related but seem similar to me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916248401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916253828","html_url":"https://github.com/apache/accumulo/pull/2265#issuecomment-916253828","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2265","id":916253828,"node_id":"IC_kwDOACaFSM42nOyE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:28:55Z","updated_at":"2021-09-09T16:33:13Z","author_association":"CONTRIBUTOR","body":"> With this change, is it the case that a user compaction could be delayed indefinitely if ingest is occurring into that tablet at such a rate that system compactions are always being run?\r\n\r\nI think this is possible. I suspect that as the configurable timeout is increased, that the probability of this happening approaches zero (but never gets to zero).  The configurable expiration time reserves files for a user compactions while its queued.  I set it to 1 minute (not sure what a good default is, still thinking about that).  So for 1 minute after a user compaction is queued, a system compaction can not take any of the files reserved for it.  Once a user compaction has been queued for more than one min, then a system compaction could potentially compact some of the files.  After a user compaction starts running a system compaction can never take any of its files. \r\n\r\n\r\n> I'm wondering if the user compaction should preempt the system compaction.\r\n\r\nOne of the motivating cases for this change is a tablet with lots of files that is queued for really long periods for a user compaction.  For example if a tablet had 1000 files and a user compaction was initiated, then the tablet would reserve those files and queue a user compaction.  If the user compaction sat on the queue for 9 hours then during that time system compactions would not be able to work down the number of files (if system compactions had the capacity to do so).  I feel this potential problem is worth mitigating.  The question is, is the cure (and its potential to cause starvation) worse than the problem.    I feel that its not, but I don't have any numbers to back that up.  I will poke at the likelihood of starvation a bit more and see if I can roughly estimate it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916253828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916259625","html_url":"https://github.com/apache/accumulo/pull/2265#issuecomment-916259625","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2265","id":916259625,"node_id":"IC_kwDOACaFSM42nQMp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:37:23Z","updated_at":"2021-09-09T16:37:23Z","author_association":"CONTRIBUTOR","body":"Expanding on the previous comment.  If system compactions for the tablet with 1000 files also sat on a queue and never actually ran, then it would never unreserve the user compaction files. Its only when a system compaction starts to run (after the expiration period) that it would break the reservation, the break does not happen when its queued.  This can be seen in the change to the PR that reserves files before a compaction actually starts running.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916259625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916265422","html_url":"https://github.com/apache/accumulo/pull/2266#issuecomment-916265422","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2266","id":916265422,"node_id":"IC_kwDOACaFSM42nRnO","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T16:46:05Z","updated_at":"2021-09-09T16:46:05Z","author_association":"CONTRIBUTOR","body":"It doesn't appear we do any authentication until we try to exec a command. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916265422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916442011","html_url":"https://github.com/apache/accumulo/pull/2255#issuecomment-916442011","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2255","id":916442011,"node_id":"IC_kwDOACaFSM42n8ub","user":{"login":"harjitdotsingh","id":75006,"node_id":"MDQ6VXNlcjc1MDA2","avatar_url":"https://avatars.githubusercontent.com/u/75006?v=4","gravatar_id":"","url":"https://api.github.com/users/harjitdotsingh","html_url":"https://github.com/harjitdotsingh","followers_url":"https://api.github.com/users/harjitdotsingh/followers","following_url":"https://api.github.com/users/harjitdotsingh/following{/other_user}","gists_url":"https://api.github.com/users/harjitdotsingh/gists{/gist_id}","starred_url":"https://api.github.com/users/harjitdotsingh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harjitdotsingh/subscriptions","organizations_url":"https://api.github.com/users/harjitdotsingh/orgs","repos_url":"https://api.github.com/users/harjitdotsingh/repos","events_url":"https://api.github.com/users/harjitdotsingh/events{/privacy}","received_events_url":"https://api.github.com/users/harjitdotsingh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:15:25Z","updated_at":"2021-09-09T21:15:25Z","author_association":"CONTRIBUTOR","body":"We will keep it backwards compatible\n\nOn Thu, Sep 9, 2021 at 5:11 PM EdColeman ***@***.***> wrote:\n\n> ***@***.**** commented on this pull request.\n> ------------------------------\n>\n> In shell/src/main/java/org/apache/accumulo/shell/commands/ScanCommand.java\n> <https://github.com/apache/accumulo/pull/2255#discussion_r705701541>:\n>\n> > @@ -285,6 +288,19 @@ protected void fetchColumns(final CommandLine cl, final ScannerBase scanner,\n>      }\n>    }\n>\n> +  protected String[] extractColumnFamily(final String columnString) {\n>\n> It is likely that people have scripts that use -c. Removing that as an\n> option will break those scripts. People using -c currently are limited to\n> not having : in the colFam, but they are coping.\n>\n> Adding -cq and -cf provide additional capability when (the current -c) is\n> insufficient for their needs.\n>\n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/pull/2255#discussion_r705701541>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAASJ7QKPUIIRBWRO5MUT73UBEPILANCNFSM5DGYZX4A>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916442011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916465009","html_url":"https://github.com/apache/accumulo/pull/2265#issuecomment-916465009","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2265","id":916465009,"node_id":"IC_kwDOACaFSM42oCVx","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-09T21:55:21Z","updated_at":"2021-09-09T21:55:21Z","author_association":"CONTRIBUTOR","body":"I was running a test where I did a full table compaction while continuous ingest was running.  Below are some log messages for a single tablet that selected some files for the user compaction and then had a system compaction cancel the selection.  The system compaction ran and then files were reselected for the user compaction which then ran.\r\n\r\n```\r\n2021-09-09T21:32:28,780 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 NEW 5 []\r\n2021-09-09T21:32:28,780 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 SELECTING\r\n2021-09-09T21:32:28,780 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 SELECTED true [C0031umi.rf, C0048yry.rf, C0042902.rf, F0049k8v.rf, A002t9q4.rf, F0049hzr.rf, C00480x2.rf, C003qq36.rf, C003j8jf.rf]\r\n2021-09-09T21:34:07,020 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F0049tcw.rf from [memory]\r\n2021-09-09T21:35:49,321 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F004a15i.rf from [memory]\r\n2021-09-09T21:35:49,321 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 NOT_ACTIVE because selection expired.\r\n2021-09-09T21:35:49,321 [tablet.files] DEBUG: Compacting 2;647ce03;6479ad9 on i.cs1.small for SYSTEM from [F004a15i.rf, F0049hzr.rf, F0049tcw.rf, F0049k8v.rf] size 1 MB config []\r\n2021-09-09T21:35:49,796 [tablet.files] DEBUG: Compacted 2;647ce03;6479ad9 for SYSTEM created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/C004a15m.rf from [F004a15i.rf, F0049hzr.rf, F0049tcw.rf, F0049k8v.rf]\r\n2021-09-09T21:36:00,227 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 NEW 5 []\r\n2021-09-09T21:36:00,227 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 SELECTING\r\n2021-09-09T21:36:00,227 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 SELECTED true [C0031umi.rf, C0048yry.rf, C0042902.rf, C004a15m.rf, A002t9q4.rf, C00480x2.rf, C003qq36.rf, C003j8jf.rf]\r\n2021-09-09T21:37:58,599 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F004aghw.rf from [memory]\r\n2021-09-09T21:39:56,398 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F004aped.rf from [memory]\r\n2021-09-09T21:42:01,817 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F004azef.rf from [memory]\r\n2021-09-09T21:43:15,659 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 RESERVED\r\n2021-09-09T21:43:15,660 [tablet.files] DEBUG: Compacting 2;647ce03;6479ad9 on i.cs2.large for USER from [C0048yry.rf, C0042902.rf, A002t9q4.rf, C003j8jf.rf, C003qq36.rf, C00480x2.rf, C0031umi.rf, C004a15m.rf] size 540 MB config []\r\n2021-09-09T21:44:52,322 [tablet.files] DEBUG: Compacted 2;647ce03;6479ad9 for USER created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/A004b3r0.rf from [C0048yry.rf, C0042902.rf, A002t9q4.rf, C003j8jf.rf, C003qq36.rf, C00480x2.rf, C0031umi.rf, C004a15m.rf]\r\n2021-09-09T21:44:52,322 [tablet.CompactableImpl] TRACE: Selected compaction status changed 2;647ce03;6479ad9 NOT_ACTIVE\r\n2021-09-09T21:44:52,423 [tablet.files] DEBUG: Flushed 2;647ce03;6479ad9 created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/F004b8xz.rf from [memory]\r\n2021-09-09T21:44:52,424 [tablet.files] DEBUG: Compacting 2;647ce03;6479ad9 on i.cs1.small for SYSTEM from [F004aghw.rf, F004aped.rf, F004b8xz.rf, F004azef.rf] size 1 MB config []\r\n2021-09-09T21:44:53,037 [tablet.files] DEBUG: Compacted 2;647ce03;6479ad9 for SYSTEM created hdfs://muchoshacluster/accumulo/tables/2/t-003nr5v/C004b8y5.rf from [F004aghw.rf, F004aped.rf, F004b8xz.rf, F004azef.rf]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/916465009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917067246","html_url":"https://github.com/apache/accumulo/issues/1383#issuecomment-917067246","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1383","id":917067246,"node_id":"IC_kwDOACaFSM42qVXu","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T17:08:14Z","updated_at":"2021-09-10T17:08:14Z","author_association":"CONTRIBUTOR","body":"@dlmarion this can be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917067246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917103060","html_url":"https://github.com/apache/accumulo/pull/2269#issuecomment-917103060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2269","id":917103060,"node_id":"IC_kwDOACaFSM42qeHU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T18:02:31Z","updated_at":"2021-09-10T18:02:31Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - is this what you had in mind for #1120? I still need to do some testing and figure out a way to compare the old and new implementation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917103060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917142263","html_url":"https://github.com/apache/accumulo/pull/2269#issuecomment-917142263","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2269","id":917142263,"node_id":"IC_kwDOACaFSM42qnr3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-10T19:05:05Z","updated_at":"2021-09-10T19:05:05Z","author_association":"CONTRIBUTOR","body":"FWIW - the failing check works for me locally....","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/917142263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/918341165","html_url":"https://github.com/apache/accumulo/pull/2265#issuecomment-918341165","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2265","id":918341165,"node_id":"IC_kwDOACaFSM42vMYt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-13T16:02:40Z","updated_at":"2021-09-13T16:02:40Z","author_association":"CONTRIBUTOR","body":"@dlmarion I thought about this some more and I do not think indefinite starvation can occur.  Before this change indefinite starvation could occur if a compactions was queued and higher priority compactions kept arriving while it was queued.  So I am thinking lets ignore that case and ask the question can this change cause starvation when only lower priority user compactions are arriving?  For this case I do not think indefinite starvation can occur.\r\n\r\nThere are two behaviors that avoid starvation\r\n * User compactions have an exclusive amount of time on the queue in which a system compaction can not remove them from the queue.\r\n * When a user compaction is removed from the queue by a system compaction, its guaranteed that the user compaction will be  requeued after that system compaction runs.  When its requeued it will have the exclusive time on the queue again.\r\n\r\nSo if a user compaction is queued and its next in line waiting for running compactions to finish, then there is a non-zero probability that one of those compactions will finish during its exclusive time.  I think this probability is a function of the average run time and number fo threads.  So if there are 2 threads, the average user compaction time is 5 mins, and the exclusive time is 1 mins then the probability that its gets to run in its exclusive time might be `1-(1-1/5)^2=.36`.  So in this case there is a 36% change its get to run during its first exclusive time.  If it does not get to run during its first exclusive time, then by the second condition above its guaranteed another exclusive time in which it will have another 36% chance to run.  So it will eventually run.\r\n\r\nAlternating between queued times and non-queued times does prolong the time it takes. I think it may do this in a linear manner.  If the exclusive time is 1 min and the average system compaction takes 2 min (during which its not queued for user compaction), then user compactions may take on average 3 times as long to actually start running because they spend 2/3 of the time with a 0% chance of running the compaction and 1/3 of the time with a X% chance of running the compaction where X>0.\r\n\r\nOne possible wrinkle in the above argument is that system compactions may lower the number of files which lowers the priority of subsequently queued user compactions for the tablet.  However system compactions based on the compaction ratio do not continually lower the number of files, but converge to an average number of files based on the compaction ratio, tablet size, and size of incoming files. So there will not be a situation where the priority continually decreases as system compactions occur, it will oscillate within a range as new files arrive and system compactions occur.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/918341165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919289779","html_url":"https://github.com/apache/accumulo/pull/2270#issuecomment-919289779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2270","id":919289779,"node_id":"IC_kwDOACaFSM42yz-z","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T16:00:09Z","updated_at":"2021-09-14T16:00:09Z","author_association":"CONTRIBUTOR","body":"> Without understanding the code - it seems that internalJob and externalJob miss a chance to provide context with what they are doing, esp. if strictly related to compactions. \r\n\r\nWe could add \"compaction\" to the names but that seems unnecessary as they are only used within the `CompactionExecutor` and tserver.compaction package. If you follow the code from tserver, it is more clear then taken out of context in a PR. A `CompactionJob` is the immutable object that will get run. A `SubmittedJob` is a wrapper around a `CompactionJob`, that provides the status. Then `ExternalJob` and `InternalJob` are two types of `SubmittedJob` that can be run.\r\n\r\n> Also, although task and job are interchangeable, task seems to imply something that is narrow in scope and maybe just a step - job seems to imply larger and self contained. Like you submit a MR job that can contain multiple tasks. So not sure what is more appropriate in this context.\r\n\r\nIt seems we could settle on Job here as a name for a unit of work. Perhaps @keith-turner may have had some other ideas?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919289779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919302748","html_url":"https://github.com/apache/accumulo/pull/2270#issuecomment-919302748","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2270","id":919302748,"node_id":"IC_kwDOACaFSM42y3Jc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T16:14:51Z","updated_at":"2021-09-14T16:14:51Z","author_association":"CONTRIBUTOR","body":"> Perhaps @keith-turner may have had some other ideas?\r\n\r\nI think this change is good, it makes the type name more consistent with its sibling and parent types.  If there were to be a change it should probably encompass the entire type tree making them all consistent.  I am happy w/ `Job`, but there are possibilities like `plan`, `task`, `work`, etc..  The purpose of the parent type is to encapsulate information about compaction work that needs to be done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919302748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919314188","html_url":"https://github.com/apache/accumulo/pull/2270#issuecomment-919314188","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2270","id":919314188,"node_id":"IC_kwDOACaFSM42y58M","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T16:28:59Z","updated_at":"2021-09-14T16:28:59Z","author_association":"CONTRIBUTOR","body":"OK I will name the variables to be consistent with the `Job` types.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919314188/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919329290","html_url":"https://github.com/apache/accumulo/pull/2269#issuecomment-919329290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2269","id":919329290,"node_id":"IC_kwDOACaFSM42y9oK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-14T16:47:43Z","updated_at":"2021-09-14T16:47:43Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - thanks, looking at your comments now\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/919329290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]