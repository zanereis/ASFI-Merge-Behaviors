[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790289084","html_url":"https://github.com/apache/brpc/pull/2438#issuecomment-1790289084","issue_url":"https://api.github.com/repos/apache/brpc/issues/2438","id":1790289084,"node_id":"IC_kwDOBhmkcs5qtaS8","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T08:37:02Z","updated_at":"2023-11-02T08:37:02Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790289084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790492064","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1790492064","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1790492064,"node_id":"IC_kwDOBhmkcs5quL2g","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T10:46:50Z","updated_at":"2023-11-02T10:47:29Z","author_association":"CONTRIBUTOR","body":"> int bthread_set_tagged_worker_startfn(void (*start_fn)(bthread_tag_t)); 我觉得这样的函数使用上有点受限，很多时候需要给这个startfn传递一个参数，去做一些thread local的初始化工作。 改成 int bthread_set_tagged_worker_startfn(void (*start_fn)(void *)) 你觉得可行吗？@wwbmmm\r\n\r\n是指这样吗？\r\n```\r\nint bthread_set_tagged_worker_startfn(void (*start_fn)(void *), void* arg) \r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790492064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790552765","html_url":"https://github.com/apache/brpc/issues/2436#issuecomment-1790552765","issue_url":"https://api.github.com/repos/apache/brpc/issues/2436","id":1790552765,"node_id":"IC_kwDOBhmkcs5quaq9","user":{"login":"thorneliu","id":10826201,"node_id":"MDQ6VXNlcjEwODI2MjAx","avatar_url":"https://avatars.githubusercontent.com/u/10826201?v=4","gravatar_id":"","url":"https://api.github.com/users/thorneliu","html_url":"https://github.com/thorneliu","followers_url":"https://api.github.com/users/thorneliu/followers","following_url":"https://api.github.com/users/thorneliu/following{/other_user}","gists_url":"https://api.github.com/users/thorneliu/gists{/gist_id}","starred_url":"https://api.github.com/users/thorneliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorneliu/subscriptions","organizations_url":"https://api.github.com/users/thorneliu/orgs","repos_url":"https://api.github.com/users/thorneliu/repos","events_url":"https://api.github.com/users/thorneliu/events{/privacy}","received_events_url":"https://api.github.com/users/thorneliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T11:29:49Z","updated_at":"2023-11-02T11:29:49Z","author_association":"CONTRIBUTOR","body":"> 可以帮忙看看吗？\r\n\r\n你有抓包看看吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790552765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790579415","html_url":"https://github.com/apache/brpc/issues/2436#issuecomment-1790579415","issue_url":"https://api.github.com/repos/apache/brpc/issues/2436","id":1790579415,"node_id":"IC_kwDOBhmkcs5quhLX","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T11:48:32Z","updated_at":"2023-11-02T11:48:32Z","author_association":"NONE","body":"> > 可以帮忙看看吗？\r\n> \r\n> 你有抓包看看吗\r\n\r\n没有呢，但是这个问题是必现的，您那边是正常的现象还是和我的现象一样呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790579415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790599380","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1790599380","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1790599380,"node_id":"IC_kwDOBhmkcs5qumDU","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-02T12:00:32Z","updated_at":"2023-11-02T12:02:05Z","author_association":"CONTRIBUTOR","body":"> > int bthread_set_tagged_worker_startfn(void (*start_fn)(bthread_tag_t)); 我觉得这样的函数使用上有点受限，很多时候需要给这个startfn传递一个参数，去做一些thread local的初始化工作。 改成 int bthread_set_tagged_worker_startfn(void (*start_fn)(void *)) 你觉得可行吗？@wwbmmm\r\n> \r\n> 是指这样吗？\r\n> \r\n> ```\r\n> int bthread_set_tagged_worker_startfn(void (*start_fn)(void *), void* arg) \r\n> ```\r\n\r\n这个问题忽略吧，我觉得保持现状吧，其实现在这样的接口能满足需求的，并不需要这么复杂。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1790599380/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1791847338","html_url":"https://github.com/apache/brpc/issues/2436#issuecomment-1791847338","issue_url":"https://api.github.com/repos/apache/brpc/issues/2436","id":1791847338,"node_id":"IC_kwDOBhmkcs5qzWuq","user":{"login":"zhaocc1106","id":26559935,"node_id":"MDQ6VXNlcjI2NTU5OTM1","avatar_url":"https://avatars.githubusercontent.com/u/26559935?v=4","gravatar_id":"","url":"https://api.github.com/users/zhaocc1106","html_url":"https://github.com/zhaocc1106","followers_url":"https://api.github.com/users/zhaocc1106/followers","following_url":"https://api.github.com/users/zhaocc1106/following{/other_user}","gists_url":"https://api.github.com/users/zhaocc1106/gists{/gist_id}","starred_url":"https://api.github.com/users/zhaocc1106/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhaocc1106/subscriptions","organizations_url":"https://api.github.com/users/zhaocc1106/orgs","repos_url":"https://api.github.com/users/zhaocc1106/repos","events_url":"https://api.github.com/users/zhaocc1106/events{/privacy}","received_events_url":"https://api.github.com/users/zhaocc1106/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T03:19:58Z","updated_at":"2023-11-03T03:19:58Z","author_association":"NONE","body":"解决了，curl带上--no-buffer参数，或者返回字符串块加上换行结尾就可以了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1791847338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1792026286","html_url":"https://github.com/apache/brpc/issues/796#issuecomment-1792026286","issue_url":"https://api.github.com/repos/apache/brpc/issues/796","id":1792026286,"node_id":"IC_kwDOBhmkcs5q0Cau","user":{"login":"hanyunchang","id":40823439,"node_id":"MDQ6VXNlcjQwODIzNDM5","avatar_url":"https://avatars.githubusercontent.com/u/40823439?v=4","gravatar_id":"","url":"https://api.github.com/users/hanyunchang","html_url":"https://github.com/hanyunchang","followers_url":"https://api.github.com/users/hanyunchang/followers","following_url":"https://api.github.com/users/hanyunchang/following{/other_user}","gists_url":"https://api.github.com/users/hanyunchang/gists{/gist_id}","starred_url":"https://api.github.com/users/hanyunchang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanyunchang/subscriptions","organizations_url":"https://api.github.com/users/hanyunchang/orgs","repos_url":"https://api.github.com/users/hanyunchang/repos","events_url":"https://api.github.com/users/hanyunchang/events{/privacy}","received_events_url":"https://api.github.com/users/hanyunchang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-03T08:16:08Z","updated_at":"2023-11-03T08:19:21Z","author_association":"NONE","body":"看代码，假如window绑定的变量是Adder<int64_t>, 那么window的get_value方法的返回值类型就是int64_t，也就是说在window_size内累加值也是可能溢出的。  \"只要时间跨度不太夸张，结果也是准确的\"  应该是这个意思吧？ @chenzhangyi ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1792026286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1793725301","html_url":"https://github.com/apache/brpc/issues/1962#issuecomment-1793725301","issue_url":"https://api.github.com/repos/apache/brpc/issues/1962","id":1793725301,"node_id":"IC_kwDOBhmkcs5q6hN1","user":{"login":"jh244212647","id":28759961,"node_id":"MDQ6VXNlcjI4NzU5OTYx","avatar_url":"https://avatars.githubusercontent.com/u/28759961?v=4","gravatar_id":"","url":"https://api.github.com/users/jh244212647","html_url":"https://github.com/jh244212647","followers_url":"https://api.github.com/users/jh244212647/followers","following_url":"https://api.github.com/users/jh244212647/following{/other_user}","gists_url":"https://api.github.com/users/jh244212647/gists{/gist_id}","starred_url":"https://api.github.com/users/jh244212647/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jh244212647/subscriptions","organizations_url":"https://api.github.com/users/jh244212647/orgs","repos_url":"https://api.github.com/users/jh244212647/repos","events_url":"https://api.github.com/users/jh244212647/events{/privacy}","received_events_url":"https://api.github.com/users/jh244212647/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-05T12:36:41Z","updated_at":"2023-11-05T12:36:41Z","author_association":"NONE","body":"请问这个feature有计划支持么，预计得啥时候呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1793725301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1794955178","html_url":"https://github.com/apache/brpc/pull/2431#issuecomment-1794955178","issue_url":"https://api.github.com/repos/apache/brpc/issues/2431","id":1794955178,"node_id":"IC_kwDOBhmkcs5q_Neq","user":{"login":"coyorkdow","id":30541655,"node_id":"MDQ6VXNlcjMwNTQxNjU1","avatar_url":"https://avatars.githubusercontent.com/u/30541655?v=4","gravatar_id":"","url":"https://api.github.com/users/coyorkdow","html_url":"https://github.com/coyorkdow","followers_url":"https://api.github.com/users/coyorkdow/followers","following_url":"https://api.github.com/users/coyorkdow/following{/other_user}","gists_url":"https://api.github.com/users/coyorkdow/gists{/gist_id}","starred_url":"https://api.github.com/users/coyorkdow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coyorkdow/subscriptions","organizations_url":"https://api.github.com/users/coyorkdow/orgs","repos_url":"https://api.github.com/users/coyorkdow/repos","events_url":"https://api.github.com/users/coyorkdow/events{/privacy}","received_events_url":"https://api.github.com/users/coyorkdow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-06T14:28:22Z","updated_at":"2023-11-06T14:28:22Z","author_association":"CONTRIBUTOR","body":"@wwbmmm can this PR be merged? Thank you.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1794955178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1797876390","html_url":"https://github.com/apache/brpc/pull/2235#issuecomment-1797876390","issue_url":"https://api.github.com/repos/apache/brpc/issues/2235","id":1797876390,"node_id":"IC_kwDOBhmkcs5rKWqm","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T06:06:15Z","updated_at":"2023-11-07T06:06:15Z","author_association":"CONTRIBUTOR","body":"先合入了，单测的问题 @rock-git 有空再提PR改进一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1797876390/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1798064200","html_url":"https://github.com/apache/brpc/issues/1087#issuecomment-1798064200","issue_url":"https://api.github.com/repos/apache/brpc/issues/1087","id":1798064200,"node_id":"IC_kwDOBhmkcs5rLEhI","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T08:52:46Z","updated_at":"2023-11-07T08:53:18Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/blob/6de560b84fb4cc37461bc6698ea2effd64678465/src/brpc/policy/http2_rpc_protocol.cpp#L1696-L1709\r\n\r\n看样子可能是因为这里引起的，如果当前传输数据大于 remote_window_left 就直接 ResetStream 了，如 TODO 描述应该可以等到 remote_window_left 有空余的时候再继续发送。\r\n\r\n@zyearn @wwbmmm  有计划支持吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1798064200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1798146290","html_url":"https://github.com/apache/brpc/issues/2315#issuecomment-1798146290","issue_url":"https://api.github.com/repos/apache/brpc/issues/2315","id":1798146290,"node_id":"IC_kwDOBhmkcs5rLYjy","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-07T09:43:21Z","updated_at":"2023-11-07T09:43:21Z","author_association":"CONTRIBUTOR","body":"> > 上述问题可以通过使用cas进行链表插入来解决，当然brpc的span不止这一处问题，收到请求包后发起异步调用，svr span会被析构。收到异步调用回包后再发起rpc就可能core。done->Run()提前回包后再发起rpc也有类似的问题。 为了解决这个问题我们对svr span加入了引用计数机制。在合适的位置为当前的svr span引用计数+1，析构时-1。算是比较彻底的解决了这个问题。 在这些问题解决前，不建议在生产环境使用brpc的trace。\r\n> \r\n> hello，想请教一下“收到异步调用回包后再发起rpc就可能core”，异步回调中发起rpc时，所在的bthread的thread local的变量中，应该不包含原来那个svr span的指针吧。因为这可能会是一个新的bthread，那么会是什么原因导致的core呢？\r\n> \r\n> 从源代码来看（[https://github.com/apache/brpc/blob/master/src/brpc/controller.cpp#L718），创建新的bthread的时候，也没有使用BTHREAD_INHERIT_SPAN标志。brpc这个时候，可能不认为新的rpc请求是老的svr](https://github.com/apache/brpc/blob/master/src/brpc/controller.cpp#L718%EF%BC%89%EF%BC%8C%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84bthread%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%B9%9F%E6%B2%A1%E6%9C%89%E4%BD%BF%E7%94%A8BTHREAD_INHERIT_SPAN%E6%A0%87%E5%BF%97%E3%80%82brpc%E8%BF%99%E4%B8%AA%E6%97%B6%E5%80%99%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%B8%8D%E8%AE%A4%E4%B8%BA%E6%96%B0%E7%9A%84rpc%E8%AF%B7%E6%B1%82%E6%98%AF%E8%80%81%E7%9A%84svr) span的child span了。不知道我理解的是否有问题 @bigolcy\r\n\r\n感觉你可以在父bthread里面创建多个span，然后作为argument传递给每个子bthread。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1798146290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1800960521","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1800960521","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1800960521,"node_id":"IC_kwDOBhmkcs5rWHoJ","user":{"login":"YuncyYe","id":788908,"node_id":"MDQ6VXNlcjc4ODkwOA==","avatar_url":"https://avatars.githubusercontent.com/u/788908?v=4","gravatar_id":"","url":"https://api.github.com/users/YuncyYe","html_url":"https://github.com/YuncyYe","followers_url":"https://api.github.com/users/YuncyYe/followers","following_url":"https://api.github.com/users/YuncyYe/following{/other_user}","gists_url":"https://api.github.com/users/YuncyYe/gists{/gist_id}","starred_url":"https://api.github.com/users/YuncyYe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuncyYe/subscriptions","organizations_url":"https://api.github.com/users/YuncyYe/orgs","repos_url":"https://api.github.com/users/YuncyYe/repos","events_url":"https://api.github.com/users/YuncyYe/events{/privacy}","received_events_url":"https://api.github.com/users/YuncyYe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T03:39:29Z","updated_at":"2023-11-08T03:39:29Z","author_association":"NONE","body":"同样的环境碰到同样的问题。请问最后的解决方案是什么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1800960521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1800999451","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1800999451","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1800999451,"node_id":"IC_kwDOBhmkcs5rWRIb","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T04:07:39Z","updated_at":"2023-11-08T04:07:39Z","author_association":"MEMBER","body":"需要高版本编译器，同时需要正确安装依赖","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1800999451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801066522","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1801066522","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1801066522,"node_id":"IC_kwDOBhmkcs5rWhga","user":{"login":"YuncyYe","id":788908,"node_id":"MDQ6VXNlcjc4ODkwOA==","avatar_url":"https://avatars.githubusercontent.com/u/788908?v=4","gravatar_id":"","url":"https://api.github.com/users/YuncyYe","html_url":"https://github.com/YuncyYe","followers_url":"https://api.github.com/users/YuncyYe/followers","following_url":"https://api.github.com/users/YuncyYe/following{/other_user}","gists_url":"https://api.github.com/users/YuncyYe/gists{/gist_id}","starred_url":"https://api.github.com/users/YuncyYe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuncyYe/subscriptions","organizations_url":"https://api.github.com/users/YuncyYe/orgs","repos_url":"https://api.github.com/users/YuncyYe/repos","events_url":"https://api.github.com/users/YuncyYe/events{/privacy}","received_events_url":"https://api.github.com/users/YuncyYe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T04:28:02Z","updated_at":"2023-11-08T04:28:02Z","author_association":"NONE","body":"> 需要高版本编译器，同时需要正确安装依赖\r\n\r\n如何做到啊。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801066522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801117932","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1801117932","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1801117932,"node_id":"IC_kwDOBhmkcs5rWuDs","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T05:28:44Z","updated_at":"2023-11-08T05:28:44Z","author_association":"MEMBER","body":"CentOS 下可以在代码目录下执行以下命令安装相关依赖(需要 root 权限)：\r\n```\r\nyum-builddep package/rpm/brpc.spec\r\n```\r\n\r\n之后可以 source devtoolset-8 的相关配置:\r\n```\r\n. /opt/rh/devtoolset-8/enable\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801117932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801209674","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1801209674","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1801209674,"node_id":"IC_kwDOBhmkcs5rXEdK","user":{"login":"YuncyYe","id":788908,"node_id":"MDQ6VXNlcjc4ODkwOA==","avatar_url":"https://avatars.githubusercontent.com/u/788908?v=4","gravatar_id":"","url":"https://api.github.com/users/YuncyYe","html_url":"https://github.com/YuncyYe","followers_url":"https://api.github.com/users/YuncyYe/followers","following_url":"https://api.github.com/users/YuncyYe/following{/other_user}","gists_url":"https://api.github.com/users/YuncyYe/gists{/gist_id}","starred_url":"https://api.github.com/users/YuncyYe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuncyYe/subscriptions","organizations_url":"https://api.github.com/users/YuncyYe/orgs","repos_url":"https://api.github.com/users/YuncyYe/repos","events_url":"https://api.github.com/users/YuncyYe/events{/privacy}","received_events_url":"https://api.github.com/users/YuncyYe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T07:05:46Z","updated_at":"2023-11-08T07:05:46Z","author_association":"NONE","body":"> CentOS 下可以在代码目录下执行以下命令安装相关依赖(需要 root 权限)：\r\n> \r\n> ```\r\n> yum-builddep package/rpm/brpc.spec\r\n> ```\r\n> \r\n> 之后可以 source devtoolset-8 的相关配置:\r\n> \r\n> ```\r\n> . /opt/rh/devtoolset-8/enable\r\n> ```\r\n\r\n[yeyunxi@dev1 apache-brpc-1.7.0-src]$sudo yum-builddep package/rpm/brpc.spec\r\n  File \"/bin/yum-builddep\", line 83\r\n    except yum.Errors.RepoError, e:\r\n                               ^\r\nSyntaxError: invalid syntax\r\n跑不了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801209674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801686277","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1801686277","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1801686277,"node_id":"IC_kwDOBhmkcs5rY40F","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T11:18:20Z","updated_at":"2023-11-08T11:18:35Z","author_association":"CONTRIBUTOR","body":"现在对于这种异步不等待的，如何能正确使用span呢？不等待的可以使用StartCancel+Join快速结束掉吗？@wwbmmm","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1801686277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802504674","html_url":"https://github.com/apache/brpc/issues/2443#issuecomment-1802504674","issue_url":"https://api.github.com/repos/apache/brpc/issues/2443","id":1802504674,"node_id":"IC_kwDOBhmkcs5rcAni","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T19:19:07Z","updated_at":"2023-11-08T19:19:07Z","author_association":"MEMBER","body":"试一下把client端的tcp keep alive开启一下：https://github.com/apache/brpc/blob/master/src/brpc/input_messenger.cpp#L56-L66","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802504674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802515536","html_url":"https://github.com/apache/brpc/issues/1087#issuecomment-1802515536","issue_url":"https://api.github.com/repos/apache/brpc/issues/1087","id":1802515536,"node_id":"IC_kwDOBhmkcs5rcDRQ","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-08T19:27:35Z","updated_at":"2023-11-08T19:27:35Z","author_association":"MEMBER","body":"目前的workaround是设置grpc client的stream_size和conn_size。如果有兴趣的话可以给我们提一个PR @ehds ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802515536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802980441","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1802980441","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1802980441,"node_id":"IC_kwDOBhmkcs5rd0xZ","user":{"login":"YuncyYe","id":788908,"node_id":"MDQ6VXNlcjc4ODkwOA==","avatar_url":"https://avatars.githubusercontent.com/u/788908?v=4","gravatar_id":"","url":"https://api.github.com/users/YuncyYe","html_url":"https://github.com/YuncyYe","followers_url":"https://api.github.com/users/YuncyYe/followers","following_url":"https://api.github.com/users/YuncyYe/following{/other_user}","gists_url":"https://api.github.com/users/YuncyYe/gists{/gist_id}","starred_url":"https://api.github.com/users/YuncyYe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YuncyYe/subscriptions","organizations_url":"https://api.github.com/users/YuncyYe/orgs","repos_url":"https://api.github.com/users/YuncyYe/repos","events_url":"https://api.github.com/users/YuncyYe/events{/privacy}","received_events_url":"https://api.github.com/users/YuncyYe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T00:36:13Z","updated_at":"2023-11-09T00:36:13Z","author_association":"NONE","body":"> 同样的环境碰到同样的问题。请问最后的解决方案是什么？\r\n\r\n已经找到解决方案。需要的可以私下咨询。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1802980441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803291734","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1803291734","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1803291734,"node_id":"IC_kwDOBhmkcs5rfAxW","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T07:28:27Z","updated_at":"2023-11-10T01:39:13Z","author_association":"CONTRIBUTOR","body":"能定义一个接口类似StartCancel，将不等待的rpc的span删掉吗？\r\n具体步骤\r\n1、使用bthread_id_lock锁住controller，\r\n2、然后设置controller里面的span为空，\r\n3、释放span空间。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803291734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803317613","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1803317613","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1803317613,"node_id":"IC_kwDOBhmkcs5rfHFt","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T07:52:39Z","updated_at":"2023-11-09T07:52:39Z","author_association":"NONE","body":"![image](https://github.com/apache/brpc/assets/126752534/a7eafedf-b1fc-4575-9e10-2f3db7ed2b00)\r\n\r\n这个Flags使用是在main函数之前的，所以在main函数之后任何对其操作貌似都不会关闭统计线程。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803317613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803480296","html_url":"https://github.com/apache/brpc/issues/2443#issuecomment-1803480296","issue_url":"https://api.github.com/repos/apache/brpc/issues/2443","id":1803480296,"node_id":"IC_kwDOBhmkcs5rfuzo","user":{"login":"goodboylhp","id":75165191,"node_id":"MDQ6VXNlcjc1MTY1MTkx","avatar_url":"https://avatars.githubusercontent.com/u/75165191?v=4","gravatar_id":"","url":"https://api.github.com/users/goodboylhp","html_url":"https://github.com/goodboylhp","followers_url":"https://api.github.com/users/goodboylhp/followers","following_url":"https://api.github.com/users/goodboylhp/following{/other_user}","gists_url":"https://api.github.com/users/goodboylhp/gists{/gist_id}","starred_url":"https://api.github.com/users/goodboylhp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/goodboylhp/subscriptions","organizations_url":"https://api.github.com/users/goodboylhp/orgs","repos_url":"https://api.github.com/users/goodboylhp/repos","events_url":"https://api.github.com/users/goodboylhp/events{/privacy}","received_events_url":"https://api.github.com/users/goodboylhp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T09:38:38Z","updated_at":"2023-11-09T09:38:38Z","author_association":"NONE","body":"我试了这种方法不太行，我在业务代码中做了如下修改\r\n![image](https://github.com/apache/brpc/assets/75165191/4b177c05-8800-4651-b834-76900f70c54b)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1803480296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805318618","html_url":"https://github.com/apache/brpc/pull/2435#issuecomment-1805318618","issue_url":"https://api.github.com/repos/apache/brpc/issues/2435","id":1805318618,"node_id":"IC_kwDOBhmkcs5rmvna","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T08:43:39Z","updated_at":"2023-11-10T08:43:39Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805318618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805332604","html_url":"https://github.com/apache/brpc/pull/2441#issuecomment-1805332604","issue_url":"https://api.github.com/repos/apache/brpc/issues/2441","id":1805332604,"node_id":"IC_kwDOBhmkcs5rmzB8","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T08:54:39Z","updated_at":"2023-11-10T08:54:39Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805332604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805349999","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1805349999","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1805349999,"node_id":"IC_kwDOBhmkcs5rm3Rv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T09:08:13Z","updated_at":"2023-11-10T09:08:13Z","author_association":"CONTRIBUTOR","body":"> 现在对于这种异步不等待的，如何能正确使用span呢？不等待的可以使用StartCancel+Join快速结束掉吗？@wwbmmm\r\n\r\n是否可以给Controller加一个强制关闭span功能的开关，对于异步不等待的请求可以开启这个开关？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1805349999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807880842","html_url":"https://github.com/apache/brpc/issues/2426#issuecomment-1807880842","issue_url":"https://api.github.com/repos/apache/brpc/issues/2426","id":1807880842,"node_id":"IC_kwDOBhmkcs5rwhKK","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T10:25:06Z","updated_at":"2023-11-13T10:25:06Z","author_association":"CONTRIBUTOR","body":"可以尝试增加event_dispather线程数量看看，机器是否繁忙可以观察cpu使用和worker_usage，或者看看这个错误能否通过压测复现。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807880842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807897776","html_url":"https://github.com/apache/brpc/issues/2442#issuecomment-1807897776","issue_url":"https://api.github.com/repos/apache/brpc/issues/2442","id":1807897776,"node_id":"IC_kwDOBhmkcs5rwlSw","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T10:35:49Z","updated_at":"2023-11-13T10:35:49Z","author_association":"CONTRIBUTOR","body":"目前不支持发送个数，只能调节qps","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807897776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807994285","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-1807994285","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":1807994285,"node_id":"IC_kwDOBhmkcs5rw82t","user":{"login":"yming000","id":52304372,"node_id":"MDQ6VXNlcjUyMzA0Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/52304372?v=4","gravatar_id":"","url":"https://api.github.com/users/yming000","html_url":"https://github.com/yming000","followers_url":"https://api.github.com/users/yming000/followers","following_url":"https://api.github.com/users/yming000/following{/other_user}","gists_url":"https://api.github.com/users/yming000/gists{/gist_id}","starred_url":"https://api.github.com/users/yming000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yming000/subscriptions","organizations_url":"https://api.github.com/users/yming000/orgs","repos_url":"https://api.github.com/users/yming000/repos","events_url":"https://api.github.com/users/yming000/events{/privacy}","received_events_url":"https://api.github.com/users/yming000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-13T11:38:56Z","updated_at":"2023-11-13T11:38:56Z","author_association":"NONE","body":"> > btw：StreamClose这里有个坑，因为client端上层传给brpc的是handler的指针，有可能上层析构了on_closed还会被调用，有可能访问到已经析构了的数据，这块需要处理一下\r\n> \r\n> 请问一下这块怎么处理呢？现在只要调用StreamClose，如您说的handler被紧接着析构掉的话就会发生段错误。\r\n\r\n请问这个问题有解决办法了吗？现在也同样遇到了这个问题，求大佬帮忙解答下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1807994285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1809498768","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1809498768","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1809498768,"node_id":"IC_kwDOBhmkcs5r2sKQ","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-14T03:41:25Z","updated_at":"2023-11-14T03:42:55Z","author_association":"CONTRIBUTOR","body":"> > 现在对于这种异步不等待的，如何能正确使用span呢？不等待的可以使用StartCancel+Join快速结束掉吗？@wwbmmm\r\n> \r\n> 是否可以给Controller加一个强制关闭span功能的开关，对于异步不等待的请求可以开启这个开关？\r\n\r\n有时候不知道哪些请求是异步不等待的，比如，向三个副本写数据，回来两个就认为成功了，第三个请求的应答就不需要同步等了，所以这个请求的span信息也就不需要了。这是一种动态的取消某个rpc的span的过程。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1809498768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811761391","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1811761391","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1811761391,"node_id":"IC_kwDOBhmkcs5r_Ujv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T03:42:07Z","updated_at":"2023-11-15T03:42:07Z","author_association":"CONTRIBUTOR","body":"> > > 现在对于这种异步不等待的，如何能正确使用span呢？不等待的可以使用StartCancel+Join快速结束掉吗？@wwbmmm\r\n> > \r\n> > \r\n> > 是否可以给Controller加一个强制关闭span功能的开关，对于异步不等待的请求可以开启这个开关？\r\n> \r\n> 有时候不知道哪些请求是异步不等待的，比如，向三个副本写数据，回来两个就认为成功了，第三个请求的应答就不需要同步等了，所以这个请求的span信息也就不需要了。这是一种动态的取消某个rpc的span的过程。\r\n\r\n这种可以用StartCancel+Join吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811761391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811898497","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1811898497","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1811898497,"node_id":"IC_kwDOBhmkcs5r_2CB","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T06:52:51Z","updated_at":"2023-11-15T06:52:51Z","author_association":"CONTRIBUTOR","body":"看下这个https://github.com/apache/brpc/pull/2328 满足需求吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811898497/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811994054","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1811994054","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1811994054,"node_id":"IC_kwDOBhmkcs5sANXG","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T08:18:34Z","updated_at":"2023-11-15T08:18:34Z","author_association":"CONTRIBUTOR","body":"> > > > 现在对于这种异步不等待的，如何能正确使用span呢？不等待的可以使用StartCancel+Join快速结束掉吗？@wwbmmm\r\n> > > \r\n> > > \r\n> > > 是否可以给Controller加一个强制关闭span功能的开关，对于异步不等待的请求可以开启这个开关？\r\n> > \r\n> > \r\n> > 有时候不知道哪些请求是异步不等待的，比如，向三个副本写数据，回来两个就认为成功了，第三个请求的应答就不需要同步等了，所以这个请求的span信息也就不需要了。这是一种动态的取消某个rpc的span的过程。\r\n> \r\n> 这种可以用StartCancel+Join吧\r\n\r\n这种其实还是想要第三个请求的rpc应答的，只是不需要同步等待它，等这个rpc应答后可以做一些更新的动作。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1811994054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1812024290","html_url":"https://github.com/apache/brpc/pull/1611#issuecomment-1812024290","issue_url":"https://api.github.com/repos/apache/brpc/issues/1611","id":1812024290,"node_id":"IC_kwDOBhmkcs5sAUvi","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-15T08:42:16Z","updated_at":"2023-11-15T08:42:16Z","author_association":"CONTRIBUTOR","body":"这个PR有考虑继续跟进吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1812024290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1813496998","html_url":"https://github.com/apache/brpc/pull/1611#issuecomment-1813496998","issue_url":"https://api.github.com/repos/apache/brpc/issues/1611","id":1813496998,"node_id":"IC_kwDOBhmkcs5sF8Sm","user":{"login":"zhwufd","id":6754834,"node_id":"MDQ6VXNlcjY3NTQ4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6754834?v=4","gravatar_id":"","url":"https://api.github.com/users/zhwufd","html_url":"https://github.com/zhwufd","followers_url":"https://api.github.com/users/zhwufd/followers","following_url":"https://api.github.com/users/zhwufd/following{/other_user}","gists_url":"https://api.github.com/users/zhwufd/gists{/gist_id}","starred_url":"https://api.github.com/users/zhwufd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhwufd/subscriptions","organizations_url":"https://api.github.com/users/zhwufd/orgs","repos_url":"https://api.github.com/users/zhwufd/repos","events_url":"https://api.github.com/users/zhwufd/events{/privacy}","received_events_url":"https://api.github.com/users/zhwufd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-16T00:09:55Z","updated_at":"2023-11-16T00:09:55Z","author_association":"NONE","body":"> 这个PR有考虑继续跟进吗？\n\n我这周再优化下。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1813496998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1816092228","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1816092228","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1816092228,"node_id":"IC_kwDOBhmkcs5sP15E","user":{"login":"thorneliu","id":10826201,"node_id":"MDQ6VXNlcjEwODI2MjAx","avatar_url":"https://avatars.githubusercontent.com/u/10826201?v=4","gravatar_id":"","url":"https://api.github.com/users/thorneliu","html_url":"https://github.com/thorneliu","followers_url":"https://api.github.com/users/thorneliu/followers","following_url":"https://api.github.com/users/thorneliu/following{/other_user}","gists_url":"https://api.github.com/users/thorneliu/gists{/gist_id}","starred_url":"https://api.github.com/users/thorneliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorneliu/subscriptions","organizations_url":"https://api.github.com/users/thorneliu/orgs","repos_url":"https://api.github.com/users/thorneliu/repos","events_url":"https://api.github.com/users/thorneliu/events{/privacy}","received_events_url":"https://api.github.com/users/thorneliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-17T10:13:49Z","updated_at":"2023-11-17T10:13:49Z","author_association":"CONTRIBUTOR","body":"那么是在Echo 处理函数中回复了Echo response，同时启动一个线程来运行你的业务函数就行了吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1816092228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1817771204","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1817771204","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1817771204,"node_id":"IC_kwDOBhmkcs5sWPzE","user":{"login":"yeweili94","id":40110285,"node_id":"MDQ6VXNlcjQwMTEwMjg1","avatar_url":"https://avatars.githubusercontent.com/u/40110285?v=4","gravatar_id":"","url":"https://api.github.com/users/yeweili94","html_url":"https://github.com/yeweili94","followers_url":"https://api.github.com/users/yeweili94/followers","following_url":"https://api.github.com/users/yeweili94/following{/other_user}","gists_url":"https://api.github.com/users/yeweili94/gists{/gist_id}","starred_url":"https://api.github.com/users/yeweili94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yeweili94/subscriptions","organizations_url":"https://api.github.com/users/yeweili94/orgs","repos_url":"https://api.github.com/users/yeweili94/repos","events_url":"https://api.github.com/users/yeweili94/events{/privacy}","received_events_url":"https://api.github.com/users/yeweili94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T07:16:41Z","updated_at":"2023-11-19T07:16:41Z","author_association":"NONE","body":"> 同步接口不会阻塞worker的\r\n\r\n想请教下为什么同步调用网络io不会阻塞worker","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1817771204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1817802398","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1817802398","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1817802398,"node_id":"IC_kwDOBhmkcs5sWXae","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-19T09:42:03Z","updated_at":"2023-11-20T12:07:07Z","author_association":"CONTRIBUTOR","body":"> ![image](https://user-images.githubusercontent.com/126752534/281655776-a7eafedf-b1fc-4575-9e10-2f3db7ed2b00.png)\r\n> \r\n> 这个Flags使用是在main函数之前的，所以在main函数之后任何对其操作貌似都不会关闭统计线程。\r\n\r\n注释想表达：`SamplerCollector`单例在main函数之前构造的&启动了线程，所以flag实现不能放在`SamplerCollector`类中，因为不会生效。所以才放到了`Sampler::schedule`函数这儿控制。\r\n\r\n另外在`echo_c++`例子中使用下面两种方式看着都可以正确关闭：\r\n1. `bvar::detail::FLAGS_bvar_enable_sampling = false;`\r\n2. `google::SetCommandLineOption(\"bvar_enable_sampling\", \"false\");`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1817802398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1820204495","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-1820204495","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":1820204495,"node_id":"IC_kwDOBhmkcs5sfh3P","user":{"login":"wangtuanjie","id":4090971,"node_id":"MDQ6VXNlcjQwOTA5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/4090971?v=4","gravatar_id":"","url":"https://api.github.com/users/wangtuanjie","html_url":"https://github.com/wangtuanjie","followers_url":"https://api.github.com/users/wangtuanjie/followers","following_url":"https://api.github.com/users/wangtuanjie/following{/other_user}","gists_url":"https://api.github.com/users/wangtuanjie/gists{/gist_id}","starred_url":"https://api.github.com/users/wangtuanjie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangtuanjie/subscriptions","organizations_url":"https://api.github.com/users/wangtuanjie/orgs","repos_url":"https://api.github.com/users/wangtuanjie/repos","events_url":"https://api.github.com/users/wangtuanjie/events{/privacy}","received_events_url":"https://api.github.com/users/wangtuanjie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T04:03:22Z","updated_at":"2023-11-21T04:03:22Z","author_association":"NONE","body":"> 这个需要通过brpc支持SO_KEEPALIVE来实现了。目前可以通过设置rpc超时时间来控制一下这个等待时间。\r\n\r\n---------------\r\n[有赞TCP网络编程最佳实践](https://tech.youzan.com/you-zan-tcpwang-luo-bian-cheng-zui-jia-shi-jian/)\r\n\r\n> 如果TCP发送缓冲区中有数据未发送成功，TCP会进行超时重传，而不会触发TCP Keepalive。也就是说，即使应用设置了很小的TCP Keepalive参数，如time=10s、interval=10s、probes=3，在net.ipv4.tcp_retries2默认配置下，可能还是一直等到15min左右才能感知到网络异常。可能有的人不理解为什么Keepalive会被重传干扰，其实这里就是个优先级的问题。TCP最大重传次数的作用高于Keepalive参数的作用，未达到最大重传次数，不会向应用层报告网络错误信息。如果Keepalive不受重传影响，同样也会对关注重传的人造成干扰，比如为什么还没达到最大重传次数就放弃重传并关闭连接了？我们可以通过netstat -ot或ss -ot命令查看当前连接的计时器信息。\r\n\r\n这种场景如果主动设置了`TCP_USER_TIMEOUT` 会更快的感知超时。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1820204495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1820743780","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1820743780","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1820743780,"node_id":"IC_kwDOBhmkcs5shlhk","user":{"login":"yming000","id":52304372,"node_id":"MDQ6VXNlcjUyMzA0Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/52304372?v=4","gravatar_id":"","url":"https://api.github.com/users/yming000","html_url":"https://github.com/yming000","followers_url":"https://api.github.com/users/yming000/followers","following_url":"https://api.github.com/users/yming000/following{/other_user}","gists_url":"https://api.github.com/users/yming000/gists{/gist_id}","starred_url":"https://api.github.com/users/yming000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yming000/subscriptions","organizations_url":"https://api.github.com/users/yming000/orgs","repos_url":"https://api.github.com/users/yming000/repos","events_url":"https://api.github.com/users/yming000/events{/privacy}","received_events_url":"https://api.github.com/users/yming000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T11:32:13Z","updated_at":"2023-11-21T11:32:13Z","author_association":"NONE","body":"> 那么是在Echo 处理函数中回复了Echo response，同时启动一个线程来运行你的业务函数就行了吧\r\n\r\n想了解brpc有没有预留这样的借口，自己起线程，感觉在程序退出时，可能会有资源访问core问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1820743780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1821998620","html_url":"https://github.com/apache/brpc/pull/2428#issuecomment-1821998620","issue_url":"https://api.github.com/repos/apache/brpc/issues/2428","id":1821998620,"node_id":"IC_kwDOBhmkcs5smX4c","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T02:39:18Z","updated_at":"2023-11-22T02:39:18Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1821998620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822000098","html_url":"https://github.com/apache/brpc/pull/2441#issuecomment-1822000098","issue_url":"https://api.github.com/repos/apache/brpc/issues/2441","id":1822000098,"node_id":"IC_kwDOBhmkcs5smYPi","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T02:41:22Z","updated_at":"2023-11-22T02:41:22Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822000098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822018186","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1822018186","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1822018186,"node_id":"IC_kwDOBhmkcs5smcqK","user":{"login":"yming000","id":52304372,"node_id":"MDQ6VXNlcjUyMzA0Mzcy","avatar_url":"https://avatars.githubusercontent.com/u/52304372?v=4","gravatar_id":"","url":"https://api.github.com/users/yming000","html_url":"https://github.com/yming000","followers_url":"https://api.github.com/users/yming000/followers","following_url":"https://api.github.com/users/yming000/following{/other_user}","gists_url":"https://api.github.com/users/yming000/gists{/gist_id}","starred_url":"https://api.github.com/users/yming000/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yming000/subscriptions","organizations_url":"https://api.github.com/users/yming000/orgs","repos_url":"https://api.github.com/users/yming000/repos","events_url":"https://api.github.com/users/yming000/events{/privacy}","received_events_url":"https://api.github.com/users/yming000/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T03:07:17Z","updated_at":"2023-11-22T03:07:17Z","author_association":"NONE","body":"> 看下这个#2328 满足需求吗\r\n\r\n谢谢 我学习一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822018186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822183144","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1822183144","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1822183144,"node_id":"IC_kwDOBhmkcs5snE7o","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T06:24:39Z","updated_at":"2023-11-22T06:24:39Z","author_association":"CONTRIBUTOR","body":"> > 那么是在Echo 处理函数中回复了Echo response，同时启动一个线程来运行你的业务函数就行了吧\r\n> \r\n> 想了解brpc有没有预留这样的借口，自己起线程，感觉在程序退出时，可能会有资源访问core问题\r\n\r\n运行done->Run()后request和response都会被析构，如果在单独业务线程中会访问req和resp会有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822183144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822418191","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1822418191","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1822418191,"node_id":"IC_kwDOBhmkcs5sn-UP","user":{"login":"chongg039","id":18239939,"node_id":"MDQ6VXNlcjE4MjM5OTM5","avatar_url":"https://avatars.githubusercontent.com/u/18239939?v=4","gravatar_id":"","url":"https://api.github.com/users/chongg039","html_url":"https://github.com/chongg039","followers_url":"https://api.github.com/users/chongg039/followers","following_url":"https://api.github.com/users/chongg039/following{/other_user}","gists_url":"https://api.github.com/users/chongg039/gists{/gist_id}","starred_url":"https://api.github.com/users/chongg039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chongg039/subscriptions","organizations_url":"https://api.github.com/users/chongg039/orgs","repos_url":"https://api.github.com/users/chongg039/repos","events_url":"https://api.github.com/users/chongg039/events{/privacy}","received_events_url":"https://api.github.com/users/chongg039/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T09:39:47Z","updated_at":"2023-11-22T09:39:47Z","author_association":"NONE","body":"这里打码一下：对应的tcp连接已经是建立好的，从connections页面上看起来也有，只是protocol貌似不是baidustd：\r\n![image](https://github.com/apache/brpc/assets/18239939/4e28e73a-0dff-407c-96aa-e5ac476ff6d2)\r\n![image](https://github.com/apache/brpc/assets/18239939/1c77a801-1cf7-4ee4-9d81-a219c1b5d036)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1822418191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824058567","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1824058567","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1824058567,"node_id":"IC_kwDOBhmkcs5suOzH","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-23T09:28:30Z","updated_at":"2023-11-23T09:36:06Z","author_association":"CONTRIBUTOR","body":"大概率会。因为调用bthread_sleep时，bthread会被挂起，等时间到了，会随机选择一个worker线程来调度该bthread，这时候可能已经切换了worker线程了。\r\n所以，使用bthread时，不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）。否则，会导致死锁或者其他未定义行为。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824058567/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824251933","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1824251933","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1824251933,"node_id":"IC_kwDOBhmkcs5su-Ad","user":{"login":"weingithub","id":8966017,"node_id":"MDQ6VXNlcjg5NjYwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8966017?v=4","gravatar_id":"","url":"https://api.github.com/users/weingithub","html_url":"https://github.com/weingithub","followers_url":"https://api.github.com/users/weingithub/followers","following_url":"https://api.github.com/users/weingithub/following{/other_user}","gists_url":"https://api.github.com/users/weingithub/gists{/gist_id}","starred_url":"https://api.github.com/users/weingithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weingithub/subscriptions","organizations_url":"https://api.github.com/users/weingithub/orgs","repos_url":"https://api.github.com/users/weingithub/repos","events_url":"https://api.github.com/users/weingithub/events{/privacy}","received_events_url":"https://api.github.com/users/weingithub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-23T11:19:23Z","updated_at":"2023-11-23T11:53:22Z","author_association":"NONE","body":"> 大概率会。因为调用bthread_sleep时，bthread会被挂起，等时间到了，会随机选择一个worker线程来调度该bthread，这时候可能已经切换了worker线程了。 所以，使用bthread时，不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）。否则，会导致死锁或者其他未定义行为。\r\n\r\n非常感谢你的回答，我看https://www.iquanku.com/read/brpc-0.9.7-zh/adb9e61c135a61a7.md 这个链接里面的描述的话，好像是如果在bthread中调用pthread_mutex_lock的话，如果是等待拿锁，那么这个时候，bthread是不会切换工作线程的。不知道是不是可以这么理解？\r\n![a1](https://github.com/apache/brpc/assets/8966017/64799a34-6f2d-4fca-86cd-2bb7980085b4)\r\n\r\n还有个就是，brpc为什么也会导致bthread协程切换？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824251933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824303473","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1824303473","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1824303473,"node_id":"IC_kwDOBhmkcs5svKlx","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-23T11:54:03Z","updated_at":"2023-11-23T11:54:03Z","author_association":"CONTRIBUTOR","body":"> 如果在bthread中调用pthread_mutex_lock的话，如果是等待拿锁，那么这个时候，bthread是不会切换工作线程的。不知道是不是可以这么理解？\r\n\r\n是的\r\n\r\n> brpc为什么也会导致bthread协程切换？\r\n\r\n不懂这个问题是什么意思？brpc？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824303473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824329110","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1824329110","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1824329110,"node_id":"IC_kwDOBhmkcs5svQ2W","user":{"login":"weingithub","id":8966017,"node_id":"MDQ6VXNlcjg5NjYwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8966017?v=4","gravatar_id":"","url":"https://api.github.com/users/weingithub","html_url":"https://github.com/weingithub","followers_url":"https://api.github.com/users/weingithub/followers","following_url":"https://api.github.com/users/weingithub/following{/other_user}","gists_url":"https://api.github.com/users/weingithub/gists{/gist_id}","starred_url":"https://api.github.com/users/weingithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weingithub/subscriptions","organizations_url":"https://api.github.com/users/weingithub/orgs","repos_url":"https://api.github.com/users/weingithub/repos","events_url":"https://api.github.com/users/weingithub/events{/privacy}","received_events_url":"https://api.github.com/users/weingithub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-23T12:13:31Z","updated_at":"2023-11-23T12:13:31Z","author_association":"NONE","body":"> 不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）\r\n\r\n不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）。这个rpc不是指brpc吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1824329110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825055238","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1825055238","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1825055238,"node_id":"IC_kwDOBhmkcs5syCIG","user":{"login":"sinomiko","id":12888642,"node_id":"MDQ6VXNlcjEyODg4NjQy","avatar_url":"https://avatars.githubusercontent.com/u/12888642?v=4","gravatar_id":"","url":"https://api.github.com/users/sinomiko","html_url":"https://github.com/sinomiko","followers_url":"https://api.github.com/users/sinomiko/followers","following_url":"https://api.github.com/users/sinomiko/following{/other_user}","gists_url":"https://api.github.com/users/sinomiko/gists{/gist_id}","starred_url":"https://api.github.com/users/sinomiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinomiko/subscriptions","organizations_url":"https://api.github.com/users/sinomiko/orgs","repos_url":"https://api.github.com/users/sinomiko/repos","events_url":"https://api.github.com/users/sinomiko/events{/privacy}","received_events_url":"https://api.github.com/users/sinomiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T01:48:34Z","updated_at":"2023-11-24T07:08:37Z","author_association":"CONTRIBUTOR","body":"以前遇到过卡死的case \r\ncntl 如果是复用的，没有reset ，就会出现\r\nwas used by another RPC before. Did you forget to Reset() it before reuse?\r\n\r\n如FancyJan所说，如果是没有发起rpc的cntl，去join是会卡死的。\r\n\r\n如果是 brpc::Join(idXXX); \r\nidXXX 是0 也会直接卡死。\r\n\r\n可以debug看看这里面correlation_id具体是什么值。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825055238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825071326","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1825071326","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1825071326,"node_id":"IC_kwDOBhmkcs5syGDe","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T02:21:07Z","updated_at":"2023-11-24T02:21:40Z","author_association":"CONTRIBUTOR","body":"> > 不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）\r\n> \r\n> 不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）。这个rpc不是指brpc吗？\r\n\r\n是的。异步rpc应该不会有问题，同步rpc在发完数据后，会调用Join等回包，会挂起bthread。\r\nhttps://github.com/apache/brpc/blob/806f4d46c9393f6aeb92aa558d95fe95d1784355/src/brpc/channel.cpp#L576-L587","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825071326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825077138","html_url":"https://github.com/apache/brpc/issues/2456#issuecomment-1825077138","issue_url":"https://api.github.com/repos/apache/brpc/issues/2456","id":1825077138,"node_id":"IC_kwDOBhmkcs5syHeS","user":{"login":"weingithub","id":8966017,"node_id":"MDQ6VXNlcjg5NjYwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8966017?v=4","gravatar_id":"","url":"https://api.github.com/users/weingithub","html_url":"https://github.com/weingithub","followers_url":"https://api.github.com/users/weingithub/followers","following_url":"https://api.github.com/users/weingithub/following{/other_user}","gists_url":"https://api.github.com/users/weingithub/gists{/gist_id}","starred_url":"https://api.github.com/users/weingithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weingithub/subscriptions","organizations_url":"https://api.github.com/users/weingithub/orgs","repos_url":"https://api.github.com/users/weingithub/repos","events_url":"https://api.github.com/users/weingithub/events{/privacy}","received_events_url":"https://api.github.com/users/weingithub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T02:32:17Z","updated_at":"2023-11-24T02:32:17Z","author_association":"NONE","body":"\r\n\r\n\r\n> > > 不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）\r\n> > \r\n> > \r\n> > 不能在pthread锁临界区内执行会挂起bthread的操作（bthread_mutex、rpc、bthread_usleep等）。这个rpc不是指brpc吗？\r\n> \r\n> 是的。异步rpc应该不会有问题，同步rpc在发完数据后，会调用Join等回包，会挂起bthread。\r\n> \r\n> https://github.com/apache/brpc/blob/806f4d46c9393f6aeb92aa558d95fe95d1784355/src/brpc/channel.cpp#L576-L587\r\n\r\n谢谢啦。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825077138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825082356","html_url":"https://github.com/apache/brpc/issues/204#issuecomment-1825082356","issue_url":"https://api.github.com/repos/apache/brpc/issues/204","id":1825082356,"node_id":"IC_kwDOBhmkcs5syIv0","user":{"login":"kevinfzs","id":151893882,"node_id":"U_kgDOCQ23eg","avatar_url":"https://avatars.githubusercontent.com/u/151893882?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinfzs","html_url":"https://github.com/kevinfzs","followers_url":"https://api.github.com/users/kevinfzs/followers","following_url":"https://api.github.com/users/kevinfzs/following{/other_user}","gists_url":"https://api.github.com/users/kevinfzs/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinfzs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinfzs/subscriptions","organizations_url":"https://api.github.com/users/kevinfzs/orgs","repos_url":"https://api.github.com/users/kevinfzs/repos","events_url":"https://api.github.com/users/kevinfzs/events{/privacy}","received_events_url":"https://api.github.com/users/kevinfzs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T02:42:43Z","updated_at":"2023-11-24T02:42:43Z","author_association":"NONE","body":"> 1. 可以将gflags stask_group_runqueue_capacity改大一点\r\n> 2. 将bthread work线程设置大一点\r\n> 3. 有可能是因为在业务回调用使用了阻塞的pthread API导致bthread将所有的bthread work阻塞住了\r\n\r\n@serverglen 想请教下如果将gflags stask_group_runqueue_capacity和bthread work线程改大一点，理论是也不能从根本上解决问题吧，当并发大的时候，还是会陷入阻塞状态吧，你们是怎么解决的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825082356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825101345","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1825101345","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1825101345,"node_id":"IC_kwDOBhmkcs5syNYh","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T03:19:20Z","updated_at":"2023-11-24T03:19:20Z","author_association":"CONTRIBUTOR","body":"没有发起rpc的cntl直接join会卡死","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825101345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825320596","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1825320596","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1825320596,"node_id":"IC_kwDOBhmkcs5szC6U","user":{"login":"chongg039","id":18239939,"node_id":"MDQ6VXNlcjE4MjM5OTM5","avatar_url":"https://avatars.githubusercontent.com/u/18239939?v=4","gravatar_id":"","url":"https://api.github.com/users/chongg039","html_url":"https://github.com/chongg039","followers_url":"https://api.github.com/users/chongg039/followers","following_url":"https://api.github.com/users/chongg039/following{/other_user}","gists_url":"https://api.github.com/users/chongg039/gists{/gist_id}","starred_url":"https://api.github.com/users/chongg039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chongg039/subscriptions","organizations_url":"https://api.github.com/users/chongg039/orgs","repos_url":"https://api.github.com/users/chongg039/repos","events_url":"https://api.github.com/users/chongg039/events{/privacy}","received_events_url":"https://api.github.com/users/chongg039/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T08:41:46Z","updated_at":"2023-11-24T08:41:46Z","author_association":"NONE","body":"@sinomiko @FancyJan 这两个场景都不是。后来调查了一下，现场是一个8核的vm，就开了9个pthread worker。我们的程序后台有一些bthread task，有的地方还混用了pthread lock的逻辑，猜测应该是哪里的代码有点问题，没有worker来干活了。通过调大pthread数，或者关闭那些后台的task，都不会再次出现。准备详细调查一下相关的代码实现，看看是不是写挫了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825320596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825333381","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1825333381","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1825333381,"node_id":"IC_kwDOBhmkcs5szGCF","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T08:53:03Z","updated_at":"2023-11-24T08:58:23Z","author_association":"CONTRIBUTOR","body":"> @sinomiko @FancyJan 这两个场景都不是。后来调查了一下，现场是一个8核的vm，就开了9个pthread worker。我们的程序后台有一些bthread task，有的地方还混用了pthread lock的逻辑，猜测应该是哪里的代码有点问题，没有worker来干活了。通过调大pthread数，或者关闭那些后台的task，都不会再次出现。准备详细调查一下相关的代码实现，看看是不是写挫了。\r\n\r\n我好像也碰到过这种，在bthread上使用pthread锁可能会有问题：例如一个读写锁的场景，写线程持有锁被切换到后台（必要条件是写线程里有可能切换bthread的动作，例如rpc调用），此时所有的worker如果刚好都在读同一把锁被阻塞，就没有worker去释放写锁了\r\n可以试一下换成bthread::Mutex，或者开启--usercode_in_pthread=true看看还会不会卡住。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825333381/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825342859","html_url":"https://github.com/apache/brpc/issues/2453#issuecomment-1825342859","issue_url":"https://api.github.com/repos/apache/brpc/issues/2453","id":1825342859,"node_id":"IC_kwDOBhmkcs5szIWL","user":{"login":"chongg039","id":18239939,"node_id":"MDQ6VXNlcjE4MjM5OTM5","avatar_url":"https://avatars.githubusercontent.com/u/18239939?v=4","gravatar_id":"","url":"https://api.github.com/users/chongg039","html_url":"https://github.com/chongg039","followers_url":"https://api.github.com/users/chongg039/followers","following_url":"https://api.github.com/users/chongg039/following{/other_user}","gists_url":"https://api.github.com/users/chongg039/gists{/gist_id}","starred_url":"https://api.github.com/users/chongg039/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chongg039/subscriptions","organizations_url":"https://api.github.com/users/chongg039/orgs","repos_url":"https://api.github.com/users/chongg039/repos","events_url":"https://api.github.com/users/chongg039/events{/privacy}","received_events_url":"https://api.github.com/users/chongg039/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T08:59:17Z","updated_at":"2023-11-24T08:59:17Z","author_association":"NONE","body":"> > @sinomiko @FancyJan 这两个场景都不是。后来调查了一下，现场是一个8核的vm，就开了9个pthread worker。我们的程序后台有一些bthread task，有的地方还混用了pthread lock的逻辑，猜测应该是哪里的代码有点问题，没有worker来干活了。通过调大pthread数，或者关闭那些后台的task，都不会再次出现。准备详细调查一下相关的代码实现，看看是不是写挫了。\r\n> \r\n> 我好像也碰到过这种，在bthread上使用pthread锁可能会有问题：例如一个读写锁的场景，写线程持有锁被切换到后台，此时所有的worker如果刚好都在读同一把锁被阻塞，就没有worker去释放写锁了。 可以试一下换成bthread::Mutex，或者开启--usercode_in_pthread=true看看还会不会卡住。\r\n\r\n是的，其实我们之前出现过好几个类似的问题，但是由于确实对bthread了解的不够深，这次在网卡上没收到包的时候其实压根没往这里想，还是心血来潮尝试调大一下worker数才发现的。后来看了下其实文档里面已经提到过了：\r\n![image](https://github.com/apache/brpc/assets/18239939/b9ffa3dd-e29c-4495-84d3-0d36c2c2b47e)\r\n这个场景恰好比较特殊，只有8个核，其他线上的机器核数都比较多，恰好没出现过此类问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1825342859/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826263129","html_url":"https://github.com/apache/brpc/issues/2455#issuecomment-1826263129","issue_url":"https://api.github.com/repos/apache/brpc/issues/2455","id":1826263129,"node_id":"IC_kwDOBhmkcs5s2pBZ","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T09:22:56Z","updated_at":"2023-11-25T09:22:56Z","author_association":"CONTRIBUTOR","body":"业务中是将pthread和bthread同时混用么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826263129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826283130","html_url":"https://github.com/apache/brpc/issues/2454#issuecomment-1826283130","issue_url":"https://api.github.com/repos/apache/brpc/issues/2454","id":1826283130,"node_id":"IC_kwDOBhmkcs5s2t56","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T11:12:02Z","updated_at":"2023-11-25T11:12:02Z","author_association":"CONTRIBUTOR","body":"@jamesge 戈神 有时间帮忙看看这段代码的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826283130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826290605","html_url":"https://github.com/apache/brpc/issues/2450#issuecomment-1826290605","issue_url":"https://api.github.com/repos/apache/brpc/issues/2450","id":1826290605,"node_id":"IC_kwDOBhmkcs5s2vut","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T11:56:04Z","updated_at":"2023-11-25T11:56:04Z","author_association":"CONTRIBUTOR","body":"可以提个pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826290605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826295770","html_url":"https://github.com/apache/brpc/issues/2449#issuecomment-1826295770","issue_url":"https://api.github.com/repos/apache/brpc/issues/2449","id":1826295770,"node_id":"IC_kwDOBhmkcs5s2w_a","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T12:21:59Z","updated_at":"2023-11-25T12:21:59Z","author_association":"CONTRIBUTOR","body":"没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826295770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826476660","html_url":"https://github.com/apache/brpc/issues/2448#issuecomment-1826476660","issue_url":"https://api.github.com/repos/apache/brpc/issues/2448","id":1826476660,"node_id":"IC_kwDOBhmkcs5s3dJ0","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T03:13:25Z","updated_at":"2023-11-26T03:13:25Z","author_association":"CONTRIBUTOR","body":"你是指异步调用么？可以描述下使用场景","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826476660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826479012","html_url":"https://github.com/apache/brpc/issues/2447#issuecomment-1826479012","issue_url":"https://api.github.com/repos/apache/brpc/issues/2447","id":1826479012,"node_id":"IC_kwDOBhmkcs5s3duk","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T03:31:37Z","updated_at":"2023-11-26T03:31:37Z","author_association":"CONTRIBUTOR","body":"这个可能得具体分析下业务使用情况了，可以看下当时服务端的负载和网络情况","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826479012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826482433","html_url":"https://github.com/apache/brpc/issues/2437#issuecomment-1826482433","issue_url":"https://api.github.com/repos/apache/brpc/issues/2437","id":1826482433,"node_id":"IC_kwDOBhmkcs5s3ekB","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T03:58:51Z","updated_at":"2023-11-26T03:58:51Z","author_association":"CONTRIBUTOR","body":"可以贴点数据出来么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826482433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826484398","html_url":"https://github.com/apache/brpc/pull/2452#issuecomment-1826484398","issue_url":"https://api.github.com/repos/apache/brpc/issues/2452","id":1826484398,"node_id":"IC_kwDOBhmkcs5s3fCu","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T04:12:47Z","updated_at":"2023-11-26T04:12:47Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826484398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826517464","html_url":"https://github.com/apache/brpc/pull/2451#issuecomment-1826517464","issue_url":"https://api.github.com/repos/apache/brpc/issues/2451","id":1826517464,"node_id":"IC_kwDOBhmkcs5s3nHY","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T04:39:35Z","updated_at":"2023-11-26T04:39:35Z","author_association":"CONTRIBUTOR","body":"SSL_ERROR_SYSCALL 这个也要忽略么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826517464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826661601","html_url":"https://github.com/apache/brpc/issues/2437#issuecomment-1826661601","issue_url":"https://api.github.com/repos/apache/brpc/issues/2437","id":1826661601,"node_id":"IC_kwDOBhmkcs5s4KTh","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T06:42:09Z","updated_at":"2023-11-26T07:21:35Z","author_association":"CONTRIBUTOR","body":"> 可以贴点数据出来么？\r\n\r\n客户端耗时（cntl->latency_us()）：\r\n**rpc_replay_latency : 59729**\r\nrpc_replay_latency_9999 : 112963\r\nrpc_replay_latency_cdf : \"click to view\"\r\nrpc_replay_latency_percentiles : \"[68928,72482,112963,112963]\"\r\nrpc_replay_max_latency : 112963\r\n\r\n服务端耗时：\r\nrpc_server_6001_xx_service_search_concurrency : 1 \r\nrpc_server_6001_xx_service_search_count : 173520\r\nrpc_server_6001_xx_service_search_eps : 0 \r\nrpc_server_6001_xx_service_search_error : 2 \r\n**rpc_server_6001_xx_service_search_latency : 68115**\r\nrpc_server_6001_xx_service_search_latency_9999 : 121424\r\nrpc_server_6001_xx_service_search_latency_cdf : \"click to view\"\r\nrpc_server_6001_xx_service_search_latency_percentiles : \"[81217,85360,121424,121424]\"\r\nrpc_server_6001_xx_service_search_max_concurrency : 10000\r\nrpc_server_6001_xx_service_search_max_latency : 121424\r\nrpc_server_6001_xx_service_search_qps : 10\r\n\r\n可以看到server端的rt要明显比client侧要长","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826661601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826725253","html_url":"https://github.com/apache/brpc/pull/2451#issuecomment-1826725253","issue_url":"https://api.github.com/repos/apache/brpc/issues/2451","id":1826725253,"node_id":"IC_kwDOBhmkcs5s4Z2F","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T08:46:55Z","updated_at":"2023-11-27T03:05:54Z","author_association":"CONTRIBUTOR","body":"[SSL_get_error](https://linux.die.net/man/3/ssl_get_error)文档中提到，这个场景只是读到EOF而已，不算是错误。\r\n> SSL_ERROR_SYSCALL\r\nSome I/O error occurred. The OpenSSL error queue may contain more information on the error. If the error queue is empty (i.e. ERR_get_error() returns 0), ret can be used to find out more about the error: If ret == 0, an EOF was observed that violates the protocol. If ret == -1, the underlying BIO reported an I/O error (for socket I/O on Unix systems, consult errno for details).","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826725253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826764900","html_url":"https://github.com/apache/brpc/pull/2451#issuecomment-1826764900","issue_url":"https://api.github.com/repos/apache/brpc/issues/2451","id":1826764900,"node_id":"IC_kwDOBhmkcs5s4jhk","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T12:01:58Z","updated_at":"2023-11-27T03:06:01Z","author_association":"CONTRIBUTOR","body":"> [SSL_get_error](https://linux.die.net/man/3/ssl_get_error)文档中提到，这个场景只是读到EOF而已，不算是错误。\r\n> \r\n> > SSL_ERROR_SYSCALL\r\n> > Some I/O error occurred. The OpenSSL error queue may contain more information on the error. If the error queue is empty (i.e. ERR_get_error() returns 0), ret can be used to find out more about the error: If ret == 0, an EOF was observed that violates the protocol. If ret == -1, the underlying BIO reported an I/O error (for socket I/O on Unix systems, consult errno for details).\r\n\r\nEOF只是ret==0的时候吧，ret==-1的时候该怎么判断呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826764900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826765016","html_url":"https://github.com/apache/brpc/issues/2437#issuecomment-1826765016","issue_url":"https://api.github.com/repos/apache/brpc/issues/2437","id":1826765016,"node_id":"IC_kwDOBhmkcs5s4jjY","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T12:02:24Z","updated_at":"2023-11-26T12:02:24Z","author_association":"CONTRIBUTOR","body":"问下 有对应的0.97版本的耗时数据么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826765016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826767904","html_url":"https://github.com/apache/brpc/issues/2437#issuecomment-1826767904","issue_url":"https://api.github.com/repos/apache/brpc/issues/2437","id":1826767904,"node_id":"IC_kwDOBhmkcs5s4kQg","user":{"login":"FancyJan","id":37871611,"node_id":"MDQ6VXNlcjM3ODcxNjEx","avatar_url":"https://avatars.githubusercontent.com/u/37871611?v=4","gravatar_id":"","url":"https://api.github.com/users/FancyJan","html_url":"https://github.com/FancyJan","followers_url":"https://api.github.com/users/FancyJan/followers","following_url":"https://api.github.com/users/FancyJan/following{/other_user}","gists_url":"https://api.github.com/users/FancyJan/gists{/gist_id}","starred_url":"https://api.github.com/users/FancyJan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FancyJan/subscriptions","organizations_url":"https://api.github.com/users/FancyJan/orgs","repos_url":"https://api.github.com/users/FancyJan/repos","events_url":"https://api.github.com/users/FancyJan/events{/privacy}","received_events_url":"https://api.github.com/users/FancyJan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-26T12:15:28Z","updated_at":"2023-11-26T12:16:10Z","author_association":"CONTRIBUTOR","body":"> 问下 有对应的0.97版本的耗时数据么\r\n\r\n看了一下升级前0.9.7的指标：\r\nside\tavg\t95%\t99.9%\r\nclient\t85.45\t133.5\t224.61\r\nserver\t77.63\t121.5\t200.61\t\r\n\r\n升级后1.0.5的指标是：\r\nside\tavg\t95%\t99.9%\r\nclient\t87.23\t135.91\t225.31\r\nserver\t96.05\t151.71\t238.21\r\n\r\n由于一些外部依赖可能导致时延的绝对值有波动，但是大小关系还是明确发生改变了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826767904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826977907","html_url":"https://github.com/apache/brpc/issues/2455#issuecomment-1826977907","issue_url":"https://api.github.com/repos/apache/brpc/issues/2455","id":1826977907,"node_id":"IC_kwDOBhmkcs5s5Xhz","user":{"login":"weingithub","id":8966017,"node_id":"MDQ6VXNlcjg5NjYwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/8966017?v=4","gravatar_id":"","url":"https://api.github.com/users/weingithub","html_url":"https://github.com/weingithub","followers_url":"https://api.github.com/users/weingithub/followers","following_url":"https://api.github.com/users/weingithub/following{/other_user}","gists_url":"https://api.github.com/users/weingithub/gists{/gist_id}","starred_url":"https://api.github.com/users/weingithub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/weingithub/subscriptions","organizations_url":"https://api.github.com/users/weingithub/orgs","repos_url":"https://api.github.com/users/weingithub/repos","events_url":"https://api.github.com/users/weingithub/events{/privacy}","received_events_url":"https://api.github.com/users/weingithub/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T01:01:04Z","updated_at":"2023-11-27T01:01:04Z","author_association":"NONE","body":"> 业务中是将pthread和bthread同时混用么？\r\n\r\n存在这么个情况。之前也解过一些混用导致的加锁卡死的问题。不过那个问题，通过pstack是能够看出来的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1826977907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827006471","html_url":"https://github.com/apache/brpc/issues/2446#issuecomment-1827006471","issue_url":"https://api.github.com/repos/apache/brpc/issues/2446","id":1827006471,"node_id":"IC_kwDOBhmkcs5s5egH","user":{"login":"thorneliu","id":10826201,"node_id":"MDQ6VXNlcjEwODI2MjAx","avatar_url":"https://avatars.githubusercontent.com/u/10826201?v=4","gravatar_id":"","url":"https://api.github.com/users/thorneliu","html_url":"https://github.com/thorneliu","followers_url":"https://api.github.com/users/thorneliu/followers","following_url":"https://api.github.com/users/thorneliu/following{/other_user}","gists_url":"https://api.github.com/users/thorneliu/gists{/gist_id}","starred_url":"https://api.github.com/users/thorneliu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thorneliu/subscriptions","organizations_url":"https://api.github.com/users/thorneliu/orgs","repos_url":"https://api.github.com/users/thorneliu/repos","events_url":"https://api.github.com/users/thorneliu/events{/privacy}","received_events_url":"https://api.github.com/users/thorneliu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T01:47:55Z","updated_at":"2023-11-27T01:49:13Z","author_association":"CONTRIBUTOR","body":"> > > 那么是在Echo 处理函数中回复了Echo response，同时启动一个线程来运行你的业务函数就行了吧\r\n> > \r\n> > \r\n> > 想了解brpc有没有预留这样的借口，自己起线程，感觉在程序退出时，可能会有资源访问core问题\r\n> \r\n> 运行done->Run()后request和response都会被析构，如果在单独业务线程中会访问req和resp会有问题\r\n\r\nHi，如果是这样，你应该拓展done的生命周期，类似这样：\r\n```cpp\r\nvoid ChatServiceImpl::Syn(google::protobuf::RpcController *cntl_base,\r\n                          const HttpRequest *, HttpResponse *,\r\n                          google::protobuf::Closure *done) {\r\n\r\n  brpc::ClosureGuard done_guard(done);\r\n  brpc::Controller *cntl = static_cast<brpc::Controller *>(cntl_base);\r\n\r\n  auto job = std::make_shared<Asyncjob>();\r\n  ...\r\n  job->cntl = cntl;\r\n  job->done = done_guard.release();\r\n\r\n  infer_job_scheduler_->noNewJob(job);\r\n  ...\r\n}\r\n\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827006471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827062870","html_url":"https://github.com/apache/brpc/pull/2451#issuecomment-1827062870","issue_url":"https://api.github.com/repos/apache/brpc/issues/2451","id":1827062870,"node_id":"IC_kwDOBhmkcs5s5sRW","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T03:17:41Z","updated_at":"2023-11-27T03:50:59Z","author_association":"CONTRIBUTOR","body":"加个判断吧，`(ssl_error != SSL_ERROR_ZERO_RETURN && ssl_error != SSL_ERROR_SYSCALL) || nr < 0 || BIO_fd_non_fatal_error(errno) == 0`，这样就能只过滤eof的日志了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827062870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827435418","html_url":"https://github.com/apache/brpc/issues/1010#issuecomment-1827435418","issue_url":"https://api.github.com/repos/apache/brpc/issues/1010","id":1827435418,"node_id":"IC_kwDOBhmkcs5s7HOa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T09:15:08Z","updated_at":"2023-11-27T09:15:08Z","author_association":"CONTRIBUTOR","body":"> > \r\n> > \r\n> > 这种可以用StartCancel+Join吧\r\n> \r\n> 这种其实还是想要第三个请求的rpc应答的，只是不需要同步等待它，等这个rpc应答后可以做一些更新的动作。\r\n\r\n这个场景的话，感觉第三个请求的span信息也是有用的吧？可能需要实现一个server span延迟submit的逻辑","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827435418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827439394","html_url":"https://github.com/apache/brpc/issues/2045#issuecomment-1827439394","issue_url":"https://api.github.com/repos/apache/brpc/issues/2045","id":1827439394,"node_id":"IC_kwDOBhmkcs5s7IMi","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T09:17:44Z","updated_at":"2023-11-27T09:17:44Z","author_association":"CONTRIBUTOR","body":"> > 同步接口不会阻塞worker的\r\n> \r\n> 想请教下为什么同步调用网络io不会阻塞worker\r\n\r\n同步执行Join的时候，会把当前bthread切走，换其它的bthread来执行","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827439394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827454823","html_url":"https://github.com/apache/brpc/pull/2458#issuecomment-1827454823","issue_url":"https://api.github.com/repos/apache/brpc/issues/2458","id":1827454823,"node_id":"IC_kwDOBhmkcs5s7L9n","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T09:27:03Z","updated_at":"2023-11-27T09:27:03Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827454823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827460822","html_url":"https://github.com/apache/brpc/pull/2451#issuecomment-1827460822","issue_url":"https://api.github.com/repos/apache/brpc/issues/2451","id":1827460822,"node_id":"IC_kwDOBhmkcs5s7NbW","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T09:30:39Z","updated_at":"2023-11-27T09:30:39Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827460822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827486440","html_url":"https://github.com/apache/brpc/pull/2418#issuecomment-1827486440","issue_url":"https://api.github.com/repos/apache/brpc/issues/2418","id":1827486440,"node_id":"IC_kwDOBhmkcs5s7Tro","user":{"login":"jiangyt-git","id":64257436,"node_id":"MDQ6VXNlcjY0MjU3NDM2","avatar_url":"https://avatars.githubusercontent.com/u/64257436?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangyt-git","html_url":"https://github.com/jiangyt-git","followers_url":"https://api.github.com/users/jiangyt-git/followers","following_url":"https://api.github.com/users/jiangyt-git/following{/other_user}","gists_url":"https://api.github.com/users/jiangyt-git/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangyt-git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangyt-git/subscriptions","organizations_url":"https://api.github.com/users/jiangyt-git/orgs","repos_url":"https://api.github.com/users/jiangyt-git/repos","events_url":"https://api.github.com/users/jiangyt-git/events{/privacy}","received_events_url":"https://api.github.com/users/jiangyt-git/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T09:46:12Z","updated_at":"2023-11-27T09:46:12Z","author_association":"CONTRIBUTOR","body":"@chenBright @zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827486440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827727778","html_url":"https://github.com/apache/brpc/pull/2418#issuecomment-1827727778","issue_url":"https://api.github.com/repos/apache/brpc/issues/2418","id":1827727778,"node_id":"IC_kwDOBhmkcs5s8Omi","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-27T12:19:13Z","updated_at":"2023-11-27T12:19:13Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1827727778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1829235327","html_url":"https://github.com/apache/brpc/issues/1428#issuecomment-1829235327","issue_url":"https://api.github.com/repos/apache/brpc/issues/1428","id":1829235327,"node_id":"IC_kwDOBhmkcs5tB-p_","user":{"login":"AdiaLoveTrance","id":26007353,"node_id":"MDQ6VXNlcjI2MDA3MzUz","avatar_url":"https://avatars.githubusercontent.com/u/26007353?v=4","gravatar_id":"","url":"https://api.github.com/users/AdiaLoveTrance","html_url":"https://github.com/AdiaLoveTrance","followers_url":"https://api.github.com/users/AdiaLoveTrance/followers","following_url":"https://api.github.com/users/AdiaLoveTrance/following{/other_user}","gists_url":"https://api.github.com/users/AdiaLoveTrance/gists{/gist_id}","starred_url":"https://api.github.com/users/AdiaLoveTrance/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AdiaLoveTrance/subscriptions","organizations_url":"https://api.github.com/users/AdiaLoveTrance/orgs","repos_url":"https://api.github.com/users/AdiaLoveTrance/repos","events_url":"https://api.github.com/users/AdiaLoveTrance/events{/privacy}","received_events_url":"https://api.github.com/users/AdiaLoveTrance/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-28T07:11:47Z","updated_at":"2023-11-28T07:11:47Z","author_association":"NONE","body":"求更新","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1829235327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1831681871","html_url":"https://github.com/apache/brpc/issues/2344#issuecomment-1831681871","issue_url":"https://api.github.com/repos/apache/brpc/issues/2344","id":1831681871,"node_id":"IC_kwDOBhmkcs5tLT9P","user":{"login":"rpbear88","id":61613299,"node_id":"MDQ6VXNlcjYxNjEzMjk5","avatar_url":"https://avatars.githubusercontent.com/u/61613299?v=4","gravatar_id":"","url":"https://api.github.com/users/rpbear88","html_url":"https://github.com/rpbear88","followers_url":"https://api.github.com/users/rpbear88/followers","following_url":"https://api.github.com/users/rpbear88/following{/other_user}","gists_url":"https://api.github.com/users/rpbear88/gists{/gist_id}","starred_url":"https://api.github.com/users/rpbear88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpbear88/subscriptions","organizations_url":"https://api.github.com/users/rpbear88/orgs","repos_url":"https://api.github.com/users/rpbear88/repos","events_url":"https://api.github.com/users/rpbear88/events{/privacy}","received_events_url":"https://api.github.com/users/rpbear88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T11:05:30Z","updated_at":"2023-11-29T11:05:30Z","author_association":"NONE","body":"@zhoumo02  有最新的关于这块的开源计划进展吗？我们这边有新的项目开发计划，但是现在公开的rpc框架都没有这方面的支持，非常急切想看到brpc的功能合入。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1831681871/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1831860319","html_url":"https://github.com/apache/brpc/issues/2226#issuecomment-1831860319","issue_url":"https://api.github.com/repos/apache/brpc/issues/2226","id":1831860319,"node_id":"IC_kwDOBhmkcs5tL_hf","user":{"login":"zhouhuahui","id":39624796,"node_id":"MDQ6VXNlcjM5NjI0Nzk2","avatar_url":"https://avatars.githubusercontent.com/u/39624796?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouhuahui","html_url":"https://github.com/zhouhuahui","followers_url":"https://api.github.com/users/zhouhuahui/followers","following_url":"https://api.github.com/users/zhouhuahui/following{/other_user}","gists_url":"https://api.github.com/users/zhouhuahui/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouhuahui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouhuahui/subscriptions","organizations_url":"https://api.github.com/users/zhouhuahui/orgs","repos_url":"https://api.github.com/users/zhouhuahui/repos","events_url":"https://api.github.com/users/zhouhuahui/events{/privacy}","received_events_url":"https://api.github.com/users/zhouhuahui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-29T13:04:57Z","updated_at":"2023-11-29T13:04:57Z","author_association":"NONE","body":"请问这个问题解决了吗，我也出现了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1831860319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1833212819","html_url":"https://github.com/apache/brpc/issues/2459#issuecomment-1833212819","issue_url":"https://api.github.com/repos/apache/brpc/issues/2459","id":1833212819,"node_id":"IC_kwDOBhmkcs5tRJuT","user":{"login":"binarycopycode","id":34117975,"node_id":"MDQ6VXNlcjM0MTE3OTc1","avatar_url":"https://avatars.githubusercontent.com/u/34117975?v=4","gravatar_id":"","url":"https://api.github.com/users/binarycopycode","html_url":"https://github.com/binarycopycode","followers_url":"https://api.github.com/users/binarycopycode/followers","following_url":"https://api.github.com/users/binarycopycode/following{/other_user}","gists_url":"https://api.github.com/users/binarycopycode/gists{/gist_id}","starred_url":"https://api.github.com/users/binarycopycode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/binarycopycode/subscriptions","organizations_url":"https://api.github.com/users/binarycopycode/orgs","repos_url":"https://api.github.com/users/binarycopycode/repos","events_url":"https://api.github.com/users/binarycopycode/events{/privacy}","received_events_url":"https://api.github.com/users/binarycopycode/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-30T07:01:20Z","updated_at":"2023-11-30T07:01:20Z","author_association":"CONTRIBUTOR","body":"@Tuvie  麻烦看看，谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1833212819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1833577379","html_url":"https://github.com/apache/brpc/issues/2459#issuecomment-1833577379","issue_url":"https://api.github.com/repos/apache/brpc/issues/2459","id":1833577379,"node_id":"IC_kwDOBhmkcs5tSiuj","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-30T11:26:31Z","updated_at":"2023-11-30T11:26:31Z","author_association":"CONTRIBUTOR","body":"这两个报错是web打开了profiling后的log，Got EOF是web页面关了而已，都和rdma没关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1833577379/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835488939","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1835488939","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1835488939,"node_id":"IC_kwDOBhmkcs5tZ1ar","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T05:30:00Z","updated_at":"2023-12-01T05:52:22Z","author_association":"NONE","body":"> > ![image](https://user-images.githubusercontent.com/126752534/281655776-a7eafedf-b1fc-4575-9e10-2f3db7ed2b00.png)\r\n> > 这个Flags使用是在main函数之前的，所以在main函数之后任何对其操作貌似都不会关闭统计线程。\r\n> \r\n> 注释想表达：`SamplerCollector`单例在main函数之前构造的&启动了线程，所以flag实现不能放在`SamplerCollector`类中，因为不会生效。所以才放到了`Sampler::schedule`函数这儿控制。\r\n> \r\n> 另外在`echo_c++`例子中使用下面两种方式看着都可以正确关闭：\r\n> \r\n> 1. `bvar::detail::FLAGS_bvar_enable_sampling = false;`\r\n> 2. `google::SetCommandLineOption(\"bvar_enable_sampling\", \"false\");`\r\n\r\n我使用的是1.6.0版本，还是关闭不了。\r\n![image](https://github.com/apache/brpc/assets/126752534/7428a54d-70ed-4254-b74c-81bbf3237458)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835488939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835500056","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1835500056","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1835500056,"node_id":"IC_kwDOBhmkcs5tZ4IY","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T05:41:28Z","updated_at":"2023-12-01T05:41:28Z","author_association":"NONE","body":"举个例子，如果我开启enable_rpcz，并且关闭bvar_enable_sampling，按照预期rpc_data目录不会记录span信息，文件也不会膨胀。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835500056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835515012","html_url":"https://github.com/apache/brpc/issues/2244#issuecomment-1835515012","issue_url":"https://api.github.com/repos/apache/brpc/issues/2244","id":1835515012,"node_id":"IC_kwDOBhmkcs5tZ7yE","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T05:57:57Z","updated_at":"2023-12-01T05:57:57Z","author_association":"NONE","body":"![image](https://github.com/apache/brpc/assets/126752534/91f68c48-bac8-4d6e-9e5d-b325b8704801)\r\n看起了Sampler::schedule() 也在main函数之前运行了。所以这个FLAGS_bvar_enable_sampling 并控制不到sampling线程是否启动","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835515012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835623669","html_url":"https://github.com/apache/brpc/issues/978#issuecomment-1835623669","issue_url":"https://api.github.com/repos/apache/brpc/issues/978","id":1835623669,"node_id":"IC_kwDOBhmkcs5taWT1","user":{"login":"wory117","id":22499231,"node_id":"MDQ6VXNlcjIyNDk5MjMx","avatar_url":"https://avatars.githubusercontent.com/u/22499231?v=4","gravatar_id":"","url":"https://api.github.com/users/wory117","html_url":"https://github.com/wory117","followers_url":"https://api.github.com/users/wory117/followers","following_url":"https://api.github.com/users/wory117/following{/other_user}","gists_url":"https://api.github.com/users/wory117/gists{/gist_id}","starred_url":"https://api.github.com/users/wory117/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wory117/subscriptions","organizations_url":"https://api.github.com/users/wory117/orgs","repos_url":"https://api.github.com/users/wory117/repos","events_url":"https://api.github.com/users/wory117/events{/privacy}","received_events_url":"https://api.github.com/users/wory117/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T07:42:51Z","updated_at":"2023-12-01T07:42:51Z","author_association":"NONE","body":"brpc 可以通过 LD_PRELOAD 的方式使用 f-stack 吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835623669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835679402","html_url":"https://github.com/apache/brpc/issues/2454#issuecomment-1835679402","issue_url":"https://api.github.com/repos/apache/brpc/issues/2454","id":1835679402,"node_id":"IC_kwDOBhmkcs5taj6q","user":{"login":"a1368017681","id":17562740,"node_id":"MDQ6VXNlcjE3NTYyNzQw","avatar_url":"https://avatars.githubusercontent.com/u/17562740?v=4","gravatar_id":"","url":"https://api.github.com/users/a1368017681","html_url":"https://github.com/a1368017681","followers_url":"https://api.github.com/users/a1368017681/followers","following_url":"https://api.github.com/users/a1368017681/following{/other_user}","gists_url":"https://api.github.com/users/a1368017681/gists{/gist_id}","starred_url":"https://api.github.com/users/a1368017681/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a1368017681/subscriptions","organizations_url":"https://api.github.com/users/a1368017681/orgs","repos_url":"https://api.github.com/users/a1368017681/repos","events_url":"https://api.github.com/users/a1368017681/events{/privacy}","received_events_url":"https://api.github.com/users/a1368017681/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T08:30:00Z","updated_at":"2023-12-01T08:30:00Z","author_association":"NONE","body":"> @jamesge 戈神 有时间帮忙看看这段代码的问题\r\n\r\n大神有啥消息不~，或者这个场景的含义先帮解释下？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835679402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835761612","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1835761612","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1835761612,"node_id":"IC_kwDOBhmkcs5ta3_M","user":{"login":"theDreamBear","id":26134569,"node_id":"MDQ6VXNlcjI2MTM0NTY5","avatar_url":"https://avatars.githubusercontent.com/u/26134569?v=4","gravatar_id":"","url":"https://api.github.com/users/theDreamBear","html_url":"https://github.com/theDreamBear","followers_url":"https://api.github.com/users/theDreamBear/followers","following_url":"https://api.github.com/users/theDreamBear/following{/other_user}","gists_url":"https://api.github.com/users/theDreamBear/gists{/gist_id}","starred_url":"https://api.github.com/users/theDreamBear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/theDreamBear/subscriptions","organizations_url":"https://api.github.com/users/theDreamBear/orgs","repos_url":"https://api.github.com/users/theDreamBear/repos","events_url":"https://api.github.com/users/theDreamBear/events{/privacy}","received_events_url":"https://api.github.com/users/theDreamBear/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-01T09:30:31Z","updated_at":"2023-12-01T09:30:31Z","author_association":"NONE","body":"执行下面的命令， 再重新编译应该就好了\r\n```cpp\r\nyum install -y  \\\r\ncentos-release-scl \\\r\ndevtoolset-8-gcc-c++ \\\r\ndevtoolset-8-gcc \\\r\nyum-builddep package/rpm/brpc.spec && \\\r\n. /opt/rh/devtoolset-8/enable\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1835761612/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837876067","html_url":"https://github.com/apache/brpc/issues/1894#issuecomment-1837876067","issue_url":"https://api.github.com/repos/apache/brpc/issues/1894","id":1837876067,"node_id":"IC_kwDOBhmkcs5ti8Nj","user":{"login":"Divyansh200102","id":146909065,"node_id":"U_kgDOCMGniQ","avatar_url":"https://avatars.githubusercontent.com/u/146909065?v=4","gravatar_id":"","url":"https://api.github.com/users/Divyansh200102","html_url":"https://github.com/Divyansh200102","followers_url":"https://api.github.com/users/Divyansh200102/followers","following_url":"https://api.github.com/users/Divyansh200102/following{/other_user}","gists_url":"https://api.github.com/users/Divyansh200102/gists{/gist_id}","starred_url":"https://api.github.com/users/Divyansh200102/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Divyansh200102/subscriptions","organizations_url":"https://api.github.com/users/Divyansh200102/orgs","repos_url":"https://api.github.com/users/Divyansh200102/repos","events_url":"https://api.github.com/users/Divyansh200102/events{/privacy}","received_events_url":"https://api.github.com/users/Divyansh200102/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T05:37:13Z","updated_at":"2023-12-04T05:37:13Z","author_association":"CONTRIBUTOR","body":"I want to work on this issue @zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837876067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837929785","html_url":"https://github.com/apache/brpc/issues/1923#issuecomment-1837929785","issue_url":"https://api.github.com/repos/apache/brpc/issues/1923","id":1837929785,"node_id":"IC_kwDOBhmkcs5tjJU5","user":{"login":"Divyansh200102","id":146909065,"node_id":"U_kgDOCMGniQ","avatar_url":"https://avatars.githubusercontent.com/u/146909065?v=4","gravatar_id":"","url":"https://api.github.com/users/Divyansh200102","html_url":"https://github.com/Divyansh200102","followers_url":"https://api.github.com/users/Divyansh200102/followers","following_url":"https://api.github.com/users/Divyansh200102/following{/other_user}","gists_url":"https://api.github.com/users/Divyansh200102/gists{/gist_id}","starred_url":"https://api.github.com/users/Divyansh200102/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Divyansh200102/subscriptions","organizations_url":"https://api.github.com/users/Divyansh200102/orgs","repos_url":"https://api.github.com/users/Divyansh200102/repos","events_url":"https://api.github.com/users/Divyansh200102/events{/privacy}","received_events_url":"https://api.github.com/users/Divyansh200102/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T06:39:36Z","updated_at":"2023-12-04T06:39:52Z","author_association":"CONTRIBUTOR","body":"I want to work on this issue @feng-y  @fansehep and I understood the feature that is required since I am a beginner can you tell me how should I start working on this issue and which files do I need to make changes in?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837929785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837940652","html_url":"https://github.com/apache/brpc/issues/1923#issuecomment-1837940652","issue_url":"https://api.github.com/repos/apache/brpc/issues/1923","id":1837940652,"node_id":"IC_kwDOBhmkcs5tjL-s","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-04T06:51:08Z","updated_at":"2023-12-04T06:51:30Z","author_association":"CONTRIBUTOR","body":"Worker threads and other threads has been named by #2136 .","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1837940652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1840823415","html_url":"https://github.com/apache/brpc/issues/2465#issuecomment-1840823415","issue_url":"https://api.github.com/repos/apache/brpc/issues/2465","id":1840823415,"node_id":"IC_kwDOBhmkcs5tuLx3","user":{"login":"foreverneverer","id":23136769,"node_id":"MDQ6VXNlcjIzMTM2NzY5","avatar_url":"https://avatars.githubusercontent.com/u/23136769?v=4","gravatar_id":"","url":"https://api.github.com/users/foreverneverer","html_url":"https://github.com/foreverneverer","followers_url":"https://api.github.com/users/foreverneverer/followers","following_url":"https://api.github.com/users/foreverneverer/following{/other_user}","gists_url":"https://api.github.com/users/foreverneverer/gists{/gist_id}","starred_url":"https://api.github.com/users/foreverneverer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/foreverneverer/subscriptions","organizations_url":"https://api.github.com/users/foreverneverer/orgs","repos_url":"https://api.github.com/users/foreverneverer/repos","events_url":"https://api.github.com/users/foreverneverer/events{/privacy}","received_events_url":"https://api.github.com/users/foreverneverer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-05T13:45:29Z","updated_at":"2023-12-05T13:45:29Z","author_association":"NONE","body":"已经解决！容器中开启了内存perf导致性能有影响","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1840823415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1842425833","html_url":"https://github.com/apache/brpc/issues/2457#issuecomment-1842425833","issue_url":"https://api.github.com/repos/apache/brpc/issues/2457","id":1842425833,"node_id":"IC_kwDOBhmkcs5t0S_p","user":{"login":"sinomiko","id":12888642,"node_id":"MDQ6VXNlcjEyODg4NjQy","avatar_url":"https://avatars.githubusercontent.com/u/12888642?v=4","gravatar_id":"","url":"https://api.github.com/users/sinomiko","html_url":"https://github.com/sinomiko","followers_url":"https://api.github.com/users/sinomiko/followers","following_url":"https://api.github.com/users/sinomiko/following{/other_user}","gists_url":"https://api.github.com/users/sinomiko/gists{/gist_id}","starred_url":"https://api.github.com/users/sinomiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinomiko/subscriptions","organizations_url":"https://api.github.com/users/sinomiko/orgs","repos_url":"https://api.github.com/users/sinomiko/repos","events_url":"https://api.github.com/users/sinomiko/events{/privacy}","received_events_url":"https://api.github.com/users/sinomiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-06T08:34:42Z","updated_at":"2024-06-13T11:10:04Z","author_association":"CONTRIBUTOR","body":"最初怀疑是`SharedObject` `IOBuf`导致:\r\n\r\n加了全局兼容`SharedObject`个数监控，申请和释放都是正常的。\r\nsocket `IOBuf` 这块撑大了没办法缩回去，暂时没有好的办法，只能通过kill tcp链接，让socket回收。\r\n![image](https://github.com/apache/brpc/assets/12888642/46980133-d38d-4ee1-b7e8-2af4c1960e92)\r\n\r\n\r\nAddChannel接口设计不友好，导致业务误用产生泄漏。\r\n\r\n原始代码\r\n```\r\n  auto call_mapper   = new XXCallMapper<XXRequest>();\r\n  for (..){\r\n      if (channel.AddChannel(sub_channel.get(), brpc::DOESNT_OWN_CHANNEL, call_mapper, response_merger) != 0) {\r\n      ...\r\n      }\r\n  }\r\n```\r\n实际上没进入for 循环，直接泄漏出去\r\n\r\n修复的代码\r\n\r\n```\r\n  \r\n   butil::intrusive_ptr<brpc::CallMapper> call_mapper = new XXCallMapper<XXRequest>();\r\n  for (..){\r\n      if (channel.AddChannel(sub_channel.get(), brpc::DOESNT_OWN_CHANNEL, call_mapper.get(),\r\n                                         response_merger.get()) != 0) {\r\n      ....\r\n      }\r\n  }\r\n```\r\n\r\n[improve AddChannel interface](https://github.com/apache/brpc/issues/2466)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1842425833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1842520361","html_url":"https://github.com/apache/brpc/issues/476#issuecomment-1842520361","issue_url":"https://api.github.com/repos/apache/brpc/issues/476","id":1842520361,"node_id":"IC_kwDOBhmkcs5t0qEp","user":{"login":"wory117","id":22499231,"node_id":"MDQ6VXNlcjIyNDk5MjMx","avatar_url":"https://avatars.githubusercontent.com/u/22499231?v=4","gravatar_id":"","url":"https://api.github.com/users/wory117","html_url":"https://github.com/wory117","followers_url":"https://api.github.com/users/wory117/followers","following_url":"https://api.github.com/users/wory117/following{/other_user}","gists_url":"https://api.github.com/users/wory117/gists{/gist_id}","starred_url":"https://api.github.com/users/wory117/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wory117/subscriptions","organizations_url":"https://api.github.com/users/wory117/orgs","repos_url":"https://api.github.com/users/wory117/repos","events_url":"https://api.github.com/users/wory117/events{/privacy}","received_events_url":"https://api.github.com/users/wory117/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-06T09:38:23Z","updated_at":"2023-12-06T09:38:23Z","author_association":"NONE","body":"是不是可以用 redis pipeline，每个请求都用一次 AddCommand 设置一次逻辑数据库","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1842520361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1845189108","html_url":"https://github.com/apache/brpc/issues/2327#issuecomment-1845189108","issue_url":"https://api.github.com/repos/apache/brpc/issues/2327","id":1845189108,"node_id":"IC_kwDOBhmkcs5t-1n0","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T11:38:03Z","updated_at":"2023-12-07T11:38:03Z","author_association":"NONE","body":"如果server端明确能保证先调用done->Run() 再执行StreamClose，也会遇到这种问题吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1845189108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1846617394","html_url":"https://github.com/apache/brpc/issues/2461#issuecomment-1846617394","issue_url":"https://api.github.com/repos/apache/brpc/issues/2461","id":1846617394,"node_id":"IC_kwDOBhmkcs5uESUy","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-08T06:33:07Z","updated_at":"2023-12-08T06:33:07Z","author_association":"CONTRIBUTOR","body":"发起rpc之前，Channel::Init的返回值判断了吗，从日志看像是返回了-1的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1846617394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]