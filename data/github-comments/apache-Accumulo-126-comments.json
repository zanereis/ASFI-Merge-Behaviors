[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856432137","html_url":"https://github.com/apache/accumulo/issues/3937#issuecomment-1856432137","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3937","id":1856432137,"node_id":"IC_kwDOACaFSM5upugJ","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T19:11:12Z","updated_at":"2023-12-14T19:11:12Z","author_association":"MEMBER","body":"I would like to work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856432137/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856491382","html_url":"https://github.com/apache/accumulo/issues/4074#issuecomment-1856491382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4074","id":1856491382,"node_id":"IC_kwDOACaFSM5up892","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T19:54:44Z","updated_at":"2023-12-14T19:55:09Z","author_association":"CONTRIBUTOR","body":"With the changes in #4033 the default config could be single compaction service with two queues one for small and one for large compactions.  All tables would be configured to use this single service by default, including accumulo.* tables.\r\n\r\nThe default compaction service config may move from the java default properties class to documentation and the accumulo.properties that ships with the tarball.  If this change is made the then java code would define no compaction services by default.  However tables would still have default config for selecting a compaction service.  So only having to define a single default compaction service in default config might be nice.\r\n\r\nI am not advocating for anything in this message, just thinking out loud.  One thing I struggle with is trying to find a balance between simple config to get a small accumulo instance running vs whats good for large instances.  I lean towards making the default config be suited to small clusters and making recommendations for config for large clusters easily discoverable.  One way to achieve this is making the default compaction service config in accumulo.properties in the tar ball super simple and also provide a link in accumulo.properties in comments to documentation related to scaling accumulo that goes over how to dedicate resources for things like accumulo.root and accumulo.metadata.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856491382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856517254","html_url":"https://github.com/apache/accumulo/issues/4074#issuecomment-1856517254","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4074","id":1856517254,"node_id":"IC_kwDOACaFSM5uqDSG","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T20:13:35Z","updated_at":"2023-12-14T20:13:35Z","author_association":"CONTRIBUTOR","body":"Issue #3981 describes moving default compaction config.  So may be good to get #3981 and #4033 done and then in this issue try to work out what we want the default config to be.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856517254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856530368","html_url":"https://github.com/apache/accumulo/pull/4069#issuecomment-1856530368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4069","id":1856530368,"node_id":"IC_kwDOACaFSM5uqGfA","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T20:24:13Z","updated_at":"2023-12-14T20:24:13Z","author_association":"CONTRIBUTOR","body":"> I'm still getting random timeouts when running the MetricsIT test, but I believe that might be due to local resources vs an issue with the test.\r\n\r\nI'm going to merge this and hope that it at worst it goes from failing to flaky.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856530368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856546455","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1856546455","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1856546455,"node_id":"IC_kwDOACaFSM5uqKaX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T20:34:43Z","updated_at":"2023-12-14T20:34:43Z","author_association":"CONTRIBUTOR","body":"> I created https://github.com/apache/accumulo/pull/4078 as an initial implementation, but it doesn't implement a minimum. I could add a property for the mininum and implement a check that counts the number of children in ZooKeeper for the process (to include the resource group), but I think that would be best-effort and not guaranteed.\r\n\r\nI think implementing a minimum would be tricky and is not needed now. I just looked at the PR and was wondering if metrics could be emitted that indicate an idle time.  Like each server process could emit a metric, hey I have been idle for Xms.  Not sure if this is something an HPA impl could leverage though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856546455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856858471","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1856858471","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1856858471,"node_id":"IC_kwDOACaFSM5urWln","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T22:48:35Z","updated_at":"2023-12-14T22:49:04Z","author_association":"MEMBER","body":"I think that a shutdown request handler and exposing sufficient metrics for an external decision-maker to request a shutdown would probably be better than baking in properties and logic to handle them. It would put less burden on Accumulo to reimplement complex scenarios that might be valid use cases, but better supported by external frameworks for managing clusters. Just keeping it simple by being able to handle a shutdown request and letting the decision happen outside of Accumulo can keep Accumulo's complexity low without limiting the supported use cases.\r\n\r\nFor instance, Amazon EC2 can scale dynamically through external mechanisms and although I'm not really an expert on these systems, I believe it to be possible emit metrics from your VMs to drive the decision. From what I understand, the VMs just receive an ACPI power off signal, and the OS can shut down gracefully, including triggering any systemd services to shut down gracefully. That could easily be done for Accumulo services with a good systemd unit file, whether it involved a graceful shutdown, or just killing the process.\r\n\r\nI also had a discussion with a researcher awhile back who had some expertise in designing robust systems. Their argument was that if your system is robust enough, it's not worth even baking in any kind of graceful shutdown handling... just killing the process would be sufficient because graceful shutdowns are just redundant code paths where more consistency-related errors can occur. I think he had a good point, but I don't think I could communicate his arguments as well as he could, and I can't remember his name. So, I take it as just something to consider.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856858471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856899388","html_url":"https://github.com/apache/accumulo/pull/4029#issuecomment-1856899388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4029","id":1856899388,"node_id":"IC_kwDOACaFSM5urgk8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T23:06:04Z","updated_at":"2023-12-14T23:06:04Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I pushed bdf22da852f8f2f5177de1ace95974901e636a7f to remove some redundant code that may have been introduced in 2c8947b90044344fb049a334388aa2fbf46271bb","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856899388/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856981700","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1856981700","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1856981700,"node_id":"IC_kwDOACaFSM5ur0rE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T23:41:58Z","updated_at":"2023-12-14T23:41:58Z","author_association":"CONTRIBUTOR","body":"> I think that a shutdown request handler and exposing sufficient metrics for an external decision-maker to request a shutdown would probably be better than baking in properties and logic to handle them\r\n\r\nWhat do we do if the orchestration system that users might use doesn't allow invoking commands, shell scripts, etc. to make the shutdown request as part of the orchestration process?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856981700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856996369","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1856996369","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1856996369,"node_id":"IC_kwDOACaFSM5ur4QR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-14T23:48:27Z","updated_at":"2023-12-14T23:48:27Z","author_association":"CONTRIBUTOR","body":"> What do we do if the orchestration system that users might use doesn't allow invoking commands, shell scripts, etc. to make the shutdown request as part of the orchestration process?\r\n\r\nAnswering my own question here: I guess someone could write their own rudimentary scaler by:\r\n\r\n1. Monitoring for the metrics they are interested in\r\n2. For downscaling, invoke the shutdown request and waiting for the command to return\r\n3. Use the `kubectl scale` command to increase or decrease the number of pods.\r\n\r\nI'm not quite clear on how item 2 would work w/r/t the java application running inside a Pod. It might be dependent on the networking.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1856996369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1857351599","html_url":"https://github.com/apache/accumulo/pull/4080#issuecomment-1857351599","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4080","id":1857351599,"node_id":"IC_kwDOACaFSM5utO-v","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T06:32:14Z","updated_at":"2023-12-15T06:32:14Z","author_association":"CONTRIBUTOR","body":"The 9th test is `testTooManyDeletes` which seems to be failing because the compaction job is never generated by the \r\nselector `TooManyDeletesSelector` with the `DeletesSummarizer` summarizer.\r\n\r\nI've pushed into the manager code a bit and I'm not sure if the summarizer code is in a working state.\r\n\r\nThe `stopCompactionGroup` method should probably be switched into something like `stop(ServerType server, String resourceGroup)` but we already have a method signature for a hostname string that would potentially conflict. \r\n\r\n`public synchronized void stop(ServerType server, String hostname) throws IOException {`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1857351599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858035121","html_url":"https://github.com/apache/accumulo/pull/4079#issuecomment-1858035121","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4079","id":1858035121,"node_id":"IC_kwDOACaFSM5uv12x","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T15:10:38Z","updated_at":"2023-12-15T15:10:38Z","author_association":"CONTRIBUTOR","body":"Merging this for now. I'll follow up with Keith later.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858035121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858142489","html_url":"https://github.com/apache/accumulo/pull/4080#issuecomment-1858142489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4080","id":1858142489,"node_id":"IC_kwDOACaFSM5uwQEZ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T16:24:44Z","updated_at":"2023-12-15T16:24:44Z","author_association":"CONTRIBUTOR","body":"> The 9th test is testTooManyDeletes which seems to be failing because the compaction job is never generated by the\r\nselector TooManyDeletesSelector with the DeletesSummarizer summarizer.\r\n\r\nI can take a look at this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858142489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858248644","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1858248644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1858248644,"node_id":"IC_kwDOACaFSM5uwp_E","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T17:42:13Z","updated_at":"2023-12-15T17:42:13Z","author_association":"CONTRIBUTOR","body":"I would be interested in hearing more opinions about if/how we implement this. Personally, I'm a proponent of implementing this - mainly because it helps solve an issue that is lacking in the HPA (FWIW, I found some discussion related to adding functionality to the HPA downscaling mechanism at https://github.com/kubernetes/kubernetes/issues/107598). However, I do agree that in cases where users are not using Kubernetes and doing things manually, they will have to use some other existing scheduling tool (e.g. docker swarm) or write their own.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858248644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858309175","html_url":"https://github.com/apache/accumulo/pull/4080#issuecomment-1858309175","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4080","id":1858309175,"node_id":"IC_kwDOACaFSM5uw4w3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T18:21:28Z","updated_at":"2023-12-15T18:26:02Z","author_association":"CONTRIBUTOR","body":"@ddanielr I opened #4081 about removing selector compactions.  The reason the test is failing is that selector compactions are not implemented in elasticity.  Looking into this I am thinking we should remove the functionality rather than implement it.\r\n\r\nI modified the test not to wait on the selector compaction and it works.  The user compactions that select files work.  If we know we are going to take the path outlined in #4081 the we could update the test to remove setting the selector plugin on the table.\r\n\r\n```diff\r\ndiff --git a/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java b/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\nindex a7309cb693..92c0c0f49f 100644\r\n--- a/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\n+++ b/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\n@@ -358,9 +358,9 @@ public class CompactionExecutorIT extends SharedMiniClusterBase {\r\n       assertEquals(2, getFiles(client, \"tmd_control2\").size());\r\n       assertEquals(2, getFiles(client, \"tmd_control3\").size());\r\n \r\n-      while (getFiles(client, \"tmd_selector\").size() != 0) {\r\n-        Thread.sleep(100);\r\n-      }\r\n+      //while (getFiles(client, \"tmd_selector\").size() != 0) {\r\n+      //  Thread.sleep(100);\r\n+      //}\r\n \r\n       assertEquals(2, getFiles(client, \"tmd_control1\").size());\r\n       assertEquals(2, getFiles(client, \"tmd_control2\").size());\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858309175/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858367368","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1858367368","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1858367368,"node_id":"IC_kwDOACaFSM5uxG-I","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T19:12:02Z","updated_at":"2023-12-15T19:12:02Z","author_association":"CONTRIBUTOR","body":"Looking over the kubernetes issue, it seems like if this were done with metrics that maybe one could have a custom script that periodically updates the shutdown cost of pods using metrics data and HPA could use that to make decisions.  However I am not sure I understood that correctly.\r\n\r\nOne thing I like about the approach in this issue is that offers a way to scale down that does not kill compactors in the middle of a long compaction.  If only using HPA and it scales down, then it may kill a compactor that has been working on a compaction for hours when it could have killed a compactor process that was doing nothing.\r\n\r\nIdeally we could use HPA+metrics to do this because it would operate within its min and max, but that may not be possible currently, not sure. Also using HPA+metrics puts all of the scaling config in one place instead of having some scaling config in Accumulo and some in Kubernetes.   If in the furture we find a way to accomplish the goals in this PR with HPA+metrics we may end up with redundant code in Accumulo if this is added.  So we could deprecate and remove these change then if we add them now.\r\n\r\nI don't think the lack of a minimum is big deal for compactors.  If the number of compactor processes goes to zero, its not a big deal as long when compaction jobs is queued some compactors are started.  I don't think anyone cares if there is some latency before a queued compaction starts.  For scan servers and tablet servers though, I could see a desire to keep a minimum number of those processes running to make sudden queries on a system that was idle more responsive.  I am in favor of the proposal in this issue for compactors as it offers a simple way to scale down that avoids killing compactors that are not idle.  I am uncertain about the usefulness of the idle setting for tablet servers and scan servers though.\r\n\r\nIt may be good to work through using this new property in K8s to scale compactors up and down and see if it works as desired.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858367368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858386318","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1858386318","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1858386318,"node_id":"IC_kwDOACaFSM5uxLmO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T19:30:15Z","updated_at":"2023-12-15T19:31:52Z","author_association":"CONTRIBUTOR","body":"Some thoughts on probable scaling scenarios:\r\n\r\n|Component|Metric or Condition|Action|Comments|\r\n|-----------------|----------------------------|----------|--------------- |\r\n| Compactor | Idle | Shutdown unless minimum specified ||\r\n| ScanServer | Idle | Shutdown unless minimum specified ||\r\n| TabletServer | Idle | Shutdown unless minimum specified ||\r\n| Compactor | queue.length > x  | Start a new instance ||\r\n| ScanServer | queue.length > x  | Start a new instance, if not enough resources terminate Compactor |Would client need to emit a metric for this?|\r\n| ScanServer | cpu.utilization > x  | Start a new instance, if not enough resources terminate Compactor ||\r\n| TabletServer | hold.time > x  | Start a new instance, if not enough resources terminate Compactor |Hold time indicates pause of live ingest due to flush latency|\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858386318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858512594","html_url":"https://github.com/apache/accumulo/pull/4072#issuecomment-1858512594","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4072","id":1858512594,"node_id":"IC_kwDOACaFSM5uxqbS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-15T21:30:27Z","updated_at":"2023-12-15T21:32:14Z","author_association":"CONTRIBUTOR","body":"> I'm not quite sure how tablet time works in general.\r\n\r\nHere is some info.  Each tablet has a concept of time that only moves forward.  This time is persisted in the tablet metadata table entry.  As mutations arrive in a tablet, if the time was not explicitly set then its set on the mutation and tablets time is incremented.  For bulk import one can optionally set the tablets current time on an entire file.  The way this works is that it allocates a timestamp for the tablet and then persist this with the bulk file entry.  When the bulk file is read, if a timestamp is present for the file then its applied to everything in the file.  \r\n\r\n 1. Batch write row=a value=1\r\n 2. Bulk import row=a value=2 and set time.  \r\n\r\nWith the ability to set time on bulk imports, it allows bulk imports to be properly orders w.r.t. write.  Like the above would set the timestamp on the 2nd write by the bulk import such that its higher than the timestamp on the first write.\r\n\r\nThis PR adds coordination between a hosted tablet and the bulk import code running in the manager to ensure that timestamp is set correctly.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858512594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858645531","html_url":"https://github.com/apache/accumulo/pull/4080#issuecomment-1858645531","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4080","id":1858645531,"node_id":"IC_kwDOACaFSM5uyK4b","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T00:48:28Z","updated_at":"2023-12-16T00:48:28Z","author_association":"CONTRIBUTOR","body":"> @ddanielr I opened #4081 about removing selector compactions. The reason the test is failing is that selector compactions are not implemented in elasticity. Looking into this I am thinking we should remove the functionality rather than implement it.\r\n> \r\n> I modified the test not to wait on the selector compaction and it works. The user compactions that select files work. If we know we are going to take the path outlined in #4081 the we could update the test to remove setting the selector plugin on the table.\r\n> \r\n> ```diff\r\n> diff --git a/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java b/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\n> index a7309cb693..92c0c0f49f 100644\r\n> --- a/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\n> +++ b/test/src/main/java/org/apache/accumulo/test/compaction/CompactionExecutorIT.java\r\n> @@ -358,9 +358,9 @@ public class CompactionExecutorIT extends SharedMiniClusterBase {\r\n>        assertEquals(2, getFiles(client, \"tmd_control2\").size());\r\n>        assertEquals(2, getFiles(client, \"tmd_control3\").size());\r\n>  \r\n> -      while (getFiles(client, \"tmd_selector\").size() != 0) {\r\n> -        Thread.sleep(100);\r\n> -      }\r\n> +      //while (getFiles(client, \"tmd_selector\").size() != 0) {\r\n> +      //  Thread.sleep(100);\r\n> +      //}\r\n>  \r\n>        assertEquals(2, getFiles(client, \"tmd_control1\").size());\r\n>        assertEquals(2, getFiles(client, \"tmd_control2\").size());\r\n> ```\r\n\r\nI removed the code for the selector compactions and now all tests are working. \r\nI think #4081 is the correct way to go since it's moving all of those custom compaction functions under user control.\r\n\r\nIf we come to a different decision with #4081 then we could revisit adding the logic back to this test. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858645531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858688892","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1858688892","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1858688892,"node_id":"IC_kwDOACaFSM5uyVd8","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-16T02:41:01Z","updated_at":"2023-12-16T02:49:54Z","author_association":"MEMBER","body":"> > I think that a shutdown request handler and exposing sufficient metrics for an external decision-maker to request a shutdown would probably be better than baking in properties and logic to handle them\r\n> \r\n> What do we do if the orchestration system that users might use doesn't allow invoking commands, shell scripts, etc. to make the shutdown request as part of the orchestration process?\r\n\r\nIt seems to me that if their orchestration system can't handle orchestrating the processes with a simple signal to start or stop it, it's not a very good orchestration system. But even if user's don't have that, they'll have *some* way to send network commands to the servers from clients (otherwise, how would they communicate with the distributed system?), and could supplement their orchestration system with commands triggered outside of the limits of that system.\r\n\r\nI don't think the user's choice to use an inadequate orchestration system is sufficient requirement to bake in orchestration directly into Accumulo. We should provide good interfaces, so users can integrate with their environment, but we shouldn't take it on ourselves because users *might* make a choice to deploy Accumulo in an environment without providing their own environmental tools that suit their particular requirements.\r\n\r\nIf it were a common thing for orchestration systems to not be able to start/stop processes or send/receive signals to processes, then perhaps my opinion about building this might be different (though I'd still prefer to consider building it around Accumulo rather than within, to avoid scope creep and bloat). But, I think the status quo is exactly the opposite. I think it would be unusual for an orchestration system to *not* support this kind of integration with an application. ~~Can you provide an example of a commonly used orchestration system that doesn't offer controls like this?~~ EDIT: disregard that last question. Subsequent comments discussed this a bit -- I just didn't have my browser window refreshed. Nevertheless, it still seems out of scope of Accumulo to provide scaling management. I'm sure users who deploy such systems are clever enough to come up with something that works well. We can't be the first with a use case like that, and any criteria we come up with like \"idle time\", or anything else, is only going to satisfy some use cases. I'd rather push this outside Accumulo, and let users determine the criteria for scale down based on their own requirements.\r\n\r\nAlso, wouldn't it cause a problem if you auto-scale down but don't communicate that to the orchestration system? Isn't it common in K8s, for example, to be configured to auto-start pods that are no longer running, if you've specified to run a particular number? I think if you were to bake this in, then it not only pushes the decision making into Accumulo, adding complexity and a bit of scope creep, you're also possibly making things *more* complicated for users who *do* use their orchestration system's scaling features, because they now have to account for the fact that *we're* auto-scaling inside Accumulo in addition to whatever the external system is doing. I just don't think that makes sense to do.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1858688892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1859265131","html_url":"https://github.com/apache/accumulo/pull/4049#issuecomment-1859265131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4049","id":1859265131,"node_id":"IC_kwDOACaFSM5u0iJr","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-17T19:55:33Z","updated_at":"2023-12-17T19:55:33Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I did some refactoring and now FateIT is abstract and there are test classes to run the 4 tests for both Zookeeper and Accumulo stores. One thing I noticed was one of the tests seems to have a race condition that I think needs fixing as I saw an occasional failure with the accumuo store version and i added a comment [here](https://github.com/apache/accumulo/pull/4049/files#diff-2d3ed905a65d84cd0a4ad053128a6506bd88de4abcdb8b8a452600b73815f1dfR134-R143). \r\n\r\nThis should be close to being able to go out of draft status if we are ok doing some follow ons for things like conditional mutations.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1859265131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1860492488","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1860492488","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1860492488,"node_id":"IC_kwDOACaFSM5u5NzI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-18T13:24:42Z","updated_at":"2023-12-18T13:24:42Z","author_association":"CONTRIBUTOR","body":"So, it's likely the case then that we will need to allow users to specify additional tags at server startup to emit with the metrics. For example, for Kubernetes, the specific pod name.  I'll work on modifying my PR to accept additional tags that get emitted **and** emit an idle time metric. Scaling down specific pods in Kubernetes does not seem to be a solved problem, so we'll need to provide enough information for users to do it on their own. Using this information they should be able to monitor for a metric, terminate an idle pod by its identifier, and reduce the number of replicas in the deployment so that new pods do not get started.\r\n\r\nIt's possible that there could be a race condition between terminating a pod and reducing the number of replicas in the deployment. I'm wondering if we might need an RPC that tells the server to not accept any new work (shutting down its Thrift server?).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1860492488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1861239995","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1861239995","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1861239995,"node_id":"IC_kwDOACaFSM5u8ES7","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-18T18:14:44Z","updated_at":"2023-12-18T18:14:44Z","author_association":"CONTRIBUTOR","body":"> It's possible that there could be a race condition between terminating a pod and reducing the number of replicas in the deployment. I'm wondering if we might need an RPC that tells the server to not accept any new work (shutting down its Thrift server?).\r\n\r\nI think we could defer making decision on an RPC to handle that case.  Race conditions will always be there when making decisions based on metrics that lag.  A goal could be to choose pods to shutdown in a way that is better than randomly choosing on average.    There may still be false positives, just want less false positives than choosing randomly.  Whatever end to end strategy is used could try to determine how much it improves over randomly choosing as a way of evaluating how good it is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1861239995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1861258162","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1861258162","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1861258162,"node_id":"IC_kwDOACaFSM5u8Iuy","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-18T18:22:18Z","updated_at":"2023-12-18T18:22:18Z","author_association":"CONTRIBUTOR","body":"> So, it's likely the case then that we will need to allow users to specify additional tags at server startup to emit with the metrics.\r\n\r\nThat seems generally useful.  Were you thinking that all metrics emitted by an accumulo process would have these user specified tags appended?  How are you thinking user would specify these tags?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1861258162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862002939","html_url":"https://github.com/apache/accumulo/pull/4080#issuecomment-1862002939","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4080","id":1862002939,"node_id":"IC_kwDOACaFSM5u--j7","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T02:27:43Z","updated_at":"2023-12-19T02:27:43Z","author_association":"CONTRIBUTOR","body":"> I think this looks good, could maybe simplify the test json as a I made a comment about.\r\n\r\nI simplified the json and added a runtime exception for the stopCompactorGroup test.\r\n \r\n> Did you consider moving to having each test method run its own mini accumulo instead of stoppping compactors between test?\r\n\r\nI did but I decided against that because spinning compaction resources up and down against a long-lived cluster is closer to a \"real-life\" test scenario then testing the compaction services in isolation. \r\n\r\nAlso, an extra step is required for tests that change the compaction resources mid-test for the AccumuloClusterHarness.\r\n\r\nYou must cast the config in order to access the groups directly and change their values.\r\n\r\n```\r\nMiniAccumuloClusterImpl mini = (MiniAccumuloClusterImpl) getCluster();\r\nmini.getConfig().getClusterServerConfiguration().addCompactorResourceGroup(\"group1\", 4);\r\nmini.getClusterControl().start(ServerType.COMPACTOR);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862002939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862091299","html_url":"https://github.com/apache/accumulo/issues/3803#issuecomment-1862091299","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3803","id":1862091299,"node_id":"IC_kwDOACaFSM5u_UIj","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T04:17:15Z","updated_at":"2023-12-19T04:17:15Z","author_association":"CONTRIBUTOR","body":"A top level `compaction`prefix has been added and compaction related `tserver` prefixes have started to be deprecated and removed.\r\n\r\nOne consideration is if the property is mutable or not and how that might change property groups.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862091299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862263995","html_url":"https://github.com/apache/accumulo/pull/4082#issuecomment-1862263995","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4082","id":1862263995,"node_id":"IC_kwDOACaFSM5u_-S7","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T07:40:17Z","updated_at":"2023-12-19T07:40:17Z","author_association":"MEMBER","body":"I think I addressed all the comments. I have a follow-up to this in PR #4085 that also addresses issue #4061, and created issue #4086 as another follow-on, that is only loosely related.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862263995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862316193","html_url":"https://github.com/apache/accumulo/issues/4073#issuecomment-1862316193","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4073","id":1862316193,"node_id":"IC_kwDOACaFSM5vALCh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T08:24:04Z","updated_at":"2023-12-19T08:24:04Z","author_association":"MEMBER","body":"I definitely saw some custom code in here that wasn't using the more up-to-date logic that other classes were using to interact with the metadata table. It looks like this class is removed in the elasticity branch, though, so it may not be worth touching if it's going away. I'm curious what happened to it in the elasticity branch that made it possible to remove, though. Maybe that's possible in the main branch as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862316193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862342040","html_url":"https://github.com/apache/accumulo/issues/4055#issuecomment-1862342040","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4055","id":1862342040,"node_id":"IC_kwDOACaFSM5vARWY","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T08:42:31Z","updated_at":"2023-12-19T08:42:31Z","author_association":"MEMBER","body":"This is not surprising, because MiniAccumuloClusterControl was written as a MiniAccumuloCluster implementation of the more generic ClusterControl that was intended to create an abstraction layer so that ITs could be written to run on an existing standalone cluster, or on mini, and be relatively agnostic to which they were run on. I believe at the time it was created, mini only used one server of each type, so some of the options that were added to support a larger standalone cluster (like using the hostname) were left unimplemented in the mini implementation, and don't really apply (since the hostname for all mini is effectively \"localhost\").\r\n\r\nMost of our tests do not really use these features, and I do not know if the standalone capability works. I suspect it hasn't really worked since prior to 2.0, because that was the last time I remember anybody trying to use it. A lot of this is cruft that has stuck around as previous attempts to add features to our integration tests, but time consuming to rip out or polish up to simplify the ITs. In addition to the cluster control stuff, there is the AccumuloCluster interface, and the AccumuloClusterHarness/MiniClusterHarness, and the AccumuloITBase and its various subclasses, SharedMiniClusterBase and ConfigurableMacBase, that most of the ITs extend. Very few of them call any of the ClusterControl stuff at all.\r\n\r\nI would probably advocate for aggressive ripping out and simplifying, rather than trying to implement all the features of each of these framework classes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862342040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862381481","html_url":"https://github.com/apache/accumulo/issues/4012#issuecomment-1862381481","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4012","id":1862381481,"node_id":"IC_kwDOACaFSM5vAa-p","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T09:10:12Z","updated_at":"2023-12-19T09:10:12Z","author_association":"MEMBER","body":"OBE by recent changes. There is no comment at the linked line. The file is a fully qualified absolute path, if that helps.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862381481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862390897","html_url":"https://github.com/apache/accumulo/issues/3991#issuecomment-1862390897","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3991","id":1862390897,"node_id":"IC_kwDOACaFSM5vAdRx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T09:16:19Z","updated_at":"2023-12-19T09:16:19Z","author_association":"MEMBER","body":"This also relates to idle stop #4076 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862390897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862503809","html_url":"https://github.com/apache/accumulo/issues/3892#issuecomment-1862503809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3892","id":1862503809,"node_id":"IC_kwDOACaFSM5vA42B","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T10:29:37Z","updated_at":"2023-12-19T10:29:37Z","author_association":"MEMBER","body":"The exception message is not a lie.\r\n\r\nThis was done in #1551 and a *lot* of care was taken to make sure that users were minimally impacted. We deprecated the old method, and added a new one that used a Set instead of an array. All of our code used the Set version. We made it a default method to warn exactly once about the deprecation, and then to call the user's implementation for the array version, in case they hadn't updated their implementation. We also made the array version a default method so that new implementations did not need to implement the deprecated method at all, and could choose to only implement its replacement. All the javadocs were updated to point users towards the replacement, and the warning was given to make sure users were notified, but not spammed. Since both methods had default implementations in the interface, the only way you would have gotten the error message is if you created an implementation that did not override either of the two methods. That could have happened with a typo (but that's why it's good to use `@Override` annotations, so you can get compile time checks on that). If you overrode the old method, you would also have gotten a compile-time deprecation warning.\r\n\r\nLater, before 2.1.0 was actually released, we decided that the whole class should be deprecated. So, we then took great care to make sure that the old interface extended the new one, and we deprecated the entire class. A deprecation javadoc was added which pointed to the new interface, which has only a Set version of the choose method.\r\n\r\nWe then documented the new SPI, with a link directly to the change to make the VolumeChooser SPI, in our release notes in the \"major improvements\" section. The VolumeChooser PR was the very first one linked.\r\n\r\nSo, the only way I can think that a user would be negatively impacted by this is if they did not read the release notes, chose to write a *new* VolumeChooser implementation against the old interface (one written for a previous version would have required the choose method to be implemented), chose to ignore all the deprecation warnings during development of their custom VolumeChooser without reading any of the documentation or following any of the upstream development activity, didn't read any of the javadocs, and then either implemented their own choose method that took a Set and called the old method that took an array, or if they didn't implement either method on the interface at all.\r\n\r\nIf a user actually got that far, I'm not sure we can do anything else for them. I'm closing this issue. I don't think there's anything more we can do, or should have done.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862503809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862545734","html_url":"https://github.com/apache/accumulo/issues/3981#issuecomment-1862545734","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3981","id":1862545734,"node_id":"IC_kwDOACaFSM5vBDFG","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T10:58:11Z","updated_at":"2023-12-19T10:58:11Z","author_association":"MEMBER","body":"The way this is written is very confusing to me. I read it as moving properties from Property.java to accumulo.properties. However, Property.java is just an enum that helps us store property documentation, default values, and more that help us read the properties from an accumulo.properties file (or from properties stored elsewhere on the system). So, they aren't separate things... they go together. The accumulo.properties file you linked to is merely a reference for a relatively minimal implementation.\r\n\r\nI would not want the minimal implementation bloated with extraneous configs. But, I'm not sure if that's what you're suggesting, or if you're suggesting something else.\r\n\r\nThere are some elements of this that I'd be in favor of:\r\n* Changing the default values to an empty string\r\n* Making sure the properties are referenced by the compaction code instead of only placed for documentation and not actually retrieved via the enum references\r\n\r\nThere are also some related things that could help here:\r\n* Use \"general.custom.\" or \"table.custom.\" prefixes for pluggable implementations that provide complex, non-default features (see VolumeChooser subclass configs, or other SPIs that behave similarly)\r\n* Relax our constraint that non-core properties be prefixed with \"general.custom.\" prefix, or \"table.custom.\" prefix to be stored in our config files (but this means we need to be more rigid about the property namespace we do expect to be reserved for built-in properties)\r\n* Combine complex config into a single (possibly optional) property for customization (AWS uses this kind of pattern [extensively in its APIs](https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-volume.html))\r\n* Wrap complex features into a pluggable component; users can choose to hard-code in the complexity, or make their implementation of that component customizable through config; we choose a simple implementation that requires no config (see also VolumeChooser implementations for a similar pattern, or our general context class loader factory, for an even simpler implementation of this).\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862545734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862671585","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1862671585","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1862671585,"node_id":"IC_kwDOACaFSM5vBhzh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T12:28:49Z","updated_at":"2023-12-19T12:28:49Z","author_association":"CONTRIBUTOR","body":"> > So, it's likely the case then that we will need to allow users to specify additional tags at server startup to emit with the metrics.\r\n> \r\n> That seems generally useful. Were you thinking that all metrics emitted by an accumulo process would have these user specified tags appended? How are you thinking user would specify these tags?\r\n\r\nI was thinkng of a new property, `general.micrometer.tags.additional` or something, that defaults to an empty string and is a user-supplied list of comma-separated `tag=value` pairs. For example:\r\n\r\n```\r\ngeneral.micrometer.tags.additional:pod.name=blah;other.tag=foo\r\n```\r\n\r\nWhen the set of common tags is [initialized](https://github.com/apache/accumulo/blob/elasticity/core/src/main/java/org/apache/accumulo/core/metrics/MetricsUtil.java#L82-L95) for the process, we could just read the property there and add the tags.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862671585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862715538","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1862715538","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1862715538,"node_id":"IC_kwDOACaFSM5vBsiS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T12:59:56Z","updated_at":"2023-12-19T12:59:56Z","author_association":"MEMBER","body":"How about just `general.tags`?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862715538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862794478","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1862794478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1862794478,"node_id":"IC_kwDOACaFSM5vB_zu","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T13:50:15Z","updated_at":"2023-12-19T13:50:15Z","author_association":"CONTRIBUTOR","body":"I'm game for whatever makes the user think that they are providing additional tags. There are a base set which they don't have control over.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1862794478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863321060","html_url":"https://github.com/apache/accumulo/issues/4090#issuecomment-1863321060","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4090","id":1863321060,"node_id":"IC_kwDOACaFSM5vEAXk","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T19:00:35Z","updated_at":"2023-12-19T19:00:35Z","author_association":"CONTRIBUTOR","body":"Would there be an advantage to provide the \"raw\" numbers used in the calculation, say number of files, number of files selected / planned instead of a \"flag\" for no  files selected?  \r\n\r\nThat would provide additional insight and allow post processing / alerting if that was desired.  It would also allow for measuring and tuning by the user to achieve their goals.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863321060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863392615","html_url":"https://github.com/apache/accumulo/pull/4077#issuecomment-1863392615","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4077","id":1863392615,"node_id":"IC_kwDOACaFSM5vER1n","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T19:57:06Z","updated_at":"2023-12-19T19:57:06Z","author_association":"MEMBER","body":"Changed to target 2.1 branch, not main","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863392615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863520830","html_url":"https://github.com/apache/accumulo/issues/4090#issuecomment-1863520830","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4090","id":1863520830,"node_id":"IC_kwDOACaFSM5vExI-","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T21:50:04Z","updated_at":"2023-12-19T21:50:04Z","author_association":"CONTRIBUTOR","body":"> Would there be an advantage to provide the \"raw\" numbers used in the calculation, say number of files, number of files selected / planned instead of a \"flag\" for no files selected?\r\n\r\nYes.   Trying to figure out the best way to do that.  That was what #4091 was opened about.  Thinking that #4089 and #4090 can alert that a problem exists and then will need information to help solve the problem which could be #4091 or something else.  The problem could occur for lots of tablets, so want to avoid dumping lots of detailed information for each tablet when the problem happens.  Need to somehow balance detecting the problem, fixing the problem, and not emitting too much logging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863520830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863528727","html_url":"https://github.com/apache/accumulo/issues/4090#issuecomment-1863528727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4090","id":1863528727,"node_id":"IC_kwDOACaFSM5vEzEX","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T21:57:58Z","updated_at":"2023-12-19T21:57:58Z","author_association":"CONTRIBUTOR","body":"This may be tough - and possibly something not suitable for metrics. Not sure what the right approach would be other than logging.\r\n\r\nTo provide metric(s) that are actionable you may need tablet info - and adding tablet info would drastically increase the cardinality of the metric - it would not be a good candidate for a tag.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863528727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863541240","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1863541240","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1863541240,"node_id":"IC_kwDOACaFSM5vE2H4","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-19T22:09:35Z","updated_at":"2023-12-19T22:09:35Z","author_association":"MEMBER","body":"> I'm game for whatever makes the user think that they are providing additional tags. There are a base set which they don't have control over.\r\n\r\nTo make it clear it's user-provided extra tags, then maybe `general.tags.extra` or `general.tags.user` or `general.metrics.user.tags`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863541240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863958405","html_url":"https://github.com/apache/accumulo/pull/4077#issuecomment-1863958405","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4077","id":1863958405,"node_id":"IC_kwDOACaFSM5vGb-F","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T07:10:30Z","updated_at":"2023-12-20T07:10:30Z","author_association":"MEMBER","body":"It seemed odd that this didn't include changes to InstanceOperations, so I went and looked and it seems we don't have a method to retrieve the non-merged view of the system configuration like we do for namespace and tables. That's a frustrating inconsistency, but it shouldn't be added in a bugfix release. It can be addressed in 3.1, separate from this javadoc update, if we want to add that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1863958405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864522390","html_url":"https://github.com/apache/accumulo/pull/4077#issuecomment-1864522390","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4077","id":1864522390,"node_id":"IC_kwDOACaFSM5vIlqW","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T13:58:49Z","updated_at":"2023-12-20T13:58:49Z","author_association":"MEMBER","body":"> It seemed odd that this didn't include changes to InstanceOperations, so I went and looked and it seems we don't have a method to retrieve the non-merged view of the system configuration like we do for namespace and tables. That's a frustrating inconsistency, but it shouldn't be added in a bugfix release. It can be addressed in 3.1, separate from this javadoc update, if we want to add that.\r\n\r\nYeah, I was also wondering that. Let me know if you think I should open an issue for that","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864522390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864730008","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-1864730008","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":1864730008,"node_id":"IC_kwDOACaFSM5vJYWY","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T15:55:53Z","updated_at":"2023-12-20T15:58:31Z","author_association":"CONTRIBUTOR","body":"Looking into this I learned a few interesting things.\r\n\r\n * In Accumulo 1.x (and 2.x if using the old configs) the default compaction strategy would do [suboptimal compactions](https://github.com/apache/accumulo/blob/8dfb4eb71351b856a398db7d0f75b8ddda85ce3a/server/tserver/src/main/java/org/apache/accumulo/tserver/compaction/DefaultCompactionStrategy.java#L235-L239) if the the tablets files exceeded [this calculation](https://github.com/apache/accumulo/blob/8dfb4eb71351b856a398db7d0f75b8ddda85ce3a/core/src/main/java/org/apache/accumulo/core/conf/AccumuloConfiguration.java#L381-L389).  Suboptimal means not following the compaction ratio, which could lead to the number of rewrites key/values by compactions being quadratic compaction instead of logarithmic.\r\n * The new DefaultCompactionPlanner in Accumulo 2.x never create system compactions that do not follow the compaction ratio.  So it does not look at the config like 1.x did and just create a suboptimal compaction if a tablets files are over the limit.\r\n  * Nothing in 2.x is really using the table.file.max property.  Seems like its only used by the deprecated compaction code.  In 1.x it was also used for merging minor compactions, which were dropped in 2.x.\r\n\r\nWas wondering if the compaction planner in 2.x should also schedule sub optimal compactions.  One reason not to is that it causes compaction threads to be overburdened with suboptimal work which could cause files to build up on other tablets, which could increase the demand for suboptimal compactions possibly spiraling.  1.x code probably should have warned when it did this, if its repeatedly happening its an indication that compaction config needs to be adjusted.  When its repeatedly happening then resources are not being well utilized, using CPU and I/O very inefficiently.  The flipside of inefficient compactions, is that less files make scans more efficient.  However, if compactions are inefficient and as a result all compaction resources are used then files can not be compacted even if there is a desire to compact.\r\n\r\nThis brings up an issue of what to do with the table.file.max property.  Thinking the following is one path\r\n\r\n 1. In 2.x modify the default compaction planner to do suboptimal compactions for compatability with the table.file.max property and log a warning each time it does.\r\n 2. In 2.x add code outside the compaction planner that warns when a tablets files are over tserver.scan.files.open.max and no compactions were scheduled.\r\n 3. In 3.x, maybe deprecate the table.file.max property or rethink it?  One goal behind the property is to allow some tables to have less files for more efficient scans.  The most efficient way to achieve this goal is to lower the compaction ratio for the table rather than adjust table.files.max, so not sure the property serves any useful purpose.\r\n\r\nNot quite sure what to do at the moment, still thinking through it.  Does anyone else have suggestions?  I am going to implement `#2` above for now because when a tablet has more than tserver.scan.files.open.max then scans will start to break.\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864730008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864880535","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-1864880535","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":1864880535,"node_id":"IC_kwDOACaFSM5vJ9GX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T17:40:36Z","updated_at":"2023-12-20T17:40:36Z","author_association":"CONTRIBUTOR","body":"Discussed this with @ctubbsii and we think the following is a good way forward.\r\n\r\n 1. Drop the property in 3.x\r\n 2. Update the documentation in 2.x to explain that the property is only used by deprecated code. Could also deprecate the property in 2.x.  The property should have been deprecated for 2.1.0 since its only used by deprecated code, it was just missed. Document that the property was very inefficient and that compaction ratio is the best way to handle the number of files on a per table basis and mention it was used by merging minor compactions.\r\n 3. Modify the DefaultCompactionStrategy to log a warning when it performs a sub optimal compaction based on table.files.max\r\n 4. Make the new compaction planning code log a warning when no compactions are scheduled for a tablet that has more than tserver.scan.files.open.max files.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1864880535/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865055221","html_url":"https://github.com/apache/accumulo/pull/4097#issuecomment-1865055221","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4097","id":1865055221,"node_id":"IC_kwDOACaFSM5vKnv1","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T19:58:22Z","updated_at":"2023-12-20T19:58:22Z","author_association":"MEMBER","body":"Nice improvement","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865055221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865077687","html_url":"https://github.com/apache/accumulo/pull/4097#issuecomment-1865077687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4097","id":1865077687,"node_id":"IC_kwDOACaFSM5vKtO3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T20:17:27Z","updated_at":"2023-12-20T20:17:27Z","author_association":"CONTRIBUTOR","body":"> Did some napkin math using example values of sortedFiles.size = 10 and maxFilesToCompact = 8.\r\n\r\nYeah the old code required a spread sheet or napkin to verify.  I could not really just look at it and say it was correct.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865077687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865093750","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-1865093750","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":1865093750,"node_id":"IC_kwDOACaFSM5vKxJ2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T20:28:32Z","updated_at":"2023-12-20T20:28:32Z","author_association":"CONTRIBUTOR","body":"Opened #4098 for updating the table.file.max docs in 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865093750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865163068","html_url":"https://github.com/apache/accumulo/issues/4089#issuecomment-1865163068","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4089","id":1865163068,"node_id":"IC_kwDOACaFSM5vLCE8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T21:28:08Z","updated_at":"2023-12-20T21:28:08Z","author_association":"CONTRIBUTOR","body":"Opened #4099 to address logging when compactions are not being planned and a tablet has more files than is allowed for scan.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865163068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865237124","html_url":"https://github.com/apache/accumulo/issues/4090#issuecomment-1865237124","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4090","id":1865237124,"node_id":"IC_kwDOACaFSM5vLUKE","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T22:39:48Z","updated_at":"2023-12-20T22:39:48Z","author_association":"CONTRIBUTOR","body":"> To provide metric(s) that are actionable you may need tablet info - and adding tablet info would drastically increase the cardinality of the metric - it would not be a good candidate for a tag.\r\n\r\nI don't think per tablet information is needed in the metrics system.  Currently we have compaction services that bin tablets to different queues for compactions.  We generate metrics on the number queued and and running for each queue.  If a user sees that the number of queued tablets is too high for  compaction service its an indication that further investigation is needed, but the metrics system does not provide the information needed to solve the question of why too many things are queued.\r\n\r\nThinking along those same lines maybe each compaction service could have another metric for problems. Not sure if we need a metrics for each kinds of problem or just a general problem counter per compaction service.  But this falls into that general idea of binning tablets into different categories and counting those.  If the counts for any category seem off the metric system can not help you figure out why the counts are off, but it does indicate that action is needed.\r\n\r\nBelow is an example of what I am thinking about.  There are two compaction services each with two queues for running compactions.  For each of the queues there are three metrics, the number of compactions currently running, the number queued, and the number that recently ran and failed.  Also each compaction service has a count of the number of tablet where it had a problem planning compactions. This planning problem counter would cover this issue.  I think these are reasonable counters.  When someone sees failed compactions they have to go look at compactor process logs and try to figure out what failed an why.  When someone sees planning failures they need to go look at the manager logs and see what happened.\r\n\r\n| Compaction service | Metric | count\r\n|-|-|-|\r\n| CS1 | small.running | 50 |\r\n| CS1 | small.queued | 500 |\r\n| CS1 | small.failed | 0 |\r\n| CS1 | large.running | 100 |\r\n| CS1 | large.queued | 10000 |\r\n| CS1 | large.failed | 10 |\r\n| CS1 | planning_problems | 20 |\r\n| CS2 | small.running | 30 |\r\n| CS2 | small.queued | 10 |\r\n| CS2 | small.failed | 0 |\r\n| CS2 | large.running | 500 |\r\n| CS2 | large.queued | 400 |\r\n| CS2 | large.failed | 0 |\r\n| CS2 | planning_problems | 0 |\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865237124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865242742","html_url":"https://github.com/apache/accumulo/issues/4100#issuecomment-1865242742","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4100","id":1865242742,"node_id":"IC_kwDOACaFSM5vLVh2","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T22:46:50Z","updated_at":"2023-12-20T22:46:50Z","author_association":"CONTRIBUTOR","body":"I'm working the empty wal utility and its in the same area, I'll to this, it may help with the utility testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865242742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865338588","html_url":"https://github.com/apache/accumulo/pull/4102#issuecomment-1865338588","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4102","id":1865338588,"node_id":"IC_kwDOACaFSM5vLs7c","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T01:10:11Z","updated_at":"2023-12-21T01:10:11Z","author_association":"MEMBER","body":"I was looking at some of this crypto code, and I think I want to do some polishing up of some of the internal out-of-box implementations. That's a low-priority, time-consuming task for me right now, but I saw this low-hanging fruit, and figured I would push it up.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865338588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865422980","html_url":"https://github.com/apache/accumulo/pull/4092#issuecomment-1865422980","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4092","id":1865422980,"node_id":"IC_kwDOACaFSM5vMBiE","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T03:25:18Z","updated_at":"2023-12-21T03:25:18Z","author_association":"CONTRIBUTOR","body":"Switching this to draft until the proper changes are made for the defaultCompactionService behaviors","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1865422980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866441397","html_url":"https://github.com/apache/accumulo/issues/4066#issuecomment-1866441397","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4066","id":1866441397,"node_id":"IC_kwDOACaFSM5vP6K1","user":{"login":"rsingh433","id":74160026,"node_id":"MDQ6VXNlcjc0MTYwMDI2","avatar_url":"https://avatars.githubusercontent.com/u/74160026?v=4","gravatar_id":"","url":"https://api.github.com/users/rsingh433","html_url":"https://github.com/rsingh433","followers_url":"https://api.github.com/users/rsingh433/followers","following_url":"https://api.github.com/users/rsingh433/following{/other_user}","gists_url":"https://api.github.com/users/rsingh433/gists{/gist_id}","starred_url":"https://api.github.com/users/rsingh433/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsingh433/subscriptions","organizations_url":"https://api.github.com/users/rsingh433/orgs","repos_url":"https://api.github.com/users/rsingh433/repos","events_url":"https://api.github.com/users/rsingh433/events{/privacy}","received_events_url":"https://api.github.com/users/rsingh433/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T15:05:14Z","updated_at":"2023-12-21T15:05:14Z","author_association":"CONTRIBUTOR","body":"I will look at this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866441397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866453423","html_url":"https://github.com/apache/accumulo/issues/4094#issuecomment-1866453423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4094","id":1866453423,"node_id":"IC_kwDOACaFSM5vP9Gv","user":{"login":"rsingh433","id":74160026,"node_id":"MDQ6VXNlcjc0MTYwMDI2","avatar_url":"https://avatars.githubusercontent.com/u/74160026?v=4","gravatar_id":"","url":"https://api.github.com/users/rsingh433","html_url":"https://github.com/rsingh433","followers_url":"https://api.github.com/users/rsingh433/followers","following_url":"https://api.github.com/users/rsingh433/following{/other_user}","gists_url":"https://api.github.com/users/rsingh433/gists{/gist_id}","starred_url":"https://api.github.com/users/rsingh433/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rsingh433/subscriptions","organizations_url":"https://api.github.com/users/rsingh433/orgs","repos_url":"https://api.github.com/users/rsingh433/repos","events_url":"https://api.github.com/users/rsingh433/events{/privacy}","received_events_url":"https://api.github.com/users/rsingh433/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T15:10:57Z","updated_at":"2023-12-21T15:10:57Z","author_association":"CONTRIBUTOR","body":"I will look at this.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866453423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866738346","html_url":"https://github.com/apache/accumulo/issues/4076#issuecomment-1866738346","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4076","id":1866738346,"node_id":"IC_kwDOACaFSM5vRCqq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T18:16:46Z","updated_at":"2023-12-21T18:16:46Z","author_association":"CONTRIBUTOR","body":"#4078 has been updated to add the user tags property, add a general idle interval property which drives the incrementing of the idle metric, and removal of the idle stop feature.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866738346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866779826","html_url":"https://github.com/apache/accumulo/issues/4106#issuecomment-1866779826","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4106","id":1866779826,"node_id":"IC_kwDOACaFSM5vRMyy","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T18:44:26Z","updated_at":"2023-12-21T18:44:26Z","author_association":"MEMBER","body":"Fixed via #4104","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866779826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866784573","html_url":"https://github.com/apache/accumulo/pull/4105#issuecomment-1866784573","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4105","id":1866784573,"node_id":"IC_kwDOACaFSM5vRN89","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T18:49:09Z","updated_at":"2023-12-21T18:49:09Z","author_association":"CONTRIBUTOR","body":"With 4.0.0, trying to start Accumulo fails with the following:\r\n\r\n```\r\nException in thread \"main\" java.lang.NoClassDefFoundError: com/lmax/disruptor/SequenceReportingEventHandler\r\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n        at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1017)\r\n        at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:862)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:760)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:681)\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:639)\r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:525)\r\n        at org.apache.logging.log4j.core.async.AsyncLoggerDisruptor.start(AsyncLoggerDisruptor.java:125)\r\n        at org.apache.logging.log4j.core.async.AsyncLoggerContext.start(AsyncLoggerContext.java:78)\r\n        at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:154)\r\n        at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:46)\r\n        at org.apache.logging.log4j.LogManager.getContext(LogManager.java:197)\r\n        at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getContext(AbstractLoggerAdapter.java:136)\r\n        at org.apache.logging.slf4j.Log4jLoggerFactory.getContext(Log4jLoggerFactory.java:58)\r\n        at org.apache.logging.log4j.spi.AbstractLoggerAdapter.getLogger(AbstractLoggerAdapter.java:46)\r\n        at org.apache.logging.slf4j.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:32)\r\n        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:426)\r\n        at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:451)\r\n        at org.apache.accumulo.start.Main.<clinit>(Main.java:38)\r\n\r\n```\r\n\r\nThat class is not in the disruptor 4.0.0 jar, it does exist in 3.4.4","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866784573/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866794761","html_url":"https://github.com/apache/accumulo/pull/4105#issuecomment-1866794761","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4105","id":1866794761,"node_id":"IC_kwDOACaFSM5vRQcJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T18:59:18Z","updated_at":"2023-12-21T18:59:18Z","author_association":"MEMBER","body":"Turns out version 4 isn't yet supported and it's a known issue. https://github.com/apache/logging-log4j2/issues/1829\r\nI guess we don't use it for the integration tests, which all passed, so I didn't notice.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866794761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866798882","html_url":"https://github.com/apache/accumulo/pull/4098#issuecomment-1866798882","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4098","id":1866798882,"node_id":"IC_kwDOACaFSM5vRRci","user":{"login":"FineAndDandy","id":7751180,"node_id":"MDQ6VXNlcjc3NTExODA=","avatar_url":"https://avatars.githubusercontent.com/u/7751180?v=4","gravatar_id":"","url":"https://api.github.com/users/FineAndDandy","html_url":"https://github.com/FineAndDandy","followers_url":"https://api.github.com/users/FineAndDandy/followers","following_url":"https://api.github.com/users/FineAndDandy/following{/other_user}","gists_url":"https://api.github.com/users/FineAndDandy/gists{/gist_id}","starred_url":"https://api.github.com/users/FineAndDandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FineAndDandy/subscriptions","organizations_url":"https://api.github.com/users/FineAndDandy/orgs","repos_url":"https://api.github.com/users/FineAndDandy/repos","events_url":"https://api.github.com/users/FineAndDandy/events{/privacy}","received_events_url":"https://api.github.com/users/FineAndDandy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T19:03:34Z","updated_at":"2023-12-21T19:03:34Z","author_association":"CONTRIBUTOR","body":"I would love if instead of deprecating this we actually made it an imperative to compact.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866798882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866882482","html_url":"https://github.com/apache/accumulo/pull/4092#issuecomment-1866882482","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4092","id":1866882482,"node_id":"IC_kwDOACaFSM5vRl2y","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T20:19:45Z","updated_at":"2023-12-21T20:19:45Z","author_association":"CONTRIBUTOR","body":"Removed some earlier changes and added test case for the default compaction service to ensure that user set properties correctly overrode default values.\r\n\r\nNow this PR does not change the property lookup logic in the DefaultCompactionPlanner. It does replace a hardcoded maxOpen value with a default value reference, ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1866882482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867058320","html_url":"https://github.com/apache/accumulo/issues/4111#issuecomment-1867058320","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4111","id":1867058320,"node_id":"IC_kwDOACaFSM5vSQyQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-21T23:46:20Z","updated_at":"2023-12-21T23:46:20Z","author_association":"CONTRIBUTOR","body":"On test was added in #4110 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867058320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867267712","html_url":"https://github.com/apache/accumulo/issues/3693#issuecomment-1867267712","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3693","id":1867267712,"node_id":"IC_kwDOACaFSM5vTD6A","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T05:44:34Z","updated_at":"2023-12-22T05:44:34Z","author_association":"CONTRIBUTOR","body":"#4113 contains the last change for this GC feature based on user feedback so I'm linking this issue to be closed by that PR.\r\n\r\n@ctubbsii, I would still prefer to keep the experimental property set to disabled in 2.1.3 due to the limited amount of user feedback on the feature.\r\n\r\nThere have been a decent amount of changes in 2.1.3, so if this feature is really desired in 2.1.x I would like to push the enabling of this property to 2.1.4 if possible. \r\n\r\nIf we enable this property in 2.1.4, then I think removing the property in either a 2.2.x or 3.1.x release is perfectly fine.\r\n\r\nCurrently, the property is enabled by default in the `main` branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867267712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867796631","html_url":"https://github.com/apache/accumulo/pull/4110#issuecomment-1867796631","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4110","id":1867796631,"node_id":"IC_kwDOACaFSM5vVFCX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T15:10:43Z","updated_at":"2023-12-22T15:10:43Z","author_association":"CONTRIBUTOR","body":"> LGTM, do you think it's worth adding this test to main as well?\r\n\r\nYeah that would be good may be able to add this to 2.1 since it has external compactions.  I noticed the need for this while working on #4109, but did not want to include it in that PR so pulled it out.  I will leave this PR open until I have a chance to look into moving it back.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867796631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867826724","html_url":"https://github.com/apache/accumulo/pull/4110#issuecomment-1867826724","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4110","id":1867826724,"node_id":"IC_kwDOACaFSM5vVMYk","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T15:40:39Z","updated_at":"2023-12-22T15:40:55Z","author_association":"CONTRIBUTOR","body":"> > LGTM, do you think it's worth adding this test to main as well?\r\n> \r\n> Yeah that would be good may be able to add this to 2.1 since it has external compactions. I noticed the need for this while working on #4109, but did not want to include it in that PR so pulled it out. I will leave this PR open until I have a chance to look into moving it back.\r\n\r\nI looked at moving it back to main and it wasn't too bad, the big thing is the constructor changed for `ExternalCompactionMetadata` so that would have to be resolved. I didn't peak at 2.1 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867826724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867905255","html_url":"https://github.com/apache/accumulo/issues/4068#issuecomment-1867905255","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4068","id":1867905255,"node_id":"IC_kwDOACaFSM5vVfjn","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T17:08:03Z","updated_at":"2023-12-22T17:08:03Z","author_association":"CONTRIBUTOR","body":"The AccumuloStore will also need to be updated that was added in #4049 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867905255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867937514","html_url":"https://github.com/apache/accumulo/pull/4098#issuecomment-1867937514","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4098","id":1867937514,"node_id":"IC_kwDOACaFSM5vVnbq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T17:49:58Z","updated_at":"2023-12-22T17:49:58Z","author_association":"CONTRIBUTOR","body":"> I would love if instead of deprecating this we actually made it an imperative to compact.\r\n\r\nI have been thinking about how this could be achieved efficiently.  The way the old code worked for max files was so inefficient.  The compaction ratio efficiently reduces the number of files, but it is hard to reason about the number of files it will produce.\r\n\r\nOne problem with the compaction ratio is that the total number of files you end up with in a tablet depends on the smallest expected files  For example if really small files are arriving in a tablet, like 1000 bytes. Then you will end up with 3x1K files, 3x3K files, 3x9K files, etc.  So starting at 1K with a compaction ratio of 3, you end up with 20 levels or 60 total files before getting to 1G. So with the current compaction ratio the number of levels and total number files you end up with depends s on the smallest file arriving. \r\n\r\nFor larger files we want a higher compaction ratio, but maybe we don't want that for smaller files.  This led me to wonder about making the compaction ratio a function of the file size.  Something like the following that more aggressively reduces the number of small files, while still doing logarithmic work.\r\n\r\n```java\r\n      // function that given a file size computes a compaction ratio\r\n      Function<Long,Double> ratioFunction = size -> {\r\n       if(size < 1_000) {\r\n            return 1.0;\r\n        } else if(size < 10_000) {\r\n          return 1.25;\r\n        } else if(size < 100_000) {\r\n          return 1.5;\r\n        }else if(size < 1_000_000) {\r\n          return 1.75;\r\n        } else if(size < 10_000_000) {\r\n          return 2.0;\r\n        } else if(size < 100_000_000) {\r\n          return 2.25;\r\n        } else {\r\n          return 3.0;\r\n        }\r\n      };\r\n```\r\n\r\nTying to figure out if we could generate the above function given a target number of max files and expected max size that accomodates any minimum file size.  So a user does not specify the above function, but one is generated based on desired max files and expected max file size.  If this could be done, it could be implemented as another compaction planner for 2.x.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867937514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867971146","html_url":"https://github.com/apache/accumulo/issues/4045#issuecomment-1867971146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4045","id":1867971146,"node_id":"IC_kwDOACaFSM5vVvpK","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T18:36:06Z","updated_at":"2023-12-22T18:36:06Z","author_association":"MEMBER","body":"Bit of an update on this. It looks like the bug (as far as I can tell this is not the expected behavior) is not caused by the scenario that I outline above. It looks like `setKeepOffline(true)` in the `ImportConfiguration` builder does not create the new table in an offline state as it is supposed to but rather the new table gets created and is stuck in the `NEW` table state. This can be demonstrated by adding the following line to `ImportExportIT.testExportImportOffline()` which uses `setKeepOffline(true)` when importing to a new table:\r\n\r\n```java\r\n// wait for the new table created by importTable to leave the NEW table state\r\nWait.waitFor(() -> getServerContext().getTableState(TableId.of(tableId)) != TableState.NEW, SECONDS.toMillis(30),\r\n         SECONDS.toMillis(1), \"Table stuck in NEW table state\");\r\n```\r\n\r\nAdding that after this part of the IT will cause an exception:\r\nhttps://github.com/apache/accumulo/blob/67fd967415612ab0770b422a5b24430655275946/test/src/main/java/org/apache/accumulo/test/ImportExportIT.java#L285-L291","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867971146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867992731","html_url":"https://github.com/apache/accumulo/issues/4114#issuecomment-1867992731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4114","id":1867992731,"node_id":"IC_kwDOACaFSM5vV06b","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T18:58:20Z","updated_at":"2023-12-22T18:58:20Z","author_association":"CONTRIBUTOR","body":"This could be broken down into multiple PRs potentially as well if it is simpler to convert one operation at a time to be conditional.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867992731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867997495","html_url":"https://github.com/apache/accumulo/issues/4107#issuecomment-1867997495","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4107","id":1867997495,"node_id":"IC_kwDOACaFSM5vV2E3","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T19:05:35Z","updated_at":"2023-12-22T19:05:35Z","author_association":"CONTRIBUTOR","body":"Using `List<Pair<>>` allows duplicate keys.  However looking at the code its given a Map, so there would not be duplicate keys in the source data that is used to create the ` List<Pair<>>`.  Seems like converting it to a map would be fine.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1867997495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868240929","html_url":"https://github.com/apache/accumulo/pull/4112#issuecomment-1868240929","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4112","id":1868240929,"node_id":"IC_kwDOACaFSM5vWxgh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-23T08:27:51Z","updated_at":"2023-12-23T08:27:51Z","author_association":"MEMBER","body":"Reverted this in a12f5179cecb1d7ee91879729e6976d5e389a3e9 ; it's OBE with reapplying #4092 in #4117","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868240929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868241382","html_url":"https://github.com/apache/accumulo/pull/4092#issuecomment-1868241382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4092","id":1868241382,"node_id":"IC_kwDOACaFSM5vWxnm","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-23T08:30:08Z","updated_at":"2023-12-23T08:30:08Z","author_association":"MEMBER","body":"I reverted this in d4a7a8984305306f3f0a4c594f64634cd65114a9 in favor of #4117, which keeps all the changes in this #4092 but uses SiteConfiguration instead of ConfigurationCopy to test overrides of system defaults, but without #4112 (which is OBE without the changes to ConfigurationCopy).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868241382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868255559","html_url":"https://github.com/apache/accumulo/pull/4117#issuecomment-1868255559","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4117","id":1868255559,"node_id":"IC_kwDOACaFSM5vW1FH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-23T09:47:55Z","updated_at":"2023-12-23T09:47:55Z","author_association":"MEMBER","body":"@ddanielr This should be merged into 2.1 only if whoever merges it in is prepared to subsequently merge the updated 2.1 into main. This will reapply #4092, which I reverted because of the non-trivial merge conflicts trying to merge into main \r\n from 2.1 and because of the issues with SiteConfiguration/ConfigurationCopy mentioned above (and in Slack), which I've already fixed in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868255559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868538201","html_url":"https://github.com/apache/accumulo/pull/4098#issuecomment-1868538201","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4098","id":1868538201,"node_id":"IC_kwDOACaFSM5vX6FZ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-24T15:08:40Z","updated_at":"2023-12-24T15:09:10Z","author_association":"MEMBER","body":"`Math.max(1,Math.min(3,1+Math.floor(Math.log(size)/Math.log(10)-2)*.25))`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868538201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868539583","html_url":"https://github.com/apache/accumulo/issues/4107#issuecomment-1868539583","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4107","id":1868539583,"node_id":"IC_kwDOACaFSM5vX6a_","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-24T15:15:30Z","updated_at":"2023-12-24T15:16:24Z","author_association":"MEMBER","body":"@keith-turner All of the replacements code used to be a List of pairs, which did allow duplicates, but duplicates don't make sense here. You can't have a volume replaced by two separate volumes. That would be chaos. So, I changed it all to a map in #4103 , but I had to keep this a list of pairs in this case, because GSon threw an error in the test when deserializing the map. That's why the code passed into this is a map. Previously, it was also a list of pairs.\r\n\r\nThis serialization code doesn't exist in the main branch, so it's new in elasticity. I'm not sure what is causing the GSon error during deserialization, and I'm not sure why serialization is needed in the elasticity branch when it's not needed in the main branch. We can't make this less convoluted until the deserialization error is fixed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1868539583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1869621107","html_url":"https://github.com/apache/accumulo/issues/4094#issuecomment-1869621107","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4094","id":1869621107,"node_id":"IC_kwDOACaFSM5vcCdz","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T15:37:08Z","updated_at":"2023-12-26T15:37:08Z","author_association":"CONTRIBUTOR","body":"To illustrate the issue I create a clone and then list the metadata files.  The original table is tableA (id=1), the clone is cloneA (id=5).  The resulting files for the clone look like\r\n```\r\n5;0020 file:hdfs://localhost:8020/accumulo/tables/1/t-000004d/A0000009.rf\r\n```\r\nIf the table id in pulled from the file path, it would show id=1, the file really belongs to id=5. Both tableA and  cloneA are \"sharing\" the file. If cloneA (id=5) is compacted, new files will be created under the id=5 directory.\r\n\r\n<details>\r\n  <summary>Additional listings</summary>\r\n\r\nOutput of tables -ls:\r\n\r\n```\r\n> tables -ls\r\naccumulo.metadata    =>        !0\r\naccumulo.root        =>        +r\r\naccumulo.replication =>      +rep\r\ntableA               =>         1\r\ntableB               =>         2\r\ntableC               =>         3\r\ntableD               =>         4\r\ncloneA               =>         5\r\n```\r\n\r\nListing the metadata files:\r\n```\r\n> scan -np -t accumulo.metadata -c file\r\n1;0020 file:hdfs://localhost:8020/accumulo/tables/1/t-000004d/A0000009.rf []\t299,21\r\n1;0040 file:hdfs://localhost:8020/accumulo/tables/1/t-000004e/A0000008.rf []\t296,20\r\n1;0060 file:hdfs://localhost:8020/accumulo/tables/1/t-000004f/A000000f.rf []\t298,20\r\n1;0080 file:hdfs://localhost:8020/accumulo/tables/1/t-000004g/A000000h.rf []\t303,20\r\n1< file:hdfs://localhost:8020/accumulo/tables/1/default_tablet/A000000e.rf []\t288,19\r\n2;0020 file:hdfs://localhost:8020/accumulo/tables/2/t-000004h/A000000i.rf []\t291,21\r\n...\r\n4< file:hdfs://localhost:8020/accumulo/tables/4/default_tablet/A0000016.rf []\t292,19\r\n5;0020 file:hdfs://localhost:8020/accumulo/tables/1/t-000004d/A0000009.rf []\t299,21\r\n5;0040 file:hdfs://localhost:8020/accumulo/tables/1/t-000004e/A0000008.rf []\t296,20\r\n5;0060 file:hdfs://localhost:8020/accumulo/tables/1/t-000004f/A000000f.rf []\t298,20\r\n5;0080 file:hdfs://localhost:8020/accumulo/tables/1/t-000004g/A000000h.rf []\t303,20\r\n5< file:hdfs://localhost:8020/accumulo/tables/1/default_tablet/A000000e.rf []\t288,19\r\n```\r\n</details>\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1869621107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1869803876","html_url":"https://github.com/apache/accumulo/pull/4096#issuecomment-1869803876","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4096","id":1869803876,"node_id":"IC_kwDOACaFSM5vcvFk","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T22:35:14Z","updated_at":"2023-12-26T22:35:14Z","author_association":"CONTRIBUTOR","body":"The build failed with a dependency problem\r\n```\r\n[ERROR] Used undeclared dependencies found:\r\n[ERROR]    org.apache.commons:commons-configuration2:jar:2.9.0:compile\r\n```\r\nThe dependency needs to be added to the ./shell/pom.xml file.  The version is declared in the parent pom, so:\r\n```\r\n<dependency>\r\n     <groupId>org.apache.commons</groupId>\r\n     <artifactId>commons-configuration2</artifactId>\r\n</dependency>\r\n```\r\n\r\nshould be sufficient,","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1869803876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1871309629","html_url":"https://github.com/apache/accumulo/pull/4110#issuecomment-1871309629","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4110","id":1871309629,"node_id":"IC_kwDOACaFSM5vies9","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-28T16:11:52Z","updated_at":"2023-12-28T16:11:52Z","author_association":"CONTRIBUTOR","body":"@keith-turner I made the necessary changes for adding this test to 2.1 in #4119. \r\nThe changes are pretty minor overall.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1871309629/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1871477219","html_url":"https://github.com/apache/accumulo/issues/4068#issuecomment-1871477219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4068","id":1871477219,"node_id":"IC_kwDOACaFSM5vjHnj","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-28T20:42:06Z","updated_at":"2023-12-28T20:42:06Z","author_association":"MEMBER","body":"I would like to work on this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1871477219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1874689908","html_url":"https://github.com/apache/accumulo/pull/4125#issuecomment-1874689908","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4125","id":1874689908,"node_id":"IC_kwDOACaFSM5vvX90","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-02T23:40:30Z","updated_at":"2024-01-02T23:40:30Z","author_association":"CONTRIBUTOR","body":"These changes are causing `MiniAccumuloClusterTest.test()` to fail:\r\n\r\nIt may be the changes are highlighting a real problem with mini - or it could be the changes in this PR.  I have not had time dig further.\r\n\r\nThe IllegalStateException is happening in the manager:\r\n\r\n```\r\njava.lang.IllegalStateException: Unexpected lock type recovered. Expected write lock, but recovered read lock. Lock ID: [53, 57, 57, 98, 101, 51, 101, 49, 52, 52, 55, 51, 99, 52, 55, 99]\r\n        at org.apache.accumulo.manager.tableOps.Utils.getLock(Utils.java:180) ~[classes/:?]\r\n        at org.apache.accumulo.manager.tableOps.Utils.unreserveTable(Utils.java:112) ~[classes/:?]\r\n        at org.apache.accumulo.manager.tableOps.create.FinishCreateTable.call(FinishCreateTable.java:63) ~[classes/:?]\r\n        at org.apache.accumulo.manager.tableOps.create.FinishCreateTable.call(FinishCreateTable.java:35) ~[classes/:?]\r\n        at org.apache.accumulo.manager.tableOps.TraceRepo.call(TraceRepo.java:60) ~[classes/:?]\r\n        at org.apache.accumulo.core.fate.Fate$TransactionRunner.run(Fate.java:100) [classes/:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [classes/:?]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [classes/:?]\r\n        at java.base/java.lang.Thread.run(Thread.java:829) [?:?]\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1874689908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875649012","html_url":"https://github.com/apache/accumulo/pull/4121#issuecomment-1875649012","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4121","id":1875649012,"node_id":"IC_kwDOACaFSM5vzCH0","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T16:34:29Z","updated_at":"2024-01-03T16:35:41Z","author_association":"CONTRIBUTOR","body":"Does this set up a merge conflict with #4126 ?  Not necessarily a problem more of something to watch out for depending on the merge order.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875649012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875652299","html_url":"https://github.com/apache/accumulo/pull/4121#issuecomment-1875652299","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4121","id":1875652299,"node_id":"IC_kwDOACaFSM5vzC7L","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T16:36:57Z","updated_at":"2024-01-03T16:36:57Z","author_association":"MEMBER","body":"> Does this set up a merge conflict with #4126 ? Not necessarily a problem more of something to watch out for depending on the merge order.\r\n\r\nYea looks like there is some overlap but shouldn't be too much of a process to resolve.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875652299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875768694","html_url":"https://github.com/apache/accumulo/issues/4075#issuecomment-1875768694","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4075","id":1875768694,"node_id":"IC_kwDOACaFSM5vzfV2","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T18:09:36Z","updated_at":"2024-01-03T18:09:36Z","author_association":"MEMBER","body":"I would like to work on this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875768694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875896746","html_url":"https://github.com/apache/accumulo/pull/4098#issuecomment-1875896746","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4098","id":1875896746,"node_id":"IC_kwDOACaFSM5vz-mq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T19:59:41Z","updated_at":"2024-01-03T19:59:41Z","author_association":"CONTRIBUTOR","body":"Decided to not deprecate the table.file.max property in favor of #4127.  However not going to close this PR for now, the changes to make all the test stop using the table.file.max prop in this PR still seem like good changes to make.  So plan to make this no longer deprecate the prop, but still remove the unnecessary use of the prop in all of the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875896746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875913970","html_url":"https://github.com/apache/accumulo/issues/3935#issuecomment-1875913970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3935","id":1875913970,"node_id":"IC_kwDOACaFSM5v0Czy","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T20:14:13Z","updated_at":"2024-01-03T20:14:13Z","author_association":"CONTRIBUTOR","body":"Another useful test may be to create a table w/ lots of tablet, clone and truncate it. This simulates the situation where the user wants to create a copy of a range of a large table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1875913970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876094562","html_url":"https://github.com/apache/accumulo/pull/4125#issuecomment-1876094562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4125","id":1876094562,"node_id":"IC_kwDOACaFSM5v0u5i","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T23:12:23Z","updated_at":"2024-01-03T23:12:23Z","author_association":"CONTRIBUTOR","body":"Was the cause of the failure in `MiniAccumuloClusterTest.test()` found?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876094562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876108809","html_url":"https://github.com/apache/accumulo/pull/4125#issuecomment-1876108809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4125","id":1876108809,"node_id":"IC_kwDOACaFSM5v0yYJ","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-03T23:32:02Z","updated_at":"2024-01-03T23:32:02Z","author_association":"CONTRIBUTOR","body":"The test failure was due to an earlier version of the PR.  The current code passes the mini tests. I also ran sunny profile without issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876108809/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876145806","html_url":"https://github.com/apache/accumulo/pull/4118#issuecomment-1876145806","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4118","id":1876145806,"node_id":"IC_kwDOACaFSM5v07aO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T00:22:00Z","updated_at":"2024-01-04T00:22:00Z","author_association":"CONTRIBUTOR","body":"> Add this functionality for external compactions?\r\n\r\nIf you added the new method to all impls of CompactionConfigurer then I would think this case is already covered.  However I did not actually follow the code to be sure.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1876145806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877243022","html_url":"https://github.com/apache/accumulo/pull/4110#issuecomment-1877243022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4110","id":1877243022,"node_id":"IC_kwDOACaFSM5v5HSO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T15:03:49Z","updated_at":"2024-01-04T15:03:49Z","author_association":"CONTRIBUTOR","body":"@ddanielr can this be closed now?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877243022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877368936","html_url":"https://github.com/apache/accumulo/pull/4118#issuecomment-1877368936","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4118","id":1877368936,"node_id":"IC_kwDOACaFSM5v5mBo","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T16:14:55Z","updated_at":"2024-01-04T16:14:55Z","author_association":"MEMBER","body":"> > Add this functionality for external compactions?\r\n> \r\n> If you added the new method to all impls of CompactionConfigurer then I would think this case is already covered. However I did not actually follow the code to be sure.\r\n\r\nOkay thanks! I did add the new method to the implementations of CompactionConfigurer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877368936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877401097","html_url":"https://github.com/apache/accumulo/pull/4110#issuecomment-1877401097","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4110","id":1877401097,"node_id":"IC_kwDOACaFSM5v5t4J","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T16:30:39Z","updated_at":"2024-01-04T16:30:39Z","author_association":"CONTRIBUTOR","body":"> @ddanielr can this be closed now?\n\nYes, I completed the merge of #4119 last night which put these changes in elasticity ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877401097/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877574411","html_url":"https://github.com/apache/accumulo/pull/4120#issuecomment-1877574411","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4120","id":1877574411,"node_id":"IC_kwDOACaFSM5v6YML","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T18:32:21Z","updated_at":"2024-01-04T18:32:21Z","author_association":"MEMBER","body":"Added since 3.1 tag to `getSystemProperties()` and added `Wait.waitFor()` in `getSystemPropertiesTest()`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877574411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877640038","html_url":"https://github.com/apache/accumulo/pull/4126#issuecomment-1877640038","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4126","id":1877640038,"node_id":"IC_kwDOACaFSM5v6oNm","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T19:23:06Z","updated_at":"2024-01-04T19:23:06Z","author_association":"MEMBER","body":"Borrow from https://github.com/apache/accumulo/pull/2906#issuecomment-1234611631:\r\n\r\nThanks for the PR @kevinrr888. If you wish to be added as a contributor to https://accumulo.apache.org/people/ , please open a pull request to add yourself (in alphabetical order) at https://github.com/apache/accumulo-website/edit/main/pages/people.md and leave a reference to apache/accumulo#4126 in your commit log.\r\n\r\nIf you intend to be a regular contributor to Accumulo projects, please consider subscribing to our developer mailing list (https://accumulo.apache.org/contact-us/) and introducing yourself.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877640038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877909372","html_url":"https://github.com/apache/accumulo/pull/4077#issuecomment-1877909372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4077","id":1877909372,"node_id":"IC_kwDOACaFSM5v7p98","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-04T23:38:28Z","updated_at":"2024-01-04T23:38:28Z","author_association":"CONTRIBUTOR","body":"@ctubbsii are you ok with these changes now?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1877909372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878761621","html_url":"https://github.com/apache/accumulo/pull/4083#issuecomment-1878761621","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4083","id":1878761621,"node_id":"IC_kwDOACaFSM5v-6CV","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T14:23:41Z","updated_at":"2024-01-05T14:24:18Z","author_association":"CONTRIBUTOR","body":"@ddanielr in the merge of main into elasticity 6f908863f571bcb76dd77e0576ec1bd135cd0284 I pulled in some new test into DefaultCompactionPlannerTest  that caused conflicts with this PR.  I need to make another commit for those new test to make them use the new config instead of the old executors config.  Also in that commit I readded some code related to maxOpen in the test class that was removed in elasticity.  Was not sure exactly what was going on there, was just trying to get the new test running while working through the merge conflicts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878761621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878893092","html_url":"https://github.com/apache/accumulo/pull/4077#issuecomment-1878893092","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4077","id":1878893092,"node_id":"IC_kwDOACaFSM5v_aIk","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T15:58:57Z","updated_at":"2024-01-05T15:58:57Z","author_association":"MEMBER","body":"I also think 'with' is better. Changed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878893092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878927377","html_url":"https://github.com/apache/accumulo/issues/4045#issuecomment-1878927377","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4045","id":1878927377,"node_id":"IC_kwDOACaFSM5v_igR","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T16:19:04Z","updated_at":"2024-01-05T16:19:04Z","author_association":"MEMBER","body":"Fixed via #4115 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878927377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878928398","html_url":"https://github.com/apache/accumulo/issues/3933#issuecomment-1878928398","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3933","id":1878928398,"node_id":"IC_kwDOACaFSM5v_iwO","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T16:19:45Z","updated_at":"2024-01-05T16:19:45Z","author_association":"MEMBER","body":"Fixed via #3968","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878928398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878993914","html_url":"https://github.com/apache/accumulo/issues/4068#issuecomment-1878993914","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4068","id":1878993914,"node_id":"IC_kwDOACaFSM5v_yv6","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-05T17:07:02Z","updated_at":"2024-01-05T17:07:02Z","author_association":"CONTRIBUTOR","body":"Done in #4126","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1878993914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1879716421","html_url":"https://github.com/apache/accumulo/pull/3968#issuecomment-1879716421","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3968","id":1879716421,"node_id":"IC_kwDOACaFSM5wCjJF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-06T14:41:20Z","updated_at":"2024-01-06T14:41:20Z","author_association":"CONTRIBUTOR","body":"Just saw this PR was merged, this is a nice enhancement.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1879716421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1880137376","html_url":"https://github.com/apache/accumulo/pull/4127#issuecomment-1880137376","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4127","id":1880137376,"node_id":"IC_kwDOACaFSM5wEJ6g","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-07T18:37:11Z","updated_at":"2024-01-07T18:37:11Z","author_association":"CONTRIBUTOR","body":"This looks like it has caused a couple test failures in 2.1 and main for `CompactionIT` because `table.file.max.prop `is set too low for the test (I guess that's a good thing since it means this is working). I created a PR that fixes this: https://github.com/apache/accumulo/pull/4134","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1880137376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]