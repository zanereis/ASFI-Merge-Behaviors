[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523866715","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523866715","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523866715,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg2NjcxNQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T11:33:41Z","updated_at":"2019-08-22T11:33:41Z","author_association":"MEMBER","body":"Is you query it multiple times is it always 3700ms or is it faster? From the JavaScript, it looks like you creating the mango view then querying it versus the map index which has already been created and possibly already built.\n\n\n________________________________\nFrom: Nicu Spinu <notifications@github.com>\nSent: Thursday, August 22, 2019 1:10 PM\nTo: apache/couchdb\nCc: garren smith; Comment\nSubject: Re: [apache/couchdb] _find performance issues (#2129)\n\n\nThis is what _explain says:\n[image]<https://user-images.githubusercontent.com/35466661/63509337-98ffcf80-c4e4-11e9-9d8c-6dd46d1f3b2f.png>\n\nAnd this is how the index _design doc look like.\n[image]<https://user-images.githubusercontent.com/35466661/63509298-7a99d400-c4e4-11e9-994b-7dcb75c53b4c.png>\n\nAnd this is what the execution_stats look like\n[image]<https://user-images.githubusercontent.com/35466661/63509482-f136d180-c4e4-11e9-90fb-991510e7707a.png>\n\n—\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/2129?email_source=notifications&email_token=AABL2AQ6PR4DYPCCRHGLKIDQFZX3BA5CNFSM4IOSIVN2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD44WO2I#issuecomment-523855721>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AABL2AVQ2QFRZTNVWW5CPMDQFZX3BANCNFSM4IOSIVNQ>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523866715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523867578","html_url":"https://github.com/apache/couchdb/pull/2130#issuecomment-523867578","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2130","id":523867578,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg2NzU3OA==","user":{"login":"theburge","id":1048220,"node_id":"MDQ6VXNlcjEwNDgyMjA=","avatar_url":"https://avatars.githubusercontent.com/u/1048220?v=4","gravatar_id":"","url":"https://api.github.com/users/theburge","html_url":"https://github.com/theburge","followers_url":"https://api.github.com/users/theburge/followers","following_url":"https://api.github.com/users/theburge/following{/other_user}","gists_url":"https://api.github.com/users/theburge/gists{/gist_id}","starred_url":"https://api.github.com/users/theburge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/theburge/subscriptions","organizations_url":"https://api.github.com/users/theburge/orgs","repos_url":"https://api.github.com/users/theburge/repos","events_url":"https://api.github.com/users/theburge/events{/privacy}","received_events_url":"https://api.github.com/users/theburge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T11:36:47Z","updated_at":"2019-08-22T11:36:47Z","author_association":"CONTRIBUTOR","body":"@jiangphcn Thanks, I think this approach is more promising, but I think we need to address race windows on both sides: here by moving the two operations together, and in clouseau by adding some defensive logic to force the writer closed on an IOError.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523867578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523884667","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523884667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523884667,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg4NDY2Nw==","user":{"login":"ngspinu","id":35466661,"node_id":"MDQ6VXNlcjM1NDY2NjYx","avatar_url":"https://avatars.githubusercontent.com/u/35466661?v=4","gravatar_id":"","url":"https://api.github.com/users/ngspinu","html_url":"https://github.com/ngspinu","followers_url":"https://api.github.com/users/ngspinu/followers","following_url":"https://api.github.com/users/ngspinu/following{/other_user}","gists_url":"https://api.github.com/users/ngspinu/gists{/gist_id}","starred_url":"https://api.github.com/users/ngspinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngspinu/subscriptions","organizations_url":"https://api.github.com/users/ngspinu/orgs","repos_url":"https://api.github.com/users/ngspinu/repos","events_url":"https://api.github.com/users/ngspinu/events{/privacy}","received_events_url":"https://api.github.com/users/ngspinu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T12:30:06Z","updated_at":"2019-08-22T12:40:30Z","author_association":"NONE","body":"Even if I create the index on runtime, or if using one that was created before - the result will always take over 3.5seconds.\r\n\r\nThe above piece of code is just to get some runtime outputs(they both run ONE time):\r\n1. The _find - using an index - takes 3700ms.\r\n2. Executing a view(that was created before) - 800ms \r\n\r\nThey both examine the same amount of data(i.e 15846) - however - the _find is way slower.\r\nPlease note - the time to create the index(.createIndex) - is not counted on those 3.7 seconds.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523884667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523897506","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523897506","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523897506,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg5NzUwNg==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T13:06:23Z","updated_at":"2019-08-22T13:06:23Z","author_association":"MEMBER","body":"One difference between Query and MapReduce is that Query will always load\nthe entire document for each result row (effectively include_docs=true in\nMapReduce terms) and then construct a result returning only the specified\nfields. This means there's a potentially expensive additional fetch for\neach row, particularly so if your documents are large.\n\nIn general, indexing with Query is significantly faster than JavaScript\nMapReduce but querying is not (though is more flexible).\n\nOn Thu, 22 Aug 2019 at 13:30, Nicu Spinu <notifications@github.com> wrote:\n\n> Even if I create the index on runtime, or if using one that was created\n> before - the result will always take over 3.5seconds.\n>\n> The above piece of code is just to get some runtime outputs(they both run\n> ONE time):\n>\n>    1. The _find - using an index - takes 3700ms.\n>    2. Executing a view(that was created before) - 800ms\n>\n> They both examine the same amount of data(i.e 15846) - however - the _find\n> is way slower.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/2129?email_source=notifications&email_token=AAAX36ZJVJGEM6YQB44TNXTQF2BFBA5CNFSM4IOSIVN2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD445Q6Y#issuecomment-523884667>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAAX364Q7YBTSXNMHJE6TKDQF2BFBANCNFSM4IOSIVNQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523897506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523917320","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523917320","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523917320,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzkxNzMyMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T13:55:59Z","updated_at":"2019-08-22T13:55:59Z","author_association":"MEMBER","body":"Query also doesn't have the Reduce part of MapReduce yet. If you're really trying to get just a `_count` then you will be faster for JS right now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523917320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523982028","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-523982028","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":523982028,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzk4MjAyOA==","user":{"login":"arifcse019","id":10591704,"node_id":"MDQ6VXNlcjEwNTkxNzA0","avatar_url":"https://avatars.githubusercontent.com/u/10591704?v=4","gravatar_id":"","url":"https://api.github.com/users/arifcse019","html_url":"https://github.com/arifcse019","followers_url":"https://api.github.com/users/arifcse019/followers","following_url":"https://api.github.com/users/arifcse019/following{/other_user}","gists_url":"https://api.github.com/users/arifcse019/gists{/gist_id}","starred_url":"https://api.github.com/users/arifcse019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arifcse019/subscriptions","organizations_url":"https://api.github.com/users/arifcse019/orgs","repos_url":"https://api.github.com/users/arifcse019/repos","events_url":"https://api.github.com/users/arifcse019/events{/privacy}","received_events_url":"https://api.github.com/users/arifcse019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T16:37:15Z","updated_at":"2020-01-10T17:24:30Z","author_association":"NONE","body":"Same issue, CouchDB 2.3.1, SSD disk. Details follow:\r\n\r\n### Expected Behavior\r\n\r\nWe should not see any consistent/periodic error logs\r\n\r\n### Current Behavior\r\n\r\nWe are consistently getting error messages like the following from our Cluster nodes\r\n\r\n> [error] 2019-08-22T16:40:16.413112Z couchdb@secondary.couchcluster.internal <0.11584.566> 5ade8dc499 req_err(1125717067) unknown_error : normal\r\n\r\n[<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n\r\n### Possible Solution\r\nN/A\r\n\r\n### Steps to Reproduce:\r\n\r\n1. Open a continuous feed for DB updates: `curl -u $user:$password -X GET \"https://$couchdb_url/_db_updates?feed=continuous&heartbeat=20000&since=now\"`\r\n2. Kill the connection (ctrl+C)\r\n3. The error is reproduced (may be in a minute or two)\r\n\r\n### Your Environment\r\nVersion used: 2.3.1\r\nCluster Configuration: 3 nodes, n=3, q=9\r\nBrowser Name and version: curl\r\nOperating System and version (desktop or mobile): Ubuntu 14.04.5 LTS","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523982028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524221527","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-524221527","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":524221527,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDIyMTUyNw==","user":{"login":"ngspinu","id":35466661,"node_id":"MDQ6VXNlcjM1NDY2NjYx","avatar_url":"https://avatars.githubusercontent.com/u/35466661?v=4","gravatar_id":"","url":"https://api.github.com/users/ngspinu","html_url":"https://github.com/ngspinu","followers_url":"https://api.github.com/users/ngspinu/followers","following_url":"https://api.github.com/users/ngspinu/following{/other_user}","gists_url":"https://api.github.com/users/ngspinu/gists{/gist_id}","starred_url":"https://api.github.com/users/ngspinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngspinu/subscriptions","organizations_url":"https://api.github.com/users/ngspinu/orgs","repos_url":"https://api.github.com/users/ngspinu/repos","events_url":"https://api.github.com/users/ngspinu/events{/privacy}","received_events_url":"https://api.github.com/users/ngspinu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T08:19:39Z","updated_at":"2019-08-23T08:21:41Z","author_association":"NONE","body":"So that means _find will never be as fast as a regular db view, although they use the same map/reduce underneath - and the same query engine.\r\nI guess the docs should be warning about this performance trade you are doing when using _find.\r\n\r\nPerhaps this issue should be moved on the couchdb docs repo?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524221527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524267379","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-524267379","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":524267379,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDI2NzM3OQ==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T10:43:24Z","updated_at":"2019-08-23T10:43:24Z","author_association":"CONTRIBUTOR","body":"Hi @iilyak,\r\n\r\n I've been working around your proposal of split the tests. I found it quite difficult for auth_cache\r\nand cookie_cache but for users_db seems to be affordable. \r\n\r\n It requires major rework of the test. Do you think that we can follow with this PR as it is now and split the tests in different PRs? \r\n\r\n I would like to continue contributing to the rewrite of the test suite into elixir. \r\n\r\nThanks, \r\nJuanjo\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524267379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524309829","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-524309829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":524309829,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDMwOTgyOQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T13:11:54Z","updated_at":"2019-08-23T13:11:54Z","author_association":"CONTRIBUTOR","body":"Hi @jjrodrig, \r\n\r\n> I've been working around your proposal of split the tests. I found it quite difficult for auth_cache\r\nand cookie_cache but for users_db seems to be affordable.\r\n\r\nI agree with you observation that `auth_cache` seem to be harder to split. The `cookie_cache` on the other hand is not that hard (unless I am missing some subtle detail).\r\n\r\n>Do you think that we can follow with this PR as it is now and split the tests in different PRs?\r\n\r\nCould you convert from  `run_on_modified_server` to use of @moduletag config?\r\nIn my opinion the current shape of the `test_fun` is written in not conventional Elixir. Which makes it harder to understand and hard to maintain. I also understand the reason why it is like this. There is a positive side of it as well. Due to similarities with JavaScript test it makes the PR easier to review. Let's try to convert test setup/teardown logic into idiomatic ExUnit:\r\n- setup uses moduletag\r\n- teardown is done using `on_exit` \r\n\r\nThen in separate commit try to split some tests when possible. Keep the rest as is and ask @garrensmith to review as well. To get his opinion on whether it is acceptable or not.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524309829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524360030","html_url":"https://github.com/apache/couchdb/issues/2139#issuecomment-524360030","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2139","id":524360030,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDM2MDAzMA==","user":{"login":"manufont","id":20096663,"node_id":"MDQ6VXNlcjIwMDk2NjYz","avatar_url":"https://avatars.githubusercontent.com/u/20096663?v=4","gravatar_id":"","url":"https://api.github.com/users/manufont","html_url":"https://github.com/manufont","followers_url":"https://api.github.com/users/manufont/followers","following_url":"https://api.github.com/users/manufont/following{/other_user}","gists_url":"https://api.github.com/users/manufont/gists{/gist_id}","starred_url":"https://api.github.com/users/manufont/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/manufont/subscriptions","organizations_url":"https://api.github.com/users/manufont/orgs","repos_url":"https://api.github.com/users/manufont/repos","events_url":"https://api.github.com/users/manufont/events{/privacy}","received_events_url":"https://api.github.com/users/manufont/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T15:31:35Z","updated_at":"2019-08-23T15:31:35Z","author_association":"NONE","body":"I did a one-time replication of this database, and the issue disappeared on the target: The document was created without any problem. This issue is still present on the source though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524360030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524396942","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-524396942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":524396942,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDM5Njk0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T17:25:58Z","updated_at":"2019-08-23T17:25:58Z","author_association":"MEMBER","body":"@ngspinu No, it is still accurate in the large majority of cases.\r\n\r\nReduce support for Mango is being added in #1254.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524396942/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524398671","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-524398671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":524398671,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDM5ODY3MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T17:31:29Z","updated_at":"2019-08-23T17:31:29Z","author_association":"MEMBER","body":"@ngspinu if you want to open a Documentation issue on the specific sentence you found misleading, we can add a qualifier there saying that reduce support for _count, _sum, and _stats is still forthcoming, and that in that specific situation, we still recommend JS views.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524398671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524737322","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524737322","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524737322,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDczNzMyMg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T06:42:18Z","updated_at":"2019-08-26T06:42:18Z","author_association":"CONTRIBUTOR","body":"@wohali @nickva @kocolosk Please suggest who can review this PR?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524737322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524737617","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-524737617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":524737617,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDczNzYxNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T06:43:28Z","updated_at":"2019-08-26T06:43:28Z","author_association":"MEMBER","body":"Have you seen https://github.com/apache/couchdb/pull/1658 which landed for CouchDB 2.3.0?\r\n\r\nThere is an open ticket to implement this in the Docker image, but perhaps you can glue it together yourself with a helm file or similar...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524737617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524791523","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-524791523","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":524791523,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDc5MTUyMw==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T09:30:53Z","updated_at":"2019-08-26T09:30:53Z","author_association":"NONE","body":"Yes, i looked this.\r\nThis not applicable, because DNS nodes name is defined at run time and cannot be know at configuration time.\r\nAlso during execution time this DNS nodes names may be changed. That is means need to track this nodes name change.\r\nReferenced PR is not provides this feature.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524791523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524802434","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524802434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524802434,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgwMjQzNA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T10:05:00Z","updated_at":"2019-08-26T10:05:00Z","author_association":"CONTRIBUTOR","body":"If I recall correctly this used to be a flaky test. The current check seem to be correct: `final_data_size < deleted_data_size`. The failure is observed because we cannot detect compaction completion reliably. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524802434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524810405","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524810405","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524810405,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgxMDQwNQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T10:34:14Z","updated_at":"2019-08-26T10:34:14Z","author_association":"CONTRIBUTOR","body":"Hi @iilyak ,\r\n\r\nThanks for the update.\r\nI observed that the `final_data_size` always remained greater than `deleted_data_size` even after compaction, and eventually the test failed after timeout. \r\n\r\nAlso I saw that the following check tests the `deleted_data_size` after deletion is greater that `orig_data_size`, so related that `final_data_size` after compaction would be greater than deleted_data_size.\r\n```https://github.com/apache/couchdb/blob/master/test/elixir/test/compact_test.exs#L31```\r\n\r\nWas not aware that we cannot detect compaction completion reliably.\r\n\r\nPlease let me know me if this is incorrect.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524810405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524821714","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524821714","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524821714,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgyMTcxNA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T11:18:54Z","updated_at":"2019-08-26T11:18:54Z","author_association":"CONTRIBUTOR","body":"I am still convinced that we have a bug in either compactor or code which detects that compaction is finished. Your numbers confirms that. `Value of orig_disk_size = 103907` compared to `Value of final_disk_size = 218681`. Compaction process suppose to compact file i.e. make it smaller than the original. In your test run it seems to indicate that the file became bigger after compaction. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524821714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524823528","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524823528","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524823528,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgyMzUyOA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T11:26:20Z","updated_at":"2019-08-26T11:26:20Z","author_association":"CONTRIBUTOR","body":"There is third possibility which is incorrect calculation of sizes for attachments. The current test you are trying to fix uses attachments.  \r\n\r\nI remember there were fixes (by @eiri) in the area. \r\n- https://github.com/apache/couchdb/pull/1470\r\n\r\nThe PR is not merged yet. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524823528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524825869","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-524825869","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":524825869,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgyNTg2OQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T11:35:11Z","updated_at":"2019-08-26T11:35:11Z","author_association":"CONTRIBUTOR","body":"@iilyak can you please suggest a way forward? This is the only test failure that we are encountering and remains a blocker for our activities. Is there a way we can skip this test temporarily for now until the root cause of compaction or calculation of attachment sizes is resolved?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524825869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524867737","html_url":"https://github.com/apache/couchdb/issues/2144#issuecomment-524867737","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2144","id":524867737,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDg2NzczNw==","user":{"login":"ceremcem","id":6639874,"node_id":"MDQ6VXNlcjY2Mzk4NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6639874?v=4","gravatar_id":"","url":"https://api.github.com/users/ceremcem","html_url":"https://github.com/ceremcem","followers_url":"https://api.github.com/users/ceremcem/followers","following_url":"https://api.github.com/users/ceremcem/following{/other_user}","gists_url":"https://api.github.com/users/ceremcem/gists{/gist_id}","starred_url":"https://api.github.com/users/ceremcem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ceremcem/subscriptions","organizations_url":"https://api.github.com/users/ceremcem/orgs","repos_url":"https://api.github.com/users/ceremcem/repos","events_url":"https://api.github.com/users/ceremcem/events{/privacy}","received_events_url":"https://api.github.com/users/ceremcem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T13:48:51Z","updated_at":"2019-08-26T13:48:51Z","author_association":"CONTRIBUTOR","body":"See also #1830","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/524867737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525050786","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525050786","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525050786,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA1MDc4Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T22:02:08Z","updated_at":"2019-08-26T22:02:08Z","author_association":"MEMBER","body":"@sergey-safarov And using IP addresses and setting that configuration after the nodes come up isn't acceptable?\r\n\r\n@kocolosk does any of what Sergey asks for above seem useful to you, or is the existing beta helm chart the best solution until CouchDB 4.0?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525050786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053268","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-525053268","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":525053268,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA1MzI2OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T22:10:59Z","updated_at":"2019-08-26T22:10:59Z","author_association":"MEMBER","body":"I'd be fine with q=2 or q=4 as a default. I guess that means we mostly agree on q=2, so +1 on that.\r\n\r\nI am -1 on the default attachment size reduction to anything below 10MB. Are we not going to be able to handle 10MB attachments natively in 4.0 even? I'm fine with signalling to users that 350MB attachments are a concern, but 1MB is hardly enough to include a photo or short video from an IoT security camera. 10MB seems like a fair compromise to me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053511","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-525053511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":525053511,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA1MzUxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T22:11:52Z","updated_at":"2019-08-26T22:11:52Z","author_association":"MEMBER","body":"ping @davisp for thoughts. I'm ok with moving this out of 3.x but I'd like at least a pointer to the way forward for whomever picks this up in the future.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053653","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-525053653","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":525053653,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA1MzY1Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T22:12:25Z","updated_at":"2019-08-26T22:12:25Z","author_association":"MEMBER","body":"@nickva is there any chance of adding shard merging before 3.0?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525053653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525063581","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-525063581","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":525063581,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA2MzU4MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T22:52:04Z","updated_at":"2019-08-26T22:52:04Z","author_association":"CONTRIBUTOR","body":"@wohali I am thinking probably not.\r\n\r\nOn the surface it would appear it's just the reverse of splitting, but there are some corner cases to handle that make things a bit more complicated such as:\r\n\r\n  1) What happens to update sequences when we merge shards. \r\n\r\n  2) Since we only split by 2 now, we have a more constrained set of possible shard overlap configurations, such that shards either completely enclose other shards' ranges, or are completely enclosed by other shards' ranges. With merges and splits we'd have arbitrary overlaps. Even though I think our current logic will handle it , it would require extra care to test and all the new corner cases\r\n\r\n  3) Would need to do some job managements updates, say, to avoid having jobs that both split and merge a shard at the same time. This is not difficult, but it would just be extra work and testing.\r\n\r\nAll in all, it is not impossible but it's also probably too much work for 3.x. If FDB wasn't in play, it we'd likely head that way, and even add automatic rebalancing, but now, kind of feels less motivating to continue on that path.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525063581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525066247","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-525066247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":525066247,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA2NjI0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T23:03:00Z","updated_at":"2019-08-26T23:03:00Z","author_association":"MEMBER","body":"@nickva then we may simply want to close this as WONTFIX and point people towards something like https://github.com/neighbourhoodie/couch-continuum , which is an ugly workaround but at least reliable. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525066247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525088946","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-525088946","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":525088946,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTA4ODk0Ng==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T00:49:37Z","updated_at":"2019-08-27T00:49:37Z","author_association":"MEMBER","body":"OK. I wasn’t proposing an attachment size limit. I was proposing a limit on the document size, excluding attachment bodies.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525088946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525127807","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-525127807","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":525127807,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEyNzgwNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T04:04:36Z","updated_at":"2019-08-27T04:04:36Z","author_association":"MEMBER","body":"@kocolosk Sorry, been task switching a lot, and I clearly misread here.\r\n\r\nWhat happens if a user upgrades in place to CouchDB 3.x and they have documents already >1MB of JSON, but the limit is reduced? What behaviour do they experience?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525127807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525142044","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525142044","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525142044,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE0MjA0NA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T05:20:39Z","updated_at":"2019-08-27T05:21:34Z","author_association":"NONE","body":"I cannot use IP in node names, because shards will be linked to nodes that contains IP addresses.\r\nWhen couchdb containers is restrarted, then container get new IP address and we lost restarted nodes from cluster.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525142044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525144212","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525144212","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525144212,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE0NDIxMg==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T05:29:55Z","updated_at":"2019-08-27T05:29:55Z","author_association":"NONE","body":"That useful because used DNS nodes discovery mechanism and may be used in docker swarm installation, any other cloud provider where used dynamic ip.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525144212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525145248","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525145248","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525145248,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE0NTI0OA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T05:34:31Z","updated_at":"2019-08-27T05:34:31Z","author_association":"NONE","body":"As option\r\nCommand to join node into cluster may looks\r\n```\r\ncurl -X PUT \"http://localhost:5986/_nodes/couchdb@couchdb-1\" -d '{\"ipv4_address\":\"10.0.52.4\"}'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525145248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525242242","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525242242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525242242,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI0MjI0Mg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T10:30:50Z","updated_at":"2019-08-27T10:30:50Z","author_association":"CONTRIBUTOR","body":"@iilyak any updates for me on this one?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525242242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263052","html_url":"https://github.com/apache/couchdb/issues/2145#issuecomment-525263052","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2145","id":525263052,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI2MzA1Mg==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T11:40:20Z","updated_at":"2019-08-27T11:40:20Z","author_association":"MEMBER","body":"It would appear to be inadvertent shuffling in the dict used here: https://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_view_map.erl#L207\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263425","html_url":"https://github.com/apache/couchdb/issues/2145#issuecomment-525263425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2145","id":525263425,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI2MzQyNQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T11:41:40Z","updated_at":"2019-08-27T11:42:16Z","author_association":"MEMBER","body":"my \"on cloudant\" test;\r\n\r\n```\r\nacurl 'https://rnewson.cloudant.com/db1/_design/foobar/_view/bar?reduce=false&keys=[[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"],[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"],[\"08838b262a64fb87be35f60698aed760\",\"08838b262a64fb87be35f60698aed760\"],[\"03cc6b75dfa4ed9e22a32bc943aaeb98\",\"03cc6b75dfa4ed9e22a32bc943aaeb98\"],[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"]]' -g\r\n{\"total_rows\":236,\"offset\":1,\"rows\":[\r\n{\"id\":\"03cc6b75dfa4ed9e22a32bc943aaeb98\",\"key\":[\"03cc6b75dfa4ed9e22a32bc943aaeb98\",\"03cc6b75dfa4ed9e22a32bc943aaeb98\"],\"value\":null},\r\n{\"id\":\"03cc6b75dfa4ed9e22a32bc943930199\",\"key\":[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"],\"value\":null},\r\n{\"id\":\"03cc6b75dfa4ed9e22a32bc943930199\",\"key\":[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"],\"value\":null},\r\n{\"id\":\"08838b262a64fb87be35f60698aed760\",\"key\":[\"08838b262a64fb87be35f60698aed760\",\"08838b262a64fb87be35f60698aed760\"],\"value\":null},\r\n{\"id\":\"03cc6b75dfa4ed9e22a32bc943930199\",\"key\":[\"03cc6b75dfa4ed9e22a32bc943930199\",\"03cc6b75dfa4ed9e22a32bc943930199\"],\"value\":null}\r\n]}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263756","html_url":"https://github.com/apache/couchdb/issues/2145#issuecomment-525263756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2145","id":525263756,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI2Mzc1Ng==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T11:42:54Z","updated_at":"2019-08-27T11:42:54Z","author_association":"MEMBER","body":"on closer inspection, that test is also a reproducing failure.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525263756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525271161","html_url":"https://github.com/apache/couchdb/issues/2145#issuecomment-525271161","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2145","id":525271161,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI3MTE2MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T12:06:55Z","updated_at":"2019-08-27T12:06:55Z","author_association":"MEMBER","body":"```\r\nkeydict(undefined) ->\r\n    undefined;\r\nkeydict(Keys) ->\r\n    {Dict,_} = lists:foldl(fun(K, {D,I}) -> {dict:store(K,I,D), I+1} end,\r\n        {dict:new(),0}, Keys),\r\n    Dict.\r\n```\r\n\r\nThis is where it goes wrong. The goal is to assign an ordinal to each key, but if the \"keys\" array contains duplicates, we'd need to stop multiple ordinals for one key, which a dict cannot handle.\r\n\r\nI'm not seeing an easy way out here. One option is to insist that the \"keys\" array contains no duplicates (and a 400 Bad Request) if violated, but it would be neat to fix this, as I believe it worked fine in 1.x.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525271161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525272566","html_url":"https://github.com/apache/couchdb/issues/2145#issuecomment-525272566","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2145","id":525272566,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI3MjU2Ng==","user":{"login":"jlami","id":8522993,"node_id":"MDQ6VXNlcjg1MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8522993?v=4","gravatar_id":"","url":"https://api.github.com/users/jlami","html_url":"https://github.com/jlami","followers_url":"https://api.github.com/users/jlami/followers","following_url":"https://api.github.com/users/jlami/following{/other_user}","gists_url":"https://api.github.com/users/jlami/gists{/gist_id}","starred_url":"https://api.github.com/users/jlami/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jlami/subscriptions","organizations_url":"https://api.github.com/users/jlami/orgs","repos_url":"https://api.github.com/users/jlami/repos","events_url":"https://api.github.com/users/jlami/events{/privacy}","received_events_url":"https://api.github.com/users/jlami/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T12:11:26Z","updated_at":"2019-08-27T12:11:26Z","author_association":"NONE","body":"A 400 response might be a bit overkill, but at least it would make this unexpected behavior clearly visible.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525272566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525279963","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525279963","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525279963,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI3OTk2Mw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T12:33:55Z","updated_at":"2019-08-27T12:33:55Z","author_association":"MEMBER","body":"When it comes to Kubernetes I think relying on the stable DNS names provided by membership in a StatefulSet is the right approach. This is what the Helm chart does. It is possible to compute those names ahead of time; the only bit of configuration currently needed is the domain suffix used by the target cluster.\r\n\r\nI’m not so familiar with Docker Stacks. Are the `couchdb-1`, etc. names stable and resolvable by the other replicas? If so, shouldn’t we use those for node names and ignore the ephemeral IP addresses?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525279963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525280288","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525280288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525280288,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTI4MDI4OA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T12:34:55Z","updated_at":"2019-08-27T12:34:55Z","author_association":"MEMBER","body":"> I remember there were fixes (by @eiri) in the area.\r\n\r\nfwiw my none-approved fixes were for `external`, not for `data` block that's in question here.\r\n\r\nI thought this test is already in skip list, the tag `@tag :skip_on_jenkins` indicates this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525280288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525315000","html_url":"https://github.com/apache/couchdb/issues/2142#issuecomment-525315000","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2142","id":525315000,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTMxNTAwMA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T14:00:56Z","updated_at":"2019-08-27T14:00:56Z","author_association":"NONE","body":"Names is stable because name is generated from constant string and stable variable `{{.Task.Slot}}`.\r\nBut this names is not resolvable. That is reason why this feature request opened.\r\n\r\nI suggest store `host names` and `runtime IP` mapping on each node. When some nodes restarted, then this nodes initiate `host-IP` mapping update on other host in cluster.\r\nList of all nodes in cluster is resolvable via DNS name like \r\n```sh\r\nroot@dbef6f82ce5f:/# nslookup tasks.couchdb\r\nServer:\t\t127.0.0.11\r\nAddress:\t127.0.0.11#53\r\n\r\nNon-authoritative answer:\r\nName:\ttasks.couchdb\r\nAddress: 10.0.52.7\r\nName:\ttasks.couchdb\r\nAddress: 10.0.52.6\r\nName:\ttasks.couchdb\r\nAddress: 10.0.52.5\r\nName:\ttasks.couchdb\r\nAddress: 10.0.52.4\r\nName:\ttasks.couchdb\r\nAddress: 10.0.52.3\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525315000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525417391","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-525417391","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":525417391,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTQxNzM5MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T18:05:20Z","updated_at":"2019-08-27T18:05:20Z","author_association":"CONTRIBUTOR","body":"@wohali Agree. Closing as wontfix as suggested.\r\n\r\nhttps://github.com/neighbourhoodie/couch-continuum seems like a good tool","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525417391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525473345","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525473345","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525473345,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTQ3MzM0NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T20:39:12Z","updated_at":"2019-08-27T20:39:12Z","author_association":"MEMBER","body":"@eiri The check in `test/test_helper.exs` is not sufficient to get this test to skip on Travis (which uses `TRAVIS_BUILD_NUMBER` and won't work if you're just running `make check` on the command line, which is undoubtedly what @sarveshtamba is doing. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525473345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525520797","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525520797","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525520797,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTUyMDc5Nw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T23:23:34Z","updated_at":"2019-08-27T23:23:34Z","author_association":"MEMBER","body":"@wohali Ah, I see. I should admit I'm still not very familiar with elixir test suite.\r\n\r\nThe fix doesn't look right to me, tbh, I mean it's strange to call test \"compaction reduces size of deleted docs\" and then change test to assert an exact opposite 😄  If test is repeatedly failing we need to find the root cause of this failure and fix it.\r\n\r\nI appreciate it's not a simple task, sizes calculation, especially in combination with compaction is convoluted, so maybe someone more proficient than me in elixir suite can disable this test for time being and we'll get back to it in version 3.x\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525520797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525527894","html_url":"https://github.com/apache/couchdb/pull/2149#issuecomment-525527894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2149","id":525527894,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTUyNzg5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T23:57:12Z","updated_at":"2019-08-27T23:57:12Z","author_association":"MEMBER","body":"@eiri ok I'll close this PR, can you submit a new one? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525527894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525527940","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525527940","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525527940,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTUyNzk0MA==","user":{"login":"sansato","id":46877906,"node_id":"MDQ6VXNlcjQ2ODc3OTA2","avatar_url":"https://avatars.githubusercontent.com/u/46877906?v=4","gravatar_id":"","url":"https://api.github.com/users/sansato","html_url":"https://github.com/sansato","followers_url":"https://api.github.com/users/sansato/followers","following_url":"https://api.github.com/users/sansato/following{/other_user}","gists_url":"https://api.github.com/users/sansato/gists{/gist_id}","starred_url":"https://api.github.com/users/sansato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sansato/subscriptions","organizations_url":"https://api.github.com/users/sansato/orgs","repos_url":"https://api.github.com/users/sansato/repos","events_url":"https://api.github.com/users/sansato/events{/privacy}","received_events_url":"https://api.github.com/users/sansato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T23:57:28Z","updated_at":"2019-08-27T23:57:28Z","author_association":"NONE","body":"data_size is deprecated.  Does info[\"sizes.file\"] or info[\"sizes\"][\"file\"] give a better answer?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525527940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525528813","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525528813","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525528813,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTUyODgxMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T00:01:40Z","updated_at":"2019-08-28T00:01:40Z","author_association":"MEMBER","body":"@sansato it's the exact same data... we're just going to remove the data_size field at some point from the output.\r\n\r\nsee: https://github.com/apache/couchdb/blob/91b299d04a4ded2e11fb65972984b24d3491d1aa/src/couch_mrview/src/couch_mrview_index.erl#L83-L89\r\n\r\ndata_size = sizes.external\r\ndisk_size = sizes.file\r\n_nothing_ = sizes.active","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525528813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525543496","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525543496","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525543496,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTU0MzQ5Ng==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T01:17:16Z","updated_at":"2019-08-28T01:17:16Z","author_association":"MEMBER","body":"@sansato I'd say `info[\"sizes.active\"]` is the best option here, it's a size of \"live\" data in bytes, so it should go down when doc deleted and db then compacted.\r\n\r\nBut I agree with @iilyak, the fact that in your trace finale data and disk sizes bigger than the originals indicates that compaction not finished at the time of final test assertion, i.e. it's not the question of _what_ to compare, but more of a question _when_ to compare.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525543496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525543850","html_url":"https://github.com/apache/couchdb/pull/2149#issuecomment-525543850","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2149","id":525543850,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTU0Mzg1MA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T01:19:09Z","updated_at":"2019-08-28T01:19:09Z","author_association":"MEMBER","body":"@wohali yes, sure, I'll look into this tomorrow, maybe try to find where that `timeout` in `UpdateSeq` coming from.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525543850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525684289","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-525684289","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":525684289,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTY4NDI4OQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T10:30:34Z","updated_at":"2019-08-28T10:30:34Z","author_association":"CONTRIBUTOR","body":"> @sansato I'd say `info[\"sizes.active\"]` is the best option here, it's a size of \"live\" data in bytes, so it should go down when doc deleted and db then compacted.\r\n> \r\n> But I agree with @iilyak, the fact that in your trace finale data and disk sizes bigger than the originals indicates that compaction not finished at the time of final test assertion, i.e. it's not the question of _what_ to compare, but more of a question _when_ to compare.\r\n\r\n@iilyak @eiri @sansato I have run this compaction test with increased timeouts of 99999999 ms (~27 hours), yet the compaction doesn't complete and the test fails/times out.\r\n\r\n> I appreciate it's not a simple task, sizes calculation, especially in combination with compaction is convoluted, so maybe someone more proficient than me in elixir suite can disable this test for time being and we'll get back to it in version 3.x\r\n\r\n@eiri I agree with you on this, I myself am quite new to couchdb/elixir/erlang and it was a challenging task, though I could figure above details with the limited amount of knowledge I could gather.\r\nCould we somehow disable this test for now and revisit it later, so that we can build the entire couchdb & the test suites off top of the tree/latest master branch without having to make any changes at the users end?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525684289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525854741","html_url":"https://github.com/apache/couchdb/issues/2150#issuecomment-525854741","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2150","id":525854741,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTg1NDc0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T17:56:44Z","updated_at":"2019-08-28T17:56:44Z","author_association":"MEMBER","body":"This is a Fauxton issue - I'll move the issue for you.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525854741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525944926","html_url":"https://github.com/apache/couchdb/pull/2149#issuecomment-525944926","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2149","id":525944926,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTk0NDkyNg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-28T22:21:36Z","updated_at":"2019-08-28T22:21:36Z","author_association":"MEMBER","body":"Found it, finally! Both my change and my theory on incorrectly set `update_seq` turned out to be red herrings, becuase I should've been checking line 105 in source [at time of 2.3 release](https://github.com/apache/couchdb/blob/99825820d12d992c30caad007de3942761bf457e/src/fabric/src/fabric_view_all_docs.erl#L105)\r\n\r\nIt's pretty straight forward case where in query for `_all_docs` with keys array, `doc_receive_loop` timing out and returns `timeout` atom to clash with expected `{ok, Acc}`.\r\n\r\nPR with patch shortly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/525944926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526005030","html_url":"https://github.com/apache/couchdb/issues/2150#issuecomment-526005030","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2150","id":526005030,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjAwNTAzMA==","user":{"login":"iamgollum","id":1408766,"node_id":"MDQ6VXNlcjE0MDg3NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1408766?v=4","gravatar_id":"","url":"https://api.github.com/users/iamgollum","html_url":"https://github.com/iamgollum","followers_url":"https://api.github.com/users/iamgollum/followers","following_url":"https://api.github.com/users/iamgollum/following{/other_user}","gists_url":"https://api.github.com/users/iamgollum/gists{/gist_id}","starred_url":"https://api.github.com/users/iamgollum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamgollum/subscriptions","organizations_url":"https://api.github.com/users/iamgollum/orgs","repos_url":"https://api.github.com/users/iamgollum/repos","events_url":"https://api.github.com/users/iamgollum/events{/privacy}","received_events_url":"https://api.github.com/users/iamgollum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T03:24:15Z","updated_at":"2019-08-29T03:24:15Z","author_association":"NONE","body":"@nsthakur7 which browser and version are you using? Microsoft Edge?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526005030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526170054","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-526170054","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":526170054,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjE3MDA1NA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T12:50:25Z","updated_at":"2019-08-29T12:50:25Z","author_association":"CONTRIBUTOR","body":"@iilyak @eiri any decision on this one?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526170054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526248621","html_url":"https://github.com/apache/couchdb/issues/2154#issuecomment-526248621","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2154","id":526248621,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjI0ODYyMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T15:52:08Z","updated_at":"2019-08-29T15:52:08Z","author_association":"CONTRIBUTOR","body":"Thank you for your report.\r\n\r\nDo you see any errors in the log related to broken connections, timeouts, retries, or failing replication jobs?\r\n\r\nA few other notes:\r\n\r\n`retries_per_request = 20` could be lowered probably. The retries have a doubling exponential backoff starting at 0.25 sec and a max wait time of 5 minutes. The default value of 5 would be '0.25 * 2^5 = 8` sec. `6` would be `16` sec, etc. This was probably more useful before the replicator had a scheduler, but it with a scheduler it might be better to lower retries for individual requests, let the job crash and retry later again as whole.\r\n\r\nAnother setting that could probably be adjusted is replicator's `checkpoint_interval`. By default it is 30000 (msec), that is 30 sec, but if you do notice that your replications job are crashing because of network connection failures, then maybe lower that to 5 or 10 seconds.\r\n\r\nAlso noticed you set `[httpd] server_options` buffer size. I wonder if you do it because of this issue: https://github.com/mochi/mochiweb/commit/f86693f06e05f2f6cf17433134a6891bd6634a53 and also if you really want to set on `[httpd] ...` instead of `[chttpd] ...`. `[httpd] ...` section mostly (but not always) affects just the backdoor / local listening (port 5986). The regular db server_options setting would be under the `[chttpd]` section.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526248621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526265552","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-526265552","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":526265552,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjI2NTU1Mg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T16:36:26Z","updated_at":"2019-08-29T16:36:26Z","author_association":"CONTRIBUTOR","body":"The decision for this PR is:\r\n- current test checks for the right condition\r\n- we shouldn't inverse the condition (-1 to this PR in its current form)\r\n- couchdb community should investigate why compaction is not compacting (or cannot complete) in this specific case\r\n- the best we can do is to disable this test until we figure out the fix for the compactor (would you mind to issue a PR to disable the test?)\r\n   - the tests can be disabled using `@tag :pending`\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526265552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526378631","html_url":"https://github.com/apache/couchdb/issues/2144#issuecomment-526378631","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2144","id":526378631,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjM3ODYzMQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T21:59:50Z","updated_at":"2019-08-29T21:59:50Z","author_association":"CONTRIBUTOR","body":"In your example:\r\n```\r\ncurl -H 'Content-Type: application/json' -X POST http://127.0.0.1:5984/kitura_test_db -d '{\"id\": \"123+456\",\"key\": \"123+456\"}'\r\n```\r\nyou are using a field named `id` in the document body, which does _not_ actually specify the document id. When creating a new document via POST, use `_id`; see [the docs](https://docs.couchdb.org/en/latest/api/database/common.html#post--db) for details. I think this is confusing, but I assume there's a historical reason for this apparent inconsistency.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526378631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526381398","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-526381398","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":526381398,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjM4MTM5OA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T22:10:21Z","updated_at":"2019-08-29T22:10:21Z","author_association":"CONTRIBUTOR","body":"> the tests can be disabled using @tag :pending\r\n\r\nIf we do end up disabling the test, I would encourage adding a comment pointing to this issue so that future code spelunkers will understand the history behind the decision.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526381398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526449372","html_url":"https://github.com/apache/couchdb/issues/2144#issuecomment-526449372","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2144","id":526449372,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjQ0OTM3Mg==","user":{"login":"harish1992","id":8079329,"node_id":"MDQ6VXNlcjgwNzkzMjk=","avatar_url":"https://avatars.githubusercontent.com/u/8079329?v=4","gravatar_id":"","url":"https://api.github.com/users/harish1992","html_url":"https://github.com/harish1992","followers_url":"https://api.github.com/users/harish1992/followers","following_url":"https://api.github.com/users/harish1992/following{/other_user}","gists_url":"https://api.github.com/users/harish1992/gists{/gist_id}","starred_url":"https://api.github.com/users/harish1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harish1992/subscriptions","organizations_url":"https://api.github.com/users/harish1992/orgs","repos_url":"https://api.github.com/users/harish1992/repos","events_url":"https://api.github.com/users/harish1992/events{/privacy}","received_events_url":"https://api.github.com/users/harish1992/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T04:18:03Z","updated_at":"2019-08-30T04:18:03Z","author_association":"NONE","body":"So I tried the document creation again by replacing `id` with `_id`:\r\n\r\n`curl -H 'Content-Type: application/json' -X POST http://127.0.0.1:5984/kitura_test_db -d '{\"_id\": \"123+456\",\"key\": \"123+456\"}'`\r\n\r\nResponse:\r\n\r\n`{\"ok\":true,\"id\":\"123+456\",\"rev\":\"3-70ff850521574a05877483e9828dc65c\"}`\r\n\r\nSo the document gets successfully created. But the catch here is , I am unable to retrieve the document using `_id`.\r\n \r\nThe request `curl http://127.0.0.1:5984/kitura_test_db/123+456`  yields the response\r\n\r\n`{\"error\":\"not_found\",\"reason\":\"missing\"}` \r\n\r\nBut the request:\r\n`curl http://127.0.0.1:5984/kitura_test_db/_all_docs`  results in\r\n\r\n`{\"total_rows\":2,\"offset\":0,\"rows\":[\r\n{\"id\":\"123+456\",\"key\":\"123+456\",\"value\":{\"rev\":\"3-70ff850521574a05877483e9828dc65c\"}},\r\n{\"id\":\"123456\",\"key\":\"123456\",\"value\":{\"rev\":\"3-aceebea5ce5cc3aaa33ff520e1ee40dc\"}}\r\n]}`\r\n\r\nAs you can see the document with `_id` `123+456` is still present, but I am unable to retrieve it like other docs  with no `+` in their ids  unless I percent encode `+` like this:\r\n\r\n`curl http://127.0.0.1:5984/kitura_test_db/123%2B456` \r\n\r\nResponse:\r\n\r\n`{\"_id\":\"123+456\",\"_rev\":\"3-70ff850521574a05877483e9828dc65c\",\"key\":\"123+456\"}`\r\n\r\nWhy does the CouchDB agent allow the document creation with `+` sign but require percent encoding of  `+` sign for retrieval? \r\n\r\n### Steps to reproduce the issue\r\n\r\nStep 1: create a doc with `_id` `123+456` \r\n\r\n  `curl -H 'Content-Type: application/json' -X POST http://127.0.0.1:5984/kitura_test_db -d '{\"_id\": \"123+456\",\"key\": \"123+456\"}'`\r\n\r\nStep 2: Retrieve the doc\r\n\r\n`curl http://127.0.0.1:5984/kitura_test_db/123+456`\r\n\r\n### Expected behaviour\r\n\r\nif `_id` with `+` sign is valid then all the DB operations must be possible on document not just creation\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526449372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526569450","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-526569450","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":526569450,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjU2OTQ1MA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T11:39:36Z","updated_at":"2019-08-30T11:39:36Z","author_association":"CONTRIBUTOR","body":"Hi @iilyak @jaydoane thanks for the updates. I have opened PR https://github.com/apache/couchdb/pull/2157 to disable this test until we figure out the fix for the compactor. Added comments and reference to this issue. Please review and approve the new PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526569450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526594264","html_url":"https://github.com/apache/couchdb/pull/2157#issuecomment-526594264","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2157","id":526594264,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjU5NDI2NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T13:05:15Z","updated_at":"2019-08-30T13:05:15Z","author_association":"CONTRIBUTOR","body":"Thank you @sarveshtamba.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526594264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526725511","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-526725511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":526725511,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjcyNTUxMQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T19:45:45Z","updated_at":"2019-08-30T19:46:08Z","author_association":"MEMBER","body":"The database will continue to serve those documents, but any subsequent updates to the documents will be rejected unless the new version of the document is < 1 MB","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526725511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526802095","html_url":"https://github.com/apache/couchdb/issues/2144#issuecomment-526802095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2144","id":526802095,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjgwMjA5NQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-31T05:41:27Z","updated_at":"2019-08-31T05:41:27Z","author_association":"CONTRIBUTOR","body":"I think the distinction is that in the document body the `+` character does not need to be URL encoded, but it does when it's used in the URL.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526802095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526938783","html_url":"https://github.com/apache/couchdb/issues/2144#issuecomment-526938783","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2144","id":526938783,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjkzODc4Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-01T17:35:52Z","updated_at":"2019-09-01T17:35:52Z","author_association":"MEMBER","body":"Correct, Jay. Url encoding is needed in urls, but not elsewhere. I'm not seeing a problem here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/526938783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527150151","html_url":"https://github.com/apache/couchdb/issues/2161#issuecomment-527150151","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2161","id":527150151,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzE1MDE1MQ==","user":{"login":"arulrajmichael","id":9201385,"node_id":"MDQ6VXNlcjkyMDEzODU=","avatar_url":"https://avatars.githubusercontent.com/u/9201385?v=4","gravatar_id":"","url":"https://api.github.com/users/arulrajmichael","html_url":"https://github.com/arulrajmichael","followers_url":"https://api.github.com/users/arulrajmichael/followers","following_url":"https://api.github.com/users/arulrajmichael/following{/other_user}","gists_url":"https://api.github.com/users/arulrajmichael/gists{/gist_id}","starred_url":"https://api.github.com/users/arulrajmichael/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arulrajmichael/subscriptions","organizations_url":"https://api.github.com/users/arulrajmichael/orgs","repos_url":"https://api.github.com/users/arulrajmichael/repos","events_url":"https://api.github.com/users/arulrajmichael/events{/privacy}","received_events_url":"https://api.github.com/users/arulrajmichael/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T13:33:36Z","updated_at":"2019-09-02T13:33:36Z","author_association":"NONE","body":"Version Used Couch Db 2.3.1\r\nWindows 7 Operating System.\r\n10.6 Version Of McAfee Endpoint Security","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527150151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527209605","html_url":"https://github.com/apache/couchdb/issues/2161#issuecomment-527209605","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2161","id":527209605,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzIwOTYwNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T17:21:55Z","updated_at":"2019-09-02T17:21:55Z","author_association":"MEMBER","body":"Duplicate of #1302 and #795.\r\n\r\n#1303 is the ticket to track its replacement.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527209605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527382757","html_url":"https://github.com/apache/couchdb/issues/2054#issuecomment-527382757","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2054","id":527382757,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzM4Mjc1Nw==","user":{"login":"raoyitao","id":8922993,"node_id":"MDQ6VXNlcjg5MjI5OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8922993?v=4","gravatar_id":"","url":"https://api.github.com/users/raoyitao","html_url":"https://github.com/raoyitao","followers_url":"https://api.github.com/users/raoyitao/followers","following_url":"https://api.github.com/users/raoyitao/following{/other_user}","gists_url":"https://api.github.com/users/raoyitao/gists{/gist_id}","starred_url":"https://api.github.com/users/raoyitao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raoyitao/subscriptions","organizations_url":"https://api.github.com/users/raoyitao/orgs","repos_url":"https://api.github.com/users/raoyitao/repos","events_url":"https://api.github.com/users/raoyitao/events{/privacy}","received_events_url":"https://api.github.com/users/raoyitao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-03T09:34:03Z","updated_at":"2019-09-03T09:35:19Z","author_association":"NONE","body":"> I'm also having this issue. @raoyitao did you find workaround/fix? :)\r\n\r\n@0chris No, I didn't. So I setup CouchDB cluster with 2.3.0 binary, the cluster information is saved in database, then I switch to 2.3.1 to start CouchDB, seems it could work. But it's still a troublesome thing that I cannot directly run CouchDB 2.3.1 to setup a cluster.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527382757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527571723","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-527571723","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":527571723,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzU3MTcyMw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-03T18:02:57Z","updated_at":"2019-09-03T18:02:57Z","author_association":"MEMBER","body":"Fine by me to move this out of 3.0.\r\n\r\nIn terms of what I was thinking about for this sort of work it was basically to take this blog post [1] and make it a not terrible experience.\r\n\r\nHowever, given that we're pushing towards providing better binaries for everyone I could just as well see us having various pre-built binaries that include some of the major extra bits like search or geo or what not. Which is to say that maybe creating various flavor builds might be a replacement for trying to work up a whole Erlang release config/tooling thing?\r\n\r\n[1] https://developer.ibm.com/dwblog/2015/text-search-apache-couchdb/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527571723/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527578370","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-527578370","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":527578370,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzU3ODM3MA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-03T18:20:29Z","updated_at":"2019-09-03T18:20:29Z","author_association":"MEMBER","body":"Adding Dreyfus to CouchDB went a very long way towards eliminating that blog post. Most of the rest of the work is on Clouseau packaging, which is outside this project.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527578370/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527962486","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-527962486","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":527962486,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk2MjQ4Ng==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T15:48:46Z","updated_at":"2019-09-04T15:48:46Z","author_association":"MEMBER","body":"Hah! Totally forgot that we added dreyfus which sure does remove most of the thorny bits that I was worried about. And I'd agree that the Clouseau side of things is outside CouchDB.\r\n\r\nWorks for me as good enough for 3.0 certainly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527962486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527987961","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-527987961","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":527987961,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk4Nzk2MQ==","user":{"login":"natevw","id":265902,"node_id":"MDQ6VXNlcjI2NTkwMg==","avatar_url":"https://avatars.githubusercontent.com/u/265902?v=4","gravatar_id":"","url":"https://api.github.com/users/natevw","html_url":"https://github.com/natevw","followers_url":"https://api.github.com/users/natevw/followers","following_url":"https://api.github.com/users/natevw/following{/other_user}","gists_url":"https://api.github.com/users/natevw/gists{/gist_id}","starred_url":"https://api.github.com/users/natevw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natevw/subscriptions","organizations_url":"https://api.github.com/users/natevw/orgs","repos_url":"https://api.github.com/users/natevw/repos","events_url":"https://api.github.com/users/natevw/events{/privacy}","received_events_url":"https://api.github.com/users/natevw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T16:49:27Z","updated_at":"2019-09-04T16:49:27Z","author_association":"NONE","body":"Yes, to me I continue seeing similar error logs (and with non-system databases) and I still suspect it's due to dropped client connections.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527987961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527995350","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-527995350","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":527995350,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk5NTM1MA==","user":{"login":"jdmintz","id":25693061,"node_id":"MDQ6VXNlcjI1NjkzMDYx","avatar_url":"https://avatars.githubusercontent.com/u/25693061?v=4","gravatar_id":"","url":"https://api.github.com/users/jdmintz","html_url":"https://github.com/jdmintz","followers_url":"https://api.github.com/users/jdmintz/followers","following_url":"https://api.github.com/users/jdmintz/following{/other_user}","gists_url":"https://api.github.com/users/jdmintz/gists{/gist_id}","starred_url":"https://api.github.com/users/jdmintz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdmintz/subscriptions","organizations_url":"https://api.github.com/users/jdmintz/orgs","repos_url":"https://api.github.com/users/jdmintz/repos","events_url":"https://api.github.com/users/jdmintz/events{/privacy}","received_events_url":"https://api.github.com/users/jdmintz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:08:21Z","updated_at":"2019-09-04T17:08:44Z","author_association":"NONE","body":"I shared this in #fdb channel  in CouchDB slack, but posting here as well https://docs.google.com/document/d/1vvqgMR5U1X8yIJj7ctse_D31VVNXb9NnMIJKg8bDBl8/edit.\r\n\r\nWas keeping track of some of the deprecations and limitations in CouchDB 3.0 + 4.0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527995350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527999808","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-527999808","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":527999808,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk5OTgwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:20:17Z","updated_at":"2019-09-04T17:21:45Z","author_association":"MEMBER","body":"Hi @jdmintz , thanks for joining our community. I assume you're with IBM/Cloudant? We've never had any interaction with you in the CouchDB community through our official communication channels (Slack is not official).\r\n\r\nI want to note for observers of this ticket that decisions on what features are and aren't being kept from CouchDB 1.x are made by the committer community and CouchDB PMC, not by IBM/Cloudant. While we're really happy to have IBM's support in building CouchDB 4.0, the ultimate decision is reached by our community, not by any corporation.\r\n\r\nFurther, those decisions are reached through discussions on our official mailing list, `dev@couchdb.apache.org`. There are also formal requirements for feature deprecation set our in our [project bylaws](http://couchdb.apache.org/bylaws.html) Posting plans by a single part here here is insufficient.\r\n\r\nI would encourage you to join our developer mailing list if you are proposing deprecations over and above what's already been discussed by the community in this topic or on our list.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/527999808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528005711","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528005711","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528005711,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAwNTcxMQ==","user":{"login":"jdmintz","id":25693061,"node_id":"MDQ6VXNlcjI1NjkzMDYx","avatar_url":"https://avatars.githubusercontent.com/u/25693061?v=4","gravatar_id":"","url":"https://api.github.com/users/jdmintz","html_url":"https://github.com/jdmintz","followers_url":"https://api.github.com/users/jdmintz/followers","following_url":"https://api.github.com/users/jdmintz/following{/other_user}","gists_url":"https://api.github.com/users/jdmintz/gists{/gist_id}","starred_url":"https://api.github.com/users/jdmintz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdmintz/subscriptions","organizations_url":"https://api.github.com/users/jdmintz/orgs","repos_url":"https://api.github.com/users/jdmintz/repos","events_url":"https://api.github.com/users/jdmintz/events{/privacy}","received_events_url":"https://api.github.com/users/jdmintz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:36:10Z","updated_at":"2019-09-04T17:36:10Z","author_association":"NONE","body":"Apologize if it came across as decision making. That was not my intent. \r\n\r\nI was just seeking to summarize things scattered across ML posts, RFC drafts, and earlier comments in this ticket. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528005711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528010310","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528010310","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528010310,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxMDMxMA==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:48:05Z","updated_at":"2019-09-04T17:48:05Z","author_association":"CONTRIBUTOR","body":"> I want to note for observers of this ticket that decisions on what features are and aren't being kept from CouchDB 1.x are made by the committer community and CouchDB PMC, not by IBM/Cloudant. \r\n\r\nI want to note for observers that this statement is at least imprecise. Consider counting +1 replies under deprecation [VOTE] postings at MLs. About 3/4 of votes are from IBM/Cloudant employees.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528010310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528011491","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528011491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528011491,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxMTQ5MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:51:05Z","updated_at":"2019-09-04T17:51:05Z","author_association":"MEMBER","body":"only PMC votes are binding.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528011491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528011578","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528011578","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528011578,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxMTU3OA==","user":{"login":"johs","id":48370,"node_id":"MDQ6VXNlcjQ4Mzcw","avatar_url":"https://avatars.githubusercontent.com/u/48370?v=4","gravatar_id":"","url":"https://api.github.com/users/johs","html_url":"https://github.com/johs","followers_url":"https://api.github.com/users/johs/followers","following_url":"https://api.github.com/users/johs/following{/other_user}","gists_url":"https://api.github.com/users/johs/gists{/gist_id}","starred_url":"https://api.github.com/users/johs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/johs/subscriptions","organizations_url":"https://api.github.com/users/johs/orgs","repos_url":"https://api.github.com/users/johs/repos","events_url":"https://api.github.com/users/johs/events{/privacy}","received_events_url":"https://api.github.com/users/johs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:51:16Z","updated_at":"2019-09-04T17:51:16Z","author_association":"NONE","body":"Hi @wohali ,\r\nA summarization of outgoing features would have been nice, especially with respect to 3.0\r\n\r\nIn his August report @janl said...\r\n> Current planning includes both a CouchDB 3.0 and a CouchDB 4.0 milestone. 3.0\r\n> will include the best version of the current, mostly Erlang-based project,\r\n> with many new features contributed by various project partners (but notably\r\n> IBM).\r\n\r\n... which made me hopeful that the \"couch app\" features would survive into version 3.0 together with the spider monkey update, ref https://github.com/apache/couchdb/issues/1875 \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528011578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528012656","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528012656","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528012656,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxMjY1Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:54:03Z","updated_at":"2019-09-04T17:54:03Z","author_association":"MEMBER","body":"@ermouth First off, this is not the place for this discussion.\r\n\r\nSecondly, the committer base and PMC is quite diverse - [here is a full list](https://people.apache.org/committers-by-project.html#couchdb).\r\n\r\n@johs That decision has not been taken yet, and the two decisions you mention are indeed separate.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528012656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528013181","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528013181","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528013181,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxMzE4MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T17:55:22Z","updated_at":"2019-09-04T17:55:22Z","author_association":"MEMBER","body":"correction, committer votes are binding for some things, PMC votes for other things.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528013181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528015694","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528015694","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528015694,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxNTY5NA==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T18:01:12Z","updated_at":"2019-09-04T18:01:12Z","author_association":"CONTRIBUTOR","body":"@wohali, it’s not a discussion, I just state that +1 votes under deprecations are made mostly by PMCs who are IBM/Cloudant employees. This fact is easily accountable, which raise obvious questions to you personally, as ASF board member responsible for ethics.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528015694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528017333","html_url":"https://github.com/apache/couchdb/issues/1534#issuecomment-528017333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1534","id":528017333,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODAxNzMzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T18:04:54Z","updated_at":"2019-09-04T18:04:54Z","author_association":"MEMBER","body":"@ermouth Point taken. Yes, I am well aware of this concern, and am one of the louder voices regarding \"corporate capture\" of projects at the Foundation level - which I think everyone on the CouchDB project knows as well.\r\n\r\nBut this is not the place to discuss this point. If you have anything further on this topic, please take it to the mailing list, not this issue - it does not belong here.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528017333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528154300","html_url":"https://github.com/apache/couchdb/issues/2164#issuecomment-528154300","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2164","id":528154300,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODE1NDMwMA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T01:17:38Z","updated_at":"2019-09-05T01:20:07Z","author_association":"MEMBER","body":"OS daemons were removed in apache/couchdb-documentation#276, which also removed the last mention of `update_notifications`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528154300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528154321","html_url":"https://github.com/apache/couchdb/issues/2164#issuecomment-528154321","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2164","id":528154321,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODE1NDMyMQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T01:17:43Z","updated_at":"2019-09-05T01:17:43Z","author_association":"MEMBER","body":"Proxy docs were removed in apache/couchdb-documentation#299","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528154321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528157204","html_url":"https://github.com/apache/couchdb/issues/2164#issuecomment-528157204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2164","id":528157204,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODE1NzIwNA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T01:31:53Z","updated_at":"2019-09-05T01:31:53Z","author_association":"MEMBER","body":"apache/couchdb-documentation#328 took care of removing the documentation for runtime configurability of query servers, global handlers, etc.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528157204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528158098","html_url":"https://github.com/apache/couchdb/issues/2164#issuecomment-528158098","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2164","id":528158098,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODE1ODA5OA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T01:36:36Z","updated_at":"2019-09-05T01:36:36Z","author_association":"MEMBER","body":"Actually there are still a couple of mentions of HTTP handler configurations in the old `[httpd]` configuration block, e.g. http://docs.couchdb.org/en/stable/config/http.html#httpd/default_handler. But probably it makes sense to expunge those as part of #1523 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528158098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528292275","html_url":"https://github.com/apache/couchdb/issues/2162#issuecomment-528292275","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2162","id":528292275,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODI5MjI3NQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T09:59:13Z","updated_at":"2019-09-05T09:59:13Z","author_association":"MEMBER","body":"@Antonio-Maranhao and @popojargo just ping you here. We would need your help to remove this in Fauxton","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528292275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528324714","html_url":"https://github.com/apache/couchdb/issues/2171#issuecomment-528324714","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2171","id":528324714,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODMyNDcxNA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T11:43:19Z","updated_at":"2019-09-05T11:43:19Z","author_association":"MEMBER","body":"Smoosh and IOQ both have extensive operator guides in the actual code repos; these could probably be edited and ported over to docs.couchdb.org. Ken does not.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528324714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528342247","html_url":"https://github.com/apache/couchdb/issues/1512#issuecomment-528342247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1512","id":528342247,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODM0MjI0Nw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T12:34:25Z","updated_at":"2019-09-05T12:34:25Z","author_association":"MEMBER","body":"I was thinking about this one recently. As far as I know the bitwise operators in MongoDB are mostly useful when operating on raw binaries in a BSON document. If we implemented them in CouchDB, would we want to work on Base64-encoded binary strings? Would we allow them to pull up attachments from disk?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528342247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528427516","html_url":"https://github.com/apache/couchdb/pull/2170#issuecomment-528427516","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2170","id":528427516,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODQyNzUxNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T15:34:18Z","updated_at":"2019-09-05T15:34:18Z","author_association":"MEMBER","body":"@janl The original transpile idea was from the couch-chakra PoC from @dmunch \r\n\r\nhttps://github.com/dmunch/couch-chakra/tree/master/js\r\n\r\nIn my super limited testing it appears to work quite well though I haven't sent anything super complicated through it.\r\n\r\nAlso for anyone that works on this, one thing I had to learn the hard way is that this line is a patch from the original esprima:\r\n\r\nhttps://github.com/dmunch/couch-chakra/blob/master/js/esprima.js#L3385\r\n\r\nBy default, esprima will reject our code so we have to apply the patch to not reject the anonymous function so we can tweak the AST. Bit obvious in hindsight but I remember spending a couple hours tracking that down.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528427516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528490856","html_url":"https://github.com/apache/couchdb/issues/2162#issuecomment-528490856","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2162","id":528490856,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODQ5MDg1Ng==","user":{"login":"popojargo","id":9197078,"node_id":"MDQ6VXNlcjkxOTcwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9197078?v=4","gravatar_id":"","url":"https://api.github.com/users/popojargo","html_url":"https://github.com/popojargo","followers_url":"https://api.github.com/users/popojargo/followers","following_url":"https://api.github.com/users/popojargo/following{/other_user}","gists_url":"https://api.github.com/users/popojargo/gists{/gist_id}","starred_url":"https://api.github.com/users/popojargo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/popojargo/subscriptions","organizations_url":"https://api.github.com/users/popojargo/orgs","repos_url":"https://api.github.com/users/popojargo/repos","events_url":"https://api.github.com/users/popojargo/events{/privacy}","received_events_url":"https://api.github.com/users/popojargo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T17:36:55Z","updated_at":"2019-09-05T17:36:55Z","author_association":"MEMBER","body":"@garrensmith Gimme a few minutes :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528490856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528523294","html_url":"https://github.com/apache/couchdb/pull/2173#issuecomment-528523294","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2173","id":528523294,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODUyMzI5NA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T18:50:34Z","updated_at":"2019-09-05T18:50:34Z","author_association":"MEMBER","body":"I left the code in `couch_mrview_http` that does this for 5986 in the expectation that it will be removed separately as part of #1523 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528523294/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528524242","html_url":"https://github.com/apache/couchdb/pull/2092#issuecomment-528524242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2092","id":528524242,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODUyNDI0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T18:53:05Z","updated_at":"2019-09-05T18:53:05Z","author_association":"MEMBER","body":"Status update:\r\n\r\nI have some local work on the next part that I've not pushed yet. The idea for the `_all_docs` query is to grab the shard's `Db` record in the same way as we do for `GET /_node/$node/{db}` via the new `couch_node:do_db_req/4`, then pass it to https://github.com/apache/couchdb/blob/master/src/fabric/src/fabric_view_all_docs.erl#L23 which as far as I can tell isn't actually reachable today. (Thanks, dev who wrote this!)\r\n\r\nIf this makes sense, then my intent is to do the same thing for the other endpoints, adding methods in fabric as necessary that take actual `Db` records rather than `DbName` as a convenient way to re-use fabric to access individual shards rather than relying on couch_* functions. This will make it easier to remove couch_httpd in the last part of the PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528524242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528594266","html_url":"https://github.com/apache/couchdb/issues/1416#issuecomment-528594266","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1416","id":528594266,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODU5NDI2Ng==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T21:23:13Z","updated_at":"2019-09-05T21:23:13Z","author_association":"MEMBER","body":"Implemented in #1658 😄 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/528594266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529182110","html_url":"https://github.com/apache/couchdb/issues/1753#issuecomment-529182110","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1753","id":529182110,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTE4MjExMA==","user":{"login":"sureshvv","id":506019,"node_id":"MDQ6VXNlcjUwNjAxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/506019?v=4","gravatar_id":"","url":"https://api.github.com/users/sureshvv","html_url":"https://github.com/sureshvv","followers_url":"https://api.github.com/users/sureshvv/followers","following_url":"https://api.github.com/users/sureshvv/following{/other_user}","gists_url":"https://api.github.com/users/sureshvv/gists{/gist_id}","starred_url":"https://api.github.com/users/sureshvv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sureshvv/subscriptions","organizations_url":"https://api.github.com/users/sureshvv/orgs","repos_url":"https://api.github.com/users/sureshvv/repos","events_url":"https://api.github.com/users/sureshvv/events{/privacy}","received_events_url":"https://api.github.com/users/sureshvv/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-08T08:32:31Z","updated_at":"2019-09-10T06:19:52Z","author_association":"NONE","body":"Will specifying 100% for db-fragmentation disable compaction for the db?\r\n\r\n    [compaction_daemon]\r\n         _default=''\r\n\r\ndid not work for me. Using version 2.3.1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529182110/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529466718","html_url":"https://github.com/apache/couchdb/pull/2178#issuecomment-529466718","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2178","id":529466718,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTQ2NjcxOA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T13:11:17Z","updated_at":"2019-09-09T13:11:17Z","author_association":"CONTRIBUTOR","body":"The description of the PR is misleading. It should be updated to \"remove view compaction files on view cleanup\".","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529466718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529467785","html_url":"https://github.com/apache/couchdb/pull/2178#issuecomment-529467785","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2178","id":529467785,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTQ2Nzc4NQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T13:13:50Z","updated_at":"2019-09-09T13:13:50Z","author_association":"CONTRIBUTOR","body":"Is there a reason you think `couch_mrview_cleanup:run(DbName).` shouldn't be used here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529467785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529471293","html_url":"https://github.com/apache/couchdb/pull/2178#issuecomment-529471293","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2178","id":529471293,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTQ3MTI5Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T13:21:34Z","updated_at":"2019-09-09T13:21:45Z","author_association":"CONTRIBUTOR","body":"> The description of the PR is misleading. It should be updated to \"remove view compaction files on view cleanup\".\r\n\r\nI was wrong your description is good.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529471293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529473335","html_url":"https://github.com/apache/couchdb/pull/2178#issuecomment-529473335","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2178","id":529473335,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTQ3MzMzNQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T13:26:06Z","updated_at":"2019-09-09T13:26:17Z","author_association":"CONTRIBUTOR","body":"> Is there a reason you think couch_mrview_cleanup:run(DbName). shouldn't be used here?\r\n\r\nIt is `couch_mrview_cleanup:run(db)` instead of ` couch_mrview_cleanup:run(DbName)`. So it is shard db level instead of db level. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529473335/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529474151","html_url":"https://github.com/apache/couchdb/pull/2178#issuecomment-529474151","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2178","id":529474151,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTQ3NDE1MQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T13:27:51Z","updated_at":"2019-09-09T13:27:51Z","author_association":"CONTRIBUTOR","body":"Thank you. I also take time to get better understanding on logic :-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529474151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529510700","html_url":"https://github.com/apache/couchdb/issues/1383#issuecomment-529510700","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1383","id":529510700,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTUxMDcwMA==","user":{"login":"jamieluckett","id":359910,"node_id":"MDQ6VXNlcjM1OTkxMA==","avatar_url":"https://avatars.githubusercontent.com/u/359910?v=4","gravatar_id":"","url":"https://api.github.com/users/jamieluckett","html_url":"https://github.com/jamieluckett","followers_url":"https://api.github.com/users/jamieluckett/followers","following_url":"https://api.github.com/users/jamieluckett/following{/other_user}","gists_url":"https://api.github.com/users/jamieluckett/gists{/gist_id}","starred_url":"https://api.github.com/users/jamieluckett/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamieluckett/subscriptions","organizations_url":"https://api.github.com/users/jamieluckett/orgs","repos_url":"https://api.github.com/users/jamieluckett/repos","events_url":"https://api.github.com/users/jamieluckett/events{/privacy}","received_events_url":"https://api.github.com/users/jamieluckett/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-09T14:45:31Z","updated_at":"2019-09-09T14:45:31Z","author_association":"CONTRIBUTOR","body":"Any update on this issue? Feels like it's the same as https://github.com/apache/couchdb/issues/2158","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/529510700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]