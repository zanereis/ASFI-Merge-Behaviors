[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810474481","html_url":"https://github.com/apache/iceberg/pull/2393#issuecomment-810474481","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2393","id":810474481,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ3NDQ4MQ==","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:17:08Z","updated_at":"2021-03-30T18:17:08Z","author_association":"CONTRIBUTOR","body":"Thanks @RussellSpitzer @szehon-ho for the review and merge!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810474481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810475024","html_url":"https://github.com/apache/iceberg/pull/2368#issuecomment-810475024","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2368","id":810475024,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ3NTAyNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:17:54Z","updated_at":"2021-03-30T18:17:54Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @uncleGen! And thanks for catching the API issue, @aokolnychyi!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810475024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810484036","html_url":"https://github.com/apache/iceberg/pull/2266#issuecomment-810484036","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2266","id":810484036,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ4NDAzNg==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:31:35Z","updated_at":"2021-03-30T18:31:35Z","author_association":"COLLABORATOR","body":"Whoops, now linter is good.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810484036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810485584","html_url":"https://github.com/apache/iceberg/pull/2358#issuecomment-810485584","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2358","id":810485584,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ4NTU4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:33:52Z","updated_at":"2021-03-30T18:33:52Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @szehon-ho! Looks like a good start. I think we can iterate on how this rewrites prediates from the table schema so that they can be applied to data files.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810485584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810549378","html_url":"https://github.com/apache/iceberg/pull/1744#issuecomment-810549378","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1744","id":810549378,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDU0OTM3OA==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T20:17:38Z","updated_at":"2021-03-30T20:23:10Z","author_association":"COLLABORATOR","body":"Yes , as we talked offline, I ended up debugging the same thing as @RussellSpitzer while hitting https://github.com/apache/iceberg/issues/1378 . My thought was that that changing the PruneColumns or BuildAvroProjection behaviour would be a bit involved, so I took a different approach, which I put up as reference:  https://github.com/apache/iceberg/pull/2395\r\n\r\nIt's a poor workaround of the problem by adding non-empty struct when reading the Metadata (manifest) Entries and All-Entries table, though it seems to work for most cases. (Bug hits nested non-empty required structs that are pruned away, can look for those if there are more)  I just put it as an option in case there is no good other fix.\r\n\r\nOf course if there is a proper fix, I'd be interested to follow/ help wherever I can, though I heard from Russell that it is not very easy :)\r\n\r\nIn any case would love to see a solution to the bug.  We were trying to write an analytics job that calculated how many data lands in a table per time period, and thought to aggregate entries table and join with snapshot table (which has timestamp), but it seems this bug prevents any aggregates on entries table, without ugly workarounds.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810549378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810685833","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810685833","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810685833,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDY4NTgzMw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T01:27:24Z","updated_at":"2021-03-31T01:30:28Z","author_association":"CONTRIBUTOR","body":"I am afraid it does not solve our issues with Kryo. We still are going to fail if we get a non-serializable byte buffer.\r\n\r\nI think `SerializableByteBufferMap` fixes the problem for Java serialization but we don't really have a solution for Kryo. If we switch to `DirectByteBuffer` from `HeapByteBuffer`, the Kryo tests in this PR will fail.\r\n\r\nWe probably have two options:\r\n- Require a custom serializer to be registered for non-serializable byte buffer implementations.\r\n- Modify `SerializableByteBufferMap` to store byte arrays, which would mean eager conversion of byte buffers to arrays.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810685833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810686511","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810686511","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810686511,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDY4NjUxMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T01:29:00Z","updated_at":"2021-03-31T01:29:00Z","author_association":"CONTRIBUTOR","body":"Does my analysis sound right to you, @openinx @rdblue?\r\n\r\ncc others as well, @RussellSpitzer @yyanyy @jackye1995 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810686511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810687351","html_url":"https://github.com/apache/iceberg/pull/1100#issuecomment-810687351","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1100","id":810687351,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDY4NzM1MQ==","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T01:30:51Z","updated_at":"2021-03-31T01:30:51Z","author_association":"CONTRIBUTOR","body":"Just want to give a short update: I started working on this, and hopefully I will push some changes over the weekend","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810687351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810698456","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810698456","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810698456,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDY5ODQ1Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T01:58:42Z","updated_at":"2021-03-31T01:58:42Z","author_association":"CONTRIBUTOR","body":"Also, to answer why Spark is capable to handle unmodifiable collections: Spark registers by default com.twitter.chill serializers  that cover unmodifiable maps/lists. That's why our Spark tests work. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810698456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810708037","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-810708037","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":810708037,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDcwODAzNw==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T02:22:49Z","updated_at":"2021-03-31T02:22:49Z","author_association":"MEMBER","body":"@rdblue Yes, if we only consider the records time-travel among different snapshots,  the old versions of `partitionSpec`, `sortOrder`, `rowIdentifier` are indeed useless. Maybe I'm considering a slight different case (Still use the same example): \r\n\r\n`t1`: User defines the account_id as the row identifier;\r\n`t2`: Write few records into the table;\r\n`t3`: Write few equality deletions (by account_id) into table;\r\n`t4`: Adding profile_id to row identifier, now the identifier is account_id & profile_id;\r\n`t5`: Write few equality deletions ( by account_id & profile_id) into table;\r\n\r\nPeople modified the `RowIdentifier` from `account_id` to `(account_id, profile_id)` at timestamp `t4`, after writing few records at timestamp `t5`.  He find that the `(account_id, profile_id)` deletions will lead to business error,  so he plan to revert this iceberg table to `t3` and replaying all deletions whose identifier are `(account_id)`. \r\n\r\nMy question is:  after reverting the table to `t3`,  should people still see the incorrect row identifier `(account_id, profile_id)` by default or people should see the correct row identifier `(account_id)` by default ?  \r\n\r\nCurrently,   we implementation is the first one, that means people will need to  manually change the `(account_id, profile_id)` to `(account_id)` .  If we are very clear that we will continue to use this behavior in the future, then we really do not need to maintain multiple versions of the row key. Otherwise, maintaining multiple versions is necessary. From my understanding, the second behavior is actually more user-friendly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810708037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810716515","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-810716515","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":810716515,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDcxNjUxNQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T02:46:12Z","updated_at":"2021-03-31T02:46:12Z","author_association":"MEMBER","body":"> because we don't need to do this unless we are projecting deleted rows\r\n\r\nI think we need to figure out what's the specific implementation approach, will try to publish a PR for this if possible.\r\n\r\n> can you confirm why you wanted to be able to read equality-deleted rows like this?\r\n\r\nI think the core reason is:  it's simple to implement.  The current approach only need to translate all the eq-deletes into pos-deletes, without considering the duplicated pos-deletes.  We cloud also share most of the code path when planing tasks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810716515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810735680","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810735680","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810735680,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDczNTY4MA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T03:42:23Z","updated_at":"2021-03-31T03:42:59Z","author_association":"MEMBER","body":"@aokolnychyi   I tried to run the unit tests by switching to use `DirectByteBuffer`,  both spark/flink `TestDataFileSerialization`   tests works fine (See following patch).   So did I miss some thing in you last [comment](https://github.com/apache/iceberg/pull/2343#issuecomment-810685833) ? I guess kryo will use the Java serializer to serialize & deserialize the `SerializableByteBufferMap`, but I need to confirm this by checking the code. \r\n\r\n```diff\r\ndiff --git a/flink/src/test/java/org/apache/iceberg/flink/TestDataFileSerialization.java b/flink/src/test/java/org/apache/iceberg/flink/TestDataFileSerialization.java\r\nindex ad67b181..4b43718d 100644\r\n--- a/flink/src/test/java/org/apache/iceberg/flink/TestDataFileSerialization.java\r\n+++ b/flink/src/test/java/org/apache/iceberg/flink/TestDataFileSerialization.java\r\n@@ -196,6 +196,6 @@ public class TestDataFileSerialization {\r\n   }\r\n \r\n   private static ByteBuffer longToBuffer(long value) {\r\n-    return ByteBuffer.allocate(8).order(ByteOrder.LITTLE_ENDIAN).putLong(0, value);\r\n+    return ByteBuffer.allocateDirect(8).order(ByteOrder.LITTLE_ENDIAN).putLong(0, value);\r\n   }\r\n }\r\ndiff --git a/spark/src/test/java/org/apache/iceberg/TestDataFileSerialization.java b/spark/src/test/java/org/apache/iceberg/TestDataFileSerialization.java\r\nindex f5c2990b..eb22873d 100644\r\n--- a/spark/src/test/java/org/apache/iceberg/TestDataFileSerialization.java\r\n+++ b/spark/src/test/java/org/apache/iceberg/TestDataFileSerialization.java\r\n@@ -164,6 +164,6 @@ public class TestDataFileSerialization {\r\n   }\r\n \r\n   private static ByteBuffer longToBuffer(long value) {\r\n-    return ByteBuffer.allocate(8).order(ByteOrder.LITTLE_ENDIAN).putLong(0, value);\r\n+    return ByteBuffer.allocateDirect(8).order(ByteOrder.LITTLE_ENDIAN).putLong(0, value);\r\n   }\r\n }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810735680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810768253","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810768253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810768253,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDc2ODI1Mw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T05:15:22Z","updated_at":"2021-03-31T05:15:22Z","author_association":"CONTRIBUTOR","body":"Hm, both suites fail for me after making the change.\r\n\r\nFlink:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\nSerialization trace:\r\ncleaner (java.nio.DirectByteBuffer)\r\nlowerBounds (org.apache.iceberg.GenericDataFile)\r\ncom.esotericsoftware.kryo.KryoException: java.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\nSerialization trace:\r\ncleaner (java.nio.DirectByteBuffer)\r\nlowerBounds (org.apache.iceberg.GenericDataFile)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:82)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)\r\n\tat com.esotericsoftware.kryo.Kryo.writeClassAndObject(Kryo.java:599)\r\n\tat com.esotericsoftware.kryo.serializers.MapSerializer.write(MapSerializer.java:95)\r\n\tat com.esotericsoftware.kryo.serializers.MapSerializer.write(MapSerializer.java:21)\r\n\tat com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:523)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:61)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:495)\r\n\tat com.esotericsoftware.kryo.Kryo.writeClassAndObject(Kryo.java:599)\r\n\tat org.apache.flink.api.java.typeutils.runtime.kryo.KryoSerializer.serialize(KryoSerializer.java:316)\r\n\tat org.apache.iceberg.flink.TestDataFileSerialization.testDataFileKryoSerialization(TestDataFileSerialization.java:160)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\r\n\tat com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:118)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:175)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:157)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\n```\r\n\r\nSpark:\r\n\r\n```\r\njava.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\nSerialization trace:\r\ncleaner (java.nio.DirectByteBuffer)\r\nlowerBounds (org.apache.iceberg.GenericDataFile)\r\ncom.esotericsoftware.kryo.KryoException: java.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\nSerialization trace:\r\ncleaner (java.nio.DirectByteBuffer)\r\nlowerBounds (org.apache.iceberg.GenericDataFile)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:101)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:508)\r\n\tat com.esotericsoftware.kryo.Kryo.writeClassAndObject(Kryo.java:651)\r\n\tat com.esotericsoftware.kryo.serializers.MapSerializer.write(MapSerializer.java:113)\r\n\tat com.esotericsoftware.kryo.serializers.MapSerializer.write(MapSerializer.java:39)\r\n\tat com.esotericsoftware.kryo.Kryo.writeObject(Kryo.java:575)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:79)\r\n\tat com.esotericsoftware.kryo.serializers.FieldSerializer.write(FieldSerializer.java:508)\r\n\tat com.esotericsoftware.kryo.Kryo.writeClassAndObject(Kryo.java:651)\r\n\tat org.apache.iceberg.TestDataFileSerialization.testDataFileKryoSerialization(TestDataFileSerialization.java:109)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:48)\r\n\tat org.junit.rules.RunRules.evaluate(RunRules.java:20)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:58)\r\n\tat org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:38)\r\n\tat org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:62)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)\r\n\tat com.sun.proxy.$Proxy2.processTestClass(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:118)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:175)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:157)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.lang.IllegalArgumentException: Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\n\tat com.esotericsoftware.kryo.factories.ReflectionSerializerFactory.makeSerializer(ReflectionSerializerFactory.java:65)\r\n\tat com.esotericsoftware.kryo.factories.ReflectionSerializerFactory.makeSerializer(ReflectionSerializerFactory.java:43)\r\n\tat com.esotericsoftware.kryo.Kryo.newDefaultSerializer(Kryo.java:396)\r\n\tat com.twitter.chill.KryoBase.newDefaultSerializer(KryoBase.scala:50)\r\n\tat com.esotericsoftware.kryo.Kryo.getDefaultSerializer(Kryo.java:380)\r\n\tat com.esotericsoftware.kryo.util.DefaultClassResolver.registerImplicit(DefaultClassResolver.java:74)\r\n\tat com.esotericsoftware.kryo.Kryo.getRegistration(Kryo.java:508)\r\n\tat com.esotericsoftware.kryo.util.DefaultClassResolver.writeClass(DefaultClassResolver.java:97)\r\n\tat com.esotericsoftware.kryo.Kryo.writeClass(Kryo.java:540)\r\n\tat com.esotericsoftware.kryo.serializers.ObjectField.write(ObjectField.java:75)\r\n\t... 58 more\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810768253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810768260","html_url":"https://github.com/apache/iceberg/issues/2168#issuecomment-810768260","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2168","id":810768260,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDc2ODI2MA==","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T05:15:23Z","updated_at":"2021-03-31T05:15:23Z","author_association":"NONE","body":"I moved to HadoopFileIO instead of S3FileIO as S3FileIO was asking for many aws services like dynamodb/glue/kms and we have to add them individually. My code didn't require these libraries but I think S3FileIO is only integrated with glue(Not sure). \r\n\r\nNone of these aws sdk jars were on EMR also","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810768260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810770203","html_url":"https://github.com/apache/iceberg/pull/2396#issuecomment-810770203","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2396","id":810770203,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDc3MDIwMw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T05:19:51Z","updated_at":"2021-03-31T05:19:51Z","author_association":"CONTRIBUTOR","body":"@openinx @rdblue @RussellSpitzer @yyanyy, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810770203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810822067","html_url":"https://github.com/apache/iceberg/pull/2398#issuecomment-810822067","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2398","id":810822067,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDgyMjA2Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T06:54:42Z","updated_at":"2021-03-31T06:54:42Z","author_association":"CONTRIBUTOR","body":"cc @pvary @rdblue @RussellSpitzer @yyanyy @jackye1995 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810822067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810840862","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-810840862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":810840862,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg0MDg2Mg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T07:26:05Z","updated_at":"2021-03-31T07:26:05Z","author_association":"MEMBER","body":"> Unable to create serializer \"com.esotericsoftware.kryo.serializers.FieldSerializer\" for class: jdk.internal.ref.Cleaner\r\n\r\nOK,  from the class name `jdk.internal.ref.Cleaner`,  I guess you are testing this in openjdk-11 because that class was introduced since jdk11  ( see [here](https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/share/classes/jdk/internal/ref/Cleaner.java)) ,  I run tests under jdk8 so I did not encounter this issue. \r\n\r\nAny way ,  I think it's necessary to address this issue,  let me consider how to get this done. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810840862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810886602","html_url":"https://github.com/apache/iceberg/pull/2392#issuecomment-810886602","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2392","id":810886602,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg4NjYwMg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T08:36:17Z","updated_at":"2021-03-31T08:36:17Z","author_association":"MEMBER","body":"Got this merged,  thanks @rdblue for reviewing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810886602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810894095","html_url":"https://github.com/apache/iceberg/issues/2397#issuecomment-810894095","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2397","id":810894095,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg5NDA5NQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T08:48:11Z","updated_at":"2021-03-31T08:48:11Z","author_association":"MEMBER","body":"@wuwangben  In this lines: \r\n\r\n```java\r\nFlinkSource.forRowData().env(bsEnv).filters(Collections.singletonList(filter)).project(flinkSchema)\r\n```\r\n\r\nThe `filters` are used to push down filters to data files, then we don't have read all the data files from iceberg table.  But those filters won't be applied in row-level,  that means  we may still read more rows from the filtered data files. In you case,  I think we will still need to filter the unexpected rows in `DataStream` by:\r\n\r\n```java\r\ndataStream.filter(FilterFunction func);\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810894095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810897399","html_url":"https://github.com/apache/iceberg/issues/2397#issuecomment-810897399","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2397","id":810897399,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDg5NzM5OQ==","user":{"login":"wuwangben","id":16200775,"node_id":"MDQ6VXNlcjE2MjAwNzc1","avatar_url":"https://avatars.githubusercontent.com/u/16200775?v=4","gravatar_id":"","url":"https://api.github.com/users/wuwangben","html_url":"https://github.com/wuwangben","followers_url":"https://api.github.com/users/wuwangben/followers","following_url":"https://api.github.com/users/wuwangben/following{/other_user}","gists_url":"https://api.github.com/users/wuwangben/gists{/gist_id}","starred_url":"https://api.github.com/users/wuwangben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wuwangben/subscriptions","organizations_url":"https://api.github.com/users/wuwangben/orgs","repos_url":"https://api.github.com/users/wuwangben/repos","events_url":"https://api.github.com/users/wuwangben/events{/privacy}","received_events_url":"https://api.github.com/users/wuwangben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T08:53:19Z","updated_at":"2021-03-31T08:53:19Z","author_association":"NONE","body":"tks","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810897399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810953227","html_url":"https://github.com/apache/iceberg/pull/2324#issuecomment-810953227","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2324","id":810953227,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDk1MzIyNw==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T10:19:40Z","updated_at":"2021-03-31T10:19:40Z","author_association":"CONTRIBUTOR","body":"Hey @rdblue I have a fix in projectnessie/nessie#1016 which should be released early next week. Will update this PR once iceberg has been updated to `0.6.0` of nessie.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810953227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810962723","html_url":"https://github.com/apache/iceberg/pull/2129#issuecomment-810962723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2129","id":810962723,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDk2MjcyMw==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T10:35:49Z","updated_at":"2021-03-31T10:35:49Z","author_association":"CONTRIBUTOR","body":"Looks good to me @lcspinter ! \r\n\r\nI am happy if @rdblue @marton-bod and @pvary are","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/810962723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811131816","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-811131816","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":811131816,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTEzMTgxNg==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T14:54:32Z","updated_at":"2021-03-31T14:54:32Z","author_association":"COLLABORATOR","body":"@rdblue @openinx , I think the goal here is to provide more fine-grained compaction actions. Let me show more background.\r\n\r\nWe have many internal flink jobs that consume dozens of billions of messages from the MQ system and sink to the iceberg every day. Since the user wants to see data ASAP so they usually set checkpoint in a minute or less. As a result, it produces a huge amount of small files on HDFS. To optimize the read performance, we have to compact or cluster the small files while compaction or clustering itself needs resources and brings overhead for the cluster. To mitigate overhead for the name node and save the resource for the user, we optimized the compaction action to fine-grained actions with predicate and group by partition.\r\n\r\nAs we are going to support consuming CDC streaming data, I suppose there will be a lot of equality deletes and position deletes files. So we need more fine-grained actions to optimize the read path like what we did for data file compaction. Actually, we have four kinds of compaction for deletes.\r\n\r\n1. Convert all equality deletes to position deletes.\r\n2. Cluster all position deletes to one.\r\n3. Convert all equality deletes and position deletes to one position deletes.\r\n4. Remove all deletes.\r\n\r\nFrom my understanding, the first three compactions are minor compaction, and the last is a major one. The first and second compaction only need a few compute and IO resources, and they can also achieve the almost same optimization effect if we run the first and then the second. Of course we could implement the third finally as well.  The point is we want to provide fine-grained options to users and they could apply strategies according to the cluster situations. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811131816/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811294184","html_url":"https://github.com/apache/iceberg/pull/2394#issuecomment-811294184","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2394","id":811294184,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTI5NDE4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T18:01:19Z","updated_at":"2021-03-31T18:01:19Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks, @pvary and to everyone for reviewing!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811294184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811300434","html_url":"https://github.com/apache/iceberg/pull/2396#issuecomment-811300434","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2396","id":811300434,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTMwMDQzNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T18:11:19Z","updated_at":"2021-03-31T18:11:19Z","author_association":"CONTRIBUTOR","body":"Thanks for the review, @openinx!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811300434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811313374","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-811313374","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":811313374,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTMxMzM3NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T18:30:14Z","updated_at":"2021-03-31T18:30:14Z","author_association":"CONTRIBUTOR","body":"Let's collaborate, @openinx. I am looking into this as well. I feel the we have the same problem in Flink and Spark.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811313374/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811314089","html_url":"https://github.com/apache/iceberg/pull/2343#issuecomment-811314089","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2343","id":811314089,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTMxNDA4OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T18:31:03Z","updated_at":"2021-03-31T18:31:03Z","author_association":"CONTRIBUTOR","body":"I don't have a good solution so far. This is what I considered:\r\n\r\n- Require a custom serializer to be registered for non-serializable byte buffer implementations.\r\n- Modify `SerializableByteBufferMap` to store byte arrays, which would mean eager conversion of byte buffers to arrays.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811314089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811486171","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811486171","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811486171,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTQ4NjE3MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T21:44:35Z","updated_at":"2021-03-31T21:44:35Z","author_association":"CONTRIBUTOR","body":"> My question is: after reverting the table to t3, should people still see the incorrect row identifier (account_id, profile_id) by default or people should see the correct row identifier (account_id) by default ?\r\n\r\nI think I see the miscommunication. I don't think there is a way to roll back to t3. There is a snapshot created at t2, t3, and t5. Those snapshots are accessible via time travel and rollback. The rest of the table metadata is independent so rolling back doesn't change it. To revert both the bad write and the configuration change, the user should roll back and then set the row identifier fields to just `account_id`.\r\n\r\nKeeping table metadata and data separate (and only versioning data) is the right behavior, I think. Data is constantly evolving and we don't want to accidentally revert metadata changes -- like updating table properties -- when the data snapshot is rolled back.\r\n\r\nConsider a slightly different scenario where the rollback to t3 was needed because the source was producing bad data. Why should the `profile_id` be removed from the row identifier in that case? If Iceberg did that implicitly, then after the corrected data is turned back on, Iceberg would start deleting rows incorrectly using the wrong key.\r\n\r\nI think the right approach is to keep data a separate dimension. Since we want Iceberg to be a coordination layer between multiple services that don't know about one another,  I think it would be bad for actions that fix data to also make possibly unknown changes to metadata.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811486171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811509624","html_url":"https://github.com/apache/iceberg/pull/2398#issuecomment-811509624","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2398","id":811509624,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTUwOTYyNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T22:33:43Z","updated_at":"2021-03-31T22:33:43Z","author_association":"CONTRIBUTOR","body":"I am going to switch to using `HasTableOperations` to not expose anything new. Let me try that locally and see.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811509624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811515796","html_url":"https://github.com/apache/iceberg/pull/2401#issuecomment-811515796","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2401","id":811515796,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTUxNTc5Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T22:49:34Z","updated_at":"2021-03-31T22:49:34Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @RussellSpitzer!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811515796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811515987","html_url":"https://github.com/apache/iceberg/pull/2400#issuecomment-811515987","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2400","id":811515987,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTUxNTk4Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T22:50:08Z","updated_at":"2021-03-31T22:50:08Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @RussellSpitzer!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811515987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811524385","html_url":"https://github.com/apache/iceberg/pull/2398#issuecomment-811524385","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2398","id":811524385,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTUyNDM4NQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T23:12:23Z","updated_at":"2021-03-31T23:12:40Z","author_association":"CONTRIBUTOR","body":"@pvary @rdblue @RussellSpitzer @yyanyy @jackye1995, I've changed the approach. No more public changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811524385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811532551","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811532551","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811532551,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTUzMjU1MQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-31T23:35:45Z","updated_at":"2021-03-31T23:35:45Z","author_association":"CONTRIBUTOR","body":"Let me catch up with the discussion today.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811532551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811542461","html_url":"https://github.com/apache/iceberg/pull/2324#issuecomment-811542461","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2324","id":811542461,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU0MjQ2MQ==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T00:04:47Z","updated_at":"2021-04-01T00:04:47Z","author_association":"CONTRIBUTOR","body":"@rymurr I had a similar change for glue catalog and moved some of the methods from hive to common so that they can be reused from different catalogs, in case you are interested: #2402 thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811542461/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811558481","html_url":"https://github.com/apache/iceberg/pull/2402#issuecomment-811558481","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2402","id":811558481,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU1ODQ4MQ==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T00:44:29Z","updated_at":"2021-04-01T00:44:29Z","author_association":"CONTRIBUTOR","body":"> The changes look good to me. @jackye1995 or @yyanyy, can you confirm that the integration tests pass?\r\n\r\nThank you for the quick review! Yes I have ran the integration tests locally for both new and existing glue tests and confirmed that they all succeeded. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811558481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811561451","html_url":"https://github.com/apache/iceberg/issues/2357#issuecomment-811561451","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2357","id":811561451,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU2MTQ1MQ==","user":{"login":"junsionzhang","id":10653297,"node_id":"MDQ6VXNlcjEwNjUzMjk3","avatar_url":"https://avatars.githubusercontent.com/u/10653297?v=4","gravatar_id":"","url":"https://api.github.com/users/junsionzhang","html_url":"https://github.com/junsionzhang","followers_url":"https://api.github.com/users/junsionzhang/followers","following_url":"https://api.github.com/users/junsionzhang/following{/other_user}","gists_url":"https://api.github.com/users/junsionzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/junsionzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junsionzhang/subscriptions","organizations_url":"https://api.github.com/users/junsionzhang/orgs","repos_url":"https://api.github.com/users/junsionzhang/repos","events_url":"https://api.github.com/users/junsionzhang/events{/privacy}","received_events_url":"https://api.github.com/users/junsionzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T00:54:03Z","updated_at":"2021-04-01T00:54:03Z","author_association":"NONE","body":"@pvary  thank you so much and I will try again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811561451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811571178","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811571178","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811571178,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU3MTE3OA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T01:25:41Z","updated_at":"2021-04-01T01:25:41Z","author_association":"CONTRIBUTOR","body":"I support the idea of a row identifier as long as Iceberg does not enforce it. I see its primary usage in `UPSERT` statements where we don't know the upsert columns unless they are provided in the command.\r\n\r\nI also think it is important not to limit equality deletes to row identifier alone, which is currently handled by the spec as each delete file is associated with arbitrary column ids. We plan to leverage it in some MERGE INTO use cases, where the we can derive the delete column from the ON clause and merge columns can vary from operation to operation.\r\n\r\nW.r.t. versioning, I'd go simple. I think the current rollback semantics applies only to snapshots. We don't revert table properties or sort order. I believe we should treat row identifiers in the same way.\r\n\r\nThat said, @openinx's use case is also valid. I have seen scenarios when users want to rollback the table state completely rather the current snapshot. I think that should be done by replacing the current pointer in the catalog to an old JSON file rather than by calling the table rollback API. Do we want to expose ways for rolling back table state to the users? I think that may be handy and should cover the use case that @openinx brought up.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811571178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811574515","html_url":"https://github.com/apache/iceberg/pull/2402#issuecomment-811574515","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2402","id":811574515,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU3NDUxNQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T01:35:00Z","updated_at":"2021-04-01T01:35:00Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer, could you check?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811574515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811575706","html_url":"https://github.com/apache/iceberg/pull/2398#issuecomment-811575706","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2398","id":811575706,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU3NTcwNg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T01:38:25Z","updated_at":"2021-04-01T01:38:25Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @RussellSpitzer @yyanyy @rdblue!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811575706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811579419","html_url":"https://github.com/apache/iceberg/pull/2403#issuecomment-811579419","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2403","id":811579419,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTU3OTQxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T01:50:55Z","updated_at":"2021-04-01T01:50:55Z","author_association":"CONTRIBUTOR","body":"@openinx @pvary @yyanyy @rdblue @RussellSpitzer @jackye1995, could you take a look, please?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811579419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811609723","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811609723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811609723,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTYwOTcyMw==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T03:23:57Z","updated_at":"2021-04-01T03:23:57Z","author_association":"MEMBER","body":"Okay,  I think everyone has reached a consensus on this issue `Keeping table metadata and data separate (and only versioning data) is the right behavior`.   Then let's keep this consensus.  @aokolnychyi 's suggestion about `replacing the current pointer in the catalog to an old JSON file rather than by calling the table rollback API.`  looks good to me, I think this way we can also achieve the rollback of the table metadata (for now, this priority does not sound that high because people could change table state as they want by calling table API).\r\n\r\n> I support the idea of a row identifier as long as Iceberg does not enforce it\r\n\r\nAs a common iceberg table specification,  the row identifier don't have to be enforced. (I've left a comment [here](https://github.com/apache/iceberg/pull/2010#issuecomment-800769586)).\r\n\r\n> We plan to leverage it in some MERGE INTO use cases, where the we can derive the delete column from the ON clause and merge columns can vary from operation to operation.\r\n\r\nI don't know much about this point, I guess you may want to use row identifier to achieve some optimizations at the spark engine level. Can you provide more information?\r\n\r\n@jackye1995 ,  I think we could update this PR now, thanks for the great work\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811609723/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811641120","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811641120","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811641120,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTY0MTEyMA==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T05:06:59Z","updated_at":"2021-04-01T05:06:59Z","author_association":"CONTRIBUTOR","body":">  I have seen scenarios when users want to rollback the table state completely rather the current snapshot. I think that should be done by replacing the current pointer in the catalog to an old JSON file rather than by calling the table rollback API.\r\n\r\n+1 on this\r\n\r\n> @jackye1995 , I think we could update this PR now, thanks for the great work\r\n\r\nsounds good, will do it now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811641120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811676607","html_url":"https://github.com/apache/iceberg/pull/2386#issuecomment-811676607","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2386","id":811676607,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTY3NjYwNw==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T06:25:43Z","updated_at":"2021-04-01T06:25:43Z","author_association":"MEMBER","body":"This is a very minor change in unit tests, since @stevenzwu did not response to this PR and @rdblue show an +1 on this,  I plan to get this merged because the following PR https://github.com/apache/iceberg/pull/2303/files depends on this. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811676607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811714767","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-811714767","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":811714767,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTcxNDc2Nw==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T07:41:15Z","updated_at":"2021-04-01T07:41:15Z","author_association":"CONTRIBUTOR","body":"@openinx @rdblue should be ready for review","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811714767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811848109","html_url":"https://github.com/apache/iceberg/issues/2404#issuecomment-811848109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2404","id":811848109,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTg0ODEwOQ==","user":{"login":"dixingxing0","id":1303530,"node_id":"MDQ6VXNlcjEzMDM1MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1303530?v=4","gravatar_id":"","url":"https://api.github.com/users/dixingxing0","html_url":"https://github.com/dixingxing0","followers_url":"https://api.github.com/users/dixingxing0/followers","following_url":"https://api.github.com/users/dixingxing0/following{/other_user}","gists_url":"https://api.github.com/users/dixingxing0/gists{/gist_id}","starred_url":"https://api.github.com/users/dixingxing0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dixingxing0/subscriptions","organizations_url":"https://api.github.com/users/dixingxing0/orgs","repos_url":"https://api.github.com/users/dixingxing0/repos","events_url":"https://api.github.com/users/dixingxing0/events{/privacy}","received_events_url":"https://api.github.com/users/dixingxing0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T11:38:41Z","updated_at":"2021-04-01T11:38:41Z","author_association":"CONTRIBUTOR","body":"There is a PR for fixing the empty commits as you met: https://github.com/apache/iceberg/pull/2042","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811848109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811852416","html_url":"https://github.com/apache/iceberg/pull/2042#issuecomment-811852416","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2042","id":811852416,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTg1MjQxNg==","user":{"login":"dixingxing0","id":1303530,"node_id":"MDQ6VXNlcjEzMDM1MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1303530?v=4","gravatar_id":"","url":"https://api.github.com/users/dixingxing0","html_url":"https://github.com/dixingxing0","followers_url":"https://api.github.com/users/dixingxing0/followers","following_url":"https://api.github.com/users/dixingxing0/following{/other_user}","gists_url":"https://api.github.com/users/dixingxing0/gists{/gist_id}","starred_url":"https://api.github.com/users/dixingxing0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dixingxing0/subscriptions","organizations_url":"https://api.github.com/users/dixingxing0/orgs","repos_url":"https://api.github.com/users/dixingxing0/repos","events_url":"https://api.github.com/users/dixingxing0/events{/privacy}","received_events_url":"https://api.github.com/users/dixingxing0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T11:47:54Z","updated_at":"2021-04-01T11:47:54Z","author_association":"CONTRIBUTOR","body":"There is another new report on this issue: https://github.com/apache/iceberg/issues/2404 , should we  fix this before 0.12 release?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811852416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811955112","html_url":"https://github.com/apache/iceberg/pull/2407#issuecomment-811955112","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2407","id":811955112,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTk1NTExMg==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T14:40:33Z","updated_at":"2021-04-01T14:40:33Z","author_association":"COLLABORATOR","body":"@aokolnychyi @rdblue @pvary Can you please review this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811955112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811984121","html_url":"https://github.com/apache/iceberg/pull/2266#issuecomment-811984121","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2266","id":811984121,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTk4NDEyMQ==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T15:24:59Z","updated_at":"2021-04-01T15:26:44Z","author_association":"COLLABORATOR","body":"@rymurr implemented the set, also add a set lock to protect.  I split _delete_files into a separate class as linter was complaining that the method was too complex.\r\n\r\nThe alternate is to have a filter method like `delete_pool.map(delete_files, filter(...))` , but I guess it's a bit similar to what I had much earlier, so I wrote it more what you suggested.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811984121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811985015","html_url":"https://github.com/apache/iceberg/pull/2266#issuecomment-811985015","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2266","id":811985015,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTk4NTAxNQ==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T15:26:19Z","updated_at":"2021-04-01T15:26:19Z","author_association":"COLLABORATOR","body":"Also forgot, I added new test data with replicated metadata-files and checks to validate this in test_drop_tables.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811985015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811992680","html_url":"https://github.com/apache/iceberg/pull/2402#issuecomment-811992680","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2402","id":811992680,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTk5MjY4MA==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T15:37:41Z","updated_at":"2021-04-01T15:37:41Z","author_association":"MEMBER","body":"Looks good to me as well! Sorry the tests weren't easier to abstract, I figure with catalogs having such different operations it is probably better that we just duplicate :/","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811992680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811996260","html_url":"https://github.com/apache/iceberg/pull/2266#issuecomment-811996260","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2266","id":811996260,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMTk5NjI2MA==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T15:43:12Z","updated_at":"2021-04-01T15:43:12Z","author_association":"COLLABORATOR","body":"No problem, thanks @rymurr for your time and great code suggestions as well","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/811996260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812076981","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-812076981","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":812076981,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjA3Njk4MQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T18:02:52Z","updated_at":"2021-04-01T18:02:52Z","author_association":"CONTRIBUTOR","body":"@openinx, what I meant is that we can figure out the upsert columns from the ON condition of MERGE INTO.\r\n\r\n```\r\nMERGE INTO t USING s\r\nON t.id = s.id\r\n....\r\n```\r\n\r\n```\r\nMERGE INTO t USING s\r\nON t.id = s.id AND t.account_id = s.account_id\r\n....\r\n```\r\n\r\nThat's different from upsert use cases where we don't have the upsert columns in the command itself.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812076981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812077531","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-812077531","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":812077531,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjA3NzUzMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T18:03:45Z","updated_at":"2021-04-01T18:03:45Z","author_association":"CONTRIBUTOR","body":"I think this is now unrelated to this PR, but since discussion is happening here I want to mention it:\r\n\r\n> I have seen scenarios when users want to rollback the table state completely rather the current snapshot. I think that should be done by replacing the current pointer in the catalog to an old JSON file rather than by calling the table rollback API.\r\n\r\nI don't agree with the direction of adding an API to roll back the JSON file itself. That approach discards relevant history, like the fact that after `t5`, the table had a bad snapshot. That history is relevant and valuable. Here are a few examples:\r\n\r\n1. Users can see how long the bad snapshot was the current\r\n2. Users can see what the snapshot ID was and find out which jobs read the bad snapshot\r\n3. Users can see what other changes were rolled back at the same time (e.g. a compaction was also rolled back)\r\n\r\nIf we want to support this use case, then I think we need to make an API that will roll back a table to some point in time. That would roll back the snapshot (preserving the snapshot log) and revert metadata changes. We could do this by having a rollback API that actually uses a transaction to make multiple different changes. I've been thinking about updating the `SnapshotManager` to use a transaction as well, which would allow cherry-picking multiple commits as a single operation.\r\n\r\nThere's a big more discussion that should happen here, but I'm open to the transaction approach. I just don't think rolling back the metadata file instead of moving forward and keeping history is a good idea.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812077531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812199957","html_url":"https://github.com/apache/iceberg/pull/2402#issuecomment-812199957","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2402","id":812199957,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjE5OTk1Nw==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T22:06:39Z","updated_at":"2021-04-01T22:06:39Z","author_association":"CONTRIBUTOR","body":"Thanks everyone for the quick review! The test failed but I think it may be transient, since I think I built the same code locally before updating and all tests succeeded. I've triggered another round of test. \r\n\r\nIf there is no more comment/concern before tomorrow I'll probably merge this change. Thanks again! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812199957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812233747","html_url":"https://github.com/apache/iceberg/issues/2168#issuecomment-812233747","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2168","id":812233747,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjIzMzc0Nw==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-01T23:39:20Z","updated_at":"2021-04-01T23:39:20Z","author_association":"CONTRIBUTOR","body":"> S3FileIO was asking for many aws services like dynamodb/glue/kms and we have to add them individually\r\n\r\nThis is a part of the effort to move to AWS SDK v2.\r\n\r\nThere are users who only need individual AWS dependencies to minimize dependency size, that's why we chose this approach. If you don't care about the jar size, you can just use the aws bundle. More details are described in the PR I created.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812233747/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812240754","html_url":"https://github.com/apache/iceberg/pull/2399#issuecomment-812240754","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2399","id":812240754,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjI0MDc1NA==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T00:05:33Z","updated_at":"2021-04-02T00:05:33Z","author_association":"CONTRIBUTOR","body":"> A handful of minor comments @TGooch44 , I have also been concerned about Java and Python diverging. Been thinking of how to better keep the two in sync with so few people on the python impl. Something we need to figure out if we want to push this to pypi at some point. Curious to see what you think!\r\n> \r\n> This change itself LGTM, its hard to tell w/o all the context. What other changes are you thinking of after this and what is the broader plan for the other N-1 PRs?\r\n\r\nThe next PR, fleshes out the capability around partition transformation/evaluation, and updates some of the evaluators.  From there, I think a few months back we had discussed a higher level construct over the parquet reader that can take a Table or TableScan and turn that in to a set of parquet reads and then unify that into an arrow table, record batches, etc.  I know it can be difficult to review some of this broad PRs, so I was trying to chunk it up into some more manageable sized chunks and be sure to have good test coverage especially if the java side has the tests already there.\r\n\r\nI think it's going to be challenging maintaining a close coupling with the java implementation.  It may be worthwhile sometime soon, to look at what's currently in the python library and how it can be simplified or designed in a way that's less aligned with java and more aligned with a design that works well in python. I'd just kind of like to get a functional read path(and maybe at least some of the simple append type write path cases) in before iterating too much on the current design.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812240754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812240813","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-812240813","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":812240813,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjI0MDgxMw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T00:05:42Z","updated_at":"2021-04-02T00:05:42Z","author_association":"COLLABORATOR","body":"@rblue, What do you think about these use cases? Should we continue on these minor compactions? I want to refactor them and implement flink action as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812240813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812242732","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-812242732","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":812242732,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjI0MjczMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T00:11:46Z","updated_at":"2021-04-02T00:11:46Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, the different types of actions make sense to me. What I'm asking is which one you are currently trying to build. I think it is 1, which makes sense and is what I assumed from looking at what you're doing. But it would be great to get an idea of how you plan to build that compaction.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812242732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812401140","html_url":"https://github.com/apache/iceberg/pull/2399#issuecomment-812401140","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2399","id":812401140,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjQwMTE0MA==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T08:01:02Z","updated_at":"2021-04-02T08:01:02Z","author_association":"CONTRIBUTOR","body":"> I'd just kind of like to get a functional read path(and maybe at least some of the simple append type write path cases) in before iterating too much on the current design.\r\n\r\nMy thoughts exactly!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812401140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812463051","html_url":"https://github.com/apache/iceberg/pull/2410#issuecomment-812463051","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2410","id":812463051,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjQ2MzA1MQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T10:01:01Z","updated_at":"2021-04-02T10:06:05Z","author_association":"MEMBER","body":"If we want to sync deletions from mysql binlog into apache iceberg table, then we will need to upgrade the iceberg table from version 1 to version 2 by following code as we don't expose the v2 to end users now. \r\n\r\n```java\r\nimport java.util.Map;\r\nimport org.apache.hadoop.conf.Configuration;\r\nimport org.apache.iceberg.BaseTable;\r\nimport org.apache.iceberg.Table;\r\nimport org.apache.iceberg.TableMetadata;\r\nimport org.apache.iceberg.TableOperations;\r\nimport org.apache.iceberg.catalog.TableIdentifier;\r\nimport org.apache.iceberg.relocated.com.google.common.collect.Maps;\r\n\r\npublic class TestIceberg {\r\n\r\n  private TestIceberg() {\r\n  }\r\n\r\n  public static void main(String[] args) {\r\n\r\n    Map<String, String> properties = Maps.newHashMap();\r\n    properties.put(\"type\", \"iceberg\");\r\n    properties.put(\"catalog-type\", \"hive\");\r\n    properties.put(\"uri\", \"thrift://localhost:9083\");\r\n    properties.put(\"clients\", \"5\");\r\n    properties.put(\"property-version\", \"1\");\r\n    properties.put(\"warehouse\", \"file:///Users/openinx/test/iceberg-warehouse\");\r\n\r\n    CatalogLoader loader = CatalogLoader.hive(\"hive_catalog\", new Configuration(), properties);\r\n    Table table = loader.loadCatalog().loadTable(TableIdentifier.of(\"mysql_db\", \"iceberg_sbtest1\"));\r\n\r\n    TableOperations ops = ((BaseTable) table).operations();\r\n    TableMetadata meta = ops.current();\r\n    ops.commit(meta, meta.upgradeToFormatVersion(2));\r\n  }\r\n}\r\n```\r\n\r\nThen we could use the `sysbench` to update the records in mysql server: \r\n\r\n```\r\nsysbench --mysql-host=localhost \\\r\n    --mysql-user=<your-mysql-user> \\\r\n    --mysql-password=<your-mysql-password>  \\\r\n    --mysql-db=test \\\r\n    --threads=1 \\\r\n    --rate=52 \\\r\n    --time=1800 \\\r\n    --report-interval=10  \\      \r\n    oltp_update_index \\\r\n    --table_size=60000000 \\\r\n    --skip_trx=on \\\r\n    run\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812463051/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812463519","html_url":"https://github.com/apache/iceberg/issues/2409#issuecomment-812463519","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2409","id":812463519,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjQ2MzUxOQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T10:02:05Z","updated_at":"2021-04-02T10:02:05Z","author_association":"MEMBER","body":"@zhangwcoder ,  you may want to read this document here : https://github.com/apache/iceberg/pull/2410","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812463519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812468147","html_url":"https://github.com/apache/iceberg/pull/2410#issuecomment-812468147","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2410","id":812468147,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjQ2ODE0Nw==","user":{"login":"zhangwcoder","id":81735234,"node_id":"MDQ6VXNlcjgxNzM1MjM0","avatar_url":"https://avatars.githubusercontent.com/u/81735234?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwcoder","html_url":"https://github.com/zhangwcoder","followers_url":"https://api.github.com/users/zhangwcoder/followers","following_url":"https://api.github.com/users/zhangwcoder/following{/other_user}","gists_url":"https://api.github.com/users/zhangwcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwcoder/subscriptions","organizations_url":"https://api.github.com/users/zhangwcoder/orgs","repos_url":"https://api.github.com/users/zhangwcoder/repos","events_url":"https://api.github.com/users/zhangwcoder/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T10:15:03Z","updated_at":"2021-04-02T10:15:03Z","author_association":"NONE","body":"@openinx Hi bro, I'm paying attention to this function and when will it be completed.  \r\nIs it will released in the version of  0.12.0  ?  This is my Issues  #2409 ,  I'm focus in syncing data from mysql to iceberg table in flink stream job .  \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812468147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812575674","html_url":"https://github.com/apache/iceberg/pull/2410#issuecomment-812575674","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2410","id":812575674,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjU3NTY3NA==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T15:20:52Z","updated_at":"2021-04-02T15:21:08Z","author_association":"CONTRIBUTOR","body":"@openinx Would it be possible to set the base branch to `jackye1995:row-id-api` for now to see the diff that applies to your branch only? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812575674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812672404","html_url":"https://github.com/apache/iceberg/pull/2399#issuecomment-812672404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2399","id":812672404,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjY3MjQwNA==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T19:13:54Z","updated_at":"2021-04-02T19:13:54Z","author_association":"CONTRIBUTOR","body":"@rymurr I believe I got all the issues you mentioned.  With the Term hierarchy, I agree it's not ideal, but I played around with a couple of different refactors, and nothing seemed much better.  I think a more extensive rewrite would be needed to really reduce the complexity of the class hierarchies.  I like the `Protocol` idea, although I think we're supporting py 3.7(...for now anyways...), so maybe something to think about in the next iteration on this module.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812672404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812713312","html_url":"https://github.com/apache/iceberg/pull/2403#issuecomment-812713312","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2403","id":812713312,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjcxMzMxMg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T20:59:22Z","updated_at":"2021-04-02T21:22:32Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @jackye1995, could you take one more look? I've updated the approach to make `SerializedTable` Kryo compatible. \r\n\r\ncc @openinx @pvary @yyanyy @rdblue too","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812713312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812745514","html_url":"https://github.com/apache/iceberg/pull/2358#issuecomment-812745514","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2358","id":812745514,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjc0NTUxNA==","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-02T22:51:20Z","updated_at":"2021-04-02T22:51:20Z","author_association":"COLLABORATOR","body":"@rdblue sure no problem, thanks for spending the time to review (know you guys are busy), left one question as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812745514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812807604","html_url":"https://github.com/apache/iceberg/pull/2403#issuecomment-812807604","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2403","id":812807604,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjgwNzYwNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-03T04:14:36Z","updated_at":"2021-04-03T04:45:38Z","author_association":"CONTRIBUTOR","body":"Since I redesigned the original approach, we may consider making serialized table classes non-public and offering a factory or a util class to build them instead. We will need to construct serialized tables manually for Kryo.\r\n\r\n```\r\nSerializedTables.newSerializedTable(table)\r\nSerializedTables.createSerializedTable(table)\r\nSerializedTables.forTable(table)\r\n```\r\n\r\nI don't want to call it a util as it has to be in `org.apache.iceberg` package.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812807604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812879873","html_url":"https://github.com/apache/iceberg/issues/2405#issuecomment-812879873","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2405","id":812879873,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjg3OTg3Mw==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-03T15:22:58Z","updated_at":"2021-04-03T15:22:58Z","author_association":"MEMBER","body":"Do you have any more info on the repo for this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812879873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812938555","html_url":"https://github.com/apache/iceberg/pull/2275#issuecomment-812938555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2275","id":812938555,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjkzODU1NQ==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-03T23:09:39Z","updated_at":"2021-04-03T23:09:39Z","author_association":"CONTRIBUTOR","body":"@yyanyy thank you for responding to my question. But because I am slow, I needed to do some testing to understand for myself the effects of https://github.com/apache/iceberg/pull/2096 and this PR.\r\nI started with Iceberg 0.11.0 and created some tables, inserting data into them, and altering the schema. Then I added the commit for https://github.com/apache/iceberg/pull/2096 and the changes here on top (actually I added the commit for https://github.com/apache/iceberg/pull/2089 first, so that the backports are clean). I made further updates to my Iceberg tables, adding data and altering the schema.\r\nFrom what I see, when the table is updated and a new metadata.json file for the table is written, the metadata.json file still has a `schema` field, but the schema now has a `schema-id` field; it also has a `schemas` field containing an array of schemas, and a `current-schema-id` field. The only schema known at the time of the switchover is the current schema of the table, so if the table change is just change to data, the existing schema is given a `schema-id` of 0, and the schemas array contains a single schema; if the table change is a schema change, then the old schema is given a `schema-id` of 0, the new schema is given a `schema-id` of 1, and the `schemas` array contains two schemas (and the `current-schema-id` field is 1). In the `snapshots` field, any snapshot created before the switchover does not have a `schema-id`; snapshots created after the switchover are given a `schema-id`, corresponding to the schema current at the time the snapshot is written.\r\nWhen `Snapshot#schemaId()` is called, if the snapshot is written before the switchover, null is returned, and if written after the switchover, a non-null Integer is returned.\r\nIt is as you wrote.\r\nWith this change, I think it is straightforward to update my PR, https://github.com/apache/iceberg/pull/1508. I just need to update the following method I'm adding to `BaseTable`\r\n```\r\n  public Schema schemaForSnapshot(long snapshotId) {\r\n    TableMetadata current = ops.current();\r\n    // First, check if the snapshot has a schema id associated with it\r\n    Snapshot snapshot = current.snapshot(snapshotId);\r\n    Integer schemaId = snapshot.schemaId();\r\n    if (schemaId != null) {\r\n      return current.schemasById().get(schemaId);\r\n    }\r\n    // Otherwise, read each of the previous metadata files until we find one whose current\r\n    // snapshot id is the snapshot id\r\n    ...\r\n  }\r\n```\r\nI rebuilt Iceberg with my change on top of the previous changes, and I was able to see that the correct schema is used when viewing any snapshot (time travel).\r\nWhen this change is merged, I will update my PR. I hope that it can be considered then.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812938555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812970910","html_url":"https://github.com/apache/iceberg/pull/2403#issuecomment-812970910","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2403","id":812970910,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMjk3MDkxMA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-04T04:46:14Z","updated_at":"2021-04-04T04:46:14Z","author_association":"CONTRIBUTOR","body":"I was not entirely happy with the implementation. I've decided to introduce a factory that should be used by query engines and hide the table implementations. Will need another review round. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/812970910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813070744","html_url":"https://github.com/apache/iceberg/issues/2405#issuecomment-813070744","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2405","id":813070744,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzA3MDc0NA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-04T17:37:46Z","updated_at":"2021-04-04T17:37:46Z","author_association":"COLLABORATOR","body":"Thanks @RussellSpitzer to take care! It happens at the customer's table. I opened the issue to remind myself as I was busy. Let me inspect what's happened!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813070744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813129332","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-813129332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":813129332,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzEyOTMzMg==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T00:53:18Z","updated_at":"2021-04-05T00:53:18Z","author_association":"COLLABORATOR","body":"Just build a parquet implementation on top of the metadata column method. @rdblue @openinx , you might want to take a look.  I will try to build metadata column in ORC and Avro.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813129332/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813353404","html_url":"https://github.com/apache/iceberg/pull/2399#issuecomment-813353404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2399","id":813353404,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzM1MzQwNA==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T11:42:29Z","updated_at":"2021-04-05T11:42:29Z","author_association":"CONTRIBUTOR","body":"> @rymurr I believe I got all the issues you mentioned. With the Term hierarchy, I agree it's not ideal, but I played around with a couple of different refactors, and nothing seemed much better. I think a more extensive rewrite would be needed to really reduce the complexity of the class hierarchies. I like the `Protocol` idea, although I think we're supporting py 3.7(...for now anyways...), so maybe something to think about in the next iteration on this module.\r\n\r\nCool, I agree with you. Lets get it working then possibly re-write it later.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813353404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813535832","html_url":"https://github.com/apache/iceberg/pull/2354#issuecomment-813535832","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2354","id":813535832,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzUzNTgzMg==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T17:53:07Z","updated_at":"2021-04-05T17:53:07Z","author_association":"CONTRIBUTOR","body":"@rdblue I think all other people are fine with the PR, please let me know if there are any other comments.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813535832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813629444","html_url":"https://github.com/apache/iceberg/pull/2399#issuecomment-813629444","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2399","id":813629444,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzYyOTQ0NA==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T20:25:24Z","updated_at":"2021-04-05T20:25:24Z","author_association":"CONTRIBUTOR","body":"Do you think this is good to merge, or were there some other things you want me to fix/take a look at?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813629444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813644518","html_url":"https://github.com/apache/iceberg/pull/1870#issuecomment-813644518","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1870","id":813644518,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY0NDUxOA==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T20:55:20Z","updated_at":"2021-04-05T20:55:20Z","author_association":"CONTRIBUTOR","body":"Sorry I think we forgot to move forward with this PR, I will take a look after the tests passed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813644518/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813669731","html_url":"https://github.com/apache/iceberg/pull/2403#issuecomment-813669731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2403","id":813669731,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY2OTczMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T21:46:56Z","updated_at":"2021-04-05T21:46:56Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @stevenzwu @rdblue @RussellSpitzer @jackye1995!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813669731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813674899","html_url":"https://github.com/apache/iceberg/pull/2416#issuecomment-813674899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2416","id":813674899,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY3NDg5OQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T21:59:38Z","updated_at":"2021-04-05T21:59:38Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @rdblue @shardulm94, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813674899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813676295","html_url":"https://github.com/apache/iceberg/pull/2417#issuecomment-813676295","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2417","id":813676295,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY3NjI5NQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T22:03:04Z","updated_at":"2021-04-05T22:03:04Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @rdblue @shardulm94, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813676295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813679406","html_url":"https://github.com/apache/iceberg/pull/2420#issuecomment-813679406","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2420","id":813679406,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY3OTQwNg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T22:10:50Z","updated_at":"2021-04-05T22:10:50Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @rdblue @shardulm94, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813679406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813680776","html_url":"https://github.com/apache/iceberg/pull/2418#issuecomment-813680776","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2418","id":813680776,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY4MDc3Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T22:14:19Z","updated_at":"2021-04-05T22:14:19Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @rdblue @shardulm94, could you take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813680776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813683182","html_url":"https://github.com/apache/iceberg/pull/2420#issuecomment-813683182","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2420","id":813683182,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY4MzE4Mg==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T22:20:20Z","updated_at":"2021-04-05T22:20:20Z","author_association":"MEMBER","body":"I wasn't sure we would want to do this? Shouldn't a user be able to override anything we set? I don't think this is a big deal though since a user can always alter the table properties after it is migrated/snapshoted.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813683182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813688306","html_url":"https://github.com/apache/iceberg/issues/644#issuecomment-813688306","issue_url":"https://api.github.com/repos/apache/iceberg/issues/644","id":813688306,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzY4ODMwNg==","user":{"login":"SreeramGarlapati","id":11813428,"node_id":"MDQ6VXNlcjExODEzNDI4","avatar_url":"https://avatars.githubusercontent.com/u/11813428?v=4","gravatar_id":"","url":"https://api.github.com/users/SreeramGarlapati","html_url":"https://github.com/SreeramGarlapati","followers_url":"https://api.github.com/users/SreeramGarlapati/followers","following_url":"https://api.github.com/users/SreeramGarlapati/following{/other_user}","gists_url":"https://api.github.com/users/SreeramGarlapati/gists{/gist_id}","starred_url":"https://api.github.com/users/SreeramGarlapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SreeramGarlapati/subscriptions","organizations_url":"https://api.github.com/users/SreeramGarlapati/orgs","repos_url":"https://api.github.com/users/SreeramGarlapati/repos","events_url":"https://api.github.com/users/SreeramGarlapati/events{/privacy}","received_events_url":"https://api.github.com/users/SreeramGarlapati/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-05T22:33:15Z","updated_at":"2021-04-05T22:33:15Z","author_association":"COLLABORATOR","body":"@aokolnychyi @rdblue @rdsr - would you folks know - if there is a plan or any ongoing discussion on natively support Views in [Iceberg Table Spec](https://iceberg.apache.org/spec/)?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813688306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813732718","html_url":"https://github.com/apache/iceberg/pull/2415#issuecomment-813732718","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2415","id":813732718,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzczMjcxOA==","user":{"login":"karuppayya","id":5082742,"node_id":"MDQ6VXNlcjUwODI3NDI=","avatar_url":"https://avatars.githubusercontent.com/u/5082742?v=4","gravatar_id":"","url":"https://api.github.com/users/karuppayya","html_url":"https://github.com/karuppayya","followers_url":"https://api.github.com/users/karuppayya/followers","following_url":"https://api.github.com/users/karuppayya/following{/other_user}","gists_url":"https://api.github.com/users/karuppayya/gists{/gist_id}","starred_url":"https://api.github.com/users/karuppayya/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karuppayya/subscriptions","organizations_url":"https://api.github.com/users/karuppayya/orgs","repos_url":"https://api.github.com/users/karuppayya/repos","events_url":"https://api.github.com/users/karuppayya/events{/privacy}","received_events_url":"https://api.github.com/users/karuppayya/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T00:09:01Z","updated_at":"2021-04-06T00:29:05Z","author_association":"CONTRIBUTOR","body":"cc: @aokolnychyi @RussellSpitzer @flyrain ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813732718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813738522","html_url":"https://github.com/apache/iceberg/pull/2421#issuecomment-813738522","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2421","id":813738522,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzczODUyMg==","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T00:26:59Z","updated_at":"2021-04-06T00:26:59Z","author_association":"CONTRIBUTOR","body":"Can you take a look? @aokolnychyi , @RussellSpitzer , @karuppayya ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813738522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813741310","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813741310","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813741310,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc0MTMxMA==","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T00:35:26Z","updated_at":"2021-04-06T00:35:26Z","author_association":"CONTRIBUTOR","body":"Hit the same issue. Hi @pan3793, are we going to revert #2331 anytime soon?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813741310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813750117","html_url":"https://github.com/apache/iceberg/pull/2408#issuecomment-813750117","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2408","id":813750117,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc1MDExNw==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:03:43Z","updated_at":"2021-04-06T01:03:43Z","author_association":"CONTRIBUTOR","body":"Merged as no extra comment from anyone for a few days, and documentation should be easily fixed if issues were discovered later. Thanks for contributing! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813750117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813750593","html_url":"https://github.com/apache/iceberg/pull/2402#issuecomment-813750593","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2402","id":813750593,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc1MDU5Mw==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:05:15Z","updated_at":"2021-04-06T01:05:15Z","author_association":"CONTRIBUTOR","body":"Merged as no further comment after last Thursday and multiple approvals were in place. Thank you again everyone for reviewing so quickly! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813750593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813763662","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813763662","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813763662,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc2MzY2Mg==","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:46:58Z","updated_at":"2021-04-06T01:46:58Z","author_association":"MEMBER","body":"@flyrain Are you planning to write IT for runtime jar modules? I thought that some Committer or PMC will revert the bad commit. Should I raise a revert PR?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813763662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813763731","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813763731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813763731,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc2MzczMQ==","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:47:16Z","updated_at":"2021-04-06T01:49:08Z","author_association":"CONTRIBUTOR","body":"I think we should copy class `UpperCaseCharStream` from Spark to Iceberg rather than reverting #2331. In that way, we can still shade antlr4 runtime, which isolates antlr4 dependency for Iceberg. Using the same version of antlr4 from Spark may cause problem in the future. cc @pan3793, @aokolnychyi , @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813763731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813765958","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813765958","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813765958,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc2NTk1OA==","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:54:35Z","updated_at":"2021-04-06T01:54:46Z","author_association":"MEMBER","body":"> I think we should copy class UpperCaseCharStream from Spark to Iceberg rather than reverting #2331.\r\n\r\nIt's not such a simple thing. `UpperCaseCharStream` is one of the issues I hit, and after a fast glance, I found another one. It like a Whac-a-Mole game.\r\n\r\nSo the safe solution I think is build a IT for the runtime jar modules rather than do manual test again and again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813765958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813767522","html_url":"https://github.com/apache/iceberg/pull/2419#issuecomment-813767522","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2419","id":813767522,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc2NzUyMg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T01:59:22Z","updated_at":"2021-04-06T01:59:22Z","author_association":"MEMBER","body":"Thanks @kbendick for contributing !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813767522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813783170","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813783170","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813783170,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc4MzE3MA==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T02:49:17Z","updated_at":"2021-04-06T02:49:17Z","author_association":"MEMBER","body":"So is the issue here that because we extend Spark's Parser we end up shading Spark's internal references to Antlr Runtime code which causes our issues. \r\n\r\nIf this is the case I think we should drop the runtime reference altogether, although I really dislike it when library code depends on a transitive of another library.\r\n\r\nAnother option is to mark the Antlr-runtime version as \"Strictly\" so that we at least fail quickly if Spark changes the version from underneath us.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813783170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813799091","html_url":"https://github.com/apache/iceberg/issues/2382#issuecomment-813799091","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2382","id":813799091,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzc5OTA5MQ==","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T03:41:56Z","updated_at":"2021-04-06T03:41:56Z","author_association":"MEMBER","body":"> If this is the case I think we should drop the runtime reference altogether, although I really dislike it when library code depends on a transitive of another library.\r\n\r\nagree with that. but we need IT(or something else, maybe gradle has such plugins) to enforce it rather than manual check.\r\n\r\n> Another option is to mark the Antlr-runtime version as \"Strictly\" so that we at least fail quickly if Spark changes the version from underneath us.\r\n\r\nSpark 3.1.1 upgraded antlr4","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813799091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813802162","html_url":"https://github.com/apache/iceberg/issues/2423#issuecomment-813802162","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2423","id":813802162,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzgwMjE2Mg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T03:52:24Z","updated_at":"2021-04-06T03:52:24Z","author_association":"CONTRIBUTOR","body":"cc @rdblue @rymurr","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813802162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813861859","html_url":"https://github.com/apache/iceberg/pull/2275#issuecomment-813861859","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2275","id":813861859,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzg2MTg1OQ==","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T06:31:54Z","updated_at":"2021-04-06T06:31:54Z","author_association":"CONTRIBUTOR","body":"> @yyanyy thank you for responding to my question. But because I am slow, I needed to do some testing to understand for myself the effects of #2096 and this PR.\r\n> I started with Iceberg 0.11.0 and created some tables, inserting data into them, and altering the schema. Then I added the commit for #2096 and the changes here on top (actually I added the commit for #2089 first, so that the backports are clean). I made further updates to my Iceberg tables, adding data and altering the schema.\r\n> From what I see, when the table is updated and a new metadata.json file for the table is written, the metadata.json file still has a `schema` field, but the schema now has a `schema-id` field; it also has a `schemas` field containing an array of schemas, and a `current-schema-id` field. The only schema known at the time of the switchover is the current schema of the table, so if the table change is just change to data, the existing schema is given a `schema-id` of 0, and the schemas array contains a single schema; if the table change is a schema change, then the old schema is given a `schema-id` of 0, the new schema is given a `schema-id` of 1, and the `schemas` array contains two schemas (and the `current-schema-id` field is 1). In the `snapshots` field, any snapshot created before the switchover does not have a `schema-id`; snapshots created after the switchover are given a `schema-id`, corresponding to the schema current at the time the snapshot is written.\r\n> When `Snapshot#schemaId()` is called, if the snapshot is written before the switchover, null is returned, and if written after the switchover, a non-null Integer is returned.\r\n> It is as you wrote.\r\n> With this change, I think it is straightforward to update my PR, #1508. I just need to update the following method I'm adding to `BaseTable`\r\n> \r\n> ```\r\n>   public Schema schemaForSnapshot(long snapshotId) {\r\n>     TableMetadata current = ops.current();\r\n>     // First, check if the snapshot has a schema id associated with it\r\n>     Snapshot snapshot = current.snapshot(snapshotId);\r\n>     Integer schemaId = snapshot.schemaId();\r\n>     if (schemaId != null) {\r\n>       return current.schemasById().get(schemaId);\r\n>     }\r\n>     // Otherwise, read each of the previous metadata files until we find one whose current\r\n>     // snapshot id is the snapshot id\r\n>     ...\r\n>   }\r\n> ```\r\n> \r\n> I rebuilt Iceberg with my change on top of the previous changes, and I was able to see that the correct schema is used when viewing any snapshot (time travel).\r\n> When this change is merged, I will update my PR. I hope that it can be considered then.\r\n\r\nThank you for spending time verifying the changes, and described the steps here! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813861859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813862367","html_url":"https://github.com/apache/iceberg/issues/2422#issuecomment-813862367","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2422","id":813862367,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzg2MjM2Nw==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T06:32:55Z","updated_at":"2021-04-06T06:32:55Z","author_association":"MEMBER","body":"> Caused by: java.lang.NoSuchMethodError: org.apache.flink.table.api.TableColumn.isGenerated()Z\r\n\r\nThis is because we are using the jar that was compiled in flink 1.11.x to run in flink 1.12 cluster.  I will suggest building a new  iceberg-flink-runtime jar from apache iceberg master branch to submit your flink jobs (Because we've upgraded the flink version in iceberg master branch, pls see [here](https://github.com/apache/iceberg/pull/1956/files#diff-0ae3022739b9b55183c9aa972fadb7cdb9cb3956468f14559b3c57c5900f3953L459))","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813862367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813867546","html_url":"https://github.com/apache/iceberg/pull/2410#issuecomment-813867546","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2410","id":813867546,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzg2NzU0Ng==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T06:42:53Z","updated_at":"2021-04-06T06:42:53Z","author_association":"MEMBER","body":"@edgarRd You could see the diff [here](https://github.com/apache/iceberg/pull/2410/commits/c8a901cb44d791be1a57cca8f08b58fc179ca9a9). \r\n\r\n@zhangwcoder   From my understanding since we community's last sync,  I think we will still not expose v2 to end users but I think there will be some great features that will be merged in next weeks such as rewrite delete files etc.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813867546/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813887666","html_url":"https://github.com/apache/iceberg/issues/2422#issuecomment-813887666","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2422","id":813887666,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMzg4NzY2Ng==","user":{"login":"junsionzhang","id":10653297,"node_id":"MDQ6VXNlcjEwNjUzMjk3","avatar_url":"https://avatars.githubusercontent.com/u/10653297?v=4","gravatar_id":"","url":"https://api.github.com/users/junsionzhang","html_url":"https://github.com/junsionzhang","followers_url":"https://api.github.com/users/junsionzhang/followers","following_url":"https://api.github.com/users/junsionzhang/following{/other_user}","gists_url":"https://api.github.com/users/junsionzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/junsionzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junsionzhang/subscriptions","organizations_url":"https://api.github.com/users/junsionzhang/orgs","repos_url":"https://api.github.com/users/junsionzhang/repos","events_url":"https://api.github.com/users/junsionzhang/events{/privacy}","received_events_url":"https://api.github.com/users/junsionzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T07:17:37Z","updated_at":"2021-04-06T07:17:37Z","author_association":"NONE","body":"> here\r\n\r\nhey，@openinx  thank you ,I will try it now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/813887666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/814065057","html_url":"https://github.com/apache/iceberg/issues/2423#issuecomment-814065057","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2423","id":814065057,"node_id":"MDEyOklzc3VlQ29tbWVudDgxNDA2NTA1Nw==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-06T12:03:25Z","updated_at":"2021-04-06T12:03:25Z","author_association":"CONTRIBUTOR","body":"Hey @aokolnychyi, from my reading that is an oversight/copy-paste error. I personally think it should be removed.\r\n\r\nIt appears that the parameter goes unused by default correct? The `IcebergSource` sets up the default_iceberg catalog as a `SparkCatalog` with that parameter set and `SparkCatalog` doesn't use it. It could have strange effects if the default catalog was switched to a session catalog though....","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/814065057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]