[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380334229","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380334229","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380334229,"node_id":"IC_kwDOACaFSM6N4QSV","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T01:12:48Z","updated_at":"2024-09-28T01:12:48Z","author_association":"CONTRIBUTOR","body":"> > or building a release version, an empty -Dchangelist=\r\n> \r\n> I tried running this and the artifacts are shorter. Adding SNAPSHOT when the hash is present does not really seem useful.\r\n> \r\n> ```\r\n> mvn clean install -PskipQA -Dsha1=\"-$(git rev-parse --short HEAD)\" -Dchangelist=\"\"\r\n> ```\r\n\r\nI need to remember to add the hyphen between the git sha and version number for better visibility.\r\n\r\nI agree that adding `SNAPSHOT` doesn't seem useful for the unique artifact use case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380334229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380346523","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380346523","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380346523,"node_id":"IC_kwDOACaFSM6N4TSb","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T01:50:01Z","updated_at":"2024-09-28T01:50:01Z","author_association":"MEMBER","body":"To be clear about my review, I would have to do more testing to fully understand the potential side effects on our release process, and other things, which I have not done. However, I don't find the change compelling regardless. If others do, and my points against doing this are not convincing, I can proceed with additional testing to determine the full impact and potential side-effects of this and re-review. I just don't want to do that extra work if I don't have to (I would rather spend my time elsewhere in the project).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380346523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380713668","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2380713668","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2380713668,"node_id":"IC_kwDOACaFSM6N5s7E","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T15:43:22Z","updated_at":"2024-09-28T15:43:22Z","author_association":"CONTRIBUTOR","body":"The sunny ITs passed, I just kicked off a full IT build as well.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380713668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380717711","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380717711","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380717711,"node_id":"IC_kwDOACaFSM6N5t6P","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T15:55:22Z","updated_at":"2024-09-28T15:56:12Z","author_association":"CONTRIBUTOR","body":"I saw this and was going to comment that there is no way this change would work with the maven-release-plugin which would be a blocker but I saw @ctubbsii already pointed that out.\r\n\r\nThis might be a problem better solved from the downstream project side. For example, what about the [Versions Maven Plugin](https://www.mojohaus.org/versions/versions-maven-plugin/index.html)? That plugin can do a lot of nice things and I use it a lot and it might be something useful here.\r\n\r\nThere is the [lock-snapshots](https://www.mojohaus.org/versions/versions-maven-plugin/lock-snapshots-mojo.html#versions-lock-snapshots) goal which could probably be used here when building a project that depends on an Accumulo snapshot. That can be run on the downstream project and that would lock the snapshot version of Accumulo that is used to a timestamp.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380717711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380725308","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380725308","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380725308,"node_id":"IC_kwDOACaFSM6N5vw8","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T16:21:50Z","updated_at":"2024-09-28T16:21:50Z","author_association":"CONTRIBUTOR","body":"I realized that for using the timestamp for snapshots that only works if the dependency you want to use has been deployed. I believe that running the mvn install goal will just copy artifacts with the base SNAPSHOT name appended. The mvn deploy goal will actually append timestamp versions so if the build has not been deployed then the lock-snapshot thing may not work.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380725308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380834595","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380834595","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380834595,"node_id":"IC_kwDOACaFSM6N6Kcj","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T16:59:55Z","updated_at":"2024-09-28T16:59:55Z","author_association":"CONTRIBUTOR","body":"Many times I have run into a problem like the following  trying to test changes on a cluster with accumulo-testing prior to committing those changes upstream.\r\n\r\n 1. Create a branch of accumulo\r\n 2. Create a branch of accumulo-testing that depends on a snapshot version of accumulo\r\n 3. Stand up a small test cluster\r\n 4. Build/install accumulo and accumulo-testing on the test cluster from the branches above\r\n 5. Pause test activity for a while\r\n 6. Rebuild accumulo-testing, which builds a shaded jar that includes accumulo jars, and have it pull another snapshot version of accumulo other than the one under test.  If this is not noticed it will silently invalidate the test w/o anyone realizing the test is not valid.\r\n\r\n\r\nWhat would be really nice is to be able to do the following type of test.\r\n\r\n 1. Create specifically named \"snapshot\" versions of accumulo that include the git hash or some other id that differentiates that from all other snapshot builds. \r\n 2. Push the jars and tarball from the build to a maven repo that is only visible to a ci/cd pipeline\r\n 3. Create a branch of accumulo-testing that will only work with that specific version according to the git hash, if it can not find it should fail.\r\n 4. Spin up automated testing of that specific version of accumulo in a cluster and/or kubernetes and have confidence in the version of accumulo that is being tested.\r\n\r\nWould be really nice to be able to do test like this concurrently.  For example extensively testing 3 accumulo PRs that are not yet committed.  Each PR concurrently running through a distributed ci/cd process that uses accumulo-testing while building shaded jars, docker images, vms etc as part of the testing. It is important to have confidence that the three concurrent distributed test runs tested the expected code and not some other random snapshot version of accumulo.\r\n\r\nI do not know if the changes in this PR are the best way to achieve these goals, it was something I found yesterday.  I do think its interesting that the maven project thought the changes were important enough to change maven itself.  That  makes me curious about the full implications of this maven change which I do not understand.  These maven ci changes may be a foundational change to the way maven works that is a really nice improvement but can never take off because of the inertia of all the existing plugins.  This project should not adopt this new practice if it breaks the plugins involved in the release process.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380834595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380842473","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2380842473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2380842473,"node_id":"IC_kwDOACaFSM6N6MXp","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T17:31:30Z","updated_at":"2024-09-28T17:31:57Z","author_association":"CONTRIBUTOR","body":"I pushed an update to fix a bug that `ThriftMaxFrameSizeIT` discovered. The `TimedProcessor` was implementing `TAsyncProcessor` which caused the wrong frame to be used in some cases. We may want to update that max frame size test to verify it works with the Async frames as well.\r\n\r\nI just restarted the full IT build.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380842473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380891245","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2380891245","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2380891245,"node_id":"IC_kwDOACaFSM6N6YRt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T20:48:10Z","updated_at":"2024-09-28T20:48:57Z","author_association":"CONTRIBUTOR","body":"> Overall, I think this approach doesn't really solve anything better than how we've already solved it with mavanagaiata and the manifest entries, but where it is useful in the artifact names, a simple patch, release:update-versions or one-liner, or simple script, would do a much better job of changing the version for that specific use case, with far fewer side effects that are likely to cause more problems.\r\n\r\nUsing release:update-versions may be a good way to solve this.  One interesting difference is that running release:update-versions would dirty the workspace which would throw off mavanagaiata because the workspace is dirty.  These mvn ci changes allow changing the version produced w/o dirtying the workspace.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2380891245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381021243","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2381021243","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2381021243,"node_id":"IC_kwDOACaFSM6N64A7","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-28T23:20:19Z","updated_at":"2024-09-28T23:20:19Z","author_association":"MEMBER","body":"> Many times I have run into a problem like the following trying to test changes on a cluster with accumulo-testing prior to committing those changes upstream.\r\n\r\nDuring development/testing, I encounter this pattern as well, but I have rarely or never had a problem unintentionally pulling in a SNAPSHOT version other than the one I'm intending. I think this is because I do some things to avoid this:\r\n\r\n1. I **never** do `mvn install` *except* when I need to for this kind of scenario. I always use `mvn package` or `mvn verify` instead, which do not install SNAPSHOT builds to my local repository.\r\n2. When I know I'm going to be using SNAPSHOT dependencies, or when I am finished, I take care to do something like `rm -rf ~/.m2/repository/org/apache/accumulo/` to remove any SNAPSHOTs that may have polluted my local repository.\r\n3. When I have need to `mvn install` for this kind of thing, I always do so from a working branch that I have made specifically for this purpose, and I always track which branch I'm on using [`git-prompt.sh`](https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh) so I always know which branch I'm on.\r\n\r\nAs you point out, the biggest risk here is just not noticing when using the wrong version. So I take these steps to make sure I notice. You could also be more rigorous than this, by taking additional steps, like:\r\n\r\n1. Use a separate dedicated `<localRepository>` for your experiment with a custom `settings.xml` file and specify that on the command-line with `mvn -s /path/to/experiment/settings.xml`\r\n2. Wrap your `mvn` command with something specific for your experiment that checks the sha1 in the manifest for any of the SNAPSHOT accumulo dependencies you want pulled from there.\r\n3. Use a separate git worktree for your experimental branch\r\n\r\n> What would be really nice is to be able to do the following type of test.\r\n> \r\n> 1. Create specifically named \"snapshot\" versions of accumulo that include the git hash or some other id that differentiates that from all other snapshot builds.\r\n\r\nYou can always do this from a local working branch that installs to the local repo. You can always rebase the commits onto your target branch later, using interactive rebase, and exclude the commit that changed the versions. I've done this a few times, and it works out quite well. It's easy to remember to do that rebase, because I always review the full diff before I push anything.\r\n\r\n> 2. Push the jars and tarball from the build to a maven repo that is only visible to a ci/cd pipeline\r\n\r\nThere are a few ways you can do something like this... you can publish releases (versions without \"-SNAPSHOT\") to a staging repository, much like we do for release candidate voting. And then you can drop them instead of publish/release them. However, the staging repo number will change every time you close the repo, so you'd have to update your CI pipeline (I'm excluding CD... we don't do that... we have voting on releases here... no automated continuous delivery). This is because the repo is write-only until it is closed, and after it is closed, it is read-only. So you can't update the contents without creating a new staging repo.\r\n\r\nAnother way you could do this is to operate your own Maven repo for this purpose, in which you can do whatever you want.\r\n\r\nIf you want to use the existing SNAPSHOT repository (like we do with our ci-builds.apache.org Jenkins builds), you have to keep \"SNAPSHOT\" in the name. However, even if you add the sha1 to the version, there is no way to make sure it actually came from that commit, and it would still be possible to publish multiple snapshots with the same sha1 name, with different timestamps... which is kind of similar to the situation we have now, where we have multiple snapshots with the same version at different times, and you can't be sure which is the one you want. This PR doesn't solve that, though.\r\n\r\n> 3. Create a branch of accumulo-testing that will only work with that specific version according to the git hash, if it can not find it should fail.\r\n\r\nWe could just modify the accumulo-testing scripts/build to check the manifest of the dependencies automatically if a particular environment variable is set for the build to lock it to that commit, and fail the build or test if it fails to match. This is kind of what is done with fluo-uno, where we verify that the downloaded applications match a particular criteria (checksum or cryptographic hash, in that case).\r\n\r\n> 4. Spin up automated testing of that specific version of accumulo in a cluster and/or kubernetes and have confidence in the version of accumulo that is being tested.\r\n> \r\n> Would be really nice to be able to do test like this concurrently. For example extensively testing 3 accumulo PRs that are not yet committed. Each PR concurrently running through a distributed ci/cd process that uses accumulo-testing while building shaded jars, docker images, vms etc as part of the testing. It is important to have confidence that the three concurrent distributed test runs tested the expected code and not some other random snapshot version of accumulo.\r\n\r\nThis use case sounds like using the staging repos would work best for concurrent independent tests on particular snapshots.\r\n\r\n> I do not know if the changes in this PR are the best way to achieve these goals, it was something I found yesterday. I do think its interesting that the maven project thought the changes were important enough to change maven itself.\r\n\r\nI wouldn't read too much into the fact that it was added as an option. Maven, like many projects, tries to accommodate a wide variety of use cases from its users. I don't think that means it's a preferred, or better, option to use for a particular scenario. It may not even be the best option for any scenario. As far as I can tell from briefly looking around, Maven's own code does not take advantage of this feature in any way for itself (but I didn't spend that much time looking).\r\n\r\n> That makes me curious about the full implications of this maven change which I do not understand. These maven ci changes may be a foundational change to the way maven works that is a really nice improvement but can never take off because of the inertia of all the existing plugins. This project should not adopt this new practice if it breaks the plugins involved in the release process.\r\n\r\nI wouldn't say it's foundational... but it's definitely new, and diverges from normal conventions. It certainly would require us to make substantial changes elsewhere if we were to use it instead of the maven-release-plugin.\r\n\r\n> Using release:update-versions may be a good way to solve this.\r\n\r\n`versions:set` does something similar and is another option if `release:update-versions` doesn't quite work well for this.\r\n\r\n> One interesting difference is that running release:update-versions would dirty the workspace which would throw off mavanagaiata because the workspace is dirty.\r\n\r\nYou could always check in the changes to your experimental branch (as I mentioned above). But mavanagaiata will handle it fine. It will just note in the manifest that the workspace is dirty... you won't know why its dirty (what changes exist that dirtied it), though, so perhaps that's what you meant by \"throw off\". But with the proposed change in this PR to use `git rev-parse`, you wouldn't even have that much information... and wouldn't be able to tell whether the workspace was dirty for that build or not. So, the annotated \"-dirty\" on the hash in the manifest is at least marginally better for that. But, like I previously said, you can always check it in for a clean workspace.\r\n\r\n---\r\n\r\nOne of the things I was thinking about, since much of the use case arguing for this seems to be centered around CI, and chaining projects, I'd like to point out that it is entirely possible for Jenkins to chain builds with a complex Jenkinsfile. You can write a CI workflow that doesn't rely on deployed SNAPSHOT builds at all, but explicitly checks out a particular experimental branch, builds it, installs the artifacts to a clean local repository as part of a first phase, and then builds the depending project in a second phase. You don't actually have to depend on deployed SNAPSHOTs for a reproducible CI workflow, since the workflow itself can be made to build the dependency at a particular branch/commit.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381021243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381418168","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2381418168","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2381418168,"node_id":"IC_kwDOACaFSM6N8Y64","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-29T16:30:31Z","updated_at":"2024-09-29T16:36:07Z","author_association":"CONTRIBUTOR","body":"I took a look at the full IT build and it's still running 22 hours later with a ton of timeouts. I took a look at one of the tests to see what was going on (GarbageCollectorIT#gcRun) and I noticed that the Compactor had finished compacting a job but the Coordinator was spitting out in a loop waiting for the Fate job to be finished and was not notified. Eventually I found the following in the Compactor log:\r\n\r\n```\r\n2024-09-29T11:53:26,663 40 [compaction.RetryableThriftCall] DEBUG: Error in Thrift function, retrying ...\r\norg.apache.thrift.transport.TTransportException: java.net.SocketTimeoutException: 120000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/xxxx:36228 remote=ip-xxxx:8999]\r\n        at org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:171) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:100) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.transport.layered.TFramedTransport.readFrame(TFramedTransport.java:132) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.transport.layered.TFramedTransport.read(TFramedTransport.java:100) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.transport.TTransport.readAll(TTransport.java:100) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.accumulo.core.clientImpl.ThriftTransportPool$CachedTTransport.readAll(ThriftTransportPool.java:686) ~[classes/:?]\r\n        at org.apache.thrift.protocol.TCompactProtocol.readByte(TCompactProtocol.java:622) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.protocol.TCompactProtocol.readMessageBegin(TCompactProtocol.java:479) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:79) ~[libthrift-0.17.0.jar:0.17.0]\r\n        at org.apache.accumulo.core.compaction.thrift.CompactionCoordinatorService$Client.recv_compactionCompleted(CompactionCoordinatorService.java:109) ~[classes/:?]\r\n        at org.apache.accumulo.core.compaction.thrift.CompactionCoordinatorService$Client.compactionCompleted(CompactionCoordinatorService.java:92) ~[classes/:?]\r\n        at org.apache.accumulo.compactor.Compactor.lambda$updateCompactionCompleted$2(Compactor.java:441) ~[classes/:?]\r\n        at org.apache.accumulo.server.compaction.RetryableThriftCall.run(RetryableThriftCall.java:99) [classes/:?]\r\n        at org.apache.accumulo.compactor.Compactor.updateCompactionCompleted(Compactor.java:448) [classes/:?]\r\n        at org.apache.accumulo.compactor.Compactor.run(Compactor.java:853) [classes/:?]\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) [classes/:?]\r\n        at java.base/java.lang.Thread.run(Thread.java:840) [?:?]\r\nCaused by: java.net.SocketTimeoutException: 120000 millis timeout while waiting for channel to be ready for read. ch : java.nio.channels.SocketChannel[connected local=/xxxx:36228 remote=ip-xxxx:8999]\r\n        at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:163) ~[hadoop-client-api-3.4.0.jar:?]\r\n       ...\r\n        ... 16 more\r\n```\r\n\r\nI ran again and the compactor thread dump shows the same thing. I do not know yet if this is the same issue for all the tests hanging or not as I have to investigate but clearly something isn't quite right. What's weird is for the test it ran 1 compaction and then the second one it gets stuck on trying to call that RPC.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381418168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381418906","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2381418906","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2381418906,"node_id":"IC_kwDOACaFSM6N8ZGa","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-29T16:33:13Z","updated_at":"2024-09-29T16:33:24Z","author_association":"CONTRIBUTOR","body":"I should add that my first hunch is that I probably missed calling `resultHandler.onComplete()` in some code branches so it's probably just stuck and not responding so I'm hoping this is a simple fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381418906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381453264","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2381453264","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2381453264,"node_id":"IC_kwDOACaFSM6N8hfQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-29T18:25:50Z","updated_at":"2024-09-29T18:25:50Z","author_association":"CONTRIBUTOR","body":"> During development/testing, I encounter this pattern as well, but I have rarely or never had a problem unintentionally pulling in a SNAPSHOT version other than the one I'm intending. I think this is because I do some things to avoid this:\r\n\r\nI am also very careful w/ snapshot builds.  The usual way unexpected snapshots sneak in is because the accumulo-testing pom declares the ASF snapshot repos and this causes snapshot builds generated by the ASF jenkins build server to be pulled.\r\n\r\nHowever it is done, it does not need to be via the changes proposed here, it would be nice to be able to easily produce artifacts with the git hash in the version if possible.  Using -SNAPSHOT builds correctly in distributed testing requires that one think of all externalities and ensure those are correctly configured. If there is an externality one did not consider and it pulls in a SNAPSHOT build other than what is desired then a passing test would be a false positive.  Including the git hash in the version avoids this problem for practical purposes. Since these changes do not seem to support that goal w/o breaking release plugins I am closing this PR and will pursue other avenues like changing the version in all poms prior to creating artifacts.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381453264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381607258","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2381607258","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2381607258,"node_id":"IC_kwDOACaFSM6N9HFa","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-29T21:21:59Z","updated_at":"2024-09-29T21:21:59Z","author_association":"CONTRIBUTOR","body":"I fixed a copule tests that failed because the callack handler wasn't being called so no response was sent back.\r\n\r\nHowever, when investigating why the Kerberos ITs were failing, I discovered they were hanging forever when compacting. After debugging for a while I found out that the SSL and SASL servers are do not support async and we are using a blocking server when that is configured. This is documented [here](https://github.com/apache/accumulo/blob/main/server/base/src/main/java/org/apache/accumulo/server/rpc/ThriftServerType.java#L28-L30) and I verified in the [code](https://github.com/apache/accumulo/blob/35189b2aa82b47c101aabad10f6050346484b935/server/base/src/main/java/org/apache/accumulo/server/rpc/TServerUtils.java#L610). Also the server can be started using a blocking server even if not using SASL or SSL but non-blocking is the default.\r\n\r\nSo that is obviously a problem, if we are using a blocking server instead of non-blocking then the async processors will not work. To get around this, I pushed an update that detects which mode is used for Thrift and conditionally will start the compaction cordinator service in either async mode if we are using a non blocking server or fallback to sync mode if we are not.\r\n\r\nIt would be nice to actually be able to use non-blocking for all modes but I'm not sure if that is possible. I know that GRPC works with SSL because it uses Netty which is non-blocking so that's one benefit of GRPC.\r\n\r\n@ctubbsii - Do you know if Thrift still does not support SSL or SASL with a non-blocking server?\r\n\r\nI just kicked off a new full IT build to see what is still broken. I'm going to also convert this to a draft PR until we work through some of these issues such as what to do about SSL and SASL being blocking (maybe we just don't support async for now with that), async multiplexing, etc.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381607258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381616958","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2381616958","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2381616958,"node_id":"IC_kwDOACaFSM6N9Jc-","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-29T21:31:41Z","updated_at":"2024-09-29T21:31:41Z","author_association":"CONTRIBUTOR","body":"@keith-turner just pointed out to me that we need to make sure the sync version of the compaction coordinator service doesn't use the async version because that will long poll which we do not want, so when I get time i will revert the sync version back to the old way so we don't long poll. I will need to do a little refactoring so some of the same code can be shared between both versions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2381616958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2383017629","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2383017629","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2383017629,"node_id":"IC_kwDOACaFSM6OCfad","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T12:12:43Z","updated_at":"2024-09-30T12:12:43Z","author_association":"CONTRIBUTOR","body":"The full IT got stuck again, it keeps hanging forever on `ExternalCompaction_3_IT` but I am not sure why yet. The only other tests I saw fail were BackupManagerIT and IdleProcessMetricsIT but these may be related to the new thrift service/port, I am not sure yet. Until ExternalCompaction_3_IT is hard to know what else needs fixing as the build won't finish.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2383017629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2383843540","html_url":"https://github.com/apache/accumulo/pull/4933#issuecomment-2383843540","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4933","id":2383843540,"node_id":"IC_kwDOACaFSM6OFpDU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-30T18:01:32Z","updated_at":"2024-09-30T18:01:32Z","author_association":"CONTRIBUTOR","body":"This PR squashed the changes from #4898 into 3.1 and resolved conflicts.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2383843540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2384794023","html_url":"https://github.com/apache/accumulo/pull/4930#issuecomment-2384794023","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4930","id":2384794023,"node_id":"IC_kwDOACaFSM6OJRGn","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-01T05:03:57Z","updated_at":"2024-10-01T05:03:57Z","author_association":"MEMBER","body":"> will pursue other avenues like changing the version in all poms prior to creating artifacts.\r\n\r\nHere's one option:\r\n\r\n```bash\r\nmvn versions:set -DnewVersion=\"2.1.4.$(git rev-parse HEAD)-SNAPSHOT\" -DgenerateBackupPoms=false &&\r\n  mvn install -PskipQA &&\r\n  git reset --hard # or another call to versions:set to reset the version here\r\n```\r\n\r\nThe manifest will show the revision with `-dirty` appended in the Implementation-Build field, but I think that's okay if the version bump is the only thing that dirtied the workspace. If you want to avoid that, you could commit the version change in your development branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2384794023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2386638465","html_url":"https://github.com/apache/accumulo/issues/4849#issuecomment-2386638465","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4849","id":2386638465,"node_id":"IC_kwDOACaFSM6OQTaB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-01T18:05:13Z","updated_at":"2024-10-01T18:05:13Z","author_association":"CONTRIBUTOR","body":"If #4851 is merged, then we can deprecate and remove CompactionHost.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2386638465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2388641932","html_url":"https://github.com/apache/accumulo/pull/4927#issuecomment-2388641932","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4927","id":2388641932,"node_id":"IC_kwDOACaFSM6OX8iM","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T13:26:00Z","updated_at":"2024-10-02T13:26:28Z","author_association":"CONTRIBUTOR","body":"I think I missed the initial inclusion of the CountDownTimer class. I went looking to see if an implementation already existed that we could just use and not have to maintain ourselves. I didn't find one, but I found three implementations of a StopWatch. One StopWatch is in [our](https://github.com/apache/accumulo/blob/3.1/core/src/main/java/org/apache/accumulo/core/util/StopWatch.java) codebase and it appears unused and a candidate for removal, [Commons-Lang](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/StopWatch.html) has one, and [Guava](https://guava.dev/releases/24.0-jre/api/docs/com/google/common/base/Stopwatch.html) does too. A timer is just checking to see if some amount of time has passed. I'm wondering if we should leverage an existing StopWatch implementation inside of the CountDownTimer to reduce the amount of code that we have to maintain and test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2388641932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2388761777","html_url":"https://github.com/apache/accumulo/issues/4906#issuecomment-2388761777","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4906","id":2388761777,"node_id":"IC_kwDOACaFSM6OYZyx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T14:15:09Z","updated_at":"2024-10-02T14:15:09Z","author_association":"CONTRIBUTOR","body":"The TransactionRunner runnables are added to a scheduled executor service. The TransactionRunner can die due to some Error or Exception, but the executor service is monitored and new TransactionRunner's are added as necessary. See:\r\n\r\nhttps://github.com/apache/accumulo/blob/f52c0b4dd483fb1a4ff5029ab3efe4b7e8ce0f78/core/src/main/java/org/apache/accumulo/core/fate/Fate.java#L353-L377 .\r\n\r\nThe `WorkFinder` thread is created via the Threads class, which should be true of almost every server-side thread in the codebase. The Threads created via this class have an UncaughtExceptionHandler set on them that will terminate the VM. See https://github.com/apache/accumulo/blob/main/core/src/main/java/org/apache/accumulo/core/util/threads/AccumuloUncaughtExceptionHandler.java","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2388761777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389048402","html_url":"https://github.com/apache/accumulo/pull/4934#issuecomment-2389048402","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4934","id":2389048402,"node_id":"IC_kwDOACaFSM6OZfxS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T16:02:25Z","updated_at":"2024-10-02T16:02:25Z","author_association":"MEMBER","body":"> Looks good, do all the tests still pass?\r\n\r\nI tested all the tests that changed, but not a full build, which I don't expect to be impacted","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389048402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389180402","html_url":"https://github.com/apache/accumulo/issues/4906#issuecomment-2389180402","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4906","id":2389180402,"node_id":"IC_kwDOACaFSM6OZ__y","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T17:05:53Z","updated_at":"2024-10-02T17:05:53Z","author_association":"MEMBER","body":"Ah okay thanks regarding the TransactionRunner. When I get around to this, I'll double check that new runners are created if needed, but the existing code looks good.\r\nWhen I was checking this, when the WorkFinder died, the termination did not occur... I'll look at this again when I get around to it","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389180402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389456771","html_url":"https://github.com/apache/accumulo/pull/4927#issuecomment-2389456771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4927","id":2389456771,"node_id":"IC_kwDOACaFSM6ObDeD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T18:49:49Z","updated_at":"2024-10-02T18:49:49Z","author_association":"MEMBER","body":"I think it's worth looking into one of the existing libraries to use. But, we'd need to be careful it's fast and efficient, and not something that is going to be slow by creating unnecessary Duration objects to do simple arithmetic operations on nanoTime.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389456771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389496782","html_url":"https://github.com/apache/accumulo/pull/4927#issuecomment-2389496782","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4927","id":2389496782,"node_id":"IC_kwDOACaFSM6ObNPO","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T19:14:22Z","updated_at":"2024-10-02T19:14:22Z","author_association":"MEMBER","body":"Yea I think its worth looking into as well. Maybe we can open a new ticket to remove the StopWatch class thats in our codebase and look into the existing timing utils.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389496782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389558114","html_url":"https://github.com/apache/accumulo/pull/4936#issuecomment-2389558114","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4936","id":2389558114,"node_id":"IC_kwDOACaFSM6ObcNi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T19:52:31Z","updated_at":"2024-10-02T19:52:31Z","author_association":"CONTRIBUTOR","body":"I looked for other places where caching of AccumuloConfiguration.getTimeInMillis might be occurring, I didn't find anything explicit. The only place that seems questionable is at:\r\n\r\nhttps://github.com/apache/accumulo/blob/c40645964ef1bd02a5ab7ac04dead53d03274658/server/tserver/src/main/java/org/apache/accumulo/tserver/tablet/CompactableImpl.java#L612-L614","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389558114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389767140","html_url":"https://github.com/apache/accumulo/issues/4937#issuecomment-2389767140","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4937","id":2389767140,"node_id":"IC_kwDOACaFSM6OcPPk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-02T22:01:47Z","updated_at":"2024-10-02T22:01:47Z","author_association":"CONTRIBUTOR","body":"If / when #4851 is merged, you could use the `ServerId` class.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2389767140/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391580336","html_url":"https://github.com/apache/accumulo/pull/4465#issuecomment-2391580336","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4465","id":2391580336,"node_id":"IC_kwDOACaFSM6OjJ6w","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T14:32:43Z","updated_at":"2024-10-03T14:32:43Z","author_association":"MEMBER","body":"I remembered this was supposed to wait until https://github.com/apache/accumulo/pull/4807 was merged. https://github.com/apache/accumulo/pull/4807 has since been merged. I don't think tests have been added, maybe that needs to be addressed before this is merged","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391580336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391900907","html_url":"https://github.com/apache/accumulo/issues/1050#issuecomment-2391900907","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1050","id":2391900907,"node_id":"IC_kwDOACaFSM6OkYLr","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:00:52Z","updated_at":"2024-10-03T17:00:52Z","author_association":"CONTRIBUTOR","body":"@ctubbsii @keith-turner  - Chop compactions were removed in 3.1, right? Merges should definitely be faster in 4.0. Should we assign this to the 4.0 milestone and close this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391900907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391922720","html_url":"https://github.com/apache/accumulo/issues/4926#issuecomment-2391922720","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4926","id":2391922720,"node_id":"IC_kwDOACaFSM6Okdgg","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:12:50Z","updated_at":"2024-10-03T17:12:50Z","author_association":"MEMBER","body":"Added logging to this code and it turns out that it is not creating more meters each time.\r\n```java\r\nlog.info(\"Current meter count after update: {}\", registry.getMeters().size());\r\n```\r\nresults in:\r\n```\r\n2024-10-03T13:01:44,307 [fate.FateMetrics] INFO : Current meter count after update: 17\r\n2024-10-03T13:02:44,306 [fate.FateMetrics] INFO : Current meter count after update: 17\r\n2024-10-03T13:03:44,307 [fate.FateMetrics] INFO : Current meter count after update: 17\r\n2024-10-03T13:04:44,305 [fate.FateMetrics] INFO : Current meter count after update: 17\r\n2024-10-03T13:05:44,306 [fate.FateMetrics] INFO : Current meter count after update: 17\r\n```\r\n\r\nWhich shows that this metric update code is being called once every minute (not each second like I thought before) and the number of meters is not increasing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391922720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391944918","html_url":"https://github.com/apache/accumulo/issues/1884#issuecomment-2391944918","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1884","id":2391944918,"node_id":"IC_kwDOACaFSM6Oki7W","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:25:34Z","updated_at":"2024-10-03T17:25:34Z","author_association":"CONTRIBUTOR","body":"It looks like ARM64 GitHub ActionRunners are coming soon.\r\n\r\nhttps://github.blog/news-insights/product-news/arm64-on-github-actions-powering-faster-more-efficient-build-systems/","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391944918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391949720","html_url":"https://github.com/apache/accumulo/issues/1954#issuecomment-2391949720","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1954","id":2391949720,"node_id":"IC_kwDOACaFSM6OkkGY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:28:19Z","updated_at":"2024-10-03T17:28:19Z","author_association":"CONTRIBUTOR","body":"I'm going to close this as the original issue was lost work due to a TabletServer death. This becomes less of a concern with external compactions introduced in 2.1. It's still a possibility, but the user now has the option to run the major compactions outside of the tablet server.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391949720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391954608","html_url":"https://github.com/apache/accumulo/issues/2288#issuecomment-2391954608","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2288","id":2391954608,"node_id":"IC_kwDOACaFSM6OklSw","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:30:37Z","updated_at":"2024-10-03T17:30:37Z","author_association":"CONTRIBUTOR","body":"@ctubbsii  - do we want to add this to 4.0, and force a minimum ZooKeeper version?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391954608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391956782","html_url":"https://github.com/apache/accumulo/issues/2301#issuecomment-2391956782","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2301","id":2391956782,"node_id":"IC_kwDOACaFSM6Okl0u","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:31:51Z","updated_at":"2024-10-03T17:31:51Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - is this still an issue with your changes to the TabletLocator in 4.0?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391956782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391969548","html_url":"https://github.com/apache/accumulo/issues/2404#issuecomment-2391969548","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2404","id":2391969548,"node_id":"IC_kwDOACaFSM6Oko8M","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:38:42Z","updated_at":"2024-10-03T17:38:42Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo  - this code was modified in #2574 . Do you think more needs to be done here?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391969548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391978272","html_url":"https://github.com/apache/accumulo/issues/2473#issuecomment-2391978272","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2473","id":2391978272,"node_id":"IC_kwDOACaFSM6OkrEg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:43:25Z","updated_at":"2024-10-03T17:43:25Z","author_association":"CONTRIBUTOR","body":"@keith-turner  @cshannon - this seems to be about Fate serialization with generics. Is this still an issue with the recent Fate changes?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391978272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391979692","html_url":"https://github.com/apache/accumulo/issues/2482#issuecomment-2391979692","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2482","id":2391979692,"node_id":"IC_kwDOACaFSM6Okras","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:44:11Z","updated_at":"2024-10-03T17:44:11Z","author_association":"CONTRIBUTOR","body":"1.x is EOL. I'm closing this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391979692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391984660","html_url":"https://github.com/apache/accumulo/issues/2483#issuecomment-2391984660","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2483","id":2391984660,"node_id":"IC_kwDOACaFSM6OksoU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:46:59Z","updated_at":"2024-10-03T17:46:59Z","author_association":"CONTRIBUTOR","body":"@keith-turner @cshannon - Is this still an issue after the recent Fate changes? Can multiple Fate transactions run concurrently on different parts of the table? I'm thinking the answer is yes with the new operation_id column in the tablet metadata in v4.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2391984660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392006015","html_url":"https://github.com/apache/accumulo/issues/3256#issuecomment-2392006015","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3256","id":2392006015,"node_id":"IC_kwDOACaFSM6Okx1_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T17:59:22Z","updated_at":"2024-10-03T17:59:22Z","author_association":"CONTRIBUTOR","body":"Closed by #3542, backported to the 2.1.2 release.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392006015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392009345","html_url":"https://github.com/apache/accumulo/issues/3397#issuecomment-2392009345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3397","id":2392009345,"node_id":"IC_kwDOACaFSM6OkyqB","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T18:01:10Z","updated_at":"2024-10-03T18:01:10Z","author_association":"CONTRIBUTOR","body":"Closed by #4853 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392009345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392083519","html_url":"https://github.com/apache/accumulo/issues/2404#issuecomment-2392083519","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2404","id":2392083519,"node_id":"IC_kwDOACaFSM6OlEw_","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T18:41:15Z","updated_at":"2024-10-03T18:41:15Z","author_association":"MEMBER","body":"> @DomGarguilo - this code was modified in #2574 . Do you think more needs to be done here?\r\n\r\nNothing more needs to be done as far as I'm concerned. It looks like @keith-turner, who originally suggested re-evaluationg this case, has already taken another look at the code and made changes so I think this can be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392083519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392341343","html_url":"https://github.com/apache/accumulo/pull/4942#issuecomment-2392341343","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4942","id":2392341343,"node_id":"IC_kwDOACaFSM6OmDtf","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-03T21:08:38Z","updated_at":"2024-10-03T21:08:38Z","author_association":"MEMBER","body":"@meatballspaghetti this should help simplify a few situations relevant to #4698 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2392341343/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2393539938","html_url":"https://github.com/apache/accumulo/issues/2473#issuecomment-2393539938","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2473","id":2393539938,"node_id":"IC_kwDOACaFSM6OqoVi","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T11:58:20Z","updated_at":"2024-10-04T11:58:20Z","author_association":"CONTRIBUTOR","body":"> @keith-turner @cshannon - this seems to be about Fate serialization with generics. Is this still an issue with the recent Fate changes?\r\n\r\nThe generics haven't changed, but I don't really think it's a big deal and I personally don't see a need to refactor it and not sure it would actually help anything.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2393539938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2393561265","html_url":"https://github.com/apache/accumulo/issues/2483#issuecomment-2393561265","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2483","id":2393561265,"node_id":"IC_kwDOACaFSM6Oqtix","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T12:10:01Z","updated_at":"2024-10-04T12:10:01Z","author_association":"CONTRIBUTOR","body":"Yeah I would say that the opid column is the table range lock as it allows locking tablets for fate operations. Some fate operations stll require locking the entire tablet (like delete table, clone, etc) but there is no getting around that. I can let @keith-turner comment too but I believe operations like Split, merge, etc that set that operation id should be able to work concurrently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2393561265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394071637","html_url":"https://github.com/apache/accumulo/pull/4944#issuecomment-2394071637","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4944","id":2394071637,"node_id":"IC_kwDOACaFSM6OsqJV","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T16:32:47Z","updated_at":"2024-10-04T16:32:47Z","author_association":"CONTRIBUTOR","body":"The failure here seems like a spotsbug false positive.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394071637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394152087","html_url":"https://github.com/apache/accumulo/issues/4945#issuecomment-2394152087","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4945","id":2394152087,"node_id":"IC_kwDOACaFSM6Os9yX","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T17:02:46Z","updated_at":"2024-10-04T17:02:46Z","author_association":"CONTRIBUTOR","body":"I can take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394152087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394164222","html_url":"https://github.com/apache/accumulo/pull/4944#issuecomment-2394164222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4944","id":2394164222,"node_id":"IC_kwDOACaFSM6OtAv-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T17:04:20Z","updated_at":"2024-10-04T17:04:20Z","author_association":"CONTRIBUTOR","body":"Update your version of `main`. I had an un-pushed merge commit that I pushed after your merged in the other PR. That might be the conflict.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394164222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394187200","html_url":"https://github.com/apache/accumulo/pull/4944#issuecomment-2394187200","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4944","id":2394187200,"node_id":"IC_kwDOACaFSM6OtGXA","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T17:18:45Z","updated_at":"2024-10-04T17:18:45Z","author_association":"CONTRIBUTOR","body":"> The failure here seems like a spotsbug false positive.\r\n\r\nI thought that was the case too.  Tried running the exact command locally and it passed. So went and looked at the git hash for the github actions build to make sure it was reading the same data and noticed it was merging in main prio to building.  So I tried merging main locally and then the build error messages started to actually make sense and line up with places where lamda existed doing the incorrect equality check.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394187200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394188479","html_url":"https://github.com/apache/accumulo/pull/4944#issuecomment-2394188479","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4944","id":2394188479,"node_id":"IC_kwDOACaFSM6OtGq_","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T17:19:35Z","updated_at":"2024-10-04T17:19:35Z","author_association":"CONTRIBUTOR","body":"> Update your version of main. I had an un-pushed merge commit that I pushed after your merged in the other PR. That might be the conflict.\r\n\r\nHa, I just saw this.  Wish I had seen it earlier before digging into the problem.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394188479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394462558","html_url":"https://github.com/apache/accumulo/pull/4931#issuecomment-2394462558","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4931","id":2394462558,"node_id":"IC_kwDOACaFSM6OuJle","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-04T19:45:16Z","updated_at":"2024-10-04T19:45:16Z","author_association":"CONTRIBUTOR","body":"I'm closing this PR for now because similarly to some limitations discovered in #4715 that put gRPC on hold, there are several issues with Async Thrift that prevent this from being a solution right now. I plan to open up a new issue for future investigation into async RPC that will include the findings from both gRPC and async thrift but some of the quick highlights of the async thrift issues include:\r\n\r\n1. No async multiplexing support (But there is an old PR that could be re-worked and reopened as part of [THRIFT-2427](https://issues.apache.org/jira/browse/THRIFT-2427))\r\n2. No Async SSL support. None of the non-blocking servers support SSL and that is a non-trivial thing to implement and is quite difficult due to the complexity of working with the JDK SSLEngine. (Which is why something like Netty is nice).\r\n3. No Async SASL support. There was a non-blocking SASL server added in https://issues.apache.org/jira/browse/THRIFT-4889 but it implements its own custom nonblocking extension to the server and doesn't support AsyncFrame or any of the async API so Async services will not work with it currently.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2394462558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2395596451","html_url":"https://github.com/apache/accumulo/issues/4664#issuecomment-2395596451","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4664","id":2395596451,"node_id":"IC_kwDOACaFSM6Oyeaj","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-06T21:46:20Z","updated_at":"2024-10-06T21:46:20Z","author_association":"CONTRIBUTOR","body":"I have not had a chance to open up a new issue yet to cover my findings of experimenting with async RPC using Async thrift and gRPC yet as mentioned in [this](https://github.com/apache/accumulo/pull/4931#issuecomment-2394462558) comment, but I was trying to think of any other options as well to help solve this, assuming the metrics that are added in #4945 demonstrate an issue.\r\n\r\nSomething else I thought of that we could try is to create an embedded Jetty REST service in the Manager for the getCompactionJob() RPC call and switch the Compactors to use that service to get next compaction job. \r\n\r\nI think this could work because:\r\n\r\n1. Jetty is already a dependency and used by the Monitor so we already use it.\r\n2. Since the Servlet 3.1 spec, async and non blocking requests have been supported so you can easily use long polling. Just like gRPC, you can offload the request until a response is ready and free up the worker thread. So this would allow a compactor to make a request and we could still use the new future async API added to the Compaction job queue.\r\n3. Jetty would get around the authentication issues with the other async RPC services because it supports SSL and looks to support Kerberos by configuring the [ConfigurableSpnegoLoginService](https://javadoc.jetty.org/jetty-11/org/eclipse/jetty/security/ConfigurableSpnegoLoginService.html)  (this would need to be tested to see if it works)\r\n4. Thrift has [support](https://github.com/apache/thrift/blob/0.17.0/lib/java/src/main/java/org/apache/thrift/protocol/TJSONProtocol.java) for encoding with Json so that could be used to encode/decode the existing Thrift objects when sending over HTTP.\r\n\r\nThe drawback would of course be that it would be a one off service that was only used for this one use case but otherwise as long as the authentication worked it would check the same boxes in terms of efficiently reducing latency for comaption job run time by allowing long polling so when a job is ready it can be immediately sent to a free compactor without blocking io threads.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2395596451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2396965364","html_url":"https://github.com/apache/accumulo/pull/4947#issuecomment-2396965364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4947","id":2396965364,"node_id":"IC_kwDOACaFSM6O3sn0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-07T13:39:09Z","updated_at":"2024-10-07T13:39:09Z","author_association":"CONTRIBUTOR","body":"Ah, I see. It would skip balancing user tables where there are unhosted tablets, then signal that everything was balanced.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2396965364/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2396970288","html_url":"https://github.com/apache/accumulo/pull/4938#issuecomment-2396970288","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4938","id":2396970288,"node_id":"IC_kwDOACaFSM6O3t0w","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-07T13:41:02Z","updated_at":"2024-10-07T13:41:02Z","author_association":"CONTRIBUTOR","body":"Closing in favor of #4947 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2396970288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2397716083","html_url":"https://github.com/apache/accumulo/pull/4851#issuecomment-2397716083","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4851","id":2397716083,"node_id":"IC_kwDOACaFSM6O6j5z","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-07T19:27:21Z","updated_at":"2024-10-07T19:27:21Z","author_association":"CONTRIBUTOR","body":"> There was a comment in here about wondering how the changes will affect what shows up on the monitor... it'd be good to check the monitor to verify the intended behavior prior to merging this.\r\n\r\nI did some local testing and the majc graph on the main page still does not show anything. The `/compactions` endpoint only shows tserver `minc`, but compactions do show up on the external compactions page. So, the monitor is still busted.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2397716083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2397737214","html_url":"https://github.com/apache/accumulo/issues/4952#issuecomment-2397737214","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4952","id":2397737214,"node_id":"IC_kwDOACaFSM6O6pD-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-07T19:38:30Z","updated_at":"2024-10-07T19:38:30Z","author_association":"CONTRIBUTOR","body":"#3928  was merged into 4.0 and added the Client interface to the Compactor and ScanServer. We could modify the ping command such that it took a type, resource group and host-port string to ping any one of these processes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2397737214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399507968","html_url":"https://github.com/apache/accumulo/issues/4937#issuecomment-2399507968","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4937","id":2399507968,"node_id":"IC_kwDOACaFSM6PBZYA","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T10:48:26Z","updated_at":"2024-10-08T10:48:26Z","author_association":"CONTRIBUTOR","body":"#4851 has been merged, ServerId class is available now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399507968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399513902","html_url":"https://github.com/apache/accumulo/issues/4815#issuecomment-2399513902","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4815","id":2399513902,"node_id":"IC_kwDOACaFSM6PBa0u","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T10:51:24Z","updated_at":"2024-10-08T10:51:24Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo  - can this be closed now?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399513902/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399519560","html_url":"https://github.com/apache/accumulo/issues/4782#issuecomment-2399519560","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4782","id":2399519560,"node_id":"IC_kwDOACaFSM6PBcNI","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T10:54:20Z","updated_at":"2024-10-08T10:54:20Z","author_association":"CONTRIBUTOR","body":"Now that #4851 has been merged there is a new ServerId object in the public API that is returned from InstanceOperations for the servers. It contains the resource group information. We could add a filter to the Shell commands to filter on ServerId.resourceGroup , and then contact the resulting servers.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399519560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399849200","html_url":"https://github.com/apache/accumulo/issues/4815#issuecomment-2399849200","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4815","id":2399849200,"node_id":"IC_kwDOACaFSM6PCsrw","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T13:27:25Z","updated_at":"2024-10-08T13:27:25Z","author_association":"MEMBER","body":"Closed via #4850 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2399849200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400256643","html_url":"https://github.com/apache/accumulo/issues/4950#issuecomment-2400256643","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4950","id":2400256643,"node_id":"IC_kwDOACaFSM6PEQKD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T16:07:11Z","updated_at":"2024-10-08T16:07:11Z","author_association":"CONTRIBUTOR","body":"`BadCOmpactionServiceConfigIT.testUsingMisconfiguredService` tests this condition, will need to reproduce again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400256643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400730615","html_url":"https://github.com/apache/accumulo/pull/4953#issuecomment-2400730615","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4953","id":2400730615,"node_id":"IC_kwDOACaFSM6PGD33","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T20:09:28Z","updated_at":"2024-10-08T20:09:28Z","author_association":"CONTRIBUTOR","body":"> Looks good, but wondering if this should go into 3.1.\r\n\r\nI think that would be quick and easy for this change, can look into it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400730615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400998428","html_url":"https://github.com/apache/accumulo/pull/4964#issuecomment-2400998428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4964","id":2400998428,"node_id":"IC_kwDOACaFSM6PHFQc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-08T23:43:07Z","updated_at":"2024-10-08T23:43:07Z","author_association":"CONTRIBUTOR","body":"If there will be a new version of the method in 4.0 then it may be better to deprecate there, then can have the new and old method in the same version giving time to migrate.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2400998428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402067220","html_url":"https://github.com/apache/accumulo/pull/4947#issuecomment-2402067220","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4947","id":2402067220,"node_id":"IC_kwDOACaFSM6PLKMU","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T11:33:42Z","updated_at":"2024-10-09T11:33:42Z","author_association":"CONTRIBUTOR","body":"FYI that WaitForBalanceIT is still failing in `main`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402067220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402069733","html_url":"https://github.com/apache/accumulo/pull/4960#issuecomment-2402069733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4960","id":2402069733,"node_id":"IC_kwDOACaFSM6PLKzl","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T11:34:49Z","updated_at":"2024-10-09T11:34:49Z","author_association":"CONTRIBUTOR","body":"Does this close #4961?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402069733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402099388","html_url":"https://github.com/apache/accumulo/pull/4964#issuecomment-2402099388","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4964","id":2402099388,"node_id":"IC_kwDOACaFSM6PLSC8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T11:47:53Z","updated_at":"2024-10-09T11:47:53Z","author_association":"CONTRIBUTOR","body":"I'm wondering if we should leave `ping(String)` as-is and just close this. The user of the API will will either need to get or construct a ServerId object when all we really need is the host and port. This could lead the user to performing more work than is necessary to populate the resourceGroup member of the ServerId object.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402099388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402579043","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2402579043","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2402579043,"node_id":"IC_kwDOACaFSM6PNHJj","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T14:56:56Z","updated_at":"2024-10-09T14:56:56Z","author_association":"CONTRIBUTOR","body":"> Another thing I looked at was the death of the WorkFinder and how that affects the Manager. Upon looking at AccumuloUncaughtExceptionHandler and testing this, only Errors halt the JVM so the Manager continues to run normally if an Exception is thrown and uncaught in the WorkFinder. Should this be the case? It seems that the Manager should either halt or create a new WorkFinder and not continue to run normally if an Exception is uncaught. I'm wondering if this is a problem elsewhere as well. Or maybe this isn't a problem at all. Some insight into this would be appreciated.\r\n\r\nAre there some Exception's which are not handled by WorkFinder?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2402579043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403283870","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2403283870","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2403283870,"node_id":"IC_kwDOACaFSM6PPzOe","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T19:33:22Z","updated_at":"2024-10-09T19:33:22Z","author_association":"MEMBER","body":"Some context: \r\nHere is the code for the `WorkFinder` thread:\r\n```\r\npublic void run() {\r\n      while (keepRunning.get()) {\r\n        try {\r\n          store.runnable(keepRunning, fateId -> {\r\n            while (keepRunning.get()) {\r\n              try {\r\n                // The reason for calling transfer instead of queueing is avoid rescanning the\r\n                // storage layer and adding the same thing over and over. For example if all threads\r\n                // were busy, the queue size was 100, and there are three runnable things in the\r\n                // store. Do not want to keep scanning the store adding those same 3 runnable things\r\n                // until the queue is full.\r\n                if (workQueue.tryTransfer(fateId, 100, MILLISECONDS)) {\r\n                  break;\r\n                }\r\n              } catch (InterruptedException e) {\r\n                Thread.currentThread().interrupt();\r\n                throw new IllegalStateException(e);\r\n              }\r\n            }\r\n          });\r\n        } catch (Exception e) {\r\n          if (keepRunning.get()) {\r\n            log.warn(\"Failure while attempting to find work for fate\", e);\r\n          } else {\r\n            log.debug(\"Failure while attempting to find work for fate\", e);\r\n          }\r\n\r\n          workQueue.clear();\r\n        }\r\n      }\r\n    }\r\n```\r\n@dlmarion and I briefly talked about this earlier... I mentioned that there *is* an exception not handled by the `WorkFinder` seeing that an `IllegalStateException` is thrown. He pointed out that this is caught, which I missed. But, I'm still not sure if this will work as expected if an `InterruptedException` is caught. I tested manually throwing an `InterruptedException` (only once) in the nested try/catch. This causes the interrupt flag to be set true and also to throw an `IllegalStateException`, which is caught and handled in the outer try/catch. However, I think setting the interrupt flag may cause issues. For example, one method this thread ends up calling is `ThriftScanner.scan()`. This has a check:\r\n```\r\n        if (Thread.currentThread().isInterrupted()) {\r\n          throw new AccumuloException(\"Thread interrupted\");\r\n        }\r\n```\r\nThis is caught in the outer catch of `run()` indefinitely.\r\n\r\nTo summarize: if `tryTransfer()` throws an `InterruptedException`, the thread will indefinitely throw `AccumuloException`s at least in some circumstances\r\n\r\nWould it be better if the `WorkFinder` was just terminated and a new one was started (or some other fix)? This may also just not be an issue, I'm not sure; I just found it strange when I was testing what would happen if an `InterruptedException` occurred that the Manager logs would be flooded with `AccumuloException`s and seemingly leave the `WorkFinder` broken.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403283870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403301166","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2403301166","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2403301166,"node_id":"IC_kwDOACaFSM6PP3cu","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T19:44:35Z","updated_at":"2024-10-09T19:44:35Z","author_association":"CONTRIBUTOR","body":"I'm wondering if `Thread.currentThread().interrupt();` was meant to be `Thread.currentThread().interrupted();` to clear the interrupt state.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403301166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403318628","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2403318628","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2403318628,"node_id":"IC_kwDOACaFSM6PP7tk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T19:55:43Z","updated_at":"2024-10-09T19:55:43Z","author_association":"CONTRIBUTOR","body":"Here is a similar situation:\r\n\r\nhttps://github.com/apache/accumulo/blob/bad0f89ca8596ac335bee2d2ac750723db5bb905/server/manager/src/main/java/org/apache/accumulo/manager/Manager.java#L668-L671","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403318628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403462816","html_url":"https://github.com/apache/accumulo/issues/4937#issuecomment-2403462816","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4937","id":2403462816,"node_id":"IC_kwDOACaFSM6PQe6g","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T21:29:56Z","updated_at":"2024-10-09T21:29:56Z","author_association":"CONTRIBUTOR","body":"I updated the javadoc in #4967. I didn't create a new concrete type for it. The return value is only used in the ListTabletsCommand where the String is printed. If we created a concrete type for this that separated the parts, then we would have to concatenate them back together just to print them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403462816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403529040","html_url":"https://github.com/apache/accumulo/pull/4968#issuecomment-2403529040","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4968","id":2403529040,"node_id":"IC_kwDOACaFSM6PQvFQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T22:21:05Z","updated_at":"2024-10-09T22:21:05Z","author_association":"CONTRIBUTOR","body":"This PR does not need review.  Pulled changes in #4953 back to 3.1.  Posting a PR so that I can get all of the GH action checks to run on the commit before merging it into 3.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403529040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403556322","html_url":"https://github.com/apache/accumulo/pull/4953#issuecomment-2403556322","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4953","id":2403556322,"node_id":"IC_kwDOACaFSM6PQ1vi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T22:48:46Z","updated_at":"2024-10-09T22:49:31Z","author_association":"CONTRIBUTOR","body":"All changes in this PR were made in #4968 and a3b346c02462ef948f6b5ac20aa4a434eca6d4aa","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2403556322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405214582","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2405214582","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2405214582,"node_id":"IC_kwDOACaFSM6PXKl2","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T14:14:08Z","updated_at":"2024-10-10T14:18:16Z","author_association":"MEMBER","body":"@dlmarion Based on the source code of `tryTransfer()` (and it seems like this is usually the case with most or all methods that throw an `InterruptedException`), the interrupted flag is cleared when the exception is thrown. So maybe that was the original intention, but it would have had no effect. I think the existing code *is* what was intended, but may have some unexpected outcomes. The typical pattern for handling a caught `InterruptedException` seems to be setting the interrupted flag to true (since it was cleared when the `InterruptedException` is thrown) and potentially some further handling.\r\n\r\nAlso, at best the linked Manager code has no effect or is a mistake and was meant to be `Thread.currentThread().interrupt();`. The method called in the try/catch which throws the `InterruptedException` (`ZooReaderWriter.delete(String)`) boils down to the `InterruptedException` thrown from a call to `Object.wait()` which clears the interrupt flag. So the `Thread.interrupted();` here has no effect.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405214582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405466146","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405466146","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405466146,"node_id":"IC_kwDOACaFSM6PYIAi","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T15:40:49Z","updated_at":"2024-10-10T15:40:49Z","author_association":"CONTRIBUTOR","body":"> . In the last step of the split code, in DeleteOperationIds, the EventCoordinator is notified to try and get the new splits hosted as fast as possible.\r\n\r\nThat makes me wonder if the current algorithm the manager runs for wait for balance is flawed.  Wondering if the algorithm should wait for the metadata table to be settled before it waits for the balancer to run.  Not completely sure about this, just trying to improve the handling of that situation.\r\n\r\n\r\n```java\r\n// scans the metadata table and counts the number tablets that do not have \r\n// a location and should OR have a location and should not (like offline tables)\r\npublic int countMissassignedTablets() {\r\n\r\n}\r\n\r\npublic void waitForBalance(){\r\n\r\n          while(countMissassignedTablets() != 0){\r\n              // TODO sleep using a retry obj\r\n          }\r\n    \r\n          waitForBalancerToRun();\r\n}\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405466146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405491843","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405491843","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405491843,"node_id":"IC_kwDOACaFSM6PYOSD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T15:52:58Z","updated_at":"2024-10-10T15:52:58Z","author_association":"CONTRIBUTOR","body":"The test code looks like the following in `main`:\r\n```\r\n      c.tableOperations().addSplits(tableName, partitionKeys);\r\n      assertFalse(isBalanced(c));\r\n      c.instanceOperations().waitForBalance();\r\n```\r\nThe failure is in the assertion in the middle line, not the call to `waitForBalance`. `isBalanced()` is a method in the test that checks the assignments in the metadata table, and it's returning `true`. So between the time the `addSplits` call returns and `isBalanced` performs its checks, the Manager has balanced the newly added tablets.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405491843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405518556","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405518556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405518556,"node_id":"IC_kwDOACaFSM6PYUzc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T16:05:51Z","updated_at":"2024-10-10T16:05:51Z","author_association":"CONTRIBUTOR","body":"> So between the time the addSplits call returns and isBalanced performs its checks, the Manager has balanced the newly added tablets.\r\n\r\nSeems like the assertFalse should be dropped, its always going to have the potential for race conditions.  Seems the test should do something like the following.\r\n\r\n```java\r\n      // should cause the table to become unbalanced\r\n      c.tableOperations().addSplits(tableName, partitionKeys);\r\n      c.instanceOperations().waitForBalance();\r\n      assertTrue(isBalanced(c));\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405518556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405528792","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405528792","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405528792,"node_id":"IC_kwDOACaFSM6PYXTY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T16:10:59Z","updated_at":"2024-10-10T16:10:59Z","author_association":"CONTRIBUTOR","body":"Adding another tserver seems like a valid resolution also. Is one better than the other?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405528792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405575387","html_url":"https://github.com/apache/accumulo/pull/4970#issuecomment-2405575387","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4970","id":2405575387,"node_id":"IC_kwDOACaFSM6PYirb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T16:35:26Z","updated_at":"2024-10-10T16:35:26Z","author_association":"CONTRIBUTOR","body":"These changes get the major compactions graph on the main page working, and lists both tservers and compactors on the Active Compactions page.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405575387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405615414","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405615414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405615414,"node_id":"IC_kwDOACaFSM6PYsc2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T16:55:37Z","updated_at":"2024-10-10T16:55:37Z","author_association":"CONTRIBUTOR","body":"> Adding another tserver seems like a valid resolution also. Is one better than the other?\r\n\r\nAdding the tserver seems fine.  I was just thinking that no matter what we do, the assertFalse prior to the waitForBalance call will always have race conditions.  Adding a tserver lowers the probability of that happening.  Seems liike we could add the tserver or remove the assertFalse call.  Conceptually we know adding splits should disrupt things if there are >1 tservers. The test should probably have asserted there were at least 2 tsevers, it was not checking the number of tservers until these changes checked for 3 tservers.  \r\n\r\nNothing to do with these changes, in general I am not sure the existing test is actually doing anything useful.  The assertFalse call will always have race conditions, then after the call to waitForBalance() when the system should be balanced the test code waits for balance on its own.\r\n\r\n```java\r\n      c.instanceOperations().waitForBalance();\r\n     // If at this point the system is not balanced the test can still pass and does not care, so what is it testing?\r\n      Wait.waitFor(() -> isBalanced(c));\r\n```\r\n\r\nWe could make changes to get the test to pass for now and open a follow on issue about investigating general improvements to the test.  Maybe ideally the test should look like the following.\r\n\r\n```java\r\n      c.tableOperations().addSplits(tableName, partitionKeys);\r\n      assertTrue(numTservers() >= 2);\r\n      c.instanceOperations().waitForBalance();\r\n      assertTrue(isBalanced(c));\r\n```\r\n\r\n\r\nIf adding the tserver gets the test passing for now, that seems like an ok short term fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405615414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405692298","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405692298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405692298,"node_id":"IC_kwDOACaFSM6PY_OK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T17:38:02Z","updated_at":"2024-10-10T17:38:02Z","author_association":"CONTRIBUTOR","body":"I think I merged our ideas in 2bb8649","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405692298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405702903","html_url":"https://github.com/apache/accumulo/pull/4969#issuecomment-2405702903","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4969","id":2405702903,"node_id":"IC_kwDOACaFSM6PZBz3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T17:43:55Z","updated_at":"2024-10-10T17:43:55Z","author_association":"CONTRIBUTOR","body":"Not sure what's happing with GitHub Actions right now.... It's building fine.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2405702903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2406078870","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2406078870","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2406078870,"node_id":"IC_kwDOACaFSM6PadmW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-10T21:33:15Z","updated_at":"2024-10-10T21:33:15Z","author_association":"CONTRIBUTOR","body":"Question: The Jetty server in the Monitor does not support Kerberos and does not seem subject to that requirement. Would the Jetty servers included in this proposal be subject to that requirement?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2406078870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407203498","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2407203498","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2407203498,"node_id":"IC_kwDOACaFSM6PewKq","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-11T11:21:55Z","updated_at":"2024-10-11T11:22:17Z","author_association":"CONTRIBUTOR","body":"I know this has been discussed before a few times, but reading the description here really makes me think we should just be looking at Prometheus/Grafana, Elastic stack, etc to for log aggregation like you mentioned in the alternatives just because those tools are built to do exactly this.\r\n\r\nHowever, even if we want to still keep the Monitor, i'm wondering if we could at least just use the Prometheus JMX [Exporter](https://github.com/prometheus/jmx_exporter). It exposes metrics with a rest API over http already so we would not need to create a Jetty server for each process as this would handle that. \r\n\r\nIt's obviously intended to be used by Prometheus to scrape the endpoints for the metrics, so we could run a Prometheus server to aggregate metrics and the Monitor could query Prometheus, but the Monitor could also just hit the HTTP endpoint directly from each process and scrape from that as a simpler solution.\r\n\r\nIt looks like Micrometer can export to [JMX](https://docs.micrometer.io/micrometer/reference/implementations/jmx.html) and also as some [direct](https://docs.micrometer.io/micrometer/reference/implementations/prometheus.html) Prometheus support that could help.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407203498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407223298","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2407223298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2407223298,"node_id":"IC_kwDOACaFSM6Pe1AC","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-11T11:34:41Z","updated_at":"2024-10-11T11:34:41Z","author_association":"CONTRIBUTOR","body":"> Question: The Jetty server in the Monitor does not support Kerberos and does not seem subject to that requirement. Would the Jetty servers included in this proposal be subject to that requirement?\r\n\r\nI forgot to mention that one caveat is the JMX exporter is likely limited in authentication mechanisms it provides (It should at least support SSL though) but metrics endpoints are usually meant to be kept internal behind a firewall where the other servers can connect but not public. So, I'm not not sure we would need to worry about Kerberos or not as those metrics endpoints should not be exposed outside a cluster and it's just metrics data. \r\n\r\nHowever, if someone does want to make sure all server to server communication is secured like everything else then I guess it would need to be supported and we'd need our own Jetty server and endpoint. Jetty appears to at least [support](https://javadoc.jetty.org/jetty-11/org/eclipse/jetty/security/ConfigurableSpnegoLoginService.html) Kerberos if needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407223298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407283022","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2407283022","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2407283022,"node_id":"IC_kwDOACaFSM6PfDlO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-11T12:11:58Z","updated_at":"2024-10-11T12:11:58Z","author_association":"CONTRIBUTOR","body":"I guess another option would be to push from the server processes to the Monitor. The server processes could discover the Monitor endpoint via ZooKeeper like I described above. In this case we would not need an http server in each server process, just a thread that uses an http client to push to the Monitor. The current Monitor Jetty server does not appear to support Kerberos, just TLS, so I'm not sure that Kerberos is a requirement.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407283022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407996462","html_url":"https://github.com/apache/accumulo/issues/4865#issuecomment-2407996462","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4865","id":2407996462,"node_id":"IC_kwDOACaFSM6Phxwu","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-11T19:19:21Z","updated_at":"2024-10-11T19:19:21Z","author_association":"MEMBER","body":"Closing as completed via #4893 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2407996462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408262531","html_url":"https://github.com/apache/accumulo/issues/4976#issuecomment-2408262531","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4976","id":2408262531,"node_id":"IC_kwDOACaFSM6PiyuD","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T00:22:37Z","updated_at":"2024-10-12T00:22:37Z","author_association":"MEMBER","body":"This was done in #3192 (and in #3197) for 3.0.0, and was documented in the published release notes at https://accumulo.apache.org/release/accumulo-3.0.0/\r\n\r\nIt was done largely in response to the discussion at https://github.com/apache/accumulo/pull/3189#discussion_r1099138145 as a follow-on to a decision to avoid adding a bunch of options to the ServerOpts in that issue, and instead favoring our published documentation at https://accumulo.apache.org/docs/2.x/configuration/server-properties3\r\n\r\nSo, this is already documented in the published docs on the website for 3.0, the convenience scripts for launching have been updated to use it automatically, and it was documented in the release notes for 3.0. I'm not sure how often people do `bin/accumulo tserver -?`, but I'd be surprised if users are normally calling `bin/accumulo tserver` directly, instead of through a provided convenience cluster management script, systemd unit, or similar entry point.\r\n\r\nI think the reasoning for removing it was sound, so I would not want to see it come back. But, I would be in favor of adding a note in the output of `bin/accumulo tserver -?` to document that it will change in a future release, and making it more prominent in the 3.0 release notes.\r\n\r\nAnother option is to add a warning when it is used in 2.1. That might be a bit noisy, though, unless you also backport the new property, so people can migrate away from using `-a` to avoid the warning. I'm not sure how difficult it will be to backport... probably not very difficult, but I'm not sure.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408262531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408263006","html_url":"https://github.com/apache/accumulo/issues/4976#issuecomment-2408263006","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4976","id":2408263006,"node_id":"IC_kwDOACaFSM6Piy1e","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T00:23:33Z","updated_at":"2024-10-12T00:23:33Z","author_association":"MEMBER","body":"If this is addressed, it should probably be addressed in 2.1, since that's where we'd want to add the extra documentation, or backport the configuration to.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408263006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408555664","html_url":"https://github.com/apache/accumulo/issues/4976#issuecomment-2408555664","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4976","id":2408555664,"node_id":"IC_kwDOACaFSM6Pj6SQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T12:57:00Z","updated_at":"2024-10-12T12:57:00Z","author_association":"CONTRIBUTOR","body":"> If this is addressed, it should probably be addressed in 2.1, since that's where we'd want to add the extra documentation, or backport the configuration to.\r\n\r\nif the `-o general.process.bind.addr=aHostName` is supported in 2.1, then documenting it in the help message there and merging that forward makes sense to me.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408555664/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408599386","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2408599386","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2408599386,"node_id":"IC_kwDOACaFSM6PkE9a","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T15:20:31Z","updated_at":"2024-10-12T15:20:31Z","author_association":"CONTRIBUTOR","body":"A good first step towards this may be to start removing some functionality as pre-requisite changes.  I would propose removing the following to start.\r\n\r\n 1. Remove metrics information from the balancer SPI. Ideally it would be better if this information were obtained from a metrics system by a balancer plugin.  How that is done would be very system dependent, so there is not much that could be done to support it after removing that from the SPI.  This along with the monitor depends on the custom thrift metrics system.\r\n 2. Remove the page on the monitor that plots different things.  This page is nice eye-candy, but its not that useful.  Its data is in memory, so when the manger restarts its gone.  It is only the last hour of data.  It lack the ability to slice and dice data.  For example in the past I have wanted to see those plots per table or per resource group, but that was not possible.  Attempting to make this page more useful would be going down the path of implementing a metrics system.\r\n\r\nNeed to asses what else could/should be removed. The two listed above are things that currently have a strong dependency on the custom metrics the manager collects from tablet severs via thrift.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408599386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408608661","html_url":"https://github.com/apache/accumulo/issues/2483#issuecomment-2408608661","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2483","id":2408608661,"node_id":"IC_kwDOACaFSM6PkHOV","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T15:55:00Z","updated_at":"2024-10-12T18:02:35Z","author_association":"CONTRIBUTOR","body":"I looked into removing the zookeeper table locks and ran into two problems.  \r\n\r\n 1. Multi tablet operations like merge set operation ids on tablet independently.  Removing table locks for these would require more complex locking operations on the tablets, something resembling two phase commit.\r\n 2. Some table data is stored in zookeeper, like table state.  So coordinating this type of zookeeper state w/ tablet state is much easier with the current zookeeper table locks.\r\n\r\nThe split code in accumulo 4 avoids using table locks, but that required adding complex code to coordinate with the table state stored in zookeeper.\r\n\r\nThe biggest advantage for table locks having a range would be allowing merge to run on one part of table and bulk import and compaction to continue to run on another part of the table.  But now that merge operations are much faster  this use case is not as compelling.  Compactions and bulk imports get read locks on tables, so those can run concurrently.\r\n\r\nLooking through all of the table operations that get write locks, found the following.\r\n\r\n * create table\r\n * delete table\r\n * rename table\r\n * change table state (offline/online)\r\n * clone table\r\n * import table\r\n * merge\r\n\r\nMerge seems to be the only operation that would benefit from a range on the table lock.  Create,delete, clone, etc would all lock the full range of the table if locks had a range.  Since merge is faster now and does not need the ranges, maybe there is no good use case for this feature.\r\n\r\nThere is a caveat though.  Even though merge is faster, once a merge is initiated it will wait for running bulk imports and table compactions to complete.  While its waiting it will prevent new ones from starting.  So it could cause a disturbance in throughput.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408608661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408610067","html_url":"https://github.com/apache/accumulo/issues/2301#issuecomment-2408610067","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2301","id":2408610067,"node_id":"IC_kwDOACaFSM6PkHkT","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T16:00:24Z","updated_at":"2024-10-12T16:00:24Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - is this still an issue with your changes to the TabletLocator in 4.0?\r\n\r\nIts not clear to me what specific action was desired for this issue, so I am not sure.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408610067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408610794","html_url":"https://github.com/apache/accumulo/issues/1050#issuecomment-2408610794","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1050","id":2408610794,"node_id":"IC_kwDOACaFSM6PkHvq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T16:02:53Z","updated_at":"2024-10-12T16:02:53Z","author_association":"CONTRIBUTOR","body":"> @ctubbsii @keith-turner - Chop compactions were removed in 3.1, right? Merges should definitely be faster in 4.0. Should we assign this to the 4.0 milestone and close this?\r\n\r\nThis seems strongly related to #2483.  Given that this issue was motivated primary by merge being slow, I think the no chop changes address that problem and this issue could be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408610794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408613697","html_url":"https://github.com/apache/accumulo/issues/1050#issuecomment-2408613697","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1050","id":2408613697,"node_id":"IC_kwDOACaFSM6PkIdB","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-12T16:11:34Z","updated_at":"2024-10-12T16:11:34Z","author_association":"MEMBER","body":"Yes, I agree this can be closed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2408613697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414003004","html_url":"https://github.com/apache/accumulo/issues/4981#issuecomment-2414003004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4981","id":2414003004,"node_id":"IC_kwDOACaFSM6P4sM8","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T13:59:09Z","updated_at":"2024-10-15T13:59:09Z","author_association":"CONTRIBUTOR","body":"Issue opened with no content. Open a new issue with appropriate content if needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414003004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414298407","html_url":"https://github.com/apache/accumulo/issues/4978#issuecomment-2414298407","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4978","id":2414298407,"node_id":"IC_kwDOACaFSM6P50Un","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:25:06Z","updated_at":"2024-10-15T15:25:40Z","author_association":"CONTRIBUTOR","body":"The goal of this proposed change is to reduce the overall latency of compactions. It would be good to have metrics that help understand what this latency is in a running system like #4980.  Would be nice to be able to compute a ratio like (compaction_run_time)/(compaction_admin_overhead+compaction_run_time).  The compaction_admin_overhead is reserving and commiting compactions and any other time not related to running the actual compaction.  The closer this ratio is to 1 the more efficient the system is, the further it is from one the less efficient and that could indicate a bug or transient runtime issue that needs investigation.  I am going to look into adding metrics to compute this ratio or see if existing metrics could be used.   The metrics work should probably precede this work and be used to inform any potential work on this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414298407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414318703","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2414318703","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2414318703,"node_id":"IC_kwDOACaFSM6P55Rv","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:29:03Z","updated_at":"2024-10-15T15:29:03Z","author_association":"CONTRIBUTOR","body":"In the elasticity design work we created a few tables in confluence that were really useful in helping think through the changes we eventually made.  For this work wondering if surveying the monitor and creating a table in a confluence page would be useful.  The table could summarize what information the monitor displays, where it currently obtains that information from, and if that information could be obtained from the aggregated metrics.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414318703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414359562","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2414359562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2414359562,"node_id":"IC_kwDOACaFSM6P6DQK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:37:14Z","updated_at":"2024-10-15T15:37:14Z","author_association":"CONTRIBUTOR","body":"> Noticed a lot of tcp connections to the monitor while this was running, around 1200\r\n\r\nMy guess is that the HttpClient is creating a new connection for each `async` request because it's using `http/1.1` which handles requests/responses serially. I added support for `http/2` to the Monitor in #4982 , which should allow the HttpClient to multiplex requests over the same connection.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414359562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414362092","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2414362092","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2414362092,"node_id":"IC_kwDOACaFSM6P6D3s","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:37:37Z","updated_at":"2024-10-15T15:37:37Z","author_association":"CONTRIBUTOR","body":"For the creating the confluence table, one question that could be useful to answer is how much of what the monitor currently displays could not be satisfied with metrics.  Its possible that any information the monitor is currently displaying that could be satisfied with metrics that we want to drop that display from the monitor in favor of using a metrics system.  This would leave the monitor only displaying information that can not be easily obtained from metrics.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414362092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414383712","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2414383712","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2414383712,"node_id":"IC_kwDOACaFSM6P6JJg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:42:39Z","updated_at":"2024-10-15T15:43:06Z","author_association":"CONTRIBUTOR","body":"> My guess is that the HttpClient is creating a new connection for each async request because it's using http/1.1 which handles requests/responses serially. I added support for http/2 to the Monitor in https://github.com/apache/accumulo/pull/4982 , which should allow the HttpClient to multiplex requests over the same connection.\r\n\r\nThat would be nice if it could do that.  The monitor appender code uses the Java http client, so we need to research it and see what its behavior is for that case.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414383712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414393114","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2414393114","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2414393114,"node_id":"IC_kwDOACaFSM6P6Lca","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T15:46:30Z","updated_at":"2024-10-15T15:46:30Z","author_association":"CONTRIBUTOR","body":"I believe that the preferred version is HTTP/2, see https://docs.oracle.com/en/java/javase/11/docs/api/java.net.http/java/net/http/HttpClient.html#version(). My guess is that it asks for an upgrade to `h2`, and if not then it stays at `http/1.1`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414393114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]