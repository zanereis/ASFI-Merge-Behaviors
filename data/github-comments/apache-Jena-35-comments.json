[{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310237230","html_url":"https://github.com/apache/jena/issues/1614#issuecomment-1310237230","issue_url":"https://api.github.com/repos/apache/jena/issues/1614","id":1310237230,"node_id":"IC_kwDOAHF7Ec5OGKIu","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T12:53:55Z","updated_at":"2022-11-10T12:53:55Z","author_association":"MEMBER","body":"> I guess, UNION clauses can't also be optimized\r\n\r\nThe filter is being pushed in - there isn't any reorder of rdf:type (which is usually assumed to be risky choice).\r\n\r\n```\r\n    (sequence\r\n        (union\r\n          (filter (contains (lcase ?itemLabel) \"border\"@en)\r\n            (quadpattern (quad <urn:x-arq:DefaultGraphNode> ?item <http://www.w3.org/2000/01/rdf-schema#label> ?itemLabel)))\r\n          (filter (contains (lcase ?itemLabel) \"border\"@en)\r\n            (quadpattern (quad <urn:x-arq:DefaultGraphNode> ?item <http://www.w3.org/2004/02/skos/core#altLabel> ?itemLabel))))\r\n        (quadpattern (quad <urn:x-arq:DefaultGraphNode> ?item <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://wikiba.se/ontology#Property>)))))\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310237230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310277065","html_url":"https://github.com/apache/jena/issues/1614#issuecomment-1310277065","issue_url":"https://api.github.com/repos/apache/jena/issues/1614","id":1310277065,"node_id":"IC_kwDOAHF7Ec5OGT3J","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T13:23:32Z","updated_at":"2022-11-10T13:25:44Z","author_association":"CONTRIBUTOR","body":"Just a comment on the stacktrace excerpt below. @LorenzBuehmann mentioned that `GraphUtils.allNodes` attempts to load everything into in memory thereby ignoring query timeouts. Without having looked into this in detail, maybe it's possible to mitigate this aspect of the raised issues by using a `QueryIterDistinct`.\r\n```\r\nat org.apache.jena.sparql.util.graph.GraphUtils.allNodes(GraphUtils.java:240)\r\n\tat org.apache.jena.sparql.path.PathLib.determineUngroundedStartingSet(PathLib.java:245)\r\n\tat org.apache.jena.sparql.path.PathLib.execUngroundedPath(PathLib.java:182)\r\n\tat org.apache.jena.sparql.path.PathLib.execTriplePath(PathLib.java:128)\r\n\tat org.apache.jena.sparql.path.PathLib.execTriplePath(PathLib.java:108)\r\n\tat org.apache.jena.sparql.engine.iterator.QueryIterPath.nextStage(QueryIterPath.java:47)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310277065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310677569","html_url":"https://github.com/apache/jena/issues/1306#issuecomment-1310677569","issue_url":"https://api.github.com/repos/apache/jena/issues/1306","id":1310677569,"node_id":"IC_kwDOAHF7Ec5OH1pB","user":{"login":"phillipross","id":9845938,"node_id":"MDQ6VXNlcjk4NDU5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/9845938?v=4","gravatar_id":"","url":"https://api.github.com/users/phillipross","html_url":"https://github.com/phillipross","followers_url":"https://api.github.com/users/phillipross/followers","following_url":"https://api.github.com/users/phillipross/following{/other_user}","gists_url":"https://api.github.com/users/phillipross/gists{/gist_id}","starred_url":"https://api.github.com/users/phillipross/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phillipross/subscriptions","organizations_url":"https://api.github.com/users/phillipross/orgs","repos_url":"https://api.github.com/users/phillipross/repos","events_url":"https://api.github.com/users/phillipross/events{/privacy}","received_events_url":"https://api.github.com/users/phillipross/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T17:57:40Z","updated_at":"2022-11-10T17:57:40Z","author_association":"CONTRIBUTOR","body":"> The only workaround I can find is to disable the e2e tests with `<phase>none</phase>`.\r\n> \r\n> 1. This seems to be a build/test issue and not related to the produced pages.\r\n> 2. It runs sometimes, and runs on a completely clean setup (Jenkins).\r\n> 3. It works for you.\r\n> \r\n> So it seems the webapp is functioning correctly.\r\n> \r\n> > Will have a look at this issue this weekend\r\n> \r\n> Have a weekend!\r\n> \r\n> We could check-in `pom.xml` with a disabled setup as a _short term_ solution and there isn't a rush.\r\n\r\nMight it make sense to control enabling/disabling e2e via a maven profile? maybe define a new maven profile intended to be used by CI that would be easy to enable/disable by specifying an env var, system property, etc when maven is invoked?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310677569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310761363","html_url":"https://github.com/apache/jena/issues/1614#issuecomment-1310761363","issue_url":"https://api.github.com/repos/apache/jena/issues/1614","id":1310761363,"node_id":"IC_kwDOAHF7Ec5OIKGT","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-10T18:57:53Z","updated_at":"2022-11-10T18:57:53Z","author_association":"MEMBER","body":"> Without having looked into this in detail, maybe it's possible to mitigate this aspect of the raised issues by using a QueryIterDistinct.\r\n\r\nShould be possible.\r\n\r\nAnd possibly properly push `QueryIterator` usage into `PathEvaluator` which is normal iterator centric.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1310761363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312527929","html_url":"https://github.com/apache/jena/issues/1608#issuecomment-1312527929","issue_url":"https://api.github.com/repos/apache/jena/issues/1608","id":1312527929,"node_id":"IC_kwDOAHF7Ec5OO5Y5","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-12T17:02:14Z","updated_at":"2022-11-12T17:02:14Z","author_association":"MEMBER","body":"@tangg555 - did you get things working?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312527929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312538929","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312538929","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312538929,"node_id":"IC_kwDOAHF7Ec5OO8Ex","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-12T17:57:25Z","updated_at":"2022-11-12T17:57:34Z","author_association":"MEMBER","body":"Interesting! I learned about lateral joins in a project some time ago, from a developer that was familiar with that concept in Postgres. He explained the same way, that it's similar to a for-loop: https://medium.com/kkempin/postgresqls-lateral-join-bfd6bd0199df\r\n\r\nLooking forward to trying it out in Jena.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312538929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312569261","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312569261","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312569261,"node_id":"IC_kwDOAHF7Ec5OPDet","user":{"login":"Tpt","id":458123,"node_id":"MDQ6VXNlcjQ1ODEyMw==","avatar_url":"https://avatars.githubusercontent.com/u/458123?v=4","gravatar_id":"","url":"https://api.github.com/users/Tpt","html_url":"https://github.com/Tpt","followers_url":"https://api.github.com/users/Tpt/followers","following_url":"https://api.github.com/users/Tpt/following{/other_user}","gists_url":"https://api.github.com/users/Tpt/gists{/gist_id}","starred_url":"https://api.github.com/users/Tpt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tpt/subscriptions","organizations_url":"https://api.github.com/users/Tpt/orgs","repos_url":"https://api.github.com/users/Tpt/repos","events_url":"https://api.github.com/users/Tpt/events{/privacy}","received_events_url":"https://api.github.com/users/Tpt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-12T20:49:31Z","updated_at":"2022-11-12T20:49:31Z","author_association":"NONE","body":"Thank you for moving forward with this idea! It would be amazing if we could come up with a compatible feature in Jena and Oxigraph. It might be a good baseline if the SPARQL 1.2 project somehow restarts.\r\n\r\nThank you for the restriction on introduced variables. I have not thought about it.\r\n\r\nFor sub-selects, I like the idea of bindings only the variables in the `SELECT` clause and failing if a variable is overridden using `AS`. Thank you! It looks much better than Oxigraph `OX_LATERAL(?s) {SELECT ?s {}}`.\r\n\r\nA question: I am a bit not at ease with the `LATERAL { <pattern> }` syntax because `LATERAL` is modifying pattern `<pattern>` evaluation, opposite to e.g. `OPTIONAL`, `UNION` or `MINUS` that just explain who the inner pattern should be joint with the previous one. Having e.g. `LATERAL OPTIONAL` or `LATERAL GRAPH` would make maybe more sense. What do you think about it?\r\n\r\nA side question: how to you plan to represents LATERALs in SPARQL S-Expressions? I am trying to keep Oxigraph as compatible as possible with Jena and Ruby-RDF.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312569261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312693377","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312693377","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312693377,"node_id":"IC_kwDOAHF7Ec5OPhyB","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T10:11:13Z","updated_at":"2022-11-13T10:11:13Z","author_association":"CONTRIBUTOR","body":"This is a feature many people are missing in SPARQL for a long time, so happy to see it in a long term in the standard and in near time in Jena - we're already making use of the enhanced `SERVICE` features contributed by @Aklakan in our projects and daily work, so seeing that feature would make SPARQL way more convenient. Who did not try to use SPARQL for something like *\"give me top X for each Y\"* like *\"give me 5 largest cities per country\"* ... \r\n\r\nMinor: In Scope section \r\n> A sub-select may have variables of the same name that are not lateral-joined to a variable of the same name from the RHS.\r\n\r\nDo you really mean RHS or is it LHS? @afs ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312693377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312698921","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312698921","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312698921,"node_id":"IC_kwDOAHF7Ec5OPjIp","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T10:41:21Z","updated_at":"2022-11-13T10:41:21Z","author_association":"MEMBER","body":"> Do you really mean RHS or is it LHS?\r\n\r\nFixed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312698921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312699029","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312699029","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312699029,"node_id":"IC_kwDOAHF7Ec5OPjKV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T10:41:55Z","updated_at":"2022-11-13T10:41:55Z","author_association":"MEMBER","body":"Description updated with an _outline_ of integration into [section 18 : Definition of SPARQL](https://www.w3.org/TR/sparql11-query/#sparqlDefinition) and [section 19 : SPARQL Grammar](https://www.w3.org/TR/sparql11-query/#grammar).\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312699029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312709453","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312709453","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312709453,"node_id":"IC_kwDOAHF7Ec5OPltN","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T11:41:06Z","updated_at":"2022-11-13T11:41:06Z","author_association":"MEMBER","body":"@tpt - thanks for the comments. \r\n\r\nIn the `OX_LATERAL ?v1 ?v2` those are inputs to the evaluation/ What appens if the evaluation retuns say `?x` and `?x` is also in the LHS? Does it do an inner join at that point?\r\n\r\n> how to you plan to represents LATERALs in SPARQL S-Expressions?\r\n\r\nThe current design is to have a operator in the algebra `lateral`. I'll PR a working branch (it's in my development clone ATM).\r\n\r\nWhile it is related to `sequence` of one or two elements, my preference is to have a separate operator which can have it's own definition. `sequence` is specific to the ARQ optimizer and implies certain conditions on its arguments.\r\n\r\n> LATERAL is modifying pattern <pattern> evaluation, opposite to e.g. OPTIONAL, UNION or MINUS\r\n\r\nAn existing example that is not so different is `FILTER ( NOT EXISTS { ... } )`.\r\n\r\nAt the moment, I'm looking to what are the fundamental operations. Is there one algebra operator needed? For syntax, it may be worth while having syntax forms for that translate to this/these funamental operations.\r\n\r\nMay be LATERAL should be `FOREACH`, `EACH`, or `LOOP`. A more direct statement of what it does in SPARQL++ rather than the technical sense of \"variables flowing laterally into an pattern evaluation\".\r\n\r\n`FOR { } DO { }` breaks up the query appearance and the sense that it is adding variable bindings to previous pattern. c.f. `BIND` and `OPTIONAL`. It is not the style (prefix function) elsewhere and if nested the outer is the last not the first part.\r\n\r\nIn PostgreSQL, `LATERAL` seems to be a modifier to one of the join operations. To some, people, it's not then a join operator but a web search finds \"lateral join\" [such usage](https://docs.snowflake.com/en/sql-reference/constructs/join-lateral.html). It is still a \"combining operator\".\r\n\r\nIn that style, there could be `OPTIONAL LATERAL`, c.f. `LEFT JOIN LATERAL`, or reversed which IMO reads better in SPARQL, but wouldn't here still be `LATERAL {...` because in SPARQL `INNER JOIN` is the empty string :-).\r\n\r\nIt is not a strict functional from (but again, this is not the first in SPARQL - as well as `EXISTS`, there are several expressions that are not strict functions; `IF`, `COALESCE`, `BOUND` and some others).\r\n\r\nFrom the point of view of fundamental operations, `LATERAL OPTIONAL` looks to be the same as `LATERAL { OPTIONAL { ... } }` but its early days and more investigation necessary.\r\n\r\n\r\nDo you have some examples we can explore?\r\n\r\nIf this is the case, and these are common, these can be syntax forms that translate to the same `lateral` algebra operator.\r\n\r\nDigression: It would be nice to have \"SELECT-less\" (sub)queries: `{ ?s ?p ?o } LIMIT 1`\r\nBut one thing at a time.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312709453/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312717336","html_url":"https://github.com/apache/jena/issues/1306#issuecomment-1312717336","issue_url":"https://api.github.com/repos/apache/jena/issues/1306","id":1312717336,"node_id":"IC_kwDOAHF7Ec5OPnoY","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T12:19:20Z","updated_at":"2022-11-13T12:19:20Z","author_association":"MEMBER","body":"Hi @phillipross,\r\nYes, though it seems to be only one machine, and it's become stable just be reordering. Which is a bit weird.\r\nWhat makes it painful is that the machine is one of the places to do a release from.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312717336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312732122","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312732122","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312732122,"node_id":"IC_kwDOAHF7Ec5OPrPa","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T13:34:41Z","updated_at":"2022-11-13T13:37:03Z","author_association":"CONTRIBUTOR","body":"> Possible addition: LATERAL ( ?var1 ?var2 ...)\r\n\r\nFor interoperability, it would be good if there was agreement for whether variable lists are unsupported, optional or mandatory.\r\nThey are not strictly necessary, but someone may find this useful e.g. for extra control when copy/pasting a long graph pattern into the rhs of a lateral join - or maybe even just for clarity. Conversely, optional variable lists would give more brevity especially when dealing with simple graph patterns.\r\n\r\nTo me it seems an 'optional' variable list would be most convenient to use.\r\n\r\nAlso, proper lateral join support would solve an issue with the service enhancer which @LorenzBuehmann found out:\r\n\r\n* `OPTIONAL { SERVICE <loop:> { X } }` becomes `OpConditional` which results in an exception during algebra-to-syntax reversal in OpAsQuery. So the service enhancer attempts to combine `OPTIONAL { LATERAL {} }` into one construct but that cannot be handled properly with the current machinery.\r\n* The mitigation so far is ` SERVICE <loop:> { OPTIONAL {  X }  }` but this has an undesired side effect when e.g. combining this with `SERVICE <cache:>`: The cache indexes results based on the parameters (algebra, joining input binding, row number). As a consequence, the graph pattern `X` is of course considered different from `OPTIONAL { X } ` which possibly results in cache misses.\r\n\r\nSo proper lateral is very welcome!\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312732122/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312734166","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312734166","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312734166,"node_id":"IC_kwDOAHF7Ec5OPrvW","user":{"login":"Tpt","id":458123,"node_id":"MDQ6VXNlcjQ1ODEyMw==","avatar_url":"https://avatars.githubusercontent.com/u/458123?v=4","gravatar_id":"","url":"https://api.github.com/users/Tpt","html_url":"https://github.com/Tpt","followers_url":"https://api.github.com/users/Tpt/followers","following_url":"https://api.github.com/users/Tpt/following{/other_user}","gists_url":"https://api.github.com/users/Tpt/gists{/gist_id}","starred_url":"https://api.github.com/users/Tpt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tpt/subscriptions","organizations_url":"https://api.github.com/users/Tpt/orgs","repos_url":"https://api.github.com/users/Tpt/repos","events_url":"https://api.github.com/users/Tpt/events{/privacy}","received_events_url":"https://api.github.com/users/Tpt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T13:44:28Z","updated_at":"2022-11-13T13:50:32Z","author_association":"NONE","body":"> The current design is to have a operator in the algebra lateral. I'll PR a working branch (it's in my development clone ATM).\r\n> While it is related to sequence of one or two elements, my preference is to have a separate operator which can have it's own definition. sequence is specific to the ARQ optimizer and implies certain conditions on its arguments.\r\n\r\nThank you! It definitely make sense.\r\n\r\n>> LATERAL is modifying pattern evaluation, opposite to e.g. OPTIONAL, UNION or MINUS\r\n> An existing example that is not so different is FILTER ( NOT EXISTS { ... } ).\r\n\r\nThat's a good point! Indeed, we have to already introduced the substitution operation for FILTER NOT EXISTS so having it inside of the \"lateral\" operator definition make sense. This gives a good definition of `LATERAL {` and, so, it make sense to have it as a \"standalone\" operator and not as a modifier of \"optional\", \"graph\"... This is the piece I was missing. I am now convinced by your proposal and it looks like the best design I have seen at the moment.\r\n\r\n> Digression: It would be nice to have \"SELECT-less\" (sub)queries: { ?s ?p ?o } LIMIT 1\r\n\r\nYes, to avoid the `SELECT *` but it's minor syntactic sugar imho.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312734166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312835418","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1312835418","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1312835418,"node_id":"IC_kwDOAHF7Ec5OQEda","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-13T22:11:28Z","updated_at":"2022-11-13T22:11:28Z","author_association":"MEMBER","body":"> * OPTIONAL { SERVICE <loop:> { X } } becomes OpConditional which results in an exception during algebra-to-syntax reversal in OpAsQuery.\r\n\r\nUnrelated.\r\n\r\nWhether perfect reversal is possible isn't clear - some kind of reversal isn't looking too hard but there's an interaction with LeftJoin conditions (expressions) so query equality round-trip is unlikely to be a simple matter to provide.\r\n\r\nYou'd maybe better working with unoptimized algebra. Ultimately: optimized => less likely OpAsQuery can reverse an algebra expression.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1312835418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313491885","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1313491885","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1313491885,"node_id":"IC_kwDOAHF7Ec5OSkut","user":{"login":"rubensworks","id":440384,"node_id":"MDQ6VXNlcjQ0MDM4NA==","avatar_url":"https://avatars.githubusercontent.com/u/440384?v=4","gravatar_id":"","url":"https://api.github.com/users/rubensworks","html_url":"https://github.com/rubensworks","followers_url":"https://api.github.com/users/rubensworks/followers","following_url":"https://api.github.com/users/rubensworks/following{/other_user}","gists_url":"https://api.github.com/users/rubensworks/gists{/gist_id}","starred_url":"https://api.github.com/users/rubensworks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rubensworks/subscriptions","organizations_url":"https://api.github.com/users/rubensworks/orgs","repos_url":"https://api.github.com/users/rubensworks/repos","events_url":"https://api.github.com/users/rubensworks/events{/privacy}","received_events_url":"https://api.github.com/users/rubensworks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T11:02:37Z","updated_at":"2022-11-14T11:02:37Z","author_association":"NONE","body":"So if I understand correctly, `LATERAL` is like an (inner) join, but where top-down execution (LHS->RHS) is enforced, as opposed to the default bottom-up evaluation when working with sub-queries.\r\n\r\n> In PostgreSQL, LATERAL seems to be a modifier to one of the join operations. To some, people, it's not then a join operator but a web search finds \"lateral join\" [such usage](https://docs.snowflake.com/en/sql-reference/constructs/join-lateral.html). It is still a \"combining operator\".\r\n\r\n> In that style, there could be OPTIONAL LATERAL, c.f. LEFT JOIN LATERAL, or reversed which IMO reads better in SPARQL, but wouldn't here still be LATERAL {... because in SPARQL INNER JOIN is the empty string :-).\r\n\r\nApplying this approach on different logical join types definitely makes sense to me. So considering `LATERAL` a join modifier seems useful.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313491885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313515300","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1313515300","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1313515300,"node_id":"IC_kwDOAHF7Ec5OSqck","user":{"login":"namedgraph","id":849526,"node_id":"MDQ6VXNlcjg0OTUyNg==","avatar_url":"https://avatars.githubusercontent.com/u/849526?v=4","gravatar_id":"","url":"https://api.github.com/users/namedgraph","html_url":"https://github.com/namedgraph","followers_url":"https://api.github.com/users/namedgraph/followers","following_url":"https://api.github.com/users/namedgraph/following{/other_user}","gists_url":"https://api.github.com/users/namedgraph/gists{/gist_id}","starred_url":"https://api.github.com/users/namedgraph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namedgraph/subscriptions","organizations_url":"https://api.github.com/users/namedgraph/orgs","repos_url":"https://api.github.com/users/namedgraph/repos","events_url":"https://api.github.com/users/namedgraph/events{/privacy}","received_events_url":"https://api.github.com/users/namedgraph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T11:12:27Z","updated_at":"2022-11-14T11:12:27Z","author_association":"CONTRIBUTOR","body":"Does it mean that \"SPARQL is evaluated bottom-up\" would not be true anymore?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313515300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313598820","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1313598820","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1313598820,"node_id":"IC_kwDOAHF7Ec5OS-1k","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T12:19:01Z","updated_at":"2022-11-15T08:29:02Z","author_association":"CONTRIBUTOR","body":"> Does it mean that \"SPARQL is evaluated bottom-up\" would not be true anymore?\r\n\r\nYes, lateral adds the feature \"For each binding on the left hand side substitute on the right-hand-side and only then evaluate it\". So it adds \"left-to-right\" evaluation.\r\nTo clarify: the lhs is first evaluated bottom up as usual, then for each lhs-result the rhs is substituted accordingly, and then the substituted rhs is also evaluated bottom up as usual - so it's NOT about overthrowing the semantics of sparql.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1313598820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1314390029","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1314390029","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1314390029,"node_id":"IC_kwDOAHF7Ec5OWAAN","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T21:15:16Z","updated_at":"2022-11-25T09:44:49Z","author_association":"CONTRIBUTOR","body":"sample path: ` ?a :p1|^:p2 ?b `","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1314390029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1314393589","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1314393589","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1314393589,"node_id":"IC_kwDOAHF7Ec5OWA31","user":{"login":"namedgraph","id":849526,"node_id":"MDQ6VXNlcjg0OTUyNg==","avatar_url":"https://avatars.githubusercontent.com/u/849526?v=4","gravatar_id":"","url":"https://api.github.com/users/namedgraph","html_url":"https://github.com/namedgraph","followers_url":"https://api.github.com/users/namedgraph/followers","following_url":"https://api.github.com/users/namedgraph/following{/other_user}","gists_url":"https://api.github.com/users/namedgraph/gists{/gist_id}","starred_url":"https://api.github.com/users/namedgraph/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namedgraph/subscriptions","organizations_url":"https://api.github.com/users/namedgraph/orgs","repos_url":"https://api.github.com/users/namedgraph/repos","events_url":"https://api.github.com/users/namedgraph/events{/privacy}","received_events_url":"https://api.github.com/users/namedgraph/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-14T21:18:25Z","updated_at":"2022-11-14T21:18:25Z","author_association":"CONTRIBUTOR","body":"Was `TransformPathFlattern` meant to be called `TransformPathFlattener`?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1314393589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1315212658","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1315212658","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1315212658,"node_id":"IC_kwDOAHF7Ec5OZI1y","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T12:02:30Z","updated_at":"2022-11-15T12:02:30Z","author_association":"MEMBER","body":"> Does it mean that \"SPARQL is evaluated bottom-up\" would not be true anymore?\r\n\r\nHave to be careful here.\r\n\r\nIt's the operator that determines the evaluation, there isn't some policy for the whole expression. Just most current algebra operators are depth first evaluation (AKA functions) and we all say \"evaluated bottom-up\".\r\n\r\n`(join A B)` is bottom up because `join` says \"evaluate the arguments separately then join the resulting tables\". It is the \"evaluate the arguments then ...\" which makes it a well-behaved function; it is doing a depth first walk \"bottom-up\".\r\n\r\n`(lateral A B)` says \"eval A, then loop on its rows, evaluating B such that the row from A is available for variables\". Defining the \"row being available to A\" as careful injection means eval `A[row]` is normal SPARQL evaluation, not a special case for inside LATERAL.\r\n\r\nThe proposal is that the row is `inject`ed (by the [corrected `substitute`](https://afs.github.io/substitute.html) operation) - the variable name is still there but it's binding is fixed by having a `BIND` just before it. There are places that require a variable work e.g. `SELECT ?var` or `FILTER(bound(?var))` where replacing a variable by it's value fails.\r\n\r\n----\r\n\r\nThere is a discussion point about whether \"eval B with row from A\" should or should not use the in-scope rules for variables:\r\n\r\n```\r\nSELECT * {\r\n   ?s ?p ?o\r\n   LATERAL {\r\n     SELECT ?label { ?s rdfs:label ?label } LIMIT 1\r\n   }\r\n}\r\n```\r\nDoes the `?s` in `{ ?s rdfs:label ?label }` connect to the `?s` before the `LATERAL`?\r\n\r\nFrom a SPARQL POV, that sub-query can otherwise be `SELECT ?label { ?z rdfs:label ?label } LIMIT 1` or `SELECT ?label { [] rdfs:label ?label } LIMIT 1` for the same results. `?label` is unrelated to the LHS triple because `?s` isn't in the `SELECT`.\r\n\r\n`SELECT ?s ?label { ?s rdfs:label ?label } LIMIT 1` does make the `?s` see the `?s` of `?s ?p ?o`.\r\nDitto `SELECT * { ?s rdfs:label ?label } LIMIT 1`.\r\n\r\nJust for `LATERAL`, it could be \"no scope rules\" and the inner `?s` does see the LHS `?s`.\r\n\r\nAt the moment, I'm more inclined to the scoping version so that there isn't a eval special case of \"inside LATERAL\" and making developing big queries piece-by-piece more predicable (arguably), but it does cause a \"surprise\" case. Another reason is that special cases tend to have complicated consequences.\r\n\r\nWhen/if we have query template and parameterization, unconditionally replacing `?s` by an RDF term makes sense and easier for users to comprehend.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1315212658/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1315880300","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1315880300","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1315880300,"node_id":"IC_kwDOAHF7Ec5Obr1s","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-15T21:22:55Z","updated_at":"2022-11-15T21:22:55Z","author_association":"MEMBER","body":"`TransformPathFlatternAlt` performs `P_Alt` transformation. \r\n\r\nIIRC it interacts with the BGP extension mechanism when considering beyond simple entailment. We;ll need to investigate this.\r\n\r\nThings to consider:\r\n\r\n* It might be better to restrict optimization to the case of the specific and important case of `(property | property)`, not general path. This is mentioned on [JENA-2325](https://issues.apache.org/jira/browse/JENA-2325).\r\n* It might be better to do performance improvements in the evaluation stage to preserve semantics. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1315880300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316422038","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1316422038","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1316422038,"node_id":"IC_kwDOAHF7Ec5OdwGW","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T06:10:55Z","updated_at":"2022-11-16T16:00:07Z","author_association":"CONTRIBUTOR","body":"> Does the ?s in { ?s rdfs:label ?label } connect to the ?s before the LATERAL?\r\n\r\nI'd say \"no scope rules\" (i.e. unconditional substitution) makes more sense when there is just LATERAL because otherwise aggregations would be complex to write. For example, I think that the query below should give for each class the capped count of its instances:\r\n```sparql\r\n#Q1:\r\nSELECT * {\r\n  ?type a owl:Class\r\n  LATERAL { SELECT (COUNT(*) AS ?cappedInstanceCount) { SELECT * { ?i a ?type } LIMIT 10000 } }\r\n}\r\n\r\n# Optional SELECT would be nice here too:\r\n# LATERAL { SELECT (COUNT(*) AS ?cappedInstanceCount) { { ?i a ?type } LIMIT 10000 } }\r\n```\r\nWhat good would do LATERAL if that wasn't the case?\r\n\r\n\r\nOtherwise, if scoping rules were applied then one would have to weave in the lateral-joining variables into the aggregations - which imho is needlessly cumbersome:\r\n```sparql\r\n#Q2:\r\nSELECT * {\r\n  ?type a owl:Class\r\n  LATERAL {\r\n    SELECT ?type (COUNT(*) AS ?cappedInstanceCount) { SELECT * { ?i a ?type } LIMIT 10000 } GROUP BY ?type\r\n  }\r\n}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316422038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316590923","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1316590923","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1316590923,"node_id":"IC_kwDOAHF7Ec5OeZVL","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T08:29:19Z","updated_at":"2022-11-16T08:29:48Z","author_association":"CONTRIBUTOR","body":"> * It might be better to restrict optimization to the case of the specific and important case of `(property | property)`, not general path. This is mentioned on [JENA-2325](https://issues.apache.org/jira/browse/JENA-2325).\r\n\r\nI would be fine with this - currently only `p+` and `p*` are handled smarter, but very common usages of `p|q` or  `p|^p` are not covered at all, leading to worst case scenario with an unbound triple pattern by gathering as seed nodes all subjects and objects in the graph and collecting those in a set. Note, we're more and more working on larger dataset like Wikidata, thus, it's definitely something that won't work at all in that case.\r\nWe also tried with at least handling basic cases of p_alt only contain p_oneormore, p_link or inverted p_links, this would cover probably most real world cases. It looks a bit clumsy still and maybe bringing the p_alt to some kind of normal form first would make it easier. @Aklakan also suggested to build an NFA, but I think we should keep it as simply as possible, we only need the first hop (or last to get objects) in the automaton to have seeds nodes. The rest of the evaluation I'd keep as is.  \r\n\r\nAlso as a comment, the PR addressed multiple things afaik:\r\n\r\n- consider `LIMIT X` due to fully working on iterators, thus, being as lazy as possible\r\n- usage of QueryIterators such that the query execution context is used to be aware of query termination when a timeout happened\r\n- handling of p_alt","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316590923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316669973","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1316669973","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1316669973,"node_id":"IC_kwDOAHF7Ec5OesoV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T09:25:39Z","updated_at":"2022-11-16T09:26:42Z","author_association":"MEMBER","body":"> an unbound triple pattern by gathering as seed nodes all subjects and objects in the graph\r\n\r\nPart 1 of #1614 is also about a lack of reordering across paths and that isn't in this PR.\r\n\r\nWe need to check we aren't heading off in the wrong direction with changes in path transformation and evaluation when there is a bigger picture.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316669973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316781838","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1316781838","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1316781838,"node_id":"IC_kwDOAHF7Ec5OfH8O","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T10:40:31Z","updated_at":"2022-11-16T10:40:31Z","author_association":"MEMBER","body":"Those two queries don't do the same thing :-) The only addition is the `?type` in `SELECT ?type (...` as you would need that if its a plain join. c.f. OxiGraph's `LATERAL(vars)`. The `GROUP BY` is orthogonal.\r\n\r\nThe variable isn't called `?type` - it's called `?/type` - it will have been renamed to a safe global name to avoid it picking up the outer one. If inside another subquery it's `?//type`. c.f programming: Global variables vs function parameters.\r\n\r\nWhat happens if `?type` is bound in some rows of the LHS and not others?\r\n\r\nFor users, copying in a standalone query fragment isn't necessary going to work for them because LATERAL can change the results. Lack of predictability limits other extensions. e.g. Named tables - results are calculated outside the LATERAL, so results are with-scoping, but put that query text inside the LATERAL (user intuition - named tables are a way to avoid repeated copies o query patterns ) and you can get different results.\r\n\r\nThere isn't a perfect answer here. Making LATERAL change the deep scoping rules, and is not just the evaluation of new operator will get complicated, will affect transformations and optimizations and will have surprises.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316781838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316798508","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1316798508","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1316798508,"node_id":"IC_kwDOAHF7Ec5OfMAs","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T10:52:35Z","updated_at":"2022-11-16T10:52:35Z","author_association":"CONTRIBUTOR","body":"> Part 1 of #1614 is also about a lack of reordering across paths and that isn't in this PR.\r\n\r\nTrue, but a query with only a single triple pattern having an alt_p would still benefit from smarter handling of basic property path cases to gather seed nodes. that was my point, we could easily add handle those without changing any other code but add more lines to method `PathLib::determineUngroundedStartingSet`\r\n\r\nIt would be a huge performance gain already:\r\nWikidata\r\n```sparql\r\nSELECT * {\r\n?s wd:P10564|wd:P4496 ?industry_code\r\n}\r\n```\r\nwhere both properties are used just in 1746 and 997 triples compared to millions of subjects and objects being gathered and then evaluated otherwise \r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1316798508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317272563","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1317272563","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1317272563,"node_id":"IC_kwDOAHF7Ec5Og_vz","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T16:13:41Z","updated_at":"2022-11-16T16:13:41Z","author_association":"MEMBER","body":"Per @afs earlier comment there is actually an alternative path transform already in the code base that already covered more complex path flattening such as alternatives.\r\n\r\nI've opened PR #1620 to make it possible to toggle that transform on with the existing optimiser via an ARQ symbol leaving the existing simple transform unchanged.  That way users can opt into the more extensive path flattening if they wish but the existing default behaviour remains.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317272563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317294563","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1317294563","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1317294563,"node_id":"IC_kwDOAHF7Ec5OhFHj","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T16:25:26Z","updated_at":"2022-11-16T16:38:41Z","author_association":"CONTRIBUTOR","body":"my concern would be that this completely different path flatterning in #1620  has never been put to wide testing and per the comment in the source file, `It does not produce very nice execution structures so ARQ uses\r\n a functional equivalent, but different, transformation.`. One obvious instance from your tests, `:p1{2}` now becomes a join instead of a simple bgp (although I guess the other optimisers will turn that back into a sequence which maybe isn't quite as bad?)\r\n\r\nAnother thought about Std should be given w.r.t inverse paths like `^:p1+`, they are reversed by the current optimiser but remain in reverse in the Std implementation. This might then cause worse behaviour in the determineUngroundedStartingSet which does not handle them at the moment afaik (fall-back to allNodes) ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317294563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317361817","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1317361817","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1317361817,"node_id":"IC_kwDOAHF7Ec5OhViZ","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T17:06:35Z","updated_at":"2022-11-16T17:17:03Z","author_association":"CONTRIBUTOR","body":"> The variable isn't called ?type - it's called ?/type\r\n\r\nWell yes, the good thing with the way the Jena implementation handles variable scopes with `/` makes it easy to define a `originalName`  function that maps e.g. `/type` and `///type` to `type`.\r\n\r\nThis way, one can add variable scope alignment as an extra step in the lateral definition - something along the lines of\r\n```\r\n[[Lateral(L, R)]]_D := { μ | union of Ω1 where \r\n           visibleLhsVars := visibleVars(L)\r\n           varScopeAlignedPattern := alignVarScopes(R, visibleLhsVars)\r\n           Ω =  [[L]]_D\r\n           foreach μ1 in Ω:\r\n               pattern2 = inject(varAlignedPattern, μ1)\r\n               Ω1 = { μ1 U μ2 | μ2 in [[pattern2]]_D }\r\n\t       result Ω1\r\n\t   }\r\n\r\nwith \r\n  alignVarScopes(R, varsToAlign) := return a new pattern by susbstituting\r\n                                    each variable v in pattern R with alignVar(v)\r\nwhere\r\n  alignVar(v, varsToAlign) := if exists w in varsToAlign with originalName(w) = originalName(v)\r\n                              then w; otherwise v\r\n```\r\n\r\nBut translating this into something compatible with the sparql spec which only has a notion of [in-scope](https://www.w3.org/TR/sparql11-query/#variableScope) seems painful :/\r\n\r\n> What happens if ?type is bound in some rows of the LHS and not others?\r\n\r\nFrom a substitution perspective I'd say it is simply not substituted - so in the example below everything would be fetched if `?o` was unbound.\r\nA binding cannot contain a variable with a \"null\" value - so the binding on the lhs without ?o and that of the rhs with ?o bound to something would be compatible.\r\n\r\n```\r\n?s a :Foo\r\nOPTIONAL { ?s :relatedTo ?o }\r\nLATERAL { ?o ?x ?y } // If ?o is unbound on the lhs then it's not substituted here - so ?o remains ?o.\r\n```\r\n\r\nOf course one could also argue that the rhs is simply not evaluated for such a binding in that case - but to me that seems more like a special rule then.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317361817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317377877","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1317377877","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1317377877,"node_id":"IC_kwDOAHF7Ec5OhZdV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T17:19:02Z","updated_at":"2022-11-16T17:19:02Z","author_association":"MEMBER","body":"> the Jena implementation handles variable scopes with / makes it easy to define a originalName function that maps e.g. /type and ///type to type.\r\n\r\nNot quite. The LATERAL may itself be sub-query nested so it's `?var` has been renamed `?/var`.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317377877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317397683","html_url":"https://github.com/apache/jena/issues/1615#issuecomment-1317397683","issue_url":"https://api.github.com/repos/apache/jena/issues/1615","id":1317397683,"node_id":"IC_kwDOAHF7Ec5OheSz","user":{"login":"Aklakan","id":839608,"node_id":"MDQ6VXNlcjgzOTYwOA==","avatar_url":"https://avatars.githubusercontent.com/u/839608?v=4","gravatar_id":"","url":"https://api.github.com/users/Aklakan","html_url":"https://github.com/Aklakan","followers_url":"https://api.github.com/users/Aklakan/followers","following_url":"https://api.github.com/users/Aklakan/following{/other_user}","gists_url":"https://api.github.com/users/Aklakan/gists{/gist_id}","starred_url":"https://api.github.com/users/Aklakan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Aklakan/subscriptions","organizations_url":"https://api.github.com/users/Aklakan/orgs","repos_url":"https://api.github.com/users/Aklakan/repos","events_url":"https://api.github.com/users/Aklakan/events{/privacy}","received_events_url":"https://api.github.com/users/Aklakan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T17:33:17Z","updated_at":"2022-11-16T17:38:20Z","author_association":"CONTRIBUTOR","body":"> The LATERAL may itself be sub-query nested so it's ?var has been renamed ?/var.\r\n\r\nYes, but the variable scope alignment always aligns the rhs with what is present on the lhs based on the original name.\r\nIf a LATERAL's lhs has `?///s` and its rhs has both `?////s` and `?///////s` then alignment on the rhs substitutes both latter with the former - because the original name is `?s` in all cases.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317397683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317721473","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1317721473","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1317721473,"node_id":"IC_kwDOAHF7Ec5OitWB","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-16T21:54:59Z","updated_at":"2022-11-16T21:54:59Z","author_association":"MEMBER","body":"Please fix commit 900dfc7676ba2d1e8a18d63c3c7d5eb5dc2a2dac - it has the whole original issue description (before it was fixed it up) and has people's names and ids in it.\r\n\r\nPut \"GH-1616: \" at the start of the commit message. It will then refer to the PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1317721473/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318422052","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1318422052","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1318422052,"node_id":"IC_kwDOAHF7Ec5OlYYk","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T10:29:52Z","updated_at":"2022-11-17T10:29:52Z","author_association":"MEMBER","body":"> my concern would be that this completely different path flatterning in #1620 has never been put to wide testing and per the comment in the source file,\r\n\r\nAnd my point is that neither is yours.  You're changing the default behaviour for all existing users based on testing on your own datasets.\r\n\r\nAs the recent flurry of issues around another new transform that was introduced has shown optimisations that benefit one dataset don't necessarily benefit all, and ultimately led to it being disabled by default (#1604).  Hence the suggestion of enabling an opt-in to the alternative transform rather than changing the existing default.\r\n\r\n> `It does not produce very nice execution structures so ARQ uses a functional equivalent, but different, transformation.`. One obvious instance from your tests, `:p1{2}` now becomes a join instead of a simple bgp (although I guess the other optimisers will turn that back into a sequence which maybe isn't quite as bad?)\r\n\r\nYes the full optimiser converts joins of adjacent BGPs or triple operators back into a single BGP, expanded my test cases to explicitly cover this now.\r\n\r\n> \r\n> Another thought about Std should be given w.r.t inverse paths like `^:p1+`, they are reversed by the current optimiser but remain in reverse in the Std implementation. This might then cause worse behaviour in the determineUngroundedStartingSet which does not handle them at the moment afaik (fall-back to allNodes)\r\n\r\nWell if both ends of the path are ungrounded whether we reverse it or not is irrelevant, and regardless we're conflating the issue of deficiencies in the path evaluator with algebra transformation.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318422052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318495640","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318495640","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318495640,"node_id":"IC_kwDOAHF7Ec5OlqWY","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T11:28:09Z","updated_at":"2022-11-17T11:28:09Z","author_association":"MEMBER","body":"@rvesse - could you add this one-line fix to the PR please: I just ran across the exception being raised when it shouldn't.\r\nThe optimize doesn't do anything in the case of `{2,}` but that's another issue.\r\nFirst, no exception.\r\n\r\n```\r\ndiff --git a/jena-arq/src/main/java/org/apache/jena/sparql/algebra/optimize/TransformPathFlatternStd.java b/jena-arq/src/main/java/org/apache/jena/sparql/algebra/optimize/TransformPathFlatternStd.java\r\nindex fe847fba79..8a19be4a50 100644\r\n--- a/jena-arq/src/main/java/org/apache/jena/sparql/algebra/optimize/TransformPathFlatternStd.java\r\n+++ b/jena-arq/src/main/java/org/apache/jena/sparql/algebra/optimize/TransformPathFlatternStd.java\r\n@@ -169,7 +169,7 @@ public class TransformPathFlatternStd extends TransformCopy {\r\n \r\n         @Override\r\n         public void visit(P_Mod pathMod) {\r\n-            if ( pathMod.getMin() > pathMod.getMax() )\r\n+            if ( pathMod.getMax() > 0 && pathMod.getMin() > pathMod.getMax() )\r\n                 throw new ARQException(\"Bad path: \" + pathMod);\r\n \r\n             Op op = null;\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318495640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318520668","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318520668","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318520668,"node_id":"IC_kwDOAHF7Ec5Olwdc","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T11:50:01Z","updated_at":"2022-11-17T11:50:01Z","author_association":"MEMBER","body":"> @rvesse - could you add this one-line fix to the PR please: I just ran across the exception being raised when it shouldn't. The optimize doesn't do anything in the case of `{2,}` but that's another issue. First, no exception.\r\n\r\nYes, both things addressed in my latest commit\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318520668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318673891","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318673891","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318673891,"node_id":"IC_kwDOAHF7Ec5OmV3j","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T13:54:43Z","updated_at":"2022-11-17T13:54:43Z","author_association":"MEMBER","body":"cc @SimonBin @Aklakan @LorenzBuehmann ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318673891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318898910","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318898910","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318898910,"node_id":"IC_kwDOAHF7Ec5OnMze","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:33:25Z","updated_at":"2022-11-17T16:33:25Z","author_association":"CONTRIBUTOR","body":"just don't forget that even with this option, ungrounded paths (that were not flattened) still don't respect limit and timeout","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318898910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318928539","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318928539","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318928539,"node_id":"IC_kwDOAHF7Ec5OnUCb","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:56:23Z","updated_at":"2022-11-17T16:56:23Z","author_association":"MEMBER","body":"> still don't respect limit and timeout\r\n\r\nThe description explains:\r\n_Intended as a less invasive first step related to https://github.com/apache/jena/pull/1616_\r\n\r\nThis PR is about enabling the transformation.\r\n\r\nI read \"first step\" as acknowledging that Limit and timeout come from PathLib which is at execution time.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318928539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318930517","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1318930517","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1318930517,"node_id":"IC_kwDOAHF7Ec5OnUhV","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T16:57:56Z","updated_at":"2022-11-17T16:57:56Z","author_association":"CONTRIBUTOR","body":"my personal opinion is still that P_Alt should be optimised by default but any improvement is a good thing :-)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1318930517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1319023795","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1319023795","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1319023795,"node_id":"IC_kwDOAHF7Ec5OnrSz","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T18:14:03Z","updated_at":"2022-11-17T18:14:03Z","author_association":"MEMBER","body":"It's not the only way to address the double unbound situation:\r\n\r\nIn `determineUngroundedStartingSet` add\r\n```\r\n        if (path instanceof P_Alt ) {\r\n            Iterator<Node> x = subjectsOfPath(graph, ((P_Path2)path).getLeft(), execCxt);\r\n            if ( x == null )\r\n                x = subjectsOfPath(graph, ((P_Path2)path).getRight(), execCxt);\r\n            if ( x != null )\r\n                return x;\r\n        }\r\n...\r\n```\r\nwhere `subjectsOfPath` handles `P_Link` and does `graph.find(_, property, _)`\r\n(this is not the only way - it is just an example)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1319023795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1319027463","html_url":"https://github.com/apache/jena/pull/1620#issuecomment-1319027463","issue_url":"https://api.github.com/repos/apache/jena/issues/1620","id":1319027463,"node_id":"IC_kwDOAHF7Ec5OnsMH","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T18:17:16Z","updated_at":"2022-11-17T18:18:04Z","author_association":"CONTRIBUTOR","body":"yes, see e.g the work Lorenz started here https://github.com/AKSW/jena/commit/061b7c90b36a64a0c700978007fd5340c34650d8 , but there are other cases like :p* where allNodes is used ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1319027463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1320080759","html_url":"https://github.com/apache/jena/pull/1621#issuecomment-1320080759","issue_url":"https://api.github.com/repos/apache/jena/issues/1621","id":1320080759,"node_id":"IC_kwDOAHF7Ec5OrtV3","user":{"login":"dependabot[bot]","id":49699333,"node_id":"MDM6Qm90NDk2OTkzMzM=","avatar_url":"https://avatars.githubusercontent.com/in/29110?v=4","gravatar_id":"","url":"https://api.github.com/users/dependabot%5Bbot%5D","html_url":"https://github.com/apps/dependabot","followers_url":"https://api.github.com/users/dependabot%5Bbot%5D/followers","following_url":"https://api.github.com/users/dependabot%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/dependabot%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/dependabot%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dependabot%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/dependabot%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/dependabot%5Bbot%5D/repos","events_url":"https://api.github.com/users/dependabot%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/dependabot%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T14:38:02Z","updated_at":"2022-11-18T14:38:02Z","author_association":"CONTRIBUTOR","body":"OK, I won't notify you again about this release, but will get in touch when a new version is available. If you'd rather skip all updates until the next major or minor version, let me know by commenting `@dependabot ignore this major version` or `@dependabot ignore this minor version`. You can also ignore all major, minor, or patch releases for a dependency by adding an [`ignore` condition](https://docs.github.com/en/code-security/supply-chain-security/configuration-options-for-dependency-updates#ignore) with the desired `update_types` to your config file.\n\nIf you change your mind, just re-open this PR and I'll resolve any conflicts on it.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1320080759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1320950402","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1320950402","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1320950402,"node_id":"IC_kwDOAHF7Ec5OvBqC","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-19T19:14:15Z","updated_at":"2022-11-19T19:14:15Z","author_association":"MEMBER","body":"The screenshots are not really helpful, I think. But the output of `netstat` starts with few ports including `3030`, gets more ports while the tests run, and then goes back to the initial state with `3030` bound by `python3 -m http.server 3030`.\r\n\r\nAnd the tests have run successfully :slightly_smiling_face: \r\n\r\nAlso tested running the backend with Eclipse and then `yarn run serve`, and everything worked as before (this is how I develop the UI).\r\n\r\nWhether we move the e2e tests out of the main execution, and into a profile, at least this PR will make sure that the tests can be executed regardless of whether another instance of Fuseki is already running or not.\r\n\r\n:+1: ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1320950402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321104421","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1321104421","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1321104421,"node_id":"IC_kwDOAHF7Ec5OvnQl","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T11:17:00Z","updated_at":"2022-11-20T11:17:00Z","author_association":"MEMBER","body":"Works fine on my (troublesome) machine.\r\n\r\nQ: Where do the tests actually invoke the java for the Fuseki server?\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321104421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321107475","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1321107475","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1321107475,"node_id":"IC_kwDOAHF7Ec5OvoAT","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T11:30:21Z","updated_at":"2022-11-20T11:30:21Z","author_association":"MEMBER","body":">Q: Where do the tests actually invoke the java for the Fuseki server?\r\n\r\nThe e2e tests actually never call a real Fuseki server.\r\n\r\nWe start the [e2e](https://github.com/apache/jena/blob/7f5da174900444d9b2828f97c64ac3bd209724cf/jena-fuseki2/jena-fuseki-ui/package.json#L12) script, that runs two commands: [a fake fuseki server](https://github.com/apache/jena/blob/7f5da174900444d9b2828f97c64ac3bd209724cf/jena-fuseki2/jena-fuseki-ui/package.json#L16) and Vue's dev utils e2e script. The fake Fuseki server listens to `3030` requests by default and returns [pre-defined responses](https://github.com/apache/jena/blob/7f5da174900444d9b2828f97c64ac3bd209724cf/jena-fuseki2/jena-fuseki-ui/src/services/mock/json-server.js) for some endpoints.\r\n\r\nVue's e2e script takes care to initialize and run the e2e tests. And some of these tests can also abstract the network layer, creating fake responses within the tests, so that the fake Fuseki server doesn't need to have a lot of `if/else` statements. e.g. https://github.com/apache/jena/blob/7f5da174900444d9b2828f97c64ac3bd209724cf/jena-fuseki2/jena-fuseki-ui/tests/e2e/specs/query.cy.js#L55-L60.\r\n\r\nI think the downside of this test design is that if the Java Fuseki endpoints change, we need to update the fake Fuseki endpoints and tests. An alternative would be to start a real Fuseki server, populate it, and run the e2e tests.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321107475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321115481","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1321115481","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1321115481,"node_id":"IC_kwDOAHF7Ec5Ovp9Z","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T12:08:06Z","updated_at":"2022-11-20T12:08:06Z","author_association":"MEMBER","body":"Thanks for the explanation - that's why I can't find it! 😺 ","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321115481/reactions","total_count":2,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321711418","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1321711418","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1321711418,"node_id":"IC_kwDOAHF7Ec5Ox7c6","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T08:52:18Z","updated_at":"2022-11-21T08:52:36Z","author_association":"CONTRIBUTOR","body":"Note, the tests still fail on servers unless you have some X-server libs installed, i.e. for Debian I had to install the requirements mentioned here: https://docs.cypress.io/guides/continuous-integration/introduction#Machine-requirements\r\n\r\nAssuming that not all people build Jena on a desktop machine, some pointer wherever in the documentation would be helpful when building Jena from source.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321711418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321734767","html_url":"https://github.com/apache/jena/issues/1629#issuecomment-1321734767","issue_url":"https://api.github.com/repos/apache/jena/issues/1629","id":1321734767,"node_id":"IC_kwDOAHF7Ec5OyBJv","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T09:11:51Z","updated_at":"2022-11-21T09:11:51Z","author_association":"CONTRIBUTOR","body":"Changing the PathEvaluator to Iters would be able to fix queries with one end, like `?class wdt:P279{,13} wd:Q35120` on wikidata (get all classes that have a maximum length path)","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321734767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321831601","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1321831601","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1321831601,"node_id":"IC_kwDOAHF7Ec5OyYyx","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T10:26:14Z","updated_at":"2022-11-21T10:26:14Z","author_association":"MEMBER","body":"Our github actions and Jenkins jobs work.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1321831601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1322022087","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1322022087","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1322022087,"node_id":"IC_kwDOAHF7Ec5OzHTH","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T12:51:48Z","updated_at":"2022-11-21T12:51:48Z","author_association":"MEMBER","body":"> Note, the tests still fail on servers unless you have some X-server libs installed, i.e. for Debian I had to install the requirements mentioned here: https://docs.cypress.io/guides/continuous-integration/introduction#Machine-requirements\r\n> \r\n> Assuming that not all people build Jena on a desktop machine, some pointer wherever in the documentation would be helpful when building Jena from source.\r\n\r\nAh good point. What do you suggest? A note in Jena Fuseki UI README.md, a BUILD.md file, a text somewhere in jena.apache.org?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1322022087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1322431806","html_url":"https://github.com/apache/jena/issues/1583#issuecomment-1322431806","issue_url":"https://api.github.com/repos/apache/jena/issues/1583","id":1322431806,"node_id":"IC_kwDOAHF7Ec5O0rU-","user":{"login":"AtesComp","id":23365631,"node_id":"MDQ6VXNlcjIzMzY1NjMx","avatar_url":"https://avatars.githubusercontent.com/u/23365631?v=4","gravatar_id":"","url":"https://api.github.com/users/AtesComp","html_url":"https://github.com/AtesComp","followers_url":"https://api.github.com/users/AtesComp/followers","following_url":"https://api.github.com/users/AtesComp/following{/other_user}","gists_url":"https://api.github.com/users/AtesComp/gists{/gist_id}","starred_url":"https://api.github.com/users/AtesComp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AtesComp/subscriptions","organizations_url":"https://api.github.com/users/AtesComp/orgs","repos_url":"https://api.github.com/users/AtesComp/repos","events_url":"https://api.github.com/users/AtesComp/events{/privacy}","received_events_url":"https://api.github.com/users/AtesComp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T17:44:16Z","updated_at":"2022-12-30T10:47:39Z","author_association":"CONTRIBUTOR","body":"Finally back...\r\n...and there are issues...\r\n\r\n### Initialize:\r\nI loaded the data using the `tdb2.tdbloader --tdb ...` command in the `apache-jena-4.7.0-SNAPSHOT/bin` directory. All went well.\r\n\r\nThe configuration is nearly the same as before. The only difference from the previous config is that I uncommented the `ja:namedGraph` line for the inference graph and added a new \"Tags\" graph that I separated from the main data.\r\n\r\nThen started Fuseki:\r\n```\r\nApache Jena Fuseki\r\nVersion 4.7.0-SNAPSHOT. Uptime 13m 32s\r\n```\r\nand\r\n```\r\n[2022-11-21 11:08:06.128] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - Apache Jena Fuseki 4.7.0-SNAPSHOT 2022-11-21T14:53:09Z\r\n```\r\n\r\n### First Test:\r\n1. I did a simple query on the dataset from the SPARQL Query screen. All went well.\r\n2. I then did `info -> count triples in all graphs`. All went well.\r\n3. I then went to `edit -> list current graphs` and encountered a `500 : Already in a transaction` error.\r\n\r\nAll other queries continued to work, i.e., going back to the SPARQL Query page, doing `info -> count triples in all graphs` maybe because they were cached.  Attempting to do the `edit -> list current graphs` always failed.\r\n\r\n### Second Test:\r\nI then restarted Fuseki and went directly to `edit -> list current graphs` and the query worked.  However, all other queries failed for some time after.\r\n\r\nAfter waiting a few minutes, the other queries began to work again.\r\n\r\n### Third Test:\r\nI then started to use my application on the data to test general response. The first two queries worked. Others thereafter had 500 Server Errors.\r\n\r\nI waited quite a while to see if it cleared up, but it continues to give me `500 : Already in a transaction` errors\r\n\r\n### Note:\r\nI will attempt to simplify the dataset down to one that I can share and continues to show the error. \r\n\r\nBelow, I've documented the startup sequence and the first test error.\r\n\r\n### Startup Log:\r\nThe following log is to document the Fuseki start up process.\r\n\r\n<details>\r\n <summary>Log</summary>\r\n\r\n```\r\n[2022-11-21 11:08:06.128] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - Apache Jena Fuseki 4.7.0-SNAPSHOT 2022-11-21T14:53:09Z\r\n[2022-11-21 11:08:06.499] INFO [main] [org.apache.jena.fuseki.webapp.FusekiWebapp.formatBaseArea(FusekiWebapp.java:127)] - FUSEKI_HOME=/home/...<redacted>.../MyData/fuseki/./apache-jena-fuseki-4.7.0-SNAPSHOT\r\n[2022-11-21 11:08:06.501] INFO [main] [org.apache.jena.fuseki.webapp.FusekiWebapp.formatBaseArea(FusekiWebapp.java:128)] - FUSEKI_BASE=/home/...<redacted>.../MyData/fuseki/run\r\n[2022-11-21 11:08:06.565] INFO [main] [org.apache.jena.fuseki.webapp.ShiroEnvironmentLoader.customizeEnvironment(ShiroEnvironmentLoader.java:80)] - Shiro file: file:///home/...<redacted>.../MyData/fuseki/run/shiro.ini\r\n[2022-11-21 11:08:09.199] INFO [main] [org.apache.jena.fuseki.server.FusekiCoreInfo.lambda$infoPathsOperations$1(FusekiCoreInfo.java:90)] - Path = /MyData\r\n[2022-11-21 11:08:09.204] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Operation = query   Endpoints = [ \"query\", \"sparql\" ]\r\n[2022-11-21 11:08:09.204] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Operation = update  Endpoints = [ \"update\" ]\r\n[2022-11-21 11:08:09.205] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Operation = gsp-rw  Endpoints = [ \"\", \"data\" ]\r\n[2022-11-21 11:08:09.206] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Operation = gsp-r   Endpoints = [ \"get\" ]\r\n[2022-11-21 11:08:09.206] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Operation = upload  Endpoints = [ \"upload\" ]\r\n[2022-11-21 11:08:09.208] INFO [main] [org.apache.jena.fuseki.server.PlatformInfo.logDetailsSystem(PlatformInfo.java:40)] - System\r\n[2022-11-21 11:08:09.215] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Memory: 4.0 GiB\r\n[2022-11-21 11:08:09.216] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   Java:   11.0.17\r\n[2022-11-21 11:08:09.217] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   OS:     Linux 5.15.0-53-generic amd64\r\n[2022-11-21 11:08:09.217] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   PID:    69021\r\n[2022-11-21 11:08:09.218] INFO [main] [org.apache.jena.fuseki.server.PlatformInfo.logDetailsJVM(PlatformInfo.java:65)] - Java\r\n[2022-11-21 11:08:09.218] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   java.vendor          = Ubuntu\r\n[2022-11-21 11:08:09.219] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   java.home            = /usr/lib/jvm/java-11-openjdk-amd64\r\n[2022-11-21 11:08:09.220] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   java.runtime.version = 11.0.17+8-post-Ubuntu-1ubuntu222.04\r\n[2022-11-21 11:08:09.220] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   java.runtime.name    = OpenJDK Runtime Environment\r\n[2022-11-21 11:08:09.220] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   user.language        = en\r\n[2022-11-21 11:08:09.221] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   user.timezone        = America/New_York\r\n[2022-11-21 11:08:09.221] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   user.country         = US\r\n[2022-11-21 11:08:09.221] INFO [main] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] -   user.dir             = /home/...<redacted>.../MyData/fuseki\r\n[2022-11-21 11:08:09.299] INFO [main] [org.apache.jena.fuseki.cmd.JettyFusekiWebapp.start(JettyFusekiWebapp.java:130)] - Started 2022/11/21 11:08:09 EST on port 3030\r\n[2022-11-21 11:08:50.898] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1] GET http://localhost:3030/$/server\r\n[2022-11-21 11:08:50.900] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:08:50.901] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Connection:          keep-alive\r\n[2022-11-21 11:08:50.901] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:08:50.902] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:08:50.902] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:08:50.903] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:08:50.903] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Host:                localhost:3030\r\n[2022-11-21 11:08:50.903] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:08:50.904] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:08:50.905] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:08:50.905] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:08:50.906] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:08:50.906] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:08:50.922] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   <= Content-Type:        application/json\r\n[2022-11-21 11:08:50.923] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:08:50.924] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:08:50.924] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [1] 200 OK (15 ms)\r\n[2022-11-21 11:09:05.926] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2] GET http://localhost:3030/$/server\r\n[2022-11-21 11:09:05.927] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:09:05.927] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Connection:          keep-alive\r\n[2022-11-21 11:09:05.928] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:09:05.928] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:09:05.929] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:09:05.929] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:09:05.929] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Host:                localhost:3030\r\n[2022-11-21 11:09:05.930] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:09:05.930] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:09:05.931] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:09:05.931] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:09:05.932] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:09:05.932] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:09:05.946] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   <= Content-Type:        application/json\r\n[2022-11-21 11:09:05.947] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:09:05.948] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:09:05.948] INFO [qtp1984328477-43] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [2] 200 OK (13 ms)\r\n[2022-11-21 11:09:06.401] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3] GET http://localhost:3030/$/stats/MyData\r\n[2022-11-21 11:09:06.401] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:09:06.402] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Connection:          keep-alive\r\n[2022-11-21 11:09:06.403] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:09:06.403] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:09:06.403] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:09:06.404] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:09:06.404] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Host:                localhost:3030\r\n[2022-11-21 11:09:06.405] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:09:06.405] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:09:06.406] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:09:06.406] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:09:06.407] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:09:06.407] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:09:06.407] INFO [qtp1984328477-45] [org.apache.jena.fuseki.ctl.ActionStats.execCommonItem(ActionStats.java:64)] - [3] GET stats dataset /MyData\r\n[2022-11-21 11:09:06.433] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   <= Content-Type:        application/json\r\n[2022-11-21 11:09:06.434] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   <= Content-Length:      1957\r\n[2022-11-21 11:09:06.434] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:09:06.435] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:09:06.435] INFO [qtp1984328477-45] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [3] 200 OK (25 ms)\r\n```\r\n</details>\r\n\r\n### Error Log:\r\nThe following log captures the first test from the `info -> count triples in all graphs` through the reported error.\r\n<details>\r\n<summary>[12] RC = 500 : Already in a transaction</summary>\r\n```\r\n[2022-11-21 11:11:10.656] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5] GET http://localhost:3030/$/server\r\n[2022-11-21 11:11:10.657] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:10.657] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Connection:          keep-alive\r\n[2022-11-21 11:11:10.657] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:10.658] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:10.658] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:10.659] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:10.659] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Host:                localhost:3030\r\n[2022-11-21 11:11:10.660] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:10.660] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:10.661] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:10.662] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:10.662] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:10.663] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:10.685] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   <= Content-Type:        application/json\r\n[2022-11-21 11:11:10.686] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:10.686] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:10.687] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [5] 200 OK (20 ms)\r\n[2022-11-21 11:11:10.697] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6] GET http://localhost:3030/$/stats/MyData\r\n[2022-11-21 11:11:10.698] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:10.699] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Connection:          keep-alive\r\n[2022-11-21 11:11:10.699] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:10.700] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:10.701] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:10.702] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:10.703] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Host:                localhost:3030\r\n[2022-11-21 11:11:10.704] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:10.704] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:10.705] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:10.705] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:10.706] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:10.707] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:10.707] INFO [qtp1984328477-46] [org.apache.jena.fuseki.ctl.ActionStats.execCommonItem(ActionStats.java:64)] - [6] GET stats dataset /MyData\r\n[2022-11-21 11:11:10.719] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   <= Content-Type:        application/json\r\n[2022-11-21 11:11:10.719] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   <= Content-Length:      1957\r\n[2022-11-21 11:11:10.720] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:10.720] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:10.720] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [6] 200 OK (11 ms)\r\n[2022-11-21 11:11:13.500] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7] GET http://localhost:3030/MyData/query?query=select+(count(*)+as+%3Fcount)+%7B%3Fs+%3Fp+%3Fo%7D\r\n[2022-11-21 11:11:13.500] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:13.500] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8] GET http://localhost:3030/MyData/query?query=select+%3Fg+(count(*)+as+%3Fcount)+%7Bgraph+%3Fg+%7B%3Fs+%3Fp+%3Fo%7D%7D+group+by+%3Fg\r\n[2022-11-21 11:11:13.501] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Connection:          keep-alive\r\n[2022-11-21 11:11:13.501] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:13.501] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:13.501] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Connection:          keep-alive\r\n[2022-11-21 11:11:13.501] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:13.502] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:13.502] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:13.502] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:13.502] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:13.503] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:13.503] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Host:                localhost:3030\r\n[2022-11-21 11:11:13.503] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:13.503] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:13.503] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Host:                localhost:3030\r\n[2022-11-21 11:11:13.504] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:13.504] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:13.504] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:13.504] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:13.505] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:13.505] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:13.506] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:13.506] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:13.506] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:13.506] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:13.507] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:13.507] INFO [qtp1984328477-46] [org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:245)] - [7] Query = \r\nselect (count(*) as ?count) {?s ?p ?o}\r\n[2022-11-21 11:11:13.508] INFO [qtp1984328477-44] [org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:245)] - [8] Query = \r\nselect ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g\r\n[2022-11-21 11:11:20.881] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   <= Content-Type:        application/json; charset=utf-8\r\n[2022-11-21 11:11:20.882] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:20.882] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   <= Cache-Control:       must-revalidate,no-cache,no-store\r\n[2022-11-21 11:11:20.882] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:20.883] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7]   <= Pragma:              no-cache\r\n[2022-11-21 11:11:20.883] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [7] 200 OK (7.374 s)\r\n[2022-11-21 11:11:20.946] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   <= Content-Type:        application/json; charset=utf-8\r\n[2022-11-21 11:11:20.947] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:20.947] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   <= Cache-Control:       must-revalidate,no-cache,no-store\r\n[2022-11-21 11:11:20.948] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:20.948] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8]   <= Pragma:              no-cache\r\n[2022-11-21 11:11:20.949] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [8] 200 OK (7.438 s)\r\n[2022-11-21 11:11:20.960] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9] GET http://localhost:3030/$/stats/MyData\r\n[2022-11-21 11:11:20.961] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:20.961] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Connection:          keep-alive\r\n[2022-11-21 11:11:20.962] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:20.962] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:20.962] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:20.963] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:20.963] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Host:                localhost:3030\r\n[2022-11-21 11:11:20.964] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:20.964] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:20.965] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:20.965] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:20.965] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:20.966] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:20.966] INFO [qtp1984328477-24] [org.apache.jena.fuseki.ctl.ActionStats.execCommonItem(ActionStats.java:64)] - [9] GET stats dataset /MyData\r\n[2022-11-21 11:11:20.973] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   <= Content-Type:        application/json\r\n[2022-11-21 11:11:20.973] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   <= Content-Length:      1957\r\n[2022-11-21 11:11:20.974] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:20.974] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:20.975] INFO [qtp1984328477-24] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [9] 200 OK (6 ms)\r\n[2022-11-21 11:11:33.620] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10] GET http://localhost:3030/$/server\r\n[2022-11-21 11:11:33.621] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:33.621] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Connection:          keep-alive\r\n[2022-11-21 11:11:33.621] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:33.622] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:33.622] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:33.622] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:33.622] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Host:                localhost:3030\r\n[2022-11-21 11:11:33.623] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:33.623] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:33.623] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:33.624] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:33.624] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:33.624] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:33.639] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   <= Content-Type:        application/json\r\n[2022-11-21 11:11:33.640] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:33.640] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:33.640] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [10] 200 OK (14 ms)\r\n[2022-11-21 11:11:33.649] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11] GET http://localhost:3030/$/stats/MyData\r\n[2022-11-21 11:11:33.650] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:33.650] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Connection:          keep-alive\r\n[2022-11-21 11:11:33.651] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:33.651] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:33.652] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:33.652] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:33.652] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Host:                localhost:3030\r\n[2022-11-21 11:11:33.653] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:33.653] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:33.654] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:33.654] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:33.655] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:33.655] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:33.655] INFO [qtp1984328477-41] [org.apache.jena.fuseki.ctl.ActionStats.execCommonItem(ActionStats.java:64)] - [11] GET stats dataset /MyData\r\n[2022-11-21 11:11:33.664] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   <= Content-Type:        application/json\r\n[2022-11-21 11:11:33.665] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   <= Content-Length:      1957\r\n[2022-11-21 11:11:33.665] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:33.666] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:33.666] INFO [qtp1984328477-41] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [11] 200 OK (8 ms)\r\n[2022-11-21 11:11:34.887] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12] GET http://localhost:3030/MyData/query?query=select+(count(*)+as+%3Fcount)+%7B%3Fs+%3Fp+%3Fo%7D\r\n[2022-11-21 11:11:34.887] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13] GET http://localhost:3030/MyData/query?query=select+%3Fg+(count(*)+as+%3Fcount)+%7Bgraph+%3Fg+%7B%3Fs+%3Fp+%3Fo%7D%7D+group+by+%3Fg\r\n[2022-11-21 11:11:34.887] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:34.888] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Accept:              application/json, text/plain, */*\r\n[2022-11-21 11:11:34.888] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Connection:          keep-alive\r\n[2022-11-21 11:11:34.888] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Connection:          keep-alive\r\n[2022-11-21 11:11:34.888] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:34.889] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => User-Agent:          Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36\r\n[2022-11-21 11:11:34.889] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:34.889] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Referer:             http://localhost:3030/?\r\n[2022-11-21 11:11:34.889] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:34.890] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Sec-Fetch-Site:      same-origin\r\n[2022-11-21 11:11:34.890] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:34.890] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Sec-Fetch-Dest:      empty\r\n[2022-11-21 11:11:34.890] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Host:                localhost:3030\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Host:                localhost:3030\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Accept-Encoding:     gzip, deflate, br\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Sec-Fetch-Mode:      cors\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:34.892] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => sec-ch-ua:           \"Google Chrome\";v=\"107\", \"Chromium\";v=\"107\", \"Not=A?Brand\";v=\"24\"\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => sec-ch-ua-mobile:    ?0\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => sec-ch-ua-platform:  \"Linux\"\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   => Accept-Language:     en-US,en;q=0.9,ja;q=0.8\r\n[2022-11-21 11:11:34.893] INFO [qtp1984328477-46] [org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:245)] - [12] Query = \r\nselect (count(*) as ?count) {?s ?p ?o}\r\n[2022-11-21 11:11:34.894] INFO [qtp1984328477-44] [org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:245)] - [13] Query = \r\nselect ?g (count(*) as ?count) {graph ?g {?s ?p ?o}} group by ?g\r\n[2022-11-21 11:11:34.895] WARN [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.warn(FmtLog.java:113)] - [13] RC = 500 : Already in a transaction\r\norg.apache.jena.sparql.JenaTransactionException: Already in a transaction\r\n        at org.apache.jena.sparql.core.TransactionalLock.error(TransactionalLock.java:175) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.TransactionalLock.begin(TransactionalLock.java:104) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.TxnDataset2Graph.begin(TxnDataset2Graph.java:190) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.DatasetGraphMapLink.begin(DatasetGraphMapLink.java:112) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.HttpAction.begin(HttpAction.java:277) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.HttpAction.beginRead(HttpAction.java:292) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:271) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.executeWithParameter(SPARQLQueryProcessor.java:224) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:199) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionService.executeLifecycle(ActionService.java:58) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execGet(SPARQLQueryProcessor.java:80) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionProcessor.process(ActionProcessor.java:33) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionBase.process(ActionBase.java:54) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionExecLib.execActionSub(ActionExecLib.java:124) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionExecLib.execAction(ActionExecLib.java:98) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.dispatchAction(Dispatcher.java:164) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.process(Dispatcher.java:156) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.dispatch(Dispatcher.java:83) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.FusekiFilter.doFilter(FusekiFilter.java:48) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:458) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:373) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:370) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:344) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:298) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:210) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:527) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:578) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1571) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1383) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1544) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1305) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:822) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.Server.handle(Server.java:563) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.lambda$handle$0(HttpChannel.java:505) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:762) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:497) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:282) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask(AdaptiveExecutionStrategy.java:421) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask(AdaptiveExecutionStrategy.java:390) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce(AdaptiveExecutionStrategy.java:277) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.lambda$new$0(AdaptiveExecutionStrategy.java:139) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:411) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:933) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1077) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n[2022-11-21 11:11:34.895] WARN [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.warn(FmtLog.java:113)] - [12] RC = 500 : Already in a transaction\r\norg.apache.jena.sparql.JenaTransactionException: Already in a transaction\r\n        at org.apache.jena.sparql.core.TransactionalLock.error(TransactionalLock.java:175) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.TransactionalLock.begin(TransactionalLock.java:104) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.TxnDataset2Graph.begin(TxnDataset2Graph.java:190) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.sparql.core.DatasetGraphMapLink.begin(DatasetGraphMapLink.java:112) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.HttpAction.begin(HttpAction.java:277) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.HttpAction.beginRead(HttpAction.java:292) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:271) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.executeWithParameter(SPARQLQueryProcessor.java:224) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execute(SPARQLQueryProcessor.java:199) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionService.executeLifecycle(ActionService.java:58) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.SPARQLQueryProcessor.execGet(SPARQLQueryProcessor.java:80) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionProcessor.process(ActionProcessor.java:33) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionBase.process(ActionBase.java:54) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionExecLib.execActionSub(ActionExecLib.java:124) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.ActionExecLib.execAction(ActionExecLib.java:98) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.dispatchAction(Dispatcher.java:164) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.process(Dispatcher.java:156) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.server.Dispatcher.dispatch(Dispatcher.java:83) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.FusekiFilter.doFilter(FusekiFilter.java:48) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:61) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:108) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:137) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.ProxiedFilterChain.doFilter(ProxiedFilterChain.java:66) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.executeChain(AbstractShiroFilter.java:458) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter$1.call(AbstractShiroFilter.java:373) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.SubjectCallable.doCall(SubjectCallable.java:90) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.SubjectCallable.call(SubjectCallable.java:83) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.subject.support.DelegatingSubject.execute(DelegatingSubject.java:387) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.AbstractShiroFilter.doFilterInternal(AbstractShiroFilter.java:370) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.shiro.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:154) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:202) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.CrossOriginFilter.handle(CrossOriginFilter.java:344) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.apache.jena.fuseki.servlets.CrossOriginFilter.doFilter(CrossOriginFilter.java:298) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.FilterHolder.doFilter(FilterHolder.java:210) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler$Chain.doFilter(ServletHandler.java:1635) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:527) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:578) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1571) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1383) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1544) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1305) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.gzip.GzipHandler.handle(GzipHandler.java:822) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.Server.handle(Server.java:563) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.lambda$handle$0(HttpChannel.java:505) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:762) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:497) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:282) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask(AdaptiveExecutionStrategy.java:421) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask(AdaptiveExecutionStrategy.java:390) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce(AdaptiveExecutionStrategy.java:277) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.lambda$new$0(AdaptiveExecutionStrategy.java:139) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:411) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:933) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1077) ~[fuseki-server.jar:4.7.0-SNAPSHOT]\r\n        at java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n[2022-11-21 11:11:34.907] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Content-Type:        text/plain\r\n[2022-11-21 11:11:34.921] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Content-Length:      25\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Content-Type:        text/plain\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Content-Length:      25\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Cache-Control:       must-revalidate,no-cache,no-store\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Server:              Apache Jena Fuseki (4.7.0-SNAPSHOT)\r\n[2022-11-21 11:11:34.922] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Cache-Control:       must-revalidate,no-cache,no-store\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13]   <= Pragma:              no-cache\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Vary:                Accept,Accept-Encoding,Accept-Charset,Origin,Access-Control-Request-Method,Access-Control-Request-Headers\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12]   <= Pragma:              no-cache\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-44] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [13] 500 Server Error (13 ms)\r\n[2022-11-21 11:11:34.923] INFO [qtp1984328477-46] [org.apache.jena.atlas.logging.FmtLog.info(FmtLog.java:85)] - [12] 500 Server Error (28 ms)\r\n```\r\n</details>\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1322431806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1323343724","html_url":"https://github.com/apache/jena/pull/1631#issuecomment-1323343724","issue_url":"https://api.github.com/repos/apache/jena/issues/1631","id":1323343724,"node_id":"IC_kwDOAHF7Ec5O4J9s","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T09:15:04Z","updated_at":"2022-11-22T09:15:04Z","author_association":"MEMBER","body":"Rebased to current main branch.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1323343724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326251895","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1326251895","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1326251895,"node_id":"IC_kwDOAHF7Ec5PDP93","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T10:25:44Z","updated_at":"2022-11-24T10:26:25Z","author_association":"MEMBER","body":"So having done this for a previous employers CLI tools for their Graph Database that used Jena for the user facing pieces I can say that this is non-trivial to achieve.\r\n\r\nThat's not to say that is isn't possible merely to highlight that there are a few things to be aware of if someone wanted to attempt this:\r\n\r\n1. You likely want to make this an opt-in behaviour **NOT** change the existing default behaviour\r\n    - A streaming construct won't suppress duplicate triples so you could get much larger output than expected\r\n    - If the consumer of the output doesn't cope with duplicate triples properly this can break larger data pipelines\r\n2. If a user opts into this behaviour you need to validate that their selected output format is compatible with streaming.  \r\n    - Jena has streaming writers for some languages but not all languages (and this includes some that in theory could have a streaming writer but it would be horrendously verbose e.g. RDF/XML)\r\n        - See `WriterStreamRDFPlain` (for NTriples), `WriterStreamRDFBlocks` (for Turtle with limited syntactic sugar), `StreamRDF2Thrift` and `StreamRDF2Protobuf`\r\n    - Also worth noting that streaming writers will inherently produce less compressed output, i.e. they can't use all the syntactic sugar of their languages e.g. Turtle predicate object lists, collection shorthands etc, because those require multiple passes over the full data to compute whether those are usable\r\n    - I don't remember if there is a registry for streaming writers (I remember having to hardcode an `if` structure for this at the time but that was ~8 years ago now), there might be one now (@afs does that exist now?) or it may need introducing\r\n    - You'll need to propagate the query namespace prefixes to the streaming writer somehow since you'll be operating with an `Iterator<Triple>` that won't have any prefixes available unlike the `Model` you get from a normal construct evaluation\r\n3. Then depending on whether you can use a streaming writer or not invoke the relevant `execConstruct()` vs `execConstructTriples()` methods and handle the result accordingly","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326251895/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326261019","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326261019","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326261019,"node_id":"IC_kwDOAHF7Ec5PDSMb","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T10:33:55Z","updated_at":"2022-11-24T10:58:19Z","author_association":"MEMBER","body":"Could you please turn this into a standalone test case with just enough data to reproduce the situation?\r\n\r\nThe code is in `BindingComparator`.\r\n\r\nAnd careful what you wish for. If the fix is to force ordering to purely by lexical form, then numbers will be counter-intuitive.\r\n\r\nA solution is to divide the input into known and unknown datatypes but that will cost - memory or complexity for sorts that spill.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326261019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326277317","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1326277317","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1326277317,"node_id":"IC_kwDOAHF7Ec5PDWLF","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T10:48:54Z","updated_at":"2022-11-25T22:14:12Z","author_association":"MEMBER","body":"> I don't remember if there is a registry for streaming writers\r\n\r\nThere is. `StreamRDFWriter`.\r\n\r\n_opt-in behaviour_\r\n\r\nYes.\r\n\r\nIt could be a new (custom) service delivered as a Fuseki module. Simplest case - a server that calls `constructTriples` and streams back N-triples or one of the Turtle formats that is streaming.\r\n\r\nThis can be done as a split between a SELECT query stream returning the WHERE clause and a client side processing to apply the template. \r\n\r\nThat gives the caller a way to control the potentially very large stream that \"disappears\" in the set semantics of CONSTRUCT.\r\n\r\nIf they don't care about everything, just the streaming, `SELECT REDUCED` (or with LATERAL, limited per results). There are options here so pushing all work to fixed algorithm in Fuseki may not that helpful.\r\n\r\nThe stream could be chunks - or return results to the application in certain orders like same subject - via a combination of SELECT query and chunking results in the client side processing.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326277317/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326316165","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326316165","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326316165,"node_id":"IC_kwDOAHF7Ec5PDfqF","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T11:23:08Z","updated_at":"2022-11-24T11:23:08Z","author_association":"MEMBER","body":"Context;\r\n\r\n* [JENA-2333](https://issues.apache.org/jira/browse/JENA-2333)\r\n* #1406\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326316165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326327725","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326327725","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326327725,"node_id":"IC_kwDOAHF7Ec5PDiet","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T11:34:09Z","updated_at":"2022-11-24T11:38:28Z","author_association":"CONTRIBUTOR","body":"I attached a \"minimal\" Turtle file as well as the query file to reproduce the exception to the start post. Can you reproduce it when doing\r\n\r\n```bash\r\ntdb2.tdbloader --loc /tmp/issue_1634 issue_1634.ttl\r\ntdb2.tdbquery --loc /tmp/issue_1634 --query issue_1634.rq\r\n```\r\n\r\nAlso, I'm mostly reporting this because it's probably an exception message something users can't understand when using Fuseki. I'd also fine if we just give a hint to check of filter the datatypes in their query like I'd suggest for people using DBpedia, \"hey please only sort on int and double values, omit the rest\".\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326327725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326351523","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326351523","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326351523,"node_id":"IC_kwDOAHF7Ec5PDoSj","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T11:58:01Z","updated_at":"2022-11-24T11:58:01Z","author_association":"MEMBER","body":"It's not minimal.\r\n\r\nIt won't depend on TDB. \r\n\r\nIt will happen with \"sparql --data --query\" which is somewhat easier to work with. No Fuseki, no DB.\r\n\r\n(I'm using OpenJDK17 but from JENA-2333 the Timsort code is the same from 11 onwards.)\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326351523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326367333","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326367333","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326367333,"node_id":"IC_kwDOAHF7Ec5PDsJl","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T12:12:11Z","updated_at":"2022-11-24T12:12:11Z","author_association":"CONTRIBUTOR","body":"Regarding the steps, fair enough - I adapted the instruction in the initial post. Regarding size of data, I tried with a lower number of `xsd:double` literals < 1000, in that case it did not fail nor did it fail when reducing the number of custom datatype literals to 10 - so, currently a failing distribution is \r\n* ~1000 `xsd:double` literals\r\n* ~100 literals with a custom datatype","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326367333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326373425","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326373425","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326373425,"node_id":"IC_kwDOAHF7Ec5PDtox","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T12:17:57Z","updated_at":"2022-11-24T12:17:57Z","author_association":"CONTRIBUTOR","body":"By the way, what's the difference in sorting with and without projecting the sorted variable? With selection of `?l` it doesn't fail","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326373425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326480335","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1326480335","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1326480335,"node_id":"IC_kwDOAHF7Ec5PEHvP","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T13:50:01Z","updated_at":"2022-11-24T13:56:41Z","author_association":"MEMBER","body":"@SimonBin - do you have time to return this PR into step 1 of #1629? (that is, remove the `TransformPathFlattern`, squash to one commit). Then step 2 can be based on code after the step 1 change.\r\n\r\nIf you don't have time, say so and I'll put in a new PR starting from the diff of this one but that looses your name.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326480335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326519765","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326519765","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326519765,"node_id":"IC_kwDOAHF7Ec5PERXV","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T14:23:20Z","updated_at":"2022-11-24T14:27:42Z","author_association":"MEMBER","body":"> By the way, what's the difference in sorting with and without projecting the sorted variable? With selection of `?l` it doesn't fail\r\n\r\nSo the SPARQL specification [section 18.2.5](https://www.w3.org/TR/sparql11-query/#convertSolMod) says that `ORDER BY` is applied prior to `DISTINCT`\r\n\r\n**BUT** ARQ includes an optimiser that swaps the ordering i.e. applies `DISTINCT` first in cases where all the variables in the `ORDER BY` are also projected.  This is semantically equivalent and is shown to substantially increase performance because you throw out all the non-distinct solutions prior to ordering.  So in that case every row is guaranteed to be unique and you can't ever get any unstable sorting results as every row is different (at least for your dataset) i.e. every row will compare differently to every other row even if individual ordering expressions might produce equal values.\r\n\r\nIf you want to confirm that this is indeed the case you can disable that optimisation via the `--set arq:optOrderByDistinctApplication=false` option\r\n\r\nI suspect what happens in the failing case is that you have two solutions with the custom datatype literals present and we aren't guaranteeing to provide a stable sort (see PR #1406 that Andy referenced) over those.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326519765/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326566293","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326566293","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326566293,"node_id":"IC_kwDOAHF7Ec5PEcuV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T15:03:54Z","updated_at":"2022-11-24T15:03:54Z","author_association":"MEMBER","body":"The bug is probably where there are three values get compared during the sort: \"A<B\" and \"B<C\" but \"A>C\".\r\n\r\nThis needs confirming (is it one double and 2 unknowns or 2 doubles and one unknown - really hope it isn't 3 the same beause that would be completely different and unknown) - and it depends on the lexical forms where for xsd:double lexical form order is not value order.\r\n\r\n> Regarding size of data, I tried with a lower number\r\n\r\nIt's not just \"make smaller\". It is find some specific reduced set in a particular order. But for a triggering case with \"sparql --data --query\" it should happen each time (no bnodes to cause different orders per run.)\r\n\r\nFrom JENA-2333, the order that nodes hit the Timsort matters - the sort can be silently wrong as well.\r\n\r\nThere will be an example with no DISTINCT, no OFFSET/LIMIT, and rdf:type. These change the order arriving at the sort, including different data sizes having different orders for the same query, making finding/confirming the root case harder.\r\n\r\nThe `sparql` command uses TIM which does not hash tables, chopping up data at least gets indexed in the same order. GraphMem would be hit by hash table expansion reordering input.\r\n\r\n```\r\nSELECT (count(*) AS ?C) WHERE {\r\n  ?uri <http://dbpedia.org/ontology/length> ?l .\r\n}\r\nORDER BY DESC(?l)\r\n```\r\n\r\nUnless it's a completely different issue, a fix is doable but the code is not set up for it at the moment. There needs to be a significant refactoring/rewrite and it'll apply to all ORDER BY. That's not something to do in the 4.7.0 timeframe fix.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326566293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326620487","html_url":"https://github.com/apache/jena/issues/1634#issuecomment-1326620487","issue_url":"https://api.github.com/repos/apache/jena/issues/1634","id":1326620487,"node_id":"IC_kwDOAHF7Ec5PEp9H","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T15:53:51Z","updated_at":"2022-11-24T15:53:51Z","author_association":"MEMBER","body":"This case fails:\r\n\r\n```\r\n# Compare (n1, n2) (n2, n3) (n1, n3)\r\n> > <=:  1  1 -1 ::  206000.0e0   98800.0e0   \"49.2\"^^<http://dbpedia.org/datatype/kilometre>\r\n```\r\n\r\nFortunately it turns up quickly by doing a N^3 expansion and testing 3 elements (there are over a billion cases to try - it is taking a while.)\r\n\r\nThere are lots of failures. A rate of 3%-4% so far.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1326620487/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327237937","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1327237937","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1327237937,"node_id":"IC_kwDOAHF7Ec5PHAsx","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T09:48:46Z","updated_at":"2022-11-25T09:48:46Z","author_association":"CONTRIBUTOR","body":"I removed the Transformer. Note, step 1  of  #1629 would mean to change PathEval to iters (see my comment there, starting point would be PathEval.eval$), that is not implemented in this PR","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327237937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327296388","html_url":"https://github.com/apache/jena/issues/1628#issuecomment-1327296388","issue_url":"https://api.github.com/repos/apache/jena/issues/1628","id":1327296388,"node_id":"IC_kwDOAHF7Ec5PHO-E","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T10:25:20Z","updated_at":"2022-11-25T10:25:20Z","author_association":"MEMBER","body":"OpDisjunction: 58d4815\r\nOpConditional: b7616fe\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327296388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327302357","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1327302357","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1327302357,"node_id":"IC_kwDOAHF7Ec5PHQbV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T10:30:35Z","updated_at":"2022-11-25T11:38:48Z","author_association":"MEMBER","body":"I'll pull this in via a development branch and tidy it up. \r\nWe don't allow forced pushes to main.\r\nI don't want my initials in the commit log.\r\n\r\nRe: PathEval \r\nUnlikely for the 4.7.0. Fortunately, that's a separable piece of work.\r\n\r\nI have some code for step 2 covering better starting sets of all the path operators I can see how to do.\r\nI believe optimizing these is more important.\r\n\r\nIt will however require testing on larger data. I hope you group can do that for the cases you(plural) have raised.\r\n\r\nThe objective is \"better\" not \"perfect\".\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327302357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327322821","html_url":"https://github.com/apache/jena/pull/1591#issuecomment-1327322821","issue_url":"https://api.github.com/repos/apache/jena/issues/1591","id":1327322821,"node_id":"IC_kwDOAHF7Ec5PHVbF","user":{"login":"ericprud","id":573478,"node_id":"MDQ6VXNlcjU3MzQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/573478?v=4","gravatar_id":"","url":"https://api.github.com/users/ericprud","html_url":"https://github.com/ericprud","followers_url":"https://api.github.com/users/ericprud/followers","following_url":"https://api.github.com/users/ericprud/following{/other_user}","gists_url":"https://api.github.com/users/ericprud/gists{/gist_id}","starred_url":"https://api.github.com/users/ericprud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericprud/subscriptions","organizations_url":"https://api.github.com/users/ericprud/orgs","repos_url":"https://api.github.com/users/ericprud/repos","events_url":"https://api.github.com/users/ericprud/events{/privacy}","received_events_url":"https://api.github.com/users/ericprud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T10:53:48Z","updated_at":"2022-11-25T10:53:48Z","author_association":"CONTRIBUTOR","body":"obviated by #1637","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327322821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327342045","html_url":"https://github.com/apache/jena/pull/1637#issuecomment-1327342045","issue_url":"https://api.github.com/repos/apache/jena/issues/1637","id":1327342045,"node_id":"IC_kwDOAHF7Ec5PHaHd","user":{"login":"ericprud","id":573478,"node_id":"MDQ6VXNlcjU3MzQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/573478?v=4","gravatar_id":"","url":"https://api.github.com/users/ericprud","html_url":"https://github.com/ericprud","followers_url":"https://api.github.com/users/ericprud/followers","following_url":"https://api.github.com/users/ericprud/following{/other_user}","gists_url":"https://api.github.com/users/ericprud/gists{/gist_id}","starred_url":"https://api.github.com/users/ericprud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericprud/subscriptions","organizations_url":"https://api.github.com/users/ericprud/orgs","repos_url":"https://api.github.com/users/ericprud/repos","events_url":"https://api.github.com/users/ericprud/events{/privacy}","received_events_url":"https://api.github.com/users/ericprud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T11:10:40Z","updated_at":"2022-11-25T11:10:40Z","author_association":"CONTRIBUTOR","body":"@rvesse , Tx for detailed review! I'm going to cook up more SemAct use cases for ShEx to test whitespace variants. ETA 2hrs on specific responses and fixes.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327342045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327353297","html_url":"https://github.com/apache/jena/pull/1637#issuecomment-1327353297","issue_url":"https://api.github.com/repos/apache/jena/issues/1637","id":1327353297,"node_id":"IC_kwDOAHF7Ec5PHc3R","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T11:19:21Z","updated_at":"2022-11-25T11:19:21Z","author_association":"MEMBER","body":"@ericprud -- this needs to ready in days, rather than hours.\r\n\r\nExperience shows, big changes benefit from a period of stability before release (even better - wider testing).\r\n\r\nThere are changes elsewhere which impact many users.\r\n\r\nStatus:\r\nhttps://lists.apache.org/thread/29fbynbom80jtyf7nl2lchh0lj93cwq9\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327353297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327378287","html_url":"https://github.com/apache/jena/pull/1616#issuecomment-1327378287","issue_url":"https://api.github.com/repos/apache/jena/issues/1616","id":1327378287,"node_id":"IC_kwDOAHF7Ec5PHi9v","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T11:47:12Z","updated_at":"2022-11-25T11:47:12Z","author_association":"MEMBER","body":"@simonbin - Thanks!\r\n\r\nI'll do a PR for better ungrounded starting based on this PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327378287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327383351","html_url":"https://github.com/apache/jena/issues/1614#issuecomment-1327383351","issue_url":"https://api.github.com/repos/apache/jena/issues/1614","id":1327383351,"node_id":"IC_kwDOAHF7Ec5PHkM3","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T11:53:25Z","updated_at":"2022-11-25T11:53:25Z","author_association":"MEMBER","body":"Continued on GH-1629.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327383351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327402150","html_url":"https://github.com/apache/jena/pull/1637#issuecomment-1327402150","issue_url":"https://api.github.com/repos/apache/jena/issues/1637","id":1327402150,"node_id":"IC_kwDOAHF7Ec5PHoym","user":{"login":"ericprud","id":573478,"node_id":"MDQ6VXNlcjU3MzQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/573478?v=4","gravatar_id":"","url":"https://api.github.com/users/ericprud","html_url":"https://github.com/ericprud","followers_url":"https://api.github.com/users/ericprud/followers","following_url":"https://api.github.com/users/ericprud/following{/other_user}","gists_url":"https://api.github.com/users/ericprud/gists{/gist_id}","starred_url":"https://api.github.com/users/ericprud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericprud/subscriptions","organizations_url":"https://api.github.com/users/ericprud/orgs","repos_url":"https://api.github.com/users/ericprud/repos","events_url":"https://api.github.com/users/ericprud/events{/privacy}","received_events_url":"https://api.github.com/users/ericprud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T12:14:31Z","updated_at":"2022-11-25T12:14:31Z","author_association":"CONTRIBUTOR","body":"@afs, since you dev on linux, did you download a non-deb version of javacc? I only have\r\n```\r\njavacc/jammy,jammy,now 5.0-8.1 all\r\n```","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327402150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327406097","html_url":"https://github.com/apache/jena/pull/1637#issuecomment-1327406097","issue_url":"https://api.github.com/repos/apache/jena/issues/1637","id":1327406097,"node_id":"IC_kwDOAHF7Ec5PHpwR","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T12:19:12Z","updated_at":"2022-11-25T12:21:07Z","author_association":"MEMBER","body":"Ubuntu (kinetic/22.10) : `javacc/kinetic,kinetic 7.0.11-1 all`\r\n\r\n`apt info javacc` ::\r\n```\r\nPackage: javacc\r\nVersion: 7.0.11-1\r\nPriority: optional\r\nSection: universe/devel\r\nOrigin: Ubuntu\r\nMaintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>\r\nOriginal-Maintainer: Debian Java Maintainers <pkg-java-maintainers@lists.alioth.debian.org>\r\nBugs: https://bugs.launchpad.net/ubuntu/+filebug\r\nInstalled-Size: 681 kB\r\nDepends: default-jre-headless (>= 2:1.5) | java5-runtime-headless, junit\r\nSuggests: javacc-doc\r\nHomepage: https://javacc.org\r\nDownload-Size: 616 kB\r\nAPT-Sources: http://gb.archive.ubuntu.com/ubuntu kinetic/universe amd64 Packages\r\nDescription: Parser generator for use with Java\r\n Java Compiler-Compiler (JavaCC) is (according to sun) \"the most popular\r\n parser generator\" for use with Java [tm] applications.\r\n .\r\n A parser generator is a tool that reads a grammar specification and\r\n converts it to a Java program that can recognize matches to the grammar.\r\n In addition to the parser generator itself, JavaCC provides other standard\r\n capabilities related to parser generation such as tree building (via a\r\n tool called JJTree included with JavaCC), actions, debugging, etc.\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327406097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327484806","html_url":"https://github.com/apache/jena/pull/1637#issuecomment-1327484806","issue_url":"https://api.github.com/repos/apache/jena/issues/1637","id":1327484806,"node_id":"IC_kwDOAHF7Ec5PH8-G","user":{"login":"ericprud","id":573478,"node_id":"MDQ6VXNlcjU3MzQ3OA==","avatar_url":"https://avatars.githubusercontent.com/u/573478?v=4","gravatar_id":"","url":"https://api.github.com/users/ericprud","html_url":"https://github.com/ericprud","followers_url":"https://api.github.com/users/ericprud/followers","following_url":"https://api.github.com/users/ericprud/following{/other_user}","gists_url":"https://api.github.com/users/ericprud/gists{/gist_id}","starred_url":"https://api.github.com/users/ericprud/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ericprud/subscriptions","organizations_url":"https://api.github.com/users/ericprud/orgs","repos_url":"https://api.github.com/users/ericprud/repos","events_url":"https://api.github.com/users/ericprud/events{/privacy}","received_events_url":"https://api.github.com/users/ericprud/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T13:33:24Z","updated_at":"2022-11-25T13:33:24Z","author_association":"CONTRIBUTOR","body":"> Ubuntu (kinetic/22.10) : `javacc/kinetic,kinetic 7.0.11-1 all`\r\n\r\nTx. I'd downloaded a javacc tarball which brought be back to a paleolithic 4.1. I grabbed 7.0.11 from [ubuntu](https://packages.ubuntu.com/kinetic/all/javacc/download) and see \"7.0\" in (some of) the generated files.\r\n\r\nI've pushed the generated parser files without a rebase to make comments easier to track. Next up, whitespace-y tests to demonstrate that [`crackSemanticAction`](https://github.com/apache/jena/pull/1637/files#diff-a7ad2334b126ad2223fdabe8a053448b814ff5fbe2a77fc29e0eb754140ff942R644) gracefully handles everything the parser accepts.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327484806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327912851","html_url":"https://github.com/apache/jena/pull/1638#issuecomment-1327912851","issue_url":"https://api.github.com/repos/apache/jena/issues/1638","id":1327912851,"node_id":"IC_kwDOAHF7Ec5PJleT","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T22:17:34Z","updated_at":"2022-11-25T23:10:43Z","author_association":"MEMBER","body":"@SimonBin @LorenzBuehmann \r\n\r\nThis is item 2 in #1629 - better starting for P_Alt (and others).\r\n\r\nI would be grateful if you'd test this out with your use cases and data.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1327912851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328056557","html_url":"https://github.com/apache/jena/issues/1583#issuecomment-1328056557","issue_url":"https://api.github.com/repos/apache/jena/issues/1583","id":1328056557,"node_id":"IC_kwDOAHF7Ec5PKIjt","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-26T14:30:43Z","updated_at":"2022-11-26T14:30:43Z","author_association":"MEMBER","body":"> The configuration is nearly the same as before.\r\n\r\nPlease could you attach the data and the config file to the issue so we are looking at exactly the same setup?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328056557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328060912","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1328060912","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1328060912,"node_id":"IC_kwDOAHF7Ec5PKJnw","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-26T14:59:36Z","updated_at":"2022-11-26T14:59:36Z","author_association":"MEMBER","body":"Shall I merge this?\r\n\r\nThe discussion on necessary requisites is orthogonal.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328060912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328065233","html_url":"https://github.com/apache/jena/pull/1630#issuecomment-1328065233","issue_url":"https://api.github.com/repos/apache/jena/issues/1630","id":1328065233,"node_id":"IC_kwDOAHF7Ec5PKKrR","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-26T15:23:20Z","updated_at":"2022-11-26T15:23:20Z","author_association":"MEMBER","body":"Had forgotten about this PR. Thought I had merged it, sorry. Merging now 🎉","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328065233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328697603","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1328697603","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1328697603,"node_id":"IC_kwDOAHF7Ec5PMlED","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T08:16:03Z","updated_at":"2022-11-28T08:17:47Z","author_association":"CONTRIBUTOR","body":"Thanks @rvesse and @afs for advice. We stumbled upon this need when trying to export a larger subset of loaded data.\r\nSome facts:\r\n\r\nDataset: `257 288 501` triples loaded into TDB2 consuming 52GB disk space\r\nSize of subset: `196 423 885` triples resulting in 26GB N-Triples files\r\nUsing `tdb2.tdbquery`\r\n\r\nwith 32GB we got an OOM after 22min\r\n```\r\nJVM_ARGS=\"-Xmx32G\" tdb2.tdbquery --loc tdb2/siren --query subset.rq --results=N-Triples > subset.nt\r\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\r\n        at org.apache.jena.mem.HashedBunchMap.newKeyArray(HashedBunchMap.java:39)\r\n        at org.apache.jena.mem.HashedBunchMap.grow(HashedBunchMap.java:99)\r\n        at org.apache.jena.mem.HashedBunchMap.put$(HashedBunchMap.java:90)\r\n        at org.apache.jena.mem.HashedBunchMap.put(HashedBunchMap.java:70)\r\n        at org.apache.jena.mem.NodeToTriplesMapMem.add(NodeToTriplesMapMem.java:51)\r\n        at org.apache.jena.mem.GraphTripleStoreBase.add(GraphTripleStoreBase.java:60)\r\n        at org.apache.jena.mem.GraphMem.performAdd(GraphMem.java:42)\r\n        at org.apache.jena.graph.impl.GraphBase.add(GraphBase.java:169)\r\n        at org.apache.jena.sparql.graph.GraphOps.addAll(GraphOps.java:75)\r\n        at org.apache.jena.sparql.exec.QueryExecDataset.construct(QueryExecDataset.java:187)\r\n        at org.apache.jena.sparql.exec.QueryExec.construct(QueryExec.java:111)\r\n        at org.apache.jena.sparql.exec.QueryExecutionAdapter.execConstruct(QueryExecutionAdapter.java:122)\r\n        at org.apache.jena.sparql.exec.QueryExecutionCompat.execConstruct(QueryExecutionCompat.java:105)\r\n        at org.apache.jena.sparql.util.QueryExecUtils.doConstructQuery(QueryExecUtils.java:197)\r\n        at org.apache.jena.sparql.util.QueryExecUtils.executeQuery(QueryExecUtils.java:113)\r\n        at arq.query.lambda$queryExec$0(query.java:237)\r\n        at arq.query$$Lambda$188/0x00007fb183cfd168.run(Unknown Source)\r\n        at org.apache.jena.system.Txn.exec(Txn.java:77)\r\n        at org.apache.jena.system.Txn.executeRead(Txn.java:115)\r\n        at arq.query.queryExec(query.java:234)\r\n        at arq.query.exec(query.java:157)\r\n        at org.apache.jena.cmd.CmdMain.mainMethod(CmdMain.java:87)\r\n        at org.apache.jena.cmd.CmdMain.mainRun(CmdMain.java:56)\r\n        at org.apache.jena.cmd.CmdMain.mainRun(CmdMain.java:43)\r\n        at tdb2.tdbquery.main(tdbquery.java:30)\r\n```\r\nwith 64GB assigned it worked in 26min.\r\n\r\nTaking the advice from Andy into account, I combined `SELECT REDUCED` with TARQL:\r\n```\r\ntdb2.tdbquery --loc tdb2/siren --query subset_select.rq --results=CSV | ../ukch/tarql-1.2/bin/tarql --ntriples --stdin subset_template.tarql subset.csv > tarql_dump.nt\r\n```\r\nthat works without increasing the memory and produces a 31GB N-Triples file containing `235 632 534` triples with a runtime of 19min, i.e. there are lots of duplicates. So, for TARQL you can basically reuse the `CONSTRUCT` template but have to keep in mind to recreate the IRIs and bind them to new variables. But it works and would be the only option on my laptop for example","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1328697603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1329598792","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1329598792","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1329598792,"node_id":"IC_kwDOAHF7Ec5PQBFI","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T19:02:29Z","updated_at":"2022-11-28T20:43:16Z","author_association":"MEMBER","body":"You could use TSV and use `sed` to put ` .` on the end of each line.\n\nTSV uses RDF syntax for terms.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1329598792/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1330187259","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1330187259","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1330187259,"node_id":"IC_kwDOAHF7Ec5PSQv7","user":{"login":"LorenzBuehmann","id":976029,"node_id":"MDQ6VXNlcjk3NjAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/976029?v=4","gravatar_id":"","url":"https://api.github.com/users/LorenzBuehmann","html_url":"https://github.com/LorenzBuehmann","followers_url":"https://api.github.com/users/LorenzBuehmann/followers","following_url":"https://api.github.com/users/LorenzBuehmann/following{/other_user}","gists_url":"https://api.github.com/users/LorenzBuehmann/gists{/gist_id}","starred_url":"https://api.github.com/users/LorenzBuehmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LorenzBuehmann/subscriptions","organizations_url":"https://api.github.com/users/LorenzBuehmann/orgs","repos_url":"https://api.github.com/users/LorenzBuehmann/repos","events_url":"https://api.github.com/users/LorenzBuehmann/events{/privacy}","received_events_url":"https://api.github.com/users/LorenzBuehmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T07:15:54Z","updated_at":"2022-11-29T07:16:29Z","author_association":"CONTRIBUTOR","body":"Nice option, but this would only work for templates producing a single triple pattern I think. In cases like\r\n```\r\nCONSTRUCT {\r\n?s :p1 ?o1 ;\r\n    :p2 ?o2 .\r\n?o1 a :A .\r\n} WHERE {\r\n ....\r\n}\r\n```\r\nwe have to cope with bindings with more than 3 variables and/or missing the fixed properties. But TARQL is fine, it can read from stream","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1330187259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1330565745","html_url":"https://github.com/apache/jena/issues/1633#issuecomment-1330565745","issue_url":"https://api.github.com/repos/apache/jena/issues/1633","id":1330565745,"node_id":"IC_kwDOAHF7Ec5PTtJx","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T12:32:48Z","updated_at":"2022-11-29T12:32:48Z","author_association":"MEMBER","body":"Not really - put a UNION for each s/p/o to generate and use LATERAL.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1330565745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332012010","html_url":"https://github.com/apache/jena/pull/1638#issuecomment-1332012010","issue_url":"https://api.github.com/repos/apache/jena/issues/1638","id":1332012010,"node_id":"IC_kwDOAHF7Ec5PZOPq","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T11:32:20Z","updated_at":"2022-11-30T11:32:20Z","author_association":"MEMBER","body":"[Elsewhere](https://github.com/apache/jena/discussions/1639#discussioncomment-4272140)\r\n> I'd be happy to test it.\r\n\r\n@LorenzBuehmann\r\nIf you can find some time, this is the most important issue to test.\r\n\r\nThis is for 4.7.0. The default is to merge it.\r\n\r\nIt does not complete work on paths but it is important. We will be making progress and have a common base for further work.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332012010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332284164","html_url":"https://github.com/apache/jena/pull/1641#issuecomment-1332284164","issue_url":"https://api.github.com/repos/apache/jena/issues/1641","id":1332284164,"node_id":"IC_kwDOAHF7Ec5PaQsE","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T14:49:21Z","updated_at":"2022-11-30T15:01:06Z","author_association":"MEMBER","body":"It is worth putting this in. \r\n\r\nFor SPARQL for TDB2 in quads operation:\r\n\r\nhttps://github.com/apache/jena/commit/ec33bdeaebbe3d3f1361fd91f94cfef31f51a0d1\r\n\r\n`OpDatasetNames` operates on NodeIds for TDB2 (and TDB1). It also provides cancellability.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332284164/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332420827","html_url":"https://github.com/apache/jena/pull/1641#issuecomment-1332420827","issue_url":"https://api.github.com/repos/apache/jena/issues/1641","id":1332420827,"node_id":"IC_kwDOAHF7Ec5PayDb","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T16:22:17Z","updated_at":"2022-11-30T16:22:17Z","author_association":"MEMBER","body":"Yes I see your PR #1642 covers the other possible code path in a similar fashion","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332420827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332571273","html_url":"https://github.com/apache/jena/pull/1638#issuecomment-1332571273","issue_url":"https://api.github.com/repos/apache/jena/issues/1638","id":1332571273,"node_id":"IC_kwDOAHF7Ec5PbWyJ","user":{"login":"SimonBin","id":10867832,"node_id":"MDQ6VXNlcjEwODY3ODMy","avatar_url":"https://avatars.githubusercontent.com/u/10867832?v=4","gravatar_id":"","url":"https://api.github.com/users/SimonBin","html_url":"https://github.com/SimonBin","followers_url":"https://api.github.com/users/SimonBin/followers","following_url":"https://api.github.com/users/SimonBin/following{/other_user}","gists_url":"https://api.github.com/users/SimonBin/gists{/gist_id}","starred_url":"https://api.github.com/users/SimonBin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SimonBin/subscriptions","organizations_url":"https://api.github.com/users/SimonBin/orgs","repos_url":"https://api.github.com/users/SimonBin/repos","events_url":"https://api.github.com/users/SimonBin/events{/privacy}","received_events_url":"https://api.github.com/users/SimonBin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T18:29:33Z","updated_at":"2022-11-30T18:30:15Z","author_association":"CONTRIBUTOR","body":"we plan on testing this give us some time :sweat_smile: \r\n\r\nlooks good in any case","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332571273/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332721813","html_url":"https://github.com/apache/jena/issues/1644#issuecomment-1332721813","issue_url":"https://api.github.com/repos/apache/jena/issues/1644","id":1332721813,"node_id":"IC_kwDOAHF7Ec5Pb7iV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T20:52:19Z","updated_at":"2022-11-30T20:52:19Z","author_association":"MEMBER","body":"Linux. Docker Desktop installed.\r\n\r\nI now have the situation where if it is failing then stopping `docker.service` causes the build to work again. Restarting usually (not always!) causes the build to fail again.\r\n\r\nDocker reconfigures local networking.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332721813/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332734455","html_url":"https://github.com/apache/jena/issues/1644#issuecomment-1332734455","issue_url":"https://api.github.com/repos/apache/jena/issues/1644","id":1332734455,"node_id":"IC_kwDOAHF7Ec5Pb-n3","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T21:05:58Z","updated_at":"2022-11-30T21:05:58Z","author_association":"MEMBER","body":"Hmmm. I better take a look at this test. Linking the other issue where we discussed the same test: https://github.com/apache/jena/pull/1480#issuecomment-1253353083","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332734455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332744385","html_url":"https://github.com/apache/jena/issues/1644#issuecomment-1332744385","issue_url":"https://api.github.com/repos/apache/jena/issues/1644","id":1332744385,"node_id":"IC_kwDOAHF7Ec5PcBDB","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T21:16:14Z","updated_at":"2022-11-30T21:16:14Z","author_association":"MEMBER","body":"I don't think it is the test per se.\r\n\r\nAnother data point: when it stop the `docker.service`, it is currently still usually failing once, then starts working.\r\nAnd restarting `docker.service`, usually, passes once, then fails consistently.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332744385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332820514","html_url":"https://github.com/apache/jena/issues/1644#issuecomment-1332820514","issue_url":"https://api.github.com/repos/apache/jena/issues/1644","id":1332820514,"node_id":"IC_kwDOAHF7Ec5PcToi","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T22:30:17Z","updated_at":"2022-11-30T22:31:12Z","author_association":"MEMBER","body":">I don't think it is the test per se.\r\n\r\nSorry, I had to read the other thread to remember what tests were failing. But your comment might be correct... the linked issue had this test failing in your logs, I believe:\r\n\r\n```\r\n[INFO] [TESTS]   1) datasets\r\n[INFO] [TESTS]        Visits datasets page, also the application landing-page:\r\n[INFO] [TESTS]      AssertionError: Timed out retrying after 7500ms: Expected to find element: `h2.text-center`, but never found it.\r\n[INFO] [TESTS]       at Context.eval (webpack://apache-jena-fuseki/./tests/e2e/specs/datasets.cy.js:31:7)\r\n[INFO] [TESTS] \r\n```\r\n\r\nThat test does very little. It visits `/`, waits for the loading spinning element to disappear, and tests that the HTML generated contains certain elements. I guess we could check if the tests that are failing are, perhaps, related to that loading / in progress element.\r\n\r\nMaybe that element, or the logic to generate it, suffers when there is a delay to load, or a network issue? Is that test still failing, when you have failures? And do the failures always include the same tests? Or does it vary between runs?","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332820514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332848762","html_url":"https://github.com/apache/jena/issues/1644#issuecomment-1332848762","issue_url":"https://api.github.com/repos/apache/jena/issues/1644","id":1332848762,"node_id":"IC_kwDOAHF7Ec5Pcah6","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T23:03:35Z","updated_at":"2022-12-27T15:04:21Z","author_association":"MEMBER","body":"The 3 test failure in #1480 was because HOST was set which it isn't now.\r\n\r\nWe should probably undo 242725c8 which reorders tests which seemed to work at the time.\r\n\r\nIf necessary, we can turn off the e2e test for the release when built on my machine. We can be fairly sure the tests do what they should do and it is an environment or framework issue.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1332848762/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333454759","html_url":"https://github.com/apache/jena/pull/1650#issuecomment-1333454759","issue_url":"https://api.github.com/repos/apache/jena/issues/1650","id":1333454759,"node_id":"IC_kwDOAHF7Ec5Peuen","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T09:12:07Z","updated_at":"2022-12-01T09:12:07Z","author_association":"MEMBER","body":"@dependabot close\r\n\r\nNot rushing to move to slf4j2 - waiting for the incremental updates to slow down.\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333454759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333480044","html_url":"https://github.com/apache/jena/issues/1646#issuecomment-1333480044","issue_url":"https://api.github.com/repos/apache/jena/issues/1646","id":1333480044,"node_id":"IC_kwDOAHF7Ec5Pe0ps","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T09:33:30Z","updated_at":"2022-12-01T09:33:59Z","author_association":"MEMBER","body":"Is there a dataset and query you can share to reproduce this?\r\n\r\nNote that `GraphMem` is very old code at this point and I'm not aware that this issue has ever been reported before so it's likely a specific quirk of your data.\r\n\r\nThere has been an effort underway to replace it with a more modern implementation (see PR #1273) but no ETA on when that will land in a release","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333480044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333494165","html_url":"https://github.com/apache/jena/issues/1646#issuecomment-1333494165","issue_url":"https://api.github.com/repos/apache/jena/issues/1646","id":1333494165,"node_id":"IC_kwDOAHF7Ec5Pe4GV","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T09:46:20Z","updated_at":"2022-12-01T09:48:44Z","author_association":"MEMBER","body":"@ebremer \r\n\r\nWhat's the \"do the business \" part? Is it in someway updating the data being queried?\r\n\r\nA `ResultSet` is a stream from the data, and it stepping through as `.next` is called during the `forEachRemaining`.\r\n\r\nTo isolate the result set from the data:\r\n\r\n```\r\n    ResultSet rs = qe.execSelect().materialise();\r\n```\r\nIf you could try that anyway, it will simplify the report.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333494165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333591047","html_url":"https://github.com/apache/jena/issues/1608#issuecomment-1333591047","issue_url":"https://api.github.com/repos/apache/jena/issues/1608","id":1333591047,"node_id":"IC_kwDOAHF7Ec5PfPwH","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T11:04:34Z","updated_at":"2022-12-01T11:04:34Z","author_association":"MEMBER","body":"Presumed answered.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333591047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333776785","html_url":"https://github.com/apache/jena/issues/1646#issuecomment-1333776785","issue_url":"https://api.github.com/repos/apache/jena/issues/1646","id":1333776785,"node_id":"IC_kwDOAHF7Ec5Pf9GR","user":{"login":"ebremer","id":4094961,"node_id":"MDQ6VXNlcjQwOTQ5NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4094961?v=4","gravatar_id":"","url":"https://api.github.com/users/ebremer","html_url":"https://github.com/ebremer","followers_url":"https://api.github.com/users/ebremer/followers","following_url":"https://api.github.com/users/ebremer/following{/other_user}","gists_url":"https://api.github.com/users/ebremer/gists{/gist_id}","starred_url":"https://api.github.com/users/ebremer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ebremer/subscriptions","organizations_url":"https://api.github.com/users/ebremer/orgs","repos_url":"https://api.github.com/users/ebremer/repos","events_url":"https://api.github.com/users/ebremer/events{/privacy}","received_events_url":"https://api.github.com/users/ebremer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T13:32:28Z","updated_at":"2022-12-01T13:32:28Z","author_association":"CONTRIBUTOR","body":"I was able to fix this last night.  The \"do the business\" was sending a list of resources and object values from the ResultSet to a ThreadPoolExecutor to process over 64 cores.  Whereas, the individual threads kept mostly to themselves,  each was adding the results back to the original Model as follows:\r\n```\r\nm.enterCriticalSection(Lock.WRITE);\r\nm.add(z);\r\nm.leaveCriticalSection();\r\n```\r\nThe code work for thousands of large graphs, but for one, kept throwing the same above error.  I was able to fix the issue by buffering up all of the threads and then calling engine.prestartAllCoreThreads() after the\r\n```\r\nrs.forEachRemaining(qs->{\r\n    do the business *\r\n    });\r\n```\r\nloop was done.  ResultSet rs = qe.execSelect().materialise(); looks like it would have solved the issue too so I will have to give it a try.  Thanks!","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333776785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333812731","html_url":"https://github.com/apache/jena/issues/1646#issuecomment-1333812731","issue_url":"https://api.github.com/repos/apache/jena/issues/1646","id":1333812731,"node_id":"IC_kwDOAHF7Ec5PgF37","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T14:02:14Z","updated_at":"2022-12-01T14:02:14Z","author_association":"MEMBER","body":"Right - GraphMem is not thread safe. The read side also needs a critical section (read) but the locks are MRSW so writing is single threaded, no reader at the time.\r\n\r\nTransaction are better (tm). \r\n\r\n`DatasetFactory.createTxnMem()` and graph from that type of dataset.\r\n\r\n```\r\ndataset.executeRead(()->so the query, do the business);\r\n```\r\nand\r\n```\r\ndataset.executeWrite(()->m.add(z));\r\n```\r\n\r\nThat's MR+SW (multiple readers AND one single writer).\r\nThe query is isolated - it does not see changes while running.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333812731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333981148","html_url":"https://github.com/apache/jena/pull/1655#issuecomment-1333981148","issue_url":"https://api.github.com/repos/apache/jena/issues/1655","id":1333981148,"node_id":"IC_kwDOAHF7Ec5Pgu_c","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T15:55:00Z","updated_at":"2022-12-01T15:55:00Z","author_association":"MEMBER","body":"It is great to see this but it is now very close to 4.7.0.","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/1333981148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]