[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362940768","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1362940768","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1362940768,"node_id":"IC_kwDOACaFSM5RPNNg","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T15:00:12Z","updated_at":"2022-12-22T15:00:12Z","author_association":"CONTRIBUTOR","body":"The problem is that loc is cleared when a tserver is shutdown.  So there is nothing preserved that specifies where the tablet was last hosted.  Another thought was to set the future location but I feel that can get us into inconsistent states as well.\r\n\r\nHow can the last location denote a dirty shutdown if at the time that happens it may or may not be equivalent to the current location?  In our case it really does not matter what tserver was hosting the tablet when the data was written.  A good portion of our data is not rewritten and yet the tablet is hosted on a different tserver because of balancing activities.\r\n\r\nI don't mind using a property to change the semantics of the last location.  That would work just as well for us.  I will look into doing that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362940768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362952155","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1362952155","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1362952155,"node_id":"IC_kwDOACaFSM5RPP_b","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T15:09:20Z","updated_at":"2022-12-22T15:09:20Z","author_association":"CONTRIBUTOR","body":"> The problem is that loc is cleared when a tserver is shutdown.\r\n\r\nI'm thinking we should not clear on shutdown. `loc` doesn't get cleared on abnormal shutdown and things still work fine. On startup, after waiting MASTER_STARTUP_TSERVER_AVAIL_MIN_COUNT or MASTER_STARTUP_TSERVER_AVAIL_MAX_WAIT, assign tablet to `loc` if that tserver is up. If it's not up, then clear `loc` and let the balancer decide.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362952155/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362956061","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1362956061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1362956061,"node_id":"IC_kwDOACaFSM5RPQ8d","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T15:12:27Z","updated_at":"2022-12-22T15:12:27Z","author_association":"CONTRIBUTOR","body":"Just throwing out another possibility - not sure how this would work (or if at all possible) but maybe it sparks an idea (or its just rubbish)\r\n\r\nIf you are doing a planned shutdown and if we could create a list of server / tablet assignments (sort of like being able to listSplits) and then we could persist that to an external file.  On startup, have a flag that passes the file with those assignment to something that would then make those bulk assignments were possible.  You may need to account for servers that never came back.\r\n\r\nNot sure if it could be a custom balancer that runs once on start-up or if it would be better to run right after the upgrade code - but the idea is that you know you are about to shutdown, you have time to take an assignment snapshot, so maybe it could be handled outside of the \"normal\" metadata / balancer operations?\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362956061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362994117","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1362994117","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1362994117,"node_id":"IC_kwDOACaFSM5RPaPF","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T15:48:51Z","updated_at":"2022-12-22T15:48:51Z","author_association":"CONTRIBUTOR","body":"I would be curious what would happen on a restart after killing (-9) the master, then performed a normal shutdown of the tservers.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1362994117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363248317","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1363248317","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1363248317,"node_id":"IC_kwDOACaFSM5RQYS9","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-22T19:04:35Z","updated_at":"2022-12-22T19:04:35Z","author_association":"CONTRIBUTOR","body":"A normal shutdown of tservers will clear out the current location entries.  The tservers would need to be all hard killed to test whether the current location entries would be used on startup.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363248317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363964831","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1363964831","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1363964831,"node_id":"IC_kwDOACaFSM5RTHOf","user":{"login":"matthpeterson","id":23561846,"node_id":"MDQ6VXNlcjIzNTYxODQ2","avatar_url":"https://avatars.githubusercontent.com/u/23561846?v=4","gravatar_id":"","url":"https://api.github.com/users/matthpeterson","html_url":"https://github.com/matthpeterson","followers_url":"https://api.github.com/users/matthpeterson/followers","following_url":"https://api.github.com/users/matthpeterson/following{/other_user}","gists_url":"https://api.github.com/users/matthpeterson/gists{/gist_id}","starred_url":"https://api.github.com/users/matthpeterson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/matthpeterson/subscriptions","organizations_url":"https://api.github.com/users/matthpeterson/orgs","repos_url":"https://api.github.com/users/matthpeterson/repos","events_url":"https://api.github.com/users/matthpeterson/events{/privacy}","received_events_url":"https://api.github.com/users/matthpeterson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T13:44:56Z","updated_at":"2022-12-23T13:45:59Z","author_association":"CONTRIBUTOR","body":"Recommendation: add a test for an I-File using a path containing directories.  Otherwise it looks good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363964831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363977070","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1363977070","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1363977070,"node_id":"IC_kwDOACaFSM5RTKNu","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T14:01:54Z","updated_at":"2022-12-23T14:01:54Z","author_association":"CONTRIBUTOR","body":"> Recommendation: add a test for an I-File using a path containing directories. Otherwise it looks good.\r\n\r\nDone. Nice catch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1363977070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1364110747","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1364110747","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1364110747,"node_id":"IC_kwDOACaFSM5RTq2b","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-23T16:49:44Z","updated_at":"2022-12-23T16:49:44Z","author_association":"CONTRIBUTOR","body":"Tried other options which all had issues:\r\n\r\n1) Avoid clearing the current location.  This will prevent the master from cleanly shutting down because it thinks all of the tablets are still hosted.\r\n2) Set the future location instead of the last location.  This will prevent the systems from shutting down because the tablets simply get reassigned back to the tserver as soon as they are unloaded.\r\n\r\nHence I am back to using the last location or creating a new entry in the metadata table.  @EdColeman 's idea I expect would work but I would like to avoid creating a separate file.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1364110747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1366723006","html_url":"https://github.com/apache/accumulo/pull/3139#issuecomment-1366723006","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3139","id":1366723006,"node_id":"IC_kwDOACaFSM5Rdom-","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-28T15:14:28Z","updated_at":"2022-12-28T15:14:28Z","author_association":"CONTRIBUTOR","body":"Opened a new PR against main instead.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1366723006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367303598","html_url":"https://github.com/apache/accumulo/issues/3094#issuecomment-1367303598","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3094","id":1367303598,"node_id":"IC_kwDOACaFSM5Rf2Wu","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T13:02:16Z","updated_at":"2022-12-29T13:02:16Z","author_association":"CONTRIBUTOR","body":"I have great news!  This error has shown up again on one of our systems.  I look through the various commits here and see if I can patch the system to determine (or fix) the issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367303598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367340950","html_url":"https://github.com/apache/accumulo/issues/3094#issuecomment-1367340950","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3094","id":1367340950,"node_id":"IC_kwDOACaFSM5Rf_eW","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T13:58:01Z","updated_at":"2022-12-29T13:58:01Z","author_association":"CONTRIBUTOR","body":"And I have sad news.... the error does not appear to be showing up anymore.  Applying patches anyway to see if we can catch this some time in the future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367340950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367456136","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1367456136","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1367456136,"node_id":"IC_kwDOACaFSM5RgbmI","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T16:44:02Z","updated_at":"2022-12-29T16:44:02Z","author_association":"CONTRIBUTOR","body":"In assignment mode, this will set the last location to the currently assigned location when the tablet is unhosted.  I am wondering if I should set the last location when the tablet is loaded as well or instead.  The current implementation requires an orderly shutdown.  I am thinking I would like this to work even on a non-orderly shutdown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367456136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367500203","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1367500203","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1367500203,"node_id":"IC_kwDOACaFSM5RgmWr","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T18:07:58Z","updated_at":"2022-12-29T18:36:29Z","author_association":"CONTRIBUTOR","body":"Now I am thinking of 3 modes for location: compact, assign, and unload.  Also tserver.last.location.mode instead of general.location.mode.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367500203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367515192","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1367515192","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1367515192,"node_id":"IC_kwDOACaFSM5RgqA4","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-29T18:40:06Z","updated_at":"2022-12-29T18:40:06Z","author_association":"CONTRIBUTOR","body":"> In assignment mode, this will set the last location to the currently assigned location when the tablet is unhosted. I am wondering if I should set the last location when the tablet is loaded as well or instead. The current implementation requires an orderly shutdown. I am thinking I would like this to work even on a non-orderly shutdown.\r\n\r\nWhen you mention orderly shutdown vs non-orderly, what are you defining as a non-orderly shutdown?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367515192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367898920","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1367898920","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1367898920,"node_id":"IC_kwDOACaFSM5RiHso","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T12:40:35Z","updated_at":"2022-12-30T12:42:37Z","author_association":"CONTRIBUTOR","body":"> > In assignment mode, this will set the last location to the currently assigned location when the tablet is unhosted. I am wondering if I should set the last location when the tablet is loaded as well or instead. The current implementation requires an orderly shutdown. I am thinking I would like this to work even on a non-orderly shutdown.\r\n> \r\n> When you mention orderly shutdown vs non-orderly, what are you defining as a non-orderly shutdown?\r\n\r\nA non-orderly shutdown is when you force all of the tservers to be killed (kill pid) in which case the tservers will not unload the tablets first and hence the last location would not be updated in \"unload\" mode.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367898920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367910943","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1367910943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1367910943,"node_id":"IC_kwDOACaFSM5RiKof","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T13:09:04Z","updated_at":"2022-12-30T13:09:04Z","author_association":"CONTRIBUTOR","body":"Does a skipTrashRegex make sense?  Just wondering if something a little more generic would be useful.  The other thought I had was whether this could be made table based (may not be possible).  I am fine with this as is, just a few thoughts to consider.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1367910943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368010591","html_url":"https://github.com/apache/accumulo/issues/3145#issuecomment-1368010591","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3145","id":1368010591,"node_id":"IC_kwDOACaFSM5Rii9f","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T16:57:26Z","updated_at":"2022-12-30T16:57:26Z","author_association":"MEMBER","body":"Since the shell should be calling public API for this, it should be possible for us to validate updated configuration on the server-side, before we set it, and then either store or reject the updated configuration.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368010591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368012817","html_url":"https://github.com/apache/accumulo/pull/3146#issuecomment-1368012817","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3146","id":1368012817,"node_id":"IC_kwDOACaFSM5RijgR","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T17:02:54Z","updated_at":"2022-12-30T17:02:54Z","author_association":"MEMBER","body":"I think the fix, when ready, can be applied to the 2.1 branch. This PR is currently targeting the main branch. If you cherry-pick the changes to a 2.1 bugfix branch, and force push to the branch that is backing this PR, we can edit the PR's base branch to make this a PR against 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368012817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368046100","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1368046100","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1368046100,"node_id":"IC_kwDOACaFSM5RiroU","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T18:36:23Z","updated_at":"2022-12-30T18:36:23Z","author_association":"CONTRIBUTOR","body":"I added some documentation in ce82ea4, mostly in the TabletLocator class.  Would be good to look at those docs as a first step in looking at this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368046100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368049753","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1368049753","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1368049753,"node_id":"IC_kwDOACaFSM5RishZ","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T18:49:24Z","updated_at":"2022-12-30T18:49:24Z","author_association":"CONTRIBUTOR","body":"I am finding a bunch of issues with the implementation:\r\n1) With assign or unload mode, I am getting multiple last locations (the previous last location is not being deleted).  What's worse is that at the place where these updates are being made, the previous last location is not available.\r\n2) I need to rework how the configuration is available for the assign/unload mode.\r\n3) The unload mode will probably be dropped.\r\n\r\nTurning this into a draft until I can resolve these issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368049753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368085098","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1368085098","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1368085098,"node_id":"IC_kwDOACaFSM5Ri1Jq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T20:45:43Z","updated_at":"2022-12-30T20:45:43Z","author_association":"CONTRIBUTOR","body":"With the new support for external compactions, does that make the last compaction location may be a bit less relevant?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368085098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086013","html_url":"https://github.com/apache/accumulo/pull/3146#issuecomment-1368086013","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3146","id":1368086013,"node_id":"IC_kwDOACaFSM5Ri1X9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T20:49:20Z","updated_at":"2022-12-30T20:49:20Z","author_association":"CONTRIBUTOR","body":"If possible, it would be nice to add an IT to the ShellIT that exercises setting a prop w/ a bad value.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086476","html_url":"https://github.com/apache/accumulo/pull/3146#issuecomment-1368086476","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3146","id":1368086476,"node_id":"IC_kwDOACaFSM5Ri1fM","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T20:51:19Z","updated_at":"2022-12-30T20:51:19Z","author_association":"CONTRIBUTOR","body":"> Ideally we'd validate property values on the server side, and reject the RPC request (and propagate the error through the public API call), when validation fails.\r\n\r\nIs there a bigger problem here?  Re my comment earlier about testing the shell, it might be nice to have an IT for the public API also that tries to set a bad value if we do not have one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086838","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1368086838","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1368086838,"node_id":"IC_kwDOACaFSM5Ri1k2","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T20:52:47Z","updated_at":"2022-12-30T20:53:46Z","author_association":"CONTRIBUTOR","body":"> With the new support for external compactions, does that make the last compaction location may be a bit less relevant?\r\n\r\nYes I believe it does.  The concept of locality goes out the window with external compactions.  However users of this system are not currently forced to use external compactions so I am hesitant to remove that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368086838/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368091960","html_url":"https://github.com/apache/accumulo/pull/3142#issuecomment-1368091960","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3142","id":1368091960,"node_id":"IC_kwDOACaFSM5Ri204","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-30T21:12:54Z","updated_at":"2022-12-30T21:12:54Z","author_association":"CONTRIBUTOR","body":"I was thinking through the possibility of having multiple last columns, like `lastAssigned`, `lastCompacted`, etc.  All that information could be made available to the balancer.  Then I started thinking about external compactions and if they would set the `lastCompacted` location.  That prompted me to ask about external compactions. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1368091960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369685153","html_url":"https://github.com/apache/accumulo/issues/3144#issuecomment-1369685153","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3144","id":1369685153,"node_id":"IC_kwDOACaFSM5Ro7yh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T11:56:40Z","updated_at":"2023-01-03T11:56:40Z","author_association":"CONTRIBUTOR","body":"Is this something that should be addressed in 2.1.1?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369685153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369724209","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1369724209","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1369724209,"node_id":"IC_kwDOACaFSM5RpFUx","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T12:41:51Z","updated_at":"2023-01-03T12:41:51Z","author_association":"CONTRIBUTOR","body":"I think this looks good and #3091 can be closed in favor of this PR. Before closing #3091 , I think it might be useful to copy over some of the IT changes that I made.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369724209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369928245","html_url":"https://github.com/apache/accumulo/issues/3147#issuecomment-1369928245","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3147","id":1369928245,"node_id":"IC_kwDOACaFSM5Rp3I1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T15:51:06Z","updated_at":"2023-01-03T15:51:06Z","author_association":"CONTRIBUTOR","body":"I was able to remove this in the shell using `deleteiter -all -n replcombiner -t accumulo.metadata`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369928245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369952630","html_url":"https://github.com/apache/accumulo/issues/3147#issuecomment-1369952630","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3147","id":1369952630,"node_id":"IC_kwDOACaFSM5Rp9F2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T16:11:48Z","updated_at":"2023-01-03T16:11:48Z","author_association":"CONTRIBUTOR","body":"Looks like it was set on the metadata table in InitialConfiguration [here](https://github.com/apache/accumulo/commit/9bbde86a68c87f8ac75eac843c2aa1f82712420b#diff-933f56855b27c2216e3120db4446ac23ff62d005f413bf95de686c428e65638aL122)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369952630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369979205","html_url":"https://github.com/apache/accumulo/issues/3147#issuecomment-1369979205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3147","id":1369979205,"node_id":"IC_kwDOACaFSM5RqDlF","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T16:35:23Z","updated_at":"2023-01-03T16:35:23Z","author_association":"CONTRIBUTOR","body":"This is a duplicate of https://github.com/apache/accumulo/issues/3097 and is being handled with https://github.com/apache/accumulo/pull/3137  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1369979205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370026972","html_url":"https://github.com/apache/accumulo/issues/3147#issuecomment-1370026972","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3147","id":1370026972,"node_id":"IC_kwDOACaFSM5RqPPc","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T17:17:11Z","updated_at":"2023-01-03T17:17:11Z","author_association":"CONTRIBUTOR","body":"Thanks @EdColeman , I didn't see that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370026972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370174773","html_url":"https://github.com/apache/accumulo/issues/3052#issuecomment-1370174773","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3052","id":1370174773,"node_id":"IC_kwDOACaFSM5RqzU1","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T20:03:45Z","updated_at":"2023-01-03T20:03:45Z","author_association":"CONTRIBUTOR","body":"Closing issue as this was resolved in  #3100 as mentioned above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370174773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370318969","html_url":"https://github.com/apache/accumulo/pull/3107#issuecomment-1370318969","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3107","id":1370318969,"node_id":"IC_kwDOACaFSM5RrWh5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-03T23:13:28Z","updated_at":"2023-01-03T23:13:28Z","author_association":"MEMBER","body":"> @ctubbsii - did you want to review this further? I'm thinking we should merge this sooner rather than later. FWIW, I ran a full IT build last night again and it succeeded.\r\n\r\nDelayed response. No. You addressed all the things I had comments on. Thanks :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370318969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370437539","html_url":"https://github.com/apache/accumulo/issues/3144#issuecomment-1370437539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3144","id":1370437539,"node_id":"IC_kwDOACaFSM5Rrzej","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T03:05:54Z","updated_at":"2023-01-04T03:05:54Z","author_association":"CONTRIBUTOR","body":"> Is this something that should be addressed in 2.1.1?\r\n\r\nI suspect 2.1.1 is not properly handling a table splitting while batch scanning using scan servers.  Not sure if it will fail in the same way as was seen in 3.0. If it fails in a way that disrupts the scan in 2.1.1 it would be good to fix.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1370437539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371136634","html_url":"https://github.com/apache/accumulo/pull/3141#issuecomment-1371136634","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3141","id":1371136634,"node_id":"IC_kwDOACaFSM5RueJ6","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T16:19:17Z","updated_at":"2023-01-04T16:19:41Z","author_association":"CONTRIBUTOR","body":"A question before merging - When passing the ID, if it is not namespace or table, then I pass null and assume that means system config for the log statement.  General question is that correct or would something other than system be better displayed in the log statement. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371136634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371245299","html_url":"https://github.com/apache/accumulo/pull/3140#issuecomment-1371245299","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3140","id":1371245299,"node_id":"IC_kwDOACaFSM5Ru4rz","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T17:57:40Z","updated_at":"2023-01-04T17:57:40Z","author_association":"CONTRIBUTOR","body":"I don't want to go through the effort for a regex for this, as that brings up some other questions in my opinion. For now, we take the simple approach and we can expand later if we deem it necessary. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371245299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371363956","html_url":"https://github.com/apache/accumulo/pull/3141#issuecomment-1371363956","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3141","id":1371363956,"node_id":"IC_kwDOACaFSM5RvVp0","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T20:04:58Z","updated_at":"2023-01-04T20:09:20Z","author_association":"CONTRIBUTOR","body":"So, given the levels of configuration (default, system, site, namespace, table), the default configuration can't be invalid. Is there a way to differentiate between the system and site configs?\r\n\r\nEdit: Looking at the code, you might need to call ConfigCheckUtil.validate in the SystemConfiguration constructor passing in `getSnapshot()`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371363956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371375147","html_url":"https://github.com/apache/accumulo/pull/3141#issuecomment-1371375147","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3141","id":1371375147,"node_id":"IC_kwDOACaFSM5RvYYr","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T20:16:30Z","updated_at":"2023-01-04T20:16:30Z","author_association":"CONTRIBUTOR","body":"`So, given the levels of configuration (default, system, site, namespace, table)`\r\n\r\nI don't think so without major changes (and maybe not then) - but in this context I think that site, namespace and table are the only ones that matter - that is, they are the only ones users can control.  Default and system are our responsibility and need to be correct in the code - this change is to log the id's so that users can see where BAD CONFIG errors are occurring.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371375147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371378678","html_url":"https://github.com/apache/accumulo/pull/3141#issuecomment-1371378678","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3141","id":1371378678,"node_id":"IC_kwDOACaFSM5RvZP2","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T20:20:15Z","updated_at":"2023-01-04T20:20:15Z","author_association":"CONTRIBUTOR","body":"The code could be modified to pass a string instead of Id to allow more flexibility,","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1371378678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372152127","html_url":"https://github.com/apache/accumulo/pull/3150#issuecomment-1372152127","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3150","id":1372152127,"node_id":"IC_kwDOACaFSM5RyWE_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T12:25:15Z","updated_at":"2023-01-05T12:25:15Z","author_association":"CONTRIBUTOR","body":"Full IT build passed successfully","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372152127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372430988","html_url":"https://github.com/apache/accumulo/issues/3097#issuecomment-1372430988","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3097","id":1372430988,"node_id":"IC_kwDOACaFSM5RzaKM","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T16:18:34Z","updated_at":"2023-01-05T16:18:34Z","author_association":"CONTRIBUTOR","body":"Closed with #3137","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372430988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372915382","html_url":"https://github.com/apache/accumulo/pull/3112#issuecomment-1372915382","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3112","id":1372915382,"node_id":"IC_kwDOACaFSM5R1Qa2","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T23:15:58Z","updated_at":"2023-01-05T23:15:58Z","author_association":"CONTRIBUTOR","body":"@keith-turner - Thanks for the feedback, I went through the comments today and I will start addressing them tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372915382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372941318","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1372941318","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1372941318,"node_id":"IC_kwDOACaFSM5R1WwG","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-05T23:51:52Z","updated_at":"2023-01-05T23:51:52Z","author_association":"CONTRIBUTOR","body":"I took a look at this a bit today to refresh my memory after a couple weeks and at first glance it is odd that it wasn't working before as the maxMessageSize was being configured on the transport factory already. So I will dig into it more and see what's going on and why that setting doesn't work but adding the constructor param seems to fix it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1372941318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1373735941","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1373735941","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1373735941,"node_id":"IC_kwDOACaFSM5R4YwF","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-06T14:55:28Z","updated_at":"2023-01-06T14:55:28Z","author_association":"CONTRIBUTOR","body":"@ctubbsii and @dlmarion - Ok so I finally figured out what happened. Everything was working with the maxFrameSize setting being configured on the transport factory until version 0.17.0. The test I just added passes fine without modification to TServerUtils with version 0.16.0. The reason it broke in 0.17.0 was due to the change that is part of https://github.com/apache/thrift/pull/2533 . Specifically this commit introduced the maxFrameSize option as part of the constructor https://github.com/apache/thrift/commit/66ac7b46fab85f175aec601cb48ea05408a1c186 and is necessary to configure. \r\n\r\nMy fix works but this behavior change is obviously a breaking change and I'm not sure whether or not it's something that was intended or should maybe be addressed in Thrift itself at some point.\r\n\r\n### TLDR version:\r\n\r\nMy commit in this PR fixes the issue and it only applies to version 2.1.0 since no other version uses Thrift 0.17.0. So this is a new regression and does not apply to previous versions, like 1.10. Also, when we configure the settings for our custom non blocking server we do still need to keep our existing maxFrameSize settings on both the transport factory configuration and the `maxReadBufferBytes` property on the options  as shown here otherwise it breaks further downstream, even if we set the constructor args. \r\n\r\nhttps://github.com/apache/accumulo/blob/706612f859d6e68891d487d624eda9ecf3fea7f9/server/base/src/main/java/org/apache/accumulo/server/rpc/TServerUtils.java#L274-L276\r\n\r\n### Detailed Version:\r\n\r\n#### Why it breaks\r\n\r\nThe root cause is the changes inside of `AbstractNonblockingServer`. This commit changed how max frame size is checked during reads, here is version [0.16.0](https://github.com/apache/thrift/blob/2a93df80f27739ccabb5b885cb12a8dc7595ecdf/lib/java/src/org/apache/thrift/server/AbstractNonblockingServer.java#L355). Previously, before 0.17.0, frame size was compared against `MAX_READ_BUFFER_BYTES` which comes from `maxReadBufferBytes` and is set by us inside [TServerUtils](https://github.com/apache/accumulo/blob/706612f859d6e68891d487d624eda9ecf3fea7f9/server/base/src/main/java/org/apache/accumulo/server/rpc/TServerUtils.java#L276)\r\n\r\nBut in version 0.17.0, this has been refactored now and instead of reading the value from `MAX_READ_BUFFER_BYTES`, this is read from `trans_.getMaxFrameSize()` as shown here in version [0.17.0](https://github.com/apache/thrift/blob/4d493e867b349f3475203ef9848353b315203c51/lib/java/src/main/java/org/apache/thrift/server/AbstractNonblockingServer.java#L335). This value is [configured](https://github.com/apache/thrift/blob/4d493e867b349f3475203ef9848353b315203c51/lib/java/src/main/java/org/apache/thrift/transport/TNonblockingServerSocket.java#L137) by the new constructor argument which we were not setting so it was always the default value and caused the failure. \r\n\r\n#### Why our existing config doesn't work\r\n\r\nNow, what confused me initially is that we also set the value on the configuration of the factory so I was unsure why there were two ways to configure the setting and why ours didn't work. It turns out the reason is they are different configuration objects used for different things. \r\n\r\nThe `maxFrameSize` that is now set by the constructor argument is applied to the `trans_` transport which is passed to `FrameBuffer` as a [constructor arg ](https://github.com/apache/thrift/blob/4d493e867b349f3475203ef9848353b315203c51/lib/java/src/main/java/org/apache/thrift/server/AbstractNonblockingServer.java#L288)and configured back in `TNonblockingServerSocket` on line 137. \r\n\r\nHowever, the `maxFrameSize` set on the configuration for the factory we create is applied to different configurations and transports as the factory that we configure doesn't get used to create `trans_` transport but is used to create the `inTrans_` and `outTrans_` transport objects in FrameBuffer as shown [here](https://github.com/apache/thrift/blob/4d493e867b349f3475203ef9848353b315203c51/lib/java/src/main/java/org/apache/thrift/server/AbstractNonblockingServer.java#L295-L296).\r\n\r\nSo there are multiple transports configured in `FrameBuffer` and the constructor arg configuration applies to one of them and the factory configuration applies to the others.\r\n\r\n#### Why we need to keep existing config as well\r\n \r\nAs I said above, we still need to keep the existing configuration on the transport factory. The new constructor setting will allow the read to get further but if we don't set the factory config then we get errors downstream [here](https://github.com/apache/thrift/blob/4d493e867b349f3475203ef9848353b315203c51/lib/java/src/main/java/org/apache/thrift/transport/layered/TFramedTransport.java#L141) when reading a frame.\r\n\r\nFurthermore, I think we need to keep setting the `maxFrameSize` configuration on `options.maxReadBufferBytes` because if the frame size is larger than that value then thrift just hangs and spins forever with no error (which is even worse). This happened when I was testing not setting it. This is because it's [waiting](https://github.com/apache/thrift/blob/2a93df80f27739ccabb5b885cb12a8dc7595ecdf/lib/java/src/org/apache/thrift/server/AbstractNonblockingServer.java#L363) for more memory to free up but it won't ever be free since the frame to be read is less than the configured max frame size so it tries to read it but it is larger than the max read bytes so it never finishes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1373735941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1373753259","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1373753259","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1373753259,"node_id":"IC_kwDOACaFSM5R4c-r","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-06T15:11:24Z","updated_at":"2023-01-06T15:11:24Z","author_association":"CONTRIBUTOR","body":"Great write-up! I think this is good to merge after the RPC timeout conversation thread is resolved.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1373753259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374206821","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1374206821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1374206821,"node_id":"IC_kwDOACaFSM5R6Ltl","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-06T22:28:19Z","updated_at":"2023-01-06T22:28:19Z","author_association":"CONTRIBUTOR","body":"@dlmarion and @ctubbsii - I looked into the RPC timeout a bit more before making the change to apply it to the server socket to fix issue #3153 and I wanted to get some feedback before I did it. As I said in my last comment it's pretty trivial to update the code to set the timeout on the server socket. However, now I'm not sure if we want to do it and what the side effects might be.\r\n\r\nRight now the value seems to be primarily intended to be used as a client side timeout (defaulting to 120 seconds) and not as a server side timeout. This does in fact work and is applied correctly to thrift clients. It is configured in the [ClientContext](https://github.com/apache/accumulo/blob/af6b4978d42e7a1f9102a7ec9605be51c67bb595/core/src/main/java/org/apache/accumulo/core/clientImpl/ClientContext.java#L226) in the constructor and set as part of the timeoutSupplier and can be accessed using a [getter](https://github.com/apache/accumulo/blob/af6b4978d42e7a1f9102a7ec9605be51c67bb595/core/src/main/java/org/apache/accumulo/core/clientImpl/ClientContext.java#L339). I verified with some testing that the clients time out properly when setting the value. So one potential issue I see is do we actually want to re-use this same property for a server timeout when it's been used for the client timeout and in some cases you may want to make them different.\r\n\r\nA second issue is if a timeout is applied to the server side socket as well I am a little concerned of potential consequences and changing behavior on the client side if suddenly the server has a timeout value. If the server side does timeout then the client should timeout eventually on its side as well out as long as there's an actual timeout value set (default is 120s) and in that case I think that behavior would be fine I would think and would protect the server. \r\n\r\nHowever, I noticed there are other cases where the client sets [no timeout](https://github.com/apache/accumulo/blob/af6b4978d42e7a1f9102a7ec9605be51c67bb595/core/src/main/java/org/apache/accumulo/core/rpc/ThriftUtil.java#L110) such as for manager operations. For a case like this the client would potentially hang waiting forever if the server side timed out. I actually first was alerted to this behavior when doing some testing to verify the server config worked and was seeing the client side just hang.\r\n\r\nSo I just wanted to get people's thoughts on it before I proceeded.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374206821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374209449","html_url":"https://github.com/apache/accumulo/issues/3153#issuecomment-1374209449","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3153","id":1374209449,"node_id":"IC_kwDOACaFSM5R6MWp","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-06T22:31:57Z","updated_at":"2023-01-06T22:31:57Z","author_association":"CONTRIBUTOR","body":"I investigated this issue a bit and we could set the value easily on the server side socket but and I made some comments in https://github.com/apache/accumulo/pull/3134#issuecomment-1374206821 to see if we want to proceed with that. The changes could also be done in a separate PR later if we are not sure.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374209449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374505172","html_url":"https://github.com/apache/accumulo/pull/3112#issuecomment-1374505172","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3112","id":1374505172,"node_id":"IC_kwDOACaFSM5R7UjU","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-07T14:51:39Z","updated_at":"2023-01-07T14:51:39Z","author_association":"CONTRIBUTOR","body":"@keith-turner - Ok I think I addressed all of the items in your feedback, take a look again when you get a chance and see what you think. I will kick off another full IT as well just to verify everything.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1374505172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1375689677","html_url":"https://github.com/apache/accumulo/issues/3156#issuecomment-1375689677","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3156","id":1375689677,"node_id":"IC_kwDOACaFSM5R_1vN","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T14:16:23Z","updated_at":"2023-01-09T14:16:23Z","author_association":"MEMBER","body":"I think this would be helpful as well. I was looking for examples of `CompactionSelector`s and `CompactionConfigurer`s to get a better understanding of how to create new ones. There are a few tests with different `CompactionSelector`s but very few places that `CompactionConfigurer`s are tested.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1375689677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376052248","html_url":"https://github.com/apache/accumulo/issues/3157#issuecomment-1376052248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3157","id":1376052248,"node_id":"IC_kwDOACaFSM5SBOQY","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T18:17:07Z","updated_at":"2023-01-09T18:17:07Z","author_association":"CONTRIBUTOR","body":"This while loop handles the waiting logic for startup.\r\nhttps://github.com/apache/accumulo/blob/1.10/server/master/src/main/java/org/apache/accumulo/master/Master.java#L1516-L1530\r\n\r\nLooking at the comparison, it breaks out if `minTserverCount` is less than amount of current servers.\r\nhttps://github.com/apache/accumulo/blob/1.10/server/master/src/main/java/org/apache/accumulo/master/Master.java#L1514\r\n\r\nOr if there are no more retries available from `tserverRetry`.\r\nhttps://github.com/apache/accumulo/blob/1.10/server/master/src/main/java/org/apache/accumulo/master/Master.java#L1506-L1509\r\n \r\nI'm not very familiar with the Retry class, but it doesn't look like the `maxRetries` value is set as part object creation, just `maxWait`. However, the `infiniteRetries()` method is called which sets `maxRetries` to `-1` and I would think, always allows retries to be possible. \r\n\r\nhttps://github.com/apache/accumulo/blob/18c4f1ab7167cbdf8123b6bbc5f57b728650ad21/fate/src/main/java/org/apache/accumulo/fate/util/Retry.java#L49\r\n\r\nIf this is indeed the problem, it could be fixed by either changing the while loop to be duration based, or calculating the correct amount of retries for the time interval and setting the `MaxRetries` param of `tserverRetry`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376052248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376119298","html_url":"https://github.com/apache/accumulo/issues/3157#issuecomment-1376119298","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3157","id":1376119298,"node_id":"IC_kwDOACaFSM5SBeoC","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T18:47:23Z","updated_at":"2023-01-09T18:47:23Z","author_association":"CONTRIBUTOR","body":"The behavior may be desired or maybe not and is user dependent.  The initial use case for the min tservers was to protect against starting the master before at least X tservers were online.  What would happen is the manager processes would be started and then the tservers - and as soon as the manager saw one (or a few tservers) the metadata tables would be assigned and then it was off to the races, where almost everything would be assigned to a few tservers and then a lengthy delay with migrations and reassignments.  The tserver min count was to ensure the X servers would be available before the manager would proceed.  Maybe that's 25%, 50%, 99.999% of your servers? \r\n\r\nThe whole thing can be avoided and handled external to Accumulo.  If the start-up sequence is ZooKeeper, Hadoop, tservers and then the manager processes.  The tservers will register with ZooKeeper and wait.  Users can then choose to validate that things are okay before proceeding.  And that \"okay\"  is up to the user.  Maybe you have strict requirements that with some kind of custom balancer that some nodes are more important that others where some things are pinned to servers with specific capabilities (say the metadata tables)  - then, maybe you'd want to make sure they were online and registered before that manager starts, and the actual count is less important.\r\n\r\nOthers, could decide that if I can't get to 25% I do not want to proceed - I don't care how long that is, without at least 25% I never want to start.  For others, it could be wait for 99.999%, but if I don't get that, well if we wait 30 minutes, I guess that what we have is as good enough, and all we can do for right now.\r\n\r\nSo, the count was basically a simplistic trigger-guard for a particular foot-gun. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376119298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376131447","html_url":"https://github.com/apache/accumulo/pull/3158#issuecomment-1376131447","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3158","id":1376131447,"node_id":"IC_kwDOACaFSM5SBhl3","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T18:57:09Z","updated_at":"2023-01-09T18:57:09Z","author_association":"CONTRIBUTOR","body":"The log messages generated with this change now look like:\r\n\r\n```\r\n2023-01-09T18:54:00,891 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.name) for namespace id: +accumulo\r\n2023-01-09T18:54:00,891 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.password.peer1) for namespace id: +accumulo\r\n2023-01-09T18:54:00,891 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.peer1) for namespace id: +accumulo\r\n2023-01-09T18:54:00,891 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.user.peer1) for namespace id: +accumulo\r\n2023-01-09T18:54:00,900 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.name) for table id: +r\r\n2023-01-09T18:54:00,900 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.password.peer1) for table id: +r\r\n2023-01-09T18:54:00,901 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.peer1) for table id: +r\r\n2023-01-09T18:54:00,901 [conf.ConfigCheckUtil] WARN : BAD CONFIG unrecognized property key (replication.peer.user.peer1) for table id: +r\r\n\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376131447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376391058","html_url":"https://github.com/apache/accumulo/pull/3150#issuecomment-1376391058","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3150","id":1376391058,"node_id":"IC_kwDOACaFSM5SCg-S","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-09T22:04:52Z","updated_at":"2023-01-09T22:04:52Z","author_association":"CONTRIBUTOR","body":"Full IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1376391058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377382995","html_url":"https://github.com/apache/accumulo/pull/3152#issuecomment-1377382995","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3152","id":1377382995,"node_id":"IC_kwDOACaFSM5SGTJT","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T14:42:38Z","updated_at":"2023-01-10T14:42:38Z","author_association":"CONTRIBUTOR","body":"@dlmarion any other changes you  want to see or is this good? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377382995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377402987","html_url":"https://github.com/apache/accumulo/issues/3157#issuecomment-1377402987","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3157","id":1377402987,"node_id":"IC_kwDOACaFSM5SGYBr","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T14:57:59Z","updated_at":"2023-01-10T14:57:59Z","author_association":"CONTRIBUTOR","body":"OK then, I guess this is working as designed.  Thank you everybody.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377402987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377451222","html_url":"https://github.com/apache/accumulo/issues/3157#issuecomment-1377451222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3157","id":1377451222,"node_id":"IC_kwDOACaFSM5SGjzW","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T15:33:06Z","updated_at":"2023-01-10T15:33:06Z","author_association":"CONTRIBUTOR","body":"This might still be valid and we can possibly improve the way we handle the interaction of the two values, or at least document the interaction(s) better.\r\n\r\nI was just trying to caution that different users may have different expectations / needs.\r\n\r\n- If number of servers is important and the driving requirement - set the timeout to infinite / never time out.\r\n- If minimal restart time is the critical factor, use a low number of tservers and a relatively short time out. (and live with the consequences)\r\n- ?\r\n\r\nThe thing is that the parameters should be considered a guard against a worst case start-up and that if users need more specific / special handling they should explore alternate solutions external to Accumulo and the provided example scripts and really just use these as a backup.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377451222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377481625","html_url":"https://github.com/apache/accumulo/pull/3112#issuecomment-1377481625","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3112","id":1377481625,"node_id":"IC_kwDOACaFSM5SGrOZ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T15:55:23Z","updated_at":"2023-01-10T15:55:23Z","author_association":"CONTRIBUTOR","body":"> Looks great @cshannon\r\n\r\nThanks, I'll go ahead and merge this in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377481625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377509011","html_url":"https://github.com/apache/accumulo/pull/3151#issuecomment-1377509011","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3151","id":1377509011,"node_id":"IC_kwDOACaFSM5SGx6T","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T16:14:33Z","updated_at":"2023-01-10T16:15:19Z","author_association":"CONTRIBUTOR","body":"Another thing I thought of is have you tried simply catching OutOfMemoryError if it happens? This is usually a bad idea since it can cause weird behavior and is hard to catch since you don't have any idea where it may happen. But in this specific instance this may actually be a good use case where it actually works and could be handled correctly if we limit the scope to just the allocation of that buffer. \r\n\r\nSomething like:\r\n\r\n```java\r\ntry {\r\n    this.value = new byte[bytes.length];\r\n    System.arraycopy(bytes, 0, this.value, 0, bytes.length);\r\n} catch (OutOfMemoryError oome) {\r\n    //log and handle error with wait/retry, etc\r\n}\r\n```\r\n    \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377509011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377873105","html_url":"https://github.com/apache/accumulo/pull/3151#issuecomment-1377873105","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3151","id":1377873105,"node_id":"IC_kwDOACaFSM5SIKzR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-10T21:17:29Z","updated_at":"2023-01-10T21:17:29Z","author_association":"CONTRIBUTOR","body":"Closing this - it doesn't consistently work. Looking at other solutions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1377873105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378823219","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1378823219","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1378823219,"node_id":"IC_kwDOACaFSM5SLywz","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T14:18:42Z","updated_at":"2023-01-11T14:18:42Z","author_association":"CONTRIBUTOR","body":"Focusing on 1.10.2, the problem seems to come from the Retry logic used. \r\nhttps://github.com/apache/accumulo/blob/1.10/server/master/src/main/java/org/apache/accumulo/master/Master.java#L1516 \r\n\r\nIf `tserverRetry` has retries available, then it will always return true.\r\n`tserverRetry` was created with infinite retries, so this logic will always return true and the timeout is never reached.\r\nhttps://github.com/apache/accumulo/blob/1.10/server/master/src/main/java/org/apache/accumulo/master/Master.java#L1507","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378823219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378830258","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1378830258","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1378830258,"node_id":"IC_kwDOACaFSM5SL0ey","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T14:24:00Z","updated_at":"2023-01-11T14:24:00Z","author_association":"CONTRIBUTOR","body":"I wanted to play around with the Retry object, so I staged a fix that replaces the `infiniteRetries()` with `maxRetries()` and calculated the value based on the max number of attempts that could be completed in the set interval. \r\n\r\nhttps://github.com/ddanielr/accumulo/pull/5/files#diff-56945d7261689b2323a668699ab5865a1e48ec8424b0d612091d29ae0f2fc67cR1513\r\n\r\nThis technically works, but it's not an exact match to the expected timeout interval that is set in the property. \r\n\r\nSo, should a retry object be used for this operation? Or would a simple timeout loop be better suited?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378830258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378919458","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1378919458","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1378919458,"node_id":"IC_kwDOACaFSM5SMKQi","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T15:15:08Z","updated_at":"2023-01-11T15:15:08Z","author_association":"CONTRIBUTOR","body":"Maybe a loop here would be better to handle multiple conditions.  I think that the loop would need to support:\r\n\r\n- allow for infinite reties\r\n- be able to ignore / disable # tservers barrier\r\n- print progress, wait conditions periodically, independent of the wait time.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1378919458/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379184755","html_url":"https://github.com/apache/accumulo/issues/3153#issuecomment-1379184755","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3153","id":1379184755,"node_id":"IC_kwDOACaFSM5SNLBz","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T17:05:40Z","updated_at":"2023-01-11T17:05:40Z","author_association":"CONTRIBUTOR","body":"I'm going to go ahead and make any changes for this in a separate PR from #3134 based on the concerns I have with the timeout changing and that it is out of scope of the bug fix for the buffer size.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379184755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379188248","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1379188248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1379188248,"node_id":"IC_kwDOACaFSM5SNL4Y","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T17:07:04Z","updated_at":"2023-01-11T17:07:04Z","author_association":"CONTRIBUTOR","body":"I'm going to go ahead and merge this and leave the RPC timeout issue (#3153) to investigate and can be a follow on PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379188248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379196440","html_url":"https://github.com/apache/accumulo/issues/3094#issuecomment-1379196440","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3094","id":1379196440,"node_id":"IC_kwDOACaFSM5SNN4Y","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T17:11:15Z","updated_at":"2023-01-11T17:11:15Z","author_association":"CONTRIBUTOR","body":"#3134 is now merged but I assume we may want to leave this open? This issue was reported against 1.10 and not 2.1 and the bug I fixed only applies to newer thrift versions which 1.10 does not use.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379196440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379232124","html_url":"https://github.com/apache/accumulo/issues/608#issuecomment-1379232124","issue_url":"https://api.github.com/repos/apache/accumulo/issues/608","id":1379232124,"node_id":"IC_kwDOACaFSM5SNWl8","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T17:25:37Z","updated_at":"2023-01-11T17:25:37Z","author_association":"CONTRIBUTOR","body":"I am re-opening this as the problem here may still be happening and needs to be investigated. There are some related/duplicate issues for this as well: #1916, #2322, #2792, and #2293","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1379232124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382332262","html_url":"https://github.com/apache/accumulo/pull/3160#issuecomment-1382332262","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3160","id":1382332262,"node_id":"IC_kwDOACaFSM5SZLdm","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T20:04:24Z","updated_at":"2023-01-13T20:04:24Z","author_association":"CONTRIBUTOR","body":"Pushed this as a draft for comments - still want to double check for unnecessary tests and code that may no longer be references, but this does remove most of the previous upgrade code as is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382332262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382535125","html_url":"https://github.com/apache/accumulo/issues/3162#issuecomment-1382535125","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3162","id":1382535125,"node_id":"IC_kwDOACaFSM5SZ8_V","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T22:47:32Z","updated_at":"2023-01-13T22:47:32Z","author_association":"CONTRIBUTOR","body":"@keith-turner - can you take a look at this question when you have a minute?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382535125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382577141","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1382577141","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1382577141,"node_id":"IC_kwDOACaFSM5SaHP1","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T23:17:14Z","updated_at":"2023-01-13T23:17:33Z","author_association":"CONTRIBUTOR","body":"You mentioned the expected behavior is the start up process continues on if the max timeout is hit but I'm wondering what the correct behavior is. Obviously we don't want to spin in a loop forever but I would think intuitively that if the min number of servers isn't reached by the timeout that would be a fatal error and we would should stop the process and not continue on but shutdown.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382577141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382583228","html_url":"https://github.com/apache/accumulo/pull/3136#issuecomment-1382583228","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3136","id":1382583228,"node_id":"IC_kwDOACaFSM5SaIu8","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-13T23:30:55Z","updated_at":"2023-01-13T23:30:55Z","author_association":"CONTRIBUTOR","body":"I started taking a peak at this again and I should hopefully have time to update with the changes requested this upcoming week at some point.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382583228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382615644","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1382615644","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1382615644,"node_id":"IC_kwDOACaFSM5SaQpc","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-14T00:58:09Z","updated_at":"2023-01-14T00:58:09Z","author_association":"CONTRIBUTOR","body":"@cshannon  The max timeout behavior you suggested makes sense, but I'm cautious about inversely changing the behavior of a property.\r\n\r\nThe is the current definition of the property behavior. \r\nhttps://github.com/apache/accumulo/blob/fbe1ee8cfc98f788329208419d682429c90784c2/core/src/main/java/org/apache/accumulo/core/conf/Property.java#L346-L349 \r\n\r\nWould it make sense to have two sets of these properties? \r\nOne for the critical path, the other as a churn/balancing safeguard for startup?\r\n\r\nThe timeout logic you are suggesting could be rolled into the new \"critical\" property and we wouldn't flip existing/expected property behavior. \r\n\r\nIf not reached, startup will be terminated (timeout).\r\n`manager.startup.tserver.critical.min.count`\r\n`manager.startup.tserver.critical.timeout`\r\n\r\nif not reached, startup will be delayed, not terminated (wait time).\r\n`manager.startup.tserver.avail.min.count`\r\n`master.startup.tserver.avail.max.wait=5min`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382615644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382618383","html_url":"https://github.com/apache/accumulo/pull/3146#issuecomment-1382618383","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3146","id":1382618383,"node_id":"IC_kwDOACaFSM5SaRUP","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-14T01:06:27Z","updated_at":"2023-01-14T01:06:27Z","author_association":"CONTRIBUTOR","body":"> Ideally we'd validate property values on the server side, and reject the RPC request (and propagate the error through the public API call), when validation fails.\r\n\r\nYep, I'm working on that now. I think it's also valuable to have the shell perform validation and not issue the RPC request in the first place.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382618383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382955004","html_url":"https://github.com/apache/accumulo/issues/3162#issuecomment-1382955004","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3162","id":1382955004,"node_id":"IC_kwDOACaFSM5Sbjf8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-14T22:55:39Z","updated_at":"2023-01-14T22:55:39Z","author_association":"CONTRIBUTOR","body":"@FineAndDandy  when an iterator seeks forward in the same block there is an optimization for that [here in RFile](https://github.com/apache/accumulo/blob/5c870af5015b3dfd8d3db3d5fc56d58d7c2584c0/core/src/main/java/org/apache/accumulo/core/file/rfile/RFile.java#L975).   So for the following situation \r\n\r\n * KeyA, KeyB,KeyC,KeyD exist in the same RFile block \r\n * KeyA<KeyB<KeyC<KeyD \r\n * We are currently positioned at KeyB\r\n\r\nif we seek to KeyD then it should skip from KeyB until it gets to KeyD w/o having to start at the beginning of the RFile block.\r\n\r\nThere is also another optimization for when an RFile block is in cache and is being repeatedly seeked to different locations, the code will start to build a little index for the data block.  The more its seeked the more entries are added to the index related to the cached block.  The code is [here in RFile](https://github.com/apache/accumulo/blob/5c870af5015b3dfd8d3db3d5fc56d58d7c2584c0/core/src/main/java/org/apache/accumulo/core/file/rfile/RFile.java#L1051-L1072)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1382955004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1383010289","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1383010289","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1383010289,"node_id":"IC_kwDOACaFSM5Sbw_x","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-15T01:05:05Z","updated_at":"2023-01-15T01:05:05Z","author_association":"CONTRIBUTOR","body":"On a VM I spun up [this test](https://gist.github.com/keith-turner/f2159111b025e600a6e0abbaba1d92f3) with the changes in this PR and the changes from #3144.  Going to let that run for a bit and look at merging in the tests from #3091.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1383010289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1383317761","html_url":"https://github.com/apache/accumulo/pull/3143#issuecomment-1383317761","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3143","id":1383317761,"node_id":"IC_kwDOACaFSM5Sc8EB","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-16T01:05:18Z","updated_at":"2023-01-16T01:05:18Z","author_association":"CONTRIBUTOR","body":"While running the test mentioned earlier, duplicate data was seen.  Seems to be related to splits.  Have seen it happen twice.  Investigating, not sure if its unique to this PR or a pre-exsiting problem.\r\n\r\nSaw the following in the process that continually scans.\r\n\r\n```\r\n2023-01-15T07:38:15,249\r\nThread 'WriteRead' died.\r\njava.lang.RuntimeException: duplicate seen 236020\r\n        at WriteRead.validate(WriteRead.java:104)\r\n        at WriteRead.run(WriteRead.java:78)\r\n        at WriteRead.main(WriteRead.java:44)\r\n\r\n```\r\n\r\nA bit earlier saw this in the process that does table operations.\r\n\r\n```\r\n2023-01-15T07:36:50,882 Added splits : [000236019]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1383317761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1384354871","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1384354871","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1384354871,"node_id":"IC_kwDOACaFSM5Sg5Q3","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-16T17:20:55Z","updated_at":"2023-01-16T17:20:55Z","author_association":"CONTRIBUTOR","body":"@cshannon It really depends on the goal of the property. I don't think the intended purpose is to fully block accumulo from starting up. Accumulo should be able to run even if some Tservers fail to start or take a prolonged time. Delaying start-up seems to be more intended to stop unnecessary balancing if some tservers start up quicker than others. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1384354871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385363562","html_url":"https://github.com/apache/accumulo/pull/3150#issuecomment-1385363562","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3150","id":1385363562,"node_id":"IC_kwDOACaFSM5Skvhq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T12:39:04Z","updated_at":"2023-01-17T12:39:04Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I don't see the patch you mentioned. Is this good to merge without the patch?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385363562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385433758","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385433758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385433758,"node_id":"IC_kwDOACaFSM5SlAqe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T13:35:37Z","updated_at":"2023-01-17T13:35:37Z","author_association":"CONTRIBUTOR","body":"IIRC this was added so that the Manager would wait until some number of tservers were running before balancing tablets. This shortens the overall balancing timeline because if you start balancing immediately, then you end up re-balancing tablets that were already assigned to tablet servers as more and more tablet servers start up. I believe it should be the case that if you hit the timeout, then balancing should begin.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385433758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385452367","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385452367","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385452367,"node_id":"IC_kwDOACaFSM5SlFNP","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T13:49:28Z","updated_at":"2023-01-17T13:49:28Z","author_association":"CONTRIBUTOR","body":"Did you look at the changes proposed in https://github.com/apache/accumulo/pull/2827?  With the current version there can be a synchronization issue and with a quick look I didn't see you change the initialization.  I'm going to pull this down to look in more detail, but maybe you already addressed it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385452367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385476910","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385476910","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385476910,"node_id":"IC_kwDOACaFSM5SlLMu","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:05:16Z","updated_at":"2023-01-17T14:05:16Z","author_association":"CONTRIBUTOR","body":"I didn't look at #2827 in the context of these changes. I'll review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385476910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385517153","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385517153","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385517153,"node_id":"IC_kwDOACaFSM5SlVBh","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:32:18Z","updated_at":"2023-01-17T14:32:18Z","author_association":"CONTRIBUTOR","body":"Some of this conversation was covered in #3157.  The specific use case the initial change was to provide a guarantee that some number of tservers were up and available to handle tablet assignments on start-up.  Assume that you are using something like pssh and it is working through a list of servers to start the tservers - it does not get very far through the list before the manager starts flooding the first few tservers that have checked in with the entire cluster assignments - and then that takes a long while to rebalance.\r\n\r\nThe comments in this thread show the conflicting opinions on how this should be used:\r\n\r\n- wait forever until n are available (current behavior).\r\n- wait for t until n are available - fail if n is not reached if t is exceeded.\r\n- wait for t until n are available - if t reached, go with what you have.\r\n\r\nNone of these are \"incorrect\" and depended on user expectations.\r\n\r\nThe core issue is that if the manager is started first, then almost all tablets are assigned to the first few tservers that register.  First root, then metadata, then everything else... So when the manager starts, as soon as it sees the first tserver register, the root and metadata table tablets get assigned there - then it starts assigning everything else - maybe a few tservers have come on line - but likely not nearly the number expected and not enough to handle the assignments quickly. \r\n\r\nIf I set a small number, say 10% of total expected servers then my expectations on continuing are going to different than if I choose 99%.  With 10% I have set a bar that accepts that rebalancing may occur, but there are enough tservers to handle those assignments.  With 99% I am likely trying to minimize any rebalencing and even if I reach 98% after a reasonable amount of time then I accept proceeding.\r\n\r\nThe original intent was more towards the 10% case - guarantee that there is a minimum number of tservers present.\r\n\r\nThe issue raised in #3157 expected behavior more like the 99% case.\r\n\r\nAnother factor may be the ability to recover / reset.  If the timeout is infinite or fails and n is not reached, the assignments never start - you could change n in ZooKeeper, or change the property value and restart the master.  If the assignments ignore n and start after t - then you basically need to accept the situation and wait.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385517153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385525094","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385525094","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385525094,"node_id":"IC_kwDOACaFSM5SlW9m","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:38:06Z","updated_at":"2023-01-17T14:38:06Z","author_association":"CONTRIBUTOR","body":"`wait for t until n are available - fail if n is not reached if t is exceeded.`\r\n\r\nThis is incorrect based on the current wording of the properties.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385525094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385535750","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385535750","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385535750,"node_id":"IC_kwDOACaFSM5SlZkG","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:44:15Z","updated_at":"2023-01-17T14:44:15Z","author_association":"CONTRIBUTOR","body":"```wait for t until n are available - fail if n is not reached if t is exceeded.```\r\n\r\nIs my interpretation of what @cshannon  was proposing in an earlier comment.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385535750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385542227","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385542227","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385542227,"node_id":"IC_kwDOACaFSM5SlbJT","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:48:55Z","updated_at":"2023-01-17T14:48:55Z","author_association":"CONTRIBUTOR","body":"ah, ok. We could add a new property to support that case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385542227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385544689","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1385544689","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1385544689,"node_id":"IC_kwDOACaFSM5Slbvx","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T14:50:38Z","updated_at":"2023-01-17T14:54:03Z","author_association":"CONTRIBUTOR","body":"Any of the options are valid - we just need to decide which one meets most needs and then document that.  I lean towards the wait forever or fail because they allow recovery with minimal disruption.\r\n\r\nCluster management is not within our scope - and I feel we should be providing guidance and guard rails and not necessary providing an \"optimal solution\" in this case because different users will have different needs / tolerances that are contradictory -  If we satisfy A then B is going to unhappy and visa-versa. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385544689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385578289","html_url":"https://github.com/apache/accumulo/issues/3162#issuecomment-1385578289","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3162","id":1385578289,"node_id":"IC_kwDOACaFSM5Slj8x","user":{"login":"FineAndDandy","id":7751180,"node_id":"MDQ6VXNlcjc3NTExODA=","avatar_url":"https://avatars.githubusercontent.com/u/7751180?v=4","gravatar_id":"","url":"https://api.github.com/users/FineAndDandy","html_url":"https://github.com/FineAndDandy","followers_url":"https://api.github.com/users/FineAndDandy/followers","following_url":"https://api.github.com/users/FineAndDandy/following{/other_user}","gists_url":"https://api.github.com/users/FineAndDandy/gists{/gist_id}","starred_url":"https://api.github.com/users/FineAndDandy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FineAndDandy/subscriptions","organizations_url":"https://api.github.com/users/FineAndDandy/orgs","repos_url":"https://api.github.com/users/FineAndDandy/repos","events_url":"https://api.github.com/users/FineAndDandy/events{/privacy}","received_events_url":"https://api.github.com/users/FineAndDandy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T15:12:34Z","updated_at":"2023-01-17T15:12:34Z","author_association":"CONTRIBUTOR","body":"extremely helpful response @keith-turner Thank you!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385578289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385613943","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385613943","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385613943,"node_id":"IC_kwDOACaFSM5Slsp3","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T15:36:17Z","updated_at":"2023-01-17T15:36:17Z","author_association":"CONTRIBUTOR","body":"> I didn't look at https://github.com/apache/accumulo/pull/2827 in the context of these changes. I'll review.\r\n\r\nI didn't really change GarbageCollectionLogger too much. I didn't remove the lock, so if that's the synchronization issue you are referring to, then I believe it's not an issue. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385613943/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385637345","html_url":"https://github.com/apache/accumulo/pull/3150#issuecomment-1385637345","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3150","id":1385637345,"node_id":"IC_kwDOACaFSM5SlyXh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T15:53:19Z","updated_at":"2023-01-17T15:53:19Z","author_association":"CONTRIBUTOR","body":"> @keith-turner - I don't see the patch you mentioned. Is this good to merge without the patch?\r\n\r\nI had initially posted a patch, but then found some bugs and deleted the patch in the comment (but it seems I left the mention of it).  I pushed updates based on the bugs I found to [this branch](https://github.com/keith-turner/accumulo/tree/3144-scan-server-failures) that I mentioned earlier.  I think it would be good to merge those changes in.  With those changes I was no longer seeing this bug in testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385637345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385760975","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385760975","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385760975,"node_id":"IC_kwDOACaFSM5SmQjP","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T17:16:47Z","updated_at":"2023-01-17T17:16:47Z","author_association":"CONTRIBUTOR","body":"@dlmarion - I do not understand your response.  The previous GC code gets flagged by findbugs at the next compliance level above the level that we currently run.  The code change that I proposed fixed that warning.  I don't think you changed the instantiation code from the original - so I think that your code will also have the same warning / issue.  If you took my initialization and moved the GC instantiation into the context I think it would resolve the findbugs warning / potential synchronization issue.  Because you also renamed the GC, most of my PR is OBE, but the initialization change should still be valid. Or maybe another approach?  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385760975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385765551","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385765551","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385765551,"node_id":"IC_kwDOACaFSM5SmRqv","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T17:20:14Z","updated_at":"2023-01-17T17:20:14Z","author_association":"CONTRIBUTOR","body":"I didn't understand your comment about there being a synchronization issue. I think I was missing that `The ... code gets flagged by findbugs at the next compliance level above the level that we currently run.`. My PR does not address the findbugs issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385765551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385770259","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385770259","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385770259,"node_id":"IC_kwDOACaFSM5SmS0T","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T17:23:57Z","updated_at":"2023-01-17T17:23:57Z","author_association":"CONTRIBUTOR","body":"I will bump the compliance level on this branch and see what happens","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385770259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385770441","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385770441","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385770441,"node_id":"IC_kwDOACaFSM5SmS3J","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T17:24:06Z","updated_at":"2023-01-17T17:24:06Z","author_association":"CONTRIBUTOR","body":"My point is you are changing the same code.  Your code is an opportunity to correct the issue now rather than as a follow-on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385770441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385792821","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385792821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385792821,"node_id":"IC_kwDOACaFSM5SmYU1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T17:42:13Z","updated_at":"2023-01-17T17:42:13Z","author_association":"CONTRIBUTOR","body":"Yep, I'm with you. I'll bump the compliance level on this branch and see what happens.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385792821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385959669","html_url":"https://github.com/apache/accumulo/pull/3161#issuecomment-1385959669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3161","id":1385959669,"node_id":"IC_kwDOACaFSM5SnBD1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-17T19:46:11Z","updated_at":"2023-01-17T19:46:11Z","author_association":"CONTRIBUTOR","body":"Bumping the maxRank for FindBugs caused the build to fail in core, way before it reached the server code where the GarbageCollectionLogger code was. So, I removed the `static` modifiers from the code in the hopes that that was enough to prevent the `SSD_DO_NOT_USE_INSTANCE_LOCK_ON_SHARED_STATIC_DATA` error that you saw. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1385959669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386265815","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1386265815","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1386265815,"node_id":"IC_kwDOACaFSM5SoLzX","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T00:08:25Z","updated_at":"2023-01-18T00:08:25Z","author_association":"MEMBER","body":"@cshannon This merge caused TServerUtilsTest to start failing. It looks like it might be an easy fix, but I haven't looked at it too closely yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386265815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386270436","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1386270436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1386270436,"node_id":"IC_kwDOACaFSM5SoM7k","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T00:13:49Z","updated_at":"2023-01-18T00:13:49Z","author_association":"CONTRIBUTOR","body":"I agree with @EdColeman that it's really up for interpretation as to what the property means and my comment was mostly pointing out that as someone who isn't too familiar with those properties it looked to me at first glance like it might make sense for the system to fail and halt if the minimum servers are not met in the time frame. But if that's not the intent then that is fine as long as things are well documented.\r\n\r\nIf the intent is to not stop and to continue then maybe we should add another property as @dlmarion  mentioned. I think the halting case is still valid (someone may want to shut down and not continue starting the cluster if the mininum number of servers doesn't come online as there could be a larger issue) so I think it is worthwhile to add but could be done as another Issue/PR of course.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386270436/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386291739","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1386291739","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1386291739,"node_id":"IC_kwDOACaFSM5SoSIb","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T00:38:15Z","updated_at":"2023-01-18T00:38:15Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - Odd, when I looked at the output in CI the errors made me immediately think it was environmental because it had to do with things like expected port numbers being wrong. Sure enough I just ran the test against both 2.1 and main branches in IntelliJ and on the command line using maven and the test passes for me. I even configured InteillJ to run the test in a loop 100 times and it didn't break. So I'm not sure what is up but I can try and take a closer look tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386291739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386305494","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1386305494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1386305494,"node_id":"IC_kwDOACaFSM5SoVfW","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T00:56:07Z","updated_at":"2023-01-18T00:56:07Z","author_association":"MEMBER","body":"> @ctubbsii - Odd, when I looked at the output in CI the errors made me immediately think it was environmental because it had to do with things like expected port numbers being wrong.\n\nIt could just be a coincidence then, perhaps related to a change in my build environment due to a system update. I can also investigate further.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386305494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386345190","html_url":"https://github.com/apache/accumulo/issues/3159#issuecomment-1386345190","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3159","id":1386345190,"node_id":"IC_kwDOACaFSM5SofLm","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T01:43:14Z","updated_at":"2023-01-18T01:43:14Z","author_association":"CONTRIBUTOR","body":"I agree with @cshannon that the halting behavior is a valid desire, just not for the original properties. \r\nA kubernetes deployment of accumulo would benefit from having the \"critical.min.count\" and \"wait and fail\" behavior properties available to use for defining startup and readiness probes.\r\n\r\n@EdColeman I don't see this as making any decisions about cluster management since these properties are all optional. \r\nIf we were to set them to required values then I could see that being a decision and carrying backlash. \r\n\r\n---\r\n\r\nBased on the discussion so far, it sounds like fixing the original timeout logic to be  \"Wait and Continue\" is the correct move. \r\n\r\nAdding a second set of properties for \"critical.min.count\" and \"wait and fail\" behavior is a valid requirement and makes sense to add. However, that work should be completed in a separate ticket. \r\n\r\nIf that sounds good, I'll work on this timeout fix and make the additional ticket for implementing the second optional property set.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386345190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386702639","html_url":"https://github.com/apache/accumulo/pull/3134#issuecomment-1386702639","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3134","id":1386702639,"node_id":"IC_kwDOACaFSM5Sp2cv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-18T08:58:10Z","updated_at":"2023-01-18T08:58:10Z","author_association":"MEMBER","body":"Odd. I can't reproduce this locally. Never mind, then. If I see it again, I'll consider opening a new ticket.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1386702639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]