[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516632712","html_url":"https://github.com/apache/couchdb/issues/1133#issuecomment-516632712","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1133","id":516632712,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYzMjcxMg==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:23:51Z","updated_at":"2019-07-30T23:23:51Z","author_association":"NONE","body":"I'm not sure if this is the correct place to request help on CouchDB2.0. We have a server that replicates several dbases to other servers. It appears that one of the dbases that has attachments, doesn't replicate and the error log doesn't help: Here's what I see on the target server:\r\n[notice] 2019-07-30T21:59:32.046000Z couchdb@localhost <0.4194.1> f44aa67d54 targetServer:5984 10.57.170.117 undefined PUT /lists/sites%2Fhotel%2Ffoodandbeverage.southern-europe.249.json?new_edits=false 500 ok 24\r\n[error] 2019-07-30T21:59:32.059000Z couchdb@localhost <0.4209.1> ecbb156525 req_err(3685245358) badmatch : ok\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516632712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516633152","html_url":"https://github.com/apache/couchdb/issues/1133#issuecomment-516633152","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1133","id":516633152,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjYzMzE1Mg==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-30T23:26:01Z","updated_at":"2019-07-30T23:26:01Z","author_association":"NONE","body":"Can you help me with this issue?\r\nI'm not sure if this is the correct place to request help on CouchDB2.0. We have a server that replicates several dbases to other servers. It appears that one of the dbases that has attachments, doesn't replicate and the error log doesn't help: Here's what I see on the target server:\r\n[notice] 2019-07-30T21:59:32.046000Z couchdb@localhost <0.4194.1> f44aa67d54 targetServer:5984 10.57.170.117 undefined PUT /lists/sites%2Fhotel%2Ffoodandbeverage.southern-europe.249.json?new_edits=false 500 ok 24\r\n[error] 2019-07-30T21:59:32.059000Z couchdb@localhost <0.4209.1> ecbb156525 req_err(3685245358) badmatch : ok","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516633152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516692472","html_url":"https://github.com/apache/couchdb/issues/1133#issuecomment-516692472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1133","id":516692472,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNjY5MjQ3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-31T04:40:50Z","updated_at":"2019-07-31T04:40:50Z","author_association":"MEMBER","body":"@rvaldepenas Please don't hijack this issue - you can create a new one, but better yet:\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/516692472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517331532","html_url":"https://github.com/apache/couchdb/issues/1133#issuecomment-517331532","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1133","id":517331532,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzMzMTUzMg==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T15:15:03Z","updated_at":"2019-08-01T16:14:34Z","author_association":"NONE","body":"Thank you.\r\nI don’t think I see instructions on how to sign up for posting questions on CouchDB from the “here” link sent to me below.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517331532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517356099","html_url":"https://github.com/apache/couchdb/issues/1133#issuecomment-517356099","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1133","id":517356099,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzM1NjA5OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T16:14:21Z","updated_at":"2019-08-01T16:14:21Z","author_association":"MEMBER","body":"Click the \"Subscribe\" list next to \"User List\" and subscribe to the list. Then you can email to it with your question.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517356099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517369105","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-517369105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":517369105,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzM2OTEwNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T16:48:46Z","updated_at":"2019-08-01T16:48:46Z","author_association":"CONTRIBUTOR","body":"`req_timedout` could be coming from ibrowse http client (which http potion uses underneath). I think the timeout there is set to 5 seconds. Any request longer than 5 seconds would fail like that. \r\n\r\nI am not sure how easy it is to update the timeout and try again. O perhaps add more resources, like a faster disk or more CPU and try again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517369105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517375481","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-517375481","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":517375481,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzM3NTQ4MQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T17:06:26Z","updated_at":"2019-08-01T17:06:26Z","author_association":"CONTRIBUTOR","body":"@nickva thanks for the response, any particular file I should be looking at to increase the timeout to say 10 seconds or so?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517375481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517396663","html_url":"https://github.com/apache/couchdb/issues/1741#issuecomment-517396663","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1741","id":517396663,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzM5NjY2Mw==","user":{"login":"alessandroingargiola","id":51510369,"node_id":"MDQ6VXNlcjUxNTEwMzY5","avatar_url":"https://avatars.githubusercontent.com/u/51510369?v=4","gravatar_id":"","url":"https://api.github.com/users/alessandroingargiola","html_url":"https://github.com/alessandroingargiola","followers_url":"https://api.github.com/users/alessandroingargiola/followers","following_url":"https://api.github.com/users/alessandroingargiola/following{/other_user}","gists_url":"https://api.github.com/users/alessandroingargiola/gists{/gist_id}","starred_url":"https://api.github.com/users/alessandroingargiola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alessandroingargiola/subscriptions","organizations_url":"https://api.github.com/users/alessandroingargiola/orgs","repos_url":"https://api.github.com/users/alessandroingargiola/repos","events_url":"https://api.github.com/users/alessandroingargiola/events{/privacy}","received_events_url":"https://api.github.com/users/alessandroingargiola/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T18:04:40Z","updated_at":"2019-08-01T18:04:40Z","author_association":"NONE","body":"This problem happens to me everytime after deleting a peruser user from _users table, whether I delete it from fauxton UI or by CURL command.\r\n\r\ncouchdb.log files writes a new row like this every 5 seconds:\r\n[error] 2019-08-01T18:02:25.247630Z couchdb@127.0.0.1 <0.391.0> -------- Supervisor couch_peruser_sup had child couch_peruser started with couch_peruser:start_link() at <0.14430.1> exit with reason normal in context child_terminated\r\n\r\nThe only way I've found to stop it is to reinstall couchdb.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517396663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517402436","html_url":"https://github.com/apache/couchdb/pull/2090#issuecomment-517402436","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2090","id":517402436,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQwMjQzNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T18:20:48Z","updated_at":"2019-08-01T18:20:48Z","author_association":"CONTRIBUTOR","body":"Got at +1 from @wohali on IRC\r\n\r\n```\r\n14:19 <+Wohali> +1\r\n14:20 ¯\\_(ツ)_/¯\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517402436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517419202","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-517419202","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":517419202,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzQxOTIwMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-01T19:10:06Z","updated_at":"2019-08-01T19:10:06Z","author_association":"CONTRIBUTOR","body":"@sarveshtamba hmm, not sure but try changing this value:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/test/elixir/lib/couch.ex#L182\r\n\r\nMake it `10000` and see if it works better. If it does, we could just bump the default\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517419202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517762338","html_url":"https://github.com/apache/couchdb/issues/2093#issuecomment-517762338","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2093","id":517762338,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc2MjMzOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T16:22:35Z","updated_at":"2019-08-02T16:22:35Z","author_association":"MEMBER","body":"Editing title to make the request clearer","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517762338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517780303","html_url":"https://github.com/apache/couchdb/pull/2094#issuecomment-517780303","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2094","id":517780303,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc4MDMwMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T17:18:37Z","updated_at":"2019-08-02T17:18:37Z","author_association":"MEMBER","body":"![786CAE2A-9C3B-4F49-B00D-DC6068A16102](https://user-images.githubusercontent.com/11321/62387140-20979580-b55a-11e9-8138-8d8acefcf968.png)\r\n![54A1D16E-E689-4377-BE23-5BB0C805B5B0](https://user-images.githubusercontent.com/11321/62387142-20979580-b55a-11e9-896c-8eca748d252f.png)\r\n\r\nPromising improvements from a commit ago. This isn't exactly scientific because variability in Travis, but still worth a shot\r\n\r\nIf someone is up for tag teaming on checking whether the elixir tests vmcapure everything we added skips for, I'd be grateful. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517780303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517780698","html_url":"https://github.com/apache/couchdb/pull/2094#issuecomment-517780698","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2094","id":517780698,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzc4MDY5OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T17:20:03Z","updated_at":"2019-08-02T17:20:03Z","author_association":"MEMBER","body":"I just remembered we had tracked progress here, so that speeds things up quite a bit. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517780698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517803186","html_url":"https://github.com/apache/couchdb/issues/2093#issuecomment-517803186","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2093","id":517803186,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzgwMzE4Ng==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T18:35:07Z","updated_at":"2019-08-02T18:35:07Z","author_association":"NONE","body":"Forget it. i am no longer support CouchDB. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517803186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517825270","html_url":"https://github.com/apache/couchdb/issues/2093#issuecomment-517825270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2093","id":517825270,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzgyNTI3MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T19:54:36Z","updated_at":"2019-08-02T19:54:36Z","author_association":"MEMBER","body":"Your title \"bulk update\" isn't specific enough. Feel free to make it even more specific.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517825270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517857001","html_url":"https://github.com/apache/couchdb/issues/2093#issuecomment-517857001","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2093","id":517857001,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzg1NzAwMQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-02T22:03:05Z","updated_at":"2019-08-02T22:03:05Z","author_association":"MEMBER","body":"Regardless of the title (which could have been clarified amicably if all participants had remained civil), we are deprecating the `_update` endpoint for removal in a future release, and would not accept your forthcoming Pull Request to extend its functionality. The idea itself is sound otherwise, but it's not the direction we are taking CouchDB.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517857001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517995196","html_url":"https://github.com/apache/couchdb/issues/2093#issuecomment-517995196","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2093","id":517995196,"node_id":"MDEyOklzc3VlQ29tbWVudDUxNzk5NTE5Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-04T11:25:29Z","updated_at":"2019-08-04T11:25:29Z","author_association":"MEMBER","body":"PMC Chair here, with a formal [CoC](http://couchdb.apache.org/conduct.html) violation notice.\r\n\r\nAfter this issue played out, OP went on twitter to insult, misgender, and misrepresent Joan’s affiliation.\r\n\r\nThis is a CoC violation on multiple levels:\r\n\r\n1. the personal insult, of whatever nature, is not behaviour we tolerate in the project. It doesn’t matter if this happens on our GitHub, Mailing Lists or anyone’s public Twitter. This is a clear and intentional transgression.\r\n\r\n2. the insult in particular is ableist, and as per our diversity statement, we are pointing out that this is language we don’t tolerate at the project.\r\n\r\n3. Joan’s been misgendered as a “he” is a clear sign of disrespect, again, not tolerated.\r\n\r\n4. OP in their tweets imply that Joan is “employed by CouchDB”. The CouchDB project does not employ anyone. While this does not constitute a CoC violation, I’m taking this space to set the record straight.\r\n\r\nAs an immediate result of this, I’m locking this issue and blocking OP from this organisation for the foreseeable future.\r\n\r\nFor any questions, please contact private@couchdb.apache.org.\r\n\r\n<details>\r\nhttps://mobile.twitter.com/novacisko/status/1157358919158763520\r\n![IMG_9836](https://user-images.githubusercontent.com/11321/62422795-55216380-b6b8-11e9-9af0-7e091a24877a.PNG)\r\n![IMG_9835](https://user-images.githubusercontent.com/11321/62422797-55216380-b6b8-11e9-9eb8-b5c56cfddf1f.PNG)\r\n![IMG_9834](https://user-images.githubusercontent.com/11321/62422798-55216380-b6b8-11e9-9e4b-cd4ab098ee1f.PNG)\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/517995196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518296150","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518296150","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518296150,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODI5NjE1MA==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T16:04:59Z","updated_at":"2019-08-05T16:04:59Z","author_association":"NONE","body":"This is one of the replication document we have for the second source server. There are only 2 replication documents. One is for replicating the \"lists\" dbase we are having issues with to the same dbase name on the target server. And this replication document which replicates the same \"lists\" dbase to a new \"lists2\" dbase on the target server.\r\n\r\n{\r\n  \"_id\": \"ENClists2\",\r\n  \"_rev\": \"14-70f4af541719bc00f23efbee74db4bbd\",\r\n  \"source\": \"http://localhost:5984/lists\",\r\n  \"target\": \"http://ENCefleet_svc_couch:TargetServerPassword@TargetServerNameAndDomain:5984/lists2\",\r\n  \"create_target\": true,\r\n  \"continuous\": true,\r\n  \"owner\": \"ENCefleet_svc_couch\",\r\n  \"_replication_state\": \"triggered\",\r\n  \"_replication_state_time\": \"2019-08-03T02:29:33-07:00\",\r\n  \"_replication_id\": \"94f17120dc281987c9770c9827715036\"\r\n}\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518296150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518355546","html_url":"https://github.com/apache/couchdb/issues/2078#issuecomment-518355546","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2078","id":518355546,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODM1NTU0Ng==","user":{"login":"chrisinmtown","id":10234212,"node_id":"MDQ6VXNlcjEwMjM0MjEy","avatar_url":"https://avatars.githubusercontent.com/u/10234212?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisinmtown","html_url":"https://github.com/chrisinmtown","followers_url":"https://api.github.com/users/chrisinmtown/followers","following_url":"https://api.github.com/users/chrisinmtown/following{/other_user}","gists_url":"https://api.github.com/users/chrisinmtown/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisinmtown/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisinmtown/subscriptions","organizations_url":"https://api.github.com/users/chrisinmtown/orgs","repos_url":"https://api.github.com/users/chrisinmtown/repos","events_url":"https://api.github.com/users/chrisinmtown/events{/privacy}","received_events_url":"https://api.github.com/users/chrisinmtown/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T18:54:49Z","updated_at":"2019-08-05T18:54:49Z","author_association":"NONE","body":"Maybe the person didn't find https://github.com/spring-projects/spring-data-couchdb but with that said, that project does not appear to be ready for use.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518355546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518437860","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518437860","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518437860,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQzNzg2MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T23:27:59Z","updated_at":"2019-08-05T23:27:59Z","author_association":"CONTRIBUTOR","body":"Thank you for your report, @rvaldepenas \r\n\r\nWhat version of CouchDB are you using?\r\n\r\nHere are some parameters to try to adjust:\r\n\r\nIf you suspect your documents, or attachments are rather large, try increasing\r\n```\r\n[httpd] max_httpd_request_size = <bytes>\r\n```\r\nIn a few previous CouchDB version that was set at 64Mb so if you have anything large (doc + attachment size) it might fail. In 2.3.x it is set to 4Gb so if your version is 2.3.x the default is hopefully ok.\r\n\r\nThe other limits are\r\n\r\n```\r\n[couchdb]\r\nmax_document_size = <bytes>\r\nmax_attachment_size = <bytes>\r\n```\r\n\r\nThough the defaults for those should be infinity by default. But you can try to increase them if you've already configured them.\r\n\r\nFor the fabric timeout error. Can try increasing\r\n```\r\n[fabric]\r\nrequest_timeout = <msec>\r\n```\r\nThe default is 60000 so can try to make it 120000 perhaps.\r\n\r\nThere are some replication parameters such as `worker_processes` and `connection_timeout` that might help as well.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518437860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518465639","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-518465639","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":518465639,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQ2NTYzOQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T01:58:41Z","updated_at":"2019-08-06T01:58:41Z","author_association":"MEMBER","body":"I had made that change in my \"fix all the CI timeouts\" WIP branch and it helped.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518465639/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518744194","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518744194","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518744194,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODc0NDE5NA==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T16:27:45Z","updated_at":"2019-08-06T16:27:45Z","author_association":"NONE","body":"Hi Nick,\r\nWe are using version 2.0\r\nI assume you want me to try these changes on both the source and target, correct?\r\nWe have max_document_size set to 250,000,000\r\nI don't see [CouchDB]max_attachment_size in Configuration. There is however an \"attachment_stream_buffer_size\" which we have set to 999600.\r\nOur CouchDB installation does not have a [fabric] section in Configuration.\r\nfor [replicator] connection_timeout we have it set to 480000 and\r\nfor [replicator] worker processes we have it set to 20.\r\n\r\nfrom the source CouchDB log, I see many of these errors. Can you tell me what they mean?\r\n[error] 2019-08-05T16:05:27.801000Z couchdb@localhost <0.13727.227> -------- Replicator, request PUT to \"http://ENCefleet_svc_couch:*****@TargetServerName:5984/lists/sites%2Fhotel%2Ffoodandbeverage.southern-europe.307.json?new_edits=false\" failed due to error {error,\r\n    {'EXIT',\r\n        {{{nocatch,{mp_parser_died,noproc}},\r\n          [{couch_att,'-foldl/4-fun-0-',3,\r\n               [{file,\"src/couch_att.erl\"},{line,591}]},\r\n           {couch_att,fold_streamed_data,4,\r\n               [{file,\"src/couch_att.erl\"},{line,642}]},\r\n           {couch_att,foldl,4,[{file,\"src/couch_att.erl\"},{line,595}]},\r\n           {couch_httpd_multipart,atts_to_mp,4,\r\n               [{file,\"src/couch_httpd_multipart.erl\"},{line,208}]}]},\r\n         {gen_server,call,\r\n             [<0.16126.227>,\r\n              {send_req,\r\n                  {{url,\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518744194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518750948","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-518750948","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":518750948,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODc1MDk0OA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T16:46:08Z","updated_at":"2019-08-06T16:46:08Z","author_association":"CONTRIBUTOR","body":"Hi @nickva , @kocolosk , thanks a lot for your response.\r\n\r\nI have set the timeouts at the following two places to 999_999_999(lower timeouts of 10000 from exisiting 5000 still caused some tests to fail, will try to figure the most optimum value after some more trials)\r\n\r\nhttps://github.com/apache/couchdb/blob/master/test/elixir/lib/couch.ex#L182\r\nhttps://github.com/apache/couchdb/blob/master/test/elixir/lib/couch/db_test.ex#L293\r\n\r\nRight now the elixir test suite is in progress and all the tests except couple below seem to pass, currently test is stuck at the following for quite sometime:-\r\n```\r\nCompactTest\r\n  * test compaction reduces size of deleted docs\r\n```\r\nThe failing tests are as below:-\r\n```\r\nReshardAllDocsTest\r\n  * test all_docs after splitting the same range on all nodes (15901.7ms)\r\n\r\n  1) test all_docs after splitting the same range on all nodes (ReshardAllDocsTest)\r\n     test/elixir/test/reshard_all_docs_test.exs:39\r\n     ** (RuntimeError) timed out after 10184 ms\r\n     code: |> Enum.each(fn id -> wait_job_completed(id) end)\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       (elixir) lib/enum.ex:769: Enum.\"-each/2-lists^foreach/1-0-\"/2\r\n       (elixir) lib/enum.ex:769: Enum.each/2\r\n       test/elixir/test/reshard_all_docs_test.exs:51: (test)\r\n\r\n  * test all_docs after splitting all shards on node1 (13961.3ms)\r\n\r\n  2) test all_docs after splitting all shards on node1 (ReshardAllDocsTest)\r\n     test/elixir/test/reshard_all_docs_test.exs:21\r\n     ** (RuntimeError) timed out after 10188 ms\r\n     code: wait_job_completed(jobid)\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/elixir/test/reshard_all_docs_test.exs:32: (test)\r\n```\r\n\r\nIs there anything that I should look out for?\r\n\r\nThanks once again! Appreciate it very much.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518750948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518815291","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518815291","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518815291,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODgxNTI5MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T19:43:38Z","updated_at":"2019-08-06T19:43:38Z","author_association":"CONTRIBUTOR","body":"I'd recommend trying the latest CouchDB version. We have fixed some of the `nocatch,{mp_parser_died,noproc` errors in point releases since 2.0. \r\n\r\nThe fabric settings could go on the target and source. If the section is not there, you can add it without any issues.\r\n\r\nTry decreasing the worker processes a bit. If you have any large docs or attachments those workers will concurrently try to write those to the target and it might overwhelm it.\r\n\r\nFor an up-to-date list of config option try looking at the default.ini config that comes with the installation.\r\n\r\nhttps://github.com/apache/couchdb/blob/master/rel/overlay/etc/default.ini#L43-L53\r\n\r\n> There is however an \"attachment_stream_buffer_size\" which we have set to 999600.\r\n\r\nI think that is too large. I would keep it at a default of 4K to start with.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518815291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518848895","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518848895","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518848895,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODg0ODg5NQ==","user":{"login":"rvaldepenas","id":53497958,"node_id":"MDQ6VXNlcjUzNDk3OTU4","avatar_url":"https://avatars.githubusercontent.com/u/53497958?v=4","gravatar_id":"","url":"https://api.github.com/users/rvaldepenas","html_url":"https://github.com/rvaldepenas","followers_url":"https://api.github.com/users/rvaldepenas/followers","following_url":"https://api.github.com/users/rvaldepenas/following{/other_user}","gists_url":"https://api.github.com/users/rvaldepenas/gists{/gist_id}","starred_url":"https://api.github.com/users/rvaldepenas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvaldepenas/subscriptions","organizations_url":"https://api.github.com/users/rvaldepenas/orgs","repos_url":"https://api.github.com/users/rvaldepenas/repos","events_url":"https://api.github.com/users/rvaldepenas/events{/privacy}","received_events_url":"https://api.github.com/users/rvaldepenas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-06T21:21:44Z","updated_at":"2019-08-06T21:21:44Z","author_association":"NONE","body":"Ok, I have just started a continuous replication from the second source server that I have setup which has CouchDB2.0 to another target server which has CouchDB2.3.1. This appears to be working as documents are being written. At the same time the \"continuous replication\" to the other target server, has not shown more than 6 documents written today. I did not make any of the changes from your last recommendation. Only because I wanted to see what happens when replicating between lower to higher version.\r\nThe goal being that we will upgrade both source and target servers to CouchDB2.2, and NOT 2.3.1. Even though the above target test server has CouchDB2.3.1.\r\nI would like to get your recommendation for the upgrade path. I was thinking that I would upgrade only 1 target server to CouchDB2.2. So then we would be replicating from CouchDB2.0 to CouchDB2.2, for only one server. If the replication works, then we would start upgrading the remaining target servers to CouchDB2.2, then finally we would upgrade our source server to CouchDB2.2. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518848895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518956702","html_url":"https://github.com/apache/couchdb/issues/2095#issuecomment-518956702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2095","id":518956702,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODk1NjcwMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T06:17:50Z","updated_at":"2019-08-07T06:17:50Z","author_association":"CONTRIBUTOR","body":"> I was thinking that I would upgrade only 1 target server to CouchDB2.2. So then we would be replicating from CouchDB2.0 to CouchDB2.2, for only one server. If the replication works, then we would start upgrading the remaining target servers to CouchDB2.2, then finally we would upgrade our source server to CouchDB2.2. What do you think?\r\n\r\nThat sounds reasonable. I think 2.2 has most of the major fixes to replication since 2.0, especially related to large docs and attachments.\r\n\r\nAnother thing to think about when replicating docs or attachments that may exceed max {http request size | doc size |  attachment size} limits is that documents that are too large won't be written to the target but the replication will nevertheless continue. You'l have an indication of this in the `\"doc_write_failures\": ...` counter in the `_active_tasks` output or the completion stats in the document, for a non-continuous replication. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518956702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518990920","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-518990920","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":518990920,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODk5MDkyMA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T08:11:29Z","updated_at":"2019-08-07T08:11:29Z","author_association":"CONTRIBUTOR","body":"After the long timeout, the following test finally fails as below:-\r\n```\r\nCompactTest\r\n  * test compaction reduces size of deleted docs (1017513.1ms)\r\n\r\n  1) test compaction reduces size of deleted docs (CompactTest)\r\n     test/elixir/test/compact_test.exs:17\r\n     ** (RuntimeError) timed out after 1000053 ms\r\n     code: retry_until(fn ->\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/elixir/test/compact_test.exs:38: (test)\r\n```\r\n\r\nThis is the only test failure that I am seeing right now, and all the other tests pass successfully.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/518990920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519183154","html_url":"https://github.com/apache/couchdb/issues/2100#issuecomment-519183154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2100","id":519183154,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTE4MzE1NA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T16:59:04Z","updated_at":"2019-08-07T16:59:04Z","author_association":"NONE","body":"I can do it by adding custom readiness script and jq utility to docker image.\r\nBut think this useful feature for  project and community.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519183154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519188396","html_url":"https://github.com/apache/couchdb/issues/2100#issuecomment-519188396","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2100","id":519188396,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTE4ODM5Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T17:12:57Z","updated_at":"2019-08-07T17:12:57Z","author_association":"MEMBER","body":"I know it isn't what you're asking for, but: have you seen the Helm chart written by @kocolosk that includes the sidecar for this purpose?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519188396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519191445","html_url":"https://github.com/apache/couchdb/issues/2100#issuecomment-519191445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2100","id":519191445,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTE5MTQ0NQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T17:21:06Z","updated_at":"2019-08-07T17:21:06Z","author_association":"MEMBER","body":"Actually, if you use the seedlist functionality implemented in #1658 then `/_up` turns into a readiness probe; i.e., it will return 404 until the internal system databases are replicated to the new Pod and then will flip to 200 indicating its ready to handle requests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519191445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519212606","html_url":"https://github.com/apache/couchdb/pull/2098#issuecomment-519212606","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2098","id":519212606,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTIxMjYwNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T18:18:20Z","updated_at":"2019-08-07T18:20:37Z","author_association":"CONTRIBUTOR","body":"Not sure if it fixed the issue on Jenkins completely. I see it runs there and seem to pass. \r\n\r\n```\r\n11:17:07      cpse_test_fold_changes\r\n11:17:07        cpse_gather: make_test_fun (cpse_empty_changes)...ok\r\n11:17:07        cpse_gather: make_test_fun (cpse_single_change)...[0.100 s] ok\r\n11:17:07        cpse_gather: make_test_fun (cpse_purge_http_replication)...[1.397 s] ok\r\n```\r\n\r\nhttps://builds.apache.org/job/CouchDB/job/jenkins-fix-cpse-repl-purge-test/2/consoleFull\r\n\r\nAt best we don't start an extra (chttpd) application.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519212606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519223279","html_url":"https://github.com/apache/couchdb/issues/2100#issuecomment-519223279","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2100","id":519223279,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTIyMzI3OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T18:48:30Z","updated_at":"2019-08-07T18:48:30Z","author_association":"MEMBER","body":"That was an accidental close on my part. @sergey-safarov , does what I described match what you were thinking of?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519223279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519250598","html_url":"https://github.com/apache/couchdb/issues/2100#issuecomment-519250598","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2100","id":519250598,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI1MDU5OA==","user":{"login":"sergey-safarov","id":2562241,"node_id":"MDQ6VXNlcjI1NjIyNDE=","avatar_url":"https://avatars.githubusercontent.com/u/2562241?v=4","gravatar_id":"","url":"https://api.github.com/users/sergey-safarov","html_url":"https://github.com/sergey-safarov","followers_url":"https://api.github.com/users/sergey-safarov/followers","following_url":"https://api.github.com/users/sergey-safarov/following{/other_user}","gists_url":"https://api.github.com/users/sergey-safarov/gists{/gist_id}","starred_url":"https://api.github.com/users/sergey-safarov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergey-safarov/subscriptions","organizations_url":"https://api.github.com/users/sergey-safarov/orgs","repos_url":"https://api.github.com/users/sergey-safarov/repos","events_url":"https://api.github.com/users/sergey-safarov/events{/privacy}","received_events_url":"https://api.github.com/users/sergey-safarov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T20:10:46Z","updated_at":"2019-08-07T20:10:46Z","author_association":"NONE","body":"yes, I can see feature exist. I updated my yaml files to\r\n\r\n*Service*\r\n```yaml\r\n# file contains database headless service\r\n# creates kubernetes dns records for database daemons\r\n# required for database nodes discovery\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: db\r\nspec:\r\n  type: ClusterIP\r\n  clusterIP: None\r\n  publishNotReadyAddresses: true\r\n  selector:\r\n    app: db\r\n```\r\n\r\n*StateFulSet*\r\n```yaml\r\n# file contains database daemons\r\napiVersion: apps/v1\r\nkind: StatefulSet\r\nmetadata:\r\n  name: db\r\n  labels:\r\n    app: db\r\nspec:\r\n  podManagementPolicy: Parallel\r\n  serviceName: db\r\n  replicas: 5\r\n  selector:\r\n    matchLabels:\r\n      app: db\r\n  template:\r\n    metadata:\r\n      labels:\r\n        app: db\r\n    spec:\r\n      restartPolicy: Always\r\n      containers:\r\n      - name: node\r\n        image: couchdb:2.3.1\r\n        imagePullPolicy: IfNotPresent\r\n        env:\r\n        - name: NODE_NETBIOS_NAME\r\n          valueFrom:\r\n            fieldRef:\r\n              fieldPath: metadata.name\r\n        - name: NODENAME\r\n          value: $(NODE_NETBIOS_NAME).db\r\n        - name: COUCHDB_SECRET\r\n          value: monster\r\n        - name: ERL_FLAGS\r\n          value: \"-name couchdb\"\r\n        - name: ERL_FLAGS\r\n          value: \"-setcookie monster\"\r\n        command:\r\n          - /bin/sh\r\n        args:\r\n          - \"-c\"\r\n          - |\r\n            sed -i -E -e '/^\\s+exec gosu couchdb/i printf \"\\\\n[cluster]\\\\nseedlist = couchdb@db-0.db,couchdb@db-1.db,couchdb@db-2.db,couchdb@db-3.db,couchdb@db-4.db\\\\n\" >> /opt/couchdb/etc/local.d/docker.ini' /docker-entrypoint.sh\r\n            tini -- /docker-entrypoint.sh  /opt/couchdb/bin/couchdb\r\n\r\n        volumeMounts:\r\n          - name: pvc\r\n            mountPath: /opt/couchdb/data\r\n        livenessProbe:\r\n          failureThreshold: 3\r\n          httpGet:\r\n            path: /\r\n            port: 5984\r\n            scheme: HTTP\r\n          periodSeconds: 10\r\n          successThreshold: 1\r\n          timeoutSeconds: 1\r\n        readinessProbe:\r\n          failureThreshold: 3\r\n          httpGet:\r\n            path: /_up\r\n            port: 5984\r\n            scheme: HTTP\r\n          periodSeconds: 10\r\n          successThreshold: 1\r\n          timeoutSeconds: 1\r\n  volumeClaimTemplates:\r\n  - metadata:\r\n      name: pvc\r\n    spec:\r\n      accessModes: [\"ReadWriteOnce\"]\r\n      resources:\r\n        requests:\r\n          storage: 128Gi\r\n      volumeName: db\r\n```\r\n\r\nAnd now content of `/opt/couchdb/etc/local.d/docker.ini `\r\n```\r\n[couch_httpd_auth]\r\nsecret = monster\r\n\r\n[cluster]\r\nseedlist = couchdb@db-0.db,couchdb@db-1.db,couchdb@db-2.db,couchdb@db-3.db,couchdb@db-4.db\r\n\r\n[couchdb]\r\nuuid = 75ea5bf7bab92649b9bb53fde29ea091\r\n```\r\n\r\nUntil quorum is reached pods is not ready\r\n```sh\r\n[safarov@safarov-dell yaml]$ kubectl get pods -l app=db\r\nNAME   READY   STATUS    RESTARTS   AGE\r\ndb-0   0/1     Running   0          22m\r\ndb-1   0/1     Running   0          22m\r\ndb-2   0/1     Running   0          22m\r\ndb-3   0/1     Running   0          22m\r\ndb-4   0/1     Running   0          22m\r\n```\r\nWhen quorum is reached then\r\n```sh\r\n[safarov@safarov-dell yaml]$ kubectl get pods -l app=db\r\nNAME   READY   STATUS    RESTARTS   AGE\r\ndb-0   1/1     Running   0          22m\r\ndb-1   1/1     Running   0          22m\r\ndb-2   1/1     Running   0          22m\r\ndb-3   1/1     Running   0          22m\r\ndb-4   1/1     Running   0          22m\r\n```\r\n\r\nBut some nodes cannot see each other\r\n```\r\n[safarov@safarov-dell yaml]$ kubectl exec -it db-0  -- /bin/bash\r\nroot@db-0:/# curl http://db-0.db:5984/_membership\r\n{\"all_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"],\"cluster_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"]}\r\nroot@db-0:/# curl http://db-1.db:5984/_membership\r\n{\"all_nodes\":[\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-4.db\"],\"cluster_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"]}\r\nroot@db-0:/# curl http://db-2.db:5984/_membership\r\n{\"all_nodes\":[\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-4.db\"],\"cluster_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"]}\r\nroot@db-0:/# curl http://db-3.db:5984/_membership\r\n{\"all_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"],\"cluster_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"]}\r\nroot@db-0:/# curl http://db-4.db:5984/_membership\r\n{\"all_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"],\"cluster_nodes\":[\"couchdb@db-0.db\",\"couchdb@db-1.db\",\"couchdb@db-2.db\",\"couchdb@db-3.db\",\"couchdb@db-4.db\"]}\r\n```\r\n\r\nOnly `db-4.db` can see all peers, but not others\r\nThink this case related to https://github.com/apache/couchdb/issues/2102","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519250598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519266640","html_url":"https://github.com/apache/couchdb/pull/2088#issuecomment-519266640","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2088","id":519266640,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI2NjY0MA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T20:59:05Z","updated_at":"2019-08-07T20:59:05Z","author_association":"MEMBER","body":"I believe I'm done making changes here, would love a review when feasible.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519266640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519268321","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-519268321","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":519268321,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI2ODMyMQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:04:06Z","updated_at":"2019-08-07T21:04:06Z","author_association":"MEMBER","body":"Hmm, yeah, that last one looks like something went screwy and was going to hang forever. Hard to tell what just from the stack trace there.\r\n\r\nOn a related note, I found a second HTTP-related timeout that seems to fire on rare occasions. I'm testing it now, but I think this is how you change it: e71eafd6875","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519268321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519268489","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-519268489","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":519268489,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI2ODQ4OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:04:34Z","updated_at":"2019-08-07T21:04:34Z","author_association":"MEMBER","body":"Linking to #2088 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519268489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519281995","html_url":"https://github.com/apache/couchdb/pull/2088#issuecomment-519281995","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2088","id":519281995,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTI4MTk5NQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T21:49:53Z","updated_at":"2019-08-07T21:49:53Z","author_association":"MEMBER","body":"OK I lied, I popped one more timeout fix on top :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519281995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519367721","html_url":"https://github.com/apache/couchdb/issues/2103#issuecomment-519367721","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2103","id":519367721,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTM2NzcyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T05:17:38Z","updated_at":"2019-08-08T05:17:38Z","author_association":"MEMBER","body":"See if anything here helps: https://issues.apache.org/jira/browse/COUCHDB-2995?jql=project%20%3D%20COUCHDB%20AND%20text%20~%20smartos\r\n\r\nWe don't support SmartOS / Joyent, but if you are able to make it work and a patch is required, we'll merge it (if it doesn't break building on other platforms).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519367721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519394148","html_url":"https://github.com/apache/couchdb/issues/2103#issuecomment-519394148","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2103","id":519394148,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTM5NDE0OA==","user":{"login":"sm-tradeboox","id":7732337,"node_id":"MDQ6VXNlcjc3MzIzMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7732337?v=4","gravatar_id":"","url":"https://api.github.com/users/sm-tradeboox","html_url":"https://github.com/sm-tradeboox","followers_url":"https://api.github.com/users/sm-tradeboox/followers","following_url":"https://api.github.com/users/sm-tradeboox/following{/other_user}","gists_url":"https://api.github.com/users/sm-tradeboox/gists{/gist_id}","starred_url":"https://api.github.com/users/sm-tradeboox/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sm-tradeboox/subscriptions","organizations_url":"https://api.github.com/users/sm-tradeboox/orgs","repos_url":"https://api.github.com/users/sm-tradeboox/repos","events_url":"https://api.github.com/users/sm-tradeboox/events{/privacy}","received_events_url":"https://api.github.com/users/sm-tradeboox/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:00:57Z","updated_at":"2019-08-08T07:00:57Z","author_association":"NONE","body":"Hello. Yes, thanks! Seems to work.\r\n\r\nThe diff file rebar.config.script.diff applied to file src/couch/rebar.config.script fixes the complie error. I can't say yet if compile is correct. Is there a test suite for CouchDB?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519394148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519545212","html_url":"https://github.com/apache/couchdb/issues/2103#issuecomment-519545212","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2103","id":519545212,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU0NTIxMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T14:34:27Z","updated_at":"2019-08-08T14:34:27Z","author_association":"MEMBER","body":"Run `make check`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519545212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519624570","html_url":"https://github.com/apache/couchdb/pull/2088#issuecomment-519624570","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2088","id":519624570,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTYyNDU3MA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T17:58:22Z","updated_at":"2019-08-08T17:58:22Z","author_association":"MEMBER","body":"Sweet, thanks for the review Joan. I've moved the timeout stuff out of this PR and will plan to merge once Travis gives the green light. LMK if any of my explanations don't pass muster.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519624570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519672510","html_url":"https://github.com/apache/couchdb/pull/2088#issuecomment-519672510","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2088","id":519672510,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTY3MjUxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T20:19:38Z","updated_at":"2019-08-08T20:19:38Z","author_association":"MEMBER","body":"All good, +1 on this and the future PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519672510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519681589","html_url":"https://github.com/apache/couchdb/issues/1923#issuecomment-519681589","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1923","id":519681589,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTY4MTU4OQ==","user":{"login":"greg2git","id":24355032,"node_id":"MDQ6VXNlcjI0MzU1MDMy","avatar_url":"https://avatars.githubusercontent.com/u/24355032?v=4","gravatar_id":"","url":"https://api.github.com/users/greg2git","html_url":"https://github.com/greg2git","followers_url":"https://api.github.com/users/greg2git/followers","following_url":"https://api.github.com/users/greg2git/following{/other_user}","gists_url":"https://api.github.com/users/greg2git/gists{/gist_id}","starred_url":"https://api.github.com/users/greg2git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greg2git/subscriptions","organizations_url":"https://api.github.com/users/greg2git/orgs","repos_url":"https://api.github.com/users/greg2git/repos","events_url":"https://api.github.com/users/greg2git/events{/privacy}","received_events_url":"https://api.github.com/users/greg2git/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T20:47:44Z","updated_at":"2019-08-08T20:47:44Z","author_association":"NONE","body":"putting it on hold for now as there are too many CAs to really decide which will work best in the long run.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519681589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519688935","html_url":"https://github.com/apache/couchdb/pull/2104#issuecomment-519688935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2104","id":519688935,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTY4ODkzNQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T21:11:11Z","updated_at":"2019-08-08T21:11:11Z","author_association":"MEMBER","body":"Got a pre-emptive 👍 from @wohali over in #2088. Commit c98f068 has been updated to use module constants instead of magic values per the review over there.\r\n\r\nI expect we may still see some timeouts in Jenkins because I don't think #2098 quite covered all the issues there yet.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519688935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519785675","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-519785675","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":519785675,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTc4NTY3NQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T05:40:40Z","updated_at":"2019-08-09T05:40:40Z","author_association":"CONTRIBUTOR","body":"> Hmm, yeah, that last one looks like something went screwy and was going to hang forever. Hard to tell what just from the stack trace there.\r\n> \r\n> On a related note, I found a second HTTP-related timeout that seems to fire on rare occasions. I'm testing it now, but I think this is how you change it: [e71eafd](https://github.com/apache/couchdb/commit/e71eafd6875ccb9bca35f97f1f001b705ca3eb8e)\r\n\r\n@kocolosk Any inputs/pointers to what could be going wrong in CompactTest and if I can help resolve this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519785675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519851769","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-519851769","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":519851769,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTg1MTc2OQ==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T09:31:34Z","updated_at":"2019-08-09T09:31:34Z","author_association":"NONE","body":"Would love to read some investigation on what are the difficulties with this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519851769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519997519","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-519997519","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":519997519,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTk5NzUxOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T17:19:18Z","updated_at":"2019-08-09T17:19:18Z","author_association":"MEMBER","body":"@thigg for a start, imagine 2 databases replicating with each other that have different CRDT definitions. It breaks replication/eventual consistency and can lead to infinite loops/infinite document revisions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/519997519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520003316","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-520003316","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":520003316,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAwMzMxNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T17:37:09Z","updated_at":"2019-08-09T17:37:09Z","author_association":"MEMBER","body":"The two main difficulties are what @wohali says in that it would be conceivably easy for an incorrect resolution strategy to inject entropy into the system creating feed back loops.\r\n\r\nThe second is that conflict resolution really depends on user data. To my knowledge there's no generally applicable \"resolution algorithm\" that can handle arbitrary JSON data correctly. So we're either looking at changing all of our APIs to some restricted set of operations that can be resolved which is likely not going to be universal for all CouchDB use cases, or we're looking at some sort of \"custom resolution function\" that leads back to the first point about getting into weird feedback loops in circular replications.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520003316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520015905","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-520015905","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":520015905,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAxNTkwNQ==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T18:17:32Z","updated_at":"2019-08-09T18:21:13Z","author_association":"NONE","body":"As far as I understand you, you pointed 2 problems out:\r\n\r\n1. If conflict resolution is not strictly deterministic we might get feedback loops.\r\n     It would be better to prohibit them by design and not encourage users to break stuff.\r\n 2. Conflict resolution is almost always business logic and therefore general solutions are of very limited use/impossible.\r\n\r\nA solution that comes to my mind is to provide functions which are safe to use together with a fieldmatcher. So something like that:\r\n\r\n```\r\na.b -> min\r\nc.d -> ListMerge\r\na..[aa*b] -> max\r\n```\r\nThat would mean:\r\n -  for conflicts in the path a.b chose the minimum, if it is a number\r\n - for conflicts in the path c.d merge the lists deterministically, if the field is an array\r\n - for conflicts in a path below a where a field matches the pattern aa*b use the max value if it is a number\r\n - If the conflict can not be fully resolved by that: skip\r\n\r\nThat would provide a safe deterministic way to resolve conflicts which would allow to solve at least a couple of conflicts. The main question with that would be, if it is actually of so much use, that it is worth the effort.\r\n\r\nAn other idea which came to my mind, was if it would be possible to prevent conflict resolution running on multiple nodes. Maybe there could be a single conflict resolution master. That would also solve the problems. (This is very close to what I am implementing currently. I guess something like this is already done very often for applications which an element of centralistic design)\r\n\r\nBoth approaches however, do not guarantee that all conflicts are solved, maybe thats a problem with usability as well?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520015905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520018953","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-520018953","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":520018953,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAxODk1Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T18:27:23Z","updated_at":"2019-08-09T18:27:23Z","author_association":"MEMBER","body":"@thigg That's basically the gist of it yeah. There may be some possibility of a DSL for conflict resolution but as you point out its quite uncertain how generally applicable that would be for any given use case.\r\n\r\nAs to requiring a central coordinator for resolutions that won't work as a CouchDB feature as there's no ability to define a set of replicating nodes. The replication protocol is centered around the concept of an open set of peers that may or may not all be replicating pair wise or hub/spoke or what have you.\r\n\r\nYet another fun part of conflict resolution that you touch on is what happens if we're unable to resolve some sort of combination of updates. That ends up leaving us in a situation where we're looking at accepting conflicts regardless which seems counterintuitive. The only other alternative would be to reject the update but then you've just landed in a situation where two databases end up divergent after replication.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520018953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520024344","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-520024344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":520024344,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAyNDM0NA==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T18:44:32Z","updated_at":"2019-08-09T18:44:32Z","author_association":"NONE","body":"That sounds pretty much like a feature that will be dropped then?\r\nA DSL most probably not worth the effort/problems/complexity and no other good solution?\r\n\r\nMaybe the last way for that feature would be to add a section to the docs which elaborates on design patterns which handle conflict resolution?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520024344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520026041","html_url":"https://github.com/apache/couchdb/issues/1506#issuecomment-520026041","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1506","id":520026041,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAyNjA0MQ==","user":{"login":"thigg","id":7593137,"node_id":"MDQ6VXNlcjc1OTMxMzc=","avatar_url":"https://avatars.githubusercontent.com/u/7593137?v=4","gravatar_id":"","url":"https://api.github.com/users/thigg","html_url":"https://github.com/thigg","followers_url":"https://api.github.com/users/thigg/followers","following_url":"https://api.github.com/users/thigg/following{/other_user}","gists_url":"https://api.github.com/users/thigg/gists{/gist_id}","starred_url":"https://api.github.com/users/thigg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thigg/subscriptions","organizations_url":"https://api.github.com/users/thigg/orgs","repos_url":"https://api.github.com/users/thigg/repos","events_url":"https://api.github.com/users/thigg/events{/privacy}","received_events_url":"https://api.github.com/users/thigg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T18:50:09Z","updated_at":"2019-08-09T18:50:09Z","author_association":"NONE","body":"On the other hand, there could be a tool independent of couchdb, just listening to the changes feed using the mentioned DSL. Maybe that allows for faster prototyping etc. \r\n\r\nPeople could just pull that in as a dependency, configure it and have a simple and stable conflict resolution running.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520026041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520340372","html_url":"https://github.com/apache/couchdb/issues/2097#issuecomment-520340372","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2097","id":520340372,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDM0MDM3Mg==","user":{"login":"shahkishak","id":16536008,"node_id":"MDQ6VXNlcjE2NTM2MDA4","avatar_url":"https://avatars.githubusercontent.com/u/16536008?v=4","gravatar_id":"","url":"https://api.github.com/users/shahkishak","html_url":"https://github.com/shahkishak","followers_url":"https://api.github.com/users/shahkishak/followers","following_url":"https://api.github.com/users/shahkishak/following{/other_user}","gists_url":"https://api.github.com/users/shahkishak/gists{/gist_id}","starred_url":"https://api.github.com/users/shahkishak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shahkishak/subscriptions","organizations_url":"https://api.github.com/users/shahkishak/orgs","repos_url":"https://api.github.com/users/shahkishak/repos","events_url":"https://api.github.com/users/shahkishak/events{/privacy}","received_events_url":"https://api.github.com/users/shahkishak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T08:35:50Z","updated_at":"2019-08-12T08:42:33Z","author_association":"NONE","body":"I'm facing this issue as well.\r\nCouch log's size is growing wild over this one...\r\n[CouchLog_100819_185801.log](https://github.com/apache/couchdb/files/3491535/CouchLog_100819_185801.log)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520340372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520535517","html_url":"https://github.com/apache/couchdb/issues/1816#issuecomment-520535517","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1816","id":520535517,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDUzNTUxNw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T18:13:13Z","updated_at":"2019-08-12T18:13:13Z","author_association":"CONTRIBUTOR","body":"Fixed in https://github.com/apache/couchdb/pull/2089","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520535517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520587702","html_url":"https://github.com/apache/couchdb/issues/2108#issuecomment-520587702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2108","id":520587702,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDU4NzcwMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T20:44:02Z","updated_at":"2019-08-12T20:44:02Z","author_association":"MEMBER","body":"Are you sure? What version of CouchDB are you running?\r\n\r\nWe specifically address changing this in a previous documentation PR...\r\n\r\nhttps://github.com/apache/couchdb-documentation/pull/328/files\r\n\r\nAnd here's the related code fix:\r\n\r\nhttps://github.com/apache/couchdb/pull/1436","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520587702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520656829","html_url":"https://github.com/apache/couchdb/issues/2108#issuecomment-520656829","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2108","id":520656829,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDY1NjgyOQ==","user":{"login":"paulbert","id":9203229,"node_id":"MDQ6VXNlcjkyMDMyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/9203229?v=4","gravatar_id":"","url":"https://api.github.com/users/paulbert","html_url":"https://github.com/paulbert","followers_url":"https://api.github.com/users/paulbert/followers","following_url":"https://api.github.com/users/paulbert/following{/other_user}","gists_url":"https://api.github.com/users/paulbert/gists{/gist_id}","starred_url":"https://api.github.com/users/paulbert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulbert/subscriptions","organizations_url":"https://api.github.com/users/paulbert/orgs","repos_url":"https://api.github.com/users/paulbert/repos","events_url":"https://api.github.com/users/paulbert/events{/privacy}","received_events_url":"https://api.github.com/users/paulbert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T01:48:22Z","updated_at":"2019-08-13T01:48:22Z","author_association":"NONE","body":"We're running version 2.3.0.\r\n\r\nI guess I'm not sure what should be correct, but the two sections of the documentation are contradictory with `chttpd_auth` in 1.2.8 and `couch_httpd_auth` in 3.5. \r\n `couch_httpd_auth` is working, so I assumed that was correct.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520656829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520685611","html_url":"https://github.com/apache/couchdb/issues/2108#issuecomment-520685611","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2108","id":520685611,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDY4NTYxMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T04:38:16Z","updated_at":"2019-08-13T04:38:16Z","author_association":"MEMBER","body":"`couch_httpd_auth` is wrong and deprecated. Are you using port 5984?\r\n\r\nCan you try again with 2.3.1? Lots changed between 2.3.0 and 2.3.1 in this specific part of the code, which is why the documentation reflects what it does.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520685611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520726874","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-520726874","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":520726874,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDcyNjg3NA==","user":{"login":"lag-linaro","id":613036,"node_id":"MDQ6VXNlcjYxMzAzNg==","avatar_url":"https://avatars.githubusercontent.com/u/613036?v=4","gravatar_id":"","url":"https://api.github.com/users/lag-linaro","html_url":"https://github.com/lag-linaro","followers_url":"https://api.github.com/users/lag-linaro/followers","following_url":"https://api.github.com/users/lag-linaro/following{/other_user}","gists_url":"https://api.github.com/users/lag-linaro/gists{/gist_id}","starred_url":"https://api.github.com/users/lag-linaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lag-linaro/subscriptions","organizations_url":"https://api.github.com/users/lag-linaro/orgs","repos_url":"https://api.github.com/users/lag-linaro/repos","events_url":"https://api.github.com/users/lag-linaro/events{/privacy}","received_events_url":"https://api.github.com/users/lag-linaro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T07:44:18Z","updated_at":"2019-08-13T07:44:18Z","author_association":"CONTRIBUTOR","body":"Any update on this guys?\r\n\r\nObviously this is blocking official support for AArch64 which is pretty important.\r\n\r\nWhat platforms are the tests currently running on?  RPi3?\r\n\r\nWould it also help if you were to run the tests on more capable hardware?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520726874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520866604","html_url":"https://github.com/apache/couchdb/issues/2108#issuecomment-520866604","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2108","id":520866604,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg2NjYwNA==","user":{"login":"paulbert","id":9203229,"node_id":"MDQ6VXNlcjkyMDMyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/9203229?v=4","gravatar_id":"","url":"https://api.github.com/users/paulbert","html_url":"https://github.com/paulbert","followers_url":"https://api.github.com/users/paulbert/followers","following_url":"https://api.github.com/users/paulbert/following{/other_user}","gists_url":"https://api.github.com/users/paulbert/gists{/gist_id}","starred_url":"https://api.github.com/users/paulbert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paulbert/subscriptions","organizations_url":"https://api.github.com/users/paulbert/orgs","repos_url":"https://api.github.com/users/paulbert/repos","events_url":"https://api.github.com/users/paulbert/events{/privacy}","received_events_url":"https://api.github.com/users/paulbert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T14:47:19Z","updated_at":"2019-08-13T14:47:19Z","author_association":"NONE","body":"Yes port 5984.  It's working with 2.3.1, thanks!\r\n\r\nSo it looks like the change above should be the opposite.  Section 3.5 of the docs uses the deprecated `couch_httpd_auth` for the proxy and null handlers.\r\n\r\nhttps://docs.couchdb.org/en/stable/config/http.html#chttpd/authentication_handlers","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520866604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520872196","html_url":"https://github.com/apache/couchdb/issues/2108#issuecomment-520872196","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2108","id":520872196,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg3MjE5Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T15:00:04Z","updated_at":"2019-08-13T15:00:04Z","author_association":"MEMBER","body":"Thanks, I'll take care of it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520872196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520874033","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-520874033","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":520874033,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg3NDAzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T15:04:10Z","updated_at":"2019-08-13T15:04:10Z","author_association":"MEMBER","body":"Hi @lag-linaro , we are currently setting up a brand new Jenkins instance for better testing. If packet.net is prepared to make a targeted hardware donation of at least 2 aarch64 servers for us to use long-term, please contact me off-Github at my email address, which is my GH id @ apache.org.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520874033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520890707","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-520890707","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":520890707,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg5MDcwNw==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T15:44:10Z","updated_at":"2019-08-13T15:44:10Z","author_association":"CONTRIBUTOR","body":"@kocolosk any updates for me on this one?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520890707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520943753","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-520943753","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":520943753,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk0Mzc1Mw==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T18:06:00Z","updated_at":"2019-08-13T18:06:00Z","author_association":"CONTRIBUTOR","body":"Following error messages are found intermittently while running CouchDB test suite:-\r\n\r\nReshardAllDocsTest\r\n  * test all_docs after splitting all shards on node1 (16905.6ms)\r\n\r\n  1) test all_docs after splitting all shards on node1 (ReshardAllDocsTest)\r\n     test/elixir/test/reshard_all_docs_test.exs:21\r\n     ** (RuntimeError) timed out after 10162 ms\r\n     code: wait_job_completed(jobid)\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/elixir/test/reshard_all_docs_test.exs:32: (test)\r\n\r\n  * test all_docs after splitting the same range on all nodes (15679.8ms)\r\n\r\n  2) test all_docs after splitting the same range on all nodes (ReshardAllDocsTest)\r\n     test/elixir/test/reshard_all_docs_test.exs:39\r\n     ** (RuntimeError) timed out after 10164 ms\r\n     code: |> Enum.each(fn id -> wait_job_completed(id) end)\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       (elixir) lib/enum.ex:769: Enum.\"-each/2-lists^foreach/1-0-\"/2\r\n       (elixir) lib/enum.ex:769: Enum.each/2\r\n       test/elixir/test/reshard_all_docs_test.exs:51: (test)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520943753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520995699","html_url":"https://github.com/apache/couchdb/pull/2109#issuecomment-520995699","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2109","id":520995699,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDk5NTY5OQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T20:26:52Z","updated_at":"2019-08-13T20:47:25Z","author_association":"CONTRIBUTOR","body":"Without clouseau running, I get an error when testing:\r\n```\r\n(node1@127.0.0.1)3> dreyfus_fabric_cleanup:go(<<\"_global_changes\">>).\r\n** exception error: no match of right hand side value {'EXIT',noconnection}\r\n     in function  dreyfus_fabric_cleanup:cleanup_local_purge_doc/2 (src/dreyfus_fabric_cleanup.erl, line 41)\r\n     in call from dreyfus_fabric_cleanup:go/1 (src/dreyfus_fabric_cleanup.erl, line 28)\r\n```\r\nbecause of this line:\r\n```\r\n(node1@127.0.0.1)4> clouseau_rpc:get_root_dir().\r\n{'EXIT',noconnection}\r\n```\r\n\r\nI started a clouseau instance using `mvn scala:run -Dlauncher=clouseau1` and then \r\n```\r\n(node1@127.0.0.1)9> net_adm:ping('clouseau1@127.0.0.1').\r\npong\r\n(node1@127.0.0.1)14> config:set(\"dreyfus\", \"name\", \"clouseau1@127.0.0.1\", false).\r\nok\r\n```\r\nand am able to successfully test:\r\n```\r\n(node1@127.0.0.1)16> clouseau_rpc:get_root_dir().\r\n{ok,<<\"/Users/jay/proj/ibm/repos/clouseau/target/clouseau1\">>}\r\n(node1@127.0.0.1)17> dreyfus_fabric_cleanup:go(<<\"_global_changes\">>).\r\nok\r\n```\r\nwhich shows the following on the clouseau console:\r\n```\r\n2019-08-13 13:21:59 clouseau.main [INFO] Clouseau running as clouseau1@127.0.0.1\r\n2019-08-13 13:42:18 clouseau.cleanup [INFO] Cleaning up _global_changes\r\n```\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/520995699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521085923","html_url":"https://github.com/apache/couchdb/pull/2109#issuecomment-521085923","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2109","id":521085923,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTA4NTkyMw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T03:13:45Z","updated_at":"2019-08-14T03:13:45Z","author_association":"CONTRIBUTOR","body":"thanks @jaydoane yes, we need a running clouseau. I triggered build again and then CI passed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521085923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521138808","html_url":"https://github.com/apache/couchdb/issues/2099#issuecomment-521138808","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2099","id":521138808,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTEzODgwOA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T07:42:34Z","updated_at":"2019-08-14T07:42:34Z","author_association":"CONTRIBUTOR","body":"@wohali @kocolosk any inputs on this one?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521138808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521143824","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-521143824","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":521143824,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTE0MzgyNA==","user":{"login":"lag-linaro","id":613036,"node_id":"MDQ6VXNlcjYxMzAzNg==","avatar_url":"https://avatars.githubusercontent.com/u/613036?v=4","gravatar_id":"","url":"https://api.github.com/users/lag-linaro","html_url":"https://github.com/lag-linaro","followers_url":"https://api.github.com/users/lag-linaro/followers","following_url":"https://api.github.com/users/lag-linaro/following{/other_user}","gists_url":"https://api.github.com/users/lag-linaro/gists{/gist_id}","starred_url":"https://api.github.com/users/lag-linaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lag-linaro/subscriptions","organizations_url":"https://api.github.com/users/lag-linaro/orgs","repos_url":"https://api.github.com/users/lag-linaro/repos","events_url":"https://api.github.com/users/lag-linaro/events{/privacy}","received_events_url":"https://api.github.com/users/lag-linaro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T07:59:26Z","updated_at":"2019-08-14T07:59:26Z","author_association":"CONTRIBUTOR","body":"Have you tried reaching out to WorksOnArm?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521143824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521330942","html_url":"https://github.com/apache/couchdb/issues/2099#issuecomment-521330942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2099","id":521330942,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTMzMDk0Mg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T17:00:27Z","updated_at":"2019-08-14T17:00:27Z","author_association":"MEMBER","body":"Hard to say without any additional details like database log files. I don't think I've ever seen that one fail like that on our CI system yet so I don't have any other context to go on.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521330942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521332020","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-521332020","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":521332020,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTMzMjAyMA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T17:03:25Z","updated_at":"2019-08-14T17:03:25Z","author_association":"MEMBER","body":"@sarveshtamba Are you up-to-date on master? I think 608caaf12904effc104fc86a8525eb51425e2311 fixed those `ReshardAllDocsTest` timeouts for me (specifically by also raising the `inactivity_timeout` beyond the default of 10 seconds)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521332020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521342068","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-521342068","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":521342068,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTM0MjA2OA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T17:30:03Z","updated_at":"2019-08-14T17:30:03Z","author_association":"MEMBER","body":"I don't think this belongs in 3.x. We closed #1516 by way of #2037, and I don't think anyone is signing up to better integrate Geospatial ahead of 3.0.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521342068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521342651","html_url":"https://github.com/apache/couchdb/issues/1517#issuecomment-521342651","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1517","id":521342651,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTM0MjY1MQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T17:31:30Z","updated_at":"2019-08-14T17:31:30Z","author_association":"MEMBER","body":"It would be great to have full shard rebalancing across nodes in 3.0, but I don't think the timelines are going to work out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521342651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521369957","html_url":"https://github.com/apache/couchdb/pull/2114#issuecomment-521369957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2114","id":521369957,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTM2OTk1Nw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T18:46:10Z","updated_at":"2019-08-14T18:46:10Z","author_association":"MEMBER","body":"I'm being sloppy again and using this branch for whack-a-mole timeout extensions where needed. I can move those elsewhere if folks want to keep the PR clean.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521369957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521370867","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-521370867","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":521370867,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTM3MDg2Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T18:48:26Z","updated_at":"2019-08-14T18:48:26Z","author_association":"MEMBER","body":"+1 on lowering max_document_size to 1MB.\r\n\r\ndefault q is more controversial. How well is the shard splitting working? If it's seamless (no interruption to reads or writes) and efficient, then lowering to 2 is ok by me (I'd not be keen on 1). That said, q vanishes entirely in 4.0 and we've lived with this default for a long time. Is it worth changing at this late stage?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521370867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487442","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-521487442","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":521487442,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ4NzQ0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:09:53Z","updated_at":"2019-08-15T02:10:03Z","author_association":"MEMBER","body":"There was significant discussion on both of these changes in other tickets and on the mailing list.\r\n\r\nI'm -1 until we at least review that feedback and consider the implications.\r\n\r\nI believe we got closer to q=2 or 4 on the lists than 1 or 2. Or we could be more intelligent and try and autopick on first run or something, based on # of CPU cores and nodes in the cluster, and th absence of a q= value in the local ini files...spitballing here.\r\n\r\nAs for the max document size, I think this is actually more controversial, and will break anyone who has larger attachments in CouchDB today who upgrades! That seems to violate the principle of least surprise. See #1253 and #1200 for the latest on this.\r\n\r\n/cc @janl ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487684","html_url":"https://github.com/apache/couchdb/issues/1515#issuecomment-521487684","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1515","id":521487684,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ4NzY4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:11:26Z","updated_at":"2019-08-15T02:11:26Z","author_association":"MEMBER","body":"@davisp what do you think? I expect this was only in here for #1516 but if you had other ideas, I'd at least like to see a writeup of what you want to do before we move it out of 3.x.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487851","html_url":"https://github.com/apache/couchdb/issues/2113#issuecomment-521487851","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2113","id":521487851,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ4Nzg1MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:12:16Z","updated_at":"2019-08-15T02:12:16Z","author_association":"MEMBER","body":"I can take this, but won't get to it until next week.\r\n\r\nReally glad to see there's progress here! @lag-linaro will be very pleased. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487996","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-521487996","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":521487996,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ4Nzk5Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:13:07Z","updated_at":"2019-08-15T02:13:07Z","author_association":"MEMBER","body":"A while ago, yes, maybe 2 years now. I can contact them again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521487996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521488497","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-521488497","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":521488497,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ4ODQ5Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:15:57Z","updated_at":"2019-08-15T02:15:57Z","author_association":"CONTRIBUTOR","body":"thanks @wohali for further information. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521488497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521493367","html_url":"https://github.com/apache/couchdb/issues/2115#issuecomment-521493367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2115","id":521493367,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTQ5MzM2Nw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T02:43:44Z","updated_at":"2019-08-15T02:43:44Z","author_association":"MEMBER","body":"I erred on the side of fewer shards because we have splitting but not merging, and because the initial setting of 8 was derived from some of our deployments which I'd wager are larger than average. But I'm happy to go along with whatever consensus (including retaining the current default if that's what folks want).\r\n\r\nAttachments aren't included in the computation for `couchdb.max_document_size`, only the actual JSON fields and values. That said, there are absolutely users in the wild with JSON docs larger than 1 MB, and this change in defaults could certainly surprise them. In 3.x they'll be able to work around it by changing the default on their server, but this is meant as a signal to re-think the data model. My experience has been that those large docs are problematic for a number of reasons; the somewhat fuzzy limit at which the view engine breaks, and the intense write amplification when updating any field of the document are two examples that come to mind.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521493367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521534472","html_url":"https://github.com/apache/couchdb/issues/2030#issuecomment-521534472","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2030","id":521534472,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTUzNDQ3Mg==","user":{"login":"lag-linaro","id":613036,"node_id":"MDQ6VXNlcjYxMzAzNg==","avatar_url":"https://avatars.githubusercontent.com/u/613036?v=4","gravatar_id":"","url":"https://api.github.com/users/lag-linaro","html_url":"https://github.com/lag-linaro","followers_url":"https://api.github.com/users/lag-linaro/followers","following_url":"https://api.github.com/users/lag-linaro/following{/other_user}","gists_url":"https://api.github.com/users/lag-linaro/gists{/gist_id}","starred_url":"https://api.github.com/users/lag-linaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lag-linaro/subscriptions","organizations_url":"https://api.github.com/users/lag-linaro/orgs","repos_url":"https://api.github.com/users/lag-linaro/repos","events_url":"https://api.github.com/users/lag-linaro/events{/privacy}","received_events_url":"https://api.github.com/users/lag-linaro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T06:44:42Z","updated_at":"2019-08-15T06:44:42Z","author_association":"CONTRIBUTOR","body":"> A while ago, yes, maybe 2 years now. I can contact them again.\r\n\r\nLooks like you have a new customer @vielmetti - how exciting. :smiley: ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521534472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521536175","html_url":"https://github.com/apache/couchdb/issues/2113#issuecomment-521536175","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2113","id":521536175,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTUzNjE3NQ==","user":{"login":"lag-linaro","id":613036,"node_id":"MDQ6VXNlcjYxMzAzNg==","avatar_url":"https://avatars.githubusercontent.com/u/613036?v=4","gravatar_id":"","url":"https://api.github.com/users/lag-linaro","html_url":"https://github.com/lag-linaro","followers_url":"https://api.github.com/users/lag-linaro/followers","following_url":"https://api.github.com/users/lag-linaro/following{/other_user}","gists_url":"https://api.github.com/users/lag-linaro/gists{/gist_id}","starred_url":"https://api.github.com/users/lag-linaro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lag-linaro/subscriptions","organizations_url":"https://api.github.com/users/lag-linaro/orgs","repos_url":"https://api.github.com/users/lag-linaro/repos","events_url":"https://api.github.com/users/lag-linaro/events{/privacy}","received_events_url":"https://api.github.com/users/lag-linaro/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T06:51:44Z","updated_at":"2019-08-15T06:51:44Z","author_association":"CONTRIBUTOR","body":"> @lag-linaro will be very pleased. :)\r\n\r\nAmazing!  Thank you so much. :+1: ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521536175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521654894","html_url":"https://github.com/apache/couchdb/issues/1428#issuecomment-521654894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1428","id":521654894,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTY1NDg5NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T14:10:31Z","updated_at":"2019-08-15T14:10:31Z","author_association":"CONTRIBUTOR","body":"Started discussion on ML https://lists.apache.org/thread.html/a6da2f98df4f044153ae0768c967b5bb7cf475a8dec2f2b73b907a3c@%3Cdev.couchdb.apache.org%3E","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521654894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521702520","html_url":"https://github.com/apache/couchdb/issues/1428#issuecomment-521702520","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1428","id":521702520,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTcwMjUyMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T16:20:41Z","updated_at":"2019-08-15T16:20:41Z","author_association":"MEMBER","body":"Looks like I never actually described my original issues with the port compiler very well. But the gist of it was that projects that had a dependency that depended on Jiffy would fail to get that NIF built correctly. There is/was also a confounding issue of making it work with rebar2 since CouchDB hadn't moved off it. Creating the standalone enc script ended up being the easiest solution at the time. Its been years so its quite possible that's all fixed now.\r\n\r\nAs to mix vs rebar3 in particular, the only worry I'd have is that Elixir is going to tighten our acceptable versions of Erlang. And in my completely limited experience it seems as though they tend to follow the newest releases quite closely. But that's super anecdata so I could be way off there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521702520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521710862","html_url":"https://github.com/apache/couchdb/pull/2101#issuecomment-521710862","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2101","id":521710862,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTcxMDg2Mg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T16:43:29Z","updated_at":"2019-08-15T16:43:29Z","author_association":"CONTRIBUTOR","body":"@jaydoane PR is updated","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521710862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521741241","html_url":"https://github.com/apache/couchdb/issues/2119#issuecomment-521741241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2119","id":521741241,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTc0MTI0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T18:13:21Z","updated_at":"2019-08-15T18:13:21Z","author_association":"MEMBER","body":"Hi @vlad88sv ,\r\n\r\nCurrent policy is only to support LTS builds. The reason is that CouchDB does not coexist well on machines running other processes, and since you need a dedicated server for that machine, you might as well run an LTS release.\r\n\r\nWe are a volunteer run project with limited computing resources. Running a full regression test and build on each new platform requires a large amount of infrastructure on our side, plus min. 1 hour of compute time per platform.\r\n\r\nAdding non-LTS support is not likely in the near future, but we'll consider it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521741241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521741508","html_url":"https://github.com/apache/couchdb/issues/2119#issuecomment-521741508","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2119","id":521741508,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTc0MTUwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T18:14:09Z","updated_at":"2019-08-15T18:14:09Z","author_association":"MEMBER","body":"I'm going to move this issue over to our packaging repository. Do not be alarmed if this issue closes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521741508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521963703","html_url":"https://github.com/apache/couchdb/pull/2121#issuecomment-521963703","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2121","id":521963703,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTk2MzcwMw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T10:25:41Z","updated_at":"2019-08-16T10:25:41Z","author_association":"CONTRIBUTOR","body":"Let me know if you think it is a good idea to commit the test under source control. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521963703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521987950","html_url":"https://github.com/apache/couchdb/pull/2121#issuecomment-521987950","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2121","id":521987950,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTk4Nzk1MA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T12:11:10Z","updated_at":"2019-08-16T12:11:10Z","author_association":"CONTRIBUTOR","body":"Mock is a tiny (300 lines) Elixir wrapper for meck which we already use.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521987950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521992764","html_url":"https://github.com/apache/couchdb/pull/2121#issuecomment-521992764","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2121","id":521992764,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTk5Mjc2NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T12:30:19Z","updated_at":"2019-08-16T12:30:19Z","author_association":"CONTRIBUTOR","body":"closing in favor of https://github.com/apache/couchdb/pull/2122","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/521992764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522009473","html_url":"https://github.com/apache/couchdb/issues/1428#issuecomment-522009473","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1428","id":522009473,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjAwOTQ3Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T13:30:52Z","updated_at":"2019-08-16T13:30:52Z","author_association":"CONTRIBUTOR","body":"> As to mix vs rebar3 in particular, the only worry I'd have is that Elixir is going to tighten our acceptable versions of Erlang. \r\n\r\nI did use erlang 20.3.8.14 and elixir 1.6.6. However 1.6.6. is supported on erlang 19 which is AFAIK a minimal erlang version CouchDB supports.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522009473/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522248511","html_url":"https://github.com/apache/couchdb/issues/2116#issuecomment-522248511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2116","id":522248511,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjI0ODUxMQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T15:47:05Z","updated_at":"2019-08-17T15:47:05Z","author_association":"MEMBER","body":"Happened again: https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-elixir-retry-until-flakes/2/tests","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522248511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522451356","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-522451356","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":522451356,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjQ1MTM1Ng==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T07:39:45Z","updated_at":"2019-08-19T07:39:45Z","author_association":"CONTRIBUTOR","body":"Hi @kocolosk ,\r\n\r\nThanks, I just pulled all the latest changes from master and the `ReshardAllDocsTest` pass with the updates.\r\n\r\nNow I am left with only the below error, and trying to investigate this, not much luck though. :-(\r\n\r\n```\r\nCompactTest\r\n  * test compaction reduces size of deleted docs (51576.1ms)\r\n\r\n  1) test compaction reduces size of deleted docs (CompactTest)\r\n     test/elixir/test/compact_test.exs:17\r\n     ** (RuntimeError) timed out after 30015 ms\r\n     code: retry_until(fn ->\r\n     stacktrace:\r\n       (couchdbtest) test/elixir/lib/couch/db_test.ex:301: Couch.DBTest.retry_until/4\r\n       test/elixir/test/compact_test.exs:38: (test)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522451356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522471024","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-522471024","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":522471024,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjQ3MTAyNA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T08:38:12Z","updated_at":"2019-08-19T08:38:12Z","author_association":"CONTRIBUTOR","body":"Is there a way one could just run this one test case in standalone way? And can one attach this to some debugger like gdb which could help debug at runtime?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522471024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522628032","html_url":"https://github.com/apache/couchdb/pull/2126#issuecomment-522628032","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2126","id":522628032,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjYyODAzMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T15:27:11Z","updated_at":"2019-08-19T15:27:11Z","author_association":"CONTRIBUTOR","body":"Are we still setting the proper httpotion/ibrowse timeouts, where does that happen:\r\n\r\n```\r\n    timeout =\r\n      Keyword.get(\r\n        options,\r\n        :timeout,\r\n        Application.get_env(:httpotion, :default_timeout, @request_timeout)\r\n      )\r\n\r\n    ib_options =\r\n      Keyword.merge(\r\n        Application.get_env(:httpotion, :default_ibrowse, []),\r\n        Keyword.get(options, :ibrowse, [{:inactivity_timeout, @inactivity_timeout}])\r\n      )\r\n```\r\n\r\nI had also noticed new unused tags warnings:\r\n\r\n```\r\nwarning: module attribute @inactivity_timeout was set but never used\r\n  test/elixir/lib/couch.ex:59\r\nwarning: module attribute @request_timeout was set but never used\r\n  test/elixir/lib/couch.ex:58\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522628032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522657658","html_url":"https://github.com/apache/couchdb/pull/2126#issuecomment-522657658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2126","id":522657658,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjY1NzY1OA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T16:41:01Z","updated_at":"2019-08-19T16:41:01Z","author_association":"CONTRIBUTOR","body":"@nickva I updated the PR and testing instructions","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522657658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522952445","html_url":"https://github.com/apache/couchdb/issues/2091#issuecomment-522952445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2091","id":522952445,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk1MjQ0NQ==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T10:22:53Z","updated_at":"2019-08-22T12:01:17Z","author_association":"CONTRIBUTOR","body":"Hi @kocolosk ,\r\n\r\nI debugged the failing `CompactTest` test case and have managed to find the root cause of the failure.\r\n\r\nAfter understanding the logic of the test case and tracing the code flow, I realised that the failure happened due to the incorrect assert check at the following location:-\r\n\thttps://github.com/apache/couchdb/blob/master/test/elixir/test/compact_test.exs#L46\r\n\r\nThis is because the final data size after deletion & further compaction is more than the deleted data size after only deletion, but not compaction.\r\nThe opposite was being checked due to which the test case was failing consistently.\r\n\r\nFollowing are the values of the variables in question that I managed to trace:-\r\n\r\n\t\tCompactTest\r\n\t\t  * test compaction reduces size of deleted docs\r\n\r\n\t\tValue of orig_data_size = 4436.\r\n\r\n\t\tValue of orig_disk_size = 103907.\r\n\r\n\t\tValue of deleted_data_size = 7455.\r\n\r\n\t\tValue of final_data_size = 11924.\r\n\r\n\t\tValue of final_disk_size = 218681.\r\n\r\n\t\t  * test compaction reduces size of deleted docs (18819.2ms)\r\n\r\nI have made the necessary changes and submitted a PR for the same.\r\n\thttps://github.com/apache/couchdb/pull/2127","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522952445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522952604","html_url":"https://github.com/apache/couchdb/issues/2099#issuecomment-522952604","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2099","id":522952604,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk1MjYwNA==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T10:23:28Z","updated_at":"2019-08-22T12:01:37Z","author_association":"CONTRIBUTOR","body":"Hi @kocolosk ,\r\n\r\nI debugged the failing `CompactTest` test case and have managed to find the root cause of the failure.\r\n\r\nAfter understanding the logic of the test case and tracing the code flow, I realised that the failure happened due to the incorrect assert check at the following location:-\r\n\thttps://github.com/apache/couchdb/blob/master/test/elixir/test/compact_test.exs#L46\r\n\r\nThis is because the final data size after deletion & further compaction is more than the deleted data size after only deletion, but not compaction.\r\nThe opposite was being checked due to which the test case was failing consistently.\r\n\r\nFollowing are the values of the variables in question that I managed to trace:-\r\n\r\n\t\tCompactTest\r\n\t\t  * test compaction reduces size of deleted docs\r\n\r\n\t\tValue of orig_data_size = 4436.\r\n\r\n\t\tValue of orig_disk_size = 103907.\r\n\r\n\t\tValue of deleted_data_size = 7455.\r\n\r\n\t\tValue of final_data_size = 11924.\r\n\r\n\t\tValue of final_disk_size = 218681.\r\n\r\n\t\t  * test compaction reduces size of deleted docs (18819.2ms)\r\n\r\nI have made the necessary changes and submitted a PR for the same.\r\n\thttps://github.com/apache/couchdb/pull/2127","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/522952604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523417412","html_url":"https://github.com/apache/couchdb/pull/2127#issuecomment-523417412","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2127","id":523417412,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzQxNzQxMg==","user":{"login":"sarveshtamba","id":37213716,"node_id":"MDQ6VXNlcjM3MjEzNzE2","avatar_url":"https://avatars.githubusercontent.com/u/37213716?v=4","gravatar_id":"","url":"https://api.github.com/users/sarveshtamba","html_url":"https://github.com/sarveshtamba","followers_url":"https://api.github.com/users/sarveshtamba/followers","following_url":"https://api.github.com/users/sarveshtamba/following{/other_user}","gists_url":"https://api.github.com/users/sarveshtamba/gists{/gist_id}","starred_url":"https://api.github.com/users/sarveshtamba/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sarveshtamba/subscriptions","organizations_url":"https://api.github.com/users/sarveshtamba/orgs","repos_url":"https://api.github.com/users/sarveshtamba/repos","events_url":"https://api.github.com/users/sarveshtamba/events{/privacy}","received_events_url":"https://api.github.com/users/sarveshtamba/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-21T11:33:33Z","updated_at":"2019-08-21T11:33:33Z","author_association":"CONTRIBUTOR","body":"@kocolosk can you please review this one? If you are not the right person, can you suggest who is the right person to review this? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523417412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523840728","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523840728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523840728,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg0MDcyOA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T10:11:17Z","updated_at":"2019-08-22T10:11:17Z","author_association":"MEMBER","body":"A _find shouldn’t be slower. It’s using map/reduce underneath. So it’s the same query engine. What does your _explain say? Is the index being used. You can also enable execution_stats to tell you how the find query went to get more insight.\n\n\n________________________________\nFrom: Nicu Spinu <notifications@github.com>\nSent: Thursday, August 22, 2019 10:28 AM\nTo: apache/couchdb\nCc: Subscribed\nSubject: [apache/couchdb] _find performance issues (#2129)\n\nDescription\n\nAlthough the docs advise to start using _find rather the regular db views, it looks like _find is at least 5x time slower than a regular view. Is that something expected?\n[image]<https://user-images.githubusercontent.com/35466661/63499019-afe7f700-c4cf-11e9-86cf-8580f101d45d.png>\n\nSteps to Reproduce\n\nUSING NODEJS\n\n  1.  Create a new index through .createIndex\n  2.  Query the db through _find using fields to match the newly created index.\n  3.  We queried for about 10k rows. It took about 3.8 seconds, while a regular view, for the same amout of data took 800ms.\n\nUSING CURL\nThe same as above. The execution took the same amount of time(3.8)s.\n\nExpected Behaviour\n\nThe find execution should take at least the same amount of time, or less?\n\nYour Environment\n\nNodejs under linux/mac-os.\n\n  *   CouchDB Version used:\n2.3.1\n  *   Browser name and version:\n  *   Operating System and version:\nMac-os / Centos 7\n\nAdditional context\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/2129?email_source=notifications&email_token=AABL2AV4FCKUCPOLFN6YVCTQFZE3HA5CNFSM4IOSIVN2YY3PNVWWK3TUL52HS4DFUVEXG43VMWVGG33NNVSW45C7NFSM4HGW4IZQ>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AABL2AUEL2MGV4LS7XMZKVLQFZE3HANCNFSM4IOSIVNQ>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523840728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523855721","html_url":"https://github.com/apache/couchdb/issues/2129#issuecomment-523855721","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2129","id":523855721,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg1NTcyMQ==","user":{"login":"ngspinu","id":35466661,"node_id":"MDQ6VXNlcjM1NDY2NjYx","avatar_url":"https://avatars.githubusercontent.com/u/35466661?v=4","gravatar_id":"","url":"https://api.github.com/users/ngspinu","html_url":"https://github.com/ngspinu","followers_url":"https://api.github.com/users/ngspinu/followers","following_url":"https://api.github.com/users/ngspinu/following{/other_user}","gists_url":"https://api.github.com/users/ngspinu/gists{/gist_id}","starred_url":"https://api.github.com/users/ngspinu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ngspinu/subscriptions","organizations_url":"https://api.github.com/users/ngspinu/orgs","repos_url":"https://api.github.com/users/ngspinu/repos","events_url":"https://api.github.com/users/ngspinu/events{/privacy}","received_events_url":"https://api.github.com/users/ngspinu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T10:59:16Z","updated_at":"2019-08-22T11:03:01Z","author_association":"NONE","body":"\r\nThis is what _explain says:\r\n![image](https://user-images.githubusercontent.com/35466661/63509337-98ffcf80-c4e4-11e9-9d8c-6dd46d1f3b2f.png)\r\n\r\nAnd this is how the index _design doc look like.\r\n![image](https://user-images.githubusercontent.com/35466661/63509298-7a99d400-c4e4-11e9-994b-7dcb75c53b4c.png)\r\n\r\nAnd this is what the execution_stats look like\r\n![image](https://user-images.githubusercontent.com/35466661/63509482-f136d180-c4e4-11e9-90fb-991510e7707a.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/523855721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]