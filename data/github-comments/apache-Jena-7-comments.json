[{"url":"https://api.github.com/repos/apache/jena/issues/comments/206374357","html_url":"https://github.com/apache/jena/pull/132#issuecomment-206374357","issue_url":"https://api.github.com/repos/apache/jena/issues/132","id":206374357,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjM3NDM1Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T13:31:34Z","updated_at":"2016-04-06T13:31:34Z","author_association":"MEMBER","body":"For now, I think that \"local locale\" is the best single choice because if the user wants the XSD standard form \"1.23\" they can workaround it with a call `str()` and print a string. Not perfect but gives them a way.\n\nXSD F&O v3.1 has \"picture strings\" : https://www.w3.org/TR/xpath-functions-3/#dt-picture-string : that looks like Java DecimalFormat, not printf style.\n\nI think most people are familiar with printf and things like padding strings and alignment are covered. We can refine the capabilities after the machinery is in.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206374357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206409700","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206409700","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206409700,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQwOTcwMA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T14:43:59Z","updated_at":"2016-04-06T14:43:59Z","author_association":"MEMBER","body":"OSGi requires some [metadata](https://en.wikipedia.org/wiki/OSGi#Bundles) to work, found in the `MANIFEST.MF` in `META-INF`. Most projects have that auto-created at packaging via tooling like Maven. If it's not there, it has to be added, as @jpullmann has done here. As I wrote [here](https://github.com/apache/jena/pull/134#issuecomment-205975853), we can (and should) try to get that upstream, to avoid exactly the special customization to which you refer here.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206409700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206426701","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206426701","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206426701,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQyNjcwMQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T15:26:23Z","updated_at":"2016-04-06T15:26:23Z","author_association":"MEMBER","body":"I don't understand why dexx-collections is different.\n\nv0.2 has a MANIFEST.MF as does the v0.5 (but it's rather minimal)\n\nAre you saying all our dependencies have that metadata except this one case?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206426701/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206433254","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206433254","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206433254,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQzMzI1NA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T15:37:06Z","updated_at":"2016-04-06T15:37:06Z","author_association":"MEMBER","body":"No, it's not the _presence_ of MAINFEST.MF (which I think tends to appear in pretty much any JAR or WAR). It's what's in it. There are specific headers in an OSGi version of MANIFEST.MF that support the sophisticated module-dependency management that OSGi does. For example, there are headers that explain what packages are exported from the module in question, and which are imported. If you don't need them (because you aren't using OSGi), no problem. You just ignore them, and most of us do, most of the time. But OSGi needs those headers to use the JAR as a module. As to whether all of our dependencies have it, I don't know, but it honestly wouldn't surprise me. It's so easy to include these days (autogenerated) that many, many projects do it by default. On the other hand, since `jena-osgi` is packaging up some dependencies internally, than it doesn't matter whether those guys do, because OSGi is not managing those guys. And those dependencies that `jena-osgi` is not packaging up internally certainly _do_ have the metadata (e.g. `httpcore-osgi`).\nSo one thing we could do here would be to have `jena-osgi` shade in the Dexx library the way it currently shades in, e.g. `xercesImpl`. But that's kind of hacky. I think the right thing to do here is work upstream and help Dexx get that little bit of metadata packed in, and then the job is done cleanly and forever.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206433254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206447863","html_url":"https://github.com/apache/jena/pull/135#issuecomment-206447863","issue_url":"https://api.github.com/repos/apache/jena/issues/135","id":206447863,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ0Nzg2Mw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T16:19:33Z","updated_at":"2016-04-06T16:33:01Z","author_association":"MEMBER","body":"DISREGARD: SEE NEXT COMMENT.\n\nThis PR would pull in Kotlin's runtime to the dependencies, because Dexx Collections has moved to Kotlin for current versions. Obviously, that warrants discussion, minimally, and perhaps it's a blocker. Maybe I should start looking for an alternative persistent data structures library? Or perhaps it's even time to think about a simple purpose-built bit of code for the two applications we actually have for persistent structures right now. (`Map<Node, T>` and `Set<Node>`)\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206447863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206452035","html_url":"https://github.com/apache/jena/pull/135#issuecomment-206452035","issue_url":"https://api.github.com/repos/apache/jena/issues/135","id":206452035,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ1MjAzNQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T16:32:46Z","updated_at":"2016-04-06T16:32:46Z","author_association":"MEMBER","body":"Oops, disregard previous comment: I misunderstood some advice from the Dexx Collection maintainers and upgraded somehow to a Kotlin version of the library instead of the Java version. Interesting to note that it is indeed JVM compatible. But the issue of Kotlin's runtime is not an issue at all, sorry for the confusion.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206452035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206462555","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206462555","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206462555,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjQ2MjU1NQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T16:53:25Z","updated_at":"2016-04-06T16:53:25Z","author_association":"MEMBER","body":"I've sent an [issue](https://github.com/andrewoma/dexx/issues/6) and [PR](https://github.com/andrewoma/dexx/pull/7) to Dexx Collections to get the OSGi metadata in there without our fancy footwork with moving Maven artifacts about.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206462555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206524142","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206524142","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206524142,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjUyNDE0Mg==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-06T19:29:50Z","updated_at":"2016-04-06T19:29:50Z","author_association":"MEMBER","body":"Dexx Collections has [merged](https://github.com/andrewoma/dexx/commit/7d0f242e64679b4f3fd4a5ee0598d29852df49ce) my PR to give OSGi metadata to their Java artifact. They are willing to make a Maven Central release, but they would like to make sure that the new OSGi metadata is good for us. @jpullmann, can you pull a fresh copy of `master` from Dexx, build it (it needs Gradle) and check it with this Jena PR? If that's annoying for you, just let me know. I can build you a Dexx artifact OSGi-fied according to my PR locally and get it to you.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206524142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206759395","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206759395","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206759395,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjc1OTM5NQ==","user":{"login":"jpullmann","id":5131106,"node_id":"MDQ6VXNlcjUxMzExMDY=","avatar_url":"https://avatars.githubusercontent.com/u/5131106?v=4","gravatar_id":"","url":"https://api.github.com/users/jpullmann","html_url":"https://github.com/jpullmann","followers_url":"https://api.github.com/users/jpullmann/followers","following_url":"https://api.github.com/users/jpullmann/following{/other_user}","gists_url":"https://api.github.com/users/jpullmann/gists{/gist_id}","starred_url":"https://api.github.com/users/jpullmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpullmann/subscriptions","organizations_url":"https://api.github.com/users/jpullmann/orgs","repos_url":"https://api.github.com/users/jpullmann/repos","events_url":"https://api.github.com/users/jpullmann/events{/privacy}","received_events_url":"https://api.github.com/users/jpullmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-07T08:32:28Z","updated_at":"2016-04-07T08:32:28Z","author_association":"NONE","body":"Sorry for being absent yesterday (all-day meeting)! The answer regarding OSGi given by @ajs6f is exhaustive. OSGi requires jars to explictily state their code (packages) and service dependencies (components) to become manageable by the framework. The former uses MANIFEST.MF headers. These were missing in Dexx collection (plain jar):\n\n`Manifest-Version: 1.0`\n\n and I added them via creating a \"Plug-in from Existing JAR Archives\" project in Eclipse:\n\n```\nManifest-Version: 1.0\nBundle-ManifestVersion: 2\nBundle-Name: Dexx Collection\nBundle-SymbolicName: com.github.andrewoma.dexx.collection\nBundle-Version: 0.4.0\nBundle-Vendor: https://github.com/andrewoma/dexx\nExport-Package: com.github.andrewoma.dexx.collection\n```\n\nSome \"internal\" packages are apparently not intended for sharing, I removed them from the list of \nexports now. As suggested I'll build and test the Dexx collection bundle..\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206759395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206791497","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206791497","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206791497,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjc5MTQ5Nw==","user":{"login":"jpullmann","id":5131106,"node_id":"MDQ6VXNlcjUxMzExMDY=","avatar_url":"https://avatars.githubusercontent.com/u/5131106?v=4","gravatar_id":"","url":"https://api.github.com/users/jpullmann","html_url":"https://github.com/jpullmann","followers_url":"https://api.github.com/users/jpullmann/followers","following_url":"https://api.github.com/users/jpullmann/following{/other_user}","gists_url":"https://api.github.com/users/jpullmann/gists{/gist_id}","starred_url":"https://api.github.com/users/jpullmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpullmann/subscriptions","organizations_url":"https://api.github.com/users/jpullmann/orgs","repos_url":"https://api.github.com/users/jpullmann/repos","events_url":"https://api.github.com/users/jpullmann/events{/privacy}","received_events_url":"https://api.github.com/users/jpullmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-07T09:55:32Z","updated_at":"2016-04-07T09:55:32Z","author_association":"NONE","body":"Dexx collection (0.6.0-SNAPSHOT) works fine!\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206791497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/206902158","html_url":"https://github.com/apache/jena/pull/134#issuecomment-206902158","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":206902158,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNjkwMjE1OA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-07T13:28:42Z","updated_at":"2016-04-07T13:28:42Z","author_association":"MEMBER","body":"Marvelous! I'll circle back with them and with any luck, we'll get a release eftsoons with the new metadata.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/206902158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/207436679","html_url":"https://github.com/apache/jena/pull/134#issuecomment-207436679","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":207436679,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzQzNjY3OQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-08T13:41:56Z","updated_at":"2016-04-08T13:41:56Z","author_association":"MEMBER","body":"Dexx Collections has released a `0.6` with OSGi metadata, and I've updated https://github.com/apache/jena/pull/135 to refer to it, so if we order that PR before this one and rebase this one, I think we can entirely elide the special handling for Dexx Collections, right?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/207436679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/207604389","html_url":"https://github.com/apache/jena/pull/134#issuecomment-207604389","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":207604389,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzYwNDM4OQ==","user":{"login":"jpullmann","id":5131106,"node_id":"MDQ6VXNlcjUxMzExMDY=","avatar_url":"https://avatars.githubusercontent.com/u/5131106?v=4","gravatar_id":"","url":"https://api.github.com/users/jpullmann","html_url":"https://github.com/jpullmann","followers_url":"https://api.github.com/users/jpullmann/followers","following_url":"https://api.github.com/users/jpullmann/following{/other_user}","gists_url":"https://api.github.com/users/jpullmann/gists{/gist_id}","starred_url":"https://api.github.com/users/jpullmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpullmann/subscriptions","organizations_url":"https://api.github.com/users/jpullmann/orgs","repos_url":"https://api.github.com/users/jpullmann/repos","events_url":"https://api.github.com/users/jpullmann/events{/privacy}","received_events_url":"https://api.github.com/users/jpullmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-08T20:58:27Z","updated_at":"2016-04-08T20:58:27Z","author_association":"NONE","body":"Right, the released Dexx collection 0.6 is fine and safe to use.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/207604389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/207822477","html_url":"https://github.com/apache/jena/pull/134#issuecomment-207822477","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":207822477,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNzgyMjQ3Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-09T17:52:14Z","updated_at":"2016-04-09T17:52:14Z","author_association":"MEMBER","body":"@ajs6f 's plan looks good to me.  #135 applied.\n\nChanging `JenaSubsystemRegistryBasic` looks fine.\n\nIf this PR is rebased, I'll apply it.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/207822477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/208077486","html_url":"https://github.com/apache/jena/pull/132#issuecomment-208077486","issue_url":"https://api.github.com/repos/apache/jena/issues/132","id":208077486,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODA3NzQ4Ng==","user":{"login":"ales004","id":1430794,"node_id":"MDQ6VXNlcjE0MzA3OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1430794?v=4","gravatar_id":"","url":"https://api.github.com/users/ales004","html_url":"https://github.com/ales004","followers_url":"https://api.github.com/users/ales004/followers","following_url":"https://api.github.com/users/ales004/following{/other_user}","gists_url":"https://api.github.com/users/ales004/gists{/gist_id}","starred_url":"https://api.github.com/users/ales004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ales004/subscriptions","organizations_url":"https://api.github.com/users/ales004/orgs","repos_url":"https://api.github.com/users/ales004/repos","events_url":"https://api.github.com/users/ales004/events{/privacy}","received_events_url":"https://api.github.com/users/ales004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-10T21:34:44Z","updated_at":"2016-04-10T21:34:44Z","author_association":"CONTRIBUTOR","body":"I think that commit bf14c982b8ae3eb8f040f55c28f8262efb5dad01 should do what you asked:\n- now also tests are Locale dependent.\n- sprintf accepts any number of arguments.\n- unkwnown classes are translated to string using the function you pointed out.\n\nWhat do you think?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/208077486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/208295483","html_url":"https://github.com/apache/jena/pull/132#issuecomment-208295483","issue_url":"https://api.github.com/repos/apache/jena/issues/132","id":208295483,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODI5NTQ4Mw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-11T11:25:14Z","updated_at":"2016-04-11T11:26:34Z","author_association":"MEMBER","body":"Looks good and I've merged it into master. Thanks!\n\n(I've added it the documentation for the function library.)\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/208295483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/208348383","html_url":"https://github.com/apache/jena/pull/134#issuecomment-208348383","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":208348383,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODM0ODM4Mw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-11T13:38:49Z","updated_at":"2016-04-11T13:38:49Z","author_association":"MEMBER","body":"I have applied this fix and pushed the result to branch \"osgi-fix-init\"\n\nIt builds with `mvn clean install` and because this fixes something that is otherwise broken, it seems better to me to apply it to master in the current state and then continue refining it if need be.\n\nThere are some changes and comment POM lines that it would be good to sort out:\n\nI'd like help with:\n- checking it works in an OSGi environment.\n- assessing `jena-osgi-test`\n- Can we remove the `<Require-Capability>`? The `JenaSubsystemRegistryBasic` has been changed.\n- `<Embed-Dependency>` and `<Import-Package>` for Xerces.  Jena uses internal features of Xerces and is sentisite to the version (OK - it rarely changes these days). Also, Xerces can be a endorsed jar making version management by the app not work. Is it necessary to `Import` it?\n\nThe branch does not pass the tests in `jena-osgi-test`.  Note that `jena-osgi-test` is not in the build because of [JENA-913](https://issues.apache.org/jira/browse/JENA-913) and [JENA-1037](https://issues.apache.org/jira/browse/JENA-1037) so the test failures are probably unrelated.\n\nFor the record: steps take to integrate the diff:\n- Add license header to `Activator.java`\n- De-tabbed the pom files and sorted out trailing white space.\n- Some formatting \"bit rot\" had set in.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/208348383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/208368153","html_url":"https://github.com/apache/jena/pull/134#issuecomment-208368153","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":208368153,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODM2ODE1Mw==","user":{"login":"jpullmann","id":5131106,"node_id":"MDQ6VXNlcjUxMzExMDY=","avatar_url":"https://avatars.githubusercontent.com/u/5131106?v=4","gravatar_id":"","url":"https://api.github.com/users/jpullmann","html_url":"https://github.com/jpullmann","followers_url":"https://api.github.com/users/jpullmann/followers","following_url":"https://api.github.com/users/jpullmann/following{/other_user}","gists_url":"https://api.github.com/users/jpullmann/gists{/gist_id}","starred_url":"https://api.github.com/users/jpullmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpullmann/subscriptions","organizations_url":"https://api.github.com/users/jpullmann/orgs","repos_url":"https://api.github.com/users/jpullmann/repos","events_url":"https://api.github.com/users/jpullmann/events{/privacy}","received_events_url":"https://api.github.com/users/jpullmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-11T14:15:48Z","updated_at":"2016-04-11T14:15:48Z","author_association":"NONE","body":"Thank you. I'll do the testing tomorrow, here my quick response:\nNeither Require-Capability, nor SPI-\\* headers are needed any more. Same for Bundle activator, but I'll leave it for extension purposes.\nIn the former approach using SPI Fly there were issues with inline Xerces. Using an embedded version makes it more selfcontained, alernatively it may require import of its particular Xerces version. \n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/208368153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/208531897","html_url":"https://github.com/apache/jena/pull/134#issuecomment-208531897","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":208531897,"node_id":"MDEyOklzc3VlQ29tbWVudDIwODUzMTg5Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-11T20:03:04Z","updated_at":"2016-04-11T20:12:00Z","author_association":"MEMBER","body":"Thanks for the quick response.  Things are looking good for this.\n\nAs Jena calls into the details of Xerces, not just the XML APIs, even a particular version with only some packages exported can cause problems.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/208531897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/209474708","html_url":"https://github.com/apache/jena/pull/134#issuecomment-209474708","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":209474708,"node_id":"MDEyOklzc3VlQ29tbWVudDIwOTQ3NDcwOA==","user":{"login":"jpullmann","id":5131106,"node_id":"MDQ6VXNlcjUxMzExMDY=","avatar_url":"https://avatars.githubusercontent.com/u/5131106?v=4","gravatar_id":"","url":"https://api.github.com/users/jpullmann","html_url":"https://github.com/jpullmann","followers_url":"https://api.github.com/users/jpullmann/followers","following_url":"https://api.github.com/users/jpullmann/following{/other_user}","gists_url":"https://api.github.com/users/jpullmann/gists{/gist_id}","starred_url":"https://api.github.com/users/jpullmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpullmann/subscriptions","organizations_url":"https://api.github.com/users/jpullmann/orgs","repos_url":"https://api.github.com/users/jpullmann/repos","events_url":"https://api.github.com/users/jpullmann/events{/privacy}","received_events_url":"https://api.github.com/users/jpullmann/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-13T14:29:57Z","updated_at":"2016-04-13T14:29:57Z","author_association":"NONE","body":"I created a new folder containing the initial Apache Karaf feature definition (jena-osgi-features). We might think of providing different distributions in the future each one defined by own feature. It has been reused to define the bundle set for the integration test:\n\n```\n              ... features(maven().groupId(\"org.apache.jena\")\n            .artifactId(\"jena-osgi-features\").type(\"xml\")\n            .classifier(\"features\")\n            .version(\"3.1.0-SNAPSHOT\"), \"jena\") ...\n```\n\nWhile testing I was reminded harshly why I removed xerces from the bundle earlier: Apache Karaf (3\\* and 4*) ships with endorsed xerces 2.11.0 and exports it per default to any installed bundle via boot delegation. The bundle cant's suppress (not import) these classes, resulting in 2 versions available and tests failing with: \n\n```\nCaused by: java.lang.VerifyError: (class: org/apache/xerces/impl/dv/xs/AbstractDateTimeDV, method: <clinit> signature: ()V) Bad type in putfield/putstatic\n    at org.apache.xerces.impl.dv.xs.XSSimpleTypeDecl.<clinit>(Unknown Source)[:]\n    at org.apache.xerces.impl.dv.xs.SchemaDVFactoryImpl.createBuiltInTypes(Unknown Source)[:]\n    at org.apache.xerces.impl.dv.xs.SchemaDVFactoryImpl.<clinit>(Unknown Source)[:]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.8.0_05]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)[:1.8.0_05]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)[:1.8.0_05]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:408)[:1.8.0_05]\n    at java.lang.Class.newInstance(Class.java:433)[:1.8.0_05]\n    at org.apache.xerces.impl.dv.ObjectFactory.newInstance(Unknown Source)[:]\n\n```\n\nAs expected, these configurations were proved to work:\n1. Apache Karaf \\* with endorsed xerces-2.11.0 + plain Jena-osgi (without xerces)\n2. Apache Karaf 4.0.4 without xerces-2.11.0 + Jena-osgi with inline xerces\n3. Apache Karaf 4.0.4 without xerces-2.11.0 + plain Jena-osgi with \"xerces\" feature installed\n\nIn case 2,3 I removed \"xerces-2.11.0.jar\" from \"lib/endorsed/\" and from the configuration of packages implicitly provided by runtime (org.osgi.framework.bootdelegation) in  \"etc/config.properties\".\nCase 3 seems to confirm, that importing xerces might work. Users may either install the \"xerces\" feature or resolve the indicated bundles manually:\n\n```\n<feature name=\"xerces\" version=\"2.11.0\">\n<bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xerces/2.11.0_1</bundle><bundle>mvn:org.apache.servicemix.bundles/org.apache.servicemix.bundles.xmlresolver/1.2_5</bundle>\n</feature>\n```\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/209474708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/210619357","html_url":"https://github.com/apache/jena/pull/134#issuecomment-210619357","issue_url":"https://api.github.com/repos/apache/jena/issues/134","id":210619357,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMDYxOTM1Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-15T20:01:37Z","updated_at":"2016-04-15T21:19:03Z","author_association":"MEMBER","body":"Thank you!  Recorded as [JENA-1164](https://issues.apache.org/jira/browse/JENA-1164).\n\nMerged into master and a development deployment build done.\n\nModule `jena-osgi-tests` are disabled [JENA-913](https://issues.apache.org/jira/browse/JENA-913) because they do not work from a preflight build, \"mvn clean verify\", only from \"mvn clean install\".  Preflight is used with a completely clean maven repo when preparing the releasable version.  `jena-osgi-tests does work if a previous build has installed beforehand.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/210619357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/211773507","html_url":"https://github.com/apache/jena/pull/95#issuecomment-211773507","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":211773507,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMTc3MzUwNw==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-19T07:34:33Z","updated_at":"2016-04-19T07:34:33Z","author_association":"CONTRIBUTOR","body":"I have briefly tested Fuseki2 with this PR applied as a backend for our software, Skosmos. I didn't find any problems. It seems to work for the basic use case - repeated requests are served faster now. It is not quite as fast as Varnish (which usually delivers cached responses in 1-3ms), but still a big improvement over the previous situation.\n\nI didn't look at effect on memory consumption or the cache eviction mechanism.\n\n+1 for merging.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/211773507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212021899","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212021899","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212021899,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjAyMTg5OQ==","user":{"login":"samaitra","id":369459,"node_id":"MDQ6VXNlcjM2OTQ1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/369459?v=4","gravatar_id":"","url":"https://api.github.com/users/samaitra","html_url":"https://github.com/samaitra","followers_url":"https://api.github.com/users/samaitra/followers","following_url":"https://api.github.com/users/samaitra/following{/other_user}","gists_url":"https://api.github.com/users/samaitra/gists{/gist_id}","starred_url":"https://api.github.com/users/samaitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samaitra/subscriptions","organizations_url":"https://api.github.com/users/samaitra/orgs","repos_url":"https://api.github.com/users/samaitra/repos","events_url":"https://api.github.com/users/samaitra/events{/privacy}","received_events_url":"https://api.github.com/users/samaitra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-19T17:10:08Z","updated_at":"2016-04-19T17:10:08Z","author_association":"MEMBER","body":"Thank you so much Osma for validating this PR.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212021899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212116452","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212116452","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212116452,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjExNjQ1Mg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-19T20:34:30Z","updated_at":"2016-04-19T20:34:30Z","author_association":"MEMBER","body":"An alternative (mentioned before) is to cache the query results before serialization and replay and iterator when there is a cache hit.  This could be done with an iterator wrapper that copies what it sees. This could also help with the fact that there is no control on the results - e.g. if the results are very long, it all gets cached.\n\nThere are advantages and disadvantages:\n1. +ve : If the same query with made with a different \"Accept\" header, there is no cache hit and the query results are cached twice.\n2. +ve : The copying iterator can have some policy controls like limiting caching results to N,000 rows. For robustness reasons, we probably want some limits here so as not to cache the dataset by accident.\n3. -ve : the results are serialized each time.  Talking to Jetty at all is going to be slower than Vanish and this adds to that. \n4. +ve : A bonus is that LIMIT/OFFSET can be done (a later feature) if the full results are executed.  If the query is LIMIT/OFFSET+ORDER (to get stablity - a common idiom), the exact query isn't being repeated but it is an expensive query.  Note this is alreay optimized by a TopN query so the interactions here are complicated but if a repeat results iterator is available, different LIMIT/OFFSET can be done.\n\nQuestions and specific points on this PR:\n1. There is an nasty corner case - for long queries, the client can go away during the response being sent back.  If I read the code right, the cache entry has already been created. has this n=been tested (it is hard to test for badly behaved clients).\n   1.How can an uninitialized cache entry get into the cache?\n2. SPARQL_Query, SPARQL_Query_Cache. What's the relationship here? There seems to be some duplication, log messages come out twice on first query and action.endRead() is called twice on first query.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212116452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212280436","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212280436","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212280436,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjI4MDQzNg==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T06:35:05Z","updated_at":"2016-04-20T06:35:05Z","author_association":"CONTRIBUTOR","body":"FWIW, I'm in favour of storing the result set before serialization, instead of caching the serialized results as is apparently currently done. It makes technical sense, for the reasons @afs mentioned. I don't care if it's slightly slower than Varnish - if I want the extreme speed, I can always use Varnish as an additional layer.\n\nFrom a server administrator perspective, I'd prefer having some sort of control over the cache size, preferably in terms of bytes rather than number of items. Currently I have no idea how much this cache will affect Fuseki memory usage. If it's, say, below 100MB currently, then I don't care that much, but if it can get into the gigabyte range (for example with many large result sets), then it's going to affect server performance and I'd perhaps rather allocate that memory to Varnish (which can also store compressed responses, so the same memory can fit many more objects).\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212280436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212299157","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212299157","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212299157,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjI5OTE1Nw==","user":{"login":"der","id":805075,"node_id":"MDQ6VXNlcjgwNTA3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/805075?v=4","gravatar_id":"","url":"https://api.github.com/users/der","html_url":"https://github.com/der","followers_url":"https://api.github.com/users/der/followers","following_url":"https://api.github.com/users/der/following{/other_user}","gists_url":"https://api.github.com/users/der/gists{/gist_id}","starred_url":"https://api.github.com/users/der/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/der/subscriptions","organizations_url":"https://api.github.com/users/der/orgs","repos_url":"https://api.github.com/users/der/repos","events_url":"https://api.github.com/users/der/events{/privacy}","received_events_url":"https://api.github.com/users/der/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T07:33:11Z","updated_at":"2016-04-20T07:33:11Z","author_association":"CONTRIBUTOR","body":"+1 to osma's comment on admin. We have some carefully tuned memory budgets for fuseki instances and some very large results set sizes (which we consume as a stream) so would prefer control over the cache parameters or at least the ability to turn it off.\n\nApologies for not having checked this myself but will this clear the cache as a result of a graph protocol operation, not just a sparql-update?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212299157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212405267","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212405267","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212405267,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQwNTI2Nw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T12:32:08Z","updated_at":"2016-04-20T13:52:07Z","author_association":"MEMBER","body":"Another +1 to @osma's comments. In re: serialization: it seems to me that the need here is for \"replay-ability\". Certainly serialization will do that, but at a very high cost, and the cost will vary with client behavior (suppose everyone asks for RDF/XML vs. everyone asks for Turtle). There are cheaper ways to get \"rewindable-ity\", such as have been mentioned (`ResultSetMem implements ResultSetRewindable` could be used, although the threading issues would need some work and it might be better to work from some fresh interface). Recently, @afs did work with node caching that showed impressive impact. If the results aren't serialized here, maybe that same technique could be used to further decrease memory consumption.\n\nOn another point, I suspect that immutable `CacheEntry` might be easier to reason about going forward, but maybe that's just me.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212405267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212483795","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212483795","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212483795,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ4Mzc5NQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T15:45:21Z","updated_at":"2016-04-20T15:45:21Z","author_association":"MEMBER","body":"@der - no it doesn't (ditto uploader). Good catch.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212483795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212484919","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212484919","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212484919,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjQ4NDkxOQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T15:48:52Z","updated_at":"2016-04-20T15:48:52Z","author_association":"MEMBER","body":"@ajs6f - this is about SELECT results at the moment.  The same principles will apply to model and dataset results but let's stick to result sets for now. \n\nEven if we capture the result set, not the serialization, a suitable abstraction can be put in place for that to spill to disk in the future.  The Thrift based format is fastest.\n\nGood point about the shared nodes - query answers share the datasets nodes.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212484919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212502652","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212502652","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212502652,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjUwMjY1Mg==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T16:31:12Z","updated_at":"2016-04-20T16:31:12Z","author_association":"MEMBER","body":"Ooh, sorry-- didn't catch that about SELECT-only.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212502652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212563381","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212563381","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212563381,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjU2MzM4MQ==","user":{"login":"samaitra","id":369459,"node_id":"MDQ6VXNlcjM2OTQ1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/369459?v=4","gravatar_id":"","url":"https://api.github.com/users/samaitra","html_url":"https://github.com/samaitra","followers_url":"https://api.github.com/users/samaitra/followers","following_url":"https://api.github.com/users/samaitra/following{/other_user}","gists_url":"https://api.github.com/users/samaitra/gists{/gist_id}","starred_url":"https://api.github.com/users/samaitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samaitra/subscriptions","organizations_url":"https://api.github.com/users/samaitra/orgs","repos_url":"https://api.github.com/users/samaitra/repos","events_url":"https://api.github.com/users/samaitra/events{/privacy}","received_events_url":"https://api.github.com/users/samaitra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T19:13:16Z","updated_at":"2016-04-20T19:13:16Z","author_association":"MEMBER","body":"@afs \n\nHi Andy\n1. When the query is executed first time then resultset iterator is obtained and stored as value in the cacheEntry. Once the resultset is iterated and written in OutputStream the data stored as value in cacheEntry.In case of badly behaving client if one OutputStream is closed the behaviour need to be tested for other OutputStream.\n2. SPARQL_Query_Cache checks if cacheEntry is present and if it contain data then set operation as READ_CACHE and ResponseResultSet writes the cache value in OutputStream. If cacheEntry is null then it delegates the responsibility of creation of cacheEntry to SPARQL_Query. SPARQL_Query executes the query, generates the cache key and initializes the cacheEntry with key as query key and value as resultSet.\n\nRegards\nSaikat \n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212563381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212574093","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212574093","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212574093,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjU3NDA5Mw==","user":{"login":"samaitra","id":369459,"node_id":"MDQ6VXNlcjM2OTQ1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/369459?v=4","gravatar_id":"","url":"https://api.github.com/users/samaitra","html_url":"https://github.com/samaitra","followers_url":"https://api.github.com/users/samaitra/followers","following_url":"https://api.github.com/users/samaitra/following{/other_user}","gists_url":"https://api.github.com/users/samaitra/gists{/gist_id}","starred_url":"https://api.github.com/users/samaitra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samaitra/subscriptions","organizations_url":"https://api.github.com/users/samaitra/orgs","repos_url":"https://api.github.com/users/samaitra/repos","events_url":"https://api.github.com/users/samaitra/events{/privacy}","received_events_url":"https://api.github.com/users/samaitra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T19:40:14Z","updated_at":"2016-04-20T19:40:14Z","author_association":"MEMBER","body":"@osma \n\nHi Osma\n\nInitially I had implemented the caching mechanism based on storing the resultSet in cache but the challenge was once the resultSet is exhausted then it will be closed and then when the cache hit happens the resultSet was no longer iterable as it was closed.\n\nGuava cache do not provide limit over cache size in terms of memory but on number of entries or a relative weight of entry that can be cached. Another possible option would be to use time based eviction policy to avoid over blocking memory for long time.\n\nRegards\nSaikat\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212574093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/212574529","html_url":"https://github.com/apache/jena/pull/95#issuecomment-212574529","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":212574529,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMjU3NDUyOQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-20T19:41:52Z","updated_at":"2016-04-20T19:41:52Z","author_association":"MEMBER","body":"@samaitra \n\n`ResultSetMem` speaks to your problem of exhaustion. It caches the results in the heap and can be \"rewound\" and even O(1) copied.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/212574529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213367009","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213367009","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213367009,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzM2NzAwOQ==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T10:11:48Z","updated_at":"2016-04-22T10:11:48Z","author_association":"CONTRIBUTOR","body":"I got interested in how this would affect our Fuseki performance if it were merged. This became quite an experiment and I'm reporting the results here.\n\nFirst of all I needed a realistic dataset and sets of queries. I decided to use four of the SKOS datasets we serve at Finto.fi, together with SPARQL queries performed by the Skosmos application. I used the Skosmos [performance test suite](https://github.com/NatLibFi/Skosmos/tree/master/tests/performance) to generate a set of 36k SPARQL queries that do not involve the jena-text index (for simplicity), of which 22% are CONSTRUCT queries and the remainder are SELECTs. There are 24k unique SPARQL queries in that set and they should be a fairly realistic approximation of queries that we actually encounter.\n\nTo give caching a chance, I considered each query twice and then took a random sample of 20k of the resulting 72k queries. This revised set has 14k unique queries, i.e. 30% of the queries are repetitions of previously seen queries. This is a rather difficult data set for caching, since there is so much variation - enough to completely fill the cache of 10000 query results. An ideal cache that stored everything and served requests with zero overhead would be able to obtain a 30% hit rate and a corresponding 30% decrease in average query time.\n\nI loaded the four SKOS datasets into named graphs of a TDB, as we usually do with Skosmos. I gave Fuseki 6GB of memory (`export JVM_ARGS=-Xmx6G`). I ran the tests on a Core i3-2330M laptop with 8GB RAM and an SSD running Ubuntu 14.04 64bit and OpenJDK 8. I tested four different Fuseki2 configurations:\n- vanilla: current 2.4.0-SNAPSHOT\n- jena-626: current snapshot after applying this PR\n- jena-626-1k: same as above, but reducing the cache size to 1000\n- varnish: same as vanilla, but with a 256MB in-memory, gzip-compressing Varnish cache in front\n- jena-626-varnish: same as jena-626, but with Varnish cache as above\n\nI ran the 20000 queries using a test script that prints out status information after every 1000 queries. This includes the average query response time in the previous 1000 requests and the current Fuseki memory usage, as indicated by the RSS value in `top` command output.\n\nThe results are in a [Google spreadsheet](https://docs.google.com/spreadsheets/d/1JY-vNW-iEmiGGVWl-D6It9lWHR65CkkdN2mQyWycWO8/edit?usp=sharing) and summarized in this diagram:\n![chart](https://cloud.githubusercontent.com/assets/1132830/14738105/76d9ae42-0888-11e6-8920-b7c81428d053.png)\nThick lines indicate memory usage, thin lines response time. Unfortunately I couldn't get the diagram to show legends for all the setups - blue is vanilla, yellow is jena-626, purple is jena-626-1k, green is varnish, red is jena-626-varnish.\n\nOne immediate finding is that Fuseki memory usage fluctuates a lot, so it is very difficult to measure accurately. I didn't have the patience to run this multiple times, so the values are very rough estimates. For comparison figures, I used the average memory usage of the 10 final measurements (i.e. when the 10000 item cache should be full, or nearly so). Response time measurements are much more consistent.\n\nCompared to vanilla, the other configurations have\n- jena-626: 22% better performance, memory usage +480MB\n- jena-626-1k: 9% better performance, memory usage +110MB\n- varnish: 30% better performance, memory usage unchanged (but Varnish used 100MB at the end)\n- jena-626-varnish: 27% better performance, memory usage +130MB (plus Varnish 100MB)\n\nObservations:\n- Long-term memory consumption may increase by hundreds of megabytes with this patch. **I think that the current cache size of 10000 items is too high.** A default size of 1000 would bring almost half the performance benefits with much lower memory usage.\n- Varnish is very close to the ideal cache here. It beats this query cache hands down. Also it appears that a 256MB cache using gzip compression could fit at least 30000 query results.\n- For setups which already use Varnish, this query cache only increases memory consumption, with no improvement in performance. **It should be possible to turn this cache off.**\n\nOther thoughts:\n- I'm quite often optimizing SPARQL queries, and when doing that I'm interested in worst-case (cold cache) performance. A cache like this would make this very dificult, as sometimes cached responses would be served very fast. I think that the cache should respect the `Pragma: no-cache` HTTP header as well as similar HTTP 1.1 `Cache-control` headers so that it is possible to avoid caching for specific queries.\n\nI put the scripts, queries and data in a [tarball](http://tester-os-kktest.lib.helsinki.fi/jena-626-performance.tar.gz) (100MB) in case someone wants to play around with the test suite. If the implementation of this cache is changed to e.g. store ResultSets instead of serializations, then the tests can be run again.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213367009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213467383","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213467383","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213467383,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzQ2NzM4Mw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T15:10:27Z","updated_at":"2016-04-22T15:10:27Z","author_association":"MEMBER","body":"@osma - really great analysis and very insightful.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213467383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213468612","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213468612","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213468612,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzQ2ODYxMg==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T15:14:47Z","updated_at":"2016-04-22T15:14:47Z","author_association":"MEMBER","body":":+1: @osma++\nPart of the takeaway here for me is that when it comes to caching bits, we're unlikely ever to do as well as specialist tools that have been carefully worked on and optimized. If Jena is going to do really useful caching, it's going to be caching something other than bits, something specific to what Jena does, like node-tuples or result rows or the like.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213468612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213496231","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213496231","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213496231,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzQ5NjIzMQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T16:17:35Z","updated_at":"2016-04-22T23:27:37Z","author_association":"MEMBER","body":"**Intent and Abstraction**\n\nFuseki-caching isn't going to beat Vanish so I think the better use of Fuseki-caching is supporting cases flexibility like (in the future) paging results.\n\n**Design**\n\nI've sketched something in a branch in a work area: it is (supposed) to be neutral as to the style of caching.\n\nhttps://github.com/afs/jena/tree/fuseki-cache\n\nThis is a sketch and not for serious use  - there is some quick-and-easy implementation, it's only lightly tested for one dataset only. No configurability.\n\nThe classes changed are: `HttpAction`, `ResultsCache`, and `SPARQL_Query` to use the cache. `SPARQL_Query` has operations `processViaCache`, `prepareForCache`, `insertIntoCache`. \n\n1:: It deals with two concurrent attempts to set the by letting them both run (it's the same answer right?!) and set the cache.\n\n2:: The cache is invalided when `HttpAction.beginWrite` is called so all update routes are caught (SPARQL Update, GSP and the Uploader). I don't like that - it seems asymmetric that `beginWrite` is used and it assumes MR+SW.\n\nCache actions are logged `** Cache`.  The actual implementation of `ResultsCache` is just some code to do something.\n\n**Space**\n\nIf the query result (not the serialization) is stored, I would expect the memory footprint will be less because of sharing nodes with the original dataset.  Any graph pattern matching variable ends up with the node-by-reference.  Calculated expressions are fresh nodes. Long literals are shared.\n\nLiterals from the data are not extra cost in memory. Let's assume that calculated nodes are small.  This is usually true - but they may be a lot of them.\n\nThe calculation of the memory cost, is now approximated by the total number of cells in the results, i.e approximate with \"num of rows \\* num of columns\" and it can be calculated while capturing the `ResutlSet` copy.  We could put limits on the size of results sets cached and on total number of cells.\n\nSerialized results can easily sized.  They do not share space though.\n\n**Configuration**\n\nWe need some configuration control, both server-wide on the `fuseki:Server` object in config.ttl and on each service.  Or use \"Context\" - caching is import so my suggestion is have properties to cl;early set values.  \n\nThe server-wide case is, I think, less important. I suggest putting the configuration on service, not the dataset, so you can have two different policies, like cached and not-cached, on the same data. \n\nThe default should be \"no caching\".\n\nThe having two services addresses the \"cold cache/development\" use case.\n\nWe should still obey `Pragma: no-cache` and `Cache-control` but there are quite a lot of options and details so it might be wise to not aim to have everything for a first release, especially if caching is default off.\n\n**Other**\n\nRelated-but-different observation: supporting conditional-GETs would be very good.  Just keep an epoxy number/timestamp for each dataset.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213496231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213500724","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213500724","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213500724,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzUwMDcyNA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T16:33:35Z","updated_at":"2016-04-22T16:33:35Z","author_association":"MEMBER","body":"On the question of conditional-GET, there has been some [discussion](https://pony-poc.apache.org/thread.html/Zdrf49p8jphmwje) about ETags in this connection that might be helpful.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213500724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213564399","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213564399","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213564399,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzU2NDM5OQ==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T19:40:05Z","updated_at":"2016-04-22T19:40:05Z","author_association":"CONTRIBUTOR","body":"@ajs6f said:\n\n> If Jena is going to do really useful caching, it's going to be caching something other than bits, something specific to what Jena does, like node-tuples or result rows or the like.\n\nThere are indeed some things a Jena-specific cache can do better than a general purpose cache such as Varnish. Many have already been mentioned, but to recap:\n1. The cache can be aware of changes in the underlying data and keep responses \"forever\", but invalidate them immediately when data changes. An external cache has to be manually purged. (Supporting ETag, Last-Modified, conditional GETs etc. would help automatically invalidate an external cache though)\n2. If the cache is on a ResultSet level, things like providing different serializations for the same result and paging become possible.\n3. The cache can be aware of the cost of executing the query. Holding on to a result that can be recalculated from the data in 5ms is basically a waste of memory. Perhaps the cache, when it has to evict older results, could prefer keeping results that took a long time to generate. Or there could be a threshold that determines what to cache - e.g. don't keep anything that was generated in less than 10ms.\n4. An external cache is always more infrastructure to set up and maintain, and configuring a general purpose HTTP proxy is not exactly trivial. Even if I intend to use Varnish in production, this kind of integrated cache could be very useful in development and testing. Just a single setting could give a noticeable performance boost to Fuseki.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213564399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213566543","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213566543","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213566543,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzU2NjU0Mw==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T19:48:35Z","updated_at":"2016-04-22T19:48:35Z","author_association":"CONTRIBUTOR","body":"@afs I tried to build your fuseki-cache branch to test it but `mvn package` resulted in a lot of unit test failures. Maybe I'm doing something wrong though. I'll try again later.\n\nAm I right that the cache is currently only storing 10 items? I'd probably want to increase that before doing any serious testing...\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213566543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/213624032","html_url":"https://github.com/apache/jena/pull/95#issuecomment-213624032","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":213624032,"node_id":"MDEyOklzc3VlQ29tbWVudDIxMzYyNDAzMg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-22T23:30:17Z","updated_at":"2016-04-22T23:30:17Z","author_association":"MEMBER","body":"It is not for serious use! It is to explore the cases mentioned earlier like different update paths and concurrent cache entry creation.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/213624032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/216165347","html_url":"https://github.com/apache/jena/pull/137#issuecomment-216165347","issue_url":"https://api.github.com/repos/apache/jena/issues/137","id":216165347,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjE2NTM0Nw==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-02T09:13:58Z","updated_at":"2016-05-02T09:13:58Z","author_association":"CONTRIBUTOR","body":"I made this into a PR rather than merging directly because I thought I may have missed something obvious. But if it looks good to others, I will merge it.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/216165347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/216488533","html_url":"https://github.com/apache/jena/pull/137#issuecomment-216488533","issue_url":"https://api.github.com/repos/apache/jena/issues/137","id":216488533,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNjQ4ODUzMw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-03T10:19:18Z","updated_at":"2016-05-03T10:19:18Z","author_association":"MEMBER","body":"Looks good to me.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/216488533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/217628988","html_url":"https://github.com/apache/jena/pull/131#issuecomment-217628988","issue_url":"https://api.github.com/repos/apache/jena/issues/131","id":217628988,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNzYyODk4OA==","user":{"login":"joelkuiper","id":971293,"node_id":"MDQ6VXNlcjk3MTI5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/971293?v=4","gravatar_id":"","url":"https://api.github.com/users/joelkuiper","html_url":"https://github.com/joelkuiper","followers_url":"https://api.github.com/users/joelkuiper/followers","following_url":"https://api.github.com/users/joelkuiper/following{/other_user}","gists_url":"https://api.github.com/users/joelkuiper/gists{/gist_id}","starred_url":"https://api.github.com/users/joelkuiper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joelkuiper/subscriptions","organizations_url":"https://api.github.com/users/joelkuiper/orgs","repos_url":"https://api.github.com/users/joelkuiper/repos","events_url":"https://api.github.com/users/joelkuiper/events{/privacy}","received_events_url":"https://api.github.com/users/joelkuiper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-07T11:00:10Z","updated_at":"2016-05-07T11:00:10Z","author_association":"NONE","body":" I kinda need ComplexPhraseQueryParser for some search, would it be good to add that too?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/217628988/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/217813686","html_url":"https://github.com/apache/jena/pull/131#issuecomment-217813686","issue_url":"https://api.github.com/repos/apache/jena/issues/131","id":217813686,"node_id":"MDEyOklzc3VlQ29tbWVudDIxNzgxMzY4Ng==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-09T09:09:03Z","updated_at":"2016-05-09T09:09:03Z","author_association":"CONTRIBUTOR","body":"@joelkuiper Please create a new JIRA ticket for ComplexPhraseQueryParser support on issues.apache.org, as this issue/PR is already closed.\n\nIt shouldn't be very hard to add support for ComplexPhraseQueryParser because the framework is already done - it's basically adding an extra case to `TextIndexLucene.getQueryParser()` along with a unit test that can be pretty much copied and pasted from `TestDatasetWithAnalyzingQueryParser`, except changing the actual test to something which only ComplexPhraseQueryParser can do. Pull requests also very welcome ;)\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/217813686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218735541","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218735541","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218735541,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODczNTU0MQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T11:54:46Z","updated_at":"2016-05-12T11:54:46Z","author_association":"MEMBER","body":"`Z` is the same-value-as `+00:00`, testing both is ideal.\n\nIt is commenting that if the data is Z, which it is for `exprSprintf_05b`, the outcome can be a day behind (i.e. Hawaii direction) or ahead (New Zealand direction) or the same (UTC) depending on the exact time.\n\nTimezones range from -14:00 to +14:00.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218735541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218737575","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218737575","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218737575,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODczNzU3NQ==","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T12:05:50Z","updated_at":"2016-05-12T12:05:50Z","author_association":"MEMBER","body":"Righto, so we just update the comment later. I got an error while testing in my current time zone (Pacific/Auckland).\n\nWith the code in the master branch, test receives 2005-10-14T10:09:43+11:00 as parameter. The possible values are [10 13,2005, 10 14,2005].\n\nInside the test, 2005-10-14T13:09:43Z is computed as: \"10 15,2005\", and the test fails.\n\nWill test the pull request to confirm whether it is failing too or not.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218737575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218739759","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218739759","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218739759,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODczOTc1OQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T12:17:04Z","updated_at":"2016-05-12T12:17:04Z","author_association":"MEMBER","body":"`test_exprSprintf_05` is ignoring it's first argument.  Bother.\n\nIf NodeValue.makeDateTime is changed:\n\n```\nString exprStr = \"afn:sprintf('%1$tm %1$te,%1$tY',   +NodeValue.makeDateTime(**nodeStr**).toString()+\")\" ;\n```\n\ndoes it work?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218739759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218740515","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218740515","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218740515,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODc0MDUxNQ==","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T12:20:57Z","updated_at":"2016-05-12T12:20:57Z","author_association":"MEMBER","body":"I think so. I noticed the first argument was not being used, tried that in Eclipse, and the test passed.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218740515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218743887","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218743887","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218743887,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODc0Mzg4Nw==","user":{"login":"kinow","id":304786,"node_id":"MDQ6VXNlcjMwNDc4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/304786?v=4","gravatar_id":"","url":"https://api.github.com/users/kinow","html_url":"https://github.com/kinow","followers_url":"https://api.github.com/users/kinow/followers","following_url":"https://api.github.com/users/kinow/following{/other_user}","gists_url":"https://api.github.com/users/kinow/gists{/gist_id}","starred_url":"https://api.github.com/users/kinow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kinow/subscriptions","organizations_url":"https://api.github.com/users/kinow/orgs","repos_url":"https://api.github.com/users/kinow/repos","events_url":"https://api.github.com/users/kinow/events{/privacy}","received_events_url":"https://api.github.com/users/kinow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T12:36:54Z","updated_at":"2016-05-12T12:36:54Z","author_association":"MEMBER","body":"FWIW, tested the pull request locally, the test seems to have passed (the build is still running, but will take a while. Arq tests passed fine).\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218743887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/218751154","html_url":"https://github.com/apache/jena/pull/143#issuecomment-218751154","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":218751154,"node_id":"MDEyOklzc3VlQ29tbWVudDIxODc1MTE1NA==","user":{"login":"ales004","id":1430794,"node_id":"MDQ6VXNlcjE0MzA3OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1430794?v=4","gravatar_id":"","url":"https://api.github.com/users/ales004","html_url":"https://github.com/ales004","followers_url":"https://api.github.com/users/ales004/followers","following_url":"https://api.github.com/users/ales004/following{/other_user}","gists_url":"https://api.github.com/users/ales004/gists{/gist_id}","starred_url":"https://api.github.com/users/ales004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ales004/subscriptions","organizations_url":"https://api.github.com/users/ales004/orgs","repos_url":"https://api.github.com/users/ales004/repos","events_url":"https://api.github.com/users/ales004/events{/privacy}","received_events_url":"https://api.github.com/users/ales004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-12T13:07:11Z","updated_at":"2016-05-12T13:07:11Z","author_association":"CONTRIBUTOR","body":"I had to sobstitute Z with 00:00 because the SimpleDateFormat is accepting either \nyyyy-MM-dd'T'HH:mm:ssXXX\nor \nyyyy-MM-dd'T'HH:mm:ssZ\nnot both at the time.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/218751154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219221447","html_url":"https://github.com/apache/jena/pull/141#issuecomment-219221447","issue_url":"https://api.github.com/repos/apache/jena/issues/141","id":219221447,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTIyMTQ0Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-14T13:51:08Z","updated_at":"2016-05-14T13:51:08Z","author_association":"MEMBER","body":"Thanks!\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219221447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219229233","html_url":"https://github.com/apache/jena/pull/143#issuecomment-219229233","issue_url":"https://api.github.com/repos/apache/jena/issues/143","id":219229233,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTIyOTIzMw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-14T16:23:10Z","updated_at":"2016-05-14T16:23:10Z","author_association":"MEMBER","body":"I includes the new tests and kept the temporary tests so testing happens both ways.\n\nTests renumbered as well.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219229233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219381471","html_url":"https://github.com/apache/jena/pull/146#issuecomment-219381471","issue_url":"https://api.github.com/repos/apache/jena/issues/146","id":219381471,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTM4MTQ3MQ==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-16T09:07:04Z","updated_at":"2016-05-16T09:07:04Z","author_association":"CONTRIBUTOR","body":"Thanks for the PR!\n\nThe code looks good, as you say it's following the pattern established by JENA-1134.\n\nYou are right about the unit tests - the inheritance hierarchy of analyzer-related unit tests is rather messy. There is a very long inheritance chain and e.g. TestDatasetWithAnalyzingQueryParser  indirectly inherits from TestDatasetWithKeywordAnalyzer. There is actually a sort of logic here, because the tests specified in TestDatasetWithKeywordAnalyzer will also be run on the subclasses, as the analyzer configurations are compatible. This gives us some unit tests \"for free\".\n\nI did some reorganizing of the test classes, namely, I abstracted out AbstractTestDatasetWithAnalyzer from TestDatasetWithKeywordAnalyzer (see https://github.com/apache/jena/commit/8a20f238ffc5aed23648b038132fe74cbca2c85c). Unless I'm missing ssomething, you should now be able to inherit from AbstractTestDatasetWithAnalyzer and avoid doing the full makeSpec in your test class. Would you mind switching over to that?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219381471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219598981","html_url":"https://github.com/apache/jena/pull/146#issuecomment-219598981","issue_url":"https://api.github.com/repos/apache/jena/issues/146","id":219598981,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTU5ODk4MQ==","user":{"login":"adolby","id":6783975,"node_id":"MDQ6VXNlcjY3ODM5NzU=","avatar_url":"https://avatars.githubusercontent.com/u/6783975?v=4","gravatar_id":"","url":"https://api.github.com/users/adolby","html_url":"https://github.com/adolby","followers_url":"https://api.github.com/users/adolby/followers","following_url":"https://api.github.com/users/adolby/following{/other_user}","gists_url":"https://api.github.com/users/adolby/gists{/gist_id}","starred_url":"https://api.github.com/users/adolby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adolby/subscriptions","organizations_url":"https://api.github.com/users/adolby/orgs","repos_url":"https://api.github.com/users/adolby/repos","events_url":"https://api.github.com/users/adolby/events{/privacy}","received_events_url":"https://api.github.com/users/adolby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-17T01:51:12Z","updated_at":"2016-05-17T01:51:12Z","author_association":"CONTRIBUTOR","body":"Thank you for working on that refactoring! You're right, abstracting out makeSpec reduces the repetition for the ComplexPhraseQueryParser test. I've switched it over to inheriting from AbstractTestDatasetWithAnalyzer. Are there other changes you'd like to see in this PR? I'm not sure if/where documentation should be updated to reflect having the ComplexPhraseQueryParser as a QueryParser option.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219598981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219629095","html_url":"https://github.com/apache/jena/pull/146#issuecomment-219629095","issue_url":"https://api.github.com/repos/apache/jena/issues/146","id":219629095,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTYyOTA5NQ==","user":{"login":"osma","id":1132830,"node_id":"MDQ6VXNlcjExMzI4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/1132830?v=4","gravatar_id":"","url":"https://api.github.com/users/osma","html_url":"https://github.com/osma","followers_url":"https://api.github.com/users/osma/followers","following_url":"https://api.github.com/users/osma/following{/other_user}","gists_url":"https://api.github.com/users/osma/gists{/gist_id}","starred_url":"https://api.github.com/users/osma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osma/subscriptions","organizations_url":"https://api.github.com/users/osma/orgs","repos_url":"https://api.github.com/users/osma/repos","events_url":"https://api.github.com/users/osma/events{/privacy}","received_events_url":"https://api.github.com/users/osma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-17T06:18:31Z","updated_at":"2016-05-17T06:18:31Z","author_association":"CONTRIBUTOR","body":"I think the code is now good for merging. Thanks a lot!\n\n@afs Can I just merge the code to master, or is there some legal policy that must be followed for contributions like this? I've never merged PRs initiated by others.\n\nAs for documentation, it lives outside this github repository (in the ASF SVN) and you can submit a patch via the web CMS - just click on \"Improve this page\" at the top of https://jena.apache.org/documentation/query/text-query.html\n\nWe can close this PR after the code is merged, then resolve the JIRA issue after the documentation has been updated.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219629095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219649421","html_url":"https://github.com/apache/jena/pull/146#issuecomment-219649421","issue_url":"https://api.github.com/repos/apache/jena/issues/146","id":219649421,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY0OTQyMQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-17T08:13:58Z","updated_at":"2016-05-17T08:22:45Z","author_association":"MEMBER","body":"You can merge it.\n\nThe legal issue is that it must be clearly the intent to contribute and that be recorded on Apache infrastructure.\n\nA Pull Request is taking a step that clearly says \"This is for the project\" and email is sent to the prject dev list at Apache so a PR meets that the requirements.\n\nWe ask for additional paperwork when the contribution is large, multi-person or otherwise complex;  and if it comes by a different route to JIRA, or a PR to the project, we'll have to think about it.\n\n A PR like this can be dealt with as being clearly intended as being a contribution.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219649421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/219678956","html_url":"https://github.com/apache/jena/pull/144#issuecomment-219678956","issue_url":"https://api.github.com/repos/apache/jena/issues/144","id":219678956,"node_id":"MDEyOklzc3VlQ29tbWVudDIxOTY3ODk1Ng==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-05-17T10:27:45Z","updated_at":"2016-05-17T10:27:45Z","author_association":"MEMBER","body":"Tests: exprStrNormalizeUnicode10, exprStrNormalizeUnicode11\n\nI don't know why they are failing either. May be it's because the version of Unicodein Java is not new enough.\n\nI've commented these out for the moment.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/219678956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/224571562","html_url":"https://github.com/apache/jena/pull/148#issuecomment-224571562","issue_url":"https://api.github.com/repos/apache/jena/issues/148","id":224571562,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDU3MTU2Mg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-08T12:16:55Z","updated_at":"2016-06-08T12:16:55Z","author_association":"MEMBER","body":"Same function that checks for xsd:dateTime, xsd:date or xsd:time is the right thing to do.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/224571562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/224572361","html_url":"https://github.com/apache/jena/pull/148#issuecomment-224572361","issue_url":"https://api.github.com/repos/apache/jena/issues/148","id":224572361,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDU3MjM2MQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-08T12:21:05Z","updated_at":"2016-06-08T12:21:05Z","author_association":"MEMBER","body":"It's a good thing it's summer where I am (British Summer Time)!\n\nMy reading of https://www.w3.org/TR/xpath-functions-3/#timezone.functions is that conversions where there is no provided timezone use local time, including daylight savings time.\n\nIn the tests `TimeZone.getDefault().getRawOffset()` returns the offset without regard for the local daylight savings time.\n\nAlso allowing for timezones which are negative offsets, I came up with:\n\n```\n private String getDynamicDurationString(){\n        int tzOffset = TimeZone.getDefault().getOffset(new Date().getTime())/(1000*60) ; \n        String x = \"PT\"+Math.abs(tzOffset)+\"M\";\n        if ( tzOffset < 0 )\n            x = \"-\"+x ;\n        return x ;\n    }\n```\n\n`XSDFuncOp.adjustDatetimeToTimezone` also needs this.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/224572361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/224573549","html_url":"https://github.com/apache/jena/pull/148#issuecomment-224573549","issue_url":"https://api.github.com/repos/apache/jena/issues/148","id":224573549,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDU3MzU0OQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-08T12:26:41Z","updated_at":"2016-06-08T12:26:41Z","author_association":"MEMBER","body":"Other than my comments above - this looks good to include.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/224573549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/224806823","html_url":"https://github.com/apache/jena/pull/148#issuecomment-224806823","issue_url":"https://api.github.com/repos/apache/jena/issues/148","id":224806823,"node_id":"MDEyOklzc3VlQ29tbWVudDIyNDgwNjgyMw==","user":{"login":"ales004","id":1430794,"node_id":"MDQ6VXNlcjE0MzA3OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1430794?v=4","gravatar_id":"","url":"https://api.github.com/users/ales004","html_url":"https://github.com/ales004","followers_url":"https://api.github.com/users/ales004/followers","following_url":"https://api.github.com/users/ales004/following{/other_user}","gists_url":"https://api.github.com/users/ales004/gists{/gist_id}","starred_url":"https://api.github.com/users/ales004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ales004/subscriptions","organizations_url":"https://api.github.com/users/ales004/orgs","repos_url":"https://api.github.com/users/ales004/repos","events_url":"https://api.github.com/users/ales004/events{/privacy}","received_events_url":"https://api.github.com/users/ales004/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-09T05:58:15Z","updated_at":"2016-06-09T05:58:15Z","author_association":"CONTRIBUTOR","body":"Andy,\nyou are right! I was not thinking that with daylight savings the timezone offset can change. Thank you for your input!\n\nI just push the changes you requested and all tests are passing.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/224806823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/228335674","html_url":"https://github.com/apache/jena/pull/47#issuecomment-228335674","issue_url":"https://api.github.com/repos/apache/jena/issues/47","id":228335674,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODMzNTY3NA==","user":{"login":"stain","id":253413,"node_id":"MDQ6VXNlcjI1MzQxMw==","avatar_url":"https://avatars.githubusercontent.com/u/253413?v=4","gravatar_id":"","url":"https://api.github.com/users/stain","html_url":"https://github.com/stain","followers_url":"https://api.github.com/users/stain/followers","following_url":"https://api.github.com/users/stain/following{/other_user}","gists_url":"https://api.github.com/users/stain/gists{/gist_id}","starred_url":"https://api.github.com/users/stain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stain/subscriptions","organizations_url":"https://api.github.com/users/stain/orgs","repos_url":"https://api.github.com/users/stain/repos","events_url":"https://api.github.com/users/stain/events{/privacy}","received_events_url":"https://api.github.com/users/stain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-24T12:42:00Z","updated_at":"2016-06-24T12:42:00Z","author_association":"MEMBER","body":"OK, I've rebased for 3.1.1-SNAPSHOT, updated for Java 8 and fixed the System properties. \n\nAs for the `FIXME` comment let's just leave it here, unless someone understands or would be willing to investigate what is the semantic difference between the `LPInterpreter` constructor [without clauses](https://github.com/apache/jena/blob/master/jena-core/src/main/java/org/apache/jena/reasoner/rulesys/impl/LPInterpreter.java#L99) and [with clauses](https://github.com/apache/jena/blob/master/jena-core/src/main/java/org/apache/jena/reasoner/rulesys/impl/LPInterpreter.java#L111) (which could be [empty](https://github.com/apache/jena/blob/master/jena-core/src/main/java/org/apache/jena/reasoner/rulesys/impl/LPInterpreter.java#L130))  but then would not use `engine.getRuleStore().codeFor(goal)`.\n\n(Perhaps raise that as a new Jira issue?)\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/228335674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/228865439","html_url":"https://github.com/apache/jena/pull/47#issuecomment-228865439","issue_url":"https://api.github.com/repos/apache/jena/issues/47","id":228865439,"node_id":"MDEyOklzc3VlQ29tbWVudDIyODg2NTQzOQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-06-27T20:29:11Z","updated_at":"2016-06-27T20:29:11Z","author_association":"MEMBER","body":"+1 : Looks good to me.\n\nI'll merge the java changes if there are no other comments. \n\nThe POM change isn't needed.  jena-shaded-guava comes via jena-base.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/228865439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231536354","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231536354","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231536354,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTUzNjM1NA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T14:15:03Z","updated_at":"2016-07-09T14:31:26Z","author_association":"MEMBER","body":"I haven't got my head around the new API yet - this is just a preliminary comment.\n\nIt is a bit of a change around authentication but I think it is the right thing to do.  It seems to me that the only other choice is not to migrate to the new API which over time will become a nuisance.\n\nDocumenting the migration (for the release notes) will be helpful - maybe an example for user/password in the HttpOp class javadoc. If someone can grok that, they can see how to migrate their own code.\n\nc.f.\nhttps://hc.apache.org/httpcomponents-client-ga/httpclient/examples/org/apache/http/examples/client/ClientAuthentication.java\n\nOne thought - it looks like the new style is to treat `CloseableHttpClient` as a one time use object. That means a try-resource in `HttpOp.exec`.  I'm not sure how widespread this is. `getDefaultHttpClient` `setDefaultHttpClient` should be changed to be a `HttpClientBuilder`?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231536354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231537313","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231537313","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231537313,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTUzNzMxMw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T14:36:02Z","updated_at":"2016-07-09T14:36:02Z","author_association":"MEMBER","body":"I'm not totally clear about the style for `CloseableHttpClient`, either. I'll poke around and see if I can get a better reading on that. And I'll start jotting up some docs.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231537313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231537492","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231537492","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231537492,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTUzNzQ5Mg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T14:40:04Z","updated_at":"2016-07-09T14:40:04Z","author_association":"MEMBER","body":"Another thought: Does `HttpContext` with every `HttpClient` usage make an sense now?  We now rely on `HttpClient` a lot more and `HttpContext` seems mainly for cookies. Maybe, versions of calls with `HttpClient` but without `HttpContext` might make sense or might not.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231537492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231538723","html_url":"https://github.com/apache/jena/pull/149#issuecomment-231538723","issue_url":"https://api.github.com/repos/apache/jena/issues/149","id":231538723,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTUzODcyMw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T15:04:20Z","updated_at":"2016-07-09T15:04:20Z","author_association":"MEMBER","body":"+1 : Looks good to me.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231538723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231552367","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231552367","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231552367,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU1MjM2Nw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T19:46:26Z","updated_at":"2016-07-09T19:46:26Z","author_association":"MEMBER","body":"As I understand it (for what that's worth) `HttpContext` is mostly about the idea of a \"conversation\", so if you've got some kind of session going on, or a series of request-response cycles that compose some kind of larger stateful activity, `HttpContext` is where you stash that state/context. (E.g. a cookie store.) So I guess since we want to provide the kinds of facilities needed for SPARQL protocols, and authN is definitely part of that story, maybe we would want to provide `HttpContext` as a sidecar param?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231552367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231557578","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231557578","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231557578,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU1NzU3OA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-09T21:44:55Z","updated_at":"2016-07-09T21:44:55Z","author_association":"MEMBER","body":"There is markdown documentation to go with this.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231557578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579192","html_url":"https://github.com/apache/jena/pull/139#issuecomment-231579192","issue_url":"https://api.github.com/repos/apache/jena/issues/139","id":231579192,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU3OTE5Mg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T09:17:49Z","updated_at":"2016-07-10T09:17:49Z","author_association":"MEMBER","body":"Apologies that this has taken so long.\n\n> TODO some documentation. Where should it be added? The best form would be small sample code. \n\nExamples can go in `jena-arq/src-examples/arq/examples/riot/`. A new section about JSON-LD output for https://jena.apache.org/documentation/io/rdf-output.html, and use code links to apache/jena github, master branch. \n\nSymbols are fine but URI's please! (changing `RIOT.riotIRI` to \"http://jena.apache.org/riot\"):\n\ne.g.  in JsonLDWriter\n\n```\n    public static final Symbol JSONLD_CONTEXT = Symbol.create(\"JSONLD_CONTEXT\");\n```\n\n**RDFDataMgr**\n\nThe way to set things specially for a writing is to do:\n\n```\n    WriterDatasetRIOT w = RDFDataMgr.createDatasetWriter(RDFFormat.JSONLD_COMPACT_FLAT) ;\n    w.write(System.out,  dataset.asDatasetGraph(), null, \"http://base\", RIOT.getContext()) ;\n```\n\nrather than add `RDFDataMgr.write(..., Context cxt)`\n\nSee [examples/riot/ExRIOT_2](https://github.com/apache/jena/blob/master/jena-arq/src-examples/arq/examples/riot/ExRIOT_2.java) for an example for a reader.\n\nIf you want, add a new API class specific to JSON output `JsonLdMgr` (to go in the same package as `RDFDataMgr`) with JSON-LD-specific functions to wrap common ways to call JSON-LD output. \n\n**Constants**\n\nThis could be tidied out with a subclass of `RDFFormatVariant` that carries JSON-LD information:\n\n```\n    // From JSON writer\n    public static enum JSONLD_FORMAT {\n        COMPACT, FLATTEN, EXPAND, FRAME\n    }\n\n    static class JSONLDFormatVariant extends RDFFormatVariant {\n        private JSONLD_FORMAT option ;\n        private boolean prettyJson ;\n\n        public JSONLDFormatVariant(String name, boolean prettyJson, JSONLD_FORMAT option) { \n            super(name) ;\n            this.options = option ;\n            this.prettyJson = prettyJson ;\n        }\n\n        public boolean prettyJson() { return prettyJson ; }\n\n        public boolean option(JSONLD_FORMAT fmt) {\n            for ( JSONLD_FORMAT f : options ) {\n                if ( fmt == f )\n                    return true ; \n            }\n            return false ;\n        }\n    }\n\n\n    private static final RDFFormatVariant JSONLD_EXPAND_PRETTY      = new JSONLDFormatVariant(\"expand pretty\", true, JSONLD_FORMAT.EXPAND) ;\n    private static final RDFFormatVariant JSONLD_EXPAND_FLAT        = new JSONLDFormatVariant(\"expand flat\", false, JSONLD_FORMAT.COMPACT) ;\n    ...\n```\n\nthen use in JsonLDWriter by casting to and JSONLDFormatVariant\n\n```\n        JSONLDFormatVariant format = (JSONLDFormatVariant)format ;\n```\n\n```\n        if ( format.option(COMPACT) ) {\n          ...\n        }\n```\n\n**Tests**\n\nI ran the tests for JSONLD but got:\n\n```\n10:13:04 WARN  JsonLDWriter              :: JSONLD_CONTEXT value is not a String. Assuming a context object expected by JSON-LD JsonLdProcessor.compact or flatten\n10:13:04 INFO  TestJsonLDWriter          :: Sorry to get this exception\norg.apache.jena.riot.RiotException: com.github.jsonldjava.core.JsonLdError: loading remote context failed: http://schema.org/\n    at org.apache.jena.riot.out.JsonLDWriter.serialize(JsonLDWriter.java:218)\n    at org.apache.jena.riot.out.JsonLDWriter.write(JsonLDWriter.java:123)\n    at org.apache.jena.riot.out.JsonLDWriter.write(JsonLDWriter.java:129)\n    at org.apache.jena.riot.system.RiotLib$WriterAdapter.write(RiotLib.java:376)\n    at org.apache.jena.riot.RDFDataMgr.write$(RDFDataMgr.java:1232)\n    ...\n```\n\nWe need to be able to run the tests without assuing that external network resources are availanle and functioning.\n\nThe tests and build should work if there is no extenral connectivity.\n\n**Code organisation**\n\nIf you feel there classes, fell free to create a package org.apache.jena.riot.out.jsonld to put them together.\n\n**Other**\n\nIndentation: spaces, not tabs please.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579288","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231579288","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231579288,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU3OTI4OA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T09:20:29Z","updated_at":"2016-07-10T09:20:29Z","author_association":"MEMBER","body":"What would a sidecar parameter look like in this situation?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579500","html_url":"https://github.com/apache/jena/pull/95#issuecomment-231579500","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":231579500,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU3OTUwMA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T09:27:07Z","updated_at":"2016-07-10T09:27:07Z","author_association":"MEMBER","body":"Another use case:\n\nIn my day-job, we have a local (same JVM) database because calling to a remote database (even same datacenter) is too expensive.  RDF is used to drive the UI for HTTP/HTML requests. This means we get a lot of small calls into the database for every single HTTP request. Going off machine for each call does not work.  Getting larger parts of the RDF (i.e. a few large remote calls) only gets us into having a local graph and many calls to that.\n\nWe can of course add our own caching because we control the whole stack but it suggests a design whereby caching is done by the `QueryExecution` and not as part of Fuseki HTTP request handling, either specific to Fuseki or as a general feature in ARQ.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231579500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231580613","html_url":"https://github.com/apache/jena/pull/139#issuecomment-231580613","issue_url":"https://api.github.com/repos/apache/jena/issues/139","id":231580613,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU4MDYxMw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T09:57:55Z","updated_at":"2016-07-10T09:57:55Z","author_association":"MEMBER","body":"JIRA created to track this: https://issues.apache.org/jira/browse/JENA-1208\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231580613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231586741","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231586741","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231586741,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU4Njc0MQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T12:33:29Z","updated_at":"2016-07-10T12:33:29Z","author_association":"MEMBER","body":"I'm imagining a bag of new methods in `HttpOp` similar to what's there now, with the additional `HttpContext` param, and the methods that are now there would call through those new methods with `null` in that slot, much like what happens now with many of the other params. Then I would have to extend the availability of `HttpContext` out into `HttpQuery` and `QueryEngineHTTP`, etc.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231586741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231588494","html_url":"https://github.com/apache/jena/pull/139#issuecomment-231588494","issue_url":"https://api.github.com/repos/apache/jena/issues/139","id":231588494,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU4ODQ5NA==","user":{"login":"fpservant","id":5287470,"node_id":"MDQ6VXNlcjUyODc0NzA=","avatar_url":"https://avatars.githubusercontent.com/u/5287470?v=4","gravatar_id":"","url":"https://api.github.com/users/fpservant","html_url":"https://github.com/fpservant","followers_url":"https://api.github.com/users/fpservant/followers","following_url":"https://api.github.com/users/fpservant/following{/other_user}","gists_url":"https://api.github.com/users/fpservant/gists{/gist_id}","starred_url":"https://api.github.com/users/fpservant/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fpservant/subscriptions","organizations_url":"https://api.github.com/users/fpservant/orgs","repos_url":"https://api.github.com/users/fpservant/repos","events_url":"https://api.github.com/users/fpservant/events{/privacy}","received_events_url":"https://api.github.com/users/fpservant/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T13:15:18Z","updated_at":"2016-07-10T13:17:33Z","author_association":"CONTRIBUTOR","body":"Andy\n\n> Apologies that this has taken so long.\n\nno problem, really. Thanks for this answer. Give me some time to take all your valuable comments into account.\n\njust one remark:\n\n> I ran the tests for JSONLD but got:\n> \n> > 10:13:04 INFO  TestJsonLDWriter          :: Sorry to get this exception\n> > org.apache.jena.riot.RiotException: com.github.jsonldjava.core.JsonLdError: loading remote context failed: http://schema.org/\n> \n> The tests and build should work if there is no extenral connectivity.\n\nI understand the point, and I'll take it into account. But actually, I'm happy to see this, because it shows that one problem that I had at the time has been solved. As was noted in a comment in the code:\n\n```\n    } catch (Throwable e) {\n        Logger.getLogger(getClass()).info(\"Sorry to get this exception\",e);\n    }\n\n    // It seems to work, but there's a problem with httpclient version: the one used by jena\n    // is not compatible with the one expected by JSONLD-java API. We get\n    /*\njava.lang.NoSuchMethodError: org.apache.http.impl.client.cache.CacheConfig.custom()Lorg/apache/http/impl/client/cache/CacheConfig$Builder;\n```\n\nLooks like the work on \" (JENA-576) Upgrade Apache HTTP Client to 4.3\" has solved the issue\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231588494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231591757","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231591757","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231591757,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU5MTc1Nw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T14:26:57Z","updated_at":"2016-07-10T14:29:07Z","author_association":"MEMBER","body":"Semaphore hand out permits so 0 means no permit.\n\nThere is a `semaStart.release()` in `run()` and the corresponding `acquire` in the lambda in `create` which has comments. Renaming the local `semaStart` would help.\n\n`ThreadTxn` came about for testing purposes - `Txn` is the main contribution.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231591757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231592893","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231592893","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231592893,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU5Mjg5Mw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T14:51:21Z","updated_at":"2016-07-10T14:51:21Z","author_association":"MEMBER","body":"Thanks, @afs , that definitely helps. IIUC, `ThreadTxn` looks like kind of a \"single-class\" version of the mechanics in `Txn`?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231592893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231593263","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231593263","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231593263,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU5MzI2Mw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T14:59:04Z","updated_at":"2016-07-10T15:04:39Z","author_association":"MEMBER","body":"We usually use `try-finally` for the transaction cycle, i.e.\n\n```\ntry {\n    transactionalThing.begin(readWrite);\n    //do some stuff\n    transactionalThing.commit(); // if a write transaction\n}\nfinally {\n    transactionalThing.end();\n}\n```\n\nLooking at `onThrowable` it looks like if the `Transactional txn` throws anything other than a `JenaTransactionException` out of `txn.abort()`, then `txn.end()` will never get called. Does that open a hole for `txn` to never actually finish aborting/ending?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231593263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231593577","html_url":"https://github.com/apache/jena/pull/95#issuecomment-231593577","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":231593577,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTU5MzU3Nw==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-10T15:04:19Z","updated_at":"2016-07-10T15:04:19Z","author_association":"MEMBER","body":"So the caching in this scenario, @afs, would be handled by `QueryEngineHTTP`/`QueryExecutionBase`?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231593577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231667104","html_url":"https://github.com/apache/jena/pull/95#issuecomment-231667104","issue_url":"https://api.github.com/repos/apache/jena/issues/95","id":231667104,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTY2NzEwNA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T08:04:05Z","updated_at":"2016-07-11T08:04:05Z","author_association":"MEMBER","body":"That's possible though they come into existence a bit late in the process of setting up the query.\n\nThat are quite a few of possibilities up to an including making `QueryExecutionFactory` have a policy object where all the internal calls like `makePlan` become calls to a singleton object.\n\nFor local:\n\n`QueryEngineFactory` is the interface - it can choose to handle a request or not via `accept` so a policy on what to cache is possible, (e.g. some datasets not others, some queries no others). It would accept whether it has it cached or will cache it and call back into setup.\n\nThat might be special code in `QueryEngineRegistry.find`, a special policy for `QueryExecutionFactory`\n\nOr maybe as part of `QueryExecutionFactory.makePlan` looking aside to the cache or adding `QueryEngineFactory` to the usual dispatch chain. That seems cleaner in some ways but it'll need a way to to allow it to also call the `QueryEngineRegistry` to find the factory that will actually produce new results else it'll loop on the recursion.\n\nA note of caution: the dispatch chain does get modified to add and remove the reference query engine for example.\n\nFor remote:\n\nTo support Fuseki, we don't need remote caching.\n\nThe remote case and the local case follow different paths but again a singleton policy at `QueryExecutionFactory.createServiceRequest/3`\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231667104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231670852","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231670852","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231670852,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTY3MDg1Mg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T08:23:06Z","updated_at":"2016-07-11T09:00:02Z","author_association":"MEMBER","body":"If one of the transaction operations throws anything then the system is broken. It should not happen and would indicate an unrepairable error condition (e.g. NPE, broken journal). \n\nAfter that, all bets are off! It `abort` goes wrong and `end` is called, anything might happen but it's going to be bad.\n\nThe try-finally is good when the application code at \"do some stuff\" throws an exception.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231670852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231693348","html_url":"https://github.com/apache/jena/pull/149#issuecomment-231693348","issue_url":"https://api.github.com/repos/apache/jena/issues/149","id":231693348,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTY5MzM0OA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T10:04:45Z","updated_at":"2016-07-11T10:04:45Z","author_association":"MEMBER","body":"I was assuming these vocabularies would be part of the main distribution and build.  If so, the POM file is not needed (nor invoked).\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231693348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231694013","html_url":"https://github.com/apache/jena/pull/149#issuecomment-231694013","issue_url":"https://api.github.com/repos/apache/jena/issues/149","id":231694013,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTY5NDAxMw==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T10:07:57Z","updated_at":"2016-07-11T10:07:57Z","author_association":"MEMBER","body":"If we were starting from scratch, `vocabularies/w3c` makes sense.  We already have `RDF`, `RDFS`, `OWL`, `SKOS` which are W3C vocabularies and they are in `vocabularies/`.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231694013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231711596","html_url":"https://github.com/apache/jena/pull/153#issuecomment-231711596","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":231711596,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTcxMTU5Ng==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T11:43:30Z","updated_at":"2016-07-11T11:43:30Z","author_association":"MEMBER","body":"Okay, so the appropriateness of `finally` depends on where you are (app vs. system code). Makes sense.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231711596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231713057","html_url":"https://github.com/apache/jena/pull/149#issuecomment-231713057","issue_url":"https://api.github.com/repos/apache/jena/issues/149","id":231713057,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTcxMzA1Nw==","user":{"login":"barthanssens","id":1866301,"node_id":"MDQ6VXNlcjE4NjYzMDE=","avatar_url":"https://avatars.githubusercontent.com/u/1866301?v=4","gravatar_id":"","url":"https://api.github.com/users/barthanssens","html_url":"https://github.com/barthanssens","followers_url":"https://api.github.com/users/barthanssens/followers","following_url":"https://api.github.com/users/barthanssens/following{/other_user}","gists_url":"https://api.github.com/users/barthanssens/gists{/gist_id}","starred_url":"https://api.github.com/users/barthanssens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/barthanssens/subscriptions","organizations_url":"https://api.github.com/users/barthanssens/orgs","repos_url":"https://api.github.com/users/barthanssens/repos","events_url":"https://api.github.com/users/barthanssens/events{/privacy}","received_events_url":"https://api.github.com/users/barthanssens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T11:51:44Z","updated_at":"2016-07-11T11:51:44Z","author_association":"CONTRIBUTOR","body":"Ah OK, so should I go back  to the original proposal (just adding the classes to ...vocabularies), or use a separate package (as suggested in https://issues.apache.org/jira/browse/JENA-1206, e.g. \"vocabularies.egov\") ? Thanks. \n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231713057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231773734","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231773734","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231773734,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTc3MzczNA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T15:41:01Z","updated_at":"2016-07-11T15:41:01Z","author_association":"MEMBER","body":"[A useful description of `HttpContext`.](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e223)\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231773734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/231833691","html_url":"https://github.com/apache/jena/pull/151#issuecomment-231833691","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":231833691,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMTgzMzY5MQ==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-11T19:09:13Z","updated_at":"2016-07-11T19:09:13Z","author_association":"MEMBER","body":"Reading through the current HTTP Commons docs leaves me with the impression that we do not need to close clients after use in `HttpOp`, but that we do need to see to it that _responses_ are closed. However, tracing through to `oaj.riot.web.HttpResponseLib.nullResponse` in conjunction with advice [here](https://hc.apache.org/httpcomponents-client-ga/tutorial/html/fundamentals.html#d5e145) assures me that we are doing what we need to do. The only case that I find uncertain is in methods like `TypedInputStream execHttpGet(String url)` wherein we really cannot be sure that the request is properly closed. I'm not sure what to do about this short of trying to take `HttpOp` completely internal, which seems like a massive overreaction.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/231833691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232129945","html_url":"https://github.com/apache/jena/pull/150#issuecomment-232129945","issue_url":"https://api.github.com/repos/apache/jena/issues/150","id":232129945,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjEyOTk0NQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-12T18:06:28Z","updated_at":"2016-07-12T18:06:28Z","author_association":"MEMBER","body":"Ping @der\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232129945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232133906","html_url":"https://github.com/apache/jena/pull/153#issuecomment-232133906","issue_url":"https://api.github.com/repos/apache/jena/issues/153","id":232133906,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjEzMzkwNg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-12T18:19:56Z","updated_at":"2016-07-12T18:19:56Z","author_association":"MEMBER","body":"Merged but this code always benefits from ongoing code review!\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232133906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232150266","html_url":"https://github.com/apache/jena/pull/149#issuecomment-232150266","issue_url":"https://api.github.com/repos/apache/jena/issues/149","id":232150266,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjE1MDI2Ng==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-12T19:17:02Z","updated_at":"2016-07-12T19:17:02Z","author_association":"MEMBER","body":"I don't have any strong feelings - I'm just following the current pattern (for better or worse).\n\nI doubt we will have name clashes (independent vocabs - not versions).\n\nThe minor downside of classifying by package is implicit domain. DCAT will be hopefully used much more widely than eGov.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232150266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232162004","html_url":"https://github.com/apache/jena/pull/133#issuecomment-232162004","issue_url":"https://api.github.com/repos/apache/jena/issues/133","id":232162004,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjE2MjAwNA==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-12T20:01:38Z","updated_at":"2016-07-12T20:01:38Z","author_association":"MEMBER","body":"This seems like a high-impact change (even though it will result in warnings not errors) for users and the code.\n\nI think we should not make this change.\n\nThe option of new API over the same core is worthwhile pursuing.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232162004/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232164320","html_url":"https://github.com/apache/jena/pull/133#issuecomment-232164320","issue_url":"https://api.github.com/repos/apache/jena/issues/133","id":232164320,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjE2NDMyMA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-12T20:09:16Z","updated_at":"2016-07-12T20:09:16Z","author_association":"MEMBER","body":"Would that (new API) look like a set of wrappers? Or perhaps a method on `Model` that reflects the instance into an `AutoCloseable` subtype of `Model`?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232164320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232277876","html_url":"https://github.com/apache/jena/pull/150#issuecomment-232277876","issue_url":"https://api.github.com/repos/apache/jena/issues/150","id":232277876,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjI3Nzg3Ng==","user":{"login":"der","id":805075,"node_id":"MDQ6VXNlcjgwNTA3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/805075?v=4","gravatar_id":"","url":"https://api.github.com/users/der","html_url":"https://github.com/der","followers_url":"https://api.github.com/users/der/followers","following_url":"https://api.github.com/users/der/following{/other_user}","gists_url":"https://api.github.com/users/der/gists{/gist_id}","starred_url":"https://api.github.com/users/der/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/der/subscriptions","organizations_url":"https://api.github.com/users/der/orgs","repos_url":"https://api.github.com/users/der/repos","events_url":"https://api.github.com/users/der/events{/privacy}","received_events_url":"https://api.github.com/users/der/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T07:29:54Z","updated_at":"2016-07-13T07:29:54Z","author_association":"CONTRIBUTOR","body":"Thanks for the ping. I've seen it but not had time to look at yet.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232277876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232285101","html_url":"https://github.com/apache/jena/pull/133#issuecomment-232285101","issue_url":"https://api.github.com/repos/apache/jena/issues/133","id":232285101,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjI4NTEwMQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T08:02:57Z","updated_at":"2016-07-13T08:02:57Z","author_association":"MEMBER","body":"I have no idea! Maybe it's a revised current API, maybe it's influenced by different design patterns. \nAny API is more likely to work over Graph/Triple/Node than add another layer on Model.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232285101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232356616","html_url":"https://github.com/apache/jena/pull/151#issuecomment-232356616","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":232356616,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM1NjYxNg==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T13:35:52Z","updated_at":"2016-07-13T13:35:52Z","author_association":"MEMBER","body":"The need for closing responses isn't new - all typed input streams should be closed in the codebase currently because I had to go hunting them all down with the old `HttpOp` code.  So, hopefully, theer are no issues here.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232356616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232357518","html_url":"https://github.com/apache/jena/pull/151#issuecomment-232357518","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":232357518,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM1NzUxOA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T13:39:06Z","updated_at":"2016-07-13T13:39:06Z","author_association":"MEMBER","body":"Right, I think we're fine as long as Jena itself is actually the client (e.g. as part of `SERVICE` action in a query). It was the situation in which some app is using HTTP via `HttpOp` in which an input stream could \"leak\". But I think that's really just not Jena's problem, right? If you walk away with a resource from the network, you need to deal with it properly. Jena can't run after you pulling on your shirt to remind you.\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232357518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232357725","html_url":"https://github.com/apache/jena/pull/151#issuecomment-232357725","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":232357725,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM1NzcyNQ==","user":{"login":"afs","id":101362,"node_id":"MDQ6VXNlcjEwMTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/101362?v=4","gravatar_id":"","url":"https://api.github.com/users/afs","html_url":"https://github.com/afs","followers_url":"https://api.github.com/users/afs/followers","following_url":"https://api.github.com/users/afs/following{/other_user}","gists_url":"https://api.github.com/users/afs/gists{/gist_id}","starred_url":"https://api.github.com/users/afs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afs/subscriptions","organizations_url":"https://api.github.com/users/afs/orgs","repos_url":"https://api.github.com/users/afs/repos","events_url":"https://api.github.com/users/afs/events{/privacy}","received_events_url":"https://api.github.com/users/afs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T13:39:47Z","updated_at":"2016-07-13T13:39:47Z","author_association":"MEMBER","body":"So to check my understanding:\n\nFor each operation that takes a `HttpClient` there is one that takes a `HttpClient` and an `HttpContext`.\n\nNot so bad - we don't have the `HttpAutheticator` ones any more. \n\nOf course, if java had default parameters values like scala ...\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232357725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232366071","html_url":"https://github.com/apache/jena/pull/151#issuecomment-232366071","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":232366071,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM2NjA3MQ==","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T14:07:35Z","updated_at":"2016-07-13T14:07:35Z","author_association":"MEMBER","body":"My major concern with this pull request is that it replaces a nicely encapsulated API with requiring users to directly interact with a lower level API. It seems like there should be room for compromise i.e. Keeping `HttpAuthenticator` but perhaps having it simply operate over a `HttpClientBuilder` instead\n\nI am also unclear how more complex authentication such as forms based authentication which requires some sort of out of band login and presenting some token with each request e.g. a cookie. Part of the reason the original API was introduced by myself was that I needed to interact with systems that relied upon forms based authentication. As I understand that the proposed new API I would have to manage that login myself and pass the resulting `HttpContext` everywhere that needs it?\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232366071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/jena/issues/comments/232367163","html_url":"https://github.com/apache/jena/pull/151#issuecomment-232367163","issue_url":"https://api.github.com/repos/apache/jena/issues/151","id":232367163,"node_id":"MDEyOklzc3VlQ29tbWVudDIzMjM2NzE2Mw==","user":{"login":"rvesse","id":2104864,"node_id":"MDQ6VXNlcjIxMDQ4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/2104864?v=4","gravatar_id":"","url":"https://api.github.com/users/rvesse","html_url":"https://github.com/rvesse","followers_url":"https://api.github.com/users/rvesse/followers","following_url":"https://api.github.com/users/rvesse/following{/other_user}","gists_url":"https://api.github.com/users/rvesse/gists{/gist_id}","starred_url":"https://api.github.com/users/rvesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvesse/subscriptions","organizations_url":"https://api.github.com/users/rvesse/orgs","repos_url":"https://api.github.com/users/rvesse/repos","events_url":"https://api.github.com/users/rvesse/events{/privacy}","received_events_url":"https://api.github.com/users/rvesse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-07-13T14:11:40Z","updated_at":"2016-07-13T14:11:53Z","author_association":"MEMBER","body":"It also potentially makes it much harder to define complex authentication schemes. For example the current API allows you to define an authenticator that presents different credentials to different URLs e.g. I might need different credentials for accessing the `/query` and `/update` endpoints of a Fuseki instance. In the new API it seems I would have to manually manage this and make sure I present the right client or context to each API call or encapsulating object\n","reactions":{"url":"https://api.github.com/repos/apache/jena/issues/comments/232367163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]