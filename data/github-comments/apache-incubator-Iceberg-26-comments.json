[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585321700","html_url":"https://github.com/apache/iceberg/pull/795#issuecomment-585321700","issue_url":"https://api.github.com/repos/apache/iceberg/issues/795","id":585321700,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTMyMTcwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T17:30:48Z","updated_at":"2020-02-12T17:30:48Z","author_association":"CONTRIBUTOR","body":"Reopening to trigger Travis. I tried restarting the python test, but it didn't pick up the fix from #794.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585321700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585322587","html_url":"https://github.com/apache/iceberg/pull/795#issuecomment-585322587","issue_url":"https://api.github.com/repos/apache/iceberg/issues/795","id":585322587,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTMyMjU4Nw==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T17:32:52Z","updated_at":"2020-02-12T17:32:52Z","author_association":"CONTRIBUTOR","body":"Merged master into the branch, it should be green now ðŸ¤ž ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585322587/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585338034","html_url":"https://github.com/apache/iceberg/issues/792#issuecomment-585338034","issue_url":"https://api.github.com/repos/apache/iceberg/issues/792","id":585338034,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTMzODAzNA==","user":{"login":"sudssf","id":10800873,"node_id":"MDQ6VXNlcjEwODAwODcz","avatar_url":"https://avatars.githubusercontent.com/u/10800873?v=4","gravatar_id":"","url":"https://api.github.com/users/sudssf","html_url":"https://github.com/sudssf","followers_url":"https://api.github.com/users/sudssf/followers","following_url":"https://api.github.com/users/sudssf/following{/other_user}","gists_url":"https://api.github.com/users/sudssf/gists{/gist_id}","starred_url":"https://api.github.com/users/sudssf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sudssf/subscriptions","organizations_url":"https://api.github.com/users/sudssf/orgs","repos_url":"https://api.github.com/users/sudssf/repos","events_url":"https://api.github.com/users/sudssf/events{/privacy}","received_events_url":"https://api.github.com/users/sudssf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T18:04:34Z","updated_at":"2020-02-12T18:04:34Z","author_association":"CONTRIBUTOR","body":"Thank you @rdsr  changes you suggested are correct way to write schema. I will close this issue as its not real issue. thanks again for quick reply.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585338034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585359978","html_url":"https://github.com/apache/iceberg/issues/751#issuecomment-585359978","issue_url":"https://api.github.com/repos/apache/iceberg/issues/751","id":585359978,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTM1OTk3OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-12T18:50:05Z","updated_at":"2020-02-12T18:50:05Z","author_association":"CONTRIBUTOR","body":"I think that keeping both data and metadata is the correct behavior. That way, drop removes a reference to the table, but the table itself is still readable should you wish to recover it. If Iceberg were to drop metadata, then it would be extremely difficult to actually use the data files that are left if you wanted to recover the table.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585359978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585618846","html_url":"https://github.com/apache/iceberg/issues/751#issuecomment-585618846","issue_url":"https://api.github.com/repos/apache/iceberg/issues/751","id":585618846,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTYxODg0Ng==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T08:54:19Z","updated_at":"2020-02-13T08:54:19Z","author_association":"CONTRIBUTOR","body":"@rdblue got your idea. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585618846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585637463","html_url":"https://github.com/apache/iceberg/issues/732#issuecomment-585637463","issue_url":"https://api.github.com/repos/apache/iceberg/issues/732","id":585637463,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTYzNzQ2Mw==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T09:40:17Z","updated_at":"2020-02-13T09:45:30Z","author_association":"CONTRIBUTOR","body":"Thanks for sharing your insight! It is of great help for us.\r\nI made some tests regarding the \"metadata retries\" based on Hive Catalog. It seems that it is not \"cheap\" 8-ï¼‰\r\n\r\nThe report is as below:\r\n**1. Environment**\r\n(1) Linux, 8 core + 16G mem, *1\r\n(2) Mac,  6 core + 16G mem, *1\r\n\r\n**2. Setup**\r\n(1) Iceberg table: Partitioned by identity(field_a), 10,000 partitions. Each partition only contains 1 row. \r\n(2) Local spark, master as local[*]\r\n(3) Hive metastore, co-located on the same machine as Spark.\r\n\r\n**3. Workload**\r\nN delete concurrently. Each is to delete one row. So no conflict.\r\nOur delete is Copy-on-Write, so the delete is mainly a overwrite or a delete call against Iceberg\r\n\r\n**4. Result**\r\n(Linux and Mac show similar results)\r\n(1) 5 concurrent deletes: done in 13s\r\n(2) 10 concurrent deletes:\r\na. Need to set commit.retry.num-retries to 10, done in 1m12s.\r\nb. If commit.retry.num-retries takes the default (as 4), 5 deletes failed after 5 retries\r\n(3) 50 concurrent deletes: \r\na. Set commit.retry.num-retries to 50 (A smaller value might be also ok), done in about 20-25 min. But it is achieved only when I have a fresh metastore (restart the process).\r\nb. When tested with a long run metastore, most of the delete (80%) stop retrying because the default timeout of commit.retry.total-timeout-ms (30min) is reached. The failed ones retried 7 times in average.\r\n\r\nI am not sure if some bad settings (in Iceberg or Hive metastore...) lead to the result above. Please kindly share your insights or your setup/settings if it is ok.\r\n\r\nIt seems that here is no conflict but only competing for \"metadata swap\" and retries, because a lot of the following error message could be seen:\r\n```\r\norg.apache.iceberg.exceptions.CommitFailedException: Base metadata location 'aaa' is not same as the current table metadata location 'bbb' for table\r\n```\r\nSo I am guess if the metadata swap is that \"cheap\"...  ^_^ Correct me if I am wrong.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585637463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585641633","html_url":"https://github.com/apache/iceberg/issues/179#issuecomment-585641633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/179","id":585641633,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTY0MTYzMw==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T09:50:13Z","updated_at":"2020-02-13T09:50:13Z","author_association":"CONTRIBUTOR","body":"I just submitted an initial workable version of streaming read, I would like see the comments about the current solution, if this is a feasible solution, what should be changed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585641633/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585879721","html_url":"https://github.com/apache/iceberg/issues/732#issuecomment-585879721","issue_url":"https://api.github.com/repos/apache/iceberg/issues/732","id":585879721,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTg3OTcyMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T17:37:08Z","updated_at":"2020-02-13T17:37:08Z","author_association":"CONTRIBUTOR","body":"I don't think that this test workload is representative of real use cases. Iceberg is an analytic store, not a transactional store. 50 concurrent processes deleting a single row isn't something that we would expect to run. I'm not sure that 10 concurrent deletes is something we would expect, either, because we expect these to be grouped into larger operations. An operation in Iceberg is a change to the entire table state, not often to a single row.\r\n\r\nThat aside, this is very likely slow because this test case can't reuse work. I'm assuming that you wrote the 10,000 partitions in a single write, which will result in a single manifest file. That means that a delete has to scan that entire manifest and rewrite the entire manifest to delete a data file. If two processes try to delete at the same time, they will both rewrite the one manifest file in the table. One commit will succeed and the other will attempt to reuse the work it has done -- it would not rewrite the original manifest file, but that manifest has been replaced so it has to scan and rewrite the new manifest. You can see how the manifests tracking files in a table matter quite a bit for retry operations.\r\n\r\nRetries are much quicker depending on the operation (e.g., append doesn't validate existing manifests) and the manifest layout in the table. Try running `RewriteManifests` to place each data file in a separate manifest. I think you'd get much faster retries in that case.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585879721/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585964146","html_url":"https://github.com/apache/iceberg/issues/791#issuecomment-585964146","issue_url":"https://api.github.com/repos/apache/iceberg/issues/791","id":585964146,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTk2NDE0Ng==","user":{"login":"figo10203","id":12635964,"node_id":"MDQ6VXNlcjEyNjM1OTY0","avatar_url":"https://avatars.githubusercontent.com/u/12635964?v=4","gravatar_id":"","url":"https://api.github.com/users/figo10203","html_url":"https://github.com/figo10203","followers_url":"https://api.github.com/users/figo10203/followers","following_url":"https://api.github.com/users/figo10203/following{/other_user}","gists_url":"https://api.github.com/users/figo10203/gists{/gist_id}","starred_url":"https://api.github.com/users/figo10203/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/figo10203/subscriptions","organizations_url":"https://api.github.com/users/figo10203/orgs","repos_url":"https://api.github.com/users/figo10203/repos","events_url":"https://api.github.com/users/figo10203/events{/privacy}","received_events_url":"https://api.github.com/users/figo10203/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T20:47:43Z","updated_at":"2020-02-13T20:47:43Z","author_association":"NONE","body":"thank you. @rdsr can I know what's the location of Metastore logs in linux system?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585964146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969162","html_url":"https://github.com/apache/iceberg/pull/745#issuecomment-585969162","issue_url":"https://api.github.com/repos/apache/iceberg/issues/745","id":585969162,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTk2OTE2Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T21:00:11Z","updated_at":"2020-02-13T21:00:11Z","author_association":"CONTRIBUTOR","body":"Thanks for updating this. I merged it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969263","html_url":"https://github.com/apache/iceberg/pull/745#issuecomment-585969263","issue_url":"https://api.github.com/repos/apache/iceberg/issues/745","id":585969263,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTk2OTI2Mw==","user":{"login":"ravichinoy","id":775635,"node_id":"MDQ6VXNlcjc3NTYzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/775635?v=4","gravatar_id":"","url":"https://api.github.com/users/ravichinoy","html_url":"https://github.com/ravichinoy","followers_url":"https://api.github.com/users/ravichinoy/followers","following_url":"https://api.github.com/users/ravichinoy/following{/other_user}","gists_url":"https://api.github.com/users/ravichinoy/gists{/gist_id}","starred_url":"https://api.github.com/users/ravichinoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ravichinoy/subscriptions","organizations_url":"https://api.github.com/users/ravichinoy/orgs","repos_url":"https://api.github.com/users/ravichinoy/repos","events_url":"https://api.github.com/users/ravichinoy/events{/privacy}","received_events_url":"https://api.github.com/users/ravichinoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T21:00:30Z","updated_at":"2020-02-13T21:00:30Z","author_association":"CONTRIBUTOR","body":"thanks @rdblue we will try to implement the Builder pattern as part of follow up PR.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969263/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969813","html_url":"https://github.com/apache/iceberg/pull/795#issuecomment-585969813","issue_url":"https://api.github.com/repos/apache/iceberg/issues/795","id":585969813,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTk2OTgxMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T21:01:55Z","updated_at":"2020-02-13T21:01:55Z","author_association":"CONTRIBUTOR","body":"Merged! Thanks @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585969813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585970113","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-585970113","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":585970113,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NTk3MDExMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T21:02:39Z","updated_at":"2020-02-13T21:02:39Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @jerryshao! I'll take a look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/585970113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586008540","html_url":"https://github.com/apache/iceberg/issues/791#issuecomment-586008540","issue_url":"https://api.github.com/repos/apache/iceberg/issues/791","id":586008540,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjAwODU0MA==","user":{"login":"figo10203","id":12635964,"node_id":"MDQ6VXNlcjEyNjM1OTY0","avatar_url":"https://avatars.githubusercontent.com/u/12635964?v=4","gravatar_id":"","url":"https://api.github.com/users/figo10203","html_url":"https://github.com/figo10203","followers_url":"https://api.github.com/users/figo10203/followers","following_url":"https://api.github.com/users/figo10203/following{/other_user}","gists_url":"https://api.github.com/users/figo10203/gists{/gist_id}","starred_url":"https://api.github.com/users/figo10203/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/figo10203/subscriptions","organizations_url":"https://api.github.com/users/figo10203/orgs","repos_url":"https://api.github.com/users/figo10203/repos","events_url":"https://api.github.com/users/figo10203/events{/privacy}","received_events_url":"https://api.github.com/users/figo10203/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-13T22:43:51Z","updated_at":"2020-02-13T22:43:51Z","author_association":"NONE","body":"Hi @rdsr, I found an underlying error in hive.log which is below:\r\n\r\n![image](https://user-images.githubusercontent.com/12635964/74485209-19d5cd80-4e6f-11ea-8122-2f26a007c390.png)\r\n\r\nSo why it happend. there is no \"hl_agent_info\" column in my hive table. why iceberg check it?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586008540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586060919","html_url":"https://github.com/apache/iceberg/issues/797#issuecomment-586060919","issue_url":"https://api.github.com/repos/apache/iceberg/issues/797","id":586060919,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjA2MDkxOQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T01:59:40Z","updated_at":"2020-02-14T01:59:40Z","author_association":"CONTRIBUTOR","body":"Hi Adam,Â  Is relocation not a good solution here? Iceberg does provide different shaded runtime jars for Spark, Pig etc, where Iceberg's internal Guava will never conflict with the one provided by the engine/platform.\r\n\r\nGuava does provide some nice apis which Iceberg makes use of - Iterables, preconditions, immutable collections etc.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586060919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586064577","html_url":"https://github.com/apache/iceberg/issues/791#issuecomment-586064577","issue_url":"https://api.github.com/repos/apache/iceberg/issues/791","id":586064577,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjA2NDU3Nw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T02:15:32Z","updated_at":"2020-02-14T02:15:32Z","author_association":"CONTRIBUTOR","body":"I think that error is coming from the under DB backing the Metastore.  I'd check to see if your Hive setup is operational as is even before using Iceberg","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586064577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586104220","html_url":"https://github.com/apache/iceberg/issues/791#issuecomment-586104220","issue_url":"https://api.github.com/repos/apache/iceberg/issues/791","id":586104220,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjEwNDIyMA==","user":{"login":"figo10203","id":12635964,"node_id":"MDQ6VXNlcjEyNjM1OTY0","avatar_url":"https://avatars.githubusercontent.com/u/12635964?v=4","gravatar_id":"","url":"https://api.github.com/users/figo10203","html_url":"https://github.com/figo10203","followers_url":"https://api.github.com/users/figo10203/followers","following_url":"https://api.github.com/users/figo10203/following{/other_user}","gists_url":"https://api.github.com/users/figo10203/gists{/gist_id}","starred_url":"https://api.github.com/users/figo10203/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/figo10203/subscriptions","organizations_url":"https://api.github.com/users/figo10203/orgs","repos_url":"https://api.github.com/users/figo10203/repos","events_url":"https://api.github.com/users/figo10203/events{/privacy}","received_events_url":"https://api.github.com/users/figo10203/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T05:27:19Z","updated_at":"2020-02-14T05:27:19Z","author_association":"NONE","body":"hi @rdsr , I am using EMR. hive can work for other query. How can I check then?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586104220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586132045","html_url":"https://github.com/apache/iceberg/issues/791#issuecomment-586132045","issue_url":"https://api.github.com/repos/apache/iceberg/issues/791","id":586132045,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjEzMjA0NQ==","user":{"login":"figo10203","id":12635964,"node_id":"MDQ6VXNlcjEyNjM1OTY0","avatar_url":"https://avatars.githubusercontent.com/u/12635964?v=4","gravatar_id":"","url":"https://api.github.com/users/figo10203","html_url":"https://github.com/figo10203","followers_url":"https://api.github.com/users/figo10203/followers","following_url":"https://api.github.com/users/figo10203/following{/other_user}","gists_url":"https://api.github.com/users/figo10203/gists{/gist_id}","starred_url":"https://api.github.com/users/figo10203/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/figo10203/subscriptions","organizations_url":"https://api.github.com/users/figo10203/orgs","repos_url":"https://api.github.com/users/figo10203/repos","events_url":"https://api.github.com/users/figo10203/events{/privacy}","received_events_url":"https://api.github.com/users/figo10203/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T07:24:28Z","updated_at":"2020-02-14T07:24:28Z","author_association":"NONE","body":"hi @rdsr, still not clear what do you mean by \"backing\" the metastore?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586132045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586135531","html_url":"https://github.com/apache/iceberg/pull/790#issuecomment-586135531","issue_url":"https://api.github.com/repos/apache/iceberg/issues/790","id":586135531,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjEzNTUzMQ==","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T07:35:36Z","updated_at":"2020-02-14T07:35:36Z","author_association":"COLLABORATOR","body":"@aokolnychyi can you please take a look? Thanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586135531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586414514","html_url":"https://github.com/apache/iceberg/pull/790#issuecomment-586414514","issue_url":"https://api.github.com/repos/apache/iceberg/issues/790","id":586414514,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjQxNDUxNA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T18:34:22Z","updated_at":"2020-02-14T18:34:22Z","author_association":"CONTRIBUTOR","body":"This change looks to me as it reduces the complexity and also removes the global synchronization while getting a writer for a given key. Hopefully, we will get more parallelism due to more granular locks in `ConcurrentHashMap`.\r\n\r\nThere is one more point I had in mind while creating the original issue but I am not sure we can resolve that after a closer look. Specifically, locking on `WriterWrapper`. We will have one instance of `WriterWrapper` per clustering key and it can be accessed concurrently so we need to synchronize.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586414514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586447311","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-586447311","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":586447311,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjQ0NzMxMQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T19:50:19Z","updated_at":"2020-02-14T19:50:19Z","author_association":"CONTRIBUTOR","body":"I have only one remaining comment and I think it should be good to go.\r\n\r\n@rdsr, @prodeezy, @rdblue will you be affected?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586447311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586513759","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-586513759","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":586513759,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjUxMzc1OQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-14T23:09:47Z","updated_at":"2020-02-14T23:09:47Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, I'll take a look, and let you know. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586513759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586757306","html_url":"https://github.com/apache/iceberg/pull/799#issuecomment-586757306","issue_url":"https://api.github.com/repos/apache/iceberg/issues/799","id":586757306,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc1NzMwNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T21:40:43Z","updated_at":"2020-02-16T21:40:43Z","author_association":"CONTRIBUTOR","body":"@prodeezy, @rominparekh, could you take a look at this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586757306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586759905","html_url":"https://github.com/apache/iceberg/issues/748#issuecomment-586759905","issue_url":"https://api.github.com/repos/apache/iceberg/issues/748","id":586759905,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc1OTkwNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T22:08:38Z","updated_at":"2020-02-16T22:08:38Z","author_association":"CONTRIBUTOR","body":"This was done by #749. I'm closing this. Thanks @jun-he!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586759905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586761049","html_url":"https://github.com/apache/iceberg/pull/802#issuecomment-586761049","issue_url":"https://api.github.com/repos/apache/iceberg/issues/802","id":586761049,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc2MTA0OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T22:20:22Z","updated_at":"2020-02-16T22:20:22Z","author_association":"CONTRIBUTOR","body":"@prodeezy, @mehtaashish23, can you take a look at this? This adds some basic protection for cherry-picked data files. This is what we are currently using when we clean up snapshots to avoid deleting data files that have been picked into the current table state.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586761049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586769317","html_url":"https://github.com/apache/iceberg/pull/800#issuecomment-586769317","issue_url":"https://api.github.com/repos/apache/iceberg/issues/800","id":586769317,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc2OTMxNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T23:42:42Z","updated_at":"2020-02-16T23:42:42Z","author_association":"CONTRIBUTOR","body":"@danielcweeks or @Parth-Brahmbhatt, could you review this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586769317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586769536","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-586769536","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":586769536,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc2OTUzNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-16T23:44:53Z","updated_at":"2020-02-16T23:44:53Z","author_association":"CONTRIBUTOR","body":"I won't be affected by this change; we built this into our Spark version as `SNAPSHOT TABLE` and `MIGRATE TABLE` commands, so we have a separate path.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586769536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586771903","html_url":"https://github.com/apache/iceberg/pull/784#issuecomment-586771903","issue_url":"https://api.github.com/repos/apache/iceberg/issues/784","id":586771903,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3MTkwMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T00:07:20Z","updated_at":"2020-02-17T00:07:20Z","author_association":"CONTRIBUTOR","body":"Merging. The test failure was from the python problem that is fixed in master.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586771903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772468","html_url":"https://github.com/apache/iceberg/pull/297#issuecomment-586772468","issue_url":"https://api.github.com/repos/apache/iceberg/issues/297","id":586772468,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3MjQ2OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T00:12:35Z","updated_at":"2020-02-17T00:12:35Z","author_association":"CONTRIBUTOR","body":"Merged. Thank you for following up on this, @Fokko!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772810","html_url":"https://github.com/apache/iceberg/pull/577#issuecomment-586772810","issue_url":"https://api.github.com/repos/apache/iceberg/issues/577","id":586772810,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3MjgxMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T00:15:34Z","updated_at":"2020-02-17T00:15:34Z","author_association":"CONTRIBUTOR","body":"We just had a discussion about Hive metastore versions on the dev list. What I suggested was updating to the version that Spark uses when Spark 3.0 is out. That should pull in a much newer version and hopefully solve these issues. Does that sound reasonable?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772996","html_url":"https://github.com/apache/iceberg/pull/716#issuecomment-586772996","issue_url":"https://api.github.com/repos/apache/iceberg/issues/716","id":586772996,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3Mjk5Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T00:17:17Z","updated_at":"2020-02-17T00:17:17Z","author_association":"CONTRIBUTOR","body":"@shawnding, do you intend to continue working on this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586772996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586777788","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-586777788","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":586777788,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njc3Nzc4OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T00:57:07Z","updated_at":"2020-02-17T00:58:45Z","author_association":"CONTRIBUTOR","body":"I think the purpose of this PR is to implement [a comment](https://github.com/apache/incubator-iceberg/pull/631#issuecomment-554168010) I made on #631:\r\n\r\n> I think if we add expiration during ExpireSnapshots, then that's when the number of metadata versions would be pruned. For example, expiration might keep 10 previous metadata file references. Between expiration calls, the ones tracked continues to grow.\r\n\r\nI think we need to have the ability to delete old metadata files as new ones are created, or else tables with lots of transactions will suffer from larger and larger metadata files between snapshot expiration runs. But unlike when we were discussing this on the last PR, I'm not so sure that we need to clean up old files during snapshot expiration. It would be nice to do it, but we don't want metadata file contents to grow too large because of this.\r\n\r\nRight now, I'm leaning toward not doing this cleanup during snapshot expiration. It's additional complexity for not much benefit. What do you think, @yathindranath, @aokolnychyi, and @arina-ielchiieva?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586777788/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586817030","html_url":"https://github.com/apache/iceberg/pull/806#issuecomment-586817030","issue_url":"https://api.github.com/repos/apache/iceberg/issues/806","id":586817030,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjgxNzAzMA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T04:54:47Z","updated_at":"2020-02-17T04:54:47Z","author_association":"CONTRIBUTOR","body":"The fix is a little weird to me as it is not fixed in HadoopTableOperations directly, but in BaseTransaction.TransactionTable, the caller of HadoopTableOperations#locationProvider(), because I could not find properties in HadoopTableOperations to pass to LocationProviders.locationFor() when current() returns null(no metadata at all).\r\nPlease kindly let me know if there is a better way to do that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586817030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586817260","html_url":"https://github.com/apache/iceberg/pull/806#issuecomment-586817260","issue_url":"https://api.github.com/repos/apache/iceberg/issues/806","id":586817260,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NjgxNzI2MA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T04:55:56Z","updated_at":"2020-02-17T04:55:56Z","author_association":"CONTRIBUTOR","body":"@rdblue @chenjunjiedada would you please help to review and kindly comment?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586817260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586866914","html_url":"https://github.com/apache/iceberg/pull/588#issuecomment-586866914","issue_url":"https://api.github.com/repos/apache/iceberg/issues/588","id":586866914,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njg2NjkxNA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T08:12:50Z","updated_at":"2020-02-17T08:12:50Z","author_association":"COLLABORATOR","body":"We already have the logic to check the reading format version so I just bump the version. @rdblue @aokolnychyi could you please help to take another look? Do you think this is ready? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586866914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586875463","html_url":"https://github.com/apache/iceberg/pull/297#issuecomment-586875463","issue_url":"https://api.github.com/repos/apache/iceberg/issues/297","id":586875463,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njg3NTQ2Mw==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T08:36:03Z","updated_at":"2020-02-17T08:36:03Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue. It took some time since we had to get 1.9.2 out :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586875463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586882811","html_url":"https://github.com/apache/iceberg/pull/577#issuecomment-586882811","issue_url":"https://api.github.com/repos/apache/iceberg/issues/577","id":586882811,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Njg4MjgxMQ==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T08:55:28Z","updated_at":"2020-02-17T08:55:28Z","author_association":"CONTRIBUTOR","body":"Thanks for the update. I've just subscribed to the devlist as well, just to keep in the loop :)\r\n\r\nRelated, updating Avro in Hive is a bit of the chicken-egg problem, more background here: https://jira.apache.org/jira/browse/HIVE-21737 (at the end)\r\n\r\nThat definitely sounds reasonable. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/586882811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587011351","html_url":"https://github.com/apache/iceberg/pull/588#issuecomment-587011351","issue_url":"https://api.github.com/repos/apache/iceberg/issues/588","id":587011351,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzAxMTM1MQ==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T14:10:16Z","updated_at":"2020-02-17T14:10:16Z","author_association":"COLLABORATOR","body":"Hm, Looks like we need to update spec.md as well at least.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587011351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587077804","html_url":"https://github.com/apache/iceberg/pull/800#issuecomment-587077804","issue_url":"https://api.github.com/repos/apache/iceberg/issues/800","id":587077804,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzA3NzgwNA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T16:42:24Z","updated_at":"2020-02-17T16:42:24Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587077804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587098290","html_url":"https://github.com/apache/iceberg/pull/804#issuecomment-587098290","issue_url":"https://api.github.com/repos/apache/iceberg/issues/804","id":587098290,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzA5ODI5MA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T17:38:53Z","updated_at":"2020-02-17T17:38:53Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587098290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587105633","html_url":"https://github.com/apache/iceberg/pull/801#issuecomment-587105633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/801","id":587105633,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzEwNTYzMw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T18:03:11Z","updated_at":"2020-02-17T18:03:11Z","author_association":"CONTRIBUTOR","body":"This conflicts with #803, so I've merged the fixes together. I'll close this one.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587105633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587108096","html_url":"https://github.com/apache/iceberg/pull/803#issuecomment-587108096","issue_url":"https://api.github.com/repos/apache/iceberg/issues/803","id":587108096,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzEwODA5Ng==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T18:11:28Z","updated_at":"2020-02-17T18:11:28Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587108096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587130697","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587130697","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587130697,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzEzMDY5Nw==","user":{"login":"yp-oss","id":15472649,"node_id":"MDQ6VXNlcjE1NDcyNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/15472649?v=4","gravatar_id":"","url":"https://api.github.com/users/yp-oss","html_url":"https://github.com/yp-oss","followers_url":"https://api.github.com/users/yp-oss/followers","following_url":"https://api.github.com/users/yp-oss/following{/other_user}","gists_url":"https://api.github.com/users/yp-oss/gists{/gist_id}","starred_url":"https://api.github.com/users/yp-oss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yp-oss/subscriptions","organizations_url":"https://api.github.com/users/yp-oss/orgs","repos_url":"https://api.github.com/users/yp-oss/repos","events_url":"https://api.github.com/users/yp-oss/events{/privacy}","received_events_url":"https://api.github.com/users/yp-oss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T19:30:12Z","updated_at":"2020-02-17T19:36:47Z","author_association":"NONE","body":"@rdblue The default value of `TableProperties.METADATA_DELETE_AFTER_COMMIT_ENABLED` is false and if we enable this at a later point, can leave orphan metadata files. I believe, it's better to do clean up of old metadata files during snapshot expiration and remove the current logic from the commit what we added in #631.\r\n\r\n@aokolnychyi I agree, we can have table properties for snapshot retention interval, number snapshots to retain and number of metadata files to retain. We can create a different PR for expiration with table properties.\r\n\r\nSorry, closed the PR accidentally, reopened it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587130697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587142773","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587142773","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587142773,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE0Mjc3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T20:11:55Z","updated_at":"2020-02-17T20:11:55Z","author_association":"CONTRIBUTOR","body":"The main problem with removing old metadata versions in snapshot expiration is that the number of old metadata references in the metadata file can grow very large. How would we keep that from being a performance problem for tables if we only support removing old metadata files with expire snapshots?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587142773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587147134","html_url":"https://github.com/apache/iceberg/pull/768#issuecomment-587147134","issue_url":"https://api.github.com/repos/apache/iceberg/issues/768","id":587147134,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE0NzEzNA==","user":{"login":"edgarRd","id":266670,"node_id":"MDQ6VXNlcjI2NjY3MA==","avatar_url":"https://avatars.githubusercontent.com/u/266670?v=4","gravatar_id":"","url":"https://api.github.com/users/edgarRd","html_url":"https://github.com/edgarRd","followers_url":"https://api.github.com/users/edgarRd/followers","following_url":"https://api.github.com/users/edgarRd/following{/other_user}","gists_url":"https://api.github.com/users/edgarRd/gists{/gist_id}","starred_url":"https://api.github.com/users/edgarRd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edgarRd/subscriptions","organizations_url":"https://api.github.com/users/edgarRd/orgs","repos_url":"https://api.github.com/users/edgarRd/repos","events_url":"https://api.github.com/users/edgarRd/events{/privacy}","received_events_url":"https://api.github.com/users/edgarRd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T20:27:42Z","updated_at":"2020-02-17T20:27:42Z","author_association":"CONTRIBUTOR","body":"cc @aokolnychyi ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587147134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587147438","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587147438","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587147438,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE0NzQzOA==","user":{"login":"yp-oss","id":15472649,"node_id":"MDQ6VXNlcjE1NDcyNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/15472649?v=4","gravatar_id":"","url":"https://api.github.com/users/yp-oss","html_url":"https://github.com/yp-oss","followers_url":"https://api.github.com/users/yp-oss/followers","following_url":"https://api.github.com/users/yp-oss/following{/other_user}","gists_url":"https://api.github.com/users/yp-oss/gists{/gist_id}","starred_url":"https://api.github.com/users/yp-oss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yp-oss/subscriptions","organizations_url":"https://api.github.com/users/yp-oss/orgs","repos_url":"https://api.github.com/users/yp-oss/repos","events_url":"https://api.github.com/users/yp-oss/events{/privacy}","received_events_url":"https://api.github.com/users/yp-oss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T20:28:47Z","updated_at":"2020-02-17T20:28:47Z","author_association":"NONE","body":"@rdblue `TableProperties.METADATA_PREVIOUS_VERSIONS_MAX` limits the references of previous metadata files in the metadata file and won't grow very large after reaching max. The default value is 100 and it only keeps references of previous 100 metadata files at max.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587147438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587159479","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587159479","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587159479,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE1OTQ3OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T21:07:21Z","updated_at":"2020-02-17T21:07:21Z","author_association":"CONTRIBUTOR","body":"Yes, the maximum limits the growth. But if we remove references to old metadata without deleting it, then files are still leaked. The purpose of keeping a list of old metadata files is to track and delete them.\r\n\r\nThat leak is why the approach I suggested in the other PR doesn't work. By the time expire snapshots runs, references may have been removed without deleting the files. That, or you let the list grow large with a huge maximum and probably hit performance problems. The only way to avoid the list growing large _and_ avoid leaking files is to enable cleanup after commit.\r\n\r\nAnd if we recommend cleanup after commit, then what is the value of cleaning up while expiring snapshots? I don't see much value in this because we can't reasonably get rid of the other cleanup method.\r\n\r\nI think the best path forward is to default `write.metadata.delete-after-commit.enabled` to `true`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587159479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587161946","html_url":"https://github.com/apache/iceberg/pull/768#issuecomment-587161946","issue_url":"https://api.github.com/repos/apache/iceberg/issues/768","id":587161946,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE2MTk0Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T21:17:15Z","updated_at":"2020-02-17T21:17:15Z","author_association":"CONTRIBUTOR","body":"Thanks for clarifying what was being tested! I've merged this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587161946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587170259","html_url":"https://github.com/apache/iceberg/pull/805#issuecomment-587170259","issue_url":"https://api.github.com/repos/apache/iceberg/issues/805","id":587170259,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE3MDI1OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T21:52:33Z","updated_at":"2020-02-17T21:52:33Z","author_association":"CONTRIBUTOR","body":"Thanks for the review, @danielcweeks! I'm merging this now that tests are passing after resolving the conflict.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587170259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587183465","html_url":"https://github.com/apache/iceberg/pull/652#issuecomment-587183465","issue_url":"https://api.github.com/repos/apache/iceberg/issues/652","id":587183465,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE4MzQ2NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T22:55:15Z","updated_at":"2020-02-17T22:55:15Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, I updated `HadoopTableOperations`. Can you take another look at this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587183465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587184268","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587184268","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587184268,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE4NDI2OA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T22:59:22Z","updated_at":"2020-02-17T23:00:09Z","author_association":"CONTRIBUTOR","body":"> Yes, the maximum limits the growth. But if we remove references to old metadata without deleting it, then files are still leaked. The purpose of keeping a list of old metadata files is to track and delete them.\r\n\r\nWill dropped files be still referenced in old metadata JSON files? Whenever we expire snapshots, the list of previous files in the current version file might not have all of the old files we need to clean up. But what if we load some older files? We should be able to trace all of the files to delete, right? (not sure about the complexity)\r\n\r\nWe definitely want to avoid the situation when the number of old metadata JSON files grows beyond a threshold as we've been in that situation before manifest lists.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587184268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587185576","html_url":"https://github.com/apache/iceberg/pull/806#issuecomment-587185576","issue_url":"https://api.github.com/repos/apache/iceberg/issues/806","id":587185576,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzE4NTU3Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-17T23:06:30Z","updated_at":"2020-02-17T23:06:30Z","author_association":"CONTRIBUTOR","body":"@waterlx, the problem is that `HadoopTableOperations` doesn't implement the optional `temp(TableMetadata)` method. That method is used to get a temporary `HadoopTableOperations` object for calls like `locationProvider()` that use table metadata. It is used by the `Transaction` system.\r\n\r\nPreviously, Hadoop tables weren't used with the transactions created by `BaseMetastoreCatalog`, so we didn't have an implementation. Now that there is a `HadoopCatalog`, it needs this to avoid the problem you're hitting.\r\n\r\nHere's a quick implementation that I think should work:\r\n\r\n```java\r\n  @Override\r\n  public TableOperations temp(TableMetadata uncommittedMetadata) {\r\n    return new TableOperations() {\r\n      @Override\r\n      public TableMetadata current() {\r\n        return uncommittedMetadata;\r\n      }\r\n\r\n      @Override\r\n      public TableMetadata refresh() {\r\n        throw new UnsupportedOperationException(\"Cannot call refresh on temporary table operations\");\r\n      }\r\n\r\n      @Override\r\n      public void commit(TableMetadata base, TableMetadata metadata) {\r\n        throw new UnsupportedOperationException(\"Cannot call commit on temporary table operations\");\r\n      }\r\n\r\n      @Override\r\n      public String metadataFileLocation(String fileName) {\r\n        return HadoopTableOperations.this.metadataFileLocation(fileName);\r\n      }\r\n\r\n      @Override\r\n      public LocationProvider locationProvider() {\r\n        return LocationProviders.locationsFor(uncommittedMetadata.location(), uncommittedMetadata.properties());\r\n      }\r\n\r\n      @Override\r\n      public FileIO io() {\r\n        return HadoopTableOperations.this.io();\r\n      }\r\n\r\n      @Override\r\n      public EncryptionManager encryption() {\r\n        return HadoopTableOperations.this.encryption();\r\n      }\r\n\r\n      @Override\r\n      public long newSnapshotId() {\r\n        return HadoopTableOperations.this.newSnapshotId();\r\n      }\r\n    };\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587185576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587213861","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587213861","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587213861,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIxMzg2MQ==","user":{"login":"yp-oss","id":15472649,"node_id":"MDQ6VXNlcjE1NDcyNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/15472649?v=4","gravatar_id":"","url":"https://api.github.com/users/yp-oss","html_url":"https://github.com/yp-oss","followers_url":"https://api.github.com/users/yp-oss/followers","following_url":"https://api.github.com/users/yp-oss/following{/other_user}","gists_url":"https://api.github.com/users/yp-oss/gists{/gist_id}","starred_url":"https://api.github.com/users/yp-oss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yp-oss/subscriptions","organizations_url":"https://api.github.com/users/yp-oss/orgs","repos_url":"https://api.github.com/users/yp-oss/repos","events_url":"https://api.github.com/users/yp-oss/events{/privacy}","received_events_url":"https://api.github.com/users/yp-oss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T00:27:54Z","updated_at":"2020-02-18T00:27:54Z","author_association":"NONE","body":"As @aokolnychyi mentioned, we should be able to trace all of the files to delete by reading few metadata files. This PR follows the above approach to list all the files to delete.\r\n\r\nMay be we could deprecate `write.metadata.delete-after-commit.enabled` property and if `write.metadata.previous-versions-max` is defined, always cleanup after commit and no clean up while expiring snapshots.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587213861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587225144","html_url":"https://github.com/apache/iceberg/issues/809#issuecomment-587225144","issue_url":"https://api.github.com/repos/apache/iceberg/issues/809","id":587225144,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIyNTE0NA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T00:55:48Z","updated_at":"2020-02-18T00:55:48Z","author_association":"CONTRIBUTOR","body":"This issue was discussed in this PR https://github.com/apache/incubator-iceberg/pull/786#discussion_r379925255","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587225144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587229080","html_url":"https://github.com/apache/iceberg/pull/491#issuecomment-587229080","issue_url":"https://api.github.com/repos/apache/iceberg/issues/491","id":587229080,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIyOTA4MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T01:17:36Z","updated_at":"2020-02-18T01:17:36Z","author_association":"CONTRIBUTOR","body":"I'm closing this since it hasn't had any activity. Feel free to open it if you'd like to discuss it further.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587229080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587229238","html_url":"https://github.com/apache/iceberg/pull/807#issuecomment-587229238","issue_url":"https://api.github.com/repos/apache/iceberg/issues/807","id":587229238,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIyOTIzOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T01:18:20Z","updated_at":"2020-02-18T01:18:20Z","author_association":"CONTRIBUTOR","body":"Thanks, @chenjunjiedada! I merged this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587229238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587233741","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587233741","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587233741,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzIzMzc0MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T01:40:20Z","updated_at":"2020-02-18T01:40:20Z","author_association":"CONTRIBUTOR","body":"> Will dropped files be still referenced in old metadata JSON files?\r\n\r\nYes, but do we want to open lots of metadata files to get the set of files to delete? I'm assuming that we don't want to open multiple files to do this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587233741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587249903","html_url":"https://github.com/apache/iceberg/pull/780#issuecomment-587249903","issue_url":"https://api.github.com/repos/apache/iceberg/issues/780","id":587249903,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzI0OTkwMw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T02:57:08Z","updated_at":"2020-02-18T02:57:08Z","author_association":"CONTRIBUTOR","body":"> Yes, but do we want to open lots of metadata files to get the set of files to delete? \r\n\r\nIt is a bit unclear whether that will become a problem as we don't have to open every previous metadata file, it is enough to open only the last referenced. We will read 1 per 100 metadata files under the default configuration.\r\n\r\nHaving said that, I don't have a strong argument/opinion here. I want us to explore all options as it seems nice to have this logic if it does not complicate things or affect performance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587249903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587525960","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-587525960","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":587525960,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzUyNTk2MA==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T15:43:51Z","updated_at":"2020-02-18T15:43:51Z","author_association":"CONTRIBUTOR","body":"will take a look today","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587525960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587533734","html_url":"https://github.com/apache/iceberg/pull/806#issuecomment-587533734","issue_url":"https://api.github.com/repos/apache/iceberg/issues/806","id":587533734,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzUzMzczNA==","user":{"login":"waterlx","id":13976495,"node_id":"MDQ6VXNlcjEzOTc2NDk1","avatar_url":"https://avatars.githubusercontent.com/u/13976495?v=4","gravatar_id":"","url":"https://api.github.com/users/waterlx","html_url":"https://github.com/waterlx","followers_url":"https://api.github.com/users/waterlx/followers","following_url":"https://api.github.com/users/waterlx/following{/other_user}","gists_url":"https://api.github.com/users/waterlx/gists{/gist_id}","starred_url":"https://api.github.com/users/waterlx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/waterlx/subscriptions","organizations_url":"https://api.github.com/users/waterlx/orgs","repos_url":"https://api.github.com/users/waterlx/repos","events_url":"https://api.github.com/users/waterlx/events{/privacy}","received_events_url":"https://api.github.com/users/waterlx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T15:59:04Z","updated_at":"2020-02-18T15:59:04Z","author_association":"CONTRIBUTOR","body":"Hi @rdblue Thanks for the guide! \r\nThe PR is updated based on your comment and with a UT added. Please help to review it. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587533734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587582411","html_url":"https://github.com/apache/iceberg/pull/806#issuecomment-587582411","issue_url":"https://api.github.com/repos/apache/iceberg/issues/806","id":587582411,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzU4MjQxMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T17:35:43Z","updated_at":"2020-02-18T17:35:43Z","author_association":"CONTRIBUTOR","body":"Thanks @waterlx! Merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587582411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587583484","html_url":"https://github.com/apache/iceberg/pull/810#issuecomment-587583484","issue_url":"https://api.github.com/repos/apache/iceberg/issues/810","id":587583484,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzU4MzQ4NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T17:38:05Z","updated_at":"2020-02-18T17:38:05Z","author_association":"CONTRIBUTOR","body":"Thanks, @chenjunjiedada!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587583484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587644332","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-587644332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":587644332,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzY0NDMzMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T18:46:43Z","updated_at":"2020-02-18T18:46:43Z","author_association":"CONTRIBUTOR","body":"@jerryshao, thanks for building this! Overall it looks really good. The only major problem is that `planFiles` is not deterministic and that will cause a correctness problem.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587644332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587804179","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-587804179","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":587804179,"node_id":"MDEyOklzc3VlQ29tbWVudDU4NzgwNDE3OQ==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T20:35:46Z","updated_at":"2020-02-18T20:35:46Z","author_association":"CONTRIBUTOR","body":"Confirmed that this change doesn't affect us.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587804179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587843948","html_url":"https://github.com/apache/iceberg/pull/652#issuecomment-587843948","issue_url":"https://api.github.com/repos/apache/iceberg/issues/652","id":587843948,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Nzg0Mzk0OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-18T21:03:11Z","updated_at":"2020-02-18T21:03:11Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks for the review, @aokolnychyi!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587843948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587977570","html_url":"https://github.com/apache/iceberg/pull/811#issuecomment-587977570","issue_url":"https://api.github.com/repos/apache/iceberg/issues/811","id":587977570,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Nzk3NzU3MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T00:45:34Z","updated_at":"2020-02-19T00:45:34Z","author_association":"CONTRIBUTOR","body":"@rdsr, do you have time to take a look at this since you have experience with `NameMapping`?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587977570/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587980868","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-587980868","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":587980868,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Nzk4MDg2OA==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T00:58:19Z","updated_at":"2020-02-19T00:59:56Z","author_association":"CONTRIBUTOR","body":"Thanks a lot @rdblue for your comments. let me go through all you comments and refactor the current implementation.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587980868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587991569","html_url":"https://github.com/apache/iceberg/pull/759#issuecomment-587991569","issue_url":"https://api.github.com/repos/apache/iceberg/issues/759","id":587991569,"node_id":"MDEyOklzc3VlQ29tbWVudDU4Nzk5MTU2OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T01:40:35Z","updated_at":"2020-02-19T01:40:35Z","author_association":"CONTRIBUTOR","body":"Thanks, @rdsr! Looks like a good start.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/587991569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588112749","html_url":"https://github.com/apache/iceberg/pull/811#issuecomment-588112749","issue_url":"https://api.github.com/repos/apache/iceberg/issues/811","id":588112749,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODExMjc0OQ==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T09:08:57Z","updated_at":"2020-02-19T09:08:57Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue . I'll take a look!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588112749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588335719","html_url":"https://github.com/apache/iceberg/pull/786#issuecomment-588335719","issue_url":"https://api.github.com/repos/apache/iceberg/issues/786","id":588335719,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODMzNTcxOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T17:15:46Z","updated_at":"2020-02-19T17:15:46Z","author_association":"CONTRIBUTOR","body":"I am going to merge this one. Thank you everyone for the review and @chenjunjiedada for the work! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588335719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588342647","html_url":"https://github.com/apache/iceberg/pull/812#issuecomment-588342647","issue_url":"https://api.github.com/repos/apache/iceberg/issues/812","id":588342647,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODM0MjY0Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T17:28:53Z","updated_at":"2020-02-19T17:28:53Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nGood catch. I'm glad we found this before a release.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588342647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588353399","html_url":"https://github.com/apache/iceberg/pull/802#issuecomment-588353399","issue_url":"https://api.github.com/repos/apache/iceberg/issues/802","id":588353399,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODM1MzM5OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T17:50:01Z","updated_at":"2020-02-19T17:50:13Z","author_association":"CONTRIBUTOR","body":"@rominparekh, I agree that I need to add tests for this before we get it in. I just wanted to get this to you guys as early as I could, since it at least protects data in most cases and I know you're eager to use the cherry-pick feature.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588353399/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588421624","html_url":"https://github.com/apache/iceberg/issues/797#issuecomment-588421624","issue_url":"https://api.github.com/repos/apache/iceberg/issues/797","id":588421624,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODQyMTYyNA==","user":{"login":"adamkennedy","id":114942,"node_id":"MDQ6VXNlcjExNDk0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/114942?v=4","gravatar_id":"","url":"https://api.github.com/users/adamkennedy","html_url":"https://github.com/adamkennedy","followers_url":"https://api.github.com/users/adamkennedy/followers","following_url":"https://api.github.com/users/adamkennedy/following{/other_user}","gists_url":"https://api.github.com/users/adamkennedy/gists{/gist_id}","starred_url":"https://api.github.com/users/adamkennedy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adamkennedy/subscriptions","organizations_url":"https://api.github.com/users/adamkennedy/orgs","repos_url":"https://api.github.com/users/adamkennedy/repos","events_url":"https://api.github.com/users/adamkennedy/events{/privacy}","received_events_url":"https://api.github.com/users/adamkennedy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-19T20:03:17Z","updated_at":"2020-02-19T20:03:29Z","author_association":"NONE","body":"Since effectively every project needs to relocate Guava to use it safely, that means every package using Guava adds 2.8MB of dependency bloat into jars and assemblies. And Guava itself has another 6 dependencies now in the latest versions.\r\n\r\nMany of the things in Guava have similar equivalents in the Apache Commons ecosystem, which are much more incremental dependencies and have much stronger backwards compatibility.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588421624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588669787","html_url":"https://github.com/apache/iceberg/pull/811#issuecomment-588669787","issue_url":"https://api.github.com/repos/apache/iceberg/issues/811","id":588669787,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODY2OTc4Nw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T07:25:51Z","updated_at":"2020-02-20T07:25:51Z","author_association":"CONTRIBUTOR","body":"Generally LGTM @rdblue . I'm just unsure what does an empty mappedField [empty names] imply in our name mapping","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588669787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588885590","html_url":"https://github.com/apache/iceberg/pull/802#issuecomment-588885590","issue_url":"https://api.github.com/repos/apache/iceberg/issues/802","id":588885590,"node_id":"MDEyOklzc3VlQ29tbWVudDU4ODg4NTU5MA==","user":{"login":"mehtaashish23","id":75326,"node_id":"MDQ6VXNlcjc1MzI2","avatar_url":"https://avatars.githubusercontent.com/u/75326?v=4","gravatar_id":"","url":"https://api.github.com/users/mehtaashish23","html_url":"https://github.com/mehtaashish23","followers_url":"https://api.github.com/users/mehtaashish23/followers","following_url":"https://api.github.com/users/mehtaashish23/following{/other_user}","gists_url":"https://api.github.com/users/mehtaashish23/gists{/gist_id}","starred_url":"https://api.github.com/users/mehtaashish23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehtaashish23/subscriptions","organizations_url":"https://api.github.com/users/mehtaashish23/orgs","repos_url":"https://api.github.com/users/mehtaashish23/repos","events_url":"https://api.github.com/users/mehtaashish23/events{/privacy}","received_events_url":"https://api.github.com/users/mehtaashish23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T10:02:58Z","updated_at":"2020-02-20T10:02:58Z","author_association":"CONTRIBUTOR","body":"@rdblue Here is the PR on top of your branch, to add UTs, and confirms the expected behavior of this code.  https://github.com/rdblue/iceberg/pull/1/files \r\n\r\nConsidering that we are in conflict with latest master and also one of the newly written UT in above PR fails (as we haven't picked a fix from latest master), I have raised another PR https://github.com/apache/incubator-iceberg/pull/814 which is rebased + your changes + UTs + Marking `expireSnapshotId` as Deprecated.\r\n\r\nFeel free to follow, whatever is simple.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/588885590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589008425","html_url":"https://github.com/apache/iceberg/issues/788#issuecomment-589008425","issue_url":"https://api.github.com/repos/apache/iceberg/issues/788","id":589008425,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTAwODQyNQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T12:57:17Z","updated_at":"2020-02-20T12:57:17Z","author_association":"MEMBER","body":"@rdblue @aokolnychyi  @rdsr I've shared a [document](https://docs.google.com/document/d/1GmPM2R-ZRF4MDnHUlMAYegr-_NEm2Hz9okq6P13_ffQ/edit?usp=sharing) about the flink integration work,  please take a look, thanks in advance.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589008425/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589206080","html_url":"https://github.com/apache/iceberg/pull/811#issuecomment-589206080","issue_url":"https://api.github.com/repos/apache/iceberg/issues/811","id":589206080,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTIwNjA4MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T17:15:17Z","updated_at":"2020-02-20T17:15:17Z","author_association":"CONTRIBUTOR","body":"Thanks @rdsr! Please have another look and feel free to merge if you think it's ready!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589206080/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589219587","html_url":"https://github.com/apache/iceberg/pull/799#issuecomment-589219587","issue_url":"https://api.github.com/repos/apache/iceberg/issues/799","id":589219587,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTIxOTU4Nw==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T17:42:31Z","updated_at":"2020-02-20T17:42:31Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589219587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589227618","html_url":"https://github.com/apache/iceberg/pull/577#issuecomment-589227618","issue_url":"https://api.github.com/repos/apache/iceberg/issues/577","id":589227618,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTIyNzYxOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T18:01:25Z","updated_at":"2020-02-20T18:01:25Z","author_association":"CONTRIBUTOR","body":"If we update to Hive 2.3, does that fix tests?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589227618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589369654","html_url":"https://github.com/apache/iceberg/pull/811#issuecomment-589369654","issue_url":"https://api.github.com/repos/apache/iceberg/issues/811","id":589369654,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTM2OTY1NA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T22:08:55Z","updated_at":"2020-02-20T22:08:55Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue! Your comments make sense to me. I'll merge this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589369654/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589374745","html_url":"https://github.com/apache/iceberg/pull/815#issuecomment-589374745","issue_url":"https://api.github.com/repos/apache/iceberg/issues/815","id":589374745,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTM3NDc0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T22:12:05Z","updated_at":"2020-02-20T22:12:05Z","author_association":"CONTRIBUTOR","body":"Thanks @vrozov!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589374745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589388986","html_url":"https://github.com/apache/iceberg/pull/816#issuecomment-589388986","issue_url":"https://api.github.com/repos/apache/iceberg/issues/816","id":589388986,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTM4ODk4Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T22:42:44Z","updated_at":"2020-02-20T22:42:44Z","author_association":"CONTRIBUTOR","body":"There was a discussion on the dev list but it seems like a lot of changes to me.\r\n\r\nPersonally, it made sense to allow static imports for Iceberg-specific classes such as table properties, types, expressions. The code looked concise and straightforward. I do get the reason to limit the number of static imports but I would focus only on external things like below:\r\n\r\n```\r\njava.util.Collections.*,\r\njava.util.stream.Collectors.*,\r\ncom.palantir.logsafe.Preconditions.*,\r\ncom.google.common.base.Preconditions.*,\r\norg.apache.commons.lang3.Validate.*,\r\norg.junit.Assert.*,\r\n```\r\n\r\nIn the community, we are trying to avoid those anyway but our checks don't enforce that. Hence, new contributors frequently use static imports for those classes and we ask them to correct such places.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589388986/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589389525","html_url":"https://github.com/apache/iceberg/pull/816#issuecomment-589389525","issue_url":"https://api.github.com/repos/apache/iceberg/issues/816","id":589389525,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTM4OTUyNQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T22:44:09Z","updated_at":"2020-02-20T22:44:09Z","author_association":"CONTRIBUTOR","body":"Having said that, it is just an opinion. I will be okay if we decide to be more restrictive.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589389525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589391601","html_url":"https://github.com/apache/iceberg/pull/816#issuecomment-589391601","issue_url":"https://api.github.com/repos/apache/iceberg/issues/816","id":589391601,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTM5MTYwMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-20T22:49:12Z","updated_at":"2020-02-20T22:49:12Z","author_association":"CONTRIBUTOR","body":"+1 for the approach Anton suggests. That will apply the rule more clearly, but won't require near as many changes that are going to cause conflicts. Since this is a new project, many people are maintaining branches so we need to be careful about the amount of churn this kind of thing introduces.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589391601/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589445021","html_url":"https://github.com/apache/iceberg/pull/816#issuecomment-589445021","issue_url":"https://api.github.com/repos/apache/iceberg/issues/816","id":589445021,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTQ0NTAyMQ==","user":{"login":"vrozov","id":12200381,"node_id":"MDQ6VXNlcjEyMjAwMzgx","avatar_url":"https://avatars.githubusercontent.com/u/12200381?v=4","gravatar_id":"","url":"https://api.github.com/users/vrozov","html_url":"https://github.com/vrozov","followers_url":"https://api.github.com/users/vrozov/followers","following_url":"https://api.github.com/users/vrozov/following{/other_user}","gists_url":"https://api.github.com/users/vrozov/gists{/gist_id}","starred_url":"https://api.github.com/users/vrozov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrozov/subscriptions","organizations_url":"https://api.github.com/users/vrozov/orgs","repos_url":"https://api.github.com/users/vrozov/repos","events_url":"https://api.github.com/users/vrozov/events{/privacy}","received_events_url":"https://api.github.com/users/vrozov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T00:51:07Z","updated_at":"2020-02-21T00:51:07Z","author_association":"MEMBER","body":"I don't have a strong opinion on what static imports should be allowed and which one should be avoided (my personal preference is to allow them all). Assuming that the community prefers to disallow static imports, IMO, it will be better to limit the number of exceptions. No exceptions is the best scenario, and cherry-pick of few packages/classes is the worst scenario with the org.apache.iceberg.* exception being in the middle.\r\n\r\n@rdblue Note that almost half of files modified belong to spark jmh that most likely are not changed on a large number of branches and/or forks.\r\n\r\n At this point, it will be better to go back to the dev list and discuss how static imports should be handled there as this PR implements what was discussed and agreed on the dev list.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589445021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589514292","html_url":"https://github.com/apache/iceberg/issues/715#issuecomment-589514292","issue_url":"https://api.github.com/repos/apache/iceberg/issues/715","id":589514292,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTUxNDI5Mg==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T06:12:20Z","updated_at":"2020-02-21T06:12:20Z","author_association":"COLLABORATOR","body":"@rdblue, Do we still need to add this base on rencent NameMapping changes? If there is no on going effort on this, I 'd like to take this to get familiar with schema things.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589514292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589522369","html_url":"https://github.com/apache/iceberg/pull/814#issuecomment-589522369","issue_url":"https://api.github.com/repos/apache/iceberg/issues/814","id":589522369,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTUyMjM2OQ==","user":{"login":"mehtaashish23","id":75326,"node_id":"MDQ6VXNlcjc1MzI2","avatar_url":"https://avatars.githubusercontent.com/u/75326?v=4","gravatar_id":"","url":"https://api.github.com/users/mehtaashish23","html_url":"https://github.com/mehtaashish23","followers_url":"https://api.github.com/users/mehtaashish23/followers","following_url":"https://api.github.com/users/mehtaashish23/following{/other_user}","gists_url":"https://api.github.com/users/mehtaashish23/gists{/gist_id}","starred_url":"https://api.github.com/users/mehtaashish23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehtaashish23/subscriptions","organizations_url":"https://api.github.com/users/mehtaashish23/orgs","repos_url":"https://api.github.com/users/mehtaashish23/repos","events_url":"https://api.github.com/users/mehtaashish23/events{/privacy}","received_events_url":"https://api.github.com/users/mehtaashish23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T06:47:07Z","updated_at":"2020-02-21T06:47:07Z","author_association":"CONTRIBUTOR","body":"@rdblue , @rominparekh Added the delete callback than static variable dependency in test code. Please review. \r\nAlso Ryan pointed out a scenario, which doesn't protect cherrypick work from expireSnapshotById. Let me know, if I should fix in this PR, or as pointed, I can log the ticket, and pick that up explicitly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589522369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589717629","html_url":"https://github.com/apache/iceberg/pull/803#issuecomment-589717629","issue_url":"https://api.github.com/repos/apache/iceberg/issues/803","id":589717629,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTcxNzYyOQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T16:03:51Z","updated_at":"2020-02-21T16:03:51Z","author_association":"CONTRIBUTOR","body":"I think this also resolves #552.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589717629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589718186","html_url":"https://github.com/apache/iceberg/issues/552#issuecomment-589718186","issue_url":"https://api.github.com/repos/apache/iceberg/issues/552","id":589718186,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTcxODE4Ng==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T16:05:10Z","updated_at":"2020-02-21T16:05:10Z","author_association":"CONTRIBUTOR","body":"Closing as it was addressed in #803.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589718186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589747827","html_url":"https://github.com/apache/iceberg/pull/803#issuecomment-589747827","issue_url":"https://api.github.com/repos/apache/iceberg/issues/803","id":589747827,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc0NzgyNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T17:14:47Z","updated_at":"2020-02-21T17:14:47Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi, you're right. Originally the fix was in #801, but the two changes conflicted so I fixed both problems in this one.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589747827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589754955","html_url":"https://github.com/apache/iceberg/pull/814#issuecomment-589754955","issue_url":"https://api.github.com/repos/apache/iceberg/issues/814","id":589754955,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc1NDk1NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T17:33:06Z","updated_at":"2020-02-21T17:33:06Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @mehtaashish23! Could you remove references to WAP from the tests? Also, I agree that there should be a test case for each cherry-pick case handled by the delete code.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589754955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589757655","html_url":"https://github.com/apache/iceberg/issues/757#issuecomment-589757655","issue_url":"https://api.github.com/repos/apache/iceberg/issues/757","id":589757655,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc1NzY1NQ==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T17:40:23Z","updated_at":"2020-02-21T17:40:23Z","author_association":"CONTRIBUTOR","body":"In addition, we should document new metadata tables added in #805.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589757655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589782294","html_url":"https://github.com/apache/iceberg/issues/715#issuecomment-589782294","issue_url":"https://api.github.com/repos/apache/iceberg/issues/715","id":589782294,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTc4MjI5NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T18:43:27Z","updated_at":"2020-02-21T18:43:27Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, I think we could use some work here if you're interested.\r\n\r\nThe basic problem is what to do when there are data files without IDs. Right now, we have a fallback strategy for Parquet that uses column position because we use position-based resolution in our tables. But another valid strategy is to use a `NameMapping` for people that use name-based column resolution. Implementing the name-based resolution for Parquet is a good project.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589782294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589854199","html_url":"https://github.com/apache/iceberg/pull/814#issuecomment-589854199","issue_url":"https://api.github.com/repos/apache/iceberg/issues/814","id":589854199,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTg1NDE5OQ==","user":{"login":"mehtaashish23","id":75326,"node_id":"MDQ6VXNlcjc1MzI2","avatar_url":"https://avatars.githubusercontent.com/u/75326?v=4","gravatar_id":"","url":"https://api.github.com/users/mehtaashish23","html_url":"https://github.com/mehtaashish23","followers_url":"https://api.github.com/users/mehtaashish23/followers","following_url":"https://api.github.com/users/mehtaashish23/following{/other_user}","gists_url":"https://api.github.com/users/mehtaashish23/gists{/gist_id}","starred_url":"https://api.github.com/users/mehtaashish23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehtaashish23/subscriptions","organizations_url":"https://api.github.com/users/mehtaashish23/orgs","repos_url":"https://api.github.com/users/mehtaashish23/repos","events_url":"https://api.github.com/users/mehtaashish23/events{/privacy}","received_events_url":"https://api.github.com/users/mehtaashish23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-21T21:57:25Z","updated_at":"2020-02-21T21:57:25Z","author_association":"CONTRIBUTOR","body":"@rdblue Thanks for the inputs, incorporated your feedback, and adding 3rd UT to capture all the cases, and clearly mentioned on each UT, what scenario it is trying to execute, in similar way you added comment in code. LMK","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589854199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589920176","html_url":"https://github.com/apache/iceberg/issues/170#issuecomment-589920176","issue_url":"https://api.github.com/repos/apache/iceberg/issues/170","id":589920176,"node_id":"MDEyOklzc3VlQ29tbWVudDU4OTkyMDE3Ng==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-22T05:18:04Z","updated_at":"2020-02-22T05:18:04Z","author_association":"CONTRIBUTOR","body":"@guilload, do you plan to work on this? We are planning to do some work for Hive read support using these MR apis. Let us know if you need any help with this, or we can even build on top of your work.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/589920176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/590636033","html_url":"https://github.com/apache/iceberg/issues/820#issuecomment-590636033","issue_url":"https://api.github.com/repos/apache/iceberg/issues/820","id":590636033,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MDYzNjAzMw==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T01:34:29Z","updated_at":"2020-02-25T01:34:29Z","author_association":"CONTRIBUTOR","body":"I think these are two different scenarios, especially in Spark. Catalog (both hadoop and hive catalog) can be plugged into Spark's multi-catalog interface, which will benefit the SQL scenario, as well as DataFrame of course; whereas `HadoopTables` I think the main scenario is DataFrame API, where we don't require a catalog necessarily. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/590636033/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591065890","html_url":"https://github.com/apache/iceberg/issues/822#issuecomment-591065890","issue_url":"https://api.github.com/repos/apache/iceberg/issues/822","id":591065890,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTA2NTg5MA==","user":{"login":"mehtaashish23","id":75326,"node_id":"MDQ6VXNlcjc1MzI2","avatar_url":"https://avatars.githubusercontent.com/u/75326?v=4","gravatar_id":"","url":"https://api.github.com/users/mehtaashish23","html_url":"https://github.com/mehtaashish23","followers_url":"https://api.github.com/users/mehtaashish23/followers","following_url":"https://api.github.com/users/mehtaashish23/following{/other_user}","gists_url":"https://api.github.com/users/mehtaashish23/gists{/gist_id}","starred_url":"https://api.github.com/users/mehtaashish23/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehtaashish23/subscriptions","organizations_url":"https://api.github.com/users/mehtaashish23/orgs","repos_url":"https://api.github.com/users/mehtaashish23/repos","events_url":"https://api.github.com/users/mehtaashish23/events{/privacy}","received_events_url":"https://api.github.com/users/mehtaashish23/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-25T20:58:42Z","updated_at":"2020-02-25T20:58:42Z","author_association":"CONTRIBUTOR","body":"Since this is compliance related, one of the way is to put the onus of file deletion on client by providing callback API hooks on file deletion, and API hooks on transaction, so that client clean up the files for transactions, that are committed. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591065890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591232359","html_url":"https://github.com/apache/iceberg/issues/820#issuecomment-591232359","issue_url":"https://api.github.com/repos/apache/iceberg/issues/820","id":591232359,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTIzMjM1OQ==","user":{"login":"xabriel","id":218555,"node_id":"MDQ6VXNlcjIxODU1NQ==","avatar_url":"https://avatars.githubusercontent.com/u/218555?v=4","gravatar_id":"","url":"https://api.github.com/users/xabriel","html_url":"https://github.com/xabriel","followers_url":"https://api.github.com/users/xabriel/followers","following_url":"https://api.github.com/users/xabriel/following{/other_user}","gists_url":"https://api.github.com/users/xabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/xabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xabriel/subscriptions","organizations_url":"https://api.github.com/users/xabriel/orgs","repos_url":"https://api.github.com/users/xabriel/repos","events_url":"https://api.github.com/users/xabriel/events{/privacy}","received_events_url":"https://api.github.com/users/xabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T04:27:37Z","updated_at":"2020-02-26T04:27:37Z","author_association":"CONTRIBUTOR","body":"Agree that they are two different use cases.\r\n\r\nIn our use case, we have a decoupled Catalog that has minimal knowledge about Iceberg. Thus we use the `HadoopTables` implementation.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591232359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591492994","html_url":"https://github.com/apache/iceberg/issues/715#issuecomment-591492994","issue_url":"https://api.github.com/repos/apache/iceberg/issues/715","id":591492994,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTQ5Mjk5NA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T15:44:02Z","updated_at":"2020-02-26T15:44:02Z","author_association":"COLLABORATOR","body":"@rdblue , thanks for the explanation, I will take this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591492994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591496494","html_url":"https://github.com/apache/iceberg/issues/359#issuecomment-591496494","issue_url":"https://api.github.com/repos/apache/iceberg/issues/359","id":591496494,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MTQ5NjQ5NA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-26T15:50:21Z","updated_at":"2020-02-26T15:50:21Z","author_association":"COLLABORATOR","body":"What format do we want for the delete files? Avro?\r\n\r\nWe need to read through the filtered parquet to construct the delete files, right?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/591496494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]