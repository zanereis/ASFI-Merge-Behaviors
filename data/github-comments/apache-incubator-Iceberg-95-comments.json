[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853489322","html_url":"https://github.com/apache/iceberg/issues/2632#issuecomment-853489322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2632","id":853489322,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzQ4OTMyMg==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T01:22:28Z","updated_at":"2021-06-03T01:22:28Z","author_association":"CONTRIBUTOR","body":"If you have partitioning by 8 buckets, then every snapshot will produce 8 data files (at most... assuming there's data for each output partition / bucket).\r\n\r\nSo if you took a snapshot, the snapshot would commit the data. And so therefore, your files will be less than 512 mb if the job needs to commit and you don't have 512 * 8 mb (as Flink jobs always commit data on snapshot iirc for correctness guarantees).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853489322/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853695862","html_url":"https://github.com/apache/iceberg/issues/2063#issuecomment-853695862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2063","id":853695862,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzY5NTg2Mg==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T08:40:06Z","updated_at":"2021-06-03T08:40:06Z","author_association":"NONE","body":"So this means that  table created though hive_catalog   con't schema evoulution  for now ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853695862/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853712817","html_url":"https://github.com/apache/iceberg/issues/2063#issuecomment-853712817","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2063","id":853712817,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzcxMjgxNw==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T09:05:00Z","updated_at":"2021-06-03T09:05:00Z","author_association":"CONTRIBUTOR","body":"I think using Spark/Flink or whatever API we can evolve the schema (we have not checked yet if the resulting table could be read or not by Hive), but we can not do schema evolution from Hive or Impala - there are ongoing efforts but nothing available ATM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853712817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853751922","html_url":"https://github.com/apache/iceberg/issues/2669#issuecomment-853751922","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2669","id":853751922,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzc1MTkyMg==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T10:06:09Z","updated_at":"2021-06-03T10:06:09Z","author_association":"NONE","body":"`Caused by: java.lang.IllegalArgumentException: Unrecognized Hadoop major version number: 3.0.0-cdh6.3.2`  .\r\nthis link shows  support hadoop version \r\nhttps://github.com/apache/iceberg/blob/11562e38255e968079a6f5c8f6a0ce14b06825af/versions.props#L5","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853751922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853816726","html_url":"https://github.com/apache/iceberg/pull/2613#issuecomment-853816726","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2613","id":853816726,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzgxNjcyNg==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T12:03:38Z","updated_at":"2021-06-03T12:03:38Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @rymurr!\r\n\r\n@rdblue, @RussellSpitzer: Would you like to take a look before we merge this change? If you have time, I would really appreciate it!\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853816726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853846540","html_url":"https://github.com/apache/iceberg/pull/2660#issuecomment-853846540","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2660","id":853846540,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzg0NjU0MA==","user":{"login":"tprelle","id":59021490,"node_id":"MDQ6VXNlcjU5MDIxNDkw","avatar_url":"https://avatars.githubusercontent.com/u/59021490?v=4","gravatar_id":"","url":"https://api.github.com/users/tprelle","html_url":"https://github.com/tprelle","followers_url":"https://api.github.com/users/tprelle/followers","following_url":"https://api.github.com/users/tprelle/following{/other_user}","gists_url":"https://api.github.com/users/tprelle/gists{/gist_id}","starred_url":"https://api.github.com/users/tprelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tprelle/subscriptions","organizations_url":"https://api.github.com/users/tprelle/orgs","repos_url":"https://api.github.com/users/tprelle/repos","events_url":"https://api.github.com/users/tprelle/events{/privacy}","received_events_url":"https://api.github.com/users/tprelle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T12:55:49Z","updated_at":"2021-06-03T12:55:49Z","author_association":"CONTRIBUTOR","body":"As incremental read i understand why as a first implementation you do not support OVERWRITES snapshot. But as incremental read implementation, REPLACE or DELETES should just be ignored and not propagated ? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853846540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853851066","html_url":"https://github.com/apache/iceberg/pull/2282#issuecomment-853851066","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2282","id":853851066,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzg1MTA2Ng==","user":{"login":"sshkvar","id":3986221,"node_id":"MDQ6VXNlcjM5ODYyMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3986221?v=4","gravatar_id":"","url":"https://api.github.com/users/sshkvar","html_url":"https://github.com/sshkvar","followers_url":"https://api.github.com/users/sshkvar/followers","following_url":"https://api.github.com/users/sshkvar/following{/other_user}","gists_url":"https://api.github.com/users/sshkvar/gists{/gist_id}","starred_url":"https://api.github.com/users/sshkvar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sshkvar/subscriptions","organizations_url":"https://api.github.com/users/sshkvar/orgs","repos_url":"https://api.github.com/users/sshkvar/repos","events_url":"https://api.github.com/users/sshkvar/events{/privacy}","received_events_url":"https://api.github.com/users/sshkvar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T13:02:53Z","updated_at":"2021-06-03T13:39:34Z","author_association":"CONTRIBUTOR","body":"Hi, I am working on write support together with @daniil-dubin \r\n@bkahloon @RussellSpitzer in current implementation we have `spark-handle-timestamp-without-timezone` flag, which can be used as read or write(after implementation) option, like \r\n```scala\r\nspark\r\n.read\r\n.format(\"iceberg\")\r\n.option(\"spark-handle-timestamp-without-timezone\", \"true\")\r\n.load(\"some.table.name\")\r\n```\r\n\r\nbut we do not have ability to set this flag when using spark sql \r\n```scala\r\nspark.sql(\"select * from some.table.name\") //<- will fail in current implementation\r\n```\r\n\r\nOur proposal is move this flag to spark session property, @bkahloon @RussellSpitzer what do you think about it? \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853851066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853948176","html_url":"https://github.com/apache/iceberg/pull/2672#issuecomment-853948176","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2672","id":853948176,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mzk0ODE3Ng==","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T15:15:12Z","updated_at":"2021-06-03T15:15:12Z","author_association":"COLLABORATOR","body":"@rymurr @TGooch44 Here is the PR to update conversions.\r\nBTW, looks like decimal type is not supported and is commented out in the code. I am wondering if there is any issue with it?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/853948176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854161415","html_url":"https://github.com/apache/iceberg/pull/2665#issuecomment-854161415","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2665","id":854161415,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDE2MTQxNQ==","user":{"login":"cwsteinbach","id":229846,"node_id":"MDQ6VXNlcjIyOTg0Ng==","avatar_url":"https://avatars.githubusercontent.com/u/229846?v=4","gravatar_id":"","url":"https://api.github.com/users/cwsteinbach","html_url":"https://github.com/cwsteinbach","followers_url":"https://api.github.com/users/cwsteinbach/followers","following_url":"https://api.github.com/users/cwsteinbach/following{/other_user}","gists_url":"https://api.github.com/users/cwsteinbach/gists{/gist_id}","starred_url":"https://api.github.com/users/cwsteinbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cwsteinbach/subscriptions","organizations_url":"https://api.github.com/users/cwsteinbach/orgs","repos_url":"https://api.github.com/users/cwsteinbach/repos","events_url":"https://api.github.com/users/cwsteinbach/events{/privacy}","received_events_url":"https://api.github.com/users/cwsteinbach/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T20:36:20Z","updated_at":"2021-06-03T20:36:20Z","author_association":"CONTRIBUTOR","body":"@kbendick, thanks for the offer! I'll reach out once I finish getting things set up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854161415/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854311244","html_url":"https://github.com/apache/iceberg/pull/2560#issuecomment-854311244","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2560","id":854311244,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDMxMTI0NA==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T02:29:36Z","updated_at":"2021-06-04T02:29:36Z","author_association":"CONTRIBUTOR","body":"@rdblue updated based on the suggestions to use `DROP`. Also fixed a bug along the way regarding nested field in `Schema`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854311244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854321485","html_url":"https://github.com/apache/iceberg/pull/2441#issuecomment-854321485","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2441","id":854321485,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDMyMTQ4NQ==","user":{"login":"jshmchenxi","id":11854435,"node_id":"MDQ6VXNlcjExODU0NDM1","avatar_url":"https://avatars.githubusercontent.com/u/11854435?v=4","gravatar_id":"","url":"https://api.github.com/users/jshmchenxi","html_url":"https://github.com/jshmchenxi","followers_url":"https://api.github.com/users/jshmchenxi/followers","following_url":"https://api.github.com/users/jshmchenxi/following{/other_user}","gists_url":"https://api.github.com/users/jshmchenxi/gists{/gist_id}","starred_url":"https://api.github.com/users/jshmchenxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshmchenxi/subscriptions","organizations_url":"https://api.github.com/users/jshmchenxi/orgs","repos_url":"https://api.github.com/users/jshmchenxi/repos","events_url":"https://api.github.com/users/jshmchenxi/events{/privacy}","received_events_url":"https://api.github.com/users/jshmchenxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T02:58:37Z","updated_at":"2021-06-04T02:58:37Z","author_association":"CONTRIBUTOR","body":"@kbendick Sorry for the late reply, I've been busy with work. I'm new to Iceberg and should learn more. And thanks for telling me the right persons to review these!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854321485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854324041","html_url":"https://github.com/apache/iceberg/pull/2441#issuecomment-854324041","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2441","id":854324041,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDMyNDA0MQ==","user":{"login":"jshmchenxi","id":11854435,"node_id":"MDQ6VXNlcjExODU0NDM1","avatar_url":"https://avatars.githubusercontent.com/u/11854435?v=4","gravatar_id":"","url":"https://api.github.com/users/jshmchenxi","html_url":"https://github.com/jshmchenxi","followers_url":"https://api.github.com/users/jshmchenxi/followers","following_url":"https://api.github.com/users/jshmchenxi/following{/other_user}","gists_url":"https://api.github.com/users/jshmchenxi/gists{/gist_id}","starred_url":"https://api.github.com/users/jshmchenxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshmchenxi/subscriptions","organizations_url":"https://api.github.com/users/jshmchenxi/orgs","repos_url":"https://api.github.com/users/jshmchenxi/repos","events_url":"https://api.github.com/users/jshmchenxi/events{/privacy}","received_events_url":"https://api.github.com/users/jshmchenxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T03:06:00Z","updated_at":"2021-06-04T03:06:00Z","author_association":"CONTRIBUTOR","body":"@ggershinsky @Fokko @rdblue Hi, shold we be moving on to parquet 1.12.0 for iceberg now? Or maybe wait for a new version like parquet 1.12.1?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854324041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854385721","html_url":"https://github.com/apache/iceberg/pull/2660#issuecomment-854385721","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2660","id":854385721,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDM4NTcyMQ==","user":{"login":"SreeramGarlapati","id":11813428,"node_id":"MDQ6VXNlcjExODEzNDI4","avatar_url":"https://avatars.githubusercontent.com/u/11813428?v=4","gravatar_id":"","url":"https://api.github.com/users/SreeramGarlapati","html_url":"https://github.com/SreeramGarlapati","followers_url":"https://api.github.com/users/SreeramGarlapati/followers","following_url":"https://api.github.com/users/SreeramGarlapati/following{/other_user}","gists_url":"https://api.github.com/users/SreeramGarlapati/gists{/gist_id}","starred_url":"https://api.github.com/users/SreeramGarlapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SreeramGarlapati/subscriptions","organizations_url":"https://api.github.com/users/SreeramGarlapati/orgs","repos_url":"https://api.github.com/users/SreeramGarlapati/repos","events_url":"https://api.github.com/users/SreeramGarlapati/events{/privacy}","received_events_url":"https://api.github.com/users/SreeramGarlapati/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T06:04:55Z","updated_at":"2021-06-04T06:04:55Z","author_association":"COLLABORATOR","body":"> As incremental read i understand why as a first implementation you do not support OVERWRITES snapshot. But as incremental read implementation, REPLACE or DELETES should just be ignored and not propagated ?\r\n\r\n@tprelle - your suggestion totally makessense. I am definitely planning to implementing `ignore deletes` & `replace`. I will introduce a spark option for it in my next PR. Pl. refer to our disc here: https://github.com/apache/iceberg/pull/2611#issuecomment-852783552. \r\n\r\nOverall, the principle that I am trying to follow - which also came as a suggestion from @rdblue - is that - we want to keep the PRs as small and yet useful as possible - to keep the cognitive load on the reviewers minimal. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854385721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854406583","html_url":"https://github.com/apache/iceberg/issues/2610#issuecomment-854406583","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2610","id":854406583,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQwNjU4Mw==","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T06:43:12Z","updated_at":"2021-06-04T06:43:12Z","author_association":"NONE","body":"Yes, I have done compaction when the flink CDC job was still running. \r\n\r\nBefore running the compaction job\r\n![image](https://user-images.githubusercontent.com/57655135/120757110-bcff9a00-c52d-11eb-93d0-c637be447608.png)\r\n\r\nAfter running compaction and manifest rewrite action\r\n![image](https://user-images.githubusercontent.com/57655135/120757221-e28ca380-c52d-11eb-838a-895afa3d17e9.png)\r\n\r\n@openinx Here as you can see, we are getting duplicates for various rows which were updated over different times. I mean this issue does not happen for only those rows which got updated during the compaction job duration","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854406583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854435599","html_url":"https://github.com/apache/iceberg/pull/2520#issuecomment-854435599","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2520","id":854435599,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQzNTU5OQ==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T07:24:02Z","updated_at":"2021-06-04T07:24:02Z","author_association":"CONTRIBUTOR","body":"@flyrain thanks for the review! I am marking this as a draft. I spent a few days to figure out the way to go forward with all the changes needed in `ManifestFiles` API and I think I have a plan. I will separate this PR to a few different ones, mainly:\r\n\r\n1. adding `keyMetadata` byte array to `ManifestFile` interface and implementation classes.\r\n2. add support in `EncryptionManager` to decrypt and encrypt by file type\r\n3. changes to use encryption manager to supply key metadata information down to manifest writer and reader. This will be separated to multiple PRs for core, and engine related changes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854435599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854463914","html_url":"https://github.com/apache/iceberg/issues/2673#issuecomment-854463914","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2673","id":854463914,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ2MzkxNA==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:04:02Z","updated_at":"2021-06-04T08:04:02Z","author_association":"CONTRIBUTOR","body":"@silvermissile: Have you tried to use the full URI for the table, like \"hdfs://{NameNodeHost}:8020/\"?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854463914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854478205","html_url":"https://github.com/apache/iceberg/issues/2673#issuecomment-854478205","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2673","id":854478205,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ3ODIwNQ==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:26:17Z","updated_at":"2021-06-04T08:26:17Z","author_association":"NONE","body":"> @silvermissile: Have you tried to use the full URI for the table, like \"hdfs://{NameNodeHost}:8020/\"?\r\n\r\n@pvary  thank you. I try set location hdfs:///xxxx or hdfs://namesevice:8020/xxx , get same Error ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854478205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854480928","html_url":"https://github.com/apache/iceberg/issues/2670#issuecomment-854480928","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2670","id":854480928,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ4MDkyOA==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:30:35Z","updated_at":"2021-06-04T08:30:53Z","author_association":"NONE","body":"It works to alt a hadoop_catalog iceberg table using sparksql ,  but not for hive_catalog","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854480928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854490837","html_url":"https://github.com/apache/iceberg/issues/2636#issuecomment-854490837","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2636","id":854490837,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ5MDgzNw==","user":{"login":"tiborkiss","id":531899,"node_id":"MDQ6VXNlcjUzMTg5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/531899?v=4","gravatar_id":"","url":"https://api.github.com/users/tiborkiss","html_url":"https://github.com/tiborkiss","followers_url":"https://api.github.com/users/tiborkiss/followers","following_url":"https://api.github.com/users/tiborkiss/following{/other_user}","gists_url":"https://api.github.com/users/tiborkiss/gists{/gist_id}","starred_url":"https://api.github.com/users/tiborkiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiborkiss/subscriptions","organizations_url":"https://api.github.com/users/tiborkiss/orgs","repos_url":"https://api.github.com/users/tiborkiss/repos","events_url":"https://api.github.com/users/tiborkiss/events{/privacy}","received_events_url":"https://api.github.com/users/tiborkiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:46:38Z","updated_at":"2021-06-04T08:46:38Z","author_association":"NONE","body":"I close because we had a non-standard aws client configuration, which caused the problem.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854490837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854495724","html_url":"https://github.com/apache/iceberg/issues/2673#issuecomment-854495724","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2673","id":854495724,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ5NTcyNA==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:54:52Z","updated_at":"2021-06-04T08:54:52Z","author_association":"CONTRIBUTOR","body":"@silvermissile: Do you have more logs around this code? I would be especially interested in the full stack trace.\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854495724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854496001","html_url":"https://github.com/apache/iceberg/issues/2673#issuecomment-854496001","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2673","id":854496001,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ5NjAwMQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:55:21Z","updated_at":"2021-06-04T08:55:21Z","author_association":"CONTRIBUTOR","body":"Maybe it is in the HS2 logs","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854496001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854498216","html_url":"https://github.com/apache/iceberg/issues/2670#issuecomment-854498216","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2670","id":854498216,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDQ5ODIxNg==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T08:58:47Z","updated_at":"2021-06-04T08:58:47Z","author_association":"NONE","body":"spark-sql   needs   `  --confextensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions `  , sorry to not have notice the document change \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854498216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854526069","html_url":"https://github.com/apache/iceberg/issues/2673#issuecomment-854526069","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2673","id":854526069,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDUyNjA2OQ==","user":{"login":"silvermissile","id":5319647,"node_id":"MDQ6VXNlcjUzMTk2NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5319647?v=4","gravatar_id":"","url":"https://api.github.com/users/silvermissile","html_url":"https://github.com/silvermissile","followers_url":"https://api.github.com/users/silvermissile/followers","following_url":"https://api.github.com/users/silvermissile/following{/other_user}","gists_url":"https://api.github.com/users/silvermissile/gists{/gist_id}","starred_url":"https://api.github.com/users/silvermissile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silvermissile/subscriptions","organizations_url":"https://api.github.com/users/silvermissile/orgs","repos_url":"https://api.github.com/users/silvermissile/repos","events_url":"https://api.github.com/users/silvermissile/events{/privacy}","received_events_url":"https://api.github.com/users/silvermissile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T09:23:07Z","updated_at":"2021-06-04T09:23:07Z","author_association":"NONE","body":"the detail log is shown  above from beeline console.\r\n\r\nchange `hive-log4j2.properties` , hs2 log only show one line \r\n```\r\nFAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. java.lang.RuntimeException: MetaException(message:org.apache.hadoop.hive.serde2.SerDeException Please provide an existing table or a valid schema)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854526069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854541331","html_url":"https://github.com/apache/iceberg/pull/2674#issuecomment-854541331","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2674","id":854541331,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDU0MTMzMQ==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T09:49:14Z","updated_at":"2021-06-04T09:49:14Z","author_association":"CONTRIBUTOR","body":"Would love to chat about that stuff. I keep on promising myself I will make time to work on it too :-)\r\n\r\ncc @nastra and @jasonhughes248 they have also been looking at some community stuff and may be interested","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854541331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854546313","html_url":"https://github.com/apache/iceberg/pull/2674#issuecomment-854546313","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2674","id":854546313,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDU0NjMxMw==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T09:57:59Z","updated_at":"2021-06-04T09:57:59Z","author_association":"CONTRIBUTOR","body":"> Would love to chat about that stuff. I keep on promising myself I will make time to work on it too :-)\r\n> \r\n> cc @nastra and @jasonhughes248 they have also been looking at some community stuff and may be interested\r\n\r\nCool. I basically have a pretty good working starting point, so I will cut a (possibly new) ticket and push that by Monday or Tuesday and we can iterate off of that or use it as a starting point of discussion.\r\n\r\nI've also got a handful of helper scripts that might be overkill. I just need to remove some of the internal stuff (which is probably going to be as simple as updating the base docker image). Looking forward to it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854546313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854568624","html_url":"https://github.com/apache/iceberg/pull/2674#issuecomment-854568624","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2674","id":854568624,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDU2ODYyNA==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:14:49Z","updated_at":"2021-06-04T10:14:49Z","author_association":"CONTRIBUTOR","body":"for what its worth we have:\r\n\r\n* A [Demo notebook](https://colab.research.google.com/github/projectnessie/nessie-demos/blob/main/colab/nessie-iceberg-demo-nba.ipynb) which sets up Nessie, Spark etc and runs some basic iceberg commands\r\n* A [Spark Config notebook](https://colab.research.google.com/github/projectnessie/nessie-demos/blob/main/colab/nessie-iceberg-spark-setup.ipynb) to hihglight the important configs for spark when running iceberg\r\n* a [docker-compose.yaml](https://github.com/projectnessie/nessie/blob/main/python/demo/docker-compose.yml) specifically for iceberg/spark. \r\n\r\nGiven the nessie specifics it might not be exactly right for you but hopefully there are some bits that could be reusable. We also did all of our demos/examples in python so that they could run on colab w/o extra infrastructure","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854568624/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854582461","html_url":"https://github.com/apache/iceberg/pull/2674#issuecomment-854582461","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2674","id":854582461,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDU4MjQ2MQ==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:21:01Z","updated_at":"2021-06-04T10:21:01Z","author_association":"CONTRIBUTOR","body":"> for what its worth we have:\r\n> \r\n> * A [Demo notebook](https://colab.research.google.com/github/projectnessie/nessie-demos/blob/main/colab/nessie-iceberg-demo-nba.ipynb) which sets up Nessie, Spark etc and runs some basic iceberg commands\r\n> * A [Spark Config notebook](https://colab.research.google.com/github/projectnessie/nessie-demos/blob/main/colab/nessie-iceberg-spark-setup.ipynb) to hihglight the important configs for spark when running iceberg\r\n> * a [docker-compose.yaml](https://github.com/projectnessie/nessie/blob/main/python/demo/docker-compose.yml) specifically for iceberg/spark.\r\n> \r\n> Given the nessie specifics it might not be exactly right for you but hopefully there are some bits that could be reusable. We also did all of our demos/examples in python so that they could run on colab w/o extra infrastructure\r\n\r\nCool. That will likely complement well with what I have, though it might need some tweaking. I'm opening a ticket now, but I will try to get my stuff up early next week for review and then we can iterate from there? We don't necessarily have to use my setup even, but it's probably the lowest common denominator while still being fully featured. The one big thing it's missing currently is a notebook server, which I was going to add, but in the interest of getting it up for discussion and community review, I'll just go with the basics. cc'ing you and the folks you mentioned on the ticket now! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854582461/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854604098","html_url":"https://github.com/apache/iceberg/issues/2676#issuecomment-854604098","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2676","id":854604098,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYwNDA5OA==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:32:32Z","updated_at":"2021-06-04T10:32:45Z","author_association":"CONTRIBUTOR","body":"@rymurr and I had some initial discussion in this PR https://github.com/apache/iceberg/pull/2674, where there are also links to some of the stuff that he and some of the Nessie folks have put together that runs a notebook for the basics.\r\n\r\nSo there will likely be some overlap, but at least from a first pass, there's less overlap than one might think. Mine runs entirely locally via docker-compose (HDFS, Hive Metastore backed by Postgres, Spark, Zookeeper, and WIP on Kafka for streaming) and has been really useful for mounting in my local iceberg codebase to test things without having to publish jars beyond maven local repo. Theirs also uses docker-compose, but runs via notebooks (which I think is great). There's is more Nessie focused, but has the added advantage of being able to run on Google code lab without the need for your own infra as local docker development can definitely slow down a laptop.\r\n\r\nPlease feel free to comment here and I will prioritize pushing what I have (I just need to remove some internal stuff) so that we can then iterate from there or regroup and come up with a better design. I'm sure given the large number of components that this will be an on going effort. I would love to champion this as I do a lot of container work already.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854604098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854604651","html_url":"https://github.com/apache/iceberg/issues/2676#issuecomment-854604651","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2676","id":854604651,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYwNDY1MQ==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:33:31Z","updated_at":"2021-06-04T10:33:31Z","author_association":"CONTRIBUTOR","body":"Also cc @raptond and @holdenk who might have some interest as well .","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854604651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854605694","html_url":"https://github.com/apache/iceberg/issues/2676#issuecomment-854605694","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2676","id":854605694,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYwNTY5NA==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:35:33Z","updated_at":"2021-06-04T10:35:33Z","author_association":"CONTRIBUTOR","body":"Thanks for starting this @kbendick! Super useful! you can find a short description of what we do in this comment: https://github.com/apache/iceberg/pull/2674#issuecomment-854568624 \r\n\r\nOur goal w/ our demos was to have zero extra set-up. So a notebook is hosted on google colab and it locally starts spark and needed infra. Admittedly its not distributed and it wouldn't be easy to get Hive started in that way. @snazy also [added testing](https://github.com/projectnessie/nessie-demos/tree/main/notebook-tests) to our demo notebooks which has turned into a great pre-release smoke test\r\n\r\nIve seen some pretty involved docker and docker-compose demos that are cool but require a dozen docker images to be started locally. My request is that a new user don't have to start up half the world just to see how iceberg works, however maybe I am unique in that I find those types of demos frustrating. Maybe there is room for both too: quick, short, focused demos and a bigger integrated one to get a feel for waht its like to run in prod","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854605694/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854609704","html_url":"https://github.com/apache/iceberg/pull/2671#issuecomment-854609704","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2671","id":854609704,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDYwOTcwNA==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T10:43:46Z","updated_at":"2021-06-04T10:43:46Z","author_association":"CONTRIBUTOR","body":"Thanks @marton-bod for the PR","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854609704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854792756","html_url":"https://github.com/apache/iceberg/pull/1100#issuecomment-854792756","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1100","id":854792756,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDc5Mjc1Ng==","user":{"login":"joewood","id":1389583,"node_id":"MDQ6VXNlcjEzODk1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1389583?v=4","gravatar_id":"","url":"https://api.github.com/users/joewood","html_url":"https://github.com/joewood","followers_url":"https://api.github.com/users/joewood/followers","following_url":"https://api.github.com/users/joewood/following{/other_user}","gists_url":"https://api.github.com/users/joewood/gists{/gist_id}","starred_url":"https://api.github.com/users/joewood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joewood/subscriptions","organizations_url":"https://api.github.com/users/joewood/orgs","repos_url":"https://api.github.com/users/joewood/repos","events_url":"https://api.github.com/users/joewood/events{/privacy}","received_events_url":"https://api.github.com/users/joewood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T14:56:14Z","updated_at":"2021-06-04T14:56:14Z","author_association":"NONE","body":"@xinbinhuang -  let me know if you need any help. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854792756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854918867","html_url":"https://github.com/apache/iceberg/issues/2676#issuecomment-854918867","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2676","id":854918867,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDkxODg2Nw==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T18:22:30Z","updated_at":"2021-06-04T18:25:57Z","author_association":"CONTRIBUTOR","body":"> Ive seen some pretty involved docker and docker-compose demos that are cool but require a dozen docker images to be started locally. My request is that a new user don't have to start up half the world just to see how iceberg works, however maybe I am unique in that I find those types of demos frustrating. Maybe there is room for both too: quick, short, focused demos and a bigger integrated one to get a feel for waht its like to run in prod\r\n\r\nI agree. When myself and @rdblue were discussing this a while back, we wanted to keep things as simple as possible, particularly for the demo. So ideally just the bare mininum (a runtime, even if not distributed, and a catalog - ideally the simplest possible).\r\n\r\nI believe there are issues when using derby in memory (though possibly those have been corrected and I only recently reencountered them when using an older iceberg version).\r\n\r\nThe setup I have is definitely more of a dev environment in that sense (3 or 4 images), but I'll see what I can do about getting it paired down. Once I've pushed the stuff I have early next week, we can go from there. I'm by no means married to the stuff I have currently, but do think it would be a good starting off point.\r\n\r\nI'll also take a look at the smoke tests etc in yours and see what can be done to help simplify mine.\r\n\r\nI agree that it might make sense to have both: something simple that people can just stand up without any nonsense, and then execute the basic Iceberg commands to get a feeling for what it's all about, as well as something that might be a bit more full featured (e.g. with Hive, etc) that people can look to to get an understanding of a more full setup. It would also allow for showing people in a more practical sense the various catalogs (i.e. something that runs with the Glue Catalog as well, etc).\r\n\r\nPerhaps some of it might be better suited for the wiki too, where a base setup that's slightly more complex might be desired.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854918867/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854981706","html_url":"https://github.com/apache/iceberg/pull/2672#issuecomment-854981706","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2672","id":854981706,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDk4MTcwNg==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T20:28:36Z","updated_at":"2021-06-04T20:28:36Z","author_association":"CONTRIBUTOR","body":"> @rymurr @TGooch44 Here is the PR to update conversions.\r\n> BTW, looks like decimal type is not supported and is commented out in the code. I am wondering if there is any issue with it?\r\n\r\nIt was just never fully tested/implemented.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/854981706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855000716","html_url":"https://github.com/apache/iceberg/pull/2672#issuecomment-855000716","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2672","id":855000716,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTAwMDcxNg==","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T21:14:11Z","updated_at":"2021-06-04T21:14:11Z","author_association":"COLLABORATOR","body":"thanks @TGooch44 @rymurr for the review. I will check the decimal type and put it in a different PR.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855000716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855000885","html_url":"https://github.com/apache/iceberg/pull/2648#issuecomment-855000885","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2648","id":855000885,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTAwMDg4NQ==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T21:14:33Z","updated_at":"2021-06-04T21:14:33Z","author_association":"CONTRIBUTOR","body":"This PR is related to this one: https://github.com/apache/iceberg/pull/2659\r\n\r\nThough I'm not sure if cache-enabled is supported in Flink (I might be wrong).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855000885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855039496","html_url":"https://github.com/apache/iceberg/pull/2520#issuecomment-855039496","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2520","id":855039496,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTAzOTQ5Ng==","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T22:15:33Z","updated_at":"2021-06-04T22:15:33Z","author_association":"CONTRIBUTOR","body":"@jackye1995 thanks for the update, looking forward to your new PRs. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855039496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855045199","html_url":"https://github.com/apache/iceberg/pull/2660#issuecomment-855045199","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2660","id":855045199,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTA0NTE5OQ==","user":{"login":"tprelle","id":59021490,"node_id":"MDQ6VXNlcjU5MDIxNDkw","avatar_url":"https://avatars.githubusercontent.com/u/59021490?v=4","gravatar_id":"","url":"https://api.github.com/users/tprelle","html_url":"https://github.com/tprelle","followers_url":"https://api.github.com/users/tprelle/followers","following_url":"https://api.github.com/users/tprelle/following{/other_user}","gists_url":"https://api.github.com/users/tprelle/gists{/gist_id}","starred_url":"https://api.github.com/users/tprelle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tprelle/subscriptions","organizations_url":"https://api.github.com/users/tprelle/orgs","repos_url":"https://api.github.com/users/tprelle/repos","events_url":"https://api.github.com/users/tprelle/events{/privacy}","received_events_url":"https://api.github.com/users/tprelle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T22:22:18Z","updated_at":"2021-06-04T22:22:18Z","author_association":"CONTRIBUTOR","body":"Hi @SreeramGarlapati thanks to pointing me https://github.com/apache/iceberg/pull/2611 discussion. \r\nI was searching a way to implements the incremental read on overwrite (currently merge statements with at least when update will do an overwrite snapshot because of the copy on write implementation).\r\nDo you have an idea ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855045199/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855189040","html_url":"https://github.com/apache/iceberg/pull/2648#issuecomment-855189040","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2648","id":855189040,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTE4OTA0MA==","user":{"login":"jshmchenxi","id":11854435,"node_id":"MDQ6VXNlcjExODU0NDM1","avatar_url":"https://avatars.githubusercontent.com/u/11854435?v=4","gravatar_id":"","url":"https://api.github.com/users/jshmchenxi","html_url":"https://github.com/jshmchenxi","followers_url":"https://api.github.com/users/jshmchenxi/followers","following_url":"https://api.github.com/users/jshmchenxi/following{/other_user}","gists_url":"https://api.github.com/users/jshmchenxi/gists{/gist_id}","starred_url":"https://api.github.com/users/jshmchenxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jshmchenxi/subscriptions","organizations_url":"https://api.github.com/users/jshmchenxi/orgs","repos_url":"https://api.github.com/users/jshmchenxi/repos","events_url":"https://api.github.com/users/jshmchenxi/events{/privacy}","received_events_url":"https://api.github.com/users/jshmchenxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-05T05:51:44Z","updated_at":"2021-06-05T06:06:37Z","author_association":"CONTRIBUTOR","body":"@kbendick  Yes, there is also a `cache-enabled` option in [FlinkCatalogFactory](https://github.com/apache/iceberg/blob/master/flink/src/main/java/org/apache/iceberg/flink/FlinkCatalogFactory.java#L129)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855189040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855204170","html_url":"https://github.com/apache/iceberg/pull/1100#issuecomment-855204170","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1100","id":855204170,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTIwNDE3MA==","user":{"login":"dreamputer","id":7284267,"node_id":"MDQ6VXNlcjcyODQyNjc=","avatar_url":"https://avatars.githubusercontent.com/u/7284267?v=4","gravatar_id":"","url":"https://api.github.com/users/dreamputer","html_url":"https://github.com/dreamputer","followers_url":"https://api.github.com/users/dreamputer/followers","following_url":"https://api.github.com/users/dreamputer/following{/other_user}","gists_url":"https://api.github.com/users/dreamputer/gists{/gist_id}","starred_url":"https://api.github.com/users/dreamputer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dreamputer/subscriptions","organizations_url":"https://api.github.com/users/dreamputer/orgs","repos_url":"https://api.github.com/users/dreamputer/repos","events_url":"https://api.github.com/users/dreamputer/events{/privacy}","received_events_url":"https://api.github.com/users/dreamputer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-05T08:16:42Z","updated_at":"2021-06-05T08:16:42Z","author_association":"NONE","body":"Hi, I was not able to create table with error \"**Requested replication 0 is less than the required minimum 1**\". Any pointers? Thanks!\r\n\r\nscala> val table = tables.create(schema, spec, \"hdfs:/tables/logging/logs\")\r\n\r\norg.apache.iceberg.exceptions.RuntimeIOException: Failed to create file: hdfs:/tables/logging/logs/metadata/d87fd555-e59b-48c1-8ad9-b426354a1c7f.metadata.json\r\n  at org.apache.iceberg.hadoop.HadoopOutputFile.create(HadoopOutputFile.java:78)\r\n  at org.apache.iceberg.TableMetadataParser.internalWrite(TableMetadataParser.java:113)\r\n  at org.apache.iceberg.TableMetadataParser.write(TableMetadataParser.java:107)\r\n  at org.apache.iceberg.hadoop.HadoopTableOperations.commit(HadoopTableOperations.java:142)\r\n  at org.apache.iceberg.hadoop.HadoopTables.create(HadoopTables.java:149)\r\n  at org.apache.iceberg.Tables.create(Tables.java:37)\r\n  ... 49 elided\r\nCaused by: org.apache.hadoop.ipc.RemoteException: file /tables/logging/logs/metadata/d87fd555-e59b-48c1-8ad9-b426354a1c7f.metadata.json on client 172.19.0.3.\r\nRequested replication 0 is less than the required minimum 1\r\n\tat org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.verifyReplication(BlockManager.java:1036)\r\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.startFileInt(FSNamesystem.java:2389)\r\n\tat org.apache.hadoop.hdfs.server.namenode.FSNamesystem.startFile(FSNamesystem.java:2349)\r\n\tat org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.create(NameNodeRpcServer.java:624)\r\n\tat org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.create(ClientNamenodeProtocolServerSideTranslatorPB.java:398)\r\n\tat org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java)\r\n\tat org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:616)\r\n\tat org.apache.hadoop.ipc.RPC$Server.call(RPC.java:982)\r\n\tat org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2217)\r\n\tat org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:2213)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1746)\r\n\tat org.apache.hadoop.ipc.Server$Handler.run(Server.java:2213)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855204170/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855470756","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-855470756","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":855470756,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTQ3MDc1Ng==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-06T22:09:29Z","updated_at":"2021-06-06T22:09:29Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer I have changed the build to build spark3 and spark3-extensions against Spark 3.0, and added tasks to build and run the tests in those two modules against Spark 3.1. spark3-runtime is thus also built against Spark 3.0,  but a task is added that builds and runs the integration test against Spark 3.1 using the runtime jar (built against 3.0). The build.gradle is based on the one in your PR, but I had to make some modifications in order to get the Spark 3.1 tests in spark3 and spark3-extensions to actually run (before that, they were not getting run, so we were only testing Spark 3.0).\r\n@rdblue please take a look and see if you are fine with this approach. I have made additional changes to the code to account for runtime invocations that were not caught before at compile-time. As I have stated, there could be more incompatibilities that we have not caught because our tests don't exercise some code paths.\r\nIf you are fine with this, I'll rebase on master and make sure that changes made to spark3 and spark3-extensions since I started this PR are accounted for as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855470756/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855537519","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-855537519","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":855537519,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTUzNzUxOQ==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T02:47:39Z","updated_at":"2021-06-07T02:47:39Z","author_association":"CONTRIBUTOR","body":"Ok, I rebased on master. There don't seem to be any additional changes necessary to get a successful build.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855537519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855742959","html_url":"https://github.com/apache/iceberg/pull/2613#issuecomment-855742959","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2613","id":855742959,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTc0Mjk1OQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T08:54:21Z","updated_at":"2021-06-07T08:54:21Z","author_association":"CONTRIBUTOR","body":"Thanks @szlta for the PR and @rymurr for the review!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855742959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855829298","html_url":"https://github.com/apache/iceberg/pull/2613#issuecomment-855829298","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2613","id":855829298,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTgyOTI5OA==","user":{"login":"szlta","id":40628386,"node_id":"MDQ6VXNlcjQwNjI4Mzg2","avatar_url":"https://avatars.githubusercontent.com/u/40628386?v=4","gravatar_id":"","url":"https://api.github.com/users/szlta","html_url":"https://github.com/szlta","followers_url":"https://api.github.com/users/szlta/followers","following_url":"https://api.github.com/users/szlta/following{/other_user}","gists_url":"https://api.github.com/users/szlta/gists{/gist_id}","starred_url":"https://api.github.com/users/szlta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szlta/subscriptions","organizations_url":"https://api.github.com/users/szlta/orgs","repos_url":"https://api.github.com/users/szlta/repos","events_url":"https://api.github.com/users/szlta/events{/privacy}","received_events_url":"https://api.github.com/users/szlta/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T11:02:02Z","updated_at":"2021-06-07T11:02:02Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews and the commit!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855829298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855842161","html_url":"https://github.com/apache/iceberg/pull/2667#issuecomment-855842161","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2667","id":855842161,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTg0MjE2MQ==","user":{"login":"southernriver","id":20614350,"node_id":"MDQ6VXNlcjIwNjE0MzUw","avatar_url":"https://avatars.githubusercontent.com/u/20614350?v=4","gravatar_id":"","url":"https://api.github.com/users/southernriver","html_url":"https://github.com/southernriver","followers_url":"https://api.github.com/users/southernriver/followers","following_url":"https://api.github.com/users/southernriver/following{/other_user}","gists_url":"https://api.github.com/users/southernriver/gists{/gist_id}","starred_url":"https://api.github.com/users/southernriver/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/southernriver/subscriptions","organizations_url":"https://api.github.com/users/southernriver/orgs","repos_url":"https://api.github.com/users/southernriver/repos","events_url":"https://api.github.com/users/southernriver/events{/privacy}","received_events_url":"https://api.github.com/users/southernriver/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T11:21:51Z","updated_at":"2021-06-07T11:21:51Z","author_association":"CONTRIBUTOR","body":"cc @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855842161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855980177","html_url":"https://github.com/apache/iceberg/pull/2664#issuecomment-855980177","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2664","id":855980177,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTk4MDE3Nw==","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T14:31:16Z","updated_at":"2021-06-07T14:31:16Z","author_association":"CONTRIBUTOR","body":"@kbendick thanks for mentioning https://github.com/apache/iceberg/issues/2607. I've read through it and I don't have any better suggestions than what was already mentioned on https://github.com/apache/iceberg/issues/2607.\r\n\r\nRe the similary of https://github.com/apache/iceberg/issues/2607 and https://github.com/apache/iceberg/issues/2664: both are kind of related, but different at the same time. https://github.com/apache/iceberg/issues/2607 is more about overriding hadoop config stuff, whereas https://github.com/apache/iceberg/issues/2664 is about extracting some info at some point and passing it down via the existing properties.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855980177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855982734","html_url":"https://github.com/apache/iceberg/pull/2664#issuecomment-855982734","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2664","id":855982734,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTk4MjczNA==","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T14:34:26Z","updated_at":"2021-06-07T14:34:26Z","author_association":"CONTRIBUTOR","body":"@rdblue given that this approach came up in https://github.com/apache/iceberg/pull/1587/files#r520825564, would you also like to weigh in here?\r\nWe were just discussing with @rymurr whether there's a chance to make the proposed approach from #2664 in a way that is more widely applicable. So far I haven't been able to come up with a better idea unfortunately.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/855982734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856093977","html_url":"https://github.com/apache/iceberg/pull/2591#issuecomment-856093977","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2591","id":856093977,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjA5Mzk3Nw==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T16:42:02Z","updated_at":"2021-06-07T16:42:02Z","author_association":"CONTRIBUTOR","body":"I agree about the complexity of figuring out whether a delete file is still needed and that it is not really specific to compaction. Ideally, the algorithm should be generic and efficient enough so that we can apply it beyond compaction use cases. I think having partition-level summaries may help us there (i.e. knowing the min sequence of data files per partition).\r\n\r\nThere is probably another question that we can consider sooner (but after this PR). We could pick a file if it is optimal in size but requires us to apply a lot of delete files on scan. It probably makes sense to include such data files for rewrites as the new file will have a higher sequence number so the deletes will no longer apply. Again, that's something we can add in the future.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856093977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856128048","html_url":"https://github.com/apache/iceberg/pull/2595#issuecomment-856128048","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2595","id":856128048,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjEyODA0OA==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T17:34:48Z","updated_at":"2021-06-07T17:34:48Z","author_association":"MEMBER","body":"@kbendick  got this error\r\n```* What went wrong:\r\nExecution failed for task ':iceberg-spark2:jmh'.\r\n> A failure occurred while executing me.champeau.gradle.IsolatedRunner\r\n   > Error during execution of benchmarks\r\n   ```\r\n   \r\n   When i ran \r\n   ```g jmh```\r\n   \r\n   on the pr","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856128048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856132676","html_url":"https://github.com/apache/iceberg/issues/2679#issuecomment-856132676","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2679","id":856132676,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjEzMjY3Ng==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T17:38:21Z","updated_at":"2021-06-07T17:38:56Z","author_association":"CONTRIBUTOR","body":"I think this is because the Iceberg identifier field column can be nullable, but Flink does not allow nullable primary key column. Is it the case for you? What is the type of `id` column in your Iceberg schema?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856132676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856203771","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-856203771","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":856203771,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjIwMzc3MQ==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T19:37:45Z","updated_at":"2021-06-07T19:37:45Z","author_association":"MEMBER","body":"@wypoon Do we need a testSpark31 for spark3-extensions too? Or do we have no code split there?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856203771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856218575","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-856218575","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":856218575,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjIxODU3NQ==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T20:05:14Z","updated_at":"2021-06-07T20:05:14Z","author_association":"MEMBER","body":"I think this looks pretty good outside of the spark3-extensions test case :+1:","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856218575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856252963","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-856252963","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":856252963,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjI1Mjk2Mw==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T20:58:51Z","updated_at":"2021-06-07T20:58:51Z","author_association":"CONTRIBUTOR","body":"> @wypoon Do we need a testSpark31 for spark3-extensions too? Or do we have no code split there?\r\n\r\nThere is a testSpark31 for spark3 and spark3-extensions (you must have missed it somehow). For spark3-runtime, a spark31IntegrationTest is added.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856252963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856253845","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-856253845","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":856253845,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjI1Mzg0NQ==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T21:00:23Z","updated_at":"2021-06-07T21:00:23Z","author_association":"MEMBER","body":"Excellent! I missed that when I was looking through the test dependencies\n\nOn Mon, Jun 7, 2021 at 3:59 PM Wing Yew Poon ***@***.***>\nwrote:\n\n> @wypoon <https://github.com/wypoon> Do we need a testSpark31 for\n> spark3-extensions too? Or do we have no code split there?\n>\n> There is a testSpark31 for spark3 and spark3-extensions (you must have\n> missed it somehow). For spark3-runtime, a spark31IntegrationTest is added.\n>\n> \n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/pull/2512#issuecomment-856252963>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AADE2YI2JALLQZA2TZZASM3TRUXJRANCNFSM43R5UBZQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856253845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856394394","html_url":"https://github.com/apache/iceberg/issues/2308#issuecomment-856394394","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2308","id":856394394,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjM5NDM5NA==","user":{"login":"xwmr-max","id":61017037,"node_id":"MDQ6VXNlcjYxMDE3MDM3","avatar_url":"https://avatars.githubusercontent.com/u/61017037?v=4","gravatar_id":"","url":"https://api.github.com/users/xwmr-max","html_url":"https://github.com/xwmr-max","followers_url":"https://api.github.com/users/xwmr-max/followers","following_url":"https://api.github.com/users/xwmr-max/following{/other_user}","gists_url":"https://api.github.com/users/xwmr-max/gists{/gist_id}","starred_url":"https://api.github.com/users/xwmr-max/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xwmr-max/subscriptions","organizations_url":"https://api.github.com/users/xwmr-max/orgs","repos_url":"https://api.github.com/users/xwmr-max/repos","events_url":"https://api.github.com/users/xwmr-max/events{/privacy}","received_events_url":"https://api.github.com/users/xwmr-max/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T02:43:31Z","updated_at":"2021-06-08T02:44:15Z","author_association":"CONTRIBUTOR","body":">  Luckily, we streaming update/upsert job won't produce any position delete files that delete the old data files, so that should be OK.\r\n\r\n@openinx  I think this is possible. When you insert multiple data with the same primary key very quickly and perform upsert, a lot of position delete files will be generated.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856394394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856400636","html_url":"https://github.com/apache/iceberg/issues/2308#issuecomment-856400636","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2308","id":856400636,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjQwMDYzNg==","user":{"login":"xwmr-max","id":61017037,"node_id":"MDQ6VXNlcjYxMDE3MDM3","avatar_url":"https://avatars.githubusercontent.com/u/61017037?v=4","gravatar_id":"","url":"https://api.github.com/users/xwmr-max","html_url":"https://github.com/xwmr-max","followers_url":"https://api.github.com/users/xwmr-max/followers","following_url":"https://api.github.com/users/xwmr-max/following{/other_user}","gists_url":"https://api.github.com/users/xwmr-max/gists{/gist_id}","starred_url":"https://api.github.com/users/xwmr-max/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xwmr-max/subscriptions","organizations_url":"https://api.github.com/users/xwmr-max/orgs","repos_url":"https://api.github.com/users/xwmr-max/repos","events_url":"https://api.github.com/users/xwmr-max/events{/privacy}","received_events_url":"https://api.github.com/users/xwmr-max/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T03:01:59Z","updated_at":"2021-06-08T03:02:25Z","author_association":"CONTRIBUTOR","body":">  But it does not work for the position delete files because once we rewrite the data files then all of the row offset are changed, finally the delete files could not be applied to the rewrite files. \r\n\r\n@openinx Isnt this position delete files mixed with the equality delete files to filter data files? You mean that position delete files can filter data files directly, instead of first filtering equality delete files through position delete files, and then filtering through equality delete files after filtering data files?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856400636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856442050","html_url":"https://github.com/apache/iceberg/issues/1949#issuecomment-856442050","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1949","id":856442050,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjQ0MjA1MA==","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T05:03:51Z","updated_at":"2021-06-08T05:03:51Z","author_association":"NONE","body":"@mehtaashish23 We are also doing something similar, were you able to contribute this feature?  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856442050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856451966","html_url":"https://github.com/apache/iceberg/issues/2681#issuecomment-856451966","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2681","id":856451966,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjQ1MTk2Ng==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T05:24:13Z","updated_at":"2021-06-08T05:24:13Z","author_association":"CONTRIBUTOR","body":"Hi @jackye1995,\r\n\r\nWe definitely think that having the ability to create partitioned Iceberg tables with all of the supported transformation is important. @lcspinter is working on the feature in hive codebase: https://issues.apache.org/jira/browse/HIVE-25179\r\n\r\nThe main goal there is to support the same syntax that is supported by Spark.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856451966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856453491","html_url":"https://github.com/apache/iceberg/issues/2681#issuecomment-856453491","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2681","id":856453491,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjQ1MzQ5MQ==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T05:27:21Z","updated_at":"2021-06-08T05:27:21Z","author_association":"CONTRIBUTOR","body":"@pvary thanks for the quick reply!\r\n\r\nI saw the JIRA, the major concern I have is that organizations might not be able to switch to a new syntax given the complexity of Hive upgrade, so this proposal is really to allow people to use hidden partition without the need to upgrade Hive.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856453491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856465823","html_url":"https://github.com/apache/iceberg/issues/2681#issuecomment-856465823","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2681","id":856465823,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjQ2NTgyMw==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T05:52:03Z","updated_at":"2021-06-08T05:52:03Z","author_association":"CONTRIBUTOR","body":"I agree with you about the complexity of the switch, especially as Hive 4.0 is not released.\r\n\r\nParsing a string could be a way to enable the the users to archive something, but I would definitely try to avoid it as a long term solution.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856465823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856520248","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-856520248","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":856520248,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjUyMDI0OA==","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T07:16:20Z","updated_at":"2021-06-08T07:16:20Z","author_association":"CONTRIBUTOR","body":"There are a bunch of docs that still mention an older version of Flink. Should we update those as well as part of this PR?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856520248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856583907","html_url":"https://github.com/apache/iceberg/issues/2558#issuecomment-856583907","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2558","id":856583907,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjU4MzkwNw==","user":{"login":"gaborgsomogyi","id":18561820,"node_id":"MDQ6VXNlcjE4NTYxODIw","avatar_url":"https://avatars.githubusercontent.com/u/18561820?v=4","gravatar_id":"","url":"https://api.github.com/users/gaborgsomogyi","html_url":"https://github.com/gaborgsomogyi","followers_url":"https://api.github.com/users/gaborgsomogyi/followers","following_url":"https://api.github.com/users/gaborgsomogyi/following{/other_user}","gists_url":"https://api.github.com/users/gaborgsomogyi/gists{/gist_id}","starred_url":"https://api.github.com/users/gaborgsomogyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaborgsomogyi/subscriptions","organizations_url":"https://api.github.com/users/gaborgsomogyi/orgs","repos_url":"https://api.github.com/users/gaborgsomogyi/repos","events_url":"https://api.github.com/users/gaborgsomogyi/events{/privacy}","received_events_url":"https://api.github.com/users/gaborgsomogyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T08:47:30Z","updated_at":"2021-06-08T08:47:30Z","author_association":"NONE","body":"+1 on skipping 1.12. @zhangjun0x01 where have you upgraded to 1.13 since I still see 1.12.1 in [versions.props](https://github.com/apache/iceberg/blob/282b6f9f1cae8d4fd5ff7c73de513ca91f01fddc/versions.props#L4) on master?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856583907/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856587530","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-856587530","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":856587530,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjU4NzUzMA==","user":{"login":"zhangjun0x01","id":25563794,"node_id":"MDQ6VXNlcjI1NTYzNzk0","avatar_url":"https://avatars.githubusercontent.com/u/25563794?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangjun0x01","html_url":"https://github.com/zhangjun0x01","followers_url":"https://api.github.com/users/zhangjun0x01/followers","following_url":"https://api.github.com/users/zhangjun0x01/following{/other_user}","gists_url":"https://api.github.com/users/zhangjun0x01/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangjun0x01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangjun0x01/subscriptions","organizations_url":"https://api.github.com/users/zhangjun0x01/orgs","repos_url":"https://api.github.com/users/zhangjun0x01/repos","events_url":"https://api.github.com/users/zhangjun0x01/events{/privacy}","received_events_url":"https://api.github.com/users/zhangjun0x01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T08:52:54Z","updated_at":"2021-06-08T08:52:54Z","author_association":"CONTRIBUTOR","body":"> There are a bunch of docs that still mention an older version of Flink. Should we update those as well as part of this PR?\r\n\r\nAt present, the community has not reached an agreement whether to upgrade to flink 1.13, if you need to upgrade to flink 1.13. You can apply the PR to your branch first","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856587530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856588534","html_url":"https://github.com/apache/iceberg/issues/2682#issuecomment-856588534","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2682","id":856588534,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjU4ODUzNA==","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T08:54:21Z","updated_at":"2021-06-08T08:54:21Z","author_association":"CONTRIBUTOR","body":"Hi @aimenglin I believe you would use `spark.read.format(\"iceberg\").load(\"/path/to/table#history\").show(truncate=false)`","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856588534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856691813","html_url":"https://github.com/apache/iceberg/issues/2679#issuecomment-856691813","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2679","id":856691813,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjY5MTgxMw==","user":{"login":"moon-fall","id":7753372,"node_id":"MDQ6VXNlcjc3NTMzNzI=","avatar_url":"https://avatars.githubusercontent.com/u/7753372?v=4","gravatar_id":"","url":"https://api.github.com/users/moon-fall","html_url":"https://github.com/moon-fall","followers_url":"https://api.github.com/users/moon-fall/followers","following_url":"https://api.github.com/users/moon-fall/following{/other_user}","gists_url":"https://api.github.com/users/moon-fall/gists{/gist_id}","starred_url":"https://api.github.com/users/moon-fall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moon-fall/subscriptions","organizations_url":"https://api.github.com/users/moon-fall/orgs","repos_url":"https://api.github.com/users/moon-fall/repos","events_url":"https://api.github.com/users/moon-fall/events{/privacy}","received_events_url":"https://api.github.com/users/moon-fall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T11:42:44Z","updated_at":"2021-06-08T11:42:44Z","author_association":"CONTRIBUTOR","body":"> I think this is because the Iceberg identifier field column can be nullable, but Flink does not allow nullable primary key column. Is it the case for you? What is the type of `id` column in your Iceberg schema?\r\n\r\nyes, the type of `id` column is string","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856691813/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856820267","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-856820267","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":856820267,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjgyMDI2Nw==","user":{"login":"gaborgsomogyi","id":18561820,"node_id":"MDQ6VXNlcjE4NTYxODIw","avatar_url":"https://avatars.githubusercontent.com/u/18561820?v=4","gravatar_id":"","url":"https://api.github.com/users/gaborgsomogyi","html_url":"https://github.com/gaborgsomogyi","followers_url":"https://api.github.com/users/gaborgsomogyi/followers","following_url":"https://api.github.com/users/gaborgsomogyi/following{/other_user}","gists_url":"https://api.github.com/users/gaborgsomogyi/gists{/gist_id}","starred_url":"https://api.github.com/users/gaborgsomogyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaborgsomogyi/subscriptions","organizations_url":"https://api.github.com/users/gaborgsomogyi/orgs","repos_url":"https://api.github.com/users/gaborgsomogyi/repos","events_url":"https://api.github.com/users/gaborgsomogyi/events{/privacy}","received_events_url":"https://api.github.com/users/gaborgsomogyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T14:31:42Z","updated_at":"2021-06-08T14:31:42Z","author_association":"NONE","body":"FYI https://flink.apache.org/news/2021/05/28/release-1.13.1.html","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856820267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856912624","html_url":"https://github.com/apache/iceberg/issues/2682#issuecomment-856912624","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2682","id":856912624,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjkxMjYyNA==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T16:22:58Z","updated_at":"2021-06-08T16:22:58Z","author_association":"NONE","body":"@rymurr Thanks so much! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856912624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856930899","html_url":"https://github.com/apache/iceberg/issues/2679#issuecomment-856930899","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2679","id":856930899,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjkzMDg5OQ==","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T16:50:11Z","updated_at":"2021-06-08T16:50:11Z","author_association":"CONTRIBUTOR","body":"Sorry when I say type I was trying to ask if you have set your `id` column to be optional or not in Iceberg schema. If your `id` column is optional, I think this is expected behavior.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/856930899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857183739","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-857183739","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":857183739,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzE4MzczOQ==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-08T21:42:48Z","updated_at":"2021-06-08T21:42:48Z","author_association":"NONE","body":"What if we write the table as iceberg format via Hive?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857183739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857335754","html_url":"https://github.com/apache/iceberg/pull/2415#issuecomment-857335754","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2415","id":857335754,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzMzNTc1NA==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T03:05:42Z","updated_at":"2021-06-09T03:05:42Z","author_association":"CONTRIBUTOR","body":"Thanks a lot, @karuppayya! This is going to be a valuable contribution. Looking forward to PRs that will use this logic next.\r\n\r\nThanks everyone for reviewing!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857335754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857384089","html_url":"https://github.com/apache/iceberg/issues/2686#issuecomment-857384089","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2686","id":857384089,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzM4NDA4OQ==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T05:22:17Z","updated_at":"2021-06-09T05:22:17Z","author_association":"NONE","body":"<friendly ping> Appreciate your help!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857384089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857517881","html_url":"https://github.com/apache/iceberg/issues/2558#issuecomment-857517881","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2558","id":857517881,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzUxNzg4MQ==","user":{"login":"gaborgsomogyi","id":18561820,"node_id":"MDQ6VXNlcjE4NTYxODIw","avatar_url":"https://avatars.githubusercontent.com/u/18561820?v=4","gravatar_id":"","url":"https://api.github.com/users/gaborgsomogyi","html_url":"https://github.com/gaborgsomogyi","followers_url":"https://api.github.com/users/gaborgsomogyi/followers","following_url":"https://api.github.com/users/gaborgsomogyi/following{/other_user}","gists_url":"https://api.github.com/users/gaborgsomogyi/gists{/gist_id}","starred_url":"https://api.github.com/users/gaborgsomogyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaborgsomogyi/subscriptions","organizations_url":"https://api.github.com/users/gaborgsomogyi/orgs","repos_url":"https://api.github.com/users/gaborgsomogyi/repos","events_url":"https://api.github.com/users/gaborgsomogyi/events{/privacy}","received_events_url":"https://api.github.com/users/gaborgsomogyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T08:58:06Z","updated_at":"2021-06-09T08:58:06Z","author_association":"NONE","body":"Ah I see it now, testing it...","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857517881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857518443","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-857518443","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":857518443,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzUxODQ0Mw==","user":{"login":"gaborgsomogyi","id":18561820,"node_id":"MDQ6VXNlcjE4NTYxODIw","avatar_url":"https://avatars.githubusercontent.com/u/18561820?v=4","gravatar_id":"","url":"https://api.github.com/users/gaborgsomogyi","html_url":"https://github.com/gaborgsomogyi","followers_url":"https://api.github.com/users/gaborgsomogyi/followers","following_url":"https://api.github.com/users/gaborgsomogyi/following{/other_user}","gists_url":"https://api.github.com/users/gaborgsomogyi/gists{/gist_id}","starred_url":"https://api.github.com/users/gaborgsomogyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gaborgsomogyi/subscriptions","organizations_url":"https://api.github.com/users/gaborgsomogyi/orgs","repos_url":"https://api.github.com/users/gaborgsomogyi/repos","events_url":"https://api.github.com/users/gaborgsomogyi/events{/privacy}","received_events_url":"https://api.github.com/users/gaborgsomogyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T08:58:53Z","updated_at":"2021-06-09T08:58:53Z","author_association":"NONE","body":"I've tested the changes and works fine with 1.13.0.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857518443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857548271","html_url":"https://github.com/apache/iceberg/pull/2658#issuecomment-857548271","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2658","id":857548271,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzU0ODI3MQ==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T09:40:40Z","updated_at":"2021-06-09T09:40:40Z","author_association":"CONTRIBUTOR","body":"@anuragmantri: Tried to go through the PR, but this one is huge  \r\n\r\nSome general takeaways:\r\n- Can we keep the original signatures for the extended methods as well? They still can call the new ones, but if we kept the original ones then we do not have to change the callers to add `null, null` which could reduce the number of changes greatly\r\n- Can we decrease the number of parameters we push down the new methods? I would prefer to send a boolean `useRelativePath` instead of the whole property list, or even only send just the baseLocation if we have to use it.\r\n- Would it be possible to hide the whole stuff inside a LocationProvider? It could be a base implementation for all of the LocationProviders, and would be a natural place in my opinion. We can avoid changing the public APIs if we provide a default implementation.\r\n- If there is any way to split this PR to smaller, more reviewer friendly ones that would be a big help for us, reviewers.\r\n\r\nThanks,\r\nPeter","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857548271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857650453","html_url":"https://github.com/apache/iceberg/pull/2689#issuecomment-857650453","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2689","id":857650453,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzY1MDQ1Mw==","user":{"login":"TGooch44","id":1591711,"node_id":"MDQ6VXNlcjE1OTE3MTE=","avatar_url":"https://avatars.githubusercontent.com/u/1591711?v=4","gravatar_id":"","url":"https://api.github.com/users/TGooch44","html_url":"https://github.com/TGooch44","followers_url":"https://api.github.com/users/TGooch44/followers","following_url":"https://api.github.com/users/TGooch44/following{/other_user}","gists_url":"https://api.github.com/users/TGooch44/gists{/gist_id}","starred_url":"https://api.github.com/users/TGooch44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TGooch44/subscriptions","organizations_url":"https://api.github.com/users/TGooch44/orgs","repos_url":"https://api.github.com/users/TGooch44/repos","events_url":"https://api.github.com/users/TGooch44/events{/privacy}","received_events_url":"https://api.github.com/users/TGooch44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T12:25:51Z","updated_at":"2021-06-09T12:25:51Z","author_association":"CONTRIBUTOR","body":"Hi Jun, I think I have a very similar PR queued up on this.  Let me review what you have here, and see what else needs to be added(I can rebase me PR).  There is a lot of work in the partition spec that needs to be rolled out and I've been lagging on getting the PR's to the Open source","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857650453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857663033","html_url":"https://github.com/apache/iceberg/issues/2679#issuecomment-857663033","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2679","id":857663033,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzY2MzAzMw==","user":{"login":"moon-fall","id":7753372,"node_id":"MDQ6VXNlcjc3NTMzNzI=","avatar_url":"https://avatars.githubusercontent.com/u/7753372?v=4","gravatar_id":"","url":"https://api.github.com/users/moon-fall","html_url":"https://github.com/moon-fall","followers_url":"https://api.github.com/users/moon-fall/followers","following_url":"https://api.github.com/users/moon-fall/following{/other_user}","gists_url":"https://api.github.com/users/moon-fall/gists{/gist_id}","starred_url":"https://api.github.com/users/moon-fall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moon-fall/subscriptions","organizations_url":"https://api.github.com/users/moon-fall/orgs","repos_url":"https://api.github.com/users/moon-fall/repos","events_url":"https://api.github.com/users/moon-fall/events{/privacy}","received_events_url":"https://api.github.com/users/moon-fall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T12:45:03Z","updated_at":"2021-06-09T12:45:03Z","author_association":"CONTRIBUTOR","body":"> Sorry when I say type I was trying to ask if you have set your `id` column to be optional or not in Iceberg schema. If your `id` column is optional, I think this is expected behavior.\r\n\r\nI do set the `id` column  to be optionaland I set it to required  then it runs no error any morethanks for your  response.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857663033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857880245","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-857880245","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":857880245,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Nzg4MDI0NQ==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T17:14:14Z","updated_at":"2021-06-09T17:14:14Z","author_association":"CONTRIBUTOR","body":"Updated description to reflect latest changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857880245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857971623","html_url":"https://github.com/apache/iceberg/pull/2282#issuecomment-857971623","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2282","id":857971623,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Nzk3MTYyMw==","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T18:44:23Z","updated_at":"2021-06-09T18:44:23Z","author_association":"MEMBER","body":"> Hi, I am working on write support together with @daniil-dubin\r\n> @bkahloon @RussellSpitzer in current implementation we have `spark-handle-timestamp-without-timezone` flag, which can be used as read or write(after implementation) option, like\r\n> \r\n> ```scala\r\n> spark\r\n> .read\r\n> .format(\"iceberg\")\r\n> .option(\"spark-handle-timestamp-without-timezone\", \"true\")\r\n> .load(\"some.table.name\")\r\n> ```\r\n> \r\n> but we do not have ability to set this flag when using spark sql\r\n> \r\n> ```scala\r\n> spark.sql(\"select * from some.table.name\") //<- will fail in current implementation\r\n> ```\r\n> \r\n> Our proposal is move this flag to spark session property, @bkahloon @RussellSpitzer what do you think about it?\r\n\r\nSounds good to me, I have no problem with this being a session parameter. Let me know when the changes are up","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/857971623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858006838","html_url":"https://github.com/apache/iceberg/issues/2687#issuecomment-858006838","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2687","id":858006838,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODAwNjgzOA==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T19:02:02Z","updated_at":"2021-06-09T19:02:02Z","author_association":"COLLABORATOR","body":"Hi @aimenglin. Thanks for reaching out! Unfortunately we don't have support for Time Travel queries on the Hive side. Time Travel support would require the extension of the Hive query language which is not possible with the Hive versions (Hive 2.3 and Hive 3.1) that Iceberg depends on. Please refer to our more up-to-date documentation for the full feature set supported by Hive: https://github.com/apache/iceberg/blob/master/site/docs/hive.md","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858006838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858008951","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858008951","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858008951,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODAwODk1MQ==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T19:04:02Z","updated_at":"2021-06-09T19:04:02Z","author_association":"COLLABORATOR","body":"Hi @aimenglin , you should be able to write to overlay tables as well from Hive. Please refer to our documentation: https://github.com/apache/iceberg/blob/master/site/docs/hive.md. Hope this helps resolve your issue. In case not, please send the exact steps you tried and the error message you encountered, so we may be able to help further.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858008951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858014749","html_url":"https://github.com/apache/iceberg/issues/2686#issuecomment-858014749","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2686","id":858014749,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODAxNDc0OQ==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T19:07:37Z","updated_at":"2021-06-09T19:07:37Z","author_association":"COLLABORATOR","body":"This looks like the table is missing the right storage handler and serde. My assumption would be that the \"iceberg.hive.engine.enabled=true\" property was missing from the config when the table was created - please check this section: https://github.com/apache/iceberg/blob/master/site/docs/hive.md#enabling-support. Can you send the `describe formatted testhive` output for this table to double check? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858014749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858022876","html_url":"https://github.com/apache/iceberg/pull/2595#issuecomment-858022876","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2595","id":858022876,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODAyMjg3Ng==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T19:15:42Z","updated_at":"2021-06-09T19:15:42Z","author_association":"CONTRIBUTOR","body":"> @kbendick got this error\r\n> \r\n> ```\r\n> Execution failed for task ':iceberg-spark2:jmh'.\r\n> > A failure occurred while executing me.champeau.gradle.IsolatedRunner\r\n>    > Error during execution of benchmarks\r\n> ```\r\n> \r\n> When i ran\r\n> `g jmh`\r\n> \r\n> on the pr\r\n\r\nSo just like the current set up (as far as I'm aware), you have to specify the actual test to be run. So something like the following, as mentioned in the existing code [here](https://github.com/apache/iceberg/pull/2595/files#diff-ed844daf9dae5835b7ed247c21439af720df778c28596c644a9da8d7013f4fb9L56-L58)\r\n```\r\n./gradlew :iceberg-spark2:jmh \\ \r\n   -PjmhIncludeRegex=SparkParquetWritersNestedDataBenchmark \\\r\n   -PjmhOutputPath=benchmark/spark-parquet-writers-nested-data-benchmark-result.txt\r\n```\r\n\r\nI will test simply `./gradlew jmh` on the current state of master vs my PR, but with my PR, the tests run the same way as mentioned in the doc comments of each test. @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858022876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858081373","html_url":"https://github.com/apache/iceberg/issues/2686#issuecomment-858081373","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2686","id":858081373,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA4MTM3Mw==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:33:16Z","updated_at":"2021-06-09T20:33:16Z","author_association":"NONE","body":"@marton-bod Thanks for the response! Below are the queries and results:\r\n```\r\n$ hive\r\nHive Session ID = 01b4eccd-aae9-4cef-ae72-c1949f69a785\r\nLogging initialized using configuration in file:/etc/hive/conf.dist/hive-log4j2.properties Async: true\r\nHive Session ID = b0f1c211-25a6-4ebd-85db-28c73431263f\r\nhive> add jar /home/shenme_google_com/iceberg-hive-runtime.jar;\r\nAdded [/home/shenme_google_com/iceberg-hive-runtime.jar] to class path\r\nAdded resources: [/home/shenme_google_com/iceberg-hive-runtime.jar]\r\nhive> set iceberg.engine.hive.enabled=true;\r\nhive> set engine.hive.enabled=true;\r\nhive> set iceberg.mr.catalog=hive;\r\nhive> describe formatted testhive;\r\nOK\r\n# col_name              data_type               comment             \r\nid                      int                                         \r\n                 \r\n# Detailed Table Information             \r\nDatabase:               default                  \r\nOwnerType:              USER                     \r\nOwner:                  shenme_google_com        \r\nCreateTime:             Sun Jun 06 23:13:31 UTC 2021     \r\nLastAccessTime:         Fri Dec 26 11:39:34 UTC 1969     \r\nRetention:              2147483647               \r\nLocation:               gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/testhive     \r\nTable Type:             EXTERNAL_TABLE           \r\nTable Parameters:                \r\n        EXTERNAL                TRUE                \r\n        metadata_location       gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/testhive/\r\nmetadata/00001-88fe51b7-ff5b-45ab-80e6-57ef3defef20.metadata.json\r\n        numFiles                1                   \r\n        previous_metadata_location      gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/t\r\nesthive/metadata/00000-145b061d-8bc7-4ea0-b997-05bd1c21fa92.metadata.json\r\n        table_type              ICEBERG             \r\n        totalSize               956                 \r\n        transient_lastDdlTime   1623021211          \r\n                 \r\n# Storage Information            \r\nSerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe       \r\nInputFormat:            org.apache.hadoop.mapred.FileInputFormat         \r\nOutputFormat:           org.apache.hadoop.mapred.FileOutputFormat        \r\nCompressed:             No                       \r\nNum Buckets:            0                        \r\nBucket Columns:         []                       \r\nSort Columns:           []                       \r\nTime taken: 1.068 seconds, Fetched: 29 row(s)\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858081373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858082399","html_url":"https://github.com/apache/iceberg/pull/2595#issuecomment-858082399","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2595","id":858082399,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA4MjM5OQ==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:35:05Z","updated_at":"2021-06-09T20:35:05Z","author_association":"CONTRIBUTOR","body":"> > @kbendick got this error\r\n> > ```\r\n> > Execution failed for task ':iceberg-spark2:jmh'.\r\n> > > A failure occurred while executing me.champeau.gradle.IsolatedRunner\r\n> >    > Error during execution of benchmarks\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > When i ran\r\n> > `g jmh`\r\n> > on the pr\r\n> \r\n> So just like the current set up (as far as I'm aware), you have to specify the actual test to be run. So something like the following, as mentioned in the existing code [here](https://github.com/apache/iceberg/pull/2595/files#diff-ed844daf9dae5835b7ed247c21439af720df778c28596c644a9da8d7013f4fb9L56-L58)\r\n> \r\n> ```\r\n> ./gradlew :iceberg-spark2:jmh \\ \r\n>    -PjmhIncludeRegex=SparkParquetWritersNestedDataBenchmark \\\r\n>    -PjmhOutputPath=benchmark/spark-parquet-writers-nested-data-benchmark-result.txt\r\n> ```\r\n> \r\n> I will test simply `./gradlew jmh` on the current state of master vs my PR, but with my PR, the tests run the same way as mentioned in the doc comments of each test. @RussellSpitzer\r\n\r\nI tried running `./gradlew jmh` both from master and from my branch. Both of them failed eventually, but after running for 20-25 minutes and completing at least 3-4 of the benchmarks each time. @RussellSpitzer has now been able to get plain `./gradle jmh` to run for over an hour now on this PR branch.\r\n\r\nWhen I run an individual test, as recommended in the comments of each test (or above), it runs just fine to completion.\r\n\r\nI think it's more an issue with gradle JVM settings and then running out of memory or other resources, possibly with the number of forked threads when running all of the benchmarks for all of the requested iterations.\r\n\r\n**TLDR:** I don't think we should run `jmh` itself to run _all_ tests without better configuring gradle. But stick to running the tests as they're mentioned in the test comments. This does not introduce any new issues with the JMH tests, other than possibly the added number of tests if one runs `./gradlew jmh` by itself (which is not guaranteed to run to completion anyway with the current state in master).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858082399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858082551","html_url":"https://github.com/apache/iceberg/issues/2687#issuecomment-858082551","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2687","id":858082551,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA4MjU1MQ==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:35:20Z","updated_at":"2021-06-09T20:35:20Z","author_association":"NONE","body":"@marton-bod Thank you for the guide. I'll look into it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858082551/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858084189","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858084189","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858084189,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA4NDE4OQ==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:38:25Z","updated_at":"2021-06-09T20:38:25Z","author_association":"NONE","body":"@marton-bod \r\nThe result I got is that I found the data was stored in the bucket, but no metadata generated. Also, if I read the table via Spark and Hive, the data was not updated and shown. Maybe I missed something when I created the external table, so I'll look at the resource you given. Thanks so much!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858084189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858180173","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858180173","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858180173,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODE4MDE3Mw==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T00:04:36Z","updated_at":"2021-06-10T00:04:36Z","author_association":"NONE","body":"1. Created a Iceberg Table using Hadoop Table on Spark:\r\n// Create a Iceberg Table\r\n```\r\nspark-shell --conf spark.sql.warehouse.dir=gs://shenme_dataproc_1/spark-warehouse --jars /usr/lib/iceberg/jars/iceberg-spark-runtime.jar\r\n\r\nimport org.apache.hadoop.conf.Configuration\r\nimport org.apache.iceberg.hadoop.HadoopTables\r\nimport org.apache.iceberg.Table\r\n\r\nimport org.apache.iceberg.Schema\r\nimport org.apache.iceberg.types.Types._\r\nimport org.apache.iceberg.PartitionSpec\r\nimport org.apache.iceberg.spark.SparkSchemaUtil\r\nimport org.apache.spark.sql._\r\n```\r\n// Insert a 4 rows\r\n```\r\nscala> val conf = new Configuration();\r\nconf: org.apache.hadoop.conf.Configuration = Configuration: core-default.xml, core-site.xml, mapred-default.xml, mapred-site.xml, yarn-default.xml, yarn-site.xm\r\nl, hdfs-default.xml, hdfs-site.xml, resource-types.xml\r\nscala> val tables = new HadoopTables(conf);\r\ntables: org.apache.iceberg.hadoop.HadoopTables = org.apache.iceberg.hadoop.HadoopTables@6fac8b24\r\n\r\nscala> val df1 = Seq((1,\"Vincent\",\"Computer Science\"),(2,\"Dan\", \"Economics\"),(3,\"Bob\", \"Politics\"),(4,\"Cindy\", \"UX Design\")).toDF(\"id\",\"name\",\"major\");\r\ndf1: org.apache.spark.sql.DataFrame = [id: int, name: string ... 1 more field]\r\n\r\nscala> val df1_schema = SparkSchemaUtil.convert(df1.schema);\r\ndf1_schema: org.apache.iceberg.Schema =\r\ntable {\r\n  0: id: required int\r\n  1: name: optional string\r\n  2: major: optional string\r\n}\r\n\r\nscala> val partition_spec = PartitionSpec.builderFor(df1_schema).identity(\"major\").build;\r\npartition_spec: org.apache.iceberg.PartitionSpec =\r\n[\r\n  1000: major: identity(2)\r\n]\r\n\r\nscala> val table_location = \"gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\";\r\ntable_location: String = gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n\r\nscala> val hadooptable = tables.create(df1_schema, partition_spec, table_location);\r\nhadooptable: org.apache.iceberg.Table = gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n\r\nscala> df1.write.format(\"iceberg\").mode(\"overwrite\").save(table_location);\r\n```\r\n// Query 4 rows on Spark\r\n```\r\nscala> val read_df1=spark.read.format(\"iceberg\").load(table_location);\r\nread_df1: org.apache.spark.sql.DataFrame = [id: int, name: string ... 1 more field]\r\nscala> read_df1.show;\r\n+---+-------+----------------+                                                  \r\n| id|   name|           major|\r\n+---+-------+----------------+\r\n|  1|Vincent|Computer Science|\r\n|  2|    Dan|       Economics|\r\n|  3|    Bob|        Politics|\r\n|  4|  Cindy|       UX Design|\r\n+---+-------+----------------+\r\n```\r\n// Add another column\r\n```\r\nscala> val table = tables.load(table_location);\r\ntable: org.apache.iceberg.Table = gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n\r\nscala> table.updateSchema.addColumn(\"grade\", StringType.get()).commit();\r\n\r\nscala> table.schema.toString;\r\nres8: String =\r\ntable {\r\n  1: id: required int\r\n  2: name: optional string\r\n  3: major: optional string\r\n  4: grade: optional string\r\n}\r\n```\r\n// Add another 2 rows\r\n```\r\nscala> val df2=Seq((5,\"Amy\",\"UX Design\",\"Sophomore\")).toDF(\"id\",\"name\",\"major\",\"grade\");\r\ndf2: org.apache.spark.sql.DataFrame = [id: int, name: string ... 2 more fields]\r\n\r\nscala> df2.write.format(\"iceberg\").mode(\"append\").save(table_location);\r\n\r\nscala> val df3=Seq((6,\"Rachael\",\"Economics\",\"Freshman\")).toDF(\"id\",\"name\",\"major\",\"grade\");\r\ndf3: org.apache.spark.sql.DataFrame = [id: int, name: string ... 2 more fields]\r\n\r\nscala> df3.write.format(\"iceberg\").mode(\"append\").save(table_location);\r\n\r\nscala> val read_df2=spark.read.format(\"iceberg\").load(table_location);\r\nread_df2: org.apache.spark.sql.DataFrame = [id: int, name: string ... 2 more fields]\r\n\r\nscala> spark.read.format(\"iceberg\").load(table_location).show(truncate = false)\r\n+---+-------+----------------+---------+                                        \r\n|id |name   |major           |grade    |\r\n+---+-------+----------------+---------+\r\n|6  |Rachael|Economics       |Freshman |\r\n|1  |Vincent|Computer Science|null     |\r\n|2  |Dan    |Economics       |null     |\r\n|3  |Bob    |Politics        |null     |\r\n|4  |Cindy  |UX Design       |null     |\r\n|5  |Amy    |UX Design       |Sophomore|\r\n+---+-------+----------------+---------+\r\n```\r\n// We have the data and the right set of metadata generated including snapshots, manifests in the bucket.\r\n\r\n2.Created an external table on Hive\r\n```\r\nhive\r\nHive Session ID = 521d08fa-9fda-4ca3-8bab-3d0b60ddc6de\r\nLogging initialized using configuration in file:/etc/hive/conf.dist/hive-log4j2.properties Async: true\r\nHive Session ID = 4f8d6c05-19a2-4e1e-8672-52b79d1fd566\r\nhive> add jar /home/shenme_google_com/iceberg-hive-runtime.jar;\r\nAdded [/home/shenme_google_com/iceberg-hive-runtime.jar] to class path\r\nAdded resources: [/home/shenme_google_com/iceberg-hive-runtime.jar]\r\nhive> set iceberg.engine.hive.enabled=true;\r\nhive> set hive.vectorized.execution.enabled=false;\r\nhive> CREATE EXTERNAL TABLE hadoop_table_1\r\n    > STORED BY 'org.apache.iceberg.mr.hive.HiveIcebergStorageHandler' \r\n    > LOCATION 'gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/'\r\n    > TBLPROPERTIES ('iceberg.catalog'='gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1');\r\nOK\r\nTime taken: 3.698 seconds\r\n```\r\n\r\n3. Read is fine, and then I insert a new row:\r\n```\r\n// Read via Hive\r\nhive> describe formatted hadoop_table_1; \r\nOK\r\n# col_name              data_type               comment             \r\nid                      int                     from deserializer   \r\nname                    string                  from deserializer   \r\nmajor                   string                  from deserializer   \r\ngrade                   string                  from deserializer   \r\n                 \r\n# Detailed Table Information             \r\nDatabase:               default                  \r\nOwnerType:              USER                     \r\nOwner:                  shenme_google_com        \r\nCreateTime:             Wed Jun 09 23:21:26 UTC 2021     \r\nLastAccessTime:         UNKNOWN                  \r\nRetention:              0                        \r\nLocation:               gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1        \r\nTable Type:             EXTERNAL_TABLE           \r\nTable Parameters:                \r\n        EXTERNAL                TRUE                \r\n        bucketing_version       2                   \r\n        iceberg.catalog         gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n        numFiles                18                  \r\n        storage_handler         org.apache.iceberg.mr.hive.HiveIcebergStorageHandler\r\n        table_type              ICEBERG             \r\n        totalSize               48550               \r\n        transient_lastDdlTime   1623280886          \r\n                 \r\n# Storage Information            \r\nSerDe Library:          org.apache.iceberg.mr.hive.HiveIcebergSerDe      \r\nInputFormat:            org.apache.iceberg.mr.hive.HiveIcebergInputFormat        \r\nOutputFormat:           org.apache.iceberg.mr.hive.HiveIcebergOutputFormat       \r\nCompressed:             No                       \r\nNum Buckets:            -1                       \r\nBucket Columns:         []                       \r\nSort Columns:           []                       \r\nStorage Desc Params:             \r\n        serialization.format    1                   \r\nTime taken: 0.609 seconds, Fetched: 35 row(s)\r\n\r\nhive> select * from hadoop_table_1; \r\nQuery ID = shenme_google_com_20210609232347_cc7ce64b-6b80-4169-b1d5-caf42a300e96\r\nTotal jobs = 1\r\nLaunching Job 1 out of 1\r\nStatus: Running (Executing on YARN cluster with App id application_1622522135523_0073)\r\n\r\n----------------------------------------------------------------------------------------------\r\n        VERTICES      MODE        STATUS  TOTAL  COMPLETED  RUNNING  PENDING  FAILED  KILLED  \r\n----------------------------------------------------------------------------------------------\r\nMap 1 .......... container     SUCCEEDED      1          1        0        0       0       0  \r\n----------------------------------------------------------------------------------------------\r\nVERTICES: 01/01  [==========================>>] 100%  ELAPSED TIME: 8.67 s     \r\n----------------------------------------------------------------------------------------------\r\nOK\r\n6       Rachael Economics       Freshman\r\n1       Vincent Computer Science        NULL\r\n2       Dan     Economics       NULL\r\n3       Bob     Politics        NULL\r\n4       Cindy   UX Design       NULL\r\n5       Amy     UX Design       Sophomore\r\nTime taken: 13.469 seconds, Fetched: 6 row(s)\r\n```\r\n// Insert a row\r\n```\r\nhive> INSERT INTO TABLE hadoop_table_1\r\n    >   VALUES (7, \"John\", \"Basketball\", \"Senior\");\r\nQuery ID = shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1\r\nTotal jobs = 1\r\nLaunching Job 1 out of 1\r\nStatus: Running (Executing on YARN cluster with App id application_1622522135523_0073)\r\n\r\n----------------------------------------------------------------------------------------------\r\n        VERTICES      MODE        STATUS  TOTAL  COMPLETED  RUNNING  PENDING  FAILED  KILLED  \r\n----------------------------------------------------------------------------------------------\r\nMap 1 .......... container     SUCCEEDED      1          1        0        0       0       0  \r\n----------------------------------------------------------------------------------------------\r\nVERTICES: 01/01  [==========================>>] 100%  ELAPSED TIME: 6.71 s     \r\n----------------------------------------------------------------------------------------------\r\nOK\r\nTime taken: 10.374 seconds\r\n```\r\n// Read and check whether the data was written into the table\r\n```\r\nhive> select * from hadoop_table_1;\r\nQuery ID = shenme_google_com_20210609232620_021c6e8a-cf7a-43d8-9ee9-44913a900e67\r\nTotal jobs = 1\r\nLaunching Job 1 out of 1\r\nStatus: Running (Executing on YARN cluster with App id application_1622522135523_0073)\r\n\r\n----------------------------------------------------------------------------------------------\r\n        VERTICES      MODE        STATUS  TOTAL  COMPLETED  RUNNING  PENDING  FAILED  KILLED  \r\n----------------------------------------------------------------------------------------------\r\nMap 1 .......... container     SUCCEEDED      1          1        0        0       0       0  \r\n----------------------------------------------------------------------------------------------\r\nVERTICES: 01/01  [==========================>>] 100%  ELAPSED TIME: 7.24 s     \r\n----------------------------------------------------------------------------------------------\r\nOK\r\n6       Rachael Economics       Freshman\r\n1       Vincent Computer Science        NULL\r\n2       Dan     Economics       NULL\r\n3       Bob     Politics        NULL\r\n4       Cindy   UX Design       NULL\r\n5       Amy     UX Design       Sophomore\r\nTime taken: 9.196 seconds, Fetched: 6 row(s)\r\n```\r\n4. GS bucket screenshot, we got data generated, but no metadata. So after select, the newly inserted row was not in the result.\r\n![image](https://user-images.githubusercontent.com/84943281/121444407-5242ca00-c944-11eb-8d53-5d6d95b3c68b.png)\r\n![image](https://user-images.githubusercontent.com/84943281/121443762-f9266680-c942-11eb-875d-a9b0d8bd6aa1.png)\r\n\r\nQuestion:\r\nI'm curious whether it's possible to read the newly inserted data via Hive. Thanks in advance!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858180173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858303362","html_url":"https://github.com/apache/iceberg/pull/2595#issuecomment-858303362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2595","id":858303362,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODMwMzM2Mg==","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T05:06:02Z","updated_at":"2021-06-10T05:06:02Z","author_association":"CONTRIBUTOR","body":"> > > @kbendick got this error\r\n> > > ```\r\n> > > Execution failed for task ':iceberg-spark2:jmh'.\r\n> > > > A failure occurred while executing me.champeau.gradle.IsolatedRunner\r\n> > >    > Error during execution of benchmarks\r\n> > > ```\r\n> > > \r\n> > > \r\n> > >     \r\n> > >       \r\n> > >     \r\n> > > \r\n> > >       \r\n> > >     \r\n> > > \r\n> > >     \r\n> > >   \r\n> > > When i ran\r\n> > > `g jmh`\r\n> > > on the pr\r\n> > \r\n> > \r\n> > So just like the current set up (as far as I'm aware), you have to specify the actual test to be run. So something like the following, as mentioned in the existing code [here](https://github.com/apache/iceberg/pull/2595/files#diff-ed844daf9dae5835b7ed247c21439af720df778c28596c644a9da8d7013f4fb9L56-L58)\r\n> > ```\r\n> > ./gradlew :iceberg-spark2:jmh \\ \r\n> >    -PjmhIncludeRegex=SparkParquetWritersNestedDataBenchmark \\\r\n> >    -PjmhOutputPath=benchmark/spark-parquet-writers-nested-data-benchmark-result.txt\r\n> > ```\r\n> > \r\n> > \r\n> >     \r\n> >       \r\n> >     \r\n> > \r\n> >       \r\n> >     \r\n> > \r\n> >     \r\n> >   \r\n> > I will test simply `./gradlew jmh` on the current state of master vs my PR, but with my PR, the tests run the same way as mentioned in the doc comments of each test. @RussellSpitzer\r\n> \r\n> I tried running `./gradlew jmh` both from master and from my branch. Both of them failed eventually, but after running for 20-25 minutes and completing at least 3-4 of the benchmarks each time. @RussellSpitzer has now been able to get plain `./gradle jmh` to run for over an hour now on this PR branch.\r\n> \r\n> When I run an individual test, as recommended in the comments of each test (or above), it runs just fine to completion.\r\n> \r\n> I think it's more an issue with gradle JVM settings and then running out of memory or other resources, possibly with the number of forked threads when running all of the benchmarks for all of the requested iterations.\r\n> \r\n> **TLDR:** I don't think we should run `jmh` itself to run _all_ tests without better configuring gradle. But stick to running the tests as they're mentioned in the test comments. This does not introduce any new issues with the JMH tests, other than possibly the added number of tests if one runs `./gradlew jmh` by itself (which is not guaranteed to run to completion anyway with the current state in master).\r\n\r\nFurther follow up - @RussellSpitzer and I were both able to get the tests to run to completion, but users should not run `~/.gradlew jmh` without modifying their gradle parameters quite significantly. It's best to run tests one at a time, as mentioned in the tests themselves.\r\n\r\nThis patch _**does not change the behavior of the jmh test suite**_ with respect to ability to run to completion from its previous state. It's still possible either way, just rather hard given the number of tests and the limitations of Gradle's JVM (even with the common expanded memory parameters).\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858303362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858384924","html_url":"https://github.com/apache/iceberg/pull/2689#issuecomment-858384924","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2689","id":858384924,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODM4NDkyNA==","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T07:29:47Z","updated_at":"2021-06-10T07:29:47Z","author_association":"COLLABORATOR","body":"@TGooch44 Thanks for the comment. Please let me know other related changes and I can add them. Also, we may ship them separately with multiple PRs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858384924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858457683","html_url":"https://github.com/apache/iceberg/pull/2691#issuecomment-858457683","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2691","id":858457683,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODQ1NzY4Mw==","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T09:16:25Z","updated_at":"2021-06-10T09:16:25Z","author_association":"CONTRIBUTOR","body":"Started the tests. Let's see if we break something, or not  \r\n\r\nLeft one question in review, but generally looks good to me","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858457683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858473595","html_url":"https://github.com/apache/iceberg/pull/2684#issuecomment-858473595","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2684","id":858473595,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODQ3MzU5NQ==","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T09:40:18Z","updated_at":"2021-06-10T09:40:18Z","author_association":"CONTRIBUTOR","body":"@rymurr since most changes are in the `nessie` project, would you like to review those?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858473595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858543532","html_url":"https://github.com/apache/iceberg/issues/2686#issuecomment-858543532","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2686","id":858543532,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODU0MzUzMg==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T11:31:39Z","updated_at":"2021-06-10T11:34:27Z","author_association":"COLLABORATOR","body":"Which engine did you use to create the table? \r\n\r\nCan you please append the `engine.hive.enabled=true` to the table properties, via the Iceberg API? e.g. `table.updateProperties().set(\"engine.hive.enabled\", \"true\").commit()`. Afterwards, if you describe the table again, it should have the Iceberg storage handler and serde, and the read queries should work fine again.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858543532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858552340","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858552340","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858552340,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODU1MjM0MA==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T11:47:15Z","updated_at":"2021-06-10T11:47:15Z","author_association":"COLLABORATOR","body":"Thanks for the detailed steps! As you mentioned too, it seems that Hive generated the data files but something went wrong during the job commit (hence the lack of metadata generated). Can you share any logs from the execution side that we could take a look at?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858552340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858559409","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858559409","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858559409,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODU1OTQwOQ==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T11:59:45Z","updated_at":"2021-06-10T11:59:45Z","author_association":"COLLABORATOR","body":"Also, can you please share:\r\n- version of Iceberg and Hive that you use\r\n- the explain plan of the insert query\r\n- the contents of the tableLocation/temp/ directory (this is where Hive stores the write commit related temporary files)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858559409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858763371","html_url":"https://github.com/apache/iceberg/issues/2686#issuecomment-858763371","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2686","id":858763371,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODc2MzM3MQ==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T16:22:36Z","updated_at":"2021-06-10T16:22:36Z","author_association":"NONE","body":"@marton-bod Solved the problem! Thank you so much! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858763371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858802253","html_url":"https://github.com/apache/iceberg/pull/2512#issuecomment-858802253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2512","id":858802253,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODgwMjI1Mw==","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T17:12:49Z","updated_at":"2021-06-10T17:12:49Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer are you ok with this change? can you merge it? @rdblue do you want to review it again?\r\nAs new changes go into spark3 and spark3-extensions, this change may need to be rebased and retested. A timely review is very much appreciated! Thank you!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858802253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858912406","html_url":"https://github.com/apache/iceberg/pull/2591#issuecomment-858912406","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2591","id":858912406,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODkxMjQwNg==","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T18:55:06Z","updated_at":"2021-06-10T18:55:06Z","author_association":"CONTRIBUTOR","body":"I know this is a bit behind on what Russell has locally but a few high-level points:\r\n\r\n- Shall we consider a separate quick PR for tiny updates to the existing code? Like fixing typos in constants and in Javadoc? Should make the review of this one a bit easier.\r\n- Shall we addd validation for TableScanUtil into a separate PR? Comment [here](https://github.com/apache/iceberg/pull/2591#discussion_r649433302).\r\n- RewriteStrategy\r\n    - Shall we move it to core for now even though it will be public?\r\n    - I am still not sure the current design of `RewriteStrategy` is the best we can come up with. Strategies are Serializable so I assume they can be sent to other nodes in case of distributed planning? However, strategies also define `rewriteFiles` that I think is going to be called on the driver? Plus, right now both the action as well as the strategy interact with the file rewrite coordinator and other things. Ideally, this should be a single entity, in my view. [Here](https://github.com/apache/iceberg/pull/2591#discussion_r634864457) is the relevant comment. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858912406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858925332","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-858925332","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":858925332,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODkyNTMzMg==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T19:04:51Z","updated_at":"2021-06-10T19:04:51Z","author_association":"NONE","body":"@marton-bod Thanks for your patience and time for helping me debug. \r\n1. Log\r\n```\r\n2021-06-09T23:25:37,850  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Compiling command(queryId=shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1): INSERT INTO TABLE hadoop_table_1\r\n  VALUES (7, \"John\", \"Basketball\", \"Senior\")\r\n2021-06-09T23:25:37,876  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Concurrency mode is disabled, not creating a lock manager\r\n2021-06-09T23:25:37,876  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Starting Semantic Analysis\r\n2021-06-09T23:25:37,903  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Completed phase 1 of Semantic Analysis\r\n2021-06-09T23:25:37,903  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for source tables\r\n2021-06-09T23:25:37,903  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for subqueries\r\n2021-06-09T23:25:37,903  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for destination tables\r\n2021-06-09T23:25:37,928  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Completed getting MetaData in Semantic Analysis\r\n2021-06-09T23:25:38,101  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Context: New scratch dir is hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de/hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:38,619  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for source tables\r\n2021-06-09T23:25:38,620  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for subqueries\r\n2021-06-09T23:25:38,620  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for source tables\r\n2021-06-09T23:25:38,631  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for subqueries\r\n2021-06-09T23:25:38,631  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for destination tables\r\n2021-06-09T23:25:40,604  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Launching Job 1 out of 1\r\n2021-06-09T23:25:40,604  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Starting task [Stage-2:MAPRED] in serial mode\r\n2021-06-09T23:25:40,686  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Context: New scratch dir is hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de/hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.TezSessionPoolManager: The current user: shenme_google_com, session user: shenme_google_com\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.TezSessionPoolManager: Current queue name is null incoming queue name is null\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.Task: Subscribed to counters: [] for queryId: shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1\r\n2021-06-09T23:25:38,631  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Get metadata for destination tables\r\n2021-06-09T23:25:38,696  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Context: New scratch dir is hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de/hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:38,702  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:38,944  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:38,944  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:39,006  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:39,238  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:39,238  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:39,238  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:39,436  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:39,436  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:39,437  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] common.FileUtils: Creating directory if it doesn't exist: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/.hive-staging_hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:39,518  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:39,707  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: CBO Succeeded; optimized logical plan.\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ppd.OpProcFactory: Processing for FS(4)\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ppd.OpProcFactory: Processing for SEL(3)\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ppd.OpProcFactory: Processing for UDTF(2)\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ppd.OpProcFactory: Processing for SEL(1)\r\n2021-06-09T23:25:39,800  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ppd.OpProcFactory: Processing for TS(0)\r\n2021-06-09T23:25:39,823  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.TezCompiler: Cycle free: true\r\n2021-06-09T23:25:39,828  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] parse.CalcitePlanner: Completed plan generation\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Semantic Analysis Completed (retrial = false)\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Returning Hive schema: Schema(fieldSchemas:[FieldSchema(name:col1, type:int, comment:null), FieldSchema(name:col2, type:string, comment:null), FieldSchema(name:col3, type:string, comment:null), FieldSchema(name:col4, type:string, comment:null)], properties:null)\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Completed compiling command(queryId=shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1); Time taken: 1.979 seconds\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] reexec.ReExecDriver: Execution #1 of query\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Concurrency mode is disabled, not creating a lock manager\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Executing command(queryId=shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1): INSERT INTO TABLE hadoop_table_1\r\n  VALUES (7, \"John\", \"Basketball\", \"Senior\")\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Query ID = shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1\r\n2021-06-09T23:25:39,829  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Total jobs = 1\r\n2021-06-09T23:25:39,830  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Starting task [Stage-0:DDL] in serial mode\r\n2021-06-09T23:25:39,852  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:40,093  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:40,093  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:40,094  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:40,327  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:40,327  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:40,328  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] mr.Catalogs: Catalog is not configured\r\n2021-06-09T23:25:40,528  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hadoop.HadoopTables: Table location loaded: gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n2021-06-09T23:25:40,528  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] hive.HiveIcebergSerDe: Using schema from existing table {\"type\":\"struct\",\"fields\":[{\"id\":1,\"name\":\"id\",\"required\":true,\"type\":\"int\"},{\"id\":2,\"name\":\"name\",\"required\":false,\"type\":\"string\"},{\"id\":3,\"name\":\"major\",\"required\":false,\"type\":\"string\"},{\"id\":4,\"name\":\"grade\",\"required\":false,\"type\":\"string\"}]}\r\n2021-06-09T23:25:40,597  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Starting task [Stage-1:DDL] in serial mode\r\n2021-06-09T23:25:40,604  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Launching Job 1 out of 1\r\n2021-06-09T23:25:40,604  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Starting task [Stage-2:MAPRED] in serial mode\r\n2021-06-09T23:25:40,686  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Context: New scratch dir is hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de/hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.TezSessionPoolManager: The current user: shenme_google_com, session user: shenme_google_com\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.TezSessionPoolManager: Current queue name is null incoming queue name is null\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.Task: Subscribed to counters: [] for queryId: shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1\r\n2021-06-09T23:25:40,691  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.Task: Session is already open\r\n2021-06-09T23:25:40,694  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.DagUtils: Resource modification time: 1623281030625 for hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/_tez_session_dir/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de-resources/iceberg-hive-runtime.jar\r\n2021-06-09T23:25:40,694  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.Task: Dag name: INSERT INTO TABLE hadoop_table_1...\"Senior\") (Stage-2)\r\n2021-06-09T23:25:40,698  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Context: New scratch dir is hdfs://shenme-cluster-3-m/tmp/hive/shenme_google_com/521d08fa-9fda-4ca3-8bab-3d0b60ddc6de/hive_2021-06-09_23-25-37_866_2611149539519878546-1\r\n2021-06-09T23:25:40,758  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] tez.DagUtils: Vertex has custom input? false\r\n2021-06-09T23:25:40,759  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.SerializationUtilities: Serializing MapWork using kryo\r\n2021-06-09T23:25:40,789  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] exec.Utilities: Serialized plan (via RPC) - name: Map 1 size: 301.80KB\r\n2021-06-09T23:25:40,891  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] client.TezClient: Submitting dag to TezSession, sessionName=HIVE-521d08fa-9fda-4ca3-8bab-3d0b60ddc6de, applicationId=application_1622522135523_0073, dagName=INSERT INTO TABLE hadoop_table_1...\"Senior\") (Stage-2), callerContext={ context=HIVE, callerType=HIVE_QUERY_ID, callerId=shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1 }\r\n2021-06-09T23:25:40,991  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] client.TezClient: Submitted dag to TezSession, sessionName=HIVE-521d08fa-9fda-4ca3-8bab-3d0b60ddc6de, applicationId=application_1622522135523_0073, dagId=dag_1622522135523_0073_2, dagName=INSERT INTO TABLE hadoop_table_1...\"Senior\") (Stage-2)\r\n2021-06-09T23:25:41,513  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] SessionState: Status: Running (Executing on YARN cluster with App id application_1622522135523_0073)\r\n\r\n2021-06-09T23:25:41,515  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] SessionState: Map 1: 0/1\r\n2021-06-09T23:25:44,542  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] SessionState: Map 1: 0(+1)/1\r\n2021-06-09T23:25:47,576  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] SessionState: Map 1: 0(+1)/1\r\n2021-06-09T23:25:48,220  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] SessionState: Map 1: 1/1\r\n2021-06-09T23:25:48,223  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Starting task [Stage-4:DDL] in serial mode\r\n2021-06-09T23:25:48,224  INFO [521d08fa-9fda-4ca3-8bab-3d0b60ddc6de main] ql.Driver: Completed executing command(queryId=shenme_google_com_20210609232537_9d2ce449-4ebc-403b-8f74-8b08ba9f62d1); Time taken: 8.395 seconds\r\n```\r\n2. Version\r\n![image](https://user-images.githubusercontent.com/84943281/121573545-3c7fe400-c9da-11eb-9bad-5b20e070302b.png)\r\n\r\n3. Explain Plan\r\n```\r\nhive> EXPLAIN INSERT INTO TABLE hadoop_table_1 VALUES (8, \"Eve\", \"Zoology\", \"Senior\");\r\nOK\r\nPlan optimized by CBO.\r\n\r\nStage-0\r\n  Alter Table Operator:\r\n    old name:default.hadoop_table_1,type:drop props\r\nStage-1\r\n  Pre Insert operator:{\"Pre-Insert task\":{}}\r\nStage-4\r\n  Insert operator:{\"Commit-Insert-Hook\":{}}\r\n    Stage-2\r\n      Map 1\r\n      File Output Operator [FS_4]\r\n        table:{\"name:\":\"default.hadoop_table_1\"}\r\n        Select Operator [SEL_3] (rows=1 width=8)\r\n          Output:[\"_col0\",\"_col1\",\"_col2\",\"_col3\"]\r\n          UDTF Operator [UDTF_2] (rows=1 width=48)\r\n            function name:inline\r\n            Select Operator [SEL_1] (rows=1 width=48)\r\n              Output:[\"_col0\"]\r\n              TableScan [TS_0] (rows=1 width=10)\r\n                _dummy_database@_dummy_table,_dummy_table,Tbl:COMPLETE,Col:COMPLETE\r\n\r\nTime taken: 1.592 seconds, Fetched: 22 row(s)\r\n```\r\n4. Everytime when I insert the data, there'll be a _tmp file, but it's empty.\r\n```\r\ngsutil ls -la gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/_tmp.test1/\r\n\r\ngsutil cat gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/_tmp.test1/#1623347746784286\r\n```\r\n![image](https://user-images.githubusercontent.com/84943281/121574915-98973800-c9db-11eb-9eec-6aba62c10479.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/858925332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/859021968","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-859021968","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":859021968,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTAyMTk2OA==","user":{"login":"marton-bod","id":19599214,"node_id":"MDQ6VXNlcjE5NTk5MjE0","avatar_url":"https://avatars.githubusercontent.com/u/19599214?v=4","gravatar_id":"","url":"https://api.github.com/users/marton-bod","html_url":"https://github.com/marton-bod","followers_url":"https://api.github.com/users/marton-bod/followers","following_url":"https://api.github.com/users/marton-bod/following{/other_user}","gists_url":"https://api.github.com/users/marton-bod/gists{/gist_id}","starred_url":"https://api.github.com/users/marton-bod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marton-bod/subscriptions","organizations_url":"https://api.github.com/users/marton-bod/orgs","repos_url":"https://api.github.com/users/marton-bod/repos","events_url":"https://api.github.com/users/marton-bod/events{/privacy}","received_events_url":"https://api.github.com/users/marton-bod/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T20:21:12Z","updated_at":"2021-06-10T20:21:12Z","author_association":"COLLABORATOR","body":"Thanks for details! Sorry, I wasn't clear on which temp folder I'd like to see the contents of. Can you check this one:\r\n`gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/temp`?\r\n\r\nAs for the logs, they are from the HS2 side, but is there a chance to get the logs from the Hadoop cluster where the MR job was executing? Unfortunately the job commit happens on the MR job-side and not on the HS2-side.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/859021968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/859036146","html_url":"https://github.com/apache/iceberg/issues/2685#issuecomment-859036146","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2685","id":859036146,"node_id":"MDEyOklzc3VlQ29tbWVudDg1OTAzNjE0Ng==","user":{"login":"aimenglin","id":84943281,"node_id":"MDQ6VXNlcjg0OTQzMjgx","avatar_url":"https://avatars.githubusercontent.com/u/84943281?v=4","gravatar_id":"","url":"https://api.github.com/users/aimenglin","html_url":"https://github.com/aimenglin","followers_url":"https://api.github.com/users/aimenglin/followers","following_url":"https://api.github.com/users/aimenglin/following{/other_user}","gists_url":"https://api.github.com/users/aimenglin/gists{/gist_id}","starred_url":"https://api.github.com/users/aimenglin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aimenglin/subscriptions","organizations_url":"https://api.github.com/users/aimenglin/orgs","repos_url":"https://api.github.com/users/aimenglin/repos","events_url":"https://api.github.com/users/aimenglin/events{/privacy}","received_events_url":"https://api.github.com/users/aimenglin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T20:33:03Z","updated_at":"2021-06-10T20:33:03Z","author_association":"NONE","body":"@marton-bod I didn't find anything under this directory. There's a hidden file on test1, but still nothing inside.\r\n```\r\nshenme@wakeup:~$ gsutil ls -la gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/temp\r\nCommandException: One or more URLs matched no objects.\r\nshenme@wakeup:~$ gsutil ls -la gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1\r\n         0  2021-06-09T23:25:48Z  gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/#1623281148381224  metageneration=1\r\n                                 gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/data/\r\n                                 gs://gcs-bucket-shenme-test-service-7f1dbd01-5cc9-4393-a54a-e9c2b9c9/hive-warehouse/test1/metadata/\r\nTOTAL: 1 objects, 0 bytes (0 B)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/859036146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]