[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893499319","html_url":"https://github.com/apache/brpc/pull/1506#issuecomment-893499319","issue_url":"https://api.github.com/repos/apache/brpc/issues/1506","id":893499319,"node_id":"IC_kwDOBhmkcs41Qbe3","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T14:20:23Z","updated_at":"2021-08-05T15:23:08Z","author_association":"MEMBER","body":"@zyearn 代码修改了，另外除了2.3和2.4里面的字符外，还有一个%字符也是合法的，2.1节有描述。一并加到注释里面了。\r\n另外发现这里除了合法字符以外，还要补一个空格，否则已有的单例会有失败。因为brpc之前允许url里有空格，有skip掉空格的逻辑","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893499319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893626451","html_url":"https://github.com/apache/brpc/pull/1506#issuecomment-893626451","issue_url":"https://api.github.com/repos/apache/brpc/issues/1506","id":893626451,"node_id":"IC_kwDOBhmkcs41Q6hT","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T17:13:27Z","updated_at":"2021-08-05T17:13:27Z","author_association":"MEMBER","body":"CI好像卡住了，不知道怎么回事 @zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893626451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893757542","html_url":"https://github.com/apache/brpc/pull/1506#issuecomment-893757542","issue_url":"https://api.github.com/repos/apache/brpc/issues/1506","id":893757542,"node_id":"IC_kwDOBhmkcs41Rahm","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T19:58:48Z","updated_at":"2021-08-05T19:58:48Z","author_association":"MEMBER","body":"看了下CI job在排队","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893757542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893796197","html_url":"https://github.com/apache/brpc/pull/1504#issuecomment-893796197","issue_url":"https://api.github.com/repos/apache/brpc/issues/1504","id":893796197,"node_id":"IC_kwDOBhmkcs41Rj9l","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T21:03:00Z","updated_at":"2021-08-05T21:03:00Z","author_association":"MEMBER","body":"还在看，这章后面也说：With current implementations of the Standard Library,\r\nthere are situations where, as expected, emplacement outperforms insertion, but,\r\nsadly, there are also situations where the insertion functions run faster. \r\n... to determine whether emplacement or insertion runs faster, benchmark them both.\r\n\r\n所以还需要评估下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893796197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893813158","html_url":"https://github.com/apache/brpc/pull/1499#issuecomment-893813158","issue_url":"https://api.github.com/repos/apache/brpc/issues/1499","id":893813158,"node_id":"IC_kwDOBhmkcs41RoGm","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T21:12:53Z","updated_at":"2021-08-05T21:12:53Z","author_association":"MEMBER","body":"restarted","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893813158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893942655","html_url":"https://github.com/apache/brpc/pull/1504#issuecomment-893942655","issue_url":"https://api.github.com/repos/apache/brpc/issues/1504","id":893942655,"node_id":"IC_kwDOBhmkcs41SHt_","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T01:49:11Z","updated_at":"2021-08-06T01:49:11Z","author_association":"MEMBER","body":"他那段应该说的是插入已存在对象的时候，已经具名的对象。emplace是否总是优于insert是理论上的，实践上不一定。\n\n但是前文提到如果是针对需要插入并构造新对象的时候，emplace是比insert高效的，因为emplace是传入的构造参数列表，它原地构造对象。而insert是构造临时对象，最后再move过去，然后析构临时对象。emplace没有创建和析构临时对象的开销。\n\n我这里修改的都是构造了临时pair对象的地方","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893942655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893962742","html_url":"https://github.com/apache/brpc/issues/1475#issuecomment-893962742","issue_url":"https://api.github.com/repos/apache/brpc/issues/1475","id":893962742,"node_id":"IC_kwDOBhmkcs41SMn2","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T02:50:41Z","updated_at":"2021-08-06T02:50:41Z","author_association":"CONTRIBUTOR","body":"> > > > > > 给option的has_builtin_services设置成false就可以关闭，默认是true。\r\n> > > \r\n> > > \r\n> > > > > > 你可以根据你的系统环境（开发环境、测试环境、生产环境）来指定启用或关闭内置服务。\r\n> > > \r\n> > > \r\n> > > > >\r\n> > > \r\n> > > \r\n> > > > >\r\n> > > \r\n> > > \r\n> > > > > 这个能支持的场景还是比较有限的，比如无法在运行时配置。\r\n> > > \r\n> > > \r\n> > > > \r\n> > > \r\n> > > \r\n> > > > 可以啊。你说的运行时不能设置是什么意思？\r\n> > > \r\n> > > \r\n> > > 比如通过特定请求开启内置服务？使用完关闭内置服务。\r\n> > \r\n> > \r\n> > 那使用前面楼层提到的inner port吧。不过一般不需要针对特定请求开启，这么灵活…\r\n> \r\n> 这边服务所在的主机或网络是不受信的，与其他互联网场景可能不同。\r\n你是想禁止在线修改程序配置（gflag，在线profile等），还是想整个内置服务都不暴露？\r\nhttps://github.com/apache/incubator-brpc/blob/60159fc3f3e13490fb9806ea0a0cb0dcdbda7f7d/src/brpc/builtin/flags_service.cpp#L37\r\n设置这个gflag可以禁止通过内置服务在线修改程序配置，可以开发提供一个内置服务的接口控制这个gflag的设置。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893962742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893968248","html_url":"https://github.com/apache/brpc/pull/1504#issuecomment-893968248","issue_url":"https://api.github.com/repos/apache/brpc/issues/1504","id":893968248,"node_id":"IC_kwDOBhmkcs41SN94","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T03:08:29Z","updated_at":"2021-08-06T03:08:29Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893968248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893969993","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-893969993","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":893969993,"node_id":"IC_kwDOBhmkcs41SOZJ","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T03:13:37Z","updated_at":"2021-08-06T03:13:37Z","author_association":"CONTRIBUTOR","body":"我记得用rpc replay来回放http的时候，有部分http header会不一样，不知道你对比过没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/893969993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894001731","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-894001731","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":894001731,"node_id":"IC_kwDOBhmkcs41SWJD","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T05:01:07Z","updated_at":"2021-08-06T05:01:07Z","author_association":"MEMBER","body":"之前rpc_replay不能回放http的，不知道你说的\"你记得…\"是指哪种情况？😳\n我这个没有考虑回放header，dump的结果就是接口和json，然后发送https+json形式的请求。\n一般用brpc提供http服务，服务内部也是像std协议一样处理PB吧，很少去从header中取数据吧？我的理解是这样…\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894001731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894231387","html_url":"https://github.com/apache/brpc/pull/1506#issuecomment-894231387","issue_url":"https://api.github.com/repos/apache/brpc/issues/1506","id":894231387,"node_id":"IC_kwDOBhmkcs41TONb","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T12:38:50Z","updated_at":"2021-08-06T16:13:53Z","author_association":"MEMBER","body":"@zyearn  改好了，辛苦review","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894231387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894309492","html_url":"https://github.com/apache/brpc/issues/1475#issuecomment-894309492","issue_url":"https://api.github.com/repos/apache/brpc/issues/1475","id":894309492,"node_id":"IC_kwDOBhmkcs41ThR0","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T14:43:01Z","updated_at":"2021-08-06T14:43:01Z","author_association":"MEMBER","body":"> > > > > > > 给option的has_builtin_services设置成false就可以关闭，默认是true。\r\n> > > > \r\n> > > > \r\n> > > > > > > 你可以根据你的系统环境（开发环境、测试环境、生产环境）来指定启用或关闭内置服务。\r\n> > > > \r\n> > > > \r\n> > > > > >\r\n> > > > \r\n> > > > \r\n> > > > > >\r\n> > > > \r\n> > > > \r\n> > > > > > 这个能支持的场景还是比较有限的，比如无法在运行时配置。\r\n> > > > \r\n> > > > \r\n> > > > > \r\n> > > > \r\n> > > > \r\n> > > > > 可以啊。你说的运行时不能设置是什么意思？\r\n> > > > \r\n> > > > \r\n> > > > 比如通过特定请求开启内置服务？使用完关闭内置服务。\r\n> > > \r\n> > > \r\n> > > 那使用前面楼层提到的inner port吧。不过一般不需要针对特定请求开启，这么灵活…\r\n> > \r\n> > \r\n> > 这边服务所在的主机或网络是不受信的，与其他互联网场景可能不同。\r\n>\r\n> 你是想禁止在线修改程序配置（gflag，在线profile等），还是想整个内置服务都不暴露？\r\n\r\n整个内置服务都不暴露。\r\n\r\n> https://github.com/apache/incubator-brpc/blob/60159fc3f3e13490fb9806ea0a0cb0dcdbda7f7d/src/brpc/builtin/flags_service.cpp#L37\r\n> \r\n> 设置这个gflag可以禁止通过内置服务在线修改程序配置，可以开发提供一个内置服务的接口控制这个gflag的设置。\r\n\r\n如果内置服务的开关也是个 gflag 就基本满足我这边的需求了，但这个和 OP @serverglen  的需求应该不一样。\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894309492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894332280","html_url":"https://github.com/apache/brpc/issues/1454#issuecomment-894332280","issue_url":"https://api.github.com/repos/apache/brpc/issues/1454","id":894332280,"node_id":"IC_kwDOBhmkcs41Tm14","user":{"login":"qqsun8819","id":1409644,"node_id":"MDQ6VXNlcjE0MDk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1409644?v=4","gravatar_id":"","url":"https://api.github.com/users/qqsun8819","html_url":"https://github.com/qqsun8819","followers_url":"https://api.github.com/users/qqsun8819/followers","following_url":"https://api.github.com/users/qqsun8819/following{/other_user}","gists_url":"https://api.github.com/users/qqsun8819/gists{/gist_id}","starred_url":"https://api.github.com/users/qqsun8819/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qqsun8819/subscriptions","organizations_url":"https://api.github.com/users/qqsun8819/orgs","repos_url":"https://api.github.com/users/qqsun8819/repos","events_url":"https://api.github.com/users/qqsun8819/events{/privacy}","received_events_url":"https://api.github.com/users/qqsun8819/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T15:18:42Z","updated_at":"2021-08-06T15:18:42Z","author_association":"NONE","body":"> 一直在用proto3，没出任何问题……\r\n\r\n不是pb3有问题，而是brpc链入tf有问题。我没有说过pb3有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894332280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894502463","html_url":"https://github.com/apache/brpc/pull/1506#issuecomment-894502463","issue_url":"https://api.github.com/repos/apache/brpc/issues/1506","id":894502463,"node_id":"IC_kwDOBhmkcs41UQY_","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T20:29:09Z","updated_at":"2021-08-06T20:29:09Z","author_association":"MEMBER","body":"好的，感谢贡献 :)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894502463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894508814","html_url":"https://github.com/apache/brpc/pull/1504#issuecomment-894508814","issue_url":"https://api.github.com/repos/apache/brpc/issues/1504","id":894508814,"node_id":"IC_kwDOBhmkcs41UR8O","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T20:43:55Z","updated_at":"2021-08-06T20:43:55Z","author_association":"MEMBER","body":"> 他那段应该说的是插入已存在对象的时候，已经具名的对象。emplace是否总是优于insert是理论上的，实践上不一定。\r\n> \r\n> 但是前文提到如果是针对需要插入并构造新对象的时候，emplace是比insert高效的，因为emplace是传入的构造参数列表，它原地构造对象。而insert是构造临时对象，最后再move过去，然后析构临时对象。emplace没有创建和析构临时对象的开销。\r\n> \r\n> 我这里修改的都是构造了临时pair对象的地方\r\n\r\n好的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894508814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894683552","html_url":"https://github.com/apache/brpc/issues/1122#issuecomment-894683552","issue_url":"https://api.github.com/repos/apache/brpc/issues/1122","id":894683552,"node_id":"IC_kwDOBhmkcs41U8mg","user":{"login":"yshiyuan","id":37101083,"node_id":"MDQ6VXNlcjM3MTAxMDgz","avatar_url":"https://avatars.githubusercontent.com/u/37101083?v=4","gravatar_id":"","url":"https://api.github.com/users/yshiyuan","html_url":"https://github.com/yshiyuan","followers_url":"https://api.github.com/users/yshiyuan/followers","following_url":"https://api.github.com/users/yshiyuan/following{/other_user}","gists_url":"https://api.github.com/users/yshiyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/yshiyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yshiyuan/subscriptions","organizations_url":"https://api.github.com/users/yshiyuan/orgs","repos_url":"https://api.github.com/users/yshiyuan/repos","events_url":"https://api.github.com/users/yshiyuan/events{/privacy}","received_events_url":"https://api.github.com/users/yshiyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T17:38:24Z","updated_at":"2021-08-07T17:38:24Z","author_association":"NONE","body":"使用libthriftnb的情况下需要链接libevent，可以检查下是否链接了libevent","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894683552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894795553","html_url":"https://github.com/apache/brpc/issues/1497#issuecomment-894795553","issue_url":"https://api.github.com/repos/apache/brpc/issues/1497","id":894795553,"node_id":"IC_kwDOBhmkcs41VX8h","user":{"login":"charyxiao","id":5407327,"node_id":"MDQ6VXNlcjU0MDczMjc=","avatar_url":"https://avatars.githubusercontent.com/u/5407327?v=4","gravatar_id":"","url":"https://api.github.com/users/charyxiao","html_url":"https://github.com/charyxiao","followers_url":"https://api.github.com/users/charyxiao/followers","following_url":"https://api.github.com/users/charyxiao/following{/other_user}","gists_url":"https://api.github.com/users/charyxiao/gists{/gist_id}","starred_url":"https://api.github.com/users/charyxiao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/charyxiao/subscriptions","organizations_url":"https://api.github.com/users/charyxiao/orgs","repos_url":"https://api.github.com/users/charyxiao/repos","events_url":"https://api.github.com/users/charyxiao/events{/privacy}","received_events_url":"https://api.github.com/users/charyxiao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-08T13:11:48Z","updated_at":"2021-08-08T13:11:48Z","author_association":"NONE","body":"第二点 调用sched(&g) 不一定是调度新的bthread的 也可能是旧的bthread的 举个更极端的例子 如果没有新的bthread呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894795553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894905464","html_url":"https://github.com/apache/brpc/pull/1499#issuecomment-894905464","issue_url":"https://api.github.com/repos/apache/brpc/issues/1499","id":894905464,"node_id":"IC_kwDOBhmkcs41Vyx4","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T01:53:09Z","updated_at":"2021-08-09T01:53:09Z","author_association":"CONTRIBUTOR","body":"> restarted\r\n\r\n应该是单测不稳定。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/894905464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895195603","html_url":"https://github.com/apache/brpc/issues/1428#issuecomment-895195603","issue_url":"https://api.github.com/repos/apache/brpc/issues/1428","id":895195603,"node_id":"IC_kwDOBhmkcs41W5nT","user":{"login":"Cuttstage","id":40348044,"node_id":"MDQ6VXNlcjQwMzQ4MDQ0","avatar_url":"https://avatars.githubusercontent.com/u/40348044?v=4","gravatar_id":"","url":"https://api.github.com/users/Cuttstage","html_url":"https://github.com/Cuttstage","followers_url":"https://api.github.com/users/Cuttstage/followers","following_url":"https://api.github.com/users/Cuttstage/following{/other_user}","gists_url":"https://api.github.com/users/Cuttstage/gists{/gist_id}","starred_url":"https://api.github.com/users/Cuttstage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cuttstage/subscriptions","organizations_url":"https://api.github.com/users/Cuttstage/orgs","repos_url":"https://api.github.com/users/Cuttstage/repos","events_url":"https://api.github.com/users/Cuttstage/events{/privacy}","received_events_url":"https://api.github.com/users/Cuttstage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T12:50:44Z","updated_at":"2021-08-09T12:50:44Z","author_association":"NONE","body":"> 已经解决。确实是因为该进程 map count 达到了 /proc/sys/vm/max_map_count 导致 allocate_stack_storage 失败，bthread 都进入了 pthread 模型，最终阻塞在 futex_wait_private\r\n\r\n大佬，请问你是如何解决这个问题的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895195603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895197464","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-895197464","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":895197464,"node_id":"IC_kwDOBhmkcs41W6EY","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T12:53:42Z","updated_at":"2021-08-09T12:53:42Z","author_association":"CONTRIBUTOR","body":"> 之前rpc_replay不能回放http的，不知道你说的\"你记得…\"是指哪种情况？😳\r\n> 我这个没有考虑回放header，dump的结果就是接口和json，然后发送https+json形式的请求。\r\n> 一般用brpc提供http服务，服务内部也是像std协议一样处理PB吧，很少去从header中取数据吧？我的理解是这样…\r\n\r\n之前我实现过一份http replay，发现dump下来的请求进行replay的时候，http header和原来的请求有一些不匹配。有点儿忘记具体原因了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895197464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895290871","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-895290871","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":895290871,"node_id":"IC_kwDOBhmkcs41XQ33","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-09T14:52:32Z","updated_at":"2021-08-09T14:52:32Z","author_association":"MEMBER","body":"> > 之前rpc_replay不能回放http的，不知道你说的\"你记得…\"是指哪种情况？😳\r\n> > 我这个没有考虑回放header，dump的结果就是接口和json，然后发送https+json形式的请求。\r\n> > 一般用brpc提供http服务，服务内部也是像std协议一样处理PB吧，很少去从header中取数据吧？我的理解是这样…\r\n> \r\n> 之前我实现过一份http replay，发现dump下来的请求进行replay的时候，http header和原来的请求有一些不匹配。有点儿忘记具体原因了\r\n\r\n那我加一个header的dump功能？把header里面的map存下来，回放的时候解析出来，再set回header？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/895290871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896455510","html_url":"https://github.com/apache/brpc/pull/536#issuecomment-896455510","issue_url":"https://api.github.com/repos/apache/brpc/issues/536","id":896455510,"node_id":"IC_kwDOBhmkcs41btNW","user":{"login":"jenrryyou","id":4698734,"node_id":"MDQ6VXNlcjQ2OTg3MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4698734?v=4","gravatar_id":"","url":"https://api.github.com/users/jenrryyou","html_url":"https://github.com/jenrryyou","followers_url":"https://api.github.com/users/jenrryyou/followers","following_url":"https://api.github.com/users/jenrryyou/following{/other_user}","gists_url":"https://api.github.com/users/jenrryyou/gists{/gist_id}","starred_url":"https://api.github.com/users/jenrryyou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jenrryyou/subscriptions","organizations_url":"https://api.github.com/users/jenrryyou/orgs","repos_url":"https://api.github.com/users/jenrryyou/repos","events_url":"https://api.github.com/users/jenrryyou/events{/privacy}","received_events_url":"https://api.github.com/users/jenrryyou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T02:40:51Z","updated_at":"2021-08-11T02:40:51Z","author_association":"CONTRIBUTOR","body":"求大佬抽空合并下master，我们也准备引入multi模式","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896455510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896546055","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896546055","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896546055,"node_id":"IC_kwDOBhmkcs41cDUH","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T06:45:18Z","updated_at":"2021-08-11T06:45:18Z","author_association":"CONTRIBUTOR","body":"试试/metrics呢？ 你可能用的不是最新的版本","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896546055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896546553","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896546553","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896546553,"node_id":"IC_kwDOBhmkcs41cDb5","user":{"login":"dylanzhang","id":2951936,"node_id":"MDQ6VXNlcjI5NTE5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/2951936?v=4","gravatar_id":"","url":"https://api.github.com/users/dylanzhang","html_url":"https://github.com/dylanzhang","followers_url":"https://api.github.com/users/dylanzhang/followers","following_url":"https://api.github.com/users/dylanzhang/following{/other_user}","gists_url":"https://api.github.com/users/dylanzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/dylanzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dylanzhang/subscriptions","organizations_url":"https://api.github.com/users/dylanzhang/orgs","repos_url":"https://api.github.com/users/dylanzhang/repos","events_url":"https://api.github.com/users/dylanzhang/events{/privacy}","received_events_url":"https://api.github.com/users/dylanzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T06:46:22Z","updated_at":"2021-08-11T06:46:22Z","author_association":"NONE","body":"> 试试/metrics呢？ 你可能用的不是最新的版本\r\n\r\n/metrics也是不存在的，版本号是0.9.7，应该是最新的版本了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896546553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896550539","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896550539","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896550539,"node_id":"IC_kwDOBhmkcs41cEaL","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T06:54:09Z","updated_at":"2021-08-11T06:54:09Z","author_association":"CONTRIBUTOR","body":"你测试的完整的地址是什么样的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896550539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896551337","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896551337","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896551337,"node_id":"IC_kwDOBhmkcs41cEmp","user":{"login":"dylanzhang","id":2951936,"node_id":"MDQ6VXNlcjI5NTE5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/2951936?v=4","gravatar_id":"","url":"https://api.github.com/users/dylanzhang","html_url":"https://github.com/dylanzhang","followers_url":"https://api.github.com/users/dylanzhang/followers","following_url":"https://api.github.com/users/dylanzhang/following{/other_user}","gists_url":"https://api.github.com/users/dylanzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/dylanzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dylanzhang/subscriptions","organizations_url":"https://api.github.com/users/dylanzhang/orgs","repos_url":"https://api.github.com/users/dylanzhang/repos","events_url":"https://api.github.com/users/dylanzhang/events{/privacy}","received_events_url":"https://api.github.com/users/dylanzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T06:55:38Z","updated_at":"2021-08-11T06:56:42Z","author_association":"NONE","body":"> 你测试的完整的地址是什么样的？\r\n\r\ncurl 127.0.0.1:8067/brpc_metrics\r\ncurl 127.0.0.1:8067/metrics\r\n8066是我的主服务，8067是我的BRPC_INNER_PORT","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896551337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896655228","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896655228","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896655228,"node_id":"IC_kwDOBhmkcs41cd98","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T09:22:45Z","updated_at":"2021-08-11T09:22:54Z","author_association":"MEMBER","body":"> 我也阅读了server.cpp文件中对BuiltinService初始化的代码，发现并未默认启动Prometheus相关的service呀？\r\n\r\n初始化代码在这里：https://github.com/apache/incubator-brpc/blob/master/src/brpc/server.cpp#L494-L497 ，如果本地没有的话，就是版本问题了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896655228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896659247","html_url":"https://github.com/apache/brpc/issues/1514#issuecomment-896659247","issue_url":"https://api.github.com/repos/apache/brpc/issues/1514","id":896659247,"node_id":"IC_kwDOBhmkcs41ce8v","user":{"login":"dylanzhang","id":2951936,"node_id":"MDQ6VXNlcjI5NTE5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/2951936?v=4","gravatar_id":"","url":"https://api.github.com/users/dylanzhang","html_url":"https://github.com/dylanzhang","followers_url":"https://api.github.com/users/dylanzhang/followers","following_url":"https://api.github.com/users/dylanzhang/following{/other_user}","gists_url":"https://api.github.com/users/dylanzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/dylanzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dylanzhang/subscriptions","organizations_url":"https://api.github.com/users/dylanzhang/orgs","repos_url":"https://api.github.com/users/dylanzhang/repos","events_url":"https://api.github.com/users/dylanzhang/events{/privacy}","received_events_url":"https://api.github.com/users/dylanzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-11T09:28:35Z","updated_at":"2021-08-11T09:28:35Z","author_association":"NONE","body":"> > 我也阅读了server.cpp文件中对BuiltinService初始化的代码，发现并未默认启动Prometheus相关的service呀？\r\n> \r\n> 初始化代码在这里：https://github.com/apache/incubator-brpc/blob/master/src/brpc/server.cpp#L494-L497 ，如果本地没有的话，就是版本问题了\r\n\r\n果然是内部引入的版本和0.9.7有区别，多谢大佬","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/896659247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/897295307","html_url":"https://github.com/apache/brpc/issues/41#issuecomment-897295307","issue_url":"https://api.github.com/repos/apache/brpc/issues/41","id":897295307,"node_id":"IC_kwDOBhmkcs41e6PL","user":{"login":"xqqcoder","id":31360881,"node_id":"MDQ6VXNlcjMxMzYwODgx","avatar_url":"https://avatars.githubusercontent.com/u/31360881?v=4","gravatar_id":"","url":"https://api.github.com/users/xqqcoder","html_url":"https://github.com/xqqcoder","followers_url":"https://api.github.com/users/xqqcoder/followers","following_url":"https://api.github.com/users/xqqcoder/following{/other_user}","gists_url":"https://api.github.com/users/xqqcoder/gists{/gist_id}","starred_url":"https://api.github.com/users/xqqcoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xqqcoder/subscriptions","organizations_url":"https://api.github.com/users/xqqcoder/orgs","repos_url":"https://api.github.com/users/xqqcoder/repos","events_url":"https://api.github.com/users/xqqcoder/events{/privacy}","received_events_url":"https://api.github.com/users/xqqcoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T02:18:22Z","updated_at":"2021-08-12T02:18:22Z","author_association":"NONE","body":"关注一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/897295307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/897640798","html_url":"https://github.com/apache/brpc/pull/1515#issuecomment-897640798","issue_url":"https://api.github.com/repos/apache/brpc/issues/1515","id":897640798,"node_id":"IC_kwDOBhmkcs41gOle","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-12T13:29:25Z","updated_at":"2021-08-12T13:29:25Z","author_association":"MEMBER","body":"@zyearn 辛苦看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/897640798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898159082","html_url":"https://github.com/apache/brpc/pull/1517#issuecomment-898159082","issue_url":"https://api.github.com/repos/apache/brpc/issues/1517","id":898159082,"node_id":"IC_kwDOBhmkcs41iNHq","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T03:18:43Z","updated_at":"2021-08-13T03:18:43Z","author_association":"CONTRIBUTOR","body":"狂赞","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898159082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898287766","html_url":"https://github.com/apache/brpc/issues/1512#issuecomment-898287766","issue_url":"https://api.github.com/repos/apache/brpc/issues/1512","id":898287766,"node_id":"IC_kwDOBhmkcs41isiW","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T08:37:44Z","updated_at":"2021-08-13T08:37:44Z","author_association":"CONTRIBUTOR","body":"这个问题和brpc的关系是什么？ 从逻辑上看，如果size 变量大，就循环次数多，就耗时长","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898287766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898290922","html_url":"https://github.com/apache/brpc/issues/1511#issuecomment-898290922","issue_url":"https://api.github.com/repos/apache/brpc/issues/1511","id":898290922,"node_id":"IC_kwDOBhmkcs41itTq","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T08:43:02Z","updated_at":"2021-08-13T08:43:02Z","author_association":"CONTRIBUTOR","body":"你的场景是否可以考虑用[streaming RPC](https://github.com/apache/incubator-brpc/blob/master/docs/cn/streaming_rpc.md)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898290922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898310596","html_url":"https://github.com/apache/brpc/issues/771#issuecomment-898310596","issue_url":"https://api.github.com/repos/apache/brpc/issues/771","id":898310596,"node_id":"IC_kwDOBhmkcs41iyHE","user":{"login":"beforedream","id":23582757,"node_id":"MDQ6VXNlcjIzNTgyNzU3","avatar_url":"https://avatars.githubusercontent.com/u/23582757?v=4","gravatar_id":"","url":"https://api.github.com/users/beforedream","html_url":"https://github.com/beforedream","followers_url":"https://api.github.com/users/beforedream/followers","following_url":"https://api.github.com/users/beforedream/following{/other_user}","gists_url":"https://api.github.com/users/beforedream/gists{/gist_id}","starred_url":"https://api.github.com/users/beforedream/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beforedream/subscriptions","organizations_url":"https://api.github.com/users/beforedream/orgs","repos_url":"https://api.github.com/users/beforedream/repos","events_url":"https://api.github.com/users/beforedream/events{/privacy}","received_events_url":"https://api.github.com/users/beforedream/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T09:16:01Z","updated_at":"2021-08-13T09:16:01Z","author_association":"NONE","body":"遇到了相同问题，请问下楼主已经解决吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898310596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898314051","html_url":"https://github.com/apache/brpc/issues/771#issuecomment-898314051","issue_url":"https://api.github.com/repos/apache/brpc/issues/771","id":898314051,"node_id":"IC_kwDOBhmkcs41iy9D","user":{"login":"beforedream","id":23582757,"node_id":"MDQ6VXNlcjIzNTgyNzU3","avatar_url":"https://avatars.githubusercontent.com/u/23582757?v=4","gravatar_id":"","url":"https://api.github.com/users/beforedream","html_url":"https://github.com/beforedream","followers_url":"https://api.github.com/users/beforedream/followers","following_url":"https://api.github.com/users/beforedream/following{/other_user}","gists_url":"https://api.github.com/users/beforedream/gists{/gist_id}","starred_url":"https://api.github.com/users/beforedream/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beforedream/subscriptions","organizations_url":"https://api.github.com/users/beforedream/orgs","repos_url":"https://api.github.com/users/beforedream/repos","events_url":"https://api.github.com/users/beforedream/events{/privacy}","received_events_url":"https://api.github.com/users/beforedream/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T09:21:54Z","updated_at":"2021-08-13T09:21:54Z","author_association":"NONE","body":"我此前遇到这个问题的时候，是因为bool类型的数据，赋值时并非使用true/false，当时测试了10w+没有出现，后边又遇到这个了，这次就不晓得是什么原因","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898314051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898339741","html_url":"https://github.com/apache/brpc/issues/1518#issuecomment-898339741","issue_url":"https://api.github.com/repos/apache/brpc/issues/1518","id":898339741,"node_id":"IC_kwDOBhmkcs41i5Od","user":{"login":"beforedream","id":23582757,"node_id":"MDQ6VXNlcjIzNTgyNzU3","avatar_url":"https://avatars.githubusercontent.com/u/23582757?v=4","gravatar_id":"","url":"https://api.github.com/users/beforedream","html_url":"https://github.com/beforedream","followers_url":"https://api.github.com/users/beforedream/followers","following_url":"https://api.github.com/users/beforedream/following{/other_user}","gists_url":"https://api.github.com/users/beforedream/gists{/gist_id}","starred_url":"https://api.github.com/users/beforedream/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beforedream/subscriptions","organizations_url":"https://api.github.com/users/beforedream/orgs","repos_url":"https://api.github.com/users/beforedream/repos","events_url":"https://api.github.com/users/beforedream/events{/privacy}","received_events_url":"https://api.github.com/users/beforedream/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T09:55:19Z","updated_at":"2021-08-13T09:55:19Z","author_association":"NONE","body":"初次出现时，发现是bool类型赋值为了非1/0，修改为赋值true/false之后，测试10w+次未出现错误。\r\n目前这次的原因并不清楚","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898339741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898373296","html_url":"https://github.com/apache/brpc/issues/1511#issuecomment-898373296","issue_url":"https://api.github.com/repos/apache/brpc/issues/1511","id":898373296,"node_id":"IC_kwDOBhmkcs41jBaw","user":{"login":"my-vegetable-has-exploded","id":48236141,"node_id":"MDQ6VXNlcjQ4MjM2MTQx","avatar_url":"https://avatars.githubusercontent.com/u/48236141?v=4","gravatar_id":"","url":"https://api.github.com/users/my-vegetable-has-exploded","html_url":"https://github.com/my-vegetable-has-exploded","followers_url":"https://api.github.com/users/my-vegetable-has-exploded/followers","following_url":"https://api.github.com/users/my-vegetable-has-exploded/following{/other_user}","gists_url":"https://api.github.com/users/my-vegetable-has-exploded/gists{/gist_id}","starred_url":"https://api.github.com/users/my-vegetable-has-exploded/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/my-vegetable-has-exploded/subscriptions","organizations_url":"https://api.github.com/users/my-vegetable-has-exploded/orgs","repos_url":"https://api.github.com/users/my-vegetable-has-exploded/repos","events_url":"https://api.github.com/users/my-vegetable-has-exploded/events{/privacy}","received_events_url":"https://api.github.com/users/my-vegetable-has-exploded/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-13T10:56:00Z","updated_at":"2021-08-13T10:56:00Z","author_association":"NONE","body":"感谢回复。\r\n之前没有描述清楚，在一台机器有多个实例，这多个实例会想其它机器上面的多个实例频繁发送消息，我想要把一段时间内发往相同机器rpc请求合并起来在同一个时间发送以减小网络负担，\r\n![image](https://user-images.githubusercontent.com/48236141/129346471-8ddd686c-c00e-4557-82f2-598f982ad9d2.png)\r\n像这个把a，b的请求合成c，然后c一段时间后发给d，再由d下发给下面的服务e，f，最后实现a向e发送rpc，b向f发送rpc。\r\n原先a，b，e，f对rpc的处理涉及许多需要controller处理的地方，最后也需要调用closure->Done()，不知道要怎么处理这两个的合并。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/898373296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/899302263","html_url":"https://github.com/apache/brpc/pull/1527#issuecomment-899302263","issue_url":"https://api.github.com/repos/apache/brpc/issues/1527","id":899302263,"node_id":"IC_kwDOBhmkcs41mkN3","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-16T07:54:56Z","updated_at":"2021-08-16T07:54:56Z","author_association":"MEMBER","body":"值周报告是不是不在代码中记录比较好?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/899302263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/899665692","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-899665692","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":899665692,"node_id":"IC_kwDOBhmkcs41n88c","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-16T16:57:56Z","updated_at":"2021-08-16T16:57:56Z","author_association":"MEMBER","body":"@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/899665692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900010779","html_url":"https://github.com/apache/brpc/issues/823#issuecomment-900010779","issue_url":"https://api.github.com/repos/apache/brpc/issues/823","id":900010779,"node_id":"IC_kwDOBhmkcs41pRMb","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T05:47:00Z","updated_at":"2021-08-17T05:47:00Z","author_association":"CONTRIBUTOR","body":"> 因为rpc已经自带naming和LB功能，所以其实没必要再加一层LVS，可以直接把服务实例注册到某种naming系统（如consul/etcd）然后通过rpc访问\r\n\r\n但在 K8S 的场景下是会存在这个问题的，在使用内部 service 的情况下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900010779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900065910","html_url":"https://github.com/apache/brpc/issues/1530#issuecomment-900065910","issue_url":"https://api.github.com/repos/apache/brpc/issues/1530","id":900065910,"node_id":"IC_kwDOBhmkcs41pep2","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T07:34:35Z","updated_at":"2021-08-17T07:34:35Z","author_association":"CONTRIBUTOR","body":"[优雅退出](https://github.com/apache/incubator-brpc/blob/master/docs/cn/server.md#%E5%81%9C%E6%AD%A2)不能满足你的需求？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900065910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900069052","html_url":"https://github.com/apache/brpc/issues/1530#issuecomment-900069052","issue_url":"https://api.github.com/repos/apache/brpc/issues/1530","id":900069052,"node_id":"IC_kwDOBhmkcs41pfa8","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T07:40:10Z","updated_at":"2021-08-17T07:40:10Z","author_association":"CONTRIBUTOR","body":"> [优雅退出](https://github.com/apache/incubator-brpc/blob/master/docs/cn/server.md#%E5%81%9C%E6%AD%A2)不能满足你的需求？\r\n\r\n不能满足需求，我现在用的就是优雅退出。但因为 k8s 的 service 只能拿到一个 ip 地址，load balance 是由后面的 ipvs 来完成的，对 brpc client 来说只能看到一个 server，也就没法切换到别的 server 。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900069052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900093973","html_url":"https://github.com/apache/brpc/issues/1530#issuecomment-900093973","issue_url":"https://api.github.com/repos/apache/brpc/issues/1530","id":900093973,"node_id":"IC_kwDOBhmkcs41plgV","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T08:19:26Z","updated_at":"2021-08-17T08:19:26Z","author_association":"CONTRIBUTOR","body":"这个场景应该在LB层面加健康检查（比如通过HTTP协议访问/health路径）机制解决，brpc没法绕过LB去做这种支持，也不合理","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900093973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900138313","html_url":"https://github.com/apache/brpc/issues/1530#issuecomment-900138313","issue_url":"https://api.github.com/repos/apache/brpc/issues/1530","id":900138313,"node_id":"IC_kwDOBhmkcs41pwVJ","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T09:24:32Z","updated_at":"2021-08-17T09:24:32Z","author_association":"CONTRIBUTOR","body":"能有办法让 brpc 原生支持 k8s 的 service 么？例如支持 k8s://service-name 之类的形式","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900138313/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900570537","html_url":"https://github.com/apache/brpc/issues/1530#issuecomment-900570537","issue_url":"https://api.github.com/repos/apache/brpc/issues/1530","id":900570537,"node_id":"IC_kwDOBhmkcs41rZ2p","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T19:26:03Z","updated_at":"2021-08-17T19:26:03Z","author_association":"MEMBER","body":"目前还没有支持，欢迎内部实现以后给我们提PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900570537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900576060","html_url":"https://github.com/apache/brpc/issues/1523#issuecomment-900576060","issue_url":"https://api.github.com/repos/apache/brpc/issues/1523","id":900576060,"node_id":"IC_kwDOBhmkcs41rbM8","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-17T19:35:12Z","updated_at":"2021-08-17T19:35:12Z","author_association":"MEMBER","body":"bthread_stop目前没有办法满足么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/900576060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901557942","html_url":"https://github.com/apache/brpc/issues/1532#issuecomment-901557942","issue_url":"https://api.github.com/repos/apache/brpc/issues/1532","id":901557942,"node_id":"IC_kwDOBhmkcs41vK62","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T02:21:39Z","updated_at":"2021-08-19T02:21:39Z","author_association":"CONTRIBUTOR","body":"bthread只会被分发到worker线程执行。可以把你场景描述的更具体一点","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901557942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901565368","html_url":"https://github.com/apache/brpc/issues/1532#issuecomment-901565368","issue_url":"https://api.github.com/repos/apache/brpc/issues/1532","id":901565368,"node_id":"IC_kwDOBhmkcs41vMu4","user":{"login":"lfch","id":5698293,"node_id":"MDQ6VXNlcjU2OTgyOTM=","avatar_url":"https://avatars.githubusercontent.com/u/5698293?v=4","gravatar_id":"","url":"https://api.github.com/users/lfch","html_url":"https://github.com/lfch","followers_url":"https://api.github.com/users/lfch/followers","following_url":"https://api.github.com/users/lfch/following{/other_user}","gists_url":"https://api.github.com/users/lfch/gists{/gist_id}","starred_url":"https://api.github.com/users/lfch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lfch/subscriptions","organizations_url":"https://api.github.com/users/lfch/orgs","repos_url":"https://api.github.com/users/lfch/repos","events_url":"https://api.github.com/users/lfch/events{/privacy}","received_events_url":"https://api.github.com/users/lfch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T02:43:31Z","updated_at":"2021-08-19T02:43:31Z","author_association":"NONE","body":"server是一个异步IO的，会开启bthread功能，让接收到的请求直接在bthread中执行。执行过程中，会调用到tensorflow的Session::Run()函数。tensorflow内部有自己的pthread线程池，所以进入到Session::Run()函数之后，会进行并行的计算。我的疑问是server开启了bthread功能的场景下，此时tensorflow内部的并行用的pthread，还是bthread呢？ \r\n代码在https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/common_runtime/direct_session.cc  中 Status DirectSession::RunInternal()函数中。\r\n<img width=\"852\" alt=\"截屏2021-08-19 上午10 42 19\" src=\"https://user-images.githubusercontent.com/5698293/129999069-89678794-32d4-4573-b35a-9b27dc30c436.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901565368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901567909","html_url":"https://github.com/apache/brpc/issues/670#issuecomment-901567909","issue_url":"https://api.github.com/repos/apache/brpc/issues/670","id":901567909,"node_id":"IC_kwDOBhmkcs41vNWl","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T02:51:01Z","updated_at":"2021-08-19T02:51:01Z","author_association":"CONTRIBUTOR","body":"最近我们也遇到这个问题。全部在wait_task，添加的task却没有执行（通过日志判断是否执行）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901567909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901575216","html_url":"https://github.com/apache/brpc/issues/670#issuecomment-901575216","issue_url":"https://api.github.com/repos/apache/brpc/issues/670","id":901575216,"node_id":"IC_kwDOBhmkcs41vPIw","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T03:11:17Z","updated_at":"2021-08-19T03:12:43Z","author_association":"CONTRIBUTOR","body":"> 最近我们也遇到这个问题。全部在wait_task，添加的task却没有执行（通过日志判断是否执行）\r\n\r\n我们的用法是`braft::run_closure_in_bthread(&closure); closure.wait();` closure里面放了一个stl的mutex和condition_var，wait就是wait condition_var，run的时候去唤醒condition_var","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901575216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901791978","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-901791978","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":901791978,"node_id":"IC_kwDOBhmkcs41wEDq","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T10:17:20Z","updated_at":"2021-08-19T10:17:20Z","author_association":"MEMBER","body":"@jamesge @zyearn  辛苦看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901791978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901870043","html_url":"https://github.com/apache/brpc/issues/1532#issuecomment-901870043","issue_url":"https://api.github.com/repos/apache/brpc/issues/1532","id":901870043,"node_id":"IC_kwDOBhmkcs41wXHb","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T12:22:51Z","updated_at":"2021-08-19T12:22:51Z","author_association":"MEMBER","body":"session->Run()会进入tensorflow自己的线程池(和Device有关)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/901870043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902265498","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-902265498","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":902265498,"node_id":"IC_kwDOBhmkcs41x3qa","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T21:37:51Z","updated_at":"2021-08-19T21:37:51Z","author_association":"MEMBER","body":"嗯感谢反馈，这两天我们看一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902265498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902266705","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902266705","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902266705,"node_id":"IC_kwDOBhmkcs41x39R","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T21:40:21Z","updated_at":"2021-08-19T21:40:21Z","author_association":"MEMBER","body":"这个是为什么要删掉了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902266705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902268459","html_url":"https://github.com/apache/brpc/issues/1534#issuecomment-902268459","issue_url":"https://api.github.com/repos/apache/brpc/issues/1534","id":902268459,"node_id":"IC_kwDOBhmkcs41x4Yr","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T21:44:02Z","updated_at":"2021-08-19T21:44:02Z","author_association":"MEMBER","body":"@wwbmmm 伟冰，这个内部有相关开发吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902268459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902323908","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902323908","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902323908,"node_id":"IC_kwDOBhmkcs41yF7E","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-19T23:42:21Z","updated_at":"2021-08-19T23:42:21Z","author_association":"MEMBER","body":"because  we have removed gperftool dependency from the source\r\nso I think that we may need to update the doc also.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902323908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902351786","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-902351786","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":902351786,"node_id":"IC_kwDOBhmkcs41yMuq","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T00:59:51Z","updated_at":"2021-08-20T00:59:51Z","author_association":"MEMBER","body":"> 嗯感谢反馈，这两天我们看一下\n\n嗯嗯，Apache有个VirtualHost的功能，就是让一个端口，根据域名路由到不同服务","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902351786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902368971","html_url":"https://github.com/apache/brpc/issues/1534#issuecomment-902368971","issue_url":"https://api.github.com/repos/apache/brpc/issues/1534","id":902368971,"node_id":"IC_kwDOBhmkcs41yQ7L","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T01:50:49Z","updated_at":"2021-08-20T01:53:41Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 伟冰，这个内部有相关开发吗？\r\n\r\n有，但是这个对brpc框架的改动较大，目前还没想好应该如何合入社区\r\n目前内部也还在初步验证的阶段，待成熟之后再考虑开源吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902368971/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902384459","html_url":"https://github.com/apache/brpc/issues/1046#issuecomment-902384459","issue_url":"https://api.github.com/repos/apache/brpc/issues/1046","id":902384459,"node_id":"IC_kwDOBhmkcs41yUtL","user":{"login":"v1siuol","id":18160111,"node_id":"MDQ6VXNlcjE4MTYwMTEx","avatar_url":"https://avatars.githubusercontent.com/u/18160111?v=4","gravatar_id":"","url":"https://api.github.com/users/v1siuol","html_url":"https://github.com/v1siuol","followers_url":"https://api.github.com/users/v1siuol/followers","following_url":"https://api.github.com/users/v1siuol/following{/other_user}","gists_url":"https://api.github.com/users/v1siuol/gists{/gist_id}","starred_url":"https://api.github.com/users/v1siuol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v1siuol/subscriptions","organizations_url":"https://api.github.com/users/v1siuol/orgs","repos_url":"https://api.github.com/users/v1siuol/repos","events_url":"https://api.github.com/users/v1siuol/events{/privacy}","received_events_url":"https://api.github.com/users/v1siuol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T02:33:20Z","updated_at":"2021-08-20T02:33:20Z","author_association":"CONTRIBUTOR","body":"I can pick up this one, if still available :)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902384459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902416363","html_url":"https://github.com/apache/brpc/pull/1536#issuecomment-902416363","issue_url":"https://api.github.com/repos/apache/brpc/issues/1536","id":902416363,"node_id":"IC_kwDOBhmkcs41ycfr","user":{"login":"v1siuol","id":18160111,"node_id":"MDQ6VXNlcjE4MTYwMTEx","avatar_url":"https://avatars.githubusercontent.com/u/18160111?v=4","gravatar_id":"","url":"https://api.github.com/users/v1siuol","html_url":"https://github.com/v1siuol","followers_url":"https://api.github.com/users/v1siuol/followers","following_url":"https://api.github.com/users/v1siuol/following{/other_user}","gists_url":"https://api.github.com/users/v1siuol/gists{/gist_id}","starred_url":"https://api.github.com/users/v1siuol/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v1siuol/subscriptions","organizations_url":"https://api.github.com/users/v1siuol/orgs","repos_url":"https://api.github.com/users/v1siuol/repos","events_url":"https://api.github.com/users/v1siuol/events{/privacy}","received_events_url":"https://api.github.com/users/v1siuol/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T04:12:11Z","updated_at":"2021-08-20T04:12:11Z","author_association":"CONTRIBUTOR","body":"I take a snippet of this change and test it in git1.8, which looks good to me.\r\n```\r\n[root@a2d83421c3b6 abstract_data_type]# git --version\r\ngit version 1.8.3.1\r\n[root@a2d83421c3b6 abstract_data_type]# committer_date=($(git log -1 --format=\"%ci\" 2> /dev/null))\r\n[root@a2d83421c3b6 abstract_data_type]# committer_date=\"${committer_date[0]}T${committer_date[1]}${committer_date[2]:0:3}:${committer_date[2]:3:2}\"\r\n[root@a2d83421c3b6 abstract_data_type]# echo $committer_date\r\n2020-10-19T12:03:03-04:00\r\n```\r\n\r\nAnd it won't break git2.x after the change.\r\n```\r\n$ ./tools/get_brpc_revision.sh .\r\n0.9.7\\|fix_get_brpc_revision\\|74db116c\\|2021-08-17T21:28:24+02:00\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902416363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902647736","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902647736","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902647736,"node_id":"IC_kwDOBhmkcs41zU-4","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T12:11:47Z","updated_at":"2021-08-20T12:11:47Z","author_association":"MEMBER","body":"But without gperftools, how can users do cpu/heap profiling? Do we remove this because of license issue?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902647736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902675036","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902675036","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902675036,"node_id":"IC_kwDOBhmkcs41zbpc","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T12:59:28Z","updated_at":"2021-08-20T12:59:28Z","author_association":"MEMBER","body":"yes, you remove it because of license issue, \r\ndo you still remember it?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902675036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902739761","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902739761","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902739761,"node_id":"IC_kwDOBhmkcs41zrcx","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T14:40:23Z","updated_at":"2021-08-20T14:40:23Z","author_association":"MEMBER","body":"No I don't remember :) I can't find any context in the commit history too: https://github.com/apache/incubator-brpc/commits/master/LICENSE.\r\n\r\nWe still use those files, for example src/butil/gperftools_profiler.h, and their license is listed here https://github.com/apache/incubator-brpc/blob/master/LICENSE#L760, which is 3-clause BSD and it's apache compatible. \r\nThere may be some misunderstandings here.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902739761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902939357","html_url":"https://github.com/apache/brpc/issues/1534#issuecomment-902939357","issue_url":"https://api.github.com/repos/apache/brpc/issues/1534","id":902939357,"node_id":"IC_kwDOBhmkcs410cLd","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T20:27:25Z","updated_at":"2021-08-20T20:27:25Z","author_association":"MEMBER","body":"> > @wwbmmm 伟冰，这个内部有相关开发吗？\r\n> \r\n> 有，但是这个对brpc框架的改动较大，目前还没想好应该如何合入社区\r\n> 目前内部也还在初步验证的阶段，待成熟之后再考虑开源吧\r\n\r\n好的，谢谢同步","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902939357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902995411","html_url":"https://github.com/apache/brpc/pull/1535#issuecomment-902995411","issue_url":"https://api.github.com/repos/apache/brpc/issues/1535","id":902995411,"node_id":"IC_kwDOBhmkcs410p3T","user":{"login":"tanzhongyi003","id":20179982,"node_id":"MDQ6VXNlcjIwMTc5OTgy","avatar_url":"https://avatars.githubusercontent.com/u/20179982?v=4","gravatar_id":"","url":"https://api.github.com/users/tanzhongyi003","html_url":"https://github.com/tanzhongyi003","followers_url":"https://api.github.com/users/tanzhongyi003/followers","following_url":"https://api.github.com/users/tanzhongyi003/following{/other_user}","gists_url":"https://api.github.com/users/tanzhongyi003/gists{/gist_id}","starred_url":"https://api.github.com/users/tanzhongyi003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanzhongyi003/subscriptions","organizations_url":"https://api.github.com/users/tanzhongyi003/orgs","repos_url":"https://api.github.com/users/tanzhongyi003/repos","events_url":"https://api.github.com/users/tanzhongyi003/events{/privacy}","received_events_url":"https://api.github.com/users/tanzhongyi003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-20T22:50:13Z","updated_at":"2021-08-20T22:50:13Z","author_association":"MEMBER","body":"ok, maybe you are right, I will close it now.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/902995411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903105908","html_url":"https://github.com/apache/brpc/pull/1538#issuecomment-903105908","issue_url":"https://api.github.com/repos/apache/brpc/issues/1538","id":903105908,"node_id":"IC_kwDOBhmkcs411E10","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-21T12:00:05Z","updated_at":"2021-08-21T12:00:05Z","author_association":"MEMBER","body":"这个里面是不是应该填1.0.0？因为等过投票通过以后，rc02直接变成了stable release，如果rc02通过，再修改的话成1.0.0的话，这里会有个窗口使得投票版本和stable release不一样 @lorinlee @tanzhongyi003 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903105908/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903211415","html_url":"https://github.com/apache/brpc/issues/1489#issuecomment-903211415","issue_url":"https://api.github.com/repos/apache/brpc/issues/1489","id":903211415,"node_id":"IC_kwDOBhmkcs411emX","user":{"login":"ZeroLiu2018","id":34687627,"node_id":"MDQ6VXNlcjM0Njg3NjI3","avatar_url":"https://avatars.githubusercontent.com/u/34687627?v=4","gravatar_id":"","url":"https://api.github.com/users/ZeroLiu2018","html_url":"https://github.com/ZeroLiu2018","followers_url":"https://api.github.com/users/ZeroLiu2018/followers","following_url":"https://api.github.com/users/ZeroLiu2018/following{/other_user}","gists_url":"https://api.github.com/users/ZeroLiu2018/gists{/gist_id}","starred_url":"https://api.github.com/users/ZeroLiu2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ZeroLiu2018/subscriptions","organizations_url":"https://api.github.com/users/ZeroLiu2018/orgs","repos_url":"https://api.github.com/users/ZeroLiu2018/repos","events_url":"https://api.github.com/users/ZeroLiu2018/events{/privacy}","received_events_url":"https://api.github.com/users/ZeroLiu2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T04:24:18Z","updated_at":"2021-08-22T04:24:18Z","author_association":"NONE","body":"除了楼上说的， th1 如果有 bthread mutex 之类的，也可能中途切换成其他 th2 的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903211415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903212675","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-903212675","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":903212675,"node_id":"IC_kwDOBhmkcs411e6D","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T04:44:35Z","updated_at":"2021-08-22T05:30:04Z","author_association":"MEMBER","body":"加上了HTTP header的dump功能，借助已有的MakeRawHttpRequest函数，service和method都会存储下来，不再单独给sample->meta中的对应字段赋值。\r\n\r\nrpc_replay回放的时候，用ParseFromIOBuf解析该dump的内容，可以自动获取service和method。\r\n另外做了Host字段的清空操作，因为允许录制ServerA的流量，回放给ServerB。如果带着原先的Host，可能引发不必要的问题，比如ServerB是一个Web Apache，会根据Host路由。\r\n \r\n已经测试过，可以成功录制和回放。\r\n@zyearn @jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903212675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903254369","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-903254369","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":903254369,"node_id":"IC_kwDOBhmkcs411pFh","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T11:31:01Z","updated_at":"2021-08-22T11:31:01Z","author_association":"MEMBER","body":"看起来应该是你系统里面编译的protobuf和编译brpc时ABI不匹配（g++版本问题）\r\n可以在你的机器上用protobuf源码重新编译一份protobuf放到默认的路径上，覆盖掉旧版libprotobuf.so。\r\n\r\n或者给brpc的Makefile中的CPPFLAGS增加`-D_GLIBCXX_USE_CXX11_ABI=0` 试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903254369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903257185","html_url":"https://github.com/apache/brpc/issues/1528#issuecomment-903257185","issue_url":"https://api.github.com/repos/apache/brpc/issues/1528","id":903257185,"node_id":"IC_kwDOBhmkcs411pxh","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T11:54:26Z","updated_at":"2021-08-22T11:56:01Z","author_association":"MEMBER","body":"`cntl->http_request().method()` 判断是哪个HTTP的method，然后调用你不同的函数（把不同的method的处理逻辑封装成单独的函数）就行吧。\r\n\r\n\r\n接口这样定义：\r\n```proto\r\nservice MyService {\r\n  rpc item(HttpRequest) returns (HttpResponse);\r\n};\r\n```\r\n\r\n你的Service类：\r\n```cpp\r\nclass MyServiceImpl : public MyService {\r\npublic:\r\n    MyServiceImpl() {};\r\n    virtual ~MyServiceImpl() {};\r\n    void item(google::protobuf::RpcController* cntl_base,\r\n               const HttpRequest*,\r\n               HttpResponse*,\r\n               google::protobuf::Closure* done) {\r\n        brpc::ClosureGuard done_guard(done);\r\n        brpc::Controller* cntl =\r\n            static_cast<brpc::Controller*>(cntl_base);\r\n\r\n        auto method = cntl->http_request().method();\r\n        if ( method == HTTP_METHOD_POST) {\r\n             ....\r\n        } else if (method == HTTP_METHOD_DELETE) {\r\n            ....\r\n        } else if (method == HTTP_METHOD_PUT) {\r\n            ....\r\n        } else if (method == HTTP_METHOD_GET) {\r\n           ....\r\n        }\r\n    }\r\n````\r\n\r\n如果你想路径名是`/item`  而不是`/MyService/item`\r\n\r\n那么brpc也支持：\r\n```cpp\r\n    MyServiceImpl svc;\r\n    if (server.AddService(&svc,\r\n                          brpc::SERVER_DOESNT_OWN_SERVICE,\r\n                          \"/item   => item\") != 0) {\r\n        LOG(ERROR) << \"Fail to add queue_svc\";\r\n        return -1;\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903257185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903285644","html_url":"https://github.com/apache/brpc/issues/577#issuecomment-903285644","issue_url":"https://api.github.com/repos/apache/brpc/issues/577","id":903285644,"node_id":"IC_kwDOBhmkcs411wuM","user":{"login":"pursuemoon","id":62545762,"node_id":"MDQ6VXNlcjYyNTQ1NzYy","avatar_url":"https://avatars.githubusercontent.com/u/62545762?v=4","gravatar_id":"","url":"https://api.github.com/users/pursuemoon","html_url":"https://github.com/pursuemoon","followers_url":"https://api.github.com/users/pursuemoon/followers","following_url":"https://api.github.com/users/pursuemoon/following{/other_user}","gists_url":"https://api.github.com/users/pursuemoon/gists{/gist_id}","starred_url":"https://api.github.com/users/pursuemoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pursuemoon/subscriptions","organizations_url":"https://api.github.com/users/pursuemoon/orgs","repos_url":"https://api.github.com/users/pursuemoon/repos","events_url":"https://api.github.com/users/pursuemoon/events{/privacy}","received_events_url":"https://api.github.com/users/pursuemoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-22T15:24:10Z","updated_at":"2021-08-22T15:24:10Z","author_association":"NONE","body":"感谢，这是什么原理呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903285644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903394634","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-903394634","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":903394634,"node_id":"IC_kwDOBhmkcs412LVK","user":{"login":"darionyaphet","id":4414314,"node_id":"MDQ6VXNlcjQ0MTQzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4414314?v=4","gravatar_id":"","url":"https://api.github.com/users/darionyaphet","html_url":"https://github.com/darionyaphet","followers_url":"https://api.github.com/users/darionyaphet/followers","following_url":"https://api.github.com/users/darionyaphet/following{/other_user}","gists_url":"https://api.github.com/users/darionyaphet/gists{/gist_id}","starred_url":"https://api.github.com/users/darionyaphet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darionyaphet/subscriptions","organizations_url":"https://api.github.com/users/darionyaphet/orgs","repos_url":"https://api.github.com/users/darionyaphet/repos","events_url":"https://api.github.com/users/darionyaphet/events{/privacy}","received_events_url":"https://api.github.com/users/darionyaphet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T02:23:31Z","updated_at":"2021-08-23T02:23:31Z","author_association":"CONTRIBUTOR","body":"@guodongxiaren 请问 您这边protobuf 版本是？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903394634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903403303","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-903403303","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":903403303,"node_id":"IC_kwDOBhmkcs412Ncn","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T02:57:33Z","updated_at":"2021-08-23T02:57:33Z","author_association":"MEMBER","body":"2和3我都和brpc联编过。你这个不是protobuf的版本问题，是编译protobuf的g++版本问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903403303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903417690","html_url":"https://github.com/apache/brpc/issues/1528#issuecomment-903417690","issue_url":"https://api.github.com/repos/apache/brpc/issues/1528","id":903417690,"node_id":"IC_kwDOBhmkcs412Q9a","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T03:40:47Z","updated_at":"2021-08-23T03:40:47Z","author_association":"MEMBER","body":"这样实现当然是没什么问题的, 但是感觉不如加到 `restful_mapping` 里优雅, `restful_mapping` 只映射 `path` 感觉是不太完整的.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903417690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903419520","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-903419520","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":903419520,"node_id":"IC_kwDOBhmkcs412RaA","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T03:47:49Z","updated_at":"2021-08-23T03:48:20Z","author_association":"MEMBER","body":"可能和 #1487 重复.\r\n\r\nissue 模板中有设置需要提供的各种版本信息, 什么都不提供的情况下只抛个问题, 这样不是很好.\r\n\r\nprotobuf  2.4+ 应该都是没有问题的.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903419520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903647687","html_url":"https://github.com/apache/brpc/pull/1503#issuecomment-903647687","issue_url":"https://api.github.com/repos/apache/brpc/issues/1503","id":903647687,"node_id":"IC_kwDOBhmkcs413JHH","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-23T10:35:12Z","updated_at":"2021-08-23T10:35:12Z","author_association":"MEMBER","body":"@TousakaRin ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/903647687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904276478","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-904276478","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":904276478,"node_id":"IC_kwDOBhmkcs415in-","user":{"login":"darionyaphet","id":4414314,"node_id":"MDQ6VXNlcjQ0MTQzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4414314?v=4","gravatar_id":"","url":"https://api.github.com/users/darionyaphet","html_url":"https://github.com/darionyaphet","followers_url":"https://api.github.com/users/darionyaphet/followers","following_url":"https://api.github.com/users/darionyaphet/following{/other_user}","gists_url":"https://api.github.com/users/darionyaphet/gists{/gist_id}","starred_url":"https://api.github.com/users/darionyaphet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darionyaphet/subscriptions","organizations_url":"https://api.github.com/users/darionyaphet/orgs","repos_url":"https://api.github.com/users/darionyaphet/repos","events_url":"https://api.github.com/users/darionyaphet/events{/privacy}","received_events_url":"https://api.github.com/users/darionyaphet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T02:41:03Z","updated_at":"2021-08-24T02:45:19Z","author_association":"CONTRIBUTOR","body":"> 2和3我都和brpc联编过。你这个不是protobuf的版本问题，是编译protobuf的g++版本问题\r\n\r\n您好 我这边G++ 版本是 `g++ (GCC) 9.4.0`\r\n\r\n\r\n我在 Makefile 的`CPPFLAGS`中增加了 `-D_GLIBCXX_USE_CXX11_ABI=0` 重新make 还是存在上面的问题  谢谢\r\n\r\n\r\n\r\n```\r\nCPPFLAGS+=-DBTHREAD_USE_FAST_PTHREAD_MUTEX -D_GLIBCXX_USE_CXX11_ABI=0 -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DNDEBUG -DBRPC_REVISION=\\\"$(shell ./tools/get_brpc_revision.sh .)\\\"\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904276478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904295936","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-904295936","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":904295936,"node_id":"IC_kwDOBhmkcs415nYA","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T03:35:50Z","updated_at":"2021-08-24T03:35:50Z","author_association":"MEMBER","body":"protobuf是怎么安装的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904295936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904300296","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-904300296","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":904300296,"node_id":"IC_kwDOBhmkcs415ocI","user":{"login":"darionyaphet","id":4414314,"node_id":"MDQ6VXNlcjQ0MTQzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4414314?v=4","gravatar_id":"","url":"https://api.github.com/users/darionyaphet","html_url":"https://github.com/darionyaphet","followers_url":"https://api.github.com/users/darionyaphet/followers","following_url":"https://api.github.com/users/darionyaphet/following{/other_user}","gists_url":"https://api.github.com/users/darionyaphet/gists{/gist_id}","starred_url":"https://api.github.com/users/darionyaphet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darionyaphet/subscriptions","organizations_url":"https://api.github.com/users/darionyaphet/orgs","repos_url":"https://api.github.com/users/darionyaphet/repos","events_url":"https://api.github.com/users/darionyaphet/events{/privacy}","received_events_url":"https://api.github.com/users/darionyaphet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T03:51:04Z","updated_at":"2021-08-24T03:51:04Z","author_association":"CONTRIBUTOR","body":"> protobuf是怎么安装的\r\n\r\n下载源码编译安装的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904300296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904312309","html_url":"https://github.com/apache/brpc/issues/1537#issuecomment-904312309","issue_url":"https://api.github.com/repos/apache/brpc/issues/1537","id":904312309,"node_id":"IC_kwDOBhmkcs415rX1","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-24T04:23:36Z","updated_at":"2021-08-27T12:58:10Z","author_association":"MEMBER","body":"```\r\nstrings libprotobuf.so|grep Print\r\n```\r\n看能不能搜到符号，然后把搜到的符号用c++fit命令解析一下。看看参数类型有没有cxx11的命名空间","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/904312309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/905427750","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-905427750","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":905427750,"node_id":"IC_kwDOBhmkcs4197sm","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-25T11:48:10Z","updated_at":"2021-08-25T11:48:10Z","author_association":"MEMBER","body":"@zyearn 请问看了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/905427750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906889000","html_url":"https://github.com/apache/brpc/issues/1540#issuecomment-906889000","issue_url":"https://api.github.com/repos/apache/brpc/issues/1540","id":906889000,"node_id":"IC_kwDOBhmkcs42Dgco","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:04:50Z","updated_at":"2021-08-27T03:04:50Z","author_association":"CONTRIBUTOR","body":"如果差异只有pb的版本，那性能主要的差异也是pb本身吧。可以分别画个火焰图，做个差分火焰图看看cpu diff在哪里","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906889000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906890052","html_url":"https://github.com/apache/brpc/pull/1536#issuecomment-906890052","issue_url":"https://api.github.com/repos/apache/brpc/issues/1536","id":906890052,"node_id":"IC_kwDOBhmkcs42DgtE","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:07:39Z","updated_at":"2021-08-27T03:07:39Z","author_association":"CONTRIBUTOR","body":"thanks, @v1siuol ！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906890052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906892955","html_url":"https://github.com/apache/brpc/pull/1499#issuecomment-906892955","issue_url":"https://api.github.com/repos/apache/brpc/issues/1499","id":906892955,"node_id":"IC_kwDOBhmkcs42Dhab","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:14:30Z","updated_at":"2021-08-27T03:14:30Z","author_association":"CONTRIBUTOR","body":"> restarted\r\n\r\n辛苦重新触发下吧 @zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906892955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906896650","html_url":"https://github.com/apache/brpc/pull/1499#issuecomment-906896650","issue_url":"https://api.github.com/repos/apache/brpc/issues/1499","id":906896650,"node_id":"IC_kwDOBhmkcs42DiUK","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:26:45Z","updated_at":"2021-08-27T03:26:45Z","author_association":"CONTRIBUTOR","body":"> > restarted\r\n> \r\n> 应该是单测不稳定。\r\n\r\n@lorinlee 也帮看下呗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906896650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906898534","html_url":"https://github.com/apache/brpc/pull/1483#issuecomment-906898534","issue_url":"https://api.github.com/repos/apache/brpc/issues/1483","id":906898534,"node_id":"IC_kwDOBhmkcs42Dixm","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T03:33:13Z","updated_at":"2021-09-01T06:07:48Z","author_association":"CONTRIBUTOR","body":"> Related issue: #1482\r\n> 目前brpcz中只有method级别的eps(error_per_second)，本PR实现了server级别的eps。\r\n> 其实server级别的eps对业务来说更为重要。\r\n\r\n@lorinlee @zyearn @cdjingit @TousakaRin 辛苦抽时间帮review下，thanks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/906898534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907301176","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907301176","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907301176,"node_id":"IC_kwDOBhmkcs42FFE4","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T15:51:54Z","updated_at":"2021-08-27T15:51:54Z","author_association":"MEMBER","body":"@zyearn 修改了，但是CI的UT测试不稳定。在我没涉及的地方出问题，而且每次不一样。。\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907301176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907601489","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907601489","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907601489,"node_id":"IC_kwDOBhmkcs42GOZR","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T09:40:38Z","updated_at":"2021-08-28T09:40:53Z","author_association":"MEMBER","body":"@zyearn  已经根据反馈修改了代码。有几个地方和你确认一下。\r\n1. Init用命名服务初始化的重载函数中，我还是判断了HTTP协议，因为如果是`file://` 或者`consul://` ，那么参数中的ns_url进行ParseHostname无意义。在InitSingle中没有判断协议了。\r\n2. 当前的实现如果初始化的URL中是机器IP，调用ParseHostname（间接调用hostname2ip）也会解析成功，最后把ip存到 _hostname中，不知道是否需要额外规避掉这种情况，让 _hostname只存储主机名或者网络域名？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907601489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907623007","html_url":"https://github.com/apache/brpc/pull/1539#issuecomment-907623007","issue_url":"https://api.github.com/repos/apache/brpc/issues/1539","id":907623007,"node_id":"IC_kwDOBhmkcs42GTpf","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T12:57:25Z","updated_at":"2021-08-28T12:57:25Z","author_association":"MEMBER","body":"后续是不是把oncaller的github id也写上去，方便社区同学@","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907623007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907625668","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907625668","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907625668,"node_id":"IC_kwDOBhmkcs42GUTE","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T13:21:06Z","updated_at":"2021-08-28T13:21:14Z","author_association":"MEMBER","body":"> @zyearn 已经根据反馈修改了代码。有几个地方和你确认一下。\r\n> \r\n> 1. Init用命名服务初始化的重载函数中，我还是判断了HTTP协议，因为如果是`file://` 或者`consul://` ，那么参数中的ns_url进行ParseHostname无意义。在InitSingle中没有判断协议了。\r\n> 2. 当前的实现如果初始化的URL中是机器IP，调用ParseHostname（间接调用hostname2ip）也会解析成功，最后把ip存到 _hostname中，不知道是否需要额外规避掉这种情况，让 _hostname只存储主机名或者网络域名？\r\n\r\n1. 这样的话两处代码就不统一了。另外_hostname这个名字在channel中改成_service_name是不是更通用一些(https://github.com/apache/incubator-brpc/blob/master/src/brpc/naming_service.h#L53 )？然后在HTTP协议中把_service_name作为hostname，在别的协议中可能担任另外的作用（也可以不用，例如你说的file/consul），这样似乎就不用判断协议了。\r\n2. 如果按照1改成_service_name的话，就不存在这个问题了，因为这里预期存的是用户的输入。域名就存域名，ip的话就存ip\r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907625668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907626621","html_url":"https://github.com/apache/brpc/pull/1539#issuecomment-907626621","issue_url":"https://api.github.com/repos/apache/brpc/issues/1539","id":907626621,"node_id":"IC_kwDOBhmkcs42GUh9","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T13:29:42Z","updated_at":"2021-08-28T13:29:42Z","author_association":"MEMBER","body":"https://github.com/apache/incubator-brpc/pull/1542","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907626621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907637593","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907637593","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907637593,"node_id":"IC_kwDOBhmkcs42GXNZ","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T14:54:47Z","updated_at":"2021-08-28T14:54:47Z","author_association":"MEMBER","body":"@zyearn 改成_service_name了，也取消了协议的判断。另外给 src/brpc/details/http_message.cpp 中从uri.host()给Header补Host字段的逻辑，加上了补port。\r\n\r\n因为我这个逻辑走到这里，uri.port()还是 -1 不会被 追加到Host字段中（Host只有域名）。当然Host字段中的port在Http协议中也不是必须的，不过我PR里之前修改的文档描述中写了，对方收到的Host会包含端口。所以我这里和我的文档做一下对齐。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907637593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907648462","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907648462","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907648462,"node_id":"IC_kwDOBhmkcs42GZ3O","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T16:15:28Z","updated_at":"2021-08-28T16:15:28Z","author_association":"MEMBER","body":"> 因为我这个逻辑走到这里，uri.port()还是 -1 不会被 追加到Host字段中（Host只有域名）。当然Host字段中的port在Http协议中也不是必须的，不过我PR里之前修改的文档描述中写了，对方收到的Host会包含端口。所以我这里和我的文档做一下对齐。\r\n\r\nHi，这个改动打破backward compatibility了，不知道会有什么影响，另外文档里也说“若用户没有填且URL中包含host，比如http://www.foo.com/path，则http request中会包含\"Host: www.foo.com\"，我们最好可以不改这个。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907648462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907659557","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907659557","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907659557,"node_id":"IC_kwDOBhmkcs42Gckl","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T17:32:44Z","updated_at":"2021-08-28T18:35:25Z","author_association":"MEMBER","body":"@zyearn 哦，那个if 我忘了合并，明天我改完，你再merge吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907659557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907675660","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907675660","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907675660,"node_id":"IC_kwDOBhmkcs42GggM","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T19:12:32Z","updated_at":"2021-08-28T19:12:32Z","author_association":"MEMBER","body":"> @zyearn 哦，那个if 我忘了合并，明天我改完，你再merge吧。\r\n\r\nOkay","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907675660/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907715418","html_url":"https://github.com/apache/brpc/issues/1541#issuecomment-907715418","issue_url":"https://api.github.com/repos/apache/brpc/issues/1541","id":907715418,"node_id":"IC_kwDOBhmkcs42GqNa","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T01:52:22Z","updated_at":"2021-08-29T01:52:22Z","author_association":"CONTRIBUTOR","body":"目前不支持，请问是什么场景需要呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907715418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907718904","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907718904","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907718904,"node_id":"IC_kwDOBhmkcs42GrD4","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T02:32:20Z","updated_at":"2021-08-29T02:32:20Z","author_association":"MEMBER","body":"@zyearn 再看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907718904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907769033","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-907769033","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":907769033,"node_id":"IC_kwDOBhmkcs42G3TJ","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T10:41:16Z","updated_at":"2021-08-29T10:41:16Z","author_association":"MEMBER","body":"@zyearn 有空看下，CI也过了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/907769033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/908047409","html_url":"https://github.com/apache/brpc/pull/1529#issuecomment-908047409","issue_url":"https://api.github.com/repos/apache/brpc/issues/1529","id":908047409,"node_id":"IC_kwDOBhmkcs42H7Qx","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T05:45:55Z","updated_at":"2021-08-30T05:45:55Z","author_association":"MEMBER","body":"@zyearn 你的评论我回复了。看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/908047409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/908242283","html_url":"https://github.com/apache/brpc/issues/1513#issuecomment-908242283","issue_url":"https://api.github.com/repos/apache/brpc/issues/1513","id":908242283,"node_id":"IC_kwDOBhmkcs42Iq1r","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T10:52:04Z","updated_at":"2021-08-30T10:52:04Z","author_association":"CONTRIBUTOR","body":"你遇到的业务场景是什么样子的？ 并发度过小会丧失框架的处理能力，也许有更合适的方案解决你遇到的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/908242283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]