[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653559287","html_url":"https://github.com/apache/iceberg/pull/1154#issuecomment-653559287","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1154","id":653559287,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzU1OTI4Nw==","user":{"login":"massdosage","id":29457,"node_id":"MDQ6VXNlcjI5NDU3","avatar_url":"https://avatars.githubusercontent.com/u/29457?v=4","gravatar_id":"","url":"https://api.github.com/users/massdosage","html_url":"https://github.com/massdosage","followers_url":"https://api.github.com/users/massdosage/followers","following_url":"https://api.github.com/users/massdosage/following{/other_user}","gists_url":"https://api.github.com/users/massdosage/gists{/gist_id}","starred_url":"https://api.github.com/users/massdosage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/massdosage/subscriptions","organizations_url":"https://api.github.com/users/massdosage/orgs","repos_url":"https://api.github.com/users/massdosage/repos","events_url":"https://api.github.com/users/massdosage/events{/privacy}","received_events_url":"https://api.github.com/users/massdosage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T13:53:17Z","updated_at":"2020-07-03T13:53:17Z","author_association":"CONTRIBUTOR","body":"OK, I reverted all the usages except:\r\n\r\n* a few tests where I think it's alright to move over to `UncheckedIOException` since they aren't part of the API\r\n* the `mr` package since this is new and I think among us we're OK with dealing with this change","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653559287/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653602970","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653602970","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653602970,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYwMjk3MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T15:45:40Z","updated_at":"2020-07-03T15:45:40Z","author_association":"CONTRIBUTOR","body":"@chenjunjiedada, what do you plan to change?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653602970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653611751","html_url":"https://github.com/apache/iceberg/pull/1153#issuecomment-653611751","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1153","id":653611751,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxMTc1MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:14:21Z","updated_at":"2020-07-03T16:14:21Z","author_association":"CONTRIBUTOR","body":"Looks good, I'll merge this. Thanks @openinx!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653611751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653612452","html_url":"https://github.com/apache/iceberg/pull/1154#issuecomment-653612452","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1154","id":653612452,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxMjQ1Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:16:55Z","updated_at":"2020-07-03T16:17:21Z","author_association":"CONTRIBUTOR","body":"Looks good to me. Thanks for fixing this, @massdosage! I'll merge this when tests pass.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653612452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653614791","html_url":"https://github.com/apache/iceberg/pull/1151#issuecomment-653614791","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1151","id":653614791,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxNDc5MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:25:09Z","updated_at":"2020-07-03T16:25:09Z","author_association":"CONTRIBUTOR","body":"Thanks for the update, @zhangdove! I've done a little editing as well to combine both examples into a single scala code block with comments to distinguish between the cases. I think that makes it a bit easier to follow the page.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653614791/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653615555","html_url":"https://github.com/apache/iceberg/pull/1158#issuecomment-653615555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1158","id":653615555,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxNTU1NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:28:00Z","updated_at":"2020-07-03T16:28:00Z","author_association":"CONTRIBUTOR","body":"@shardulm94 and @rdsr, could you help review this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653615555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653616737","html_url":"https://github.com/apache/iceberg/pull/1158#issuecomment-653616737","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1158","id":653616737,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxNjczNw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:32:34Z","updated_at":"2020-07-03T16:32:34Z","author_association":"CONTRIBUTOR","body":"I'll have a look this week, thks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653616737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653619954","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653619954","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653619954,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxOTk1NA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:44:40Z","updated_at":"2020-07-03T16:55:27Z","author_association":"CONTRIBUTOR","body":"I think there's some confusion in how we name things. Reader/writer funcs in IcebergGenerics for ORC and Parquet are called `OrcGeneric[Reader|Writer]` and `GenericParquet[Reader|Writer]`, whereas for Avro they are called `Data[Reader|Writer]` . On top of that `GenericAvro[Reader|Writer] classes are internal and not used by IcebergGenerics","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653619954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653620001","html_url":"https://github.com/apache/iceberg/pull/1161#issuecomment-653620001","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1161","id":653620001,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYyMDAwMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:44:50Z","updated_at":"2020-07-03T16:44:50Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @zhangdove. I think you have the solution right. I'd just like for the test to be a bit cleaner.\r\n\r\nFYI @aokolnychyi.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653620001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653620272","html_url":"https://github.com/apache/iceberg/pull/1154#issuecomment-653620272","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1154","id":653620272,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYyMDI3Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:46:00Z","updated_at":"2020-07-03T16:46:00Z","author_association":"CONTRIBUTOR","body":"Tests are passing, but the status sync to GitHub is flaky. I'll merge this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653620272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653621430","html_url":"https://github.com/apache/iceberg/issues/1160#issuecomment-653621430","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1160","id":653621430,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYyMTQzMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:50:29Z","updated_at":"2020-07-03T16:50:29Z","author_association":"CONTRIBUTOR","body":"To summarize the fix from the PR, the issue is that a table loaded by HadoopCatalog reports a table name rather than a location. When we try to use the table name to load a metadata table from the Spark 2.4 IcebergSource, it uses the HiveCatalog instead of a HadoopCatalog (because the HiveCatalog is configured, HadoopCatalog is not). The fix is to convert tables loaded by a Hadoop catalog (name starting with `hadoop.`) to paths so that HadoopTables is used to load the metadata.\r\n\r\nWe should also consider adding configuration for the IcebergSource. Maybe we could configure it to use a HadoopCatalog.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653621430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653621848","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653621848","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653621848,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYyMTg0OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:52:05Z","updated_at":"2020-07-03T16:52:05Z","author_association":"CONTRIBUTOR","body":"@rdsr, I agree. The naming should definitely be fixed because we're inconsistent. At least the `ParquetAvroWriter` makes sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653621848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653702927","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653702927","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653702927,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzcwMjkyNw==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T00:58:02Z","updated_at":"2020-07-04T00:58:02Z","author_association":"COLLABORATOR","body":"@openinx and I had a discussion yesterday. Basically, we think it needs to refactor two Avro readers/writers into one base Avro reader/writer, and then has two different versions on iceberg-core and iceberg-generic just like what #1162 does. Also, the `DataReader/Writer` are in iceberg-core, I 'm thinking whether we could move that into iceberg-data module.\r\n\r\nAnother thing is to build a reader uses the generics data model so as to replace `IndexedRecord` interface of `Datafile` and `ManifestFile` with `Record` as you describe above.\r\n\r\nFor naming, so do we want to use the pattern `{target file format} + {data model} + reader/writer`?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653702927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653705475","html_url":"https://github.com/apache/iceberg/issues/1088#issuecomment-653705475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1088","id":653705475,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzcwNTQ3NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T01:29:16Z","updated_at":"2020-07-04T01:29:16Z","author_association":"CONTRIBUTOR","body":"This was completed in #1126. Thanks @raptond!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653705475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653732552","html_url":"https://github.com/apache/iceberg/pull/1161#issuecomment-653732552","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1161","id":653732552,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzczMjU1Mg==","user":{"login":"zhangdove","id":25578853,"node_id":"MDQ6VXNlcjI1NTc4ODUz","avatar_url":"https://avatars.githubusercontent.com/u/25578853?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangdove","html_url":"https://github.com/zhangdove","followers_url":"https://api.github.com/users/zhangdove/followers","following_url":"https://api.github.com/users/zhangdove/following{/other_user}","gists_url":"https://api.github.com/users/zhangdove/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangdove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangdove/subscriptions","organizations_url":"https://api.github.com/users/zhangdove/orgs","repos_url":"https://api.github.com/users/zhangdove/repos","events_url":"https://api.github.com/users/zhangdove/events{/privacy}","received_events_url":"https://api.github.com/users/zhangdove/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T07:17:27Z","updated_at":"2020-07-04T07:17:27Z","author_association":"CONTRIBUTOR","body":"Would you mind going through it again at your convenience? @rdblue \r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653732552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653816853","html_url":"https://github.com/apache/iceberg/issues/360#issuecomment-653816853","issue_url":"https://api.github.com/repos/apache/iceberg/issues/360","id":653816853,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgxNjg1Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T21:57:30Z","updated_at":"2020-07-04T21:57:30Z","author_association":"CONTRIBUTOR","body":"@openinx, I agree with the guarantees that you propose for the reconstructed CDC stream. It sounds like the first solution, with mixed equality and position deletes is probably the design we should use since it will have good read performance and good write performance, with the cost being the ID to position map we need while a data file is open.\r\n\r\nFor `UPSERT`, I think the main difference is that we don't have the deleted column data, so the stream provides a slightly different guarantee when it is replayed. I don't think that we need to keep track of the primary key column in the position delete file. Isn't that table-level configuration that won't change across data files?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653816853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653817409","html_url":"https://github.com/apache/iceberg/pull/1161#issuecomment-653817409","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1161","id":653817409,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgxNzQwOQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T22:04:42Z","updated_at":"2020-07-04T22:04:42Z","author_association":"CONTRIBUTOR","body":"Looks almost there. Just one more thing to fix and the comment to update. Thanks for fixing this, @zhangdove!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653817409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653824451","html_url":"https://github.com/apache/iceberg/pull/1046#issuecomment-653824451","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1046","id":653824451,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgyNDQ1MQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-04T23:58:47Z","updated_at":"2020-07-04T23:58:47Z","author_association":"CONTRIBUTOR","body":"Since there hasn't been any further progress on this, I'm going to close it. Feel free to reopen it if you'd like to continue working on a read path for existing data files with union types. I don't think that it is likely that we would make changes that allow writing data with unions, though.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653824451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653833498","html_url":"https://github.com/apache/iceberg/pull/1161#issuecomment-653833498","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1161","id":653833498,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzgzMzQ5OA==","user":{"login":"zhangdove","id":25578853,"node_id":"MDQ6VXNlcjI1NTc4ODUz","avatar_url":"https://avatars.githubusercontent.com/u/25578853?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangdove","html_url":"https://github.com/zhangdove","followers_url":"https://api.github.com/users/zhangdove/followers","following_url":"https://api.github.com/users/zhangdove/following{/other_user}","gists_url":"https://api.github.com/users/zhangdove/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangdove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangdove/subscriptions","organizations_url":"https://api.github.com/users/zhangdove/orgs","repos_url":"https://api.github.com/users/zhangdove/repos","events_url":"https://api.github.com/users/zhangdove/events{/privacy}","received_events_url":"https://api.github.com/users/zhangdove/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T02:28:00Z","updated_at":"2020-07-05T02:28:00Z","author_association":"CONTRIBUTOR","body":"Thanks for your review. I have fixed it. @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653833498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653896854","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653896854","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653896854,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Mzg5Njg1NA==","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T14:38:41Z","updated_at":"2020-07-05T14:38:41Z","author_association":"COLLABORATOR","body":"I just think about this again, since the `DataReader` and `DataWriter` are used by downstream, it is necessary to consider how to remove them from public API and not impact downstream clients. How about we copy the DataReader and DataWriter to iceberg-data and rename them to AvroGenericReader/Writer then add `deprecated` annotation to `DataWriter` and `DataReader` at first? @openinx @rdblue , what do you think?  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653896854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653935387","html_url":"https://github.com/apache/iceberg/pull/1167#issuecomment-653935387","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1167","id":653935387,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzkzNTM4Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T20:29:59Z","updated_at":"2020-07-05T20:29:59Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks for reviewing, @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653935387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653936310","html_url":"https://github.com/apache/iceberg/pull/1161#issuecomment-653936310","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1161","id":653936310,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzkzNjMxMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T20:38:38Z","updated_at":"2020-07-05T20:38:38Z","author_association":"CONTRIBUTOR","body":"Looks great, I'll merge this. Thanks @zhangdove!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653936310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653936457","html_url":"https://github.com/apache/iceberg/pull/1143#issuecomment-653936457","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1143","id":653936457,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzkzNjQ1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T20:39:44Z","updated_at":"2020-07-05T20:39:44Z","author_association":"CONTRIBUTOR","body":"The fix for this is in #1164, along with the tests from this PR. I'm going to close this. Thanks for the test, @hzfanxinxin!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653936457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653937705","html_url":"https://github.com/apache/iceberg/pull/577#issuecomment-653937705","issue_url":"https://api.github.com/repos/apache/iceberg/issues/577","id":653937705,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzkzNzcwNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-05T20:51:29Z","updated_at":"2020-07-05T20:51:29Z","author_association":"CONTRIBUTOR","body":"@Fokko, I had a chance to look at this yesterday and it works if we disable the Spark 2 modules when running the build with JDK 11. I opened #1168 with the changes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653937705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653993749","html_url":"https://github.com/apache/iceberg/issues/1152#issuecomment-653993749","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1152","id":653993749,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Mzk5Mzc0OQ==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T03:18:58Z","updated_at":"2020-07-06T03:18:58Z","author_association":"MEMBER","body":"@chenjunjiedada , Thanks you for following up on this issue.   `deprecated` the existed `DataWriter` and `DataReader`  looks good to me, I guess we don't need to copy all the codes from `DataWriter` to `AvroGenericWriter` because we can abstract the common logic, for example  putting the common logic in a `BaseAvroWriter` then  the `DataWriter` and `AvroGeneircWriter` will extend from it, similar with the patch https://github.com/apache/iceberg/commit/41cc1334bfe50c7dccb58baeb664b236732f0e2b. After several releases, we could just remove the deprecated `DataWriter` interfaces.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/653993749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654050168","html_url":"https://github.com/apache/iceberg/pull/1164#issuecomment-654050168","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1164","id":654050168,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDA1MDE2OA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T06:54:56Z","updated_at":"2020-07-06T06:55:19Z","author_association":"CONTRIBUTOR","body":"I was trying to look into why this was only a failure for Parquet. I might be wrong here, but It seems that for ORC and Avro were are building the readerFuncs in `TestReadProjection.writeAndRead` using Iceberg expected schema and format specific read schemas, whereas in Parquet we are using Iceberg expected schemas and the format specific **file** schema. Any thoughts on why that is the case?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654050168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654050584","html_url":"https://github.com/apache/iceberg/pull/1164#issuecomment-654050584","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1164","id":654050584,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDA1MDU4NA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T06:56:03Z","updated_at":"2020-07-06T06:56:03Z","author_association":"CONTRIBUTOR","body":"Also should this be addressed for other formats?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654050584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654320001","html_url":"https://github.com/apache/iceberg/pull/1169#issuecomment-654320001","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1169","id":654320001,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDMyMDAwMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T15:51:37Z","updated_at":"2020-07-06T15:51:37Z","author_association":"CONTRIBUTOR","body":"Looks good to me. What do you think, @rdsr?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654320001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654321227","html_url":"https://github.com/apache/iceberg/pull/1168#issuecomment-654321227","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1168","id":654321227,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDMyMTIyNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T15:53:55Z","updated_at":"2020-07-06T16:50:40Z","author_association":"CONTRIBUTOR","body":"Thanks for the reviews, @rdsr & @jun-he!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654321227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654322045","html_url":"https://github.com/apache/iceberg/pull/1164#issuecomment-654322045","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1164","id":654322045,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDMyMjA0NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T15:55:24Z","updated_at":"2020-07-06T15:55:24Z","author_association":"CONTRIBUTOR","body":"@rdsr, the test applies to all formats and only Parquet was broken.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654322045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654323689","html_url":"https://github.com/apache/iceberg/pull/1164#issuecomment-654323689","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1164","id":654323689,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDMyMzY4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T15:58:25Z","updated_at":"2020-07-06T15:58:25Z","author_association":"CONTRIBUTOR","body":"> Any thoughts on why that is the case?\r\n\r\nThe equivalent Avro builder doesn't use the expected primitive at all. The variable name is `ignored`. But looking at the ORC one, I think there would be a similar problem. I assumed it would have been caught by the test, but I guess we need to fix this there as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654323689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654344941","html_url":"https://github.com/apache/iceberg/pull/577#issuecomment-654344941","issue_url":"https://api.github.com/repos/apache/iceberg/issues/577","id":654344941,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM0NDk0MQ==","user":{"login":"Fokko","id":1134248,"node_id":"MDQ6VXNlcjExMzQyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1134248?v=4","gravatar_id":"","url":"https://api.github.com/users/Fokko","html_url":"https://github.com/Fokko","followers_url":"https://api.github.com/users/Fokko/followers","following_url":"https://api.github.com/users/Fokko/following{/other_user}","gists_url":"https://api.github.com/users/Fokko/gists{/gist_id}","starred_url":"https://api.github.com/users/Fokko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fokko/subscriptions","organizations_url":"https://api.github.com/users/Fokko/orgs","repos_url":"https://api.github.com/users/Fokko/repos","events_url":"https://api.github.com/users/Fokko/events{/privacy}","received_events_url":"https://api.github.com/users/Fokko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T16:39:11Z","updated_at":"2020-07-06T16:39:11Z","author_association":"CONTRIBUTOR","body":"Thanks for picking this up @rdblue I was stuck in other projects :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654344941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654347550","html_url":"https://github.com/apache/iceberg/pull/1165#issuecomment-654347550","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1165","id":654347550,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM0NzU1MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T16:44:29Z","updated_at":"2020-07-06T16:44:29Z","author_association":"CONTRIBUTOR","body":"@jun-he, I've made the changes you suggested. Thanks for pointing those out!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654347550/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654376804","html_url":"https://github.com/apache/iceberg/pull/1169#issuecomment-654376804","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1169","id":654376804,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM3NjgwNA==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T17:45:48Z","updated_at":"2020-07-06T17:45:48Z","author_association":"CONTRIBUTOR","body":"+1. Looks great now!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654376804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654380877","html_url":"https://github.com/apache/iceberg/pull/1164#issuecomment-654380877","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1164","id":654380877,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM4MDg3Nw==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T17:54:35Z","updated_at":"2020-07-06T17:54:50Z","author_association":"CONTRIBUTOR","body":"> I assumed it would have been caught by the test, but I guess we need to fix this there as well. \r\n\r\nI believe it is not getting caught because in ORC (as well as Avro) the reader func are utilizing the read schema which completely match the Iceberg expected schema so there will not be a case where the iceberg type is null and the format type is not, whereas in Parquet the reader func is using the file schema.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654380877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654383112","html_url":"https://github.com/apache/iceberg/pull/1165#issuecomment-654383112","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1165","id":654383112,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM4MzExMg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T17:59:26Z","updated_at":"2020-07-06T17:59:26Z","author_association":"CONTRIBUTOR","body":"Merging this now that tests are passing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654383112/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654390863","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-654390863","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":654390863,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM5MDg2Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T18:16:26Z","updated_at":"2020-07-06T18:16:26Z","author_association":"CONTRIBUTOR","body":"Another option to consider is supplying a base namespace for a given catalog. So if I have a catalog that supports a 2-level namespace, I would supply the first level in the catalog configuration and the second level would be exposed as Flink databases.\r\n\r\nThat's what we were going to do in Spark, before there was a push for arbitrary nesting. The nesting is nice because we can reference metadata tables using the table name as a namespace (like `catalog.db.table.history`).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654390863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654392625","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-654392625","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":654392625,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDM5MjYyNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-06T18:20:20Z","updated_at":"2020-07-06T18:20:20Z","author_association":"CONTRIBUTOR","body":"For partitioning, are you talking about DDL support or working with tables?\r\n\r\nWhen reading a table, the engine works with only the table columns. When writing, the engine needs to partition data into files correctly, but that configuration comes from Iceberg and it is not exposed through SQL. The purpose is to maintain a separation between the logical data and the physical layout.\r\n\r\nThe only limitation Flink should have is what it can express in DDL statements. If you support Hive-like syntax with `PARTITIONED BY`, then Flink would only support creating tables with identity partitions. But there is no need to actually restrict what tables it can write to.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654392625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654527458","html_url":"https://github.com/apache/iceberg/pull/1169#issuecomment-654527458","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1169","id":654527458,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDUyNzQ1OA==","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T00:19:32Z","updated_at":"2020-07-07T00:19:32Z","author_association":"COLLABORATOR","body":"Thanks for the review!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654527458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654547070","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-654547070","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":654547070,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDU0NzA3MA==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T01:34:16Z","updated_at":"2020-07-07T01:34:16Z","author_association":"CONTRIBUTOR","body":"Thanks @rdblue for your responding. Very useful. Agree with you.\r\n- Database and namespace: base namespace for a given catalog, looks good to me.\r\n- Partitions: I mean DDL support. Only support identity partitions is too limited, so we don't need to use Flink DDL to express iceberg partition.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654547070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654555451","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-654555451","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":654555451,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDU1NTQ1MQ==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T02:07:06Z","updated_at":"2020-07-07T02:07:27Z","author_association":"CONTRIBUTOR","body":"BTW, Empty `Namespace` is an illegal namespace, right?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654555451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654580954","html_url":"https://github.com/apache/iceberg/pull/1173#issuecomment-654580954","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1173","id":654580954,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDU4MDk1NA==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T03:43:58Z","updated_at":"2020-07-07T03:43:58Z","author_association":"CONTRIBUTOR","body":"CC: @openinx @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654580954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654809319","html_url":"https://github.com/apache/iceberg/issues/1176#issuecomment-654809319","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1176","id":654809319,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDgwOTMxOQ==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T12:05:39Z","updated_at":"2020-07-07T12:05:39Z","author_association":"CONTRIBUTOR","body":"CC: @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654809319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654830244","html_url":"https://github.com/apache/iceberg/issues/1176#issuecomment-654830244","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1176","id":654830244,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDgzMDI0NA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T12:43:04Z","updated_at":"2020-07-07T12:43:04Z","author_association":"MEMBER","body":"I think I made this mistake in PR 20651b1c,  I used the flink with scala 2.11 version firstly  and then we discussed to better to support scala 2.12, so I changed the flink module from scala 2.11 to scala 2.12 but forgot to re-generate the `dependencies.lock`. \r\n\r\nIMO, we'd better to remove those `dependencies.lock` from git and change to re-generate them when building the iceberg modules, because: \r\n1.  we don't have to remember to re-generate those lock files by handle after changed the dependencies jar/version;\r\n2. Git won't inflate because of those lock changes, in the last commit 20651b1c I commited a PR with 10000+ lines which make the changed lines untrue. \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654830244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654888470","html_url":"https://github.com/apache/iceberg/pull/1145#issuecomment-654888470","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1145","id":654888470,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDg4ODQ3MA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T14:07:31Z","updated_at":"2020-07-07T14:07:31Z","author_association":"MEMBER","body":"@rdblue @JingsongLi   I've addressed the comment in the latest patch,  Mind to take another look  if you guys have time ? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654888470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654950608","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-654950608","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":654950608,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDk1MDYwOA==","user":{"login":"GrigorievNick","id":16338643,"node_id":"MDQ6VXNlcjE2MzM4NjQz","avatar_url":"https://avatars.githubusercontent.com/u/16338643?v=4","gravatar_id":"","url":"https://api.github.com/users/GrigorievNick","html_url":"https://github.com/GrigorievNick","followers_url":"https://api.github.com/users/GrigorievNick/followers","following_url":"https://api.github.com/users/GrigorievNick/following{/other_user}","gists_url":"https://api.github.com/users/GrigorievNick/gists{/gist_id}","starred_url":"https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrigorievNick/subscriptions","organizations_url":"https://api.github.com/users/GrigorievNick/orgs","repos_url":"https://api.github.com/users/GrigorievNick/repos","events_url":"https://api.github.com/users/GrigorievNick/events{/privacy}","received_events_url":"https://api.github.com/users/GrigorievNick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T15:41:39Z","updated_at":"2020-07-07T15:41:39Z","author_association":"CONTRIBUTOR","body":"Amazing job guys.  Will this work with spark 2.4.X or only with spark 3?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/654950608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655000585","html_url":"https://github.com/apache/iceberg/pull/1171#issuecomment-655000585","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1171","id":655000585,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTAwMDU4NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T17:06:57Z","updated_at":"2020-07-07T17:06:57Z","author_association":"CONTRIBUTOR","body":"@wangmiao1981, could you separate these into different PRs? We try to keep changes focused on just one problem so that they can be cherry-picked between branches without unnecessary git conflicts.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655000585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655091779","html_url":"https://github.com/apache/iceberg/pull/759#issuecomment-655091779","issue_url":"https://api.github.com/repos/apache/iceberg/issues/759","id":655091779,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTA5MTc3OQ==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T19:54:34Z","updated_at":"2020-07-07T19:54:54Z","author_association":"CONTRIBUTOR","body":"@rdsr I've opened a PR https://github.com/apache/iceberg/pull/1177 against apache:master branch with this feature that you've started working on, I hope this is ok w/ you. Let me know if you think I should go about this a different way, thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655091779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655129974","html_url":"https://github.com/apache/iceberg/pull/1172#issuecomment-655129974","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1172","id":655129974,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTEyOTk3NA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T20:57:01Z","updated_at":"2020-07-07T20:57:01Z","author_association":"CONTRIBUTOR","body":"+1 LGTM.  Great writeup!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655129974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655134321","html_url":"https://github.com/apache/iceberg/pull/1171#issuecomment-655134321","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1171","id":655134321,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTEzNDMyMQ==","user":{"login":"wangmiao1981","id":5033592,"node_id":"MDQ6VXNlcjUwMzM1OTI=","avatar_url":"https://avatars.githubusercontent.com/u/5033592?v=4","gravatar_id":"","url":"https://api.github.com/users/wangmiao1981","html_url":"https://github.com/wangmiao1981","followers_url":"https://api.github.com/users/wangmiao1981/followers","following_url":"https://api.github.com/users/wangmiao1981/following{/other_user}","gists_url":"https://api.github.com/users/wangmiao1981/gists{/gist_id}","starred_url":"https://api.github.com/users/wangmiao1981/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangmiao1981/subscriptions","organizations_url":"https://api.github.com/users/wangmiao1981/orgs","repos_url":"https://api.github.com/users/wangmiao1981/repos","events_url":"https://api.github.com/users/wangmiao1981/events{/privacy}","received_events_url":"https://api.github.com/users/wangmiao1981/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T21:05:38Z","updated_at":"2020-07-07T21:05:38Z","author_association":"CONTRIBUTOR","body":"I will make the change to 2 PRs. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655134321/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655140373","html_url":"https://github.com/apache/iceberg/issues/1178#issuecomment-655140373","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1178","id":655140373,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTE0MDM3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T21:18:17Z","updated_at":"2020-07-07T21:18:17Z","author_association":"CONTRIBUTOR","body":"It's probably safe to parallelize this, but I think we didn't do it originally because we don't want to get \"slow down\" responses from services like S3. Seems like adding an option to the API here would be a good idea. Maybe allow passing in a thread pool for deletes?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655140373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655143789","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-655143789","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":655143789,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTE0Mzc4OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T21:25:45Z","updated_at":"2020-07-07T21:25:45Z","author_association":"CONTRIBUTOR","body":"> Empty Namespace is an illegal namespace, right?\r\n\r\nThis is fine in the Hadoop catalog, since it is just a directory structure.\r\n\r\n> Only support identity partitions is too limited, so we don't need to use Flink DDL to express iceberg partition.\r\n\r\nI'm not sure I'm following what you mean. If identity partitioning is too limited, would you support partition expressions? Or just not allow partitioning in DDL at all?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655143789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655197073","html_url":"https://github.com/apache/iceberg/issues/1163#issuecomment-655197073","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1163","id":655197073,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTE5NzA3Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T23:46:12Z","updated_at":"2020-07-07T23:46:12Z","author_association":"CONTRIBUTOR","body":"What Hive Metastore are you using? The error is that HMS couldn't create the path, so it is probably attempting to create the path locally because the table URI is `file:/home/...`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655197073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655235682","html_url":"https://github.com/apache/iceberg/issues/1176#issuecomment-655235682","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1176","id":655235682,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTIzNTY4Mg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T02:02:44Z","updated_at":"2020-07-08T02:02:44Z","author_association":"MEMBER","body":"Let me prepare a pull request for it. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655235682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655235848","html_url":"https://github.com/apache/iceberg/issues/1170#issuecomment-655235848","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1170","id":655235848,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTIzNTg0OA==","user":{"login":"JingsongLi","id":9601882,"node_id":"MDQ6VXNlcjk2MDE4ODI=","avatar_url":"https://avatars.githubusercontent.com/u/9601882?v=4","gravatar_id":"","url":"https://api.github.com/users/JingsongLi","html_url":"https://github.com/JingsongLi","followers_url":"https://api.github.com/users/JingsongLi/followers","following_url":"https://api.github.com/users/JingsongLi/following{/other_user}","gists_url":"https://api.github.com/users/JingsongLi/gists{/gist_id}","starred_url":"https://api.github.com/users/JingsongLi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JingsongLi/subscriptions","organizations_url":"https://api.github.com/users/JingsongLi/orgs","repos_url":"https://api.github.com/users/JingsongLi/repos","events_url":"https://api.github.com/users/JingsongLi/events{/privacy}","received_events_url":"https://api.github.com/users/JingsongLi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T02:03:20Z","updated_at":"2020-07-08T02:03:20Z","author_association":"CONTRIBUTOR","body":"> This is fine in the Hadoop catalog, since it is just a directory structure.\r\n\r\nGot it, I was misled by `HadoopCatalog.listTables(Namespace)`. `FlinkCatalog` can not support empty namespace at first.\r\n\r\n> I'm not sure I'm following what you mean. If identity partitioning is too limited, would you support partition expressions? Or just not allow partitioning in DDL at all?\r\n\r\nNot allow partitioning using Flink `partitioned by` DDL, I think we provide an option key `partitioning` to define iceberg partitioning. (This require string parser for `PartitionSpec`).\r\n\r\nI'll create a PR soon.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655235848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655270652","html_url":"https://github.com/apache/iceberg/pull/1158#issuecomment-655270652","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1158","id":655270652,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTI3MDY1Mg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T04:07:23Z","updated_at":"2020-07-08T04:07:23Z","author_association":"MEMBER","body":"@rdsr  Please help to take a look when you have time , Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655270652/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655595194","html_url":"https://github.com/apache/iceberg/issues/617#issuecomment-655595194","issue_url":"https://api.github.com/repos/apache/iceberg/issues/617","id":655595194,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTU5NTE5NA==","user":{"login":"prodeezy","id":1474591,"node_id":"MDQ6VXNlcjE0NzQ1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1474591?v=4","gravatar_id":"","url":"https://api.github.com/users/prodeezy","html_url":"https://github.com/prodeezy","followers_url":"https://api.github.com/users/prodeezy/followers","following_url":"https://api.github.com/users/prodeezy/following{/other_user}","gists_url":"https://api.github.com/users/prodeezy/gists{/gist_id}","starred_url":"https://api.github.com/users/prodeezy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prodeezy/subscriptions","organizations_url":"https://api.github.com/users/prodeezy/orgs","repos_url":"https://api.github.com/users/prodeezy/repos","events_url":"https://api.github.com/users/prodeezy/events{/privacy}","received_events_url":"https://api.github.com/users/prodeezy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T15:35:55Z","updated_at":"2020-07-08T15:45:37Z","author_association":"CONTRIBUTOR","body":"Posting the conversation from last sync.. \r\n\r\n\r\n> Gautam: how are others monitoring dataset health?  Discussing additional metrics about datasets, like number of manifests, number of data files, etc.\r\n> Ryan: What is the use case?\r\n> Gautam: We want to know when tables are misconfigured or need attention. For example, when commits take too long due to retries, or when scan planning takes a long time. Are current stats enough?\r\n> Ryan: That would be useful, we don’t currently do much to keep track of those. I think the current approach of emitting events to listeners is good, but we will need to add more data to those events, like how long a commit or planning run took. We can also start tracking total number of metadata files in snapshot summaries to emit with the events for context.\r\n> Edgar: Should we add similar listeners to the catalogs?\r\n> Ryan: That’s a good idea, so you could know how long it took to create or drop a table.\r\n\r\n\r\n\r\nSo seems like we want to stick to registering listeners. If one wants they can use a codahale metrics client to report/publish any metrics. does this sound good @raptond ? In that regard, we need some additional metrics that need to be bubbled up in the snapshot summary/scan events etc. I'l create an issue for that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655595194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655623016","html_url":"https://github.com/apache/iceberg/issues/1178#issuecomment-655623016","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1178","id":655623016,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTYyMzAxNg==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T16:26:39Z","updated_at":"2020-07-08T16:43:39Z","author_association":"CONTRIBUTOR","body":"Oh I see, so throttling may occur if we parallelize these delete operations. \r\n@rdblue How about looking at other `fs` functions to delete maybe like [fs.deleteOnExit](https://hadoop.apache.org/docs/r2.8.2/api/org/apache/hadoop/fs/FileSystem.html#deleteOnExit) instead of `ops.io().deleteFile(file)`?\r\nSounds like it's some sort of lazy delete file API that may work around throttling issues? \r\n\r\nI could look into what it's implementation looks like for S3 and ADLS but I think that this API would work better for this particular case. wdyt?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655623016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655642873","html_url":"https://github.com/apache/iceberg/pull/1166#issuecomment-655642873","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1166","id":655642873,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY0Mjg3Mw==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T17:05:33Z","updated_at":"2020-07-08T17:05:33Z","author_association":"CONTRIBUTOR","body":"This look fine to me, but I'm not clear on why we couldn't just create test suite that references the original tests in the spark module as opposed to subclassing new tests in the 2/3 specific modules.\r\n\r\nI'm fine with this though. +1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655642873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655643335","html_url":"https://github.com/apache/iceberg/issues/1178#issuecomment-655643335","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1178","id":655643335,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY0MzMzNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T17:06:29Z","updated_at":"2020-07-08T17:06:29Z","author_association":"CONTRIBUTOR","body":"I don't think we want to use `deleteOnExit`. That just queues the delete to happen in a shutdown hook, but I don't think there are many guarantees about reliability. That would make it so we no longer retry failed operations and might affect recovery when some, but not all of them fail. It also wouldn't help with parallelism because it would happen in a single shutdown hook thread.\r\n\r\nI think the best way to parallelize this operation is to run in a thread pool passed in by the user. Then the user could configure the parallelism of that pool to ensure that it is not so high that it hits throttling exceptions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655643335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655651717","html_url":"https://github.com/apache/iceberg/pull/1166#issuecomment-655651717","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1166","id":655651717,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY1MTcxNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T17:22:55Z","updated_at":"2020-07-08T17:22:55Z","author_association":"CONTRIBUTOR","body":"Just to clarify, the reason why the tests are abstract in the iceberg-spark module is that they cannot run in that module. IcebergSource is only defined in the iceberg-spark2 and iceberg-spark3 modules. We want to use the same tests in those modules, but not run them where there is no defined source that can load tables.\r\n\r\nI'll rebase this to fix the conflict.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655651717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655667194","html_url":"https://github.com/apache/iceberg/pull/1171#issuecomment-655667194","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1171","id":655667194,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY2NzE5NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T17:53:57Z","updated_at":"2020-07-08T17:53:57Z","author_association":"CONTRIBUTOR","body":"Merged. Thanks @wangmiao1981!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655667194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655684441","html_url":"https://github.com/apache/iceberg/issues/1178#issuecomment-655684441","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1178","id":655684441,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY4NDQ0MQ==","user":{"login":"fbocse","id":559272,"node_id":"MDQ6VXNlcjU1OTI3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/559272?v=4","gravatar_id":"","url":"https://api.github.com/users/fbocse","html_url":"https://github.com/fbocse","followers_url":"https://api.github.com/users/fbocse/followers","following_url":"https://api.github.com/users/fbocse/following{/other_user}","gists_url":"https://api.github.com/users/fbocse/gists{/gist_id}","starred_url":"https://api.github.com/users/fbocse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbocse/subscriptions","organizations_url":"https://api.github.com/users/fbocse/orgs","repos_url":"https://api.github.com/users/fbocse/repos","events_url":"https://api.github.com/users/fbocse/events{/privacy}","received_events_url":"https://api.github.com/users/fbocse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T18:30:29Z","updated_at":"2020-07-08T18:30:29Z","author_association":"CONTRIBUTOR","body":"You're right, lack of consistency guarantees would make things complicated and eventually flawed.\r\nYour suggestion on allowing user to pass in a configurable thread pool should help w/ parallelizing this effort.  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655684441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655705993","html_url":"https://github.com/apache/iceberg/issues/1138#issuecomment-655705993","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1138","id":655705993,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTcwNTk5Mw==","user":{"login":"gustavoatt","id":1475634,"node_id":"MDQ6VXNlcjE0NzU2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1475634?v=4","gravatar_id":"","url":"https://api.github.com/users/gustavoatt","html_url":"https://github.com/gustavoatt","followers_url":"https://api.github.com/users/gustavoatt/followers","following_url":"https://api.github.com/users/gustavoatt/following{/other_user}","gists_url":"https://api.github.com/users/gustavoatt/gists{/gist_id}","starred_url":"https://api.github.com/users/gustavoatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gustavoatt/subscriptions","organizations_url":"https://api.github.com/users/gustavoatt/orgs","repos_url":"https://api.github.com/users/gustavoatt/repos","events_url":"https://api.github.com/users/gustavoatt/events{/privacy}","received_events_url":"https://api.github.com/users/gustavoatt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T19:17:50Z","updated_at":"2020-07-08T19:17:50Z","author_association":"CONTRIBUTOR","body":"Sent a PR to add int96 timestamp support in https://github.com/apache/iceberg/pull/1184. I was able to verify the behavior for spark.\r\n\r\nI _think_ Hive writes them in the exact same way, would need to verify that to be sure.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655705993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655706117","html_url":"https://github.com/apache/iceberg/pull/1184#issuecomment-655706117","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1184","id":655706117,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTcwNjExNw==","user":{"login":"gustavoatt","id":1475634,"node_id":"MDQ6VXNlcjE0NzU2MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1475634?v=4","gravatar_id":"","url":"https://api.github.com/users/gustavoatt","html_url":"https://github.com/gustavoatt","followers_url":"https://api.github.com/users/gustavoatt/followers","following_url":"https://api.github.com/users/gustavoatt/following{/other_user}","gists_url":"https://api.github.com/users/gustavoatt/gists{/gist_id}","starred_url":"https://api.github.com/users/gustavoatt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gustavoatt/subscriptions","organizations_url":"https://api.github.com/users/gustavoatt/orgs","repos_url":"https://api.github.com/users/gustavoatt/repos","events_url":"https://api.github.com/users/gustavoatt/events{/privacy}","received_events_url":"https://api.github.com/users/gustavoatt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T19:18:05Z","updated_at":"2020-07-08T19:18:05Z","author_association":"CONTRIBUTOR","body":"cc: @rdblue @edgarRd ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655706117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655770188","html_url":"https://github.com/apache/iceberg/pull/1156#issuecomment-655770188","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1156","id":655770188,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTc3MDE4OA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T21:34:56Z","updated_at":"2020-07-08T21:34:56Z","author_association":"CONTRIBUTOR","body":"+1 Lots of great tests.  One minor comment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655770188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655807759","html_url":"https://github.com/apache/iceberg/pull/1166#issuecomment-655807759","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1166","id":655807759,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTgwNzc1OQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T23:23:08Z","updated_at":"2020-07-08T23:23:08Z","author_association":"CONTRIBUTOR","body":"I tested this locally since CI doesn't seem to be picking it up.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655807759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655808428","html_url":"https://github.com/apache/iceberg/pull/1183#issuecomment-655808428","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1183","id":655808428,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTgwODQyOA==","user":{"login":"danielcweeks","id":4925077,"node_id":"MDQ6VXNlcjQ5MjUwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4925077?v=4","gravatar_id":"","url":"https://api.github.com/users/danielcweeks","html_url":"https://github.com/danielcweeks","followers_url":"https://api.github.com/users/danielcweeks/followers","following_url":"https://api.github.com/users/danielcweeks/following{/other_user}","gists_url":"https://api.github.com/users/danielcweeks/gists{/gist_id}","starred_url":"https://api.github.com/users/danielcweeks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielcweeks/subscriptions","organizations_url":"https://api.github.com/users/danielcweeks/orgs","repos_url":"https://api.github.com/users/danielcweeks/repos","events_url":"https://api.github.com/users/danielcweeks/events{/privacy}","received_events_url":"https://api.github.com/users/danielcweeks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T23:25:26Z","updated_at":"2020-07-08T23:25:26Z","author_association":"CONTRIBUTOR","body":"+1 LGTM","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655808428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655825152","html_url":"https://github.com/apache/iceberg/pull/1183#issuecomment-655825152","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1183","id":655825152,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTgyNTE1Mg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T00:25:46Z","updated_at":"2020-07-09T00:25:46Z","author_association":"CONTRIBUTOR","body":"I ran tests locally because CI is running behind. Everything looks good, I'll merge this.\r\n\r\nThanks for reviewing, @danielcweeks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655825152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655833626","html_url":"https://github.com/apache/iceberg/pull/1077#issuecomment-655833626","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1077","id":655833626,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTgzMzYyNg==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T00:59:45Z","updated_at":"2020-07-09T00:59:45Z","author_association":"CONTRIBUTOR","body":"@waterlx, I tried the approach I suggested and it doesn't seem to match what we do for the file tables. Since this PR is a simple fix, I merged it. Thanks for fix this!\r\n\r\nAlso, I had to rebase and squash by hand since this was a bit old. That's why it's marked closed instead of merged.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655833626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655835398","html_url":"https://github.com/apache/iceberg/pull/960#issuecomment-655835398","issue_url":"https://api.github.com/repos/apache/iceberg/issues/960","id":655835398,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTgzNTM5OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T01:06:14Z","updated_at":"2020-07-09T01:06:14Z","author_association":"CONTRIBUTOR","body":"I'm going to go ahead and merge this.\r\n\r\n@chenjunjiedada, the reason why I haven't added tests is because these methods are used in a lot of places and are already well covered. There aren't specific tests for these methods, but these are used for projections throughout the core.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655835398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655852092","html_url":"https://github.com/apache/iceberg/pull/1180#issuecomment-655852092","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1180","id":655852092,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTg1MjA5Mg==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T02:05:36Z","updated_at":"2020-07-09T02:05:36Z","author_association":"MEMBER","body":"Ping @rdblue & @rdsr ,  PTAL. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/655852092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656031944","html_url":"https://github.com/apache/iceberg/pull/796#issuecomment-656031944","issue_url":"https://api.github.com/repos/apache/iceberg/issues/796","id":656031944,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjAzMTk0NA==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T09:55:27Z","updated_at":"2020-07-09T09:55:27Z","author_association":"CONTRIBUTOR","body":"> Amazing job guys. Will this work with spark 2.4.X or only with spark 3?\r\n\r\n@GrigorievNick the current work is based on 2.4.x, but the core logics can be reused to support 3 (with only minor interface adaption).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656031944/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656240658","html_url":"https://github.com/apache/iceberg/pull/1180#issuecomment-656240658","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1180","id":656240658,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjI0MDY1OA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T16:57:44Z","updated_at":"2020-07-09T16:57:44Z","author_association":"CONTRIBUTOR","body":"I agree with doing this. Locking is really helpful when building a final app so you can ensure tests run with the same classpath that will be used in production. For a library like this, it makes far less sense. Huge lock files and confusing behavior when updating versions is not worth it.\r\n\r\nBefore merging, I think we should remove the dependency lock plugin as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656240658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656362911","html_url":"https://github.com/apache/iceberg/pull/1188#issuecomment-656362911","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1188","id":656362911,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjM2MjkxMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-09T21:35:40Z","updated_at":"2020-07-09T21:35:40Z","author_association":"CONTRIBUTOR","body":"I'm merging this without waiting for tests because no test classes changed, and I've verified the runtime Jar by hand.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656362911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656408465","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656408465","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656408465,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQwODQ2NQ==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:02:59Z","updated_at":"2020-07-10T00:02:59Z","author_association":"CONTRIBUTOR","body":"I was planning to work on this, but I am unsure of some of the details.\r\n- How does the ORC reader know that it has to project metadata columns? Will it be part of the expected Iceberg schema provided to the readers? If yes, will these columns have reserved field ids which helps the readers identify the metadata columns or do they have specific names?\r\n- I was thinking of passing starting position of the first row in each VectorizedRowBatch as part of the OrcValueReader interface and then create a new OrcValueReader returns baseOffset+currentRowIndex for every row. Let me know if this sounds okay to you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656408465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420014","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656420014","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656420014,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQyMDAxNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:45:10Z","updated_at":"2020-07-10T00:45:10Z","author_association":"CONTRIBUTOR","body":"> How does the ORC reader know that it has to project metadata columns? Will it be part of the expected Iceberg schema provided to the readers?\r\n\r\nYes. Iceberg will pass in a schema that has the metadata column. We have an example implementation in our current branch with [the column definitions](https://github.com/Netflix/iceberg/blob/netflix-spark-2.4/spark/src/main/java/org/apache/iceberg/spark/source/MetadataColumns.java) and an [implementation for `_file`](https://github.com/Netflix/iceberg/blob/netflix-spark-2.4/spark/src/main/java/org/apache/iceberg/spark/source/SparkBatchScan.java#L410-L458) that uses a joined row (the way we used to do for identity partition values).\r\n\r\nWe would add detection to the value reader builder that injects the `_pos` reader.\r\n\r\n> I was thinking of passing starting position of the first row in each VectorizedRowBatch as part of the OrcValueReader interface and then create a new OrcValueReader returns baseOffset+currentRowIndex for every row.\r\n\r\nSounds reasonable to me.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420721","html_url":"https://github.com/apache/iceberg/pull/1189#issuecomment-656420721","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1189","id":656420721,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQyMDcyMQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:48:05Z","updated_at":"2020-07-10T00:48:05Z","author_association":"CONTRIBUTOR","body":"Thanks, @shardulm94! It's great to see a PR for this. I'll try to get some time to review it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420721/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420938","html_url":"https://github.com/apache/iceberg/pull/1175#issuecomment-656420938","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1175","id":656420938,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQyMDkzOA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:49:11Z","updated_at":"2020-07-10T00:49:11Z","author_association":"CONTRIBUTOR","body":"@openinx, now that the RC for 0.9.0 is out, I should be able to pick back up on Flink reviews tomorrow. I'll probably start with this one since we need to clean this up. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656420938/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656421163","html_url":"https://github.com/apache/iceberg/pull/1145#issuecomment-656421163","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1145","id":656421163,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQyMTE2Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:50:15Z","updated_at":"2020-07-10T00:50:15Z","author_association":"CONTRIBUTOR","body":"I should be able to take another look tomorrow.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656421163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656422290","html_url":"https://github.com/apache/iceberg/pull/1190#issuecomment-656422290","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1190","id":656422290,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQyMjI5MA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T00:55:21Z","updated_at":"2020-07-10T00:55:21Z","author_association":"CONTRIBUTOR","body":"@rdsr, this fixes the problems you pointed out on #1172. Please have a look. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656422290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656442300","html_url":"https://github.com/apache/iceberg/pull/1180#issuecomment-656442300","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1180","id":656442300,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjQ0MjMwMA==","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T02:15:16Z","updated_at":"2020-07-10T02:15:16Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656442300/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656524993","html_url":"https://github.com/apache/iceberg/issues/1146#issuecomment-656524993","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1146","id":656524993,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjUyNDk5Mw==","user":{"login":"GrigorievNick","id":16338643,"node_id":"MDQ6VXNlcjE2MzM4NjQz","avatar_url":"https://avatars.githubusercontent.com/u/16338643?v=4","gravatar_id":"","url":"https://api.github.com/users/GrigorievNick","html_url":"https://github.com/GrigorievNick","followers_url":"https://api.github.com/users/GrigorievNick/followers","following_url":"https://api.github.com/users/GrigorievNick/following{/other_user}","gists_url":"https://api.github.com/users/GrigorievNick/gists{/gist_id}","starred_url":"https://api.github.com/users/GrigorievNick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GrigorievNick/subscriptions","organizations_url":"https://api.github.com/users/GrigorievNick/orgs","repos_url":"https://api.github.com/users/GrigorievNick/repos","events_url":"https://api.github.com/users/GrigorievNick/events{/privacy}","received_events_url":"https://api.github.com/users/GrigorievNick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T07:17:17Z","updated_at":"2020-07-10T07:17:17Z","author_association":"CONTRIBUTOR","body":"I just read 0.9-rc5  and find that ICBQ is different from delata-lake. And will support both spark 2 and 2 in 0.9 version at least.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656524993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656544944","html_url":"https://github.com/apache/iceberg/issues/1159#issuecomment-656544944","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1159","id":656544944,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjU0NDk0NA==","user":{"login":"jerryshao","id":850797,"node_id":"MDQ6VXNlcjg1MDc5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/850797?v=4","gravatar_id":"","url":"https://api.github.com/users/jerryshao","html_url":"https://github.com/jerryshao","followers_url":"https://api.github.com/users/jerryshao/followers","following_url":"https://api.github.com/users/jerryshao/following{/other_user}","gists_url":"https://api.github.com/users/jerryshao/gists{/gist_id}","starred_url":"https://api.github.com/users/jerryshao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerryshao/subscriptions","organizations_url":"https://api.github.com/users/jerryshao/orgs","repos_url":"https://api.github.com/users/jerryshao/repos","events_url":"https://api.github.com/users/jerryshao/events{/privacy}","received_events_url":"https://api.github.com/users/jerryshao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T08:05:48Z","updated_at":"2020-07-10T08:05:48Z","author_association":"CONTRIBUTOR","body":"I think you can specify filter expressions to rewrite files you wanted. For example, you can only rewrite data under newly added partition, not the whole data. I'm not sure if that is enough for you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656544944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656553009","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656553009","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656553009,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjU1MzAwOQ==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T08:24:29Z","updated_at":"2020-07-10T08:24:29Z","author_association":"CONTRIBUTOR","body":"Since open source Spark does not support metadata columns, is it okay for these columns be included in the readSchema returned to Spark, maybe enabled through an option? That way we can return data/rows with `_file` and `_pos` to Spark without having to apply a projection to filter them out, similar to how we handle extra columns required for filters.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656553009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656691272","html_url":"https://github.com/apache/iceberg/issues/1061#issuecomment-656691272","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1061","id":656691272,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjY5MTI3Mg==","user":{"login":"rdsr","id":129474,"node_id":"MDQ6VXNlcjEyOTQ3NA==","avatar_url":"https://avatars.githubusercontent.com/u/129474?v=4","gravatar_id":"","url":"https://api.github.com/users/rdsr","html_url":"https://github.com/rdsr","followers_url":"https://api.github.com/users/rdsr/followers","following_url":"https://api.github.com/users/rdsr/following{/other_user}","gists_url":"https://api.github.com/users/rdsr/gists{/gist_id}","starred_url":"https://api.github.com/users/rdsr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdsr/subscriptions","organizations_url":"https://api.github.com/users/rdsr/orgs","repos_url":"https://api.github.com/users/rdsr/repos","events_url":"https://api.github.com/users/rdsr/events{/privacy}","received_events_url":"https://api.github.com/users/rdsr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T13:58:44Z","updated_at":"2020-07-10T14:01:49Z","author_association":"CONTRIBUTOR","body":"@jerryshao I seee you closed this issue. Is this done? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656691272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656744233","html_url":"https://github.com/apache/iceberg/issues/1061#issuecomment-656744233","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1061","id":656744233,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njc0NDIzMw==","user":{"login":"zhangdove","id":25578853,"node_id":"MDQ6VXNlcjI1NTc4ODUz","avatar_url":"https://avatars.githubusercontent.com/u/25578853?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangdove","html_url":"https://github.com/zhangdove","followers_url":"https://api.github.com/users/zhangdove/followers","following_url":"https://api.github.com/users/zhangdove/following{/other_user}","gists_url":"https://api.github.com/users/zhangdove/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangdove/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangdove/subscriptions","organizations_url":"https://api.github.com/users/zhangdove/orgs","repos_url":"https://api.github.com/users/zhangdove/repos","events_url":"https://api.github.com/users/zhangdove/events{/privacy}","received_events_url":"https://api.github.com/users/zhangdove/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T15:45:30Z","updated_at":"2020-07-10T15:45:30Z","author_association":"CONTRIBUTOR","body":"If understood correctly, I think this issue has been solved by  [1083](https://github.com/apache/iceberg/pull/1083). I also did some local testing of the module. @rdsr ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656744233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656822893","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656822893","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656822893,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjgyMjg5Mw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T18:34:52Z","updated_at":"2020-07-10T18:34:52Z","author_association":"CONTRIBUTOR","body":"Yes, we can do that. Is the use case to be able to build a job that deletes rows in Spark?\r\n\r\nI don't think we would need to expose the columns to Spark just for merging in position delete files. We can project those columns in the read builder if they are needed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656822893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656873475","html_url":"https://github.com/apache/iceberg/pull/1189#issuecomment-656873475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1189","id":656873475,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njg3MzQ3NQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T20:23:15Z","updated_at":"2020-07-10T20:23:15Z","author_association":"CONTRIBUTOR","body":"Do we know why the nested data benchmarks show such a big improvement? Are we running correctness tests for the same cases to make sure we aren't dropping data by accident? It just seems a bit too good.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656873475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656914438","html_url":"https://github.com/apache/iceberg/pull/1189#issuecomment-656914438","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1189","id":656914438,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkxNDQzOA==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T22:06:59Z","updated_at":"2020-07-10T22:06:59Z","author_association":"CONTRIBUTOR","body":"Which cases are you comparing for nested data? `readIcebergNonVectorized` v/s `readIcebergVectorized` for nested data shows 2-3x improvement which is similar to the improvements for flat data. For nested data the `readFileSourceVectorized` and `readWithProjectionFileSourceVectorized` are not really relevant since the file source defaults to row by row reading for nested data, so I guess we should just remove them. I modified the Spark unit tests to also test the vectorized codepaths, so I am assuming those tests check correctness, but I can do some sanity checks manually.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656914438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656919000","html_url":"https://github.com/apache/iceberg/pull/1175#issuecomment-656919000","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1175","id":656919000,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkxOTAwMA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T22:19:59Z","updated_at":"2020-07-10T22:19:59Z","author_association":"CONTRIBUTOR","body":"@openinx, I opened an alternative to this PR, #1195. Please take a look.\r\n\r\nThis solution looks fairly clean for producing a `PartitionKey` for a specific format, but it requires building a subclass of `PartitionKey` for every row representation as well as new `Accessor` classes. I'd like to make it possible to reuse the existing `PartitionKey` class as well as the existing `Accessor` implementations (produced by `Schema.accessorForField(id)`) that are currently used for expression evaluation.\r\n\r\nThe approach I took in the other PR is to reuse the existing accessors, which accept a `StructLike`. To make that work, I just needed to add a wrapper class that adapts Spark's `InternalRow` to `StructLike`, and that converts Spark objects to Iceberg's internal representation. I think that's going to be a better long-term approach than multiple `PartitionKey` classes.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656919000/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656919437","html_url":"https://github.com/apache/iceberg/pull/1189#issuecomment-656919437","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1189","id":656919437,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkxOTQzNw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T22:21:21Z","updated_at":"2020-07-10T22:21:21Z","author_association":"CONTRIBUTOR","body":"> For nested data the readFileSourceVectorized and readWithProjectionFileSourceVectorized are not really relevant since the file source defaults to row by row reading for nested data\r\n\r\nThat's the answer I was looking for. It was really surprising that Spark vectorized was so slow. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656919437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656933167","html_url":"https://github.com/apache/iceberg/pull/1182#issuecomment-656933167","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1182","id":656933167,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkzMzE2Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T23:11:45Z","updated_at":"2020-07-10T23:11:45Z","author_association":"CONTRIBUTOR","body":"Thanks @JingsongLi, this looks close. I just had a few questions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656933167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656934974","html_url":"https://github.com/apache/iceberg/pull/1191#issuecomment-656934974","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1191","id":656934974,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjkzNDk3NA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T23:19:23Z","updated_at":"2020-07-10T23:19:23Z","author_association":"CONTRIBUTOR","body":"+1, just a minor issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656934974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656940851","html_url":"https://github.com/apache/iceberg/pull/1191#issuecomment-656940851","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1191","id":656940851,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0MDg1MQ==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T23:45:29Z","updated_at":"2020-07-10T23:46:56Z","author_association":"CONTRIBUTOR","body":"I think this code will be changed a bit in #1021 to handle not just constant columns but also metadata columns, since we would want to avoid materializing a `ColumnVector` for metadata columns too.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656940851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656942586","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656942586","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656942586,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0MjU4Ng==","user":{"login":"shardulm94","id":6961317,"node_id":"MDQ6VXNlcjY5NjEzMTc=","avatar_url":"https://avatars.githubusercontent.com/u/6961317?v=4","gravatar_id":"","url":"https://api.github.com/users/shardulm94","html_url":"https://github.com/shardulm94","followers_url":"https://api.github.com/users/shardulm94/followers","following_url":"https://api.github.com/users/shardulm94/following{/other_user}","gists_url":"https://api.github.com/users/shardulm94/gists{/gist_id}","starred_url":"https://api.github.com/users/shardulm94/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shardulm94/subscriptions","organizations_url":"https://api.github.com/users/shardulm94/orgs","repos_url":"https://api.github.com/users/shardulm94/repos","events_url":"https://api.github.com/users/shardulm94/events{/privacy}","received_events_url":"https://api.github.com/users/shardulm94/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T23:54:48Z","updated_at":"2020-07-10T23:54:48Z","author_association":"CONTRIBUTOR","body":"I was trying to wrap my head around how it would all fit in together. I was also thinking of possibly using Spark to write test cases for this, but I guess we can test using `ORC.read()` directly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656942586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656944576","html_url":"https://github.com/apache/iceberg/pull/1189#issuecomment-656944576","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1189","id":656944576,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0NDU3Ng==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:04:45Z","updated_at":"2020-07-11T00:04:45Z","author_association":"CONTRIBUTOR","body":"The only blocker I see is that the batch iterator doesn't pass the close call down to the underlying ORC reader. Otherwise, everything is minor.\r\n\r\nAwesome work, @shardulm94!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656944576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656945034","html_url":"https://github.com/apache/iceberg/issues/1021#issuecomment-656945034","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1021","id":656945034,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0NTAzNA==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:07:10Z","updated_at":"2020-07-11T00:07:10Z","author_association":"CONTRIBUTOR","body":"Yeah. Given how long Spark tests take to run, we should keep the number of them down and try to write as many tests as possible without it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656945034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656946005","html_url":"https://github.com/apache/iceberg/pull/1174#issuecomment-656946005","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1174","id":656946005,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk0NjAwNQ==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:12:18Z","updated_at":"2020-07-11T00:12:18Z","author_association":"CONTRIBUTOR","body":"@JingsongLi, I added some comments about the changes here to #1182.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656946005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656950457","html_url":"https://github.com/apache/iceberg/pull/1158#issuecomment-656950457","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1158","id":656950457,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk1MDQ1Nw==","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T00:35:00Z","updated_at":"2020-07-11T00:35:00Z","author_association":"CONTRIBUTOR","body":"Looks like there are some minor things to clean up, but overall the code changes are close to being ready.\r\n\r\nBefore merging this, I'd like to understand how Flink will work with the data that is produced so we can make a good decision about whether we should continue with ORC like we have for Parquet and Avro (sharing generics code) or whether we should think about building separate readers and writers for its object model. Thanks for bringing this up, @rdsr!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/656950457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]