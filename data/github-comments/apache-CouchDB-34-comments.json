[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344127263","html_url":"https://github.com/apache/couchdb/pull/962#issuecomment-344127263","issue_url":"https://api.github.com/repos/apache/couchdb/issues/962","id":344127263,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDEyNzI2Mw==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T02:35:52Z","updated_at":"2017-11-14T02:35:52Z","author_association":"CONTRIBUTOR","body":"Wanted to clarify a bit:\r\n\r\nFor scenario 1): I agree that fixing the difference between text and json indexes is outside the scope of the PR, but I was thinking about the specific backwards-compatibility situation where a user specifies ```use_index``` for a json index, and it fails, and the fallback is a text index. Would we rather have them possibly get different results and complain later down the road versus failing them right away with an error?\r\n\r\nFor scenario 2): Similarly to scenario 1), the issue is whether or not the fallback leads to inadvertent changes for the user. In this case, he  is modifying his indexes based on perceived notion of what is being used. The performance degradation for _all_docs is noticed and he complains about the issue. We notify him saying that an index was deleted, but he says the index wasn't being used. Now he says ok he wants to rebuild an index...and that may take a long time and negatively affect his cluster.\r\n\r\nI wonder if it's better to explicitly send back index names as part an failure error message. But could that be a security risk?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344127263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344127529","html_url":"https://github.com/apache/couchdb/pull/971#issuecomment-344127529","issue_url":"https://api.github.com/repos/apache/couchdb/issues/971","id":344127529,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDEyNzUyOQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T02:37:31Z","updated_at":"2017-11-14T02:37:31Z","author_association":"CONTRIBUTOR","body":"+1.\r\nI setup dreyfus/clouseau and cherry-picked this commit and ran the entire test bucket:\r\n```\r\n(venv)Tonys-MBP:test tonysun$ MANGO_TEXT_INDEXES=1 nosetests\r\n...................................................S.S.S.S............S.S.S.S............S.S.S.S.............................................................S................................................................................................................\r\n----------------------------------------------------------------------\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344127529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344137017","html_url":"https://github.com/apache/couchdb/issues/990#issuecomment-344137017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/990","id":344137017,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDEzNzAxNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T03:39:48Z","updated_at":"2017-11-14T03:39:48Z","author_association":"MEMBER","body":"If you've already set it up as single node, you don't have to repeat the setup steps after the reinstall.\r\n\r\n*Don't ever use the :5986 port for Fauxton.* Always use the :5984 port unless the instruction manual specifically tells you otherwise.\r\n\r\nhttp://127.0.0.1:5984/_utils should look fine and your setup steps should be fine as well.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344137017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344178806","html_url":"https://github.com/apache/couchdb/issues/988#issuecomment-344178806","issue_url":"https://api.github.com/repos/apache/couchdb/issues/988","id":344178806,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDE3ODgwNg==","user":{"login":"fkaempfer","id":2357885,"node_id":"MDQ6VXNlcjIzNTc4ODU=","avatar_url":"https://avatars.githubusercontent.com/u/2357885?v=4","gravatar_id":"","url":"https://api.github.com/users/fkaempfer","html_url":"https://github.com/fkaempfer","followers_url":"https://api.github.com/users/fkaempfer/followers","following_url":"https://api.github.com/users/fkaempfer/following{/other_user}","gists_url":"https://api.github.com/users/fkaempfer/gists{/gist_id}","starred_url":"https://api.github.com/users/fkaempfer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkaempfer/subscriptions","organizations_url":"https://api.github.com/users/fkaempfer/orgs","repos_url":"https://api.github.com/users/fkaempfer/repos","events_url":"https://api.github.com/users/fkaempfer/events{/privacy}","received_events_url":"https://api.github.com/users/fkaempfer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T08:16:35Z","updated_at":"2017-11-14T08:16:35Z","author_association":"CONTRIBUTOR","body":"Thanks for the fix! The error message helps to understand what exactly went wrong.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344178806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344267306","html_url":"https://github.com/apache/couchdb/issues/980#issuecomment-344267306","issue_url":"https://api.github.com/repos/apache/couchdb/issues/980","id":344267306,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDI2NzMwNg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T13:59:58Z","updated_at":"2017-11-14T13:59:58Z","author_association":"MEMBER","body":"Hi @vitaly-goot yes I hear you on this one. I'll note that there is some major refactoring of compaction underway in #806 which should significantly reduce the amount of time spent in the `merge` phase (right @davisp / @nickva ?). But I'm guessing there's still an opportunity to add instrumentation after that PR lans.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344267306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344280567","html_url":"https://github.com/apache/couchdb/issues/992#issuecomment-344280567","issue_url":"https://api.github.com/repos/apache/couchdb/issues/992","id":344280567,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDI4MDU2Nw==","user":{"login":"popojargo","id":9197078,"node_id":"MDQ6VXNlcjkxOTcwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9197078?v=4","gravatar_id":"","url":"https://api.github.com/users/popojargo","html_url":"https://github.com/popojargo","followers_url":"https://api.github.com/users/popojargo/followers","following_url":"https://api.github.com/users/popojargo/following{/other_user}","gists_url":"https://api.github.com/users/popojargo/gists{/gist_id}","starred_url":"https://api.github.com/users/popojargo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/popojargo/subscriptions","organizations_url":"https://api.github.com/users/popojargo/orgs","repos_url":"https://api.github.com/users/popojargo/repos","events_url":"https://api.github.com/users/popojargo/events{/privacy}","received_events_url":"https://api.github.com/users/popojargo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T14:45:05Z","updated_at":"2017-11-14T14:45:05Z","author_association":"MEMBER","body":"Perhaps this should be moved to https://github.com/apache/couchdb-fauxton","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344280567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344295685","html_url":"https://github.com/apache/couchdb/issues/455#issuecomment-344295685","issue_url":"https://api.github.com/repos/apache/couchdb/issues/455","id":344295685,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDI5NTY4NQ==","user":{"login":"MarcoDima","id":14995975,"node_id":"MDQ6VXNlcjE0OTk1OTc1","avatar_url":"https://avatars.githubusercontent.com/u/14995975?v=4","gravatar_id":"","url":"https://api.github.com/users/MarcoDima","html_url":"https://github.com/MarcoDima","followers_url":"https://api.github.com/users/MarcoDima/followers","following_url":"https://api.github.com/users/MarcoDima/following{/other_user}","gists_url":"https://api.github.com/users/MarcoDima/gists{/gist_id}","starred_url":"https://api.github.com/users/MarcoDima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MarcoDima/subscriptions","organizations_url":"https://api.github.com/users/MarcoDima/orgs","repos_url":"https://api.github.com/users/MarcoDima/repos","events_url":"https://api.github.com/users/MarcoDima/events{/privacy}","received_events_url":"https://api.github.com/users/MarcoDima/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T15:31:23Z","updated_at":"2017-11-14T15:31:23Z","author_association":"NONE","body":"I'm having a similar problem while trying to change the paths of the folders where couchdb finds spidermonkey and icu.\r\nI edited the rebar.config.script to modify spidermonkey path and it seems to work.\r\nSo is there a way to make the same with icu? I can't find where this path is set and so i'm not able to change it.\r\n\r\nI'm using Ubuntu 14.04, Spidermonkey 1.8.5 and icu4c-52_1 and couchdb-2.1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344295685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344310226","html_url":"https://github.com/apache/couchdb/issues/976#issuecomment-344310226","issue_url":"https://api.github.com/repos/apache/couchdb/issues/976","id":344310226,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDMxMDIyNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T16:14:54Z","updated_at":"2017-11-14T16:14:54Z","author_association":"CONTRIBUTOR","body":"Hi @tejaycar. I have seen it as well. Try using the latest CouchDB 2.1.1 (as of now) and see if you notice this behavior there too. Like @kocolosk pointed out we made some improvements in that area.\r\n\r\nBut in general for stats reporting there are a few corner cases left even with the latest changes. Specifically remember seeing that if target has all the documents and no updates were needed, then checkpointed source sequence stat would be stuck at 0. It was something about stats being updated during writes (so if no doc update happens, it stays at a default value). That is a bug and we should fix it.\r\n\r\nAlso, with 2.x CouchDB running as a cluster by default, accurate percentage completion becomes a bit tricky, as update sequence are not monotonically increasing integers anymore. In that case it might be a Futon issue, as we might have to change how we report progress.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344310226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344319864","html_url":"https://github.com/apache/couchdb/issues/980#issuecomment-344319864","issue_url":"https://api.github.com/repos/apache/couchdb/issues/980","id":344319864,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDMxOTg2NA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T16:43:29Z","updated_at":"2017-11-14T16:43:29Z","author_association":"MEMBER","body":"Yeap, #806 is held up waiting for PSE to land. Also I'm pretty sure I had a PR somewhere that added progress reporting during the second phase but I'm not able to find it just now. But the plan is definitely to add that with the work on revamping the compactor.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344319864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344327303","html_url":"https://github.com/apache/couchdb/issues/976#issuecomment-344327303","issue_url":"https://api.github.com/repos/apache/couchdb/issues/976","id":344327303,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDMyNzMwMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T17:05:07Z","updated_at":"2017-11-14T17:05:07Z","author_association":"MEMBER","body":"@nickva also see https://github.com/apache/couchdb/issues/984 , your problem may be exacerbated by this bug","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344327303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344365681","html_url":"https://github.com/apache/couchdb/issues/992#issuecomment-344365681","issue_url":"https://api.github.com/repos/apache/couchdb/issues/992","id":344365681,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDM2NTY4MQ==","user":{"login":"danikp","id":3479747,"node_id":"MDQ6VXNlcjM0Nzk3NDc=","avatar_url":"https://avatars.githubusercontent.com/u/3479747?v=4","gravatar_id":"","url":"https://api.github.com/users/danikp","html_url":"https://github.com/danikp","followers_url":"https://api.github.com/users/danikp/followers","following_url":"https://api.github.com/users/danikp/following{/other_user}","gists_url":"https://api.github.com/users/danikp/gists{/gist_id}","starred_url":"https://api.github.com/users/danikp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danikp/subscriptions","organizations_url":"https://api.github.com/users/danikp/orgs","repos_url":"https://api.github.com/users/danikp/repos","events_url":"https://api.github.com/users/danikp/events{/privacy}","received_events_url":"https://api.github.com/users/danikp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-14T19:12:56Z","updated_at":"2017-11-14T19:12:56Z","author_association":"NONE","body":"you are right, moved to apache/couchdb-fauxton#1022\r\nclosing here","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344365681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344503759","html_url":"https://github.com/apache/couchdb/issues/991#issuecomment-344503759","issue_url":"https://api.github.com/repos/apache/couchdb/issues/991","id":344503759,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDUwMzc1OQ==","user":{"login":"jerem","id":36156,"node_id":"MDQ6VXNlcjM2MTU2","avatar_url":"https://avatars.githubusercontent.com/u/36156?v=4","gravatar_id":"","url":"https://api.github.com/users/jerem","html_url":"https://github.com/jerem","followers_url":"https://api.github.com/users/jerem/followers","following_url":"https://api.github.com/users/jerem/following{/other_user}","gists_url":"https://api.github.com/users/jerem/gists{/gist_id}","starred_url":"https://api.github.com/users/jerem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerem/subscriptions","organizations_url":"https://api.github.com/users/jerem/orgs","repos_url":"https://api.github.com/users/jerem/repos","events_url":"https://api.github.com/users/jerem/events{/privacy}","received_events_url":"https://api.github.com/users/jerem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T07:01:16Z","updated_at":"2017-11-15T07:01:16Z","author_association":"NONE","body":"I am facing this problem on Windows with CouchDB 1.7.1 installer.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344503759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344534064","html_url":"https://github.com/apache/couchdb/issues/993#issuecomment-344534064","issue_url":"https://api.github.com/repos/apache/couchdb/issues/993","id":344534064,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDUzNDA2NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T09:24:21Z","updated_at":"2017-11-15T09:24:21Z","author_association":"MEMBER","body":"This is intentional, so upgrades of existing systems work.\r\n\r\n> maybe provide similar to local.ini a way to create a local vm.args that is not overwritten during upgrades.\r\n\r\nThat is my plan, but I don’t know when I get to that. You are welcome to help: https://github.com/janl/couchdb-mac-app","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344534064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344558459","html_url":"https://github.com/apache/couchdb/issues/996#issuecomment-344558459","issue_url":"https://api.github.com/repos/apache/couchdb/issues/996","id":344558459,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDU1ODQ1OQ==","user":{"login":"jer-gentoo","id":2178449,"node_id":"MDQ6VXNlcjIxNzg0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/2178449?v=4","gravatar_id":"","url":"https://api.github.com/users/jer-gentoo","html_url":"https://github.com/jer-gentoo","followers_url":"https://api.github.com/users/jer-gentoo/followers","following_url":"https://api.github.com/users/jer-gentoo/following{/other_user}","gists_url":"https://api.github.com/users/jer-gentoo/gists{/gist_id}","starred_url":"https://api.github.com/users/jer-gentoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jer-gentoo/subscriptions","organizations_url":"https://api.github.com/users/jer-gentoo/orgs","repos_url":"https://api.github.com/users/jer-gentoo/repos","events_url":"https://api.github.com/users/jer-gentoo/events{/privacy}","received_events_url":"https://api.github.com/users/jer-gentoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T10:59:09Z","updated_at":"2017-11-15T10:59:09Z","author_association":"NONE","body":"I'm not even sure what `ssl_certificate_max_depth` is supposed to do, but I tried raising it to no avail.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344558459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344564107","html_url":"https://github.com/apache/couchdb/issues/996#issuecomment-344564107","issue_url":"https://api.github.com/repos/apache/couchdb/issues/996","id":344564107,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDU2NDEwNw==","user":{"login":"jer-gentoo","id":2178449,"node_id":"MDQ6VXNlcjIxNzg0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/2178449?v=4","gravatar_id":"","url":"https://api.github.com/users/jer-gentoo","html_url":"https://github.com/jer-gentoo","followers_url":"https://api.github.com/users/jer-gentoo/followers","following_url":"https://api.github.com/users/jer-gentoo/following{/other_user}","gists_url":"https://api.github.com/users/jer-gentoo/gists{/gist_id}","starred_url":"https://api.github.com/users/jer-gentoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jer-gentoo/subscriptions","organizations_url":"https://api.github.com/users/jer-gentoo/orgs","repos_url":"https://api.github.com/users/jer-gentoo/repos","events_url":"https://api.github.com/users/jer-gentoo/events{/privacy}","received_events_url":"https://api.github.com/users/jer-gentoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T11:23:40Z","updated_at":"2017-11-15T11:27:48Z","author_association":"NONE","body":"```\r\n=INFO REPORT==== 15-Nov-2017::10:19:26 ===\r\nTLS client: In state certify at ssl_handshake.erl:1626 generated CLIENT ALERT: Fatal - Handshake Failure - {bad_cert,hostname_check_failed}\r\n```\r\nThat appears to point to `lib/ssl/src/ssl_certificate.erl:146`. So is this a problem in OTP 20? I'll try rolling that back.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344564107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344585505","html_url":"https://github.com/apache/couchdb/issues/996#issuecomment-344585505","issue_url":"https://api.github.com/repos/apache/couchdb/issues/996","id":344585505,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDU4NTUwNQ==","user":{"login":"jer-gentoo","id":2178449,"node_id":"MDQ6VXNlcjIxNzg0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/2178449?v=4","gravatar_id":"","url":"https://api.github.com/users/jer-gentoo","html_url":"https://github.com/jer-gentoo","followers_url":"https://api.github.com/users/jer-gentoo/followers","following_url":"https://api.github.com/users/jer-gentoo/following{/other_user}","gists_url":"https://api.github.com/users/jer-gentoo/gists{/gist_id}","starred_url":"https://api.github.com/users/jer-gentoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jer-gentoo/subscriptions","organizations_url":"https://api.github.com/users/jer-gentoo/orgs","repos_url":"https://api.github.com/users/jer-gentoo/repos","events_url":"https://api.github.com/users/jer-gentoo/events{/privacy}","received_events_url":"https://api.github.com/users/jer-gentoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T13:01:28Z","updated_at":"2017-11-15T13:01:28Z","author_association":"NONE","body":"Rolling back to OTP 19.3 did indeed fix the certification verification issue. So is it that OTP 20.1 is doing it wrong or was CouchDB 1.7.1 imperfectly adapted to the new TLS interface?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344585505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344600792","html_url":"https://github.com/apache/couchdb/issues/991#issuecomment-344600792","issue_url":"https://api.github.com/repos/apache/couchdb/issues/991","id":344600792,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDYwMDc5Mg==","user":{"login":"jerem","id":36156,"node_id":"MDQ6VXNlcjM2MTU2","avatar_url":"https://avatars.githubusercontent.com/u/36156?v=4","gravatar_id":"","url":"https://api.github.com/users/jerem","html_url":"https://github.com/jerem","followers_url":"https://api.github.com/users/jerem/followers","following_url":"https://api.github.com/users/jerem/following{/other_user}","gists_url":"https://api.github.com/users/jerem/gists{/gist_id}","starred_url":"https://api.github.com/users/jerem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerem/subscriptions","organizations_url":"https://api.github.com/users/jerem/orgs","repos_url":"https://api.github.com/users/jerem/repos","events_url":"https://api.github.com/users/jerem/events{/privacy}","received_events_url":"https://api.github.com/users/jerem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T14:01:44Z","updated_at":"2017-11-15T14:01:44Z","author_association":"NONE","body":"Another solution is proposed here: https://issues.apache.org/jira/browse/COUCHDB-2768","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344600792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344603120","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-344603120","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":344603120,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDYwMzEyMA==","user":{"login":"lyudmil","id":69157,"node_id":"MDQ6VXNlcjY5MTU3","avatar_url":"https://avatars.githubusercontent.com/u/69157?v=4","gravatar_id":"","url":"https://api.github.com/users/lyudmil","html_url":"https://github.com/lyudmil","followers_url":"https://api.github.com/users/lyudmil/followers","following_url":"https://api.github.com/users/lyudmil/following{/other_user}","gists_url":"https://api.github.com/users/lyudmil/gists{/gist_id}","starred_url":"https://api.github.com/users/lyudmil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyudmil/subscriptions","organizations_url":"https://api.github.com/users/lyudmil/orgs","repos_url":"https://api.github.com/users/lyudmil/repos","events_url":"https://api.github.com/users/lyudmil/events{/privacy}","received_events_url":"https://api.github.com/users/lyudmil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T14:10:15Z","updated_at":"2017-11-15T14:13:06Z","author_association":"NONE","body":"@wohali, I think this issue is not as specific to @thgautier92's setup as we might hope. I can confirm I have the same problem after applying the latest update of MacOS (10.13.1). I'm able to reproduce the problem without step 3 – just installing the binary application and verifying the install fails. The verification process claims to succeed in creating a view, but (1) it gets an error during the process, (2) the view is not present in the verification database, and (3) replication then fails, due to the number of docs being 1 fewer than expected (I think because the design doc never saves). Here's a screenshot right before the replication test failure:\r\n\r\n![screen shot 2017-11-15 at 3 55 43 pm](https://user-images.githubusercontent.com/69157/32840273-d8481efc-ca1f-11e7-92a9-f21e8fc95793.png)\r\n\r\nThere many crash reports in my system log related to CouchDB, all pretty much one of two types. One is:\r\n\r\n```\r\nProcess:               couchjs [11507]\r\nPath:                  /Applications/Apache CouchDB.app/Contents/Resources/couchdbx-core/bin/couchjs\r\nIdentifier:            couchjs\r\nVersion:               0\r\nCode Type:             X86-64 (Native)\r\nParent Process:        erl_child_setup [752]\r\nResponsible:           couchjs [11507]\r\nUser ID:               501\r\n\r\nDate/Time:             2017-11-15 15:58:26.219 +0200\r\nOS Version:            Mac OS X 10.13.1 (17B48)\r\nReport Version:        12\r\nAnonymous UUID:        D39DCAE6-734C-498E-F796-1FECDA8DD5CF\r\n\r\n\r\nTime Awake Since Boot: 950 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        0\r\n\r\nException Type:        EXC_CRASH (SIGABRT)\r\nException Codes:       0x0000000000000000, 0x0000000000000000\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Reason:    DYLD, [0x1] Library missing\r\n\r\nApplication Specific Information:\r\ndyld: launch, loading dependent libraries\r\n...\r\n```\r\n\r\nAnd here's the other:\r\n\r\n```\r\nProcess:               beam.smp [690]\r\nPath:                  /Applications/Apache CouchDB.app/Contents/Resources/couchdbx-core/lib/erlang/erts-6.1/bin/beam.smp\r\nIdentifier:            beam.smp\r\nVersion:               ???\r\nCode Type:             X86-64 (Native)\r\nParent Process:        Apache CouchDB [682]\r\nResponsible:           beam.smp [690]\r\nUser ID:               501\r\n\r\nDate/Time:             2017-11-14 17:06:00.744 +0200\r\nOS Version:            Mac OS X 10.13.1 (17B48)\r\nReport Version:        12\r\nAnonymous UUID:        D39DCAE6-734C-498E-F796-1FECDA8DD5CF\r\n\r\n\r\nTime Awake Since Boot: 1400 seconds\r\n\r\nSystem Integrity Protection: enabled\r\n\r\nCrashed Thread:        10\r\n\r\nException Type:        EXC_BAD_ACCESS (SIGSEGV)\r\nException Codes:       KERN_INVALID_ADDRESS at 0x0000000100000074\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Signal:    Segmentation fault: 11\r\nTermination Reason:    Namespace SIGNAL, Code 0xb\r\nTerminating Process:   exc handler [0]\r\n...\r\n```\r\n\r\nI'm available and willing to try things out on my Mac to help resolve this. Let me know how I might be useful.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344603120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344614632","html_url":"https://github.com/apache/couchdb/issues/993#issuecomment-344614632","issue_url":"https://api.github.com/repos/apache/couchdb/issues/993","id":344614632,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDYxNDYzMg==","user":{"login":"sinitean","id":24816136,"node_id":"MDQ6VXNlcjI0ODE2MTM2","avatar_url":"https://avatars.githubusercontent.com/u/24816136?v=4","gravatar_id":"","url":"https://api.github.com/users/sinitean","html_url":"https://github.com/sinitean","followers_url":"https://api.github.com/users/sinitean/followers","following_url":"https://api.github.com/users/sinitean/following{/other_user}","gists_url":"https://api.github.com/users/sinitean/gists{/gist_id}","starred_url":"https://api.github.com/users/sinitean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinitean/subscriptions","organizations_url":"https://api.github.com/users/sinitean/orgs","repos_url":"https://api.github.com/users/sinitean/repos","events_url":"https://api.github.com/users/sinitean/events{/privacy}","received_events_url":"https://api.github.com/users/sinitean/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T14:48:05Z","updated_at":"2017-11-15T14:48:05Z","author_association":"NONE","body":"I was pointing it out because it differs from the Unix build where it is set to 127.0.0.1.\nAs for the local vm.args alongside the one that is distributed, I was suggesting it as a cross platform thing not mac specific. \nIs there a recommendation how to change the setting in an existing system? Let’s say if I want to switch my install from localhost to 127.0.0.1?\nRight now, I would remove the existing couchdb, install a new one and then replicate. Is there a better way? \n\n> On Nov 15, 2017, at 4:24 AM, Jan Lehnardt <notifications@github.com> wrote:\n> \n> This is intentional, so upgrades of existing systems work.\n> \n> maybe provide similar to local.ini a way to create a local vm.args that is not overwritten during upgrades.\n> \n> That is my plan, but I don’t know when I get to that. You are welcome to help: https://github.com/janl/couchdb-mac-app <https://github.com/janl/couchdb-mac-app>\n> —\n> You are receiving this because you authored the thread.\n> Reply to this email directly, view it on GitHub <https://github.com/apache/couchdb/issues/993#issuecomment-344534064>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AXqqCCu9wDySOOJseP2Vuv0aAurytdRoks5s2q3MgaJpZM4Qdvu3>.\n> \n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344614632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344641623","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-344641623","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":344641623,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY0MTYyMw==","user":{"login":"lyudmil","id":69157,"node_id":"MDQ6VXNlcjY5MTU3","avatar_url":"https://avatars.githubusercontent.com/u/69157?v=4","gravatar_id":"","url":"https://api.github.com/users/lyudmil","html_url":"https://github.com/lyudmil","followers_url":"https://api.github.com/users/lyudmil/followers","following_url":"https://api.github.com/users/lyudmil/following{/other_user}","gists_url":"https://api.github.com/users/lyudmil/gists{/gist_id}","starred_url":"https://api.github.com/users/lyudmil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyudmil/subscriptions","organizations_url":"https://api.github.com/users/lyudmil/orgs","repos_url":"https://api.github.com/users/lyudmil/repos","events_url":"https://api.github.com/users/lyudmil/events{/privacy}","received_events_url":"https://api.github.com/users/lyudmil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T16:09:47Z","updated_at":"2017-11-15T16:09:47Z","author_association":"NONE","body":"I updated a number of other components on my system (including Erlang), and I no longer get the crash reports I described previously. I do see this when I try to run the install verification, though:\r\n\r\n```\r\ndefault\t18:04:59.473126 +0200\tkernel\tProcess[11374] crashed: couchjs. Too many corpses being created.\r\ndefault\t18:04:59.484397 +0200\ttaskgated\tMacOS error: -67062\r\ndefault\t18:04:59.490932 +0200\tkernel\tProcess[11375] crashed: couchjs. Too many corpses being created.\r\ndefault\t18:04:59.503040 +0200\ttaskgated\tMacOS error: -67062\r\ndefault\t18:04:59.509553 +0200\tkernel\tProcess[11376] crashed: couchjs. Too many corpses being created.\r\ndefault\t18:04:59.521725 +0200\ttaskgated\tMacOS error: -67062\r\ndefault\t18:04:59.528253 +0200\tkernel\tProcess[11377] crashed: couchjs. Too many corpses being created.\r\ndefault\t18:04:59.542521 +0200\ttaskgated\tMacOS error: -67062\r\ndefault\t18:04:59.553778 +0200\tkernel\tProcess[11378] crashed: couchjs. Too many corpses being created.\r\ndefault\t18:04:59.570313 +0200\ttaskgated\tMacOS error: -67062\r\n```\r\n\r\nThe error coming from `taskgated` is a security exception. It looks like macOS is blocking `couchjs` from running on security grounds.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344641623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344654880","html_url":"https://github.com/apache/couchdb/pull/995#issuecomment-344654880","issue_url":"https://api.github.com/repos/apache/couchdb/issues/995","id":344654880,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY1NDg4MA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T16:50:06Z","updated_at":"2017-11-15T16:50:06Z","author_association":"MEMBER","body":"This seems pretty solid now so I think is ready for review. I've run the latest commit through Travis >10 times without a failure. 697345f needs to be removed before merging to master.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344654880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344657885","html_url":"https://github.com/apache/couchdb/pull/995#issuecomment-344657885","issue_url":"https://api.github.com/repos/apache/couchdb/issues/995","id":344657885,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY1Nzg4NQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T16:59:29Z","updated_at":"2017-11-15T16:59:29Z","author_association":"MEMBER","body":"also worth adding that this brings the time to run the Mango tests down from ~15 minutes to 20 seconds on my local machine.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344657885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344659864","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-344659864","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":344659864,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY1OTg2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T17:05:54Z","updated_at":"2017-11-15T17:05:54Z","author_association":"MEMBER","body":"Again I can't help diagnose as I don't have a Mac handy. @janl will need to follow up with you as he is responsible for the macOS package.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344659864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344683278","html_url":"https://github.com/apache/couchdb/pull/995#issuecomment-344683278","issue_url":"https://api.github.com/repos/apache/couchdb/issues/995","id":344683278,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY4MzI3OA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T18:24:54Z","updated_at":"2017-11-15T18:24:54Z","author_association":"CONTRIBUTOR","body":"+1, smart use of list_indexes to see if the index is available to use and to make sure our index is deleted. let's give this a try","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344683278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344692039","html_url":"https://github.com/apache/couchdb/pull/958#issuecomment-344692039","issue_url":"https://api.github.com/repos/apache/couchdb/issues/958","id":344692039,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY5MjAzOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T18:55:04Z","updated_at":"2017-11-15T18:55:04Z","author_association":"MEMBER","body":"@kocolosk Toying with the idea of removing the stem vs full_stem distinction by checking for duplicate keys. Looks like you looked at this earlier once but I've gone and replaced the khash with an Erlang set after some micro profiling showed it wasn't a huge difference in speed (~10ms with 5k lookup/insert ops). Felt kinda icky using a khash for that to begin with.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344692039/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344693827","html_url":"https://github.com/apache/couchdb/pull/958#issuecomment-344693827","issue_url":"https://api.github.com/repos/apache/couchdb/issues/958","id":344693827,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDY5MzgyNw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-15T19:01:15Z","updated_at":"2017-11-15T19:01:15Z","author_association":"MEMBER","body":"Also the silly microbenchmark for khash vs sets is here:\r\n\r\nhttps://gist.github.com/davisp/e0d78cad59919c8fcea95de3ab540a2c","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344693827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344791666","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-344791666","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":344791666,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDc5MTY2Ng==","user":{"login":"sinitean","id":24816136,"node_id":"MDQ6VXNlcjI0ODE2MTM2","avatar_url":"https://avatars.githubusercontent.com/u/24816136?v=4","gravatar_id":"","url":"https://api.github.com/users/sinitean","html_url":"https://github.com/sinitean","followers_url":"https://api.github.com/users/sinitean/followers","following_url":"https://api.github.com/users/sinitean/following{/other_user}","gists_url":"https://api.github.com/users/sinitean/gists{/gist_id}","starred_url":"https://api.github.com/users/sinitean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinitean/subscriptions","organizations_url":"https://api.github.com/users/sinitean/orgs","repos_url":"https://api.github.com/users/sinitean/repos","events_url":"https://api.github.com/users/sinitean/events{/privacy}","received_events_url":"https://api.github.com/users/sinitean/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T02:03:02Z","updated_at":"2017-11-16T02:03:02Z","author_association":"NONE","body":"I'm seeing a similar issue on OSX 10.13.1. It happens with any view or if you decide to replicate anything that has a design doc attached. \r\nThe couchdb.log entry is:\r\n[info] 2017-11-15T23:05:22.685021Z couchdb@localhost <0.218.0> -------- couch_proc_manager <0.24207.0> died normal\r\n[error] 2017-11-15T23:05:22.685029Z couchdb@localhost <0.9320.0> c5d0527261 OS Process Error <0.24207.0> :: {os_process_error,{exit_status,134}}\r\n\r\nThe moment I try to create a view the message above floods the log and memory consumption on my mac maxes out (I have 40gig of memory). I end up killing couch before it kills my machine. \r\n\r\nI see the upgrade nodes for 2.1.1 and wonder if it is related to #914 and #916. \r\nhttps://github.com/apache/couchdb/pull/916\r\nhttps://github.com/apache/couchdb/pull/914\r\n\r\nThe problems are not limited to my Mac install.\r\nI see also similar errors on ubuntu 16.04 on 2 separate servers.\r\nUsing curl, trying a replication of a db (\"mydb\") that contains views get me: \r\n{\"error\":\"error\",\"reason\":\"{http_request_failed,\\\"GET\\\",\\n    \\\"https://admin:*****@127.0.0.1:5984/mydb/\\\",\\n    {error,{error,{conn_failed,{error,{tls_alert,\\\"record overflow\\\"}}}}}}\"}\r\n\r\nIf I 'm trying to create or delete a db via curl:\r\n curl -X PUT http://admin:****@127.0.0.1:5984/testdb\r\n or \r\ncurl -X DELETE http://admin:****@127.0.0.1:5984/testdb\r\n I get the following error:\r\n{\"error\":\"error\",\"reason\":\"internal_server_error\"}\r\nInterestingly, the db is created / deleted as it can be seen on Fauxton or by doing a curl get _all_dbs.\r\nThis works also with the verifydb test. If you run the verification step you get an error and then in Fauxton you see it greyed out with \"database could not be loaded\". But you can remove (and re-add) it via curl despite getting the error.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344791666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344970259","html_url":"https://github.com/apache/couchdb/issues/535#issuecomment-344970259","issue_url":"https://api.github.com/repos/apache/couchdb/issues/535","id":344970259,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NDk3MDI1OQ==","user":{"login":"ptitjes","id":64956,"node_id":"MDQ6VXNlcjY0OTU2","avatar_url":"https://avatars.githubusercontent.com/u/64956?v=4","gravatar_id":"","url":"https://api.github.com/users/ptitjes","html_url":"https://github.com/ptitjes","followers_url":"https://api.github.com/users/ptitjes/followers","following_url":"https://api.github.com/users/ptitjes/following{/other_user}","gists_url":"https://api.github.com/users/ptitjes/gists{/gist_id}","starred_url":"https://api.github.com/users/ptitjes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptitjes/subscriptions","organizations_url":"https://api.github.com/users/ptitjes/orgs","repos_url":"https://api.github.com/users/ptitjes/repos","events_url":"https://api.github.com/users/ptitjes/events{/privacy}","received_events_url":"https://api.github.com/users/ptitjes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T16:05:11Z","updated_at":"2017-11-16T16:05:11Z","author_association":"NONE","body":"@nickva This issue is not fixed. Could you please reopen ?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/344970259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345031204","html_url":"https://github.com/apache/couchdb/issues/976#issuecomment-345031204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/976","id":345031204,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTAzMTIwNA==","user":{"login":"tejaycar","id":3846348,"node_id":"MDQ6VXNlcjM4NDYzNDg=","avatar_url":"https://avatars.githubusercontent.com/u/3846348?v=4","gravatar_id":"","url":"https://api.github.com/users/tejaycar","html_url":"https://github.com/tejaycar","followers_url":"https://api.github.com/users/tejaycar/followers","following_url":"https://api.github.com/users/tejaycar/following{/other_user}","gists_url":"https://api.github.com/users/tejaycar/gists{/gist_id}","starred_url":"https://api.github.com/users/tejaycar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tejaycar/subscriptions","organizations_url":"https://api.github.com/users/tejaycar/orgs","repos_url":"https://api.github.com/users/tejaycar/repos","events_url":"https://api.github.com/users/tejaycar/events{/privacy}","received_events_url":"https://api.github.com/users/tejaycar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T19:11:43Z","updated_at":"2017-11-16T19:11:43Z","author_association":"NONE","body":"Unfortunately, the breaking changes in the couch 2.0 changes stream prevent\nus from upgrading at this time.\n\nOn Tue, Nov 14, 2017 at 9:15 AM, Nick Vatamaniuc <notifications@github.com>\nwrote:\n\n> Hi @tejaycar <https://github.com/tejaycar>. I have seen it as well. Try\n> using the latest CouchDB 2.1.1 (as of now) and see if you notice this\n> behavior there too. Like @kocolosk <https://github.com/kocolosk> pointed\n> out we made some improvements in that area.\n>\n> But in general for stats reporting there are a few corner cases left even\n> with the latest changes. Specifically remember seeing that if target has\n> all the documents and no updates were needed, then checkpointed source\n> sequence stat would be stuck at 0. It was something about stats being\n> updated during writes (so if no doc update happens, it stays at a default\n> value). That is a bug and we should fix it.\n>\n> Also, with 2.x CouchDB running as a cluster by default, accurate\n> percentage completion becomes a bit tricky, as update sequence are not\n> monotonically increasing integers anymore. In that case it might be a Futon\n> issue, as we might have to change how we report progress.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/976#issuecomment-344310226>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/ADqwzBuQ2oZqGTpkAzKAz4HL7FBScUrmks5s2byFgaJpZM4QYozq>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345031204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345059672","html_url":"https://github.com/apache/couchdb/issues/1001#issuecomment-345059672","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1001","id":345059672,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA1OTY3Mg==","user":{"login":"starting","id":306779,"node_id":"MDQ6VXNlcjMwNjc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/306779?v=4","gravatar_id":"","url":"https://api.github.com/users/starting","html_url":"https://github.com/starting","followers_url":"https://api.github.com/users/starting/followers","following_url":"https://api.github.com/users/starting/following{/other_user}","gists_url":"https://api.github.com/users/starting/gists{/gist_id}","starred_url":"https://api.github.com/users/starting/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/starting/subscriptions","organizations_url":"https://api.github.com/users/starting/orgs","repos_url":"https://api.github.com/users/starting/repos","events_url":"https://api.github.com/users/starting/events{/privacy}","received_events_url":"https://api.github.com/users/starting/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T20:56:05Z","updated_at":"2017-11-16T20:57:47Z","author_association":"NONE","body":"Following code is to avoid compaction failure when document not found in the db but only in index. \r\n[patch_couch_compaction.txt](https://github.com/apache/couchdb/files/1480225/patch_couch_compaction.txt)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345059672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345068280","html_url":"https://github.com/apache/couchdb/issues/999#issuecomment-345068280","issue_url":"https://api.github.com/repos/apache/couchdb/issues/999","id":345068280,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA2ODI4MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T21:28:30Z","updated_at":"2017-11-16T21:28:30Z","author_association":"MEMBER","body":"This is an Erlang function, not a CouchDB one.\r\n\r\n`export ERL_EPMD_ADDRESS=127.0.0.1` before launching CouchDB (and epmd) to limit epmd to bind to localhost only.\r\n\r\nYou could also launch epmd yourself with the above setting before launching CouchDB if you preferred.\r\n\r\nDocumentation here: http://erlang.org/doc/man/epmd.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345068280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345073516","html_url":"https://github.com/apache/couchdb/issues/1000#issuecomment-345073516","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1000","id":345073516,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA3MzUxNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T21:48:39Z","updated_at":"2017-11-16T21:48:39Z","author_association":"CONTRIBUTOR","body":"Nice find, @flimzy !\r\n\r\nYup looks like a bug. I see the job completed, so it is probably right in the transition between the running and completed state.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345073516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345078329","html_url":"https://github.com/apache/couchdb/issues/1001#issuecomment-345078329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1001","id":345078329,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA3ODMyOQ==","user":{"login":"starting","id":306779,"node_id":"MDQ6VXNlcjMwNjc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/306779?v=4","gravatar_id":"","url":"https://api.github.com/users/starting","html_url":"https://github.com/starting","followers_url":"https://api.github.com/users/starting/followers","following_url":"https://api.github.com/users/starting/following{/other_user}","gists_url":"https://api.github.com/users/starting/gists{/gist_id}","starred_url":"https://api.github.com/users/starting/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/starting/subscriptions","organizations_url":"https://api.github.com/users/starting/orgs","repos_url":"https://api.github.com/users/starting/repos","events_url":"https://api.github.com/users/starting/events{/privacy}","received_events_url":"https://api.github.com/users/starting/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T22:07:20Z","updated_at":"2017-11-16T22:07:20Z","author_association":"NONE","body":"Reopening to commit the code to the fork and send pull request. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345078329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345084862","html_url":"https://github.com/apache/couchdb/issues/1002#issuecomment-345084862","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1002","id":345084862,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTA4NDg2Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-16T22:34:23Z","updated_at":"2017-11-16T22:34:23Z","author_association":"CONTRIBUTOR","body":"Order of cluster setup:\r\n\r\nStart state is empty data dir, stopped couchdb service on both cluster nodes\r\n\r\nEach is then started and basic dbs created (_users, _replicator etc)\r\n\r\nThen the cluster setup is done on an arbitrary node\r\n\r\n `PUT /_nodes/nodename`\r\n\r\n\r\n\"One thing I'm unsure of, I'm using port 5986 for cluster setup, is that still necessary?\"\r\n\r\nAlso in case it's relevant, I do get some log errors initially: \r\n``` \r\n[error] 2017-11-16T22:15:43.405527Z couchdb@1 <0.454.0> xxx Request to create N=2 DB but only 1 node(s)\r\n\r\n[error] 2017-11-16T22:15:44.524321Z couchdb@1 <0.486.0> xxx Request to create N=2 DB but only 1 node(s)\r\n\r\n[error] 2017-11-16T22:15:45.655681Z couchdb@1 Request to create N=2 DB but only 1 node(s) \r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345084862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345119933","html_url":"https://github.com/apache/couchdb/pull/1003#issuecomment-345119933","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1003","id":345119933,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTExOTkzMw==","user":{"login":"starting","id":306779,"node_id":"MDQ6VXNlcjMwNjc3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/306779?v=4","gravatar_id":"","url":"https://api.github.com/users/starting","html_url":"https://github.com/starting","followers_url":"https://api.github.com/users/starting/followers","following_url":"https://api.github.com/users/starting/following{/other_user}","gists_url":"https://api.github.com/users/starting/gists{/gist_id}","starred_url":"https://api.github.com/users/starting/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/starting/subscriptions","organizations_url":"https://api.github.com/users/starting/orgs","repos_url":"https://api.github.com/users/starting/repos","events_url":"https://api.github.com/users/starting/events{/privacy}","received_events_url":"https://api.github.com/users/starting/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T01:43:52Z","updated_at":"2017-11-17T01:43:52Z","author_association":"NONE","body":"Seems CI fails continuously, anyway to get through this? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345119933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345133374","html_url":"https://github.com/apache/couchdb/issues/991#issuecomment-345133374","issue_url":"https://api.github.com/repos/apache/couchdb/issues/991","id":345133374,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTEzMzM3NA==","user":{"login":"jerem","id":36156,"node_id":"MDQ6VXNlcjM2MTU2","avatar_url":"https://avatars.githubusercontent.com/u/36156?v=4","gravatar_id":"","url":"https://api.github.com/users/jerem","html_url":"https://github.com/jerem","followers_url":"https://api.github.com/users/jerem/followers","following_url":"https://api.github.com/users/jerem/following{/other_user}","gists_url":"https://api.github.com/users/jerem/gists{/gist_id}","starred_url":"https://api.github.com/users/jerem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jerem/subscriptions","organizations_url":"https://api.github.com/users/jerem/orgs","repos_url":"https://api.github.com/users/jerem/repos","events_url":"https://api.github.com/users/jerem/events{/privacy}","received_events_url":"https://api.github.com/users/jerem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T03:13:19Z","updated_at":"2017-11-17T03:13:19Z","author_association":"NONE","body":"Anyone available to review https://github.com/apache/couchdb/pull/997?\r\nIt's a pretty critical bug as it makes CouchDB 1.7.1 unusable on Windows.\r\n\r\n(ping @dch, @willholley, @janl)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345133374/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181089","html_url":"https://github.com/apache/couchdb/issues/1002#issuecomment-345181089","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1002","id":345181089,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4MTA4OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T08:45:19Z","updated_at":"2017-11-17T08:45:19Z","author_association":"MEMBER","body":"Invalid bug - the _users/_replicator DBs are being created prior to the cluster being joined together, right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181360","html_url":"https://github.com/apache/couchdb/pull/1003#issuecomment-345181360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1003","id":345181360,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4MTM2MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T08:46:30Z","updated_at":"2017-11-17T08:46:30Z","author_association":"MEMBER","body":"You want the 1.7.x branch. 1.6 is no longer under development nor is it supported, see https://blog.couchdb.org/2017/11/14/apache-couchdb-cve-2017-12635-and-cve-2017-12636/\r\n\r\nPlease resubmit.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181549","html_url":"https://github.com/apache/couchdb/issues/991#issuecomment-345181549","issue_url":"https://api.github.com/repos/apache/couchdb/issues/991","id":345181549,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4MTU0OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T08:47:30Z","updated_at":"2017-11-17T08:47:30Z","author_association":"MEMBER","body":"One workaround is to install CouchDB 1.7.1 to a path without spaces, such as `C:\\CouchDB`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345181549/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345185906","html_url":"https://github.com/apache/couchdb/issues/999#issuecomment-345185906","issue_url":"https://api.github.com/repos/apache/couchdb/issues/999","id":345185906,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTE4NTkwNg==","user":{"login":"ArchangeGabriel","id":490531,"node_id":"MDQ6VXNlcjQ5MDUzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/490531?v=4","gravatar_id":"","url":"https://api.github.com/users/ArchangeGabriel","html_url":"https://github.com/ArchangeGabriel","followers_url":"https://api.github.com/users/ArchangeGabriel/followers","following_url":"https://api.github.com/users/ArchangeGabriel/following{/other_user}","gists_url":"https://api.github.com/users/ArchangeGabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/ArchangeGabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArchangeGabriel/subscriptions","organizations_url":"https://api.github.com/users/ArchangeGabriel/orgs","repos_url":"https://api.github.com/users/ArchangeGabriel/repos","events_url":"https://api.github.com/users/ArchangeGabriel/events{/privacy}","received_events_url":"https://api.github.com/users/ArchangeGabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T09:07:47Z","updated_at":"2017-11-17T09:07:47Z","author_association":"NONE","body":"Thanks, this helped a lot.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345185906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345215578","html_url":"https://github.com/apache/couchdb/issues/1004#issuecomment-345215578","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1004","id":345215578,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTIxNTU3OA==","user":{"login":"lyudmil","id":69157,"node_id":"MDQ6VXNlcjY5MTU3","avatar_url":"https://avatars.githubusercontent.com/u/69157?v=4","gravatar_id":"","url":"https://api.github.com/users/lyudmil","html_url":"https://github.com/lyudmil","followers_url":"https://api.github.com/users/lyudmil/followers","following_url":"https://api.github.com/users/lyudmil/following{/other_user}","gists_url":"https://api.github.com/users/lyudmil/gists{/gist_id}","starred_url":"https://api.github.com/users/lyudmil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyudmil/subscriptions","organizations_url":"https://api.github.com/users/lyudmil/orgs","repos_url":"https://api.github.com/users/lyudmil/repos","events_url":"https://api.github.com/users/lyudmil/events{/privacy}","received_events_url":"https://api.github.com/users/lyudmil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T11:10:21Z","updated_at":"2017-11-17T11:10:21Z","author_association":"NONE","body":"I'm pretty sure this is a duplicate of #979.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345215578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345231106","html_url":"https://github.com/apache/couchdb/issues/1004#issuecomment-345231106","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1004","id":345231106,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTIzMTEwNg==","user":{"login":"halloweenman","id":10757745,"node_id":"MDQ6VXNlcjEwNzU3NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/10757745?v=4","gravatar_id":"","url":"https://api.github.com/users/halloweenman","html_url":"https://github.com/halloweenman","followers_url":"https://api.github.com/users/halloweenman/followers","following_url":"https://api.github.com/users/halloweenman/following{/other_user}","gists_url":"https://api.github.com/users/halloweenman/gists{/gist_id}","starred_url":"https://api.github.com/users/halloweenman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halloweenman/subscriptions","organizations_url":"https://api.github.com/users/halloweenman/orgs","repos_url":"https://api.github.com/users/halloweenman/repos","events_url":"https://api.github.com/users/halloweenman/events{/privacy}","received_events_url":"https://api.github.com/users/halloweenman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T12:27:09Z","updated_at":"2017-11-17T12:27:57Z","author_association":"NONE","body":"You may be correct. When completing verify the status shows a tick (passed) against create view. The only failure indicated by a cross is replication.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345231106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345260948","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-345260948","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":345260948,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTI2MDk0OA==","user":{"login":"TomArbuckle","id":25199520,"node_id":"MDQ6VXNlcjI1MTk5NTIw","avatar_url":"https://avatars.githubusercontent.com/u/25199520?v=4","gravatar_id":"","url":"https://api.github.com/users/TomArbuckle","html_url":"https://github.com/TomArbuckle","followers_url":"https://api.github.com/users/TomArbuckle/followers","following_url":"https://api.github.com/users/TomArbuckle/following{/other_user}","gists_url":"https://api.github.com/users/TomArbuckle/gists{/gist_id}","starred_url":"https://api.github.com/users/TomArbuckle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TomArbuckle/subscriptions","organizations_url":"https://api.github.com/users/TomArbuckle/orgs","repos_url":"https://api.github.com/users/TomArbuckle/repos","events_url":"https://api.github.com/users/TomArbuckle/events{/privacy}","received_events_url":"https://api.github.com/users/TomArbuckle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T14:38:54Z","updated_at":"2017-11-17T14:38:54Z","author_association":"NONE","body":"@wohali \r\n\r\nConcerning the missing library problem, continuing on from the previous report by @lyudmil (quoting previous text)\r\n\r\n```\r\nException Type:        EXC_CRASH (SIGABRT)\r\nException Codes:       0x0000000000000000, 0x0000000000000000\r\nException Note:        EXC_CORPSE_NOTIFY\r\n\r\nTermination Reason:    DYLD, [0x1] Library missing\r\n\r\nApplication Specific Information:\r\ndyld: launch, loading dependent libraries\r\n```\r\n\r\nI see the error in the macOS console User reports (macOS 10.12.6) continues as\r\n\r\n```\r\nApplication Specific Information:\r\ndyld: launch, loading dependent libraries\r\n\r\nDyld Error Message:\r\n  Library not loaded: /usr/local/Cellar/nspr/4.17/lib/libnspr4.dylib\r\n  Referenced from: /Applications/Apache CouchDB.app/Contents/Resources/couchdbx-core/*/libplds4.dylib\r\n  Reason: image not found\r\n```\r\n\r\nIn other words, the Macintosh application binary has a dependency on an external library which is not distributed as part of the download and may not be present on users' machines.\r\n\r\nIt's a packaging issue.\r\n\r\nHTH.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345260948/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345368324","html_url":"https://github.com/apache/couchdb/pull/1005#issuecomment-345368324","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1005","id":345368324,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTM2ODMyNA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T21:20:32Z","updated_at":"2017-11-17T21:26:24Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nGood catch\r\n\r\nI'll merge as soon as Travis CI passes.\r\n\r\nThank you for your contribution!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345368324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345374903","html_url":"https://github.com/apache/couchdb/issues/980#issuecomment-345374903","issue_url":"https://api.github.com/repos/apache/couchdb/issues/980","id":345374903,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTM3NDkwMw==","user":{"login":"vitaly-goot","id":6166649,"node_id":"MDQ6VXNlcjYxNjY2NDk=","avatar_url":"https://avatars.githubusercontent.com/u/6166649?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaly-goot","html_url":"https://github.com/vitaly-goot","followers_url":"https://api.github.com/users/vitaly-goot/followers","following_url":"https://api.github.com/users/vitaly-goot/following{/other_user}","gists_url":"https://api.github.com/users/vitaly-goot/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaly-goot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaly-goot/subscriptions","organizations_url":"https://api.github.com/users/vitaly-goot/orgs","repos_url":"https://api.github.com/users/vitaly-goot/repos","events_url":"https://api.github.com/users/vitaly-goot/events{/privacy}","received_events_url":"https://api.github.com/users/vitaly-goot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T21:49:04Z","updated_at":"2017-11-17T21:49:04Z","author_association":"CONTRIBUTOR","body":"Submitted my workaround for that issue (see #1006) \r\nTesting it on older CouchDB-1.6 (which we are running). Looking good. \r\nI rebased all relevant 1.6 changes with yours recent 2.1 code line (but never tested).\r\n\r\nThis change will not report the progress of the `merge` phase per se but it is useful enough for us since we want to learn about disk burn rate and disk overhead to get better capacity planning. \r\n\r\nTo get proper emsort progress reporting, it seems like emsort:get_state() needs to be changed to return additional information (other than Root). In fact, two counters could surface (added counter and merged counter).  That state is saved on disk by couch_db_updater (via #comp_header.meta_state). It seems that format of that state can be changed safely since this is all temporary compacted files. \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345374903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345393958","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-345393958","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":345393958,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTM5Mzk1OA==","user":{"login":"martinleopold","id":1692826,"node_id":"MDQ6VXNlcjE2OTI4MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1692826?v=4","gravatar_id":"","url":"https://api.github.com/users/martinleopold","html_url":"https://github.com/martinleopold","followers_url":"https://api.github.com/users/martinleopold/followers","following_url":"https://api.github.com/users/martinleopold/following{/other_user}","gists_url":"https://api.github.com/users/martinleopold/gists{/gist_id}","starred_url":"https://api.github.com/users/martinleopold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinleopold/subscriptions","organizations_url":"https://api.github.com/users/martinleopold/orgs","repos_url":"https://api.github.com/users/martinleopold/repos","events_url":"https://api.github.com/users/martinleopold/events{/privacy}","received_events_url":"https://api.github.com/users/martinleopold/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-17T23:32:55Z","updated_at":"2017-11-17T23:32:55Z","author_association":"NONE","body":"I can confirm this, @TomArbuckle. Since `/usr/local/Cellar` is the default location for homebrew packages, I tried doing a `brew install nspr`. Now I can sucessfully verify my CouchDB 2.1.1 installation on macOS 10.13.1.\r\n\r\nBefore:\r\n<img width=\"1124\" alt=\"screen shot 2017-11-18 at 00 05 55\" src=\"https://user-images.githubusercontent.com/1692826/32973464-ed05faa6-cbf7-11e7-8bc4-13266c057b30.png\">\r\n\r\nAfter:\r\n<img width=\"848\" alt=\"screen shot 2017-11-18 at 00 28 32\" src=\"https://user-images.githubusercontent.com/1692826/32973448-d482cefa-cbf7-11e7-80b8-6645eb7c449a.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345393958/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345409041","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-345409041","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":345409041,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTQwOTA0MQ==","user":{"login":"sinitean","id":24816136,"node_id":"MDQ6VXNlcjI0ODE2MTM2","avatar_url":"https://avatars.githubusercontent.com/u/24816136?v=4","gravatar_id":"","url":"https://api.github.com/users/sinitean","html_url":"https://github.com/sinitean","followers_url":"https://api.github.com/users/sinitean/followers","following_url":"https://api.github.com/users/sinitean/following{/other_user}","gists_url":"https://api.github.com/users/sinitean/gists{/gist_id}","starred_url":"https://api.github.com/users/sinitean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sinitean/subscriptions","organizations_url":"https://api.github.com/users/sinitean/orgs","repos_url":"https://api.github.com/users/sinitean/repos","events_url":"https://api.github.com/users/sinitean/events{/privacy}","received_events_url":"https://api.github.com/users/sinitean/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-18T01:47:27Z","updated_at":"2017-11-18T01:47:27Z","author_association":"NONE","body":"I’m also on OS X 10.13.1. I checked under the os x console my user reports logs and found the same termination reason in the couchjs crash logs. I installed nspr via brew and the install is working normally again. The verification succeeds, views creation works and replication works. I’m a happy camper again :-)\n\n\n\n> On Nov 17, 2017, at 6:33 PM, Martin Leopold <notifications@github.com> wrote:\n> \n> I can confirm this, @TomArbuckle <https://github.com/tomarbuckle>. Since /usr/local/Cellar is the default location for homebrew packages, I tried doing a brew install nspr. Now I can sucessfully verify my CouchDB 2.1.1 installation on macOS 10.13.1.\n> \n> Before:\n>  <https://user-images.githubusercontent.com/1692826/32973464-ed05faa6-cbf7-11e7-8bc4-13266c057b30.png>\n> After:\n>  <https://user-images.githubusercontent.com/1692826/32973448-d482cefa-cbf7-11e7-80b8-6645eb7c449a.png>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub <https://github.com/apache/couchdb/issues/979#issuecomment-345393958>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AXqqCJo2zct-6N_g-6_YLbFDPDt-aMVaks5s3hesgaJpZM4QZzzF>.\n> \n\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345409041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345469616","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-345469616","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":345469616,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTQ2OTYxNg==","user":{"login":"dantelepoole","id":32337322,"node_id":"MDQ6VXNlcjMyMzM3MzIy","avatar_url":"https://avatars.githubusercontent.com/u/32337322?v=4","gravatar_id":"","url":"https://api.github.com/users/dantelepoole","html_url":"https://github.com/dantelepoole","followers_url":"https://api.github.com/users/dantelepoole/followers","following_url":"https://api.github.com/users/dantelepoole/following{/other_user}","gists_url":"https://api.github.com/users/dantelepoole/gists{/gist_id}","starred_url":"https://api.github.com/users/dantelepoole/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dantelepoole/subscriptions","organizations_url":"https://api.github.com/users/dantelepoole/orgs","repos_url":"https://api.github.com/users/dantelepoole/repos","events_url":"https://api.github.com/users/dantelepoole/events{/privacy}","received_events_url":"https://api.github.com/users/dantelepoole/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-18T20:38:47Z","updated_at":"2017-11-18T20:38:47Z","author_association":"NONE","body":"Installing nspr with brew fixed the same problem for me as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345469616/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345572521","html_url":"https://github.com/apache/couchdb/issues/1009#issuecomment-345572521","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1009","id":345572521,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTU3MjUyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T02:03:35Z","updated_at":"2017-11-20T02:03:35Z","author_association":"MEMBER","body":"http://docs.couchdb.org/en/2.1.1/whatsnew/2.1.html#upgrade-notes and read the first bullet point carefully.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345572521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345641688","html_url":"https://github.com/apache/couchdb/issues/991#issuecomment-345641688","issue_url":"https://api.github.com/repos/apache/couchdb/issues/991","id":345641688,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTY0MTY4OA==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T09:39:55Z","updated_at":"2017-11-20T09:39:55Z","author_association":"CONTRIBUTOR","body":"@jerem we will fix this in the next release, but I'm not sure whether we really want to do a 1.7.2 just for this. I'll ask the other devs about whether I just patch the windows binary release for this issue, let's continue the discussion on your greatly appreciated PR 👏 🚀 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345641688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345651733","html_url":"https://github.com/apache/couchdb/issues/1004#issuecomment-345651733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1004","id":345651733,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTY1MTczMw==","user":{"login":"halloweenman","id":10757745,"node_id":"MDQ6VXNlcjEwNzU3NzQ1","avatar_url":"https://avatars.githubusercontent.com/u/10757745?v=4","gravatar_id":"","url":"https://api.github.com/users/halloweenman","html_url":"https://github.com/halloweenman","followers_url":"https://api.github.com/users/halloweenman/followers","following_url":"https://api.github.com/users/halloweenman/following{/other_user}","gists_url":"https://api.github.com/users/halloweenman/gists{/gist_id}","starred_url":"https://api.github.com/users/halloweenman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halloweenman/subscriptions","organizations_url":"https://api.github.com/users/halloweenman/orgs","repos_url":"https://api.github.com/users/halloweenman/repos","events_url":"https://api.github.com/users/halloweenman/events{/privacy}","received_events_url":"https://api.github.com/users/halloweenman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T10:17:01Z","updated_at":"2017-11-20T10:17:01Z","author_association":"NONE","body":"This is same issue as #979. I completed a homebrew install of nspr and this fixed the issue:\r\n\r\nbrew install nspr\r\n\r\nIt's a packaging issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345651733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345662118","html_url":"https://github.com/apache/couchdb/pull/997#issuecomment-345662118","issue_url":"https://api.github.com/repos/apache/couchdb/issues/997","id":345662118,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTY2MjExOA==","user":{"login":"dch","id":284368,"node_id":"MDQ6VXNlcjI4NDM2OA==","avatar_url":"https://avatars.githubusercontent.com/u/284368?v=4","gravatar_id":"","url":"https://api.github.com/users/dch","html_url":"https://github.com/dch","followers_url":"https://api.github.com/users/dch/followers","following_url":"https://api.github.com/users/dch/following{/other_user}","gists_url":"https://api.github.com/users/dch/gists{/gist_id}","starred_url":"https://api.github.com/users/dch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dch/subscriptions","organizations_url":"https://api.github.com/users/dch/orgs","repos_url":"https://api.github.com/users/dch/repos","events_url":"https://api.github.com/users/dch/events{/privacy}","received_events_url":"https://api.github.com/users/dch/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T10:58:36Z","updated_at":"2017-11-20T10:58:36Z","author_association":"CONTRIBUTOR","body":"moving discussion from #991. I'm fine to merge this, I'll do some manual checks on UNIX to\r\nensure we don't break stuff. \r\n\r\nThe bigger question is, do we want to roll a 1.7.2, or (my preference), do I simply include this as a diff\r\ninto the windows build?\r\n\r\nI'd like a few +1 on this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345662118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345713168","html_url":"https://github.com/apache/couchdb/pull/997#issuecomment-345713168","issue_url":"https://api.github.com/repos/apache/couchdb/issues/997","id":345713168,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTcxMzE2OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T14:34:46Z","updated_at":"2017-11-20T14:34:46Z","author_association":"MEMBER","body":"I don't personally mind you rolling this into the 1.7.1 windows build but you need to clearly document the patch has been applied, since then it's not strictly a 1.7.1 convenience build. Have you tested that it does the right thing?\r\n\r\n-1 on a 1.7.2 release just for this.\r\n\r\nWould like to see something similar land on master for 2.x, but need thorough testing there to see if we can't move ourselves back under `C:\\Program Files\\` or not. There may be other issues than just this one, esp. with the `data` directory.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345713168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345735852","html_url":"https://github.com/apache/couchdb/pull/997#issuecomment-345735852","issue_url":"https://api.github.com/repos/apache/couchdb/issues/997","id":345735852,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTczNTg1Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T15:47:12Z","updated_at":"2017-11-20T15:47:12Z","author_association":"CONTRIBUTOR","body":"@wohali we do have it in master for couch_os_process like @jerem linked to but we don't have it for couch_os_daemons interestingly enough. I think we'd want it for both \r\n\r\nhttps://github.com/apache/couchdb/commit/f122f94291bfbc87496efca3c04540bb190b985a\r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/couch/src/couch_os_daemons.erl#L227\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345735852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345738139","html_url":"https://github.com/apache/couchdb/pull/997#issuecomment-345738139","issue_url":"https://api.github.com/repos/apache/couchdb/issues/997","id":345738139,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTczODEzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T15:54:36Z","updated_at":"2017-11-20T15:54:36Z","author_association":"MEMBER","body":"@nickva Right, I knew about f122f94. But with Windows nothing is trivial so I'd want to be extra sure ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345738139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345739856","html_url":"https://github.com/apache/couchdb/pull/997#issuecomment-345739856","issue_url":"https://api.github.com/repos/apache/couchdb/issues/997","id":345739856,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTczOTg1Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T15:59:47Z","updated_at":"2017-11-20T15:59:47Z","author_association":"CONTRIBUTOR","body":"@wohali indeed. Also this might be a case where R16B acts differently as the fix for it came in http://erlang.org/download/otp_src_17.0-rc1.readme (search for OTP-10842). Wonder if it is a case where on Windows we support a smaller subset of Erlang releases...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345739856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345789213","html_url":"https://github.com/apache/couchdb/issues/1002#issuecomment-345789213","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1002","id":345789213,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTc4OTIxMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-20T18:43:42Z","updated_at":"2017-11-20T18:51:29Z","author_association":"CONTRIBUTOR","body":"User switched the order of cluster setup, but the issue was still there. After looking at this over the weekend noticed that it's possible there is a bug in 2.1.0 which could cause this behavior.\r\n\r\nThe good news is it seems in 2.1.1 this bug was fixed inadvertently when the module was refactored.\r\n\r\nNotice the clustering module in 2.1.0:\r\n\r\nhttps://github.com/apache/couchdb/blob/2.1.0/src/couch_replicator/src/couch_replicator_clustering.erl#L211 `is_stable` calls ends up checking if the quiet time has expired by using `os:timestamp()` result.\r\n\r\nThis means if `os:timestamp()` doesn't return monotonic results, (and in fact it is not guaranteed to) then this sequence of events is possible:\r\n\r\n * Cluster stability check fires https://github.com/apache/couchdb/blob/2.1.0/src/couch_replicator/src/couch_replicator_clustering.erl#L168 and notifies document processor that cluster is stable. \r\n\r\n * Document processor starts processing replication documents. On first update it calls `is_stable()`. However if `os:timestamp()` return a timestamp which is less than the previous one, the `is_stable()` call could return `false`.\r\n\r\n * Document update is skipped.\r\n\r\n * However cluster `stable` event already fired and there won't be another one until cluster membership changes and another quiet period passes afterward.\r\n\r\nI had a test script to check if os:timestamp() would move backwards, however I couldn't find any VMs or machines I had access to where this would happen. But it is entirely possible based on reading docs the behavior experience by the user.\r\n\r\nThe good news is that this particular bug was inadvertently fixed when clustering module was refactored such that it has an explicit `stable` flag in the state:\r\n\r\nhttps://github.com/apache/couchdb/blob/master/src/couch_replicator/src/couch_replicator_clustering.erl#L73\r\n\r\nThis means that after notifier gen_event fires with a stable event, any calls to `is_stable` will read the state from that flag instead of going to `os:timestamp()`\r\n\r\nContacted the user to ask them to try using the latest version 2.1.1. For now closing the issue again as it is fixed. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345789213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345978888","html_url":"https://github.com/apache/couchdb/issues/887#issuecomment-345978888","issue_url":"https://api.github.com/repos/apache/couchdb/issues/887","id":345978888,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NTk3ODg4OA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T10:10:03Z","updated_at":"2017-11-21T10:10:03Z","author_association":"CONTRIBUTOR","body":"@wohali do you mean `\"create_target\": true` instead of `\"create_database\": true` in replicator doc?\r\nIf we introduce `\"create_database_params\": \"q=1\"`, what about using syntax like `\"create_database_params\": \"[ {ParamName, ParamValue}, {ParamName, ParamValue}, ... ]\"`, such as `\"create_database_params\": \"[ {q, 1}]\"`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/345978888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346011166","html_url":"https://github.com/apache/couchdb/issues/1010#issuecomment-346011166","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1010","id":346011166,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjAxMTE2Ng==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T12:24:49Z","updated_at":"2017-11-21T12:28:58Z","author_association":"NONE","body":"UPDATE: Steps to reproduce\r\n\r\n1. Create blank database (\"testleak\" in my example)\r\n2. Create simple view (\"_design/test/_view/test\" in my example)\r\n\r\nin first terminal\r\n\r\n3. Create some dummy documents\r\n```$ curl -H \"Content-Type:application/json\" --data-binary \"{}\" http://localhost:5984/testleak```\r\n4. Update view and ask for changes using the the same connection\r\n```$ curl http://localhost:5984/testleak/_design/test/_view/test \"http://localhost:5984/testleak/_changes?since=now&heartbeat=true&feed=continuous\"```\r\n\r\nIn other terminal\r\n\r\n5. become root\r\n6. pidof beam.smp (2200 in my case)\r\n7. cd /proc/2200/fd\r\n8. ls -la | grep -iE \"(delete|mrview)\"\r\n\r\nyou will see just only opened mrviews\r\n\r\n```lrwx------ 1 couchdb couchdb 64 lis 21 12:49 28 -> /var/lib/couchdb/.testleak_design/mrview/62e2ed5df6a6694c0438c7724137ca0c.view```\r\n\r\n9. compact the view _design/test\r\n\r\n10. repeat step 8\r\n```\r\nlrwx------ 1 couchdb couchdb 64 lis 21 12:49 28 -> /var/lib/couchdb/.testleak_design/mrview/62e2ed5df6a6694c0438c7724137ca0c.view\r\nlrwx------ 1 couchdb couchdb 64 lis 21 12:48 55 -> /var/lib/couchdb/.delete/bd46813bf2ecea0dad0c41dbbc89cb83 (deleted)\r\n```\r\n\r\nThe deleted file stays there until the connection is closed (press control-c in the first terminal). If you want to see multiple deleted files, you will need to create script, which uses single connection to repeatedly update the view. Each compaction generates new deleted file. These files are persisting, until  the connection is disconnected. \r\n\r\nSometimes it could be very difficult to disconnect some connections, for example if the connection is used to receive changes.\r\n\r\nVersion 1.7.1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346011166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346061450","html_url":"https://github.com/apache/couchdb/issues/887#issuecomment-346061450","issue_url":"https://api.github.com/repos/apache/couchdb/issues/887","id":346061450,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjA2MTQ1MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-21T15:27:02Z","updated_at":"2017-11-21T15:27:02Z","author_association":"CONTRIBUTOR","body":"@jiangphcn this would live in the replicator document body so it would look more like json fields and values `\"create_target_params\": {\"q\": \"1\", ...}`\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346061450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346204451","html_url":"https://github.com/apache/couchdb/pull/1012#issuecomment-346204451","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1012","id":346204451,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjIwNDQ1MQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T00:25:45Z","updated_at":"2017-11-22T00:25:45Z","author_association":"CONTRIBUTOR","body":"FWIW, code LGTM and tests pass locally:\r\n```\r\nmodule 'couch_replicator_clustering'\r\n  couch_replicator_clustering:217: t_stable_callback...ok\r\n  couch_replicator_clustering:225: t_unstable_callback...ok\r\n  [done in 0.577 s]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346204451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346223431","html_url":"https://github.com/apache/couchdb/issues/887#issuecomment-346223431","issue_url":"https://api.github.com/repos/apache/couchdb/issues/887","id":346223431,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjIyMzQzMQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T02:21:33Z","updated_at":"2017-11-22T02:21:33Z","author_association":"CONTRIBUTOR","body":"@nickva yes, make sense. Let me add this support if don't mind :-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346223431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346230333","html_url":"https://github.com/apache/couchdb/issues/887#issuecomment-346230333","issue_url":"https://api.github.com/repos/apache/couchdb/issues/887","id":346230333,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjIzMDMzMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T03:09:04Z","updated_at":"2017-11-22T03:09:04Z","author_association":"CONTRIBUTOR","body":"@jiangphcn sounds great, thanks for giving it a try!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346230333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346421152","html_url":"https://github.com/apache/couchdb/pull/1014#issuecomment-346421152","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1014","id":346421152,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjQyMTE1Mg==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T17:30:36Z","updated_at":"2017-11-22T17:30:36Z","author_association":"MEMBER","body":"Thanks to @afinne for identifying the issue. The original bug report showed that the index / query combination at https://pastebin.com/WiQ5Edgu failed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346421152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346426538","html_url":"https://github.com/apache/couchdb/pull/1011#issuecomment-346426538","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1011","id":346426538,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjQyNjUzOA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T17:50:53Z","updated_at":"2017-11-22T17:50:53Z","author_association":"MEMBER","body":"Thanks for this @nono. Would you be able to write an integration test (e.g. https://github.com/apache/couchdb/blob/master/src/mango/test/05-index-selection-test.py#L24)? \r\n\r\nIt's probably also looking at https://github.com/apache/couchdb/pull/1014 as that PR changes the implementation of `has_required_fields` a little and `$or` would be susceptible to the related bug.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346426538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346442309","html_url":"https://github.com/apache/couchdb/pull/1014#issuecomment-346442309","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1014","id":346442309,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjQ0MjMwOQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T18:53:10Z","updated_at":"2017-11-22T18:53:10Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346442309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346446021","html_url":"https://github.com/apache/couchdb/issues/609#issuecomment-346446021","issue_url":"https://api.github.com/repos/apache/couchdb/issues/609","id":346446021,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjQ0NjAyMQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-22T19:07:59Z","updated_at":"2017-11-22T19:07:59Z","author_association":"MEMBER","body":"Here's a rudimentary working chart:\r\n\r\nhttps://github.com/kocolosk/charts/tree/couchdb-statefulset\r\n\r\nLots more that could be done to allow for a greater degree of configuration, etc. but the basic `helm install ./incubator/couchdb` will deploy a connected 3 node cluster. The cluster auto-connectivity depends on a sidecar container that I wrote up here:\r\n\r\nhttps://github.com/kocolosk/couchdb-statefulset-assembler\r\n\r\nWould be great to get any help from the interested parties here, or even just details about how you'd want to use this chart.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346446021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346762905","html_url":"https://github.com/apache/couchdb/issues/1015#issuecomment-346762905","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1015","id":346762905,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njc2MjkwNQ==","user":{"login":"mr-bobz","id":12365601,"node_id":"MDQ6VXNlcjEyMzY1NjAx","avatar_url":"https://avatars.githubusercontent.com/u/12365601?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-bobz","html_url":"https://github.com/mr-bobz","followers_url":"https://api.github.com/users/mr-bobz/followers","following_url":"https://api.github.com/users/mr-bobz/following{/other_user}","gists_url":"https://api.github.com/users/mr-bobz/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-bobz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-bobz/subscriptions","organizations_url":"https://api.github.com/users/mr-bobz/orgs","repos_url":"https://api.github.com/users/mr-bobz/repos","events_url":"https://api.github.com/users/mr-bobz/events{/privacy}","received_events_url":"https://api.github.com/users/mr-bobz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-24T07:47:08Z","updated_at":"2017-11-24T07:47:08Z","author_association":"NONE","body":"Found some info here that I need to setup database before using. Don't remember doing this last time, may be too long! Would have been great if this was shown as welcome page in Fauxton console :-)\r\n\r\nhttps://issues.apache.org/jira/browse/COUCHDB-3163\r\nhttps://stackoverflow.com/questions/41553458/couchdb-2-0-installation-error\r\nhttps://github.com/apache/couchdb/issues/739\r\n\r\nCreated the tables using the following:\r\n\r\n> curl -X PUT http://127.0.0.1:5984/_users\r\n> curl -X PUT http://127.0.0.1:5984/_replicator\r\n> curl -X PUT http://127.0.0.1:5984/_global_changes\r\n\r\nNow log flooded with:\r\n\r\n> [info] 2017-11-24T07:43:09.316275Z couchdb@localhost <0.218.0> -------- couch_proc_manager <0.1739.4> died normal\r\n> [error] 2017-11-24T07:43:09.316293Z couchdb@localhost <0.5611.1> 8acc89488f OS Process Error <0.1739.4> :: {os_process_error,{exit_status,134}}\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346762905/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346913037","html_url":"https://github.com/apache/couchdb/issues/1019#issuecomment-346913037","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1019","id":346913037,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NjkxMzAzNw==","user":{"login":"sensiblearts","id":805314,"node_id":"MDQ6VXNlcjgwNTMxNA==","avatar_url":"https://avatars.githubusercontent.com/u/805314?v=4","gravatar_id":"","url":"https://api.github.com/users/sensiblearts","html_url":"https://github.com/sensiblearts","followers_url":"https://api.github.com/users/sensiblearts/followers","following_url":"https://api.github.com/users/sensiblearts/following{/other_user}","gists_url":"https://api.github.com/users/sensiblearts/gists{/gist_id}","starred_url":"https://api.github.com/users/sensiblearts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sensiblearts/subscriptions","organizations_url":"https://api.github.com/users/sensiblearts/orgs","repos_url":"https://api.github.com/users/sensiblearts/repos","events_url":"https://api.github.com/users/sensiblearts/events{/privacy}","received_events_url":"https://api.github.com/users/sensiblearts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-25T02:09:47Z","updated_at":"2017-11-25T02:09:47Z","author_association":"NONE","body":"My hex conversion of the _id was mostly numbers, and I did not notice that the alpha chars were uppercase!\r\n\r\nInstead of\r\n```elixir\r\ncouch_db = \"userdb-#{user_id |> Base.encode16}\"\r\n```\r\nI had to use\r\n```elixir\r\ncouch_db = \"userdb-#{user_id |> Base.encode16 |> String.downcase}\"\r\n```\r\nSorry to trouble you on this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346913037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346958380","html_url":"https://github.com/apache/couchdb/issues/999#issuecomment-346958380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/999","id":346958380,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njk1ODM4MA==","user":{"login":"ArchangeGabriel","id":490531,"node_id":"MDQ6VXNlcjQ5MDUzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/490531?v=4","gravatar_id":"","url":"https://api.github.com/users/ArchangeGabriel","html_url":"https://github.com/ArchangeGabriel","followers_url":"https://api.github.com/users/ArchangeGabriel/followers","following_url":"https://api.github.com/users/ArchangeGabriel/following{/other_user}","gists_url":"https://api.github.com/users/ArchangeGabriel/gists{/gist_id}","starred_url":"https://api.github.com/users/ArchangeGabriel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArchangeGabriel/subscriptions","organizations_url":"https://api.github.com/users/ArchangeGabriel/orgs","repos_url":"https://api.github.com/users/ArchangeGabriel/repos","events_url":"https://api.github.com/users/ArchangeGabriel/events{/privacy}","received_events_url":"https://api.github.com/users/ArchangeGabriel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-25T18:40:30Z","updated_at":"2017-11-25T18:40:30Z","author_association":"NONE","body":"Sorry to bother you again but I can’t find any information about a second Erlang process belonging to couchdb, `beam.smp`. It apparently also binds on public interfaces:\r\n```\r\nCOMMAND  PID    USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\r\nbeam.smp 476 couchdb   13u  IPv4  14000      0t0  TCP *:43301 (LISTEN)\r\n```\r\nDo you know if I can avoid that?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346958380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346969165","html_url":"https://github.com/apache/couchdb/issues/1020#issuecomment-346969165","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1020","id":346969165,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njk2OTE2NQ==","user":{"login":"sensiblearts","id":805314,"node_id":"MDQ6VXNlcjgwNTMxNA==","avatar_url":"https://avatars.githubusercontent.com/u/805314?v=4","gravatar_id":"","url":"https://api.github.com/users/sensiblearts","html_url":"https://github.com/sensiblearts","followers_url":"https://api.github.com/users/sensiblearts/followers","following_url":"https://api.github.com/users/sensiblearts/following{/other_user}","gists_url":"https://api.github.com/users/sensiblearts/gists{/gist_id}","starred_url":"https://api.github.com/users/sensiblearts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sensiblearts/subscriptions","organizations_url":"https://api.github.com/users/sensiblearts/orgs","repos_url":"https://api.github.com/users/sensiblearts/repos","events_url":"https://api.github.com/users/sensiblearts/events{/privacy}","received_events_url":"https://api.github.com/users/sensiblearts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-25T22:04:02Z","updated_at":"2017-11-25T22:04:02Z","author_association":"NONE","body":"Well, it seems to have fixed itself in the 30 minutes I spent looking for local.ini.\r\n\r\n\r\n**BUT** I still cannot figure out where Fauxton is saving its config state? File path...?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346969165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346979226","html_url":"https://github.com/apache/couchdb/issues/1020#issuecomment-346979226","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1020","id":346979226,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njk3OTIyNg==","user":{"login":"sensiblearts","id":805314,"node_id":"MDQ6VXNlcjgwNTMxNA==","avatar_url":"https://avatars.githubusercontent.com/u/805314?v=4","gravatar_id":"","url":"https://api.github.com/users/sensiblearts","html_url":"https://github.com/sensiblearts","followers_url":"https://api.github.com/users/sensiblearts/followers","following_url":"https://api.github.com/users/sensiblearts/following{/other_user}","gists_url":"https://api.github.com/users/sensiblearts/gists{/gist_id}","starred_url":"https://api.github.com/users/sensiblearts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sensiblearts/subscriptions","organizations_url":"https://api.github.com/users/sensiblearts/orgs","repos_url":"https://api.github.com/users/sensiblearts/repos","events_url":"https://api.github.com/users/sensiblearts/events{/privacy}","received_events_url":"https://api.github.com/users/sensiblearts/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-26T02:19:55Z","updated_at":"2017-11-26T02:19:55Z","author_association":"NONE","body":"I still don't know where the ini file is on Mac, but I finally got it working on Windows/WSL.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346979226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346983933","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-346983933","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":346983933,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Njk4MzkzMw==","user":{"login":"thgautier92","id":2672025,"node_id":"MDQ6VXNlcjI2NzIwMjU=","avatar_url":"https://avatars.githubusercontent.com/u/2672025?v=4","gravatar_id":"","url":"https://api.github.com/users/thgautier92","html_url":"https://github.com/thgautier92","followers_url":"https://api.github.com/users/thgautier92/followers","following_url":"https://api.github.com/users/thgautier92/following{/other_user}","gists_url":"https://api.github.com/users/thgautier92/gists{/gist_id}","starred_url":"https://api.github.com/users/thgautier92/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thgautier92/subscriptions","organizations_url":"https://api.github.com/users/thgautier92/orgs","repos_url":"https://api.github.com/users/thgautier92/repos","events_url":"https://api.github.com/users/thgautier92/events{/privacy}","received_events_url":"https://api.github.com/users/thgautier92/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-26T04:47:10Z","updated_at":"2017-11-26T04:47:10Z","author_association":"NONE","body":"I confirm ! Installating nspr via brew is working and all CouchDb functions, including verification, views creation, and replications works. Thant you @TomArbuckle for your help.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/346983933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347075040","html_url":"https://github.com/apache/couchdb/issues/1015#issuecomment-347075040","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1015","id":347075040,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzA3NTA0MA==","user":{"login":"snollygolly","id":4993074,"node_id":"MDQ6VXNlcjQ5OTMwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4993074?v=4","gravatar_id":"","url":"https://api.github.com/users/snollygolly","html_url":"https://github.com/snollygolly","followers_url":"https://api.github.com/users/snollygolly/followers","following_url":"https://api.github.com/users/snollygolly/following{/other_user}","gists_url":"https://api.github.com/users/snollygolly/gists{/gist_id}","starred_url":"https://api.github.com/users/snollygolly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snollygolly/subscriptions","organizations_url":"https://api.github.com/users/snollygolly/orgs","repos_url":"https://api.github.com/users/snollygolly/repos","events_url":"https://api.github.com/users/snollygolly/events{/privacy}","received_events_url":"https://api.github.com/users/snollygolly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T04:17:14Z","updated_at":"2017-11-27T04:17:14Z","author_association":"NONE","body":"I have the same problem as well.  Any idea what's causing those errors?  I'm unable to create views from inside of Fauxton or within my app.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347075040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347150556","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-347150556","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":347150556,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzE1MDU1Ng==","user":{"login":"mirohs","id":3195327,"node_id":"MDQ6VXNlcjMxOTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/3195327?v=4","gravatar_id":"","url":"https://api.github.com/users/mirohs","html_url":"https://github.com/mirohs","followers_url":"https://api.github.com/users/mirohs/followers","following_url":"https://api.github.com/users/mirohs/following{/other_user}","gists_url":"https://api.github.com/users/mirohs/gists{/gist_id}","starred_url":"https://api.github.com/users/mirohs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mirohs/subscriptions","organizations_url":"https://api.github.com/users/mirohs/orgs","repos_url":"https://api.github.com/users/mirohs/repos","events_url":"https://api.github.com/users/mirohs/events{/privacy}","received_events_url":"https://api.github.com/users/mirohs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T11:09:11Z","updated_at":"2017-11-27T11:09:11Z","author_association":"NONE","body":"I am using MacPorts, which has another installation directory for nspr: /opt/local/lib/nspr\r\n\r\nTo get CouchDB to work I manually copied the library files to: /usr/local/Cellar/nspr/4.17/lib\r\n\r\nThis works, but the approach is less than perfect. :-)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347150556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347212479","html_url":"https://github.com/apache/couchdb/issues/1015#issuecomment-347212479","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1015","id":347212479,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzIxMjQ3OQ==","user":{"login":"mr-bobz","id":12365601,"node_id":"MDQ6VXNlcjEyMzY1NjAx","avatar_url":"https://avatars.githubusercontent.com/u/12365601?v=4","gravatar_id":"","url":"https://api.github.com/users/mr-bobz","html_url":"https://github.com/mr-bobz","followers_url":"https://api.github.com/users/mr-bobz/followers","following_url":"https://api.github.com/users/mr-bobz/following{/other_user}","gists_url":"https://api.github.com/users/mr-bobz/gists{/gist_id}","starred_url":"https://api.github.com/users/mr-bobz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mr-bobz/subscriptions","organizations_url":"https://api.github.com/users/mr-bobz/orgs","repos_url":"https://api.github.com/users/mr-bobz/repos","events_url":"https://api.github.com/users/mr-bobz/events{/privacy}","received_events_url":"https://api.github.com/users/mr-bobz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T15:14:45Z","updated_at":"2017-11-27T15:14:45Z","author_association":"NONE","body":"Yes, creating index/view seems to be where it is failing for me too now:\r\n\r\n> [{\"id\":\"_design/resources\",\"error\":\"unknown_error\",\"reason\":\"undefined\"},{\"id\":\"_design/annotations\",\"error\":\"unknown_error\",\"reason\":\"undefined\"}]","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347212479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347240154","html_url":"https://github.com/apache/couchdb/pull/1017#issuecomment-347240154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1017","id":347240154,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzI0MDE1NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T16:36:42Z","updated_at":"2017-11-27T20:31:15Z","author_association":"CONTRIBUTOR","body":"@jiangphcn Good work. Thanks for taking initiative and giving it a try.\r\n\r\nSee some comments about tests and a general comment about the approach taken. I saw that q is special-cased and we don't allow other parameters. Wonder if we want to make it generic and allow users to specify other query parameters as well (n, placement, engine etc). In that case don't forget to also urlencode stuff, lookup query parameters encoding rules.\r\n\r\nAs for local dbs, those are not just `shards/...` dbs could also be regular (simple) node local dbs, say `my_target_db`. This endpoint format in general is problematic and doesn't work as most users expect it. It used to create local dbs in a CouchDB 1.x and 2.x with clustering it should really create a db via fabric, now it just creates a db on the random node where replication runs. Ideally we might want to handle some parameters there as well (the ones that make sense, like say `engine` for future PSE work). But in practice, I think we shouldn't bother and just ignore it params like you already do.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347240154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347345814","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347345814","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347345814,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM0NTgxNA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:11:25Z","updated_at":"2017-11-27T22:11:25Z","author_association":"MEMBER","body":"that's not the actual update function, right? returning null for the first item in the response array means no update occurs. If you've only tried making/updating docs this way, then the doc is never created, which explains the null.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347345814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347346667","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347346667","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347346667,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM0NjY2Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:14:46Z","updated_at":"2017-11-27T22:14:46Z","author_association":"MEMBER","body":"Also the _users database has some extra behaviour that might be at play here. Users can only see their own documents in the _users db. though admins should be able to see all docs. I could imagine that the user_ctx is not being passed correctly here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347346667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347347491","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347347491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347347491,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM0NzQ5MQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:17:47Z","updated_at":"2017-11-27T22:17:47Z","author_association":"MEMBER","body":"```\r\n➜  ~ curl 'foo:bar@localhost:15984/db1/_design/bar' -XPUT -d   '{\"updates\":{\"inc\":\"function(doc, req) { if (doc) {doc.count++} else {doc = {\\\"_id\\\": req.id, \\\"count\\\" : 1}}; return [doc, \\\"yay\\\"]; }\"}}'\r\n{\"ok\":true,\"id\":\"_design/bar\",\"rev\":\"1-36845b033830eab695afb0b562f48c0d\"}\r\n\r\n➜  ~  curl 'foo:bar@localhost:15984/db1/_design/bar/_update/inc/doc1' -XPUT\r\nyay%                                                                                                                                                                                                        \r\n\r\n➜  ~ curl 'foo:bar@localhost:15984/db1/doc1'\r\n{\"_id\":\"doc1\",\"_rev\":\"1-74620ecf527d29daaab9c2b465fbce66\",\"count\":1}\r\n\r\n➜  ~ curl foo:bar@localhost:15984/db1/_design/foo/_update/inc/doc1 -XPUT\r\nyay% \r\n                                                                                                                                                                                                       ➜  ~ curl 'foo:bar@localhost:15984/db1/doc1'\r\n{\"_id\":\"doc1\",\"_rev\":\"2-de0ea16f8621cbac506d23a0fbbde08a\",\"count\":2}\r\n```\r\n\r\nseems to work in non-system db.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347347491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347348443","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347348443","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347348443,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM0ODQ0Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:21:42Z","updated_at":"2017-11-27T22:21:42Z","author_association":"MEMBER","body":"but not in _users. Interesting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347348443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347349896","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347349896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347349896,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM0OTg5Ng==","user":{"login":"stickbyatlas","id":1031243,"node_id":"MDQ6VXNlcjEwMzEyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/1031243?v=4","gravatar_id":"","url":"https://api.github.com/users/stickbyatlas","html_url":"https://github.com/stickbyatlas","followers_url":"https://api.github.com/users/stickbyatlas/followers","following_url":"https://api.github.com/users/stickbyatlas/following{/other_user}","gists_url":"https://api.github.com/users/stickbyatlas/gists{/gist_id}","starred_url":"https://api.github.com/users/stickbyatlas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stickbyatlas/subscriptions","organizations_url":"https://api.github.com/users/stickbyatlas/orgs","repos_url":"https://api.github.com/users/stickbyatlas/repos","events_url":"https://api.github.com/users/stickbyatlas/events{/privacy}","received_events_url":"https://api.github.com/users/stickbyatlas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:27:29Z","updated_at":"2017-11-27T22:28:10Z","author_association":"NONE","body":"@rnewson No, it's not the actual update function. The one I provided up top was just a simplistic proof-of-concept, to illustrate that the doc itself wasn't being passed into the function. My update function returns `[doc, JSON.stringify(responseObj)]` unless I deliberately want it to fail with an error.\r\n\r\nThe reason I crafted the update function the way I did in my sample code was to effectively 'log' the doc param so it could be inspected via curl. In other versions of CouchDB, that update function will respond with the user's document (without making changes to the document).\r\n\r\nHave you been able to reproduce the behaviour I described?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347349896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347350270","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347350270","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347350270,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM1MDI3MA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:28:58Z","updated_at":"2017-11-27T22:28:58Z","author_association":"MEMBER","body":"```\r\ndiff --git a/src/chttpd/src/chttpd_show.erl b/src/chttpd/src/chttpd_show.erl\r\nindex d8e2ea5c7..ab1013d63 100644\r\n--- a/src/chttpd/src/chttpd_show.erl\r\n+++ b/src/chttpd/src/chttpd_show.erl\r\n@@ -23,7 +23,7 @@\r\n % then it sends the response from the query server to the http client.\r\n\r\n maybe_open_doc(Db, DocId) ->\r\n-    case fabric:open_doc(Db, DocId, [conflicts]) of\r\n+    case fabric:open_doc(Db, DocId, [conflicts, {user_ctx, Db#db.user_ctx}]) of\r\n     {ok, Doc} ->\r\n         Doc;\r\n     {not_found, _} ->\r\n```\r\n\r\nIs the fix.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347350270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351019","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347351019","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347351019,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM1MTAxOQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:31:55Z","updated_at":"2017-11-27T22:31:55Z","author_association":"MEMBER","body":"heh, already fixed by commit d3c8d41f60f69f92d3a30e408ae9428d88cf604c","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351401","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347351401","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347351401,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM1MTQwMQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:33:30Z","updated_at":"2017-11-27T22:33:30Z","author_association":"MEMBER","body":"and that commit is in 2.1.1 release, we're done. Upgrade pls. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351897","html_url":"https://github.com/apache/couchdb/issues/1021#issuecomment-347351897","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1021","id":347351897,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM1MTg5Nw==","user":{"login":"stickbyatlas","id":1031243,"node_id":"MDQ6VXNlcjEwMzEyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/1031243?v=4","gravatar_id":"","url":"https://api.github.com/users/stickbyatlas","html_url":"https://github.com/stickbyatlas","followers_url":"https://api.github.com/users/stickbyatlas/followers","following_url":"https://api.github.com/users/stickbyatlas/following{/other_user}","gists_url":"https://api.github.com/users/stickbyatlas/gists{/gist_id}","starred_url":"https://api.github.com/users/stickbyatlas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stickbyatlas/subscriptions","organizations_url":"https://api.github.com/users/stickbyatlas/orgs","repos_url":"https://api.github.com/users/stickbyatlas/repos","events_url":"https://api.github.com/users/stickbyatlas/events{/privacy}","received_events_url":"https://api.github.com/users/stickbyatlas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-27T22:35:25Z","updated_at":"2017-11-27T22:35:25Z","author_association":"NONE","body":"Amazing. I was just about to ask if that commit made it into 2.1.1.\r\n\r\nThis project and its commiters are fantastic. Thanks for the quick investigation and turnaround!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347351897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347396006","html_url":"https://github.com/apache/couchdb/pull/1017#issuecomment-347396006","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1017","id":347396006,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzM5NjAwNg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T02:43:00Z","updated_at":"2017-11-28T02:43:00Z","author_association":"CONTRIBUTOR","body":"@nickva Thanks a lot for review and comments. I addressed your comment using new commit d4e9230, mainly make parameter of creating target generic and adapt test cases. Please help review again. Thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347396006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347496323","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-347496323","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":347496323,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzQ5NjMyMw==","user":{"login":"lyudmil","id":69157,"node_id":"MDQ6VXNlcjY5MTU3","avatar_url":"https://avatars.githubusercontent.com/u/69157?v=4","gravatar_id":"","url":"https://api.github.com/users/lyudmil","html_url":"https://github.com/lyudmil","followers_url":"https://api.github.com/users/lyudmil/followers","following_url":"https://api.github.com/users/lyudmil/following{/other_user}","gists_url":"https://api.github.com/users/lyudmil/gists{/gist_id}","starred_url":"https://api.github.com/users/lyudmil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyudmil/subscriptions","organizations_url":"https://api.github.com/users/lyudmil/orgs","repos_url":"https://api.github.com/users/lyudmil/repos","events_url":"https://api.github.com/users/lyudmil/events{/privacy}","received_events_url":"https://api.github.com/users/lyudmil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T11:34:11Z","updated_at":"2017-11-28T11:34:11Z","author_association":"NONE","body":"@thgautier92, why has this issue been closed? Wouldn't people installing the CouchDB app for macOS still have problems if they just download it from the site? Has the app been patched, or are users expected to install nspr to have CouchDB work?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347496323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347541887","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-347541887","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":347541887,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzU0MTg4Nw==","user":{"login":"martinleopold","id":1692826,"node_id":"MDQ6VXNlcjE2OTI4MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1692826?v=4","gravatar_id":"","url":"https://api.github.com/users/martinleopold","html_url":"https://github.com/martinleopold","followers_url":"https://api.github.com/users/martinleopold/followers","following_url":"https://api.github.com/users/martinleopold/following{/other_user}","gists_url":"https://api.github.com/users/martinleopold/gists{/gist_id}","starred_url":"https://api.github.com/users/martinleopold/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/martinleopold/subscriptions","organizations_url":"https://api.github.com/users/martinleopold/orgs","repos_url":"https://api.github.com/users/martinleopold/repos","events_url":"https://api.github.com/users/martinleopold/events{/privacy}","received_events_url":"https://api.github.com/users/martinleopold/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T14:34:25Z","updated_at":"2017-11-28T14:34:25Z","author_association":"NONE","body":"@lyudmil: Exactly. The packaging issue still persists. Manually installing a dependency is a temporary workaround at best. I think the issue should be reopened, no?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347541887/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347657655","html_url":"https://github.com/apache/couchdb/issues/1027#issuecomment-347657655","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1027","id":347657655,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY1NzY1NQ==","user":{"login":"DionBar","id":32069702,"node_id":"MDQ6VXNlcjMyMDY5NzAy","avatar_url":"https://avatars.githubusercontent.com/u/32069702?v=4","gravatar_id":"","url":"https://api.github.com/users/DionBar","html_url":"https://github.com/DionBar","followers_url":"https://api.github.com/users/DionBar/followers","following_url":"https://api.github.com/users/DionBar/following{/other_user}","gists_url":"https://api.github.com/users/DionBar/gists{/gist_id}","starred_url":"https://api.github.com/users/DionBar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DionBar/subscriptions","organizations_url":"https://api.github.com/users/DionBar/orgs","repos_url":"https://api.github.com/users/DionBar/repos","events_url":"https://api.github.com/users/DionBar/events{/privacy}","received_events_url":"https://api.github.com/users/DionBar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T20:44:34Z","updated_at":"2017-11-28T20:44:34Z","author_association":"NONE","body":"This has been corrected by connecting to :5984 rather than :80","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347657655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347675757","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-347675757","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":347675757,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY3NTc1Nw==","user":{"login":"daveismith","id":1734595,"node_id":"MDQ6VXNlcjE3MzQ1OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1734595?v=4","gravatar_id":"","url":"https://api.github.com/users/daveismith","html_url":"https://github.com/daveismith","followers_url":"https://api.github.com/users/daveismith/followers","following_url":"https://api.github.com/users/daveismith/following{/other_user}","gists_url":"https://api.github.com/users/daveismith/gists{/gist_id}","starred_url":"https://api.github.com/users/daveismith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daveismith/subscriptions","organizations_url":"https://api.github.com/users/daveismith/orgs","repos_url":"https://api.github.com/users/daveismith/repos","events_url":"https://api.github.com/users/daveismith/events{/privacy}","received_events_url":"https://api.github.com/users/daveismith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T21:52:26Z","updated_at":"2017-11-28T21:52:26Z","author_association":"NONE","body":"I'm still getting this issue using just the downloaded couchdb app","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347675757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347686958","html_url":"https://github.com/apache/couchdb/issues/1015#issuecomment-347686958","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1015","id":347686958,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY4Njk1OA==","user":{"login":"lyudmil","id":69157,"node_id":"MDQ6VXNlcjY5MTU3","avatar_url":"https://avatars.githubusercontent.com/u/69157?v=4","gravatar_id":"","url":"https://api.github.com/users/lyudmil","html_url":"https://github.com/lyudmil","followers_url":"https://api.github.com/users/lyudmil/followers","following_url":"https://api.github.com/users/lyudmil/following{/other_user}","gists_url":"https://api.github.com/users/lyudmil/gists{/gist_id}","starred_url":"https://api.github.com/users/lyudmil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyudmil/subscriptions","organizations_url":"https://api.github.com/users/lyudmil/orgs","repos_url":"https://api.github.com/users/lyudmil/repos","events_url":"https://api.github.com/users/lyudmil/events{/privacy}","received_events_url":"https://api.github.com/users/lyudmil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T22:34:39Z","updated_at":"2017-11-28T22:35:08Z","author_association":"NONE","body":"@snollygolly, @mr-bobz, I think you might want to take a look at #979. The current workaround seems to be `brew install nspr`, but the real fix is probably going to end up being packaging the missing libraries into the app.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347686958/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347699476","html_url":"https://github.com/apache/couchdb/issues/1015#issuecomment-347699476","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1015","id":347699476,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY5OTQ3Ng==","user":{"login":"snollygolly","id":4993074,"node_id":"MDQ6VXNlcjQ5OTMwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4993074?v=4","gravatar_id":"","url":"https://api.github.com/users/snollygolly","html_url":"https://github.com/snollygolly","followers_url":"https://api.github.com/users/snollygolly/followers","following_url":"https://api.github.com/users/snollygolly/following{/other_user}","gists_url":"https://api.github.com/users/snollygolly/gists{/gist_id}","starred_url":"https://api.github.com/users/snollygolly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snollygolly/subscriptions","organizations_url":"https://api.github.com/users/snollygolly/orgs","repos_url":"https://api.github.com/users/snollygolly/repos","events_url":"https://api.github.com/users/snollygolly/events{/privacy}","received_events_url":"https://api.github.com/users/snollygolly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T23:29:12Z","updated_at":"2017-11-28T23:29:12Z","author_association":"NONE","body":"Thanks @lyudmil!\r\n\r\nI installed that package like you suggested and I was able to create a view with no problems.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347699476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347699863","html_url":"https://github.com/apache/couchdb/issues/979#issuecomment-347699863","issue_url":"https://api.github.com/repos/apache/couchdb/issues/979","id":347699863,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzY5OTg2Mw==","user":{"login":"snollygolly","id":4993074,"node_id":"MDQ6VXNlcjQ5OTMwNzQ=","avatar_url":"https://avatars.githubusercontent.com/u/4993074?v=4","gravatar_id":"","url":"https://api.github.com/users/snollygolly","html_url":"https://github.com/snollygolly","followers_url":"https://api.github.com/users/snollygolly/followers","following_url":"https://api.github.com/users/snollygolly/following{/other_user}","gists_url":"https://api.github.com/users/snollygolly/gists{/gist_id}","starred_url":"https://api.github.com/users/snollygolly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snollygolly/subscriptions","organizations_url":"https://api.github.com/users/snollygolly/orgs","repos_url":"https://api.github.com/users/snollygolly/repos","events_url":"https://api.github.com/users/snollygolly/events{/privacy}","received_events_url":"https://api.github.com/users/snollygolly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-28T23:31:10Z","updated_at":"2017-11-28T23:31:10Z","author_association":"NONE","body":"The fix to install packages is great, but this issue surely shouldn't be closed.  CouchDB doesn't work right out of the box without it, that can't be by design.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347699863/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347735124","html_url":"https://github.com/apache/couchdb/issues/1024#issuecomment-347735124","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1024","id":347735124,"node_id":"MDEyOklzc3VlQ29tbWVudDM0NzczNTEyNA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T02:43:42Z","updated_at":"2017-11-29T02:43:42Z","author_association":"CONTRIBUTOR","body":"@anlexN I believe the source code for uuid generation is https://github.com/apache/couchdb/blob/master/src/couch/src/couch_uuids.erl\r\nbut AFAIK you cannot get a timestamp from it.\r\n\r\nIf you want a timestamp in your document, I suggest adding one explicitly. For that matter, you're probably better off choosing your `_id` in a more meaningful way as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347735124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347745439","html_url":"https://github.com/apache/couchdb/issues/887#issuecomment-347745439","issue_url":"https://api.github.com/repos/apache/couchdb/issues/887","id":347745439,"node_id":"MDEyOklzc3VlQ29tbWVudDM0Nzc0NTQzOQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-29T03:55:56Z","updated_at":"2017-11-29T03:55:56Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/couchdb/pull/1017 was merged.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/347745439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348077154","html_url":"https://github.com/apache/couchdb/issues/875#issuecomment-348077154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/875","id":348077154,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODA3NzE1NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T04:08:27Z","updated_at":"2017-11-30T04:09:02Z","author_association":"CONTRIBUTOR","body":"@janl HI Jan, trying to address this issue via PR https://github.com/apache/couchdb/pull/1030. Would you like to review or route it to somebody else?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348077154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348140038","html_url":"https://github.com/apache/couchdb/issues/820#issuecomment-348140038","issue_url":"https://api.github.com/repos/apache/couchdb/issues/820","id":348140038,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODE0MDAzOA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T10:01:22Z","updated_at":"2017-11-30T10:01:22Z","author_association":"CONTRIBUTOR","body":"Hi @wohali, what you do think that we only support \"_all_docs\" endpoint with this feature, or also need to support `_local_docs` and `_design_docs` endpoint as well?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348140038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348275105","html_url":"https://github.com/apache/couchdb/pull/1034#issuecomment-348275105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1034","id":348275105,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODI3NTEwNQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T18:19:16Z","updated_at":"2017-11-30T18:19:57Z","author_association":"CONTRIBUTOR","body":"make eunit apps=couch_index \r\n\r\n```\r\n==> couch_index (eunit)\r\nCompiled src/couch_index_sup.erl\r\nCompiled src/couch_index_util.erl\r\nCompiled src/couch_index_plugin.erl\r\nCompiled src/couch_index_updater.erl\r\nCompiled src/couch_index_epi.erl\r\nCompiled src/couch_index_app.erl\r\nCompiled src/couch_index_compactor.erl\r\nCompiled src/couch_index_server.erl\r\nCompiled test/couch_index_compaction_tests.erl\r\nCompiled test/couch_index_ddoc_updated_tests.erl\r\nCompiled src/couch_index.erl\r\n======================== EUnit ========================\r\nmodule 'couch_index_util'\r\nmodule 'couch_index_updater'\r\nmodule 'couch_index_sup'\r\nmodule 'couch_index_server'\r\nmodule 'couch_index_plugin'\r\nmodule 'couch_index_epi'\r\nmodule 'couch_index_compactor'\r\nmodule 'couch_index_app'\r\nmodule 'couch_index'\r\n  Compaction tests\r\nApplication crypto was left running!\r\n    couch_index:576: should_not_call_recompact ([ undefined , undefined , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ undefined , disabled , undefined ])...[0.001 s] ok\r\n    couch_index:576: should_not_call_recompact ([ undefined , disabled , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ undefined , enabled , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ true , undefined , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ true , disabled , undefined ])...ok\r\n    couch_index:576: should_not_call_recompact ([ true , disabled , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ true , enabled , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ false , undefined , undefined ])...ok\r\n    couch_index:576: should_not_call_recompact ([ false , undefined , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ false , disabled , undefined ])...[0.001 s] ok\r\n    couch_index:576: should_not_call_recompact ([ false , disabled , disabled ])...ok\r\n    couch_index:576: should_not_call_recompact ([ false , enabled , disabled ])...[0.001 s] ok\r\n    couch_index:570: should_call_recompact ([ undefined , undefined , undefined ])...ok\r\n    couch_index:570: should_call_recompact ([ undefined , undefined , enabled ])...[0.001 s] ok\r\n    couch_index:570: should_call_recompact ([ undefined , enabled , undefined ])...ok\r\n    couch_index:570: should_call_recompact ([ undefined , disabled , enabled ])...ok\r\n    couch_index:570: should_call_recompact ([ undefined , enabled , enabled ])...[0.001 s] ok\r\n    couch_index:570: should_call_recompact ([ true , undefined , undefined ])...ok\r\n    couch_index:570: should_call_recompact ([ true , undefined , enabled ])...ok\r\n    couch_index:570: should_call_recompact ([ true , disabled , enabled ])...ok\r\n    couch_index:570: should_call_recompact ([ true , enabled , undefined ])...ok\r\n    couch_index:570: should_call_recompact ([ true , enabled , enabled ])...[0.001 s] ok\r\n    couch_index:570: should_call_recompact ([ false , undefined , enabled ])...ok\r\n    couch_index:570: should_call_recompact ([ false , enabled , undefined ])...ok\r\n    couch_index:570: should_call_recompact ([ false , disabled , enabled ])...ok\r\n    couch_index:570: should_call_recompact ([ false , enabled , enabled ])...[0.001 s] ok\r\n    [done in 2.716 s]\r\n  couch_index:602: t_group_timeout_info_integer...[0.051 s] ok\r\n  couch_index:612: t_group_timeout_info_infinity...[0.054 s] ok\r\n  [done in 3.689 s]\r\nmodule 'couch_index_ddoc_updated_tests'\r\n  Check ddoc update actions\r\n    couch_index_ddoc_updated_tests:52: check_all_indexers_exit_on_ddoc_change...[0.150 s] ok\r\n    [done in 0.153 s]\r\n  [done in 0.567 s]\r\nmodule 'couch_index_compaction_tests'\r\n  Check compaction\r\n    couch_index_compaction_tests:74: hold_db_for_recompaction...[0.001 s] ok\r\n    [done in 0.087 s]\r\n  [done in 0.160 s]\r\n=======================================================\r\n  All 31 tests passed.\r\n```\r\n\r\nBut travis doesn't seem to pick up and run some of the tests:\r\n\r\nhttps://travis-ci.org/apache/couchdb/jobs/309637426\r\n\r\n```\r\nmodule 'couch_index_compaction_tests'\r\n  Check compaction\r\n    couch_index_compaction_tests:74: hold_db_for_recompaction...[0.003 s] ok\r\n[os_mon] memory supervisor port (memsup): Erlang has closed\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.141 s]\r\n  [done in 0.283 s]\r\nmodule 'couch_index_ddoc_updated_tests'\r\n  Check ddoc update actions\r\n    couch_index_ddoc_updated_tests:52: check_all_indexers_exit_on_ddoc_change...[0.064 s] ok\r\n[os_mon] memory supervisor port (memsup): Erlang has closed\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.067 s]\r\n  [done in 0.455 s]\r\n=======================================================\r\n  2 tests passed.\r\n```\r\n\r\nWonder why, eunit / meck shenanigans?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348275105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348276339","html_url":"https://github.com/apache/couchdb/pull/1034#issuecomment-348276339","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1034","id":348276339,"node_id":"MDEyOklzc3VlQ29tbWVudDM0ODI3NjMzOQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-11-30T18:23:20Z","updated_at":"2017-11-30T18:23:20Z","author_association":"MEMBER","body":"> But travis doesn't seem to pick up and run some of the tests:\r\n\r\nOh, this is interesting, smells like a race. Thanks for pointing on this, I'll ponder on it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/348276339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]