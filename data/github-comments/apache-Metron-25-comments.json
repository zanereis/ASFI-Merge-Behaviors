[{"url":"https://api.github.com/repos/apache/metron/issues/comments/285444397","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285444397","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285444397,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0NDM5Nw==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T18:53:08Z","updated_at":"2017-03-09T18:53:08Z","author_association":"CONTRIBUTOR","body":"@dlyle65535 METRON-745 is in (as I'm sure you can tell from the conflict list).  I already incorporated the Kibana map changes, so you should just be able to accept master's version.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285444397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285444849","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285444849","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285444849,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0NDg0OQ==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T18:54:38Z","updated_at":"2017-03-09T18:54:38Z","author_association":"CONTRIBUTOR","body":"@justinleet - Accepted. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285444849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285449849","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285449849","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285449849,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ0OTg0OQ==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T19:12:09Z","updated_at":"2017-03-09T19:12:09Z","author_association":"CONTRIBUTOR","body":"@dlyle65535 fyi I'm deploying to ec2 right now. I'll update shortly.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285449849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285465260","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285465260","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285465260,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ2NTI2MA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T20:04:34Z","updated_at":"2017-03-09T20:04:34Z","author_association":"CONTRIBUTOR","body":"@dlyle65535 is the test for EC2 to just verify everything spins up as normal? Any additional specific items to test or smoke test?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285465260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285466295","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285466295","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285466295,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTQ2NjI5NQ==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T20:08:30Z","updated_at":"2017-03-09T20:08:30Z","author_association":"CONTRIBUTOR","body":"@mmiklavc - Exactly. We were wanting to make sure that @nickwallen was having environmental issues.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285466295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285501294","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285501294","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285501294,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUwMTI5NA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T22:16:33Z","updated_at":"2017-03-09T22:16:33Z","author_association":"CONTRIBUTOR","body":"Looks like everything came up correctly for me in AWS. So +1 to that part of it.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/658443/23773173/4a6a09e2-04db-11e7-9f0e-f39e27f345df.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285501294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285501829","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285501829","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285501829,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUwMTgyOQ==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T22:18:51Z","updated_at":"2017-03-09T22:18:51Z","author_association":"CONTRIBUTOR","body":"Thanks @mmiklavc!","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285501829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285505325","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285505325","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285505325,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUwNTMyNQ==","user":{"login":"nickwallen","id":2475409,"node_id":"MDQ6VXNlcjI0NzU0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2475409?v=4","gravatar_id":"","url":"https://api.github.com/users/nickwallen","html_url":"https://github.com/nickwallen","followers_url":"https://api.github.com/users/nickwallen/followers","following_url":"https://api.github.com/users/nickwallen/following{/other_user}","gists_url":"https://api.github.com/users/nickwallen/gists{/gist_id}","starred_url":"https://api.github.com/users/nickwallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickwallen/subscriptions","organizations_url":"https://api.github.com/users/nickwallen/orgs","repos_url":"https://api.github.com/users/nickwallen/repos","events_url":"https://api.github.com/users/nickwallen/events{/privacy}","received_events_url":"https://api.github.com/users/nickwallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T22:33:21Z","updated_at":"2017-03-09T22:33:21Z","author_association":"CONTRIBUTOR","body":"That's great, @mmiklavc.  I am also a +1.  I was able to test this successfully on Quick Dev and Full Dev.  ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285505325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285506165","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285506165","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285506165,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUwNjE2NQ==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T22:36:49Z","updated_at":"2017-03-09T22:36:49Z","author_association":"CONTRIBUTOR","body":"Thanks for all the help! I intend to merge this in tomorrow afternoon. @ottobackwards, @justinleet, I wanted to make sure you two were good. I also want to make sure there's no other feedback I've missed.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285506165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285507363","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285507363","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285507363,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUwNzM2Mw==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T22:42:05Z","updated_at":"2017-03-09T22:42:05Z","author_association":"CONTRIBUTOR","body":"I am +1.  I have been working downstream and building off of this for a bit, and been able to get quick and full up with everything started.  I have some things that I would like to improve on, but like @dlyle65535 says, this is step 2 of many","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285507363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285524971","html_url":"https://github.com/apache/metron/pull/405#issuecomment-285524971","issue_url":"https://api.github.com/repos/apache/metron/issues/405","id":285524971,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUyNDk3MQ==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-09T23:58:44Z","updated_at":"2017-03-09T23:58:44Z","author_association":"MEMBER","body":"Would someone consider committing this PR?  It's been open a while.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285524971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285529095","html_url":"https://github.com/apache/metron/pull/405#issuecomment-285529095","issue_url":"https://api.github.com/repos/apache/metron/issues/405","id":285529095,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTUyOTA5NQ==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T00:16:16Z","updated_at":"2017-03-10T00:16:16Z","author_association":"CONTRIBUTOR","body":"I will later tonight or first thing tomorrow am","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285529095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285565360","html_url":"https://github.com/apache/metron/pull/439#issuecomment-285565360","issue_url":"https://api.github.com/repos/apache/metron/issues/439","id":285565360,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTU2NTM2MA==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T03:43:31Z","updated_at":"2017-03-10T03:43:31Z","author_association":"CONTRIBUTOR","body":"This is missing documentation.  There are going to be requirements to the types of scripts that can be called, and they all need to be listed out.  A sample script or even a template should be provided.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285565360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285660667","html_url":"https://github.com/apache/metron/pull/436#issuecomment-285660667","issue_url":"https://api.github.com/repos/apache/metron/issues/436","id":285660667,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTY2MDY2Nw==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T12:46:55Z","updated_at":"2017-03-10T12:46:55Z","author_association":"CONTRIBUTOR","body":"I'm +1.  I was just waiting for the EC2 component, but was able to get quick-dev, etc. spun up without issue.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285660667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/285706285","html_url":"https://github.com/apache/metron/pull/472#issuecomment-285706285","issue_url":"https://api.github.com/repos/apache/metron/issues/472","id":285706285,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NTcwNjI4NQ==","user":{"login":"merrimanr","id":311928,"node_id":"MDQ6VXNlcjMxMTkyOA==","avatar_url":"https://avatars.githubusercontent.com/u/311928?v=4","gravatar_id":"","url":"https://api.github.com/users/merrimanr","html_url":"https://github.com/merrimanr","followers_url":"https://api.github.com/users/merrimanr/followers","following_url":"https://api.github.com/users/merrimanr/following{/other_user}","gists_url":"https://api.github.com/users/merrimanr/gists{/gist_id}","starred_url":"https://api.github.com/users/merrimanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merrimanr/subscriptions","organizations_url":"https://api.github.com/users/merrimanr/orgs","repos_url":"https://api.github.com/users/merrimanr/repos","events_url":"https://api.github.com/users/merrimanr/events{/privacy}","received_events_url":"https://api.github.com/users/merrimanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-10T15:57:11Z","updated_at":"2017-03-10T15:57:11Z","author_association":"CONTRIBUTOR","body":"If you don't mind adding the indexing configs in this PR that would be great.  I had to make 4 changes to get it to work:\r\n- updated the pom.xml to copy the indexing archive into kafkazk\r\n- updated the kafkazk Dockerfile to add the indexing archive and extract it\r\n- updated the init-zk.sh script to create the /metron/topology/indexing path in zookeeper\r\n- added /compose/kafkazk/indexing to .gitignore\r\n\r\nThanks for the feedback, I'll work on getting base kafka and hbase containers uploaded to Docker Hub.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/285706285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/286093239","html_url":"https://github.com/apache/metron/pull/459#issuecomment-286093239","issue_url":"https://api.github.com/repos/apache/metron/issues/459","id":286093239,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjA5MzIzOQ==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-13T12:27:57Z","updated_at":"2017-03-13T12:27:57Z","author_association":"CONTRIBUTOR","body":"@mattf-horton I think this is a pretty good approach and gives us a lot of value especially as we build up more releases.  And there is a `-Dmaven.site.skip=true` flag for maven that can be added to skip all the site stuff.\r\n\r\nFor right now, I've seen instability in running tests in Jenkins on this branch after pulling in master.  I was hoping to resolve it more quickly, but I might end up having to roll back bits and pieces of the change/integration until I can narrow down what went wrong.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/286093239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/286736415","html_url":"https://github.com/apache/metron/pull/476#issuecomment-286736415","issue_url":"https://api.github.com/repos/apache/metron/issues/476","id":286736415,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NjczNjQxNQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-15T13:11:16Z","updated_at":"2017-03-15T13:11:16Z","author_association":"MEMBER","body":"+1, great catch @mattf-horton !","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/286736415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287094122","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287094122","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287094122,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzA5NDEyMg==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T15:29:27Z","updated_at":"2017-03-16T15:29:27Z","author_association":"MEMBER","body":"You can try this out by running `bundle exec jekyll serve` from the site directory, navigating to [http://localhost:4000](http://localhost:4000) and clicking on the \"Downloads\" at the top right.\r\n\r\nPlease allow for a couple of hours from now for the 0.3.1 bits to percolate to the mirrors before the 0.3.1 tar.gz link will work.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287094122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287104327","html_url":"https://github.com/apache/metron/pull/478#issuecomment-287104327","issue_url":"https://api.github.com/repos/apache/metron/issues/478","id":287104327,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzEwNDMyNw==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T16:00:10Z","updated_at":"2017-03-16T16:00:10Z","author_association":"CONTRIBUTOR","body":"Actually, looking into this, it's my fault. I split the MIT license stuff with the geo share alike.  It should be moved up.\r\n\r\n@cestella You want to quick fix that and put up a new PR?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287104327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287106742","html_url":"https://github.com/apache/metron/pull/478#issuecomment-287106742","issue_url":"https://api.github.com/repos/apache/metron/issues/478","id":287106742,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzEwNjc0Mg==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T16:07:51Z","updated_at":"2017-03-16T16:07:51Z","author_association":"MEMBER","body":"Nah, I slightly broadened the scope of this one, renamed the JIRA and will adjust the title accordingly","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287106742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287110696","html_url":"https://github.com/apache/metron/pull/478#issuecomment-287110696","issue_url":"https://api.github.com/repos/apache/metron/issues/478","id":287110696,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzExMDY5Ng==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T16:20:23Z","updated_at":"2017-03-16T16:20:23Z","author_association":"CONTRIBUTOR","body":"I'm +1 on this by inspection (pending Travis).  Thanks for taking care of the mentor feedback on this so quickly.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287110696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287148826","html_url":"https://github.com/apache/metron/pull/479#issuecomment-287148826","issue_url":"https://api.github.com/repos/apache/metron/issues/479","id":287148826,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzE0ODgyNg==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T18:24:46Z","updated_at":"2017-03-16T18:24:46Z","author_association":"CONTRIBUTOR","body":"@simonellistonball Looks like the AsaIntegrationTest needs a touch-up. It's complaining about syslog_host and syslog_prog. This is the result when I run locally:\r\n```\r\nexpected: {\"original_string\":\"<167>Jan  5 08:52:35 10.22.8.216 %ASA-7-609001: Built local-host inside:10.22.8.205\",\"ciscotag\":\"ASA-7-609001\",\"syslog_facility\":\"local4\",\"syslog_severity\":\"debug\",\"timestamp\":1451983955000,\"source.type\":\"asa\"}\r\nactual: {\"syslog_host\":\"10.22.8.216\",\"original_string\":\"<167>Jan  5 08:52:35 10.22.8.216 %ASA-7-609001: Built local-host inside:10.22.8.205\",\"ciscotag\":\"ASA-7-609001\",\"syslog_facility\":\"local4\",\"syslog_prog\":null,\"syslog_severity\":\"debug\",\"timestamp\":1483606355000,\"source.type\":\"asa\"}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287148826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287151184","html_url":"https://github.com/apache/metron/pull/479#issuecomment-287151184","issue_url":"https://api.github.com/repos/apache/metron/issues/479","id":287151184,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzE1MTE4NA==","user":{"login":"simonellistonball","id":1217895,"node_id":"MDQ6VXNlcjEyMTc4OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1217895?v=4","gravatar_id":"","url":"https://api.github.com/users/simonellistonball","html_url":"https://github.com/simonellistonball","followers_url":"https://api.github.com/users/simonellistonball/followers","following_url":"https://api.github.com/users/simonellistonball/following{/other_user}","gists_url":"https://api.github.com/users/simonellistonball/gists{/gist_id}","starred_url":"https://api.github.com/users/simonellistonball/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonellistonball/subscriptions","organizations_url":"https://api.github.com/users/simonellistonball/orgs","repos_url":"https://api.github.com/users/simonellistonball/repos","events_url":"https://api.github.com/users/simonellistonball/events{/privacy}","received_events_url":"https://api.github.com/users/simonellistonball/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T18:32:58Z","updated_at":"2017-03-16T18:32:58Z","author_association":"CONTRIBUTOR","body":"Yep, missed that somehow. I'll add correct the integration test data, I think also suppress the values on nulls in the parser.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287151184/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287177070","html_url":"https://github.com/apache/metron/pull/479#issuecomment-287177070","issue_url":"https://api.github.com/repos/apache/metron/issues/479","id":287177070,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzE3NzA3MA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T20:12:10Z","updated_at":"2017-03-16T20:12:10Z","author_association":"CONTRIBUTOR","body":"+1 on inspection. Unit tests cover records with and without the host/prog values.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287177070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287187294","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287187294","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287187294,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzE4NzI5NA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T20:52:17Z","updated_at":"2017-03-16T20:52:17Z","author_association":"MEMBER","body":"I'm kicking travis, but it appears that there are some intermittent test failures in the REST API tests.  In particular around deleting topics for the KafkaControllerIntegrationTest:\r\n```\r\nTests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 9.185 sec <<< FAILURE! - in org.apache.metron.rest.controller.KafkaControllerIntegrationTest\r\ntest(org.apache.metron.rest.controller.KafkaControllerIntegrationTest)  Time elapsed: 9.13 sec  <<< ERROR!\r\norg.springframework.web.util.NestedServletException: Request processing failed; nested exception is kafka.common.TopicAlreadyMarkedForDeletionException: topic bro is already marked for deletion\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doDelete(FrameworkServlet.java:894)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:654)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n\tat org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:65)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\tat org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:115)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:169)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:121)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177)\r\n\tat org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\r\n\tat org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:155)\r\n\tat org.apache.metron.rest.controller.KafkaControllerIntegrationTest.test(KafkaControllerIntegrationTest.java:180)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\nCaused by: kafka.common.TopicAlreadyMarkedForDeletionException: topic bro is already marked for deletion\r\n\tat kafka.admin.AdminUtils$.deleteTopic(AdminUtils.scala:315)\r\n\tat org.apache.metron.rest.service.impl.KafkaServiceImpl.deleteTopic(KafkaServiceImpl.java:69)\r\n\tat org.apache.metron.rest.controller.KafkaController.delete(KafkaController.java:77)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n\t... 71 more\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287187294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287195763","html_url":"https://github.com/apache/metron/pull/480#issuecomment-287195763","issue_url":"https://api.github.com/repos/apache/metron/issues/480","id":287195763,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzE5NTc2Mw==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T21:25:18Z","updated_at":"2017-03-16T21:25:18Z","author_association":"CONTRIBUTOR","body":"+1, sorry about missing that inventory file earlier, NIck.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287195763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287206680","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287206680","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287206680,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzIwNjY4MA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T22:11:16Z","updated_at":"2017-03-16T22:11:16Z","author_association":"CONTRIBUTOR","body":"+1 when the extra [MD5] link gets removed. Both point to the same file.\r\n![image](https://cloud.githubusercontent.com/assets/658443/24020695/e740cdc8-0a62-11e7-89fc-595f15deab44.png)\r\n\r\nI ran this locally and clicked through all of the new doc book links in \"current-book\". I checked for any remaining references to 0.3.0 and found none not referring to upgrade paths. Verified the download goes to the correct downloads link.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287206680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287207510","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287207510","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287207510,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzIwNzUxMA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-16T22:15:17Z","updated_at":"2017-03-16T22:15:17Z","author_association":"CONTRIBUTOR","body":"+1, now pending Travis cooperating. Links show correctly in latest commit.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287207510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287348784","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287348784","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287348784,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM0ODc4NA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T13:06:32Z","updated_at":"2017-03-17T13:06:32Z","author_association":"MEMBER","body":"I'm going to have to kick travis again.  It looks like that Kafka test in the REST API has a number of intermittent issues.  Seeing this exception:\r\n```\r\nTests run: 2, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 8.514 sec <<< FAILURE! - in org.apache.metron.rest.controller.KafkaControllerIntegrationTest\r\ntest(org.apache.metron.rest.controller.KafkaControllerIntegrationTest)  Time elapsed: 8.415 sec  <<< FAILURE!\r\njava.lang.AssertionError: Status expected:<200> but was:<404>\r\n\tat org.springframework.test.util.AssertionErrors.fail(AssertionErrors.java:54)\r\n\tat org.springframework.test.util.AssertionErrors.assertEquals(AssertionErrors.java:81)\r\n\tat org.springframework.test.web.servlet.result.StatusResultMatchers$10.match(StatusResultMatchers.java:664)\r\n\tat org.springframework.test.web.servlet.MockMvc$1.andExpect(MockMvc.java:171)\r\n\tat org.apache.metron.rest.controller.KafkaControllerIntegrationTest.test(KafkaControllerIntegrationTest.java:173)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:483)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\r\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:283)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:173)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:128)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:203)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:155)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287348784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287348873","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287348873","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287348873,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM0ODg3Mw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T13:07:01Z","updated_at":"2017-03-17T13:07:01Z","author_association":"MEMBER","body":"@merrimanr Any ideas on the cause of that one or a reasonable fix for it?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287348873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287354540","html_url":"https://github.com/apache/metron/pull/477#issuecomment-287354540","issue_url":"https://api.github.com/repos/apache/metron/issues/477","id":287354540,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM1NDU0MA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T13:33:19Z","updated_at":"2017-03-17T13:33:19Z","author_association":"MEMBER","body":"I created https://issues.apache.org/jira/browse/METRON-773 to track this most recent issue.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287354540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287372609","html_url":"https://github.com/apache/metron/pull/480#issuecomment-287372609","issue_url":"https://api.github.com/repos/apache/metron/issues/480","id":287372609,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM3MjYwOQ==","user":{"login":"nickwallen","id":2475409,"node_id":"MDQ6VXNlcjI0NzU0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2475409?v=4","gravatar_id":"","url":"https://api.github.com/users/nickwallen","html_url":"https://github.com/nickwallen","followers_url":"https://api.github.com/users/nickwallen/followers","following_url":"https://api.github.com/users/nickwallen/following{/other_user}","gists_url":"https://api.github.com/users/nickwallen/gists{/gist_id}","starred_url":"https://api.github.com/users/nickwallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickwallen/subscriptions","organizations_url":"https://api.github.com/users/nickwallen/orgs","repos_url":"https://api.github.com/users/nickwallen/repos","events_url":"https://api.github.com/users/nickwallen/events{/privacy}","received_events_url":"https://api.github.com/users/nickwallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T14:42:17Z","updated_at":"2017-03-17T14:42:17Z","author_association":"CONTRIBUTOR","body":"No worries. I missed it too.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287372609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287373026","html_url":"https://github.com/apache/metron/pull/422#issuecomment-287373026","issue_url":"https://api.github.com/repos/apache/metron/issues/422","id":287373026,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzM3MzAyNg==","user":{"login":"nickwallen","id":2475409,"node_id":"MDQ6VXNlcjI0NzU0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2475409?v=4","gravatar_id":"","url":"https://api.github.com/users/nickwallen","html_url":"https://github.com/nickwallen","followers_url":"https://api.github.com/users/nickwallen/followers","following_url":"https://api.github.com/users/nickwallen/following{/other_user}","gists_url":"https://api.github.com/users/nickwallen/gists{/gist_id}","starred_url":"https://api.github.com/users/nickwallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickwallen/subscriptions","organizations_url":"https://api.github.com/users/nickwallen/orgs","repos_url":"https://api.github.com/users/nickwallen/repos","events_url":"https://api.github.com/users/nickwallen/events{/privacy}","received_events_url":"https://api.github.com/users/nickwallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-17T14:43:47Z","updated_at":"2017-03-17T14:43:47Z","author_association":"CONTRIBUTOR","body":"No longer needed.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287373026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287757505","html_url":"https://github.com/apache/metron/pull/482#issuecomment-287757505","issue_url":"https://api.github.com/repos/apache/metron/issues/482","id":287757505,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzc1NzUwNQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T13:24:40Z","updated_at":"2017-03-20T13:24:40Z","author_association":"MEMBER","body":"+1.  This is just what we needed.  Thanks, @justinleet ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287757505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287796287","html_url":"https://github.com/apache/metron/pull/479#issuecomment-287796287","issue_url":"https://api.github.com/repos/apache/metron/issues/479","id":287796287,"node_id":"MDEyOklzc3VlQ29tbWVudDI4Nzc5NjI4Nw==","user":{"login":"kylerichardson","id":10392029,"node_id":"MDQ6VXNlcjEwMzkyMDI5","avatar_url":"https://avatars.githubusercontent.com/u/10392029?v=4","gravatar_id":"","url":"https://api.github.com/users/kylerichardson","html_url":"https://github.com/kylerichardson","followers_url":"https://api.github.com/users/kylerichardson/followers","following_url":"https://api.github.com/users/kylerichardson/following{/other_user}","gists_url":"https://api.github.com/users/kylerichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/kylerichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylerichardson/subscriptions","organizations_url":"https://api.github.com/users/kylerichardson/orgs","repos_url":"https://api.github.com/users/kylerichardson/repos","events_url":"https://api.github.com/users/kylerichardson/events{/privacy}","received_events_url":"https://api.github.com/users/kylerichardson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T15:31:27Z","updated_at":"2017-03-20T15:31:27Z","author_association":"CONTRIBUTOR","body":"+1 by inspection","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287796287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/287827477","html_url":"https://github.com/apache/metron/pull/482#issuecomment-287827477","issue_url":"https://api.github.com/repos/apache/metron/issues/482","id":287827477,"node_id":"MDEyOklzc3VlQ29tbWVudDI4NzgyNzQ3Nw==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-20T17:05:15Z","updated_at":"2017-03-20T17:05:15Z","author_association":"MEMBER","body":"+1 by inspection.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/287827477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288073178","html_url":"https://github.com/apache/metron/pull/485#issuecomment-288073178","issue_url":"https://api.github.com/repos/apache/metron/issues/485","id":288073178,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA3MzE3OA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T13:10:29Z","updated_at":"2017-03-21T13:10:29Z","author_association":"MEMBER","body":"Yep, this should be consistent with the docs.  Good catch, @mattf-horton +1 by inspection","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288073178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288073488","html_url":"https://github.com/apache/metron/pull/483#issuecomment-288073488","issue_url":"https://api.github.com/repos/apache/metron/issues/483","id":288073488,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA3MzQ4OA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T13:11:44Z","updated_at":"2017-03-21T13:11:44Z","author_association":"MEMBER","body":"+1 by inspection","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288073488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288075278","html_url":"https://github.com/apache/metron/pull/481#issuecomment-288075278","issue_url":"https://api.github.com/repos/apache/metron/issues/481","id":288075278,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA3NTI3OA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T13:19:10Z","updated_at":"2017-03-21T13:19:10Z","author_association":"MEMBER","body":"Should we rely on a tick tuple?  The reason I ask, is that we also use the `BulkWriterComponent` directly in the `ParserBolt`.\r\n\r\nIt seems to me that maybe a cleaner approach here would be to have a `Timer` in the `BulkWriterComponent`, this would have the benefit of being self-contained and working for both the enrichment and the parsers.  Thoughts?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288075278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288096044","html_url":"https://github.com/apache/metron/pull/481#issuecomment-288096044","issue_url":"https://api.github.com/repos/apache/metron/issues/481","id":288096044,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA5NjA0NA==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T14:30:37Z","updated_at":"2017-03-21T14:30:37Z","author_association":"MEMBER","body":"@cestella , thanks for looking at this. The primary motivation for adding batchTimeout was to prevent tuple recycling due to \"topology.message.timeout.secs\".  Thus, correctly configuring the timeout period requires interacting with the Bolt.  You're correct that this means each Bolt that uses `BulkWriterComponent` must be modified to include the tick tuple processing, as noted in my opening comments:\r\n```\r\nAfter this patch is reviewed and accepted, similar work needs to be done for the ParserWriter, and possibly other sub-components. That will be in a separate PR.\r\n```\r\nI implemented the changes in `BulkWriterComponent` such that it would default to conservative behavior if the containing Bolt didn't configure it.\r\n\r\nI considered using a timer thread instead of tick tuples, but:\r\n1. This is precisely one of the use cases contemplated by the Storm team when they created Tick Tuples, as discussed in the [article here](https://hortonworks.com/blog/apache-storm-design-pattern-micro-batching/) cited in the jira for METRON-322.\r\n1. It isn't sufficient to just create a timer thread.  One must also monitor that thread, be able to restart it if it dies, make sure it doesn't do anything non-thread-safe, etc.  These add significant complexity to the code, and uncertainty in the case of the thread-safeness, since any pattern we create here will surely be imitated by other developments down the road, and Bolt code is not typically thread-safe.\r\n1. On the other hand, using the built-in Tick Tuples avoids both the complexity, since it handles the reliability issues internal to Storm, and uncertainty, since the Tick Tuple is processed in the single flow of control of normal Bolt processing.\r\n\r\nSo I think it's cleaner to use the feature provided by the Storm environment.  I'm open to arguments to the contrary.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288096044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288097583","html_url":"https://github.com/apache/metron/pull/481#issuecomment-288097583","issue_url":"https://api.github.com/repos/apache/metron/issues/481","id":288097583,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODA5NzU4Mw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-21T14:35:05Z","updated_at":"2017-03-21T14:35:05Z","author_association":"MEMBER","body":"Ok, fair points all-the-way-around.  I'm convinced that we're thinking it through.  I'll give this a bit more of a careful look today.  Thanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288097583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288419288","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288419288","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288419288,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQxOTI4OA==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T14:39:07Z","updated_at":"2017-03-22T18:43:38Z","author_association":"MEMBER","body":"All done, ready for review.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288419288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288440552","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288440552","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288440552,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQ0MDU1Mg==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T15:41:50Z","updated_at":"2017-03-22T16:54:30Z","author_association":"MEMBER","body":"# Testing Plan\r\n## Preliminaries\r\n\r\n* Please perform the following tests on the `full-dev` vagrant environment.\r\n* Set an environment variable to indicate `METRON_HOME`:\r\n`export METRON_HOME=/usr/metron/0.3.1` \r\n\r\n\r\n## Ensure Data Flows from the Indices\r\nEnsure that with a basic full-dev we get data into the elasticsearch\r\nindices and into HDFS.\r\n\r\n## (Optional) Free Up Space on the virtual machine\r\n\r\nFirst, let's free up some headroom on the virtual machine.  If you are running this on a\r\nmultinode cluster, you would not have to do this.\r\n* Stop and disable Metron in Ambari\r\n* Kill monit via `service monit stop`\r\n* Kill tcpreplay via `for i in $(ps -ef | grep tcpreplay | awk '{print $2}');do kill -9 $i;done`\r\n* Kill yaf via `for i in $(ps -ef | grep yaf | awk '{print $2}');do kill -9 $i;done`\r\n* Kill bro via `for i in $(ps -ef | grep bro | awk '{print $2}');do kill -9 $i;done`\r\n\r\n## Test the PCAP topology\r\n\r\nA new kafka spout necessitates testing pcap.\r\n### Install and start pycapa \r\n```\r\n# set env vars\r\nexport PYCAPA_HOME=/opt/pycapa\r\nexport PYTHON27_HOME=/opt/rh/python27/root\r\n\r\n# Install these packages via yum (RHEL, CentOS)\r\nyum -y install epel-release centos-release-scl \r\nyum -y install \"@Development tools\" python27 python27-scldevel python27-python-virtualenv libpcap-devel libselinux-python\r\n\r\n# Setup directories\r\nmkdir $PYCAPA_HOME && chmod 755 $PYCAPA_HOME\r\n\r\n#Grab pycapa from git \r\ncd ~\r\ngit clone https://github.com/apache/incubator-metron.git\r\ncp -R ~/incubator-metron/metron-sensors/pycapa* $PYCAPA_HOME\r\n\r\n# Create virtualenv\r\nexport LD_LIBRARY_PATH=\"/opt/rh/python27/root/usr/lib64\"\r\n${PYTHON27_HOME}/usr/bin/virtualenv pycapa-venv\r\n\r\n# Build it\r\ncd ${PYCAPA_HOME}/pycapa\r\n# activate the virtualenv\r\nsource ${PYCAPA_HOME}/pycapa-venv/bin/activate\r\npip install -r requirements.txt\r\npython setup.py install\r\n\r\n# Run it\r\ncd ${PYCAPA_HOME}/pycapa-venv/bin\r\npycapa --producer --topic pcap -i eth1 -k node1:6667\r\n```\r\n### Ensure pycapa can write to HDFS\r\n* Ensure that `/apps/metron/pcap` exists and can be written to by the\r\n  storm user.  If not, then:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir -p /apps/metron/pcap\r\nhadoop fs -chown metron:hadoop /apps/metron/pcap\r\nhadoop fs -chmod 775 /apps/metron/pcap\r\nexit\r\n``` \r\n* Start the pcap topology via `$METRON_HOME/bin/start_pcap_topology.sh`\r\n* Watch the topology in the Storm UI and kill the packet capture utility from before, when the number of packets ingested is over 3k.  Ensure that at at least 3 files exist on HDFS by running `hadoop fs -ls /apps/metron/pcap`\r\n* Choose a file (denoted by $FILE) and dump a few of the contents using the pcap_inspector utility via `$METRON_HOME/bin/pcap_inspector.sh -i $FILE -n 5`\r\n* Choose one of the lines and note the `ip_dst_port`.\r\n  * Note that when you run the commands below, the resulting file will be placed in the execution directory where you kicked off the job from.\r\n* Run a Stellar query filter query by executing a command similar to the following, with the values noted above (match your start_time format to the date format provided - default is to use millis since epoch):\r\n```\r\n$METRON_HOME/bin/pcap_query.sh query -st \"20160617\" -df \"yyyyMMdd\" -query \"ip_dst_port == 22\" -rpf 500\r\n```\r\n  * Note that if your MR job fails because of a lack of user directory for `root`, then the following will create the directory appropriately:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir /user/root\r\nhadoop fs -chown root:hadoop /user/root\r\nhadoop fs -chmod 755 /user/root\r\nexit\r\n```\r\n* Verify the MR job finishes successfully. Upon completion, you should see multiple files named with relatively current datestamps in your current directory, e.g. pcap-data-20160617160549737+0000.pcap\r\n* Copy the files to your local machine and verify you can them it in Wireshark. Open the files and ensure that they contain only packets to the destination port in question. \r\n\r\n## Test the Profiler\r\n\r\n### Setup\r\n* Ensure that Metron is stopped and put in maintenance mode in Ambari\r\n* Create the profiler hbase table\r\n`echo \"create 'profiler', 'P'\" | hbase shell`\r\n\r\n* Open `~/rand_gen.py` and paste the following:\r\n```\r\n#!/usr/bin/python\r\nimport random\r\nimport sys\r\nimport time\r\ndef main():\r\n  mu = float(sys.argv[1])\r\n  sigma = float(sys.argv[2])\r\n  freq_s = int(sys.argv[3])\r\n  while True:\r\n    out = '{ \"value\" : ' + str(random.gauss(mu, sigma)) + ' }'\r\n    print out\r\n    sys.stdout.flush()\r\n    time.sleep(freq_s)\r\n\r\nif __name__ == '__main__':\r\n  main()\r\n```\r\nThis will generate random JSON maps with a numeric field called `value`\r\n* From your metron build, copy up the profiler bundle:\r\n```\r\nscp metron-analytics/metron-profiler/target/metron-profiler-0.3.1-archive.tar.gz root@node1:/usr/metron/0.3.1\r\n```\r\n* From `$METRON_HOME` on `node1`:\r\n```\r\ntar xzvf metron-profiler-*.tar.gz\r\n```\r\n* Set the profiler to use 1 minute tick durations:\r\n  * Edit `$METRON_HOME/config/profiler.properties` to adjust the capture duration by changing `profiler.period.duration=15` to `profiler.period.duration=1`\r\n  * Edit `$METRON_HOME/config/zookeeper/global.json` and add the following properties:\r\n```\r\n\"profiler.client.period.duration\" : \"1\",\r\n\"profiler.client.period.duration.units\" : \"MINUTES\"\r\n```\r\n### Deploy the custom parser\r\n\r\n* Edit the value parser config at `$METRON_HOME/config/zookeeper/parsers/value.json`:\r\n```\r\n{\r\n  \"parserClassName\":\"org.apache.metron.parsers.json.JSONMapParser\",\r\n  \"sensorTopic\":\"value\",\r\n  \"fieldTransformations\" : [\r\n    {\r\n    \"transformation\" : \"STELLAR\"\r\n   ,\"output\" : [ \"num_profiles_parser\", \"mean_parser\" ]\r\n   ,\"config\" : {\r\n      \"num_profiles_parser\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n      \"mean_parser\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n               }\r\n    }\r\n                           ]\r\n}\r\n```\r\n\r\n* Edit the value enrichment config at `$METRON_HOME/config/zookeeper/enrichments/value.json`:\r\n```\r\n{\r\n  \"enrichment\" : {\r\n   \"fieldMap\": {\r\n      \"stellar\" : {\r\n        \"config\" : {\r\n        \"num_profiles_enrichment\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n        \"mean_enrichment\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n                  }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n* Create the value kafka topic:\r\n  `/usr/hdp/current/kafka-broker/bin/kafka-topics.sh --zookeeper node1:2181 --create --topic value --partitions 1 --replication-factor 1`\r\n* Push the configs via `$METRON_HOME/bin/zk_load_configs.sh -m PUSH -i $METRON_HOME/config/zookeeper -z node1:2181`\r\n* Start via `$METRON_HOME/bin/start_parser_topology.sh -k node1:6667 -z node1:2181 -s value`\r\n* Start the enrichment topology via `$METRON_HOME/bin/start_enrichment_topology.sh`\r\n* Start the indexing topology via `$METRON_HOME/bin/start_elasticsearch_topology.sh`\r\n\r\n\r\n### Start the profiler\r\n\r\n* Edit `$METRON_HOME/config/zookeeper/profiler.json` and paste in the following:\r\n```\r\n{\r\n  \"profiles\": [\r\n    {\r\n      \"profile\": \"stat\",\r\n      \"foreach\": \"'global'\",\r\n      \"onlyif\": \"source.type == 'value'\",\r\n      \"init\" : {\r\n               },\r\n      \"update\": {\r\n        \"s\": \"STATS_ADD(s, value)\"\r\n                },\r\n      \"result\": \"s\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n* `$METRON_HOME/bin/start_profiler_topology.sh`\r\n\r\n### Test Case\r\n\r\n* Set up a profile to accept some synthetic data with a numeric `value` field and persist a stats summary of the data\r\n\r\n* Send some synthetic data directly to the profiler:\r\n`python ~/rand_gen.py 0 1 1 | /usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --broker-list node1:6667 --topic value`\r\n* Wait for at least 15 minutes and execute the following via the Stellar REPL:\r\n```\r\n# Grab the profiles from 1 minute ago to 8 minutes ago\r\nLENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\r\n# Looks like 4 or 5 were returned, great \r\n```\r\nFor me, the following was the result:\r\n```\r\nStellar, Go!\r\nPlease note that functions are loading lazily in the background and will\r\nbe unavailable until loaded fully.\r\n{es.clustername=metron, es.ip=node1:9300, es.date.format=yyyy.MM.dd.HH,\r\nparser.error.topic=indexing, profiler.client.period.duration=1,\r\nprofiler.client.period.duration.units=MINUTES}\r\n[Stellar]>>> # Grab the profiles from 1 minute ago to 8 minutes ago\r\n[Stellar]>>> LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5\r\nminutes ago')))\r\nFunctions loaded, you may refer to functions now...\r\n4\r\n[Stellar]>>> # Looks like 4 or 5 were returned, great\r\n```\r\n* Delete any value index that currently exists (if any do) via `curl -XDELETE \"http://localhost:9200/value*\"`\r\n* Wait for a couple of seconds and run the following:\r\n```\r\ncurl -XPOST 'http://localhost:9200/value*/_search?pretty' -d '\r\n{\r\n  \"_source\" : [ \"num_profiles_parser\", \"num_profiles_enrichment\", \"mean_enrichment\", \"mean_parser\"]\r\n}\r\n'\r\n```\r\n\r\n* You should see values in the index with non-zero fields:\r\n     * `num_profiles_enrichment` should be 5\r\n     * `num_profiles_parser` should be 5\r\n     * `mean_enrichment` should be a non-zero double\r\n     * `mean_parser` should be a non-zero double\r\nFor reference, a sample message for me is:\r\n```\r\n{\r\n  \"num_profiles_parser\" : 5,\r\n    \"mean_enrichment\" : 0.004850856309056547,\r\n    \"num_profiles_enrichment\" : 5,\r\n    \"mean_parser\" : 0.004850856309056547\r\n}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288440552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288465995","html_url":"https://github.com/apache/metron/pull/487#issuecomment-288465995","issue_url":"https://api.github.com/repos/apache/metron/issues/487","id":288465995,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODQ2NTk5NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T16:56:43Z","updated_at":"2017-03-22T16:56:43Z","author_association":"MEMBER","body":"+1 by inspection, this one bit me last night.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288465995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288551773","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288551773","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288551773,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU1MTc3Mw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T21:53:44Z","updated_at":"2017-03-22T21:53:44Z","author_association":"MEMBER","body":"@justinleet good points overall.  Yeah, I'm not thrilled with the HDP dependency either, as I stated already.\r\n\r\nRegarding \"If flux gets support for the Builder items, would we just axe those classes entirely?\"\r\nI believe that the extension will live on.  It has a couple of benefits beyond the builder pattern in flux:\r\n* The parsers aren't using flux and do need a way to expose the configuration of the spout via properties.  This is part of the extension here.\r\n* A component of extension in the storm-kafka-client Builder is via polymorphism (e.g. the TupleBuilder, etc).  This will just never work well in flux, I think.\r\n* There is an assumption in the storm-kafka-client builder that we're passing in brokers directly, rather than reading them from zookeeper.\r\n* This API is shifting dramatically.  It's totally different in storm 1.0.3 vs 1.0.1.  Creating a layer here insulates us from API changes and localizes their impact.\r\n\r\nI made the TODOs because, while what we have here matched the capabilities of what we had before, we could do better in supporting multiple topics.  I wanted to bring out the places that would need to shift to support that.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288551773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288552295","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288552295","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288552295,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODU1MjI5NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-22T21:55:53Z","updated_at":"2017-03-22T21:55:53Z","author_association":"MEMBER","body":"I was planning to make a JIRA around the multiple topic bit.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288552295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288708644","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288708644","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288708644,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODcwODY0NA==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T12:51:26Z","updated_at":"2017-03-23T12:51:26Z","author_association":"CONTRIBUTOR","body":"@cestella I'm good with keeping the extension points especially after the points you made. I think the TODOs are valuable, I just wanted to know the thought behind potentially building it out.\r\n\r\nGiven the API instability, unfortunately it seems like our dependencies aren't going to provide that insulation layer.  I'd rather have that be provided in a stable manner upstream from us, but that's not something we have any control over.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288708644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288720222","html_url":"https://github.com/apache/metron/pull/487#issuecomment-288720222","issue_url":"https://api.github.com/repos/apache/metron/issues/487","id":288720222,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODcyMDIyMg==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T13:33:03Z","updated_at":"2017-03-23T13:33:03Z","author_association":"CONTRIBUTOR","body":"I'm +1 by inspection","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288720222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288739415","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288739415","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288739415,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODczOTQxNQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T14:37:42Z","updated_at":"2017-03-23T14:37:42Z","author_association":"MEMBER","body":"Follow-on JIRA to move back to apache storm for storm-kafka-client is at https://issues.apache.org/jira/browse/METRON-794","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288739415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/288838508","html_url":"https://github.com/apache/metron/pull/486#issuecomment-288838508","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":288838508,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgzODUwOA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T19:44:54Z","updated_at":"2017-03-24T16:23:48Z","author_association":"CONTRIBUTOR","body":"I just finished running some parser tests in a Kerberized environment to confirm that this will address both kerberized and non-kerberized configurations. Here is what I had to do to get this running. Note, I'm using Ambari to configure everything for Hadoop, but not the Metron components. There is separate work that will need to be done for Metron in the MPack for Ambari.\r\n\r\n1. Spin up full dev as normal (ensure that the profile is correctly set to -P HDP-2.5.0.0 in metron-deployment/roles/metron-builder/tasks/main.yml). As of this writing, the current full-dev ansible install will do a complete build as part of the deployment.\r\n2. `service monit stop` and kill all the topologies. You can go ahead and kill the other sensors per the commands from @cestella  as well (bro, pycapa, etc.). We'll spin up our own simple test topology and populate the kafka topic manually to test this out.\r\n3. Setup symlinks\r\n```\r\nln -s /usr/metron/0.3.1/lib/metron-*-uber.jar /usr/hdp/2.5.3.0-37/storm/extlib-daemon/\r\nln -s /usr/hdp/current/hadoop-client/conf/core-site.xml /etc/storm/conf\r\nln -s /usr/hdp/current/hbase-client/conf/hbase-site.xml /etc/storm/conf\r\nln -s /usr/hdp/2.5.3.0-37/storm/contrib/storm-hbase/storm-hbase-1.0.1.2.5.3.0-37.jar /usr/hdp/2.5.3.0-37/storm/extlib\r\nln -s /usr/hdp/2.5.3.0-37/storm/contrib/storm-hdfs/storm-hdfs-1.0.1.2.5.3.0-37.jar /usr/hdp/2.5.3.0-37/storm/extlib\r\n```\r\n4. Check that the jce security is setup in /usr/jdk64/jdk1.8.0_77/jre/lib/security/. If not, then you'll want to run through the following steps:\r\n4.1 Download the jce policy from: http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html and copy it to your vm.\r\n4.2 unzip -o -j -q /path-to-the-copied-zip/jce_policy-8.zip -d /usr/jdk64/jdk1.8.0_77/jre/lib/security/\r\n5. Configure MIT Kerberos\r\n```\r\nyum -y install krb5-server krb5-libs krb5-workstation\r\nsed -i 's/kerberos.example.com/node1/g' /etc/krb5.conf\r\ncp /etc/krb5.conf /var/lib/ambari-server/resources/scripts\r\nkdb5_util create -s\r\n/etc/rc.d/init.d/krb5kdc start\r\n/etc/rc.d/init.d/kadmin start\r\nchkconfig krb5kdc on\r\nchkconfig kadmin on \r\n```\r\n6. Setup admin and personal user principals. You'll kinit as the \"{your user name}\" user. For my tests, I did \"addprinc mike\". I just made the passwords \"password\" for the sake of easy testing.\r\n```\r\nkadmin.local -q \"addprinc admin/admin\"\r\nkadmin.local -q \"addprinc {your user name}\"\r\n```\r\n7. In Ambari, setup AutoHDFS by adding the following properties to custom-storm-site\r\n```\r\nnimbus.autocredential.plugins.classes=['org.apache.storm.hdfs.common.security.AutoHDFS','org.apache.storm.hbase.security.AutoHBase']\r\nnimbus.credential.renewers.classes=['org.apache.storm.hdfs.common.security.AutoHDFS','org.apache.storm.hbase.security.AutoHBase']\r\nhdfs.keytab.file=/etc/security/keytabs/hdfs.headless.keytab\r\nhdfs.kerberos.principal=hdfs-metron_cluster@EXAMPLE.COM\r\nhbase.keytab.file=/etc/security/keytabs/hbase.headless.keytab\r\nhbase.kerberos.principal=hbase-metron_cluster@EXAMPLE.COM\r\nnimbus.credential.renewers.freq.secs=82800\r\n```\r\n8. Kerberize the cluster via Ambari. The wizard is fairly straightforward, but further documentation can be found [here](http://docs.hortonworks.com/HDPDocuments/HDP2/HDP-2.5.3/bk_security/content/_enabling_kerberos_security_in_ambari.html). For this exercise, choose existing MIT KDC (this is what we setup and installed in previous steps.) Realm is EXAMPLE.COM. The admin principal will end up as admin/admin@EXAMPLE.COM when testing the KDC.\r\n9. Let the cluster spin up, but don't worry about starting up Metron via Ambari - we're going to run the parsers manually against the rest of the Hadoop cluster Kerberized.\r\n10. Kinit and provide the password you chose from earlier.\r\n```\r\nkinit <your username>\r\n```\r\n11. Create a kafka topic for the jsonMap parser.\r\n```\r\n/usr/hdp/current/kafka-broker/bin/kafka-topics.sh --zookeeper node1:2181 --create --topic jsonMap --replication-factor 1 --partitions 1\r\n```\r\n12. Setup the ACLs for the topic AND the consumer group. The consumer group config is new in this API as far as I can tell because we didn't have to do this in the \"storm-kafka\" version of the api. Note that the docs around kafka 0.10 will suggest using a \"--consumer-group\" option, but in HDP 2.5.x the option needs to be \"--group\". Also make sure you use your username in \"--allow-principal User:<your username>\" instead of \"mike\".  **EDIT:** Note that I'm also setting ACLs for enrichments so that the topology has permissions to write out to that topic. Also fixed the consumer group add (thanks @justinleet)\r\n```\r\n/usr/hdp/current/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:storm-metron_cluster --allow-principal User:mike --topic jsonMap\r\n/usr/hdp/current/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:storm-metron_cluster --allow-principal User:mike --topic enrichments\r\n/usr/hdp/current/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:storm-metron_cluster --allow-principal User:mike --group jsonMap_parser\r\n```\r\n13. Setup an additional config for the Kafka consumer security protocol options. Create a file wherever is convenient and note the path. e.g. Here is my config output from root home.\r\n```\r\n# cat ~/extra_config.json\r\n{\r\n    \"security.protocol\":\"PLAINTEXTSASL\"\r\n}\r\n```\r\n14. Configure the jsonMap parser to handle Kerberos. The parserConfig key is the new piece required for Kerberos.\r\n```\r\n# cat /usr/metron/0.3.1/config/zookeeper/parsers/jsonMap.json\r\n{\r\n  \"parserClassName\":\"org.apache.metron.parsers.json.JSONMapParser\",\r\n  \"sensorTopic\":\"jsonMap\",\r\n  \"parserConfig\" : {\r\n      \"kafka.producerConfigs\" : {\r\n          \"security.protocol\" : \"PLAINTEXTSASL\"\r\n      },\r\n      \"error.kafka.producerConfigs\" : {\r\n          \"security.protocol\" : \"PLAINTEXTSASL\"\r\n      }\r\n  }\r\n}\r\n```\r\n15. Push the updated configs to Zookeeper\r\n```\r\n/usr/metron/0.3.1/bin/zk_load_configs.sh -z node1:2181 -m PUSH -i /usr/metron/0.3.1/config/zookeeper\r\n```\r\n16. Start the topology\r\n```\r\n./start_parser_topology.sh -k node1:6667 -z node1:2181 -s jsonMap -esc ~/extra_config.json\r\n```\r\n17. Create a file with some test data that we'll push into the parser Kafka topic\r\n```\r\n# cat ~/sampledata.txt\r\n{ \"string\" : \"bar\", \"number\" : 2, \"ignored\" : [ \"blah\" ] }\r\n{ \"number\" : 7 }\r\n```\r\n18. Push data into Kafa\r\n```\r\ncat ~/sampledata.txt | /usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --broker-list node1:6667 --security-protocol PLAINTEXTSASL --topic jsonMap\r\n```\r\n19. Verify our data comes out on the other end by looking at the enrichments topic.\r\n```\r\n/usr/hdp/current/kafka-broker/bin/kafka-console-consumer.sh --zookeeper node1:2181 --from-beginning --security-protocol PLAINTEXTSASL --topic enrichments\r\n```\r\n\r\nThe above process worked for me with this PR. That should be it.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/288838508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289019330","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289019330","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289019330,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTAxOTMzMA==","user":{"login":"simonellistonball","id":1217895,"node_id":"MDQ6VXNlcjEyMTc4OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1217895?v=4","gravatar_id":"","url":"https://api.github.com/users/simonellistonball","html_url":"https://github.com/simonellistonball","followers_url":"https://api.github.com/users/simonellistonball/followers","following_url":"https://api.github.com/users/simonellistonball/following{/other_user}","gists_url":"https://api.github.com/users/simonellistonball/gists{/gist_id}","starred_url":"https://api.github.com/users/simonellistonball/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonellistonball/subscriptions","organizations_url":"https://api.github.com/users/simonellistonball/orgs","repos_url":"https://api.github.com/users/simonellistonball/repos","events_url":"https://api.github.com/users/simonellistonball/events{/privacy}","received_events_url":"https://api.github.com/users/simonellistonball/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T13:15:04Z","updated_at":"2017-03-24T13:15:04Z","author_association":"CONTRIBUTOR","body":"Opening this to the hadoop group feels wrong from a security perspective. That gives all the other hadoop users too much write access to the data store. A better solution would be to have the topologies run as a metron user rather than as storm, or to add the storm user to the metron group to maintain a least access required principal.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289019330/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289021555","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289021555","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289021555,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTAyMTU1NQ==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T13:25:07Z","updated_at":"2017-03-24T13:25:07Z","author_association":"CONTRIBUTOR","body":"I agree the topologies should run as the metron user, but this is just to get things back in a working state again (and it already used to be this way, so this isn't opening things up more than it was a couple weeks ago).\r\n\r\nI actually thought there was a separate Jira for running as the Metron user, but the one I was thinking of is https://issues.apache.org/jira/browse/METRON-349.  The ticket should really be to consolidate everything under the metron user with appropriate ownership.  I don't have a preference for updating that ticket or closing it as a new one (and I'm not sure which the community would prefer).","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289021555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289034651","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289034651","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289034651,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTAzNDY1MQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T14:17:51Z","updated_at":"2017-03-24T14:17:51Z","author_association":"MEMBER","body":"If you want to review just this work independent of 793 prior to 793 getting merged, you can find the commits:\r\n* [here](https://github.com/apache/incubator-metron/pull/490/commits/5e614efd861a1d059e04ef64914fc185b111e4b6)\r\n\r\nAlso, I still owe some doc changes around kerberizing vagrant and the CLI change to the `start_parser_topology.sh` script.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289034651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289056839","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289056839","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289056839,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA1NjgzOQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T15:33:45Z","updated_at":"2017-03-24T16:56:36Z","author_association":"MEMBER","body":"# Testing Plan\r\n## Preliminaries\r\n\r\n* Please perform the following tests on the `full-dev` vagrant environment.\r\n* Set an environment variable to indicate `METRON_HOME`:\r\n`export METRON_HOME=/usr/metron/0.3.1` \r\n\r\n\r\n## Ensure Data Flows from the Indices\r\nEnsure that with a basic full-dev we get data into the elasticsearch\r\nindices and into HDFS.\r\n\r\n## (Optional) Free Up Space on the virtual machine\r\n\r\nFirst, let's free up some headroom on the virtual machine.  If you are running this on a\r\nmultinode cluster, you would not have to do this.\r\n* Stop and disable Metron in Ambari\r\n* Kill monit via `service monit stop`\r\n* Kill tcpreplay via `for i in $(ps -ef | grep tcpreplay | awk '{print $2}');do kill -9 $i;done`\r\n* Kill yaf via `for i in $(ps -ef | grep yaf | awk '{print $2}');do kill -9 $i;done`\r\n* Kill bro via `for i in $(ps -ef | grep bro | awk '{print $2}');do kill -9 $i;done`\r\n\r\n## Test the PCAP topology\r\n\r\nA new kafka spout necessitates testing pcap.\r\n### Install and start pycapa \r\n```\r\n# set env vars\r\nexport PYCAPA_HOME=/opt/pycapa\r\nexport PYTHON27_HOME=/opt/rh/python27/root\r\n\r\n# Install these packages via yum (RHEL, CentOS)\r\nyum -y install epel-release centos-release-scl \r\nyum -y install \"@Development tools\" python27 python27-scldevel python27-python-virtualenv libpcap-devel libselinux-python\r\n\r\n# Setup directories\r\nmkdir $PYCAPA_HOME && chmod 755 $PYCAPA_HOME\r\n\r\n#Grab pycapa from git \r\ncd ~\r\ngit clone https://github.com/apache/incubator-metron.git\r\ncp -R ~/incubator-metron/metron-sensors/pycapa* $PYCAPA_HOME\r\n\r\n# Create virtualenv\r\nexport LD_LIBRARY_PATH=\"/opt/rh/python27/root/usr/lib64\"\r\n\r\n# Build it\r\ncd ${PYCAPA_HOME}\r\n${PYTHON27_HOME}/usr/bin/virtualenv pycapa-venv\r\ncd ${PYCAPA_HOME}/pycapa\r\n# activate the virtualenv\r\nsource ${PYCAPA_HOME}/pycapa-venv/bin/activate\r\npip install -r requirements.txt\r\npython setup.py install\r\n\r\n# Run it\r\ncd ${PYCAPA_HOME}/pycapa-venv/bin\r\npycapa --producer --topic pcap -i eth1 -k node1:6667\r\n```\r\n### Ensure pycapa can write to HDFS\r\n* Ensure that `/apps/metron/pcap` exists and can be written to by the\r\n  storm user.  If not, then:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir -p /apps/metron/pcap\r\nhadoop fs -chown metron:hadoop /apps/metron/pcap\r\nhadoop fs -chmod 775 /apps/metron/pcap\r\nexit\r\n``` \r\n* Start the pcap topology via `$METRON_HOME/bin/start_pcap_topology.sh`\r\n* Watch the topology in the Storm UI and kill the packet capture utility from before, when the number of packets ingested is over 3k.  Ensure that at at least 3 files exist on HDFS by running `hadoop fs -ls /apps/metron/pcap`\r\n* Choose a file (denoted by $FILE) and dump a few of the contents using the pcap_inspector utility via `$METRON_HOME/bin/pcap_inspector.sh -i $FILE -n 5`\r\n* Choose one of the lines and note the `ip_dst_port`.\r\n  * Note that when you run the commands below, the resulting file will be placed in the execution directory where you kicked off the job from.\r\n* Run a Stellar query filter query by executing a command similar to the following, with the values noted above (match your start_time format to the date format provided - default is to use millis since epoch):\r\n```\r\n$METRON_HOME/bin/pcap_query.sh query -st \"20160617\" -df \"yyyyMMdd\" -query \"ip_dst_port == 22\" -rpf 500\r\n```\r\n  * Note that if your MR job fails because of a lack of user directory for `root`, then the following will create the directory appropriately:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir /user/root\r\nhadoop fs -chown root:hadoop /user/root\r\nhadoop fs -chmod 755 /user/root\r\nexit\r\n```\r\n* Verify the MR job finishes successfully. Upon completion, you should see multiple files named with relatively current datestamps in your current directory, e.g. pcap-data-20160617160549737+0000.pcap\r\n* Copy the files to your local machine and verify you can them it in Wireshark. Open the files and ensure that they contain only packets to the destination port in question. \r\n\r\n## Test the Profiler\r\n\r\n### Setup\r\n* Ensure that Metron is stopped and put in maintenance mode in Ambari\r\n* Create the profiler hbase table\r\n`echo \"create 'profiler', 'P'\" | hbase shell`\r\n\r\n* Open `~/rand_gen.py` and paste the following:\r\n```\r\n#!/usr/bin/python\r\nimport random\r\nimport sys\r\nimport time\r\ndef main():\r\n  mu = float(sys.argv[1])\r\n  sigma = float(sys.argv[2])\r\n  freq_s = int(sys.argv[3])\r\n  while True:\r\n    out = '{ \"value\" : ' + str(random.gauss(mu, sigma)) + ' }'\r\n    print out\r\n    sys.stdout.flush()\r\n    time.sleep(freq_s)\r\n\r\nif __name__ == '__main__':\r\n  main()\r\n```\r\nThis will generate random JSON maps with a numeric field called `value`\r\n* From your metron build, copy up the profiler bundle:\r\n```\r\nscp metron-analytics/metron-profiler/target/metron-profiler-0.3.1-archive.tar.gz root@node1:/usr/metron/0.3.1\r\n```\r\n* From `$METRON_HOME` on `node1`:\r\n```\r\ntar xzvf metron-profiler-*.tar.gz\r\n```\r\n* Set the profiler to use 1 minute tick durations:\r\n  * Edit `$METRON_HOME/config/profiler.properties` to adjust the capture duration by changing `profiler.period.duration=15` to `profiler.period.duration=1`\r\n  * Edit `$METRON_HOME/config/zookeeper/global.json` and add the following properties:\r\n```\r\n\"profiler.client.period.duration\" : \"1\",\r\n\"profiler.client.period.duration.units\" : \"MINUTES\"\r\n```\r\n### Deploy the custom parser\r\n\r\n* Edit the value parser config at `$METRON_HOME/config/zookeeper/parsers/value.json`:\r\n```\r\n{\r\n  \"parserClassName\":\"org.apache.metron.parsers.json.JSONMapParser\",\r\n  \"sensorTopic\":\"value\",\r\n  \"fieldTransformations\" : [\r\n    {\r\n    \"transformation\" : \"STELLAR\"\r\n   ,\"output\" : [ \"num_profiles_parser\", \"mean_parser\" ]\r\n   ,\"config\" : {\r\n      \"num_profiles_parser\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n      \"mean_parser\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n               }\r\n    }\r\n                           ]\r\n}\r\n```\r\n\r\n* Edit the value enrichment config at `$METRON_HOME/config/zookeeper/enrichments/value.json`:\r\n```\r\n{\r\n  \"enrichment\" : {\r\n   \"fieldMap\": {\r\n      \"stellar\" : {\r\n        \"config\" : {\r\n        \"num_profiles_enrichment\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n        \"mean_enrichment\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n                  }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n* Create the value kafka topic:\r\n  `/usr/hdp/current/kafka-broker/bin/kafka-topics.sh --zookeeper node1:2181 --create --topic value --partitions 1 --replication-factor 1`\r\n\r\n\r\n### Start the profiler\r\n\r\n* Edit `$METRON_HOME/config/zookeeper/profiler.json` and paste in the following:\r\n```\r\n{\r\n  \"profiles\": [\r\n    {\r\n      \"profile\": \"stat\",\r\n      \"foreach\": \"'global'\",\r\n      \"onlyif\": \"source.type == 'value'\",\r\n      \"init\" : {\r\n               },\r\n      \"update\": {\r\n        \"s\": \"STATS_ADD(s, value)\"\r\n                },\r\n      \"result\": \"s\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n\r\n### Test Case\r\n\r\n* Push the configs via `$METRON_HOME/bin/zk_load_configs.sh -m PUSH -i $METRON_HOME/config/zookeeper -z node1:2181`\r\n* Start via `$METRON_HOME/bin/start_parser_topology.sh -k node1:6667 -z node1:2181 -s value`\r\n* Start the enrichment topology via `$METRON_HOME/bin/start_enrichment_topology.sh`\r\n* Start the indexing topology via `$METRON_HOME/bin/start_elasticsearch_topology.sh`\r\n* Start the profiler topology via `$METRON_HOME/bin/start_profiler_topology.sh`\r\n* Set up a profile to accept some synthetic data with a numeric `value` field and persist a stats summary of the data\r\n* Send some synthetic data directly to the profiler:\r\n`python ~/rand_gen.py 0 1 1 | /usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --broker-list node1:6667 --topic value`\r\n* Wait for at least 15 minutes and execute the following via the Stellar REPL:\r\n```\r\n# Grab the profiles from 1 minute ago to 8 minutes ago\r\nLENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\r\n# Looks like 4 or 5 were returned, great \r\n```\r\nFor me, the following was the result:\r\n```\r\nStellar, Go!\r\nPlease note that functions are loading lazily in the background and will\r\nbe unavailable until loaded fully.\r\n{es.clustername=metron, es.ip=node1:9300, es.date.format=yyyy.MM.dd.HH,\r\nparser.error.topic=indexing, profiler.client.period.duration=1,\r\nprofiler.client.period.duration.units=MINUTES}\r\n[Stellar]>>> # Grab the profiles from 1 minute ago to 8 minutes ago\r\n[Stellar]>>> LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5\r\nminutes ago')))\r\nFunctions loaded, you may refer to functions now...\r\n4\r\n[Stellar]>>> # Looks like 4 or 5 were returned, great\r\n```\r\n* Delete any value index that currently exists (if any do) via `curl -XDELETE \"http://localhost:9200/value*\"`\r\n* Wait for a couple of seconds and run the following:\r\n```\r\ncurl -XPOST 'http://localhost:9200/value*/_search?pretty' -d '\r\n{\r\n  \"_source\" : [ \"num_profiles_parser\", \"num_profiles_enrichment\", \"mean_enrichment\", \"mean_parser\"]\r\n}\r\n'\r\n```\r\n\r\n* You should see values in the index with non-zero fields:\r\n     * `num_profiles_enrichment` should be 5\r\n     * `num_profiles_parser` should be 5\r\n     * `mean_enrichment` should be a non-zero double\r\n     * `mean_parser` should be a non-zero double\r\nFor reference, a sample message for me is:\r\n```\r\n{\r\n  \"num_profiles_parser\" : 5,\r\n    \"mean_enrichment\" : 0.004850856309056547,\r\n    \"num_profiles_enrichment\" : 5,\r\n    \"mean_parser\" : 0.004850856309056547\r\n}\r\n```\r\n\r\n## Test Enrichment Loading\r\n\r\n* Download the Alexa top 1m data set\r\n```\r\nwget http://s3.amazonaws.com/alexa-static/top-1m.csv.zip\r\nunzip top-1m.csv.zip\r\n```\r\n* Stage import file\r\n```\r\nhead -n 10000 top-1m.csv > top-10k.csv\r\nhead -n 10 top-1m.csv > top-10.csv\r\nhadoop fs -put top-10k.csv /tmp\r\n```\r\n* Create an extractor.json for the CSV data by editing `extractor.json` and pasting in these contents:\r\n```\r\n{\r\n  \"config\" : {\r\n    \"zk_quorum\" : \"node1:2181\",\r\n    \"columns\" : {\r\n       \"rank\" : 0,\r\n       \"domain\" : 1\r\n    },\r\n    \"value_transform\" : {\r\n       \"domain\" : \"DOMAIN_REMOVE_TLD(domain)\",\r\n       \"port\" : \"es.port\"\r\n    },\r\n    \"value_filter\" : \"LENGTH(domain) > 0\",\r\n    \"indicator_column\" : \"domain\",\r\n    \"indicator_transform\" : {\r\n       \"indicator\" : \"DOMAIN_REMOVE_TLD(indicator)\"\r\n    },\r\n    \"indicator_filter\" : \"LENGTH(indicator) > 0\",\r\n    \"type\" : \"top_domains\",\r\n    \"separator\" : \",\"\r\n  },\r\n  \"extractor\" : \"CSV\"\r\n}\r\n```\r\n### Test Flat File\r\n* You should see 9275 records in HBase. (Less than the perhaps expected 10k)\r\n`echo \"truncate 'enrichment'\" | hbase shell && $METRON_HOME/bin/flatfile_loader.sh -i ./top-10k.csv -t enrichment -c t -e ./extractor.json -p 5 -b 128 && echo \"count 'enrichment'\" | hbase shell`\r\n### Test MR Job\r\n* You should see 9275 records in HBase. (Less than the perhaps expected 10k)\r\n`echo \"truncate 'enrichment'\" | hbase shell && $METRON_HOME/bin/flatfile_loader.sh -i /tmp/top-10k.csv -t enrichment -c t -e ./extractor.json -m MR && echo \"count 'enrichment'\" | hbase shell`\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289056839/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289062876","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289062876","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289062876,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA2Mjg3Ng==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T15:54:12Z","updated_at":"2017-03-24T15:54:12Z","author_association":"CONTRIBUTOR","body":"+1, was able to follow Mike's instructions, with a couple caveats.\r\n\r\n- Group authorization command was missing\r\n```\r\n/usr/hdp/current/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:storm-metron_cluster --allow-principal User:justin --group jsonMap_parser\r\n```\r\n- Topic authorization command on the enrichments topic side was missing.\r\n```\r\n /usr/hdp/current/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:storm-metron_cluster --allow-principal User:justin --topic enrichments\r\n```","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289062876/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289063602","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289063602","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289063602,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA2MzYwMg==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T15:56:44Z","updated_at":"2017-03-24T15:56:44Z","author_association":"CONTRIBUTOR","body":"@cestella Just noticed Travis after I commented.  I'm moderately surprised that the most recent PR would break it, do you know what the issue is?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289063602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289065085","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289065085","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289065085,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA2NTA4NQ==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T16:01:41Z","updated_at":"2017-03-24T16:01:41Z","author_association":"CONTRIBUTOR","body":"@justinleet Thanks for checking this out - modified the instructions with the ACL command corrections. Must have copy-pasted the wrong commands from history, so thanks for that!","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289065085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289080696","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289080696","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289080696,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA4MDY5Ng==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T16:57:58Z","updated_at":"2017-03-24T16:57:58Z","author_association":"MEMBER","body":"@justinleet It is unclear and that test has had some intermittent issues, especially under load, I've noticed.  I added a more descriptive message to help diagnose.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289080696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289092662","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289092662","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289092662,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5MjY2Mg==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:40:18Z","updated_at":"2017-03-24T17:40:18Z","author_association":"MEMBER","body":"@cestella , In the Jira, please add the dependencies as blockers (at least METRON-793), and create (if it doesn't exist yet) the jira(s) for the needed follow-on work and link to them too.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289092662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289096346","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289096346","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289096346,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5NjM0Ng==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:50:38Z","updated_at":"2017-03-24T17:50:38Z","author_association":"CONTRIBUTOR","body":"For anybody looking, Matt's review comment is still relevant to discussion, but unfortunately hidden by GitHub thinking it's outdated after the last commit.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289096346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289106937","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289106937","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289106937,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEwNjkzNw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T18:26:25Z","updated_at":"2017-03-24T18:26:25Z","author_association":"MEMBER","body":"I found a couple of spots where we might not be cleaning things up and exceptions that are thrown that kill the spout that shouldn't.  I've run the test 10 times locally and will continue to run it in travis for the rest of the day to suss out any other lingering issues.  It almost assuredly is correlated to shutting down things during load, I think.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289106937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289115007","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289115007","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289115007,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTExNTAwNw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T18:58:27Z","updated_at":"2017-03-24T18:58:27Z","author_association":"MEMBER","body":"Good catch.  I made the dependency explicit and created the JIRAs that I know about for kerberos [here](https://issues.apache.org/jira/browse/METRON-802?jql=labels%20%3D%20kerberos%20AND%20project%20%3D%20Metron)\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289115007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289135460","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289135460","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289135460,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEzNTQ2MA==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T20:31:54Z","updated_at":"2017-03-24T20:31:54Z","author_association":"MEMBER","body":"Thanks.  Looks okay to me now, for the intended purpose.  +0 due to Simon's concerns; I'd prefer someone with more experience in Metron give you the plus one.\r\n\r\nRegarding @simonellistonball 's comments:\r\nThe prior assignment of group ownership as `metron_group` in enrichment_commands.py, line 114, and indexing_commands.py, line 104, dates from the commit for \r\n* [METRON-671 Refactor existing Ansible deployment to use Ambari MPack (dlyle via justinleet)#436](https://github.com/justinleet/incubator-metron/commit/68a334a8717d2a6b82f7f9651c57bc75e256ba97)\r\nPrior to PR#436 they were both set to `user_group`.\r\n\r\n@dlyle65535 are you okay with setting these back to `user_group`, as they were before?\r\nie do you agree with @justinleet 's reasoning?  Thanks.\r\n\r\n@justinleet , you say: \"Other items, such as configs and installation files, were just left as the metron group.\"  Why is this okay?  Don't the topologies have to read config files too?  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289135460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289137787","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289137787","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289137787,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEzNzc4Nw==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T20:42:19Z","updated_at":"2017-03-24T20:42:19Z","author_association":"CONTRIBUTOR","body":"@mattf-horton Permissions on the other items are generally 775, so they can be read as needed (and should be scaled back once we have everything lined up with the user as @simonellistonball mentions). I just wanted to touch things as little as possible to get them back in a working state.\r\n\r\nWe should either expand out or replace METRON-349 (including closing off permissions) as the actual solution to the problem.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289137787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289138350","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289138350","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289138350,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEzODM1MA==","user":{"login":"simonellistonball","id":1217895,"node_id":"MDQ6VXNlcjEyMTc4OTU=","avatar_url":"https://avatars.githubusercontent.com/u/1217895?v=4","gravatar_id":"","url":"https://api.github.com/users/simonellistonball","html_url":"https://github.com/simonellistonball","followers_url":"https://api.github.com/users/simonellistonball/followers","following_url":"https://api.github.com/users/simonellistonball/following{/other_user}","gists_url":"https://api.github.com/users/simonellistonball/gists{/gist_id}","starred_url":"https://api.github.com/users/simonellistonball/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonellistonball/subscriptions","organizations_url":"https://api.github.com/users/simonellistonball/orgs","repos_url":"https://api.github.com/users/simonellistonball/repos","events_url":"https://api.github.com/users/simonellistonball/events{/privacy}","received_events_url":"https://api.github.com/users/simonellistonball/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T20:44:51Z","updated_at":"2017-03-24T20:44:51Z","author_association":"CONTRIBUTOR","body":"I agree, let's get this sorted, and then follow up with a general review of the permissions once we've got the rest of the security pieces in place.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289138350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289139642","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289139642","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289139642,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEzOTY0Mg==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T20:50:40Z","updated_at":"2017-03-24T20:50:40Z","author_association":"MEMBER","body":"+1 then, thanks.  Please expand METRON-349 to include these issues too.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289139642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289140071","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289140071","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289140071,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTE0MDA3MQ==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T20:52:54Z","updated_at":"2017-03-24T20:52:54Z","author_association":"MEMBER","body":"Thanks, there didn't seem to be a jira for parsers, so I expanded the scope of METRON-798 and made bro it's first sub-task.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289140071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289167845","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289167845","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289167845,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTE2Nzg0NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T23:36:38Z","updated_at":"2017-03-24T23:36:38Z","author_association":"MEMBER","body":"Ok, update on the integration tests.  It appears that the issue is that storm 1.0.3 does not consistently kill the slots when shutting down.  It times out after a minute and dies.  The fix that I am testing is to directly close the slot in that case.  I've run the travis build about 8 times with no failures.  I'm running locally 20 times before I claim it's fixed.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289167845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289214449","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289214449","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289214449,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTIxNDQ0OQ==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-25T14:16:30Z","updated_at":"2017-03-25T14:16:30Z","author_association":"CONTRIBUTOR","body":"I don't have an objection. I made that change because there was some issue with user_group. Unfortunately, I can't remember exactly what that was. In it's current state, what's the failure mode? I didn't see any errors in any of the final runs I performed in full dev or ec2. ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289214449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289319740","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289319740","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289319740,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTMxOTc0MA==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-26T21:58:43Z","updated_at":"2017-03-26T21:58:43Z","author_association":"CONTRIBUTOR","body":"@dlyle65535 Failure mode is that HDFS writes from Storm fail.  The directories are owned by metron:metron with 775.  Storm isn't in the metron group, so it fails to write.  The perms exception is thrown in the bolt and no output file is created.  Writes to ES work as expected.  Validating this is pretty easy, just run up full dev and see if the perms error shows up and if HDFS gets any files.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289319740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289320989","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289320989","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289320989,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTMyMDk4OQ==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-26T22:18:36Z","updated_at":"2017-03-26T22:18:36Z","author_association":"CONTRIBUTOR","body":"https://issues.apache.org/jira/browse/METRON-349 is updated to be more complete and reflect the current state of things.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289320989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289343078","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289343078","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289343078,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTM0MzA3OA==","user":{"login":"james-sirota","id":4854764,"node_id":"MDQ6VXNlcjQ4NTQ3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4854764?v=4","gravatar_id":"","url":"https://api.github.com/users/james-sirota","html_url":"https://github.com/james-sirota","followers_url":"https://api.github.com/users/james-sirota/followers","following_url":"https://api.github.com/users/james-sirota/following{/other_user}","gists_url":"https://api.github.com/users/james-sirota/gists{/gist_id}","starred_url":"https://api.github.com/users/james-sirota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/james-sirota/subscriptions","organizations_url":"https://api.github.com/users/james-sirota/orgs","repos_url":"https://api.github.com/users/james-sirota/repos","events_url":"https://api.github.com/users/james-sirota/events{/privacy}","received_events_url":"https://api.github.com/users/james-sirota/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T03:03:58Z","updated_at":"2017-03-27T03:03:58Z","author_association":"NONE","body":"I was able to validate this on a single-node Suse-based Hadoop cluster once with Kerberos disabled and second time with Kerberos enabled.  That's a good first step.  I will try to run this up in AWS tomorrow on a larger cluster to see if it still works.  But so far so good. ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289343078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289343694","html_url":"https://github.com/apache/metron/pull/490#issuecomment-289343694","issue_url":"https://api.github.com/repos/apache/metron/issues/490","id":289343694,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTM0MzY5NA==","user":{"login":"james-sirota","id":4854764,"node_id":"MDQ6VXNlcjQ4NTQ3NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/4854764?v=4","gravatar_id":"","url":"https://api.github.com/users/james-sirota","html_url":"https://github.com/james-sirota","followers_url":"https://api.github.com/users/james-sirota/followers","following_url":"https://api.github.com/users/james-sirota/following{/other_user}","gists_url":"https://api.github.com/users/james-sirota/gists{/gist_id}","starred_url":"https://api.github.com/users/james-sirota/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/james-sirota/subscriptions","organizations_url":"https://api.github.com/users/james-sirota/orgs","repos_url":"https://api.github.com/users/james-sirota/repos","events_url":"https://api.github.com/users/james-sirota/events{/privacy}","received_events_url":"https://api.github.com/users/james-sirota/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T03:09:46Z","updated_at":"2017-03-27T03:09:46Z","author_association":"NONE","body":"I reviewed this with 793.  I was able to validate this on a single-node Suse-based Hadoop cluster once with Kerberos disabled and second time with Kerberos enabled.  That's a good first step.  I will try to run this up in AWS tomorrow on a larger cluster to see if it still works.  But so far so good. ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289343694/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289443513","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289443513","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289443513,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ0MzUxMw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T12:50:04Z","updated_at":"2017-03-27T12:50:04Z","author_association":"MEMBER","body":"Ok, I ran it 20 times independently over the weekend and again through travis whenever I had a moment and the tests appear stable after I kill the slots manually as a last resort in the FluxComponent.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289443513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289443905","html_url":"https://github.com/apache/metron/pull/486#issuecomment-289443905","issue_url":"https://api.github.com/repos/apache/metron/issues/486","id":289443905,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ0MzkwNQ==","user":{"login":"justinleet","id":5077341,"node_id":"MDQ6VXNlcjUwNzczNDE=","avatar_url":"https://avatars.githubusercontent.com/u/5077341?v=4","gravatar_id":"","url":"https://api.github.com/users/justinleet","html_url":"https://github.com/justinleet","followers_url":"https://api.github.com/users/justinleet/followers","following_url":"https://api.github.com/users/justinleet/following{/other_user}","gists_url":"https://api.github.com/users/justinleet/gists{/gist_id}","starred_url":"https://api.github.com/users/justinleet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinleet/subscriptions","organizations_url":"https://api.github.com/users/justinleet/orgs","repos_url":"https://api.github.com/users/justinleet/repos","events_url":"https://api.github.com/users/justinleet/events{/privacy}","received_events_url":"https://api.github.com/users/justinleet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T12:51:46Z","updated_at":"2017-03-27T12:51:46Z","author_association":"CONTRIBUTOR","body":"@cestella My +1 stands with the testing issues ironed out.  Thanks for looking into it.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289443905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289452092","html_url":"https://github.com/apache/metron/pull/488#issuecomment-289452092","issue_url":"https://api.github.com/repos/apache/metron/issues/488","id":289452092,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ1MjA5Mg==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T13:24:44Z","updated_at":"2017-03-27T13:24:44Z","author_association":"MEMBER","body":"Piling on, +1  Thanks for the quick turnaround, @justinleet ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289452092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289453188","html_url":"https://github.com/apache/metron/pull/472#issuecomment-289453188","issue_url":"https://api.github.com/repos/apache/metron/issues/472","id":289453188,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTQ1MzE4OA==","user":{"login":"merrimanr","id":311928,"node_id":"MDQ6VXNlcjMxMTkyOA==","avatar_url":"https://avatars.githubusercontent.com/u/311928?v=4","gravatar_id":"","url":"https://api.github.com/users/merrimanr","html_url":"https://github.com/merrimanr","followers_url":"https://api.github.com/users/merrimanr/followers","following_url":"https://api.github.com/users/merrimanr/following{/other_user}","gists_url":"https://api.github.com/users/merrimanr/gists{/gist_id}","starred_url":"https://api.github.com/users/merrimanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merrimanr/subscriptions","organizations_url":"https://api.github.com/users/merrimanr/orgs","repos_url":"https://api.github.com/users/merrimanr/repos","events_url":"https://api.github.com/users/merrimanr/events{/privacy}","received_events_url":"https://api.github.com/users/merrimanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T13:28:48Z","updated_at":"2017-03-27T13:28:48Z","author_association":"CONTRIBUTOR","body":"Bump.  I think this is ready to go @kylerichardson.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289453188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289612911","html_url":"https://github.com/apache/metron/pull/493#issuecomment-289612911","issue_url":"https://api.github.com/repos/apache/metron/issues/493","id":289612911,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTYxMjkxMQ==","user":{"login":"merrimanr","id":311928,"node_id":"MDQ6VXNlcjMxMTkyOA==","avatar_url":"https://avatars.githubusercontent.com/u/311928?v=4","gravatar_id":"","url":"https://api.github.com/users/merrimanr","html_url":"https://github.com/merrimanr","followers_url":"https://api.github.com/users/merrimanr/followers","following_url":"https://api.github.com/users/merrimanr/following{/other_user}","gists_url":"https://api.github.com/users/merrimanr/gists{/gist_id}","starred_url":"https://api.github.com/users/merrimanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merrimanr/subscriptions","organizations_url":"https://api.github.com/users/merrimanr/orgs","repos_url":"https://api.github.com/users/merrimanr/repos","events_url":"https://api.github.com/users/merrimanr/events{/privacy}","received_events_url":"https://api.github.com/users/merrimanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T23:08:43Z","updated_at":"2017-03-27T23:08:43Z","author_association":"CONTRIBUTOR","body":"+1 tested this against quick dev and was able to parse sample asa messages","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289612911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289646103","html_url":"https://github.com/apache/metron/pull/472#issuecomment-289646103","issue_url":"https://api.github.com/repos/apache/metron/issues/472","id":289646103,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTY0NjEwMw==","user":{"login":"kylerichardson","id":10392029,"node_id":"MDQ6VXNlcjEwMzkyMDI5","avatar_url":"https://avatars.githubusercontent.com/u/10392029?v=4","gravatar_id":"","url":"https://api.github.com/users/kylerichardson","html_url":"https://github.com/kylerichardson","followers_url":"https://api.github.com/users/kylerichardson/followers","following_url":"https://api.github.com/users/kylerichardson/following{/other_user}","gists_url":"https://api.github.com/users/kylerichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/kylerichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylerichardson/subscriptions","organizations_url":"https://api.github.com/users/kylerichardson/orgs","repos_url":"https://api.github.com/users/kylerichardson/repos","events_url":"https://api.github.com/users/kylerichardson/events{/privacy}","received_events_url":"https://api.github.com/users/kylerichardson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T02:42:52Z","updated_at":"2017-03-28T02:42:52Z","author_association":"CONTRIBUTOR","body":"@merrimanr Just pushed the changes for adding the indexing configs. Should be ready to go now. Can you give it another glance?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289646103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289769556","html_url":"https://github.com/apache/metron/pull/491#issuecomment-289769556","issue_url":"https://api.github.com/repos/apache/metron/issues/491","id":289769556,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc2OTU1Ng==","user":{"login":"merrimanr","id":311928,"node_id":"MDQ6VXNlcjMxMTkyOA==","avatar_url":"https://avatars.githubusercontent.com/u/311928?v=4","gravatar_id":"","url":"https://api.github.com/users/merrimanr","html_url":"https://github.com/merrimanr","followers_url":"https://api.github.com/users/merrimanr/followers","following_url":"https://api.github.com/users/merrimanr/following{/other_user}","gists_url":"https://api.github.com/users/merrimanr/gists{/gist_id}","starred_url":"https://api.github.com/users/merrimanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merrimanr/subscriptions","organizations_url":"https://api.github.com/users/merrimanr/orgs","repos_url":"https://api.github.com/users/merrimanr/repos","events_url":"https://api.github.com/users/merrimanr/events{/privacy}","received_events_url":"https://api.github.com/users/merrimanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T13:29:24Z","updated_at":"2017-03-28T13:29:24Z","author_association":"CONTRIBUTOR","body":"Ran it several times.  Looks good. +1","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289769556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289771898","html_url":"https://github.com/apache/metron/pull/472#issuecomment-289771898","issue_url":"https://api.github.com/repos/apache/metron/issues/472","id":289771898,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTc3MTg5OA==","user":{"login":"merrimanr","id":311928,"node_id":"MDQ6VXNlcjMxMTkyOA==","avatar_url":"https://avatars.githubusercontent.com/u/311928?v=4","gravatar_id":"","url":"https://api.github.com/users/merrimanr","html_url":"https://github.com/merrimanr","followers_url":"https://api.github.com/users/merrimanr/followers","following_url":"https://api.github.com/users/merrimanr/following{/other_user}","gists_url":"https://api.github.com/users/merrimanr/gists{/gist_id}","starred_url":"https://api.github.com/users/merrimanr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merrimanr/subscriptions","organizations_url":"https://api.github.com/users/merrimanr/orgs","repos_url":"https://api.github.com/users/merrimanr/repos","events_url":"https://api.github.com/users/merrimanr/events{/privacy}","received_events_url":"https://api.github.com/users/merrimanr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T13:37:15Z","updated_at":"2017-03-28T13:37:15Z","author_association":"CONTRIBUTOR","body":"Looks good.  I like the packages approach instead of listing out individual modules.  +1","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289771898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289805557","html_url":"https://github.com/apache/metron/pull/494#issuecomment-289805557","issue_url":"https://api.github.com/repos/apache/metron/issues/494","id":289805557,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgwNTU1Nw==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:21:59Z","updated_at":"2017-03-28T15:21:59Z","author_association":"CONTRIBUTOR","body":"Since all assemblies require this, would it make sense to configure it in pluginManagement in the top level POM?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289805557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289813437","html_url":"https://github.com/apache/metron/pull/494#issuecomment-289813437","issue_url":"https://api.github.com/repos/apache/metron/issues/494","id":289813437,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgxMzQzNw==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T15:46:20Z","updated_at":"2017-03-28T15:46:20Z","author_association":"CONTRIBUTOR","body":"Ok - removed from child poms, put in parent","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289813437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289818844","html_url":"https://github.com/apache/metron/pull/494#issuecomment-289818844","issue_url":"https://api.github.com/repos/apache/metron/issues/494","id":289818844,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTgxODg0NA==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-28T16:03:01Z","updated_at":"2017-03-28T16:03:01Z","author_association":"CONTRIBUTOR","body":"Thank *you*.  My maven foo is not that strong, it didn't occur to me, and this is like the third time fixing this!","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289818844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/289946829","html_url":"https://github.com/apache/metron/pull/472#issuecomment-289946829","issue_url":"https://api.github.com/repos/apache/metron/issues/472","id":289946829,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTk0NjgyOQ==","user":{"login":"kylerichardson","id":10392029,"node_id":"MDQ6VXNlcjEwMzkyMDI5","avatar_url":"https://avatars.githubusercontent.com/u/10392029?v=4","gravatar_id":"","url":"https://api.github.com/users/kylerichardson","html_url":"https://github.com/kylerichardson","followers_url":"https://api.github.com/users/kylerichardson/followers","following_url":"https://api.github.com/users/kylerichardson/following{/other_user}","gists_url":"https://api.github.com/users/kylerichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/kylerichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylerichardson/subscriptions","organizations_url":"https://api.github.com/users/kylerichardson/orgs","repos_url":"https://api.github.com/users/kylerichardson/repos","events_url":"https://api.github.com/users/kylerichardson/events{/privacy}","received_events_url":"https://api.github.com/users/kylerichardson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T00:36:13Z","updated_at":"2017-03-29T00:36:13Z","author_association":"CONTRIBUTOR","body":"Thanks! Next time the storm Dockerfile needs a tweak, I'll rework it to use the packages approach too.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/289946829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290072595","html_url":"https://github.com/apache/metron/pull/495#issuecomment-290072595","issue_url":"https://api.github.com/repos/apache/metron/issues/495","id":290072595,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDA3MjU5NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T12:20:35Z","updated_at":"2017-03-29T12:20:35Z","author_association":"MEMBER","body":"# Testing Plan\r\n## Preliminaries\r\n\r\n* Please perform the following tests on the `full-dev` vagrant environment.\r\n* Set an environment variable to indicate `METRON_HOME`:\r\n`export METRON_HOME=/usr/metron/0.3.1` \r\n\r\n\r\n## Ensure Data Flows from the Indices\r\nEnsure that with a basic full-dev we get data into the elasticsearch\r\nindices and into HDFS.\r\n\r\n## (Optional) Free Up Space on the virtual machine\r\n\r\nFirst, let's free up some headroom on the virtual machine.  If you are running this on a\r\nmultinode cluster, you would not have to do this.\r\n* Stop and disable Metron in Ambari\r\n* Kill monit via `service monit stop`\r\n* Kill tcpreplay via `for i in $(ps -ef | grep tcpreplay | awk '{print $2}');do kill -9 $i;done`\r\n* Kill yaf via `for i in $(ps -ef | grep yaf | awk '{print $2}');do kill -9 $i;done`\r\n* Kill bro via `for i in $(ps -ef | grep bro | awk '{print $2}');do kill -9 $i;done`\r\n\r\n## Test the PCAP topology\r\n\r\nA new kafka spout necessitates testing pcap.\r\n### Install and start pycapa \r\n```\r\n# set env vars\r\nexport PYCAPA_HOME=/opt/pycapa\r\nexport PYTHON27_HOME=/opt/rh/python27/root\r\n\r\n# Install these packages via yum (RHEL, CentOS)\r\nyum -y install epel-release centos-release-scl \r\nyum -y install \"@Development tools\" python27 python27-scldevel python27-python-virtualenv libpcap-devel libselinux-python\r\n\r\n# Setup directories\r\nmkdir $PYCAPA_HOME && chmod 755 $PYCAPA_HOME\r\n\r\n#Grab pycapa from git \r\ncd ~\r\ngit clone https://github.com/apache/incubator-metron.git\r\ncp -R ~/incubator-metron/metron-sensors/pycapa* $PYCAPA_HOME\r\n\r\n# Create virtualenv\r\nexport LD_LIBRARY_PATH=\"/opt/rh/python27/root/usr/lib64\"\r\n\r\n# Build it\r\ncd ${PYCAPA_HOME}\r\n${PYTHON27_HOME}/usr/bin/virtualenv pycapa-venv\r\ncd ${PYCAPA_HOME}/pycapa\r\n# activate the virtualenv\r\nsource ${PYCAPA_HOME}/pycapa-venv/bin/activate\r\npip install -r requirements.txt\r\npython setup.py install\r\n\r\n# Run it\r\ncd ${PYCAPA_HOME}/pycapa-venv/bin\r\npycapa --producer --topic pcap -i eth1 -k node1:6667\r\n```\r\n### Ensure pycapa can write to HDFS\r\n* Ensure that `/apps/metron/pcap` exists and can be written to by the\r\n  storm user.  If not, then:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir -p /apps/metron/pcap\r\nhadoop fs -chown metron:hadoop /apps/metron/pcap\r\nhadoop fs -chmod 775 /apps/metron/pcap\r\nexit\r\n``` \r\n* Start the pcap topology via `$METRON_HOME/bin/start_pcap_topology.sh`\r\n* Watch the topology in the Storm UI and kill the packet capture utility from before, when the number of packets ingested is over 3k.  Ensure that at at least 3 files exist on HDFS by running `hadoop fs -ls /apps/metron/pcap`\r\n* Choose a file (denoted by $FILE) and dump a few of the contents using the pcap_inspector utility via `$METRON_HOME/bin/pcap_inspector.sh -i $FILE -n 5`\r\n* Choose one of the lines and note the `ip_dst_port`.\r\n  * Note that when you run the commands below, the resulting file will be placed in the execution directory where you kicked off the job from.\r\n* Run a Stellar query filter query by executing a command similar to the following, with the values noted above (match your start_time format to the date format provided - default is to use millis since epoch):\r\n```\r\n$METRON_HOME/bin/pcap_query.sh query -st \"20160617\" -df \"yyyyMMdd\" -query \"ip_dst_port == 22\" -rpf 500\r\n```\r\n  * Note that if your MR job fails because of a lack of user directory for `root`, then the following will create the directory appropriately:\r\n```\r\nsudo su - hdfs\r\nhadoop fs -mkdir /user/root\r\nhadoop fs -chown root:hadoop /user/root\r\nhadoop fs -chmod 755 /user/root\r\nexit\r\n```\r\n* Verify the MR job finishes successfully. Upon completion, you should see multiple files named with relatively current datestamps in your current directory, e.g. pcap-data-20160617160549737+0000.pcap\r\n* Copy the files to your local machine and verify you can them it in Wireshark. Open the files and ensure that they contain only packets to the destination port in question. \r\n\r\n## Test the Profiler\r\n\r\n### Setup\r\n* Ensure that Metron is stopped and put in maintenance mode in Ambari\r\n* Create the profiler hbase table\r\n`echo \"create 'profiler', 'P'\" | hbase shell`\r\n\r\n* Open `~/rand_gen.py` and paste the following:\r\n```\r\n#!/usr/bin/python\r\nimport random\r\nimport sys\r\nimport time\r\ndef main():\r\n  mu = float(sys.argv[1])\r\n  sigma = float(sys.argv[2])\r\n  freq_s = int(sys.argv[3])\r\n  while True:\r\n    out = '{ \"value\" : ' + str(random.gauss(mu, sigma)) + ' }'\r\n    print out\r\n    sys.stdout.flush()\r\n    time.sleep(freq_s)\r\n\r\nif __name__ == '__main__':\r\n  main()\r\n```\r\nThis will generate random JSON maps with a numeric field called `value`\r\n* From your metron build, copy up the profiler bundle:\r\n```\r\nscp metron-analytics/metron-profiler/target/metron-profiler-0.3.1-archive.tar.gz root@node1:/usr/metron/0.3.1\r\n```\r\n* From `$METRON_HOME` on `node1`:\r\n```\r\ntar xzvf metron-profiler-*.tar.gz\r\n```\r\n* Set the profiler to use 1 minute tick durations:\r\n  * Edit `$METRON_HOME/config/profiler.properties` to adjust the capture duration by changing `profiler.period.duration=15` to `profiler.period.duration=1`\r\n  * Edit `$METRON_HOME/config/zookeeper/global.json` and add the following properties:\r\n```\r\n\"profiler.client.period.duration\" : \"1\",\r\n\"profiler.client.period.duration.units\" : \"MINUTES\"\r\n```\r\n### Deploy the custom parser\r\n\r\n* Edit the value parser config at `$METRON_HOME/config/zookeeper/parsers/value.json`:\r\n```\r\n{\r\n  \"parserClassName\":\"org.apache.metron.parsers.json.JSONMapParser\",\r\n  \"sensorTopic\":\"value\",\r\n  \"fieldTransformations\" : [\r\n    {\r\n    \"transformation\" : \"STELLAR\"\r\n   ,\"output\" : [ \"num_profiles_parser\", \"mean_parser\" ]\r\n   ,\"config\" : {\r\n      \"num_profiles_parser\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n      \"mean_parser\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n               }\r\n    }\r\n                           ]\r\n}\r\n```\r\n\r\n* Edit the value enrichment config at `$METRON_HOME/config/zookeeper/enrichments/value.json`:\r\n```\r\n{\r\n  \"enrichment\" : {\r\n   \"fieldMap\": {\r\n      \"stellar\" : {\r\n        \"config\" : {\r\n        \"num_profiles_enrichment\" : \"LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\",\r\n        \"mean_enrichment\" : \"STATS_MEAN(STATS_MERGE(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago'))))\"\r\n                  }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n* Create the value kafka topic:\r\n  `/usr/hdp/current/kafka-broker/bin/kafka-topics.sh --zookeeper node1:2181 --create --topic value --partitions 1 --replication-factor 1`\r\n\r\n\r\n### Start the profiler\r\n\r\n* Edit `$METRON_HOME/config/zookeeper/profiler.json` and paste in the following:\r\n```\r\n{\r\n  \"profiles\": [\r\n    {\r\n      \"profile\": \"stat\",\r\n      \"foreach\": \"'global'\",\r\n      \"onlyif\": \"source.type == 'value'\",\r\n      \"init\" : {\r\n               },\r\n      \"update\": {\r\n        \"s\": \"STATS_ADD(s, value)\"\r\n                },\r\n      \"result\": \"s\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n\r\n### Test Case\r\n\r\n* Push the configs via `$METRON_HOME/bin/zk_load_configs.sh -m PUSH -i $METRON_HOME/config/zookeeper -z node1:2181`\r\n* Start via `$METRON_HOME/bin/start_parser_topology.sh -k node1:6667 -z node1:2181 -s value`\r\n* Start the enrichment topology via `$METRON_HOME/bin/start_enrichment_topology.sh`\r\n* Start the indexing topology via `$METRON_HOME/bin/start_elasticsearch_topology.sh`\r\n* Start the profiler topology via `$METRON_HOME/bin/start_profiler_topology.sh`\r\n* Set up a profile to accept some synthetic data with a numeric `value` field and persist a stats summary of the data\r\n* Send some synthetic data directly to the profiler:\r\n`python ~/rand_gen.py 0 1 1 | /usr/hdp/current/kafka-broker/bin/kafka-console-producer.sh --broker-list node1:6667 --topic value`\r\n* Wait for at least 15 minutes and execute the following via the Stellar REPL:\r\n```\r\n# Grab the profiles from 1 minute ago to 8 minutes ago\r\nLENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5 minutes ago')))\r\n# Looks like 4 or 5 were returned, great \r\n```\r\nFor me, the following was the result:\r\n```\r\nStellar, Go!\r\nPlease note that functions are loading lazily in the background and will\r\nbe unavailable until loaded fully.\r\n{es.clustername=metron, es.ip=node1:9300, es.date.format=yyyy.MM.dd.HH,\r\nparser.error.topic=indexing, profiler.client.period.duration=1,\r\nprofiler.client.period.duration.units=MINUTES}\r\n[Stellar]>>> # Grab the profiles from 1 minute ago to 8 minutes ago\r\n[Stellar]>>> LENGTH(PROFILE_GET('stat', 'global', PROFILE_WINDOW('from 5\r\nminutes ago')))\r\nFunctions loaded, you may refer to functions now...\r\n4\r\n[Stellar]>>> # Looks like 4 or 5 were returned, great\r\n```\r\n* Delete any value index that currently exists (if any do) via `curl -XDELETE \"http://localhost:9200/value*\"`\r\n* Wait for a couple of seconds and run the following:\r\n```\r\ncurl -XPOST 'http://localhost:9200/value*/_search?pretty' -d '\r\n{\r\n  \"_source\" : [ \"num_profiles_parser\", \"num_profiles_enrichment\", \"mean_enrichment\", \"mean_parser\"]\r\n}\r\n'\r\n```\r\n\r\n* You should see values in the index with non-zero fields:\r\n     * `num_profiles_enrichment` should be 5\r\n     * `num_profiles_parser` should be 5\r\n     * `mean_enrichment` should be a non-zero double\r\n     * `mean_parser` should be a non-zero double\r\nFor reference, a sample message for me is:\r\n```\r\n{\r\n  \"num_profiles_parser\" : 5,\r\n    \"mean_enrichment\" : 0.004850856309056547,\r\n    \"num_profiles_enrichment\" : 5,\r\n    \"mean_parser\" : 0.004850856309056547\r\n}\r\n```\r\n\r\n## Test Enrichment Loading\r\n\r\n* Download the Alexa top 1m data set\r\n```\r\nwget http://s3.amazonaws.com/alexa-static/top-1m.csv.zip\r\nunzip top-1m.csv.zip\r\n```\r\n* Stage import file\r\n```\r\nhead -n 10000 top-1m.csv > top-10k.csv\r\nhead -n 10 top-1m.csv > top-10.csv\r\nhadoop fs -put top-10k.csv /tmp\r\n```\r\n* Create an extractor.json for the CSV data by editing `extractor.json` and pasting in these contents:\r\n```\r\n{\r\n  \"config\" : {\r\n    \"zk_quorum\" : \"node1:2181\",\r\n    \"columns\" : {\r\n       \"rank\" : 0,\r\n       \"domain\" : 1\r\n    },\r\n    \"value_transform\" : {\r\n       \"domain\" : \"DOMAIN_REMOVE_TLD(domain)\",\r\n       \"port\" : \"es.port\"\r\n    },\r\n    \"value_filter\" : \"LENGTH(domain) > 0\",\r\n    \"indicator_column\" : \"domain\",\r\n    \"indicator_transform\" : {\r\n       \"indicator\" : \"DOMAIN_REMOVE_TLD(indicator)\"\r\n    },\r\n    \"indicator_filter\" : \"LENGTH(indicator) > 0\",\r\n    \"type\" : \"top_domains\",\r\n    \"separator\" : \",\"\r\n  },\r\n  \"extractor\" : \"CSV\"\r\n}\r\n```\r\n### Test Flat File\r\n* You should see 9275 records in HBase. (Less than the perhaps expected 10k)\r\n`echo \"truncate 'enrichment'\" | hbase shell && $METRON_HOME/bin/flatfile_loader.sh -i ./top-10k.csv -t enrichment -c t -e ./extractor.json -p 5 -b 128 && echo \"count 'enrichment'\" | hbase shell`\r\n### Test MR Job\r\n* You should see 9275 records in HBase. (Less than the perhaps expected 10k)\r\n`echo \"truncate 'enrichment'\" | hbase shell && $METRON_HOME/bin/flatfile_loader.sh -i /tmp/top-10k.csv -t enrichment -c t -e ./extractor.json -m MR && echo \"count 'enrichment'\" | hbase shell`\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290072595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290099445","html_url":"https://github.com/apache/metron/pull/495#issuecomment-290099445","issue_url":"https://api.github.com/repos/apache/metron/issues/495","id":290099445,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDA5OTQ0NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T14:02:21Z","updated_at":"2017-03-29T14:02:21Z","author_association":"MEMBER","body":"The Travis failure should be corrected by #491 ","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290099445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290100060","html_url":"https://github.com/apache/metron/pull/495#issuecomment-290100060","issue_url":"https://api.github.com/repos/apache/metron/issues/495","id":290100060,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDEwMDA2MA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T14:04:21Z","updated_at":"2017-03-29T14:04:21Z","author_association":"CONTRIBUTOR","body":"+1\r\nI spent a fair amount of time testing this with @justinleet and we submitted a couple PR's to this PR that have now been included. I have some additional instructions for Kerberization that will come in a separate PR shortly, but this along with 793 gets a lot of the Kerberos work done.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290100060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290193741","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290193741","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290193741,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDE5Mzc0MQ==","user":{"login":"mattf-apache","id":908957,"node_id":"MDQ6VXNlcjkwODk1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/908957?v=4","gravatar_id":"","url":"https://api.github.com/users/mattf-apache","html_url":"https://github.com/mattf-apache","followers_url":"https://api.github.com/users/mattf-apache/followers","following_url":"https://api.github.com/users/mattf-apache/following{/other_user}","gists_url":"https://api.github.com/users/mattf-apache/gists{/gist_id}","starred_url":"https://api.github.com/users/mattf-apache/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattf-apache/subscriptions","organizations_url":"https://api.github.com/users/mattf-apache/orgs","repos_url":"https://api.github.com/users/mattf-apache/repos","events_url":"https://api.github.com/users/mattf-apache/events{/privacy}","received_events_url":"https://api.github.com/users/mattf-apache/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T19:07:10Z","updated_at":"2017-03-29T19:07:10Z","author_association":"MEMBER","body":"@mmiklavc , Markdown requires you to indent a codeblock (beginning and ending triple back-ticks) if you wish it to be \"under\" a list item.  Otherwise it interrupts the list, as you've seen, so the next list item restarts at \"1\".  I've sent you a PR with fixes.  Also substituted \"a b c\" for sub-item numbering, and split item 7 into sub-items to make it easier to read.  You may squash without attribution. --Matt","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290193741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290208571","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290208571","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290208571,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDIwODU3MQ==","user":{"login":"kylerichardson","id":10392029,"node_id":"MDQ6VXNlcjEwMzkyMDI5","avatar_url":"https://avatars.githubusercontent.com/u/10392029?v=4","gravatar_id":"","url":"https://api.github.com/users/kylerichardson","html_url":"https://github.com/kylerichardson","followers_url":"https://api.github.com/users/kylerichardson/followers","following_url":"https://api.github.com/users/kylerichardson/following{/other_user}","gists_url":"https://api.github.com/users/kylerichardson/gists{/gist_id}","starred_url":"https://api.github.com/users/kylerichardson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kylerichardson/subscriptions","organizations_url":"https://api.github.com/users/kylerichardson/orgs","repos_url":"https://api.github.com/users/kylerichardson/repos","events_url":"https://api.github.com/users/kylerichardson/events{/privacy}","received_events_url":"https://api.github.com/users/kylerichardson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T20:03:01Z","updated_at":"2017-03-29T20:03:01Z","author_association":"CONTRIBUTOR","body":"@mmiklavc Nice document! Planning to run through it myself later this week.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290208571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290213818","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290213818","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290213818,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDIxMzgxOA==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T20:21:35Z","updated_at":"2017-03-29T20:21:35Z","author_association":"CONTRIBUTOR","body":"@mattf-horton Thanks! I will pull this in and review.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290213818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290225465","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290225465","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290225465,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDIyNTQ2NQ==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T21:04:34Z","updated_at":"2017-03-29T21:04:34Z","author_association":"CONTRIBUTOR","body":"Hi @anandsubbu - just to be clear, this doc requires METRON-793 and METRON-797. Are you running with those branches?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290225465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290273067","html_url":"https://github.com/apache/metron/pull/496#issuecomment-290273067","issue_url":"https://api.github.com/repos/apache/metron/issues/496","id":290273067,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDI3MzA2Nw==","user":{"login":"dlyle65535","id":3439113,"node_id":"MDQ6VXNlcjM0MzkxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/3439113?v=4","gravatar_id":"","url":"https://api.github.com/users/dlyle65535","html_url":"https://github.com/dlyle65535","followers_url":"https://api.github.com/users/dlyle65535/followers","following_url":"https://api.github.com/users/dlyle65535/following{/other_user}","gists_url":"https://api.github.com/users/dlyle65535/gists{/gist_id}","starred_url":"https://api.github.com/users/dlyle65535/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlyle65535/subscriptions","organizations_url":"https://api.github.com/users/dlyle65535/orgs","repos_url":"https://api.github.com/users/dlyle65535/repos","events_url":"https://api.github.com/users/dlyle65535/events{/privacy}","received_events_url":"https://api.github.com/users/dlyle65535/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T01:15:01Z","updated_at":"2017-03-30T01:15:01Z","author_association":"CONTRIBUTOR","body":"+1, thanks for the fix. Looks like this was introduced sometime 2.1.x.x+ in Ansible. Definitely happens in 2.2.0.0. I'm running up some other changes that will make our install work with 2.2.0.0. This helps. Thanks again.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290273067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290497729","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290497729","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290497729,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDQ5NzcyOQ==","user":{"login":"mmiklavc","id":658443,"node_id":"MDQ6VXNlcjY1ODQ0Mw==","avatar_url":"https://avatars.githubusercontent.com/u/658443?v=4","gravatar_id":"","url":"https://api.github.com/users/mmiklavc","html_url":"https://github.com/mmiklavc","followers_url":"https://api.github.com/users/mmiklavc/followers","following_url":"https://api.github.com/users/mmiklavc/following{/other_user}","gists_url":"https://api.github.com/users/mmiklavc/gists{/gist_id}","starred_url":"https://api.github.com/users/mmiklavc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmiklavc/subscriptions","organizations_url":"https://api.github.com/users/mmiklavc/orgs","repos_url":"https://api.github.com/users/mmiklavc/repos","events_url":"https://api.github.com/users/mmiklavc/events{/privacy}","received_events_url":"https://api.github.com/users/mmiklavc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T18:15:22Z","updated_at":"2017-03-30T18:15:22Z","author_association":"CONTRIBUTOR","body":"@mattf-horton Thanks again for the patch! I made a couple more minor tweaks to get the images and indentation correct for the nested lists. I'm unable to get a nested list code block to format correctly, however. It's not bad, but it's just not quite right. If anyone has any suggestions, please chime in.\r\n![image](https://cloud.githubusercontent.com/assets/658443/24519468/7f928ea6-1542-11e7-80c6-0070a1810f5e.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290497729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290565645","html_url":"https://github.com/apache/metron/pull/501#issuecomment-290565645","issue_url":"https://api.github.com/repos/apache/metron/issues/501","id":290565645,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDU2NTY0NQ==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T22:41:15Z","updated_at":"2017-03-30T22:41:15Z","author_association":"MEMBER","body":"# Testing Plan\r\n## Preliminaries\r\n\r\n* Spin up the full-dev environment via `vagrant up` from `metron-deployment/vagrant/full-dev-platform`\r\n* Stop the \"Metron\" service in ambari and put it in maintenance mode.\r\n* Stop the sensor stubs \r\n  * `service sensor-stubs stop`\r\n  * Make sure the bro sensor stub is dead via `for i in $(ps -ef | grep start-bro-stub | awk '{print $2}');do kill -9 $i;done`\r\n* Install sensors without stubs by running the following from `metron-deployment/vagrant/full-dev-platform`:\r\n```\r\nvagrant --ansible-tags=\"sensors,bro,pycapa\" --ansible-skip-tags=\"solr,flume,snort,yaf,sensor-test-mode\" provision\r\n```\r\n* Set some environment variables to indicate `METRON_HOME`:\r\n```\r\nexport METRON_HOME=/usr/metron/0.3.1\r\nexport HDP_HOME=/usr/hdp/current\r\n``` \r\n\r\n## Non Kerberized Environment\r\n\r\nEnsure that you can see bro data flowing with the base configuration by\r\nrunning the console consumer and ensuring bro data flows through:\r\n```\r\n${HDP_HOME}/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server node1:6667 --zookeeper node1:2181 --topic bro\r\n```\r\n\r\n## Kerberized Environment\r\n\r\n* Follow steps 1-10, 14-18 of the kerberization instructions for full-dev\r\n[here](https://github.com/mmiklavc/incubator-metron/blob/9ef9d5d97ca654c9120cae5e40eddfe69d6420a8/metron-deployment/vagrant/Kerberos-setup.md).\r\n* Create a new topic called `b_k`\r\n```\r\nexport KERB_USER=metron;\r\n${HDP_HOME}/kafka-broker/bin/kafka-topics.sh --zookeeper $ZOOKEEPER:2181 --create --topic b_k --partitions 1 --replication-factor 1\r\n${HDP_HOME}/kafka-broker/bin/kafka-acls.sh --authorizer kafka.security.auth.SimpleAclAuthorizer --authorizer-properties zookeeper.connect=node1:2181 --add --allow-principal User:${KERB_USER} --topic b_k;\r\n```\r\n* Edit `~/consumer.config` to contain the following:\r\n```\r\ngroup.id=b_k_grp\r\n```\r\n* Edit `/usr/local/bro/share/bro/site/local.bro` to configure the bro-kafka-plugin with the following (at the end of the document):\r\n```\r\n@load Bro/Kafka/logs-to-kafka.bro\r\nredef Kafka::logs_to_send = set(HTTP::LOG, DNS::LOG);\r\nredef Kafka::topic_name = \"b_k\";\r\nredef Kafka::tag_json = T;\r\nredef Kafka::kafka_conf = table( [\"metadata.broker.list\"] = \"node1:6667\"\r\n                               , [\"security.protocol\"] = \"SASL_PLAINTEXT\"\r\n                               , [\"sasl.kerberos.keytab\"] = \"/etc/security/keytabs/metron.headless.keytab\"\r\n                               , [\"sasl.kerberos.principal\"] = \"metron@EXAMPLE.COM\"\r\n                               );\r\n```\r\n* Redeploy bro via `/usr/local/bro/bin/broctl deploy`\r\n* Listen for messages on the `b_k` topic via\r\n```\r\n${HDP_HOME}/kafka-broker/bin/kafka-console-consumer.sh --bootstrap-server node1:6667 --zookeeper node1:2181 --security-protocol SASL_PLAINTEXT  --topic b_k --new-consumer --consumer.config ~/consumer.config\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290565645/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290588199","html_url":"https://github.com/apache/metron/pull/501#issuecomment-290588199","issue_url":"https://api.github.com/repos/apache/metron/issues/501","id":290588199,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDU4ODE5OQ==","user":{"login":"JonZeolla","id":1385510,"node_id":"MDQ6VXNlcjEzODU1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/1385510?v=4","gravatar_id":"","url":"https://api.github.com/users/JonZeolla","html_url":"https://github.com/JonZeolla","followers_url":"https://api.github.com/users/JonZeolla/followers","following_url":"https://api.github.com/users/JonZeolla/following{/other_user}","gists_url":"https://api.github.com/users/JonZeolla/gists{/gist_id}","starred_url":"https://api.github.com/users/JonZeolla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonZeolla/subscriptions","organizations_url":"https://api.github.com/users/JonZeolla/orgs","repos_url":"https://api.github.com/users/JonZeolla/repos","events_url":"https://api.github.com/users/JonZeolla/events{/privacy}","received_events_url":"https://api.github.com/users/JonZeolla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T01:10:03Z","updated_at":"2017-03-31T01:10:03Z","author_association":"MEMBER","body":"I just shot an email out to the dev mailing list titled \"[DISCUSS] The bro kafka plugin\" to discuss some thoughts broader than this individual PR, but related to this work.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290588199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290603227","html_url":"https://github.com/apache/metron/pull/501#issuecomment-290603227","issue_url":"https://api.github.com/repos/apache/metron/issues/501","id":290603227,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDYwMzIyNw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T03:03:27Z","updated_at":"2017-03-31T03:03:27Z","author_association":"MEMBER","body":"Thanks for the discussion @JonZeolla  Just for clarity, do you have issues with this work going in independent of the final fate of the bro-kafka plugin?","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290603227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290604437","html_url":"https://github.com/apache/metron/pull/497#issuecomment-290604437","issue_url":"https://api.github.com/repos/apache/metron/issues/497","id":290604437,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDYwNDQzNw==","user":{"login":"cestella","id":540359,"node_id":"MDQ6VXNlcjU0MDM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/540359?v=4","gravatar_id":"","url":"https://api.github.com/users/cestella","html_url":"https://github.com/cestella","followers_url":"https://api.github.com/users/cestella/followers","following_url":"https://api.github.com/users/cestella/following{/other_user}","gists_url":"https://api.github.com/users/cestella/gists{/gist_id}","starred_url":"https://api.github.com/users/cestella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cestella/subscriptions","organizations_url":"https://api.github.com/users/cestella/orgs","repos_url":"https://api.github.com/users/cestella/repos","events_url":"https://api.github.com/users/cestella/events{/privacy}","received_events_url":"https://api.github.com/users/cestella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T03:13:14Z","updated_at":"2017-03-31T03:13:14Z","author_association":"MEMBER","body":"Just a comment, METRON-797 and METRON-793 are both in master as of the time of this comment, so these docs can be done on current master.","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290604437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290604553","html_url":"https://github.com/apache/metron/pull/501#issuecomment-290604553","issue_url":"https://api.github.com/repos/apache/metron/issues/501","id":290604553,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDYwNDU1Mw==","user":{"login":"JonZeolla","id":1385510,"node_id":"MDQ6VXNlcjEzODU1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/1385510?v=4","gravatar_id":"","url":"https://api.github.com/users/JonZeolla","html_url":"https://github.com/JonZeolla","followers_url":"https://api.github.com/users/JonZeolla/followers","following_url":"https://api.github.com/users/JonZeolla/following{/other_user}","gists_url":"https://api.github.com/users/JonZeolla/gists{/gist_id}","starred_url":"https://api.github.com/users/JonZeolla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonZeolla/subscriptions","organizations_url":"https://api.github.com/users/JonZeolla/orgs","repos_url":"https://api.github.com/users/JonZeolla/repos","events_url":"https://api.github.com/users/JonZeolla/events{/privacy}","received_events_url":"https://api.github.com/users/JonZeolla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T03:14:10Z","updated_at":"2017-03-31T03:14:10Z","author_association":"MEMBER","body":"Nope.\n\nOn Thu, Mar 30, 2017, 11:03 PM Casey Stella <notifications@github.com>\nwrote:\n\n> Thanks for the discussion @JonZeolla <https://github.com/JonZeolla> Just\n> for clarity, do you have issues with this work going in independent of the\n> final fate of the bro-kafka plugin?\n>\n> —\n> You are receiving this because you were mentioned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/incubator-metron/pull/501#issuecomment-290603227>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/ABUkJvr-5ViAQPu4bthh8_VWjCh6Nm8Sks5rrGz_gaJpZM4Mu_So>\n> .\n>\n-- \n\nJon\n","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290604553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/metron/issues/comments/290685985","html_url":"https://github.com/apache/metron/pull/501#issuecomment-290685985","issue_url":"https://api.github.com/repos/apache/metron/issues/501","id":290685985,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDY4NTk4NQ==","user":{"login":"ottobackwards","id":1111551,"node_id":"MDQ6VXNlcjExMTE1NTE=","avatar_url":"https://avatars.githubusercontent.com/u/1111551?v=4","gravatar_id":"","url":"https://api.github.com/users/ottobackwards","html_url":"https://github.com/ottobackwards","followers_url":"https://api.github.com/users/ottobackwards/followers","following_url":"https://api.github.com/users/ottobackwards/following{/other_user}","gists_url":"https://api.github.com/users/ottobackwards/gists{/gist_id}","starred_url":"https://api.github.com/users/ottobackwards/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ottobackwards/subscriptions","organizations_url":"https://api.github.com/users/ottobackwards/orgs","repos_url":"https://api.github.com/users/ottobackwards/repos","events_url":"https://api.github.com/users/ottobackwards/events{/privacy}","received_events_url":"https://api.github.com/users/ottobackwards/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T11:15:02Z","updated_at":"2017-03-31T11:15:02Z","author_association":"CONTRIBUTOR","body":"+1 by inspection","reactions":{"url":"https://api.github.com/repos/apache/metron/issues/comments/290685985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]