[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634448588","html_url":"https://github.com/apache/couchdb/issues/2730#issuecomment-634448588","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2730","id":634448588,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDQ0ODU4OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T06:06:27Z","updated_at":"2020-05-27T06:06:27Z","author_association":"MEMBER","body":"@hawkrdg We're a volunteer-run project with limited time. We got the update into the release notes, but obviously there are other places that need documentation updates.\r\n\r\nPlease help by opening a pull request against our [documentation repository](https://github.com/apache/couchdb-documentation/) and pay it forward? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634448588/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634526728","html_url":"https://github.com/apache/couchdb/issues/2895#issuecomment-634526728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2895","id":634526728,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDUyNjcyOA==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T08:58:54Z","updated_at":"2020-05-27T08:58:54Z","author_association":"MEMBER","body":"thansks @davisp. Specifying `(*UTF8)` seems like a reasonable workaround for users that need to match unicode. Closing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634526728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634540821","html_url":"https://github.com/apache/couchdb/issues/2903#issuecomment-634540821","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2903","id":634540821,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDU0MDgyMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T09:24:53Z","updated_at":"2020-05-27T09:24:53Z","author_association":"MEMBER","body":"For posterity, from Slack:\r\n\r\nGimDew  7:48 AM\r\nHello, Can I know is there any method to monitor the replication latency between nodes in a couch 2.3 cluster with replication factor 3?\r\n\r\njan:couchdb:  8:39 AM\r\nBy default all writes go to all nodes that need to see the data, so there is no replication. Only if one node gets left behind, either due to an outage, or network failure, that replication is used to catch up again\r\n\r\nGimDew  9:56 AM\r\n@jan If we have connected our data source only to a single node in the cluster, what is the process of data going to other nodes in the cluster if it's not the replication\r\n\r\njan:couchdb:  10:03 AM\r\nyou shouldn’t do that and instead use a load balancer to spread all requests coming in across all nodes\r\neach request gets sent to all participating nodes from the node that receives it from your app\r\n\r\nrnewson  10:37 AM\r\n\"internal replication\", that is, which happens over erlang rpc not http\r\n10:38\r\n(i.e, is less visible)\r\n10:38\r\nthere's an endpoint/metric for the internal repl backlog that can indicate a) that you are backed up and b) when that will likely clear\r\n10:39\r\nas jan implied, each node of the cluster is both a participant in data operations (read/write/etc) and can act as a coordinator for clustered operations. in a 3 node cluster with an n=3 db, every node is a participant, including the coordinator node\r\n10:40\r\nso the latency you talk of is either a) the time it took for the coordinator to return the http response (all the writes have happened) b) the internal replication backlog, if there is one. Which do you refer to?\r\n\r\njan:couchdb:  10:45 AM\r\n@rnewson do we have a metric beyond \"this is how many internal replications are currently ongoing?\"\r\n10:45\r\nIt's a nice indicator, but too coarse when it comes to \"how far\"\r\n\r\nGimDew  10:48 AM\r\nThanks @jan !\r\n\r\nrnewson  11:00 AM\r\n@jan I don't think so. I'm fuzzy on the details but the cloudant ops team look at this metric often as a sign of cluster health / lack of\r\n11:01\r\ninternal_replication_jobs from the _node/blah/_system endpoint\r\n11:02\r\ncapturing and graphing is something you'd have to do elsewhere tho\r\n\r\njan:couchdb:  11:06 AM\r\nYeah, I do the same. I usually don’t need finer granularity\r\n11:07\r\nIt’s likely that folks coming from other databases, where closely looking at the replication lag is important for consistency, want that for CouchDB, but it makes no sense in our world\r\n\r\nrnewson  11:08 AM\r\ndepends what you mean by consistency but yeah\r\n11:09\r\nwe block for the first 2 of 3 for reads and writes, so typically couch appears consistent. There are, as you know, several circumstances that will reveal the gaps in that.\r\n11:09\r\n(saying this for the channel, not for you)\r\n\r\njan:couchdb:  11:13 AM\r\nRight\r\n11:14\r\nIn a MySQL replication scenario, folks set things up to pretend they don't have a distributed system, so having a replica be an exact copy of the primary is important. So they watch their replication lag, so they can decide until when they can trust that assumption\r\n11:14\r\nNot advocating this is a great approach, but it's common over there, where the data model is undistributable.\r\nNew\r\n\r\nrnewson  11:20 AM\r\nright\r\n11:20\r\na primary/secondary system. I remember those.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634540821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634657399","html_url":"https://github.com/apache/couchdb/issues/2886#issuecomment-634657399","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2886","id":634657399,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDY1NzM5OQ==","user":{"login":"gbshhennsi","id":53291773,"node_id":"MDQ6VXNlcjUzMjkxNzcz","avatar_url":"https://avatars.githubusercontent.com/u/53291773?v=4","gravatar_id":"","url":"https://api.github.com/users/gbshhennsi","html_url":"https://github.com/gbshhennsi","followers_url":"https://api.github.com/users/gbshhennsi/followers","following_url":"https://api.github.com/users/gbshhennsi/following{/other_user}","gists_url":"https://api.github.com/users/gbshhennsi/gists{/gist_id}","starred_url":"https://api.github.com/users/gbshhennsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbshhennsi/subscriptions","organizations_url":"https://api.github.com/users/gbshhennsi/orgs","repos_url":"https://api.github.com/users/gbshhennsi/repos","events_url":"https://api.github.com/users/gbshhennsi/events{/privacy}","received_events_url":"https://api.github.com/users/gbshhennsi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T13:23:11Z","updated_at":"2020-05-27T13:23:39Z","author_association":"NONE","body":"@rnewson Thank you for your great work!\r\nWhen will this fix be released?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634657399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634862848","html_url":"https://github.com/apache/couchdb/issues/2908#issuecomment-634862848","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2908","id":634862848,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDg2Mjg0OA==","user":{"login":"hamiltonsalazar","id":36459473,"node_id":"MDQ6VXNlcjM2NDU5NDcz","avatar_url":"https://avatars.githubusercontent.com/u/36459473?v=4","gravatar_id":"","url":"https://api.github.com/users/hamiltonsalazar","html_url":"https://github.com/hamiltonsalazar","followers_url":"https://api.github.com/users/hamiltonsalazar/followers","following_url":"https://api.github.com/users/hamiltonsalazar/following{/other_user}","gists_url":"https://api.github.com/users/hamiltonsalazar/gists{/gist_id}","starred_url":"https://api.github.com/users/hamiltonsalazar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hamiltonsalazar/subscriptions","organizations_url":"https://api.github.com/users/hamiltonsalazar/orgs","repos_url":"https://api.github.com/users/hamiltonsalazar/repos","events_url":"https://api.github.com/users/hamiltonsalazar/events{/privacy}","received_events_url":"https://api.github.com/users/hamiltonsalazar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T18:39:02Z","updated_at":"2020-05-27T18:39:02Z","author_association":"NONE","body":"@wohali  Thank you for help me, your time is important. It would be helpful if that is included in the oficial documentation. These changes are very relevant and users like me who we are learning about CouchDB from oficial documentation we can get confused. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634862848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634916852","html_url":"https://github.com/apache/couchdb/issues/2908#issuecomment-634916852","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2908","id":634916852,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNDkxNjg1Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-27T20:18:22Z","updated_at":"2020-05-27T20:18:22Z","author_association":"MEMBER","body":"@hamiltonsalazar Yup, we are tracking that here: https://github.com/apache/couchdb-documentation/issues/513","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/634916852/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635214509","html_url":"https://github.com/apache/couchdb/pull/2911#issuecomment-635214509","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2911","id":635214509,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTIxNDUwOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T09:00:25Z","updated_at":"2020-05-28T09:00:25Z","author_association":"MEMBER","body":"this is good!\r\n\r\nIIRC the 60 side can also build against 68, so we need to be a little bit smarter there. Or we are more lazy and make it `60 or later`, not sure that would help ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635214509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635385064","html_url":"https://github.com/apache/couchdb/issues/2886#issuecomment-635385064","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2886","id":635385064,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTM4NTA2NA==","user":{"login":"mauroporras","id":167700,"node_id":"MDQ6VXNlcjE2NzcwMA==","avatar_url":"https://avatars.githubusercontent.com/u/167700?v=4","gravatar_id":"","url":"https://api.github.com/users/mauroporras","html_url":"https://github.com/mauroporras","followers_url":"https://api.github.com/users/mauroporras/followers","following_url":"https://api.github.com/users/mauroporras/following{/other_user}","gists_url":"https://api.github.com/users/mauroporras/gists{/gist_id}","starred_url":"https://api.github.com/users/mauroporras/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mauroporras/subscriptions","organizations_url":"https://api.github.com/users/mauroporras/orgs","repos_url":"https://api.github.com/users/mauroporras/repos","events_url":"https://api.github.com/users/mauroporras/events{/privacy}","received_events_url":"https://api.github.com/users/mauroporras/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T14:29:35Z","updated_at":"2020-05-28T14:29:35Z","author_association":"CONTRIBUTOR","body":"@gbshhennsi Are you using Auth0 by any chance?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635385064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635441400","html_url":"https://github.com/apache/couchdb/pull/2911#issuecomment-635441400","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2911","id":635441400,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTQ0MTQwMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T16:04:36Z","updated_at":"2020-05-28T16:04:36Z","author_association":"MEMBER","body":"@janl Nope, we ended up having to fork, so the `60/` directory only builds SM60 now. `68/` does 68.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635441400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590316","html_url":"https://github.com/apache/couchdb/issues/4229#issuecomment-1280590316","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4229","id":1280590316,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzMTY=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T16:09:28Z","updated_at":"2020-05-28T16:09:28Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only. I will, however, keep this open as a request for more *documentation*.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590316/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590322","html_url":"https://github.com/apache/couchdb/issues/4229#issuecomment-1280590322","issue_url":"https://api.github.com/repos/apache/couchdb/issues/4229","id":1280590322,"node_id":"MDEyOklzc3VlQ29tbWVudDEyODA1OTAzMjI=","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T16:41:30Z","updated_at":"2020-05-28T16:41:30Z","author_association":"MEMBER","body":"The problem you're facing is that the `-name` parameter that you're changing is used by CouchDB internally for every database to log where the shards are stored.\r\n\r\nIf your entries in `-name` were **DNS entries**, not IP addresses, you'd do exactly what you said, change DNS, and everything would be fine.\r\n\r\nIf you insist on using IP addresses, you're going to have to edit the `_dbs` document for every database you have, and change all instances of every IP address for all machines to the new IP address. Not only is this error prone, it's a pain in the arse :)\r\n\r\nSo, switch to DNS, and always put `-name couchdb@couchdb-1.myhost.com` in `vm.args`, not IP addresses.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/1280590322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635478696","html_url":"https://github.com/apache/couchdb/pull/2911#issuecomment-635478696","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2911","id":635478696,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTQ3ODY5Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T17:08:25Z","updated_at":"2020-05-28T17:08:25Z","author_association":"MEMBER","body":"wait., when I looked there was no diff for /68, did this get added behind my back or did I just miss this earlier? Apologies!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635478696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635943610","html_url":"https://github.com/apache/couchdb/issues/2886#issuecomment-635943610","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2886","id":635943610,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTk0MzYxMA==","user":{"login":"gbshhennsi","id":53291773,"node_id":"MDQ6VXNlcjUzMjkxNzcz","avatar_url":"https://avatars.githubusercontent.com/u/53291773?v=4","gravatar_id":"","url":"https://api.github.com/users/gbshhennsi","html_url":"https://github.com/gbshhennsi","followers_url":"https://api.github.com/users/gbshhennsi/followers","following_url":"https://api.github.com/users/gbshhennsi/following{/other_user}","gists_url":"https://api.github.com/users/gbshhennsi/gists{/gist_id}","starred_url":"https://api.github.com/users/gbshhennsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbshhennsi/subscriptions","organizations_url":"https://api.github.com/users/gbshhennsi/orgs","repos_url":"https://api.github.com/users/gbshhennsi/repos","events_url":"https://api.github.com/users/gbshhennsi/events{/privacy}","received_events_url":"https://api.github.com/users/gbshhennsi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T12:23:47Z","updated_at":"2020-05-29T12:23:47Z","author_association":"NONE","body":"@mauroporras I am generating the Token based on OAuth2 but not with Auth0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/635943610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/636116049","html_url":"https://github.com/apache/couchdb/pull/2917#issuecomment-636116049","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2917","id":636116049,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjExNjA0OQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T18:20:39Z","updated_at":"2020-05-29T18:20:39Z","author_association":"MEMBER","body":"I don't think that's couch_jobs_server dying of 1031, but a linked process that's dying.\r\n\r\n```\r\nCRASH REPORT Process couch_jobs_server (<0.463.0>) with 0 neighbors exited with reason: {unexpected_process_exit,<0.470.0>,{{erlfdb_error,1031},[{erlfdb_nif,erlfdb_future_get,[#Ref<0.1313437569.2980970500.18212>],[]},{erlfdb,do_transaction,2,[{file,\"src/erlfdb.erl\"},{line,671}]},{fabric2_fdb,do_transaction,2,[{file,\"src/fabric2_fdb.erl\"},{line,160}]},{fabric2_fdb,transactional,2,[{file,\"src/fabric2_fdb.erl\"},{line,136}]},{couch_jobs_activity_monitor,check_activity,1,[{file,\"src/couch_jobs_activity_monitor.erl\"},{line,103}]},{couch_jobs_activity_monitor,handle_info,2,[{file,\"sr...\"},...]},...]}} at gen_server:handle_common_reply/8(line:726) <= proc_lib:init_p_do_apply/3(line:247); initial_call: {couch_jobs_server,init,['Argument__1']}, ancestors: [couch_jobs_sup,<0.458.0>], message_queue_len: 0, messages: [], links: [<0.459.0>], dictionary: [{'$erlfdb_error',undefined},{'$couch_jobs_current',{erlfdb_transaction,...}},...], trap_exit: false, status: running, heap_size: 4185, stack_size: 27, reductions: 49670\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/636116049/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/636116377","html_url":"https://github.com/apache/couchdb/pull/2917#issuecomment-636116377","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2917","id":636116377,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNjExNjM3Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T18:21:12Z","updated_at":"2020-05-29T18:21:12Z","author_association":"MEMBER","body":"Oh. Derps. This is the linked process.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/636116377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/637191920","html_url":"https://github.com/apache/couchdb/issues/2876#issuecomment-637191920","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2876","id":637191920,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzE5MTkyMA==","user":{"login":"borigas","id":2268265,"node_id":"MDQ6VXNlcjIyNjgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/2268265?v=4","gravatar_id":"","url":"https://api.github.com/users/borigas","html_url":"https://github.com/borigas","followers_url":"https://api.github.com/users/borigas/followers","following_url":"https://api.github.com/users/borigas/following{/other_user}","gists_url":"https://api.github.com/users/borigas/gists{/gist_id}","starred_url":"https://api.github.com/users/borigas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/borigas/subscriptions","organizations_url":"https://api.github.com/users/borigas/orgs","repos_url":"https://api.github.com/users/borigas/repos","events_url":"https://api.github.com/users/borigas/events{/privacy}","received_events_url":"https://api.github.com/users/borigas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T00:12:25Z","updated_at":"2020-06-02T00:12:25Z","author_association":"NONE","body":"@natcohen did you figure out what the issue was? I think I'm hitting something similar. When `nginx.ingress.kubernetes.io/ssl-redirect: true`, replication fails with `unauthorized: unauthorized to access or create database https://[db]`. Setting to `false` stops the problem even though I'm still using ssl, just not forcing a redirect to ssl.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/637191920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/637371545","html_url":"https://github.com/apache/couchdb/issues/2876#issuecomment-637371545","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2876","id":637371545,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzM3MTU0NQ==","user":{"login":"natcohen","id":7813574,"node_id":"MDQ6VXNlcjc4MTM1NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/7813574?v=4","gravatar_id":"","url":"https://api.github.com/users/natcohen","html_url":"https://github.com/natcohen","followers_url":"https://api.github.com/users/natcohen/followers","following_url":"https://api.github.com/users/natcohen/following{/other_user}","gists_url":"https://api.github.com/users/natcohen/gists{/gist_id}","starred_url":"https://api.github.com/users/natcohen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/natcohen/subscriptions","organizations_url":"https://api.github.com/users/natcohen/orgs","repos_url":"https://api.github.com/users/natcohen/repos","events_url":"https://api.github.com/users/natcohen/events{/privacy}","received_events_url":"https://api.github.com/users/natcohen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T08:13:56Z","updated_at":"2020-06-02T08:13:56Z","author_association":"NONE","body":"@borigas My DNS is Cloudflare and I was using Cloudflare's proxy. Deactivating the proxy in the DNS solved my issue... hope that helps","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/637371545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/638335965","html_url":"https://github.com/apache/couchdb/issues/2925#issuecomment-638335965","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2925","id":638335965,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODMzNTk2NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-03T17:16:52Z","updated_at":"2020-06-03T17:16:52Z","author_association":"MEMBER","body":"This is just for the docs: https://github.com/apache/couchdb/blob/3.1.0/rebar.config.script#L153\r\n\r\nThe reason here is that we need to tag the release notes before calling the release vote, but we can’t change the git tag of the main repo after the vote. If we wanted the tag to be clean, the bundled documentation would no include the release notes, which is sub optimal, and a worthwhile trade off includes keeping the tag in a file that almost nobody looks at ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/638335965/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639019453","html_url":"https://github.com/apache/couchdb/pull/2926#issuecomment-639019453","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2926","id":639019453,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTAxOTQ1Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T18:12:29Z","updated_at":"2020-06-04T18:12:29Z","author_association":"CONTRIBUTOR","body":"> ```\r\n> $ curl -s -u adm:pass 'localhost:5984/db' -G | jq .uuid\r\n> \"ae7c70071b4c89dabcb9fefce1bc9d77\"\r\n> ```\r\n> \r\n> Might be nice to add a test?\r\n\r\n@jaydoane I debated adding one but there is already a unit test included which checks that the uuid emitted is the same as the fabric2_db:uuid(Db), and not much else is happening above that level in chttpd so it probably wouldn't add that much more test coverage than what we have already.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639019453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639436702","html_url":"https://github.com/apache/couchdb/pull/2929#issuecomment-639436702","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2929","id":639436702,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQzNjcwMg==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T11:57:45Z","updated_at":"2020-06-05T11:57:45Z","author_association":"MEMBER","body":"`crypto:info_fips` requires OTP 20.0 - is that going to be a problem?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639436702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639447394","html_url":"https://github.com/apache/couchdb/pull/2929#issuecomment-639447394","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2929","id":639447394,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTQ0NzM5NA==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T12:20:17Z","updated_at":"2020-06-05T12:36:30Z","author_association":"MEMBER","body":"I can test for the function export to so are ok for <= 19","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639447394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639582807","html_url":"https://github.com/apache/couchdb/pull/2929#issuecomment-639582807","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2929","id":639582807,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTU4MjgwNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T15:47:29Z","updated_at":"2020-06-05T15:47:29Z","author_association":"MEMBER","body":"@rnewson If you want this in the next release, please backport to the `3.x` branch. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639582807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639644504","html_url":"https://github.com/apache/couchdb/issues/2876#issuecomment-639644504","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2876","id":639644504,"node_id":"MDEyOklzc3VlQ29tbWVudDYzOTY0NDUwNA==","user":{"login":"borigas","id":2268265,"node_id":"MDQ6VXNlcjIyNjgyNjU=","avatar_url":"https://avatars.githubusercontent.com/u/2268265?v=4","gravatar_id":"","url":"https://api.github.com/users/borigas","html_url":"https://github.com/borigas","followers_url":"https://api.github.com/users/borigas/followers","following_url":"https://api.github.com/users/borigas/following{/other_user}","gists_url":"https://api.github.com/users/borigas/gists{/gist_id}","starred_url":"https://api.github.com/users/borigas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/borigas/subscriptions","organizations_url":"https://api.github.com/users/borigas/orgs","repos_url":"https://api.github.com/users/borigas/repos","events_url":"https://api.github.com/users/borigas/events{/privacy}","received_events_url":"https://api.github.com/users/borigas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-05T17:17:58Z","updated_at":"2020-06-05T17:17:58Z","author_association":"NONE","body":"Thanks @natcohen.  `ssl-redirect` turned out to be a red herring. My issue was inconsistent password salts in the cluster in combination with cookie auth.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/639644504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641113110","html_url":"https://github.com/apache/couchdb/issues/2931#issuecomment-641113110","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2931","id":641113110,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTExMzExMA==","user":{"login":"gbshhennsi","id":53291773,"node_id":"MDQ6VXNlcjUzMjkxNzcz","avatar_url":"https://avatars.githubusercontent.com/u/53291773?v=4","gravatar_id":"","url":"https://api.github.com/users/gbshhennsi","html_url":"https://github.com/gbshhennsi","followers_url":"https://api.github.com/users/gbshhennsi/followers","following_url":"https://api.github.com/users/gbshhennsi/following{/other_user}","gists_url":"https://api.github.com/users/gbshhennsi/gists{/gist_id}","starred_url":"https://api.github.com/users/gbshhennsi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gbshhennsi/subscriptions","organizations_url":"https://api.github.com/users/gbshhennsi/orgs","repos_url":"https://api.github.com/users/gbshhennsi/repos","events_url":"https://api.github.com/users/gbshhennsi/events{/privacy}","received_events_url":"https://api.github.com/users/gbshhennsi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T08:12:57Z","updated_at":"2020-06-09T08:12:57Z","author_association":"NONE","body":"I think they fixed it here #2888  but I wonder when they will release the fixed version ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641113110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641330725","html_url":"https://github.com/apache/couchdb/issues/2931#issuecomment-641330725","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2931","id":641330725,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTMzMDcyNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T14:22:44Z","updated_at":"2020-06-09T14:22:44Z","author_association":"MEMBER","body":"Yup, that looks like the fix.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641330725/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641351797","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-641351797","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":641351797,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTM1MTc5Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T14:56:34Z","updated_at":"2020-06-09T14:56:34Z","author_association":"MEMBER","body":"@iilyak what do you think?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641351797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641353941","html_url":"https://github.com/apache/couchdb/issues/2931#issuecomment-641353941","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2931","id":641353941,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTM1Mzk0MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T14:59:44Z","updated_at":"2020-06-09T14:59:44Z","author_association":"MEMBER","body":"FYI, our release schedule is a release every 3-6 months. We just had a release in May, so I don't expect another release for a month or two at the earliest.\r\n\r\nIf you need this sooner, you can build from source.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641353941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641365625","html_url":"https://github.com/apache/couchdb/issues/2931#issuecomment-641365625","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2931","id":641365625,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTM2NTYyNQ==","user":{"login":"andrasbacsai","id":5845193,"node_id":"MDQ6VXNlcjU4NDUxOTM=","avatar_url":"https://avatars.githubusercontent.com/u/5845193?v=4","gravatar_id":"","url":"https://api.github.com/users/andrasbacsai","html_url":"https://github.com/andrasbacsai","followers_url":"https://api.github.com/users/andrasbacsai/followers","following_url":"https://api.github.com/users/andrasbacsai/following{/other_user}","gists_url":"https://api.github.com/users/andrasbacsai/gists{/gist_id}","starred_url":"https://api.github.com/users/andrasbacsai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrasbacsai/subscriptions","organizations_url":"https://api.github.com/users/andrasbacsai/orgs","repos_url":"https://api.github.com/users/andrasbacsai/repos","events_url":"https://api.github.com/users/andrasbacsai/events{/privacy}","received_events_url":"https://api.github.com/users/andrasbacsai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T15:19:00Z","updated_at":"2020-06-09T15:19:00Z","author_association":"NONE","body":"Super, thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641365625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641431616","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-641431616","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":641431616,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTQzMTYxNg==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T16:46:19Z","updated_at":"2020-06-09T16:46:19Z","author_association":"CONTRIBUTOR","body":"Few points which would probably make https://github.com/open-telemetry/opentelemetry-erlang-api unsuitable for us:\r\n- it looks like it uses `gen_server` based backend for storing spans. This would be prohibitively slow for our case. \r\n- it uses `persistent_term` feature which was introduced in OTP 21.2. \r\n- Requires OTP 21.3 or above.\r\n- the https://github.com/opentelemetry-beam/opentelemetry_exporter uses chatterbox and we know it is buggy https://github.com/joedevivo/chatterbox/issues/136 (we had to remove GRPC support for that reason from `couch_eval` and `ateles`)\r\n  - there might be a way to disable GRPC by using `http_protobuf` configuration option\r\n- the https://github.com/opentelemetry-beam/opentelemetry_exporter making assumption about which http client to use (it is using httpc) and we might want to plug ibrowse. I am not sure if it is currently possible.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641431616/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641435584","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-641435584","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":641435584,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTQzNTU4NA==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T16:49:52Z","updated_at":"2020-06-09T16:49:52Z","author_association":"CONTRIBUTOR","body":"It looks like the author of the library we currently use [abandoning it](https://github.com/sile/passage/issues/3#issuecomment-640593654). It is really sad because it is wonderfully written with performance in mind.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641435584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641458408","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-641458408","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":641458408,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTQ1ODQwOA==","user":{"login":"tsloughter","id":36227,"node_id":"MDQ6VXNlcjM2MjI3","avatar_url":"https://avatars.githubusercontent.com/u/36227?v=4","gravatar_id":"","url":"https://api.github.com/users/tsloughter","html_url":"https://github.com/tsloughter","followers_url":"https://api.github.com/users/tsloughter/followers","following_url":"https://api.github.com/users/tsloughter/following{/other_user}","gists_url":"https://api.github.com/users/tsloughter/gists{/gist_id}","starred_url":"https://api.github.com/users/tsloughter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tsloughter/subscriptions","organizations_url":"https://api.github.com/users/tsloughter/orgs","repos_url":"https://api.github.com/users/tsloughter/repos","events_url":"https://api.github.com/users/tsloughter/events{/privacy}","received_events_url":"https://api.github.com/users/tsloughter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T17:19:23Z","updated_at":"2020-06-09T17:19:23Z","author_association":"NONE","body":"No, spans are not stored in a `gen_server`s state, they are stored in an ETS table while the span context is propagated within a process through the pdict.\r\n\r\nYes, persistent term is currently used without the ability to disable it. I don't know what couch's OTP back support is but there is always the option of modifying otel to use ETS when persistent_term isn't available, or just not moving to otel until the oldest OTP supported by couch is 21.3.\r\n\r\nThe `opentelemetry_exporter` lib does not require use of GRPC, though I also don't think grpcbox is an issue in this use case because of the lack of concurrency in the exporter. But it supports using plain http 1.1 as well. `httpc` is the only option at the moment simply because that was the quickest one to add support for. There is no plan to require httpc or any particular client, it is simply a matter of resources and priorities.\r\n\r\nI'm sad to hear you dropped grpc and use of grpcbox because of this stream creation bug. I'm glad you linked to that issue on chatterbox (I maintain chatterbox as well) and will take a look at the issue soon, it must have slipped by me in email notifications and I hadn't manually looked at chatterbox's issues in a long time.\r\n\r\nI wish I'd known couchdb was trying to use grpcbox/chatterbox. I would have made an effort to take care of these issues with you.\r\n\r\nI believe grpcbox is mostly used for the server component by those using it in production. The client has been part that I've wanted to rewrite, and have started the rewrite recently. Though this does look like a chatterbox internal bug. Again an issue of resources and priorities. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641458408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641473765","html_url":"https://github.com/apache/couchdb/issues/2934#issuecomment-641473765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2934","id":641473765,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MTQ3Mzc2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-09T17:49:56Z","updated_at":"2020-06-09T17:49:56Z","author_association":"MEMBER","body":"@tsloughter We currently support 20.3 as our base, with \"soft\" support back to 19.latest. We're not planning on making 21.3 a minimum version for a while yet, so that's probably a hard stop for us for at least a year.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/641473765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643092066","html_url":"https://github.com/apache/couchdb/issues/2941#issuecomment-643092066","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2941","id":643092066,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzA5MjA2Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-12T06:30:22Z","updated_at":"2020-06-12T06:30:22Z","author_association":"MEMBER","body":"Looks like a real bug. Thanks for the info on a workaround!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643092066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643545773","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-643545773","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":643545773,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzU0NTc3Mw==","user":{"login":"kripper","id":1479804,"node_id":"MDQ6VXNlcjE0Nzk4MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1479804?v=4","gravatar_id":"","url":"https://api.github.com/users/kripper","html_url":"https://github.com/kripper","followers_url":"https://api.github.com/users/kripper/followers","following_url":"https://api.github.com/users/kripper/following{/other_user}","gists_url":"https://api.github.com/users/kripper/gists{/gist_id}","starred_url":"https://api.github.com/users/kripper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kripper/subscriptions","organizations_url":"https://api.github.com/users/kripper/orgs","repos_url":"https://api.github.com/users/kripper/repos","events_url":"https://api.github.com/users/kripper/events{/privacy}","received_events_url":"https://api.github.com/users/kripper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-13T01:02:59Z","updated_at":"2020-06-13T01:02:59Z","author_association":"NONE","body":"Any chance to include \"support for groups in _access: []\" in 4.0?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643545773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643592644","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-643592644","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":643592644,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzU5MjY0NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-13T08:43:56Z","updated_at":"2020-06-13T08:43:56Z","author_association":"MEMBER","body":"one thing at a time, the plan for now is do just one owner per doc in 3.x and get that out to people. Then we need to rebuild this for the 4.x architecture after which we can think about expanding what can go in `_access:[]`. I’ve determined that doing groups in 3.x is too hard, but I’m a little more hopeful in 4.x. But again: one thing at a time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643592644/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643616095","html_url":"https://github.com/apache/couchdb/issues/1305#issuecomment-643616095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1305","id":643616095,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzYxNjA5NQ==","user":{"login":"robsonvn","id":6492949,"node_id":"MDQ6VXNlcjY0OTI5NDk=","avatar_url":"https://avatars.githubusercontent.com/u/6492949?v=4","gravatar_id":"","url":"https://api.github.com/users/robsonvn","html_url":"https://github.com/robsonvn","followers_url":"https://api.github.com/users/robsonvn/followers","following_url":"https://api.github.com/users/robsonvn/following{/other_user}","gists_url":"https://api.github.com/users/robsonvn/gists{/gist_id}","starred_url":"https://api.github.com/users/robsonvn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robsonvn/subscriptions","organizations_url":"https://api.github.com/users/robsonvn/orgs","repos_url":"https://api.github.com/users/robsonvn/repos","events_url":"https://api.github.com/users/robsonvn/events{/privacy}","received_events_url":"https://api.github.com/users/robsonvn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-13T12:21:26Z","updated_at":"2020-06-13T12:21:48Z","author_association":"NONE","body":"Just to add that if you're using the helm chart you need to use the following:\r\n\r\n```\r\ncouchdbConfig:\r\n  httpd:\r\n    WWW-Authenticate: \"Basic realm=\\\"administrator\\\"\"\r\n  chttpd:\r\n    require_valid_user: true\r\n```\r\n\r\nAnd restart the pods.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643616095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643660805","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-643660805","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":643660805,"node_id":"MDEyOklzc3VlQ29tbWVudDY0MzY2MDgwNQ==","user":{"login":"kripper","id":1479804,"node_id":"MDQ6VXNlcjE0Nzk4MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1479804?v=4","gravatar_id":"","url":"https://api.github.com/users/kripper","html_url":"https://github.com/kripper","followers_url":"https://api.github.com/users/kripper/followers","following_url":"https://api.github.com/users/kripper/following{/other_user}","gists_url":"https://api.github.com/users/kripper/gists{/gist_id}","starred_url":"https://api.github.com/users/kripper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kripper/subscriptions","organizations_url":"https://api.github.com/users/kripper/orgs","repos_url":"https://api.github.com/users/kripper/repos","events_url":"https://api.github.com/users/kripper/events{/privacy}","received_events_url":"https://api.github.com/users/kripper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-13T18:32:46Z","updated_at":"2020-06-13T18:33:13Z","author_association":"NONE","body":"Great! I believe we can simulate roles in _access in the meanwhile by creating a group as a user and sharing this credentials among all (real) users requiring access to this particular docs.\r\n\r\nCongratulations Jan! you are solving one of the biggest issues with CouchDB that people have been waiting for for years.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643660805/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643771116","html_url":"https://github.com/apache/couchdb/issues/2931#issuecomment-643771116","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2931","id":643771116,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Mzc3MTExNg==","user":{"login":"ChrisPaprocki","id":6357230,"node_id":"MDQ6VXNlcjYzNTcyMzA=","avatar_url":"https://avatars.githubusercontent.com/u/6357230?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisPaprocki","html_url":"https://github.com/ChrisPaprocki","followers_url":"https://api.github.com/users/ChrisPaprocki/followers","following_url":"https://api.github.com/users/ChrisPaprocki/following{/other_user}","gists_url":"https://api.github.com/users/ChrisPaprocki/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisPaprocki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisPaprocki/subscriptions","organizations_url":"https://api.github.com/users/ChrisPaprocki/orgs","repos_url":"https://api.github.com/users/ChrisPaprocki/repos","events_url":"https://api.github.com/users/ChrisPaprocki/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisPaprocki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-14T14:05:08Z","updated_at":"2020-06-14T14:05:08Z","author_association":"NONE","body":"I think this issue is not solved by #2888. Please see proposed solution in #2946.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/643771116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/644639961","html_url":"https://github.com/apache/couchdb/issues/2441#issuecomment-644639961","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2441","id":644639961,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NDYzOTk2MQ==","user":{"login":"patternseek","id":7610379,"node_id":"MDQ6VXNlcjc2MTAzNzk=","avatar_url":"https://avatars.githubusercontent.com/u/7610379?v=4","gravatar_id":"","url":"https://api.github.com/users/patternseek","html_url":"https://github.com/patternseek","followers_url":"https://api.github.com/users/patternseek/followers","following_url":"https://api.github.com/users/patternseek/following{/other_user}","gists_url":"https://api.github.com/users/patternseek/gists{/gist_id}","starred_url":"https://api.github.com/users/patternseek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patternseek/subscriptions","organizations_url":"https://api.github.com/users/patternseek/orgs","repos_url":"https://api.github.com/users/patternseek/repos","events_url":"https://api.github.com/users/patternseek/events{/privacy}","received_events_url":"https://api.github.com/users/patternseek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-16T09:11:16Z","updated_at":"2020-06-16T09:11:16Z","author_association":"NONE","body":"We're seeing memory usage climb until the kernel OOM killer kills beam.smp on 3.1 while doing an initial replication of a large database (> 70GB with a number of views) on a 32GB server.\r\n\r\n```\r\n[root@couchdb-staging ~]# grep \"Out of memory\" /var/log/messages                                                                                                                                                          \r\nJun 15 07:28:44 couchdb-staging kernel: Out of memory: Killed process 2844 (beam.smp) total-vm:41846892kB, anon-rss:30352140kB, file-rss:0kB, shmem-rss:0kB                                      \r\nJun 15 12:22:26 couchdb-staging kernel: Out of memory: Killed process 5303 (beam.smp) total-vm:42290044kB, anon-rss:29574368kB, file-rss:0kB, shmem-rss:0kB                                                               \r\nJun 15 13:17:18 couchdb-staging kernel: Out of memory: Killed process 6962 (beam.smp) total-vm:42421488kB, anon-rss:30516064kB, file-rss:0kB, shmem-rss:0kB                                                               \r\nJun 15 13:50:39 couchdb-staging kernel: Out of memory: Killed process 7740 (beam.smp) total-vm:42459412kB, anon-rss:30034480kB, file-rss:0kB, shmem-rss:0kB                                                               \r\nJun 15 18:36:14 couchdb-staging kernel: Out of memory: Killed process 8280 (beam.smp) total-vm:42015812kB, anon-rss:29495620kB, file-rss:0kB, shmem-rss:0kB                                                               \r\nJun 15 20:12:34 couchdb-staging kernel: Out of memory: Killed process 10794 (beam.smp) total-vm:41676032kB, anon-rss:29832200kB, file-rss:0kB, shmem-rss:0kB                                                              \r\nJun 16 04:32:50 couchdb-staging kernel: Out of memory: Killed process 11847 (beam.smp) total-vm:42226600kB, anon-rss:30368596kB, file-rss:0kB, shmem-rss:0kB\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/644639961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645303882","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-645303882","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":645303882,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTMwMzg4Mg==","user":{"login":"mehrdad-shokri","id":13661520,"node_id":"MDQ6VXNlcjEzNjYxNTIw","avatar_url":"https://avatars.githubusercontent.com/u/13661520?v=4","gravatar_id":"","url":"https://api.github.com/users/mehrdad-shokri","html_url":"https://github.com/mehrdad-shokri","followers_url":"https://api.github.com/users/mehrdad-shokri/followers","following_url":"https://api.github.com/users/mehrdad-shokri/following{/other_user}","gists_url":"https://api.github.com/users/mehrdad-shokri/gists{/gist_id}","starred_url":"https://api.github.com/users/mehrdad-shokri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mehrdad-shokri/subscriptions","organizations_url":"https://api.github.com/users/mehrdad-shokri/orgs","repos_url":"https://api.github.com/users/mehrdad-shokri/repos","events_url":"https://api.github.com/users/mehrdad-shokri/events{/privacy}","received_events_url":"https://api.github.com/users/mehrdad-shokri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T10:56:16Z","updated_at":"2020-06-17T10:56:16Z","author_association":"NONE","body":"@janl any schedule when ``one owner per doc`` comes to 3.x?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645303882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645426491","html_url":"https://github.com/apache/couchdb/pull/2935#issuecomment-645426491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2935","id":645426491,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTQyNjQ5MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T14:56:28Z","updated_at":"2020-06-17T19:07:26Z","author_association":"MEMBER","body":"👻","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645426491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645540627","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-645540627","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":645540627,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTU0MDYyNw==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T18:19:34Z","updated_at":"2020-06-17T18:19:34Z","author_association":"MEMBER","body":"I need to read this in detail, but I don't understand how the system is supposed to work from your description.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645540627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645547070","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-645547070","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":645547070,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTU0NzA3MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T18:32:14Z","updated_at":"2020-06-17T18:32:14Z","author_association":"CONTRIBUTOR","body":"Previously, when the md version was stale we should have only revalidated each db_version (a single key read) to check that particular db hasn't changed. And if it hasn't, we would re-insert it into the cache with the new md version.\r\n\r\nhttps://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/src/fabric2_fdb.erl#L1873-L1879\r\n\r\nAll the subsequent requests should then get an updated db handle with the new md version, which they'll see as current and not do the extra db version key read.\r\n\r\nBut we shouldn't have fully reopened the db if a particular db's version hasn't changed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645547070/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645555739","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-645555739","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":645555739,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTU1NTczOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T18:48:53Z","updated_at":"2020-06-17T18:48:53Z","author_association":"MEMBER","body":"@nickva That's true. I was thinking about that invalidation a bit wrong cause that logic is a bit nutty.\r\n\r\n@kocolosk Sorry, i guess I was a bit terse there. The basic change here is that I've switched the `db_version` from being a UUID to a versionstamp so that its comparable for use by fabric2_server to avoid the metadata version aspect since metadataVersion changes quite a bit more frequently in practice than expected.\r\n\r\nAlong with that change I switched from using metadataVersion to the db version as the primary cache invaldiation mechanism. But then @nickva reminded me that it basically only devolves to this point so I'm gonna go back and undo that.\r\n\r\nIt turns out the old caching bits were also a bit complicated so a lot of that has been straightened out as well to simplify things.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645555739/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645556979","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-645556979","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":645556979,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTU1Njk3OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-17T18:51:27Z","updated_at":"2020-06-17T18:51:27Z","author_association":"MEMBER","body":"OK that helps a lot. I can still go and review the PR, but the logic makes sense.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645556979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645997845","html_url":"https://github.com/apache/couchdb/pull/2953#issuecomment-645997845","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2953","id":645997845,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NTk5Nzg0NQ==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T12:53:19Z","updated_at":"2020-06-18T12:53:19Z","author_association":"MEMBER","body":"Thank you for the review, @rnewson and thank you for the merge, @garrensmith !","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/645997845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647366283","html_url":"https://github.com/apache/couchdb/pull/2957#issuecomment-647366283","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2957","id":647366283,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzM2NjI4Mw==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T08:25:36Z","updated_at":"2020-06-22T08:25:36Z","author_association":"MEMBER","body":"@wohali is porting to `3.x` branch still a thing? Shall I merge this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647366283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647415218","html_url":"https://github.com/apache/couchdb/pull/2958#issuecomment-647415218","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2958","id":647415218,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzQxNTIxOA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T09:58:29Z","updated_at":"2020-06-22T09:58:29Z","author_association":"MEMBER","body":"Thank you for the review, @garrensmith ! I've performed all the changes you've requested in f997160515c2c7d2ee4fdd31d591a08745911565 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647415218/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647421261","html_url":"https://github.com/apache/couchdb/pull/2957#issuecomment-647421261","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2957","id":647421261,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzQyMTI2MQ==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T10:10:01Z","updated_at":"2020-06-22T10:10:01Z","author_association":"MEMBER","body":"Thanks for reviewing @jjrodrig!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647421261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647574982","html_url":"https://github.com/apache/couchdb/pull/2958#issuecomment-647574982","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2958","id":647574982,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzU3NDk4Mg==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T15:02:47Z","updated_at":"2020-06-22T15:02:47Z","author_association":"MEMBER","body":"Nice that fix looks way better.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647574982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647585381","html_url":"https://github.com/apache/couchdb/pull/2957#issuecomment-647585381","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2957","id":647585381,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NzU4NTM4MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-22T15:19:50Z","updated_at":"2020-06-22T15:19:50Z","author_association":"MEMBER","body":"@dottorblaster yes, it is! No more 3.0.x though.\r\n\r\n`3.x` will last for a long while yet, as `master` is going to become 4.x very shortly...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647585381/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647899924","html_url":"https://github.com/apache/couchdb/issues/2736#issuecomment-647899924","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2736","id":647899924,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Nzg5OTkyNA==","user":{"login":"IgorrG","id":1618103,"node_id":"MDQ6VXNlcjE2MTgxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1618103?v=4","gravatar_id":"","url":"https://api.github.com/users/IgorrG","html_url":"https://github.com/IgorrG","followers_url":"https://api.github.com/users/IgorrG/followers","following_url":"https://api.github.com/users/IgorrG/following{/other_user}","gists_url":"https://api.github.com/users/IgorrG/gists{/gist_id}","starred_url":"https://api.github.com/users/IgorrG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IgorrG/subscriptions","organizations_url":"https://api.github.com/users/IgorrG/orgs","repos_url":"https://api.github.com/users/IgorrG/repos","events_url":"https://api.github.com/users/IgorrG/events{/privacy}","received_events_url":"https://api.github.com/users/IgorrG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T04:28:41Z","updated_at":"2020-06-23T04:28:41Z","author_association":"NONE","body":"Hello, \r\nWe have experienced the same issue with kazoo and couchdb 3.1. Requests to the couchdb sometimes return with timeout and similar log in couchdb.log. Couchdb configured as 2-zone cluster with 3 servers in each zone, we do not get timeouts in single server configuration.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647899924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647995430","html_url":"https://github.com/apache/couchdb/pull/2958#issuecomment-647995430","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2958","id":647995430,"node_id":"MDEyOklzc3VlQ29tbWVudDY0Nzk5NTQzMA==","user":{"login":"bessbd","id":9086834,"node_id":"MDQ6VXNlcjkwODY4MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9086834?v=4","gravatar_id":"","url":"https://api.github.com/users/bessbd","html_url":"https://github.com/bessbd","followers_url":"https://api.github.com/users/bessbd/followers","following_url":"https://api.github.com/users/bessbd/following{/other_user}","gists_url":"https://api.github.com/users/bessbd/gists{/gist_id}","starred_url":"https://api.github.com/users/bessbd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bessbd/subscriptions","organizations_url":"https://api.github.com/users/bessbd/orgs","repos_url":"https://api.github.com/users/bessbd/repos","events_url":"https://api.github.com/users/bessbd/events{/privacy}","received_events_url":"https://api.github.com/users/bessbd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T08:33:28Z","updated_at":"2020-06-23T08:33:28Z","author_association":"MEMBER","body":"Thank you for the reviews, @garrensmith and @rnewson ! Also, thank you for the merge, @rnewson ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/647995430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648197414","html_url":"https://github.com/apache/couchdb/issues/2736#issuecomment-648197414","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2736","id":648197414,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODE5NzQxNA==","user":{"login":"wolfman1956","id":60354896,"node_id":"MDQ6VXNlcjYwMzU0ODk2","avatar_url":"https://avatars.githubusercontent.com/u/60354896?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfman1956","html_url":"https://github.com/wolfman1956","followers_url":"https://api.github.com/users/wolfman1956/followers","following_url":"https://api.github.com/users/wolfman1956/following{/other_user}","gists_url":"https://api.github.com/users/wolfman1956/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfman1956/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfman1956/subscriptions","organizations_url":"https://api.github.com/users/wolfman1956/orgs","repos_url":"https://api.github.com/users/wolfman1956/repos","events_url":"https://api.github.com/users/wolfman1956/events{/privacy}","received_events_url":"https://api.github.com/users/wolfman1956/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T14:30:58Z","updated_at":"2020-06-23T14:30:58Z","author_association":"NONE","body":"Hello IgorG,\r\n\r\nThanks for the info, but we are running CouchDB 2.3, as the apps under the Kazoo environment have not been “updated” for the 3.x version. We also tried under a different hardware architecture and the problem does not come up. We have since engaged the hardware vendor to assist troubleshooting our couchdb, under a lab environment at their site.\r\n\r\nAwaiting results as we speak….\r\n\r\nRgds,\r\nSerge,\r\nQc, Canada\r\n\r\nDe : IgorG <notifications@github.com>\r\nEnvoyé : 23 juin 2020 00:29\r\nÀ : apache/couchdb <couchdb@noreply.github.com>\r\nCc : Serge Poitras <serge@dolembreux.ca>; Author <author@noreply.github.com>\r\nObjet : Re: [apache/couchdb] Couchdb - intermittent fabric timeout errors (#2736)\r\n\r\n\r\nHello,\r\nWe have experienced the same issue with kazoo and couchdb 3.1. Requests to the couchdb sometimes return with timeout and similar log in couchdb.log. Couchdb configured as 2-zone cluster with 3 servers in each zone, we do not get timeouts in single server configuration.\r\n\r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/2736#issuecomment-647899924>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AOMPCUCBZU4IKJ7B5UFFMTDRYAVQJANCNFSM4LXU5JUQ>.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648197414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648205583","html_url":"https://github.com/apache/couchdb/issues/2224#issuecomment-648205583","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2224","id":648205583,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODIwNTU4Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T14:37:51Z","updated_at":"2020-06-23T14:37:51Z","author_association":"CONTRIBUTOR","body":"This is fixed. \r\n\r\nhttps://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/src/fabric2_fdb.erl#L1867-L1884","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648205583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648213671","html_url":"https://github.com/apache/couchdb/pull/740#issuecomment-648213671","issue_url":"https://api.github.com/repos/apache/couchdb/issues/740","id":648213671,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODIxMzY3MQ==","user":{"login":"anuragvohraec","id":53807480,"node_id":"MDQ6VXNlcjUzODA3NDgw","avatar_url":"https://avatars.githubusercontent.com/u/53807480?v=4","gravatar_id":"","url":"https://api.github.com/users/anuragvohraec","html_url":"https://github.com/anuragvohraec","followers_url":"https://api.github.com/users/anuragvohraec/followers","following_url":"https://api.github.com/users/anuragvohraec/following{/other_user}","gists_url":"https://api.github.com/users/anuragvohraec/gists{/gist_id}","starred_url":"https://api.github.com/users/anuragvohraec/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anuragvohraec/subscriptions","organizations_url":"https://api.github.com/users/anuragvohraec/orgs","repos_url":"https://api.github.com/users/anuragvohraec/repos","events_url":"https://api.github.com/users/anuragvohraec/events{/privacy}","received_events_url":"https://api.github.com/users/anuragvohraec/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T14:50:26Z","updated_at":"2020-06-23T14:50:26Z","author_association":"NONE","body":"> This adds a bookmark that is sent with each query and can be used to\r\n> continue a query from a specific key. This will allow users to paginate\r\n> mango queries.\r\n\r\nHow exactly is bookmark implmented? [I have no knowledge of Erlang, but have written a couchdb client in dart]. Is it base64 enocded of json of last index[or doc] sent to user ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648213671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648315985","html_url":"https://github.com/apache/couchdb/pull/740#issuecomment-648315985","issue_url":"https://api.github.com/repos/apache/couchdb/issues/740","id":648315985,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODMxNTk4NQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T17:45:35Z","updated_at":"2020-06-23T17:45:35Z","author_association":"MEMBER","body":"@anuragvohraec the code is here https://github.com/apache/couchdb/blob/master/src/mango/src/mango_json_bookmark.erl\r\nWe basically take the startkey and startkey_docid and convert to erlang binary and then to base64","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648315985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648331456","html_url":"https://github.com/apache/couchdb/issues/2736#issuecomment-648331456","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2736","id":648331456,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODMzMTQ1Ng==","user":{"login":"IgorrG","id":1618103,"node_id":"MDQ6VXNlcjE2MTgxMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1618103?v=4","gravatar_id":"","url":"https://api.github.com/users/IgorrG","html_url":"https://github.com/IgorrG","followers_url":"https://api.github.com/users/IgorrG/followers","following_url":"https://api.github.com/users/IgorrG/following{/other_user}","gists_url":"https://api.github.com/users/IgorrG/gists{/gist_id}","starred_url":"https://api.github.com/users/IgorrG/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IgorrG/subscriptions","organizations_url":"https://api.github.com/users/IgorrG/orgs","repos_url":"https://api.github.com/users/IgorrG/repos","events_url":"https://api.github.com/users/IgorrG/events{/privacy}","received_events_url":"https://api.github.com/users/IgorrG/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T18:14:00Z","updated_at":"2020-06-23T18:14:00Z","author_association":"NONE","body":"Thanks for update, could you tell what is hardware architecture that has no such issue with couch 2.3?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648331456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648333196","html_url":"https://github.com/apache/couchdb/issues/2736#issuecomment-648333196","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2736","id":648333196,"node_id":"MDEyOklzc3VlQ29tbWVudDY0ODMzMzE5Ng==","user":{"login":"wolfman1956","id":60354896,"node_id":"MDQ6VXNlcjYwMzU0ODk2","avatar_url":"https://avatars.githubusercontent.com/u/60354896?v=4","gravatar_id":"","url":"https://api.github.com/users/wolfman1956","html_url":"https://github.com/wolfman1956","followers_url":"https://api.github.com/users/wolfman1956/followers","following_url":"https://api.github.com/users/wolfman1956/following{/other_user}","gists_url":"https://api.github.com/users/wolfman1956/gists{/gist_id}","starred_url":"https://api.github.com/users/wolfman1956/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wolfman1956/subscriptions","organizations_url":"https://api.github.com/users/wolfman1956/orgs","repos_url":"https://api.github.com/users/wolfman1956/repos","events_url":"https://api.github.com/users/wolfman1956/events{/privacy}","received_events_url":"https://api.github.com/users/wolfman1956/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-23T18:17:30Z","updated_at":"2020-06-23T18:17:30Z","author_association":"NONE","body":"We tested on a DELL server w/VMWare.\r\n\r\nDe : IgorG <notifications@github.com>\r\nEnvoyé : 23 juin 2020 14:14\r\nÀ : apache/couchdb <couchdb@noreply.github.com>\r\nCc : Serge Poitras <serge@dolembreux.ca>; Author <author@noreply.github.com>\r\nObjet : Re: [apache/couchdb] Couchdb - intermittent fabric timeout errors (#2736)\r\n\r\n\r\nThanks for update, could you tell what is hardware architecture that has no such issue with couch 2.3?\r\n\r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/2736#issuecomment-648331456>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AOMPCUHG4LM4UM5JJ3V5CJDRYDWHNANCNFSM4LXU5JUQ>.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/648333196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649158145","html_url":"https://github.com/apache/couchdb/issues/2962#issuecomment-649158145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2962","id":649158145,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTE1ODE0NQ==","user":{"login":"teebu","id":5531844,"node_id":"MDQ6VXNlcjU1MzE4NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5531844?v=4","gravatar_id":"","url":"https://api.github.com/users/teebu","html_url":"https://github.com/teebu","followers_url":"https://api.github.com/users/teebu/followers","following_url":"https://api.github.com/users/teebu/following{/other_user}","gists_url":"https://api.github.com/users/teebu/gists{/gist_id}","starred_url":"https://api.github.com/users/teebu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/teebu/subscriptions","organizations_url":"https://api.github.com/users/teebu/orgs","repos_url":"https://api.github.com/users/teebu/repos","events_url":"https://api.github.com/users/teebu/events{/privacy}","received_events_url":"https://api.github.com/users/teebu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T01:23:16Z","updated_at":"2020-06-25T01:23:16Z","author_association":"NONE","body":"What does `waiting on user` mean? Is there something more I can provide?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649158145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649356271","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-649356271","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":649356271,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTM1NjI3MQ==","user":{"login":"skeyby","id":1609532,"node_id":"MDQ6VXNlcjE2MDk1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1609532?v=4","gravatar_id":"","url":"https://api.github.com/users/skeyby","html_url":"https://github.com/skeyby","followers_url":"https://api.github.com/users/skeyby/followers","following_url":"https://api.github.com/users/skeyby/following{/other_user}","gists_url":"https://api.github.com/users/skeyby/gists{/gist_id}","starred_url":"https://api.github.com/users/skeyby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skeyby/subscriptions","organizations_url":"https://api.github.com/users/skeyby/orgs","repos_url":"https://api.github.com/users/skeyby/repos","events_url":"https://api.github.com/users/skeyby/events{/privacy}","received_events_url":"https://api.github.com/users/skeyby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T08:17:27Z","updated_at":"2020-06-25T08:17:27Z","author_association":"NONE","body":"I'd like to join the Party....\r\n\r\nI think this is the same problem:\r\n\r\n```\r\n[error] 2020-06-25T07:59:19.755854Z couchdb@10.133.136.126 <0.29723.204> 77cd8945da req_err(3717872069) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L249\">>]\r\n[error] 2020-06-25T08:01:36.801577Z couchdb@10.133.136.126 <0.11743.199> 5a40992a00 req_err(3717872069) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L249\">>]\r\n[error] 2020-06-25T08:01:42.651561Z couchdb@10.133.136.126 <0.27527.200> e1b4f6821b req_err(3717872069) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L249\">>]\r\n```\r\n\r\nFreeBSD 12.1, CouchDB 2.3.1, Erlang 21.3.8.14.\r\n\r\nA lot of PouchDB clients replicating from a Single Database.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649356271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649369065","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-649369065","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":649369065,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTM2OTA2NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T08:30:01Z","updated_at":"2020-06-25T08:30:01Z","author_association":"MEMBER","body":"@skeyby just checking, does this cause any noticeable issues for your application (✌️) or is this more inconvenient log noise (which we should still investigate of course, just trying to get a sense of urgency here)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649369065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649399891","html_url":"https://github.com/apache/couchdb/issues/2966#issuecomment-649399891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2966","id":649399891,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTM5OTg5MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T08:59:26Z","updated_at":"2020-06-25T08:59:26Z","author_association":"MEMBER","body":"duplicate of https://github.com/apache/couchdb/discussions/2964","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649399891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649675232","html_url":"https://github.com/apache/couchdb/issues/2966#issuecomment-649675232","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2966","id":649675232,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTY3NTIzMg==","user":{"login":"raulmartinezr","id":4292375,"node_id":"MDQ6VXNlcjQyOTIzNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4292375?v=4","gravatar_id":"","url":"https://api.github.com/users/raulmartinezr","html_url":"https://github.com/raulmartinezr","followers_url":"https://api.github.com/users/raulmartinezr/followers","following_url":"https://api.github.com/users/raulmartinezr/following{/other_user}","gists_url":"https://api.github.com/users/raulmartinezr/gists{/gist_id}","starred_url":"https://api.github.com/users/raulmartinezr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raulmartinezr/subscriptions","organizations_url":"https://api.github.com/users/raulmartinezr/orgs","repos_url":"https://api.github.com/users/raulmartinezr/repos","events_url":"https://api.github.com/users/raulmartinezr/events{/privacy}","received_events_url":"https://api.github.com/users/raulmartinezr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T16:29:10Z","updated_at":"2020-06-25T16:29:10Z","author_association":"NONE","body":"Yep, I created initial one as \"help\" by mistake. Maybe I would have been better to close \"help\" instead of \"bug\"\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649675232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649675956","html_url":"https://github.com/apache/couchdb/issues/2966#issuecomment-649675956","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2966","id":649675956,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTY3NTk1Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T16:30:35Z","updated_at":"2020-06-25T16:30:35Z","author_association":"MEMBER","body":"I marked it “help” — we still need to determine if it is a bug","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649675956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649690991","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-649690991","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":649690991,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTY5MDk5MQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T16:48:18Z","updated_at":"2020-06-25T16:48:18Z","author_association":"MEMBER","body":"@kocolosk @nickva So two things. I've gone back and changed to using the `\\xffmetadataVersion` as the primary cache synchronization but that brings up two more questions:\r\n\r\nhttps://github.com/apache/couchdb/blob/9425a6408274edc1713b990729d4dea4daa4787d/src/fabric/src/fabric2_fdb.erl#L1332-L1336\r\n\r\nThe first thing I realized is that by using the centralized metadataVersion, I think we're basically causing all in-flight write transactions to retry. I'll try and write a test case to prove that we can conflict on that key, but that also means that any time anyone updates a design doc (or creates or deletes a database) we're causing some amount of work to be retried. I can't decide if one KV lookup on db_version for every transaction is more or less work in that case.\r\n\r\nhttps://github.com/apache/couchdb/blob/9425a6408274edc1713b990729d4dea4daa4787d/src/fabric/src/fabric2_fdb.erl#L1384-L1397\r\n\r\nThe second thing I noticed is that `metadataVersion` is also supposed to protect between different layers which means we should be going back all the way to the directory layer to check that our directory hasn't been renamed and what not. That means each time the metadataVersion key we're now adding an extra ~5-10 KV lookups in those cases. I've added that as a commit on this PR but mostly for the conversation.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649690991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649730712","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-649730712","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":649730712,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTczMDcxMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T17:54:54Z","updated_at":"2020-06-25T17:54:54Z","author_association":"MEMBER","body":"FYI reviewing the history of this, I don't see anyone reporting this issue against CouchDB 3.x.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649730712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649735984","html_url":"https://github.com/apache/couchdb/issues/2213#issuecomment-649735984","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2213","id":649735984,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTczNTk4NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:06:39Z","updated_at":"2020-06-25T18:06:39Z","author_association":"MEMBER","body":"Now that 3.x is out, the chances of us doing a 2.3.2 are slim-to-none. The only foreseeable reasons we might do this are:\r\n\r\n* CVE against CouchDB 2.x\r\n* Marking features as deprecated that are removed in a 3.x version\r\n\r\nWe don't anticipate any of the latter, but we'll keep our eyes on the former and give it consideration.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649735984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649739776","html_url":"https://github.com/apache/couchdb/issues/2040#issuecomment-649739776","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2040","id":649739776,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTczOTc3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:14:35Z","updated_at":"2020-06-25T18:14:35Z","author_association":"MEMBER","body":"This issue is being closed because it references CouchDB 1.x. We no longer support CouchdB 1.x.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649739776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649740347","html_url":"https://github.com/apache/couchdb/issues/2015#issuecomment-649740347","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2015","id":649740347,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MDM0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:15:43Z","updated_at":"2020-06-25T18:15:43Z","author_association":"MEMBER","body":"bump on this. @garrensmith @rnewson Are we going to prevent user-defined `_rev` values in fdb-based CouchDB? This issue makes it clear it could be a \"sharp edge\" that users could get caught on.\r\n\r\nIf so I want to mark this in the documentation for 3.x ASAP.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649740347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742015","html_url":"https://github.com/apache/couchdb/issues/1312#issuecomment-649742015","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1312","id":649742015,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjAxNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:19:26Z","updated_at":"2020-06-25T18:19:26Z","author_association":"MEMBER","body":"Too old to act on; removing it unless we see recurrence.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742146","html_url":"https://github.com/apache/couchdb/issues/1345#issuecomment-649742146","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1345","id":649742146,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjE0Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:19:43Z","updated_at":"2020-06-25T18:19:43Z","author_association":"MEMBER","body":"Too old to act on; closing for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742212","html_url":"https://github.com/apache/couchdb/issues/1349#issuecomment-649742212","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1349","id":649742212,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjIxMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:19:50Z","updated_at":"2020-06-25T18:19:50Z","author_association":"MEMBER","body":"Too old to act on; closing for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742264","html_url":"https://github.com/apache/couchdb/issues/1493#issuecomment-649742264","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1493","id":649742264,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjI2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:19:56Z","updated_at":"2020-06-25T18:19:56Z","author_association":"MEMBER","body":"Too old to act on; closing for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742439","html_url":"https://github.com/apache/couchdb/issues/1762#issuecomment-649742439","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1762","id":649742439,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjQzOQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:20:19Z","updated_at":"2020-06-25T18:20:19Z","author_association":"MEMBER","body":"Too old to act on; closing for now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742648","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-649742648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":649742648,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjY0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:20:50Z","updated_at":"2020-06-25T18:20:50Z","author_association":"MEMBER","body":"@jjrodrig @dottorblaster Either of you still interested in taking this on?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742648/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742737","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-649742737","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":649742737,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MjczNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:21:02Z","updated_at":"2020-06-25T18:21:02Z","author_association":"MEMBER","body":"Jenkins is pretty reliable now...going to close this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742874","html_url":"https://github.com/apache/couchdb/issues/2116#issuecomment-649742874","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2116","id":649742874,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0Mjg3NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:21:19Z","updated_at":"2020-06-25T18:21:19Z","author_association":"MEMBER","body":"Please reopen if this recurs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649742874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649743035","html_url":"https://github.com/apache/couchdb/issues/2528#issuecomment-649743035","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2528","id":649743035,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc0MzAzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:21:42Z","updated_at":"2020-06-25T18:21:42Z","author_association":"MEMBER","body":"Not seeing this one as often now; please reopen when this recurs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649743035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649758367","html_url":"https://github.com/apache/couchdb/issues/1943#issuecomment-649758367","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1943","id":649758367,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc1ODM2Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T18:54:50Z","updated_at":"2020-06-25T18:54:50Z","author_association":"MEMBER","body":"@flimzy I'm not really sure what's going on here. I'm sure chunked transmission works between CouchDBs, but I don't know precisely how you're running into the issue. Did you ever get back to this, or just worked around it otherwise?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649758367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649775444","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-649775444","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":649775444,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc3NTQ0NA==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T19:32:35Z","updated_at":"2020-06-25T19:32:35Z","author_association":"MEMBER","body":"@wohali absolutely!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649775444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649783342","html_url":"https://github.com/apache/couchdb/issues/2015#issuecomment-649783342","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2015","id":649783342,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc4MzM0Mg==","user":{"login":"rjharmon","id":42002,"node_id":"MDQ6VXNlcjQyMDAy","avatar_url":"https://avatars.githubusercontent.com/u/42002?v=4","gravatar_id":"","url":"https://api.github.com/users/rjharmon","html_url":"https://github.com/rjharmon","followers_url":"https://api.github.com/users/rjharmon/followers","following_url":"https://api.github.com/users/rjharmon/following{/other_user}","gists_url":"https://api.github.com/users/rjharmon/gists{/gist_id}","starred_url":"https://api.github.com/users/rjharmon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjharmon/subscriptions","organizations_url":"https://api.github.com/users/rjharmon/orgs","repos_url":"https://api.github.com/users/rjharmon/repos","events_url":"https://api.github.com/users/rjharmon/events{/privacy}","received_events_url":"https://api.github.com/users/rjharmon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T19:50:58Z","updated_at":"2020-06-25T19:53:35Z","author_association":"NONE","body":"As a developer who uses it, I selected couchdb in part because the _rev is opaque and CAN be controlled from outside couchdb.   Using md5(erlang-data-representation) in those _revs is far from ideal for deterministic versioning, so it's not just a nice point of flexibility. But it is nice, for sure.\r\n\r\nWould push replicators from other versions/implementations (including and not limited to PouchDB) have to pull the new _rev and write it back to disk, when pushing to a server that ignores provided _rev's?  If so, that would be a minor ick.  \r\n\r\nImpact assessment: if one generates revs that have a 32-byte non-int, one would get an error, search and find this issue and then add or remove a byte from their _rev representation.  I'm not seeing that as \"sharp\", myself.  Did I miss something?\r\n\r\nI would suggest, as the simplest change, to continue the existing semantic of \"support provided _rev's opaquely\", while correcting the unintended ~~crash~~ahem, error-on-32-char-rev's-not-parsable.  I might also add any needed guidance for integrators and authors of custom replicators that they SHOULD generate deterministic _rev's if they use an algorithm different from couchdb's default internal mechanism.  \r\n\r\nMight it be helpful to strengthen any language for proxies and replication implementers to treat observed _rev's as opaque at baseline? while possibly noting that custom replicators are allowed to probe for any special meanings for some optimization purposes (just as the int-parsing logic does currently), but that they MUST be robust to opaque _rev's that don't fit their hopes and dreams.  I think that's another way of indicating the high-level outcome that it seems @ricellis drives at.\r\n\r\n@davisp It's possible to suggest people SHOULD NOT use flags in the revs for indicating such facts as deletion or update-times, although given that _rev's are opaque values, it's not clear to me that these bits of meaning even **could** be harmful to anyone (reminding myself that if one does such things, they can also evaluate and test against any potentially-colliding changes made in later releases of the server) - essentially as Paul said.  I'd leave off this bit, myself.  \r\n\r\nThere's some additional perspective from the field.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649783342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649790164","html_url":"https://github.com/apache/couchdb/issues/2015#issuecomment-649790164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2015","id":649790164,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTc5MDE2NA==","user":{"login":"rjharmon","id":42002,"node_id":"MDQ6VXNlcjQyMDAy","avatar_url":"https://avatars.githubusercontent.com/u/42002?v=4","gravatar_id":"","url":"https://api.github.com/users/rjharmon","html_url":"https://github.com/rjharmon","followers_url":"https://api.github.com/users/rjharmon/followers","following_url":"https://api.github.com/users/rjharmon/following{/other_user}","gists_url":"https://api.github.com/users/rjharmon/gists{/gist_id}","starred_url":"https://api.github.com/users/rjharmon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rjharmon/subscriptions","organizations_url":"https://api.github.com/users/rjharmon/orgs","repos_url":"https://api.github.com/users/rjharmon/repos","events_url":"https://api.github.com/users/rjharmon/events{/privacy}","received_events_url":"https://api.github.com/users/rjharmon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-25T20:05:52Z","updated_at":"2020-06-25T20:05:52Z","author_association":"NONE","body":"Can good 32-byte-hex-ints continue to get an optimized code path, while other 32-byte _revs get a working result as with non-32-byte _rev's?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649790164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649959046","html_url":"https://github.com/apache/couchdb/issues/2877#issuecomment-649959046","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2877","id":649959046,"node_id":"MDEyOklzc3VlQ29tbWVudDY0OTk1OTA0Ng==","user":{"login":"ChetanGoti","id":1378002,"node_id":"MDQ6VXNlcjEzNzgwMDI=","avatar_url":"https://avatars.githubusercontent.com/u/1378002?v=4","gravatar_id":"","url":"https://api.github.com/users/ChetanGoti","html_url":"https://github.com/ChetanGoti","followers_url":"https://api.github.com/users/ChetanGoti/followers","following_url":"https://api.github.com/users/ChetanGoti/following{/other_user}","gists_url":"https://api.github.com/users/ChetanGoti/gists{/gist_id}","starred_url":"https://api.github.com/users/ChetanGoti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChetanGoti/subscriptions","organizations_url":"https://api.github.com/users/ChetanGoti/orgs","repos_url":"https://api.github.com/users/ChetanGoti/repos","events_url":"https://api.github.com/users/ChetanGoti/events{/privacy}","received_events_url":"https://api.github.com/users/ChetanGoti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-26T04:37:54Z","updated_at":"2020-06-26T04:37:54Z","author_association":"NONE","body":"If I'm able to recall this correctly, this happens when you start a changes feed and stop it. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/649959046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650132361","html_url":"https://github.com/apache/couchdb/pull/2832#issuecomment-650132361","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2832","id":650132361,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDEzMjM2MQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-26T11:34:56Z","updated_at":"2020-06-26T11:35:06Z","author_association":"CONTRIBUTOR","body":"I refactored PR to parse Version earlier and added tests","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650132361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650137000","html_url":"https://github.com/apache/couchdb/issues/2015#issuecomment-650137000","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2015","id":650137000,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDEzNzAwMA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-26T11:47:54Z","updated_at":"2020-06-26T11:47:54Z","author_association":"MEMBER","body":"I’m in favour of allowing external revs, and I’d be okay with documenting clearly that 32-byte-non-int revs are an obtuse edge-case that we’re not changing, so implementers will have to do some trickery to work around that.\r\n\r\nIn addition, whatever 4.0 limitations exist, those need documenting then too.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650137000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650154914","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-650154914","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":650154914,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDE1NDkxNA==","user":{"login":"skeyby","id":1609532,"node_id":"MDQ6VXNlcjE2MDk1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1609532?v=4","gravatar_id":"","url":"https://api.github.com/users/skeyby","html_url":"https://github.com/skeyby","followers_url":"https://api.github.com/users/skeyby/followers","following_url":"https://api.github.com/users/skeyby/following{/other_user}","gists_url":"https://api.github.com/users/skeyby/gists{/gist_id}","starred_url":"https://api.github.com/users/skeyby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/skeyby/subscriptions","organizations_url":"https://api.github.com/users/skeyby/orgs","repos_url":"https://api.github.com/users/skeyby/repos","events_url":"https://api.github.com/users/skeyby/events{/privacy}","received_events_url":"https://api.github.com/users/skeyby/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-26T12:34:39Z","updated_at":"2020-06-26T12:34:39Z","author_association":"NONE","body":"@janl no noticeable problems from the application side, it's just generating like 10MBs of log per day...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650154914/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650356192","html_url":"https://github.com/apache/couchdb/issues/2015#issuecomment-650356192","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2015","id":650356192,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDM1NjE5Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-26T19:25:56Z","updated_at":"2020-06-26T19:25:56Z","author_association":"MEMBER","body":"For the record, I don't care one way or the other, but if this is a use \ncase we're going to explicitly support, it deserves to be documented \ncorrectly, along with any limitations. I'll help with that *if* someone \ncan explain the 3.x/4.x behaviour to me thoroughly enough.\n\n-Joan\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650356192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650584859","html_url":"https://github.com/apache/couchdb/pull/2952#issuecomment-650584859","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2952","id":650584859,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDU4NDg1OQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-27T16:47:40Z","updated_at":"2020-07-10T14:27:40Z","author_association":"CONTRIBUTOR","body":"> The first thing I realized is that by using the centralized metadataVersion, I think we're basically causing all in-flight write transactions to retry\r\n\r\nWe are doing md version reads at the snapshot level isolation https://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/src/fabric2_fdb.erl#L1273 so don't think they should retry. But it is worth checking if it is not too difficult.\r\n\r\n> we should be going back all the way to the directory layer to check that our directory hasn't been renamed and what not. That means each time the metadataVersion key we're now adding an extra ~5-10 KV lookups in those cases.\r\n\r\nThat is legit. Good point.  I don't think we technically have any place where we programmatically bump the md version when directory layer updates (we'd do it manually), but still for correctness and completeness we should revalidate it. We already do it for full re-opens (when db version and md versions are stale: https://github.com/apache/couchdb/blob/prototype/fdb-layer/src/fabric/src/fabric2_fdb.erl#L134) so we should do it on md changes as well.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650584859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650867061","html_url":"https://github.com/apache/couchdb/issues/1600#issuecomment-650867061","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1600","id":650867061,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MDg2NzA2MQ==","user":{"login":"ahmedsajid","id":8458067,"node_id":"MDQ6VXNlcjg0NTgwNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8458067?v=4","gravatar_id":"","url":"https://api.github.com/users/ahmedsajid","html_url":"https://github.com/ahmedsajid","followers_url":"https://api.github.com/users/ahmedsajid/followers","following_url":"https://api.github.com/users/ahmedsajid/following{/other_user}","gists_url":"https://api.github.com/users/ahmedsajid/gists{/gist_id}","starred_url":"https://api.github.com/users/ahmedsajid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ahmedsajid/subscriptions","organizations_url":"https://api.github.com/users/ahmedsajid/orgs","repos_url":"https://api.github.com/users/ahmedsajid/repos","events_url":"https://api.github.com/users/ahmedsajid/events{/privacy}","received_events_url":"https://api.github.com/users/ahmedsajid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T02:23:39Z","updated_at":"2020-06-29T02:24:36Z","author_association":"NONE","body":"I have recently started noticing these normal errors too. This seems to be causing problem on application side where the application has to retry the query.\r\nI see plenty of CPU and memory available. CouchDB running on NVMe.\r\n\r\nCouchDB Containerized 2.3.1\r\ndoc_count 1146523\r\n\r\n```\r\n[error] 2020-06-29T01:47:40.135242Z nonode@nohost <0.16344.1747> d9b86d05d1 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:52:16.800967Z nonode@nohost <0.7070.1747> 6e3f86e7d2 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:52:37.457872Z nonode@nohost <0.22879.1746> dd23899df1 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:53:38.011332Z nonode@nohost <0.13826.1747> f017584ecd req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:54:21.724277Z nonode@nohost <0.10653.1738> a29cd9aab0 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:54:23.644179Z nonode@nohost <0.25576.1746> 38ad2a22d1 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:54:44.433040Z nonode@nohost <0.14191.1747> 1d48919e2f req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:54:50.377741Z nonode@nohost <0.29280.1747> c5d56778d0 req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n[error] 2020-06-29T01:55:01.151052Z nonode@nohost <0.22135.1747> 1f97463eea req_err(1125717067) unknown_error : normal\r\n    [<<\"chttpd:catch_error/3 L356\">>,<<\"chttpd:handle_req_after_auth/2 L322\">>,<<\"chttpd:process_request/1 L303\">>,<<\"chttpd:handle_request_int/1 L243\">>,<<\"mochiweb_http:headers/6 L128\">>,<<\"proc_lib:init_p_do_apply/3 L247\">>]\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/650867061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651196886","html_url":"https://github.com/apache/couchdb/pull/2969#issuecomment-651196886","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2969","id":651196886,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTE5Njg4Ng==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T15:33:25Z","updated_at":"2020-06-29T15:33:25Z","author_association":"CONTRIBUTOR","body":"@dottorblaster Thanks for the review!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651196886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651200038","html_url":"https://github.com/apache/couchdb/pull/2972#issuecomment-651200038","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2972","id":651200038,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTIwMDAzOA==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-29T15:39:10Z","updated_at":"2020-06-29T15:39:10Z","author_association":"MEMBER","body":"I think it's a good idea, actually I've seen this happening a ton of times in other projects. Looks like a nice fix, I'll approve it if the CI is green","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651200038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651729241","html_url":"https://github.com/apache/couchdb/pull/2974#issuecomment-651729241","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2974","id":651729241,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MTcyOTI0MQ==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-30T11:17:18Z","updated_at":"2020-06-30T11:17:18Z","author_association":"CONTRIBUTOR","body":"Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/651729241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/652910295","html_url":"https://github.com/apache/couchdb/issues/1524#issuecomment-652910295","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1524","id":652910295,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MjkxMDI5NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-02T09:55:28Z","updated_at":"2020-07-02T09:55:28Z","author_association":"MEMBER","body":"@mehrdad-shokri absolutely no schedule, but we’re open for sponsorships for this feature to move it along faster.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/652910295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/653616665","html_url":"https://github.com/apache/couchdb/pull/2981#issuecomment-653616665","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2981","id":653616665,"node_id":"MDEyOklzc3VlQ29tbWVudDY1MzYxNjY2NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-03T16:32:18Z","updated_at":"2020-07-03T16:32:18Z","author_association":"MEMBER","body":"transitive +1 via https://github.com/apache/couchdb/pull/2980","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/653616665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654778574","html_url":"https://github.com/apache/couchdb/pull/2987#issuecomment-654778574","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2987","id":654778574,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDc3ODU3NA==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T11:07:36Z","updated_at":"2020-07-07T11:07:36Z","author_association":"CONTRIBUTOR","body":"Thanks! @dottorblaster ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654778574/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654837802","html_url":"https://github.com/apache/couchdb/pull/2988#issuecomment-654837802","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2988","id":654837802,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDgzNzgwMg==","user":{"login":"dottorblaster","id":20770,"node_id":"MDQ6VXNlcjIwNzcw","avatar_url":"https://avatars.githubusercontent.com/u/20770?v=4","gravatar_id":"","url":"https://api.github.com/users/dottorblaster","html_url":"https://github.com/dottorblaster","followers_url":"https://api.github.com/users/dottorblaster/followers","following_url":"https://api.github.com/users/dottorblaster/following{/other_user}","gists_url":"https://api.github.com/users/dottorblaster/gists{/gist_id}","starred_url":"https://api.github.com/users/dottorblaster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dottorblaster/subscriptions","organizations_url":"https://api.github.com/users/dottorblaster/orgs","repos_url":"https://api.github.com/users/dottorblaster/repos","events_url":"https://api.github.com/users/dottorblaster/events{/privacy}","received_events_url":"https://api.github.com/users/dottorblaster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T12:56:11Z","updated_at":"2020-07-07T12:56:11Z","author_association":"MEMBER","body":"(The CI threw some strange error before, I re-ran it)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654837802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654924668","html_url":"https://github.com/apache/couchdb/pull/2988#issuecomment-654924668","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2988","id":654924668,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NDkyNDY2OA==","user":{"login":"jjrodrig","id":1001724,"node_id":"MDQ6VXNlcjEwMDE3MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1001724?v=4","gravatar_id":"","url":"https://api.github.com/users/jjrodrig","html_url":"https://github.com/jjrodrig","followers_url":"https://api.github.com/users/jjrodrig/followers","following_url":"https://api.github.com/users/jjrodrig/following{/other_user}","gists_url":"https://api.github.com/users/jjrodrig/gists{/gist_id}","starred_url":"https://api.github.com/users/jjrodrig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jjrodrig/subscriptions","organizations_url":"https://api.github.com/users/jjrodrig/orgs","repos_url":"https://api.github.com/users/jjrodrig/repos","events_url":"https://api.github.com/users/jjrodrig/events{/privacy}","received_events_url":"https://api.github.com/users/jjrodrig/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-07T15:00:35Z","updated_at":"2020-07-07T15:00:35Z","author_association":"CONTRIBUTOR","body":"Thanks! ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/654924668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/656508145","html_url":"https://github.com/apache/couchdb/issues/2226#issuecomment-656508145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2226","id":656508145,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NjUwODE0NQ==","user":{"login":"meten-natuurlijk","id":67326466,"node_id":"MDQ6VXNlcjY3MzI2NDY2","avatar_url":"https://avatars.githubusercontent.com/u/67326466?v=4","gravatar_id":"","url":"https://api.github.com/users/meten-natuurlijk","html_url":"https://github.com/meten-natuurlijk","followers_url":"https://api.github.com/users/meten-natuurlijk/followers","following_url":"https://api.github.com/users/meten-natuurlijk/following{/other_user}","gists_url":"https://api.github.com/users/meten-natuurlijk/gists{/gist_id}","starred_url":"https://api.github.com/users/meten-natuurlijk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meten-natuurlijk/subscriptions","organizations_url":"https://api.github.com/users/meten-natuurlijk/orgs","repos_url":"https://api.github.com/users/meten-natuurlijk/repos","events_url":"https://api.github.com/users/meten-natuurlijk/events{/privacy}","received_events_url":"https://api.github.com/users/meten-natuurlijk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-10T06:29:48Z","updated_at":"2020-07-10T06:29:48Z","author_association":"NONE","body":"I am seeing the exact same behaviour on CouchDB 3.1.0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/656508145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/656990181","html_url":"https://github.com/apache/couchdb/issues/2941#issuecomment-656990181","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2941","id":656990181,"node_id":"MDEyOklzc3VlQ29tbWVudDY1Njk5MDE4MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-11T05:00:59Z","updated_at":"2020-07-11T05:00:59Z","author_association":"CONTRIBUTOR","body":"Thanks for the report @markusd and good analysis, @wohali. It does look like a bug.\r\n\r\nIf this was a compaction file left over from before the upgrade to 3.1.0, this is what might have happened:\r\n\r\nPreviously the `emsort:get_state/1` result was just the [root value](https://github.com/apache/couchdb/blob/master/src/couch/src/couch_emsort.erl#L167) `{BB, PrevPos}` then in 3.1.0 it was converted to be [`[{root, Root}, ...]`](https://github.com/apache/couchdb/blob/3.x/src/couch/src/couch_emsort.erl#L181-L185).  There is an upgrade clause, but it checks for an [integer only](https://github.com/apache/couchdb/blob/3.x/src/couch/src/couch_bt_engine_compactor.erl#L631) and I think we'd want to check for the `{_BB, _PrevPos}` pattern instead there.\r\n\r\n@davisp, what do you think, is that about right?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/656990181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]