[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458087560","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458087560","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458087560,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODA4NzU2MA==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T11:06:24Z","updated_at":"2019-01-28T11:06:24Z","author_association":"CONTRIBUTOR","body":"@wohali I see this in logs:\r\n```\r\n[debug] 2019-01-28T11:00:38.326369Z couchdb@127.0.0.1 <0.2272.0> -------- OS Process #Port<0.8003> Input  :: [\"ddoc\",\"_design/clone\",[\"rewrites\"],[{\"method\":\"PUT\",\"requested_path\":[\"test\",\"_design\",\"clone\",\"_rewrite\",\"foo\",\"z.txt\"],\"path\":[\"test\",\"_design\",\"clone\",\"_rewrite\",\"foo\",\"z.txt\"],\"raw_path\":\"/test/_design/clone/_rewrite/foo/z.txt\",\"query\":{},\"headers\":{\"Accept\":\"*/*\",\"Content-Length\":\"4\",\"Content-Type\":\"text/plain\",\"Host\":\"127.0.0.1:5984\",\"If-Match\":\"3-bc676df6ad1244ac5a888c629c908e68\",\"User-Agent\":\"curl/7.47.0\"},\"body\":\"123\\n\",\"peer\":\"127.0.0.1\",\"cookie\":{},\"userCtx\":{\"db\":\"test\",\"name\":null,\"roles\":[]},\"secObj\":{}}]]\r\n[debug] 2019-01-28T11:00:38.327145Z couchdb@127.0.0.1 <0.2272.0> -------- OS Process #Port<0.8003> Output :: [\"ok\",{\"path\":\"../../../test/foo/z.txt\",\"method\":\"PUT\",\"body\":\"123\\u000a\",\"headers\":{\"Accept\":\"*/*\",\"Content-Length\":\"4\",\"Content-Type\":\"text/plain\",\"Host\":\"127.0.0.1:5984\",\"If-Match\":\"3-bc676df6ad1244ac5a888c629c908e68\",\"User-Agent\":\"curl/7.47.0\"}}]\r\n[debug] 2019-01-28T11:00:38.327312Z couchdb@127.0.0.1 <0.17577.6> 4afc9d08b5 rewrite to \"/test/foo/z.txt\"\r\n[error] 2019-01-28T11:01:38.328979Z couchdb@127.0.0.1 <0.17577.6> 978d0bbb83 fabric_worker_timeout update_docs,'couchdb@127.0.0.1',<<\"shards/80000000-9fffffff/test.1548661440\">>\r\n[notice] 2019-01-28T11:01:38.329209Z couchdb@127.0.0.1 <0.17577.6> 978d0bbb83 127.0.0.1:5984 127.0.0.1 undefined PUT /test/foo/z.txt 500 ok 60002\r\n[notice] 2019-01-28T11:01:38.329243Z couchdb@127.0.0.1 <0.17577.6> 978d0bbb83 127.0.0.1:5984 127.0.0.1 undefined PUT /test/_design/clone/_rewrite/foo/z.txt 500 ok 60006\r\n```\r\nCan you please give a hint what may cause `fabric_worker_timeout update_docs`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458087560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458193759","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458193759","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458193759,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODE5Mzc1OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T16:11:07Z","updated_at":"2019-01-28T16:11:07Z","author_association":"MEMBER","body":"The logs say that the `dev/run` script is failing to start up CouchDB successfully.\r\n\r\nWhat happens when you run `make check` locally?\r\n\r\nDid you perhaps break startup because the `snooze_period` value **must** be a float now? Does it work with the default value, or any value without a decimal point, at all?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458193759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458194421","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458194421","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458194421,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODE5NDQyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T16:12:59Z","updated_at":"2019-01-28T16:12:59Z","author_association":"MEMBER","body":"It means the amount of time necessary to process the document update was exceeded. As you can see from the logfile it took 60s.\r\n\r\nIs it taking JS longer than 60s to process the document, perhaps? That seems likely...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458194421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458223134","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458223134","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458223134,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODIyMzEzNA==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:25:13Z","updated_at":"2019-01-28T17:25:13Z","author_association":"CONTRIBUTOR","body":"Hi @wohali, thanks for your guidance on that.\r\n\r\nUnfortunately `make check` doesn't work for me (even on master), it says *HTTP API was disabled at compile time* (done with `./configure --disable-docs && make clean && make check`).\r\n\r\nBut compiling and running it myself helped me finding the causes:\r\n- `config:get_float()` expects a float **for the default value** (but accepts an integer or a float as primary value),\r\n- `timer:sleep()` expects an integer.\r\n\r\nI've modified this commit to fix that, and tested compiled CouchDB with different values (floats and integers): it works (I've also checked that these values are correctly read, using `curl -u root:password localhost:15984/_node/_local/_config | grep -o snooze_period.:....`)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458223134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458233026","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458233026","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458233026,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODIzMzAyNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T17:51:53Z","updated_at":"2019-01-28T17:51:53Z","author_association":"MEMBER","body":"@adrienverge Try:\r\n\r\n```\r\nmake distclean\r\n./configure -c\r\nmake check\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458233026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458288768","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458288768","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458288768,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI4ODc2OA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:28:05Z","updated_at":"2019-01-28T20:28:05Z","author_association":"MEMBER","body":"Can I suggest not to change the existing config attribute, but instead add a new one -  \"snooze_period_ms\" representing time in milliseconds (as integer) and then abstract snooze period's getter with something like this?\r\n```erlang\r\nget_snooze_period() ->\r\n    Default = config:get_integer(\"compaction_daemon\", \"snooze_period\", 3),\r\n    case config:get_integer(\"compaction_daemon\", \"snooze_period_ms\", -1) of\r\n        -1 -> Default * 1000;\r\n        SnoozePeriod -> SnoozePeriod\r\n    end.\r\n```\r\n \r\nThis will allow not to wrestle with the floats, be consistent with the rest of the config where time attributes defined as integers and will not break every CouchDB deployment that happened to have that attribute customized, in case people miss the requirement to change their config during an upgrade to be a float.\r\n\r\nAs for PR itself the test `couchdb_compaction_daemon_tests.erl` need to be updated and ideally extended to include assertions related to this change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458288768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458291425","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458291425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458291425,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODI5MTQyNQ==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T20:36:17Z","updated_at":"2019-01-28T21:13:35Z","author_association":"CONTRIBUTOR","body":"@eiri thanks for your feedback.\r\n\r\nI sure can try do add a new `snooze_period_ms` option, but to be honest it seems less intuitive to have two options for the same feature, it might confuse simple CouchDB users like me. But maybe it's more \"Erlang-y\" to do like this? (Please note I'm very unfamiliar with Erlang.)\r\n\r\nIn my opinion, accepting both integers and floats for `snooze_period` could do the job elegantly, without needing users to upgrade their configuration.\r\n@eiri @wohali what do you think?\r\nIf you prefer the `snooze_period` + `snooze_period_ms` option, I'll try to implement it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458291425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458302135","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458302135","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458302135,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMwMjEzNQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T21:09:28Z","updated_at":"2019-01-28T21:09:28Z","author_association":"MEMBER","body":"fwiw this code right now is _not_ supporting both integers and floats, but ignores `snooze_period` in integer in preference for the float's default, because this is how `config:get_float/3` works:\r\n```erlang\r\n%% Can read customized integer\r\n(node1@127.0.0.1)3> config:get_integer(\"compaction_daemon\", \"snooze_period\", 5).\r\n1\r\n%% but ignoring it when trying to read it as a float\r\n(node1@127.0.0.1)2> config:get_float(\"compaction_daemon\", \"snooze_period\", 5.0).\r\n5.0\r\n```\r\n\r\nHence my note that it'd be good to have tests for this change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458302135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458309399","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458309399","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458309399,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMwOTM5OQ==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T21:31:24Z","updated_at":"2019-01-28T21:31:49Z","author_association":"CONTRIBUTOR","body":"@eiri thanks for your feedback; my goal was to support both integers and floats.\r\n\r\nI'm trying to do my best to implement a simple change and try to make CouchDB better, but please take into account that I don't know anything about Erlang. I spent a few hours and I'm still struggling. That's why constructive help (like your code snippets) **is welcome**!\r\n\r\nDo you prefer the `snooze_period` + `snooze_period_ms` option, or a unique `snooze_period` that would accept both integers and floats? (if feasible with the `config` lib?)\r\nAny advice on the best way to implement it?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458309399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458319673","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458319673","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458319673,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMxOTY3Mw==","user":{"login":"ermouth","id":1540047,"node_id":"MDQ6VXNlcjE1NDAwNDc=","avatar_url":"https://avatars.githubusercontent.com/u/1540047?v=4","gravatar_id":"","url":"https://api.github.com/users/ermouth","html_url":"https://github.com/ermouth","followers_url":"https://api.github.com/users/ermouth/followers","following_url":"https://api.github.com/users/ermouth/following{/other_user}","gists_url":"https://api.github.com/users/ermouth/gists{/gist_id}","starred_url":"https://api.github.com/users/ermouth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ermouth/subscriptions","organizations_url":"https://api.github.com/users/ermouth/orgs","repos_url":"https://api.github.com/users/ermouth/repos","events_url":"https://api.github.com/users/ermouth/events{/privacy}","received_events_url":"https://api.github.com/users/ermouth/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T22:03:04Z","updated_at":"2019-01-28T22:03:04Z","author_association":"CONTRIBUTOR","body":"> Is it taking JS longer than 60s to process the document, perhaps? That seems likely...\r\n\r\nAccording to logs JS processing took <1ms (38.326369—38.327145), which is very consistent with my experience about JS rewrites: they are fast. \r\n\r\n60s timeout is a [request timeout](https://github.com/apache/couchdb/blob/33e36254d787b38af7144b37fbb83783723a794a/src/fabric/src/fabric_util.erl#L59), not a special attachments timeout (which is 10min).\r\n\r\nSo I’m pretty sure JS is not the case here, this is smth more interesting.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458319673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458321742","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458321742","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458321742,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMyMTc0Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T22:09:41Z","updated_at":"2019-01-28T22:09:41Z","author_association":"MEMBER","body":"@adrienverge I agree that the best approach would be moving to `snooze_period_ms` here, and removing `snooze_period` from our `default.ini` file at the same time. If `snooze_period` is present in a user's `local.ini` file, that can be supported as a fallback configuration parameter.\r\n\r\nThis would be consistent with a lot of our other config params which are specified in ms, rather than as a float.\r\n\r\nThere's some precedent for \"switch to a new configuration way, support old config approach if still exists\" - see what Jan did here: https://github.com/apache/couchdb/pull/1602 and specifically https://github.com/apache/couchdb/pull/1602/files#diff-083efc44719b2a6e73526a2de5969175R394 or https://github.com/apache/couchdb/pull/1602/files#diff-b8549b33b7019d19458ba8ee619f1373R60","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458321742/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458322027","html_url":"https://github.com/apache/couchdb/issues/1878#issuecomment-458322027","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1878","id":458322027,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODMyMjAyNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-28T22:10:31Z","updated_at":"2019-01-28T22:10:31Z","author_association":"MEMBER","body":"no clue, and don't have time to look any deeper, sorry","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458322027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458504518","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458504518","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458504518,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODUwNDUxOA==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T11:22:15Z","updated_at":"2019-01-29T11:22:15Z","author_association":"CONTRIBUTOR","body":"@wohali thanks a lot for your explanations: a \"smooth migration\" from `snooze_period` to `snooze_period_ms` makes sense.\r\n\r\n→ I introduced a `get_snooze_period()` function as suggested, and changed the commit message and documentation to reflect this \"migration\" to the new config option `snooze_period_ms`.\r\n\r\nAbout tests, I tried to write some, but:\r\n- Current tests in `couch_compaction_daemon.erl` seem to test *runtime behavior* of the compaction daemon -- it looks hard to test that a process waits 0, 3 or 10 seconds between each database compaction.\r\n- I'd like to write a unit (non-runtime) test, that would check the output of `get_snooze_period()` depending on various config inputs. But this function is not exported in `couch/include/couch_db.hrl`, so I can't seem to be able to call it from a test. \r\n\r\nShould I keep trying to write a test? If yes, is there a preferred approach?\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458504518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458587695","html_url":"https://github.com/apache/couchdb/pull/1883#issuecomment-458587695","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1883","id":458587695,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODU4NzY5NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T15:40:36Z","updated_at":"2019-01-29T15:40:36Z","author_association":"MEMBER","body":"We have, apparently, a lot of failing elixir tests...they are more unstable than the old JavaScript ones because we are now trying to do race-y things on a 3-node cluster instead of a single node.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458587695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458625194","html_url":"https://github.com/apache/couchdb/issues/1881#issuecomment-458625194","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1881","id":458625194,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODYyNTE5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T17:12:59Z","updated_at":"2019-01-29T17:12:59Z","author_association":"MEMBER","body":"Can you confirm that you have `[httpd] secure_rewrites = true`? Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458625194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458625957","html_url":"https://github.com/apache/couchdb/issues/1881#issuecomment-458625957","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1881","id":458625957,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODYyNTk1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T17:15:08Z","updated_at":"2019-01-29T17:15:08Z","author_association":"MEMBER","body":"We do have a test for something similar, but it doesn't use wildcards.\r\n\r\nhttps://github.com/apache/couchdb/blob/103a0624f309ea0d796176a55eb5faea68f26047/test/javascript/tests/rewrite.js#L418-L442","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458625957/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458630030","html_url":"https://github.com/apache/couchdb/issues/1881#issuecomment-458630030","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1881","id":458630030,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODYzMDAzMA==","user":{"login":"nkronlage","id":444248,"node_id":"MDQ6VXNlcjQ0NDI0OA==","avatar_url":"https://avatars.githubusercontent.com/u/444248?v=4","gravatar_id":"","url":"https://api.github.com/users/nkronlage","html_url":"https://github.com/nkronlage","followers_url":"https://api.github.com/users/nkronlage/followers","following_url":"https://api.github.com/users/nkronlage/following{/other_user}","gists_url":"https://api.github.com/users/nkronlage/gists{/gist_id}","starred_url":"https://api.github.com/users/nkronlage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nkronlage/subscriptions","organizations_url":"https://api.github.com/users/nkronlage/orgs","repos_url":"https://api.github.com/users/nkronlage/repos","events_url":"https://api.github.com/users/nkronlage/events{/privacy}","received_events_url":"https://api.github.com/users/nkronlage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T17:26:05Z","updated_at":"2019-01-29T17:26:05Z","author_association":"NONE","body":"Yes, this repros with secure_rewrites set to true. You can see the error returned by an insecure rewrite rule under the Expected Behavior section.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458630030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458642199","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458642199","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458642199,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODY0MjE5OQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T17:59:15Z","updated_at":"2019-01-29T17:59:15Z","author_association":"MEMBER","body":"> But maybe it's more \"Erlang-y\" to do like this?\r\n\r\n@adrienverge: It's more of \"implicit vs explicit config\" type of thing, neither approach necessary better or worse and you have a fair point about two attributes controlling the same parameter been confusing. Historically times in Couch's config kept as ints and @wohali idea about deprecating old attribute should take care of the config's ambiguity, so I appreciate you going along with my suggestion.\r\n\r\nNow about the tests. Erlang way of dealing with testing of not exported functions is to add unit tests in the same module within `-ifdef(TEST). ... -endif.` block, there is one at the bottom of `couch_compaction_daemon.erl`.\r\n\r\nHowever the unit testing in Erlang is notorious for its complexity and writing tests around config is even more tricky, because `config` module need to be mocked. I wrote a basic suite for `get_snooze_period/0` feel free to use and modify as necessary.\r\n\r\n```erlang\r\nget_snooze_period_test_() ->\r\n    {\r\n        foreach,\r\n        fun() ->\r\n            meck:new(config, [passthrough])\r\n        end,\r\n        fun(_) ->\r\n            meck:unload()\r\n        end,\r\n        [\r\n            {\"should return default value without config attributes\",\r\n            fun should_default_without_config/0},\r\n            {\"should respect old config attribute\",\r\n            fun should_respect_old_config/0},\r\n            {\"should respect old config set to zero\",\r\n            fun should_respect_old_config_zero/0},\r\n            {\"should respect new config attribute\",\r\n            fun should_respect_new_config/0},\r\n            {\"should respect new config set to zero\",\r\n            fun should_respect_new_config_zero/0}\r\n        ]\r\n    }.\r\n\r\nshould_default_without_config() ->\r\n    ?assertEqual(3000, get_snooze_period()).\r\n\r\nshould_respect_old_config() ->\r\n    meck:expect(config, get_integer, fun\r\n        (\"compaction_daemon\", \"snooze_period\", _) -> 1;\r\n        (_, _, Default) -> Default\r\n    end),\r\n    ?assertEqual(1000, get_snooze_period()).\r\n\r\nshould_respect_old_config_zero() ->\r\n    meck:expect(config, get_integer, fun\r\n        (\"compaction_daemon\", \"snooze_period\", _) -> 0;\r\n        (_, _, Default) -> Default\r\n    end),\r\n    ?assertEqual(0, get_snooze_period()).\r\n\r\nshould_respect_new_config() ->\r\n    meck:expect(config, get_integer, fun\r\n        (\"compaction_daemon\", \"snooze_period\", _) -> 1;\r\n        (\"compaction_daemon\", \"snooze_period_ms\", _) -> 300;\r\n        (_, _, Default) -> Default\r\n    end),\r\n    ?assertEqual(300, get_snooze_period()).\r\n\r\nshould_respect_new_config_zero() ->\r\n    meck:expect(config, get_integer, fun\r\n        (\"compaction_daemon\", \"snooze_period\", _) -> 1;\r\n        (\"compaction_daemon\", \"snooze_period_ms\", _) -> 0;\r\n        (_, _, Default) -> Default\r\n    end),\r\n    ?assertEqual(0, get_snooze_period()).\r\n```\r\n\r\nAs for `couchdb_compaction_daemon_tests.erl` I think we can keep it as it is, just changing to use \"snooze_period_ms\" for consistency's sake.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458642199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458647897","html_url":"https://github.com/apache/couchdb/pull/1883#issuecomment-458647897","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1883","id":458647897,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODY0Nzg5Nw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T18:15:35Z","updated_at":"2019-01-29T18:15:35Z","author_association":"CONTRIBUTOR","body":"> We have, apparently, a lot of failing elixir tests...they are more unstable than the old JavaScript ones because we are now trying to do race-y things on a 3-node cluster instead of a single node.\r\n\r\nBy looking at Jenkins log I see that there are some problems with elixir install. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458647897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458665191","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-458665191","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":458665191,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODY2NTE5MQ==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T19:03:39Z","updated_at":"2019-01-30T10:15:09Z","author_association":"CONTRIBUTOR","body":"Amazing (this way of writing tests is similar to Rust actually).\r\n\r\nI took your tests as is, because they do exactly what needs to be done (no config / only `snooze_period` / `snooze_period_ms` precedence over `snooze_period`). Thanks!\r\n\r\nPull request updated (and rebased on latest master).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458665191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458731132","html_url":"https://github.com/apache/couchdb/pull/1883#issuecomment-458731132","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1883","id":458731132,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODczMTEzMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T22:22:05Z","updated_at":"2019-01-29T22:22:05Z","author_association":"MEMBER","body":"@iilyak Jenkins isn't running Elixir tests yet - it's not in the default targets. Do you mean Travis?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458731132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458731747","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-458731747","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":458731747,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODczMTc0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T22:24:04Z","updated_at":"2019-01-29T22:24:04Z","author_association":"MEMBER","body":"poke @van-mronov @jjrodrig does this issue interest either of you?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458731747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458732164","html_url":"https://github.com/apache/couchdb/pull/1883#issuecomment-458732164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1883","id":458732164,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODczMjE2NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-29T22:25:27Z","updated_at":"2019-01-29T22:25:50Z","author_association":"MEMBER","body":"@iilyak also, see #1735. That needs to be addressed before I will +1 putting Elixir into the `.travis.yml` or `Jenkinsfile` files by making it a part of the default `make check` target.\r\n\r\nOf course, \"addressing\" it might be disabling those tests and only running the partitioned DB tests for now. ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458732164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458763719","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-458763719","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":458763719,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODc2MzcxOQ==","user":{"login":"van-mronov","id":550254,"node_id":"MDQ6VXNlcjU1MDI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/550254?v=4","gravatar_id":"","url":"https://api.github.com/users/van-mronov","html_url":"https://github.com/van-mronov","followers_url":"https://api.github.com/users/van-mronov/followers","following_url":"https://api.github.com/users/van-mronov/following{/other_user}","gists_url":"https://api.github.com/users/van-mronov/gists{/gist_id}","starred_url":"https://api.github.com/users/van-mronov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/van-mronov/subscriptions","organizations_url":"https://api.github.com/users/van-mronov/orgs","repos_url":"https://api.github.com/users/van-mronov/repos","events_url":"https://api.github.com/users/van-mronov/events{/privacy}","received_events_url":"https://api.github.com/users/van-mronov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T00:32:01Z","updated_at":"2019-01-30T00:32:01Z","author_association":"CONTRIBUTOR","body":"@wohali @iilyak sure, I'd gladly deal with this task.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458763719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458809443","html_url":"https://github.com/apache/couchdb/issues/1884#issuecomment-458809443","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1884","id":458809443,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODgwOTQ0Mw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T04:39:48Z","updated_at":"2019-01-30T04:39:48Z","author_association":"MEMBER","body":"What would be the advantage of using Duktape over v8 or Node?\n\n\n\n________________________________\nFrom: Joan Touzet <notifications@github.com>\nSent: Tuesday, January 29, 2019 7:19 PM\nTo: apache/couchdb\nCc: Subscribed\nSubject: [apache/couchdb] Consider Duktape after SpiderMonkey update is complete (#1884)\n\nSummary\n\n#1875<https://github.com/apache/couchdb/issues/1875> is a good step for us in CouchDB 3.0. However, we don't want to lose the good work Paul did on ChakraCore completely. Perhaps we can re-use a bunch of his NIF work for Duktape<https://www.duktape.org/>.\n\nDesired Behaviour\n\n#1875<https://github.com/apache/couchdb/issues/1875> gives us a new couchjs.\n\nIn this ticket, couchjs would go away and all JavaScript handling would be done inside of a NIF.\n\nPossible Solution\nAdditional context\n\nCould improve JS performance significantly.\n\n—\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/1884>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAK9Am93iu3e2V4k_lvSHk20v7LaFdDcks5vIIK2gaJpZM4aYiQj>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458809443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458866651","html_url":"https://github.com/apache/couchdb/pull/1887#issuecomment-458866651","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1887","id":458866651,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODg2NjY1MQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T09:06:37Z","updated_at":"2019-01-30T09:06:37Z","author_association":"CONTRIBUTOR","body":"`USER=foo PASS=bar mix test` works in my environment ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458866651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458942873","html_url":"https://github.com/apache/couchdb/pull/1883#issuecomment-458942873","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1883","id":458942873,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1ODk0Mjg3Mw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T13:27:36Z","updated_at":"2019-01-30T13:27:36Z","author_association":"MEMBER","body":"@iilyak and @wohali I think this branch is now ready to go. So far the tests look pretty stable. It's only running a subset of the elixir tests but these ones seem to be passing. I did have to change one of the tests because of a different md5 hash. \r\n\r\nIn terms of some of the tests not working on windows. Could you run `make elixir` again on Windows. I think it might pass. However I've left the running of the elixir tests out of `make check` so that it doesn't cause any issues with our Jenkins builds.\r\n\r\nI really want to get this in asap for two reasons, all the partition tests are in elixir and currently we not running any of these elixir tests and if that continues the elixir tests will just end up getting forgotten about. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/458942873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459081862","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-459081862","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":459081862,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTA4MTg2Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T19:43:37Z","updated_at":"2019-01-30T19:43:37Z","author_association":"MEMBER","body":"lgtm.\r\n\r\n@adrienverge can you please rebase?\r\n\r\n@wohali are you all right with merging this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459081862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459084014","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-459084014","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":459084014,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTA4NDAxNA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T19:49:59Z","updated_at":"2019-01-30T19:49:59Z","author_association":"MEMBER","body":"Nicely done! Great first contribution @adrienverge!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459084014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459085822","html_url":"https://github.com/apache/couchdb/issues/1890#issuecomment-459085822","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1890","id":459085822,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTA4NTgyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T19:55:21Z","updated_at":"2019-01-30T19:55:21Z","author_association":"MEMBER","body":"@eiri Our minimum Erlang version is 19 now; can you confirm this new syntax is supported all the way back to 19? It looks like it is, but I just want to be sure. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459085822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459086857","html_url":"https://github.com/apache/couchdb/issues/1884#issuecomment-459086857","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1884","id":459086857,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTA4Njg1Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T19:58:24Z","updated_at":"2019-01-30T19:58:24Z","author_association":"MEMBER","body":"@garrensmith Per @davisp V8 is single thread per OS process, so we can't NIF it efficiently. This would be NIF-able.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459086857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459093626","html_url":"https://github.com/apache/couchdb/issues/1890#issuecomment-459093626","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1890","id":459093626,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTA5MzYyNg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T20:19:23Z","updated_at":"2019-01-30T20:19:23Z","author_association":"MEMBER","body":"@wohali yes, `element/2` and `apply/3` are going back as far as OTP R10 at lease and the change snippet itself is pretty much what compiler does for the tuple calls behind the scene when flag `tuple_calls` is set. The flag itself was added in OTP 21 for back compatibility and @nickva set it in #1640. We have until OTP 24 until this back compatibility removed.\r\n\r\nThere are an option not to use somehow obscure `apply` dance, but just call `mochiweb_request` directly, i.e. instead of `RawUri = MochiReq:get(raw_path),` do `RawUri = mochiweb_request:get(raw_path, MochiReq),`, but it depends on how mochiweb is going to address removing tuple calls, they may introduce now module as a frontend or start requiring `parse_transform` in style of `lager`. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459093626/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459114622","html_url":"https://github.com/apache/couchdb/issues/1890#issuecomment-459114622","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1890","id":459114622,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTExNDYyMg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-30T21:23:27Z","updated_at":"2019-01-30T21:23:27Z","author_association":"CONTRIBUTOR","body":"`mochiweb_request:get(raw_path, MochiReq)` might end up being the official API. But I think we should wait for mochiweb to update it's API. Which, if it decides on the above format, would just mean switching all its examples and docs (if it has any) to say from now on the official API is `mochiweb_request:<function>(...., MochiReq)` and call it a 3.x release.\r\n\r\nBut I suspect that's at least a few years away.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459114622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459261262","html_url":"https://github.com/apache/couchdb/pull/1880#issuecomment-459261262","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1880","id":459261262,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTI2MTI2Mg==","user":{"login":"adrienverge","id":5244945,"node_id":"MDQ6VXNlcjUyNDQ5NDU=","avatar_url":"https://avatars.githubusercontent.com/u/5244945?v=4","gravatar_id":"","url":"https://api.github.com/users/adrienverge","html_url":"https://github.com/adrienverge","followers_url":"https://api.github.com/users/adrienverge/followers","following_url":"https://api.github.com/users/adrienverge/following{/other_user}","gists_url":"https://api.github.com/users/adrienverge/gists{/gist_id}","starred_url":"https://api.github.com/users/adrienverge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adrienverge/subscriptions","organizations_url":"https://api.github.com/users/adrienverge/orgs","repos_url":"https://api.github.com/users/adrienverge/repos","events_url":"https://api.github.com/users/adrienverge/events{/privacy}","received_events_url":"https://api.github.com/users/adrienverge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T08:38:53Z","updated_at":"2019-01-31T08:39:05Z","author_association":"CONTRIBUTOR","body":"Thanks for your help on this!\r\n\r\nFor info, I tried to update docs accordingly: https://github.com/apache/couchdb-documentation/pull/386","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459261262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459340491","html_url":"https://github.com/apache/couchdb/pull/1888#issuecomment-459340491","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1888","id":459340491,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTM0MDQ5MQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T13:17:54Z","updated_at":"2019-01-31T13:17:54Z","author_association":"MEMBER","body":"The check formatter (mix 1.8.0) fails on `test_helper.exs` changes, insist on config to look like\r\n```diff\r\n@@ -1,3 +1,7 @@\r\n-ExUnit.configure(exclude: [pending: true], formatters: [JUnitFormatter, ExUnit.CLIFormatter])\r\n+ExUnit.configure(\r\n+  exclude: [pending: true],\r\n+  formatters: [JUnitFormatter, ExUnit.CLIFormatter]\r\n+)\r\n+\r\n```\r\n\r\nCredo fails with `[R] ↗ Variable names should be written in snake_case.` for `lib/couch.ex:58:5 #(Couch.process_url)`, sorry no idea how to fix this, so can't actually run the tests.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459340491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459401494","html_url":"https://github.com/apache/couchdb/issues/1891#issuecomment-459401494","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1891","id":459401494,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQwMTQ5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T16:07:44Z","updated_at":"2019-01-31T17:29:16Z","author_association":"MEMBER","body":"@ondra-novak I think this is a duplicate of @janl 's `_access` proposal, see https://github.com/apache/couchdb/issues/1524 and specifically https://lists.apache.org/thread.html/6aa77dd8e5974a3a540758c6902ccb509ab5a2e4802ecf4fd724a5e4@%3Cdev.couchdb.apache.org%3E . \r\n\r\nSignificant progress has been made on this proposal in just the last few weeks. \r\n\r\nEdited to add: I realize your proposal is different, but `_access` is probably farther along than you realize, and I wouldn't want you to dig deeply into coding this just to have to fight out whose PR lands. I've nudged @janl to see if he can update the list / a GH issue somewhere as to the work he's doing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459401494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459402194","html_url":"https://github.com/apache/couchdb/issues/1892#issuecomment-459402194","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1892","id":459402194,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQwMjE5NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T16:09:29Z","updated_at":"2019-01-31T16:09:29Z","author_association":"MEMBER","body":"Hi there,\r\n\r\nThis is not a CouchDB bug. GitHub is for actual CouchDB bugs only.\r\n\r\nIf you are looking for general support with using CouchDB, please try one of these other options:\r\n\r\n* The user mailing list. Signup instructions are [here](http://couchdb.apache.org/#mailing-lists)\r\n* The Slack/IRC chat room. Joining instructions are [here](http://couchdb.apache.org/#chat)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459402194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459426972","html_url":"https://github.com/apache/couchdb/pull/1888#issuecomment-459426972","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1888","id":459426972,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQyNjk3Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T17:13:49Z","updated_at":"2019-01-31T17:13:49Z","author_association":"MEMBER","body":"@garrensmith This might be something we want to piece into the top-level `Jenkinsfile`, not sure.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459426972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459428244","html_url":"https://github.com/apache/couchdb/pull/1888#issuecomment-459428244","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1888","id":459428244,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQyODI0NA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T17:17:22Z","updated_at":"2019-01-31T17:17:22Z","author_association":"MEMBER","body":"Yes. I think it would work perfectly there\n\n\n________________________________\nFrom: Joan Touzet <notifications@github.com>\nSent: Thursday, January 31, 2019 7:13 PM\nTo: apache/couchdb\nCc: garren smith; Mention\nSubject: Re: [apache/couchdb] Add junit formatter to the elixir tests (#1888)\n\n\n@garrensmith<https://github.com/garrensmith> This might be something we want to piece into the top-level Jenkinsfile, not sure.\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/pull/1888#issuecomment-459426972>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAK9AqTBjSOCXESO5yyejvEhWJH2NqfUks5vIyROgaJpZM4aaQh0>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459428244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459431431","html_url":"https://github.com/apache/couchdb/issues/1891#issuecomment-459431431","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1891","id":459431431,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQzMTQzMQ==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T17:26:15Z","updated_at":"2019-01-31T17:26:15Z","author_association":"NONE","body":"Hi, so I read the janl's proposal complete and ... let's say, it is not exactly duplicated. And I can also see the reason, why I couldn't find it, because it is trying to solve a different issue - but looks similar.\r\n\r\nBefore I started to write to anything to the issue tracker, I tried to find the simplest proposal to implement, because I already know, that time of developers is very expensive. The janl's proposal seems much much difficult to implement (from my point of view, it introduces a new indices, need to rewrite a large part of view generation etc) and I am also worrying about final performance. \r\n\r\nQuestion is whether it is need to **hide the document** or to **hide the content of the document**. My proposal just require to hide the content of the document, while the document still can be found and check its existence. The janl's proposal is following a way to a \"virtual db\". Isn't this a little overkill?\r\n\r\n_access keyword is seems similar to my _security keyword (just a name). The original _access doesn't seem to distinguish between user name and role, but this is only difference. I dont see a problem to addapt this form. However I can see much easier to use this keyword or \"a rule\" to control just output without need to affect many core features of the couchdb.\r\n\r\nJust my opinion.\r\n\r\nHave nice day\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459431431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459439095","html_url":"https://github.com/apache/couchdb/issues/1891#issuecomment-459439095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1891","id":459439095,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQzOTA5NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T17:47:44Z","updated_at":"2019-01-31T17:47:44Z","author_association":"MEMBER","body":"@ondra-novak I have no opinion on the merits of your proposal vs. Jan's. I am only observing that both of your proposals probably can't land at the same time in this project.\r\n\r\nI also note that we have a very clear need to replace the db-per-user approach with something more performant, and `_access` solves that problem (along with the partitioned DB work that has just landed).\r\n\r\nIf his approach is a superset of your approach, why write something that will be superceded by a more powerful feature?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459439095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459467765","html_url":"https://github.com/apache/couchdb/pull/1894#issuecomment-459467765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1894","id":459467765,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTQ2Nzc2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T19:10:05Z","updated_at":"2019-01-31T19:10:05Z","author_association":"MEMBER","body":"@garrensmith unfortunately we've got a lot of failures in Jenkins.\r\n\r\nIgnoring the eunit failures, we have 2 types of Elixir failures:\r\n\r\nOne type is on the partition tests:\r\n* https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/45#step-125-log-2576\r\n* https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/46#step-123-log-2600\r\n\r\nThe other is the general test suite:\r\n* https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/48#step-129-log-2659\r\n\r\nCan you help? Thanks.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459467765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459500187","html_url":"https://github.com/apache/couchdb/issues/1891#issuecomment-459500187","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1891","id":459500187,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTUwMDE4Nw==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T20:46:25Z","updated_at":"2019-01-31T20:46:25Z","author_association":"NONE","body":"I obviously don't know anything about your plans or roadmap. I am just using latest version of CouchDB for my project, and trying to solve some issue.  I've just tried to suggest something less complicated which could solve my issue.\r\n\r\nSo if the \"_access\" feature is being implemented or is already implemented, I cannot say anything against it.   So we can close this issue and i am looking forward to seeing that feature in a stable version.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459500187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459552954","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-459552954","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":459552954,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTU1Mjk1NA==","user":{"login":"van-mronov","id":550254,"node_id":"MDQ6VXNlcjU1MDI1NA==","avatar_url":"https://avatars.githubusercontent.com/u/550254?v=4","gravatar_id":"","url":"https://api.github.com/users/van-mronov","html_url":"https://github.com/van-mronov","followers_url":"https://api.github.com/users/van-mronov/followers","following_url":"https://api.github.com/users/van-mronov/following{/other_user}","gists_url":"https://api.github.com/users/van-mronov/gists{/gist_id}","starred_url":"https://api.github.com/users/van-mronov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/van-mronov/subscriptions","organizations_url":"https://api.github.com/users/van-mronov/orgs","repos_url":"https://api.github.com/users/van-mronov/repos","events_url":"https://api.github.com/users/van-mronov/events{/privacy}","received_events_url":"https://api.github.com/users/van-mronov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-31T23:56:32Z","updated_at":"2019-01-31T23:56:32Z","author_association":"CONTRIBUTOR","body":"@wohali @iilyak so, do we already know which tests are `single_node`, etc?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459552954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459647471","html_url":"https://github.com/apache/couchdb/issues/1892#issuecomment-459647471","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1892","id":459647471,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY0NzQ3MQ==","user":{"login":"tecnicoibex","id":47186832,"node_id":"MDQ6VXNlcjQ3MTg2ODMy","avatar_url":"https://avatars.githubusercontent.com/u/47186832?v=4","gravatar_id":"","url":"https://api.github.com/users/tecnicoibex","html_url":"https://github.com/tecnicoibex","followers_url":"https://api.github.com/users/tecnicoibex/followers","following_url":"https://api.github.com/users/tecnicoibex/following{/other_user}","gists_url":"https://api.github.com/users/tecnicoibex/gists{/gist_id}","starred_url":"https://api.github.com/users/tecnicoibex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tecnicoibex/subscriptions","organizations_url":"https://api.github.com/users/tecnicoibex/orgs","repos_url":"https://api.github.com/users/tecnicoibex/repos","events_url":"https://api.github.com/users/tecnicoibex/events{/privacy}","received_events_url":"https://api.github.com/users/tecnicoibex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T08:39:05Z","updated_at":"2019-02-01T08:40:21Z","author_association":"NONE","body":"Do is not a bug? really? read -> https://github.com/apache/couchdb/issues/1579","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459647471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459648857","html_url":"https://github.com/apache/couchdb/pull/1894#issuecomment-459648857","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1894","id":459648857,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY0ODg1Nw==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T08:45:04Z","updated_at":"2019-02-01T08:45:04Z","author_association":"MEMBER","body":"Sure. I'll take a look next week.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459648857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459677061","html_url":"https://github.com/apache/couchdb/issues/1876#issuecomment-459677061","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1876","id":459677061,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY3NzA2MQ==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T10:26:59Z","updated_at":"2019-02-01T10:26:59Z","author_association":"NONE","body":"I found \"function_clause\" error when you are trying to put different document with same revision id. It is some sort of \"second level conflict\". This exception is not correctly handled, and causes crash of the request.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459677061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459678635","html_url":"https://github.com/apache/couchdb/issues/1876#issuecomment-459678635","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1876","id":459678635,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY3ODYzNQ==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T10:32:16Z","updated_at":"2019-02-01T10:32:16Z","author_association":"NONE","body":"When new_edits=false is used, you should always include _revisions key into the document. This is not correctly documented. You can see format of this field here for example:\r\n\r\nhttps://docs.couchdb.org/en/stable/api/document/common.html?highlight=_revisions#getting-a-list-of-revisions","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459678635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459681878","html_url":"https://github.com/apache/couchdb/issues/1882#issuecomment-459681878","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1882","id":459681878,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY4MTg3OA==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T10:44:27Z","updated_at":"2019-02-01T10:44:27Z","author_association":"NONE","body":"Don't use _uuids and create own uuids offline. \r\n\r\nI am using this code (javascript)\r\n\r\n```\r\nvar genUID=function(prefix) {\r\n\t\"use strict\";\r\n\r\n\tvar CHARSET = \"0123456789aAbBcCdDeEfFgGhHiIjJkKlLmMnNoOpPqQrRsStTuUvVwWxXyYzZ\".split(\"\");\r\n\tvar maxrand = Math.pow(2,23);\r\n\r\n\tvar encode = function(int) {\r\n\t    var res = \"\";\r\n\t    while (int > 0) {\r\n\t    \tvar z = Math.floor(int/62.0);\r\n\t    \tvar x = Math.floor(int-z*62.0);\r\n\t        res = CHARSET[x] + res;\r\n\t        int = z;\r\n\t    }\r\n\t    return res;\r\n\t};\r\n\r\n\t\r\n\tvar s1 = prefix?prefix:\"\";\r\n\tvar s2 = encode(Date.now());\r\n\tvar a = new Uint32Array(2);\r\n\twindow.crypto.getRandomValues(a);\r\n\tvar s3 = encode((a[0] & 0x7FFFFFFF)| 0x40000000);\r\n\tvar s4 = encode((a[1] & 0x7FFFFFFF)| 0x40000000);\r\n\t\r\n\t\r\n\treturn s1+s2+s3+s4;\r\n\t\r\n};\r\n```\r\n\r\nExample of result: \"ICBbwoG26hEY61z1GjA\"\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459681878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459696021","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-459696021","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":459696021,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTY5NjAyMQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T11:40:30Z","updated_at":"2019-02-01T11:40:30Z","author_association":"CONTRIBUTOR","body":"I don't know from the top of my head but it is easy to figure out.\r\n\r\n1. one of the signs for tags is if we start tests differently https://github.com/apache/couchdb/blob/master/Makefile#L211\r\n2. tests which require single node setup fail when `dev/lib` is present\r\n  - run dev cluster for few seconds (we just need it let to join) `dev/run --admin=adm:pass`\r\n  - stop the cluster `CTRL+C`\r\n  - modify Makefile so `devclean` is not called for elixir tests\r\n     - add @echo on https://github.com/apache/couchdb/blob/master/Makefile#L473 line\r\n  - run elixir tests and check which ones fail\r\n    - `make elixir`\r\n    - `make elixir-cluster-without-quorum`\r\n    - `make elixir-cluster-with-quorum`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459696021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459785476","html_url":"https://github.com/apache/couchdb/issues/1892#issuecomment-459785476","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1892","id":459785476,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTc4NTQ3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T16:41:22Z","updated_at":"2019-02-01T16:41:22Z","author_association":"MEMBER","body":"@carlosibex You upgraded, so you are no longer running into that bug.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459785476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459788048","html_url":"https://github.com/apache/couchdb/issues/1876#issuecomment-459788048","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1876","id":459788048,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTc4ODA0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T16:48:50Z","updated_at":"2019-02-01T16:48:50Z","author_association":"MEMBER","body":"Kindly open a new issue at https://github.com/apache/couchdb-documentation for the docs bug? Thanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459788048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459788540","html_url":"https://github.com/apache/couchdb/issues/1896#issuecomment-459788540","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1896","id":459788540,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTc4ODU0MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T16:50:18Z","updated_at":"2019-02-01T16:50:18Z","author_association":"MEMBER","body":"No, this feature is only used for our JavaScript test suite, which is being converted at the moment to Elixir.\r\n\r\nOnce that test suite is converted, this feature will be removed.\r\n\r\nUsing CouchHTTP to perform external requests from within the CouchDB runtime is considered a violation of the view server contract.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459788540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459789925","html_url":"https://github.com/apache/couchdb/issues/1735#issuecomment-459789925","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1735","id":459789925,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTc4OTkyNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T16:54:33Z","updated_at":"2019-02-01T16:54:33Z","author_association":"MEMBER","body":"From #1894:\r\n\r\n>Unfortunately we've got a lot of failures in Jenkins.\r\n>\r\n>Ignoring the eunit failures, we have 2 types of Elixir failures:\r\n>\r\n>One type is on the partition tests:\r\n>\r\n>    https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/45#step-125-log-2576\r\n>    https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/46#step-123-log-2600\r\n>\r\n>The other is the general test suite:\r\n>\r\n>    https://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/48#step-129-log-2659\r\n\r\n@garrensmith I'm moving this issue over here off of the PR because I'm going to merge the PR. Thanks for your help when you have time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459789925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459813501","html_url":"https://github.com/apache/couchdb/issues/1735#issuecomment-459813501","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1735","id":459813501,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTgxMzUwMQ==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T18:07:00Z","updated_at":"2019-02-01T18:07:00Z","author_association":"MEMBER","body":"Great. I’ll dive into it next week.\n\n\n________________________________\nFrom: Joan Touzet <notifications@github.com>\nSent: Friday, February 1, 2019 6:54 PM\nTo: apache/couchdb\nCc: garren smith; Mention\nSubject: Re: [apache/couchdb] Multiple Elixir failing tests intermittently (#1735)\n\n\nFrom #1894<https://github.com/apache/couchdb/pull/1894>:\n\nUnfortunately we've got a lot of failures in Jenkins.\n\nIgnoring the eunit failures, we have 2 types of Elixir failures:\n\nOne type is on the partition tests:\n\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/45#step-125-log-2576\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/46#step-123-log-2600\n\nThe other is the general test suite:\n\nhttps://builds.apache.org/blue/organizations/jenkins/CouchDB/detail/jenkins-fix/1/pipeline/48#step-129-log-2659\n\n@garrensmith<https://github.com/garrensmith> I'm moving this issue over here off of the PR because I'm going to merge the PR. Thanks for your help when you have time.\n\n—\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://github.com/apache/couchdb/issues/1735#issuecomment-459789925>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AAK9AlsrxCxJrw554b8NCPcbxq7YcogOks5vJHFKgaJpZM4YcLPR>.\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459813501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459815210","html_url":"https://github.com/apache/couchdb/issues/1735#issuecomment-459815210","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1735","id":459815210,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTgxNTIxMA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-01T18:11:46Z","updated_at":"2019-02-01T18:11:46Z","author_association":"MEMBER","body":"More failures:\r\n\r\nhttps://travis-ci.org/apache/couchdb/jobs/487532123\r\n\r\n```\r\nPartitionDDocTest\r\n  * test PUT /dbname/_design/foo to update (113.0ms)\r\n  * test DELETE /dbname/_design/foo (128.7ms)\r\n  * test GET /dbname/_design_docs (71.8ms)\r\n  1) test GET /dbname/_design_docs (PartitionDDocTest)\r\n     test/partition_ddoc_test.exs:159\r\n     Assertion with == failed\r\n     code:  assert length(body[\"rows\"]) == 1\r\n     left:  0\r\n     right: 1\r\n     stacktrace:\r\n       test/partition_ddoc_test.exs:168: (test)\r\n```\r\n\r\nhttps://travis-ci.org/apache/couchdb/jobs/487532122\r\n\r\n```\r\nDelayedCommitsTest\r\n  * test delayed commit (15193.5ms)\r\n  1) test delayed commit (DelayedCommitsTest)\r\n     test/delayed_commits_test.exs:16\r\n     Assertion with == failed\r\n     code:  assert resp.status_code() == 200\r\n     left:  500\r\n     right: 200\r\n     stacktrace:\r\n       (elixir) lib/enum.ex:737: Enum.\"-each/2-lists^foreach/1-0-\"/2\r\n       (elixir) lib/enum.ex:737: Enum.each/2\r\n       (ex_unit) lib/ex_unit/on_exit_handler.ex:140: ExUnit.OnExitHandler.exec_callback/1\r\n       (ex_unit) lib/ex_unit/on_exit_handler.ex:126: ExUnit.OnExitHandler.on_exit_runner_loop/0\r\n```\r\n\r\nhttps://travis-ci.org/apache/couchdb/jobs/487532121\r\n```\r\nBulkDocsTest\r\n  * test bulk docs supplies `id` if not provided in doc (497.0ms)\r\n  * test bulk docs raises error for invlaid `new_edits` parameter (334.6ms)\r\n  * test bulk docs raises error for invlaid `docs` parameter (238.1ms)\r\n  * test bulk docs can create, update, & delete many docs per request (396.6ms)\r\n  * test bulk docs emits conflict error for duplicate doc `_id`s (384.0ms)\r\n  * test bulk docs raises conflict error for combined update & delete (471.8ms)\r\n  * test bulk docs can detect conflicts (515.8ms)\r\n  1) test bulk docs can detect conflicts (BulkDocsTest)\r\n     test/bulk_docs_test.exs:47\r\n     Expected 201 and the same number of response rows as in request, but got\r\n     %HTTPotion.Response{\r\n       body: [\r\n         %{\r\n           \"accepted\" => true,\r\n           \"id\" => \"1\",\r\n           \"ok\" => true,\r\n           \"rev\" => \"2-59422af42db146a6a87b76e5edbeeb44\"\r\n         },\r\n         %{\r\n           \"id\" => \"2\",\r\n           \"ok\" => true,\r\n           \"rev\" => \"2-0450643c5eb507fee080a4298e102c9a\"\r\n         },\r\n         %{\r\n           \"id\" => \"3\",\r\n           \"ok\" => true,\r\n           \"rev\" => \"2-7c9bd31172bbb3d4097fa45e3a6e2c85\"\r\n         },\r\n         %{\r\n           \"id\" => \"4\",\r\n           \"ok\" => true,\r\n           \"rev\" => \"2-2fd866cc031a23ac8ccccb49952a2666\"\r\n         },\r\n         %{\r\n           \"id\" => \"5\",\r\n           \"ok\" => true,\r\n           \"rev\" => \"2-3af34b0749ed8322340556d497581836\"\r\n         }\r\n       ],\r\n       headers: %HTTPotion.Headers{\r\n         hdrs: %{\r\n           \"cache-control\" => \"must-revalidate\",\r\n           \"content-length\" => \"338\",\r\n           \"content-type\" => \"application/json\",\r\n           \"date\" => \"Fri, 01 Feb 2019 17:40:04 GMT\",\r\n           \"server\" => \"CouchDB/2.3.0-0843bd1 (Erlang OTP/21)\",\r\n           \"x-couch-request-id\" => \"e75bb02703\",\r\n           \"x-couchdb-body-time\" => \"0\"\r\n         }\r\n       },\r\n       status_code: 202\r\n     }\r\n     \r\n     code: resp = bulk_post(docs, db)\r\n     stacktrace:\r\n       test/bulk_docs_test.exs:131: BulkDocsTest.bulk_post/2\r\n       test/bulk_docs_test.exs:59: (test)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459815210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459966935","html_url":"https://github.com/apache/couchdb/issues/1896#issuecomment-459966935","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1896","id":459966935,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1OTk2NjkzNQ==","user":{"login":"ondra-novak","id":9439234,"node_id":"MDQ6VXNlcjk0MzkyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/9439234?v=4","gravatar_id":"","url":"https://api.github.com/users/ondra-novak","html_url":"https://github.com/ondra-novak","followers_url":"https://api.github.com/users/ondra-novak/followers","following_url":"https://api.github.com/users/ondra-novak/following{/other_user}","gists_url":"https://api.github.com/users/ondra-novak/gists{/gist_id}","starred_url":"https://api.github.com/users/ondra-novak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ondra-novak/subscriptions","organizations_url":"https://api.github.com/users/ondra-novak/orgs","repos_url":"https://api.github.com/users/ondra-novak/repos","events_url":"https://api.github.com/users/ondra-novak/events{/privacy}","received_events_url":"https://api.github.com/users/ondra-novak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-02T13:54:56Z","updated_at":"2019-02-02T13:54:56Z","author_association":"NONE","body":"Thank you for closing this very fast without going deeper into the question. I wanted to use this feature to run external process for conflict resolution or do  some other related tasks on servers (like a os_daemon, or started as service) - a maintenance for a couchdb database. Definitely not for views. The idea was to use simple JS engine which is already included into couchdb product. With http bindings, I can easily read/modify documents and listen for _changes. So question was, whether the option -H will be removed in future versions. It would be a pity, because the maintenance is part of database (at least to resolve conflicts) and couchdb offers weak or no support for such process. \r\n\r\nYes, I can install node.js.\r\n\r\nOr i can replace couchjs by node.js (?)\r\n\r\nSo with node.js, is couchjs useful any more?\r\n\r\nThank you, have nice day.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/459966935/reactions","total_count":1,"+1":0,"-1":1,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460003716","html_url":"https://github.com/apache/couchdb/issues/1884#issuecomment-460003716","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1884","id":460003716,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDAwMzcxNg==","user":{"login":"akircher","id":5734777,"node_id":"MDQ6VXNlcjU3MzQ3Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5734777?v=4","gravatar_id":"","url":"https://api.github.com/users/akircher","html_url":"https://github.com/akircher","followers_url":"https://api.github.com/users/akircher/followers","following_url":"https://api.github.com/users/akircher/following{/other_user}","gists_url":"https://api.github.com/users/akircher/gists{/gist_id}","starred_url":"https://api.github.com/users/akircher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akircher/subscriptions","organizations_url":"https://api.github.com/users/akircher/orgs","repos_url":"https://api.github.com/users/akircher/repos","events_url":"https://api.github.com/users/akircher/events{/privacy}","received_events_url":"https://api.github.com/users/akircher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-02T22:14:25Z","updated_at":"2019-02-02T22:14:25Z","author_association":"NONE","body":"I don't know about how important being NIF-able is.  But I would like https://github.com/denoland/deno to also be considered.  It's like node.js but better sandboxed and is more modern and Web API compatible ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460003716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460012912","html_url":"https://github.com/apache/couchdb/issues/1896#issuecomment-460012912","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1896","id":460012912,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDAxMjkxMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-03T00:52:58Z","updated_at":"2019-02-03T00:52:58Z","author_association":"MEMBER","body":"Leave your sarcasm out of the ticket please.\r\n\r\nWe have no intent to support any use for `couchjs` outside of its current uses by CouchDB itself. It was never intended to be used as a standalone JS interpreter for anything.\r\n\r\nThe answer to your question is: if  `couchjs` is replaced by an in-process JS daemon, then yes, that flag will vanish because there will be no external process anymore.\r\n\r\nThe answer is also: once the JavaScript views are gone, the `-H` flag will also be removed, because it removes our build-time dependency on `libcurl`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460012912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460012954","html_url":"https://github.com/apache/couchdb/issues/1884#issuecomment-460012954","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1884","id":460012954,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDAxMjk1NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-03T00:54:07Z","updated_at":"2019-02-03T00:54:35Z","author_association":"MEMBER","body":"@akircher This ticket is only about NIF-able engines. While `deno` has some sandboxing, we're content to stay with SpiderMonkey for an external process.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460012954/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460064509","html_url":"https://github.com/apache/couchdb/issues/1891#issuecomment-460064509","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1891","id":460064509,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDA2NDUwOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-03T16:08:28Z","updated_at":"2019-02-03T16:08:28Z","author_association":"MEMBER","body":"@ondra-novak heya, I am working on implementing _access and haven’t yet been very open about the progress. I’ll update 1524 soonish. I’ll take your issue here as another vote that a feature like this is very needed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460064509/reactions","total_count":6,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460075516","html_url":"https://github.com/apache/couchdb/issues/1884#issuecomment-460075516","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1884","id":460075516,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDA3NTUxNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-03T18:25:36Z","updated_at":"2019-02-03T18:25:36Z","author_association":"MEMBER","body":"I looked at Duktape once but it seemed to not support a lot of JavaScript features according to [1]. Though I haven't got a clue on how much of that is stuff that would actually be used in the context of CouchDB.\r\n\r\n[1] https://kangax.github.io/compat-table/es6/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460075516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460083652","html_url":"https://github.com/apache/couchdb/issues/1554#issuecomment-460083652","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1554","id":460083652,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDA4MzY1Mg==","user":{"login":"garbados","id":883103,"node_id":"MDQ6VXNlcjg4MzEwMw==","avatar_url":"https://avatars.githubusercontent.com/u/883103?v=4","gravatar_id":"","url":"https://api.github.com/users/garbados","html_url":"https://github.com/garbados","followers_url":"https://api.github.com/users/garbados/followers","following_url":"https://api.github.com/users/garbados/following{/other_user}","gists_url":"https://api.github.com/users/garbados/gists{/gist_id}","starred_url":"https://api.github.com/users/garbados/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garbados/subscriptions","organizations_url":"https://api.github.com/users/garbados/orgs","repos_url":"https://api.github.com/users/garbados/repos","events_url":"https://api.github.com/users/garbados/events{/privacy}","received_events_url":"https://api.github.com/users/garbados/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-03T20:07:00Z","updated_at":"2019-02-03T20:07:00Z","author_association":"CONTRIBUTOR","body":"@garrensmith That's very much appreciated. I'd love for some pointers on which files will contain pertinent code, functions I might have to edit or copy, etc. Otherwise I'm just stumbling through the source and hitting my local couch with requests, hoping the responses change in response to my actions.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460083652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460289249","html_url":"https://github.com/apache/couchdb/issues/1900#issuecomment-460289249","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1900","id":460289249,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDI4OTI0OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T15:25:07Z","updated_at":"2019-02-04T15:25:07Z","author_association":"MEMBER","body":"Hi @matticala the Helm chart is seeing plenty of regular updates directly upstream:\r\n\r\nhttps://github.com/helm/charts/commits/master/incubator/couchdb\r\n\r\nLooking back at the original feature in #1658, I configured things so that the node-local databases would get replicated. That's `_nodes`, `_dbs`, and `_users` by default. So if you're not seeing `_nodes` on the new node, *and* the status in the `_up` endpoint claims seeding is complete, that's a bug.\r\n\r\nDatabases like `_metadata` and `_replicator` are a different story. I didn't do anything with them in the seedlist feature, so they would still need to be created. I can imagine that we could figure out a way to automate that as part of the original StatefulSet deployment in Helm, but I haven't done it. I don't think we're at a place where we would do any rebalancing of those databases on cluster scaling events yet.\r\n\r\nI imagine this seedlist feature could be better integrated with the Fauxton cluster setup. I don't regularly use that feature and so it just wasn't top of mind for me. We could do better there, e.g. at least recognizing that a seedlist exists, checking the status, and then jumping to the appropriate phase of the setup.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460289249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460294446","html_url":"https://github.com/apache/couchdb/issues/1900#issuecomment-460294446","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1900","id":460294446,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDI5NDQ0Ng==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T15:38:27Z","updated_at":"2019-02-04T15:38:27Z","author_association":"NONE","body":"Hi @kocolosk,\r\n\r\nI can't see `_nodes` even in the seed node, the first one going up. Basically the whole cluster, freshly created, has no database. It's completely empty and Fauxton show the possibility to Setup Cluster or Single Node.\r\nQuerying the `_membership` endpoint though returns the node list.\r\nWhen manually doing the Setup Cluster only `_global_changes` is created, if I remember correctly.\r\n\r\nI was thinking to use `lifecycle` handlers for `postStart` (to `PUT` nodes) and `preStop` (to remove the terminated node), injecting them from a ConfigMap, instead of the sidecar. Have you tried it?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460294446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460296680","html_url":"https://github.com/apache/couchdb/issues/1900#issuecomment-460296680","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1900","id":460296680,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDI5NjY4MA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T15:44:13Z","updated_at":"2019-02-04T15:44:13Z","author_association":"MEMBER","body":"Note that `_nodes` is a local database, it won't show up in the clustered endpoint. Did you check the node-local endpoint on port 5986? Each node automatically creates this database on its own; the seedlist feature just ensures they all agree on the content 😄 \r\n\r\nI haven't tried the `postStart` handler for this purpose but that is what I had in mind 👍 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460296680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460299543","html_url":"https://github.com/apache/couchdb/issues/1900#issuecomment-460299543","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1900","id":460299543,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDI5OTU0Mw==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-04T15:51:31Z","updated_at":"2019-02-04T15:51:31Z","author_association":"NONE","body":"@kocolosk true, I haven't tried on 5986. I tried per-node but on 5984.\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460299543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460521622","html_url":"https://github.com/apache/couchdb/pull/1901#issuecomment-460521622","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1901","id":460521622,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDUyMTYyMg==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T05:51:14Z","updated_at":"2019-02-05T05:51:14Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\n```\r\n$ make eunit skip_deps+=couch_epi apps=couch suites=couch_db_doc_tests\r\n\r\nmodule 'couch_db_doc_tests'\r\n  CouchDB doc tests\r\n    couch_db_doc_tests:60: should_truncate_number_of_revisions...ok\r\n    couch_db_doc_tests:73: should_raise_bad_request_on_invalid_rev (foo)...ok\r\n    couch_db_doc_tests:75: should_raise_bad_request_on_invalid_rev (a-foo)...ok\r\n    couch_db_doc_tests:77: should_raise_bad_request_on_invalid_rev (1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx)...ok\r\n=======================================================\r\n  All 4 tests passed.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460521622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460524709","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-460524709","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":460524709,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDUyNDcwOQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T06:08:42Z","updated_at":"2019-02-05T06:08:42Z","author_association":"CONTRIBUTOR","body":"In #1781 @wohali writes:\r\n> if you use the cluster setup wizard to create admin users on new nodes in the cluster, the created admin user will not use an identical salt on every node\r\n\r\nThis code, even without the changes to salt in couch_passwords.erl, might still be useful in that it would sync the admin passwords in the \"direct\" setup scenario. And speaking of which, that is presumably the scenario fauxton is using, since if it were using the (documented)[http://docs.couchdb.org/en/latest/setup/cluster.html#the-cluster-setup-api] \"remote\" scenario, those admin hashes should be the same on all nodes.  I looked through the fauxton source, but am not yet proficient enough with that code to determine which of the two setup scenarios it is actually using. Identifying these files as potentially relevant is about as far as I've delved:\r\n\r\n- https://github.com/apache/couchdb-fauxton/blob/master/app/addons/setup/components/MultipleNodeController.js\r\n- https://github.com/apache/couchdb-fauxton/blob/master/app/addons/setup/container/MultipleNodeContainer.js\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460524709/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460539602","html_url":"https://github.com/apache/couchdb/pull/1901#issuecomment-460539602","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1901","id":460539602,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDUzOTYwMg==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T07:32:41Z","updated_at":"2019-02-05T07:32:41Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460539602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460548251","html_url":"https://github.com/apache/couchdb/pull/470#issuecomment-460548251","issue_url":"https://api.github.com/repos/apache/couchdb/issues/470","id":460548251,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDU0ODI1MQ==","user":{"login":"badbod99","id":7858558,"node_id":"MDQ6VXNlcjc4NTg1NTg=","avatar_url":"https://avatars.githubusercontent.com/u/7858558?v=4","gravatar_id":"","url":"https://api.github.com/users/badbod99","html_url":"https://github.com/badbod99","followers_url":"https://api.github.com/users/badbod99/followers","following_url":"https://api.github.com/users/badbod99/following{/other_user}","gists_url":"https://api.github.com/users/badbod99/gists{/gist_id}","starred_url":"https://api.github.com/users/badbod99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/badbod99/subscriptions","organizations_url":"https://api.github.com/users/badbod99/orgs","repos_url":"https://api.github.com/users/badbod99/repos","events_url":"https://api.github.com/users/badbod99/events{/privacy}","received_events_url":"https://api.github.com/users/badbod99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T08:13:09Z","updated_at":"2019-02-05T08:13:09Z","author_association":"NONE","body":"Was this actually finished and released? Struggling to understand the git history, seems to have been reverted. Also struggling to find in release notes or related documentation regarding settings. Possible in just not doing a good job of looking. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460548251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460656942","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460656942","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460656942,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY1Njk0Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T14:27:56Z","updated_at":"2019-02-05T14:27:56Z","author_association":"MEMBER","body":"@wohali @garrensmith I'd be interested to hear your opinion.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460656942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460657506","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460657506","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460657506,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY1NzUwNg==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T14:29:31Z","updated_at":"2019-02-05T14:29:31Z","author_association":"MEMBER","body":"@eiri I'm happy to disable specific flaky tests. But I don't want to disable the full test suite. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460657506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460662680","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460662680","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460662680,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY2MjY4MA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T14:43:31Z","updated_at":"2019-02-05T14:43:31Z","author_association":"MEMBER","body":"+1 to this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460662680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460662970","html_url":"https://github.com/apache/couchdb/issues/1895#issuecomment-460662970","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1895","id":460662970,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY2Mjk3MA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T14:44:20Z","updated_at":"2019-02-05T14:44:20Z","author_association":"MEMBER","body":"@ondra-novak thank you for the report! this should be fixed now on master.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460662970/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460696102","html_url":"https://github.com/apache/couchdb/issues/1899#issuecomment-460696102","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1899","id":460696102,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY5NjEwMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:07:01Z","updated_at":"2019-02-05T16:07:01Z","author_association":"MEMBER","body":"Thanks @klaemo - not able to use that Slack link.\r\n\r\nPull requests welcome ;)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460696102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460696191","html_url":"https://github.com/apache/couchdb/issues/1899#issuecomment-460696191","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1899","id":460696191,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDY5NjE5MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:07:16Z","updated_at":"2019-02-05T16:07:16Z","author_association":"MEMBER","body":"May be related to https://github.com/apache/couchdb/issues/1053","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460696191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460703155","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-460703155","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":460703155,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDcwMzE1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:24:46Z","updated_at":"2019-02-05T16:24:46Z","author_association":"MEMBER","body":"@iilyak I don't see the security problem with using the same hash on every node. Fixing that hash to an always-the-same value, yes, I see that as a problem.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460703155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460703554","html_url":"https://github.com/apache/couchdb/pull/470#issuecomment-460703554","issue_url":"https://api.github.com/repos/apache/couchdb/issues/470","id":460703554,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDcwMzU1NA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:25:47Z","updated_at":"2019-02-05T16:25:47Z","author_association":"MEMBER","body":"@badbod99 Yes, the scheduling replicator was merged and released in 2.1.0.\r\n\r\nhttp://docs.couchdb.org/en/latest/whatsnew/2.1.html#version-2-1-0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460703554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704511","html_url":"https://github.com/apache/couchdb/pull/470#issuecomment-460704511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/470","id":460704511,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDcwNDUxMQ==","user":{"login":"badbod99","id":7858558,"node_id":"MDQ6VXNlcjc4NTg1NTg=","avatar_url":"https://avatars.githubusercontent.com/u/7858558?v=4","gravatar_id":"","url":"https://api.github.com/users/badbod99","html_url":"https://github.com/badbod99","followers_url":"https://api.github.com/users/badbod99/followers","following_url":"https://api.github.com/users/badbod99/following{/other_user}","gists_url":"https://api.github.com/users/badbod99/gists{/gist_id}","starred_url":"https://api.github.com/users/badbod99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/badbod99/subscriptions","organizations_url":"https://api.github.com/users/badbod99/orgs","repos_url":"https://api.github.com/users/badbod99/repos","events_url":"https://api.github.com/users/badbod99/events{/privacy}","received_events_url":"https://api.github.com/users/badbod99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:28:06Z","updated_at":"2019-02-05T16:28:06Z","author_association":"NONE","body":"Great, thanks.  Not sure how I missed that!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704587","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460704587","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460704587,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDcwNDU4Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:28:19Z","updated_at":"2019-02-05T16:28:19Z","author_association":"MEMBER","body":"@eiri See https://github.com/apache/couchdb/pull/1883 - you absolutely have my \"permission\" :)\r\n\r\nOnce #1885 is merged you can then change `make elixir` and merge the fix for this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704587/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704756","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460704756","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460704756,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDcwNDc1Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T16:28:45Z","updated_at":"2019-02-05T16:28:45Z","author_association":"MEMBER","body":"Also see #1735 .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460704756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460804434","html_url":"https://github.com/apache/couchdb/issues/1899#issuecomment-460804434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1899","id":460804434,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDgwNDQzNA==","user":{"login":"klaemo","id":778624,"node_id":"MDQ6VXNlcjc3ODYyNA==","avatar_url":"https://avatars.githubusercontent.com/u/778624?v=4","gravatar_id":"","url":"https://api.github.com/users/klaemo","html_url":"https://github.com/klaemo","followers_url":"https://api.github.com/users/klaemo/followers","following_url":"https://api.github.com/users/klaemo/following{/other_user}","gists_url":"https://api.github.com/users/klaemo/gists{/gist_id}","starred_url":"https://api.github.com/users/klaemo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klaemo/subscriptions","organizations_url":"https://api.github.com/users/klaemo/orgs","repos_url":"https://api.github.com/users/klaemo/repos","events_url":"https://api.github.com/users/klaemo/events{/privacy}","received_events_url":"https://api.github.com/users/klaemo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T21:09:12Z","updated_at":"2019-02-05T21:09:12Z","author_association":"CONTRIBUTOR","body":"@wohali here you go https://github.com/apache/couchdb/pull/1905 🙂 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460804434/reactions","total_count":2,"+1":0,"-1":0,"laugh":1,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460807891","html_url":"https://github.com/apache/couchdb/issues/1648#issuecomment-460807891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1648","id":460807891,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDgwNzg5MQ==","user":{"login":"pablovp86","id":26493682,"node_id":"MDQ6VXNlcjI2NDkzNjgy","avatar_url":"https://avatars.githubusercontent.com/u/26493682?v=4","gravatar_id":"","url":"https://api.github.com/users/pablovp86","html_url":"https://github.com/pablovp86","followers_url":"https://api.github.com/users/pablovp86/followers","following_url":"https://api.github.com/users/pablovp86/following{/other_user}","gists_url":"https://api.github.com/users/pablovp86/gists{/gist_id}","starred_url":"https://api.github.com/users/pablovp86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pablovp86/subscriptions","organizations_url":"https://api.github.com/users/pablovp86/orgs","repos_url":"https://api.github.com/users/pablovp86/repos","events_url":"https://api.github.com/users/pablovp86/events{/privacy}","received_events_url":"https://api.github.com/users/pablovp86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T21:19:42Z","updated_at":"2019-02-05T21:19:42Z","author_association":"NONE","body":"Any prediction of when this problem will solved?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460807891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460819045","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-460819045","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":460819045,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDgxOTA0NQ==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T21:54:57Z","updated_at":"2019-02-05T21:54:57Z","author_association":"CONTRIBUTOR","body":"> @wohali : @iilyak I don't see the security problem with using the same hash on every node. Fixing that hash to an always-the-same value, yes, I see that as a problem.\r\n\r\nAs you've said the same hash for every node is ok. However this PR is implemented in such a way that we use the same `salt` for every independent credential. Which needs to be fixed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460819045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460848547","html_url":"https://github.com/apache/couchdb/pull/1905#issuecomment-460848547","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1905","id":460848547,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDg0ODU0Nw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T23:40:11Z","updated_at":"2019-02-05T23:40:11Z","author_association":"MEMBER","body":"@klaemo Unfortunately I can't merge this because our style checker is failing. If you run `sudo pip3 install black` then `make python-black-update` and update your PR, it should solve the problem.\r\n\r\nThanks again for your PR!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460848547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460851407","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-460851407","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":460851407,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDg1MTQwNw==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-05T23:52:54Z","updated_at":"2019-02-05T23:52:54Z","author_association":"CONTRIBUTOR","body":"I have also found that in many cases it's possible to de-flake a test simply by wrapping the flaky parts in a retry like so:\r\n```elixir\r\nretry_until(fn ->\r\n  flaky_code\r\nend)\r\n```\r\nOf course, you have to include the request as well as the failing assertion in the fn, but as long the condition is met within the timeout (default 5 seconds), it should help.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460851407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460901628","html_url":"https://github.com/apache/couchdb/pull/1803#issuecomment-460901628","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1803","id":460901628,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDkwMTYyOA==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T04:59:34Z","updated_at":"2019-02-06T04:59:34Z","author_association":"CONTRIBUTOR","body":"I removed all salt-related code and kept the admin syncing code.\r\n\r\nI tested by changing [this line](https://github.com/apache/couchdb/blob/master/dev/run#L425) to remove the `hashify` function like so:\r\n```\r\n    return contents + \"\\n%s = %s\" % (user, pswd)\r\n```\r\nand then confirmed that all admin passwords are hashed the same after setup:\r\n```\r\n(node1@127.0.0.1)1> rpc:multicall(config, get, [\"admins\"]).\r\n{[[{\"adm\",\r\n    \"-pbkdf2-454cf868445b52a1d7a527c20c1622925c8fab3b,561a3a73c5ae6276a2cb0fc47434975d,10\"}],\r\n  [{\"adm\",\r\n    \"-pbkdf2-454cf868445b52a1d7a527c20c1622925c8fab3b,561a3a73c5ae6276a2cb0fc47434975d,10\"}],\r\n  [{\"adm\",\r\n    \"-pbkdf2-454cf868445b52a1d7a527c20c1622925c8fab3b,561a3a73c5ae6276a2cb0fc47434975d,10\"}]],\r\n []}\r\n```\r\nPresumably, we could also remove the `hashify` function and `from pbkdf2 import pbkdf2_hex` line from setup with this change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460901628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460919288","html_url":"https://github.com/apache/couchdb/pull/1905#issuecomment-460919288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1905","id":460919288,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDkxOTI4OA==","user":{"login":"klaemo","id":778624,"node_id":"MDQ6VXNlcjc3ODYyNA==","avatar_url":"https://avatars.githubusercontent.com/u/778624?v=4","gravatar_id":"","url":"https://api.github.com/users/klaemo","html_url":"https://github.com/klaemo","followers_url":"https://api.github.com/users/klaemo/followers","following_url":"https://api.github.com/users/klaemo/following{/other_user}","gists_url":"https://api.github.com/users/klaemo/gists{/gist_id}","starred_url":"https://api.github.com/users/klaemo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klaemo/subscriptions","organizations_url":"https://api.github.com/users/klaemo/orgs","repos_url":"https://api.github.com/users/klaemo/repos","events_url":"https://api.github.com/users/klaemo/events{/privacy}","received_events_url":"https://api.github.com/users/klaemo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T06:53:04Z","updated_at":"2019-02-06T06:53:04Z","author_association":"CONTRIBUTOR","body":"@wohali Done! ✅ Sorry I missed this step.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460919288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460935649","html_url":"https://github.com/apache/couchdb/issues/1906#issuecomment-460935649","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1906","id":460935649,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDkzNTY0OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T08:14:28Z","updated_at":"2019-02-06T08:14:28Z","author_association":"MEMBER","body":"The _local_docs endpoint wasn't added until CouchDB 2.x, sorry.\r\n\r\nCouchDB 1.x is no longer supported.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460935649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460957910","html_url":"https://github.com/apache/couchdb/issues/1906#issuecomment-460957910","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1906","id":460957910,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MDk1NzkxMA==","user":{"login":"nvsajeeva","id":22984158,"node_id":"MDQ6VXNlcjIyOTg0MTU4","avatar_url":"https://avatars.githubusercontent.com/u/22984158?v=4","gravatar_id":"","url":"https://api.github.com/users/nvsajeeva","html_url":"https://github.com/nvsajeeva","followers_url":"https://api.github.com/users/nvsajeeva/followers","following_url":"https://api.github.com/users/nvsajeeva/following{/other_user}","gists_url":"https://api.github.com/users/nvsajeeva/gists{/gist_id}","starred_url":"https://api.github.com/users/nvsajeeva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nvsajeeva/subscriptions","organizations_url":"https://api.github.com/users/nvsajeeva/orgs","repos_url":"https://api.github.com/users/nvsajeeva/repos","events_url":"https://api.github.com/users/nvsajeeva/events{/privacy}","received_events_url":"https://api.github.com/users/nvsajeeva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T09:36:30Z","updated_at":"2019-02-06T09:36:30Z","author_association":"NONE","body":"Hi wohali,\r\nIf no checckpoint document is kept, how couchdb resumes the replication?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/460957910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461016964","html_url":"https://github.com/apache/couchdb/issues/1735#issuecomment-461016964","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1735","id":461016964,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTAxNjk2NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T13:08:59Z","updated_at":"2019-02-06T13:08:59Z","author_association":"MEMBER","body":"and one more:\r\n\r\n```\r\n* test Simple map functions (348.4ms)\r\n\r\n  1) test Simple map functions (BasicsTest)\r\n     test/basics_test.exs:141\r\n     Assertion with == failed\r\n     code:  assert Couch.get(\"/#{db_name}\").body()[\"doc_count\"] == 6\r\n     left:  5\r\n     right: 6\r\n     stacktrace:\r\n       test/basics_test.exs:155: (test)\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461016964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461017240","html_url":"https://github.com/apache/couchdb/issues/1902#issuecomment-461017240","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1902","id":461017240,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTAxNzI0MA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T13:09:53Z","updated_at":"2019-02-06T13:09:53Z","author_association":"MEMBER","body":"how about we run the tests, but don't fail the build if they fail until we worked out the kinks?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461017240/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461060806","html_url":"https://github.com/apache/couchdb/issues/1850#issuecomment-461060806","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1850","id":461060806,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTA2MDgwNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T15:18:46Z","updated_at":"2019-02-06T15:18:46Z","author_association":"MEMBER","body":"I fixed this in couchdb-mac-app master, the next version of CouchDB will include the fix.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461060806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461236916","html_url":"https://github.com/apache/couchdb/issues/1885#issuecomment-461236916","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1885","id":461236916,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTIzNjkxNg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-06T23:59:28Z","updated_at":"2019-02-06T23:59:28Z","author_association":"MEMBER","body":"I'm a little nervous about this proposal just pushing tests into a `flaky` category and then never being examined.\r\n\r\nWho is volunteering to clean up these tests and ensure we don't ignore them forever?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461236916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461364154","html_url":"https://github.com/apache/couchdb/pull/1908#issuecomment-461364154","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1908","id":461364154,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTM2NDE1NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T10:25:38Z","updated_at":"2019-02-07T10:25:38Z","author_association":"MEMBER","body":"needs https://github.com/apache/couchdb-documentation/pull/392","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461364154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461365531","html_url":"https://github.com/apache/couchdb/pull/1908#issuecomment-461365531","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1908","id":461365531,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTM2NTUzMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T10:29:39Z","updated_at":"2019-02-07T10:29:39Z","author_association":"MEMBER","body":"and https://github.com/apache/couchdb-fauxton/issues/1180","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461365531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461409164","html_url":"https://github.com/apache/couchdb/issues/1909#issuecomment-461409164","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1909","id":461409164,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTQwOTE2NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T12:59:54Z","updated_at":"2019-02-07T12:59:54Z","author_association":"MEMBER","body":"Good find. I’ll see how we can refill the archive, but 1.x is no longer maintained and you shouldn’t rely on the Apache Archive for production deployments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461409164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461410727","html_url":"https://github.com/apache/couchdb/issues/1909#issuecomment-461410727","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1909","id":461410727,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTQxMDcyNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T13:04:57Z","updated_at":"2019-02-07T13:04:57Z","author_association":"MEMBER","body":"Ah, it looks like links are weird and whatnot, but all releases are here as per policy: http://archive.apache.org/dist/couchdb/ including 1.7.2: http://archive.apache.org/dist/couchdb/source/1.7.2/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461410727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461418552","html_url":"https://github.com/apache/couchdb/issues/1909#issuecomment-461418552","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1909","id":461418552,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2MTQxODU1Mg==","user":{"login":"dgerhardt","id":3731006,"node_id":"MDQ6VXNlcjM3MzEwMDY=","avatar_url":"https://avatars.githubusercontent.com/u/3731006?v=4","gravatar_id":"","url":"https://api.github.com/users/dgerhardt","html_url":"https://github.com/dgerhardt","followers_url":"https://api.github.com/users/dgerhardt/followers","following_url":"https://api.github.com/users/dgerhardt/following{/other_user}","gists_url":"https://api.github.com/users/dgerhardt/gists{/gist_id}","starred_url":"https://api.github.com/users/dgerhardt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dgerhardt/subscriptions","organizations_url":"https://api.github.com/users/dgerhardt/orgs","repos_url":"https://api.github.com/users/dgerhardt/repos","events_url":"https://api.github.com/users/dgerhardt/events{/privacy}","received_events_url":"https://api.github.com/users/dgerhardt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-07T13:28:44Z","updated_at":"2019-02-07T13:31:09Z","author_association":"NONE","body":"Got it. Thanks for the quick response. We are using 2.3 for production but still need to test some data migration code against older versions of CouchDB.\r\n\r\nWould it be possible to push the updated branch and tag to the repo? I guess it was just held back for the binary release because of security fixes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/461418552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]