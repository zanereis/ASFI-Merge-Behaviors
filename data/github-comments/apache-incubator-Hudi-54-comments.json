[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618120915","html_url":"https://github.com/apache/hudi/pull/1044#issuecomment-618120915","issue_url":"https://api.github.com/repos/apache/hudi/issues/1044","id":618120915,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODEyMDkxNQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T01:17:28Z","updated_at":"2020-04-23T01:17:28Z","author_association":"MEMBER","body":"hi @XuQianJin-Stars, thanks for your contribution, CSV metrices reporter seems not popular in product, so I suggest closing this, WDYT? @leesf \r\n\r\nalso, flink doesn't use CSV reporter\r\nhttps://ci.apache.org/projects/flink/flink-docs-release-1.10/monitoring/metrics.html#reporter\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618120915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618121217","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-618121217","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":618121217,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODEyMTIxNw==","user":{"login":"c-f-cooper","id":25735549,"node_id":"MDQ6VXNlcjI1NzM1NTQ5","avatar_url":"https://avatars.githubusercontent.com/u/25735549?v=4","gravatar_id":"","url":"https://api.github.com/users/c-f-cooper","html_url":"https://github.com/c-f-cooper","followers_url":"https://api.github.com/users/c-f-cooper/followers","following_url":"https://api.github.com/users/c-f-cooper/following{/other_user}","gists_url":"https://api.github.com/users/c-f-cooper/gists{/gist_id}","starred_url":"https://api.github.com/users/c-f-cooper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c-f-cooper/subscriptions","organizations_url":"https://api.github.com/users/c-f-cooper/orgs","repos_url":"https://api.github.com/users/c-f-cooper/repos","events_url":"https://api.github.com/users/c-f-cooper/events{/privacy}","received_events_url":"https://api.github.com/users/c-f-cooper/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T01:18:36Z","updated_at":"2020-04-23T01:18:36Z","author_association":"CONTRIBUTOR","body":"> @c-f-cooper @superguhua @jenu9417 @dahirainbow welcome and done\r\n\r\nthanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618121217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618132796","html_url":"https://github.com/apache/hudi/pull/1551#issuecomment-618132796","issue_url":"https://api.github.com/repos/apache/hudi/issues/1551","id":618132796,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODEzMjc5Ng==","user":{"login":"wanglisheng0111","id":37138788,"node_id":"MDQ6VXNlcjM3MTM4Nzg4","avatar_url":"https://avatars.githubusercontent.com/u/37138788?v=4","gravatar_id":"","url":"https://api.github.com/users/wanglisheng0111","html_url":"https://github.com/wanglisheng0111","followers_url":"https://api.github.com/users/wanglisheng0111/followers","following_url":"https://api.github.com/users/wanglisheng0111/following{/other_user}","gists_url":"https://api.github.com/users/wanglisheng0111/gists{/gist_id}","starred_url":"https://api.github.com/users/wanglisheng0111/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wanglisheng0111/subscriptions","organizations_url":"https://api.github.com/users/wanglisheng0111/orgs","repos_url":"https://api.github.com/users/wanglisheng0111/repos","events_url":"https://api.github.com/users/wanglisheng0111/events{/privacy}","received_events_url":"https://api.github.com/users/wanglisheng0111/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T02:02:37Z","updated_at":"2020-04-23T02:02:37Z","author_association":"NONE","body":"> Thanks for your contributing @wanglisheng81 ! LGTM, merging.\r\n> PS: it would be a MINOR change without a jira issue. :) anyway, thanks for the contribution.\r\n\r\nGot it, @leesf, thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618132796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618142920","html_url":"https://github.com/apache/hudi/pull/1224#issuecomment-618142920","issue_url":"https://api.github.com/repos/apache/hudi/issues/1224","id":618142920,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE0MjkyMA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T02:39:50Z","updated_at":"2020-04-23T02:39:50Z","author_association":"CONTRIBUTOR","body":"hi @n3nash, I have rebased this pr PTAL, thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618142920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618173541","html_url":"https://github.com/apache/hudi/pull/1526#issuecomment-618173541","issue_url":"https://api.github.com/repos/apache/hudi/issues/1526","id":618173541,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE3MzU0MQ==","user":{"login":"vingov","id":1142498,"node_id":"MDQ6VXNlcjExNDI0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1142498?v=4","gravatar_id":"","url":"https://api.github.com/users/vingov","html_url":"https://github.com/vingov","followers_url":"https://api.github.com/users/vingov/followers","following_url":"https://api.github.com/users/vingov/following{/other_user}","gists_url":"https://api.github.com/users/vingov/gists{/gist_id}","starred_url":"https://api.github.com/users/vingov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vingov/subscriptions","organizations_url":"https://api.github.com/users/vingov/orgs","repos_url":"https://api.github.com/users/vingov/repos","events_url":"https://api.github.com/users/vingov/events{/privacy}","received_events_url":"https://api.github.com/users/vingov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T04:41:00Z","updated_at":"2020-04-23T04:41:00Z","author_association":"CONTRIBUTOR","body":"@EdwinGuo - Thanks for trying multiple options, I thought it would be easy to create those language-specific tabs, if it too much work, we can create a separate page for pyspark code.\r\n\r\nIf we were using docusaurus, it would be super easy to create these tab navigation - https://docusaurus.io/docs/en/doc-markdown#language-specific-code-tabs\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618173541/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618175675","html_url":"https://github.com/apache/hudi/pull/1540#issuecomment-618175675","issue_url":"https://api.github.com/repos/apache/hudi/issues/1540","id":618175675,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE3NTY3NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T04:48:59Z","updated_at":"2020-04-23T04:48:59Z","author_association":"MEMBER","body":"@satishkotha let's then break that up into a separate JIRA (tagged with Code Cleanup component). We can limit scope to these insert related handles and move on.. wdyt ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618175675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618179797","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618179797","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618179797,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE3OTc5Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T05:04:19Z","updated_at":"2020-04-23T05:04:19Z","author_association":"MEMBER","body":"\r\n> When I look into the specific S3 folder, I see that the insert and delete into the partition actually  create a new .parquet file with no log file.\r\n\r\nSo inserts in MOR still go to a parquet file. only updates go to a log file (merging is much more expensive since it reads, merges and write parquet, than just writing parquet). So what you saw is expected behavior. \r\n\r\n\r\n> it does not reflect the deletes.Based on my understanding, the _rt table should reflect the deletes\r\n\r\nTrue.. it should reflect the deletes. MOR would have logged a delete block into the log file and the keys should be listed there.. Do you know the log files? if so, you can use the CLI and see what's inside the logs, there is a command to inspect the log file there.. \r\n\r\nHappy to get this ironed out.. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618179797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618180277","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-618180277","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":618180277,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE4MDI3Nw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T05:06:25Z","updated_at":"2020-04-23T05:06:25Z","author_association":"MEMBER","body":"@harshi2506 I am suspecting this may be due to a recent bug we fixed on master (still not 100%). Are you open to building hudi off master branch and giving that a shot? I am suspecting #1394 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618180277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618193932","html_url":"https://github.com/apache/hudi/pull/1541#issuecomment-618193932","issue_url":"https://api.github.com/repos/apache/hudi/issues/1541","id":618193932,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE5MzkzMg==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T05:52:49Z","updated_at":"2020-04-23T05:52:49Z","author_association":"CONTRIBUTOR","body":"@afilipchik Firstly, You may need to figure out why the Travis is red.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618193932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618251852","html_url":"https://github.com/apache/hudi/pull/1100#issuecomment-618251852","issue_url":"https://api.github.com/repos/apache/hudi/issues/1100","id":618251852,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI1MTg1Mg==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T08:12:54Z","updated_at":"2020-04-23T08:12:54Z","author_association":"CONTRIBUTOR","body":"> @yanghua need you to lead the Azure pipelines for the test suite and other tickets assigned to you under the umbrella ticket.\r\n\r\n@n3nash Thanks for your hard work. I will active this work after merging this huge PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618251852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618292312","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618292312","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618292312,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI5MjMxMg==","user":{"login":"ninadphatak-amazon","id":38244072,"node_id":"MDQ6VXNlcjM4MjQ0MDcy","avatar_url":"https://avatars.githubusercontent.com/u/38244072?v=4","gravatar_id":"","url":"https://api.github.com/users/ninadphatak-amazon","html_url":"https://github.com/ninadphatak-amazon","followers_url":"https://api.github.com/users/ninadphatak-amazon/followers","following_url":"https://api.github.com/users/ninadphatak-amazon/following{/other_user}","gists_url":"https://api.github.com/users/ninadphatak-amazon/gists{/gist_id}","starred_url":"https://api.github.com/users/ninadphatak-amazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ninadphatak-amazon/subscriptions","organizations_url":"https://api.github.com/users/ninadphatak-amazon/orgs","repos_url":"https://api.github.com/users/ninadphatak-amazon/repos","events_url":"https://api.github.com/users/ninadphatak-amazon/events{/privacy}","received_events_url":"https://api.github.com/users/ninadphatak-amazon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T09:30:20Z","updated_at":"2020-04-24T04:47:52Z","author_association":"NONE","body":"If MOR inserts go to a parquet file but updates to go a log file, then a query on the _ro table will show the inserts since the last compaction but not the updates. Isnt that like providing an inconsistent state of data? So, I still see all inserts since the last compaction but none of  the updates?\r\n\r\nThese are the contents of the log file using show logfile records in hudi-cli\r\n```\r\n{\"_hoodie_commit_time\": \"20200422083923\", \"_hoodie_commit_seqno\": \"20200422083923_1_2\", \"_hoodie_record_key\": \"11\", \"_hoodie_partition_path\": \"2019-03-14\", \"_hoodie_file_name\": \"c9df1d00-5dda-4bf7-8f27-1d4534bbbe4c-0\", \"dms_received_ts\": \"2020-04-22T08:38:36.873970Z\", \"tran_id\": 11, \"tran_date\": \"2019-03-14\", \"store_id\": 5, \"store_city\": \"CHICAGO\", \"store_state\": \"IL\", \"item_code\": \"XXXXXX\", \"quantity\": 15, \"total\": 106.25, \"Op\": \"D\"}\r\n```\r\n\r\nThis is the log file metadata\r\n```\r\n║ 20200422083923 │ 1           │ AVRO_DATA_BLOCK │ {\"SCHEMA\":\"{\\\"type\\\":\\\"record\\\",\\\"name\\\":\\\"retail_transactions\\\",\\\"fields\\\":[{\\\"name\\\":\\\"_hoodie_commit_time\\\",\\\"type\\\":[\\\"null\\\",\\\"string\\\"],\\\"doc\\\":\\\"\\\",\\\"default\\\":null},{\\\"name\\\":\\\"_hoodie_commit_seqno\\\",\\\"type\\\":[\\\"null\\\",\\\"string\\\"],\\\"doc\\\":\\\"\\\",\\\"default\\\":null},{\\\"name\\\":\\\"_hoodie_record_key\\\",\\\"type\\\":[\\\"null\\\",\\\"string\\\"],\\\"doc\\\":\\\"\\\",\\\"default\\\":null},{\\\"name\\\":\\\"_hoodie_partition_path\\\",\\\"type\\\":[\\\"null\\\",\\\"string\\\"],\\\"doc\\\":\\\"\\\",\\\"default\\\":null},{\\\"name\\\":\\\"_hoodie_file_name\\\",\\\"type\\\":[\\\"null\\\",\\\"string\\\"],\\\"doc\\\":\\\"\\\",\\\"default\\\":null},{\\\"name\\\":\\\"dms_received_ts\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"tran_id\\\",\\\"type\\\":\\\"int\\\"},{\\\"name\\\":\\\"tran_date\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"store_id\\\",\\\"type\\\":\\\"int\\\"},{\\\"name\\\":\\\"store_city\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"store_state\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"item_code\\\",\\\"type\\\":\\\"string\\\"},{\\\"name\\\":\\\"quantity\\\",\\\"type\\\":\\\"int\\\"},{\\\"name\\\":\\\"total\\\",\\\"type\\\":\\\"float\\\"},{\\\"name\\\":\\\"Op\\\",\\\"type\\\":\\\"string\\\"}]}\",\"INSTANT_TIME\":\"20200422083923\"} │ {}             ║\r\n```\r\n\r\nThe name of the parquet file in the partition is c9df1d00-5dda-4bf7-8f27-1d4534bbbe4c-0_3-23-40_20200422072539.parquet and the log file name is `c9df1d00-5dda-4bf7-8f27-1d4534bbbe4c-0_20200422072539.log.1_1-24-33`\r\n\r\nThe partiton metadata contents are \r\n```\r\ncommitTime=20200422072539\r\npartitionDepth=1\r\n```\r\nNot sure why a query on the _rt table does not reflect the delete. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618292312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618336942","html_url":"https://github.com/apache/hudi/issues/1528#issuecomment-618336942","issue_url":"https://api.github.com/repos/apache/hudi/issues/1528","id":618336942,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODMzNjk0Mg==","user":{"login":"jenu9417","id":35403660,"node_id":"MDQ6VXNlcjM1NDAzNjYw","avatar_url":"https://avatars.githubusercontent.com/u/35403660?v=4","gravatar_id":"","url":"https://api.github.com/users/jenu9417","html_url":"https://github.com/jenu9417","followers_url":"https://api.github.com/users/jenu9417/followers","following_url":"https://api.github.com/users/jenu9417/following{/other_user}","gists_url":"https://api.github.com/users/jenu9417/gists{/gist_id}","starred_url":"https://api.github.com/users/jenu9417/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jenu9417/subscriptions","organizations_url":"https://api.github.com/users/jenu9417/orgs","repos_url":"https://api.github.com/users/jenu9417/repos","events_url":"https://api.github.com/users/jenu9417/events{/privacy}","received_events_url":"https://api.github.com/users/jenu9417/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T11:03:21Z","updated_at":"2020-04-23T11:03:21Z","author_association":"NONE","body":"@lamber-ken  @vinothchandar \r\nThe above mentioned suggestions works fine. Time to write has now reduced drastically.\r\nThank you for the continued support.\r\n\r\nClosing the ticket, since the original issue is resolved now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618336942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618411983","html_url":"https://github.com/apache/hudi/issues/1550#issuecomment-618411983","issue_url":"https://api.github.com/repos/apache/hudi/issues/1550","id":618411983,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQxMTk4Mw==","user":{"login":"badion","id":4816615,"node_id":"MDQ6VXNlcjQ4MTY2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/4816615?v=4","gravatar_id":"","url":"https://api.github.com/users/badion","html_url":"https://github.com/badion","followers_url":"https://api.github.com/users/badion/followers","following_url":"https://api.github.com/users/badion/following{/other_user}","gists_url":"https://api.github.com/users/badion/gists{/gist_id}","starred_url":"https://api.github.com/users/badion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/badion/subscriptions","organizations_url":"https://api.github.com/users/badion/orgs","repos_url":"https://api.github.com/users/badion/repos","events_url":"https://api.github.com/users/badion/events{/privacy}","received_events_url":"https://api.github.com/users/badion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T14:02:40Z","updated_at":"2020-04-23T14:04:42Z","author_association":"NONE","body":"@vinothchandar Seems like issue gone after building .jar file from commit(merge) - _ce0a4c64d07d6eea926d1bfb92b69ae387b88f50_, which was apparently after release of _Hudi release 0.5.2_. Also one thing that we tried to use hudi jar from mvn central, it seems like it doesn't have fix with avro yet. \r\n\r\nI think will will wait next **release**, which will include those changes.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618411983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618435496","html_url":"https://github.com/apache/hudi/pull/1557#issuecomment-618435496","issue_url":"https://api.github.com/repos/apache/hudi/issues/1557","id":618435496,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQzNTQ5Ng==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T14:42:41Z","updated_at":"2020-04-23T14:42:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=h1) Report\n> Merging [#1557](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/ddd105bb3119174b613c6917ee25795f2939f430&el=desc) will **decrease** coverage by `0.66%`.\n> The diff coverage is `40.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1557/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1557      +/-   ##\n============================================\n- Coverage     72.35%   71.69%   -0.67%     \n  Complexity      294      294              \n============================================\n  Files           374      378       +4     \n  Lines         16377    16549     +172     \n  Branches       1650     1670      +20     \n============================================\n+ Hits          11849    11864      +15     \n- Misses         3797     3954     +157     \n  Partials        731      731              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...he/hudi/common/model/EmptyHoodieRecordPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0VtcHR5SG9vZGllUmVjb3JkUGF5bG9hZC5qYXZh) | `100.00% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...rg/apache/hudi/common/model/HoodieAvroPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZUF2cm9QYXlsb2FkLmphdmE=) | `84.61% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [.../apache/hudi/common/model/HoodieRecordPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL0hvb2RpZVJlY29yZFBheWxvYWQuamF2YQ==) | `100.00% <ø> (ø)` | `0.00 <0.00> (ø)` | |\n| [...ava/org/apache/hudi/payload/AWSDmsAvroPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9wYXlsb2FkL0FXU0Rtc0F2cm9QYXlsb2FkLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...i/common/model/OverwriteWithLatestAvroPayload.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL21vZGVsL092ZXJ3cml0ZVdpdGhMYXRlc3RBdnJvUGF5bG9hZC5qYXZh) | `56.25% <100.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...di/hadoop/realtime/HoodieRealtimeRecordReader.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1oYWRvb3AtbXIvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaGFkb29wL3JlYWx0aW1lL0hvb2RpZVJlYWx0aW1lUmVjb3JkUmVhZGVyLmphdmE=) | `70.00% <0.00%> (-14.22%)` | `0.00% <0.00%> (ø%)` | |\n| [...ain/java/org/apache/hudi/avro/HoodieAvroUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvYXZyby9Ib29kaWVBdnJvVXRpbHMuamF2YQ==) | `84.82% <0.00%> (-8.32%)` | `0.00% <0.00%> (ø%)` | |\n| [...i/common/table/timeline/TimelineMetadataUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL1RpbWVsaW5lTWV0YWRhdGFVdGlscy5qYXZh) | `93.02% <0.00%> (-2.22%)` | `0.00% <0.00%> (ø%)` | |\n| [.../org/apache/hudi/table/HoodieCommitArchiveLog.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdGFibGUvSG9vZGllQ29tbWl0QXJjaGl2ZUxvZy5qYXZh) | `76.43% <0.00%> (-1.06%)` | `0.00% <0.00%> (ø%)` | |\n| [...i/common/table/timeline/HoodieDefaultTimeline.java](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3RhYmxlL3RpbWVsaW5lL0hvb2RpZURlZmF1bHRUaW1lbGluZS5qYXZh) | `92.30% <0.00%> (-0.12%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [12 more](https://codecov.io/gh/apache/incubator-hudi/pull/1557/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=footer). Last update [ddd105b...43a5543](https://codecov.io/gh/apache/incubator-hudi/pull/1557?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618435496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618436893","html_url":"https://github.com/apache/hudi/pull/1557#issuecomment-618436893","issue_url":"https://api.github.com/repos/apache/hudi/issues/1557","id":618436893,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQzNjg5Mw==","user":{"login":"tisonkun","id":18818196,"node_id":"MDQ6VXNlcjE4ODE4MTk2","avatar_url":"https://avatars.githubusercontent.com/u/18818196?v=4","gravatar_id":"","url":"https://api.github.com/users/tisonkun","html_url":"https://github.com/tisonkun","followers_url":"https://api.github.com/users/tisonkun/followers","following_url":"https://api.github.com/users/tisonkun/following{/other_user}","gists_url":"https://api.github.com/users/tisonkun/gists{/gist_id}","starred_url":"https://api.github.com/users/tisonkun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tisonkun/subscriptions","organizations_url":"https://api.github.com/users/tisonkun/orgs","repos_url":"https://api.github.com/users/tisonkun/repos","events_url":"https://api.github.com/users/tisonkun/events{/privacy}","received_events_url":"https://api.github.com/users/tisonkun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T14:44:58Z","updated_at":"2020-04-23T14:44:58Z","author_association":"MEMBER","body":"Hold if `HoodieRecordPayload` already user facing, we cannot change signature of the interface then.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618436893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618657572","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-618657572","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":618657572,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODY1NzU3Mg==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T20:42:31Z","updated_at":"2020-04-23T21:03:26Z","author_association":"MEMBER","body":"User report: upsert hoodie log\r\n```\r\nStarted at 20/04/22 20:12:14 \r\n\r\n\r\n20/04/22 20:15:30 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storgaeLocation>\r\n20/04/22 20:15:30 INFO HoodieTableMetaClient: Loading Active commit timeline for <storageLocation>\r\n20/04/22 20:15:30 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@4af81941\r\n20/04/22 20:15:30 INFO HoodieCommitArchiveLog: No Instants to archive\r\n20/04/22 20:15:30 INFO HoodieWriteClient: Auto cleaning is enabled. Running cleaner now\r\n20/04/22 20:15:30 INFO HoodieWriteClient: Cleaner started\r\n20/04/22 20:15:30 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storageLocation>\r\n20/04/22 20:15:30 INFO FSUtils: Hadoop Configuration: fs.defaultFS:hdfs, Config:[Configuration: core-default.xml, core-site.xml, mapred-default.xml, mapred-site.xml, yarn-default.xml, yarn-site.xml, hdfs-default.xml, hdfs-site.xml, emrfs-site.xml, __spark_hadoop_conf__.xml, file:/etc/spark/conf.dist/hive-site.xml], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n20/04/22 20:15:31 INFO HoodieTableConfig: Loading dataset properties from <storageLocation>.hoodie/hoodie.properties\r\n20/04/22 20:15:31 INFO S3NativeFileSystem: Opening <storageLocation>.hoodie/hoodie.properties' for reading\r\n20/04/22 20:15:31 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storageLocation>.hoodie/hoodie.properties' in bucket 'delta-data-devo'. Returning object without decryption.\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Loading Active commit timeline for <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@72dd302\r\n20/04/22 20:15:31 INFO FileSystemViewManager: Creating View Manager with storage type :MEMORY\r\n20/04/22 20:15:31 INFO FileSystemViewManager: Creating in-memory based Table View\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storageLocation>\r\n20/04/22 20:15:31 INFO FSUtils: Hadoop Configuration: fs.defaultFS: hdfs, Config:[Configuration: core-default.xml, core-site.xml, mapred-default.xml, mapred-site.xml, yarn-default.xml, yarn-site.xml, hdfs-default.xml, hdfs-site.xml, emrfs-site.xml, __spark_hadoop_conf__.xml, file:/etc/spark/conf.dist/hive-site.xml], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n20/04/22 20:15:31 INFO HoodieTableConfig: Loading dataset properties from <storageLocation>.hoodie/hoodie.properties\r\n20/04/22 20:15:31 INFO S3NativeFileSystem: Opening '<storageLocation>.hoodie/hoodie.properties' for reading\r\n20/04/22 20:15:31 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storageLocation>.hoodie/hoodie.properties' in bucket 'delta-data-devo'. Returning object without decryption.\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Loading Active commit timeline for <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@678852b5\r\n20/04/22 20:24:33 INFO HoodieCopyOnWriteTable: Partitions to clean up : [2001/05/02, 2001/05/07, 2001/05/09, 2001/05/10, 2001/05/17, 2001/05/18, 2001/05/21, 2001/06/01, 2001/06/04, 2001/06/08, 2001/06/20, 2001/06/21, 2001/07/17, 2001/07/23, 2001/07/25, 2001/07/30, 2001/08/02, 2001/08/03, 2001/08/07, 2001/08/08, 2001/08/09, 2001/08/14, 2001/08/23, 2001/09/05, 2001/09/06, 2001/09/07, 2001/09/13, 2001/09/14, 2001/10/02, 2001/10/03, 2001/10/04, 2001/10/09, 2001/11/01, 2001/11/09, 2001/11/14, 2001/11/15, 2001/11/16, 2001/11/19, 2001/11/20, 2001/11/21, 2001/11/27, 2001/11/28, 2001/11/29, 2001/11/30, 2001/12/03, 2001/12/07, 2001/12/10, 2001/12/11, 2001/12/12, 2001/12/13, 2001/12/17, 2001/12/20, 2001/12/21, 2001/12/25, 2001/12/26, 2001/12/27, 2001/12/28, 2001/12/29, 2001/12/31, 2002/01/02, 2002/01/03, 2002/01/07, 2002/01/08, 2002/01/09, 2002/01/11, 2002/01/13, 2002/01/14, 2002/01/15, 2002/01/16, 2002/01/17, 2002/01/18, 2002/01/21, 2002/01/22, 2002/01/23, 2002/01/25, 2002/01/28, 2002/01/29, 2002/01/30, 2002/02/03, 2002/02/05, 2002/02/06, 2002/02/07, 2002/02/11, 2002/02/12, 2002/02/14, 2002/02/15, 2002/02/18, 2002/02/19, 2002/02/20, 2002/02/21, 2002/02/22, 2002/02/26, 2002/03/02, 2002/03/04, 2002/03/06, 2002/03/10, 2002/03/15, 2002/03/17, 2002/03/19, 2002/03/20, 2002/03/21, 2002/03/22, 2002/03/25, 2002/03/26, 2002/03/27, 2002/03/28, 2002/03/30, 2002/04/02, 2002/04/03, 2002/04/04, 2002/04/05, 2002/04/07, 2002/04/09, 2002/04/10, 2002/04/11, 2002/04/14, 2002/04/16, 2002/04/17, 2002/04/22, 2002/04/23, 2002/04/25, 2002/04/30, 2002/05/01, 2002/05/02, 2002/05/06, 2002/05/08, 2002/05/09, 2002/05/12, 2002/05/13, 2002/05/14, 2002/05/17, 2002/05/19, 2002/05/20, 2002/05/21, 2002/05/22, 2002/05/24, 2002/05/27, 2002/05/28, 2002/05/29, 2002/06/03, 2002/06/04, 2002/06/06, 2002/06/10, 2002/06/11, 2002/06/12, 2002/06/14, 2002/06/18, 2002/06/19, 2002/06/24, 2002/07/01, 2002/07/02, 2002/07/04, 2002/07/17, 2002/07/21, 2002/07/31, 2002/08/01, 2002/08/02, 2002/08/07, 2002/08/21, 2002/08/26, 2002/08/27, 2002/08/28, 2002/08/29, 2002/09/03, 2002/09/05, 2002/09/06, 2002/09/09, 2002/09/10, 2002/09/11, 2002/09/12, 2002/09/13, 2002/09/16, 2002/09/17, 2002/09/18, 2002/09/19, 2002/09/23, 2002/09/24, 2002/09/25, 2002/09/28, 2002/09/30, 2002/10/07, 2002/10/08, 2002/10/09, 2002/10/10, 2002/10/11, 2002/10/14, 2002/10/15, 2002/10/16, 2002/10/17, 2002/10/21, 2002/10/23, 2002/10/25, 2002/10/28, 2002/10/29, 2002/10/30, 2002/10/31, 2002/11/07, 2002/11/11, 2002/11/12, 2002/11/13, 2002/11/14, 2002/11/15, 2002/11/18, 2002/11/19, 2002/11/20, 2002/11/21, 2002/11/22, 2002/11/25, 2002/11/26, 2002/11/27, 2002/12/02, 2002/12/04, 2002/12/05, 2002/12/06, 2002/12/09, 2002/12/10, 2002/12/11, 2002/12/12, 2002/12/13, 2002/12/16, 2002/12/17, 2002/12/18, 2002/12/19, 2002/12/20, 2002/12/23, 2002/12/24, 2002/12/25, 2002/12/30, 2002/12/31, 2003/01/03, 2003/01/04, 2003/01/08, 2003/01/09, 2003/01/10, 2003/01/13, 2003/01/14, 2003/01/15, 2003/01/16, 2003/01/17, 2003/01/20, 2003/01/21, 2003/01/22, 2003/01/23, 2003/01/24, 2003/01/27, 2003/01/28, 2003/01/29, 2003/01/30, 2003/01/31, 2003/02/03, 2003/02/06, 2003/02/07, 2003/02/10, 2003/02/11, 2003/02/12, 2003/02/13, 2003/02/14, 2003/02/17, 2003/02/18, 2003/02/19, 2003/02/24, 2003/02/25, 2003/02/26, 2003/02/27, 2003/02/28, 2003/03/04, 2003/03/05, 2003/03/06, 2003/03/07, 2003/03/10, 2003/03/11, 2003/03/12, 2003/03/13, 2003/03/14, 2003/03/17, 2003/03/18, 2003/03/19, 2003/03/24, 2003/03/25, 2003/03/26, 2003/03/27, 2003/03/31, 2003/04/01, 2003/04/02, 2003/04/05, 2003/04/07, 2003/04/08, 2003/04/09, 2003/04/10, 2003/04/11, 2003/04/14, 2003/04/15, 2003/04/16, 2003/04/17, 2003/04/18, 2003/04/21, 2003/04/22, 2003/04/23, 2003/04/24, 2003/04/25, 2003/04/28, 2003/04/29, 2003/04/30, 2003/05/02, 2003/05/05, 2003/05/06, 2003/05/07, 2003/05/12, 2003/05/15, 2003/05/19, 2003/05/20, 2003/05/21, 2003/05/27, 2003/05/28, 2003/05/29, 2003/05/30, 2003/06/02, 2003/06/03, 2003/06/04, 2003/06/05, 2003/06/10, 2003/06/11, 2003/06/18, 2003/06/19, 2003/06/23, 2003/06/24, 2003/06/25, 2003/06/27, 2003/07/01, 2003/07/02, 2003/07/05, 2003/07/07, 2003/07/08, 2003/07/09, 2003/07/10, 2003/07/11, 2003/07/14, 2003/07/15, 2003/07/16, 2003/07/17, 2003/07/18, 2003/07/21, 2003/07/22, 2003/07/23, 2003/07/24, 2003/07/28, 2003/07/29, 2003/07/30, 2003/08/01, 2003/08/05, 2003/08/06, 2003/08/07, 2003/08/11, 2003/08/12, 2003/08/13, 2003/08/15, 2003/08/18, 2003/08/19, 2003/08/20, 2003/08/21, 2003/08/22, 2003/08/26, 2003/08/27, 2003/08/28, 2003/08/29, 2003/09/02, 2003/09/03, 2003/09/04, 2003/09/08, 2003/09/09, 2003/09/10, 2003/09/12, 2003/09/15, 2003/09/16, 2003/09/17, 2003/09/19, 2003/09/22, 2003/09/23, 2003/09/24, 2003/09/25, 2003/09/26, 2003/09/29, 2003/09/30, 2003/10/01, 2003/10/02, 2003/10/08, 2003/10/13, 2003/10/14, 2003/10/15, 2003/10/16, 2003/10/17, 2003/10/19, 2003/10/20, 2003/10/21, 2003/10/22, 2003/10/23, 2003/10/29, 2003/10/30, 2003/10/31, 2003/11/03, 2003/11/04, 2003/11/05, 2003/11/06, 2003/11/07, 2003/11/10, 2003/11/11, 2003/11/12, 2003/11/17, 2003/11/18, 2003/11/19, 2003/11/20, 2003/11/24, 2003/11/25, 2003/11/26, 2003/12/01, 2003/12/02, 2003/12/03, 2003/12/04, 2003/12/05, 2003/12/08, 2003/12/09, 2003/12/10, 2003/12/11, 2003/12/14, 2003/12/15, 2003/12/17, 2003/12/18, 2003/12/19, 2003/12/20, 2003/12/21, 2003/12/22, 2003/12/23, 2003/12/24, 2003/12/25, 2003/12/26, 2003/12/28, 2003/12/30, 2003/12/31, 2004/01/02, 2004/01/03, 2004/01/07, 2004/01/09, 2004/01/12, 2004/01/14, 2004/01/16, 2004/01/19, 2004/01/20, 2004/01/21, 2004/01/23, 2004/01/26, 2004/01/27, 2004/01/28, 2004/01/29, 2004/02/01, 2004/02/02, 2004/02/03, 2004/02/04, 2004/02/06, 2004/02/09, 2004/02/10, 2004/02/11, 2004/02/12, 2004/02/16, 2004/02/18, 2004/02/20, 2004/02/23, 2004/02/24, 2004/02/25, 2004/02/26, 2004/02/27, 2004/03/01, 2004/03/02, 2004/03/03, 2004/03/04, 2004/03/05, 2004/03/08, 2004/03/09, 2004/03/10, 2004/03/11, 2004/03/14, 2004/03/16, 2004/03/17, 2004/03/22, 2004/03/23, 2004/03/24, 2004/03/25, 2004/03/26, 2004/03/28, 2004/03/29, 2004/03/30, 2004/03/31, 2004/04/01, 2004/04/02, 2004/04/03, 2004/04/05, 2004/04/09, 2004/04/12, 2004/04/13, 2004/04/14, 2004/04/16, 2004/04/19, 2004/04/20, 2004/04/21, 2004/04/22, 2004/04/23, 2004/04/26, 2004/04/27, 2004/04/28, 2004/04/29, 2004/04/30, 2004/05/03, 2004/05/04, 2004/05/05, 2004/05/07, 2004/05/11, 2004/05/12, 2004/05/13, 2004/05/14, 2004/05/17, 2004/05/18, 2004/05/20, 2004/05/24, 2004/05/25, 2004/05/26, 2004/05/27, 2004/05/28, 2004/05/29, 2004/05/30, 2004/05/31, 2004/06/02, 2004/06/03, 2004/06/07, 2004/06/08, 2004/06/09, 2004/06/10, 2004/06/11, 2004/06/13, 2004/06/14, 2004/06/15, 2004/06/16, 2004/06/20, 2004/06/21, 2004/06/22, 2004/06/23, 2004/06/24, 2004/06/25, 2004/06/27, 2004/06/28, 2004/06/29, 2004/06/30, 2004/07/06, 2004/07/07, 2004/07/08, 2004/07/09, 2004/07/11, 2004/07/12, 2004/07/14, 2004/07/15, 2004/07/17, 2004/07/21, 2004/07/28, 2004/07/31, 2004/08/02, 2004/08/03, 2004/08/04, 2004/08/05, 2004/08/09, 2004/08/10, 2004/08/12, 2004/08/13, 2004/08/17, 2004/08/19, 2004/08/20, 2004/08/21, 2004/08/22, 2004/08/23, 2004/08/24, 2004/08/25, 2004/08/26, 2004/08/27, 2004/08/28, 2004/08/29, 2004/08/30, 2004/08/31, 2004/09/01, 2004/09/02, 2004/09/09, 2004/09/10, 2004/09/11, 2004/09/12, 2004/09/13, 2004/09/14, 2004/09/15, 2004/09/16, 2004/09/17, 2004/09/18, 2004/09/19, 2004/09/20, 2004/09/21, 2004/09/22, 2004/09/23, 2004/09/24, 2004/09/27, 2004/09/28, 2004/09/29, 2004/09/30, 2004/10/01, 2004/10/02, 2004/10/03, 2004/10/04, 2004/10/05, 2004/10/06, 2004/10/07, 2004/10/08, 2004/10/09, 2004/10/10, 2004/10/11, 2004/10/12, 2004/10/13, 2004/10/14, 2004/10/15, 2004/10/16, 2004/10/17, 2004/10/18, 2004/10/19, 2004/10/20, 2004/10/21, 2004/10/22, 2004/10/23, 2004/10/24, 2004/10/25, 2004/10/26, 2004/10/27, 2004/10/28, 2004/10/29, 2004/10/30, 2004/10/31, 2004/11/02, 2004/11/03, 2004/11/04, 2004/11/05, 2004/11/06, 2004/11/07, 2004/11/08, 2004/11/09, 2004/11/10, 2004/11/11, 2004/11/12, 2004/11/13, 2004/11/16, 2004/11/17, 2004/11/18, 2004/11/19, 2004/11/20, 2004/11/21, 2004/11/22, 2004/11/23,......] - 6040 partitions\r\n\r\n\r\n20/04/22 20:24:33 INFO HoodieCopyOnWriteTable: Using cleanerParallelism: 200\r\n20/04/22 20:24:33 INFO SparkContext: Starting job: collect at HoodieCopyOnWriteTable.java:396\r\n20/04/22 20:24:33 INFO DAGScheduler: Registering RDD 58 (repartition at HoodieCopyOnWriteTable.java:392)\r\n20/04/22 20:24:33 INFO DAGScheduler: Registering RDD 62 (mapPartitionsToPair at HoodieCopyOnWriteTable.java:393)\r\n20/04/22 20:24:33 INFO DAGScheduler: Got job 8 (collect at HoodieCopyOnWriteTable.java:396) with 200 output partitions\r\n20/04/22 20:24:33 INFO DAGScheduler: Final stage: ResultStage 29 (collect at HoodieCopyOnWriteTable.java:396)\r\n20/04/22 20:24:33 INFO DAGScheduler: Parents of final stage: List(ShuffleMapStage 28)\r\n20/04/22 20:24:33 INFO DAGScheduler: Missing parents: List(ShuffleMapStage 28)\r\n20/04/22 20:24:33 INFO DAGScheduler: Submitting ShuffleMapStage 27 (MapPartitionsRDD[58] at repartition at HoodieCopyOnWriteTable.java:392), which has no missing parents\r\n20/04/22 20:24:33 INFO MemoryStore: Block broadcast_17 stored as values in memory (estimated size 174.2 KB, free 1008.1 MB)\r\n20/04/22 20:24:33 INFO MemoryStore: Block broadcast_17_piece0 stored as bytes in memory (estimated size 60.8 KB, free 1008.0 MB)\r\n20/04/22 20:24:33 INFO BlockManagerInfo: Added broadcast_17_piece0 in memory on ip (size: 60.8 KB, free: 1008.7 MB)\r\n20/04/22 20:24:33 INFO SparkContext: Created broadcast 17 from broadcast at DAGScheduler.scala:1201\r\n20/04/22 20:24:33 INFO DAGScheduler: Submitting 200 missing tasks from ShuffleMapStage 27 (MapPartitionsRDD[58] at repartition at HoodieCopyOnWriteTable.java:392) (first 15 tasks are for partitions Vector(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14))\r\n\r\n\r\n20/04/22 20:24:35 INFO DAGScheduler: ShuffleMapStage 27 (repartition at HoodieCopyOnWriteTable.java:392) finished in 1.401 s\r\n20/04/22 20:24:35 INFO DAGScheduler: looking for newly runnable stages\r\n20/04/22 20:24:35 INFO DAGScheduler: running: Set()\r\n20/04/22 20:24:35 INFO DAGScheduler: waiting: Set(ShuffleMapStage 28, ResultStage 29)\r\n20/04/22 20:24:35 INFO DAGScheduler: failed: Set()\r\n20/04/22 20:24:35 INFO DAGScheduler: Submitting ShuffleMapStage 28 (MapPartitionsRDD[62] at mapPartitionsToPair at HoodieCopyOnWriteTable.java:393), which has no missing parents\r\n20/04/22 20:24:35 INFO MemoryStore: Block broadcast_18 stored as values in memory (estimated size 174.8 KB, free 1007.9 MB)\r\n20/04/22 20:24:35 INFO MemoryStore: Block broadcast_18_piece0 stored as bytes in memory (estimated size 61.5 KB, free 1007.8 MB)\r\n20/04/22 20:24:35 INFO BlockManagerInfo: Added broadcast_18_piece0 in memory on ip (size: 61.5 KB, free: 1008.7 MB)\r\n20/04/22 20:24:35 INFO SparkContext: Created broadcast 18 from broadcast at DAGScheduler.scala:1201\r\n20/04/22 20:24:35 INFO DAGScheduler: Submitting 200 missing tasks from ShuffleMapStage 28 (MapPartitionsRDD[62] at mapPartitionsToPair at HoodieCopyOnWriteTable.java:393) (first 15 tasks are for partitions Vector(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14))\r\n\r\n\r\n\r\n20/04/22 20:24:35 INFO DAGScheduler: ResultStage 29 (collect at HoodieCopyOnWriteTable.java:396) finished in 0.057 s\r\n20/04/22 20:24:35 INFO DAGScheduler: Job 8 finished: collect at HoodieCopyOnWriteTable.java:396, took 1.627846 s\r\n20/04/22 20:24:35 INFO FileSystemViewManager: Creating InMemory based view for basePath <storageLocation>\r\n20/04/22 20:24:35 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storageLocation>\r\n20/04/22 20:24:35 INFO FSUtils: Hadoop Configuration: fs.defaultFS: hdfs-ip, Config:[Configuration: core-default.xml, core-site.xml, mapred-default.xml, mapred-site.xml, yarn-default.xml, yarn-site.xml, hdfs-default.xml, hdfs-site.xml, emrfs-site.xml, __spark_hadoop_conf__.xml, file:/etc/spark/conf.dist/hive-site.xml], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n20/04/22 20:24:35 INFO HoodieTableConfig: Loading dataset properties from <storageLocation>.hoodie/hoodie.properties\r\n20/04/22 20:24:35 INFO S3NativeFileSystem: Opening '<storageLocation>.hoodie/hoodie.properties' for reading\r\n20/04/22 20:24:35 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storageLocation>.hoodie/hoodie.properties' in bucket 'delta-data-devo'. Returning object without decryption.\r\n20/04/22 20:24:35 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storageLocation>\r\n20/04/22 20:24:35 INFO HoodieTableMetaClient: Loading Active commit timeline for <storageLocation>\r\n20/04/22 20:24:35 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@1b7440c3\r\n20/04/22 20:24:35 INFO HoodieWriteClient: Cleaned 0 files\r\n20/04/22 20:24:36 INFO HoodieActiveTimeline: Marking instant complete [==>20200422201250__clean__INFLIGHT]\r\n20/04/22 20:24:36 INFO CSEMultipartUploadOutputStream: close closed:false <storageLocation>.hoodie/20200422201250.clean.inflight\r\n20/04/22 20:24:36 INFO DefaultMultipartUploadDispatcher: Completed multipart upload of 1 parts 0 bytes\r\n20/04/22 20:24:36 INFO CSEMultipartUploadOutputStream: Finished uploading <storageLocation>.hoodie/20200422201250.clean.inflight. Elapsed seconds: 0.\r\n20/04/22 20:24:36 INFO HoodieActiveTimeline: Created a new file in meta path: <storageLocation>.hoodie/20200422201250.clean.inflight\r\n20/04/22 20:24:36 INFO CSEMultipartUploadOutputStream: close closed:false <storageLocation>.hoodie/20200422201250.clean.inflight\r\n20/04/22 20:24:36 INFO DefaultMultipartUploadDispatcher: Completed multipart upload of 1 parts 272855 bytes\r\n20/04/22 20:24:36 INFO CSEMultipartUploadOutputStream: Finished uploading <storageLocation>.hoodie/20200422201250.clean.inflight. Elapsed seconds: 0.\r\n20/04/22 20:24:36 INFO S3NativeFileSystem: rename <storageLocation>.hoodie/20200422201250.clean.inflight <storageLocation>.hoodie/20200422201250.clean\r\n20/04/22 20:24:36 INFO HoodieActiveTimeline: Completed [==>20200422201250__clean__INFLIGHT]\r\n20/04/22 20:24:36 INFO HoodieWriteClient: Marked clean started on 20200422201250 as complete\r\n20/04/22 20:24:36 INFO HoodieWriteClient: Committed 20200422201250\r\n20/04/22 20:24:36 INFO HoodieSparkSqlWriter$: Commit 20200422201250 successful!\r\n20/04/22 20:24:36 INFO DefaultSource: Constructing hoodie (as parquet) data source with options :Map(hoodie.datasource.write.insert.drop.duplicates -> false, hoodie.datasource.hive_sync.database -> default, hoodie.insert.shuffle.parallelism -> 200, path -> <storageLocation>, hoodie.datasource.write.precombine.field -> dedupeKey, hoodie.datasource.hive_sync.partition_fields -> , hoodie.datasource.write.payload.class -> org.apache.hudi.OverwriteWithLatestAvroPayload, hoodie.datasource.hive_sync.partition_extractor_class -> org.apache.hudi.hive.SlashEncodedDayPartitionValueExtractor, hoodie.datasource.write.streaming.retry.interval.ms -> 2000, hoodie.datasource.hive_sync.table -> unknown, hoodie.datasource.write.streaming.ignore.failed.batch -> true, hoodie.datasource.write.operation -> upsert, hoodie.datasource.hive_sync.enable -> false, hoodie.datasource.write.recordkey.field -> customer_trx_id, hoodie.datasource.view.type -> read_optimized, hoodie.table.name -> ra_customer_trx_all, hoodie.datasource.hive_sync.jdbcurl -> jdbc:hive2://localhost:10000, hoodie.datasource.write.storage.type -> COPY_ON_WRITE, hoodie.datasource.hive_sync.username -> hive, hoodie.datasource.write.streaming.retry.count -> 3, hoodie.datasource.hive_sync.password -> hive, hoodie.datasource.write.keygenerator.class -> org.apache.hudi.SimpleKeyGenerator, hoodie.upsert.shuffle.parallelism -> 200, hoodie.datasource.hive_sync.assume_date_partitioning -> false, hoodie.datasource.write.partitionpath.field -> partition_key, hoodie.datasource.write.commitmeta.key.prefix -> _, hoodie.bulkinsert.shuffle.parallelism -> 200)\r\n\r\n\r\n\r\nFinally it says loading hoodie table for each partition like for 6040 partitions.\r\nSomething similar to \r\n\r\n\r\n20/04/22 21:06:20 INFO HoodieTableConfig: Loading dataset properties from <storageLocation>/.hoodie/hoodie.properties\r\n20/04/22 21:06:20 INFO S3NativeFileSystem: Opening '<storageLocation>/.hoodie/hoodie.properties' for reading\r\n20/04/22 21:06:20 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storageLocation>/.hoodie/hoodie.properties' in bucket 'delta-data-devo'. Returning object without decryption.\r\n20/04/22 21:06:20 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storageLocation>\r\n20/04/22 21:06:20 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@b9cfa18\r\n20/04/22 21:06:20 INFO HoodieTableFileSystemView: Adding file-groups for partition :2020/04/20, #FileGroups=1\r\n20/04/22 21:06:20 INFO AbstractTableFileSystemView: addFilesToView: NumFiles=3, FileGroupsCreationTime=160, StoreTimeTaken=0\r\n20/04/22 21:06:20 INFO HoodieROTablePathFilter: Based on hoodie metadata from base path: <storageLocation>, caching 1 files under <storageLocation>/2020/04/20\r\n20/04/22 21:06:25 INFO SparkContext: Invoking stop() from shutdown hook\r\n20/04/22 21:06:25 INFO SparkUI: Stopped Spark web UI at ip\r\n20/04/22 21:06:25 INFO YarnClientSchedulerBackend: Interrupting monitor thread\r\n20/04/22 21:06:25 INFO YarnClientSchedulerBackend: Shutting down all executors\r\n20/04/22 21:06:25 INFO YarnSchedulerBackend$YarnDriverEndpoint: Asking each executor to shut down\r\n20/04/22 21:06:25 INFO SchedulerExtensionServices: Stopping SchedulerExtensionServices\r\n\r\nIt runs till 20/04/22 21:06:25 \r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618657572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618683897","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-618683897","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":618683897,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODY4Mzg5Nw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T21:33:42Z","updated_at":"2020-04-23T21:33:42Z","author_association":"MEMBER","body":"hi @harshi2506, need more spark info log, you can put the logfile to google drive, \r\ne.g https://drive.google.com/file/d/1zzyaySDJqPgAdTSLnKwOG667QGvZhd03","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618683897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618691728","html_url":"https://github.com/apache/hudi/pull/1557#issuecomment-618691728","issue_url":"https://api.github.com/repos/apache/hudi/issues/1557","id":618691728,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODY5MTcyOA==","user":{"login":"hmatu","id":59252744,"node_id":"MDQ6VXNlcjU5MjUyNzQ0","avatar_url":"https://avatars.githubusercontent.com/u/59252744?v=4","gravatar_id":"","url":"https://api.github.com/users/hmatu","html_url":"https://github.com/hmatu","followers_url":"https://api.github.com/users/hmatu/followers","following_url":"https://api.github.com/users/hmatu/following{/other_user}","gists_url":"https://api.github.com/users/hmatu/gists{/gist_id}","starred_url":"https://api.github.com/users/hmatu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hmatu/subscriptions","organizations_url":"https://api.github.com/users/hmatu/orgs","repos_url":"https://api.github.com/users/hmatu/repos","events_url":"https://api.github.com/users/hmatu/events{/privacy}","received_events_url":"https://api.github.com/users/hmatu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T21:54:33Z","updated_at":"2020-04-23T21:54:33Z","author_association":"CONTRIBUTOR","body":"+1, LGTM","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618691728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618717557","html_url":"https://github.com/apache/hudi/pull/1540#issuecomment-618717557","issue_url":"https://api.github.com/repos/apache/hudi/issues/1540","id":618717557,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODcxNzU1Nw==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T23:12:45Z","updated_at":"2020-04-23T23:12:45Z","author_association":"MEMBER","body":"> @satishkotha let's then break that up into a separate JIRA (tagged with Code Cleanup component). We can limit scope to these insert related handles and move on.. wdyt\r\n\r\n@vinothchandar Sure. that sounds good. I created HUDI-835 for this. Let me know if you have any other comments on create/append part","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618717557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618769492","html_url":"https://github.com/apache/hudi/issues/1550#issuecomment-618769492","issue_url":"https://api.github.com/repos/apache/hudi/issues/1550","id":618769492,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc2OTQ5Mg==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T02:38:09Z","updated_at":"2020-04-24T02:38:09Z","author_association":"CONTRIBUTOR","body":"@badion yeah the fix for this did not make it to 0.5.2. You can either build your custom Hudi with this patch applied on top of 0.5.2 or wait until next release.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618769492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618771761","html_url":"https://github.com/apache/hudi/pull/1100#issuecomment-618771761","issue_url":"https://api.github.com/repos/apache/hudi/issues/1100","id":618771761,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc3MTc2MQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T02:47:41Z","updated_at":"2020-04-24T02:47:41Z","author_association":"CONTRIBUTOR","body":"@n3nash Still conflicting files... I have tried to fix it yesterday. You may need to `pull --rebase` before force push?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618771761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618797288","html_url":"https://github.com/apache/hudi/issues/1555#issuecomment-618797288","issue_url":"https://api.github.com/repos/apache/hudi/issues/1555","id":618797288,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc5NzI4OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:38:28Z","updated_at":"2020-04-24T04:38:28Z","author_association":"MEMBER","body":"@bvaradar are you able to tackle this one? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618797288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618798845","html_url":"https://github.com/apache/hudi/issues/1556#issuecomment-618798845","issue_url":"https://api.github.com/repos/apache/hudi/issues/1556","id":618798845,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc5ODg0NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:45:31Z","updated_at":"2020-04-24T04:45:31Z","author_association":"MEMBER","body":"trying to understand, are you concurrently writing to the same dataset using two writers? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618798845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618800202","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618800202","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618800202,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwMDIwMg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:51:18Z","updated_at":"2020-04-24T04:51:18Z","author_association":"MEMBER","body":"@PhatakN1 ah okay.. Since Hudi itself is not aware of DMS or the`\"Op\": \"D\"`, it does log a data block with the deleted record.. I suspect the `AwsDMSPayload` is not getting used for merging the base and log files for the query.. \r\n\r\nCould you also paste the contents of `.hoodie/hoodie.properties`?  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618800202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618800754","html_url":"https://github.com/apache/hudi/issues/1555#issuecomment-618800754","issue_url":"https://api.github.com/repos/apache/hudi/issues/1555","id":618800754,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwMDc1NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:53:28Z","updated_at":"2020-04-24T04:53:28Z","author_association":"CONTRIBUTOR","body":"Yes @vinothchandar  I will handle it. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618800754/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618803454","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618803454","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618803454,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwMzQ1NA==","user":{"login":"ninadphatak-amazon","id":38244072,"node_id":"MDQ6VXNlcjM4MjQ0MDcy","avatar_url":"https://avatars.githubusercontent.com/u/38244072?v=4","gravatar_id":"","url":"https://api.github.com/users/ninadphatak-amazon","html_url":"https://github.com/ninadphatak-amazon","followers_url":"https://api.github.com/users/ninadphatak-amazon/followers","following_url":"https://api.github.com/users/ninadphatak-amazon/following{/other_user}","gists_url":"https://api.github.com/users/ninadphatak-amazon/gists{/gist_id}","starred_url":"https://api.github.com/users/ninadphatak-amazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ninadphatak-amazon/subscriptions","organizations_url":"https://api.github.com/users/ninadphatak-amazon/orgs","repos_url":"https://api.github.com/users/ninadphatak-amazon/repos","events_url":"https://api.github.com/users/ninadphatak-amazon/events{/privacy}","received_events_url":"https://api.github.com/users/ninadphatak-amazon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:04:18Z","updated_at":"2020-04-24T05:12:19Z","author_association":"NONE","body":"These are the contents of hoodie.properties\r\n```\r\n----------------------------------------------------------------------------------------\r\nhoodie.compaction.payload.class=org.apache.hudi.payload.AWSDmsAvroPayload\r\nhoodie.table.name=retail_transactions\r\nhoodie.archivelog.folder=archived\r\nhoodie.table.type=MERGE_ON_READ\r\nhoodie.timeline.layout.version=1\r\n----------------------------------------------------------------------------------------\r\n```\r\n\r\nSome more background and context on what I did.\r\nI used mySQL--> DMS--> S3--> Hudi for the initial load of the table. This is where I used hoodie.compaction.payload.class=org.apache.hudi.payload.AWSDmsAvroPayload in my command.\r\n\r\nFor CDC, I used mySQL--> DMS--> Kafka--> Hudi. Here, I used JsonKafkaSource in my command. \r\nWould this cause an issue somewhere?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618803454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618806837","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618806837","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618806837,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwNjgzNw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:18:04Z","updated_at":"2020-04-24T05:18:04Z","author_association":"MEMBER","body":"as long as the records are the same and you are using the payload it should n't matter... \r\n\r\nLet me try to repro this myself.. I am puzzled since I do see the payload class written into hoodie.properties.. So what should happen is that the payload's `combineAndGetUpdateValue()` should be invoked ... From the code though, it seems like this may not be happening..\r\n\r\ncc @n3nash are you able to confirm? My understanding was we will invoke the same payload in rt merge path. no?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618806837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618808782","html_url":"https://github.com/apache/hudi/issues/1555#issuecomment-618808782","issue_url":"https://api.github.com/repos/apache/hudi/issues/1555","id":618808782,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwODc4Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:25:42Z","updated_at":"2020-04-24T05:25:42Z","author_association":"CONTRIBUTOR","body":"@allenzhg : The exception strongly suggests you have 2 different versions of hadoop (likely 3.x and 2.x brought by Spark). Spark 2.4.x comes pre-built with Hadoop 2.7 which could conflict with your hadoop 3.x setup. It is likely unrelated to Hudi. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618808782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618811796","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618811796","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618811796,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgxMTc5Ng==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:37:21Z","updated_at":"2020-04-24T05:38:15Z","author_association":"CONTRIBUTOR","body":"@vinothchandar  We do invoke the same payload when combining records during merge/compaction. For deletes, the payload has to be an empty payload and then the record should be skipped -> https://github.com/apache/incubator-hudi/blob/master/hudi-hadoop-mr/src/main/java/org/apache/hudi/hadoop/realtime/RealtimeCompactedRecordReader.java#L94\r\n\r\n@PhatakN1 when you try deletes, is that any empty payload ? Or is this something you just drive through configs in deltastreamer ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618811796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618814181","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-618814181","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":618814181,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgxNDE4MQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:46:20Z","updated_at":"2020-04-25T01:43:14Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=h1) Report\n> Merging [#1553](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/19cc15c0987043175685aaeb45facb15af23e34f&el=desc) will **decrease** coverage by `0.01%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1553/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1553      +/-   ##\n============================================\n- Coverage     71.66%   71.65%   -0.02%     \n  Complexity      294      294              \n============================================\n  Files           378      378              \n  Lines         16551    16551              \n  Branches       1670     1670              \n============================================\n- Hits          11861    11859       -2     \n- Misses         3959     3961       +2     \n  Partials        731      731              \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...src/main/java/org/apache/hudi/metrics/Metrics.java](https://codecov.io/gh/apache/incubator-hudi/pull/1553/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9NZXRyaWNzLmphdmE=) | `56.75% <0.00%> (-10.82%)` | `0.00% <0.00%> (ø%)` | |\n| [...a/org/apache/hudi/common/util/collection/Pair.java](https://codecov.io/gh/apache/incubator-hudi/pull/1553/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvY29sbGVjdGlvbi9QYWlyLmphdmE=) | `72.00% <0.00%> (-4.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/incubator-hudi/pull/1553/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `89.65% <0.00%> (+10.34%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=footer). Last update [19cc15c...b7fc271](https://codecov.io/gh/apache/incubator-hudi/pull/1553?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618814181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618816317","html_url":"https://github.com/apache/hudi/pull/1100#issuecomment-618816317","issue_url":"https://api.github.com/repos/apache/hudi/issues/1100","id":618816317,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgxNjMxNw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:54:08Z","updated_at":"2020-04-24T05:54:52Z","author_association":"CONTRIBUTOR","body":"@yanghua no worries, thanks for trying, I've pushed the changes. We will continue to have conflicting files given lots of new commits every day, we should merge this PR soon to avoid this situation everytime.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618816317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618825491","html_url":"https://github.com/apache/hudi/issues/1556#issuecomment-618825491","issue_url":"https://api.github.com/repos/apache/hudi/issues/1556","id":618825491,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgyNTQ5MQ==","user":{"login":"HariprasadAllaka1612","id":55284877,"node_id":"MDQ6VXNlcjU1Mjg0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/55284877?v=4","gravatar_id":"","url":"https://api.github.com/users/HariprasadAllaka1612","html_url":"https://github.com/HariprasadAllaka1612","followers_url":"https://api.github.com/users/HariprasadAllaka1612/followers","following_url":"https://api.github.com/users/HariprasadAllaka1612/following{/other_user}","gists_url":"https://api.github.com/users/HariprasadAllaka1612/gists{/gist_id}","starred_url":"https://api.github.com/users/HariprasadAllaka1612/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HariprasadAllaka1612/subscriptions","organizations_url":"https://api.github.com/users/HariprasadAllaka1612/orgs","repos_url":"https://api.github.com/users/HariprasadAllaka1612/repos","events_url":"https://api.github.com/users/HariprasadAllaka1612/events{/privacy}","received_events_url":"https://api.github.com/users/HariprasadAllaka1612/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T06:18:54Z","updated_at":"2020-04-24T06:31:46Z","author_association":"NONE","body":"@vinothchandar No. let me be more clear. Below is the complete process i am doing\r\n\r\n1. Reading CDC table from hive (hoodie table) to get the latest marker,\r\n2. Read the files from S3 based on the latest marked read in step1.\r\n3. Process the files which will result in 2 data frames.\r\n4. Write both the data frames into the S3 in hoodie format using 2 writers and sync them to hive\r\n5. Update the marker with latest end time using another write\r\n\r\nThe problem here is when i am writing the data set for the first time, its working. But when i am trying UPSERT the data in the 2nd run its giving this error","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618825491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618848088","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-618848088","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":618848088,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODg0ODA4OA==","user":{"login":"ninadphatak-amazon","id":38244072,"node_id":"MDQ6VXNlcjM4MjQ0MDcy","avatar_url":"https://avatars.githubusercontent.com/u/38244072?v=4","gravatar_id":"","url":"https://api.github.com/users/ninadphatak-amazon","html_url":"https://github.com/ninadphatak-amazon","followers_url":"https://api.github.com/users/ninadphatak-amazon/followers","following_url":"https://api.github.com/users/ninadphatak-amazon/following{/other_user}","gists_url":"https://api.github.com/users/ninadphatak-amazon/gists{/gist_id}","starred_url":"https://api.github.com/users/ninadphatak-amazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ninadphatak-amazon/subscriptions","organizations_url":"https://api.github.com/users/ninadphatak-amazon/orgs","repos_url":"https://api.github.com/users/ninadphatak-amazon/repos","events_url":"https://api.github.com/users/ninadphatak-amazon/events{/privacy}","received_events_url":"https://api.github.com/users/ninadphatak-amazon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T07:19:34Z","updated_at":"2020-04-24T07:19:34Z","author_association":"NONE","body":"DMS basically adds an 'Op' column with values as 'I','U' or 'D' specifying the operation on the table. My understanding of the HoodieDeltaStreamer with AWSDmsAvroPayload is that a record with Op=D will delete the data in the table. Infact, if the delete and insert happen in the same partition in a  MOR table, this row does not show up in the query, which tells me that my understanding is right. However, if I run the deltastreamer with no compaction, the paylod with Op=D goes to the log file in the partition. And when I query the _rt table, this record shows up in the output(The Op field in the output is D).  ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618848088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618849915","html_url":"https://github.com/apache/hudi/issues/1488#issuecomment-618849915","issue_url":"https://api.github.com/repos/apache/hudi/issues/1488","id":618849915,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODg0OTkxNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T07:23:39Z","updated_at":"2020-04-24T07:23:39Z","author_association":"CONTRIBUTOR","body":"Closing due to inactivity","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618849915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618911054","html_url":"https://github.com/apache/hudi/pull/1433#issuecomment-618911054","issue_url":"https://api.github.com/repos/apache/hudi/issues/1433","id":618911054,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkxMTA1NA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T09:39:08Z","updated_at":"2020-04-24T09:39:08Z","author_association":"CONTRIBUTOR","body":"> I have some concerns on the implementation.. Also I think you may have checked in a few parquet files from testing?\r\n\r\nMy bad. Will remove them. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618911054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618938010","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-618938010","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":618938010,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkzODAxMA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T10:41:57Z","updated_at":"2020-04-24T10:41:57Z","author_association":"CONTRIBUTOR","body":"@xushiyan If this PR is ready for review, please let me know.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618938010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618940665","html_url":"https://github.com/apache/hudi/pull/1433#issuecomment-618940665","issue_url":"https://api.github.com/repos/apache/hudi/issues/1433","id":618940665,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk0MDY2NQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T10:48:22Z","updated_at":"2020-04-24T10:48:22Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=h1) Report\n> Merging [#1433](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/19cc15c0987043175685aaeb45facb15af23e34f&el=desc) will **decrease** coverage by `0.29%`.\n> The diff coverage is `35.80%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1433/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1433      +/-   ##\n============================================\n- Coverage     71.66%   71.37%   -0.30%     \n+ Complexity      294      289       -5     \n============================================\n  Files           378      379       +1     \n  Lines         16551    16603      +52     \n  Branches       1670     1674       +4     \n============================================\n- Hits          11861    11850      -11     \n- Misses         3959     4029      +70     \n+ Partials        731      724       -7     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...e/hudi/exception/HoodieDeltaStreamerException.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9leGNlcHRpb24vSG9vZGllRGVsdGFTdHJlYW1lckV4Y2VwdGlvbi5qYXZh) | `0.00% <ø> (ø)` | `0.00 <0.00> (?)` | |\n| [...ava/org/apache/hudi/keygen/CustomKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vQ3VzdG9tS2V5R2VuZXJhdG9yLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...main/java/org/apache/hudi/keygen/KeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vS2V5R2VuZXJhdG9yLmphdmE=) | `60.00% <0.00%> (-40.00%)` | `0.00 <0.00> (ø)` | |\n| [...apache/hudi/keygen/TimestampBasedKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vVGltZXN0YW1wQmFzZWRLZXlHZW5lcmF0b3IuamF2YQ==) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `72.44% <ø> (ø)` | `37.00 <0.00> (ø)` | |\n| [...va/org/apache/hudi/keygen/ComplexKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vQ29tcGxleEtleUdlbmVyYXRvci5qYXZh) | `92.30% <94.44%> (+5.46%)` | `0.00 <0.00> (ø)` | |\n| [...g/apache/hudi/keygen/GlobalDeleteKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vR2xvYmFsRGVsZXRlS2V5R2VuZXJhdG9yLmphdmE=) | `91.30% <100.00%> (+0.82%)` | `0.00 <0.00> (ø)` | |\n| [...ava/org/apache/hudi/keygen/SimpleKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvaHVkaS9rZXlnZW4vU2ltcGxlS2V5R2VuZXJhdG9yLmphdmE=) | `90.47% <100.00%> (+2.24%)` | `0.00 <0.00> (ø)` | |\n| ... and [1 more](https://codecov.io/gh/apache/incubator-hudi/pull/1433/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=footer). Last update [19cc15c...f5b7e4b](https://codecov.io/gh/apache/incubator-hudi/pull/1433?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618940665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618977148","html_url":"https://github.com/apache/hudi/pull/1558#issuecomment-618977148","issue_url":"https://api.github.com/repos/apache/hudi/issues/1558","id":618977148,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk3NzE0OA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T12:22:38Z","updated_at":"2020-04-24T12:22:38Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Please have a look. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618977148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618979314","html_url":"https://github.com/apache/hudi/pull/1433#issuecomment-618979314","issue_url":"https://api.github.com/repos/apache/hudi/issues/1433","id":618979314,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk3OTMxNA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T12:27:48Z","updated_at":"2020-04-24T12:27:48Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Have tried to address the comments, please have a look again. Also looking at the Codecov report, I feel there is a need to add test cases for all key generators for which we do not have right now like SimpleKeyGenerator, ComplexKeyGenerator etc. Should I include that in this PR or should I go for a separate PR. Please suggest. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/618979314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619146422","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-619146422","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":619146422,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTE0NjQyMg==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T17:27:15Z","updated_at":"2020-04-24T17:27:15Z","author_association":"CONTRIBUTOR","body":"@PhatakN1 okay, let me look into the test case for _rt deletes to see if there's any missing gaps. Once I confirm that, we can come back and drill down into your specific use-case to see what's happening","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619146422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619278766","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-619278766","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":619278766,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTI3ODc2Ng==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T23:25:50Z","updated_at":"2020-04-24T23:25:50Z","author_association":"MEMBER","body":"@harshi2506, I tried to reproduce your steps, maybe got the answer\r\n\r\n- Generate about 7000 partitions\r\n- Upsert 300 partitions\r\n\r\nFrom following demo code\r\n\r\n- `sc.setLogLevel(\"INFO\")`, upsert cost 15min\r\n- `sc.setLogLevel(\"WARN\")`, upsert cost 3min\r\n\r\n```\r\nexport HADOOP_HOME=/BigData/install/hadoop/hadoop-2.7.7-streamjar\r\nexport HADOOP_MAPRED_HOME=$HADOOP_HOME\r\nexport HADOOP_COMMON_HOME=$HADOOP_HOME\r\nexport HADOOP_HDFS_HOME=$HADOOP_HOME\r\nexport HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\r\nexport YARN_HOME=$HADOOP_HOME\r\nexport YARN_CONF_DIR=$HADOOP_HOME/etc/hadoop\r\nexport HADOOP_USER_NAME=dcadmin\r\n\r\nexport SPARK_HOME=/BigData/install/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n  --master yarn \\\r\n  --driver-memory 6G \\\r\n  --executor-memory 6G \\\r\n  --num-executors 5 \\\r\n  --executor-cores 5 \\\r\n  --queue root.default \\\r\n  --packages org.apache.hudi:hudi-spark-bundle:0.5.0-incubating,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n  --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\nimport org.apache.spark.sql.functions._\r\n\r\nval tableName = \"hudi_mor_table\"\r\nval basePath = \"viewfs://dcfs/ns-log/wxdprtc/flink/hudi\"\r\n\r\nval hudiOptions = Map[String,String](\r\n  \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.datasource.write.recordkey.field\" -> \"key\",\r\n  \"hoodie.datasource.write.partitionpath.field\" -> \"dt\", \r\n  \"hoodie.table.name\" -> tableName,\r\n  \"hoodie.datasource.write.precombine.field\" -> \"timestamp\"\r\n)\r\n\r\nval inputDF = spark.range(1, 7000).\r\n   withColumn(\"key\", $\"id\").\r\n   withColumn(\"data\", lit(\"data\")).\r\n   withColumn(\"timestamp\", unix_timestamp()).\r\n   withColumn(\"dtstamp\", unix_timestamp() + ($\"id\" * 24 * 3600)).\r\n   withColumn(\"dt\", from_unixtime($\"dtstamp\", \"yyyy/MM/dd\"))\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Overwrite\").\r\n  save(basePath)\r\n\r\nspark.read.format(\"org.apache.hudi\").load(basePath + \"/*/*/*\").count();\r\n\r\n\r\n// cost long time, about 15min\r\nsc.setLogLevel(\"INFO\")\r\n\r\nval inputDF = spark.range(1, 300).\r\n   withColumn(\"key\", $\"id\").\r\n   withColumn(\"data\", lit(\"data\")).\r\n   withColumn(\"timestamp\", unix_timestamp()).\r\n   withColumn(\"dtstamp\", unix_timestamp() + ($\"id\" * 24 * 3600)).\r\n   withColumn(\"dt\", from_unixtime($\"dtstamp\", \"yyyy/MM/dd\"))\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Append\").\r\n  save(basePath)\r\n\r\n\r\n// cost less time, about 3min\r\nsc.setLogLevel(\"WARN\")\r\n\r\nval inputDF = spark.range(1, 300).\r\n   withColumn(\"key\", $\"id\").\r\n   withColumn(\"data\", lit(\"data\")).\r\n   withColumn(\"timestamp\", unix_timestamp()).\r\n   withColumn(\"dtstamp\", unix_timestamp() + ($\"id\" * 24 * 3600)).\r\n   withColumn(\"dt\", from_unixtime($\"dtstamp\", \"yyyy/MM/dd\"))\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Append\").\r\n  save(basePath)\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619278766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619302731","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-619302731","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":619302731,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTMwMjczMQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T02:02:35Z","updated_at":"2020-04-25T02:02:35Z","author_association":"MEMBER","body":"@yanghua The PR is ready for review. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619302731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619303737","html_url":"https://github.com/apache/hudi/pull/1151#issuecomment-619303737","issue_url":"https://api.github.com/repos/apache/hudi/issues/1151","id":619303737,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTMwMzczNw==","user":{"login":"dengziming","id":26023240,"node_id":"MDQ6VXNlcjI2MDIzMjQw","avatar_url":"https://avatars.githubusercontent.com/u/26023240?v=4","gravatar_id":"","url":"https://api.github.com/users/dengziming","html_url":"https://github.com/dengziming","followers_url":"https://api.github.com/users/dengziming/followers","following_url":"https://api.github.com/users/dengziming/following{/other_user}","gists_url":"https://api.github.com/users/dengziming/gists{/gist_id}","starred_url":"https://api.github.com/users/dengziming/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dengziming/subscriptions","organizations_url":"https://api.github.com/users/dengziming/orgs","repos_url":"https://api.github.com/users/dengziming/repos","events_url":"https://api.github.com/users/dengziming/events{/privacy}","received_events_url":"https://api.github.com/users/dengziming/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T02:10:50Z","updated_at":"2020-04-25T02:10:50Z","author_association":"MEMBER","body":"@vinothchandar hello, PLAL.\r\nI deleted the 3 DeltaStreamerExample and replace them with 3 xxx-delta-streamer-example.sh, and provide 2 shell `delta-streamer-cluster` and `delta-streamer-local` to run them local or in cluster.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619303737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619306738","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-619306738","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":619306738,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTMwNjczOA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T02:30:38Z","updated_at":"2020-04-25T02:33:58Z","author_association":"MEMBER","body":"## Spark log analysis brainstorming \r\n\r\nhi @vinothchandar, preliminary analysis about this issue\r\n(based on `release-0.5.0` branch https://github.com/apache/incubator-hudi/tree/release-0.5.0)\r\n\r\n### Simplified origin spark log\r\n\r\n```\r\n// Upsert part\r\nWarning: Ignoring non-spark config property: \"spark.sql.hive.convertMetastoreParquet=false\"\r\nWarning: Ignoring non-spark config property: \"spark.serializer=org.apache.spark.serializer.KryoSerializer\"\r\n20/04/22 20:12:14 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<JARPATH>' in bucket '<storageBucket>'. Returning object without decryption.\r\n20/04/22 20:12:14 WARN HiveConf: HiveConf of name hive.server2.thrift.url does not exist\r\n20/04/22 20:12:14 INFO SparkContext: Running Spark version 2.4.4\r\n20/04/22 20:12:14 INFO SparkContext: Submitted application: HUDI incremental data loading\r\n20/04/22 20:12:15 INFO SecurityManager: Changing view acls to: hadoop\r\n20/04/22 20:12:15 INFO SecurityManager: Changing modify acls to: hadoop\r\n20/04/22 20:12:15 INFO SecurityManager: Changing view acls groups to: \r\n20/04/22 20:15:31 INFO S3NativeFileSystem: Opening '<storageLocation>.hoodie/hoodie.properties' for reading\r\n20/04/22 20:15:31 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storgaeLocation>/.hoodie/hoodie.properties' in bucket '<storageBucket>'. Returning object without decryption.\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Finished Loading Table of type COPY_ON_WRITE from <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieTableMetaClient: Loading Active commit timeline for <storageLocation>\r\n20/04/22 20:15:31 INFO HoodieActiveTimeline: Loaded instants java.util.stream.ReferencePipeline$Head@678852b5\r\n20/04/22 20:24:33 INFO HoodieCopyOnWriteTable: Partitions to clean up : [2001/05/02, 2001/05/07, 2001/05/09, 2001/05/10, 2001/05/17, 2001/05/18, 2001/05/21, 2001/06/01, 2001/06/04, 2001/06/08, 2001/06/20, 2001/06/21, 2001/07/17, 2001/07/23, 2001/07/25, 2001/07/30, 2001/08/02, 2001/08/03, 2001/08/07, 2001/08/08, 2001/08/09, 2001/08/14, 2001/08/23, 2001/09/05, 2001/09/06, 2001/09/07, 2001/09/13, 2001/09/14, 2001/10/02, 2001/10/03, 2001/10/04, 2001/10/09, 2001/11/01, 2001/11/09, 2001/11/14, 2001/11/15, 2001/11/16, 2001/11/19, 2001/11/20, 2001/11/21,\r\n20/04/22 20:24:36 INFO HoodieWriteClient: Marked clean started on 20200422201250 as complete\r\n20/04/22 20:24:36 INFO HoodieWriteClient: Committed 20200422201250\r\n20/04/22 20:24:36 INFO HoodieSparkSqlWriter$: Commit 20200422201250 successful!\r\n\r\n\r\n// CreateRelation(sqlContext, parameters, df.schema)\r\n20/04/22 20:24:36 INFO DefaultSource: Constructing hoodie (as parquet) data source with options ...\r\n\r\n20/04/22 20:24:38 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storgaeLocation>\r\n20/04/22 20:24:38 INFO FSUtils: Hadoop Configuration: fs.defaultFS:...], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n...\r\n20/04/22 20:24:38 INFO S3NativeFileSystem: Opening '<storageLocation>2001/05/10/.hoodie_partition_metadata' for reading\r\n20/04/22 20:24:38 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storgaeLocation>/2001/05/10/.hoodie_partition_metadata' in bucket '<storageBucket>'. Returning object without decryption.\r\n\r\n20/04/22 20:24:38 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storgaeLocation>\r\n20/04/22 20:24:38 INFO FSUtils: Hadoop Configuration: fs.defaultFS:...], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n...\r\n20/04/22 20:24:39 INFO S3NativeFileSystem: Opening '<storageLocation>2001/05/17/.hoodie_partition_metadata' for reading\r\n20/04/22 20:24:39 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storgaeLocation>/2001/05/17/.hoodie_partition_metadata' in bucket '<storageBucket>'. Returning object without decryption.\r\n\r\n20/04/22 20:24:39 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storgaeLocation>\r\n20/04/22 20:24:39 INFO FSUtils: Hadoop Configuration: fs.defaultFS:...], FileSystem: [com.amazon.ws.emr.hadoop.fs.s3n.S3NativeFileSystem@3c0cfaad]\r\n...\r\n20/04/22 20:24:39 INFO S3NativeFileSystem: Opening '<storageLocation>2001/05/18/.hoodie_partition_metadata' for reading\r\n20/04/22 20:24:39 WARN S3CryptoModuleAE: Unable to detect encryption information for object '<storgaeLocation>/2001/05/18/.hoodie_partition_metadata' in bucket '<storageBucket>'. Returning object without decryption.\r\n\r\n// Finish part\r\n20/04/22 21:06:25 INFO SparkContext: Successfully stopped SparkContext\r\n20/04/22 21:06:25 INFO ShutdownHookManager: Shutdown hook called\r\n20/04/22 21:06:25 INFO ShutdownHookManager: Deleting directory /mnt/tmp/spark-c24e90ad-7be5-4a04-b4f1-2575cf68bd5a\r\n20/04/22 21:06:25 INFO ShutdownHookManager: Deleting directory /mnt/tmp/spark-c18b2f4f-e525-43de-b896-75244fe63591\r\n```\r\n\r\n#### Analysis\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/80269021-c7225880-86de-11ea-84fe-464d08fc4e9b.png)\r\n\r\n\r\n### Analysis about step 2\r\n\r\nLoad about 6000 partitions, cost 9mins\r\n\r\n1. Call stackstrace\r\n```\r\n\"main\" Id=1 cpuUsage=94% RUNNABLE\r\n    ...\r\n    at org.apache.hudi.common.util.FSUtils.processFiles(FSUtils.java:227)\r\n    at org.apache.hudi.common.util.FSUtils.getAllFoldersWithPartitionMetaFile(FSUtils.java:191)\r\n    at org.apache.hudi.common.util.FSUtils.getAllPartitionPaths(FSUtils.java)\r\n    at org.apache.hudi.table.HoodieCopyOnWriteTable.clean(HoodieCopyOnWriteTable.java:285)\r\n    at org.apache.hudi.HoodieWriteClient.clean(HoodieWriteClient.java:950)\r\n```\r\n2. IMO, `Step 2` affected by NN's RPC performance.\r\n\r\n### Analysis about step 4\r\nWhen I set `WARN` log level, the clean operation run faster. Performance loss due to the interaction between driver and executor?\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/80269122-75c69900-86df-11ea-9a34-b805b694f9e9.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619306738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619308174","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-619308174","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":619308174,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTMwODE3NA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T02:41:34Z","updated_at":"2020-04-25T02:41:34Z","author_association":"MEMBER","body":"> @harshi2506 I am suspecting this may be due to a recent bug we fixed on master (still not 100%). Are you open to building hudi off master branch and giving that a shot? I am suspecting #1394\r\n\r\nIMO, this solution will help you, please try to building hudi master branch. @harshi2506 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619308174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619355710","html_url":"https://github.com/apache/hudi/pull/1044#issuecomment-619355710","issue_url":"https://api.github.com/repos/apache/hudi/issues/1044","id":619355710,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM1NTcxMA==","user":{"login":"leesf","id":10128888,"node_id":"MDQ6VXNlcjEwMTI4ODg4","avatar_url":"https://avatars.githubusercontent.com/u/10128888?v=4","gravatar_id":"","url":"https://api.github.com/users/leesf","html_url":"https://github.com/leesf","followers_url":"https://api.github.com/users/leesf/followers","following_url":"https://api.github.com/users/leesf/following{/other_user}","gists_url":"https://api.github.com/users/leesf/gists{/gist_id}","starred_url":"https://api.github.com/users/leesf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leesf/subscriptions","organizations_url":"https://api.github.com/users/leesf/orgs","repos_url":"https://api.github.com/users/leesf/repos","events_url":"https://api.github.com/users/leesf/events{/privacy}","received_events_url":"https://api.github.com/users/leesf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T10:13:19Z","updated_at":"2020-04-25T10:13:19Z","author_association":"CONTRIBUTOR","body":"> hi @XuQianJin-Stars, thanks for your contribution, CSV metrices reporter seems not popular in product, so I suggest closing this, WDYT? @leesf\r\n> \r\n> also, flink doesn't use CSV reporter\r\n> https://ci.apache.org/projects/flink/flink-docs-release-1.10/monitoring/metrics.html#reporter\r\n\r\nsorry for late response. +1 to close the PR","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619355710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619396502","html_url":"https://github.com/apache/hudi/pull/1562#issuecomment-619396502","issue_url":"https://api.github.com/repos/apache/hudi/issues/1562","id":619396502,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM5NjUwMg==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T15:29:59Z","updated_at":"2020-04-25T15:29:59Z","author_association":"CONTRIBUTOR","body":"Thinking of writing test cases for this, but unable to simulate because AbstractKafkaAvroDeserializer expects a working schema-registry url. Not sure of how to mock the same here since it is library class. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619396502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619396688","html_url":"https://github.com/apache/hudi/pull/765#issuecomment-619396688","issue_url":"https://api.github.com/repos/apache/hudi/issues/765","id":619396688,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM5NjY4OA==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T15:31:12Z","updated_at":"2020-04-25T15:31:12Z","author_association":"CONTRIBUTOR","body":"@vinothchandar I raised https://github.com/apache/incubator-hudi/pull/1562 for this feature. I guess we can close this PR then. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619396688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619409517","html_url":"https://github.com/apache/hudi/pull/1562#issuecomment-619409517","issue_url":"https://api.github.com/repos/apache/hudi/issues/1562","id":619409517,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQwOTUxNw==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T16:56:52Z","updated_at":"2020-04-25T16:56:52Z","author_association":"MEMBER","body":"@afilipchik @umehrot2   help review this? :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619409517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619414521","html_url":"https://github.com/apache/hudi/pull/1457#issuecomment-619414521","issue_url":"https://api.github.com/repos/apache/hudi/issues/1457","id":619414521,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQxNDUyMQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T17:34:28Z","updated_at":"2020-04-25T17:34:28Z","author_association":"MEMBER","body":"@n3nash @prashantwason @bvaradar Noticed that the checks are not performed for bulk_insert.. Is n't this a problem?  Why exclude bulk_insert? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619414521/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619420599","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-619420599","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":619420599,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQyMDU5OQ==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T18:19:21Z","updated_at":"2020-04-25T18:19:21Z","author_association":"CONTRIBUTOR","body":"@PhatakN1 So this is what is possibly happening : \r\n\r\n1) Hard Deletes in Hudi is only supported by following a certain contract with your payload. Your payload implementation should carry an \"empty\" record value. Something like this -> https://github.com/apache/incubator-hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/model/EmptyHoodieRecordPayload.java that is supported out of the box by HoodieWriteClient here -> https://github.com/apache/incubator-hudi/blob/master/hudi-client/src/main/java/org/apache/hudi/client/HoodieWriteClient.java#L307.\r\n\r\nTo simulate this with your own implementation (AwsDMSPayload), you can override the methods `getInsertValue` and `combineAndGetUpdateValue` (take a look at the EmptyPayload above). \r\n\r\n2) In your specific use-case, since your payload isn't an \"empty\" payload, even though the MERGE on the realtime query is happening through the implementation of your payload, Hudi doesn't know whether this is a \"hard delete\" or a \"soft delete\" - the only way for Hudi to know it's a hard delete is the way I described above. \r\n\r\nLet me know if you have further questions ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619420599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619449248","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-619449248","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":619449248,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ0OTI0OA==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T22:31:56Z","updated_at":"2020-04-25T22:33:23Z","author_association":"MEMBER","body":"hi @harshi2506, build steps:\r\n**1. Build Env**\r\n- JDK8\r\n- Unix\r\n\r\n**2. Commands**\r\n```\r\ngit clone https://github.com/apache/incubator-hudi.git\r\nmvn clean install -DskipTests -DskipITs -Dcheckstyle.skip=true -Drat.skip=true\r\n```\r\n\r\n**3. Run env**\r\n- Spark-2.4.4+\r\n- avro-1.8.0\r\n```\r\n// run in local env\r\nexport SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n  --driver-memory 6G \\\r\n  --packages org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n  --jars `ls packaging/hudi-spark-bundle/target/hudi-spark-bundle_*.*-*.*.*-SNAPSHOT.jar` \\\r\n  --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\n// run in yarn env\r\nexport SPARK_HOME=/BigData/install/spark-2.4.4-bin-hadoop2.7\r\n${SPARK_HOME}/bin/spark-shell \\\r\n  --master yarn \\\r\n  --driver-memory 6G \\\r\n  --executor-memory 6G \\\r\n  --num-executors 5 \\\r\n  --executor-cores 5 \\\r\n  --queue root.default \\\r\n  --packages org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n  --jars `ls packaging/hudi-spark-bundle/target/hudi-spark-bundle_*.*-*.*.*-SNAPSHOT.jar` \\\r\n  --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\n// scripts\r\nimport org.apache.spark.sql.functions._\r\n\r\nval tableName = \"hudi_mor_table\"\r\nval basePath = \"file:///tmp/hudi_mor_tablen\"\r\n// val basePath = \"hdfs:///hudi/test\"\r\n\r\nval hudiOptions = Map[String,String](\r\n  \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n  \"hoodie.datasource.write.recordkey.field\" -> \"key\",\r\n  \"hoodie.datasource.write.partitionpath.field\" -> \"dt\", \r\n  \"hoodie.table.name\" -> tableName,\r\n  \"hoodie.datasource.write.precombine.field\" -> \"timestamp\"\r\n)\r\n\r\nval inputDF = spark.range(1, 7).\r\n   withColumn(\"key\", $\"id\").\r\n   withColumn(\"data\", lit(\"data\")).\r\n   withColumn(\"timestamp\", unix_timestamp()).\r\n   withColumn(\"dtstamp\", unix_timestamp() + ($\"id\" * 24 * 3600)).\r\n   withColumn(\"dt\", from_unixtime($\"dtstamp\", \"yyyy/MM/dd\"))\r\n\r\ninputDF.write.format(\"org.apache.hudi\").\r\n  options(hudiOptions).\r\n  mode(\"Overwrite\").\r\n  save(basePath)\r\n\r\nspark.read.format(\"org.apache.hudi\").load(basePath + \"/*/*/*\").show();\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619449248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619471157","html_url":"https://github.com/apache/hudi/issues/1563#issuecomment-619471157","issue_url":"https://api.github.com/repos/apache/hudi/issues/1563","id":619471157,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3MTE1Nw==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T02:42:23Z","updated_at":"2020-04-26T02:42:23Z","author_association":"MEMBER","body":"Thanks for reporting this issue. You're right, we can't find `xmlenc:xmlenc:jar:sources:0.52` in maven repo, but it doesn't affect the build process.\r\n\r\n**1. Build Env**\r\n- JDK8\r\n- Unix\r\n\r\n**2. Commands**\r\n```\r\ngit clone https://github.com/apache/incubator-hudi.git\r\nmvn clean install -DskipTests -DskipITs -Dcheckstyle.skip=true -Drat.skip=true\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619471157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619480090","html_url":"https://github.com/apache/hudi/issues/1563#issuecomment-619480090","issue_url":"https://api.github.com/repos/apache/hudi/issues/1563","id":619480090,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ4MDA5MA==","user":{"login":"GSHF","id":38513540,"node_id":"MDQ6VXNlcjM4NTEzNTQw","avatar_url":"https://avatars.githubusercontent.com/u/38513540?v=4","gravatar_id":"","url":"https://api.github.com/users/GSHF","html_url":"https://github.com/GSHF","followers_url":"https://api.github.com/users/GSHF/followers","following_url":"https://api.github.com/users/GSHF/following{/other_user}","gists_url":"https://api.github.com/users/GSHF/gists{/gist_id}","starred_url":"https://api.github.com/users/GSHF/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GSHF/subscriptions","organizations_url":"https://api.github.com/users/GSHF/orgs","repos_url":"https://api.github.com/users/GSHF/repos","events_url":"https://api.github.com/users/GSHF/events{/privacy}","received_events_url":"https://api.github.com/users/GSHF/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T04:30:24Z","updated_at":"2020-04-26T04:30:24Z","author_association":"NONE","body":"Do you have to package on Linux? It's good to pack on the idea of windows\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619480090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619480158","html_url":"https://github.com/apache/hudi/issues/1563#issuecomment-619480158","issue_url":"https://api.github.com/repos/apache/hudi/issues/1563","id":619480158,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ4MDE1OA==","user":{"login":"GSHF","id":38513540,"node_id":"MDQ6VXNlcjM4NTEzNTQw","avatar_url":"https://avatars.githubusercontent.com/u/38513540?v=4","gravatar_id":"","url":"https://api.github.com/users/GSHF","html_url":"https://github.com/GSHF","followers_url":"https://api.github.com/users/GSHF/followers","following_url":"https://api.github.com/users/GSHF/following{/other_user}","gists_url":"https://api.github.com/users/GSHF/gists{/gist_id}","starred_url":"https://api.github.com/users/GSHF/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GSHF/subscriptions","organizations_url":"https://api.github.com/users/GSHF/orgs","repos_url":"https://api.github.com/users/GSHF/repos","events_url":"https://api.github.com/users/GSHF/events{/privacy}","received_events_url":"https://api.github.com/users/GSHF/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T04:31:01Z","updated_at":"2020-04-26T04:31:01Z","author_association":"NONE","body":"Just now, I tried \"MVN clean install - dskiptests - dskipits - dcheckstyle. Skip = true - drat. Skip = true\" or \"could not find article xmlenc: xmlenc: jar: sources: 0.52 in Maven central\" (https://repo1.maven.org/maven 2) in idea of Windows version","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619480158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619486621","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-619486621","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":619486621,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ4NjYyMQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T05:44:58Z","updated_at":"2020-04-26T05:44:58Z","author_association":"CONTRIBUTOR","body":"@xushiyan There are some conflicting files.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619486621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619491671","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-619491671","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":619491671,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ5MTY3MQ==","user":{"login":"harshi2506","id":64137937,"node_id":"MDQ6VXNlcjY0MTM3OTM3","avatar_url":"https://avatars.githubusercontent.com/u/64137937?v=4","gravatar_id":"","url":"https://api.github.com/users/harshi2506","html_url":"https://github.com/harshi2506","followers_url":"https://api.github.com/users/harshi2506/followers","following_url":"https://api.github.com/users/harshi2506/following{/other_user}","gists_url":"https://api.github.com/users/harshi2506/gists{/gist_id}","starred_url":"https://api.github.com/users/harshi2506/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshi2506/subscriptions","organizations_url":"https://api.github.com/users/harshi2506/orgs","repos_url":"https://api.github.com/users/harshi2506/repos","events_url":"https://api.github.com/users/harshi2506/events{/privacy}","received_events_url":"https://api.github.com/users/harshi2506/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T06:27:09Z","updated_at":"2020-04-26T06:27:09Z","author_association":"NONE","body":"> hi @harshi2506, build steps:\r\n> **1. Build Env**\r\n> \r\n> * JDK8\r\n> * Unix\r\n> \r\n> **2. Commands**\r\n> \r\n> ```\r\n> git clone https://github.com/apache/incubator-hudi.git\r\n> mvn clean install -DskipTests -DskipITs -Dcheckstyle.skip=true -Drat.skip=true\r\n> ```\r\n> \r\n> **3. Run env**\r\n> \r\n> * Spark-2.4.4+\r\n> * avro-1.8.0\r\n> \r\n> ```\r\n> // run in local env\r\n> export SPARK_HOME=/work/BigData/install/spark/spark-2.4.4-bin-hadoop2.7\r\n> ${SPARK_HOME}/bin/spark-shell \\\r\n>   --driver-memory 6G \\\r\n>   --packages org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n>   --jars `ls packaging/hudi-spark-bundle/target/hudi-spark-bundle_*.*-*.*.*-SNAPSHOT.jar` \\\r\n>   --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n> \r\n> // run in yarn env\r\n> export SPARK_HOME=/BigData/install/spark-2.4.4-bin-hadoop2.7\r\n> ${SPARK_HOME}/bin/spark-shell \\\r\n>   --master yarn \\\r\n>   --driver-memory 6G \\\r\n>   --executor-memory 6G \\\r\n>   --num-executors 5 \\\r\n>   --executor-cores 5 \\\r\n>   --queue root.default \\\r\n>   --packages org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n>   --jars `ls packaging/hudi-spark-bundle/target/hudi-spark-bundle_*.*-*.*.*-SNAPSHOT.jar` \\\r\n>   --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n> \r\n> // scripts\r\n> import org.apache.spark.sql.functions._\r\n> \r\n> val tableName = \"hudi_mor_table\"\r\n> val basePath = \"file:///tmp/hudi_mor_tablen\"\r\n> // val basePath = \"hdfs:///hudi/test\"\r\n> \r\n> val hudiOptions = Map[String,String](\r\n>   \"hoodie.upsert.shuffle.parallelism\" -> \"10\",\r\n>   \"hoodie.datasource.write.recordkey.field\" -> \"key\",\r\n>   \"hoodie.datasource.write.partitionpath.field\" -> \"dt\", \r\n>   \"hoodie.table.name\" -> tableName,\r\n>   \"hoodie.datasource.write.precombine.field\" -> \"timestamp\"\r\n> )\r\n> \r\n> val inputDF = spark.range(1, 7).\r\n>    withColumn(\"key\", $\"id\").\r\n>    withColumn(\"data\", lit(\"data\")).\r\n>    withColumn(\"timestamp\", unix_timestamp()).\r\n>    withColumn(\"dtstamp\", unix_timestamp() + ($\"id\" * 24 * 3600)).\r\n>    withColumn(\"dt\", from_unixtime($\"dtstamp\", \"yyyy/MM/dd\"))\r\n> \r\n> inputDF.write.format(\"org.apache.hudi\").\r\n>   options(hudiOptions).\r\n>   mode(\"Overwrite\").\r\n>   save(basePath)\r\n> \r\n> spark.read.format(\"org.apache.hudi\").load(basePath + \"/*/*/*\").show();\r\n> ```\r\n\r\n@lamber-ken will try and let you know. Thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619491671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619496046","html_url":"https://github.com/apache/hudi/issues/1563#issuecomment-619496046","issue_url":"https://api.github.com/repos/apache/hudi/issues/1563","id":619496046,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ5NjA0Ng==","user":{"login":"GSHF","id":38513540,"node_id":"MDQ6VXNlcjM4NTEzNTQw","avatar_url":"https://avatars.githubusercontent.com/u/38513540?v=4","gravatar_id":"","url":"https://api.github.com/users/GSHF","html_url":"https://github.com/GSHF","followers_url":"https://api.github.com/users/GSHF/followers","following_url":"https://api.github.com/users/GSHF/following{/other_user}","gists_url":"https://api.github.com/users/GSHF/gists{/gist_id}","starred_url":"https://api.github.com/users/GSHF/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GSHF/subscriptions","organizations_url":"https://api.github.com/users/GSHF/orgs","repos_url":"https://api.github.com/users/GSHF/repos","events_url":"https://api.github.com/users/GSHF/events{/privacy}","received_events_url":"https://api.github.com/users/GSHF/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T06:53:57Z","updated_at":"2020-04-26T06:53:57Z","author_association":"NONE","body":"> Thanks for reporting this issue. You're right, we can't find `xmlenc:xmlenc:jar:sources:0.52` in maven repo, but it doesn't affect the build process.\r\n> \r\n> **1. Build Env**\r\n> \r\n> * JDK8\r\n> * Unix\r\n> \r\n> **2. Commands**\r\n> \r\n> ```\r\n> git clone https://github.com/apache/incubator-hudi.git\r\n> mvn clean install -DskipTests -DskipITs -Dcheckstyle.skip=true -Drat.skip=true\r\n> ```\r\n\r\nhi,Just now, I tried \"MVN clean install - dskiptests - dskipits - dcheckstyle. Skip = true - drat. Skip = true\" or \"could not find article xmlenc: xmlenc: jar: sources: 0.52 in Maven central\" (https://repo1.maven.org/maven 2) in idea of Windows version.\r\nJDK1.8 I use,\r\nCan I only run packaging in a linux environment?\r\nplease help me","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619496046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619529855","html_url":"https://github.com/apache/hudi/pull/1554#issuecomment-619529855","issue_url":"https://api.github.com/repos/apache/hudi/issues/1554","id":619529855,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTUyOTg1NQ==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T11:01:30Z","updated_at":"2020-04-26T11:01:59Z","author_association":"CONTRIBUTOR","body":"@hddong You might want to have a look at https://github.com/apache/incubator-hudi/pull/1558 and add a test case for the upserts case as well :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619529855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619559348","html_url":"https://github.com/apache/hudi/pull/1526#issuecomment-619559348","issue_url":"https://api.github.com/repos/apache/hudi/issues/1526","id":619559348,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU1OTM0OA==","user":{"login":"EdwinGuo","id":8300535,"node_id":"MDQ6VXNlcjgzMDA1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/8300535?v=4","gravatar_id":"","url":"https://api.github.com/users/EdwinGuo","html_url":"https://github.com/EdwinGuo","followers_url":"https://api.github.com/users/EdwinGuo/followers","following_url":"https://api.github.com/users/EdwinGuo/following{/other_user}","gists_url":"https://api.github.com/users/EdwinGuo/gists{/gist_id}","starred_url":"https://api.github.com/users/EdwinGuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdwinGuo/subscriptions","organizations_url":"https://api.github.com/users/EdwinGuo/orgs","repos_url":"https://api.github.com/users/EdwinGuo/repos","events_url":"https://api.github.com/users/EdwinGuo/events{/privacy}","received_events_url":"https://api.github.com/users/EdwinGuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T14:23:20Z","updated_at":"2020-04-26T14:23:20Z","author_association":"CONTRIBUTOR","body":"> @EdwinGuo - Thanks for trying multiple options, I thought it would be easy to create those language-specific tabs, if it too much work, we can create a separate page for pyspark code.\r\n> \r\n> If we were using docusaurus, it would be super easy to create these tab navigation - https://docusaurus.io/docs/en/doc-markdown#language-specific-code-tabs\r\n\r\nSounds good. Let me switch to tab navigation.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619559348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619562775","html_url":"https://github.com/apache/hudi/pull/1522#issuecomment-619562775","issue_url":"https://api.github.com/repos/apache/hudi/issues/1522","id":619562775,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU2Mjc3NQ==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T14:39:20Z","updated_at":"2020-04-26T14:39:20Z","author_association":"CONTRIBUTOR","body":"@yanghua Thanks for you review and comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619562775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619571735","html_url":"https://github.com/apache/hudi/pull/1526#issuecomment-619571735","issue_url":"https://api.github.com/repos/apache/hudi/issues/1526","id":619571735,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU3MTczNQ==","user":{"login":"EdwinGuo","id":8300535,"node_id":"MDQ6VXNlcjgzMDA1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/8300535?v=4","gravatar_id":"","url":"https://api.github.com/users/EdwinGuo","html_url":"https://github.com/EdwinGuo","followers_url":"https://api.github.com/users/EdwinGuo/followers","following_url":"https://api.github.com/users/EdwinGuo/following{/other_user}","gists_url":"https://api.github.com/users/EdwinGuo/gists{/gist_id}","starred_url":"https://api.github.com/users/EdwinGuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdwinGuo/subscriptions","organizations_url":"https://api.github.com/users/EdwinGuo/orgs","repos_url":"https://api.github.com/users/EdwinGuo/repos","events_url":"https://api.github.com/users/EdwinGuo/events{/privacy}","received_events_url":"https://api.github.com/users/EdwinGuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T15:39:23Z","updated_at":"2020-04-26T15:39:23Z","author_association":"CONTRIBUTOR","body":"@lamber-ken @vingov Updated. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619571735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619587422","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-619587422","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":619587422,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTU4NzQyMg==","user":{"login":"ninadphatak-amazon","id":38244072,"node_id":"MDQ6VXNlcjM4MjQ0MDcy","avatar_url":"https://avatars.githubusercontent.com/u/38244072?v=4","gravatar_id":"","url":"https://api.github.com/users/ninadphatak-amazon","html_url":"https://github.com/ninadphatak-amazon","followers_url":"https://api.github.com/users/ninadphatak-amazon/followers","following_url":"https://api.github.com/users/ninadphatak-amazon/following{/other_user}","gists_url":"https://api.github.com/users/ninadphatak-amazon/gists{/gist_id}","starred_url":"https://api.github.com/users/ninadphatak-amazon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ninadphatak-amazon/subscriptions","organizations_url":"https://api.github.com/users/ninadphatak-amazon/orgs","repos_url":"https://api.github.com/users/ninadphatak-amazon/repos","events_url":"https://api.github.com/users/ninadphatak-amazon/events{/privacy}","received_events_url":"https://api.github.com/users/ninadphatak-amazon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T17:10:50Z","updated_at":"2020-04-27T00:43:16Z","author_association":"NONE","body":"Does this mean that hard deletes would work out of the box for COW datasets but not for MOR datasets? I also went through the documentation at https://cwiki.apache.org/confluence/display/HUDI/2020/01/15/Delete+support+in+Hudi which talks about delete support in Hudi and the example it provides is also on a COW dataset. It also needs addition of a field called _hoodie_is_deleted to the source. I tried adding this field as well, but the query on the _rt table on a MOR dataset still shows up the value(with  _hoodie_is_deleted=true)\r\n\r\nWhen I try the same insert/update/delete without even adding the _hoodie_is_deleted field, it works by looking at the OP field that DMS populates. \r\n\r\nSo, as of now, when working with DMS data as the source and leveraging deltastreamer, is COW dataset preferred over MOR? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619587422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619614841","html_url":"https://github.com/apache/hudi/pull/1565#issuecomment-619614841","issue_url":"https://api.github.com/repos/apache/hudi/issues/1565","id":619614841,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTYxNDg0MQ==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T19:49:01Z","updated_at":"2020-04-26T19:53:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=h1) Report\n> Merging [#1565](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/19ca0b56296bf89c611406bb86c3626f87d562ee&el=desc) will **decrease** coverage by `0.03%`.\n> The diff coverage is `60.00%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1565/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1565      +/-   ##\n============================================\n- Coverage     71.82%   71.79%   -0.04%     \n- Complexity      294      303       +9     \n============================================\n  Files           383      386       +3     \n  Lines         16549    16598      +49     \n  Branches       1663     1667       +4     \n============================================\n+ Hits          11887    11916      +29     \n- Misses         3930     3946      +16     \n- Partials        732      736       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...apache/hudi/utilities/sources/AvroKafkaSource.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NvdXJjZXMvQXZyb0thZmthU291cmNlLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...ies/serde/AbstractHoodieKafkaAvroDeserializer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NlcmRlL0Fic3RyYWN0SG9vZGllS2Fma2FBdnJvRGVzZXJpYWxpemVyLmphdmE=) | `60.60% <60.60%> (ø)` | `6.00 <6.00> (?)` | |\n| [...e/hudi/utilities/serde/HoodieKafkaAvroDecoder.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NlcmRlL0hvb2RpZUthZmthQXZyb0RlY29kZXIuamF2YQ==) | `75.00% <75.00%> (ø)` | `1.00 <1.00> (?)` | |\n| [...hudi/utilities/schema/FilebasedSchemaProvider.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9GaWxlYmFzZWRTY2hlbWFQcm92aWRlci5qYXZh) | `83.33% <100.00%> (+2.08%)` | `5.00 <0.00> (ø)` | |\n| [...e/config/HoodieKafkaAvroDeserializationConfig.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NlcmRlL2NvbmZpZy9Ib29kaWVLYWZrYUF2cm9EZXNlcmlhbGl6YXRpb25Db25maWcuamF2YQ==) | `100.00% <100.00%> (ø)` | `2.00 <2.00> (?)` | |\n| [...che/hudi/common/util/BufferedRandomAccessFile.java](https://codecov.io/gh/apache/incubator-hudi/pull/1565/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvQnVmZmVyZWRSYW5kb21BY2Nlc3NGaWxlLmphdmE=) | `54.38% <0.00%> (-0.88%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=footer). Last update [19ca0b5...a71f602](https://codecov.io/gh/apache/incubator-hudi/pull/1565?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619614841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619623233","html_url":"https://github.com/apache/hudi/pull/1566#issuecomment-619623233","issue_url":"https://api.github.com/repos/apache/hudi/issues/1566","id":619623233,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTYyMzIzMw==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T20:52:52Z","updated_at":"2020-05-15T19:52:54Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=h1) Report\n> Merging [#1566](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/83796b3189570182c68a9c41e57b356124c301ca&el=desc) will **decrease** coverage by `0.01%`.\n> The diff coverage is `69.81%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1566/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1566      +/-   ##\n============================================\n- Coverage     71.80%   71.79%   -0.02%     \n- Complexity     1087     1095       +8     \n============================================\n  Files           385      387       +2     \n  Lines         16591    16645      +54     \n  Branches       1669     1675       +6     \n============================================\n+ Hits          11913    11950      +37     \n- Misses         3949     3962      +13     \n- Partials        729      733       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [.../hudi/utilities/schema/SchemaRegistryProvider.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFSZWdpc3RyeVByb3ZpZGVyLmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (ø)` | |\n| [...a/org/apache/hudi/client/AbstractHoodieClient.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L0Fic3RyYWN0SG9vZGllQ2xpZW50LmphdmE=) | `75.00% <50.00%> (-3.95%)` | `6.00 <0.00> (ø)` | |\n| [...i/utilities/keygen/TimestampBasedKeyGenerator.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2tleWdlbi9UaW1lc3RhbXBCYXNlZEtleUdlbmVyYXRvci5qYXZh) | `58.82% <61.11%> (-0.16%)` | `7.00 <1.00> (+2.00)` | :arrow_down: |\n| [...i/utilities/deltastreamer/HoodieDeltaStreamer.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvSG9vZGllRGVsdGFTdHJlYW1lci5qYXZh) | `78.89% <70.00%> (-1.11%)` | `11.00 <0.00> (ø)` | |\n| [...apache/hudi/utilities/deltastreamer/DeltaSync.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvRGVsdGFTeW5jLmphdmE=) | `72.93% <76.92%> (+0.48%)` | `40.00 <2.00> (+3.00)` | |\n| [.../client/embedded/EmbeddedTimelineServerHelper.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L2VtYmVkZGVkL0VtYmVkZGVkVGltZWxpbmVTZXJ2ZXJIZWxwZXIuamF2YQ==) | `80.00% <80.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...apache/hudi/utilities/deltastreamer/Compactor.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL2RlbHRhc3RyZWFtZXIvQ29tcGFjdG9yLmphdmE=) | `68.75% <80.00%> (-8.18%)` | `3.00 <0.00> (ø)` | |\n| [...in/scala/org/apache/hudi/IncrementalRelation.scala](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS1zcGFyay9zcmMvbWFpbi9zY2FsYS9vcmcvYXBhY2hlL2h1ZGkvSW5jcmVtZW50YWxSZWxhdGlvbi5zY2FsYQ==) | `72.41% <100.00%> (-0.17%)` | `0.00 <0.00> (ø)` | |\n| [...va/org/apache/hudi/utilities/schema/SchemaSet.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS11dGlsaXRpZXMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvdXRpbGl0aWVzL3NjaGVtYS9TY2hlbWFTZXQuamF2YQ==) | `100.00% <100.00%> (ø)` | `3.00 <3.00> (?)` | |\n| [...ache/hudi/common/fs/inline/InMemoryFileSystem.java](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL2ZzL2lubGluZS9Jbk1lbW9yeUZpbGVTeXN0ZW0uamF2YQ==) | `79.31% <0.00%> (-10.35%)` | `0.00% <0.00%> (ø%)` | |\n| ... and [5 more](https://codecov.io/gh/apache/incubator-hudi/pull/1566/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=footer). Last update [25e0b75...741db83](https://codecov.io/gh/apache/incubator-hudi/pull/1566?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619623233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619623525","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-619623525","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":619623525,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTYyMzUyNQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T20:55:17Z","updated_at":"2020-04-26T20:55:17Z","author_association":"MEMBER","body":"> @xushiyan There are some conflicting files.\n\n@yanghua ok fixed.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619623525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619654653","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-619654653","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":619654653,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY1NDY1Mw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T00:57:21Z","updated_at":"2020-04-27T00:58:06Z","author_association":"CONTRIBUTOR","body":"@PhatakN1 COW & MOR both support all the operations, choosing which one to use is based on your use-case rather than feature set. \r\nAre you overriding the method `combineAndGetUpdateValue` in your custom payload implementation ? This part of the code -> https://github.com/apache/incubator-hudi/blob/master/hudi-common/src/main/java/org/apache/hudi/common/model/OverwriteWithLatestAvroPayload.java#L70 basically takes care of that in the `OverwriteWithLatestAvroPayload` payload implementation. But if you override that and make use of your own class and method impl, then you'll need to ensure you do the same in your code.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619654653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619662637","html_url":"https://github.com/apache/hudi/pull/1522#issuecomment-619662637","issue_url":"https://api.github.com/repos/apache/hudi/issues/1522","id":619662637,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY2MjYzNw==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T01:35:26Z","updated_at":"2020-04-27T01:35:26Z","author_association":"CONTRIBUTOR","body":"@hddong Travis is red.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619662637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619680608","html_url":"https://github.com/apache/hudi/pull/1402#issuecomment-619680608","issue_url":"https://api.github.com/repos/apache/hudi/issues/1402","id":619680608,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY4MDYwOA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T02:50:39Z","updated_at":"2020-05-16T13:14:47Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=h1) Report\n> Merging [#1402](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/25e0b75b3d03b6d460dc18d1a5fce7b881b0e019&el=desc) will **decrease** coverage by `55.19%`.\n> The diff coverage is `12.34%`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1402/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=tree)\n\n```diff\n@@              Coverage Diff              @@\n##             master    #1402       +/-   ##\n=============================================\n- Coverage     71.81%   16.61%   -55.20%     \n+ Complexity     1092      796      -296     \n=============================================\n  Files           386      344       -42     \n  Lines         16608    15167     -1441     \n  Branches       1667     1510      -157     \n=============================================\n- Hits          11927     2520     -9407     \n- Misses         3955    12317     +8362     \n+ Partials        726      330      -396     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...org/apache/hudi/client/utils/SparkConfigUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY2xpZW50L3V0aWxzL1NwYXJrQ29uZmlnVXRpbHMuamF2YQ==) | `7.69% <0.00%> (-88.31%)` | `2.00 <0.00> (ø)` | |\n| [...java/org/apache/hudi/config/HoodieWriteConfig.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29uZmlnL0hvb2RpZVdyaXRlQ29uZmlnLmphdmE=) | `42.55% <0.00%> (-42.30%)` | `47.00 <0.00> (ø)` | |\n| [...pache/hudi/index/bloom/HoodieGlobalBloomIndex.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaW5kZXgvYmxvb20vSG9vZGllR2xvYmFsQmxvb21JbmRleC5qYXZh) | `0.00% <0.00%> (-91.67%)` | `0.00 <0.00> (ø)` | |\n| [...che/hudi/index/simple/HoodieGlobalSimpleIndex.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaW5kZXgvc2ltcGxlL0hvb2RpZUdsb2JhbFNpbXBsZUluZGV4LmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...rg/apache/hudi/index/simple/HoodieSimpleIndex.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaW5kZXgvc2ltcGxlL0hvb2RpZVNpbXBsZUluZGV4LmphdmE=) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...g/apache/hudi/io/HoodieKeyLocationFetchHandle.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaW8vSG9vZGllS2V5TG9jYXRpb25GZXRjaEhhbmRsZS5qYXZh) | `0.00% <0.00%> (ø)` | `0.00 <0.00> (?)` | |\n| [...ain/java/org/apache/hudi/avro/HoodieAvroUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvYXZyby9Ib29kaWVBdnJvVXRpbHMuamF2YQ==) | `50.00% <0.00%> (-30.96%)` | `22.00 <0.00> (ø)` | |\n| [...java/org/apache/hudi/common/util/ParquetUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvUGFycXVldFV0aWxzLmphdmE=) | `0.00% <0.00%> (-73.69%)` | `0.00 <0.00> (ø)` | |\n| [...java/org/apache/hudi/config/HoodieIndexConfig.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29uZmlnL0hvb2RpZUluZGV4Q29uZmlnLmphdmE=) | `38.46% <33.33%> (-25.04%)` | `3.00 <0.00> (ø)` | |\n| [...n/java/org/apache/hudi/index/HoodieIndexUtils.java](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvaW5kZXgvSG9vZGllSW5kZXhVdGlscy5qYXZh) | `45.00% <45.00%> (ø)` | `3.00 <3.00> (?)` | |\n| ... and [322 more](https://codecov.io/gh/apache/incubator-hudi/pull/1402/diff?src=pr&el=tree-more) | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=footer). Last update [25e0b75...62f8b4c](https://codecov.io/gh/apache/incubator-hudi/pull/1402?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619680608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619682590","html_url":"https://github.com/apache/hudi/pull/1402#issuecomment-619682590","issue_url":"https://api.github.com/repos/apache/hudi/issues/1402","id":619682590,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY4MjU5MA==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T02:57:10Z","updated_at":"2020-04-27T02:57:10Z","author_association":"CONTRIBUTOR","body":"@vinothchandar @lamber-ken  : Patch is good to review. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619682590/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619698060","html_url":"https://github.com/apache/hudi/pull/1522#issuecomment-619698060","issue_url":"https://api.github.com/repos/apache/hudi/issues/1522","id":619698060,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY5ODA2MA==","user":{"login":"codecov-io","id":8655789,"node_id":"MDQ6VXNlcjg2NTU3ODk=","avatar_url":"https://avatars.githubusercontent.com/u/8655789?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-io","html_url":"https://github.com/codecov-io","followers_url":"https://api.github.com/users/codecov-io/followers","following_url":"https://api.github.com/users/codecov-io/following{/other_user}","gists_url":"https://api.github.com/users/codecov-io/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-io/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-io/subscriptions","organizations_url":"https://api.github.com/users/codecov-io/orgs","repos_url":"https://api.github.com/users/codecov-io/repos","events_url":"https://api.github.com/users/codecov-io/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-io/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T03:49:46Z","updated_at":"2020-04-29T06:45:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=h1) Report\n> Merging [#1522](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=desc) into [master](https://codecov.io/gh/apache/incubator-hudi/commit/06dae30297ea02ab122c9029a54f7927e8212039&el=desc) will **decrease** coverage by `0.04%`.\n> The diff coverage is `n/a`.\n\n[![Impacted file tree graph](https://codecov.io/gh/apache/incubator-hudi/pull/1522/graphs/tree.svg?width=650&height=150&src=pr&token=VTTXabwbs2)](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=tree)\n\n```diff\n@@             Coverage Diff              @@\n##             master    #1522      +/-   ##\n============================================\n- Coverage     71.85%   71.80%   -0.05%     \n  Complexity      294      294              \n============================================\n  Files           385      385              \n  Lines         16540    16540              \n  Branches       1661     1661              \n============================================\n- Hits          11884    11877       -7     \n- Misses         3925     3933       +8     \n+ Partials        731      730       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=tree) | Coverage Δ | Complexity Δ | |\n|---|---|---|---|\n| [...g/apache/hudi/metrics/InMemoryMetricsReporter.java](https://codecov.io/gh/apache/incubator-hudi/pull/1522/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9Jbk1lbW9yeU1ldHJpY3NSZXBvcnRlci5qYXZh) | `40.00% <0.00%> (-40.00%)` | `0.00% <0.00%> (ø%)` | |\n| [...src/main/java/org/apache/hudi/metrics/Metrics.java](https://codecov.io/gh/apache/incubator-hudi/pull/1522/diff?src=pr&el=tree#diff-aHVkaS1jbGllbnQvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvbWV0cmljcy9NZXRyaWNzLmphdmE=) | `56.75% <0.00%> (-10.82%)` | `0.00% <0.00%> (ø%)` | |\n| [...che/hudi/common/util/BufferedRandomAccessFile.java](https://codecov.io/gh/apache/incubator-hudi/pull/1522/diff?src=pr&el=tree#diff-aHVkaS1jb21tb24vc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL2h1ZGkvY29tbW9uL3V0aWwvQnVmZmVyZWRSYW5kb21BY2Nlc3NGaWxlLmphdmE=) | `54.38% <0.00%> (-0.88%)` | `0.00% <0.00%> (ø%)` | |\n\n------\n\n[Continue to review full report at Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=continue).\n> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)\n> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`\n> Powered by [Codecov](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=footer). Last update [06dae30...46808cf](https://codecov.io/gh/apache/incubator-hudi/pull/1522?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619698060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619749885","html_url":"https://github.com/apache/hudi/pull/1522#issuecomment-619749885","issue_url":"https://api.github.com/repos/apache/hudi/issues/1522","id":619749885,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTc0OTg4NQ==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T06:13:34Z","updated_at":"2020-04-27T06:13:34Z","author_association":"CONTRIBUTOR","body":"@yanghua It's green now.  Due to a issue in \r\nhttps://github.com/apache/incubator-hudi/blob/f721c675f8ee25c6f93d9596cc28b02de918ea24/hudi-common/src/main/java/org/apache/hudi/common/table/log/HoodieLogFormatWriter.java#L167-L170\r\n`rolloverIfNeeded ` always create a blank file at last, and 'show logfile records' get schema from last file which is blank. So read schema from first log file instead. \r\nBTW, I will try to fix the issue of the last blank file.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619749885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619786382","html_url":"https://github.com/apache/hudi/pull/1567#issuecomment-619786382","issue_url":"https://api.github.com/repos/apache/hudi/issues/1567","id":619786382,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTc4NjM4Mg==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T07:26:10Z","updated_at":"2020-04-27T07:26:10Z","author_association":"CONTRIBUTOR","body":"@yanghua please have a review when free.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619786382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619846548","html_url":"https://github.com/apache/hudi/issues/143#issuecomment-619846548","issue_url":"https://api.github.com/repos/apache/hudi/issues/143","id":619846548,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTg0NjU0OA==","user":{"login":"Trevor-zhang","id":33487819,"node_id":"MDQ6VXNlcjMzNDg3ODE5","avatar_url":"https://avatars.githubusercontent.com/u/33487819?v=4","gravatar_id":"","url":"https://api.github.com/users/Trevor-zhang","html_url":"https://github.com/Trevor-zhang","followers_url":"https://api.github.com/users/Trevor-zhang/followers","following_url":"https://api.github.com/users/Trevor-zhang/following{/other_user}","gists_url":"https://api.github.com/users/Trevor-zhang/gists{/gist_id}","starred_url":"https://api.github.com/users/Trevor-zhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Trevor-zhang/subscriptions","organizations_url":"https://api.github.com/users/Trevor-zhang/orgs","repos_url":"https://api.github.com/users/Trevor-zhang/repos","events_url":"https://api.github.com/users/Trevor-zhang/events{/privacy}","received_events_url":"https://api.github.com/users/Trevor-zhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T09:14:16Z","updated_at":"2020-04-27T09:14:16Z","author_association":"CONTRIBUTOR","body":"Please add: 957029362@qq.com","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619846548/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619981921","html_url":"https://github.com/apache/hudi/issues/1568#issuecomment-619981921","issue_url":"https://api.github.com/repos/apache/hudi/issues/1568","id":619981921,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTk4MTkyMQ==","user":{"login":"tieke1121","id":6927930,"node_id":"MDQ6VXNlcjY5Mjc5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/6927930?v=4","gravatar_id":"","url":"https://api.github.com/users/tieke1121","html_url":"https://github.com/tieke1121","followers_url":"https://api.github.com/users/tieke1121/followers","following_url":"https://api.github.com/users/tieke1121/following{/other_user}","gists_url":"https://api.github.com/users/tieke1121/gists{/gist_id}","starred_url":"https://api.github.com/users/tieke1121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tieke1121/subscriptions","organizations_url":"https://api.github.com/users/tieke1121/orgs","repos_url":"https://api.github.com/users/tieke1121/repos","events_url":"https://api.github.com/users/tieke1121/events{/privacy}","received_events_url":"https://api.github.com/users/tieke1121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T13:21:18Z","updated_at":"2020-04-27T13:21:18Z","author_association":"NONE","body":"spark structured streaming code :\r\n\r\n dataFrame.writeStream\r\n      .format(\"org.apache.hudi\")\r\n      .option(\"path\", conf.getString(\"hudi.basePath\"))\r\n      .option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, conf.getString(\"hudi.recordkey\"))\r\n      .option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, conf.getString(\"hudi.precombineKey\"))\r\n      .option(HoodieWriteConfig.TABLE_NAME, conf.getString(\"hudi.tableName\"))\r\n      .option(\"checkpointLocation\", conf.getString(\"hudi.checkpoinPath\"))\r\n      .option(DataSourceWriteOptions.HIVE_DATABASE_OPT_KEY, conf.getString(\"hive.database\"))\r\n      .option(DataSourceWriteOptions.HIVE_TABLE_OPT_KEY, conf.getString(\"hive.table\"))\r\n      .option(DataSourceWriteOptions.HIVE_URL_OPT_KEY, conf.getString(\"hive.url\"))\r\n      .option(DataSourceWriteOptions.HIVE_USER_OPT_KEY, conf.getString(\"hive.username\"))\r\n      .option(DataSourceWriteOptions.HIVE_PASS_OPT_KEY, conf.getString(\"hive.password\"))\r\n      .option(DataSourceWriteOptions.HIVE_SYNC_ENABLED_OPT_KEY, \"true\")\r\n      .option(DataSourceWriteOptions.HIVE_PARTITION_EXTRACTOR_CLASS_OPT_KEY, classOf[NonPartitionedExtractor].getCanonicalName)\r\n      .outputMode(OutputMode.Append())\r\n      .start()","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/619981921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620099888","html_url":"https://github.com/apache/hudi/pull/1100#issuecomment-620099888","issue_url":"https://api.github.com/repos/apache/hudi/issues/1100","id":620099888,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDA5OTg4OA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T16:40:27Z","updated_at":"2020-04-27T16:40:27Z","author_association":"CONTRIBUTOR","body":"@yanghua can you go through this PR and approve it ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620099888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620105240","html_url":"https://github.com/apache/hudi/pull/1457#issuecomment-620105240","issue_url":"https://api.github.com/repos/apache/hudi/issues/1457","id":620105240,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDEwNTI0MA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T16:50:22Z","updated_at":"2020-04-27T16:50:22Z","author_association":"MEMBER","body":"I guess its an oversight on my part. I will file another PR.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620105240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620107259","html_url":"https://github.com/apache/hudi/pull/1457#issuecomment-620107259","issue_url":"https://api.github.com/repos/apache/hudi/issues/1457","id":620107259,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDEwNzI1OQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T16:54:22Z","updated_at":"2020-04-27T16:54:22Z","author_association":"MEMBER","body":"@prashantwason no worries.. I already fixed it here https://github.com/apache/incubator-hudi/pull/1548 . Please take a quick skim to confirm ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620107259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620115770","html_url":"https://github.com/apache/hudi/pull/1526#issuecomment-620115770","issue_url":"https://api.github.com/repos/apache/hudi/issues/1526","id":620115770,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDExNTc3MA==","user":{"login":"vingov","id":1142498,"node_id":"MDQ6VXNlcjExNDI0OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1142498?v=4","gravatar_id":"","url":"https://api.github.com/users/vingov","html_url":"https://github.com/vingov","followers_url":"https://api.github.com/users/vingov/followers","following_url":"https://api.github.com/users/vingov/following{/other_user}","gists_url":"https://api.github.com/users/vingov/gists{/gist_id}","starred_url":"https://api.github.com/users/vingov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vingov/subscriptions","organizations_url":"https://api.github.com/users/vingov/orgs","repos_url":"https://api.github.com/users/vingov/repos","events_url":"https://api.github.com/users/vingov/events{/privacy}","received_events_url":"https://api.github.com/users/vingov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T17:10:04Z","updated_at":"2020-04-27T17:10:04Z","author_association":"CONTRIBUTOR","body":"I've validated the pyspark example code using the hudi demo docker setup, it looks good to me.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620115770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620125502","html_url":"https://github.com/apache/hudi/pull/1457#issuecomment-620125502","issue_url":"https://api.github.com/repos/apache/hudi/issues/1457","id":620125502,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDEyNTUwMg==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T17:28:51Z","updated_at":"2020-04-27T17:28:51Z","author_association":"MEMBER","body":"1548 looks good.\n\nOn Mon, Apr 27, 2020 at 9:54 AM vinoth chandar <notifications@github.com>\nwrote:\n\n> @prashantwason\n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_prashantwason&d=DwMCaQ&c=r2dcLCtU9q6n0vrtnDw9vg&r=c89AU9T1AVhM4r2Xi3ctZA&m=TTdYCvj60bIXAvnBAXKsIMQkIx6vb452NiyGQcRLi8c&s=jjuyzFOAZLdj0hvYoF4n-HnTC1Beh6EMFd17pecgNps&e=>\n> no worries.. I already fixed it here #1548\n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_apache_incubator-2Dhudi_pull_1548&d=DwMCaQ&c=r2dcLCtU9q6n0vrtnDw9vg&r=c89AU9T1AVhM4r2Xi3ctZA&m=TTdYCvj60bIXAvnBAXKsIMQkIx6vb452NiyGQcRLi8c&s=EtugoOEb8FcNSYz7bo1D5aemF4YrI8YFrm8c_lvMLNo&e=>\n> . Please take a quick skim to confirm\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_apache_incubator-2Dhudi_pull_1457-23issuecomment-2D620107259&d=DwMCaQ&c=r2dcLCtU9q6n0vrtnDw9vg&r=c89AU9T1AVhM4r2Xi3ctZA&m=TTdYCvj60bIXAvnBAXKsIMQkIx6vb452NiyGQcRLi8c&s=Y0pBKlXubwj3__9yg111nY9VtVCQnhnzs4fYSRatvd0&e=>,\n> or unsubscribe\n> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AN55SSYEOG2UKDE43Z3ZIEDROW2FBANCNFSM4LVG2GDQ&d=DwMCaQ&c=r2dcLCtU9q6n0vrtnDw9vg&r=c89AU9T1AVhM4r2Xi3ctZA&m=TTdYCvj60bIXAvnBAXKsIMQkIx6vb452NiyGQcRLi8c&s=kbtVscWq16pK1dyiOqrUh-z9bqX2-kRw-JUyRrS6T7g&e=>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620125502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620126939","html_url":"https://github.com/apache/hudi/pull/1540#issuecomment-620126939","issue_url":"https://api.github.com/repos/apache/hudi/issues/1540","id":620126939,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDEyNjkzOQ==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T17:31:39Z","updated_at":"2020-04-27T17:31:39Z","author_association":"MEMBER","body":"@vinothchandar addressed your review comments. please take another look.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620126939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620198845","html_url":"https://github.com/apache/hudi/pull/1567#issuecomment-620198845","issue_url":"https://api.github.com/repos/apache/hudi/issues/1567","id":620198845,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDE5ODg0NQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T19:53:39Z","updated_at":"2020-04-27T19:53:39Z","author_association":"MEMBER","body":"@n3nash could you also review this since it touches the common log format writer as well ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620198845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620199568","html_url":"https://github.com/apache/hudi/pull/1566#issuecomment-620199568","issue_url":"https://api.github.com/repos/apache/hudi/issues/1566","id":620199568,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDE5OTU2OA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T19:55:19Z","updated_at":"2020-04-27T19:55:19Z","author_association":"MEMBER","body":"@afilipchik interested in taking a run at this? :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620199568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620199838","html_url":"https://github.com/apache/hudi/pull/1562#issuecomment-620199838","issue_url":"https://api.github.com/repos/apache/hudi/issues/1562","id":620199838,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDE5OTgzOA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T19:55:57Z","updated_at":"2020-04-27T19:55:57Z","author_association":"MEMBER","body":"@afilipchik interested in reviewing this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620199838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620201027","html_url":"https://github.com/apache/hudi/issues/1555#issuecomment-620201027","issue_url":"https://api.github.com/repos/apache/hudi/issues/1555","id":620201027,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDIwMTAyNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T19:58:27Z","updated_at":"2020-04-27T19:58:27Z","author_association":"CONTRIBUTOR","body":"@allenzhg : Let me know if you were able to resolve this ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620201027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620202899","html_url":"https://github.com/apache/hudi/pull/1512#issuecomment-620202899","issue_url":"https://api.github.com/repos/apache/hudi/issues/1512","id":620202899,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDIwMjg5OQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T20:02:07Z","updated_at":"2020-04-27T20:02:07Z","author_association":"MEMBER","body":"Just 1 suggestion. LGTM otherwise . thanks @lamber-ken ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620202899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620204439","html_url":"https://github.com/apache/hudi/pull/1433#issuecomment-620204439","issue_url":"https://api.github.com/repos/apache/hudi/issues/1433","id":620204439,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDIwNDQzOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T20:05:20Z","updated_at":"2020-04-27T20:05:20Z","author_association":"MEMBER","body":">>Should I include that in this PR or should I go for a separate PR. Please suggest.\r\n\r\nYour call.. Doing it here is fine by me as well, since you are touching all those files anyway.. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620204439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620226161","html_url":"https://github.com/apache/hudi/pull/1558#issuecomment-620226161","issue_url":"https://api.github.com/repos/apache/hudi/issues/1558","id":620226161,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDIyNjE2MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T20:48:56Z","updated_at":"2020-04-27T20:48:56Z","author_association":"MEMBER","body":"cc @yanghua @hddong are you able to review this? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620226161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620233014","html_url":"https://github.com/apache/hudi/pull/1402#issuecomment-620233014","issue_url":"https://api.github.com/repos/apache/hudi/issues/1402","id":620233014,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDIzMzAxNA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:03:15Z","updated_at":"2020-04-27T21:03:15Z","author_association":"MEMBER","body":"@nsivabalan is this still WIP.. please remove the prefix if its ready ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620233014/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620241928","html_url":"https://github.com/apache/hudi/pull/1520#issuecomment-620241928","issue_url":"https://api.github.com/repos/apache/hudi/issues/1520","id":620241928,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI0MTkyOA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:21:28Z","updated_at":"2020-04-27T21:21:28Z","author_association":"MEMBER","body":"HoodieParquetRealtimeInputFormat has hardcoded the positions of the HUDI specific metadata fields.\r\n\r\n  // These positions have to be deterministic across all tables\r\n  public static final int HOODIE_COMMIT_TIME_COL_POS = 0;\r\n  public static final int HOODIE_RECORD_KEY_COL_POS = 2;\r\n  public static final int HOODIE_PARTITION_PATH_COL_POS = 3;\r\n  public static final String HOODIE_READ_COLUMNS_PROP = \"hoodie.read.columns.set\";\r\n\r\nThis is incompatible with the changes required in this PR. Am looking into the reason for the above and whether I can work around it.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620241928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620243226","html_url":"https://github.com/apache/hudi/pull/1402#issuecomment-620243226","issue_url":"https://api.github.com/repos/apache/hudi/issues/1402","id":620243226,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI0MzIyNg==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:24:17Z","updated_at":"2020-04-27T21:24:17Z","author_association":"CONTRIBUTOR","body":"> @nsivabalan is this still WIP.. please remove the prefix if its ready\r\n\r\ndone. it is ready. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620243226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620246831","html_url":"https://github.com/apache/hudi/issues/1552#issuecomment-620246831","issue_url":"https://api.github.com/repos/apache/hudi/issues/1552","id":620246831,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI0NjgzMQ==","user":{"login":"lamberken","id":20113411,"node_id":"MDQ6VXNlcjIwMTEzNDEx","avatar_url":"https://avatars.githubusercontent.com/u/20113411?v=4","gravatar_id":"","url":"https://api.github.com/users/lamberken","html_url":"https://github.com/lamberken","followers_url":"https://api.github.com/users/lamberken/followers","following_url":"https://api.github.com/users/lamberken/following{/other_user}","gists_url":"https://api.github.com/users/lamberken/gists{/gist_id}","starred_url":"https://api.github.com/users/lamberken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lamberken/subscriptions","organizations_url":"https://api.github.com/users/lamberken/orgs","repos_url":"https://api.github.com/users/lamberken/repos","events_url":"https://api.github.com/users/lamberken/events{/privacy}","received_events_url":"https://api.github.com/users/lamberken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:32:05Z","updated_at":"2020-04-27T21:33:03Z","author_association":"MEMBER","body":"## The lastest spark log (master branch)\r\n\r\n### Simplified origin spark log\r\n```\r\n// Upsert part\r\nWarning: Ignoring non-spark config property: \"spark.sql.hive.convertMetastoreParquet=false\"\r\nWarning: Ignoring non-spark config property: \"spark.serializer=org.apache.spark.serializer.KryoSerializer\"\r\n20/04/26 17:35:58 WARN S3CryptoModuleAE: Unable to detect encryption information for object 'jar' in bucket '<storageBucket>'. Returning object without decryption.\r\n\r\n// Start rollback\r\n20/04/26 17:36:34 INFO HoodieWriteClient: Begin rollback of instant 20200426170940\r\n20/04/26 17:36:34 INFO HoodieTableMetaClient: Loading HoodieTableMetaClient from <storageLocation>\r\n20/04/26 17:36:34 INFO FSUtils: Hadoop Configuration: fs.defaultFS: [hdfs://ip-10-0-55-99.ec2.internal:8020]\r\n\r\n// Output repeatly \r\n20/04/26 17:36:40 INFO FileStatusExt: Metadata Entry doesn't exist\r\n...\r\n20/04/26 18:19:07 INFO FileStatusExt: Metadata Entry doesn't exist\r\n\r\n// Finish\r\n20/04/26 18:19:08 INFO CleanActionExecutor: Total Partitions to clean : 6052, with policy KEEP_LATEST_COMMITS\r\n20/04/26 18:19:08 INFO CleanActionExecutor: Using cleanerParallelism: 6000\r\n20/04/26 18:19:08 INFO SparkContext: Starting job: collect at CleanActionExecutor.java:87\r\n20/04/26 18:19:08 INFO DAGScheduler: Got job 10 (collect at CleanActionExecutor.java:87) with 6000 output partitions\r\n20/04/26 18:19:08 INFO DAGScheduler: Final stage: ResultStage 30 (collect at CleanActionExecutor.java:87)\r\n20/04/26 18:19:08 INFO DAGScheduler: Parents of final stage: List()\r\n20/04/26 18:19:08 INFO DAGScheduler: Missing parents: List()\r\n20/04/26 18:19:08 INFO DAGScheduler: Submitting ResultStage 30 (MapPartitionsRDD[63] at map at CleanActionExecutor.java:86), which has no missing parents\r\n20/04/26 18:19:08 INFO MemoryStore: Block broadcast_20 stored as values in memory (estimated size 247.7 KB, free 1008.3 MB)\r\n20/04/26 18:19:08 INFO MemoryStore: Block broadcast_20_piece0 stored as bytes in memory (estimated size 87.1 KB, free 1008.2 MB)\r\n20/04/26 18:19:08 INFO BlockManagerInfo: Added broadcast_20_piece0 in memory on ip-10-0-55-99.ec2.internal:44415 (size: 87.1 KB, free: 1008.8 MB)\r\n20/04/26 18:19:08 INFO SparkContext: Created broadcast 20 from broadcast at DAGScheduler.scala:1201\r\n20/04/26 18:19:08 INFO DAGScheduler: Submitting 6000 missing tasks from ResultStage 30 (MapPartitionsRDD[63] at map at CleanActionExecutor.java:86) (first 15 tasks are for partitions Vector(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14))\r\n20/04/26 18:19:08 INFO YarnScheduler: Adding task set 30.0 with 6000 tasks\r\n20/04/26 18:19:23 INFO YarnScheduler: Removed TaskSet 32.0, whose tasks have all completed, from pool \r\n20/04/26 18:19:23 INFO DAGScheduler: ResultStage 32 (collect at CleanActionExecutor.java:155) finished in 3.444 s\r\n20/04/26 18:19:23 INFO DAGScheduler: Job 11 finished: collect at CleanActionExecutor.java:155, took 8.313284 s\r\n20/04/26 18:19:23 INFO HoodieActiveTimeline: Loaded instants [[20200425201231__clean__COMPLETED], [20200425201231__commit__COMPLETED], [==>20200426173625__clean__INFLIGHT], [20200426173625__commit__COMPLETED]]\r\n20/04/26 18:19:24 INFO HoodieActiveTimeline: Checking for file exists ?<storageLocation>.hoodie/20200426173625.clean.inflight\r\n20/04/26 18:19:24 INFO CSEMultipartUploadOutputStream: close closed:false <storageLocation>.hoodie/20200426173625.clean\r\n20/04/26 18:19:24 INFO DefaultMultipartUploadDispatcher: Completed multipart upload of 1 parts 273450 bytes\r\n20/04/26 18:19:24 INFO CSEMultipartUploadOutputStream: Finished uploading <storageLocation>.hoodie/20200426173625.clean. Elapsed seconds: 0.\r\n20/04/26 18:19:24 INFO HoodieActiveTimeline: Create new file for toInstant ?<storageLocation>.hoodie/20200426173625.clean\r\n20/04/26 18:19:24 INFO CleanActionExecutor: Marked clean started on 20200426173625 as complete\r\n20/04/26 18:19:24 INFO AbstractHoodieWriteClient: Committed 20200426173625\r\n20/04/26 18:19:24 INFO HoodieSparkSqlWriter$: Commit 20200426173625 successful!\r\n20/04/26 18:19:28 INFO SparkContext: Invoking stop() from shutdown hook\r\n20/04/26 18:19:28 INFO SparkUI: Stopped Spark web UI at ip\r\n20/04/26 18:19:28 INFO YarnClientSchedulerBackend: Interrupting monitor thread\r\n20/04/26 18:19:28 INFO YarnClientSchedulerBackend: Shutting down all executors\r\n20/04/26 18:19:28 INFO YarnSchedulerBackend$YarnDriverEndpoint: Asking each executor to shut down\r\n20/04/26 18:19:28 INFO SchedulerExtensionServices: Stopping SchedulerExtensionServices\r\n(serviceOption=None,\r\n services=List(),\r\n started=false)\r\n20/04/26 18:19:28 INFO YarnClientSchedulerBackend: Stopped\r\n20/04/26 18:19:28 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\r\n20/04/26 18:19:28 INFO MemoryStore: MemoryStore cleared\r\n20/04/26 18:19:28 INFO BlockManager: BlockManager stopped\r\n20/04/26 18:19:28 INFO BlockManagerMaster: BlockManagerMaster stopped\r\n20/04/26 18:19:28 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\r\n20/04/26 18:19:28 INFO SparkContext: Successfully stopped SparkContext\r\n20/04/26 18:19:28 INFO ShutdownHookManager: Shutdown hook called\r\n20/04/26 18:19:28 INFO ShutdownHookManager: Deleting directory /mnt/tmp/spark-e12c26c7-150a-4837-8fb2-72db585dd2f3\r\n20/04/26 18:19:28 INFO ShutdownHookManager: Deleting directory /mnt/tmp/spark-1a4b587a-a177-4cab-8f93-6849d64386d9\r\nCommand exiting with ret '0'\r\n```\r\n\r\n#### Analysis\r\n\r\n![image](https://user-images.githubusercontent.com/20113411/80422808-6b8be100-8911-11ea-9dd1-bfa6b0bafd9c.png)\r\n\r\n### Analysis about step 2\r\n\r\n`Rollback` cost 42mins, output `FileStatusExt: Metadata Entry doesn't exist` repeatly.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620246831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620251761","html_url":"https://github.com/apache/hudi/issues/1531#issuecomment-620251761","issue_url":"https://api.github.com/repos/apache/hudi/issues/1531","id":620251761,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI1MTc2MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:43:53Z","updated_at":"2020-04-27T21:43:53Z","author_association":"CONTRIBUTOR","body":"@c-f-cooper : Which version of hudi are you using ? This has been fixed in master ( https://github.com/apache/incubator-hudi/blob/master/hudi-client/src/test/java/HoodieClientExample.java#L98) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620251761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620252568","html_url":"https://github.com/apache/hudi/issues/1549#issuecomment-620252568","issue_url":"https://api.github.com/repos/apache/hudi/issues/1549","id":620252568,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI1MjU2OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:45:54Z","updated_at":"2020-04-27T21:45:54Z","author_association":"CONTRIBUTOR","body":"@n3nash : Assigning this ticket to you ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620252568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620254532","html_url":"https://github.com/apache/hudi/issues/1550#issuecomment-620254532","issue_url":"https://api.github.com/repos/apache/hudi/issues/1550","id":620254532,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI1NDUzMg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T21:50:36Z","updated_at":"2020-04-27T21:50:36Z","author_association":"CONTRIBUTOR","body":"Closing this issue as it will be resolved in next release.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620254532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620292854","html_url":"https://github.com/apache/hudi/issues/1568#issuecomment-620292854","issue_url":"https://api.github.com/repos/apache/hudi/issues/1568","id":620292854,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDI5Mjg1NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T23:44:04Z","updated_at":"2020-04-27T23:44:04Z","author_association":"CONTRIBUTOR","body":"@tieke1121 : For non-partitioned table, you would need to use NonpartitionedKeyGenerator as key-generator class. Can you set it up and give it a shot. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620292854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620303776","html_url":"https://github.com/apache/hudi/issues/1556#issuecomment-620303776","issue_url":"https://api.github.com/repos/apache/hudi/issues/1556","id":620303776,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMwMzc3Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T00:20:27Z","updated_at":"2020-04-28T00:20:27Z","author_association":"CONTRIBUTOR","body":"@HariprasadAllaka1612 Not sure if I completely understand the context here. \r\n\r\nQuestions inline related to your descriptions ?\r\n\r\n1. Reading CDC table from hive (hoodie table) to get the latest marker,\r\n     what do you mean by marker ? Is it commit time of Hudi or some timestamped directory that you are using as input folder ?\r\n2. Read the files from S3 based on the latest marked read in step1. \r\n     Are you reading the files directly or from running incremental query here ?\r\n\r\nIn general, this could be eventual consistency issue too. Does the path s3a://gat-datalake-refined-dev/reports/player/dat/2020/04/23 belong to the CDC table ? Does it actually exist when you do aws s3 ls ? Did CDC pipeline ran with consistency guard enabled ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620303776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620308695","html_url":"https://github.com/apache/hudi/pull/1553#issuecomment-620308695","issue_url":"https://api.github.com/repos/apache/hudi/issues/1553","id":620308695,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMwODY5NQ==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T00:37:48Z","updated_at":"2020-04-28T00:37:48Z","author_association":"MEMBER","body":"@yanghua Fixed 2 new conflicts\r\nhudi-client/src/test/java/org/apache/hudi/execution/TestBoundedInMemoryExecutor.java\r\nhudi-client/src/test/java/org/apache/hudi/execution/TestBoundedInMemoryQueue.java","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620308695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620319666","html_url":"https://github.com/apache/hudi/issues/1569#issuecomment-620319666","issue_url":"https://api.github.com/repos/apache/hudi/issues/1569","id":620319666,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMxOTY2Ng==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T01:16:39Z","updated_at":"2020-04-28T01:16:39Z","author_association":"CONTRIBUTOR","body":"With cleaning, you can setup cleaning parameters so that you have enough versions retained ( see https://hudi.apache.org/docs/configurations.html#retainCommits). You can also align the compaction runs with your audit schedule by keeping \"hoodie.compact.inline.max.delta.commits\" same as the number_of_delta_commits_before_audit to control compaction runs. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620319666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620324107","html_url":"https://github.com/apache/hudi/issues/1568#issuecomment-620324107","issue_url":"https://api.github.com/repos/apache/hudi/issues/1568","id":620324107,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMyNDEwNw==","user":{"login":"tieke1121","id":6927930,"node_id":"MDQ6VXNlcjY5Mjc5MzA=","avatar_url":"https://avatars.githubusercontent.com/u/6927930?v=4","gravatar_id":"","url":"https://api.github.com/users/tieke1121","html_url":"https://github.com/tieke1121","followers_url":"https://api.github.com/users/tieke1121/followers","following_url":"https://api.github.com/users/tieke1121/following{/other_user}","gists_url":"https://api.github.com/users/tieke1121/gists{/gist_id}","starred_url":"https://api.github.com/users/tieke1121/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tieke1121/subscriptions","organizations_url":"https://api.github.com/users/tieke1121/orgs","repos_url":"https://api.github.com/users/tieke1121/repos","events_url":"https://api.github.com/users/tieke1121/events{/privacy}","received_events_url":"https://api.github.com/users/tieke1121/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T01:32:53Z","updated_at":"2020-04-28T01:38:42Z","author_association":"NONE","body":"I've set it up\r\n```\r\n dataFrame.writeStream\r\n      .format(\"org.apache.hudi\")\r\n      .option(\"path\", conf.getString(\"hudi.basePath\"))\r\n      .option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, conf.getString(\"hudi.recordkey\"))\r\n      .option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, conf.getString(\"hudi.precombineKey\"))\r\n      .option(HoodieWriteConfig.TABLE_NAME, conf.getString(\"hudi.tableName\"))\r\n      .option(\"checkpointLocation\", conf.getString(\"hudi.checkpoinPath\"))\r\n      .option(DataSourceWriteOptions.HIVE_DATABASE_OPT_KEY, conf.getString(\"hive.database\"))\r\n      .option(DataSourceWriteOptions.HIVE_TABLE_OPT_KEY, conf.getString(\"hive.table\"))\r\n      .option(DataSourceWriteOptions.HIVE_URL_OPT_KEY, conf.getString(\"hive.url\"))\r\n      .option(DataSourceWriteOptions.HIVE_USER_OPT_KEY, conf.getString(\"hive.username\"))\r\n      .option(DataSourceWriteOptions.HIVE_PASS_OPT_KEY, conf.getString(\"hive.password\"))\r\n      .option(DataSourceWriteOptions.HIVE_SYNC_ENABLED_OPT_KEY, \"true\")\r\n      .option(DataSourceWriteOptions.KEYGENERATOR_CLASS_OPT_KEY,classOf[NonpartitionedKeyGenerator].getCanonicalName)\r\n      .option(DataSourceWriteOptions.HIVE_PARTITION_EXTRACTOR_CLASS_OPT_KEY, classOf[NonPartitionedExtractor].getCanonicalName)\r\n      .outputMode(OutputMode.Append())\r\n      .start()\r\n\r\nand the hdfs path is : \r\n-rw-r--r--   3 root supergroup     737196 2020-04-28 01:16 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-1068-281898_20200428011554.parquet\r\n-rw-r--r--   3 root supergroup     745158 2020-04-28 01:16 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-1120-295461_20200428011603.parquet\r\n-rw-r--r--   3 root supergroup     750006 2020-04-28 01:16 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-1168-309014_20200428011613.parquet\r\n-rw-r--r--   3 root supergroup     755947 2020-04-28 01:16 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-1217-322579_20200428011624.parquet\r\n-rw-r--r--   3 root supergroup     765879 2020-04-28 01:16 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-1267-336149_20200428011634.parquet\r\n-rw-r--r--   3 root supergroup     690225 2020-04-28 01:14 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-770-200500_20200428011449.parquet\r\n-rw-r--r--   3 root supergroup     698213 2020-04-28 01:15 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-819-214064_20200428011500.parquet\r\n-rw-r--r--   3 root supergroup     705870 2020-04-28 01:15 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-870-227637_20200428011511.parquet\r\n-rw-r--r--   3 root supergroup     713830 2020-04-28 01:15 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-918-241200_20200428011521.parquet\r\n-rw-r--r--   3 root supergroup     720687 2020-04-28 01:15 /wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-967-254767_20200428011532.parquet\r\n\r\nwhen i quey simple hive sql ： select deviceid from device_status_hudi_1; \r\nthe query is ok\r\n\r\nbut I use the complex hive SQL ： select deviceid from device_status_hudi_1 group by deviceid having count(deviceid)>1;\r\n\r\nError: Error while processing statement: FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask (state=08S01,code=2)\r\n\r\n```\r\n2020-04-28 01:29:16,698 INFO [main] org.apache.hadoop.hive.conf.HiveConf: Found configuration file null\r\n2020-04-28 01:29:16,880 INFO [main] org.apache.hadoop.hive.ql.exec.SerializationUtilities: Deserializing MapWork using kryo\r\n2020-04-28 01:29:17,045 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : java.io.IOException: java.lang.reflect.InvocationTargetException\r\n\tat org.apache.hadoop.hive.io.HiveIOExceptionHandlerChain.handleRecordReaderCreationException(HiveIOExceptionHandlerChain.java:97)\r\n\tat org.apache.hadoop.hive.io.HiveIOExceptionHandlerUtil.handleRecordReaderCreationException(HiveIOExceptionHandlerUtil.java:57)\r\n\tat org.apache.hadoop.hive.shims.HadoopShimsSecure$CombineFileRecordReader.initNextRecordReader(HadoopShimsSecure.java:271)\r\n\tat org.apache.hadoop.hive.shims.HadoopShimsSecure$CombineFileRecordReader.<init>(HadoopShimsSecure.java:217)\r\n\tat org.apache.hadoop.hive.shims.HadoopShimsSecure$CombineFileInputFormatShim.getRecordReader(HadoopShimsSecure.java:345)\r\n\tat org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getRecordReader(CombineHiveInputFormat.java:702)\r\n\tat org.apache.hadoop.mapred.MapTask$TrackedRecordReader.<init>(MapTask.java:175)\r\n\tat org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:444)\r\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:349)\r\n\tat org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:174)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1875)\r\n\tat org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:168)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat org.apache.hadoop.hive.shims.HadoopShimsSecure$CombineFileRecordReader.initNextRecordReader(HadoopShimsSecure.java:257)\r\n\t... 11 more\r\nCaused by: java.io.FileNotFoundException: File does not exist: hdfs://sap-namenode1:8020/wap-olap/data/device/status/data_1/b33868cc-6609-47a3-8e93-bdd248deb21e-0_0-4288-1150066_20200428012704.parquet\r\n\tat org.apache.hadoop.hdfs.DistributedFileSystem$29.doCall(DistributedFileSystem.java:1500)\r\n\tat org.apache.hadoop.hdfs.DistributedFileSystem$29.doCall(DistributedFileSystem.java:1493)\r\n\tat org.apache.hadoop.fs.FileSystemLinkResolver.resolve(FileSystemLinkResolver.java:81)\r\n\tat org.apache.hadoop.hdfs.DistributedFileSystem.getFileStatus(DistributedFileSystem.java:1508)\r\n\tat org.apache.parquet.hadoop.util.HadoopInputFile.fromPath(HadoopInputFile.java:39)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:413)\r\n\tat org.apache.parquet.hadoop.ParquetFileReader.readFooter(ParquetFileReader.java:400)\r\n\tat org.apache.hadoop.hive.ql.io.parquet.ParquetRecordReaderBase.getSplit(ParquetRecordReaderBase.java:79)\r\n\tat org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.<init>(ParquetRecordReaderWrapper.java:78)\r\n\tat org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.<init>(ParquetRecordReaderWrapper.java:63)\r\n\tat org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat.getRecordReader(MapredParquetInputFormat.java:75)\r\n\tat org.apache.hudi.hadoop.HoodieParquetInputFormat.getRecordReader(HoodieParquetInputFormat.java:297)\r\n\tat org.apache.hadoop.hive.ql.io.CombineHiveRecordReader.<init>(CombineHiveRecordReader.java:68)\r\n\t... 16 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/620324107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]