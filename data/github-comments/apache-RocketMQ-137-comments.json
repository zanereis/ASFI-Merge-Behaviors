[{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346032325","html_url":"https://github.com/apache/rocketmq/issues/5691#issuecomment-1346032325","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5691","id":1346032325,"node_id":"IC_kwDOBHrsl85QOtLF","user":{"login":"fuyou001","id":685537,"node_id":"MDQ6VXNlcjY4NTUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/685537?v=4","gravatar_id":"","url":"https://api.github.com/users/fuyou001","html_url":"https://github.com/fuyou001","followers_url":"https://api.github.com/users/fuyou001/followers","following_url":"https://api.github.com/users/fuyou001/following{/other_user}","gists_url":"https://api.github.com/users/fuyou001/gists{/gist_id}","starred_url":"https://api.github.com/users/fuyou001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuyou001/subscriptions","organizations_url":"https://api.github.com/users/fuyou001/orgs","repos_url":"https://api.github.com/users/fuyou001/repos","events_url":"https://api.github.com/users/fuyou001/events{/privacy}","received_events_url":"https://api.github.com/users/fuyou001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T07:51:50Z","updated_at":"2022-12-12T08:05:53Z","author_association":"CONTRIBUTOR","body":"@linux-lpx 云产品问题建议可以提工单咨询；\r\n当前V4版本ONS SDK是不支持；V5 SDK我们有计划做；\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346032325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346035011","html_url":"https://github.com/apache/rocketmq/issues/5691#issuecomment-1346035011","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5691","id":1346035011,"node_id":"IC_kwDOBHrsl85QOt1D","user":{"login":"linux-lpx","id":15316382,"node_id":"MDQ6VXNlcjE1MzE2Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/15316382?v=4","gravatar_id":"","url":"https://api.github.com/users/linux-lpx","html_url":"https://github.com/linux-lpx","followers_url":"https://api.github.com/users/linux-lpx/followers","following_url":"https://api.github.com/users/linux-lpx/following{/other_user}","gists_url":"https://api.github.com/users/linux-lpx/gists{/gist_id}","starred_url":"https://api.github.com/users/linux-lpx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linux-lpx/subscriptions","organizations_url":"https://api.github.com/users/linux-lpx/orgs","repos_url":"https://api.github.com/users/linux-lpx/repos","events_url":"https://api.github.com/users/linux-lpx/events{/privacy}","received_events_url":"https://api.github.com/users/linux-lpx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T07:55:07Z","updated_at":"2022-12-12T07:55:07Z","author_association":"NONE","body":"也就是说现在我买了阿里云的rocketmq5.0版本产品，但是开发中我无法使用**@RocketMQMessageListener**注解，需要等新版本的rocketmq-spring-boot","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346035011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346036086","html_url":"https://github.com/apache/rocketmq/issues/5683#issuecomment-1346036086","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5683","id":1346036086,"node_id":"IC_kwDOBHrsl85QOuF2","user":{"login":"fuyou001","id":685537,"node_id":"MDQ6VXNlcjY4NTUzNw==","avatar_url":"https://avatars.githubusercontent.com/u/685537?v=4","gravatar_id":"","url":"https://api.github.com/users/fuyou001","html_url":"https://github.com/fuyou001","followers_url":"https://api.github.com/users/fuyou001/followers","following_url":"https://api.github.com/users/fuyou001/following{/other_user}","gists_url":"https://api.github.com/users/fuyou001/gists{/gist_id}","starred_url":"https://api.github.com/users/fuyou001/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuyou001/subscriptions","organizations_url":"https://api.github.com/users/fuyou001/orgs","repos_url":"https://api.github.com/users/fuyou001/repos","events_url":"https://api.github.com/users/fuyou001/events{/privacy}","received_events_url":"https://api.github.com/users/fuyou001/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T07:56:28Z","updated_at":"2022-12-12T07:56:28Z","author_association":"CONTRIBUTOR","body":"@towardsvast please  provide  consuemrprogress -g gid   command result.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346036086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346038907","html_url":"https://github.com/apache/rocketmq/issues/5691#issuecomment-1346038907","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5691","id":1346038907,"node_id":"IC_kwDOBHrsl85QOux7","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T07:59:52Z","updated_at":"2022-12-12T07:59:52Z","author_association":"CONTRIBUTOR","body":"商业版本的问题建议提工单咨询。\r\n\r\n我理解是能够支持的，rocketmq.name-server里面填提供的endpoints即可。","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346038907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346040340","html_url":"https://github.com/apache/rocketmq/issues/5691#issuecomment-1346040340","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5691","id":1346040340,"node_id":"IC_kwDOBHrsl85QOvIU","user":{"login":"linux-lpx","id":15316382,"node_id":"MDQ6VXNlcjE1MzE2Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/15316382?v=4","gravatar_id":"","url":"https://api.github.com/users/linux-lpx","html_url":"https://github.com/linux-lpx","followers_url":"https://api.github.com/users/linux-lpx/followers","following_url":"https://api.github.com/users/linux-lpx/following{/other_user}","gists_url":"https://api.github.com/users/linux-lpx/gists{/gist_id}","starred_url":"https://api.github.com/users/linux-lpx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linux-lpx/subscriptions","organizations_url":"https://api.github.com/users/linux-lpx/orgs","repos_url":"https://api.github.com/users/linux-lpx/repos","events_url":"https://api.github.com/users/linux-lpx/events{/privacy}","received_events_url":"https://api.github.com/users/linux-lpx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T08:01:18Z","updated_at":"2022-12-12T08:01:18Z","author_association":"NONE","body":"好的，谢谢","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346040340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346052776","html_url":"https://github.com/apache/rocketmq/issues/5656#issuecomment-1346052776","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5656","id":1346052776,"node_id":"IC_kwDOBHrsl85QOyKo","user":{"login":"sundayhk","id":14009345,"node_id":"MDQ6VXNlcjE0MDA5MzQ1","avatar_url":"https://avatars.githubusercontent.com/u/14009345?v=4","gravatar_id":"","url":"https://api.github.com/users/sundayhk","html_url":"https://github.com/sundayhk","followers_url":"https://api.github.com/users/sundayhk/followers","following_url":"https://api.github.com/users/sundayhk/following{/other_user}","gists_url":"https://api.github.com/users/sundayhk/gists{/gist_id}","starred_url":"https://api.github.com/users/sundayhk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundayhk/subscriptions","organizations_url":"https://api.github.com/users/sundayhk/orgs","repos_url":"https://api.github.com/users/sundayhk/repos","events_url":"https://api.github.com/users/sundayhk/events{/privacy}","received_events_url":"https://api.github.com/users/sundayhk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T08:10:22Z","updated_at":"2022-12-12T08:10:22Z","author_association":"NONE","body":"Solved. Proxy grpc related information hope to add。\r\nrmq-proxy.json\r\n{\r\n  \"rocketMQClusterName\": \"DefaultCluster\",\r\n  \"grpcTlsTestModeEnable\": false,\r\n  \"grpcTlsKeyPath\": \"/usr/local/rocketmq/conf/tls/server.key\",\r\n  \"grpcTlsCertPath\": \"/usr/local/rocketmq/conf/tls/server.pem\"\r\n}","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346052776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346066369","html_url":"https://github.com/apache/rocketmq/issues/5680#issuecomment-1346066369","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5680","id":1346066369,"node_id":"IC_kwDOBHrsl85QO1fB","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T08:17:45Z","updated_at":"2022-12-12T08:17:45Z","author_association":"CONTRIBUTOR","body":"RocketMQ 5.0 itself does not introduce differences on the broker side, so you can reference the original performance report.\r\n\r\n\r\nAs for the proxy, there is no performance data for now. But it's an optional component both in `Cluster` and `Local` mode. `Cluster` mode should be compared with Kafka proxy-like components while `Local` mode introduces an extra protocol translation, so its performance is slightly lesser than the original broker.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346066369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346106845","html_url":"https://github.com/apache/rocketmq/issues/5663#issuecomment-1346106845","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5663","id":1346106845,"node_id":"IC_kwDOBHrsl85QO_Xd","user":{"login":"lizhimins","id":22487634,"node_id":"MDQ6VXNlcjIyNDg3NjM0","avatar_url":"https://avatars.githubusercontent.com/u/22487634?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhimins","html_url":"https://github.com/lizhimins","followers_url":"https://api.github.com/users/lizhimins/followers","following_url":"https://api.github.com/users/lizhimins/following{/other_user}","gists_url":"https://api.github.com/users/lizhimins/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhimins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhimins/subscriptions","organizations_url":"https://api.github.com/users/lizhimins/orgs","repos_url":"https://api.github.com/users/lizhimins/repos","events_url":"https://api.github.com/users/lizhimins/events{/privacy}","received_events_url":"https://api.github.com/users/lizhimins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T08:51:09Z","updated_at":"2022-12-12T08:55:52Z","author_association":"MEMBER","body":"这个场景仅会发生在允许自动降级时。A觉得B宕了，A自己又宕了，本身已经超越了 SLA 的要求（2副本下副本全挂）\r\n\r\n本质上这里只是个选可用性还是选一致性的问题。目前的设计为了保证可用性所以允许写，在 A 重启成功后也可以通过回发把分叉的数据送给 B，类似于 container 中的 escape bridge 设计。如果要保证数据一致性，把 syncStateSet 收缩移动到 alert controller 成功之后就可以了，这样的话消息就会发送失败了。\r\n\r\n考虑网络分区或者 controller 挂了的情况，A 没法降级了，这里一个更好的解决办法是加入租约","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346106845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346665093","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1346665093","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1346665093,"node_id":"IC_kwDOBHrsl85QRHqF","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-12T15:05:29Z","updated_at":"2022-12-12T15:05:29Z","author_association":"MEMBER","body":"> No, we don't need to add configuration file into the distribution directory because it has been included by the generated jar.\r\n\r\n@aaron-ai IMO, it has been included by the generated jar, but if O&M wants to change the log level, they can't. So I think should add those files into the distribution directory. It is convenient to modify the log level and log output position dynamically.I think these files should be included for binary packages.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1346665093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347554681","html_url":"https://github.com/apache/rocketmq/issues/3253#issuecomment-1347554681","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/3253","id":1347554681,"node_id":"IC_kwDOBHrsl85QUg15","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T00:08:22Z","updated_at":"2022-12-13T00:08:22Z","author_association":"NONE","body":"This issue was closed because it has been inactive for 3 days since being marked as stale.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347554681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347643932","html_url":"https://github.com/apache/rocketmq/issues/5184#issuecomment-1347643932","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5184","id":1347643932,"node_id":"IC_kwDOBHrsl85QU2oc","user":{"login":"cserwen","id":46882838,"node_id":"MDQ6VXNlcjQ2ODgyODM4","avatar_url":"https://avatars.githubusercontent.com/u/46882838?v=4","gravatar_id":"","url":"https://api.github.com/users/cserwen","html_url":"https://github.com/cserwen","followers_url":"https://api.github.com/users/cserwen/followers","following_url":"https://api.github.com/users/cserwen/following{/other_user}","gists_url":"https://api.github.com/users/cserwen/gists{/gist_id}","starred_url":"https://api.github.com/users/cserwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cserwen/subscriptions","organizations_url":"https://api.github.com/users/cserwen/orgs","repos_url":"https://api.github.com/users/cserwen/repos","events_url":"https://api.github.com/users/cserwen/events{/privacy}","received_events_url":"https://api.github.com/users/cserwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:05:13Z","updated_at":"2022-12-13T02:05:13Z","author_association":"MEMBER","body":"Looking forward to this feature very much. By the way, how is the progress of it? @nowinkeyy ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347643932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347654127","html_url":"https://github.com/apache/rocketmq/issues/5184#issuecomment-1347654127","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5184","id":1347654127,"node_id":"IC_kwDOBHrsl85QU5Hv","user":{"login":"nowinkeyy","id":72536832,"node_id":"MDQ6VXNlcjcyNTM2ODMy","avatar_url":"https://avatars.githubusercontent.com/u/72536832?v=4","gravatar_id":"","url":"https://api.github.com/users/nowinkeyy","html_url":"https://github.com/nowinkeyy","followers_url":"https://api.github.com/users/nowinkeyy/followers","following_url":"https://api.github.com/users/nowinkeyy/following{/other_user}","gists_url":"https://api.github.com/users/nowinkeyy/gists{/gist_id}","starred_url":"https://api.github.com/users/nowinkeyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nowinkeyy/subscriptions","organizations_url":"https://api.github.com/users/nowinkeyy/orgs","repos_url":"https://api.github.com/users/nowinkeyy/repos","events_url":"https://api.github.com/users/nowinkeyy/events{/privacy}","received_events_url":"https://api.github.com/users/nowinkeyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:19:20Z","updated_at":"2022-12-13T02:19:20Z","author_association":"CONTRIBUTOR","body":"> Looking forward to this feature very much. By the way, how is the progress of it? @nowinkeyy\r\n\r\nPart of it has been completed, but it is still improving. See #5552 for more details.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347654127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347660720","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1347660720","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1347660720,"node_id":"IC_kwDOBHrsl85QU6uw","user":{"login":"aaron-ai","id":19537356,"node_id":"MDQ6VXNlcjE5NTM3MzU2","avatar_url":"https://avatars.githubusercontent.com/u/19537356?v=4","gravatar_id":"","url":"https://api.github.com/users/aaron-ai","html_url":"https://github.com/aaron-ai","followers_url":"https://api.github.com/users/aaron-ai/followers","following_url":"https://api.github.com/users/aaron-ai/following{/other_user}","gists_url":"https://api.github.com/users/aaron-ai/gists{/gist_id}","starred_url":"https://api.github.com/users/aaron-ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaron-ai/subscriptions","organizations_url":"https://api.github.com/users/aaron-ai/orgs","repos_url":"https://api.github.com/users/aaron-ai/repos","events_url":"https://api.github.com/users/aaron-ai/events{/privacy}","received_events_url":"https://api.github.com/users/aaron-ai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:31:17Z","updated_at":"2022-12-13T03:04:15Z","author_association":"MEMBER","body":"> > No, we don't need to add configuration file into the distribution directory because it has been included by the generated jar.\r\n> \r\n> @aaron-ai IMO, it has been included by the generated jar, but if O&M wants to change the log level, they can't. So I think should add those files into the distribution directory. It is convenient to modify the log level and log output position dynamically.I think these files should be included for binary packages.\r\n\r\nKeeping a copy is not a good practice to maintain the configuration file, consider to copy it in compile stage if you really want to keep a copy in the distribution directory.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347660720/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347675706","html_url":"https://github.com/apache/rocketmq/issues/5612#issuecomment-1347675706","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5612","id":1347675706,"node_id":"IC_kwDOBHrsl85QU-Y6","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T02:58:15Z","updated_at":"2022-12-13T02:58:15Z","author_association":"CONTRIBUTOR","body":"Close for now, feel no hesitate to reopen this issue if needed.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347675706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347681100","html_url":"https://github.com/apache/rocketmq/issues/5653#issuecomment-1347681100","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5653","id":1347681100,"node_id":"IC_kwDOBHrsl85QU_tM","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T03:05:32Z","updated_at":"2022-12-13T03:06:31Z","author_association":"CONTRIBUTOR","body":"> @jamescheng16 #5511 this bug has fixed and release the next version. You can build from the development branch's source code\r\n\r\nThis issue may not be related to #5511 because this bug just occurs in develop branch and has not been released in 5.0.0.\r\n\r\n@jamescheng16 Could you please provide logs like ~/logs/rmq-proxy/default.log for more information.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347681100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347684698","html_url":"https://github.com/apache/rocketmq/issues/5653#issuecomment-1347684698","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5653","id":1347684698,"node_id":"IC_kwDOBHrsl85QVAla","user":{"login":"jamescheng16","id":4263914,"node_id":"MDQ6VXNlcjQyNjM5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4263914?v=4","gravatar_id":"","url":"https://api.github.com/users/jamescheng16","html_url":"https://github.com/jamescheng16","followers_url":"https://api.github.com/users/jamescheng16/followers","following_url":"https://api.github.com/users/jamescheng16/following{/other_user}","gists_url":"https://api.github.com/users/jamescheng16/gists{/gist_id}","starred_url":"https://api.github.com/users/jamescheng16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamescheng16/subscriptions","organizations_url":"https://api.github.com/users/jamescheng16/orgs","repos_url":"https://api.github.com/users/jamescheng16/repos","events_url":"https://api.github.com/users/jamescheng16/events{/privacy}","received_events_url":"https://api.github.com/users/jamescheng16/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T03:10:02Z","updated_at":"2022-12-13T03:10:02Z","author_association":"NONE","body":"there is no ~/logs/rmq-proxy/ at path ~/logs\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347684698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347685536","html_url":"https://github.com/apache/rocketmq/issues/5653#issuecomment-1347685536","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5653","id":1347685536,"node_id":"IC_kwDOBHrsl85QVAyg","user":{"login":"jamescheng16","id":4263914,"node_id":"MDQ6VXNlcjQyNjM5MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/4263914?v=4","gravatar_id":"","url":"https://api.github.com/users/jamescheng16","html_url":"https://github.com/jamescheng16","followers_url":"https://api.github.com/users/jamescheng16/followers","following_url":"https://api.github.com/users/jamescheng16/following{/other_user}","gists_url":"https://api.github.com/users/jamescheng16/gists{/gist_id}","starred_url":"https://api.github.com/users/jamescheng16/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamescheng16/subscriptions","organizations_url":"https://api.github.com/users/jamescheng16/orgs","repos_url":"https://api.github.com/users/jamescheng16/repos","events_url":"https://api.github.com/users/jamescheng16/events{/privacy}","received_events_url":"https://api.github.com/users/jamescheng16/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T03:11:06Z","updated_at":"2022-12-13T03:11:06Z","author_association":"NONE","body":"![Screenshot 2022-12-13 at 11 08 04](https://user-images.githubusercontent.com/4263914/207217128-ccd95d40-3c7b-43cb-867f-529df07f3838.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347685536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347694851","html_url":"https://github.com/apache/rocketmq/issues/5653#issuecomment-1347694851","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5653","id":1347694851,"node_id":"IC_kwDOBHrsl85QVDED","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T03:28:13Z","updated_at":"2022-12-13T03:29:03Z","author_association":"MEMBER","body":"> @jamescheng16 #5511 this bug has fixed and release the next version. You can build from the development branch's source code\r\n\r\nIt's not true because metrics aren't included in 5.0.0 which @jamescheng16 using now.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347694851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347700000","html_url":"https://github.com/apache/rocketmq/issues/5653#issuecomment-1347700000","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5653","id":1347700000,"node_id":"IC_kwDOBHrsl85QVEUg","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T03:39:16Z","updated_at":"2022-12-13T03:41:04Z","author_association":"CONTRIBUTOR","body":"> there is no ~/logs/rmq-proxy/ at path ~/logs\r\n\r\nThe log is located in ~/logs/rocketmqlogs/broker.log for local mode.\r\n\r\nAnd I am able to start the proxy successfully in release-5.0.0.\r\n\r\n![image](https://user-images.githubusercontent.com/20906038/207220936-1e4a6e17-6ffa-43e7-855b-371cba3ae8f8.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1347700000/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348121157","html_url":"https://github.com/apache/rocketmq/pull/4302#issuecomment-1348121157","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/4302","id":1348121157,"node_id":"IC_kwDOBHrsl85QWrJF","user":{"login":"xiaodaweic","id":52072784,"node_id":"MDQ6VXNlcjUyMDcyNzg0","avatar_url":"https://avatars.githubusercontent.com/u/52072784?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaodaweic","html_url":"https://github.com/xiaodaweic","followers_url":"https://api.github.com/users/xiaodaweic/followers","following_url":"https://api.github.com/users/xiaodaweic/following{/other_user}","gists_url":"https://api.github.com/users/xiaodaweic/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaodaweic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaodaweic/subscriptions","organizations_url":"https://api.github.com/users/xiaodaweic/orgs","repos_url":"https://api.github.com/users/xiaodaweic/repos","events_url":"https://api.github.com/users/xiaodaweic/events{/privacy}","received_events_url":"https://api.github.com/users/xiaodaweic/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T10:11:06Z","updated_at":"2022-12-13T10:11:06Z","author_association":"NONE","body":"> > 这是个好主意，我认为将其放在[https://rocketmq.apache.org/docs/quick-start/上会更好](https://rocketmq.apache.org/docs/quick-start/)\r\n> \r\n> 谢谢，我认为这是因为大多数人不想查看官方网站。\r\n\r\n我认为大多数都会以官方网站做参考，至少我是这样的。现在rocket官方文档太简陋。我目前找不docker版本的rocket5。dockerhub上的现在是4.9.4\r\n<img width=\"1540\" alt=\"image\" src=\"https://user-images.githubusercontent.com/52072784/207289618-f2dfc275-2fb1-45e9-92d6-494a0e708c5a.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348121157/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348487612","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1348487612","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1348487612,"node_id":"IC_kwDOBHrsl85QYEm8","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T12:50:06Z","updated_at":"2022-12-13T12:50:06Z","author_association":"MEMBER","body":"> > > No, we don't need to add configuration file into the distribution directory because it has been included by the generated jar.\r\n> > \r\n> > \r\n> > @aaron-ai IMO, it has been included by the generated jar, but if O&M wants to change the log level, they can't. So I think should add those files into the distribution directory. It is convenient to modify the log level and log output position dynamically.I think these files should be included for binary packages.\r\n> \r\n> Keeping a copy is not a good practice to maintain the configuration file, consider to copy it in compile stage if you really want to keep a copy in the distribution directory.\r\n\r\nThat's a good idea, I will try","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348487612/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348915611","html_url":"https://github.com/apache/rocketmq/pull/5694#issuecomment-1348915611","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5694","id":1348915611,"node_id":"IC_kwDOBHrsl85QZtGb","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-13T16:11:28Z","updated_at":"2022-12-13T16:11:28Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5694?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5694](https://codecov.io/gh/apache/rocketmq/pull/5694?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (32a8588) into [develop](https://codecov.io/gh/apache/rocketmq/commit/c4e581cf9e1815b7208b1348bc89ecf1f9105d53?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c4e581c) will **decrease** coverage by `0.04%`.\n> The diff coverage is `38.04%`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5694      +/-   ##\n=============================================\n- Coverage      42.35%   42.30%   -0.05%     \n+ Complexity      8193     8180      -13     \n=============================================\n  Files           1060     1060              \n  Lines          73099    73154      +55     \n  Branches        9586     9594       +8     \n=============================================\n- Hits           30959    30946      -13     \n- Misses         38237    38290      +53     \n- Partials        3903     3918      +15     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5694?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/rocketmq/broker/controller/ReplicasManager.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvY29udHJvbGxlci9SZXBsaWNhc01hbmFnZXIuamF2YQ==) | `42.91% <0.00%> (-0.18%)` | :arrow_down: |\n| [...org/apache/rocketmq/broker/out/BrokerOuterAPI.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvb3V0L0Jyb2tlck91dGVyQVBJLmphdmE=) | `17.42% <0.00%> (ø)` | |\n| [.../java/org/apache/rocketmq/common/BrokerConfig.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vQnJva2VyQ29uZmlnLmphdmE=) | `27.96% <ø> (ø)` | |\n| [...a/org/apache/rocketmq/common/ControllerConfig.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vQ29udHJvbGxlckNvbmZpZy5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...c/main/java/org/apache/rocketmq/common/MixAll.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vTWl4QWxsLmphdmE=) | `41.44% <ø> (ø)` | |\n| [...der/controller/AlterSyncStateSetRequestHeader.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2hlYWRlci9jb250cm9sbGVyL0FsdGVyU3luY1N0YXRlU2V0UmVxdWVzdEhlYWRlci5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...er/controller/AlterSyncStateSetResponseHeader.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2hlYWRlci9jb250cm9sbGVyL0FsdGVyU3luY1N0YXRlU2V0UmVzcG9uc2VIZWFkZXIuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...ntroller/processor/ControllerRequestProcessor.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9wcm9jZXNzb3IvQ29udHJvbGxlclJlcXVlc3RQcm9jZXNzb3IuamF2YQ==) | `19.64% <17.24%> (-5.10%)` | :arrow_down: |\n| [...he/rocketmq/controller/impl/DLedgerController.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9pbXBsL0RMZWRnZXJDb250cm9sbGVyLmphdmE=) | `65.80% <60.00%> (-0.69%)` | :arrow_down: |\n| [...q/controller/impl/manager/ReplicasInfoManager.java](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9pbXBsL21hbmFnZXIvUmVwbGljYXNJbmZvTWFuYWdlci5qYXZh) | `62.11% <75.00%> (+0.88%)` | :arrow_up: |\n| ... and [23 more](https://codecov.io/gh/apache/rocketmq/pull/5694/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1348915611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350362435","html_url":"https://github.com/apache/rocketmq/issues/5663#issuecomment-1350362435","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5663","id":1350362435,"node_id":"IC_kwDOBHrsl85QfOVD","user":{"login":"ShannonDing","id":16487356,"node_id":"MDQ6VXNlcjE2NDg3MzU2","avatar_url":"https://avatars.githubusercontent.com/u/16487356?v=4","gravatar_id":"","url":"https://api.github.com/users/ShannonDing","html_url":"https://github.com/ShannonDing","followers_url":"https://api.github.com/users/ShannonDing/followers","following_url":"https://api.github.com/users/ShannonDing/following{/other_user}","gists_url":"https://api.github.com/users/ShannonDing/gists{/gist_id}","starred_url":"https://api.github.com/users/ShannonDing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShannonDing/subscriptions","organizations_url":"https://api.github.com/users/ShannonDing/orgs","repos_url":"https://api.github.com/users/ShannonDing/repos","events_url":"https://api.github.com/users/ShannonDing/events{/privacy}","received_events_url":"https://api.github.com/users/ShannonDing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-14T03:59:46Z","updated_at":"2022-12-14T03:59:46Z","author_association":"MEMBER","body":"> \r\n\r\n这个问题发生在syncStateSet扩张时刻，本地的syncStateSet和远程syncStateSet不一致的时候，如何决定ack数保证消息不丢。\r\n按照这个要求， 不管是syncStateSet的收缩或者扩张，都应该取本地与远程的合集，作为消息保存成功判断的依据，应该就可以解决消息丢失的问题。\r\n![image](https://user-images.githubusercontent.com/16487356/207502329-48d7978f-9708-4591-b9db-8e314d6f1c02.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350362435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350445216","html_url":"https://github.com/apache/rocketmq/issues/5697#issuecomment-1350445216","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5697","id":1350445216,"node_id":"IC_kwDOBHrsl85Qfiig","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-14T06:02:09Z","updated_at":"2022-12-14T06:02:09Z","author_association":"MEMBER","body":"Hi @crazyweeds  Whether you are using the download binary package to start? version 5.0 binary package has bug to start use\r\n```shell\r\nsh bin/mqbroker -n localhost:9876 --enable-proxy &\r\n```\r\nyou can package with source. then try to start\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350445216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350570200","html_url":"https://github.com/apache/rocketmq/issues/5697#issuecomment-1350570200","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5697","id":1350570200,"node_id":"IC_kwDOBHrsl85QgBDY","user":{"login":"crazyweeds","id":16688520,"node_id":"MDQ6VXNlcjE2Njg4NTIw","avatar_url":"https://avatars.githubusercontent.com/u/16688520?v=4","gravatar_id":"","url":"https://api.github.com/users/crazyweeds","html_url":"https://github.com/crazyweeds","followers_url":"https://api.github.com/users/crazyweeds/followers","following_url":"https://api.github.com/users/crazyweeds/following{/other_user}","gists_url":"https://api.github.com/users/crazyweeds/gists{/gist_id}","starred_url":"https://api.github.com/users/crazyweeds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crazyweeds/subscriptions","organizations_url":"https://api.github.com/users/crazyweeds/orgs","repos_url":"https://api.github.com/users/crazyweeds/repos","events_url":"https://api.github.com/users/crazyweeds/events{/privacy}","received_events_url":"https://api.github.com/users/crazyweeds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-14T07:51:14Z","updated_at":"2022-12-14T07:52:09Z","author_association":"NONE","body":"> Hi @crazyweeds Whether you are using the download binary package to start? version 5.0 binary package has bug to start use\r\n> \r\n> ```shell\r\n> sh bin/mqbroker -n localhost:9876 --enable-proxy &\r\n> ```\r\n> \r\n> you can package with source. then try to start\r\n\r\nYes I using the binary package to start.\r\n\r\nOK,THS,I will try it.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1350570200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352384600","html_url":"https://github.com/apache/rocketmq/issues/3617#issuecomment-1352384600","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/3617","id":1352384600,"node_id":"IC_kwDOBHrsl85Qm8BY","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T00:07:29Z","updated_at":"2022-12-15T00:07:29Z","author_association":"NONE","body":"This issue is stale because it has been open for 365 days with no activity. It will be closed in 3 days if no further activity occurs.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352384600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352480896","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352480896","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352480896,"node_id":"IC_kwDOBHrsl85QnTiA","user":{"login":"echooymxq","id":19860963,"node_id":"MDQ6VXNlcjE5ODYwOTYz","avatar_url":"https://avatars.githubusercontent.com/u/19860963?v=4","gravatar_id":"","url":"https://api.github.com/users/echooymxq","html_url":"https://github.com/echooymxq","followers_url":"https://api.github.com/users/echooymxq/followers","following_url":"https://api.github.com/users/echooymxq/following{/other_user}","gists_url":"https://api.github.com/users/echooymxq/gists{/gist_id}","starred_url":"https://api.github.com/users/echooymxq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/echooymxq/subscriptions","organizations_url":"https://api.github.com/users/echooymxq/orgs","repos_url":"https://api.github.com/users/echooymxq/repos","events_url":"https://api.github.com/users/echooymxq/events{/privacy}","received_events_url":"https://api.github.com/users/echooymxq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T02:38:21Z","updated_at":"2022-12-15T02:38:21Z","author_association":"CONTRIBUTOR","body":"@drpmma If not use the append-only, what can go wrong with this? such as, if the broker-a scaling up the queues, the proxy get metadata broker-a {0, 1, 2, 3, 4, 5, 6, 7} and broker-b{0,1,2,3}, then recalculate the queue mappings. What i can think of is the proxy's queue mapping can be inconsistent when some proxys pull metadata delay. What is the impact on the client? I am very curious how Aliyun MQ implements it, because it's 5.x commercial products support the 4.x sdk, any ideas?","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352480896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352486455","html_url":"https://github.com/apache/rocketmq/issues/2461#issuecomment-1352486455","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/2461","id":1352486455,"node_id":"IC_kwDOBHrsl85QnU43","user":{"login":"liqiang181","id":68585959,"node_id":"MDQ6VXNlcjY4NTg1OTU5","avatar_url":"https://avatars.githubusercontent.com/u/68585959?v=4","gravatar_id":"","url":"https://api.github.com/users/liqiang181","html_url":"https://github.com/liqiang181","followers_url":"https://api.github.com/users/liqiang181/followers","following_url":"https://api.github.com/users/liqiang181/following{/other_user}","gists_url":"https://api.github.com/users/liqiang181/gists{/gist_id}","starred_url":"https://api.github.com/users/liqiang181/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liqiang181/subscriptions","organizations_url":"https://api.github.com/users/liqiang181/orgs","repos_url":"https://api.github.com/users/liqiang181/repos","events_url":"https://api.github.com/users/liqiang181/events{/privacy}","received_events_url":"https://api.github.com/users/liqiang181/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T02:45:29Z","updated_at":"2022-12-15T02:45:29Z","author_association":"NONE","body":"> \r\n\r\n连接点击了就不再去消费了这条消息了，位点重置和属性标记能实现？怎么实现","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352486455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352502643","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352502643","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352502643,"node_id":"IC_kwDOBHrsl85QnY1z","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T03:12:47Z","updated_at":"2022-12-15T03:12:47Z","author_association":"CONTRIBUTOR","body":"> @drpmma If not use the append-only, what can go wrong with this? such as, if the broker-a scaling up the queues, the proxy get metadata broker-a {0, 1, 2, 3, 4, 5, 6, 7} and broker-b{0,1,2,3}, then recalculate the queue mappings. What i can think of is the proxy's queue mapping can be inconsistent when some proxys pull metadata delay. What is the impact on the client? I am very curious how Aliyun MQ implements it, because it's 5.x commercial products support the 4.x sdk, any ideas?\r\n\r\nFirstly, we need to clarify how the metadata is stored before more discussion. What is your opinion on metadata storage?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352502643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352505585","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352505585","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352505585,"node_id":"IC_kwDOBHrsl85QnZjx","user":{"login":"echooymxq","id":19860963,"node_id":"MDQ6VXNlcjE5ODYwOTYz","avatar_url":"https://avatars.githubusercontent.com/u/19860963?v=4","gravatar_id":"","url":"https://api.github.com/users/echooymxq","html_url":"https://github.com/echooymxq","followers_url":"https://api.github.com/users/echooymxq/followers","following_url":"https://api.github.com/users/echooymxq/following{/other_user}","gists_url":"https://api.github.com/users/echooymxq/gists{/gist_id}","starred_url":"https://api.github.com/users/echooymxq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/echooymxq/subscriptions","organizations_url":"https://api.github.com/users/echooymxq/orgs","repos_url":"https://api.github.com/users/echooymxq/repos","events_url":"https://api.github.com/users/echooymxq/events{/privacy}","received_events_url":"https://api.github.com/users/echooymxq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T03:18:30Z","updated_at":"2022-12-15T03:18:30Z","author_association":"CONTRIBUTOR","body":"I prefer the proxy to get the topic routing data from namesrv and then the proxy compute and store it in memory.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352505585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352508408","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352508408","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352508408,"node_id":"IC_kwDOBHrsl85QnaP4","user":{"login":"echooymxq","id":19860963,"node_id":"MDQ6VXNlcjE5ODYwOTYz","avatar_url":"https://avatars.githubusercontent.com/u/19860963?v=4","gravatar_id":"","url":"https://api.github.com/users/echooymxq","html_url":"https://github.com/echooymxq","followers_url":"https://api.github.com/users/echooymxq/followers","following_url":"https://api.github.com/users/echooymxq/following{/other_user}","gists_url":"https://api.github.com/users/echooymxq/gists{/gist_id}","starred_url":"https://api.github.com/users/echooymxq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/echooymxq/subscriptions","organizations_url":"https://api.github.com/users/echooymxq/orgs","repos_url":"https://api.github.com/users/echooymxq/repos","events_url":"https://api.github.com/users/echooymxq/events{/privacy}","received_events_url":"https://api.github.com/users/echooymxq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T03:24:31Z","updated_at":"2022-12-15T03:24:31Z","author_association":"CONTRIBUTOR","body":"Can we chat this on dingtalk?  `16c-h625wjc7si`","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352508408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352509747","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352509747","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352509747,"node_id":"IC_kwDOBHrsl85Qnakz","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T03:27:04Z","updated_at":"2022-12-15T03:27:04Z","author_association":"CONTRIBUTOR","body":"It's hard to detect queue mappings immediately cause the broker route is not in real-time. In the meantime, it's also a challenge to handle messaging situations and streaming situations in queue mapping. Because in messaging case, the consumer usually doesn't care about message offset, while in the streaming scenario, offset is important.  And proxy is not able to distinguish \"messaging pull\" or \"streaming pull\" cases.\r\n\r\nIn a word, introducing metadata and queue mapping will make a huge complexity on topic and proxy in no doubt. We wish to keep the main logic easy and simple as well as keep the pull semantics as before. ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352509747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352522907","html_url":"https://github.com/apache/rocketmq/issues/5690#issuecomment-1352522907","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5690","id":1352522907,"node_id":"IC_kwDOBHrsl85Qndyb","user":{"login":"echooymxq","id":19860963,"node_id":"MDQ6VXNlcjE5ODYwOTYz","avatar_url":"https://avatars.githubusercontent.com/u/19860963?v=4","gravatar_id":"","url":"https://api.github.com/users/echooymxq","html_url":"https://github.com/echooymxq","followers_url":"https://api.github.com/users/echooymxq/followers","following_url":"https://api.github.com/users/echooymxq/following{/other_user}","gists_url":"https://api.github.com/users/echooymxq/gists{/gist_id}","starred_url":"https://api.github.com/users/echooymxq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/echooymxq/subscriptions","organizations_url":"https://api.github.com/users/echooymxq/orgs","repos_url":"https://api.github.com/users/echooymxq/repos","events_url":"https://api.github.com/users/echooymxq/events{/privacy}","received_events_url":"https://api.github.com/users/echooymxq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T03:52:10Z","updated_at":"2022-12-15T03:52:10Z","author_association":"CONTRIBUTOR","body":"We had discuss on dingTalk, the conclusion is too complexity about queue mappings. The current implementation is most simple way.Thanks your the answers @drpmma ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352522907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352716428","html_url":"https://github.com/apache/rocketmq/pull/5700#issuecomment-1352716428","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5700","id":1352716428,"node_id":"IC_kwDOBHrsl85QoNCM","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T08:30:05Z","updated_at":"2022-12-15T08:59:11Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5700?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5700](https://codecov.io/gh/apache/rocketmq/pull/5700?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (bca7de3) into [develop](https://codecov.io/gh/apache/rocketmq/commit/aa7a442505ac012d1bc61b89bf10c41646a15005?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (aa7a442) will **increase** coverage by `0.18%`.\n> The diff coverage is `50.00%`.\n\n> :exclamation: Current head bca7de3 differs from pull request most recent head 959bdf3. Consider uploading reports for the commit 959bdf3 to get more accurate results\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5700      +/-   ##\n=============================================\n+ Coverage      42.35%   42.53%   +0.18%     \n- Complexity      8192     8210      +18     \n=============================================\n  Files           1060     1060              \n  Lines          73108    73091      -17     \n  Branches        9586     9580       -6     \n=============================================\n+ Hits           30962    31092     +130     \n+ Misses         38234    38083     -151     \n- Partials        3912     3916       +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5700?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...he/rocketmq/remoting/protocol/RemotingCommand.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL1JlbW90aW5nQ29tbWFuZC5qYXZh) | `70.83% <0.00%> (+1.10%)` | :arrow_up: |\n| [...cketmq/remoting/protocol/RocketMQSerializable.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL1JvY2tldE1RU2VyaWFsaXphYmxlLmphdmE=) | `84.34% <ø> (-0.78%)` | :arrow_down: |\n| [.../main/java/org/apache/rocketmq/common/UtilAll.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vVXRpbEFsbC5qYXZh) | `36.52% <100.00%> (-0.55%)` | :arrow_down: |\n| [...tmq/remoting/protocol/body/ConsumerConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2JvZHkvQ29uc3VtZXJDb25uZWN0aW9uLmphdmE=) | `95.83% <0.00%> (-4.17%)` | :arrow_down: |\n| [...controller/impl/DefaultBrokerHeartbeatManager.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9pbXBsL0RlZmF1bHRCcm9rZXJIZWFydGJlYXRNYW5hZ2VyLmphdmE=) | `74.41% <0.00%> (-3.49%)` | :arrow_down: |\n| [...che/rocketmq/container/BrokerContainerStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udGFpbmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb250YWluZXIvQnJva2VyQ29udGFpbmVyU3RhcnR1cC5qYXZh) | `53.94% <0.00%> (-2.20%)` | :arrow_down: |\n| [...ache/rocketmq/proxy/common/ReceiptHandleGroup.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cHJveHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3Byb3h5L2NvbW1vbi9SZWNlaXB0SGFuZGxlR3JvdXAuamF2YQ==) | `65.30% <0.00%> (-2.05%)` | :arrow_down: |\n| [...ava/org/apache/rocketmq/filter/util/BitsArray.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-ZmlsdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9maWx0ZXIvdXRpbC9CaXRzQXJyYXkuamF2YQ==) | `58.11% <0.00%> (-1.71%)` | :arrow_down: |\n| [...mq/client/impl/consumer/RebalanceLitePullImpl.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvaW1wbC9jb25zdW1lci9SZWJhbGFuY2VMaXRlUHVsbEltcGwuamF2YQ==) | `69.86% <0.00%> (-1.37%)` | :arrow_down: |\n| [...apache/rocketmq/store/ha/GroupTransferService.java](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL0dyb3VwVHJhbnNmZXJTZXJ2aWNlLmphdmE=) | `92.30% <0.00%> (-1.29%)` | :arrow_down: |\n| ... and [29 more](https://codecov.io/gh/apache/rocketmq/pull/5700/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1352716428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353121445","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1353121445","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1353121445,"node_id":"IC_kwDOBHrsl85Qpv6l","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T13:53:30Z","updated_at":"2022-12-15T13:53:30Z","author_association":"MEMBER","body":"@aaron-ai  PTAL~\r\nI have build on windows platform:\r\n![image](https://user-images.githubusercontent.com/15797831/207876267-c30b19ea-fb7e-42f0-8bb1-daa39542f76f.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353121445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353164865","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1353164865","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1353164865,"node_id":"IC_kwDOBHrsl85Qp6hB","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T14:17:51Z","updated_at":"2024-09-26T17:40:57Z","author_association":"NONE","body":"## [Codecov](https://app.codecov.io/gh/apache/rocketmq/pull/5689?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 42.46%. Comparing base [(`aa7a442`)](https://app.codecov.io/gh/apache/rocketmq/commit/aa7a442505ac012d1bc61b89bf10c41646a15005?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`fd3c338`)](https://app.codecov.io/gh/apache/rocketmq/commit/fd3c338f2d84f5779997e06c0d1ba6a320e44925?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 933 commits behind head on develop.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5689      +/-   ##\n=============================================\n+ Coverage      42.35%   42.46%   +0.11%     \n- Complexity      8192     8211      +19     \n=============================================\n  Files           1060     1060              \n  Lines          73108    73108              \n  Branches        9586     9586              \n=============================================\n+ Hits           30962    31044      +82     \n+ Misses         38234    38156      -78     \n+ Partials        3912     3908       -4     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/rocketmq/pull/5689?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353164865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353911463","html_url":"https://github.com/apache/rocketmq/issues/3369#issuecomment-1353911463","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/3369","id":1353911463,"node_id":"IC_kwDOBHrsl85Qswyn","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T00:07:41Z","updated_at":"2022-12-16T00:07:41Z","author_association":"NONE","body":"This issue is stale because it has been open for 365 days with no activity. It will be closed in 3 days if no further activity occurs.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353911463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353911564","html_url":"https://github.com/apache/rocketmq/issues/2292#issuecomment-1353911564","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/2292","id":1353911564,"node_id":"IC_kwDOBHrsl85Qsw0M","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T00:07:43Z","updated_at":"2022-12-16T00:07:43Z","author_association":"NONE","body":"This issue is stale because it has been open for 365 days with no activity. It will be closed in 3 days if no further activity occurs.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1353911564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354073827","html_url":"https://github.com/apache/rocketmq/issues/5698#issuecomment-1354073827","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5698","id":1354073827,"node_id":"IC_kwDOBHrsl85QtYbj","user":{"login":"lizhimins","id":22487634,"node_id":"MDQ6VXNlcjIyNDg3NjM0","avatar_url":"https://avatars.githubusercontent.com/u/22487634?v=4","gravatar_id":"","url":"https://api.github.com/users/lizhimins","html_url":"https://github.com/lizhimins","followers_url":"https://api.github.com/users/lizhimins/followers","following_url":"https://api.github.com/users/lizhimins/following{/other_user}","gists_url":"https://api.github.com/users/lizhimins/gists{/gist_id}","starred_url":"https://api.github.com/users/lizhimins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lizhimins/subscriptions","organizations_url":"https://api.github.com/users/lizhimins/orgs","repos_url":"https://api.github.com/users/lizhimins/repos","events_url":"https://api.github.com/users/lizhimins/events{/privacy}","received_events_url":"https://api.github.com/users/lizhimins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T02:02:06Z","updated_at":"2022-12-16T02:02:37Z","author_association":"MEMBER","body":"In general, the configuration of NameServer should be the same and should be hidden behind the load balancing service. At this time, the server maintainer can select random, polling, minimum connections and other policies on the server-side. This centralized management is more conducive to operation and maintenance.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354073827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354082491","html_url":"https://github.com/apache/rocketmq/issues/5698#issuecomment-1354082491","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5698","id":1354082491,"node_id":"IC_kwDOBHrsl85Qtai7","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T02:13:25Z","updated_at":"2022-12-16T02:13:37Z","author_association":"MEMBER","body":"> In general, the configuration of NameServer should be the same and should be hidden behind the load balancing service. At this time, the server maintainer can select random, polling, minimum connections and other policies on the server-side. This centralized management is more conducive to operation and maintenance.\r\n\r\n@lizhimins \r\nI agree with your perspective. This thought comes from encountering resource shortages in the past, where the deployed machines had different configurations. For cloud-based services, this may not be a problem, but for self-maintained machines, cost considerations may result in some machines being downgraded. This leads to different configurations for the deployed machines. I have previously considered setting weights for the NameServer to determine the number of client connections for each machine.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354082491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354084653","html_url":"https://github.com/apache/rocketmq/issues/5710#issuecomment-1354084653","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5710","id":1354084653,"node_id":"IC_kwDOBHrsl85QtbEt","user":{"login":"drpmma","id":20906038,"node_id":"MDQ6VXNlcjIwOTA2MDM4","avatar_url":"https://avatars.githubusercontent.com/u/20906038?v=4","gravatar_id":"","url":"https://api.github.com/users/drpmma","html_url":"https://github.com/drpmma","followers_url":"https://api.github.com/users/drpmma/followers","following_url":"https://api.github.com/users/drpmma/following{/other_user}","gists_url":"https://api.github.com/users/drpmma/gists{/gist_id}","starred_url":"https://api.github.com/users/drpmma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drpmma/subscriptions","organizations_url":"https://api.github.com/users/drpmma/orgs","repos_url":"https://api.github.com/users/drpmma/repos","events_url":"https://api.github.com/users/drpmma/events{/privacy}","received_events_url":"https://api.github.com/users/drpmma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T02:16:24Z","updated_at":"2022-12-16T02:16:49Z","author_association":"CONTRIBUTOR","body":"> the `waitForRunning`'s behavior in the ServiceThread is indefinite in some worst cases.\r\n\r\nThere is indeed a concurrent issue on `waitPoint`, but it will not lead to indefinite waiting.\r\n\r\n```java\r\nprotected void waitForRunning(long interval) { \r\n     if (hasNotified.compareAndSet(true, false)) { \r\n         this.onWaitEnd(); \r\n         return; \r\n     } \r\n  \r\n     // 1. execute wakeup() here will cause a extra waiting\r\n\r\n     waitPoint.reset(); \r\n  \r\n    // 2. execute wakeup() here will lead to immediate wakeup without waiting\r\n\r\n     try { \r\n         waitPoint.await(interval, TimeUnit.MILLISECONDS); \r\n     } catch (InterruptedException e) { \r\n         log.error(\"Interrupted\", e); \r\n```\r\n\r\nAs the annotation below, the `wakeup()` invocation before `waitPoint.reset()` will cause a extra waiting while `wakeup()` execution after `waitPoint.reset()` will lead to immediate wakeup without waiting.\r\n\r\nThere is indeed a concurrent issue and do you have the intention to submit to pr to fix it?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354084653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354085502","html_url":"https://github.com/apache/rocketmq/pull/5689#issuecomment-1354085502","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5689","id":1354085502,"node_id":"IC_kwDOBHrsl85QtbR-","user":{"login":"aaron-ai","id":19537356,"node_id":"MDQ6VXNlcjE5NTM3MzU2","avatar_url":"https://avatars.githubusercontent.com/u/19537356?v=4","gravatar_id":"","url":"https://api.github.com/users/aaron-ai","html_url":"https://github.com/aaron-ai","followers_url":"https://api.github.com/users/aaron-ai/followers","following_url":"https://api.github.com/users/aaron-ai/following{/other_user}","gists_url":"https://api.github.com/users/aaron-ai/gists{/gist_id}","starred_url":"https://api.github.com/users/aaron-ai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaron-ai/subscriptions","organizations_url":"https://api.github.com/users/aaron-ai/orgs","repos_url":"https://api.github.com/users/aaron-ai/repos","events_url":"https://api.github.com/users/aaron-ai/events{/privacy}","received_events_url":"https://api.github.com/users/aaron-ai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T02:17:36Z","updated_at":"2022-12-16T02:17:36Z","author_association":"MEMBER","body":"Well done! thx @mxsm ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354085502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354172985","html_url":"https://github.com/apache/rocketmq/pull/5711#issuecomment-1354172985","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5711","id":1354172985,"node_id":"IC_kwDOBHrsl85Qtwo5","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T04:11:34Z","updated_at":"2024-09-26T15:52:47Z","author_association":"NONE","body":"## [Codecov](https://app.codecov.io/gh/apache/rocketmq/pull/5711?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAttention: Patch coverage is `44.18605%` with `48 lines` in your changes missing coverage. Please review.\n> Project coverage is 42.44%. Comparing base [(`aa7a442`)](https://app.codecov.io/gh/apache/rocketmq/commit/aa7a442505ac012d1bc61b89bf10c41646a15005?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`06875af`)](https://app.codecov.io/gh/apache/rocketmq/commit/06875afa957fa7cedc4388c613adccfb586bc1c8?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 933 commits behind head on develop.\n\n| [Files with missing lines](https://app.codecov.io/gh/apache/rocketmq/pull/5711?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) | Patch % | Lines |\n|---|---|---|\n| [...org/apache/rocketmq/broker/out/BrokerOuterAPI.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fbroker%2Fout%2FBrokerOuterAPI.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvb3V0L0Jyb2tlck91dGVyQVBJLmphdmE=) | 18.75% | [13 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../apache/rocketmq/controller/ControllerManager.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=controller%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fcontroller%2FControllerManager.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9Db250cm9sbGVyTWFuYWdlci5qYXZh) | 59.09% | [5 Missing and 4 partials :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...l/header/namesrv/BrokerHeartbeatRequestHeader.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=remoting%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fremoting%2Fprotocol%2Fheader%2Fnamesrv%2FBrokerHeartbeatRequestHeader.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2hlYWRlci9uYW1lc3J2L0Jyb2tlckhlYXJ0YmVhdFJlcXVlc3RIZWFkZXIuamF2YQ==) | 0.00% | [9 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...oller/RegisterBrokerToControllerRequestHeader.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=remoting%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fremoting%2Fprotocol%2Fheader%2Fcontroller%2FRegisterBrokerToControllerRequestHeader.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2hlYWRlci9jb250cm9sbGVyL1JlZ2lzdGVyQnJva2VyVG9Db250cm9sbGVyUmVxdWVzdEhlYWRlci5qYXZh) | 0.00% | [6 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...controller/impl/DefaultBrokerHeartbeatManager.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=controller%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fcontroller%2Fimpl%2FDefaultBrokerHeartbeatManager.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9pbXBsL0RlZmF1bHRCcm9rZXJIZWFydGJlYXRNYW5hZ2VyLmphdmE=) | 75.00% | [3 Missing and 1 partial :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...a/org/apache/rocketmq/broker/BrokerController.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=broker%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fbroker%2FBrokerController.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvQnJva2VyQ29udHJvbGxlci5qYXZh) | 0.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [.../java/org/apache/rocketmq/common/BrokerConfig.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=common%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fcommon%2FBrokerConfig.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vQnJva2VyQ29uZmlnLmphdmE=) | 25.00% | [3 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n| [...org/apache/rocketmq/controller/BrokerLiveInfo.java](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&filepath=controller%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Frocketmq%2Fcontroller%2FBrokerLiveInfo.java&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9Ccm9rZXJMaXZlSW5mby5qYXZh) | 75.00% | [1 Missing :warning: ](https://app.codecov.io/gh/apache/rocketmq/pull/5711?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) |\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5711      +/-   ##\n=============================================\n+ Coverage      42.35%   42.44%   +0.09%     \n- Complexity      8192     8210      +18     \n=============================================\n  Files           1060     1060              \n  Lines          73108    73125      +17     \n  Branches        9586     9578       -8     \n=============================================\n+ Hits           30962    31040      +78     \n+ Misses         38234    38180      -54     \n+ Partials        3912     3905       -7     \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/rocketmq/pull/5711?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354172985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354252013","html_url":"https://github.com/apache/rocketmq/issues/5710#issuecomment-1354252013","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5710","id":1354252013,"node_id":"IC_kwDOBHrsl85QuD7t","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T05:45:09Z","updated_at":"2022-12-16T05:45:09Z","author_association":"CONTRIBUTOR","body":"I'll submit a pr later","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354252013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354296809","html_url":"https://github.com/apache/rocketmq/pull/5713#issuecomment-1354296809","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5713","id":1354296809,"node_id":"IC_kwDOBHrsl85QuO3p","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T06:52:15Z","updated_at":"2022-12-16T07:05:32Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5713?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5713](https://codecov.io/gh/apache/rocketmq/pull/5713?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (c326c0f) into [develop](https://codecov.io/gh/apache/rocketmq/commit/aa7a442505ac012d1bc61b89bf10c41646a15005?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (aa7a442) will **increase** coverage by `0.10%`.\n> The diff coverage is `85.71%`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5713      +/-   ##\n=============================================\n+ Coverage      42.35%   42.45%   +0.10%     \n- Complexity      8192     8209      +17     \n=============================================\n  Files           1060     1059       -1     \n  Lines          73108    73086      -22     \n  Branches        9586     9582       -4     \n=============================================\n+ Hits           30962    31032      +70     \n+ Misses         38234    38143      -91     \n+ Partials        3912     3911       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5713?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...main/java/org/apache/rocketmq/store/CommitLog.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0NvbW1pdExvZy5qYXZh) | `65.30% <0.00%> (-0.11%)` | :arrow_down: |\n| [...java/org/apache/rocketmq/common/ServiceThread.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vU2VydmljZVRocmVhZC5qYXZh) | `82.27% <92.30%> (+0.33%)` | :arrow_up: |\n| [...tmq/remoting/protocol/body/ConsumerConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2JvZHkvQ29uc3VtZXJDb25uZWN0aW9uLmphdmE=) | `95.83% <0.00%> (-4.17%)` | :arrow_down: |\n| [...controller/impl/DefaultBrokerHeartbeatManager.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9pbXBsL0RlZmF1bHRCcm9rZXJIZWFydGJlYXRNYW5hZ2VyLmphdmE=) | `74.41% <0.00%> (-3.49%)` | :arrow_down: |\n| [...che/rocketmq/container/BrokerContainerStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udGFpbmVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb250YWluZXIvQnJva2VyQ29udGFpbmVyU3RhcnR1cC5qYXZh) | `53.94% <0.00%> (-2.20%)` | :arrow_down: |\n| [...ache/rocketmq/proxy/common/ReceiptHandleGroup.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cHJveHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3Byb3h5L2NvbW1vbi9SZWNlaXB0SGFuZGxlR3JvdXAuamF2YQ==) | `65.30% <0.00%> (-2.05%)` | :arrow_down: |\n| [...mq/store/ha/autoswitch/AutoSwitchHAConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL2F1dG9zd2l0Y2gvQXV0b1N3aXRjaEhBQ29ubmVjdGlvbi5qYXZh) | `71.08% <0.00%> (-1.36%)` | :arrow_down: |\n| [...apache/rocketmq/store/ha/GroupTransferService.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL0dyb3VwVHJhbnNmZXJTZXJ2aWNlLmphdmE=) | `92.30% <0.00%> (-1.29%)` | :arrow_down: |\n| [...tmq/namesrv/processor/DefaultRequestProcessor.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bmFtZXNydi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvbmFtZXNydi9wcm9jZXNzb3IvRGVmYXVsdFJlcXVlc3RQcm9jZXNzb3IuamF2YQ==) | `59.00% <0.00%> (-1.11%)` | :arrow_down: |\n| [...ent/impl/consumer/DefaultLitePullConsumerImpl.java](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvaW1wbC9jb25zdW1lci9EZWZhdWx0TGl0ZVB1bGxDb25zdW1lckltcGwuamF2YQ==) | `69.37% <0.00%> (-0.94%)` | :arrow_down: |\n| ... and [21 more](https://codecov.io/gh/apache/rocketmq/pull/5713/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354296809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354324975","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1354324975","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1354324975,"node_id":"IC_kwDOBHrsl85QuVvv","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T07:25:08Z","updated_at":"2022-12-16T07:48:47Z","author_association":"CONTRIBUTOR","body":"@mz0113  Can you show the code about how do you set the `SendLatencyFaultEnable` parameter\r\n\r\n![image](https://user-images.githubusercontent.com/105986/208049317-b77e571a-4aa6-4790-bcfe-21e2f9b450fa.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354324975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354408118","html_url":"https://github.com/apache/rocketmq/issues/5714#issuecomment-1354408118","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5714","id":1354408118,"node_id":"IC_kwDOBHrsl85QuqC2","user":{"login":"RongtongJin","id":21963954,"node_id":"MDQ6VXNlcjIxOTYzOTU0","avatar_url":"https://avatars.githubusercontent.com/u/21963954?v=4","gravatar_id":"","url":"https://api.github.com/users/RongtongJin","html_url":"https://github.com/RongtongJin","followers_url":"https://api.github.com/users/RongtongJin/followers","following_url":"https://api.github.com/users/RongtongJin/following{/other_user}","gists_url":"https://api.github.com/users/RongtongJin/gists{/gist_id}","starred_url":"https://api.github.com/users/RongtongJin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RongtongJin/subscriptions","organizations_url":"https://api.github.com/users/RongtongJin/orgs","repos_url":"https://api.github.com/users/RongtongJin/repos","events_url":"https://api.github.com/users/RongtongJin/events{/privacy}","received_events_url":"https://api.github.com/users/RongtongJin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T08:54:37Z","updated_at":"2022-12-16T08:54:37Z","author_association":"CONTRIBUTOR","body":"Hi @riki-wang 我在controller模式下打开transientStorePoolEnable，正常情况下收发并未出现System busy，切换时也能及时恢复。想确认一下，当出现System busy exception，使用clusterList查看是否选出了Master？","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354408118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354410073","html_url":"https://github.com/apache/rocketmq/issues/5714#issuecomment-1354410073","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5714","id":1354410073,"node_id":"IC_kwDOBHrsl85QuqhZ","user":{"login":"riki-wang","id":23468936,"node_id":"MDQ6VXNlcjIzNDY4OTM2","avatar_url":"https://avatars.githubusercontent.com/u/23468936?v=4","gravatar_id":"","url":"https://api.github.com/users/riki-wang","html_url":"https://github.com/riki-wang","followers_url":"https://api.github.com/users/riki-wang/followers","following_url":"https://api.github.com/users/riki-wang/following{/other_user}","gists_url":"https://api.github.com/users/riki-wang/gists{/gist_id}","starred_url":"https://api.github.com/users/riki-wang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/riki-wang/subscriptions","organizations_url":"https://api.github.com/users/riki-wang/orgs","repos_url":"https://api.github.com/users/riki-wang/repos","events_url":"https://api.github.com/users/riki-wang/events{/privacy}","received_events_url":"https://api.github.com/users/riki-wang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T08:56:53Z","updated_at":"2022-12-16T08:56:53Z","author_association":"NONE","body":"> Hi @riki-wang 我在controller模式下打开transientStorePoolEnable，正常情况下收发并未出现System busy，切换时也能及时恢复。想确认一下，当出现System busy exception，使用clusterList查看是否选出了Master？\r\n\r\n还需要将brokerRole设置成SLAVE才会出现这个异常","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354410073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354414543","html_url":"https://github.com/apache/rocketmq/issues/5714#issuecomment-1354414543","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5714","id":1354414543,"node_id":"IC_kwDOBHrsl85QurnP","user":{"login":"riki-wang","id":23468936,"node_id":"MDQ6VXNlcjIzNDY4OTM2","avatar_url":"https://avatars.githubusercontent.com/u/23468936?v=4","gravatar_id":"","url":"https://api.github.com/users/riki-wang","html_url":"https://github.com/riki-wang","followers_url":"https://api.github.com/users/riki-wang/followers","following_url":"https://api.github.com/users/riki-wang/following{/other_user}","gists_url":"https://api.github.com/users/riki-wang/gists{/gist_id}","starred_url":"https://api.github.com/users/riki-wang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/riki-wang/subscriptions","organizations_url":"https://api.github.com/users/riki-wang/orgs","repos_url":"https://api.github.com/users/riki-wang/repos","events_url":"https://api.github.com/users/riki-wang/events{/privacy}","received_events_url":"https://api.github.com/users/riki-wang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T09:01:06Z","updated_at":"2022-12-16T09:08:08Z","author_association":"NONE","body":"> Hi @riki-wang 我在controller模式下打开transientStorePoolEnable，正常情况下收发并未出现System busy，切换时也能及时恢复。想确认一下，当出现System busy exception，使用clusterList查看是否选出了Master？\r\n\r\n当transientStorePoolEnable=true与brokerRole=SLAVE同时设置时，slave节点似乎一直无法跟选举出的master同步\r\n<img width=\"1426\" alt=\"image\" src=\"https://user-images.githubusercontent.com/23468936/208063200-58007934-9e62-4e02-aed5-75bacbff93c7.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354414543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354423299","html_url":"https://github.com/apache/rocketmq/issues/5714#issuecomment-1354423299","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5714","id":1354423299,"node_id":"IC_kwDOBHrsl85QutwD","user":{"login":"RongtongJin","id":21963954,"node_id":"MDQ6VXNlcjIxOTYzOTU0","avatar_url":"https://avatars.githubusercontent.com/u/21963954?v=4","gravatar_id":"","url":"https://api.github.com/users/RongtongJin","html_url":"https://github.com/RongtongJin","followers_url":"https://api.github.com/users/RongtongJin/followers","following_url":"https://api.github.com/users/RongtongJin/following{/other_user}","gists_url":"https://api.github.com/users/RongtongJin/gists{/gist_id}","starred_url":"https://api.github.com/users/RongtongJin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RongtongJin/subscriptions","organizations_url":"https://api.github.com/users/RongtongJin/orgs","repos_url":"https://api.github.com/users/RongtongJin/repos","events_url":"https://api.github.com/users/RongtongJin/events{/privacy}","received_events_url":"https://api.github.com/users/RongtongJin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T09:09:41Z","updated_at":"2022-12-16T09:09:41Z","author_association":"CONTRIBUTOR","body":"> SLAVE\r\n\r\nGood catch! I have reproduced it, I will find out the reason.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354423299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354476757","html_url":"https://github.com/apache/rocketmq/issues/5719#issuecomment-1354476757","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5719","id":1354476757,"node_id":"IC_kwDOBHrsl85Qu6zV","user":{"login":"RongtongJin","id":21963954,"node_id":"MDQ6VXNlcjIxOTYzOTU0","avatar_url":"https://avatars.githubusercontent.com/u/21963954?v=4","gravatar_id":"","url":"https://api.github.com/users/RongtongJin","html_url":"https://github.com/RongtongJin","followers_url":"https://api.github.com/users/RongtongJin/followers","following_url":"https://api.github.com/users/RongtongJin/following{/other_user}","gists_url":"https://api.github.com/users/RongtongJin/gists{/gist_id}","starred_url":"https://api.github.com/users/RongtongJin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RongtongJin/subscriptions","organizations_url":"https://api.github.com/users/RongtongJin/orgs","repos_url":"https://api.github.com/users/RongtongJin/repos","events_url":"https://api.github.com/users/RongtongJin/events{/privacy}","received_events_url":"https://api.github.com/users/RongtongJin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T09:48:39Z","updated_at":"2022-12-16T09:48:39Z","author_association":"CONTRIBUTOR","body":"Hi @mxsm, duplicate issue of #5715 ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354476757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354488914","html_url":"https://github.com/apache/rocketmq/issues/5715#issuecomment-1354488914","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5715","id":1354488914,"node_id":"IC_kwDOBHrsl85Qu9xS","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T09:58:31Z","updated_at":"2022-12-16T09:59:31Z","author_association":"MEMBER","body":"@RongtongJin  Assigned to me, I will try to fix it\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354488914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354520719","html_url":"https://github.com/apache/rocketmq/issues/5717#issuecomment-1354520719","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5717","id":1354520719,"node_id":"IC_kwDOBHrsl85QvFiP","user":{"login":"ywagd","id":35673963,"node_id":"MDQ6VXNlcjM1NjczOTYz","avatar_url":"https://avatars.githubusercontent.com/u/35673963?v=4","gravatar_id":"","url":"https://api.github.com/users/ywagd","html_url":"https://github.com/ywagd","followers_url":"https://api.github.com/users/ywagd/followers","following_url":"https://api.github.com/users/ywagd/following{/other_user}","gists_url":"https://api.github.com/users/ywagd/gists{/gist_id}","starred_url":"https://api.github.com/users/ywagd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ywagd/subscriptions","organizations_url":"https://api.github.com/users/ywagd/orgs","repos_url":"https://api.github.com/users/ywagd/repos","events_url":"https://api.github.com/users/ywagd/events{/privacy}","received_events_url":"https://api.github.com/users/ywagd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-16T10:27:26Z","updated_at":"2022-12-16T10:27:26Z","author_association":"NONE","body":"I use 5.0.0 Version","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1354520719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1355994698","html_url":"https://github.com/apache/rocketmq/pull/5709#issuecomment-1355994698","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5709","id":1355994698,"node_id":"IC_kwDOBHrsl85Q0tZK","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T03:24:39Z","updated_at":"2022-12-30T15:13:52Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5709?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5709](https://codecov.io/gh/apache/rocketmq/pull/5709?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ca3d9b1) into [develop](https://codecov.io/gh/apache/rocketmq/commit/83c4a8f3f0284135d999c39a9fdc580b3d76d80e?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (83c4a8f) will **increase** coverage by `0.02%`.\n> The diff coverage is `25.00%`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5709      +/-   ##\n=============================================\n+ Coverage      42.38%   42.41%   +0.02%     \n- Complexity      8218     8227       +9     \n=============================================\n  Files           1060     1060              \n  Lines          73354    73356       +2     \n  Branches        9598     9599       +1     \n=============================================\n+ Hits           31093    31112      +19     \n+ Misses         38346    38333      -13     \n+ Partials        3915     3911       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5709?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/rocketmq/common/constant/LoggerName.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vY29uc3RhbnQvTG9nZ2VyTmFtZS5qYXZh) | `0.00% <ø> (ø)` | |\n| [...va/org/apache/rocketmq/namesrv/NamesrvStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bmFtZXNydi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvbmFtZXNydi9OYW1lc3J2U3RhcnR1cC5qYXZh) | `19.65% <25.00%> (+3.13%)` | :arrow_up: |\n| [...a/org/apache/rocketmq/filter/util/BloomFilter.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-ZmlsdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9maWx0ZXIvdXRpbC9CbG9vbUZpbHRlci5qYXZh) | `60.43% <0.00%> (-2.20%)` | :arrow_down: |\n| [...he/rocketmq/client/trace/AsyncTraceDispatcher.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvdHJhY2UvQXN5bmNUcmFjZURpc3BhdGNoZXIuamF2YQ==) | `82.21% <0.00%> (-0.97%)` | :arrow_down: |\n| [...mq/store/ha/autoswitch/AutoSwitchHAConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL2F1dG9zd2l0Y2gvQXV0b1N3aXRjaEhBQ29ubmVjdGlvbi5qYXZh) | `72.16% <0.00%> (-0.55%)` | :arrow_down: |\n| [...e/rocketmq/remoting/netty/NettyRemotingClient.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL25ldHR5L05ldHR5UmVtb3RpbmdDbGllbnQuamF2YQ==) | `41.66% <0.00%> (-0.39%)` | :arrow_down: |\n| [...main/java/org/apache/rocketmq/store/CommitLog.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0NvbW1pdExvZy5qYXZh) | `65.30% <0.00%> (-0.11%)` | :arrow_down: |\n| [...mq/client/impl/producer/DefaultMQProducerImpl.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvaW1wbC9wcm9kdWNlci9EZWZhdWx0TVFQcm9kdWNlckltcGwuamF2YQ==) | `46.53% <0.00%> (+0.12%)` | :arrow_up: |\n| [...cketmq/broker/processor/PopBufferMergeService.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvcHJvY2Vzc29yL1BvcEJ1ZmZlck1lcmdlU2VydmljZS5qYXZh) | `33.64% <0.00%> (+0.23%)` | :arrow_up: |\n| [...rocketmq/broker/processor/PopMessageProcessor.java](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvcHJvY2Vzc29yL1BvcE1lc3NhZ2VQcm9jZXNzb3IuamF2YQ==) | `37.11% <0.00%> (+0.46%)` | :arrow_up: |\n| ... and [9 more](https://codecov.io/gh/apache/rocketmq/pull/5709/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1355994698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356016543","html_url":"https://github.com/apache/rocketmq/issues/5717#issuecomment-1356016543","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5717","id":1356016543,"node_id":"IC_kwDOBHrsl85Q0yuf","user":{"login":"RongtongJin","id":21963954,"node_id":"MDQ6VXNlcjIxOTYzOTU0","avatar_url":"https://avatars.githubusercontent.com/u/21963954?v=4","gravatar_id":"","url":"https://api.github.com/users/RongtongJin","html_url":"https://github.com/RongtongJin","followers_url":"https://api.github.com/users/RongtongJin/followers","following_url":"https://api.github.com/users/RongtongJin/following{/other_user}","gists_url":"https://api.github.com/users/RongtongJin/gists{/gist_id}","starred_url":"https://api.github.com/users/RongtongJin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RongtongJin/subscriptions","organizations_url":"https://api.github.com/users/RongtongJin/orgs","repos_url":"https://api.github.com/users/RongtongJin/repos","events_url":"https://api.github.com/users/RongtongJin/events{/privacy}","received_events_url":"https://api.github.com/users/RongtongJin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T04:04:58Z","updated_at":"2022-12-17T04:04:58Z","author_association":"CONTRIBUTOR","body":"Hi @ywagd, I tried with the latest code on my Mac, and nothing you said happened. Or you can elaborate on more detailed steps of reproduced. ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356016543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356089308","html_url":"https://github.com/apache/rocketmq/issues/5716#issuecomment-1356089308","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5716","id":1356089308,"node_id":"IC_kwDOBHrsl85Q1Efc","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T07:31:18Z","updated_at":"2022-12-17T07:31:18Z","author_association":"MEMBER","body":"Nice catch! And this logic changed in #5181, we should review it again.\r\n\r\nhttps://github.com/apache/rocketmq/pull/5181/files#diff-771f2a9ff3067ee7ec67d5282228514e9e709c549eafe34ae7402b279487d656L87-L93","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356089308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356099094","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356099094","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356099094,"node_id":"IC_kwDOBHrsl85Q1G4W","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T07:44:56Z","updated_at":"2022-12-17T07:44:56Z","author_association":"MEMBER","body":"The current implementation reserves the possibility to use a different clock source, such as using a mock clock source in testing.\r\n\r\nThere is a similar usage in guava:\r\n\r\n```java\r\n  /**\r\n   * Creates (but does not start) a new stopwatch, using the specified time source.\r\n   *\r\n   * @since 15.0\r\n   */\r\n  public static Stopwatch createUnstarted(Ticker ticker) {\r\n    return new Stopwatch(ticker);\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356099094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356108706","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356108706","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356108706,"node_id":"IC_kwDOBHrsl85Q1JOi","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T07:53:00Z","updated_at":"2022-12-17T08:03:07Z","author_association":"CONTRIBUTOR","body":"> the possibility to use a different clock source\r\n\r\nthen `now` should be wrapped as a static method just as guava did.  Guava wraps a class method into a static method which is more reasonable.\r\n\r\nas the possiblity to use a different clock source,is there any neccessary or just a over-design?","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356108706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356109237","html_url":"https://github.com/apache/rocketmq/pull/5723#issuecomment-1356109237","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5723","id":1356109237,"node_id":"IC_kwDOBHrsl85Q1JW1","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T07:53:47Z","updated_at":"2022-12-17T07:53:47Z","author_association":"MEMBER","body":"@RongtongJin  @aaron-ai  PTAL~\r\nplatform:\r\n```\r\nNo LSB modules are available.\r\nDistributor ID: Ubuntu\r\nDescription:    Ubuntu 22.04.1 LTS\r\nRelease:        22.04\r\n```\r\n![image](https://user-images.githubusercontent.com/15797831/208231858-22ed1172-5c29-4561-8657-7b88f13eb8f7.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356109237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356110447","html_url":"https://github.com/apache/rocketmq/pull/5725#issuecomment-1356110447","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5725","id":1356110447,"node_id":"IC_kwDOBHrsl85Q1Jpv","user":{"login":"mxsm","id":15797831,"node_id":"MDQ6VXNlcjE1Nzk3ODMx","avatar_url":"https://avatars.githubusercontent.com/u/15797831?v=4","gravatar_id":"","url":"https://api.github.com/users/mxsm","html_url":"https://github.com/mxsm","followers_url":"https://api.github.com/users/mxsm/followers","following_url":"https://api.github.com/users/mxsm/following{/other_user}","gists_url":"https://api.github.com/users/mxsm/gists{/gist_id}","starred_url":"https://api.github.com/users/mxsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxsm/subscriptions","organizations_url":"https://api.github.com/users/mxsm/orgs","repos_url":"https://api.github.com/users/mxsm/repos","events_url":"https://api.github.com/users/mxsm/events{/privacy}","received_events_url":"https://api.github.com/users/mxsm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T07:59:53Z","updated_at":"2022-12-17T07:59:53Z","author_association":"MEMBER","body":"@aaron-ai  PTAL~","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356110447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356110716","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356110716","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356110716,"node_id":"IC_kwDOBHrsl85Q1Jt8","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:00:46Z","updated_at":"2022-12-17T08:00:46Z","author_association":"CONTRIBUTOR","body":"I just check the originall rocket source ,there are more than 100 other places which use `System.currentTimeMillis()` directly.\r\n\r\n![image](https://user-images.githubusercontent.com/105986/208232077-3b2e11a6-2794-4ba6-9c29-b612036067aa.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356110716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356113879","html_url":"https://github.com/apache/rocketmq/pull/5723#issuecomment-1356113879","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5723","id":1356113879,"node_id":"IC_kwDOBHrsl85Q1KfX","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:13:12Z","updated_at":"2022-12-17T08:13:12Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5723?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5723](https://codecov.io/gh/apache/rocketmq/pull/5723?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (1f8e9e0) into [develop](https://codecov.io/gh/apache/rocketmq/commit/81e3648e3fcb1995897db3960a4561d6047b696c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (81e3648) will **increase** coverage by `0.00%`.\n> The diff coverage is `70.58%`.\n\n```diff\n@@            Coverage Diff             @@\n##             develop    #5723   +/-   ##\n==========================================\n  Coverage      42.46%   42.47%           \n+ Complexity      8223     8208   -15     \n==========================================\n  Files           1060     1061    +1     \n  Lines          73175    73186   +11     \n  Branches        9606     9607    +1     \n==========================================\n+ Hits           31076    31086   +10     \n+ Misses         38188    38185    -3     \n- Partials        3911     3915    +4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5723?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [.../main/java/org/apache/rocketmq/client/MQAdmin.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvTVFBZG1pbi5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [...c/main/java/org/apache/rocketmq/common/MixAll.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vTWl4QWxsLmphdmE=) | `41.44% <ø> (ø)` | |\n| [.../apache/rocketmq/controller/ControllerStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29udHJvbGxlci9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvY29udHJvbGxlci9Db250cm9sbGVyU3RhcnR1cC5qYXZh) | `0.00% <0.00%> (ø)` | |\n| [.../apache/rocketmq/tools/command/MQAdminStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-dG9vbHMvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3Rvb2xzL2NvbW1hbmQvTVFBZG1pblN0YXJ0dXAuamF2YQ==) | `0.00% <0.00%> (ø)` | |\n| [...mq/common/logging/DefaultJoranConfiguratorExt.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vbG9nZ2luZy9EZWZhdWx0Sm9yYW5Db25maWd1cmF0b3JFeHQuamF2YQ==) | `50.61% <81.81%> (+0.61%)` | :arrow_up: |\n| [...java/org/apache/rocketmq/broker/BrokerStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvQnJva2VyU3RhcnR1cC5qYXZh) | `7.18% <100.00%> (+0.61%)` | :arrow_up: |\n| [...va/org/apache/rocketmq/namesrv/NamesrvStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-bmFtZXNydi9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvbmFtZXNydi9OYW1lc3J2U3RhcnR1cC5qYXZh) | `17.24% <100.00%> (+0.71%)` | :arrow_up: |\n| [...n/java/org/apache/rocketmq/proxy/ProxyStartup.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cHJveHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3Byb3h5L1Byb3h5U3RhcnR1cC5qYXZh) | `44.82% <100.00%> (+0.47%)` | :arrow_up: |\n| [...rg/apache/rocketmq/common/stats/StatsSnapshot.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNTbmFwc2hvdC5qYXZh) | `84.61% <0.00%> (-15.39%)` | :arrow_down: |\n| [...apache/rocketmq/broker/longpolling/PopRequest.java](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvbG9uZ3BvbGxpbmcvUG9wUmVxdWVzdC5qYXZh) | `31.03% <0.00%> (-13.80%)` | :arrow_down: |\n| ... and [25 more](https://codecov.io/gh/apache/rocketmq/pull/5723/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356113879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356117568","html_url":"https://github.com/apache/rocketmq/pull/5725#issuecomment-1356117568","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5725","id":1356117568,"node_id":"IC_kwDOBHrsl85Q1LZA","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:22:41Z","updated_at":"2022-12-17T08:22:41Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5725?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5725](https://codecov.io/gh/apache/rocketmq/pull/5725?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (ef02e8c) into [develop](https://codecov.io/gh/apache/rocketmq/commit/81e3648e3fcb1995897db3960a4561d6047b696c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (81e3648) will **decrease** coverage by `0.03%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5725      +/-   ##\n=============================================\n- Coverage      42.46%   42.43%   -0.04%     \n+ Complexity      8223     8211      -12     \n=============================================\n  Files           1060     1060              \n  Lines          73175    73175              \n  Branches        9606     9606              \n=============================================\n- Hits           31076    31049      -27     \n- Misses         38188    38218      +30     \n+ Partials        3911     3908       -3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5725?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...rg/apache/rocketmq/common/stats/StatsSnapshot.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNTbmFwc2hvdC5qYXZh) | `84.61% <0.00%> (-15.39%)` | :arrow_down: |\n| [...apache/rocketmq/broker/longpolling/PopRequest.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvbG9uZ3BvbGxpbmcvUG9wUmVxdWVzdC5qYXZh) | `31.03% <0.00%> (-13.80%)` | :arrow_down: |\n| [.../apache/rocketmq/common/stats/MomentStatsItem.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvTW9tZW50U3RhdHNJdGVtLmphdmE=) | `38.09% <0.00%> (-9.53%)` | :arrow_down: |\n| [...va/org/apache/rocketmq/store/FlushDiskWatcher.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0ZsdXNoRGlza1dhdGNoZXIuamF2YQ==) | `81.25% <0.00%> (-9.38%)` | :arrow_down: |\n| [...ache/rocketmq/common/stats/MomentStatsItemSet.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvTW9tZW50U3RhdHNJdGVtU2V0LmphdmE=) | `39.13% <0.00%> (-8.70%)` | :arrow_down: |\n| [...va/org/apache/rocketmq/common/stats/StatsItem.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNJdGVtLmphdmE=) | `50.00% <0.00%> (-5.00%)` | :arrow_down: |\n| [...e/rocketmq/store/ha/autoswitch/EpochFileCache.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL2F1dG9zd2l0Y2gvRXBvY2hGaWxlQ2FjaGUuamF2YQ==) | `77.08% <0.00%> (-4.17%)` | :arrow_down: |\n| [...org/apache/rocketmq/common/stats/StatsItemSet.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNJdGVtU2V0LmphdmE=) | `41.79% <0.00%> (-2.99%)` | :arrow_down: |\n| [...cketmq/broker/schedule/ScheduleMessageService.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvc2NoZWR1bGUvU2NoZWR1bGVNZXNzYWdlU2VydmljZS5qYXZh) | `56.91% <0.00%> (-1.14%)` | :arrow_down: |\n| [...mq/store/ha/autoswitch/AutoSwitchHAConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL2F1dG9zd2l0Y2gvQXV0b1N3aXRjaEhBQ29ubmVjdGlvbi5qYXZh) | `70.27% <0.00%> (-1.09%)` | :arrow_down: |\n| ... and [17 more](https://codecov.io/gh/apache/rocketmq/pull/5725/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356117568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356122426","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356122426","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356122426,"node_id":"IC_kwDOBHrsl85Q1Mk6","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:39:01Z","updated_at":"2022-12-17T08:39:01Z","author_association":"MEMBER","body":"> > the possibility to use a different clock source\r\n> \r\n> then `now` should be wrapped as a static method just as guava did. Guava wraps a class method into a static method which is more reasonable.\r\n> \r\n> as the possiblity to use a different clock source,is there any neccessary or just a over-design?\r\n\r\nI'm just making a guess about the current design. IMO, It is inappropriate to use `System.currentTimeMillis()` in TimerMessageStore. If we can use the mock time source, it would be of great help to our test.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356122426/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356123006","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356123006","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356123006,"node_id":"IC_kwDOBHrsl85Q1Mt-","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:43:18Z","updated_at":"2022-12-17T08:46:01Z","author_association":"CONTRIBUTOR","body":"> It is inappropriate to use `System.currentTimeMillis()` in TimerMessageStore\r\n\r\nthis  can be set as a new issue to deal with.     the modification has not change anything in the TimerMessageStore\r\n\r\n> it would be of great help to our test\r\n\r\ntest friendly is really a good aspect to concern.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356123006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356123226","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356123226","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356123226,"node_id":"IC_kwDOBHrsl85Q1Mxa","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:45:00Z","updated_at":"2022-12-17T08:45:00Z","author_association":"MEMBER","body":"We currently use less precise means of validating delayed messages, which leads to some flaky tests.\r\n\r\nhttps://github.com/apache/rocketmq/blob/81e3648e3fcb1995897db3960a4561d6047b696c/test/src/main/java/org/apache/rocketmq/test/util/VerifyUtils.java#L85-L96","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356123226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356124115","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356124115","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356124115,"node_id":"IC_kwDOBHrsl85Q1M_T","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T08:51:22Z","updated_at":"2022-12-17T10:24:50Z","author_association":"CONTRIBUTOR","body":" IMO ,I think it(the flaky tests) was not caused by time precision ,it's the nature of  time  unittesting to be difficult.\r\n\r\nTime related tests are affected by many aspects","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356124115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356168158","html_url":"https://github.com/apache/rocketmq/issues/5720#issuecomment-1356168158","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5720","id":1356168158,"node_id":"IC_kwDOBHrsl85Q1Xve","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T10:42:19Z","updated_at":"2022-12-17T10:43:03Z","author_association":"CONTRIBUTOR","body":"btw,there are some issue in the above verifyDelay.this can be opened in a new issue.\r\n![image](https://user-images.githubusercontent.com/105986/208237902-4059d67e-1e71-4796-bf8c-ec35be72a45e.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356168158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356251295","html_url":"https://github.com/apache/rocketmq/pull/5727#issuecomment-1356251295","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5727","id":1356251295,"node_id":"IC_kwDOBHrsl85Q1sCf","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T13:03:36Z","updated_at":"2022-12-17T13:05:35Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5727?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5727](https://codecov.io/gh/apache/rocketmq/pull/5727?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (cd0afde) into [develop](https://codecov.io/gh/apache/rocketmq/commit/81e3648e3fcb1995897db3960a4561d6047b696c?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (81e3648) will **decrease** coverage by `0.03%`.\n> The diff coverage is `0.00%`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5727      +/-   ##\n=============================================\n- Coverage      42.46%   42.43%   -0.04%     \n+ Complexity      8223     8207      -16     \n=============================================\n  Files           1060     1060              \n  Lines          73175    73176       +1     \n  Branches        9606     9606              \n=============================================\n- Hits           31076    31050      -26     \n- Misses         38188    38212      +24     \n- Partials        3911     3914       +3     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5727?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ava/org/apache/rocketmq/test/util/VerifyUtils.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-dGVzdC9zcmMvbWFpbi9qYXZhL29yZy9hcGFjaGUvcm9ja2V0bXEvdGVzdC91dGlsL1ZlcmlmeVV0aWxzLmphdmE=) | `0.00% <0.00%> (ø)` | |\n| [...rg/apache/rocketmq/common/stats/StatsSnapshot.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNTbmFwc2hvdC5qYXZh) | `84.61% <0.00%> (-15.39%)` | :arrow_down: |\n| [...apache/rocketmq/broker/longpolling/PopRequest.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvbG9uZ3BvbGxpbmcvUG9wUmVxdWVzdC5qYXZh) | `31.03% <0.00%> (-13.80%)` | :arrow_down: |\n| [.../apache/rocketmq/common/stats/MomentStatsItem.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvTW9tZW50U3RhdHNJdGVtLmphdmE=) | `38.09% <0.00%> (-9.53%)` | :arrow_down: |\n| [...va/org/apache/rocketmq/store/FlushDiskWatcher.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0ZsdXNoRGlza1dhdGNoZXIuamF2YQ==) | `81.25% <0.00%> (-9.38%)` | :arrow_down: |\n| [...ache/rocketmq/common/stats/MomentStatsItemSet.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvTW9tZW50U3RhdHNJdGVtU2V0LmphdmE=) | `39.13% <0.00%> (-8.70%)` | :arrow_down: |\n| [...va/org/apache/rocketmq/common/stats/StatsItem.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNJdGVtLmphdmE=) | `50.00% <0.00%> (-5.00%)` | :arrow_down: |\n| [...org/apache/rocketmq/common/stats/StatsItemSet.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNJdGVtU2V0LmphdmE=) | `41.79% <0.00%> (-2.99%)` | :arrow_down: |\n| [.../org/apache/rocketmq/store/ha/DefaultHAClient.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL0RlZmF1bHRIQUNsaWVudC5qYXZh) | `59.48% <0.00%> (-2.06%)` | :arrow_down: |\n| [...mq/client/impl/consumer/RebalanceLitePullImpl.java](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvaW1wbC9jb25zdW1lci9SZWJhbGFuY2VMaXRlUHVsbEltcGwuamF2YQ==) | `69.86% <0.00%> (-1.37%)` | :arrow_down: |\n| ... and [10 more](https://codecov.io/gh/apache/rocketmq/pull/5727/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356251295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356325504","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356325504","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356325504,"node_id":"IC_kwDOBHrsl85Q1-KA","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T16:25:47Z","updated_at":"2022-12-17T16:27:52Z","author_association":"MEMBER","body":"It seems like `GrpcClientSettingsManager#getClientSettings` possibly returns null.\r\n\r\nhttps://github.com/apache/rocketmq/blob/bdf5c95ce686ff2721d67b0ef040262b57691132/proxy/src/main/java/org/apache/rocketmq/proxy/grpc/v2/common/GrpcClientSettingsManager.java#L69-L73\r\n\r\ncc @xdkxlk @drpmma ","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356325504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356327785","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356327785","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356327785,"node_id":"IC_kwDOBHrsl85Q1-tp","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-17T16:34:13Z","updated_at":"2022-12-17T16:34:13Z","author_association":"MEMBER","body":"@bendan365 Could you please give more detailed information? Such as client/proxy/broker version, and consumer type (push/pull or simple consumer).","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356327785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356509135","html_url":"https://github.com/apache/rocketmq/issues/3617#issuecomment-1356509135","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/3617","id":1356509135,"node_id":"IC_kwDOBHrsl85Q2q_P","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T00:07:33Z","updated_at":"2022-12-18T00:07:33Z","author_association":"NONE","body":"This issue was closed because it has been inactive for 3 days since being marked as stale.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356509135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356641651","html_url":"https://github.com/apache/rocketmq/pull/5731#issuecomment-1356641651","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5731","id":1356641651,"node_id":"IC_kwDOBHrsl85Q3LVz","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T02:58:25Z","updated_at":"2025-01-08T13:50:07Z","author_association":"NONE","body":"## [Codecov](https://app.codecov.io/gh/apache/rocketmq/pull/5731?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) Report\nAll modified and coverable lines are covered by tests :white_check_mark:\n> Project coverage is 42.43%. Comparing base [(`81e3648`)](https://app.codecov.io/gh/apache/rocketmq/commit/81e3648e3fcb1995897db3960a4561d6047b696c?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache) to head [(`668cbac`)](https://app.codecov.io/gh/apache/rocketmq/commit/668cbacf13c6b8c19b2f7c44e1c944a90fa00ab5?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n> Report is 1041 commits behind head on develop.\n\n<details><summary>Additional details and impacted files</summary>\n\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5731      +/-   ##\n=============================================\n- Coverage      42.46%   42.43%   -0.04%     \n+ Complexity      8223     8209      -14     \n=============================================\n  Files           1060     1060              \n  Lines          73175    73175              \n  Branches        9606     9606              \n=============================================\n- Hits           31076    31053      -23     \n- Misses         38188    38211      +23     \n  Partials        3911     3911              \n```\n\n</details>\n\n[:umbrella: View full report in Codecov by Sentry](https://app.codecov.io/gh/apache/rocketmq/pull/5731?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).   \n:loudspeaker: Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=apache).\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356641651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356656885","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356656885","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356656885,"node_id":"IC_kwDOBHrsl85Q3PD1","user":{"login":"bendan365","id":3345783,"node_id":"MDQ6VXNlcjMzNDU3ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3345783?v=4","gravatar_id":"","url":"https://api.github.com/users/bendan365","html_url":"https://github.com/bendan365","followers_url":"https://api.github.com/users/bendan365/followers","following_url":"https://api.github.com/users/bendan365/following{/other_user}","gists_url":"https://api.github.com/users/bendan365/gists{/gist_id}","starred_url":"https://api.github.com/users/bendan365/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bendan365/subscriptions","organizations_url":"https://api.github.com/users/bendan365/orgs","repos_url":"https://api.github.com/users/bendan365/repos","events_url":"https://api.github.com/users/bendan365/events{/privacy}","received_events_url":"https://api.github.com/users/bendan365/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T04:00:16Z","updated_at":"2022-12-18T04:22:45Z","author_association":"NONE","body":">  $clientId = \"localhost@\".$this->getRandStr(4) . '@' . rand(0, 10) . '@' . $this->getRandStr(10);  \r\n>         $client = new MessagingServiceClient('127.0.0.1:8081', \r\n>             [\r\n>                 'credentials' => ChannelCredentials::createSsl(file_get_contents(__DIR__.\"\\\\rocketmq.crt\")),\r\n>                 'grpc.ssl_target_name_override'=>'localhost',\r\n>                 'update_metadata' => function ($metaData) use ($clientId) {\r\n>                     $metaData['x-mq-client-id'] = [$clientId];\r\n>                     return $metaData;\r\n>                 }\r\n>             ]        \r\n>         );\r\n>         $request = new ReceiveMessageRequest();\r\n>         $mq = new MessageQueue();\r\n> \r\n>         $resource = new Resource();\r\n>         $resource->setName('xlp_test_topic');\r\n>         $mq->setAcceptMessageTypes([MessageType::NORMAL]);\r\n>         $mq->setTopic($resource);\r\n>         $request->setMessageQueue($mq);\r\n> \r\n>         $group = new Resource();\r\n>         $group->setName('xlp_test_consumer');\r\n>         $request->setGroup($group);\r\n> \r\n>         $filterExpression = new FilterExpression();\r\n>         $filterExpression->setExpression(\"common_test\");\r\n>         $filterExpression->setType(FilterType::TAG);\r\n>         $request->setFilterExpression($filterExpression);\r\n> \r\n>         $duration = new Duration();\r\n>         $duration->setSeconds(10);\r\n>         $request->setInvisibleDuration($duration);\r\n> \r\n>         $request->setBatchSize(2);\r\n>         $request->setAutoRenew(false);\r\n> \r\n>         $serverStreamingCall = $client->ReceiveMessage($request);\r\n> \r\n> \r\n>         $response = $serverStreamingCall->responses();","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356656885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356658331","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356658331","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356658331,"node_id":"IC_kwDOBHrsl85Q3Pab","user":{"login":"bendan365","id":3345783,"node_id":"MDQ6VXNlcjMzNDU3ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3345783?v=4","gravatar_id":"","url":"https://api.github.com/users/bendan365","html_url":"https://github.com/bendan365","followers_url":"https://api.github.com/users/bendan365/followers","following_url":"https://api.github.com/users/bendan365/following{/other_user}","gists_url":"https://api.github.com/users/bendan365/gists{/gist_id}","starred_url":"https://api.github.com/users/bendan365/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bendan365/subscriptions","organizations_url":"https://api.github.com/users/bendan365/orgs","repos_url":"https://api.github.com/users/bendan365/repos","events_url":"https://api.github.com/users/bendan365/events{/privacy}","received_events_url":"https://api.github.com/users/bendan365/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T04:10:26Z","updated_at":"2022-12-18T04:21:38Z","author_association":"NONE","body":"### rocketmq-all-5.0.0-bin-release\r\n### use postman\r\n**1、message data**\r\n\r\n> {\r\n>     \"auto_renew\": true,\r\n>     \"batch_size\": 1,\r\n>     \"filter_expression\": {\r\n>         \"expression\": \"*\",\r\n>         \"type\": 2\r\n>     },\r\n>     \"group\": {\r\n>         \"name\": \"xlp_test_consumer\",\r\n>         \"resource_namespace\": \"\"\r\n>     },\r\n>     \"message_queue\": {\r\n>         \"id\": 1241820371,\r\n>         \"permission\": 3,\r\n>         \"topic\": {\r\n>             \"name\": \"xlp_test_topic\",\r\n>             \"resource_namespace\": \"\"\r\n>         }\r\n>     }\r\n> }\r\n\r\n**2、metadata**\r\nKEY：x-mq-client-id，value:f122a1e0-dbcf-4ca4-9db7-221903354be7\r\n\r\n**the response data is**\r\n{\r\n    \"status\": {\r\n        \"code\": \"INTERNAL_SERVER_ERROR\",\r\n        \"message\": \"null. NullPointerException. org.apache.rocketmq.proxy.grpc.v2.consumer.ReceiveMessageActivity.receiveMessage(ReceiveMessageActivity.java:65)\"\r\n    }\r\n}\r\n**proxy log**\r\n\r\n2022-12-18 12:03:15 ERROR GrpcConsumerThreadPool-11 - internal server error\r\njava.lang.NullPointerException: null\r\n\tat org.apache.rocketmq.proxy.grpc.v2.consumer.ReceiveMessageActivity.receiveMessage(ReceiveMessageActivity.java:65)\r\n\tat org.apache.rocketmq.proxy.grpc.v2.DefaultGrpcMessingActivity.receiveMessage(DefaultGrpcMessingActivity.java:120)\r\n\tat org.apache.rocketmq.proxy.grpc.v2.GrpcMessagingApplication.lambda$receiveMessage$13(GrpcMessagingApplication.java:275)\r\n\tat org.apache.rocketmq.proxy.grpc.v2.GrpcMessagingApplication$GrpcTask.run(GrpcMessagingApplication.java:445)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356658331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356672866","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356672866","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356672866,"node_id":"IC_kwDOBHrsl85Q3S9i","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T05:10:19Z","updated_at":"2022-12-18T05:10:19Z","author_association":"MEMBER","body":"@bendan365 Please use the official client provided in [apache/rocketmq-clients](https://github.com/apache/rocketmq-clients)","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356672866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356674635","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356674635","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356674635,"node_id":"IC_kwDOBHrsl85Q3TZL","user":{"login":"bendan365","id":3345783,"node_id":"MDQ6VXNlcjMzNDU3ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3345783?v=4","gravatar_id":"","url":"https://api.github.com/users/bendan365","html_url":"https://github.com/bendan365","followers_url":"https://api.github.com/users/bendan365/followers","following_url":"https://api.github.com/users/bendan365/following{/other_user}","gists_url":"https://api.github.com/users/bendan365/gists{/gist_id}","starred_url":"https://api.github.com/users/bendan365/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bendan365/subscriptions","organizations_url":"https://api.github.com/users/bendan365/orgs","repos_url":"https://api.github.com/users/bendan365/repos","events_url":"https://api.github.com/users/bendan365/events{/privacy}","received_events_url":"https://api.github.com/users/bendan365/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T05:17:14Z","updated_at":"2022-12-18T05:17:14Z","author_association":"NONE","body":"> @bendan365 Please use the official client provided in [apache/rocketmq-clients](https://github.com/apache/rocketmq-clients)\r\n\r\nthe php code is [example](https://github.com/apache/rocketmq-clients/blob/master/php/Consumer.php)，but it is imperfect","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356674635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356676371","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356676371","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356676371,"node_id":"IC_kwDOBHrsl85Q3T0T","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T05:22:06Z","updated_at":"2022-12-18T05:22:06Z","author_association":"MEMBER","body":"> > @bendan365 Please use the official client provided in [apache/rocketmq-clients](https://github.com/apache/rocketmq-clients)\r\n> \r\n> the php code is [example](https://github.com/apache/rocketmq-clients/blob/master/php/Consumer.php)，but it is imperfect\r\n\r\nPHP client is still working in progress, we can discuss this in [apache/rocketmq-clients](https://github.com/apache/rocketmq-clients). And It would be welcome if you help to improve it.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356676371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356677760","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356677760","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356677760,"node_id":"IC_kwDOBHrsl85Q3UKA","user":{"login":"bendan365","id":3345783,"node_id":"MDQ6VXNlcjMzNDU3ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3345783?v=4","gravatar_id":"","url":"https://api.github.com/users/bendan365","html_url":"https://github.com/bendan365","followers_url":"https://api.github.com/users/bendan365/followers","following_url":"https://api.github.com/users/bendan365/following{/other_user}","gists_url":"https://api.github.com/users/bendan365/gists{/gist_id}","starred_url":"https://api.github.com/users/bendan365/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bendan365/subscriptions","organizations_url":"https://api.github.com/users/bendan365/orgs","repos_url":"https://api.github.com/users/bendan365/repos","events_url":"https://api.github.com/users/bendan365/events{/privacy}","received_events_url":"https://api.github.com/users/bendan365/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T05:29:29Z","updated_at":"2022-12-18T05:29:29Z","author_association":"NONE","body":"> \r\n\r\n### proxy log\r\n\r\n> ERROR GrpcConsumerThreadPool-11 - internal server error\r\n> java.lang.NullPointerException: null\r\n> at org.apache.rocketmq.proxy.grpc.v2.consumer.ReceiveMessageActivity.receiveMessage(ReceiveMessageActivity.java:65)\r\n\r\nIt is the proxy bug，not client.\r\nAnd the other language example,transmitted parameters are the same.\r\nI dont konw how to improve.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356677760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356678659","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1356678659","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1356678659,"node_id":"IC_kwDOBHrsl85Q3UYD","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T05:35:39Z","updated_at":"2022-12-18T05:36:43Z","author_association":"MEMBER","body":"> > \r\n> \r\n> ### proxy log\r\n> > ERROR GrpcConsumerThreadPool-11 - internal server error\r\n> > java.lang.NullPointerException: null\r\n> > at org.apache.rocketmq.proxy.grpc.v2.consumer.ReceiveMessageActivity.receiveMessage(ReceiveMessageActivity.java:65)\r\n> \r\n> It is the proxy bug，not client. And the other language example,transmitted parameters are the same. I dont konw how to improve.\r\n\r\nA client should register itself to proxy before receive message so that proxy can get subscription from client settings. Anyway current logic of proxy is indeed improper and should be improved.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356678659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356777760","html_url":"https://github.com/apache/rocketmq/issues/5518#issuecomment-1356777760","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5518","id":1356777760,"node_id":"IC_kwDOBHrsl85Q3skg","user":{"login":"azhsmesos","id":65518067,"node_id":"MDQ6VXNlcjY1NTE4MDY3","avatar_url":"https://avatars.githubusercontent.com/u/65518067?v=4","gravatar_id":"","url":"https://api.github.com/users/azhsmesos","html_url":"https://github.com/azhsmesos","followers_url":"https://api.github.com/users/azhsmesos/followers","following_url":"https://api.github.com/users/azhsmesos/following{/other_user}","gists_url":"https://api.github.com/users/azhsmesos/gists{/gist_id}","starred_url":"https://api.github.com/users/azhsmesos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/azhsmesos/subscriptions","organizations_url":"https://api.github.com/users/azhsmesos/orgs","repos_url":"https://api.github.com/users/azhsmesos/repos","events_url":"https://api.github.com/users/azhsmesos/events{/privacy}","received_events_url":"https://api.github.com/users/azhsmesos/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T11:27:09Z","updated_at":"2022-12-18T11:27:09Z","author_association":"CONTRIBUTOR","body":"> @hzh0425 @azhsmesos @lizhanhui I have submitted the [RIP-57](https://github.com/apache/rocketmq/wiki/RIP-57-Tiered-storage-for-RocketMQ) to implement tiered storage for RocketMQ. We can discuss it in [mail list](https://lists.apache.org/thread/nzp123b2syv719sznnt74kjbth5m6rto).\r\n\r\nCool! Is it already under development?","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356777760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356838527","html_url":"https://github.com/apache/rocketmq/pull/5733#issuecomment-1356838527","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5733","id":1356838527,"node_id":"IC_kwDOBHrsl85Q37Z_","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T17:08:08Z","updated_at":"2022-12-18T17:08:08Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5733?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5733](https://codecov.io/gh/apache/rocketmq/pull/5733?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (a3008b9) into [develop](https://codecov.io/gh/apache/rocketmq/commit/d63fb923cef87b8961c262668fc8b52693869bb6?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (d63fb92) will **increase** coverage by `0.02%`.\n> The diff coverage is `n/a`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5733      +/-   ##\n=============================================\n+ Coverage      42.40%   42.42%   +0.02%     \n- Complexity      8201     8209       +8     \n=============================================\n  Files           1060     1060              \n  Lines          73176    73176              \n  Branches        9606     9606              \n=============================================\n+ Hits           31028    31048      +20     \n+ Misses         38228    38212      -16     \n+ Partials        3920     3916       -4     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5733?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...org/apache/rocketmq/store/ha/WaitNotifyObject.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL1dhaXROb3RpZnlPYmplY3QuamF2YQ==) | `80.35% <0.00%> (-5.36%)` | :arrow_down: |\n| [...tmq/remoting/protocol/body/ConsumerConnection.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cmVtb3Rpbmcvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3JlbW90aW5nL3Byb3RvY29sL2JvZHkvQ29uc3VtZXJDb25uZWN0aW9uLmphdmE=) | `95.83% <0.00%> (-4.17%)` | :arrow_down: |\n| [...ava/org/apache/rocketmq/filter/util/BitsArray.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-ZmlsdGVyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9maWx0ZXIvdXRpbC9CaXRzQXJyYXkuamF2YQ==) | `58.11% <0.00%> (-1.71%)` | :arrow_down: |\n| [...he/rocketmq/client/trace/AsyncTraceDispatcher.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvdHJhY2UvQXN5bmNUcmFjZURpc3BhdGNoZXIuamF2YQ==) | `83.65% <0.00%> (-0.97%)` | :arrow_down: |\n| [...a/org/apache/rocketmq/store/StoreStatsService.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL1N0b3JlU3RhdHNTZXJ2aWNlLmphdmE=) | `34.53% <0.00%> (-0.56%)` | :arrow_down: |\n| [...mq/client/impl/producer/DefaultMQProducerImpl.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y2xpZW50L3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jbGllbnQvaW1wbC9wcm9kdWNlci9EZWZhdWx0TVFQcm9kdWNlckltcGwuamF2YQ==) | `46.17% <0.00%> (-0.25%)` | :arrow_down: |\n| [...va/org/apache/rocketmq/store/FlushDiskWatcher.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0ZsdXNoRGlza1dhdGNoZXIuamF2YQ==) | `81.25% <0.00%> (ø)` | |\n| [.../org/apache/rocketmq/proxy/config/ProxyConfig.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-cHJveHkvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3Byb3h5L2NvbmZpZy9Qcm94eUNvbmZpZy5qYXZh) | `44.26% <0.00%> (ø)` | |\n| [...apache/rocketmq/store/timer/TimerMessageStore.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL3RpbWVyL1RpbWVyTWVzc2FnZVN0b3JlLmphdmE=) | `54.39% <0.00%> (+0.09%)` | :arrow_up: |\n| [...main/java/org/apache/rocketmq/store/CommitLog.java](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0NvbW1pdExvZy5qYXZh) | `65.30% <0.00%> (+0.30%)` | :arrow_up: |\n| ... and [7 more](https://codecov.io/gh/apache/rocketmq/pull/5733/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356838527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356848239","html_url":"https://github.com/apache/rocketmq/issues/5538#issuecomment-1356848239","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5538","id":1356848239,"node_id":"IC_kwDOBHrsl85Q39xv","user":{"login":"The-Gamer-01","id":58755323,"node_id":"MDQ6VXNlcjU4NzU1MzIz","avatar_url":"https://avatars.githubusercontent.com/u/58755323?v=4","gravatar_id":"","url":"https://api.github.com/users/The-Gamer-01","html_url":"https://github.com/The-Gamer-01","followers_url":"https://api.github.com/users/The-Gamer-01/followers","following_url":"https://api.github.com/users/The-Gamer-01/following{/other_user}","gists_url":"https://api.github.com/users/The-Gamer-01/gists{/gist_id}","starred_url":"https://api.github.com/users/The-Gamer-01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/The-Gamer-01/subscriptions","organizations_url":"https://api.github.com/users/The-Gamer-01/orgs","repos_url":"https://api.github.com/users/The-Gamer-01/repos","events_url":"https://api.github.com/users/The-Gamer-01/events{/privacy}","received_events_url":"https://api.github.com/users/The-Gamer-01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-18T18:15:27Z","updated_at":"2022-12-18T18:15:27Z","author_association":"NONE","body":"I would like to give it a try, can you assign this issue to me","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356848239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911043","html_url":"https://github.com/apache/rocketmq/issues/3369#issuecomment-1356911043","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/3369","id":1356911043,"node_id":"IC_kwDOBHrsl85Q4NHD","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T00:08:59Z","updated_at":"2022-12-19T00:08:59Z","author_association":"NONE","body":"This issue was closed because it has been inactive for 3 days since being marked as stale.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911052","html_url":"https://github.com/apache/rocketmq/issues/2660#issuecomment-1356911052","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/2660","id":1356911052,"node_id":"IC_kwDOBHrsl85Q4NHM","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T00:09:00Z","updated_at":"2022-12-19T00:09:00Z","author_association":"NONE","body":"This issue is stale because it has been open for 365 days with no activity. It will be closed in 3 days if no further activity occurs.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911070","html_url":"https://github.com/apache/rocketmq/issues/2292#issuecomment-1356911070","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/2292","id":1356911070,"node_id":"IC_kwDOBHrsl85Q4NHe","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T00:09:03Z","updated_at":"2022-12-19T00:09:03Z","author_association":"NONE","body":"This issue was closed because it has been inactive for 3 days since being marked as stale.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1356911070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357085525","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357085525","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357085525,"node_id":"IC_kwDOBHrsl85Q43tV","user":{"login":"mz0113","id":42512469,"node_id":"MDQ6VXNlcjQyNTEyNDY5","avatar_url":"https://avatars.githubusercontent.com/u/42512469?v=4","gravatar_id":"","url":"https://api.github.com/users/mz0113","html_url":"https://github.com/mz0113","followers_url":"https://api.github.com/users/mz0113/followers","following_url":"https://api.github.com/users/mz0113/following{/other_user}","gists_url":"https://api.github.com/users/mz0113/gists{/gist_id}","starred_url":"https://api.github.com/users/mz0113/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mz0113/subscriptions","organizations_url":"https://api.github.com/users/mz0113/orgs","repos_url":"https://api.github.com/users/mz0113/repos","events_url":"https://api.github.com/users/mz0113/events{/privacy}","received_events_url":"https://api.github.com/users/mz0113/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T04:36:59Z","updated_at":"2022-12-19T04:41:24Z","author_association":"NONE","body":"@xiaoyifang @francisoliverlee \r\n我觉得这个复现的可能前提条件是broker压力较大，导致for循环会跑多次时候造成的巧合。应该从概率论角度来分析，单纯随便找个场景想复现可能有难度。\r\n\r\n关于我设置 SendLatencyFaultEnable ， 没动什么其他配置，就仅仅producer.setSendLatencyFaultEnable(true) 把它启用了。\r\n橙红色圈画出来的位置.我看了，pos小于0没出现过. （目前我居家，家里的同版本mq broker和client我重现不出来这个问题）\r\n\r\n我还是觉得这个场景或许得从概率论角度来分析，在broker压力较大时候，for循环会执行多次。甚至和queue的数量也有关系\r\n为了验证猜测，我把源码这里算pos的加了日志，根据日志打印情况，显示for循环会执行差不多3-10次之间把。","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357085525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357091670","html_url":"https://github.com/apache/rocketmq/issues/5729#issuecomment-1357091670","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5729","id":1357091670,"node_id":"IC_kwDOBHrsl85Q45NW","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T04:51:32Z","updated_at":"2022-12-19T04:51:32Z","author_association":"MEMBER","body":"It is indeed uneven distribution when the number of messages is low. But it doesn't matter. IMO, only the uneven distribution of a large number of messages will have an impact on consumption. It may be a better choice to achieve eventual balance with less cost rather than absolute balance with complex consistency logic.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357091670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357125675","html_url":"https://github.com/apache/rocketmq/issues/5729#issuecomment-1357125675","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5729","id":1357125675,"node_id":"IC_kwDOBHrsl85Q5Bgr","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T05:36:25Z","updated_at":"2022-12-19T05:36:25Z","author_association":"CONTRIBUTOR","body":"agreed ,\r\n\r\nanother point is that the threadlocal can be replaced with a class variable. anyway it is not a big deal.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357125675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357150631","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357150631","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357150631,"node_id":"IC_kwDOBHrsl85Q5Hmn","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T06:12:30Z","updated_at":"2022-12-19T06:41:56Z","author_association":"CONTRIBUTOR","body":"> 我觉得这个复现的可能前提条件是broker压力较大，导致for循环会跑多次时候造成的巧合\r\n\r\nshould be this reason.\r\n\r\nwhen enabled `SendLatencyFaultEnable `   ,rocketmq would try to skip the problemed broker (I think the implementation has some issue，will discuse in following) for a period of time, So when brokera has been put into the `faultItemTable`, `selectOneMessageQueue` would try to skip this broker.\r\n\r\n![image](https://user-images.githubusercontent.com/105986/208358604-6bd27b17-a1ef-4b22-88ac-202294d3ee9c.png)\r\n\r\nin the above case ,all data (which should belong brokera)  go into the first availabe consumequeue in brokerb (about 1/2 of all data)\r\n\r\n\r\nNow ,The problem should be changed into **when one broker is in trobule,the messageQueue will not be evenly distributed**\r\n\r\nso why `brokera` has been put into the `faultItemTable`(method latencyFaultTolerance.isAvailable is using this),\r\n\r\n`faultItemTable` is updated in three places , briefly browsing them ,I can see only the following invoke place is ok.\r\n\r\n![image](https://user-images.githubusercontent.com/105986/208359156-10c442bb-0122-4a5a-8020-78dcfbee0931.png)\r\n\r\nthe other 2 places have little meaning.\r\nlike this ,\r\n![image](https://user-images.githubusercontent.com/105986/208359558-56cb4321-6271-42fa-b237-22dc5ff94714.png)\r\n\r\n\r\nsomeone should check this logic.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357150631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357160202","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357160202","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357160202,"node_id":"IC_kwDOBHrsl85Q5J8K","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T06:25:03Z","updated_at":"2022-12-19T06:31:07Z","author_association":"CONTRIBUTOR","body":"And ,this PR https://github.com/apache/rocketmq/pull/5718  should also fixed this unevenly distributed issue.\r\n\r\nput the outlined code into the for loop ,should fixed this unevely distributed issue.\r\n![image](https://user-images.githubusercontent.com/105986/208362169-e5814d41-7ad2-44f4-9e76-a3e38a1f4431.png)\r\n\r\n\r\nbut still need someone to check the `faultItemTable` logic.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357160202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357163121","html_url":"https://github.com/apache/rocketmq/issues/5716#issuecomment-1357163121","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5716","id":1357163121,"node_id":"IC_kwDOBHrsl85Q5Kpx","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T06:30:18Z","updated_at":"2022-12-19T06:38:46Z","author_association":"CONTRIBUTOR","body":"`int index = tpInfo.getSendWhichQueue().incrementAndGet(); ` \r\nthis line is outside the for loop ,will cause unevenly distributed message just like https://github.com/apache/rocketmq/issues/5672#issuecomment-1357150631 discussed.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357163121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357172010","html_url":"https://github.com/apache/rocketmq/issues/5678#issuecomment-1357172010","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5678","id":1357172010,"node_id":"IC_kwDOBHrsl85Q5M0q","user":{"login":"Bughue","id":3788653,"node_id":"MDQ6VXNlcjM3ODg2NTM=","avatar_url":"https://avatars.githubusercontent.com/u/3788653?v=4","gravatar_id":"","url":"https://api.github.com/users/Bughue","html_url":"https://github.com/Bughue","followers_url":"https://api.github.com/users/Bughue/followers","following_url":"https://api.github.com/users/Bughue/following{/other_user}","gists_url":"https://api.github.com/users/Bughue/gists{/gist_id}","starred_url":"https://api.github.com/users/Bughue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Bughue/subscriptions","organizations_url":"https://api.github.com/users/Bughue/orgs","repos_url":"https://api.github.com/users/Bughue/repos","events_url":"https://api.github.com/users/Bughue/events{/privacy}","received_events_url":"https://api.github.com/users/Bughue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T06:46:59Z","updated_at":"2022-12-19T06:46:59Z","author_association":"NONE","body":"I would like to give it a try, can you assign this issue to me","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357172010/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357175223","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357175223","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357175223,"node_id":"IC_kwDOBHrsl85Q5Nm3","user":{"login":"mz0113","id":42512469,"node_id":"MDQ6VXNlcjQyNTEyNDY5","avatar_url":"https://avatars.githubusercontent.com/u/42512469?v=4","gravatar_id":"","url":"https://api.github.com/users/mz0113","html_url":"https://github.com/mz0113","followers_url":"https://api.github.com/users/mz0113/followers","following_url":"https://api.github.com/users/mz0113/following{/other_user}","gists_url":"https://api.github.com/users/mz0113/gists{/gist_id}","starred_url":"https://api.github.com/users/mz0113/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mz0113/subscriptions","organizations_url":"https://api.github.com/users/mz0113/orgs","repos_url":"https://api.github.com/users/mz0113/repos","events_url":"https://api.github.com/users/mz0113/events{/privacy}","received_events_url":"https://api.github.com/users/mz0113/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T06:52:37Z","updated_at":"2022-12-19T06:52:37Z","author_association":"NONE","body":"@xiaoyifang 你的推断我觉得没有问题，brokera被暂时规避掉后，ThreadlocalRandom随机出来的index值如果<24，那么从0-24都是brokera的queue都会被skip掉。一直循环，直到下一个可用的broker一定是broker-b。此时pos就被累加成24，即 brokerb-queue-0","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357175223/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357179926","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357179926","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357179926,"node_id":"IC_kwDOBHrsl85Q5OwW","user":{"login":"mz0113","id":42512469,"node_id":"MDQ6VXNlcjQyNTEyNDY5","avatar_url":"https://avatars.githubusercontent.com/u/42512469?v=4","gravatar_id":"","url":"https://api.github.com/users/mz0113","html_url":"https://github.com/mz0113","followers_url":"https://api.github.com/users/mz0113/followers","following_url":"https://api.github.com/users/mz0113/following{/other_user}","gists_url":"https://api.github.com/users/mz0113/gists{/gist_id}","starred_url":"https://api.github.com/users/mz0113/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mz0113/subscriptions","organizations_url":"https://api.github.com/users/mz0113/orgs","repos_url":"https://api.github.com/users/mz0113/repos","events_url":"https://api.github.com/users/mz0113/events{/privacy}","received_events_url":"https://api.github.com/users/mz0113/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T07:00:36Z","updated_at":"2022-12-19T07:01:13Z","author_association":"NONE","body":"@xiaoyifang faultItemTable并不是存放故障的broker，它其实维护了所有的broker的状态。之所以这么做，是因为有时候发送延迟较大，尽管发送成功了。此时也会依照预设值将其规避不同时长。比如发送时延如果达到500ms，就规避10秒，达到1000ms，就规避30秒。这样来降低这台broker的压力。\r\n所以每次发送不论失败，都会去更新faultItemTable中对应broker的状态，看看是否需要规避，需要规避多久","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357179926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357195479","html_url":"https://github.com/apache/rocketmq/issues/5672#issuecomment-1357195479","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5672","id":1357195479,"node_id":"IC_kwDOBHrsl85Q5SjX","user":{"login":"xiaoyifang","id":105986,"node_id":"MDQ6VXNlcjEwNTk4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/105986?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaoyifang","html_url":"https://github.com/xiaoyifang","followers_url":"https://api.github.com/users/xiaoyifang/followers","following_url":"https://api.github.com/users/xiaoyifang/following{/other_user}","gists_url":"https://api.github.com/users/xiaoyifang/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaoyifang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaoyifang/subscriptions","organizations_url":"https://api.github.com/users/xiaoyifang/orgs","repos_url":"https://api.github.com/users/xiaoyifang/repos","events_url":"https://api.github.com/users/xiaoyifang/events{/privacy}","received_events_url":"https://api.github.com/users/xiaoyifang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T07:12:40Z","updated_at":"2022-12-19T07:13:24Z","author_association":"CONTRIBUTOR","body":"en ,应该是这样的设计。\r\n\r\n不过这样的话，容易造成其他问题。可能会造成短时间内，所有broker都不可用（应该会进入上述for循环之外的fallback逻辑）。对吞吐量应该影响比较大。\r\n\r\n比较好的做法是faultItemTable只存有故障的，进行规定时长内规避，其他正常的broker可以按照响应时间 筛选，\r\n比如 brokera 时延 10ms， brokerb 100ms ,挑选命中brokera的概率可以比brokera高个10倍。","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357195479/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357229583","html_url":"https://github.com/apache/rocketmq/pull/5722#issuecomment-1357229583","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5722","id":1357229583,"node_id":"IC_kwDOBHrsl85Q5a4P","user":{"login":"codecov-commenter","id":65553080,"node_id":"MDQ6VXNlcjY1NTUzMDgw","avatar_url":"https://avatars.githubusercontent.com/u/65553080?v=4","gravatar_id":"","url":"https://api.github.com/users/codecov-commenter","html_url":"https://github.com/codecov-commenter","followers_url":"https://api.github.com/users/codecov-commenter/followers","following_url":"https://api.github.com/users/codecov-commenter/following{/other_user}","gists_url":"https://api.github.com/users/codecov-commenter/gists{/gist_id}","starred_url":"https://api.github.com/users/codecov-commenter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codecov-commenter/subscriptions","organizations_url":"https://api.github.com/users/codecov-commenter/orgs","repos_url":"https://api.github.com/users/codecov-commenter/repos","events_url":"https://api.github.com/users/codecov-commenter/events{/privacy}","received_events_url":"https://api.github.com/users/codecov-commenter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T07:55:00Z","updated_at":"2022-12-29T07:27:40Z","author_association":"NONE","body":"# [Codecov](https://codecov.io/gh/apache/rocketmq/pull/5722?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) Report\n> Merging [#5722](https://codecov.io/gh/apache/rocketmq/pull/5722?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (e3693a5) into [develop](https://codecov.io/gh/apache/rocketmq/commit/3effd04fbba09a876ab63b0d3439e7d87d728a81?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) (3effd04) will **decrease** coverage by `0.01%`.\n> The diff coverage is `20.75%`.\n\n```diff\n@@              Coverage Diff              @@\n##             develop    #5722      +/-   ##\n=============================================\n- Coverage      42.39%   42.37%   -0.02%     \n- Complexity      8225     8227       +2     \n=============================================\n  Files           1060     1060              \n  Lines          73364    73384      +20     \n  Branches        9601     9605       +4     \n=============================================\n- Hits           31099    31096       -3     \n- Misses         38346    38370      +24     \n+ Partials        3919     3918       -1     \n```\n\n\n| [Impacted Files](https://codecov.io/gh/apache/rocketmq/pull/5722?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | Coverage Δ | |\n|---|---|---|\n| [...ocketmq/broker/processor/AdminBrokerProcessor.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-YnJva2VyL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9icm9rZXIvcHJvY2Vzc29yL0FkbWluQnJva2VyUHJvY2Vzc29yLmphdmE=) | `25.28% <0.00%> (ø)` | |\n| [...ache/rocketmq/store/AllocateMappedFileService.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0FsbG9jYXRlTWFwcGVkRmlsZVNlcnZpY2UuamF2YQ==) | `41.66% <0.00%> (ø)` | |\n| [...ketmq/store/ha/autoswitch/AutoSwitchHAService.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2hhL2F1dG9zd2l0Y2gvQXV0b1N3aXRjaEhBU2VydmljZS5qYXZh) | `52.85% <0.00%> (-3.21%)` | :arrow_down: |\n| [...main/java/org/apache/rocketmq/store/CommitLog.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0NvbW1pdExvZy5qYXZh) | `65.03% <7.14%> (-0.17%)` | :arrow_down: |\n| [...org/apache/rocketmq/store/DefaultMessageStore.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL0RlZmF1bHRNZXNzYWdlU3RvcmUuamF2YQ==) | `52.28% <25.00%> (-0.08%)` | :arrow_down: |\n| [...ache/rocketmq/store/logfile/DefaultMappedFile.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2xvZ2ZpbGUvRGVmYXVsdE1hcHBlZEZpbGUuamF2YQ==) | `43.11% <36.36%> (-0.23%)` | :arrow_down: |\n| [.../org/apache/rocketmq/store/TransientStorePool.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL1RyYW5zaWVudFN0b3JlUG9vbC5qYXZh) | `23.52% <50.00%> (-2.28%)` | :arrow_down: |\n| [...ache/rocketmq/store/config/MessageStoreConfig.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-c3RvcmUvc3JjL21haW4vamF2YS9vcmcvYXBhY2hlL3JvY2tldG1xL3N0b3JlL2NvbmZpZy9NZXNzYWdlU3RvcmVDb25maWcuamF2YQ==) | `58.68% <100.00%> (+0.16%)` | :arrow_up: |\n| [...rg/apache/rocketmq/common/stats/StatsSnapshot.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvU3RhdHNTbmFwc2hvdC5qYXZh) | `84.61% <0.00%> (-15.39%)` | :arrow_down: |\n| [.../apache/rocketmq/common/stats/MomentStatsItem.java](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation#diff-Y29tbW9uL3NyYy9tYWluL2phdmEvb3JnL2FwYWNoZS9yb2NrZXRtcS9jb21tb24vc3RhdHMvTW9tZW50U3RhdHNJdGVtLmphdmE=) | `38.09% <0.00%> (-9.53%)` | :arrow_down: |\n| ... and [16 more](https://codecov.io/gh/apache/rocketmq/pull/5722/diff?src=pr&el=tree-more&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation) | |\n\n:mega: We’re building smart automated test selection to slash your CI/CD build times. [Learn more](https://about.codecov.io/iterative-testing/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=The+Apache+Software+Foundation)\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357229583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357385826","html_url":"https://github.com/apache/rocketmq/issues/5728#issuecomment-1357385826","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5728","id":1357385826,"node_id":"IC_kwDOBHrsl85Q6BBi","user":{"login":"xdkxlk","id":10397306,"node_id":"MDQ6VXNlcjEwMzk3MzA2","avatar_url":"https://avatars.githubusercontent.com/u/10397306?v=4","gravatar_id":"","url":"https://api.github.com/users/xdkxlk","html_url":"https://github.com/xdkxlk","followers_url":"https://api.github.com/users/xdkxlk/followers","following_url":"https://api.github.com/users/xdkxlk/following{/other_user}","gists_url":"https://api.github.com/users/xdkxlk/gists{/gist_id}","starred_url":"https://api.github.com/users/xdkxlk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xdkxlk/subscriptions","organizations_url":"https://api.github.com/users/xdkxlk/orgs","repos_url":"https://api.github.com/users/xdkxlk/repos","events_url":"https://api.github.com/users/xdkxlk/events{/privacy}","received_events_url":"https://api.github.com/users/xdkxlk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T09:59:15Z","updated_at":"2022-12-19T09:59:15Z","author_association":"CONTRIBUTOR","body":"> > \r\n> \r\n> ### proxy log\r\n> > ERROR GrpcConsumerThreadPool-11 - internal server error\r\n> > java.lang.NullPointerException: null\r\n> > at org.apache.rocketmq.proxy.grpc.v2.consumer.ReceiveMessageActivity.receiveMessage(ReceiveMessageActivity.java:65)\r\n> \r\n> It is the proxy bug，not client. And the other language example,transmitted parameters are the same. I dont konw how to improve.\r\n\r\nThe PHP client is still working in progress\r\nFor 5.0 client, client should send the TelemetryCommand before send the ReceiveMessageRequest\r\nAnd for proxy, a more readable error message should be returned here","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357385826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357715536","html_url":"https://github.com/apache/rocketmq/issues/5518#issuecomment-1357715536","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5518","id":1357715536,"node_id":"IC_kwDOBHrsl85Q7RhQ","user":{"login":"ShadowySpirits","id":32436597,"node_id":"MDQ6VXNlcjMyNDM2NTk3","avatar_url":"https://avatars.githubusercontent.com/u/32436597?v=4","gravatar_id":"","url":"https://api.github.com/users/ShadowySpirits","html_url":"https://github.com/ShadowySpirits","followers_url":"https://api.github.com/users/ShadowySpirits/followers","following_url":"https://api.github.com/users/ShadowySpirits/following{/other_user}","gists_url":"https://api.github.com/users/ShadowySpirits/gists{/gist_id}","starred_url":"https://api.github.com/users/ShadowySpirits/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShadowySpirits/subscriptions","organizations_url":"https://api.github.com/users/ShadowySpirits/orgs","repos_url":"https://api.github.com/users/ShadowySpirits/repos","events_url":"https://api.github.com/users/ShadowySpirits/events{/privacy}","received_events_url":"https://api.github.com/users/ShadowySpirits/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-19T14:01:43Z","updated_at":"2022-12-19T14:01:43Z","author_association":"MEMBER","body":"@azhsmesos Yeah. I'll open a new issue and submit the first pr later this week.","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1357715536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1358713833","html_url":"https://github.com/apache/rocketmq/issues/5737#issuecomment-1358713833","issue_url":"https://api.github.com/repos/apache/rocketmq/issues/5737","id":1358713833,"node_id":"IC_kwDOBHrsl85Q_FPp","user":{"login":"SuYong1","id":20244320,"node_id":"MDQ6VXNlcjIwMjQ0MzIw","avatar_url":"https://avatars.githubusercontent.com/u/20244320?v=4","gravatar_id":"","url":"https://api.github.com/users/SuYong1","html_url":"https://github.com/SuYong1","followers_url":"https://api.github.com/users/SuYong1/followers","following_url":"https://api.github.com/users/SuYong1/following{/other_user}","gists_url":"https://api.github.com/users/SuYong1/gists{/gist_id}","starred_url":"https://api.github.com/users/SuYong1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SuYong1/subscriptions","organizations_url":"https://api.github.com/users/SuYong1/orgs","repos_url":"https://api.github.com/users/SuYong1/repos","events_url":"https://api.github.com/users/SuYong1/events{/privacy}","received_events_url":"https://api.github.com/users/SuYong1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-20T01:32:16Z","updated_at":"2022-12-20T03:06:07Z","author_association":"NONE","body":"I have read the source code of rocketmq 5.0\r\nThis method:org.apache.rocketmq.common.BrokerConfig#setBrokerIP1\r\nis not called in the start method in rocketmq?\r\n![image](https://user-images.githubusercontent.com/20244320/208559985-51357e7a-997f-496b-9aae-48bcedce2baf.png)\r\n\r\nI found this code set brokerIP1?\r\n![image](https://user-images.githubusercontent.com/20244320/208572095-f506ed1b-a167-4b5b-b7d2-67d88616a1be.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/rocketmq/issues/comments/1358713833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]