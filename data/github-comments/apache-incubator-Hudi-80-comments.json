[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685861470","html_url":"https://github.com/apache/hudi/issues/1911#issuecomment-685861470","issue_url":"https://api.github.com/repos/apache/hudi/issues/1911","id":685861470,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTg2MTQ3MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T16:47:10Z","updated_at":"2020-09-02T16:47:10Z","author_association":"CONTRIBUTOR","body":"Closing this due to inactivity. Please reopen if you are still seeing this with 0.6.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685861470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685864029","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-685864029","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":685864029,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTg2NDAyOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T16:51:54Z","updated_at":"2020-09-02T16:51:54Z","author_association":"MEMBER","body":"May not work actually \r\n\r\n```\r\nclass A {\r\n    def doSomething(arg: Int) = {\r\n    }\r\n  }\r\n\r\n  @Test def testReflectionPerformance(): Unit = {\r\n    // warmup the jvm and ignore.\r\n    val a = new A()\r\n    (1 to 100000000).foreach(_ => a.doSomething(1))\r\n\r\n    val normalStartMs = System.currentTimeMillis();\r\n    (1 to 100000000).foreach(_ => a.doSomething(1))\r\n    println(s\"Normal elapsed : ${System.currentTimeMillis() - normalStartMs}\")\r\n\r\n    val reflectStartMs = System.currentTimeMillis();\r\n    val method = a.getClass.getMethods.filter(method => method.getName.equals(\"doSomething\")).last\r\n    (1 to 100000000).foreach(_ => method.invoke(a, 1.asInstanceOf[Object]))\r\n    println(s\"Reflect elapsed : ${System.currentTimeMillis() - reflectStartMs}\")\r\n  }\r\n```\r\n\r\ngives the following results\r\n\r\n```\r\nNormal elapsed : 30\r\nReflect elapsed : 312\r\n```\r\n\r\nlet's abandon the reflection approach altogether. Either we munge the APIs somehow or just make a separate module for spark3 . e.g `hudi-spark3` with its own bundling. This may not be a bad choice per se. wdyt","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685864029/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685866306","html_url":"https://github.com/apache/hudi/issues/2062#issuecomment-685866306","issue_url":"https://api.github.com/repos/apache/hudi/issues/2062","id":685866306,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTg2NjMwNg==","user":{"login":"kpurella","id":67808897,"node_id":"MDQ6VXNlcjY3ODA4ODk3","avatar_url":"https://avatars.githubusercontent.com/u/67808897?v=4","gravatar_id":"","url":"https://api.github.com/users/kpurella","html_url":"https://github.com/kpurella","followers_url":"https://api.github.com/users/kpurella/followers","following_url":"https://api.github.com/users/kpurella/following{/other_user}","gists_url":"https://api.github.com/users/kpurella/gists{/gist_id}","starred_url":"https://api.github.com/users/kpurella/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpurella/subscriptions","organizations_url":"https://api.github.com/users/kpurella/orgs","repos_url":"https://api.github.com/users/kpurella/repos","events_url":"https://api.github.com/users/kpurella/events{/privacy}","received_events_url":"https://api.github.com/users/kpurella/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T16:55:43Z","updated_at":"2020-09-02T16:55:43Z","author_association":"NONE","body":"@bvaradar Thank you for your quick response, sure I will give a try, but is  hudi-0.6.0 compactable with EMR 5.30.1?\r\n\r\nAs workaround , right now i am setting hoodie.compact.inline.max.delta.commits=1 , so it will trigger compaction for every delta write. do you think this will solve the problem until we move to 0.6.0  ? or is there any other workaround?\r\n\r\nThank you.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685866306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685975783","html_url":"https://github.com/apache/hudi/pull/1953#issuecomment-685975783","issue_url":"https://api.github.com/repos/apache/hudi/issues/1953","id":685975783,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTk3NTc4Mw==","user":{"login":"umehrot2","id":8647012,"node_id":"MDQ6VXNlcjg2NDcwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/8647012?v=4","gravatar_id":"","url":"https://api.github.com/users/umehrot2","html_url":"https://github.com/umehrot2","followers_url":"https://api.github.com/users/umehrot2/followers","following_url":"https://api.github.com/users/umehrot2/following{/other_user}","gists_url":"https://api.github.com/users/umehrot2/gists{/gist_id}","starred_url":"https://api.github.com/users/umehrot2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/umehrot2/subscriptions","organizations_url":"https://api.github.com/users/umehrot2/orgs","repos_url":"https://api.github.com/users/umehrot2/repos","events_url":"https://api.github.com/users/umehrot2/events{/privacy}","received_events_url":"https://api.github.com/users/umehrot2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T20:23:01Z","updated_at":"2020-09-02T20:23:01Z","author_association":"CONTRIBUTOR","body":"@vinothchandar if its okay with you I can merge this. \r\n\r\n@zhedoubushishi can you squash all the commits into one ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685975783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685982272","html_url":"https://github.com/apache/hudi/pull/2048#issuecomment-685982272","issue_url":"https://api.github.com/repos/apache/hudi/issues/2048","id":685982272,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTk4MjI3Mg==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T20:34:50Z","updated_at":"2020-09-02T20:34:50Z","author_association":"MEMBER","body":"@bvaradar I addressed your comments.I also created followup items here https://issues.apache.org/jira/browse/HUDI-868 as you suggested. \r\n\r\n Please take another look when possible. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685982272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685998284","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-685998284","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":685998284,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NTk5ODI4NA==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T21:07:39Z","updated_at":"2020-09-02T21:07:39Z","author_association":"MEMBER","body":"@bschell here's a path forward. \r\n\r\n- We can create an abstraction for deserializing : `RowDeserializer` and which implements row. deser differently based on spark 2 and spark 3. \r\n- Spark 2 impl lives in `hudi-spark` and we pick the deser impl based on spark version within `hudi-spark` itself using reflection. Note that we will create the instance alone this way, i.e reflection used only for initing the deserializer object\r\n- lets create a new module `hudi-spark3` which contain just the one class that implementation the deserialization using spark 3 apis, we will override the spark version to 3 for that module alone. i.e this class alone gets compiled against spark 3. (this needs to be confirmed)\r\n- we include `hudi-spark3` in the spark bundle. Spark is anyway a provided dependency, so as long as we invoke the spark3 deserializer only with the spark 3 jars around, things should work well. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/685998284/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686046387","html_url":"https://github.com/apache/hudi/pull/2012#issuecomment-686046387","issue_url":"https://api.github.com/repos/apache/hudi/issues/2012","id":686046387,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjA0NjM4Nw==","user":{"login":"sathyaprakashg","id":15080820,"node_id":"MDQ6VXNlcjE1MDgwODIw","avatar_url":"https://avatars.githubusercontent.com/u/15080820?v=4","gravatar_id":"","url":"https://api.github.com/users/sathyaprakashg","html_url":"https://github.com/sathyaprakashg","followers_url":"https://api.github.com/users/sathyaprakashg/followers","following_url":"https://api.github.com/users/sathyaprakashg/following{/other_user}","gists_url":"https://api.github.com/users/sathyaprakashg/gists{/gist_id}","starred_url":"https://api.github.com/users/sathyaprakashg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sathyaprakashg/subscriptions","organizations_url":"https://api.github.com/users/sathyaprakashg/orgs","repos_url":"https://api.github.com/users/sathyaprakashg/repos","events_url":"https://api.github.com/users/sathyaprakashg/events{/privacy}","received_events_url":"https://api.github.com/users/sathyaprakashg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-02T21:46:40Z","updated_at":"2020-09-02T21:46:40Z","author_association":"CONTRIBUTOR","body":"Below issue was causing build failure and i fixed it now by implementing a method `HoodieAvroUtils.addNamespaceToFixedField`. Not sure whether this is the best way to fix this issue. So, let me know if any sugestions.\r\n\r\nBelow is the height field defintion in `triprec` schema\r\n``` \r\n  {\r\n      \"name\": \"height\",\r\n      \"type\": {\r\n        \"type\": \"fixed\",\r\n        \"name\": \"abc\",\r\n        \"size\": 5,\r\n        \"logicalType\": \"decimal\",\r\n        \"precision\": 10,\r\n        \"scale\": 6\r\n      }\r\n    }\r\n```\r\nWhen we use org.apache.spark.sql.avro.SchemaConverters.toAvroType method in `AvroConversionHelper` to convert Spark data type to avro type, spark-avro gives name as fixed and also adds namespace to it as per code [here](https://github.com/apache/spark/blob/master/external/avro/src/main/scala/org/apache/spark/sql/avro/SchemaConverters.scala#L177)\r\n```\r\n  {\r\n      \"name\": \"height\",\r\n      \"type\": {\r\n        \"type\": \"fixed\",\r\n        \"name\": \"fixed\",\r\n        \"namespace\": \"hoodie.source.hoodie_source.height\",\r\n        \"size\": 5,\r\n        \"logicalType\": \"decimal\",\r\n        \"precision\": 10,\r\n        \"scale\": 6\r\n      }\r\n    }\r\n```\r\nFirst schema is used as reader schema and second one is used as writer schema in `HoodieAvroUtils.bytesToAvro`. This results in below error.\r\n```\r\nERROR org.apache.hudi.io.HoodieWriteHandle  - Error writing record HoodieRecord{key=HoodieKey { recordKey=c597b0c2-6f07-4c8e-b239-2752b60e0449 partitionPath=default}, currentLocation='null', newLocation='null'}\r\norg.apache.avro.AvroTypeException: Found hoodie.source.hoodie_source.height.fixed, expecting abc\r\n  at org.apache.avro.io.ResolvingDecoder.doAction(ResolvingDecoder.java:292)\r\n  at org.apache.avro.io.parsing.Parser.advance(Parser.java:88)\r\n  at org.apache.avro.io.ValidatingDecoder.checkFixed(ValidatingDecoder.java:135)\r\n  at org.apache.avro.io.ValidatingDecoder.readFixed(ValidatingDecoder.java:146)\r\n  at org.apache.avro.generic.GenericDatumReader.readFixed(GenericDatumReader.java:342)\r\n  at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:180)\r\n  at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153)\r\n  at org.apache.avro.generic.GenericDatumReader.readField(GenericDatumReader.java:232)\r\n  at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:222)\r\n  at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:175)\r\n  at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153)\r\n  at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:145)\r\n  at org.apache.hudi.avro.HoodieAvroUtils.bytesToAvro(HoodieAvroUtils.java:142)\r\n  at org.apache.hudi.common.model.OverwriteWithLatestAvroPayload.getInsertValue(OverwriteWithLatestAvroPayload.java:70)\r\n  at org.apache.hudi.execution.LazyInsertIterable$HoodieInsertValueGenResult.<init>(LazyInsertIterable.java:92)\r\n  at org.apache.hudi.execution.LazyInsertIterable.lambda$getTransformFunction$0(LazyInsertIterable.java:105)\r\n  at org.apache.hudi.common.util.queue.BoundedInMemoryQueue.insertRecord(BoundedInMemoryQueue.java:170)\r\n  at org.apache.hudi.common.util.queue.IteratorBasedQueueProducer.produce(IteratorBasedQueueProducer.java:46)\r\n  at org.apache.hudi.common.util.queue.BoundedInMemoryExecutor.lambda$null$0(BoundedInMemoryExecutor.java:92)\r\n  at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n  at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n  at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n  at java.lang.Thread.run(Thread.java:748)\r\n```\r\nIn order to fix this issue, approach i took is change the field name from `abc` to `fixed` in all the schema used in test and also add namespace to reader schema if it exists in writer schema for fixed field.\r\n\r\nIf we just rename the field from `abc` to `fixed` but don't add namespace, then we get below error\r\n`org.apache.avro.AvroTypeException: Found hoodie.source.hoodie_source.height.fixed, expecting fixed`","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686046387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686191782","html_url":"https://github.com/apache/hudi/pull/1968#issuecomment-686191782","issue_url":"https://api.github.com/repos/apache/hudi/issues/1968","id":686191782,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjE5MTc4Mg==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T02:17:25Z","updated_at":"2020-09-03T02:17:25Z","author_association":"CONTRIBUTOR","body":"Currently, In an ETL pipeline(eg, kafka -> hudi -> hive), If the process of hudi to hive failed,  the job is still running.\r\nI think we can add a switch to control the job behavior(fail or keep running) when kafka to hudi is ok, while hudi to hive failed, leave the choice to user. since ingesting data to hudi and sync to hive is a complete task in some scenes.\r\nWDYT? @vinothchandar @yanghua @liujinhui1994 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686191782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686328982","html_url":"https://github.com/apache/hudi/pull/2056#issuecomment-686328982","issue_url":"https://api.github.com/repos/apache/hudi/issues/2056","id":686328982,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjMyODk4Mg==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T08:09:15Z","updated_at":"2020-09-03T10:26:16Z","author_association":"CONTRIBUTOR","body":"hi, ready to merge if no other problems @yanghua  @vinothchandar .Thanks!!!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686328982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686386388","html_url":"https://github.com/apache/hudi/pull/1946#issuecomment-686386388","issue_url":"https://api.github.com/repos/apache/hudi/issues/1946","id":686386388,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjM4NjM4OA==","user":{"login":"hddong","id":17537134,"node_id":"MDQ6VXNlcjE3NTM3MTM0","avatar_url":"https://avatars.githubusercontent.com/u/17537134?v=4","gravatar_id":"","url":"https://api.github.com/users/hddong","html_url":"https://github.com/hddong","followers_url":"https://api.github.com/users/hddong/followers","following_url":"https://api.github.com/users/hddong/following{/other_user}","gists_url":"https://api.github.com/users/hddong/gists{/gist_id}","starred_url":"https://api.github.com/users/hddong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hddong/subscriptions","organizations_url":"https://api.github.com/users/hddong/orgs","repos_url":"https://api.github.com/users/hddong/repos","events_url":"https://api.github.com/users/hddong/events{/privacy}","received_events_url":"https://api.github.com/users/hddong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T10:01:45Z","updated_at":"2020-09-03T10:01:45Z","author_association":"CONTRIBUTOR","body":"@yanghua @vinothchandar @wangxianghu : make it only use log4j now, please have a review when free.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686386388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686388820","html_url":"https://github.com/apache/hudi/pull/1984#issuecomment-686388820","issue_url":"https://api.github.com/repos/apache/hudi/issues/1984","id":686388820,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjM4ODgyMA==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T10:06:21Z","updated_at":"2020-09-03T10:06:21Z","author_association":"NONE","body":"Hi Team, any updates on this. Wanted this fix in 0.6.0 as Im having this as part of a POC . @pratyakshsharma @bhasudha ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686388820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686397274","html_url":"https://github.com/apache/hudi/pull/2056#issuecomment-686397274","issue_url":"https://api.github.com/repos/apache/hudi/issues/2056","id":686397274,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjM5NzI3NA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T10:24:37Z","updated_at":"2020-09-03T10:24:37Z","author_association":"CONTRIBUTOR","body":"> hi, ready to merge if no other problems @yanghua @vinothchandar.Thanks!!!\r\n\r\n@Karl-WangSK I will review again soon.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686397274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686426501","html_url":"https://github.com/apache/hudi/pull/1968#issuecomment-686426501","issue_url":"https://api.github.com/repos/apache/hudi/issues/1968","id":686426501,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjQyNjUwMQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T11:30:08Z","updated_at":"2020-09-03T11:30:08Z","author_association":"CONTRIBUTOR","body":"> Currently, In an ETL pipeline(eg, kafka -> hudi -> hive), If the process of hudi to hive failed, the job is still running.\r\n> I think we can add a switch to control the job behavior(fail or keep running) when kafka to hudi is ok, while hudi to hive failed, leave the choice to user. since ingesting data to hudi and sync to hive is a complete task in some scenes.\r\n> WDYT? @vinothchandar @yanghua @liujinhui1994\r\n\r\nsounds reasonable.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686426501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686427819","html_url":"https://github.com/apache/hudi/pull/1946#issuecomment-686427819","issue_url":"https://api.github.com/repos/apache/hudi/issues/1946","id":686427819,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjQyNzgxOQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T11:32:48Z","updated_at":"2020-09-03T11:32:48Z","author_association":"CONTRIBUTOR","body":"> @yanghua @vinothchandar @wangxianghu : make it only use log4j now, please have a review when free.\r\n\r\n@wangxianghu please help to verify, when you have time.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686427819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686538072","html_url":"https://github.com/apache/hudi/pull/2056#issuecomment-686538072","issue_url":"https://api.github.com/repos/apache/hudi/issues/2056","id":686538072,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUzODA3Mg==","user":{"login":"Karl-WangSK","id":53078090,"node_id":"MDQ6VXNlcjUzMDc4MDkw","avatar_url":"https://avatars.githubusercontent.com/u/53078090?v=4","gravatar_id":"","url":"https://api.github.com/users/Karl-WangSK","html_url":"https://github.com/Karl-WangSK","followers_url":"https://api.github.com/users/Karl-WangSK/followers","following_url":"https://api.github.com/users/Karl-WangSK/following{/other_user}","gists_url":"https://api.github.com/users/Karl-WangSK/gists{/gist_id}","starred_url":"https://api.github.com/users/Karl-WangSK/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Karl-WangSK/subscriptions","organizations_url":"https://api.github.com/users/Karl-WangSK/orgs","repos_url":"https://api.github.com/users/Karl-WangSK/repos","events_url":"https://api.github.com/users/Karl-WangSK/events{/privacy}","received_events_url":"https://api.github.com/users/Karl-WangSK/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T14:39:02Z","updated_at":"2020-09-03T14:39:02Z","author_association":"CONTRIBUTOR","body":"> @Karl-WangSK thanks for your contribution! LGTM now, let's wait for a moment to see if @vinothchandar has any concern, OK?\r\n\r\nOK，Thanks for your time and review!  @yanghua ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686538072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686538124","html_url":"https://github.com/apache/hudi/pull/1946#issuecomment-686538124","issue_url":"https://api.github.com/repos/apache/hudi/issues/1946","id":686538124,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjUzODEyNA==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T14:39:07Z","updated_at":"2020-09-03T14:39:07Z","author_association":"CONTRIBUTOR","body":"> > @yanghua @vinothchandar @wangxianghu : make it only use log4j now, please have a review when free.\r\n> \r\n> @wangxianghu please help to verify, when you have time.\r\n\r\nAck, will do","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686538124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686541845","html_url":"https://github.com/apache/hudi/pull/2056#issuecomment-686541845","issue_url":"https://api.github.com/repos/apache/hudi/issues/2056","id":686541845,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjU0MTg0NQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T14:44:37Z","updated_at":"2020-09-03T14:44:37Z","author_association":"CONTRIBUTOR","body":"> > @Karl-WangSK thanks for your contribution! LGTM now, let's wait for a moment to see if @vinothchandar has any concern, OK?\r\n> \r\n> OK，Thanks for your time and review! @yanghua\r\n\r\nThese are not worth mentioning. It is lucky for the community to have contributors like you.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686541845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686604729","html_url":"https://github.com/apache/hudi/issues/2057#issuecomment-686604729","issue_url":"https://api.github.com/repos/apache/hudi/issues/2057","id":686604729,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjYwNDcyOQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T16:21:52Z","updated_at":"2020-09-03T16:21:52Z","author_association":"CONTRIBUTOR","body":"@WTa-hash  : Thanks for the patience. I will look at this today and reply. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686604729/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686648563","html_url":"https://github.com/apache/hudi/pull/1760#issuecomment-686648563","issue_url":"https://api.github.com/repos/apache/hudi/issues/1760","id":686648563,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjY0ODU2Mw==","user":{"login":"bschell","id":8600774,"node_id":"MDQ6VXNlcjg2MDA3NzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8600774?v=4","gravatar_id":"","url":"https://api.github.com/users/bschell","html_url":"https://github.com/bschell","followers_url":"https://api.github.com/users/bschell/followers","following_url":"https://api.github.com/users/bschell/following{/other_user}","gists_url":"https://api.github.com/users/bschell/gists{/gist_id}","starred_url":"https://api.github.com/users/bschell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschell/subscriptions","organizations_url":"https://api.github.com/users/bschell/orgs","repos_url":"https://api.github.com/users/bschell/repos","events_url":"https://api.github.com/users/bschell/events{/privacy}","received_events_url":"https://api.github.com/users/bschell/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T17:44:30Z","updated_at":"2020-09-03T17:44:30Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Thank you for the suggestions! I agree with this approach and will try to update this PR to match.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686648563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686688968","html_url":"https://github.com/apache/hudi/pull/2064#issuecomment-686688968","issue_url":"https://api.github.com/repos/apache/hudi/issues/2064","id":686688968,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjY4ODk2OA==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T18:42:59Z","updated_at":"2020-10-02T23:45:02Z","author_association":"MEMBER","body":"Remaining work items:\r\n\r\n- [x] 1. Support for rollbacks in MOR Table\r\n- [x] 2. Rollback of metadata if commit eventually fails on dataset \r\n- [x] 3. HUDI-CLI extensions for metadata debugging\r\n- [x] 4. Ensure partial rollbacks do not use metadata table as it does not contain partial info \r\n- [ ] 5. Fix initialization when Async jobs are scheduled - these jobs have older timestamp than INIT timestamp on metadata table\r\n- [ ] 6. Check if MergedBlockReader will neglect log blocks based on uncommitted commits.\r\n- [x] 7. Unit test for rollback of partial commits\r\n- [x] 8. Schema evolution strategy for metadata table\r\n- [x] 9. Unit test for marker based rollback\r\n- [x] 10. Can all compaction strategies work off of metadata table itself? Does it have all the data\r\n- [ ] 11. Async Clean and Async Compaction - how will they work with metadata table updates - check multi writer\r\n- [x] 12. Fix the case when the table is non-partitioned\r\n- [ ] 13. Test for Async cases\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686688968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686703062","html_url":"https://github.com/apache/hudi/issues/2007#issuecomment-686703062","issue_url":"https://api.github.com/repos/apache/hudi/issues/2007","id":686703062,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjcwMzA2Mg==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T19:12:33Z","updated_at":"2020-09-03T19:12:33Z","author_association":"NONE","body":"@vinothchandar raised Jira for this : https://issues.apache.org/jira/browse/HUDI-1267","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686703062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686807638","html_url":"https://github.com/apache/hudi/pull/2040#issuecomment-686807638","issue_url":"https://api.github.com/repos/apache/hudi/issues/2040","id":686807638,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjgwNzYzOA==","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T23:05:46Z","updated_at":"2020-09-03T23:05:46Z","author_association":"MEMBER","body":"@yanghua @vinothchandar test fixed.. could you please take a pass on this? thanks.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686807638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686912215","html_url":"https://github.com/apache/hudi/issues/2041#issuecomment-686912215","issue_url":"https://api.github.com/repos/apache/hudi/issues/2041","id":686912215,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjkxMjIxNQ==","user":{"login":"zherenyu831","id":52404525,"node_id":"MDQ6VXNlcjUyNDA0NTI1","avatar_url":"https://avatars.githubusercontent.com/u/52404525?v=4","gravatar_id":"","url":"https://api.github.com/users/zherenyu831","html_url":"https://github.com/zherenyu831","followers_url":"https://api.github.com/users/zherenyu831/followers","following_url":"https://api.github.com/users/zherenyu831/following{/other_user}","gists_url":"https://api.github.com/users/zherenyu831/gists{/gist_id}","starred_url":"https://api.github.com/users/zherenyu831/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zherenyu831/subscriptions","organizations_url":"https://api.github.com/users/zherenyu831/orgs","repos_url":"https://api.github.com/users/zherenyu831/repos","events_url":"https://api.github.com/users/zherenyu831/events{/privacy}","received_events_url":"https://api.github.com/users/zherenyu831/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T05:14:46Z","updated_at":"2020-09-04T05:14:46Z","author_association":"CONTRIBUTOR","body":"@umehrot2 \r\nThank you for replying my question.\r\nChecking with aws side, and JYI, by shading spark sql, hudi 0.6.0 works fine on EMR 6.0 as we tested now","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686912215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686984608","html_url":"https://github.com/apache/hudi/pull/1484#issuecomment-686984608","issue_url":"https://api.github.com/repos/apache/hudi/issues/1484","id":686984608,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Njk4NDYwOA==","user":{"login":"v3nkatesh","id":33071342,"node_id":"MDQ6VXNlcjMzMDcxMzQy","avatar_url":"https://avatars.githubusercontent.com/u/33071342?v=4","gravatar_id":"","url":"https://api.github.com/users/v3nkatesh","html_url":"https://github.com/v3nkatesh","followers_url":"https://api.github.com/users/v3nkatesh/followers","following_url":"https://api.github.com/users/v3nkatesh/following{/other_user}","gists_url":"https://api.github.com/users/v3nkatesh/gists{/gist_id}","starred_url":"https://api.github.com/users/v3nkatesh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/v3nkatesh/subscriptions","organizations_url":"https://api.github.com/users/v3nkatesh/orgs","repos_url":"https://api.github.com/users/v3nkatesh/repos","events_url":"https://api.github.com/users/v3nkatesh/events{/privacy}","received_events_url":"https://api.github.com/users/v3nkatesh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T07:58:19Z","updated_at":"2020-09-04T07:58:19Z","author_association":"CONTRIBUTOR","body":"> @v3nkatesh are you able to write the rate limiter class yourself? :) if not can @garyli1019 @xushiyan help?\r\n\r\n@vinothchandar Pushed a custom RateLimiter, pls take a look.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/686984608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687061567","html_url":"https://github.com/apache/hudi/pull/1968#issuecomment-687061567","issue_url":"https://api.github.com/repos/apache/hudi/issues/1968","id":687061567,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzA2MTU2Nw==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T10:23:20Z","updated_at":"2020-09-04T10:23:20Z","author_association":"CONTRIBUTOR","body":"> > Currently, In an ETL pipeline(eg, kafka -> hudi -> hive), If the process of hudi to hive failed, the job is still running.\r\n> > I think we can add a switch to control the job behavior(fail or keep running) when kafka to hudi is ok, while hudi to hive failed, leave the choice to user. since ingesting data to hudi and sync to hive is a complete task in some scenes.\r\n> > WDYT? @vinothchandar @yanghua @liujinhui1994\r\n> \r\n> sounds reasonable.\r\n\r\nFiled a ticket here:https://issues.apache.org/jira/projects/HUDI/issues/HUDI-1269","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687061567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687210223","html_url":"https://github.com/apache/hudi/issues/2065#issuecomment-687210223","issue_url":"https://api.github.com/repos/apache/hudi/issues/2065","id":687210223,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzIxMDIyMw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T15:11:17Z","updated_at":"2020-09-04T15:11:17Z","author_association":"CONTRIBUTOR","body":"Are you running with eventual consistency guard enabled ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687210223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687239989","html_url":"https://github.com/apache/hudi/issues/2065#issuecomment-687239989","issue_url":"https://api.github.com/repos/apache/hudi/issues/2065","id":687239989,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzIzOTk4OQ==","user":{"login":"prashanthvg89","id":8704802,"node_id":"MDQ6VXNlcjg3MDQ4MDI=","avatar_url":"https://avatars.githubusercontent.com/u/8704802?v=4","gravatar_id":"","url":"https://api.github.com/users/prashanthvg89","html_url":"https://github.com/prashanthvg89","followers_url":"https://api.github.com/users/prashanthvg89/followers","following_url":"https://api.github.com/users/prashanthvg89/following{/other_user}","gists_url":"https://api.github.com/users/prashanthvg89/gists{/gist_id}","starred_url":"https://api.github.com/users/prashanthvg89/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashanthvg89/subscriptions","organizations_url":"https://api.github.com/users/prashanthvg89/orgs","repos_url":"https://api.github.com/users/prashanthvg89/repos","events_url":"https://api.github.com/users/prashanthvg89/events{/privacy}","received_events_url":"https://api.github.com/users/prashanthvg89/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T16:02:41Z","updated_at":"2020-09-04T16:05:51Z","author_association":"NONE","body":"No. Should I set this property to true?\r\n\r\nhoodie.consistency.check.enabled","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687239989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687242382","html_url":"https://github.com/apache/hudi/pull/2014#issuecomment-687242382","issue_url":"https://api.github.com/repos/apache/hudi/issues/2014","id":687242382,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzI0MjM4Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T16:07:09Z","updated_at":"2020-09-04T16:07:09Z","author_association":"CONTRIBUTOR","body":"Looks good @sreeram26. Thanks for your contribution.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687242382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687248995","html_url":"https://github.com/apache/hudi/issues/2063#issuecomment-687248995","issue_url":"https://api.github.com/repos/apache/hudi/issues/2063","id":687248995,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzI0ODk5NQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T16:20:31Z","updated_at":"2020-09-04T16:20:31Z","author_association":"CONTRIBUTOR","body":"@prashantwason @nbalajee : Can you please take a look at this ? Thanks. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687248995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687250418","html_url":"https://github.com/apache/hudi/issues/2065#issuecomment-687250418","issue_url":"https://api.github.com/repos/apache/hudi/issues/2065","id":687250418,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzI1MDQxOA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T16:23:21Z","updated_at":"2020-09-04T16:23:21Z","author_association":"CONTRIBUTOR","body":"Yes, Can you set this for S3 and retry from beginning.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687250418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687274706","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-687274706","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":687274706,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzI3NDcwNg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T17:09:23Z","updated_at":"2020-09-04T17:09:23Z","author_association":"CONTRIBUTOR","body":"In this case, you are using complex key combining 5 columns. From what I have seen with user deployments, this is very unusual (most common case being 1 or 2 columns). Having materialized record key has its benefits. \r\n\r\nThat being said, this could be because the individual columns themselves would have been highly compressible but not the concatenation of them. The other factor being what is the proportion of columns that constitute a record key. You can try using parquet tools to see column/block level stats on both parquet and hudi files to get more insights. \r\n\r\nBTW, if you have noticed the dev@ , user@ community emails, there is work happening on making the record_key virtual. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687274706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687366557","html_url":"https://github.com/apache/hudi/issues/2067#issuecomment-687366557","issue_url":"https://api.github.com/repos/apache/hudi/issues/2067","id":687366557,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzM2NjU1Nw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T20:28:39Z","updated_at":"2020-09-04T20:28:39Z","author_association":"CONTRIBUTOR","body":"0.5.0 is a really old version. I tried with 0.5.3 and this seems to work fine:\r\n`\r\n~/spark-2.4.4-bin-hadoop2.7/bin/spark-shell --packages org.apache.hudi:hudi-spark-bundle_2.11:0.5.3,org.apache.spark:spark-avro_2.11:2.4.4   --conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer'\r\n\r\nimport org.apache.hudi.QuickstartUtils._\r\nimport scala.collection.JavaConversions._\r\nimport org.apache.spark.sql.SaveMode._\r\nimport org.apache.hudi.DataSourceReadOptions._\r\nimport org.apache.hudi.DataSourceWriteOptions._\r\nimport org.apache.hudi.config.HoodieWriteConfig._\r\n\r\nval basePath = \"file:///tmp/hudi_cow_table_new_1\"\r\n\r\n\r\nval df  = Seq((1, \"a\", \"b\",0)).toDF(\"col1\",\"col2\",\"col3\",\"time\")\r\nval df1  = Seq((1, \"a\", \"c\",1)).toDF(\"col1\",\"col2\",\"col3\",\"time\")\r\n\r\ndf.write.format(\"org.apache.hudi\").\r\n  option(PRECOMBINE_FIELD_OPT_KEY, \"time\").\r\n  option(RECORDKEY_FIELD_OPT_KEY, \"col1\").\r\n  option(PARTITIONPATH_FIELD_OPT_KEY, \"col2,col3\").\r\n  option(KEYGENERATOR_CLASS_OPT_KEY, \"org.apache.hudi.keygen.ComplexKeyGenerator\").\r\n  option(\"hoodie.index.type\", \"GLOBAL_BLOOM\").\r\n  option(TABLE_NAME, \"TEST_TABLE\").\r\n  mode(Overwrite).\r\n  save(basePath)\r\n  \r\n  \r\ndf1.write.format(\"org.apache.hudi\").\r\n  option(PRECOMBINE_FIELD_OPT_KEY, \"time\").\r\n  option(RECORDKEY_FIELD_OPT_KEY, \"col1\").\r\n  option(PARTITIONPATH_FIELD_OPT_KEY, \"col2,col3\").\r\n  option(KEYGENERATOR_CLASS_OPT_KEY, \"org.apache.hudi.keygen.ComplexKeyGenerator\").\r\n  option(\"hoodie.index.type\", \"GLOBAL_BLOOM\").\r\n  option(TABLE_NAME, \"TEST_TABLE\").\r\n  mode(Append).\r\n  save(basePath)\r\n  \r\n`\r\n\r\nCan you try with later versions of Hudi.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687366557/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687380294","html_url":"https://github.com/apache/hudi/pull/1848#issuecomment-687380294","issue_url":"https://api.github.com/repos/apache/hudi/issues/1848","id":687380294,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzM4MDI5NA==","user":{"login":"luffyd","id":2287345,"node_id":"MDQ6VXNlcjIyODczNDU=","avatar_url":"https://avatars.githubusercontent.com/u/2287345?v=4","gravatar_id":"","url":"https://api.github.com/users/luffyd","html_url":"https://github.com/luffyd","followers_url":"https://api.github.com/users/luffyd/followers","following_url":"https://api.github.com/users/luffyd/following{/other_user}","gists_url":"https://api.github.com/users/luffyd/gists{/gist_id}","starred_url":"https://api.github.com/users/luffyd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luffyd/subscriptions","organizations_url":"https://api.github.com/users/luffyd/orgs","repos_url":"https://api.github.com/users/luffyd/repos","events_url":"https://api.github.com/users/luffyd/events{/privacy}","received_events_url":"https://api.github.com/users/luffyd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T20:57:53Z","updated_at":"2020-09-04T20:57:53Z","author_association":"NONE","body":"> @garyli1019 : I took this patch and ran it in EMR (Spark-2.4.5-amzn-0). I got the following exceptions when loading S3 dataset.\r\n> \r\n> I am using hudi-spark-bundle in the spark session.\r\n> \r\n> Setting default log level to \"WARN\".\r\n> To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\n> 20/07/29 06:57:50 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\r\n> Spark context Web UI available at http://ip-172-31-33-232.us-east-2.compute.internal:4040\r\n> Spark context available as 'sc' (master = yarn, app id = application_1595775804042_9837).\r\n> Spark session available as 'spark'.\r\n> Welcome to\r\n> ____ __\r\n> / **/** ___ _****/ /** _\\ / _ / _ `/ __/ '_/ /**_/ .__/_,_/_/ /_/_\\ version 2.4.5-amzn-0 /_/\r\n> \r\n> Using Scala version 2.11.12 (OpenJDK 64-Bit Server VM, Java 1.8.0_252)\r\n> Type in expressions to have them evaluated.\r\n> Type :help for more information.\r\n> \r\n> scala> val dfh = spark.read.format(\"hudi\").load(\"s3a://hudi.streaming.perf/orders_stream_hudi_mor_4/_/_\")\r\n> java.lang.NoSuchMethodError: org.apache.spark.sql.execution.datasources.PartitionedFile.(Lorg/apache/spark/sql/catalyst/InternalRow;Ljava/lang/String;JJ[Ljava/lang/String;)V\r\n> at org.apache.hudi.MergeOnReadSnapshotRelation$$anonfun$4.apply(MergeOnReadSnapshotRelation.scala:144)\r\n> at org.apache.hudi.MergeOnReadSnapshotRelation$$anonfun$4.apply(MergeOnReadSnapshotRelation.scala:141)\r\n> at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n> at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n> at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n> at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n> at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n> at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n> at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)\r\n> at scala.collection.AbstractTraversable.map(Traversable.scala:104)\r\n> at org.apache.hudi.MergeOnReadSnapshotRelation.buildFileIndex(MergeOnReadSnapshotRelation.scala:141)\r\n> at org.apache.hudi.MergeOnReadSnapshotRelation.(MergeOnReadSnapshotRelation.scala:75)\r\n> at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:70)\r\n> at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:50)\r\n> at org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:318)\r\n> at org.apache.spark.sql.DataFrameReader.loadV1Source(DataFrameReader.scala:223)\r\n> at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:211)\r\n> at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:178)\r\n> ... 49 elided\r\n> \r\n> scala>\r\n> \r\n> Have you seen this issue before ?\r\n\r\nI am seeing this exception with latest Hudi, how do we get it resolved?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687380294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687391466","html_url":"https://github.com/apache/hudi/pull/2048#issuecomment-687391466","issue_url":"https://api.github.com/repos/apache/hudi/issues/2048","id":687391466,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzM5MTQ2Ng==","user":{"login":"satishkotha","id":2992755,"node_id":"MDQ6VXNlcjI5OTI3NTU=","avatar_url":"https://avatars.githubusercontent.com/u/2992755?v=4","gravatar_id":"","url":"https://api.github.com/users/satishkotha","html_url":"https://github.com/satishkotha","followers_url":"https://api.github.com/users/satishkotha/followers","following_url":"https://api.github.com/users/satishkotha/following{/other_user}","gists_url":"https://api.github.com/users/satishkotha/gists{/gist_id}","starred_url":"https://api.github.com/users/satishkotha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satishkotha/subscriptions","organizations_url":"https://api.github.com/users/satishkotha/orgs","repos_url":"https://api.github.com/users/satishkotha/repos","events_url":"https://api.github.com/users/satishkotha/events{/privacy}","received_events_url":"https://api.github.com/users/satishkotha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T21:19:40Z","updated_at":"2020-09-04T21:22:22Z","author_association":"MEMBER","body":"@vinothchandar @bvaradar  Addressed most of your suggestions. Couple other followup items I need help from you on:\r\n\r\n1) You suggested to remove HoodieReplaceStat.  I ran into minor implementation issue removing it. Basically, HoodieWriteClient operations return JavaRDD[WriteStatus].  SparkSqlWriter uses these WriteStatus to create metadata (.commit/.replace etc).  Each WriteStatus comes with HoodieWriteStat (which is expected to be non-null in many places). This HoodieWriteStat is used for many post commit operations. So if we want to remove HoodieReplaceStat,  we can either\r\na) change signature of WriteClient operations to return a new structured object instead of just returning JavaRDD[WriteStatus]. This object would contain List[HoodieFileGroupId] for tracking file groups replaced and JavaRDD[WriteStatus] for newly created file groups. We have to change post commit operations to look at this new object instead of WriteStatus.\r\nOR\r\nb) Return a WriteStatus for replaced file groups too. WriteClient operations can continue to return JavaRDD[WriteStatus]. Each WriteStatus has HoodieWriteStat which can be a token value (null?) for replaced file groups. \r\n\r\nEither way, this is somewhat involved change, so would like to get your feedback before starting implementation. What do you guys think?\r\n\r\n2) Deleting replaced file groups during archival vs clean. I've this deletion logic implemented in archival per our earlier conversation. But, as I mentioned, this may lead to storage inefficiency. For example, a) clean retain is set to 1 commit.  b) archival is set to be done after 24 commits. We keep all the data for replaced files until archival happens. \r\n\r\nLet me know if you guys have any other comments.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687391466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687392285","html_url":"https://github.com/apache/hudi/pull/1848#issuecomment-687392285","issue_url":"https://api.github.com/repos/apache/hudi/issues/1848","id":687392285,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzM5MjI4NQ==","user":{"login":"luffyd","id":2287345,"node_id":"MDQ6VXNlcjIyODczNDU=","avatar_url":"https://avatars.githubusercontent.com/u/2287345?v=4","gravatar_id":"","url":"https://api.github.com/users/luffyd","html_url":"https://github.com/luffyd","followers_url":"https://api.github.com/users/luffyd/followers","following_url":"https://api.github.com/users/luffyd/following{/other_user}","gists_url":"https://api.github.com/users/luffyd/gists{/gist_id}","starred_url":"https://api.github.com/users/luffyd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luffyd/subscriptions","organizations_url":"https://api.github.com/users/luffyd/orgs","repos_url":"https://api.github.com/users/luffyd/repos","events_url":"https://api.github.com/users/luffyd/events{/privacy}","received_events_url":"https://api.github.com/users/luffyd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T21:21:22Z","updated_at":"2020-09-04T21:21:22Z","author_association":"NONE","body":"> > @garyli1019 : I took this patch and ran it in EMR (Spark-2.4.5-amzn-0). I got the following exceptions when loading S3 dataset.\r\n> > I am using hudi-spark-bundle in the spark session.\r\n> > Setting default log level to \"WARN\".\r\n> > To adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\r\n> > 20/07/29 06:57:50 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.\r\n> > Spark context Web UI available at http://ip-172-31-33-232.us-east-2.compute.internal:4040\r\n> > Spark context available as 'sc' (master = yarn, app id = application_1595775804042_9837).\r\n> > Spark session available as 'spark'.\r\n> > Welcome to\r\n> > \r\n> > / **/** ___ _****/ /** _\\ / _ / _ `/ __/ '_/ /**_/ .__/_,_/_/ /_/_\\ version 2.4.5-amzn-0 /_/\r\n> > Using Scala version 2.11.12 (OpenJDK 64-Bit Server VM, Java 1.8.0_252)\r\n> > Type in expressions to have them evaluated.\r\n> > Type :help for more information.\r\n> > scala> val dfh = spark.read.format(\"hudi\").load(\"s3a://hudi.streaming.perf/orders_stream_hudi_mor_4/_/_\")\r\n> > java.lang.NoSuchMethodError: org.apache.spark.sql.execution.datasources.PartitionedFile.(Lorg/apache/spark/sql/catalyst/InternalRow;Ljava/lang/String;JJ[Ljava/lang/String;)V\r\n> > at org.apache.hudi.MergeOnReadSnapshotRelation$$anonfun$4.apply(MergeOnReadSnapshotRelation.scala:144)\r\n> > at org.apache.hudi.MergeOnReadSnapshotRelation$$anonfun$4.apply(MergeOnReadSnapshotRelation.scala:141)\r\n> > at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n> > at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:234)\r\n> > at scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n> > at scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n> > at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n> > at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n> > at scala.collection.TraversableLike$class.map(TraversableLike.scala:234)\r\n> > at scala.collection.AbstractTraversable.map(Traversable.scala:104)\r\n> > at org.apache.hudi.MergeOnReadSnapshotRelation.buildFileIndex(MergeOnReadSnapshotRelation.scala:141)\r\n> > at org.apache.hudi.MergeOnReadSnapshotRelation.(MergeOnReadSnapshotRelation.scala:75)\r\n> > at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:70)\r\n> > at org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:50)\r\n> > at org.apache.spark.sql.execution.datasources.DataSource.resolveRelation(DataSource.scala:318)\r\n> > at org.apache.spark.sql.DataFrameReader.loadV1Source(DataFrameReader.scala:223)\r\n> > at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:211)\r\n> > at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:178)\r\n> > ... 49 elided\r\n> > scala>\r\n> > Have you seen this issue before ?\r\n> \r\n> I am seeing this exception with latest Hudi, how do we get it resolved?\r\n\r\nI see Hudi uses spark-sql_2.11-2.4.4.jar and EMR uses /usr/lib/spark/jars/spark-sql_2.11-2.4.5-amzn-0.jar\r\nNot sure If it makes a difference for that PartitionedFile class","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687392285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687405272","html_url":"https://github.com/apache/hudi/pull/2070#issuecomment-687405272","issue_url":"https://api.github.com/repos/apache/hudi/issues/2070","id":687405272,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzQwNTI3Mg==","user":{"login":"prashantwason","id":58448203,"node_id":"MDQ6VXNlcjU4NDQ4MjAz","avatar_url":"https://avatars.githubusercontent.com/u/58448203?v=4","gravatar_id":"","url":"https://api.github.com/users/prashantwason","html_url":"https://github.com/prashantwason","followers_url":"https://api.github.com/users/prashantwason/followers","following_url":"https://api.github.com/users/prashantwason/following{/other_user}","gists_url":"https://api.github.com/users/prashantwason/gists{/gist_id}","starred_url":"https://api.github.com/users/prashantwason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/prashantwason/subscriptions","organizations_url":"https://api.github.com/users/prashantwason/orgs","repos_url":"https://api.github.com/users/prashantwason/repos","events_url":"https://api.github.com/users/prashantwason/events{/privacy}","received_events_url":"https://api.github.com/users/prashantwason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T21:45:40Z","updated_at":"2020-09-04T21:45:40Z","author_association":"MEMBER","body":"This is an example of the errors I get occasionally on the local jenkins cluster.\r\n\r\njava.net.BindException: Problem binding to [localhost:36379] java.net.BindException: Address already in use; For more details see:  http://wiki.apache.org/hadoop/BindException\r\n\tat org.apache.hudi.cli.commands.TestArchivedCommitsCommand.init(TestArchivedCommitsCommand.java:58)\r\nCaused by: java.net.BindException: Address already in use\r\n\tat org.apache.hudi.cli.commands.TestArchivedCommitsCommand.init(TestArchivedCommitsCommand.java:58)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687405272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687479902","html_url":"https://github.com/apache/hudi/pull/1848#issuecomment-687479902","issue_url":"https://api.github.com/repos/apache/hudi/issues/1848","id":687479902,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzQ3OTkwMg==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-04T23:58:30Z","updated_at":"2020-09-04T23:58:30Z","author_association":"MEMBER","body":"@luffyd Thanks for reporting. I created a ticket to track this: https://issues.apache.org/jira/browse/HUDI-1270","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687479902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687480558","html_url":"https://github.com/apache/hudi/issues/2057#issuecomment-687480558","issue_url":"https://api.github.com/repos/apache/hudi/issues/2057","id":687480558,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzQ4MDU1OA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T00:00:19Z","updated_at":"2020-09-05T00:00:19Z","author_association":"MEMBER","body":"Created a ticket to track NoSuchMethod error https://issues.apache.org/jira/browse/HUDI-1270. Looks like this error is pretty common for AWS EMR user since we have multiple reports on this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687480558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687573173","html_url":"https://github.com/apache/hudi/issues/1941#issuecomment-687573173","issue_url":"https://api.github.com/repos/apache/hudi/issues/1941","id":687573173,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzU3MzE3Mw==","user":{"login":"hj2016","id":18521084,"node_id":"MDQ6VXNlcjE4NTIxMDg0","avatar_url":"https://avatars.githubusercontent.com/u/18521084?v=4","gravatar_id":"","url":"https://api.github.com/users/hj2016","html_url":"https://github.com/hj2016","followers_url":"https://api.github.com/users/hj2016/followers","following_url":"https://api.github.com/users/hj2016/following{/other_user}","gists_url":"https://api.github.com/users/hj2016/gists{/gist_id}","starred_url":"https://api.github.com/users/hj2016/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hj2016/subscriptions","organizations_url":"https://api.github.com/users/hj2016/orgs","repos_url":"https://api.github.com/users/hj2016/repos","events_url":"https://api.github.com/users/hj2016/events{/privacy}","received_events_url":"https://api.github.com/users/hj2016/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T08:42:19Z","updated_at":"2020-09-05T08:42:19Z","author_association":"CONTRIBUTOR","body":"@bvaradar:\r\nAfter fixing the change of HBase index partition, the test process is as follows:\r\n１，Use the hbase index to import 100 million data, of which 11 years of data are partitioned by a total of 132 partitions on a monthly basis, and then synchronized using hive.\r\nThe figure below shows the result of total data query with presto.\r\n![image](https://user-images.githubusercontent.com/18521084/92301309-54cb5a00-ef95-11ea-8d65-01052eb1d863.png)\r\nThe following figure is a partial screenshot of the result of using presto to query the total data volume of each partition.\r\n![image](https://user-images.githubusercontent.com/18521084/92301316-788ea000-ef95-11ea-8a60-0f5a0f070642.png)\r\n2.Extract 50-month partitions, each partition with 10,000 data volume and modify its original partition value to simulate partition changes, and then import the hive table.\r\nThe following figure is the sql statement to extract the simulated data.\r\n[import_test_data.txt](https://github.com/apache/hudi/files/5177776/import_test_data.txt)\r\nThe following figure shows the query result after import\r\n![image](https://user-images.githubusercontent.com/18521084/92301388-108c8980-ef96-11ea-9dd4-7a50cdbf302c.png)\r\n![image](https://user-images.githubusercontent.com/18521084/92301389-15e9d400-ef96-11ea-943f-20b06d42309d.png)\r\n\r\n3. Upsert the hudi_target2 data to the hudi_source3 table\r\ncode show as below\r\n`    val insertData: DataFrame = spark.read.parquet(dataPath)\r\n\r\n    insertData.write.format(\"org.apache.hudi\")\r\n      .options(config)\r\n      // 设置主键列名\r\n      .option(DataSourceWriteOptions.RECORDKEY_FIELD_OPT_KEY, \"rowkey\")\r\n      // 设置数据更新时间的列名\r\n      .option(DataSourceWriteOptions.PRECOMBINE_FIELD_OPT_KEY, \"lastupdatedttm\")\r\n      // 设置分区列\r\n      .option(DataSourceWriteOptions.PARTITIONPATH_FIELD_OPT_KEY, \"fk_id\")\r\n      .option(DataSourceWriteOptions.KEYGENERATOR_CLASS_OPT_KEY, classOf[SimpleKeyGenerator].getName)\r\n      .option(HoodieIndexConfig.INDEX_TYPE_PROP, HoodieIndex.IndexType.HBASE.name())\r\n      .option(HoodieHBaseIndexConfig.HBASE_ZKQUORUM_PROP, \"192.168.0.113\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_ZKPORT_PROP, \"2181\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_ZK_ZNODEPARENT, \"/hbase\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_TABLENAME_PROP, \"TEST_HBASE_INDEX\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_INDEX_UPDATE_PARTITION_PATH, \"true\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_GET_BATCH_SIZE_PROP, \"10000\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_QPS_FRACTION_PROP, \"0.5\")\r\n      .option(HoodieWriteConfig.TABLE_NAME, \"TEST_HBASE_INDEX\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_MAX_QPS_PER_REGION_SERVER_PROP, \"1000\")\r\n      .option(HoodieHBaseIndexConfig.HBASE_INDEX_QPS_ALLOCATOR_CLASS, HoodieHBaseIndexConfig.DEFAULT_HBASE_INDEX_QPS_ALLOCATOR_CLASS)\r\n      .mode(SaveMode.Append)\r\n      .save(hudiTablePath)`\r\n4.After the upsert operation, the total number of queries in the hudi_source3 table is still 100 million. After querying the data volume change of each partition, the partition change was completed successfully.\r\nThe figure below shows the query result.\r\n![image](https://user-images.githubusercontent.com/18521084/92301453-aa543680-ef96-11ea-883f-6df27b032e64.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687573173/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687584145","html_url":"https://github.com/apache/hudi/issues/2067#issuecomment-687584145","issue_url":"https://api.github.com/repos/apache/hudi/issues/2067","id":687584145,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzU4NDE0NQ==","user":{"login":"ankur1603","id":22634731,"node_id":"MDQ6VXNlcjIyNjM0NzMx","avatar_url":"https://avatars.githubusercontent.com/u/22634731?v=4","gravatar_id":"","url":"https://api.github.com/users/ankur1603","html_url":"https://github.com/ankur1603","followers_url":"https://api.github.com/users/ankur1603/followers","following_url":"https://api.github.com/users/ankur1603/following{/other_user}","gists_url":"https://api.github.com/users/ankur1603/gists{/gist_id}","starred_url":"https://api.github.com/users/ankur1603/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankur1603/subscriptions","organizations_url":"https://api.github.com/users/ankur1603/orgs","repos_url":"https://api.github.com/users/ankur1603/repos","events_url":"https://api.github.com/users/ankur1603/events{/privacy}","received_events_url":"https://api.github.com/users/ankur1603/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T10:10:23Z","updated_at":"2020-09-05T10:10:23Z","author_association":"NONE","body":"@bvaradar Thanks for your response. \r\nI do agree 0.5.0 is an old version but in my organization we are using spark 2.2.0 (upgrade to higher spark version is not possible as of now) and only 0.5.0 seems to be compatible with it.  \r\nAs any other version of Hudi requires `spark-avro` dependency of same version as spark [Setup Instructions](https://hudi.apache.org/docs/0.5.3-quick-start-guide.html#setup) and **there is no version of** `spark-avro_2.11_2.2.0` available on [Maven Repo](https://mvnrepository.com/artifact/org.apache.spark/spark-avro).\r\nI tried with oldest available version which is [2.4.0](https://mvnrepository.com/artifact/org.apache.spark/spark-avro_2.11/2.4.0) that also doesnt work. \r\n\r\n> Its a blocker for us. \r\n\r\nA workaround for this would be really appreciated.\r\n\r\nThanks in Advance","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687584145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687621720","html_url":"https://github.com/apache/hudi/issues/1895#issuecomment-687621720","issue_url":"https://api.github.com/repos/apache/hudi/issues/1895","id":687621720,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzYyMTcyMA==","user":{"login":"FelixKJose","id":22526075,"node_id":"MDQ6VXNlcjIyNTI2MDc1","avatar_url":"https://avatars.githubusercontent.com/u/22526075?v=4","gravatar_id":"","url":"https://api.github.com/users/FelixKJose","html_url":"https://github.com/FelixKJose","followers_url":"https://api.github.com/users/FelixKJose/followers","following_url":"https://api.github.com/users/FelixKJose/following{/other_user}","gists_url":"https://api.github.com/users/FelixKJose/gists{/gist_id}","starred_url":"https://api.github.com/users/FelixKJose/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FelixKJose/subscriptions","organizations_url":"https://api.github.com/users/FelixKJose/orgs","repos_url":"https://api.github.com/users/FelixKJose/repos","events_url":"https://api.github.com/users/FelixKJose/events{/privacy}","received_events_url":"https://api.github.com/users/FelixKJose/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T14:53:05Z","updated_at":"2020-09-05T14:53:05Z","author_association":"NONE","body":"@bvaradar I was on vacation thats why I couldn't reply in time. \r\nActually this is related to HUDI as well, since HUDI doesn't respect the spark output timestamp type property. Secondly there is no official documentation on this limitation saying \"if you use HUDI, all your timestamps should be either string or double to get it working with Presto\". HUDI uses Avro schema rather than parquet schema and thereby causing timestamp macro issue. But when I looked avro seems supporting timestamp millis, so I am wondering why HUDI written data is not getting recognized as timestamp_millis?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687621720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687633973","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-687633973","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":687633973,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzYzMzk3Mw==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T16:41:45Z","updated_at":"2020-09-05T16:41:45Z","author_association":"NONE","body":"@bvaradar Thank you for responding. We are using those 5 fields because that's how we can identify a unique record in our dataset. I did inspect the parquet file produced by hudi and I can see hoodie recordkey field takes up most of the memory while the other hudi meta data fields adds up to the memory. \r\n\r\nTotal Size of the file is 700MB out of which actual data is around 250MB and the rest of the memory goes for hudi meta data. Especially the hoodie record key itself amounts to 350MB in our case. \r\n\r\nI did notice the community emails around the record_key being virtual. When can we expect that to be released ? Meanwhile is there any workaround for this issue ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687633973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687637620","html_url":"https://github.com/apache/hudi/issues/1895#issuecomment-687637620","issue_url":"https://api.github.com/repos/apache/hudi/issues/1895","id":687637620,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzYzNzYyMA==","user":{"login":"s-sanjay","id":7111850,"node_id":"MDQ6VXNlcjcxMTE4NTA=","avatar_url":"https://avatars.githubusercontent.com/u/7111850?v=4","gravatar_id":"","url":"https://api.github.com/users/s-sanjay","html_url":"https://github.com/s-sanjay","followers_url":"https://api.github.com/users/s-sanjay/followers","following_url":"https://api.github.com/users/s-sanjay/following{/other_user}","gists_url":"https://api.github.com/users/s-sanjay/gists{/gist_id}","starred_url":"https://api.github.com/users/s-sanjay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/s-sanjay/subscriptions","organizations_url":"https://api.github.com/users/s-sanjay/orgs","repos_url":"https://api.github.com/users/s-sanjay/repos","events_url":"https://api.github.com/users/s-sanjay/events{/privacy}","received_events_url":"https://api.github.com/users/s-sanjay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-05T17:13:52Z","updated_at":"2020-09-05T17:13:52Z","author_association":"CONTRIBUTOR","body":"@FelixKJose did you check my comment ? Hudi is just using spark's [SchemaConvertors](https://github.com/apache/spark/blob/master/external/avro/src/main/scala/org/apache/spark/sql/avro/SchemaConverters.scala#L150) and that does not support user setting to use millis or micros. We will have to fix it in spark and then upgrade hudi's spark dependency to use that library. It is also not easy to copy that function into hudi because the code is being called from multiple code path. Fixing presto makes the most sense since even without hudi if someone where to use micros then the query will fail. \r\nHowever, I do agree we need to document this because even with presto fix it may not be possible for everyone to upgrade presto or cherry pick the fix.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687637620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687820410","html_url":"https://github.com/apache/hudi/issues/2068#issuecomment-687820410","issue_url":"https://api.github.com/repos/apache/hudi/issues/2068","id":687820410,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzgyMDQxMA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T15:30:29Z","updated_at":"2020-09-06T15:30:29Z","author_association":"CONTRIBUTOR","body":"Executor cores can be greater than 1. Looking at spark job/stage level information is the only way to figure out what is causing the slowness. Can you attach screenshots of jobs, stage and task level information.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687820410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687827770","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-687827770","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":687827770,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzgyNzc3MA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T16:00:57Z","updated_at":"2020-09-06T16:00:57Z","author_association":"CONTRIBUTOR","body":"\r\nFor SavePoints, there is CLI commands (savepoints create, savepoints rollback....). Rollbacks are internally managed with the next ingestion performing it(if needed). I have opened a jira : https://issues.apache.org/jira/browse/HUDI-1271 to add Restore utility scrips. \r\n\r\nIt is easy to add a utility script in java and have it be called from your python code. \r\n\r\n@vingov : Any thoughts on this  ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687827770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687828315","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-687828315","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":687828315,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzgyODMxNQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T16:03:16Z","updated_at":"2020-09-06T16:03:16Z","author_association":"CONTRIBUTOR","body":"@vingov  was looking at adding python APIs for incremental reading. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687828315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687831117","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-687831117","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":687831117,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzgzMTExNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T16:15:11Z","updated_at":"2020-09-06T16:15:11Z","author_association":"CONTRIBUTOR","body":"@n3nash @modi95 : Can you comment on the timelines. \r\n\r\n@KarthickAN : Honestly, this was not raised as a major issue until recently. Having a materialized record key allows you to standardize on data model.  \r\n\r\nIf I were to try improve the compression, I would try to change the ordering of the keys such that low cardinality columns is in the prefix(currently - 'sourceId,sourceAssetId,timestamp,sourceSignalId,aggregation' ) to see if compression gets better. Also, we have seen gzip compression (default for hudi) outperforming snappy in compression size. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687831117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687856325","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-687856325","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":687856325,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzg1NjMyNQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T17:59:13Z","updated_at":"2020-09-06T17:59:13Z","author_association":"NONE","body":"@bvaradar So on current state of things, we have to use Hudi CLI , if we wants to create custom Savepoints and perform Rollbacks in case of Pyspark \n\nAnd in case of an ingestion , if the job fails rollbacks are automatically performed internally ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687856325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687856910","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-687856910","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":687856910,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzg1NjkxMA==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T18:01:41Z","updated_at":"2020-09-06T18:01:41Z","author_association":"NONE","body":"Also are there any documentations on the already present Utility scripts in Hudi ? If not is there a plan to add a proper documentation on the Official documentation page about the different Utility scripts and on how to use them ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687856910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687900186","html_url":"https://github.com/apache/hudi/pull/1984#issuecomment-687900186","issue_url":"https://api.github.com/repos/apache/hudi/issues/1984","id":687900186,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NzkwMDE4Ng==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-06T20:59:52Z","updated_at":"2020-09-06T20:59:52Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial Apologies for the delay, will check this today and circle back. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687900186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687951066","html_url":"https://github.com/apache/hudi/pull/2056#issuecomment-687951066","issue_url":"https://api.github.com/repos/apache/hudi/issues/2056","id":687951066,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk1MTA2Ng==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T00:41:00Z","updated_at":"2020-09-07T00:41:00Z","author_association":"CONTRIBUTOR","body":"@vinothchandar Any feedback on this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687951066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687960061","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-687960061","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":687960061,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk2MDA2MQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T01:09:06Z","updated_at":"2020-09-07T01:11:02Z","author_association":"CONTRIBUTOR","body":"Hi, @vinothchandar thanks for your review. I'll address your concerns ASAP.\r\nThe unit test should be ok. The CI failure seems caused by timeout(50min),  can you help figure this out, I don't know how to adjust this threshold.\r\n![image](https://user-images.githubusercontent.com/49835526/92339698-0aa7bd00-f0ea-11ea-8da6-ca4c0fa97fc1.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687960061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687979672","html_url":"https://github.com/apache/hudi/issues/2007#issuecomment-687979672","issue_url":"https://api.github.com/repos/apache/hudi/issues/2007","id":687979672,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk3OTY3Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:08:36Z","updated_at":"2020-09-07T02:08:36Z","author_association":"CONTRIBUTOR","body":"CLosing this as we have a jira to track. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687979672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687981952","html_url":"https://github.com/apache/hudi/issues/2057#issuecomment-687981952","issue_url":"https://api.github.com/repos/apache/hudi/issues/2057","id":687981952,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4MTk1Mg==","user":{"login":"zherenyu831","id":52404525,"node_id":"MDQ6VXNlcjUyNDA0NTI1","avatar_url":"https://avatars.githubusercontent.com/u/52404525?v=4","gravatar_id":"","url":"https://api.github.com/users/zherenyu831","html_url":"https://github.com/zherenyu831","followers_url":"https://api.github.com/users/zherenyu831/followers","following_url":"https://api.github.com/users/zherenyu831/following{/other_user}","gists_url":"https://api.github.com/users/zherenyu831/gists{/gist_id}","starred_url":"https://api.github.com/users/zherenyu831/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zherenyu831/subscriptions","organizations_url":"https://api.github.com/users/zherenyu831/orgs","repos_url":"https://api.github.com/users/zherenyu831/repos","events_url":"https://api.github.com/users/zherenyu831/events{/privacy}","received_events_url":"https://api.github.com/users/zherenyu831/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:15:39Z","updated_at":"2020-09-07T02:15:39Z","author_association":"CONTRIBUTOR","body":"Regarding to hudi 0.6.0 on emr,\r\nPlease check this issue, and I also shared the workaround there\r\nhttps://github.com/apache/hudi/issues/2041","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687981952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687982517","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-687982517","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":687982517,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4MjUxNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:17:14Z","updated_at":"2020-09-07T02:17:14Z","author_association":"CONTRIBUTOR","body":"@ashishmgofficial : Yes, you need to manage Savepoints through CLI currently. I have added a jira to create a standalone utilitiy for this : https://issues.apache.org/jira/browse/HUDI-1272\r\n\r\nRegarding documentaion, yes, we would like to improve it and add docs for performing these operations. I have raised another Jira :  https://issues.apache.org/jira/browse/HUDI-1273. @ashishmgofficial : As this is not currently assigned, please feel free to work on it if you are interested. \r\n\r\nThanks,\r\nBalaji.V","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687982517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687991770","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-687991770","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":687991770,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk5MTc3MA==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:45:13Z","updated_at":"2020-09-07T02:45:13Z","author_association":"CONTRIBUTOR","body":"![1](https://user-images.githubusercontent.com/25769285/92343761-32515200-f0f7-11ea-8229-014d267e5021.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687991770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687992071","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-687992071","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":687992071,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk5MjA3MQ==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:46:12Z","updated_at":"2020-09-07T02:46:12Z","author_association":"CONTRIBUTOR","body":"@yanghua   @vinothchandar   Please help with suggestions","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687992071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687993540","html_url":"https://github.com/apache/hudi/issues/2020#issuecomment-687993540","issue_url":"https://api.github.com/repos/apache/hudi/issues/2020","id":687993540,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk5MzU0MA==","user":{"login":"dm-tran","id":7153721,"node_id":"MDQ6VXNlcjcxNTM3MjE=","avatar_url":"https://avatars.githubusercontent.com/u/7153721?v=4","gravatar_id":"","url":"https://api.github.com/users/dm-tran","html_url":"https://github.com/dm-tran","followers_url":"https://api.github.com/users/dm-tran/followers","following_url":"https://api.github.com/users/dm-tran/following{/other_user}","gists_url":"https://api.github.com/users/dm-tran/gists{/gist_id}","starred_url":"https://api.github.com/users/dm-tran/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dm-tran/subscriptions","organizations_url":"https://api.github.com/users/dm-tran/orgs","repos_url":"https://api.github.com/users/dm-tran/repos","events_url":"https://api.github.com/users/dm-tran/events{/privacy}","received_events_url":"https://api.github.com/users/dm-tran/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:50:34Z","updated_at":"2020-09-07T02:54:26Z","author_association":"NONE","body":"@bvaradar FYI, I have reproduced this error using Hudi 0.6.0, after running a structured streaming job during several days. Please find the logs attached. (I haven't identified a concurrent process that runs compactions)\r\n\r\n[withHudi060_stderr_01.log](https://github.com/apache/hudi/files/5180850/withHudi060_stderr_01.log)\r\n[withHudi060_stderr_02.log](https://github.com/apache/hudi/files/5180851/withHudi060_stderr_02.log)\r\n\r\nIs there a workaround to fix this error? Would it be possible to rollback some commits and resume ingestion/compaction?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687993540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687998784","html_url":"https://github.com/apache/hudi/issues/1941#issuecomment-687998784","issue_url":"https://api.github.com/repos/apache/hudi/issues/1941","id":687998784,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk5ODc4NA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T03:06:51Z","updated_at":"2020-09-07T03:06:51Z","author_association":"CONTRIBUTOR","body":"@simonqin : So, it works as expected in 0.6.0. right ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/687998784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688004478","html_url":"https://github.com/apache/hudi/pull/2074#issuecomment-688004478","issue_url":"https://api.github.com/repos/apache/hudi/issues/2074","id":688004478,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODAwNDQ3OA==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T03:24:14Z","updated_at":"2020-09-07T03:24:14Z","author_association":"CONTRIBUTOR","body":"@liujinhui1994 The CI build failed, please check it.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688004478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688009627","html_url":"https://github.com/apache/hudi/issues/2067#issuecomment-688009627","issue_url":"https://api.github.com/repos/apache/hudi/issues/2067","id":688009627,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODAwOTYyNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T03:39:06Z","updated_at":"2020-09-07T03:39:06Z","author_association":"CONTRIBUTOR","body":"@ankur1603  : THis would be really tricky :( but you can try looking at the commits in that went after 0.5.0 in the relevant code and cherry-picking them \r\n\r\ngit blame ./hudi-client/src/main/java/org/apache/hudi/index/bloom/HoodieGlobalBloomIndex.java\r\n\r\nI see a few of them (commit prefixes below)\r\n\r\nda8d1334e\r\n9c4217a3e\r\n9706f659d\r\nc1516df8a\r\nfa6aba751\r\n\r\nAs for what is going on, I believe, a bug in 0.5.0 is identifying wrong file id as the one to be updated. THis is likely fixed by 9c4217a3e1b9b728690282c914db2067117f4cfb and  c1516df8ac55757ebd07d8aa459a0ceedeccab7b . Please try cherry-picking them and see if it works.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688009627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688017532","html_url":"https://github.com/apache/hudi/issues/2020#issuecomment-688017532","issue_url":"https://api.github.com/repos/apache/hudi/issues/2020","id":688017532,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODAxNzUzMg==","user":{"login":"zherenyu831","id":52404525,"node_id":"MDQ6VXNlcjUyNDA0NTI1","avatar_url":"https://avatars.githubusercontent.com/u/52404525?v=4","gravatar_id":"","url":"https://api.github.com/users/zherenyu831","html_url":"https://github.com/zherenyu831","followers_url":"https://api.github.com/users/zherenyu831/followers","following_url":"https://api.github.com/users/zherenyu831/following{/other_user}","gists_url":"https://api.github.com/users/zherenyu831/gists{/gist_id}","starred_url":"https://api.github.com/users/zherenyu831/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zherenyu831/subscriptions","organizations_url":"https://api.github.com/users/zherenyu831/orgs","repos_url":"https://api.github.com/users/zherenyu831/repos","events_url":"https://api.github.com/users/zherenyu831/events{/privacy}","received_events_url":"https://api.github.com/users/zherenyu831/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T04:04:10Z","updated_at":"2020-09-07T04:04:10Z","author_association":"CONTRIBUTOR","body":"@bvaradar I am also the team member with @dm-tran \r\nThis problem seems related to compaction process (maybe because hoodie.filesystem.view.incr.timeline.sync.enable), \r\nsince once it create a compaction request, the file name in it is different with actually file in s3.\r\nThe workaround of us is delete failed compaction.infight file and compaction.request file in .hoodie folder...\r\nand it works again","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688017532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688168867","html_url":"https://github.com/apache/hudi/issues/1979#issuecomment-688168867","issue_url":"https://api.github.com/repos/apache/hudi/issues/1979","id":688168867,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODE2ODg2Nw==","user":{"login":"hughfdjackson","id":545689,"node_id":"MDQ6VXNlcjU0NTY4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/545689?v=4","gravatar_id":"","url":"https://api.github.com/users/hughfdjackson","html_url":"https://github.com/hughfdjackson","followers_url":"https://api.github.com/users/hughfdjackson/followers","following_url":"https://api.github.com/users/hughfdjackson/following{/other_user}","gists_url":"https://api.github.com/users/hughfdjackson/gists{/gist_id}","starred_url":"https://api.github.com/users/hughfdjackson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hughfdjackson/subscriptions","organizations_url":"https://api.github.com/users/hughfdjackson/orgs","repos_url":"https://api.github.com/users/hughfdjackson/repos","events_url":"https://api.github.com/users/hughfdjackson/events{/privacy}","received_events_url":"https://api.github.com/users/hughfdjackson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T08:43:27Z","updated_at":"2020-09-07T08:43:27Z","author_association":"NONE","body":"@bvaradar  - thanks for your help.  I think we're going to try the above approach, but it's something we might return to later. \r\n\r\nClosing the issue for now sounds like a good idea. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688168867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688303228","html_url":"https://github.com/apache/hudi/pull/2059#issuecomment-688303228","issue_url":"https://api.github.com/repos/apache/hudi/issues/2059","id":688303228,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODMwMzIyOA==","user":{"login":"linshan-ma","id":23548282,"node_id":"MDQ6VXNlcjIzNTQ4Mjgy","avatar_url":"https://avatars.githubusercontent.com/u/23548282?v=4","gravatar_id":"","url":"https://api.github.com/users/linshan-ma","html_url":"https://github.com/linshan-ma","followers_url":"https://api.github.com/users/linshan-ma/followers","following_url":"https://api.github.com/users/linshan-ma/following{/other_user}","gists_url":"https://api.github.com/users/linshan-ma/gists{/gist_id}","starred_url":"https://api.github.com/users/linshan-ma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/linshan-ma/subscriptions","organizations_url":"https://api.github.com/users/linshan-ma/orgs","repos_url":"https://api.github.com/users/linshan-ma/repos","events_url":"https://api.github.com/users/linshan-ma/events{/privacy}","received_events_url":"https://api.github.com/users/linshan-ma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T12:47:58Z","updated_at":"2020-09-07T12:47:58Z","author_association":"CONTRIBUTOR","body":"> @linshan-ma LGTM overall, one minor comment would be home\r\n\r\nok,i add method to test it,thank you @leesf ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688303228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688340523","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688340523","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688340523,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODM0MDUyMw==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T13:52:32Z","updated_at":"2020-09-07T13:52:32Z","author_association":"NONE","body":"is VERSION a STRING or LONG data type? if string then alpha sort would say 9 > 10 or 9 > 12..etc","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688340523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688365307","html_url":"https://github.com/apache/hudi/issues/2068#issuecomment-688365307","issue_url":"https://api.github.com/repos/apache/hudi/issues/2068","id":688365307,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODM2NTMwNw==","user":{"login":"bradleyhurley","id":7111357,"node_id":"MDQ6VXNlcjcxMTEzNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7111357?v=4","gravatar_id":"","url":"https://api.github.com/users/bradleyhurley","html_url":"https://github.com/bradleyhurley","followers_url":"https://api.github.com/users/bradleyhurley/followers","following_url":"https://api.github.com/users/bradleyhurley/following{/other_user}","gists_url":"https://api.github.com/users/bradleyhurley/gists{/gist_id}","starred_url":"https://api.github.com/users/bradleyhurley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradleyhurley/subscriptions","organizations_url":"https://api.github.com/users/bradleyhurley/orgs","repos_url":"https://api.github.com/users/bradleyhurley/repos","events_url":"https://api.github.com/users/bradleyhurley/events{/privacy}","received_events_url":"https://api.github.com/users/bradleyhurley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T14:36:03Z","updated_at":"2020-09-07T14:36:03Z","author_association":"NONE","body":"Thanks for following up @bvaradar. I have attached screenshots below. Please let me know what else I can provide.\r\n\r\nRunning Applications:\r\n![Running_Applications](https://user-images.githubusercontent.com/7111357/92397631-22387300-f0f5-11ea-82bb-895dc1bd83c1.png)\r\n\r\nJob 2\r\n![Job_2](https://user-images.githubusercontent.com/7111357/92397669-35e3d980-f0f5-11ea-8892-a83d81781ced.png)\r\n\r\nJob 2 Stage 2\r\n![Job_2_Stage_2](https://user-images.githubusercontent.com/7111357/92397718-4b590380-f0f5-11ea-9557-915141a12844.png)\r\n\r\nJob 5\r\n![Job_5](https://user-images.githubusercontent.com/7111357/92397738-557b0200-f0f5-11ea-86e0-b4567e6b58ca.png)\r\n\r\nJob 5 Stage 8\r\n![Job_5_Stage_8_Attempt_0](https://user-images.githubusercontent.com/7111357/92397746-5a3fb600-f0f5-11ea-96ac-0cbfb443472f.png)\r\n\r\nJob 6\r\n![Job_6_Details](https://user-images.githubusercontent.com/7111357/92397780-662b7800-f0f5-11ea-9a3a-943ba6dd6638.png)\r\n\r\nJob 6 Stage 10 - Attempt 0\r\n![Job_6_Stage_10_Attempt_0](https://user-images.githubusercontent.com/7111357/92397800-6d528600-f0f5-11ea-84e5-a488a415bd04.png)\r\n\r\nJob 6 Stage 10 - Attempt 1\r\n![Job_6_Stage_10_Attempt_1](https://user-images.githubusercontent.com/7111357/92397804-6e83b300-f0f5-11ea-9121-35ee21e7bf6c.png)\r\n\r\nJob 6 Stage 10 - Attempt 2\r\n![Job_6_Stage_10_Attempt_2](https://user-images.githubusercontent.com/7111357/92397808-704d7680-f0f5-11ea-8c00-c69021335269.png)\r\n\r\nJob 6 Stage 11 - Attempt 0\r\n![Job_6_Stage_11_Attempt_0](https://user-images.githubusercontent.com/7111357/92397810-70e60d00-f0f5-11ea-86e1-77bdc4d62ad0.png)\r\n\r\nJob 6 Stage 11 - Attempt 1\r\n![Job_6_Stage_11_Attempt_1](https://user-images.githubusercontent.com/7111357/92397817-72173a00-f0f5-11ea-91d2-667da510be4d.png)\r\n\r\nJob 6 Stage 13 - Attempt 0\r\n![Job_6_Stage_13_Attempt_0](https://user-images.githubusercontent.com/7111357/92397820-72afd080-f0f5-11ea-990c-0c1e5a6ff510.png)\r\n\r\nJob 6 Stage 13 - Attempt 1\r\n![Job_6_Stage_13_Attempt_1](https://user-images.githubusercontent.com/7111357/92397822-73486700-f0f5-11ea-8330-ebf641a4d59a.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688365307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688369846","html_url":"https://github.com/apache/hudi/issues/2068#issuecomment-688369846","issue_url":"https://api.github.com/repos/apache/hudi/issues/2068","id":688369846,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODM2OTg0Ng==","user":{"login":"bradleyhurley","id":7111357,"node_id":"MDQ6VXNlcjcxMTEzNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7111357?v=4","gravatar_id":"","url":"https://api.github.com/users/bradleyhurley","html_url":"https://github.com/bradleyhurley","followers_url":"https://api.github.com/users/bradleyhurley/followers","following_url":"https://api.github.com/users/bradleyhurley/following{/other_user}","gists_url":"https://api.github.com/users/bradleyhurley/gists{/gist_id}","starred_url":"https://api.github.com/users/bradleyhurley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradleyhurley/subscriptions","organizations_url":"https://api.github.com/users/bradleyhurley/orgs","repos_url":"https://api.github.com/users/bradleyhurley/repos","events_url":"https://api.github.com/users/bradleyhurley/events{/privacy}","received_events_url":"https://api.github.com/users/bradleyhurley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T14:44:20Z","updated_at":"2020-09-07T14:44:20Z","author_association":"NONE","body":"Failed Stages:\r\n![Failed_Stages](https://user-images.githubusercontent.com/7111357/92398461-96274b00-f0f6-11ea-9742-c221857b52df.png)\r\n\r\n**Failed To Connect To XXX**\r\n\r\nWe see these errors when nodes leave the EMR cluster.\r\n```\r\norg.apache.spark.shuffle.FetchFailedException: Failed to connect to ip-100-64-115-173.us-west-2.compute.internal/100.64.115.173:7337\r\n\tat org.apache.spark.storage.ShuffleBlockFetcherIterator.throwFetchFailedException(ShuffleBlockFetcherIterator.scala:640)\r\n\tat org.apache.spark.storage.ShuffleBlockFetcherIterator.next(ShuffleBlockFetcherIterator.scala:562)\r\n\tat org.apache.spark.storage.ShuffleBlockFetcherIterator.next(ShuffleBlockFetcherIterator.scala:66)\r\n\tat scala.collection.Iterator$$anon$12.nextCur(Iterator.scala:435)\r\n\tat scala.collection.Iterator$$anon$12.hasNext(Iterator.scala:441)\r\n\tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:409)\r\n\tat org.apache.spark.util.CompletionIterator.hasNext(CompletionIterator.scala:31)\r\n\tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n\tat org.apache.spark.util.collection.ExternalAppendOnlyMap.insertAll(ExternalAppendOnlyMap.scala:156)\r\n\tat org.apache.spark.Aggregator.combineCombinersByKey(Aggregator.scala:50)\r\n\tat org.apache.spark.shuffle.BlockStoreShuffleReader.read(BlockStoreShuffleReader.scala:106)\r\n\tat org.apache.spark.rdd.ShuffledRDD.compute(ShuffledRDD.scala:105)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:99)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:55)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:123)\r\n\tat org.apache.spark.executor.Executor$TaskRunner$$anonfun$10.apply(Executor.scala:408)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1405)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:414)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.io.IOException: Failed to connect to ip-100-64-115-173.us-west-2.compute.internal/100.64.115.173:7337\r\n\tat org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:245)\r\n\tat org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:187)\r\n\tat org.apache.spark.network.shuffle.ExternalShuffleClient.lambda$fetchBlocks$0(ExternalShuffleClient.java:100)\r\n\tat org.apache.spark.network.shuffle.RetryingBlockFetcher.fetchAllOutstanding(RetryingBlockFetcher.java:141)\r\n\tat org.apache.spark.network.shuffle.RetryingBlockFetcher.lambda$initiateRetry$0(RetryingBlockFetcher.java:169)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\t... 1 more\r\nCaused by: io.netty.channel.AbstractChannel$AnnotatedNoRouteToHostException: No route to host: ip-100-64-115-173.us-west-2.compute.internal/100.64.115.173:7337\r\nCaused by: java.net.NoRouteToHostException: No route to host\r\n\tat sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)\r\n\tat sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:714)\r\n\tat io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:327)\r\n\tat io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:688)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:635)\r\n\tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:552)\r\n\tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:514)\r\n\tat io.netty.util.concurrent.SingleThreadEventExecutor$6.run(SingleThreadEventExecutor.java:1044)\r\n\tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n\tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n**Missing an output location for shuffle 1**\r\n\r\n```\r\norg.apache.spark.shuffle.MetadataFetchFailedException: Missing an output location for shuffle 1\r\n\tat org.apache.spark.MapOutputTracker$$anonfun$convertMapStatuses$4.apply(MapOutputTracker.scala:972)\r\n\tat org.apache.spark.MapOutputTracker$$anonfun$convertMapStatuses$4.apply(MapOutputTracker.scala:968)\r\n\tat scala.collection.Iterator$class.foreach(Iterator.scala:891)\r\n\tat scala.collection.AbstractIterator.foreach(Iterator.scala:1334)\r\n\tat org.apache.spark.MapOutputTracker$.convertMapStatuses(MapOutputTracker.scala:968)\r\n\tat org.apache.spark.MapOutputTrackerWorker.getMapSizesByExecutorId(MapOutputTracker.scala:759)\r\n\tat org.apache.spark.shuffle.sort.SortShuffleManager.getReader(SortShuffleManager.scala:118)\r\n\tat org.apache.spark.rdd.ShuffledRDD.compute(ShuffledRDD.scala:104)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n\tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:346)\r\n\tat org.apache.spark.rdd.RDD.iterator(RDD.scala:310)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:99)\r\n\tat org.apache.spark.scheduler.ShuffleMapTask.runTask(ShuffleMapTask.scala:55)\r\n\tat org.apache.spark.scheduler.Task.run(Task.scala:123)\r\n\tat org.apache.spark.executor.Executor$TaskRunner$$anonfun$10.apply(Executor.scala:408)\r\n\tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1405)\r\n\tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:414)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688369846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688402024","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688402024","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688402024,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODQwMjAyNA==","user":{"login":"rajgowtham24","id":68343070,"node_id":"MDQ6VXNlcjY4MzQzMDcw","avatar_url":"https://avatars.githubusercontent.com/u/68343070?v=4","gravatar_id":"","url":"https://api.github.com/users/rajgowtham24","html_url":"https://github.com/rajgowtham24","followers_url":"https://api.github.com/users/rajgowtham24/followers","following_url":"https://api.github.com/users/rajgowtham24/following{/other_user}","gists_url":"https://api.github.com/users/rajgowtham24/gists{/gist_id}","starred_url":"https://api.github.com/users/rajgowtham24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajgowtham24/subscriptions","organizations_url":"https://api.github.com/users/rajgowtham24/orgs","repos_url":"https://api.github.com/users/rajgowtham24/repos","events_url":"https://api.github.com/users/rajgowtham24/events{/privacy}","received_events_url":"https://api.github.com/users/rajgowtham24/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T15:44:29Z","updated_at":"2020-09-07T15:44:29Z","author_association":"NONE","body":"yeah.. it's string.. the dataframe is created directly on-top of s3 files","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688402024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688428622","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688428622","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688428622,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODQyODYyMg==","user":{"login":"tooptoop4","id":33283496,"node_id":"MDQ6VXNlcjMzMjgzNDk2","avatar_url":"https://avatars.githubusercontent.com/u/33283496?v=4","gravatar_id":"","url":"https://api.github.com/users/tooptoop4","html_url":"https://github.com/tooptoop4","followers_url":"https://api.github.com/users/tooptoop4/followers","following_url":"https://api.github.com/users/tooptoop4/following{/other_user}","gists_url":"https://api.github.com/users/tooptoop4/gists{/gist_id}","starred_url":"https://api.github.com/users/tooptoop4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tooptoop4/subscriptions","organizations_url":"https://api.github.com/users/tooptoop4/orgs","repos_url":"https://api.github.com/users/tooptoop4/repos","events_url":"https://api.github.com/users/tooptoop4/events{/privacy}","received_events_url":"https://api.github.com/users/tooptoop4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T16:39:13Z","updated_at":"2020-09-07T16:39:22Z","author_association":"NONE","body":"so no issue? you would need to cast the df to a schema","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688428622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688433196","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688433196","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688433196,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODQzMzE5Ng==","user":{"login":"rajgowtham24","id":68343070,"node_id":"MDQ6VXNlcjY4MzQzMDcw","avatar_url":"https://avatars.githubusercontent.com/u/68343070?v=4","gravatar_id":"","url":"https://api.github.com/users/rajgowtham24","html_url":"https://github.com/rajgowtham24","followers_url":"https://api.github.com/users/rajgowtham24/followers","following_url":"https://api.github.com/users/rajgowtham24/following{/other_user}","gists_url":"https://api.github.com/users/rajgowtham24/gists{/gist_id}","starred_url":"https://api.github.com/users/rajgowtham24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajgowtham24/subscriptions","organizations_url":"https://api.github.com/users/rajgowtham24/orgs","repos_url":"https://api.github.com/users/rajgowtham24/repos","events_url":"https://api.github.com/users/rajgowtham24/events{/privacy}","received_events_url":"https://api.github.com/users/rajgowtham24/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T16:48:20Z","updated_at":"2020-09-07T16:48:20Z","author_association":"NONE","body":"yeah.. will take a look on the casting for the precombine key column and let you know for any concerns. Thanks @tooptoop4 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688433196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688536635","html_url":"https://github.com/apache/hudi/pull/2058#issuecomment-688536635","issue_url":"https://api.github.com/repos/apache/hudi/issues/2058","id":688536635,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODUzNjYzNQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T23:14:00Z","updated_at":"2020-09-07T23:14:00Z","author_association":"CONTRIBUTOR","body":"@bvaradar It seems you are busy?\r\n\r\n@leesf Do you have time to verify this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688536635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688562852","html_url":"https://github.com/apache/hudi/pull/2058#issuecomment-688562852","issue_url":"https://api.github.com/repos/apache/hudi/issues/2058","id":688562852,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU2Mjg1Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T01:08:53Z","updated_at":"2020-09-08T01:08:53Z","author_association":"CONTRIBUTOR","body":"@yanghua : Sorry for the delay. Let me review this tonight. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688562852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688571862","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-688571862","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":688571862,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU3MTg2Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T01:45:14Z","updated_at":"2020-09-08T01:45:14Z","author_association":"MEMBER","body":"@wangxianghu the issue with the tests is that, now most of the tests are moved to hudi-spark-client. previously we had split tests into hudi-client and others. We need to edit `travis.yml` to adjust the splits again","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688571862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688573169","html_url":"https://github.com/apache/hudi/pull/2058#issuecomment-688573169","issue_url":"https://api.github.com/repos/apache/hudi/issues/2058","id":688573169,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU3MzE2OQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T01:51:21Z","updated_at":"2020-09-08T01:51:21Z","author_association":"CONTRIBUTOR","body":"> Are you building docker images somewhere else ?\r\n\r\nNo, only want to speed up the local build progress. Actually, I do not know how we publish the official docker image. Do we reuse these changed `Dockerfile`s. If yes, we also need more adaption.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688573169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688573877","html_url":"https://github.com/apache/hudi/issues/1941#issuecomment-688573877","issue_url":"https://api.github.com/repos/apache/hudi/issues/1941","id":688573877,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU3Mzg3Nw==","user":{"login":"simonqin","id":10129335,"node_id":"MDQ6VXNlcjEwMTI5MzM1","avatar_url":"https://avatars.githubusercontent.com/u/10129335?v=4","gravatar_id":"","url":"https://api.github.com/users/simonqin","html_url":"https://github.com/simonqin","followers_url":"https://api.github.com/users/simonqin/followers","following_url":"https://api.github.com/users/simonqin/following{/other_user}","gists_url":"https://api.github.com/users/simonqin/gists{/gist_id}","starred_url":"https://api.github.com/users/simonqin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonqin/subscriptions","organizations_url":"https://api.github.com/users/simonqin/orgs","repos_url":"https://api.github.com/users/simonqin/repos","events_url":"https://api.github.com/users/simonqin/events{/privacy}","received_events_url":"https://api.github.com/users/simonqin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T01:54:43Z","updated_at":"2020-09-08T01:54:43Z","author_association":"NONE","body":"> @simonqin : Can you use 0.6.0 and apply the patch to try out the fix ?\r\n> @simonqin : So, it works as expected in 0.6.0. right ?\r\nIt seems to work really well  in 0.6.0，thanks @hj2016 @bvaradar @nsivabalan \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688573877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688579652","html_url":"https://github.com/apache/hudi/pull/1953#issuecomment-688579652","issue_url":"https://api.github.com/repos/apache/hudi/issues/1953","id":688579652,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU3OTY1Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:21:07Z","updated_at":"2020-09-08T02:21:07Z","author_association":"MEMBER","body":"@umehrot2 lgtm. you can just `Squash and merge` this yourself","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688579652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688580026","html_url":"https://github.com/apache/hudi/pull/1968#issuecomment-688580026","issue_url":"https://api.github.com/repos/apache/hudi/issues/1968","id":688580026,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4MDAyNg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:22:41Z","updated_at":"2020-09-08T02:22:41Z","author_association":"MEMBER","body":">If the process of hudi to hive failed, the job is still running.\r\nI think we can add a switch to control the job behavior(fail or keep running) \r\n\r\n+1 to have this configurable ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688580026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688580842","html_url":"https://github.com/apache/hudi/pull/1975#issuecomment-688580842","issue_url":"https://api.github.com/repos/apache/hudi/issues/1975","id":688580842,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4MDg0Mg==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:25:46Z","updated_at":"2020-09-08T02:25:46Z","author_association":"MEMBER","body":"@umehrot2 to take a first pass as well.  \r\n@modi95 I am assuming you can review this, with uber's setup in mind","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688580842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688581129","html_url":"https://github.com/apache/hudi/pull/1978#issuecomment-688581129","issue_url":"https://api.github.com/repos/apache/hudi/issues/1978","id":688581129,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4MTEyOQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:26:46Z","updated_at":"2020-09-08T02:26:46Z","author_association":"MEMBER","body":"@n3nash @nsivabalan can we please fast track this if possible? :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688581129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688581291","html_url":"https://github.com/apache/hudi/pull/1984#issuecomment-688581291","issue_url":"https://api.github.com/repos/apache/hudi/issues/1984","id":688581291,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4MTI5MQ==","user":{"login":"vinothchandar","id":1179324,"node_id":"MDQ6VXNlcjExNzkzMjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1179324?v=4","gravatar_id":"","url":"https://api.github.com/users/vinothchandar","html_url":"https://github.com/vinothchandar","followers_url":"https://api.github.com/users/vinothchandar/followers","following_url":"https://api.github.com/users/vinothchandar/following{/other_user}","gists_url":"https://api.github.com/users/vinothchandar/gists{/gist_id}","starred_url":"https://api.github.com/users/vinothchandar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinothchandar/subscriptions","organizations_url":"https://api.github.com/users/vinothchandar/orgs","repos_url":"https://api.github.com/users/vinothchandar/repos","events_url":"https://api.github.com/users/vinothchandar/events{/privacy}","received_events_url":"https://api.github.com/users/vinothchandar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:27:24Z","updated_at":"2020-09-08T02:27:24Z","author_association":"MEMBER","body":"@pratyakshsharma I would like to get this into 0.6.1 if possible. please prioritize accordingly ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688581291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688588841","html_url":"https://github.com/apache/hudi/issues/2063#issuecomment-688588841","issue_url":"https://api.github.com/repos/apache/hudi/issues/2063","id":688588841,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4ODg0MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:52:54Z","updated_at":"2020-09-08T02:52:54Z","author_association":"CONTRIBUTOR","body":"Context from dev email thread : \r\n\r\n\r\n\r\nJl Liu (cadl) <ctrlaltdeleteliu@gmail.com>\r\nUnsubscribe\r\nTo:\r\ndev@hudi.apache.org\r\n\r\nMon, Sep 7 at 10:11 AM\r\n\r\nThanks~\r\n\r\nI got another question about schema evolution. I don’t found document on homepage and wiki. If I change type from INT to LONG, will Audi overwrite total parquet files of the partition?\r\n\r\nI disable schema compatibility check and write LONG type data to existed INT type hudi table successfully, but got “Parquet column cannot be converted in file xxx.parquet. Column: [xxx], Expected: int, Found: INT64” error on read. It seems like some parquet files with different schema stored in the same directory, I can’t read them together.\r\n\r\n\r\n\r\nHide original message\r\n\r\n> 2020年9月8日 上午12:30，Sivabalan <n.siva.b@gmail.com> 写道：\r\n>\r\n> Actually, I guess it is a bug in hudi. reader and writer schema arguments\r\n> are called wrongly. (reader is sent for writer and writer is sent for\r\n> reader). Will file a bug. Then, as you expect, INT should be evolvable to\r\n> LONG, where as vice versa is incompatible.\r\n>\r\n>\r\n> On Mon, Sep 7, 2020 at 12:17 PM Sivabalan <n.siva.b@gmail.com> wrote:\r\n>\r\n>> Hudi relies on avro's Schema compatability check. Looks like as per avro\r\n>> SchemaCompatability, INT can't be evolved to a LONG, but LONG to INT is\r\n>> allowed.\r\n>>\r\n>> Check line no 339 here\r\n>> <https://github.com/apache/avro/blob/master/lang/java/avro/src/main/java/org/apache/avro/SchemaCompatibility.java>\r\n>> .\r\n>> Also, check their test case here\r\n>> <https://github.com/apache/avro/blob/master/lang/java/avro/src/test/java/org/apache/avro/TestSchemaCompatibilityTypeMismatch.java> at\r\n>> line 44.\r\n>>\r\n>>\r\n>>\r\n>> On Mon, Sep 7, 2020 at 12:02 PM Prashant Wason <pwason@uber.com.invalid>\r\n>> wrote:\r\n>>\r\n>>> Yes, the schema change looks fine. That would mean its an issue with the\r\n>>> schema compatibility checker. The are explicit checks for such cases so\r\n>>> can't say where the issue lies.\r\n>>>\r\n>>> I am out on a vacation this week. I will look into this as soon as I am\r\n>>> back.\r\n>>>\r\n>>> Thanks\r\n>>> Prashant\r\n>>>\r\n>>> On Sun, Sep 6, 2020, 11:18 AM Vinoth Chandar <vinoth@apache.org> wrote:\r\n>>>\r\n>>>> That does sound like a backwards compatible change.\r\n>>>> @prashant , any ideas here? (since you have the best context on the\r\n>>> schema\r\n>>>> validation checks)\r\n>>>>\r\n>>>> On Thu, Sep 3, 2020 at 8:12 PM cadl <ctrlaltdeleteliu@gmail.com> wrote:\r\n>>>>\r\n>>>>> Hi All,\r\n>>>>>\r\n>>>>> I want to change the type of one column in my COW table, from int to\r\n>>>> long.\r\n>>>>> When I set “hoodie.avro.schema.validate = true” and upsert new data\r\n>>> with\r\n>>>>> long type, I got a “Failed upsert schema compatibility check” error.\r\n>>>> Dose\r\n>>>>> it break backwards compatibility? If I disable\r\n>>>> hoodie.avro.schema.validate,\r\n>>>>> I can upsert and read normally.\r\n>>>>>\r\n>>>>>\r\n>>>>> code demo:\r\n>>> https://gist.github.com/cadl/be433079747aeea88c9c1f45321cc2eb\r\n>>>>>\r\n>>>>> stacktrace:\r\n>>>>>\r\n>>>>>\r\n>>>>> org.apache.hudi.exception.HoodieUpsertException: Failed upsert schema\r\n>>>>> compatibility check.\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.hudi.table.HoodieTable.validateUpsertSchema(HoodieTable.java:572)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.hudi.client.HoodieWriteClient.upsert(HoodieWriteClient.java:190)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.hudi.DataSourceUtils.doWriteOperation(DataSourceUtils.java:260)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.hudi.HoodieSparkSqlWriter$.write(HoodieSparkSqlWriter.scala:169)\r\n>>>>>  at\r\n>>>> org.apache.hudi.DefaultSource.createRelation(DefaultSource.scala:125)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.datasources.SaveIntoDataSourceCommand.run(SaveIntoDataSourceCommand.scala:45)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.command.ExecutedCommandExec.doExecute(commands.scala:86)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:131)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SparkPlan$$anonfun$execute$1.apply(SparkPlan.scala:127)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SparkPlan$$anonfun$executeQuery$1.apply(SparkPlan.scala:155)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.rdd.RDDOperationScope$.withScope(RDDOperationScope.scala:151)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SparkPlan.executeQuery(SparkPlan.scala:152)\r\n>>>>>  at\r\n>>>> org.apache.spark.sql.execution.SparkPlan.execute(SparkPlan.scala:127)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.QueryExecution.toRdd$lzycompute(QueryExecution.scala:80)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.QueryExecution.toRdd(QueryExecution.scala:80)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$1.apply(DataFrameWriter.scala:676)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.DataFrameWriter$$anonfun$runCommand$1.apply(DataFrameWriter.scala:676)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SQLExecution$$anonfun$withNewExecutionId$1.apply(SQLExecution.scala:78)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:125)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:73)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.DataFrameWriter.runCommand(DataFrameWriter.scala:676)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:285)\r\n>>>>>  at\r\n>>> org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:271)\r\n>>>>>  at\r\n>>> org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:229)\r\n>>>>>  ... 69 elided\r\n>>>>> Caused by: org.apache.hudi.exception.HoodieException: Failed schema\r\n>>>>> compatibility check for writerSchema\r\n>>>>>\r\n>>>>\r\n>>> :{\"type\":\"record\",\"name\":\"foo_record\",\"namespace\":\"hoodie.foo\",\"fields\":[{\"name\":\"_hoodie_commit_time\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_commit_seqno\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_record_key\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_partition_path\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_file_name\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"a\",\"type\":\"long\"},{\"name\":\"b\",\"type\":\"string\"},{\"name\":\"__row_key\",\"type\":\"int\"},{\"name\":\"__row_version\",\"type\":\"int\"}]},\r\n>>>>> table schema\r\n>>>>>\r\n>>>>\r\n>>> :{\"type\":\"record\",\"name\":\"foo_record\",\"namespace\":\"hoodie.foo\",\"fields\":[{\"name\":\"_hoodie_commit_time\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_commit_seqno\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_record_key\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_partition_path\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"_hoodie_file_name\",\"type\":[\"null\",\"string\"],\"doc\":\"\",\"default\":null},{\"name\":\"a\",\"type\":\"int\"},{\"name\":\"b\",\"type\":\"string\"},{\"name\":\"__row_key\",\"type\":\"int\"},{\"name\":\"__row_version\",\"type\":\"int\"}]},\r\n>>>>> base path :file:///jfs/cadl/hudi_data/schema/foo\r\n>>>>>  at\r\n>>>> org.apache.hudi.table.HoodieTable.validateSchema(HoodieTable.java:564)\r\n>>>>>  at\r\n>>>>>\r\n>>>>\r\n>>> org.apache.hudi.table.HoodieTable.validateUpsertSchema(HoodieTable.java:570)\r\n>>>>>  ... 94 more.\r\n>>>>\r\n>>>\r\n>>\r\n>>\r\n>> --\r\n>> Regards,\r\n>> -Sivabalan\r\n>>\r\n>\r\n>\r\n> --\r\n> Regards,\r\n> -Sivabalan\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688588841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688589558","html_url":"https://github.com/apache/hudi/issues/2063#issuecomment-688589558","issue_url":"https://api.github.com/repos/apache/hudi/issues/2063","id":688589558,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU4OTU1OA==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T02:56:05Z","updated_at":"2020-09-08T02:56:05Z","author_association":"CONTRIBUTOR","body":"@cadl : Regarding schema validation error, @prashantwason  will be looking into it when he is back. \r\n\r\nMeanwhile, After you disable schema compatibility check, can you try  setting \"hoodie.avro.schema.externalTransformation=true\" and see if you are able to upsert without any issues ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688589558/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688590972","html_url":"https://github.com/apache/hudi/pull/2058#issuecomment-688590972","issue_url":"https://api.github.com/repos/apache/hudi/issues/2058","id":688590972,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU5MDk3Mg==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T03:02:21Z","updated_at":"2020-09-08T03:02:21Z","author_association":"CONTRIBUTOR","body":"@yanghua : Publishing images is done in an adhoc fashion only on demand. So, IMO, local caching of artifacts is not going to help. W.r.t adaptations, do you have anything else other than caching in mind ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688590972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688591661","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688591661","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688591661,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODU5MTY2MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T03:05:10Z","updated_at":"2020-09-08T03:05:10Z","author_association":"CONTRIBUTOR","body":"THanks @tooptoop4 for the help. @rajgowtham24 : Please reopen if there is any other issue. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688591661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688625217","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-688625217","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":688625217,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODYyNTIxNw==","user":{"login":"KarthickAN","id":7994981,"node_id":"MDQ6VXNlcjc5OTQ5ODE=","avatar_url":"https://avatars.githubusercontent.com/u/7994981?v=4","gravatar_id":"","url":"https://api.github.com/users/KarthickAN","html_url":"https://github.com/KarthickAN","followers_url":"https://api.github.com/users/KarthickAN/followers","following_url":"https://api.github.com/users/KarthickAN/following{/other_user}","gists_url":"https://api.github.com/users/KarthickAN/gists{/gist_id}","starred_url":"https://api.github.com/users/KarthickAN/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KarthickAN/subscriptions","organizations_url":"https://api.github.com/users/KarthickAN/orgs","repos_url":"https://api.github.com/users/KarthickAN/repos","events_url":"https://api.github.com/users/KarthickAN/events{/privacy}","received_events_url":"https://api.github.com/users/KarthickAN/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T05:24:01Z","updated_at":"2020-09-08T05:29:08Z","author_association":"NONE","body":"@bvaradar will that be part of the 0.6.1 release planned sometime soon ? Is there any way we can customize it by ourselves ?\r\n\r\nFor some reason we are sticking to the snappy compression for now. I tried changing the order of the columns and it did change the compression ratio but its not much significant. We are still seeing 5.5x times increase in size approximately.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688625217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688649831","html_url":"https://github.com/apache/hudi/pull/2058#issuecomment-688649831","issue_url":"https://api.github.com/repos/apache/hudi/issues/2058","id":688649831,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY0OTgzMQ==","user":{"login":"yanghua","id":2283778,"node_id":"MDQ6VXNlcjIyODM3Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/2283778?v=4","gravatar_id":"","url":"https://api.github.com/users/yanghua","html_url":"https://github.com/yanghua","followers_url":"https://api.github.com/users/yanghua/followers","following_url":"https://api.github.com/users/yanghua/following{/other_user}","gists_url":"https://api.github.com/users/yanghua/gists{/gist_id}","starred_url":"https://api.github.com/users/yanghua/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanghua/subscriptions","organizations_url":"https://api.github.com/users/yanghua/orgs","repos_url":"https://api.github.com/users/yanghua/repos","events_url":"https://api.github.com/users/yanghua/events{/privacy}","received_events_url":"https://api.github.com/users/yanghua/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:35:40Z","updated_at":"2020-09-08T06:35:40Z","author_association":"CONTRIBUTOR","body":"> @yanghua : Publishing images is done in an adhoc fashion only on demand. So, IMO, local caching of artifacts is not going to help. W.r.t adaptations, do you have anything else other than caching in mind ?\r\n\r\nLet me clarify the purpose of this PR. I just want to speed up the local build progress so that I can verify new changes frequently. I do not want to speed up the publishing progress. I throw this question so that you can check if the changing of `Dockerfile` would break normal publishing.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688649831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688661449","html_url":"https://github.com/apache/hudi/pull/2077#issuecomment-688661449","issue_url":"https://api.github.com/repos/apache/hudi/issues/2077","id":688661449,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY2MTQ0OQ==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T06:59:48Z","updated_at":"2020-09-08T06:59:48Z","author_association":"MEMBER","body":"thanks for opening this PR, LGTM. merging","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688661449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688685118","html_url":"https://github.com/apache/hudi/pull/1938#issuecomment-688685118","issue_url":"https://api.github.com/repos/apache/hudi/issues/1938","id":688685118,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODY4NTExOA==","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T07:44:32Z","updated_at":"2020-09-08T07:44:32Z","author_association":"MEMBER","body":"Ready for review. cc: @vinothchandar @bhasudha ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688685118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688749502","html_url":"https://github.com/apache/hudi/pull/1968#issuecomment-688749502","issue_url":"https://api.github.com/repos/apache/hudi/issues/1968","id":688749502,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODc0OTUwMg==","user":{"login":"liujinhui1994","id":25769285,"node_id":"MDQ6VXNlcjI1NzY5Mjg1","avatar_url":"https://avatars.githubusercontent.com/u/25769285?v=4","gravatar_id":"","url":"https://api.github.com/users/liujinhui1994","html_url":"https://github.com/liujinhui1994","followers_url":"https://api.github.com/users/liujinhui1994/followers","following_url":"https://api.github.com/users/liujinhui1994/following{/other_user}","gists_url":"https://api.github.com/users/liujinhui1994/gists{/gist_id}","starred_url":"https://api.github.com/users/liujinhui1994/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liujinhui1994/subscriptions","organizations_url":"https://api.github.com/users/liujinhui1994/orgs","repos_url":"https://api.github.com/users/liujinhui1994/repos","events_url":"https://api.github.com/users/liujinhui1994/events{/privacy}","received_events_url":"https://api.github.com/users/liujinhui1994/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T09:38:29Z","updated_at":"2020-09-08T09:38:29Z","author_association":"CONTRIBUTOR","body":"Ok i will deal with this soon","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688749502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688806064","html_url":"https://github.com/apache/hudi/issues/2075#issuecomment-688806064","issue_url":"https://api.github.com/repos/apache/hudi/issues/2075","id":688806064,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODgwNjA2NA==","user":{"login":"rajgowtham24","id":68343070,"node_id":"MDQ6VXNlcjY4MzQzMDcw","avatar_url":"https://avatars.githubusercontent.com/u/68343070?v=4","gravatar_id":"","url":"https://api.github.com/users/rajgowtham24","html_url":"https://github.com/rajgowtham24","followers_url":"https://api.github.com/users/rajgowtham24/followers","following_url":"https://api.github.com/users/rajgowtham24/following{/other_user}","gists_url":"https://api.github.com/users/rajgowtham24/gists{/gist_id}","starred_url":"https://api.github.com/users/rajgowtham24/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajgowtham24/subscriptions","organizations_url":"https://api.github.com/users/rajgowtham24/orgs","repos_url":"https://api.github.com/users/rajgowtham24/repos","events_url":"https://api.github.com/users/rajgowtham24/events{/privacy}","received_events_url":"https://api.github.com/users/rajgowtham24/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T11:27:16Z","updated_at":"2020-09-08T11:27:16Z","author_association":"NONE","body":"Hi @tooptoop4 ,\r\n\r\nWhile reading the csv file i have used inferschema option as mentioned below\r\n\r\ninput_df = spark.read.format(\"csv\").option(\"header\",\"true\").option(\"inferschema\",\"true\").load(\"mybucket/sample.csv\")\r\n\r\nAnd upon reading the file, i have validated the datatypes using input_df.dtypes and i can confirm that the Version Column is in INT type\r\n\r\n[('NAME', 'string'), ('VERSION', 'int'), ('CHANGED_BY', 'string')]\r\n\r\nAfter writing this into Hudi table, i can still see the Version 9 is getting inserted, Whereas the Hive Table metadata is now synced with the datatypes similar to the input_df.dtypes\r\n\r\nLet me know for any addition details. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688806064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688903435","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-688903435","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":688903435,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODkwMzQzNQ==","user":{"login":"ashishmgofficial","id":40498599,"node_id":"MDQ6VXNlcjQwNDk4NTk5","avatar_url":"https://avatars.githubusercontent.com/u/40498599?v=4","gravatar_id":"","url":"https://api.github.com/users/ashishmgofficial","html_url":"https://github.com/ashishmgofficial","followers_url":"https://api.github.com/users/ashishmgofficial/followers","following_url":"https://api.github.com/users/ashishmgofficial/following{/other_user}","gists_url":"https://api.github.com/users/ashishmgofficial/gists{/gist_id}","starred_url":"https://api.github.com/users/ashishmgofficial/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashishmgofficial/subscriptions","organizations_url":"https://api.github.com/users/ashishmgofficial/orgs","repos_url":"https://api.github.com/users/ashishmgofficial/repos","events_url":"https://api.github.com/users/ashishmgofficial/events{/privacy}","received_events_url":"https://api.github.com/users/ashishmgofficial/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T14:11:55Z","updated_at":"2020-09-08T14:11:55Z","author_association":"NONE","body":"@bvaradar  Im trying to do rollbacks and Savepoints through Hudi CLI in ver.0.6.0 . Im able to successfully create savepoints and rollback to the savepoint. But after rollback, when I execute `show rollbacks` command I get nothing. I believe it should return details about successful rollbacks right ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688903435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688918271","html_url":"https://github.com/apache/hudi/pull/1827#issuecomment-688918271","issue_url":"https://api.github.com/repos/apache/hudi/issues/1827","id":688918271,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODkxODI3MQ==","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T14:33:22Z","updated_at":"2020-09-13T20:47:07Z","author_association":"CONTRIBUTOR","body":"> One more pass.\r\n> \r\n> @wangxianghu do the tests pass locally? 50 min is the travis limit, if its consistently exceeding that limit, we need to understand why and fix it. I can help unblock once you help me with the details.\r\n> \r\n> @wangxianghu can you confirm that there are no logic changes in this PR? High level it seems ok to me. Hardest/time consuming part of the review is actually, comparing line by line for any changes in the base/child classes everywhere. If you can give me some guidance, I can finish the review quickly\r\n\r\nHi @vinothchandar, there are no logic changes in this PR, just as you said purely refactoring and templatizing.\r\nThe unit test in my local is ok.\r\nI'll give a list of the methods moved between base/child classes.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688918271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688954187","html_url":"https://github.com/apache/hudi/pull/2012#issuecomment-688954187","issue_url":"https://api.github.com/repos/apache/hudi/issues/2012","id":688954187,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODk1NDE4Nw==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T15:27:03Z","updated_at":"2020-09-08T15:27:03Z","author_association":"CONTRIBUTOR","body":"@sathyaprakashg Thanks for looking into this. I see that the `org.apache.spark.sql.avro.SchemaConverters` uses the `fixed` name so it's difficult to workaround it. Your approach sounds fine to me as long as it does not break any existing tests.  Left a couple of comments for changes.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688954187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688979127","html_url":"https://github.com/apache/hudi/issues/2072#issuecomment-688979127","issue_url":"https://api.github.com/repos/apache/hudi/issues/2072","id":688979127,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODk3OTEyNw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T16:05:20Z","updated_at":"2020-09-08T16:05:20Z","author_association":"CONTRIBUTOR","body":"Try running refresh CLI command and then call show rollbacks ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/688979127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689043555","html_url":"https://github.com/apache/hudi/pull/1978#issuecomment-689043555","issue_url":"https://api.github.com/repos/apache/hudi/issues/1978","id":689043555,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA0MzU1NQ==","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:01:20Z","updated_at":"2020-09-08T18:01:20Z","author_association":"CONTRIBUTOR","body":"@hj2016 : can you fix the build failure.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689043555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689053835","html_url":"https://github.com/apache/hudi/pull/1984#issuecomment-689053835","issue_url":"https://api.github.com/repos/apache/hudi/issues/1984","id":689053835,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA1MzgzNQ==","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:21:58Z","updated_at":"2020-09-08T18:21:58Z","author_association":"CONTRIBUTOR","body":"> @pratyakshsharma I would like to get this into 0.6.1 if possible. please prioritize accordingly\r\n\r\nChecking this. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689053835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689064559","html_url":"https://github.com/apache/hudi/issues/2068#issuecomment-689064559","issue_url":"https://api.github.com/repos/apache/hudi/issues/2068","id":689064559,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA2NDU1OQ==","user":{"login":"bradleyhurley","id":7111357,"node_id":"MDQ6VXNlcjcxMTEzNTc=","avatar_url":"https://avatars.githubusercontent.com/u/7111357?v=4","gravatar_id":"","url":"https://api.github.com/users/bradleyhurley","html_url":"https://github.com/bradleyhurley","followers_url":"https://api.github.com/users/bradleyhurley/followers","following_url":"https://api.github.com/users/bradleyhurley/following{/other_user}","gists_url":"https://api.github.com/users/bradleyhurley/gists{/gist_id}","starred_url":"https://api.github.com/users/bradleyhurley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bradleyhurley/subscriptions","organizations_url":"https://api.github.com/users/bradleyhurley/orgs","repos_url":"https://api.github.com/users/bradleyhurley/repos","events_url":"https://api.github.com/users/bradleyhurley/events{/privacy}","received_events_url":"https://api.github.com/users/bradleyhurley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:42:34Z","updated_at":"2020-09-08T18:42:34Z","author_association":"NONE","body":"I made some tweaks and was able to get the job to complete.\r\n\r\n- Executor Cores = 1\r\n- Executors = 300\r\n- Driver Memory = 4G\r\n- Executor Memory = 6G\r\n- spark.kryoserializer.buffer.max=512m \r\n\r\nI am still spilling to disk, but am unsure if thats the area I should focus my tuning efforts.\r\n\r\n![10_23_9_26](https://user-images.githubusercontent.com/7111357/92514833-9865d400-f1e0-11ea-9ef2-b0289ed27af1.png)\r\n\r\n**Stage 13 Details - 1.5 Hours**\r\n\r\n![Stage_13](https://user-images.githubusercontent.com/7111357/92515136-19bd6680-f1e1-11ea-8479-9701e43b391b.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689064559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689170277","html_url":"https://github.com/apache/hudi/issues/2076#issuecomment-689170277","issue_url":"https://api.github.com/repos/apache/hudi/issues/2076","id":689170277,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTE3MDI3Nw==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T22:31:41Z","updated_at":"2020-09-08T22:31:41Z","author_association":"CONTRIBUTOR","body":"@Yogashri12 : It does not make sense to have different types deduced for the same column. If you want such mismatch partition-types to be inserted, you can simply cast the partition column in input dataframe as StringType and try ingesting.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689170277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689173851","html_url":"https://github.com/apache/hudi/issues/2020#issuecomment-689173851","issue_url":"https://api.github.com/repos/apache/hudi/issues/2020","id":689173851,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTE3Mzg1MQ==","user":{"login":"bvaradar","id":3021376,"node_id":"MDQ6VXNlcjMwMjEzNzY=","avatar_url":"https://avatars.githubusercontent.com/u/3021376?v=4","gravatar_id":"","url":"https://api.github.com/users/bvaradar","html_url":"https://github.com/bvaradar","followers_url":"https://api.github.com/users/bvaradar/followers","following_url":"https://api.github.com/users/bvaradar/following{/other_user}","gists_url":"https://api.github.com/users/bvaradar/gists{/gist_id}","starred_url":"https://api.github.com/users/bvaradar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bvaradar/subscriptions","organizations_url":"https://api.github.com/users/bvaradar/orgs","repos_url":"https://api.github.com/users/bvaradar/repos","events_url":"https://api.github.com/users/bvaradar/events{/privacy}","received_events_url":"https://api.github.com/users/bvaradar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T22:41:38Z","updated_at":"2020-09-08T22:41:38Z","author_association":"CONTRIBUTOR","body":"@zherenyu831  @dm-tran : Good catch about incremental timeline syncing. This is an experimental feature still and is disabled by default. There could be a bug here. I will investigate further and have raised a blocker for next release : https://issues.apache.org/jira/browse/HUDI-1275\r\n\r\nPlease set this property to false for now. Also, Please use \"compaction unschedule\" CLI command to revert compactions. Deleting inflight/requested compaction files is not safe. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689173851/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689299100","html_url":"https://github.com/apache/hudi/issues/2066#issuecomment-689299100","issue_url":"https://api.github.com/repos/apache/hudi/issues/2066","id":689299100,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTI5OTEwMA==","user":{"login":"n3nash","id":2722167,"node_id":"MDQ6VXNlcjI3MjIxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/2722167?v=4","gravatar_id":"","url":"https://api.github.com/users/n3nash","html_url":"https://github.com/n3nash","followers_url":"https://api.github.com/users/n3nash/followers","following_url":"https://api.github.com/users/n3nash/following{/other_user}","gists_url":"https://api.github.com/users/n3nash/gists{/gist_id}","starred_url":"https://api.github.com/users/n3nash/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/n3nash/subscriptions","organizations_url":"https://api.github.com/users/n3nash/orgs","repos_url":"https://api.github.com/users/n3nash/repos","events_url":"https://api.github.com/users/n3nash/events{/privacy}","received_events_url":"https://api.github.com/users/n3nash/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-09T04:46:42Z","updated_at":"2020-09-09T04:46:42Z","author_association":"CONTRIBUTOR","body":"@KarthickAN Making hoodie_record_key virtual is actively being worked on. There will be an initial implementation in the next few weeks and you might be able to try it out as an WIP feature. @modi95 can you add more details on your progress here please ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/689299100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]