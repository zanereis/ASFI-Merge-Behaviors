[{"url":"https://api.github.com/repos/apache/druid/issues/comments/277496194","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-277496194","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":277496194,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzQ5NjE5NA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T04:09:56Z","updated_at":"2017-02-05T04:10:49Z","author_association":"MEMBER","body":"@leerho thanks.\r\n\r\nI made some benchmarks, which are similar to Druid's TopN double aggregations: https://github.com/leventov/zero-cost-memory\r\n\r\n```\r\nBenchmark                                             (alloc)  Mode  Cnt   Score   Error  Units\r\nZeroCostMemoryBenchmark.processByteBuffer              direct  avgt    5   4.648 ± 0.106  ns/op\r\nZeroCostMemoryBenchmark.processByteBuffer                heap  avgt    5  15.783 ± 0.504  ns/op\r\nZeroCostMemoryBenchmark.processNoOffsetMemory          direct  avgt    5   3.004 ± 0.017  ns/op\r\nZeroCostMemoryBenchmark.processNoOffsetMemory            heap  avgt    5   2.988 ± 0.092  ns/op\r\nZeroCostMemoryBenchmark.processNoOffsetTwoImplMemory   direct  avgt    5   2.991 ± 0.088  ns/op\r\nZeroCostMemoryBenchmark.processNoOffsetTwoImplMemory     heap  avgt    5   3.009 ± 0.138  ns/op\r\nZeroCostMemoryBenchmark.processTwoFinalOffsetMemory    direct  avgt    5   3.675 ± 0.103  ns/op\r\nZeroCostMemoryBenchmark.processTwoFinalOffsetMemory      heap  avgt    5   3.700 ± 0.164  ns/op\r\nZeroCostMemoryBenchmark.processTwoOffsetMemory         direct  avgt    5   3.696 ± 0.116  ns/op\r\nZeroCostMemoryBenchmark.processTwoOffsetMemory           heap  avgt    5   3.704 ± 0.130  ns/op\r\n```\r\n\r\nQuick takeaways:\r\n - [Having no Memory-internal offsets](https://github.com/druid-io/druid/issues/3892#issuecomment-276833148) makes difference - it's faster.\r\n - Making fields final doesn't make any difference.\r\n - Separating \"direct\" and \"heap\" impl doesn't make difference.\r\n\r\nWill investigate assembly and verify results later.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277496194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277496689","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-277496689","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":277496689,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzQ5NjY4OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T04:25:06Z","updated_at":"2017-02-05T04:30:18Z","author_association":"MEMBER","body":"@leerho \r\n\r\none-offset memory is as good as no-offset:\r\n```\r\nZeroCostMemoryBenchmark.processOneOffsetMemory   direct  avgt    5  3.008 ± 0.087  ns/op\r\nZeroCostMemoryBenchmark.processOneOffsetMemory     heap  avgt    5  3.017 ± 0.165  ns/op\r\n```\r\n\r\nGiven this, and that moving from 0-indexed ByteBuffers to no-offset `Memory` (`start()`-indexed) is risky because requires to change carefully a lot of code, while moving to 0-indexed `Memory` is very straightforward (almost find-replace), I suggest to implement `Memory` with a single internal offset field.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277496689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277517522","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277517522","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277517522,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzUxNzUyMg==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T12:45:40Z","updated_at":"2017-02-05T12:45:40Z","author_association":"MEMBER","body":"LGTM, with the changes for decorate. @fjy Can you also review ? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277517522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277517753","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277517753","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277517753,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzUxNzc1Mw==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T12:50:00Z","updated_at":"2017-02-05T12:50:00Z","author_association":"MEMBER","body":"updated the master comment to change finalFieldAccess ->  finalizingFieldAccess","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277517753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277518094","html_url":"https://github.com/apache/druid/pull/2767#issuecomment-277518094","issue_url":"https://api.github.com/repos/apache/druid/issues/2767","id":277518094,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzUxODA5NA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T12:56:25Z","updated_at":"2017-02-05T12:56:25Z","author_association":"MEMBER","body":"@navis: can you fix conflicts ? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277518094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277525795","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277525795","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277525795,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzUyNTc5NQ==","user":{"login":"tutunci","id":400177,"node_id":"MDQ6VXNlcjQwMDE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/400177?v=4","gravatar_id":"","url":"https://api.github.com/users/tutunci","html_url":"https://github.com/tutunci","followers_url":"https://api.github.com/users/tutunci/followers","following_url":"https://api.github.com/users/tutunci/following{/other_user}","gists_url":"https://api.github.com/users/tutunci/gists{/gist_id}","starred_url":"https://api.github.com/users/tutunci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tutunci/subscriptions","organizations_url":"https://api.github.com/users/tutunci/orgs","repos_url":"https://api.github.com/users/tutunci/repos","events_url":"https://api.github.com/users/tutunci/events{/privacy}","received_events_url":"https://api.github.com/users/tutunci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T15:12:24Z","updated_at":"2017-02-05T15:12:24Z","author_association":"NONE","body":"Hi Dongkyu,\nI'm interested in your implementation as I've tricked current http metric\nemitter.\nWhat I've currently done is an http server in Go lang that receives http\nemitter.\nIt parses messages and put events into a Kafka topic.\nMain issue is that some of the events has multiple informational like JVM\ndata or System ones, so I've set generic fields for Druid datasource as\nuser1 user2 an so on.\n\nA suggestion is about having a configuration file which set events that can\nbe set into Kafka and which not. This is what I've set in my http server,\navoiding to have unwanted metrics.\n\nAbout alerts what I've done is generating an email and a Slack notification\nwith the error details.\n\nMainly I use the standard event metrics to monitor Druid through Grafana\ncharts and alerts as immediate notifications (this is why I didn't put into\nKafka).\n\nHope I helps in your implementation\n\nThanks\nMaurizio\n\nIl 05 feb 2017 3:07 AM, \"Dongkyu Hwangbo\" <notifications@github.com> ha\nscritto:\n\n> <https://github.com/pjain1>\n\n> @pjain1 <https://github.com/pjain1> Oh, I got it. Thanks for your nice\nexplanation. I'll add the code line to handle AlertEvent in another kafka\ntopic. I'll ping you when I ready for review.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n<https://github.com/druid-io/druid/pull/3860#issuecomment-277492212>, or\nmute the thread\n<https://github.com/notifications/unsubscribe-auth/AAYbMSDRWAPh4d9vr2Rne85JTXdqQMXMks5rZS7fgaJpZM4LnmVX>\n.\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277525795/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277527790","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277527790","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277527790,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzUyNzc5MA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T15:45:45Z","updated_at":"2017-02-05T15:45:45Z","author_association":"CONTRIBUTOR","body":"Incompatibilities need called out in the master comment, please","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277527790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277556224","html_url":"https://github.com/apache/druid/pull/3850#issuecomment-277556224","issue_url":"https://api.github.com/repos/apache/druid/issues/3850","id":277556224,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU1NjIyNA==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T22:42:46Z","updated_at":"2017-02-05T22:42:46Z","author_association":"MEMBER","body":"generally LGTM. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277556224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277557063","html_url":"https://github.com/apache/druid/pull/3446#issuecomment-277557063","issue_url":"https://api.github.com/repos/apache/druid/issues/3446","id":277557063,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU1NzA2Mw==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T22:55:00Z","updated_at":"2017-02-05T22:55:00Z","author_association":"MEMBER","body":"closing this as its duplicate https://github.com/druid-io/druid/pull/3399 has been merged. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277557063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277557341","html_url":"https://github.com/apache/druid/pull/3379#issuecomment-277557341","issue_url":"https://api.github.com/repos/apache/druid/issues/3379","id":277557341,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU1NzM0MQ==","user":{"login":"nishantmonu51","id":5023786,"node_id":"MDQ6VXNlcjUwMjM3ODY=","avatar_url":"https://avatars.githubusercontent.com/u/5023786?v=4","gravatar_id":"","url":"https://api.github.com/users/nishantmonu51","html_url":"https://github.com/nishantmonu51","followers_url":"https://api.github.com/users/nishantmonu51/followers","following_url":"https://api.github.com/users/nishantmonu51/following{/other_user}","gists_url":"https://api.github.com/users/nishantmonu51/gists{/gist_id}","starred_url":"https://api.github.com/users/nishantmonu51/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nishantmonu51/subscriptions","organizations_url":"https://api.github.com/users/nishantmonu51/orgs","repos_url":"https://api.github.com/users/nishantmonu51/repos","events_url":"https://api.github.com/users/nishantmonu51/events{/privacy}","received_events_url":"https://api.github.com/users/nishantmonu51/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-05T22:58:58Z","updated_at":"2017-02-05T22:58:58Z","author_association":"MEMBER","body":"@jianran: could you elaborate the bug/issue you are trying to fix here in the description. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277557341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277561855","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277561855","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277561855,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU2MTg1NQ==","user":{"login":"dkhwangbo","id":13585249,"node_id":"MDQ6VXNlcjEzNTg1MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/13585249?v=4","gravatar_id":"","url":"https://api.github.com/users/dkhwangbo","html_url":"https://github.com/dkhwangbo","followers_url":"https://api.github.com/users/dkhwangbo/followers","following_url":"https://api.github.com/users/dkhwangbo/following{/other_user}","gists_url":"https://api.github.com/users/dkhwangbo/gists{/gist_id}","starred_url":"https://api.github.com/users/dkhwangbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkhwangbo/subscriptions","organizations_url":"https://api.github.com/users/dkhwangbo/orgs","repos_url":"https://api.github.com/users/dkhwangbo/repos","events_url":"https://api.github.com/users/dkhwangbo/events{/privacy}","received_events_url":"https://api.github.com/users/dkhwangbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T00:13:05Z","updated_at":"2017-02-06T00:13:05Z","author_association":"CONTRIBUTOR","body":"@tutunci Hi Maurizio. Thanks for your interesting suggestion. I understand your point. In fact, I use this extension with another my own Spark streaming job. It can consume Kafka topic, metric-value-based anomaly detect, and send the metric to my timeseries DB. I think your idea also reasonable, so I'll add something like whitelist based logic.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277561855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277570577","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277570577","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277570577,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU3MDU3Nw==","user":{"login":"dkhwangbo","id":13585249,"node_id":"MDQ6VXNlcjEzNTg1MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/13585249?v=4","gravatar_id":"","url":"https://api.github.com/users/dkhwangbo","html_url":"https://github.com/dkhwangbo","followers_url":"https://api.github.com/users/dkhwangbo/followers","following_url":"https://api.github.com/users/dkhwangbo/following{/other_user}","gists_url":"https://api.github.com/users/dkhwangbo/gists{/gist_id}","starred_url":"https://api.github.com/users/dkhwangbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkhwangbo/subscriptions","organizations_url":"https://api.github.com/users/dkhwangbo/orgs","repos_url":"https://api.github.com/users/dkhwangbo/repos","events_url":"https://api.github.com/users/dkhwangbo/events{/privacy}","received_events_url":"https://api.github.com/users/dkhwangbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T02:01:50Z","updated_at":"2017-02-06T02:01:50Z","author_association":"CONTRIBUTOR","body":"@tutunci Hi Maurizio. Your suggestion is under construction by me, but I think origin purpose of this PR is already done. So, I think It is better finishing this PR in here and handle your suggestion in another PR. Is it Okay?\r\n@pjain1 It's ready for your review.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277570577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277594812","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-277594812","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":277594812,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzU5NDgxMg==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T06:15:20Z","updated_at":"2017-02-06T06:15:20Z","author_association":"CONTRIBUTOR","body":"Interesting.  I'm ready to turn in for the night, but I did a lot of thinking about this this weekend. Also I have some benchmarks I have created as well.  I need to do some updates and will share them with u tomorrow.  ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277594812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277622676","html_url":"https://github.com/apache/druid/pull/3908#issuecomment-277622676","issue_url":"https://api.github.com/repos/apache/druid/issues/3908","id":277622676,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzYyMjY3Ng==","user":{"login":"DaimonPl","id":9693936,"node_id":"MDQ6VXNlcjk2OTM5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9693936?v=4","gravatar_id":"","url":"https://api.github.com/users/DaimonPl","html_url":"https://github.com/DaimonPl","followers_url":"https://api.github.com/users/DaimonPl/followers","following_url":"https://api.github.com/users/DaimonPl/following{/other_user}","gists_url":"https://api.github.com/users/DaimonPl/gists{/gist_id}","starred_url":"https://api.github.com/users/DaimonPl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaimonPl/subscriptions","organizations_url":"https://api.github.com/users/DaimonPl/orgs","repos_url":"https://api.github.com/users/DaimonPl/repos","events_url":"https://api.github.com/users/DaimonPl/events{/privacy}","received_events_url":"https://api.github.com/users/DaimonPl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T09:08:53Z","updated_at":"2017-02-06T09:08:53Z","author_association":"CONTRIBUTOR","body":"Closing because of git problems :(","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277622676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277695672","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277695672","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277695672,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzY5NTY3Mg==","user":{"login":"tutunci","id":400177,"node_id":"MDQ6VXNlcjQwMDE3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/400177?v=4","gravatar_id":"","url":"https://api.github.com/users/tutunci","html_url":"https://github.com/tutunci","followers_url":"https://api.github.com/users/tutunci/followers","following_url":"https://api.github.com/users/tutunci/following{/other_user}","gists_url":"https://api.github.com/users/tutunci/gists{/gist_id}","starred_url":"https://api.github.com/users/tutunci/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tutunci/subscriptions","organizations_url":"https://api.github.com/users/tutunci/orgs","repos_url":"https://api.github.com/users/tutunci/repos","events_url":"https://api.github.com/users/tutunci/events{/privacy}","received_events_url":"https://api.github.com/users/tutunci/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T14:22:44Z","updated_at":"2017-02-06T14:22:44Z","author_association":"NONE","body":"Hi Dongkyu,\nIt's absolutely OK, of course.\n\nJust to give you some additional details, here my configuration file:\n\nenabled=sys/disk/write/count||all\nenabled=jvm/mem/max|memKind|all\nenabled=jvm/mem/committed|memKind|all\nenabled=jvm/mem/used|memKind|all\nenabled=jvm/mem/init|memKind|all\nenabled=jvm/pool/max|poolKind,poolName|all\nenabled=jvm/pool/committed|poolKind,poolName|all\nenabled=jvm/pool/used|poolKind,poolName|all\nenabled=jvm/pool/init|poolKind,poolName|all\nenabled=segment/loadQueue/size|server|druid:aws:coordinator\nenabled=segment/loadQueue/failed|server|druid:aws:coordinator\nenabled=segment/loadQueue/count|server|druid:aws:coordinator\nenabled=query/cache/total/hitRate||druid:aws:broker,druid:aws:historical\nenabled=query/cache/total/averageBytes||druid:aws:broker,druid:aws:historical\nenabled=query/cache/total/timeouts||druid:aws:broker,druid:aws:historical\nenabled=query/cache/total/errors||druid:aws:broker,druid:aws:historical\n\nHere what's setup is\nmetric | additional params to set as user1,user2... | services involved\n\nSo for example when I receive these metrics:\n{\"feed\":\"metrics\",\"host\":\"10.80.4.154:8083\",\"metric\":\"*jvm/pool/init*\",\"\n*poolKind*\":\"heap\",\"*poolName*\":\"PS Survivor Space\",\"service\":\"\n*druid:aws:realtime*\n\",\"timestamp\":\"2017-02-05T23:59:54.891-05:00\",\"value\":268435456}\n{\"feed\":\"metrics\",\"host\":\"10.80.4.154:8083\",\"metric\":\"jvm/pool/max\",\"poolKind\":\"heap\",\"poolName\":\"PS\nOld\nGen\",\"service\":\"druid:aws:realtime\",\"timestamp\":\"2017-02-05T23:59:54.891-05:00\",\"value\":10737418240}\n\nIt matches with this condition enabled=jvm/pool/init|poolKind,poolName|all\nbecause metric matches, services are all and additional user-defined fields\nare poolKind=>user1 and poolName=>user2 (it's positional based on the\ninsert order).\n\n\nHope it can give you some kind of help.\n\nLet me know if you create another PR, so I can follow it.\n\nThanks\nMaurizio\n\n\n2017-02-06 3:01 GMT+01:00 Dongkyu Hwangbo <notifications@github.com>:\n\n> @tutunci <https://github.com/tutunci> Hi Maurizio. Your suggestion is\n> under construction by me, but I think origin purpose of this PR is already\n> done. So, I think It is better finishing this PR in here and handle your\n> suggestion in another PR. Is it Okay?\n> @pjain1 <https://github.com/pjain1> It's ready for your review.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/druid-io/druid/pull/3860#issuecomment-277570577>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAYbMbAFNwJmyWDVrTOJEtjEFGdJ3nouks5rZn8QgaJpZM4LnmVX>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277695672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277756361","html_url":"https://github.com/apache/druid/pull/3850#issuecomment-277756361","issue_url":"https://api.github.com/repos/apache/druid/issues/3850","id":277756361,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc1NjM2MQ==","user":{"login":"praveev","id":297278,"node_id":"MDQ6VXNlcjI5NzI3OA==","avatar_url":"https://avatars.githubusercontent.com/u/297278?v=4","gravatar_id":"","url":"https://api.github.com/users/praveev","html_url":"https://github.com/praveev","followers_url":"https://api.github.com/users/praveev/followers","following_url":"https://api.github.com/users/praveev/following{/other_user}","gists_url":"https://api.github.com/users/praveev/gists{/gist_id}","starred_url":"https://api.github.com/users/praveev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/praveev/subscriptions","organizations_url":"https://api.github.com/users/praveev/orgs","repos_url":"https://api.github.com/users/praveev/repos","events_url":"https://api.github.com/users/praveev/events{/privacy}","received_events_url":"https://api.github.com/users/praveev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T17:42:23Z","updated_at":"2017-02-06T17:42:23Z","author_association":"CONTRIBUTOR","body":"Thanks @nishantmonu51 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277756361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277760540","html_url":"https://github.com/apache/druid/pull/3877#issuecomment-277760540","issue_url":"https://api.github.com/repos/apache/druid/issues/3877","id":277760540,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc2MDU0MA==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T17:56:59Z","updated_at":"2017-02-06T17:56:59Z","author_association":"CONTRIBUTOR","body":"Thanks @nishantmonu51. Updated DataSegmentPusherUtil.getHdfsStorageDir() to reuse  getHdfsStorageDirUpToVersion().","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277760540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277770712","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277770712","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277770712,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc3MDcxMg==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T18:32:27Z","updated_at":"2017-02-06T18:32:27Z","author_association":"MEMBER","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277770712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277780525","html_url":"https://github.com/apache/druid/pull/3850#issuecomment-277780525","issue_url":"https://api.github.com/repos/apache/druid/issues/3850","id":277780525,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc4MDUyNQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T19:08:17Z","updated_at":"2017-02-06T19:08:17Z","author_association":"MEMBER","body":"I want to review this PR before the end of this week. Please don't merge before.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277780525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277782310","html_url":"https://github.com/apache/druid/pull/3848#issuecomment-277782310","issue_url":"https://api.github.com/repos/apache/druid/issues/3848","id":277782310,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc4MjMxMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T19:15:01Z","updated_at":"2017-02-06T19:15:01Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277782310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277783471","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277783471","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277783471,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc4MzQ3MQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T19:19:13Z","updated_at":"2017-02-06T19:19:13Z","author_association":"CONTRIBUTOR","body":"@tutunci have you seen this https://github.com/yahoo/druid-extensions/tree/master/metric_collector might be helpful ?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277783471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277784591","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-277784591","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":277784591,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzc4NDU5MQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T19:23:05Z","updated_at":"2017-02-06T19:23:05Z","author_association":"CONTRIBUTOR","body":"@dkhwangbo i have raised this issue https://github.com/druid-io/druid/pull/3860#pullrequestreview-19666260 and still see the same problem. emit should never be blocking.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277784591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277814117","html_url":"https://github.com/apache/druid/pull/3910#issuecomment-277814117","issue_url":"https://api.github.com/repos/apache/druid/issues/3910","id":277814117,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgxNDExNw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T21:09:17Z","updated_at":"2017-02-06T21:09:17Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277814117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277815013","html_url":"https://github.com/apache/druid/pull/3870#issuecomment-277815013","issue_url":"https://api.github.com/repos/apache/druid/issues/3870","id":277815013,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgxNTAxMw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T21:12:59Z","updated_at":"2017-02-06T21:12:59Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277815013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277815906","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-277815906","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":277815906,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgxNTkwNg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T21:16:18Z","updated_at":"2017-02-06T21:16:18Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277815906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277828100","html_url":"https://github.com/apache/druid/pull/3903#issuecomment-277828100","issue_url":"https://api.github.com/repos/apache/druid/issues/3903","id":277828100,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzgyODEwMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T22:01:06Z","updated_at":"2017-02-06T22:01:06Z","author_association":"CONTRIBUTOR","body":"@michaelschiff, one of the tests tripped up due to the positional string formatting situation described above.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277828100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277854245","html_url":"https://github.com/apache/druid/pull/3913#issuecomment-277854245","issue_url":"https://api.github.com/repos/apache/druid/issues/3913","id":277854245,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg1NDI0NQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T23:58:45Z","updated_at":"2017-02-06T23:58:45Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277854245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277854276","html_url":"https://github.com/apache/druid/pull/3912#issuecomment-277854276","issue_url":"https://api.github.com/repos/apache/druid/issues/3912","id":277854276,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg1NDI3Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-06T23:58:58Z","updated_at":"2017-02-06T23:58:58Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277854276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277863231","html_url":"https://github.com/apache/druid/pull/3889#issuecomment-277863231","issue_url":"https://api.github.com/repos/apache/druid/issues/3889","id":277863231,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg2MzIzMQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T00:46:52Z","updated_at":"2017-02-07T00:46:52Z","author_association":"MEMBER","body":"@jeffs thanks for review. Also regarding `@CalledFromHotLoop` - decided to annotate only interface methods, not implementation methods, because IntelliJ doesn't copy the annotation automatically and it's too tedious to insert it manually everywhere.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277863231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277865372","html_url":"https://github.com/apache/druid/pull/3913#issuecomment-277865372","issue_url":"https://api.github.com/repos/apache/druid/issues/3913","id":277865372,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg2NTM3Mg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T00:57:36Z","updated_at":"2017-02-07T00:57:36Z","author_association":"CONTRIBUTOR","body":"I forget exactly where this was discussed, but I remember it was. @gianm  before merge can you amend the parent comment on where the discussion on 0.10.0 took place?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277865372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277865922","html_url":"https://github.com/apache/druid/pull/3902#issuecomment-277865922","issue_url":"https://api.github.com/repos/apache/druid/issues/3902","id":277865922,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg2NTkyMg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T00:59:40Z","updated_at":"2017-02-07T00:59:40Z","author_association":"CONTRIBUTOR","body":"Related https://github.com/druid-io/druid/pull/2368","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277865922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277871324","html_url":"https://github.com/apache/druid/pull/3913#issuecomment-277871324","issue_url":"https://api.github.com/repos/apache/druid/issues/3913","id":277871324,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg3MTMyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T01:22:21Z","updated_at":"2017-02-07T01:22:21Z","author_association":"CONTRIBUTOR","body":"It was in a dev sync: https://groups.google.com/d/topic/druid-development/HzqltTKdZOE/discussion","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277871324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277878871","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277878871","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277878871,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg3ODg3MQ==","user":{"login":"jaehc","id":7674735,"node_id":"MDQ6VXNlcjc2NzQ3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/7674735?v=4","gravatar_id":"","url":"https://api.github.com/users/jaehc","html_url":"https://github.com/jaehc","followers_url":"https://api.github.com/users/jaehc/followers","following_url":"https://api.github.com/users/jaehc/following{/other_user}","gists_url":"https://api.github.com/users/jaehc/gists{/gist_id}","starred_url":"https://api.github.com/users/jaehc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaehc/subscriptions","organizations_url":"https://api.github.com/users/jaehc/orgs","repos_url":"https://api.github.com/users/jaehc/repos","events_url":"https://api.github.com/users/jaehc/events{/privacy}","received_events_url":"https://api.github.com/users/jaehc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T02:05:43Z","updated_at":"2017-02-07T02:05:43Z","author_association":"CONTRIBUTOR","body":"@nishantmonu51 Thanks for giving a review. Is there somethign I need to handle about this PR? By the way, what is `the master comment` you mentioned? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277878871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277880265","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277880265","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277880265,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg4MDI2NQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T02:14:38Z","updated_at":"2017-02-07T02:14:38Z","author_association":"CONTRIBUTOR","body":"@jaehc master comment is the top comment in the issue at https://github.com/druid-io/druid/pull/2883#issue-151098098 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277880265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277886195","html_url":"https://github.com/apache/druid/pull/3889#issuecomment-277886195","issue_url":"https://api.github.com/repos/apache/druid/issues/3889","id":277886195,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg4NjE5NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T02:53:33Z","updated_at":"2017-02-07T02:53:33Z","author_association":"MEMBER","body":"Going to add some tests.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277886195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277887256","html_url":"https://github.com/apache/druid/pull/3883#issuecomment-277887256","issue_url":"https://api.github.com/repos/apache/druid/issues/3883","id":277887256,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg4NzI1Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T03:00:11Z","updated_at":"2017-02-07T03:00:11Z","author_association":"MEMBER","body":"@gianm thanks for review. Replaced comments with assertions.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277887256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277890622","html_url":"https://github.com/apache/druid/pull/2883#issuecomment-277890622","issue_url":"https://api.github.com/repos/apache/druid/issues/2883","id":277890622,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Nzg5MDYyMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T03:23:22Z","updated_at":"2017-02-07T03:23:22Z","author_association":"CONTRIBUTOR","body":"Taking a look.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277890622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277909043","html_url":"https://github.com/apache/druid/pull/3910#issuecomment-277909043","issue_url":"https://api.github.com/repos/apache/druid/issues/3910","id":277909043,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzkwOTA0Mw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T05:58:10Z","updated_at":"2017-02-07T05:58:10Z","author_association":"CONTRIBUTOR","body":"thx @leventov, pushed an update.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277909043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/277923944","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-277923944","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":277923944,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NzkyMzk0NA==","user":{"login":"DaimonPl","id":9693936,"node_id":"MDQ6VXNlcjk2OTM5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9693936?v=4","gravatar_id":"","url":"https://api.github.com/users/DaimonPl","html_url":"https://github.com/DaimonPl","followers_url":"https://api.github.com/users/DaimonPl/followers","following_url":"https://api.github.com/users/DaimonPl/following{/other_user}","gists_url":"https://api.github.com/users/DaimonPl/gists{/gist_id}","starred_url":"https://api.github.com/users/DaimonPl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaimonPl/subscriptions","organizations_url":"https://api.github.com/users/DaimonPl/orgs","repos_url":"https://api.github.com/users/DaimonPl/repos","events_url":"https://api.github.com/users/DaimonPl/events{/privacy}","received_events_url":"https://api.github.com/users/DaimonPl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T07:42:18Z","updated_at":"2017-02-07T07:42:18Z","author_association":"CONTRIBUTOR","body":"Regarding motivation behind removing hash function from serde itself. I saw 2 problems:\r\n\r\n1. (existed before my changes) from my understanding HLL cardinality estimation is based on hashes so if someone changes hashing algorithm then estimation between old-hashed and new-hashed values will be incorrect. In other words if druid changes hashing algorithm between versions older datasources won't be able to properly estimate values for old and new data together. Thus in my opinion hashing algorithm should be constant\r\n\r\n2. (occurs after my changes) if we allow aggregation of pre-computed HLLs we should expect situation when someone changes aggregation of existing datasource from using isInputHyperUnique=false to isInputHyperUnique=true. In that case both old and new HLLs need to use exactly hashing algorithm and exactly same String to byte[] conversions (aka string encodings) because of reasons as in point \"1\"\r\n\r\nI also thought about making hashing versionable but this would not solve problems described above as we would still end up with differently hashed values. That's why i moved hashing code to hll package and made it constant.\r\n\r\nIf my understanding is wrong please let me know and how to correct code :)\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/277923944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278031347","html_url":"https://github.com/apache/druid/pull/3910#issuecomment-278031347","issue_url":"https://api.github.com/repos/apache/druid/issues/3910","id":278031347,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODAzMTM0Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T15:20:07Z","updated_at":"2017-02-07T15:20:07Z","author_association":"CONTRIBUTOR","body":"I'll look at this patch soon.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278031347/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278091603","html_url":"https://github.com/apache/druid/pull/3850#issuecomment-278091603","issue_url":"https://api.github.com/repos/apache/druid/issues/3850","id":278091603,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA5MTYwMw==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:17:59Z","updated_at":"2017-02-07T18:17:59Z","author_association":"CONTRIBUTOR","body":"Note, we are running this in production.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278091603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278096895","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-278096895","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":278096895,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA5Njg5NQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:33:49Z","updated_at":"2017-02-07T18:33:49Z","author_association":"CONTRIBUTOR","body":"this was discussed again today and still concluded to go ahead and disable javascript by default. @fjy @gianm ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278096895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278097329","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-278097329","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":278097329,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA5NzMyOQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:35:05Z","updated_at":"2017-02-07T18:35:05Z","author_association":"CONTRIBUTOR","body":"@jon-wei @gianm @fjy @cheddar it was discussed in the dev sync today and conclusion was to keep `beOverlord:true` by default","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278097329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278097847","html_url":"https://github.com/apache/druid/pull/2660#issuecomment-278097847","issue_url":"https://api.github.com/repos/apache/druid/issues/2660","id":278097847,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODA5Nzg0Nw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:36:41Z","updated_at":"2017-02-07T18:36:41Z","author_association":"CONTRIBUTOR","body":"this is being tested internally on some clusters and we will release new code to once some testing is done with off-heap quantiles sketches.\r\n\r\nkeeping this PR open in the meantime if someone wanted to give it a test ride.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278097847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278101741","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-278101741","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":278101741,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEwMTc0MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T18:48:36Z","updated_at":"2017-02-07T18:48:36Z","author_association":"CONTRIBUTOR","body":"@DaimonPl, you're right that the hashing algorithm can't just change at any time, because that would make merging older and newer HLLs impossible. But I think it still makes sense for it to be a parameter, for reasons of separation of concerns. There's no reason for the low level HLL code to have a particular hash function hard-coded. It makes sense for it to be something set up at the Druid server layer rather than the low-level `druid-hll` layer.\r\n\r\nAlso, not all HLL objects are long-lived. For example the cardinality aggregator creates them in the context of one query, so its hash function could change at any time and there would be no compatibility issues. Maybe that'd be worth doing if someone did some experimentation and found that another hash function gave better speed and/or accuracy.\r\n\r\nIf your main concern is making it easier for users of `druid-hll` to write HLLs compatible with Druid ingestion, how about keeping the hash function a parameter, but instead add a `HllHashing.defaultHashFunction()` method that returns the one that people should use for writing them to disk?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278101741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278121509","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-278121509","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":278121509,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEyMTUwOQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T19:57:28Z","updated_at":"2017-02-07T19:57:46Z","author_association":"CONTRIBUTOR","body":"Ok, that sounds fair @himanshug. One request I have is to edit the docs for the \"javascript\" things to point out that it's disabled by default, otherwise users might get confused when the things they read about in the docs don't work. One way to do this is to change the info note that is next to all the javascript things to something like:\r\n\r\n```\r\n<div class=\"note info\">\r\nJavaScript-based functionality is disabled by default. Please refer to the Druid\r\n<a href=\"../development/javascript.html\">JavaScript programming guide</a> for\r\nguidelines about using Druid's JavaScript functionality, including instructions on\r\nhow to enable it.\r\n</div>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278121509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278121732","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-278121732","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":278121732,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODEyMTczMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T19:58:18Z","updated_at":"2017-02-07T19:58:18Z","author_association":"CONTRIBUTOR","body":"If you search in the docs for \"JavaScript programming guide\" you should then find all the boxes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278121732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278169981","html_url":"https://github.com/apache/druid/pull/3838#issuecomment-278169981","issue_url":"https://api.github.com/repos/apache/druid/issues/3838","id":278169981,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE2OTk4MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-07T22:50:45Z","updated_at":"2017-02-07T22:50:45Z","author_association":"CONTRIBUTOR","body":"@jon-wei please also update documentations:\r\n\r\n- sql.md (the \"Unsupported features\" section)\r\n- dimensionspecs.md (add \"outputType\" to the extraction spec, and note where outputTypes are and are not supported out of the places that use dimension specs: topN, groupBy v1, groupBy v2, cardinality aggregator, search query, select query)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278169981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278187099","html_url":"https://github.com/apache/druid/pull/3910#issuecomment-278187099","issue_url":"https://api.github.com/repos/apache/druid/issues/3910","id":278187099,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODE4NzA5OQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T00:11:28Z","updated_at":"2017-02-08T00:11:28Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278187099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278223353","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278223353","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278223353,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODIyMzM1Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T04:02:46Z","updated_at":"2017-02-08T04:02:46Z","author_association":"CONTRIBUTOR","body":"@drcrallen, @gianm thanks for your review. I addressed comments.\r\nAdditionally, I added the below feature to CacheKeyBuilder.\r\n* When a collection is appended to CacheKeyBuilder, that collection is sorted by its items' byte representation. This is to guarantee that collections of same items but in different orders make the same result","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278223353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278235339","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-278235339","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":278235339,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODIzNTMzOQ==","user":{"login":"dkhwangbo","id":13585249,"node_id":"MDQ6VXNlcjEzNTg1MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/13585249?v=4","gravatar_id":"","url":"https://api.github.com/users/dkhwangbo","html_url":"https://github.com/dkhwangbo","followers_url":"https://api.github.com/users/dkhwangbo/followers","following_url":"https://api.github.com/users/dkhwangbo/following{/other_user}","gists_url":"https://api.github.com/users/dkhwangbo/gists{/gist_id}","starred_url":"https://api.github.com/users/dkhwangbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkhwangbo/subscriptions","organizations_url":"https://api.github.com/users/dkhwangbo/orgs","repos_url":"https://api.github.com/users/dkhwangbo/repos","events_url":"https://api.github.com/users/dkhwangbo/events{/privacy}","received_events_url":"https://api.github.com/users/dkhwangbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T05:47:02Z","updated_at":"2017-02-08T05:47:02Z","author_association":"CONTRIBUTOR","body":"@b-slim Hi. Is it going right direction? ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278235339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278242667","html_url":"https://github.com/apache/druid/pull/3863#issuecomment-278242667","issue_url":"https://api.github.com/repos/apache/druid/issues/3863","id":278242667,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI0MjY2Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T06:41:36Z","updated_at":"2017-02-08T06:41:36Z","author_association":"CONTRIBUTOR","body":"@gianm thanks for your review. I'll add tests to check the number of merge buffers used for group-by queries.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278242667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278272257","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-278272257","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":278272257,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODI3MjI1Nw==","user":{"login":"DaimonPl","id":9693936,"node_id":"MDQ6VXNlcjk2OTM5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9693936?v=4","gravatar_id":"","url":"https://api.github.com/users/DaimonPl","html_url":"https://github.com/DaimonPl","followers_url":"https://api.github.com/users/DaimonPl/followers","following_url":"https://api.github.com/users/DaimonPl/following{/other_user}","gists_url":"https://api.github.com/users/DaimonPl/gists{/gist_id}","starred_url":"https://api.github.com/users/DaimonPl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaimonPl/subscriptions","organizations_url":"https://api.github.com/users/DaimonPl/orgs","repos_url":"https://api.github.com/users/DaimonPl/repos","events_url":"https://api.github.com/users/DaimonPl/events{/privacy}","received_events_url":"https://api.github.com/users/DaimonPl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T09:11:55Z","updated_at":"2017-02-08T09:11:55Z","author_association":"CONTRIBUTOR","body":"Updated code. Instead of static utility `HllHasing` I've added `HyperLogLogHash` class which takes `HashFunction` as constructor argument. So this way:\r\n- `HyperUniquesSerde` can be parameterized with different `HashFunction` or whole `HyperLogLogHash`\r\n- there's `HyperLogLogHash.createDefault()` so both internal and external hashing can be consistent\r\n- `HyperLogLogHash` encapsulates `String` encoding so this is also consistent by default\r\n\r\nlet me know if now it's fine :)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278272257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278318747","html_url":"https://github.com/apache/druid/issues/2312#issuecomment-278318747","issue_url":"https://api.github.com/repos/apache/druid/issues/2312","id":278318747,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODMxODc0Nw==","user":{"login":"julienmathevet","id":1186969,"node_id":"MDQ6VXNlcjExODY5Njk=","avatar_url":"https://avatars.githubusercontent.com/u/1186969?v=4","gravatar_id":"","url":"https://api.github.com/users/julienmathevet","html_url":"https://github.com/julienmathevet","followers_url":"https://api.github.com/users/julienmathevet/followers","following_url":"https://api.github.com/users/julienmathevet/following{/other_user}","gists_url":"https://api.github.com/users/julienmathevet/gists{/gist_id}","starred_url":"https://api.github.com/users/julienmathevet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/julienmathevet/subscriptions","organizations_url":"https://api.github.com/users/julienmathevet/orgs","repos_url":"https://api.github.com/users/julienmathevet/repos","events_url":"https://api.github.com/users/julienmathevet/events{/privacy}","received_events_url":"https://api.github.com/users/julienmathevet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T12:41:17Z","updated_at":"2017-02-08T12:41:17Z","author_association":"NONE","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278318747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278348484","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-278348484","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":278348484,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM0ODQ4NA==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T14:48:26Z","updated_at":"2017-02-08T14:48:26Z","author_association":"CONTRIBUTOR","body":"@dkhwangbo yes that's good now user can inject config to the producer. Can you fix the the blocking issue please and thanks for the contribution?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278348484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278351111","html_url":"https://github.com/apache/druid/issues/2312#issuecomment-278351111","issue_url":"https://api.github.com/repos/apache/druid/issues/2312","id":278351111,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM1MTExMQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T14:58:00Z","updated_at":"2017-02-08T14:58:00Z","author_association":"CONTRIBUTOR","body":"I recently started working on this to let coordinators discover historicals and realtime nodes (its a TODO in https://github.com/druid-io/druid/pull/3902 ). I am looking into `copycat` and will see if we can use it now that we are gonna become java-8 only soonish.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278351111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278351950","html_url":"https://github.com/apache/druid/pull/3902#issuecomment-278351950","issue_url":"https://api.github.com/repos/apache/druid/issues/3902","id":278351950,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM1MTk1MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T15:00:54Z","updated_at":"2017-02-08T15:01:22Z","author_association":"CONTRIBUTOR","body":"removing the discovery of historical/realtime nodes from zookeeper is gonna relate with https://github.com/druid-io/druid/issues/2312 (as described in https://github.com/druid-io/druid/issues/2312#issuecomment-278351111 ) . I am looking into that and that would be done in a separate PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278351950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278359435","html_url":"https://github.com/apache/druid/pull/3860#issuecomment-278359435","issue_url":"https://api.github.com/repos/apache/druid/issues/3860","id":278359435,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODM1OTQzNQ==","user":{"login":"dkhwangbo","id":13585249,"node_id":"MDQ6VXNlcjEzNTg1MjQ5","avatar_url":"https://avatars.githubusercontent.com/u/13585249?v=4","gravatar_id":"","url":"https://api.github.com/users/dkhwangbo","html_url":"https://github.com/dkhwangbo","followers_url":"https://api.github.com/users/dkhwangbo/followers","following_url":"https://api.github.com/users/dkhwangbo/following{/other_user}","gists_url":"https://api.github.com/users/dkhwangbo/gists{/gist_id}","starred_url":"https://api.github.com/users/dkhwangbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dkhwangbo/subscriptions","organizations_url":"https://api.github.com/users/dkhwangbo/orgs","repos_url":"https://api.github.com/users/dkhwangbo/repos","events_url":"https://api.github.com/users/dkhwangbo/events{/privacy}","received_events_url":"https://api.github.com/users/dkhwangbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T15:26:20Z","updated_at":"2017-02-08T15:26:20Z","author_association":"CONTRIBUTOR","body":"@b-slim Thanks for your support. I'll fix the point you repeated and ping you when this PR is ready for your review. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278359435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278400603","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278400603","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278400603,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQwMDYwMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T17:31:46Z","updated_at":"2017-02-08T17:31:46Z","author_association":"CONTRIBUTOR","body":"@jihoonson, thx for the update. had a couple further comments on the new stuff.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278400603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278491209","html_url":"https://github.com/apache/druid/pull/3889#issuecomment-278491209","issue_url":"https://api.github.com/repos/apache/druid/issues/3889","id":278491209,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODQ5MTIwOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-08T23:02:13Z","updated_at":"2017-02-08T23:02:13Z","author_association":"MEMBER","body":"@jihoonson addressed comments, testing specialization now.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278491209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278506333","html_url":"https://github.com/apache/druid/pull/3919#issuecomment-278506333","issue_url":"https://api.github.com/repos/apache/druid/issues/3919","id":278506333,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUwNjMzMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T00:18:08Z","updated_at":"2017-02-09T00:18:17Z","author_association":"CONTRIBUTOR","body":"This probably could be broken up into two smaller PRs (1- context, 2- time related stuff), but I did it as one since I ended up developing a few related things and their tests together (context ability + current_timestamp function + timezone stuff + DATE fixes).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278506333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278512799","html_url":"https://github.com/apache/druid/issues/3918#issuecomment-278512799","issue_url":"https://api.github.com/repos/apache/druid/issues/3918","id":278512799,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUxMjc5OQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T00:55:20Z","updated_at":"2017-02-09T00:55:20Z","author_association":"CONTRIBUTOR","body":"@andy256 manually issued \"append\" and \"merge\" tasks can be given an \"indexSpec\" and you should be able to get roaring bitmaps that way. I think there's currently no way to customize that for the ones you get from druid.coordinator.merge.on, but you're right, ideally there should be. If you're willing to contribute a patch, I'd try something like:\r\n\r\n- add a property `druid.coordinator.merge.indexSpec` that accepts a json-formatted IndexSpec, in the manner of other json-formatted properties like `druid.extensions.loadList`.\r\n- update io.druid.server.coordinator.helper.DruidCoordinatorSegmentMerger to submit this indexSpec along with the \"append\" tasks it creates","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278512799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278519720","html_url":"https://github.com/apache/druid/issues/3918#issuecomment-278519720","issue_url":"https://api.github.com/repos/apache/druid/issues/3918","id":278519720,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUxOTcyMA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T01:34:01Z","updated_at":"2017-02-09T01:34:01Z","author_association":"NONE","body":"The `ClientAppendQuery` object doesn't accept an `indexSpec`, though, only `dataSource` and `segments`... additionally, it shows up in the overlord tasks with a \"merge_\" task id, not \"append_\" even though it should be an \"append_\" task. I'm quite confused by this code path.\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278519720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278522167","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278522167","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278522167,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUyMjE2Nw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T01:48:39Z","updated_at":"2017-02-09T01:48:39Z","author_association":"CONTRIBUTOR","body":"@gianm, thanks. I addressed your comments. \r\n\r\nI think we need more tests to verify query caching with various types of fields, aggregators, post aggregators, etc. To make the tests concrete, I think it would be better to add more classes which are specialized for each query type. These tests are parameterized with original query, renamed parameters, and parameters of different order. However, this will cause a huge change in tests. I'm not sure about adding these tests in this PR. Maybe better to add in a following PR? What do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278522167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278529887","html_url":"https://github.com/apache/druid/issues/3918#issuecomment-278529887","issue_url":"https://api.github.com/repos/apache/druid/issues/3918","id":278529887,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUyOTg4Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T02:36:26Z","updated_at":"2017-02-09T02:36:26Z","author_association":"CONTRIBUTOR","body":"What's going on here is:\r\n\r\n- ClientAppendQuery is the \"client-side\" version of the AppendTask. It exists so the IndexingServiceClient and its users (which are in druid-server) don't need to depend on classes in druid-indexing-service. It just has to serialize to something that can be deserialized into an AppendTask. It only has dataSource and segments right now because that's all anyone needed, but if you add an indexSpec (or any other thing that is also a parameter of the AppendTask constructor) then that should work too.\r\n\r\n- AppendTask extends MergeTask and inherits the naming behavior, hence starting with `merge_`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278529887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278536275","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278536275","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278536275,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUzNjI3NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T03:22:14Z","updated_at":"2017-02-09T03:22:14Z","author_association":"CONTRIBUTOR","body":"That test sounds great -- we don't have amazing coverage of caching and cache key right now. I think it makes sense to do it in a followup PR.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278536275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278538366","html_url":"https://github.com/apache/druid/pull/3877#issuecomment-278538366","issue_url":"https://api.github.com/repos/apache/druid/issues/3877","id":278538366,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODUzODM2Ng==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T03:38:05Z","updated_at":"2017-02-09T03:38:05Z","author_association":"CONTRIBUTOR","body":"Thanks @gianm for the review. Addressed comments. Changed the `HdfsSegmentKiller.deleteEmptyParents()` to stop walking back up the parents at data source level.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278538366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278542825","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278542825","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278542825,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU0MjgyNQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T04:16:01Z","updated_at":"2017-02-09T04:16:01Z","author_association":"CONTRIBUTOR","body":"@gianm, fixed. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278542825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278544410","html_url":"https://github.com/apache/druid/pull/3899#issuecomment-278544410","issue_url":"https://api.github.com/repos/apache/druid/issues/3899","id":278544410,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU0NDQxMA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T04:30:42Z","updated_at":"2017-02-09T04:30:42Z","author_association":"CONTRIBUTOR","body":"@drcrallen do you have any other comments?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278544410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278546264","html_url":"https://github.com/apache/druid/pull/3919#issuecomment-278546264","issue_url":"https://api.github.com/repos/apache/druid/issues/3919","id":278546264,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODU0NjI2NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T04:46:47Z","updated_at":"2017-02-09T04:46:47Z","author_association":"CONTRIBUTOR","body":"Merged with master to pick up changes from #3838.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278546264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278663768","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-278663768","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":278663768,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODY2Mzc2OA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T14:51:21Z","updated_at":"2017-02-09T14:51:21Z","author_association":"CONTRIBUTOR","body":"@gianm by integration testing you mean... use this config while running the existing integration tests, that will automatically happen on our builds given that it is enabled by default . on our builds we'll have both (coordinator+overlord) and overlord running when this PR is merged.\r\n\r\nor did you mean a separate integration test.. but what would that do and will it test anything extra?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278663768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278700841","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-278700841","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":278700841,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcwMDg0MQ==","user":{"login":"DaimonPl","id":9693936,"node_id":"MDQ6VXNlcjk2OTM5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9693936?v=4","gravatar_id":"","url":"https://api.github.com/users/DaimonPl","html_url":"https://github.com/DaimonPl","followers_url":"https://api.github.com/users/DaimonPl/followers","following_url":"https://api.github.com/users/DaimonPl/following{/other_user}","gists_url":"https://api.github.com/users/DaimonPl/gists{/gist_id}","starred_url":"https://api.github.com/users/DaimonPl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaimonPl/subscriptions","organizations_url":"https://api.github.com/users/DaimonPl/orgs","repos_url":"https://api.github.com/users/DaimonPl/repos","events_url":"https://api.github.com/users/DaimonPl/events{/privacy}","received_events_url":"https://api.github.com/users/DaimonPl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T16:49:57Z","updated_at":"2017-02-09T16:49:57Z","author_association":"CONTRIBUTOR","body":"Will need to cleanup this git mess...","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278700841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278710057","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-278710057","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":278710057,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcxMDA1Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:20:16Z","updated_at":"2017-02-09T17:20:16Z","author_association":"CONTRIBUTOR","body":"@DaimonPl I'll take another look when it's cleaned up","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278710057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278717722","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-278717722","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":278717722,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcxNzcyMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:47:08Z","updated_at":"2017-02-09T17:47:08Z","author_association":"CONTRIBUTOR","body":"@himanshug by integration testing, I mean having two test configs:\r\n\r\n- one with separate coordinator and overlord\r\n- one that _only_ has a coordinator to make sure it's actually able to perform these functions\r\n\r\nWith the current test config (coordinator+overlord) it's possible the coordinator is unable to properly be an overlord, but we don't know because the standalone overlord is taking over.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278717722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278719179","html_url":"https://github.com/apache/druid/issues/3918#issuecomment-278719179","issue_url":"https://api.github.com/repos/apache/druid/issues/3918","id":278719179,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcxOTE3OQ==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:51:57Z","updated_at":"2017-02-09T17:51:57Z","author_association":"NONE","body":"Ah, I see. I was missing the fact that AppendTask was derived from MergeTask. I'll give it a shot.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278719179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278720482","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-278720482","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":278720482,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcyMDQ4Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:56:10Z","updated_at":"2017-02-09T17:56:10Z","author_association":"CONTRIBUTOR","body":"@himanshug now that I started think about doc updates, I think we'll need some to avoid confusing users if we are going to actively encourage this setting to be on, either by making it default in code, or by setting it true in the quickstart sample configs.\r\n\r\nThat's because if the config is on by default, or true in the sample configs, then new users will not really come into the project with a concept of an \"overlord node\" (they'll think the coordinator does everything) and so many existing docs are going to be confusing. Most of this is not necessary if we're doing this \"quietly\" (not on by default or in sample configs) since the risk of user confusion with a quiet addition of the feature is low.\r\n\r\nSome doc places that should get an update if we have beOverlord on by default, or true in sample configs:\r\n\r\n- tutorial/cluster.md: maybe we should change the recommendation from \"coordination server to host the Coordinator and Overlord processes\" to just having a coordinator acting as overlord. If we make this change then the open ports list needs adjustment as well.\r\n- configuration/indexing-service.md (maybe add an infobox that if beOverlord is true, all the refs to \"overlord\" here should apply to coordinator instead)\r\n- design/indexing-service.md should mention that overlord functionality can be handled by the Coordinator node as well\r\n- batch-ingestion.md, tasks.md reference \"posted to a running instance of a Druid overlord\" and \"Once an overlord node accepts a task\", those should mention coordinators acting as overlords are fine too\r\n- tutorial/quickstart.md: references to running overlord and to \"overlord console\"\r\n- tutorial/tutorial-batch.md: references to \"POST to the Druid Overlord\" and \"overlord console\"\r\n- Various docs: Assumption that overlord functionality is on port 8090","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278720482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278720832","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-278720832","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":278720832,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODcyMDgzMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T17:57:25Z","updated_at":"2017-02-09T17:57:25Z","author_association":"CONTRIBUTOR","body":"@himanshug can you also please write a blurb for the release notes about how to do a rolling update? We generally include those new features that need \"special\" migration procedures.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278720832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278808337","html_url":"https://github.com/apache/druid/pull/3920#issuecomment-278808337","issue_url":"https://api.github.com/repos/apache/druid/issues/3920","id":278808337,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgwODMzNw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T23:24:14Z","updated_at":"2017-02-09T23:24:14Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278808337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278810534","html_url":"https://github.com/apache/druid/pull/3921#issuecomment-278810534","issue_url":"https://api.github.com/repos/apache/druid/issues/3921","id":278810534,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgxMDUzNA==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-09T23:34:06Z","updated_at":"2017-02-09T23:34:06Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278810534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278819461","html_url":"https://github.com/apache/druid/pull/3873#issuecomment-278819461","issue_url":"https://api.github.com/repos/apache/druid/issues/3873","id":278819461,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgxOTQ2MQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T00:17:28Z","updated_at":"2017-02-10T00:17:28Z","author_association":"CONTRIBUTOR","body":"pushing this to 10.1","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278819461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278832882","html_url":"https://github.com/apache/druid/pull/3883#issuecomment-278832882","issue_url":"https://api.github.com/repos/apache/druid/issues/3883","id":278832882,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgzMjg4Mg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T01:37:19Z","updated_at":"2017-02-10T01:37:19Z","author_association":"CONTRIBUTOR","body":"Given the complexity and core importance of the code here, I called out a few places that were touched in the PR but don't have unit test coverage","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278832882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278832992","html_url":"https://github.com/apache/druid/pull/3883#issuecomment-278832992","issue_url":"https://api.github.com/repos/apache/druid/issues/3883","id":278832992,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgzMjk5Mg==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T01:37:56Z","updated_at":"2017-02-10T01:37:56Z","author_association":"CONTRIBUTOR","body":"I'll work through the logic in those places as soon as I can if noon else gets to them first.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278832992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278837548","html_url":"https://github.com/apache/druid/issues/3885#issuecomment-278837548","issue_url":"https://api.github.com/repos/apache/druid/issues/3885","id":278837548,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODgzNzU0OA==","user":{"login":"KurtYoung","id":955396,"node_id":"MDQ6VXNlcjk1NTM5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/955396?v=4","gravatar_id":"","url":"https://api.github.com/users/KurtYoung","html_url":"https://github.com/KurtYoung","followers_url":"https://api.github.com/users/KurtYoung/followers","following_url":"https://api.github.com/users/KurtYoung/following{/other_user}","gists_url":"https://api.github.com/users/KurtYoung/gists{/gist_id}","starred_url":"https://api.github.com/users/KurtYoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KurtYoung/subscriptions","organizations_url":"https://api.github.com/users/KurtYoung/orgs","repos_url":"https://api.github.com/users/KurtYoung/repos","events_url":"https://api.github.com/users/KurtYoung/events{/privacy}","received_events_url":"https://api.github.com/users/KurtYoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T02:07:18Z","updated_at":"2017-02-10T02:07:18Z","author_association":"CONTRIBUTOR","body":"We have met this issue in our production environment, and just delete the `deleteOnExit` works fine.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278837548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278861651","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-278861651","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":278861651,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg2MTY1MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T05:33:27Z","updated_at":"2017-02-10T05:33:27Z","author_association":"MEMBER","body":"@akashdw before you address the latest portion of comments,\r\n\r\nI think it's better to create a different type of `Indexed`, `LargeGenericIndexed` (+ `LargeGenericIndexedWriter`), independent from `GenericIndexed`. And use it from `LargeColumnSupportedComplexColumnSerializer`. Advantages:\r\n - Simpler logic\r\n - Less risk: `GenericIndexed` is used at many places\r\n - No need for on-the-fly conversion from \"normal\" to \"large\" format in `LargeGenericIndexedWriter`.\r\n - `LargeGenericIndexed` and `LargeGenericIndexedWriter` can use native byte order from the very beginning, that will ease migration to `Memory`, and no need to increment the version of `LargeGenericIndexed` and support both forms (big endian and native endian) in code.\r\n\r\ncc @cheddar @himanshug ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278861651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278867665","html_url":"https://github.com/apache/druid/issues/3885#issuecomment-278867665","issue_url":"https://api.github.com/repos/apache/druid/issues/3885","id":278867665,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg2NzY2NQ==","user":{"login":"valenpo","id":1099203,"node_id":"MDQ6VXNlcjEwOTkyMDM=","avatar_url":"https://avatars.githubusercontent.com/u/1099203?v=4","gravatar_id":"","url":"https://api.github.com/users/valenpo","html_url":"https://github.com/valenpo","followers_url":"https://api.github.com/users/valenpo/followers","following_url":"https://api.github.com/users/valenpo/following{/other_user}","gists_url":"https://api.github.com/users/valenpo/gists{/gist_id}","starred_url":"https://api.github.com/users/valenpo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valenpo/subscriptions","organizations_url":"https://api.github.com/users/valenpo/orgs","repos_url":"https://api.github.com/users/valenpo/repos","events_url":"https://api.github.com/users/valenpo/events{/privacy}","received_events_url":"https://api.github.com/users/valenpo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T06:24:24Z","updated_at":"2017-02-10T06:24:24Z","author_association":"NONE","body":"@KurtYoung we do same. It is wrong using deleteOnExit on production. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278867665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278879199","html_url":"https://github.com/apache/druid/pull/3923#issuecomment-278879199","issue_url":"https://api.github.com/repos/apache/druid/issues/3923","id":278879199,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg3OTE5OQ==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T07:48:15Z","updated_at":"2017-02-10T07:48:15Z","author_association":"CONTRIBUTOR","body":"Thanks @b-slim. Addressed comments.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278879199/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278893282","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-278893282","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":278893282,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODg5MzI4Mg==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T09:09:31Z","updated_at":"2017-02-10T09:09:31Z","author_association":"CONTRIBUTOR","body":"@leventov  GenericIndexed v2 is not limited to complex columns only and is getting used for regular columns also. Exposing v2 only to `LargeColumnSupportedComplexColumnSerializer` means regular columns can not take advantage of this feature. \r\nOne of the design choice we made is to keep using v1 unless we hit Integer.Max limit. Not sure how can we achieve the same with by keeping LargeGenericIndexedWriter and GenericIndexedWriter separate?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278893282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278906863","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-278906863","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":278906863,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODkwNjg2Mw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T10:15:19Z","updated_at":"2017-02-10T10:15:19Z","author_association":"MEMBER","body":"@akashdw has anyone reported hitting this limit e. g. on dimension dictionaries or bitmaps? Otherwise it's not taking advantage, it's exposing to unnecessary complexity.\r\n\r\n> One of the design choice we made is to keep using v1 unless we hit Integer.Max limit. Not sure how can we achieve the same with by keeping LargeGenericIndexedWriter and GenericIndexedWriter separate?\r\n\r\nWhy you made this choice? If going \"large\" for complex columns from the beginning, overall memory usage will be almost the same, performance - very close to the performance of `GenericIndexed` (which has major inefficiencies though, the fact that nobody fixed them tells that the performance is not very important here). And the advantages of this approach I listed above.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278906863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278907551","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-278907551","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":278907551,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODkwNzU1MQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T10:18:49Z","updated_at":"2017-02-10T10:18:49Z","author_association":"MEMBER","body":"@akashdw also I just realised that separate `GenericIndexed` and `LargeGenericIndexed` doesn't mean that `LargeGenericIndexedWriter` has to always make `LargeGenericIndexed` -- it could make choice between the two formats and conversion on the fly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278907551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278927823","html_url":"https://github.com/apache/druid/pull/3909#issuecomment-278927823","issue_url":"https://api.github.com/repos/apache/druid/issues/3909","id":278927823,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODkyNzgyMw==","user":{"login":"DaimonPl","id":9693936,"node_id":"MDQ6VXNlcjk2OTM5MzY=","avatar_url":"https://avatars.githubusercontent.com/u/9693936?v=4","gravatar_id":"","url":"https://api.github.com/users/DaimonPl","html_url":"https://github.com/DaimonPl","followers_url":"https://api.github.com/users/DaimonPl/followers","following_url":"https://api.github.com/users/DaimonPl/following{/other_user}","gists_url":"https://api.github.com/users/DaimonPl/gists{/gist_id}","starred_url":"https://api.github.com/users/DaimonPl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DaimonPl/subscriptions","organizations_url":"https://api.github.com/users/DaimonPl/orgs","repos_url":"https://api.github.com/users/DaimonPl/repos","events_url":"https://api.github.com/users/DaimonPl/events{/privacy}","received_events_url":"https://api.github.com/users/DaimonPl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T12:07:22Z","updated_at":"2017-02-10T12:07:22Z","author_association":"CONTRIBUTOR","body":"cleaned to 1 single commit ;)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278927823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278934258","html_url":"https://github.com/apache/druid/pull/3863#issuecomment-278934258","issue_url":"https://api.github.com/repos/apache/druid/issues/3863","id":278934258,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODkzNDI1OA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T12:46:34Z","updated_at":"2017-02-10T12:46:34Z","author_association":"CONTRIBUTOR","body":"@gianm thanks. I addressed your comments. Additionally, I did a simple refactoring for RowBasedGrouperHelper.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278934258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/278962429","html_url":"https://github.com/apache/druid/pull/3923#issuecomment-278962429","issue_url":"https://api.github.com/repos/apache/druid/issues/3923","id":278962429,"node_id":"MDEyOklzc3VlQ29tbWVudDI3ODk2MjQyOQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T14:50:16Z","updated_at":"2017-02-10T14:50:16Z","author_association":"CONTRIBUTOR","body":"👍 ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/278962429/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279017263","html_url":"https://github.com/apache/druid/pull/3711#issuecomment-279017263","issue_url":"https://api.github.com/repos/apache/druid/issues/3711","id":279017263,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTAxNzI2Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T17:57:15Z","updated_at":"2017-02-10T17:58:05Z","author_association":"CONTRIBUTOR","body":"@gianm  I have changed it slightly to allow for full rolling upgrade. Now if coordinator is configured to acts as overlord then it insists on another configuration overlordService to be provided which it uses to publish as overlord. that will take care of rolling upgrades. see `coordinator.md` updates.\r\n\r\ni have also made coordinator to not be overlord by default in this PR, so nothing changes for the users by this PR being merged. That makes this PR merge-able without risks and don't want this to block 0.10.0 release. We will use that configuration internally on some of the clusters to gain more confidence on it.\r\n\r\nI will do a separate PR to change quickstart guide and for integration testing configs which wouldn't necessarily be in 0.10.0 milestone.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279017263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279017425","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-279017425","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":279017425,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTAxNzQyNQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T17:57:44Z","updated_at":"2017-02-10T17:57:44Z","author_association":"CONTRIBUTOR","body":"@gianm docs for \"JavaScript programming guide\" are updated.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279017425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279051079","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-279051079","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":279051079,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTA1MTA3OQ==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T20:00:34Z","updated_at":"2017-02-10T20:00:34Z","author_association":"CONTRIBUTOR","body":"@leventov I don't agree on not to include this feature (only used when a column hits Integer.Max limit) for regular columns because it adds some complexity?\r\nEnabling only for complex columns makes things more confusing as one Indexed can handle large column and other can not.\r\n\r\n>Why you made this choice?\r\n\r\nBecause we would like to take as much as advantage of version 1 genericIndexed and use version 2 only if we hit the limit. \r\n\r\n> (which has major inefficiencies though, the fact that nobody fixed them tells that the performance is not very important here).\r\n \r\nPlease open issues where you see major inefficiencies, I would love to work on those improvements.\r\n\r\n>  it could make choice between the two formats and conversion on the fly.\r\n\r\n`LargeGenericIndexedWriter` creating version 1 and 2 means it still has to do on-the-fly conversion from \"normal\" to \"large\" format.\r\n\r\nI'm going to keep the same structure and may be we can refactor this later if people complain about complexity of GenericIndexed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279051079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279054823","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-279054823","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":279054823,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTA1NDgyMw==","user":{"login":"leerho","id":12941506,"node_id":"MDQ6VXNlcjEyOTQxNTA2","avatar_url":"https://avatars.githubusercontent.com/u/12941506?v=4","gravatar_id":"","url":"https://api.github.com/users/leerho","html_url":"https://github.com/leerho","followers_url":"https://api.github.com/users/leerho/followers","following_url":"https://api.github.com/users/leerho/following{/other_user}","gists_url":"https://api.github.com/users/leerho/gists{/gist_id}","starred_url":"https://api.github.com/users/leerho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leerho/subscriptions","organizations_url":"https://api.github.com/users/leerho/orgs","repos_url":"https://api.github.com/users/leerho/repos","events_url":"https://api.github.com/users/leerho/events{/privacy}","received_events_url":"https://api.github.com/users/leerho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T20:16:59Z","updated_at":"2017-02-10T20:16:59Z","author_association":"CONTRIBUTOR","body":"@leventov \r\n\r\nI (think) I am done with the first phase of changes to Memory.  \r\n\r\n- Cleaner implemented\r\n- NativeMemory can now be constructed with any of the 8 valid primitive arrays.\r\n- NativeMemory computes a cumBaseOffset = nativeBaseOffset + objectBaseOffset.  This means only one instance variable is accessed for the get/put methods.\r\n- Rewrote a most of the key related javadocs (assuming I could find them all)\r\n- We found a \"bug\" in the original NativeMemory(byteBuffer) constructor in that if the BB was RO the resulting NM was not!  The only way around this was to create a factory method that detects this and then constructs either a NM or a NMR.\r\n\r\nThe next thing I want to look at is simplifying the MR so that it extends NM rather than Memory.  This may eliminate the need for MR or most of its code anyway.  I need to figure out a way make this change backward compatible.  Not sure how yet.  Thoughts?\r\n\r\nThe other more radical thought I had would be to convert Memory into an abstract class that NM extends rather than implements.  This would be a huge change that would definitely break Backward Compatibility.  It also reduces future flexibility as it becomes a single inheritance tree.  I really don't like this idea. Thoughts?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279054823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279082997","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-279082997","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":279082997,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTA4Mjk5Nw==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-10T22:23:36Z","updated_at":"2017-02-10T22:23:36Z","author_association":"CONTRIBUTOR","body":"@leventov Having a separate `LargeGenericIndexed` is definitely another path to go, but there's no reason  you have to remove support for normal dimensions and metrics columns in order to do that.  We actually initially looked at if we should implement V2 as a separate Indexed or not and ultimately chose to reuse the `GenericIndexed` because there weren't significant refactoring changes required to make it work and there was already an abstraction in place that would allow us to do the change.  If we created a new concrete class, it would basically be a large C&P of the code, but reusing `GenericIndexed` allows for more surgical changes (the largest differences being the serialization and deserialization)\r\n\r\nI don't believe the migration to `Memory` would be any different no matter what we do here.  At the end of the day, there will be a binary format `v1` that uses one endianess and a `v2` that uses another.  The `Memory` implementation will have to support both.  That can happen in any number of ways and can be left up to the `Memory` implementation itself.\r\n\r\nI think this code has already done a pretty good job of being a low-risk, unobtrusive change (that's why we have the automatic switch to the new version and always default to the old version when possible).  So, I'm not sure I really see a benefit to introducing a new concrete class for the new version.  Is there some other complexity that I'm not understanding that you are trying to avoid?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279082997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279103467","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-279103467","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":279103467,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTEwMzQ2Nw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-11T00:32:34Z","updated_at":"2017-02-11T00:32:34Z","author_association":"MEMBER","body":"@cheddar @akashdw\r\n\r\n> We actually initially looked at if we should implement V2 as a separate Indexed or not and ultimately chose to reuse the GenericIndexed because there weren't significant refactoring changes required to make it work and there was already an abstraction in place that would allow us to do the change. If we created a new concrete class, it would basically be a large C&P of the code, but reusing GenericIndexed allows for more surgical changes (the largest differences being the serialization and deserialization)\r\n\r\nThere are reasons to do this:\r\n - To remove \"4-byte integer representing length of value, followed by bytes for value\" from the format. It is unused. The size of value is always determined by the difference in offsets, stored in the index area (\"startOffset\" and \"endOffset\")\r\n - To make `LargeGenericIndexed` native order-only.\r\n\r\nEven if the two reasons above didn't exist, I really don't like how `GenericIndexed` is organized now, IMO it's too complex. The logic of the \"normal\" and \"large\" case is mixed, with cumbersome if-else branches. I would prefer those cases to be implemented in different classes, with the remaining common logic shared via static methods.\r\n\r\nWhen `GenericIndexed` will need to be updated to support `Memory`, i. e. support native byte order (and the \"4-byte size\" could also be removed along the way. And the index area aligned on 4-byte boundary), I would also suggest to create a separate class like \"NativeGenericIndexed\" rather than extend `GenericIndexed`.\r\n\r\n> I don't believe the migration to Memory would be any different no matter what we do here. At the end of the day, there will be a binary format v1 that uses one endianess and a v2 that uses another. The Memory implementation will have to support both. That can happen in any number of ways and can be left up to the Memory implementation itself.\r\n\r\nIf we make `LargeGenericIndexed` that is always native now, it won't be needed for it. The format is unchanged. Just replace native ByteBuffers with Memory. And for `GenericIndexed`, when this conversion is needed, I also suggest to create a separate class, because other useful changes will make it different enough from the version 1.\r\n\r\nTo me, updating version (and keeping the class) is reasonable when the format change is very minor, like adding a field to the header, and then using this field at one place. \"GenericIndexed\" and \"LargeGenericIndexed\" are much more different.\r\n\r\nSo my current suggestion is:\r\n - `LargeGenericIndexed` and `GenericIndexed` are separate.\r\n - `LargeGenericIndexed` is native ordered only and doesn't have \"4-byte lengths\"\r\n - `GenericIndexedWriter`is able to convert between them on the fly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279103467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279105008","html_url":"https://github.com/apache/druid/pull/3743#issuecomment-279105008","issue_url":"https://api.github.com/repos/apache/druid/issues/3743","id":279105008,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTEwNTAwOA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-11T00:45:12Z","updated_at":"2017-02-11T00:45:12Z","author_association":"MEMBER","body":"@akashdw \r\n\r\n> Please open issues where you see major inefficiencies, I would love to work on those improvements.\r\n\r\n - In `fromIterable()`, contents of `ByteArrayOutputStream`s are needlessly copied twice, you can add class like\r\n\r\n```java\r\npackage io.druid.io;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.nio.ByteBuffer;\r\n\r\npublic class ZeroCopyByteArrayOutputStream extends ByteArrayOutputStream\r\n{\r\n  public ZeroCopyByteArrayOutputStream()\r\n  {\r\n  }\r\n\r\n  public ZeroCopyByteArrayOutputStream(int capacity)\r\n  {\r\n    super(capacity);\r\n  }\r\n\r\n  public void writeTo(ByteBuffer outputBuffer)\r\n  {\r\n    outputBuffer.put(buf, 0, count);\r\n  }\r\n}\r\n```\r\n\r\n and use it's `writeTo()`.\r\n\r\n - `BufferedIndexed` abstraction and `singleThreaded()` version are not needed. It's easier to always make a copy `asReadOnlyBuffer()` before passing into `ObjectStrategy.fromByteBuffer()` (and ensure extra copies are not made in the implementations of `fromByteBuffer()`).\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279105008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/279109469","html_url":"https://github.com/apache/druid/issues/3892#issuecomment-279109469","issue_url":"https://api.github.com/repos/apache/druid/issues/3892","id":279109469,"node_id":"MDEyOklzc3VlQ29tbWVudDI3OTEwOTQ2OQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-02-11T01:26:48Z","updated_at":"2017-02-11T01:26:48Z","author_association":"MEMBER","body":"@leerho let's focus on the interface first, internals could be changed later.\r\n\r\n1.\r\n\r\n> The other more radical thought I had would be to convert Memory into an abstract class that NM extends rather than implements. This would be a huge change that would definitely break Backward Compatibility. It also reduces future flexibility as it becomes a single inheritance tree. I really don't like this idea. Thoughts?\r\n\r\nI actually like the idea and suggest just to do this.\r\n\r\n - It allows to add static factory methods right to `Memory`, instead of a separate `Memories`.\r\n - It allows to share some logic in the most natural way. E. g. I'm sure we will need to implement `putUtf8(String)` in `Memory`. Can do that right in `Memory` instead of separate `MemoryUtils` and calling it from each `Memory` implementation.\r\n\r\nSo there is an abstract class `Memory` with static factory methods for creating different kinds of `Memory` all other classes in the `com.yahoo.memory` package are package-private.\r\n\r\nAbout breaking compat: IMO better to break compat early by hiding _all_ constructors behind static factory methods that allows great flexibility later (add/remove implementations). Than to realise that we want to break compat later, after Druid is refactored to use Memory.\r\n\r\n2. Make `Memory` `Closeable` or `AutoCloseable` to allow try-with-resources.\r\n\r\n3. Move `PositionalMemoryRegion` suggested by @niketh from #3915 to the same package.\r\n\r\n<hr>\r\n\r\nAbout implementations\r\n\r\n> The next thing I want to look at is simplifying the MR so that it extends NM rather than Memory. This may eliminate the need for MR or most of its code anyway. I need to figure out a way make this change backward compatible. Not sure how yet. Thoughts?\r\n\r\nSince MemoryRegion is unmodifiable now, and there will be `PositionalMemoryRegion`, I'm losing the point of `MemoryRegion`.\r\n\r\nActually I think there are too much `Memory` implementations. I think everything could be implemented using just one: `NativeMemory`. There could be a `ReadOnlyMemory` super-interface of `Memory`, and to obtain a \"read-only view\" of `Memory`, we just cast to `ReadOnlyMemory`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/279109469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]