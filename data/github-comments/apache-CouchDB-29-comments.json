[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329551242","html_url":"https://github.com/apache/couchdb/pull/816#issuecomment-329551242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/816","id":329551242,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTU1MTI0Mg==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T17:22:36Z","updated_at":"2017-09-14T17:22:36Z","author_association":"MEMBER","body":"@davisp thanks for the review! I'll have a think about the naming and overloaded function issues.\r\n\r\nTo your last point, my thought there is that all predicates except, by definition, `\"$exists\":false`, \"operate\" on the index because selection of the index restricts the result set to documents where the indexed fields exist.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329551242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329604646","html_url":"https://github.com/apache/couchdb/issues/819#issuecomment-329604646","issue_url":"https://api.github.com/repos/apache/couchdb/issues/819","id":329604646,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTYwNDY0Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T20:48:29Z","updated_at":"2017-09-14T20:48:29Z","author_association":"MEMBER","body":"We will only release a package for this distribution once it hits stable. Sorry.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329604646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329607530","html_url":"https://github.com/apache/couchdb/issues/819#issuecomment-329607530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/819","id":329607530,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTYwNzUzMA==","user":{"login":"drasko","id":149944,"node_id":"MDQ6VXNlcjE0OTk0NA==","avatar_url":"https://avatars.githubusercontent.com/u/149944?v=4","gravatar_id":"","url":"https://api.github.com/users/drasko","html_url":"https://github.com/drasko","followers_url":"https://api.github.com/users/drasko/followers","following_url":"https://api.github.com/users/drasko/following{/other_user}","gists_url":"https://api.github.com/users/drasko/gists{/gist_id}","starred_url":"https://api.github.com/users/drasko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drasko/subscriptions","organizations_url":"https://api.github.com/users/drasko/orgs","repos_url":"https://api.github.com/users/drasko/repos","events_url":"https://api.github.com/users/drasko/events{/privacy}","received_events_url":"https://api.github.com/users/drasko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T21:00:16Z","updated_at":"2017-09-14T21:00:16Z","author_association":"NONE","body":"Why? Debian Jesse was testing until month ago, still there was a release.\r\n\r\nDebian is known for a long release period - this is why all devs are using either testing or sid.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329607530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329624635","html_url":"https://github.com/apache/couchdb/issues/819#issuecomment-329624635","issue_url":"https://api.github.com/repos/apache/couchdb/issues/819","id":329624635,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTYyNDYzNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-14T22:19:36Z","updated_at":"2017-09-14T22:19:45Z","author_association":"MEMBER","body":"No, you're mistaken. jessie was stable until a month ago and is now old-stable. The current release is stretch, for which we will be releasing a package shortly.\r\n\r\nOur intention is to release binaries only for long-term support releases only once they are released, i.e. Ubuntu 14.04/16.04 LTS and Debian 8/9 and CentOS 6/7. If you want to use a testing branch, you are more than welcome to build from scratch using our well-defined development process.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329624635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329798421","html_url":"https://github.com/apache/couchdb/pull/806#issuecomment-329798421","issue_url":"https://api.github.com/repos/apache/couchdb/issues/806","id":329798421,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTc5ODQyMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T14:27:12Z","updated_at":"2017-09-15T14:27:12Z","author_association":"CONTRIBUTOR","body":"Wanted to test performance so built a script to benchmark compaction:\r\n\r\nhttps://gist.github.com/nickva/e87aa2f7f896805bfee36a044a3800b0\r\n\r\nI see a very nice speedup with a 1M docs database where each doc has 50 revisions\r\n\r\n```\r\n(master) $ ./compact_bench.py  -r 50 -n 1000000\r\n**************** num=1000000,revisions=50 ****************\r\n Updating   : 1045.4s docs/s:956 revs/s:47827 fsize:4320194765\r\n Compacting : 494.2s docs/s:2023 revs/s:101180 fsize:1765470407\r\n\r\n(compactor-optimize-emsort) ./compact_bench.py  -r 50 -n 1000000\r\n**************** num=1000000,revisions=50 ****************\r\n Updating   : 961.0s docs/s:1040 revs/s:52029 fsize:4320194765\r\n Compacting : 307.7s docs/s:3250 revs/s:162518 fsize:1765470407\r\n```\r\n\r\nThis looks very nice. Great work. Don't see 30-40% speedups that often.\r\n\r\nMade a few comments in the code. But otherwise looks great. +1 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329798421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329822250","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-329822250","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":329822250,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTgyMjI1MA==","user":{"login":"c24o","id":8173043,"node_id":"MDQ6VXNlcjgxNzMwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/8173043?v=4","gravatar_id":"","url":"https://api.github.com/users/c24o","html_url":"https://github.com/c24o","followers_url":"https://api.github.com/users/c24o/followers","following_url":"https://api.github.com/users/c24o/following{/other_user}","gists_url":"https://api.github.com/users/c24o/gists{/gist_id}","starred_url":"https://api.github.com/users/c24o/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/c24o/subscriptions","organizations_url":"https://api.github.com/users/c24o/orgs","repos_url":"https://api.github.com/users/c24o/repos","events_url":"https://api.github.com/users/c24o/events{/privacy}","received_events_url":"https://api.github.com/users/c24o/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T15:50:32Z","updated_at":"2017-09-15T15:50:32Z","author_association":"NONE","body":"I updated from Jessie to Stretch and CouchDB is broken now. In my case, it tries to use library libicu52 but stretch uses libicu57.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329822250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329830992","html_url":"https://github.com/apache/couchdb/issues/781#issuecomment-329830992","issue_url":"https://api.github.com/repos/apache/couchdb/issues/781","id":329830992,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTgzMDk5Mg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T16:23:50Z","updated_at":"2017-09-15T16:23:50Z","author_association":"MEMBER","body":"We have not released a CouchDB stretch package yet. You will have to wait until that package is released, or compile and install it yourself.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329830992/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329839579","html_url":"https://github.com/apache/couchdb/pull/197#issuecomment-329839579","issue_url":"https://api.github.com/repos/apache/couchdb/issues/197","id":329839579,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTgzOTU3OQ==","user":{"login":"KangTheTerrible","id":7072176,"node_id":"MDQ6VXNlcjcwNzIxNzY=","avatar_url":"https://avatars.githubusercontent.com/u/7072176?v=4","gravatar_id":"","url":"https://api.github.com/users/KangTheTerrible","html_url":"https://github.com/KangTheTerrible","followers_url":"https://api.github.com/users/KangTheTerrible/followers","following_url":"https://api.github.com/users/KangTheTerrible/following{/other_user}","gists_url":"https://api.github.com/users/KangTheTerrible/gists{/gist_id}","starred_url":"https://api.github.com/users/KangTheTerrible/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KangTheTerrible/subscriptions","organizations_url":"https://api.github.com/users/KangTheTerrible/orgs","repos_url":"https://api.github.com/users/KangTheTerrible/repos","events_url":"https://api.github.com/users/KangTheTerrible/events{/privacy}","received_events_url":"https://api.github.com/users/KangTheTerrible/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T16:58:47Z","updated_at":"2017-09-15T16:58:47Z","author_association":"CONTRIBUTOR","body":"Under heavy gzipped update handler load with large docs (300-500k) adding this feature causes couch to crash in an unexpected manner.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329839579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329851447","html_url":"https://github.com/apache/couchdb/pull/806#issuecomment-329851447","issue_url":"https://api.github.com/repos/apache/couchdb/issues/806","id":329851447,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTg1MTQ0Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T17:45:15Z","updated_at":"2017-09-19T02:25:15Z","author_association":"CONTRIBUTOR","body":"Updated couch_file:append_terms() to take `[{compression, none}]` and it yields some improvement in compaction times.\r\n\r\n```\r\n./compact_bench.py  -r 50 -n 1000000\r\n\r\n**************** num=1000000,revisions=50 ****************\r\n Updating   : 938.7s docs/s:1065 revs/s:53267 fsize:4320194765\r\n Compacting : 263.5s docs/s:3795 revs/s:189771 fsize:1765470407\r\n```\r\n\r\nSo about 40 seconds (263 vs 307)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329851447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329888207","html_url":"https://github.com/apache/couchdb/issues/819#issuecomment-329888207","issue_url":"https://api.github.com/repos/apache/couchdb/issues/819","id":329888207,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTg4ODIwNw==","user":{"login":"drasko","id":149944,"node_id":"MDQ6VXNlcjE0OTk0NA==","avatar_url":"https://avatars.githubusercontent.com/u/149944?v=4","gravatar_id":"","url":"https://api.github.com/users/drasko","html_url":"https://github.com/drasko","followers_url":"https://api.github.com/users/drasko/followers","following_url":"https://api.github.com/users/drasko/following{/other_user}","gists_url":"https://api.github.com/users/drasko/gists{/gist_id}","starred_url":"https://api.github.com/users/drasko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drasko/subscriptions","organizations_url":"https://api.github.com/users/drasko/orgs","repos_url":"https://api.github.com/users/drasko/repos","events_url":"https://api.github.com/users/drasko/events{/privacy}","received_events_url":"https://api.github.com/users/drasko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T20:03:36Z","updated_at":"2017-09-15T20:03:36Z","author_association":"NONE","body":"Yes, true. OK, thanks.\r\n\r\nProblem is however that it does not build on OTP20. I forced it, it looks that it is working (for now :)).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329888207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329898071","html_url":"https://github.com/apache/couchdb/pull/806#issuecomment-329898071","issue_url":"https://api.github.com/repos/apache/couchdb/issues/806","id":329898071,"node_id":"MDEyOklzc3VlQ29tbWVudDMyOTg5ODA3MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-15T20:50:15Z","updated_at":"2017-09-15T20:50:15Z","author_association":"CONTRIBUTOR","body":"As a fun experiment as suggested by @davisp disabled `ioq` (so reverted the no-compression patch, then made ioq:call a pass-through to Fd's gen_server). Got these results:\r\n\r\n```\r\n ./compact_bench.py  -r 50 -n 1000000\r\n\r\n**************** num=1000000,revisions=50 ****************\r\n Updating   : 910.2s docs/s:1098 revs/s:54932 fsize:4320194765\r\n Compacting : 284.6s docs/s:3513 revs/s:175658 fsize:1765470407\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/329898071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330134150","html_url":"https://github.com/apache/couchdb/issues/821#issuecomment-330134150","issue_url":"https://api.github.com/repos/apache/couchdb/issues/821","id":330134150,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDEzNDE1MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T05:55:13Z","updated_at":"2017-09-18T05:55:13Z","author_association":"MEMBER","body":"Actually, it turns out you can't access `/_system` on 5984. I have a different solution I'd like to propose, so I'm closing this issue out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330134150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330206185","html_url":"https://github.com/apache/couchdb/pull/818#issuecomment-330206185","issue_url":"https://api.github.com/repos/apache/couchdb/issues/818","id":330206185,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDIwNjE4NQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T12:36:29Z","updated_at":"2017-09-18T12:36:29Z","author_association":"MEMBER","body":"after squashing, looks ok to me","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330206185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330206424","html_url":"https://github.com/apache/couchdb/pull/818#issuecomment-330206424","issue_url":"https://api.github.com/repos/apache/couchdb/issues/818","id":330206424,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDIwNjQyNA==","user":{"login":"garrensmith","id":179458,"node_id":"MDQ6VXNlcjE3OTQ1OA==","avatar_url":"https://avatars.githubusercontent.com/u/179458?v=4","gravatar_id":"","url":"https://api.github.com/users/garrensmith","html_url":"https://github.com/garrensmith","followers_url":"https://api.github.com/users/garrensmith/followers","following_url":"https://api.github.com/users/garrensmith/following{/other_user}","gists_url":"https://api.github.com/users/garrensmith/gists{/gist_id}","starred_url":"https://api.github.com/users/garrensmith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garrensmith/subscriptions","organizations_url":"https://api.github.com/users/garrensmith/orgs","repos_url":"https://api.github.com/users/garrensmith/repos","events_url":"https://api.github.com/users/garrensmith/events{/privacy}","received_events_url":"https://api.github.com/users/garrensmith/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T12:37:28Z","updated_at":"2017-09-18T12:37:28Z","author_association":"MEMBER","body":"@davisp I've made all the required changes. Could you take a look when you get a chance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330206424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330239359","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330239359","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330239359,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDIzOTM1OQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T14:23:56Z","updated_at":"2017-09-18T14:23:56Z","author_association":"MEMBER","body":"I'm against of breaking with [URI RFC](https://tools.ietf.org/html/rfc3986#section-2.2) for convenience and in my experience encoding ambiguity in general leads to nothing but mess and confusion. If replication ID scheme is hard to work with we probably should just change that scheme.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330239359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330239672","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330239672","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330239672,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDIzOTY3Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T14:24:55Z","updated_at":"2017-09-18T14:24:55Z","author_association":"CONTRIBUTOR","body":"@eiri how does this break the URI RFC?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330239672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330242519","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330242519","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330242519,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI0MjUxOQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T14:33:34Z","updated_at":"2017-09-18T14:33:34Z","author_association":"MEMBER","body":"Plus is sub-delim reserved character. RFC's stating: \r\n> If data for a URI component would conflict with a reserved character's purpose as a delimiter, then the conflicting data must be percent-encoded before the URI is formed.\r\n\r\nIt seems to me that \"unambiguously accept both versions, and thus make URL encoding on the client optional\" is a suggestion to do exact opposite of that, or do you mean something different here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330242519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330248434","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330248434","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330248434,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI0ODQzNA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T14:52:07Z","updated_at":"2017-09-18T14:53:17Z","author_association":"CONTRIBUTOR","body":"`+` can be considered a sub-delim because it separates the base replication ID from the extensions. For example replication checkpoints use only the base part but not the extension. So parsing out bits of the ID is practical and probably already used by user code out there.\r\n\r\nIn other words replication ID is really a compound ID and we just accept both the + delimited version or the space delimited one.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330248434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330250765","html_url":"https://github.com/apache/couchdb/pull/816#issuecomment-330250765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/816","id":330250765,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI1MDc2NQ==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T14:58:53Z","updated_at":"2017-09-18T14:58:53Z","author_association":"MEMBER","body":"@davisp I went with your second suggestion and implemented a `has_required_fields` function","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330250765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330279604","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330279604","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330279604,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI3OTYwNA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T16:34:20Z","updated_at":"2017-09-18T16:34:20Z","author_association":"MEMBER","body":"You really got me confused here with what exactly you are proposing. At first I've read this as a suggestion to take `+` in URL as a literal + symbol, hence my comment on breaking RFC. Now, after rereading, I see that you are suggesting to make replicator's URI into _not_ unique resource allocator, i.e. make `\"2abc%2Bcreate_target%2Bcontinuous\"`, `\"2abc+create_target+continuous\"` (and also `\"2abc%20create_target%20continuous\"` by accident, right?) to point to the same document.\r\n\r\nThis still feels wrong, to be honest. Interchangeable delimiters in resource identification already sounds as unnecessary complication and confusion with encoding\\representation of such things (imagine whole number of possible mixes: \"\"2abc+create%20target%2Bcontinuous\"`) seems problematic. Again, if it is only about convenience then let's change that plus to something not requiring encoding.\r\n\r\nAlso, anecdotical, reading around gave me a notion that in web's URL `+` requires encoding only in query, not in path, but I can't find RFC to back this up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330279604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330294792","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330294792","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330294792,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDI5NDc5Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T17:28:31Z","updated_at":"2017-09-18T17:29:34Z","author_association":"CONTRIBUTOR","body":"> \"\"2abc+create%20target%2Bcontinuous\"`\r\n\r\nReplication ID format is not arbitrary though.  This is possible exactly because `2abc+create%20target%2Bcontinuous` is not valid replication ID.\r\n\r\nChanging the plus sign might work, however since the ID is compound (made of parts) there are probably user written scripts would split the ID. For example if they inspect the checkpoints documents where only the base part is used.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330294792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330304329","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330304329","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330304329,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMwNDMyOQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T17:53:16Z","updated_at":"2017-09-18T17:53:16Z","author_association":"MEMBER","body":"`2bc+create%20target%2Bcontinuous` is not valid replication ID, but valid _representation_ of replication ID if we'd go with your suggestion of treating both `+` and spaces as a valid delimiter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330304329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330311639","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330311639","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330311639,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMxMTYzOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T18:19:13Z","updated_at":"2017-09-18T18:24:38Z","author_association":"CONTRIBUTOR","body":"It would be a different encoding of the same resource. Is encoding the same as representation, I not sure. For example is document `%61` the same as document `a`.\r\n\r\n> Also, anecdotical, reading around gave me a notion that in web's URL + requires encoding only in query, not in path, but I can't find RFC to back this up.\r\n\r\nYap, but mochiweb  decodes `+` in path as a space, probably because it reuses the code used for `application/x-www-form-urlencoded`. So if we switched to a different server the code the converting `+` to space would never be called. \r\n\r\nIn other words, this is mostly about bypassing a mochiweb peculiarity. Note in https://tools.ietf.org/html/rfc3986#section-3.3 that the path can contain sub-delims (which include `+`). \r\n\r\n```\r\nsegment-nz-nc = 1*( unreserved / pct-encoded / sub-delims / \"@\" )\r\n                    ; non-zero-length segment without any colon \":\"\r\n```\r\n\r\nBut mochiweb doesn't pass `+` to the application correctly there and decodes it to a space.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330311639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330323062","html_url":"https://github.com/apache/couchdb/issues/825#issuecomment-330323062","issue_url":"https://api.github.com/repos/apache/couchdb/issues/825","id":330323062,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDMyMzA2Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-18T18:59:48Z","updated_at":"2017-09-18T18:59:48Z","author_association":"MEMBER","body":"Right. And you are suggesting to fix this by, depending on perspective, using non-standard encoder which treats `+`, `%2B` and `%20` all as the same \"plusOrSpace\" symbol, or, from an other angle, by making replication ID into non-unique identificator from http clients point of view.\r\n\r\nWell, if you see all the consequences and still think this is a good idea I don't know if I can convince you otherwise, but read [this saga](https://issues.apache.org/jira/browse/COUCHDB-2748) as an illustration how messy and confusing hacking URL encoding could get.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330323062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330401767","html_url":"https://github.com/apache/couchdb/pull/806#issuecomment-330401767","issue_url":"https://api.github.com/repos/apache/couchdb/issues/806","id":330401767,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDQwMTc2Nw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T01:31:18Z","updated_at":"2017-09-19T01:31:18Z","author_association":"CONTRIBUTOR","body":"Since dropping snappy compression for emsort showed some positive results. Made a PR for this PR\r\n\r\nhttps://github.com/apache/couchdb/pull/826\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330401767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330517393","html_url":"https://github.com/apache/couchdb/pull/786#issuecomment-330517393","issue_url":"https://api.github.com/repos/apache/couchdb/issues/786","id":330517393,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDUxNzM5Mw==","user":{"login":"iilyak","id":9804420,"node_id":"MDQ6VXNlcjk4MDQ0MjA=","avatar_url":"https://avatars.githubusercontent.com/u/9804420?v=4","gravatar_id":"","url":"https://api.github.com/users/iilyak","html_url":"https://github.com/iilyak","followers_url":"https://api.github.com/users/iilyak/followers","following_url":"https://api.github.com/users/iilyak/following{/other_user}","gists_url":"https://api.github.com/users/iilyak/gists{/gist_id}","starred_url":"https://api.github.com/users/iilyak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iilyak/subscriptions","organizations_url":"https://api.github.com/users/iilyak/orgs","repos_url":"https://api.github.com/users/iilyak/repos","events_url":"https://api.github.com/users/iilyak/events{/privacy}","received_events_url":"https://api.github.com/users/iilyak/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T12:02:06Z","updated_at":"2017-09-19T12:02:06Z","author_association":"CONTRIBUTOR","body":"This would introduce a mandatory dependency on nosetest. Would you mind to copy the information about dependencies from `https://github.com/apache/couchdb/blob/master/src/mango/test/README.md` to `https://github.com/apache/couchdb/blob/master/README-DEV.rst`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330517393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330557657","html_url":"https://github.com/apache/couchdb/pull/826#issuecomment-330557657","issue_url":"https://api.github.com/repos/apache/couchdb/issues/826","id":330557657,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDU1NzY1Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T14:28:22Z","updated_at":"2017-09-19T14:28:22Z","author_association":"MEMBER","body":"Did you try what happens with deflate_6 or similar? Removing compression worries me for nodes that are constantly under disk space pressure.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330557657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330559531","html_url":"https://github.com/apache/couchdb/pull/826#issuecomment-330559531","issue_url":"https://api.github.com/repos/apache/couchdb/issues/826","id":330559531,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDU1OTUzMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T14:34:23Z","updated_at":"2017-09-19T14:34:23Z","author_association":"CONTRIBUTOR","body":"Good idea should try deflate_6. Could even have an emsort compression type. That is snappy might work in one case but emsort because of the kind of data it uses might be better using no compression or deflate_N. Also should record the difference maybe in some cases, as in modify code to see what's the size difference.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330559531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330569385","html_url":"https://github.com/apache/couchdb/pull/828#issuecomment-330569385","issue_url":"https://api.github.com/repos/apache/couchdb/issues/828","id":330569385,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDU2OTM4NQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T15:04:18Z","updated_at":"2017-09-19T15:04:18Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330569385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330574753","html_url":"https://github.com/apache/couchdb/pull/828#issuecomment-330574753","issue_url":"https://api.github.com/repos/apache/couchdb/issues/828","id":330574753,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDU3NDc1Mw==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T15:21:23Z","updated_at":"2017-09-19T15:21:23Z","author_association":"MEMBER","body":"So, to be sure, this makes `/_scheduler/jobs/abc%20xyz` equal to `/_scheduler/jobs/abc%2Bxyz` equal to `/_scheduler/jobs/abc+xyz`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330574753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330576133","html_url":"https://github.com/apache/couchdb/pull/828#issuecomment-330576133","issue_url":"https://api.github.com/repos/apache/couchdb/issues/828","id":330576133,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDU3NjEzMw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-19T15:25:40Z","updated_at":"2017-09-19T15:27:33Z","author_association":"CONTRIBUTOR","body":"@eiri yap, internally they all get translated to `{\"baseid\", \"+extension+extension\"}` they are different ways to encode them. It's unambiguous because replication ids are generated by the server so the internal tuple format is guaranteed not to have space characters in the base or extension.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330576133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778090","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-330778090","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":330778090,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3ODA5MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:10:07Z","updated_at":"2017-09-20T08:10:07Z","author_association":"MEMBER","body":"bumpety bump bump...is this useful still or should we close it out? /cc @sagelywizard ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778222","html_url":"https://github.com/apache/couchdb/pull/495#issuecomment-330778222","issue_url":"https://api.github.com/repos/apache/couchdb/issues/495","id":330778222,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3ODIyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:10:42Z","updated_at":"2017-09-20T08:10:42Z","author_association":"MEMBER","body":"@davisp have at it, while we wait for Fauxton to be remediated, now is the perfect time to merge it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778360","html_url":"https://github.com/apache/couchdb/pull/567#issuecomment-330778360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/567","id":330778360,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3ODM2MA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:11:26Z","updated_at":"2017-09-20T08:11:26Z","author_association":"MEMBER","body":"bump. we should do this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778617","html_url":"https://github.com/apache/couchdb/pull/597#issuecomment-330778617","issue_url":"https://api.github.com/repos/apache/couchdb/issues/597","id":330778617,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3ODYxNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:12:22Z","updated_at":"2017-09-20T08:12:22Z","author_association":"MEMBER","body":"Go ahead and merge this when ready @jiangphcn .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778891","html_url":"https://github.com/apache/couchdb/pull/759#issuecomment-330778891","issue_url":"https://api.github.com/repos/apache/couchdb/issues/759","id":330778891,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3ODg5MQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:13:30Z","updated_at":"2017-09-20T08:13:30Z","author_association":"MEMBER","body":"We know that CouchDB fails on Erlang 20. And we no longer allow merges to master that would cause our builds to fail.\r\n\r\nAs such I am rejecting this PR until proper fixes can be made to CouchDB to make it work on 20 (as well as still work on 16B03!)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330778891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330779027","html_url":"https://github.com/apache/couchdb/pull/763#issuecomment-330779027","issue_url":"https://api.github.com/repos/apache/couchdb/issues/763","id":330779027,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3OTAyNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:14:08Z","updated_at":"2017-09-20T08:14:08Z","author_association":"MEMBER","body":"Closing until I can confirm what we should do re: @chewbranca 's comments.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330779027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330779765","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-330779765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":330779765,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDc3OTc2NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T08:17:22Z","updated_at":"2017-09-20T08:17:22Z","author_association":"MEMBER","body":"Before merging this we'll definitely want to see a test for this.\r\n\r\nCan you confirm that this does the right thing on the clustered port (5984)? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330779765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330825360","html_url":"https://github.com/apache/couchdb/pull/827#issuecomment-330825360","issue_url":"https://api.github.com/repos/apache/couchdb/issues/827","id":330825360,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDgyNTM2MA==","user":{"login":"almightyju","id":7722347,"node_id":"MDQ6VXNlcjc3MjIzNDc=","avatar_url":"https://avatars.githubusercontent.com/u/7722347?v=4","gravatar_id":"","url":"https://api.github.com/users/almightyju","html_url":"https://github.com/almightyju","followers_url":"https://api.github.com/users/almightyju/followers","following_url":"https://api.github.com/users/almightyju/following{/other_user}","gists_url":"https://api.github.com/users/almightyju/gists{/gist_id}","starred_url":"https://api.github.com/users/almightyju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/almightyju/subscriptions","organizations_url":"https://api.github.com/users/almightyju/orgs","repos_url":"https://api.github.com/users/almightyju/repos","events_url":"https://api.github.com/users/almightyju/events{/privacy}","received_events_url":"https://api.github.com/users/almightyju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T11:37:35Z","updated_at":"2017-09-20T11:37:35Z","author_association":"CONTRIBUTOR","body":"I've been using this build myself for dev since making the pull request and it all works as expected on port 5984. \r\n\r\nWith the tests I can see how the login is handled easy enough but I can't work out how the server is started since I guess it would have to be restarted with different a config to test the domain gets set on the cookie correctly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330825360/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330861588","html_url":"https://github.com/apache/couchdb/pull/567#issuecomment-330861588","issue_url":"https://api.github.com/repos/apache/couchdb/issues/567","id":330861588,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg2MTU4OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T14:03:22Z","updated_at":"2017-09-20T14:03:22Z","author_association":"MEMBER","body":"@wohali Says merged or am I missing something else?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330861588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330861785","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-330861785","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":330861785,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg2MTc4NQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T14:04:02Z","updated_at":"2017-09-20T14:04:02Z","author_association":"MEMBER","body":"I don't want to merge this till we get an idea what the performance of the LRU is given the couch_server similarity which already bites us quite hard.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330861785/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330878455","html_url":"https://github.com/apache/couchdb/pull/567#issuecomment-330878455","issue_url":"https://api.github.com/repos/apache/couchdb/issues/567","id":330878455,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg3ODQ1NQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T14:57:02Z","updated_at":"2017-09-20T14:57:02Z","author_association":"MEMBER","body":"@davisp That's a different PR. This is definitely not done, otherwise we'd have a /src/setup directory in this repo, and we don't.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330878455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330888592","html_url":"https://github.com/apache/couchdb/pull/567#issuecomment-330888592","issue_url":"https://api.github.com/repos/apache/couchdb/issues/567","id":330888592,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMDg4ODU5Mg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-20T15:28:21Z","updated_at":"2017-09-20T15:28:21Z","author_association":"MEMBER","body":"@wohali Let that be a lesson for me to never read through PR activity before my first coffee.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/330888592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331074288","html_url":"https://github.com/apache/couchdb/pull/597#issuecomment-331074288","issue_url":"https://api.github.com/repos/apache/couchdb/issues/597","id":331074288,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTA3NDI4OA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T07:23:14Z","updated_at":"2017-09-21T07:23:14Z","author_association":"CONTRIBUTOR","body":"Thanks @wohali for your reminder and patience. There is some suggestion from Ops expert about not moving view index to /srv/view_index/.recovery directory. Otherwise, it will use more inode and there is risky that there is no atime to set for some mounted driver. I have to hold on merge this PR and will come back later. Thanks again. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331074288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331277881","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-331277881","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":331277881,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI3Nzg4MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T20:50:30Z","updated_at":"2017-09-21T20:50:30Z","author_association":"CONTRIBUTOR","body":"Maybe another option is to use a Mango based selector as described here:\r\n\r\nhttps://blog.couchdb.org/2016/08/15/feature-replication/comment-page-1/ (see A New Way to Filter section).\r\n\r\nThen each replication document would specify a selector to pick from a specific class only.\r\n\r\nBy default the basic view based filtering doesn't end up using the view data and just re-uses the map function in the most naive way.\r\n\r\nThere is a feature which allows using the view. It was implemented here:\r\n\r\nhttps://github.com/apache/couchdb-couch-mrview/pull/2\r\n\r\n I think it involves added these options to the view `\"options\": {\"seq_indexed\": true, \"keyseq_indexed\": true}}`. But have never used it and not sure how it works.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331277881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331282020","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-331282020","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":331282020,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTI4MjAyMA==","user":{"login":"redgeoff","id":3378986,"node_id":"MDQ6VXNlcjMzNzg5ODY=","avatar_url":"https://avatars.githubusercontent.com/u/3378986?v=4","gravatar_id":"","url":"https://api.github.com/users/redgeoff","html_url":"https://github.com/redgeoff","followers_url":"https://api.github.com/users/redgeoff/followers","following_url":"https://api.github.com/users/redgeoff/following{/other_user}","gists_url":"https://api.github.com/users/redgeoff/gists{/gist_id}","starred_url":"https://api.github.com/users/redgeoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redgeoff/subscriptions","organizations_url":"https://api.github.com/users/redgeoff/orgs","repos_url":"https://api.github.com/users/redgeoff/repos","events_url":"https://api.github.com/users/redgeoff/events{/privacy}","received_events_url":"https://api.github.com/users/redgeoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-21T21:06:32Z","updated_at":"2017-09-21T21:06:32Z","author_association":"CONTRIBUTOR","body":"@nickva great point on the selector and that is exactly what we have already done as an interim solution and it appears to be a little faster. Ultimately though, using a view with a cached index would be faster, no?\r\n\r\nSo, in the case of the view endpoint: `people/_design/views/_view/students_by_class?key=Calculus`, isn't CouchDB using the view data? I haven't dug into the code, but from a high level testing perspective, this type of query appears to run quite fast.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331282020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331319135","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-331319135","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":331319135,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTMxOTEzNQ==","user":{"login":"sagelywizard","id":167249,"node_id":"MDQ6VXNlcjE2NzI0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/167249?v=4","gravatar_id":"","url":"https://api.github.com/users/sagelywizard","html_url":"https://github.com/sagelywizard","followers_url":"https://api.github.com/users/sagelywizard/followers","following_url":"https://api.github.com/users/sagelywizard/following{/other_user}","gists_url":"https://api.github.com/users/sagelywizard/gists{/gist_id}","starred_url":"https://api.github.com/users/sagelywizard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagelywizard/subscriptions","organizations_url":"https://api.github.com/users/sagelywizard/orgs","repos_url":"https://api.github.com/users/sagelywizard/repos","events_url":"https://api.github.com/users/sagelywizard/events{/privacy}","received_events_url":"https://api.github.com/users/sagelywizard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T00:40:52Z","updated_at":"2017-09-22T00:40:52Z","author_association":"MEMBER","body":"What sort of performance stats do you think would show that these changes aren't problematic from a performance perspective, Paul? Comparing open/close throughput before/after? Comparing the index open latency on new/old CouchDB when more than the max number of indexes are open? It's worth noting that this change works completely differently than the existing couch_server.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331319135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331454815","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-331454815","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":331454815,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTQ1NDgxNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T13:59:43Z","updated_at":"2017-09-22T13:59:43Z","author_association":"MEMBER","body":"@sagelywizard I'd like to at least have some tests that show how many open indexes we can have before this becomes a bottleneck. And then looking at the rates of open/closing we can sustain when we're close to that threshold.\r\n\r\nI'm confused when you say its completely different than couch_server. Its going so far as to reuse couch_lru and has similar idle/not-idle states that it uses to decide when to close views along with the public ets table cache pattern. Am I missing something else?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331454815/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331545601","html_url":"https://github.com/apache/couchdb/issues/829#issuecomment-331545601","issue_url":"https://api.github.com/repos/apache/couchdb/issues/829","id":331545601,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU0NTYwMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T19:56:35Z","updated_at":"2017-09-22T19:56:35Z","author_association":"MEMBER","body":"Good find. I’ll have a PR for this shortly, basic test results are promising: 10-20% speed improvement in CPU and wall time.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331545601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331552644","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331552644","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331552644,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU1MjY0NA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T20:28:55Z","updated_at":"2017-09-22T20:28:55Z","author_association":"MEMBER","body":"Looks good to me, but changing `?term_size/1` scares me. @davisp - second opinion, please?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331552644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331552828","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331552828","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331552828,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU1MjgyOA==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T20:29:58Z","updated_at":"2017-09-22T20:29:58Z","author_association":"MEMBER","body":"Also addresses #829, for sake of references.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331552828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331557881","html_url":"https://github.com/apache/couchdb/issues/829#issuecomment-331557881","issue_url":"https://api.github.com/repos/apache/couchdb/issues/829","id":331557881,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU1Nzg4MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T20:53:16Z","updated_at":"2017-09-22T20:53:16Z","author_association":"MEMBER","body":"@nickva would have been great to have had that PR referenced first. On the plus side, my patch looks eerily similar.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331557881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331558585","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331558585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331558585,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU1ODU4NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T20:56:31Z","updated_at":"2017-09-22T20:56:31Z","author_association":"MEMBER","body":"I’ve independently and accidentally developed nearly the same patch. I avoided redefining `?term_size`, but this lgtm if @davisp agrees.\r\n\r\nWould be nice to get a few more numbers on how much faster this is cc @chewbranca. This could play a nice role in the 2.2 announcement.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331558585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331566348","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331566348","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331566348,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU2NjM0OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T21:36:39Z","updated_at":"2017-09-22T21:36:39Z","author_association":"MEMBER","body":"Ran more numbers, a 1GB database (npm registry subset) with the whole database file in the fs cache (e.g. no read activity on the disk), seeing improvements between 10% and 30% in both CPU and wall clock time (normalised over 3 runs each), and corresponding higher write throughput to disk. All on my laptop so highly unscientific, but enough of a difference to mark as significant.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331566348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331571765","html_url":"https://github.com/apache/couchdb/pull/477#issuecomment-331571765","issue_url":"https://api.github.com/repos/apache/couchdb/issues/477","id":331571765,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU3MTc2NQ==","user":{"login":"sagelywizard","id":167249,"node_id":"MDQ6VXNlcjE2NzI0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/167249?v=4","gravatar_id":"","url":"https://api.github.com/users/sagelywizard","html_url":"https://github.com/sagelywizard","followers_url":"https://api.github.com/users/sagelywizard/followers","following_url":"https://api.github.com/users/sagelywizard/following{/other_user}","gists_url":"https://api.github.com/users/sagelywizard/gists{/gist_id}","starred_url":"https://api.github.com/users/sagelywizard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagelywizard/subscriptions","organizations_url":"https://api.github.com/users/sagelywizard/orgs","repos_url":"https://api.github.com/users/sagelywizard/repos","events_url":"https://api.github.com/users/sagelywizard/events{/privacy}","received_events_url":"https://api.github.com/users/sagelywizard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T22:08:15Z","updated_at":"2017-09-22T22:08:15Z","author_association":"MEMBER","body":"Oh, yeah, you're right. I wrote a few different versions, a couple of which were completely different, but this one is pretty similar.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331571765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331583946","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331583946","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331583946,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTU4Mzk0Ng==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-22T23:42:20Z","updated_at":"2017-09-22T23:42:20Z","author_association":"CONTRIBUTOR","body":"Good call on benchmarking this.\r\n\r\nI have a compaction benchmark script and with `deflate_9` compression and large docs it shows good improvement about 40% or so.\r\n\r\nhttps://gist.github.com/nickva/e87aa2f7f896805bfee36a044a3800b0\r\n\r\nSo it makes 100k docs of size 10k each. Then times compaction.\r\n\r\n*master* \r\n\r\n```\r\n$ ./compact_bench.py -n 100000 -s 10000\r\n\r\n**************** num=100000,size=10000 ****************\r\n Updating   : 1059.3s docs/s:94 revs/s:94 fsize:850620615\r\n Compacting : 35.5s docs/s:2816 revs/s:2816 fsize:773591239\r\n```\r\n\r\n*PR branch*\r\n\r\n```\r\n$ ./compact_bench.py -n 100000 -s 10000\r\n\r\n**************** num=100000,size=10000 ****************\r\n Updating   : 1000.7s docs/s:99 revs/s:99 fsize:850620615\r\n Compacting : 19.6s docs/s:5091 revs/s:5091 fsize:773599431\r\n````","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331583946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331633615","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-331633615","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":331633615,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTYzMzYxNQ==","user":{"login":"acnebs","id":9054108,"node_id":"MDQ6VXNlcjkwNTQxMDg=","avatar_url":"https://avatars.githubusercontent.com/u/9054108?v=4","gravatar_id":"","url":"https://api.github.com/users/acnebs","html_url":"https://github.com/acnebs","followers_url":"https://api.github.com/users/acnebs/followers","following_url":"https://api.github.com/users/acnebs/following{/other_user}","gists_url":"https://api.github.com/users/acnebs/gists{/gist_id}","starred_url":"https://api.github.com/users/acnebs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acnebs/subscriptions","organizations_url":"https://api.github.com/users/acnebs/orgs","repos_url":"https://api.github.com/users/acnebs/repos","events_url":"https://api.github.com/users/acnebs/events{/privacy}","received_events_url":"https://api.github.com/users/acnebs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-23T13:06:09Z","updated_at":"2017-09-23T13:24:11Z","author_association":"NONE","body":"I think I'm having the same issue, although I'm running macOS 10.12.6.\r\n\r\n[Here are my logs](https://pastebin.com/EGte82sm).\r\n\r\nSame rodeo. If I delete the old database, CouchDB functions just fine. \r\n\r\nThis break seems to have happened when I changed a string in a single document via Fauxton.\r\nHowever, this doesn't make sense to me, as both strings are functionally identical - ASCII strings with no whitespace, length < 10.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331633615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331700973","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331700973","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331700973,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwMDk3Mw==","user":{"login":"budiadiono","id":796331,"node_id":"MDQ6VXNlcjc5NjMzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/796331?v=4","gravatar_id":"","url":"https://api.github.com/users/budiadiono","html_url":"https://github.com/budiadiono","followers_url":"https://api.github.com/users/budiadiono/followers","following_url":"https://api.github.com/users/budiadiono/following{/other_user}","gists_url":"https://api.github.com/users/budiadiono/gists{/gist_id}","starred_url":"https://api.github.com/users/budiadiono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/budiadiono/subscriptions","organizations_url":"https://api.github.com/users/budiadiono/orgs","repos_url":"https://api.github.com/users/budiadiono/repos","events_url":"https://api.github.com/users/budiadiono/events{/privacy}","received_events_url":"https://api.github.com/users/budiadiono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T10:28:02Z","updated_at":"2017-09-24T10:28:02Z","author_association":"NONE","body":"Any temporary solution for this? I'm having same issue when running on Centos 7.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331700973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331703268","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331703268","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331703268,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwMzI2OA==","user":{"login":"domachine","id":413208,"node_id":"MDQ6VXNlcjQxMzIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/413208?v=4","gravatar_id":"","url":"https://api.github.com/users/domachine","html_url":"https://github.com/domachine","followers_url":"https://api.github.com/users/domachine/followers","following_url":"https://api.github.com/users/domachine/following{/other_user}","gists_url":"https://api.github.com/users/domachine/gists{/gist_id}","starred_url":"https://api.github.com/users/domachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domachine/subscriptions","organizations_url":"https://api.github.com/users/domachine/orgs","repos_url":"https://api.github.com/users/domachine/repos","events_url":"https://api.github.com/users/domachine/events{/privacy}","received_events_url":"https://api.github.com/users/domachine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T11:18:56Z","updated_at":"2017-09-24T11:18:56Z","author_association":"NONE","body":"My solution is currently that I reimplemented this feature using a separate\nprocess (Node.js) that listens to the _user database changes. If you're\ninterested I can try to setup a repo to demo this approach.\n\nAm 24.09.2017 12:28 nachm. schrieb \"Budi Adiono\" <notifications@github.com>:\n\n> Any temporary solution for this? I'm having same issue when running on\n> Centos 7.\n>\n> —\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/couchdb/issues/749#issuecomment-331700973>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AAZOGPbsejOY8rFkVwcE0-chA_HUymvdks5sli65gaJpZM4O1obs>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331703268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331704227","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331704227","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331704227,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwNDIyNw==","user":{"login":"budiadiono","id":796331,"node_id":"MDQ6VXNlcjc5NjMzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/796331?v=4","gravatar_id":"","url":"https://api.github.com/users/budiadiono","html_url":"https://github.com/budiadiono","followers_url":"https://api.github.com/users/budiadiono/followers","following_url":"https://api.github.com/users/budiadiono/following{/other_user}","gists_url":"https://api.github.com/users/budiadiono/gists{/gist_id}","starred_url":"https://api.github.com/users/budiadiono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/budiadiono/subscriptions","organizations_url":"https://api.github.com/users/budiadiono/orgs","repos_url":"https://api.github.com/users/budiadiono/repos","events_url":"https://api.github.com/users/budiadiono/events{/privacy}","received_events_url":"https://api.github.com/users/budiadiono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T11:38:16Z","updated_at":"2017-09-24T11:38:16Z","author_association":"NONE","body":"@domachine That's is interesting! -- so, the idea is to turn of the `per user` feature and create a listener that manually creates/drops user's db once `_users` database changes? I was thinking that too, but I don't know if it's good idea or not.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331704227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331704343","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331704343","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331704343,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwNDM0Mw==","user":{"login":"domachine","id":413208,"node_id":"MDQ6VXNlcjQxMzIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/413208?v=4","gravatar_id":"","url":"https://api.github.com/users/domachine","html_url":"https://github.com/domachine","followers_url":"https://api.github.com/users/domachine/followers","following_url":"https://api.github.com/users/domachine/following{/other_user}","gists_url":"https://api.github.com/users/domachine/gists{/gist_id}","starred_url":"https://api.github.com/users/domachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domachine/subscriptions","organizations_url":"https://api.github.com/users/domachine/orgs","repos_url":"https://api.github.com/users/domachine/repos","events_url":"https://api.github.com/users/domachine/events{/privacy}","received_events_url":"https://api.github.com/users/domachine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T11:40:27Z","updated_at":"2017-09-24T11:42:32Z","author_association":"NONE","body":"I don't know if this is a good idea, either :blush:. But it works for me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331704343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331705052","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331705052","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331705052,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwNTA1Mg==","user":{"login":"budiadiono","id":796331,"node_id":"MDQ6VXNlcjc5NjMzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/796331?v=4","gravatar_id":"","url":"https://api.github.com/users/budiadiono","html_url":"https://github.com/budiadiono","followers_url":"https://api.github.com/users/budiadiono/followers","following_url":"https://api.github.com/users/budiadiono/following{/other_user}","gists_url":"https://api.github.com/users/budiadiono/gists{/gist_id}","starred_url":"https://api.github.com/users/budiadiono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/budiadiono/subscriptions","organizations_url":"https://api.github.com/users/budiadiono/orgs","repos_url":"https://api.github.com/users/budiadiono/repos","events_url":"https://api.github.com/users/budiadiono/events{/privacy}","received_events_url":"https://api.github.com/users/budiadiono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T11:54:40Z","updated_at":"2017-09-24T11:54:40Z","author_association":"NONE","body":"Haha.. seems we've got to choose this way though. I'm interest to see your workaround.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331705052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331705817","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331705817","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331705817,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTcwNTgxNw==","user":{"login":"domachine","id":413208,"node_id":"MDQ6VXNlcjQxMzIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/413208?v=4","gravatar_id":"","url":"https://api.github.com/users/domachine","html_url":"https://github.com/domachine","followers_url":"https://api.github.com/users/domachine/followers","following_url":"https://api.github.com/users/domachine/following{/other_user}","gists_url":"https://api.github.com/users/domachine/gists{/gist_id}","starred_url":"https://api.github.com/users/domachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/domachine/subscriptions","organizations_url":"https://api.github.com/users/domachine/orgs","repos_url":"https://api.github.com/users/domachine/repos","events_url":"https://api.github.com/users/domachine/events{/privacy}","received_events_url":"https://api.github.com/users/domachine/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T12:09:37Z","updated_at":"2017-09-24T12:09:37Z","author_association":"NONE","body":"I'm currently on the road but get back this evening.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331705817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331740611","html_url":"https://github.com/apache/couchdb/issues/749#issuecomment-331740611","issue_url":"https://api.github.com/repos/apache/couchdb/issues/749","id":331740611,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTc0MDYxMQ==","user":{"login":"budiadiono","id":796331,"node_id":"MDQ6VXNlcjc5NjMzMQ==","avatar_url":"https://avatars.githubusercontent.com/u/796331?v=4","gravatar_id":"","url":"https://api.github.com/users/budiadiono","html_url":"https://github.com/budiadiono","followers_url":"https://api.github.com/users/budiadiono/followers","following_url":"https://api.github.com/users/budiadiono/following{/other_user}","gists_url":"https://api.github.com/users/budiadiono/gists{/gist_id}","starred_url":"https://api.github.com/users/budiadiono/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/budiadiono/subscriptions","organizations_url":"https://api.github.com/users/budiadiono/orgs","repos_url":"https://api.github.com/users/budiadiono/repos","events_url":"https://api.github.com/users/budiadiono/events{/privacy}","received_events_url":"https://api.github.com/users/budiadiono/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-24T21:13:18Z","updated_at":"2017-09-24T21:13:18Z","author_association":"NONE","body":"no rush 😊","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331740611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331934840","html_url":"https://github.com/apache/couchdb/pull/835#issuecomment-331934840","issue_url":"https://api.github.com/repos/apache/couchdb/issues/835","id":331934840,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTkzNDg0MA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:21:29Z","updated_at":"2017-09-25T16:21:29Z","author_association":"MEMBER","body":"@eiri Actually not having minor_version in there is a bit of an oversight as we use minor_version everywhere when doing term_to_binary calls before writing to disk (as we should).\r\n\r\n+1\r\n\r\nGreat find!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331934840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331938255","html_url":"https://github.com/apache/couchdb/pull/837#issuecomment-331938255","issue_url":"https://api.github.com/repos/apache/couchdb/issues/837","id":331938255,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTkzODI1NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:33:41Z","updated_at":"2017-09-25T16:33:41Z","author_association":"MEMBER","body":"Note that there are already `/{db}/_shards` and `/{db}/_shards/{id}` that provide more detailed information on sharding and quorum, so information for `q` and `n` could be gathered from there.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331938255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331941574","html_url":"https://github.com/apache/couchdb/pull/837#issuecomment-331941574","issue_url":"https://api.github.com/repos/apache/couchdb/issues/837","id":331941574,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk0MTU3NA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:45:38Z","updated_at":"2017-09-25T16:45:38Z","author_association":"MEMBER","body":"+1\r\n\r\nThough do we need to update docs as well?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331941574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331942020","html_url":"https://github.com/apache/couchdb/issues/834#issuecomment-331942020","issue_url":"https://api.github.com/repos/apache/couchdb/issues/834","id":331942020,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk0MjAyMA==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T16:47:12Z","updated_at":"2017-09-25T16:47:12Z","author_association":"CONTRIBUTOR","body":"@wohali: I'm on it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331942020/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331951011","html_url":"https://github.com/apache/couchdb/pull/833#issuecomment-331951011","issue_url":"https://api.github.com/repos/apache/couchdb/issues/833","id":331951011,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk1MTAxMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T17:20:01Z","updated_at":"2017-09-25T17:20:01Z","author_association":"CONTRIBUTOR","body":"Close is in favor of a better approach as suggested by @davisp https://github.com/apache/couchdb/pull/838","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331951011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331959527","html_url":"https://github.com/apache/couchdb/pull/830#issuecomment-331959527","issue_url":"https://api.github.com/repos/apache/couchdb/issues/830","id":331959527,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk1OTUyNw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T17:48:16Z","updated_at":"2017-09-25T17:48:16Z","author_association":"CONTRIBUTOR","body":"+1 (but see note first about config).\r\n\r\nChecked with tracing that setting interval to 3 seconds via config ends up with aggregator calling `collect` every 3 seconds.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331959527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331980095","html_url":"https://github.com/apache/couchdb/pull/830#issuecomment-331980095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/830","id":331980095,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk4MDA5NQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T19:01:24Z","updated_at":"2017-09-25T19:01:24Z","author_association":"MEMBER","body":"Hey @nickva thank you for the review. I've moved defaults in private header file. Do you find this an acceptable alternative to suggested API call?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331980095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331988128","html_url":"https://github.com/apache/couchdb/pull/830#issuecomment-331988128","issue_url":"https://api.github.com/repos/apache/couchdb/issues/830","id":331988128,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMTk4ODEyOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-25T19:33:54Z","updated_at":"2017-09-25T19:33:54Z","author_association":"CONTRIBUTOR","body":"@eiri that will work, good idea!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/331988128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332058549","html_url":"https://github.com/apache/couchdb/issues/834#issuecomment-332058549","issue_url":"https://api.github.com/repos/apache/couchdb/issues/834","id":332058549,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjA1ODU0OQ==","user":{"login":"tonysun83","id":6991573,"node_id":"MDQ6VXNlcjY5OTE1NzM=","avatar_url":"https://avatars.githubusercontent.com/u/6991573?v=4","gravatar_id":"","url":"https://api.github.com/users/tonysun83","html_url":"https://github.com/tonysun83","followers_url":"https://api.github.com/users/tonysun83/followers","following_url":"https://api.github.com/users/tonysun83/following{/other_user}","gists_url":"https://api.github.com/users/tonysun83/gists{/gist_id}","starred_url":"https://api.github.com/users/tonysun83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tonysun83/subscriptions","organizations_url":"https://api.github.com/users/tonysun83/orgs","repos_url":"https://api.github.com/users/tonysun83/repos","events_url":"https://api.github.com/users/tonysun83/events{/privacy}","received_events_url":"https://api.github.com/users/tonysun83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T01:23:03Z","updated_at":"2017-09-26T01:23:23Z","author_association":"CONTRIBUTOR","body":"PR : https://github.com/apache/couchdb/pull/839/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332058549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332172559","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-332172559","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":332172559,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjE3MjU1OQ==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T11:43:26Z","updated_at":"2017-09-26T11:43:26Z","author_association":"MEMBER","body":"For what it worth, `seq` and `kseq` indexing in mrview is broken right now #592, so in Couch 2.1 so called `fast_view` for replication shorted cut to regular view filtering, that evaluates each doc interactively and not actually using built index.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332172559/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332199152","html_url":"https://github.com/apache/couchdb/pull/837#issuecomment-332199152","issue_url":"https://api.github.com/repos/apache/couchdb/issues/837","id":332199152,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjE5OTE1Mg==","user":{"login":"eiri","id":70542,"node_id":"MDQ6VXNlcjcwNTQy","avatar_url":"https://avatars.githubusercontent.com/u/70542?v=4","gravatar_id":"","url":"https://api.github.com/users/eiri","html_url":"https://github.com/eiri","followers_url":"https://api.github.com/users/eiri/followers","following_url":"https://api.github.com/users/eiri/following{/other_user}","gists_url":"https://api.github.com/users/eiri/gists{/gist_id}","starred_url":"https://api.github.com/users/eiri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eiri/subscriptions","organizations_url":"https://api.github.com/users/eiri/orgs","repos_url":"https://api.github.com/users/eiri/repos","events_url":"https://api.github.com/users/eiri/events{/privacy}","received_events_url":"https://api.github.com/users/eiri/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T13:32:45Z","updated_at":"2017-09-26T13:32:45Z","author_association":"MEMBER","body":"@davisp Good idea. I've opened apache/couchdb-documentation#164 for update on a cluster config and I guess a section about `_db_info` will need to be updated after this change end up in a release? ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332199152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332236778","html_url":"https://github.com/apache/couchdb/issues/829#issuecomment-332236778","issue_url":"https://api.github.com/repos/apache/couchdb/issues/829","id":332236778,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjIzNjc3OA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T15:30:06Z","updated_at":"2017-09-26T15:30:06Z","author_association":"CONTRIBUTOR","body":"This was fixed, close it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332236778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332236901","html_url":"https://github.com/apache/couchdb/issues/659#issuecomment-332236901","issue_url":"https://api.github.com/repos/apache/couchdb/issues/659","id":332236901,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjIzNjkwMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T15:30:28Z","updated_at":"2017-09-26T15:30:28Z","author_association":"CONTRIBUTOR","body":"This was fixed. Close it.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332236901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332250543","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-332250543","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":332250543,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI1MDU0Mw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T16:11:16Z","updated_at":"2017-09-26T16:11:16Z","author_association":"MEMBER","body":"That looks like CouchDB is running fine, but the contributed application that @janl wrote has some sort of error.\r\n\r\nAre you able to `curl localhost:5984` in a terminal window and get the proper response at least?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332250543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332282511","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332282511","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332282511,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4MjUxMQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T17:57:53Z","updated_at":"2017-09-26T17:57:53Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332282511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284106","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332284106","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332284106,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NDEwNg==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:02:43Z","updated_at":"2017-09-26T18:02:43Z","author_association":"MEMBER","body":"Don't you need an /integer specification on those?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284229","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332284229","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332284229,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NDIyOQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:03:04Z","updated_at":"2017-09-26T18:03:04Z","author_association":"MEMBER","body":"Also might make sense to pull it out into a function.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284306","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332284306","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332284306,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NDMwNg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:03:18Z","updated_at":"2017-09-26T18:03:18Z","author_association":"CONTRIBUTOR","body":"Integer is the default, I think","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284375","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-332284375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":332284375,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NDM3NQ==","user":{"login":"hugazo","id":27823668,"node_id":"MDQ6VXNlcjI3ODIzNjY4","avatar_url":"https://avatars.githubusercontent.com/u/27823668?v=4","gravatar_id":"","url":"https://api.github.com/users/hugazo","html_url":"https://github.com/hugazo","followers_url":"https://api.github.com/users/hugazo/followers","following_url":"https://api.github.com/users/hugazo/following{/other_user}","gists_url":"https://api.github.com/users/hugazo/gists{/gist_id}","starred_url":"https://api.github.com/users/hugazo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hugazo/subscriptions","organizations_url":"https://api.github.com/users/hugazo/orgs","repos_url":"https://api.github.com/users/hugazo/repos","events_url":"https://api.github.com/users/hugazo/events{/privacy}","received_events_url":"https://api.github.com/users/hugazo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:03:32Z","updated_at":"2017-09-26T18:12:53Z","author_association":"NONE","body":"I'm having the same ussue, curl returns the following:\r\n\r\n➜  ~ curl http://127.0.0.1:5984\r\ncurl: (7) Failed to connect to 127.0.0.1 port 5984: Connection refused\r\n\r\nIn addition, i have the same environment that OP:\r\nOS: Mac OS High Sierra 10.13 (17A365) (App Store Release)\r\nCouchDB: 2.1.0","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332284375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332286607","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332286607","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332286607,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NjYwNw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:11:07Z","updated_at":"2017-09-26T18:11:07Z","author_association":"MEMBER","body":"Huh. I would've expected binary as the default but I guess I just add specifiers out of habit.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332286607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332287275","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332287275","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332287275,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NzI3NQ==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:13:18Z","updated_at":"2017-09-26T18:13:18Z","author_association":"CONTRIBUTOR","body":"Yeah I'm thinking we would be better served by a function like:\r\n\r\n```erlang\r\nmaybe_seed() ->\r\n    case get(random_seed) of\r\n        undefined ->\r\n            <<A:32, B:32, C:32>> = crypto:rand_bytes(12),\r\n            Seed = {A, B, C},\r\n            random:seed(Seed),\r\n            Seed;\r\n        Seed ->\r\n            Seed\r\nend.\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332287275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332287544","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332287544","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332287544,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4NzU0NA==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:14:18Z","updated_at":"2017-09-26T18:14:18Z","author_association":"CONTRIBUTOR","body":"It's a shame we can't use the `rand` module, as `rand` takes care of this automatically, but it's not in all the versions of Erlang we support. The `random` module has a terrible default seed: https://github.com/erlang/otp/blob/master/lib/stdlib/src/random.erl#L44-L45","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332287544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332289518","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332289518","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332289518,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI4OTUxOA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:21:10Z","updated_at":"2017-09-26T18:21:10Z","author_association":"CONTRIBUTOR","body":"@chewbranca why terrible? It's a perfectly fine randomly chosen number :P \r\n\r\nhttps://www.xkcd.com/221/","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332289518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332290441","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332290441","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332290441,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI5MDQ0MQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:24:16Z","updated_at":"2017-09-26T18:24:16Z","author_association":"CONTRIBUTOR","body":"@davisp agree. Binary would seem to be a default type for a ... binary. Not sure why integers were picked.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332290441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332292982","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332292982","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332292982,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI5Mjk4Mg==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:32:34Z","updated_at":"2017-09-26T18:32:34Z","author_association":"CONTRIBUTOR","body":"@nickva well if `{3172, 9814, 20125}.` was chosen by way of random dice roll then we should be good. I feel bad for whoever had to roll dice that many times, although perhaps they had help from Emanuel Czuber.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332292982/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332296414","html_url":"https://github.com/apache/couchdb/pull/841#issuecomment-332296414","issue_url":"https://api.github.com/repos/apache/couchdb/issues/841","id":332296414,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjI5NjQxNA==","user":{"login":"chewbranca","id":5326,"node_id":"MDQ6VXNlcjUzMjY=","avatar_url":"https://avatars.githubusercontent.com/u/5326?v=4","gravatar_id":"","url":"https://api.github.com/users/chewbranca","html_url":"https://github.com/chewbranca","followers_url":"https://api.github.com/users/chewbranca/followers","following_url":"https://api.github.com/users/chewbranca/following{/other_user}","gists_url":"https://api.github.com/users/chewbranca/gists{/gist_id}","starred_url":"https://api.github.com/users/chewbranca/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chewbranca/subscriptions","organizations_url":"https://api.github.com/users/chewbranca/orgs","repos_url":"https://api.github.com/users/chewbranca/repos","events_url":"https://api.github.com/users/chewbranca/events{/privacy}","received_events_url":"https://api.github.com/users/chewbranca/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-26T18:44:09Z","updated_at":"2017-09-26T18:44:09Z","author_association":"CONTRIBUTOR","body":"Closing this out.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332296414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332374432","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-332374432","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":332374432,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM3NDQzMg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T00:34:05Z","updated_at":"2017-09-27T00:34:05Z","author_association":"MEMBER","body":"@redgeoff the trick is that replication needs to be incrementally resumable, so if you want to build an index to drive filtered replication the server also needs to maintain a second internal index to get a list of all the changed and deleted keys in that index since your last request. Hopefully that makes sense. That's the PR @nickva pointed you to, although as @eiri mentioned it's not currently functional.\r\n\r\nYou're certainly right that the normal `_view` API uses a dedicated index and is quite fast, but in the default configuration a view has no way to efficiently deliver you a subset of recently changed rows.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332374432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332376656","html_url":"https://github.com/apache/couchdb/issues/831#issuecomment-332376656","issue_url":"https://api.github.com/repos/apache/couchdb/issues/831","id":332376656,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjM3NjY1Ng==","user":{"login":"redgeoff","id":3378986,"node_id":"MDQ6VXNlcjMzNzg5ODY=","avatar_url":"https://avatars.githubusercontent.com/u/3378986?v=4","gravatar_id":"","url":"https://api.github.com/users/redgeoff","html_url":"https://github.com/redgeoff","followers_url":"https://api.github.com/users/redgeoff/followers","following_url":"https://api.github.com/users/redgeoff/following{/other_user}","gists_url":"https://api.github.com/users/redgeoff/gists{/gist_id}","starred_url":"https://api.github.com/users/redgeoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redgeoff/subscriptions","organizations_url":"https://api.github.com/users/redgeoff/orgs","repos_url":"https://api.github.com/users/redgeoff/repos","events_url":"https://api.github.com/users/redgeoff/events{/privacy}","received_events_url":"https://api.github.com/users/redgeoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T00:50:24Z","updated_at":"2017-09-27T00:50:24Z","author_association":"CONTRIBUTOR","body":"Ah interesting, so this is more complicated than I had hoped :(. I guess we'll have to wait until #592 is fixed before a `key` parameter can be added and actually used.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332376656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332473256","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-332473256","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":332473256,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjQ3MzI1Ng==","user":{"login":"dj-at-work","id":8239167,"node_id":"MDQ6VXNlcjgyMzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8239167?v=4","gravatar_id":"","url":"https://api.github.com/users/dj-at-work","html_url":"https://github.com/dj-at-work","followers_url":"https://api.github.com/users/dj-at-work/followers","following_url":"https://api.github.com/users/dj-at-work/following{/other_user}","gists_url":"https://api.github.com/users/dj-at-work/gists{/gist_id}","starred_url":"https://api.github.com/users/dj-at-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dj-at-work/subscriptions","organizations_url":"https://api.github.com/users/dj-at-work/orgs","repos_url":"https://api.github.com/users/dj-at-work/repos","events_url":"https://api.github.com/users/dj-at-work/events{/privacy}","received_events_url":"https://api.github.com/users/dj-at-work/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T10:02:36Z","updated_at":"2017-09-27T15:57:10Z","author_association":"NONE","body":"@wohali The couch is definitely not running. Curl returned with \r\n`curl: (7) Failed to connect to localhost port 5984: Connection refused`.\r\n\r\nI've played a bit around. I've extracted `couchdbx-core`folder from the _CouchDB 2.1.0_ app and run it in the terminal. \r\nI get **Segmentation fault: 11** as final result:\r\n\r\n```\r\n./bin/couchdb \r\n[info] 2017-09-27T09:44:14.776619Z couchdb@localhost <0.7.0> -------- Application couch_log started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:14.796307Z couchdb@localhost <0.7.0> -------- Application folsom started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:14.953660Z couchdb@localhost <0.7.0> -------- Application couch_stats started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:14.953816Z couchdb@localhost <0.7.0> -------- Application khash started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:15.016863Z couchdb@localhost <0.7.0> -------- Application couch_event started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:15.036828Z couchdb@localhost <0.7.0> -------- Application ibrowse started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:15.055847Z couchdb@localhost <0.7.0> -------- Application ioq started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:15.055999Z couchdb@localhost <0.7.0> -------- Application mochiweb started on node couchdb@localhost\r\n[info] 2017-09-27T09:44:15.086719Z couchdb@localhost <0.201.0> -------- Apache CouchDB 2.1.0 is starting.\r\n\r\n[info] 2017-09-27T09:44:15.086864Z couchdb@localhost <0.202.0> -------- Starting couch_sup\r\nSegmentation fault: 11\r\n``` \r\n\r\nThe same (?) result, when I start **CouchDB 1.6.1.** The application reports an error and offer to quit or retry. The _couchdb.log_ contains:\r\n```\r\nLaunching '/Applications/Apache CouchDB.app/Contents/Resources/couchdbx-core/bin/couchdb'\r\nEshell V6.1  (abort with ^G)\r\nApache CouchDB 1.6.1 (LogLevel=info) is starting.\r\nTerminated with status 11\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332473256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332524444","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-332524444","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":332524444,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjUyNDQ0NA==","user":{"login":"rvanzon","id":815029,"node_id":"MDQ6VXNlcjgxNTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/815029?v=4","gravatar_id":"","url":"https://api.github.com/users/rvanzon","html_url":"https://github.com/rvanzon","followers_url":"https://api.github.com/users/rvanzon/followers","following_url":"https://api.github.com/users/rvanzon/following{/other_user}","gists_url":"https://api.github.com/users/rvanzon/gists{/gist_id}","starred_url":"https://api.github.com/users/rvanzon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvanzon/subscriptions","organizations_url":"https://api.github.com/users/rvanzon/orgs","repos_url":"https://api.github.com/users/rvanzon/repos","events_url":"https://api.github.com/users/rvanzon/events{/privacy}","received_events_url":"https://api.github.com/users/rvanzon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T13:41:42Z","updated_at":"2017-09-27T13:41:42Z","author_association":"NONE","body":"I could \"fix\" this by removing the \"compaction daemon\" (removing it from the config using Fauxton). But now it seems CouchDB adds the config-line once a while and starts crashing CouchDB again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332524444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332545145","html_url":"https://github.com/apache/couchdb/pull/843#issuecomment-332545145","issue_url":"https://api.github.com/repos/apache/couchdb/issues/843","id":332545145,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU0NTE0NQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T14:44:58Z","updated_at":"2017-09-27T14:44:58Z","author_association":"CONTRIBUTOR","body":"See associated documentation PR: https://github.com/apache/couchdb-documentation/pull/165\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332545145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332551193","html_url":"https://github.com/apache/couchdb/issues/810#issuecomment-332551193","issue_url":"https://api.github.com/repos/apache/couchdb/issues/810","id":332551193,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU1MTE5Mw==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T15:02:07Z","updated_at":"2017-09-27T15:04:59Z","author_association":"CONTRIBUTOR","body":"Took a look at this one. \r\n\r\nSaw the same behavior. There could be 3 reasons for not noticing the `crashed` guage being bumped.\r\n\r\n1) There is a fairly high retries_per_request default value of 10 used to retry failed requests. Requests are tried 10 times with exponentially increasing sleep amounts in between, starting at 0.25 seconds. That means there could be up to 4 minutes of retrying the same failed request before the job fails and scheduling replicator reports a crashed status for it.  I made a PR to reduce the default number of tries to 5 so there would be up to 8 seconds worth of retries instead. This makes more sense now that the scheduling replicator is used, as it can better handle reporting and backing off when errors occurs. This means that for quite a while (tens of minute or hours) the status for the replication job might be in the running state since it wasting time retrying that request.\r\n\r\n2) Replications will uniformly pick one node in the cluster to run on which doesn't have to be the node which processed the document update request. To detect the crashed stats update would have to know which node to check for changes. I made this mistake so mentioning it here just in case. Perhaps there is a case there in general for aggregating stats for all nodes.\r\n\r\n3) Crashed status is only reported after the replication job has crashed and is waiting to run next (possibly being penalized if it crashed too many times in a row). However as soon as it is given a chance to run again, it gets counted as `running`. While in that state it won't bump the crashed guage. This was done such that he `total` is always equal to `running + pending + crashing`. So the effect of this is that the crashing count will periodically go down for a bit when job is attempting to run, then when it fails it will be bumped back up. Before the PR above, this could take quite a while, but even with it might still take up to 15 seconds (8 seconds worth of retries + stats updates happen with a delay of 5 seconds).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332551193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332559017","html_url":"https://github.com/apache/couchdb/pull/843#issuecomment-332559017","issue_url":"https://api.github.com/repos/apache/couchdb/issues/843","id":332559017,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU1OTAxNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T15:25:45Z","updated_at":"2017-09-27T15:25:45Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332559017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332578046","html_url":"https://github.com/apache/couchdb/issues/840#issuecomment-332578046","issue_url":"https://api.github.com/repos/apache/couchdb/issues/840","id":332578046,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU3ODA0Ng==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T16:25:50Z","updated_at":"2017-09-27T16:25:50Z","author_association":"MEMBER","body":"I’ll look at this over the weekend.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332578046/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332586622","html_url":"https://github.com/apache/couchdb/issues/810#issuecomment-332586622","issue_url":"https://api.github.com/repos/apache/couchdb/issues/810","id":332586622,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU4NjYyMg==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T16:56:02Z","updated_at":"2017-09-27T16:56:02Z","author_association":"MEMBER","body":"@nickva Thanks, this all makes sense. I'd like to not lose track of point 2 above. Could you file a new enhancement issue for this concept so we can add it to the backlog?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332586622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332590111","html_url":"https://github.com/apache/couchdb/issues/802#issuecomment-332590111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/802","id":332590111,"node_id":"MDEyOklzc3VlQ29tbWVudDMzMjU5MDExMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-27T17:08:38Z","updated_at":"2017-09-27T17:08:38Z","author_association":"MEMBER","body":"If you want to disable the compaction daemon, you should be able to set the following in your `local.ini` or `local.d/*` file:\r\n\r\n```\r\n[compactions]\r\n_default = disabled\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/332590111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]