[{"url":"https://api.github.com/repos/apache/storm/issues/comments/45087919","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45087919","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45087919,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDg3OTE5","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:10:09Z","updated_at":"2014-06-04T13:10:09Z","author_association":"CONTRIBUTOR","body":"Oh I also forgot to add that all pull requests need a JIRA associated with them.  Please file a JIRA in http://issues.apache.org/jira if there is not one already there then add the jira number, aka STORM-...., to the title of this pull request.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45087919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45088024","html_url":"https://github.com/apache/storm/pull/129#issuecomment-45088024","issue_url":"https://api.github.com/repos/apache/storm/issues/129","id":45088024,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDg4MDI0","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:11:18Z","updated_at":"2014-06-04T13:11:18Z","author_association":"CONTRIBUTOR","body":"I think the change looks fine to me.  All pull requests need a JIRA associated with them.  Please file a JIRA in http://issues.apache.org/jira if there is not one already there then add the jira number, aka STORM-...., to the title of this pull request.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45088024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449859","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449859","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449859,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4NTk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:19:43Z","updated_at":"2025-01-24T12:45:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13384972\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13384972</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/common/security/HdfsSecurityUtil.java &#8212;<br/>\n    @@ -0,0 +1,48 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.hdfs.common.security;<br/>\n    +<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.security.SecurityUtil;<br/>\n    +import org.apache.hadoop.security.UserGroupInformation;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +/**<br/>\n    + * This class provides util methods for storm-hdfs connector communicating<br/>\n    + * with secured HDFS.<br/>\n    + */<br/>\n    +public class HdfsSecurityUtil {<br/>\n    +    public static final String STORM_KEYTAB_FILE_KEY = \"storm.keytab.file\";<br/>\n    +    public static final String STORM_USER_NAME_KEY = \"storm.kerberos.principal\";<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    I would prefer to see Hadoop in the name of these configs, at first glance they feel like they are for all of storm, but they are not and we took a very different route for configuring in the security branch, so adopting them is a bit difficult. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449861","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449861","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449861,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4NjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:24:43Z","updated_at":"2025-01-24T12:45:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385186\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385186</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/common/security/HdfsSecurityUtil.java &#8212;<br/>\n    @@ -0,0 +1,48 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.hdfs.common.security;<br/>\n    +<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.security.SecurityUtil;<br/>\n    +import org.apache.hadoop.security.UserGroupInformation;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +/**<br/>\n    + * This class provides util methods for storm-hdfs connector communicating<br/>\n    + * with secured HDFS.<br/>\n    + */<br/>\n    +public class HdfsSecurityUtil {<br/>\n    +    public static final String STORM_KEYTAB_FILE_KEY = \"storm.keytab.file\";<br/>\n    +    public static final String STORM_USER_NAME_KEY = \"storm.kerberos.principal\";<br/>\n    +<br/>\n    +    public static void login(Map conf, Configuration hdfsConfig) throws IOException {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    It would be great as part of this function to check before hand if the user is already logged in or not.  On the security branch we added in AutoTGT that if Hadoop is available on the class path it will automatically log you into Hadoop using the TGT.  My concern here is that code running on multi-tenant storm and single-tenant storm will need to be different from one another.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449866","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449866","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449866,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4NjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:28:58Z","updated_at":"2025-01-24T12:45:54Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385421\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385421</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/common/security/HdfsSecurityUtil.java &#8212;<br/>\n    @@ -0,0 +1,48 @@<br/>\n    +/**<br/>\n    + * Licensed to the Apache Software Foundation (ASF) under one<br/>\n    + * or more contributor license agreements.  See the NOTICE file<br/>\n    + * distributed with this work for additional information<br/>\n    + * regarding copyright ownership.  The ASF licenses this file<br/>\n    + * to you under the Apache License, Version 2.0 (the<br/>\n    + * \"License\"); you may not use this file except in compliance<br/>\n    + * with the License.  You may obtain a copy of the License at<br/>\n    + *<br/>\n    + * <a href=\"http://www.apache.org/licenses/LICENSE-2.0\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">http://www.apache.org/licenses/LICENSE-2.0</a><br/>\n    + *<br/>\n    + * Unless required by applicable law or agreed to in writing, software<br/>\n    + * distributed under the License is distributed on an \"AS IS\" BASIS,<br/>\n    + * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br/>\n    + * See the License for the specific language governing permissions and<br/>\n    + * limitations under the License.<br/>\n    + */<br/>\n    +package org.apache.storm.hdfs.common.security;<br/>\n    +<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.security.SecurityUtil;<br/>\n    +import org.apache.hadoop.security.UserGroupInformation;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +/**<br/>\n    + * This class provides util methods for storm-hdfs connector communicating<br/>\n    + * with secured HDFS.<br/>\n    + */<br/>\n    +public class HdfsSecurityUtil {<br/>\n    +    public static final String STORM_KEYTAB_FILE_KEY = \"storm.keytab.file\";<br/>\n    +    public static final String STORM_USER_NAME_KEY = \"storm.kerberos.principal\";<br/>\n    +<br/>\n    +    public static void login(Map conf, Configuration hdfsConfig) throws IOException {<br/>\n    +if (UserGroupInformation.isSecurityEnabled()) {<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    With our previous discussion about shipping configs packaged in the jar vs as a part of the topology conf and then populating a Hadoop Configuration.  This is one of those places where some of the config really has to be on the class path, and cannot be a part of the topology conf.  UserGroupInformation internally is creating a new Configuration that will only search the class path and pull in configs it finds.  It then uses that config to decide if security is enabled.  If you don't have a core-site.xml that is configured with security, it will never think you have security turned on.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449874","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449874","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449874,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4NzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:32:28Z","updated_at":"2025-01-24T12:45:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385606\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385606</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/trident/HdfsState.java &#8212;<br/>\n    @@ -0,0 +1,293 @@<br/>\n    +package org.apache.storm.hdfs.trident;<br/>\n    +<br/>\n    +import backtype.storm.task.IMetricsContext;<br/>\n    +import backtype.storm.topology.FailedException;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FSDataOutputStream;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.hadoop.hdfs.client.HdfsDataOutputStream;<br/>\n    +import org.apache.hadoop.io.SequenceFile;<br/>\n    +import org.apache.hadoop.io.compress.CompressionCodecFactory;<br/>\n    +import org.apache.storm.hdfs.common.rotation.RotationAction;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.apache.storm.hdfs.trident.format.FileNameFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.RecordFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.SequenceFormat;<br/>\n    +import org.apache.storm.hdfs.trident.rotation.FileRotationPolicy;<br/>\n    +<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +import storm.trident.operation.TridentCollector;<br/>\n    +import storm.trident.state.State;<br/>\n    +import storm.trident.tuple.TridentTuple;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.io.Serializable;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.EnumSet;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HdfsState implements State {<br/>\n    +<br/>\n    +    public static abstract class Options implements Serializable {<br/>\n    +<br/>\n    +protected String fsUrl;<br/>\n    +protected String configKey;<br/>\n    +protected FileSystem fs;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    Can we explicitly mark this as transient.  I don't believe any FileSystem instances are serializable, and transient just makes it clearer that this can only be set after we are deserialized.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449877","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449877","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449877,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4Nzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:33:37Z","updated_at":"2025-01-24T12:45:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385659\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385659</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/trident/HdfsState.java &#8212;<br/>\n    @@ -0,0 +1,293 @@<br/>\n    +package org.apache.storm.hdfs.trident;<br/>\n    +<br/>\n    +import backtype.storm.task.IMetricsContext;<br/>\n    +import backtype.storm.topology.FailedException;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FSDataOutputStream;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.hadoop.hdfs.client.HdfsDataOutputStream;<br/>\n    +import org.apache.hadoop.io.SequenceFile;<br/>\n    +import org.apache.hadoop.io.compress.CompressionCodecFactory;<br/>\n    +import org.apache.storm.hdfs.common.rotation.RotationAction;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.apache.storm.hdfs.trident.format.FileNameFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.RecordFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.SequenceFormat;<br/>\n    +import org.apache.storm.hdfs.trident.rotation.FileRotationPolicy;<br/>\n    +<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +import storm.trident.operation.TridentCollector;<br/>\n    +import storm.trident.state.State;<br/>\n    +import storm.trident.tuple.TridentTuple;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.io.Serializable;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.EnumSet;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HdfsState implements State {<br/>\n    +<br/>\n    +    public static abstract class Options implements Serializable {<br/>\n    +<br/>\n    +protected String fsUrl;<br/>\n    +protected String configKey;<br/>\n    +protected FileSystem fs;<br/>\n    +private Path currentFile;<br/>\n    +protected FileRotationPolicy rotationPolicy;<br/>\n    +protected FileNameFormat fileNameFormat;<br/>\n    +protected int rotation = 0;<br/>\n    +protected Configuration hdfsConfig;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    transient too.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449883","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449883","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449883,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4ODM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:34:09Z","updated_at":"2025-01-24T12:45:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385682\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385682</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/trident/HdfsState.java &#8212;<br/>\n    @@ -0,0 +1,293 @@<br/>\n    +package org.apache.storm.hdfs.trident;<br/>\n    +<br/>\n    +import backtype.storm.task.IMetricsContext;<br/>\n    +import backtype.storm.topology.FailedException;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FSDataOutputStream;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.hadoop.hdfs.client.HdfsDataOutputStream;<br/>\n    +import org.apache.hadoop.io.SequenceFile;<br/>\n    +import org.apache.hadoop.io.compress.CompressionCodecFactory;<br/>\n    +import org.apache.storm.hdfs.common.rotation.RotationAction;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.apache.storm.hdfs.trident.format.FileNameFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.RecordFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.SequenceFormat;<br/>\n    +import org.apache.storm.hdfs.trident.rotation.FileRotationPolicy;<br/>\n    +<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +import storm.trident.operation.TridentCollector;<br/>\n    +import storm.trident.state.State;<br/>\n    +import storm.trident.tuple.TridentTuple;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.io.Serializable;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.EnumSet;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HdfsState implements State {<br/>\n    +<br/>\n    +    public static abstract class Options implements Serializable {<br/>\n    +<br/>\n    +protected String fsUrl;<br/>\n    +protected String configKey;<br/>\n    +protected FileSystem fs;<br/>\n    +private Path currentFile;<br/>\n    +protected FileRotationPolicy rotationPolicy;<br/>\n    +protected FileNameFormat fileNameFormat;<br/>\n    +protected int rotation = 0;<br/>\n    +protected Configuration hdfsConfig;<br/>\n    +protected ArrayList<RotationAction> rotationActions = new ArrayList<RotationAction>();<br/>\n    +<br/>\n    +abstract void closeOutputFile() throws IOException;<br/>\n    +<br/>\n    +abstract Path createOutputFile() throws IOException;<br/>\n    +<br/>\n    +abstract void execute(List<TridentTuple> tuples) throws IOException;<br/>\n    +<br/>\n    +abstract void doPrepare(Map conf, int partitionIndex, int numPartitions) throws IOException;<br/>\n    +<br/>\n    +protected void rotateOutputFile() throws IOException {<br/>\n    +    LOG.info(\"Rotating output file...\");<br/>\n    +    long start = System.currentTimeMillis();<br/>\n    +    closeOutputFile();<br/>\n    +    this.rotation++;<br/>\n    +<br/>\n    +    Path newFile = createOutputFile();<br/>\n    +    LOG.info(\"Performing {} file rotation actions.\", this.rotationActions.size());<br/>\n    +    for(RotationAction action : this.rotationActions)</p>\n{\n    +action.execute(this.fs, this.currentFile);\n    +    }\n<p>    +    this.currentFile = newFile;<br/>\n    +    long time = System.currentTimeMillis() - start;<br/>\n    +    LOG.info(\"File rotation took {} ms.\", time);<br/>\n    +<br/>\n    +<br/>\n    +}<br/>\n    +<br/>\n    +void prepare(Map conf, int partitionIndex, int numPartitions){<br/>\n    +    if (this.rotationPolicy == null) throw new IllegalStateException(\"RotationPolicy must be specified.\");<br/>\n    +    if (this.fsUrl == null) </p>\n{\n    +throw new IllegalStateException(\"File system URL must be specified.\");\n    +    }\n<p>    +    this.fileNameFormat.prepare(conf, partitionIndex, numPartitions);<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +    Map<String, Object> map = (Map<String, Object>)conf.get(this.configKey);<br/>\n    +    if(map != null){<br/>\n    +for(String key : map.keySet())</p>\n{\n    +    this.hdfsConfig.set(key, String.valueOf(map.get(key)));\n    +}\n<p>    +    }<br/>\n    +    try</p>\n{\n    +HdfsSecurityUtil.login(conf, hdfsConfig);\n    +doPrepare(conf, partitionIndex, numPartitions);\n    +this.currentFile = createOutputFile();\n    +\n    +    }\n<p> catch (Exception e)</p>\n{\n    +throw new RuntimeException(\"Error preparing HdfsState: \" + e.getMessage(), e);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static class HdfsFileOptions extends Options {<br/>\n    +<br/>\n    +private FSDataOutputStream out;<br/>\n    +protected RecordFormat format;<br/>\n    +private long offset = 0;<br/>\n    +<br/>\n    +public HdfsFileOptions withFsUrl(String fsUrl)</p>\n{\n    +    this.fsUrl = fsUrl;\n    +    return this;\n    +}\n<p>    +<br/>\n    +public HdfsFileOptions withConfigKey(String configKey)</p>\n{\n    +    this.configKey = configKey;\n    +    return this;\n    +}\n<p>    +<br/>\n    +public HdfsFileOptions withFileNameFormat(FileNameFormat fileNameFormat)</p>\n{\n    +    this.fileNameFormat = fileNameFormat;\n    +    return this;\n    +}\n<p>    +<br/>\n    +public HdfsFileOptions withRecordFormat(RecordFormat format)</p>\n{\n    +    this.format = format;\n    +    return this;\n    +}\n<p>    +<br/>\n    +public HdfsFileOptions withRotationPolicy(FileRotationPolicy rotationPolicy)</p>\n{\n    +    this.rotationPolicy = rotationPolicy;\n    +    return this;\n    +}\n<p>    +<br/>\n    +public HdfsFileOptions addRotationAction(RotationAction action)</p>\n{\n    +    this.rotationActions.add(action);\n    +    return this;\n    +}\n<p>    +<br/>\n    +@Override<br/>\n    +void doPrepare(Map conf, int partitionIndex, int numPartitions) throws IOException </p>\n{\n    +    LOG.info(\"Preparing HDFS Bolt...\");\n    +    this.fs = FileSystem.get(URI.create(this.fsUrl), hdfsConfig);\n    +}\n<p>    +<br/>\n    +@Override<br/>\n    +void closeOutputFile() throws IOException </p>\n{\n    +    this.out.close();\n    +}\n<p>    +<br/>\n    +@Override<br/>\n    +Path createOutputFile() throws IOException </p>\n{\n    +    Path path = new Path(this.fileNameFormat.getPath(), this.fileNameFormat.getName(this.rotation, System.currentTimeMillis()));\n    +    this.out = this.fs.create(path);\n    +    return path;\n    +}\n<p>    +<br/>\n    +@Override<br/>\n    +public void execute(List<TridentTuple> tuples) throws IOException {<br/>\n    +    boolean rotated = false;<br/>\n    +    for(TridentTuple tuple : tuples){<br/>\n    +byte[] bytes = this.format.format(tuple);<br/>\n    +out.write(bytes);<br/>\n    +this.offset += bytes.length;<br/>\n    +<br/>\n    +if(this.rotationPolicy.mark(tuple, this.offset))</p>\n{\n    +    rotateOutputFile();\n    +    this.offset = 0;\n    +    this.rotationPolicy.reset();\n    +    rotated = true;\n    +}\n<p>    +    }<br/>\n    +    if(!rotated){<br/>\n    +if(this.out instanceof HdfsDataOutputStream)</p>\n{\n    +    ((HdfsDataOutputStream)this.out).hsync(EnumSet.of(HdfsDataOutputStream.SyncFlag.UPDATE_LENGTH));\n    +}\n<p> else </p>\n{\n    +    this.out.hsync();\n    +}\n<p>    +    }<br/>\n    +}<br/>\n    +    }<br/>\n    +<br/>\n    +    public static class SequenceFileOptions extends Options {<br/>\n    +private SequenceFormat format;<br/>\n    +private SequenceFile.CompressionType compressionType = SequenceFile.CompressionType.RECORD;<br/>\n    +private SequenceFile.Writer writer;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    transient</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449887","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449887","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449887,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4ODc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:34:35Z","updated_at":"2025-01-24T12:45:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#discussion_r13385705\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#discussion_r13385705</a></p>\n\n<p>    &#8212; Diff: external/storm-hdfs/src/main/java/org/apache/storm/hdfs/trident/HdfsState.java &#8212;<br/>\n    @@ -0,0 +1,293 @@<br/>\n    +package org.apache.storm.hdfs.trident;<br/>\n    +<br/>\n    +import backtype.storm.task.IMetricsContext;<br/>\n    +import backtype.storm.topology.FailedException;<br/>\n    +import org.apache.hadoop.conf.Configuration;<br/>\n    +import org.apache.hadoop.fs.FSDataOutputStream;<br/>\n    +import org.apache.hadoop.fs.FileSystem;<br/>\n    +import org.apache.hadoop.fs.Path;<br/>\n    +import org.apache.hadoop.hdfs.client.HdfsDataOutputStream;<br/>\n    +import org.apache.hadoop.io.SequenceFile;<br/>\n    +import org.apache.hadoop.io.compress.CompressionCodecFactory;<br/>\n    +import org.apache.storm.hdfs.common.rotation.RotationAction;<br/>\n    +import org.apache.storm.hdfs.common.security.HdfsSecurityUtil;<br/>\n    +import org.apache.storm.hdfs.trident.format.FileNameFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.RecordFormat;<br/>\n    +import org.apache.storm.hdfs.trident.format.SequenceFormat;<br/>\n    +import org.apache.storm.hdfs.trident.rotation.FileRotationPolicy;<br/>\n    +<br/>\n    +import org.slf4j.Logger;<br/>\n    +import org.slf4j.LoggerFactory;<br/>\n    +import storm.trident.operation.TridentCollector;<br/>\n    +import storm.trident.state.State;<br/>\n    +import storm.trident.tuple.TridentTuple;<br/>\n    +<br/>\n    +import java.io.IOException;<br/>\n    +import java.io.Serializable;<br/>\n    +import java.net.URI;<br/>\n    +import java.util.ArrayList;<br/>\n    +import java.util.EnumSet;<br/>\n    +import java.util.List;<br/>\n    +import java.util.Map;<br/>\n    +<br/>\n    +public class HdfsState implements State {<br/>\n    +<br/>\n    +    public static abstract class Options implements Serializable {<br/>\n    +<br/>\n    +protected String fsUrl;<br/>\n    +protected String configKey;<br/>\n    +protected FileSystem fs;<br/>\n    +private Path currentFile;<br/>\n    +protected FileRotationPolicy rotationPolicy;<br/>\n    +protected FileNameFormat fileNameFormat;<br/>\n    +protected int rotation = 0;<br/>\n    +protected Configuration hdfsConfig;<br/>\n    +protected ArrayList<RotationAction> rotationActions = new ArrayList<RotationAction>();<br/>\n    +<br/>\n    +abstract void closeOutputFile() throws IOException;<br/>\n    +<br/>\n    +abstract Path createOutputFile() throws IOException;<br/>\n    +<br/>\n    +abstract void execute(List<TridentTuple> tuples) throws IOException;<br/>\n    +<br/>\n    +abstract void doPrepare(Map conf, int partitionIndex, int numPartitions) throws IOException;<br/>\n    +<br/>\n    +protected void rotateOutputFile() throws IOException {<br/>\n    +    LOG.info(\"Rotating output file...\");<br/>\n    +    long start = System.currentTimeMillis();<br/>\n    +    closeOutputFile();<br/>\n    +    this.rotation++;<br/>\n    +<br/>\n    +    Path newFile = createOutputFile();<br/>\n    +    LOG.info(\"Performing {} file rotation actions.\", this.rotationActions.size());<br/>\n    +    for(RotationAction action : this.rotationActions)</p>\n{\n    +action.execute(this.fs, this.currentFile);\n    +    }\n<p>    +    this.currentFile = newFile;<br/>\n    +    long time = System.currentTimeMillis() - start;<br/>\n    +    LOG.info(\"File rotation took {} ms.\", time);<br/>\n    +<br/>\n    +<br/>\n    +}<br/>\n    +<br/>\n    +void prepare(Map conf, int partitionIndex, int numPartitions){<br/>\n    +    if (this.rotationPolicy == null) throw new IllegalStateException(\"RotationPolicy must be specified.\");<br/>\n    +    if (this.fsUrl == null) </p>\n{\n    +throw new IllegalStateException(\"File system URL must be specified.\");\n    +    }\n<p>    +    this.fileNameFormat.prepare(conf, partitionIndex, numPartitions);<br/>\n    +    this.hdfsConfig = new Configuration();<br/>\n    +    Map<String, Object> map = (Map<String, Object>)conf.get(this.configKey);<br/>\n    +    if(map != null){<br/>\n    +for(String key : map.keySet())</p>\n{\n    +    this.hdfsConfig.set(key, String.valueOf(map.get(key)));\n    +}\n<p>    +    }<br/>\n    +    try</p>\n{\n    +HdfsSecurityUtil.login(conf, hdfsConfig);\n    +doPrepare(conf, partitionIndex, numPartitions);\n    +this.currentFile = createOutputFile();\n    +\n    +    }\n<p> catch (Exception e)</p>\n{\n    +throw new RuntimeException(\"Error preparing HdfsState: \" + e.getMessage(), e);\n    +    }\n<p>    +}<br/>\n    +<br/>\n    +    }<br/>\n    +<br/>\n    +    public static class HdfsFileOptions extends Options {<br/>\n    +<br/>\n    +private FSDataOutputStream out;<br/>\n    &#8212; End diff &#8211;</p>\n\n<p>    transient</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45091025","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45091025","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45091025,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDkxMDI1","user":{"login":"Gvain","id":3352351,"node_id":"MDQ6VXNlcjMzNTIzNTE=","avatar_url":"https://avatars.githubusercontent.com/u/3352351?v=4","gravatar_id":"","url":"https://api.github.com/users/Gvain","html_url":"https://github.com/Gvain","followers_url":"https://api.github.com/users/Gvain/followers","following_url":"https://api.github.com/users/Gvain/following{/other_user}","gists_url":"https://api.github.com/users/Gvain/gists{/gist_id}","starred_url":"https://api.github.com/users/Gvain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gvain/subscriptions","organizations_url":"https://api.github.com/users/Gvain/orgs","repos_url":"https://api.github.com/users/Gvain/repos","events_url":"https://api.github.com/users/Gvain/events{/privacy}","received_events_url":"https://api.github.com/users/Gvain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:38:00Z","updated_at":"2014-06-04T13:38:00Z","author_association":"CONTRIBUTOR","body":"@clockfly \n\nThanks for your explanation. The explanation for part 2 seems not so convincing as the CPU and network are not saturated at both env when scaling worker# from 4 to 8. Oops, I don't wanna go any further on this. \n\nAnyway, your work is really great.\n\nAnother thing. Since you use netty to send message in a async way, how can you ensure that  all messages emitted from a fast component are received by a slow component without any loss especially under heavy throughput without any ackers enabled ? To my knowledge, the netty channel may not be writable, and pendings count will increase.       \n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45091025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461108","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461108","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461108,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMDg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:38:01Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Gvain commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45091025\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45091025</a></p>\n\n<p>    @clockfly </p>\n\n<p>    Thanks for your explanation. The explanation for part 2 seems not so convincing as the CPU and network are not saturated at both env when scaling worker# from 4 to 8. Oops, I don't wanna go any further on this. </p>\n\n<p>    Anyway, your work is really great.</p>\n\n<p>    Another thing. Since you use netty to send message in a async way, how can you ensure that  all messages emitted from a fast component are received by a slow component without any loss especially under heavy throughput without any ackers enabled ? To my knowledge, the netty channel may not be writable, and pendings count will increase.       </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45091287","html_url":"https://github.com/apache/storm/pull/128#issuecomment-45091287","issue_url":"https://api.github.com/repos/apache/storm/issues/128","id":45091287,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDkxMjg3","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:40:22Z","updated_at":"2014-06-04T13:40:22Z","author_association":"CONTRIBUTOR","body":"I finally made it through all of the code.  It looks good for the most part.  Just a few minor comments.  I also am wiling to maintain/support this code. I have a umber of customers who I know would be very interested in using this, so I would be on the hook for supporting it anyways :)\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45091287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449890","html_url":"https://github.com/apache/storm/issues/4053#issuecomment-2612449890","issue_url":"https://api.github.com/repos/apache/storm/issues/4053","id":2612449890,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NDk4OTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:40:23Z","updated_at":"2025-01-24T12:45:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/128#issuecomment-45091287\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/128#issuecomment-45091287</a></p>\n\n<p>    I finally made it through all of the code.  It looks good for the most part.  Just a few minor comments.  I also am wiling to maintain/support this code. I have a umber of customers who I know would be very interested in using this, so I would be on the hook for supporting it anyways <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/smile.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612449890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461116","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461116","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461116,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T13:44:07Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Gvain commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13386178\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13386178</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    What if channel is not writable ? Furthermore, what if messageBatch continuous being filled up under heavy throughput while channel is still not writable as connected peer is a slow component ? </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461116/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45095368","html_url":"https://github.com/apache/storm/pull/127#issuecomment-45095368","issue_url":"https://api.github.com/repos/apache/storm/issues/127","id":45095368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDk1MzY4","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T14:13:10Z","updated_at":"2014-06-04T14:13:10Z","author_association":"CONTRIBUTOR","body":"STORM-205 is in, you probably want to upmerge now.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45095368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612432231","html_url":"https://github.com/apache/storm/issues/3911#issuecomment-2612432231","issue_url":"https://api.github.com/repos/apache/storm/issues/3911","id":2612432231,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0MzIyMzE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T14:13:11Z","updated_at":"2025-01-24T12:36:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/127#issuecomment-45095368\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/127#issuecomment-45095368</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-205\" title=\"Add REST API to Storm UI\" class=\"issue-link\" data-issue-key=\"STORM-205\"><del>STORM-205</del></a> is in, you probably want to upmerge now.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612432231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45096868","html_url":"https://github.com/apache/storm/pull/122#issuecomment-45096868","issue_url":"https://api.github.com/repos/apache/storm/issues/122","id":45096868,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDk2ODY4","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T14:24:32Z","updated_at":"2014-06-04T14:24:32Z","author_association":"CONTRIBUTOR","body":"All pull requests need a JIRA associated with them.  Could you please file a JIRA if one does not already exist and update the title of this pull request to have the JIRA number in it, i.e. STORM-12345.\n\nThe code itself looks fine to me.  But I would almost rather have a second defined timeout that is based off of the original timeout.  Simply because in complete-topology simulate-wait within a loop.  simulate-wait also has the same timeout code in it but in a loop 10 times, so if you get unlucky and get close to the timeout even once in simulate-wait the outer loop will timeout.  We could simply have it be 3 \\* TEST-TIMEOUT-MS\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45096868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450502","html_url":"https://github.com/apache/storm/issues/4057#issuecomment-2612450502","issue_url":"https://api.github.com/repos/apache/storm/issues/4057","id":2612450502,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTA1MDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T15:57:13Z","updated_at":"2025-01-24T12:46:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amontalenti\">amontalenti</a>:</i>\n<p>I just put together some basic informal instructions in this fork:</p>\n\n<p><a href=\"https://github.com/Parsely/storm-0mq#storm-0mq\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/Parsely/storm-0mq#storm-0mq</a></p>\n\n<p>Ideally, I'd like to make this simpler for people than going through all these steps, but I need to understand better the relationship between these native libraries and their platforms. To Jon's point, would it be a bad idea for me to build a JAR and publish it somewhere, and have a ZeroMQ / jzmq native libs directory you could copy over to your server for common platforms like ubuntu 12.04? Or is that a bad idea?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450502/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612438867","html_url":"https://github.com/apache/storm/issues/3971#issuecomment-2612438867","issue_url":"https://api.github.com/repos/apache/storm/issues/3971","id":2612438867,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0Mzg4Njc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T16:54:09Z","updated_at":"2025-01-24T12:40:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=veetow\">veetow</a>:</i>\n<p>Has there been any further discussion about this issue?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612438867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45132368","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45132368","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45132368,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTMyMzY4","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T18:37:03Z","updated_at":"2014-06-04T18:37:03Z","author_association":"CONTRIBUTOR","body":"Thanks.\nI've fixed the timeouts you've mentioned, but have a look. That was the best way I could think to muck with TIMEOUT-CHECK-SECS.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45132368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454282","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454282","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454282,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQyODI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T18:37:04Z","updated_at":"2025-01-24T12:48:14Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45132368\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45132368</a></p>\n\n<p>    Thanks.<br/>\n    I've fixed the timeouts you've mentioned, but have a look. That was the best way I could think to muck with TIMEOUT-CHECK-SECS.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45163796","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45163796","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45163796,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTYzNzk2","user":{"login":"xpe","id":4576329,"node_id":"MDQ6VXNlcjQ1NzYzMjk=","avatar_url":"https://avatars.githubusercontent.com/u/4576329?v=4","gravatar_id":"","url":"https://api.github.com/users/xpe","html_url":"https://github.com/xpe","followers_url":"https://api.github.com/users/xpe/followers","following_url":"https://api.github.com/users/xpe/following{/other_user}","gists_url":"https://api.github.com/users/xpe/gists{/gist_id}","starred_url":"https://api.github.com/users/xpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xpe/subscriptions","organizations_url":"https://api.github.com/users/xpe/orgs","repos_url":"https://api.github.com/users/xpe/repos","events_url":"https://api.github.com/users/xpe/events{/privacy}","received_events_url":"https://api.github.com/users/xpe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T23:10:36Z","updated_at":"2014-06-06T01:39:08Z","author_association":"CONTRIBUTOR","body":"@revans2 Hello. The quality of the Storm code varies. It could stand some improvement. Just like any project that is useful enough to live on, it spans versions of Clojure and its evolution. It also spans the improvement in coding style of its contributors.\n\nI'm with you; I don't want an arbitrary debate. I'd suggest \"defining\" Storm's desired style, roughly, as what 80% of the Clojure community is currently doing. The rest could be left open. Over time, it probably will distill itself with little work on our part.\n\nWhat is the 80% of less-than-controversial advice? I suggest we point people to these useful references (to answer your documentation question):\n- http://dev.clojure.org/display/community/Library+Coding+Standards\n- https://github.com/bbatsov/clojure-style-guide\n\n> Is there an automated tool that you used that can help with this formatting as well?\n\nMany people use Paredit with their editor. If I see a lint tool, I will let you know. I see that https://github.com/jonase/eastwood is one kind of linter; it might be worth a look. I'll keep my eyes open.\n\n@revans2 I'll submit a JIRA ticket. Can you merge quickly? The longer we wait, the more merge conflicts we'll get.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45163796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45164474","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45164474","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45164474,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTY0NDc0","user":{"login":"xpe","id":4576329,"node_id":"MDQ6VXNlcjQ1NzYzMjk=","avatar_url":"https://avatars.githubusercontent.com/u/4576329?v=4","gravatar_id":"","url":"https://api.github.com/users/xpe","html_url":"https://github.com/xpe","followers_url":"https://api.github.com/users/xpe/followers","following_url":"https://api.github.com/users/xpe/following{/other_user}","gists_url":"https://api.github.com/users/xpe/gists{/gist_id}","starred_url":"https://api.github.com/users/xpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xpe/subscriptions","organizations_url":"https://api.github.com/users/xpe/orgs","repos_url":"https://api.github.com/users/xpe/repos","events_url":"https://api.github.com/users/xpe/events{/privacy}","received_events_url":"https://api.github.com/users/xpe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T23:19:36Z","updated_at":"2014-06-04T23:19:36Z","author_association":"CONTRIBUTOR","body":"See https://issues.apache.org/jira/browse/STORM-338\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45164474/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468462","html_url":"https://github.com/apache/storm/issues/4180#issuecomment-2612468462","issue_url":"https://api.github.com/repos/apache/storm/issues/4180","id":2612468462,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0Njg0NjI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T23:19:40Z","updated_at":"2025-01-24T12:55:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user xpe commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/130#issuecomment-45164474\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/130#issuecomment-45164474</a></p>\n\n<p>    See <a href=\"https://issues.apache.org/jira/browse/STORM-338\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-338</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45165497","html_url":"https://github.com/apache/storm/pull/127#issuecomment-45165497","issue_url":"https://api.github.com/repos/apache/storm/issues/127","id":45165497,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTY1NDk3","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T23:33:03Z","updated_at":"2014-06-04T23:33:03Z","author_association":"CONTRIBUTOR","body":"Upmerged.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45165497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612432238","html_url":"https://github.com/apache/storm/issues/3911#issuecomment-2612432238","issue_url":"https://api.github.com/repos/apache/storm/issues/3911","id":2612432238,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0MzIyMzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-04T23:33:05Z","updated_at":"2025-01-24T12:36:13Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/127#issuecomment-45165497\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/127#issuecomment-45165497</a></p>\n\n<p>    Upmerged.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612432238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45167927","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45167927","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45167927,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTY3OTI3","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T00:11:35Z","updated_at":"2014-06-05T00:11:53Z","author_association":"CONTRIBUTOR","body":"The only part I have a little concern about is the arguments on a separate line in function defns. \nI really prefer the argument lists to be on the same line as the definition, since I find it more readable. \n\nThe style guides you proposed actually suggest that you include the arguments on the same line unless there is a docstring, and I would really prefer to follow that, rather than applying the rule indiscriminately. \n\nThat's my only request. I won't make a debate out of it.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45167927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45181599","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45181599","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45181599,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTgxNTk5","user":{"login":"miguno","id":294849,"node_id":"MDQ6VXNlcjI5NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/294849?v=4","gravatar_id":"","url":"https://api.github.com/users/miguno","html_url":"https://github.com/miguno","followers_url":"https://api.github.com/users/miguno/followers","following_url":"https://api.github.com/users/miguno/following{/other_user}","gists_url":"https://api.github.com/users/miguno/gists{/gist_id}","starred_url":"https://api.github.com/users/miguno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguno/subscriptions","organizations_url":"https://api.github.com/users/miguno/orgs","repos_url":"https://api.github.com/users/miguno/repos","events_url":"https://api.github.com/users/miguno/events{/privacy}","received_events_url":"https://api.github.com/users/miguno/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T05:11:12Z","updated_at":"2014-06-05T05:11:12Z","author_association":"CONTRIBUTOR","body":"> I like the idea of cleaning up the style of the clojure.\n\nI second Bobby's opinion, and yours, @xpe.\n\nI'd agree with @knusbaum though to keep argument lists on the same line -- if only because then you can `grep` the code base on the command line if you're quickly looking for a function definition.\n\nThat being said I'm not religious about which style as long as it's consistent, and if following the style is supported by IDE (you already mentioned paredit) in some way.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45181599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45210755","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45210755","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45210755,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjEwNzU1","user":{"login":"xpe","id":4576329,"node_id":"MDQ6VXNlcjQ1NzYzMjk=","avatar_url":"https://avatars.githubusercontent.com/u/4576329?v=4","gravatar_id":"","url":"https://api.github.com/users/xpe","html_url":"https://github.com/xpe","followers_url":"https://api.github.com/users/xpe/followers","following_url":"https://api.github.com/users/xpe/following{/other_user}","gists_url":"https://api.github.com/users/xpe/gists{/gist_id}","starred_url":"https://api.github.com/users/xpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xpe/subscriptions","organizations_url":"https://api.github.com/users/xpe/orgs","repos_url":"https://api.github.com/users/xpe/repos","events_url":"https://api.github.com/users/xpe/events{/privacy}","received_events_url":"https://api.github.com/users/xpe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T12:00:34Z","updated_at":"2014-06-05T12:04:39Z","author_association":"CONTRIBUTOR","body":"Some counter-points:\n- To grep for a function, look for `defn function-name`. You don't need to list arguments in the defn.\n- To look for a function, better yet, use `(doc function-name)` or `(find-doc \"foo\")`.\n- It is better to have a docstring for each function. This means the args need to be on a different line.\n- Putting everything on the first line may \"fool\" people into thinking a docstring is not needed. This is a bad habit to fall into.\n- Multi-arity functions look best with arguments on separate lines.\n\nClojure is plenty compact as it is. IMO, It is easier to say, \"put arguments on a separate line the function definition\" than to try to explain the exceptions and deal with people not writing doc-strings.\n\nI'd also add that the threading operators are great to decrease line lengths and increase code readability.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45210755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45217514","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45217514","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45217514,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE3NTE0","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T13:18:20Z","updated_at":"2014-06-05T13:18:20Z","author_association":"CONTRIBUTOR","body":"So with this new code if someone somehow sets a config that has a key of 5 it will essentially adjust the TIMEOUT-CHECK-SECS value?  That seems ugly to me.  I was thinking of using conjure but because TIMEOUT-CHECK-SECS is not a function I see that we cannot stub it.  Perhaps we should just make a true key for it in Config.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45217514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454287","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454287","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454287,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQyODc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T13:18:22Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45217514\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45217514</a></p>\n\n<p>    So with this new code if someone somehow sets a config that has a key of 5 it will essentially adjust the TIMEOUT-CHECK-SECS value?  That seems ugly to me.  I was thinking of using conjure but because TIMEOUT-CHECK-SECS is not a function I see that we cannot stub it.  Perhaps we should just make a true key for it in Config.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45218451","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45218451","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45218451,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE4NDUx","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T13:27:11Z","updated_at":"2014-06-05T13:27:11Z","author_association":"CONTRIBUTOR","body":"@xpe I totally agree that upmerging is a pain, so I think we can probably get this in soon.  Then the pain is mine to upmerge all of my outstanding patches :).\n\nI would like to see a section added to DEVELOPER.md describing the coding style, pointing to the other web pages you listed, and also the suggestions for IDEs that can help with the formatting.\n\nI would also like to see the title of this pull request edited to have STORM-338 in it.  The project has some tools that tie the two together using the title.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45218451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468467","html_url":"https://github.com/apache/storm/issues/4180#issuecomment-2612468467","issue_url":"https://api.github.com/repos/apache/storm/issues/4180","id":2612468467,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0Njg0Njc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T13:27:13Z","updated_at":"2025-01-24T12:55:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/130#issuecomment-45218451\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/130#issuecomment-45218451</a></p>\n\n<p>    @xpe I totally agree that upmerging is a pain, so I think we can probably get this in soon.  Then the pain is mine to upmerge all of my outstanding patches <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/smile.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/>.</p>\n\n<p>    I would like to see a section added to DEVELOPER.md describing the coding style, pointing to the other web pages you listed, and also the suggestions for IDEs that can help with the formatting.</p>\n\n<p>    I would also like to see the title of this pull request edited to have <a href=\"https://issues.apache.org/jira/browse/STORM-338\" title=\"Move towards idiomatic Clojure style\" class=\"issue-link\" data-issue-key=\"STORM-338\"><del>STORM-338</del></a> in it.  The project has some tools that tie the two together using the title.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45222031","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45222031","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45222031,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjIyMDMx","user":{"login":"miguno","id":294849,"node_id":"MDQ6VXNlcjI5NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/294849?v=4","gravatar_id":"","url":"https://api.github.com/users/miguno","html_url":"https://github.com/miguno","followers_url":"https://api.github.com/users/miguno/followers","following_url":"https://api.github.com/users/miguno/following{/other_user}","gists_url":"https://api.github.com/users/miguno/gists{/gist_id}","starred_url":"https://api.github.com/users/miguno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguno/subscriptions","organizations_url":"https://api.github.com/users/miguno/orgs","repos_url":"https://api.github.com/users/miguno/repos","events_url":"https://api.github.com/users/miguno/events{/privacy}","received_events_url":"https://api.github.com/users/miguno/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T13:58:29Z","updated_at":"2014-06-05T13:58:29Z","author_association":"CONTRIBUTOR","body":"@xpe All good points.  I stand corrected. :-)\n\n+1 to Bobby's suggestion of updating DEVELOPER.md as well.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45222031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45226047","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45226047","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45226047,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjI2MDQ3","user":{"login":"clockfly","id":2595532,"node_id":"MDQ6VXNlcjI1OTU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2595532?v=4","gravatar_id":"","url":"https://api.github.com/users/clockfly","html_url":"https://github.com/clockfly","followers_url":"https://api.github.com/users/clockfly/followers","following_url":"https://api.github.com/users/clockfly/following{/other_user}","gists_url":"https://api.github.com/users/clockfly/gists{/gist_id}","starred_url":"https://api.github.com/users/clockfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clockfly/subscriptions","organizations_url":"https://api.github.com/users/clockfly/orgs","repos_url":"https://api.github.com/users/clockfly/repos","events_url":"https://api.github.com/users/clockfly/events{/privacy}","received_events_url":"https://api.github.com/users/clockfly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T14:29:57Z","updated_at":"2014-06-05T14:29:57Z","author_association":"CONTRIBUTOR","body":"@miguno, there are several more observations I have\n1.  Network still not efficient enough\n   \n   We can see from the test report, after this fix, the throughput is still bottlenecked by network(CPU: 72%, network: 45%), because there are still margins in the CPU(28%). Thats weird because only 45% of theory network bandwidth is used.\n2.  Uneven machine message receive latency\n   \n   In the experiment, I noticed that there are always some machine whose message receive latency is much higher than the others. For example, tuples generated from machine A, are sent to tasks on machine B, C, D, in one run, tasks on B take more time to receive messages, in another run, D may be the slowest.\n   \n   My guess is that some machine has a longer netty receiver queue than the other machines, and the queue length on all machines becomes stable but not equal after some time(new input = new output) . The latency is different because queue length is different. Changing max.spout.pending wont improve this, because it only control overall message sent from A, it doesnt treat B, C, D differently.\n3. better max.spout.pending?\n   I observed, after we tune max.spout.pending to a big enough value, increasing max.spout.pending will only add to latency but not throughput. When spout.pending doubles, the latency doubles.\n   \n   Can we do flow control adaptively so that we stops when there is no further benefit to continue increasing max.spout.pending?\n4.  Potential deadlock when all intermediate buffer is full\n   \n   Consider two worker, task1(workerA) deliver message to task3(workerB), task3 deliver to task2(workerA). There is a loop! It is possible that all worker sender/receiver buffer will be full and block. \n   \n   ![vvvv](https://cloud.githubusercontent.com/assets/2595532/3188775/ba645bdc-ecbd-11e3-959b-dfb8208d4d1b.png)\n   \n   The current work-around in storm is tricky, it use a unbounded receiver buffer(LinkedBlockingQueue) for each worker to break the loop. But this is not good, because the receiver buffer can potentially be very long, and latency be very high.\n5.  Is it necessary for each task to have a dedicated send queue thread?\n   Currently, each task has a dedicated send queue thread to push data to worker transfer queue. During the profiling, the task send queue thread is usually at wait state. Maybe it is a good idea to use a shared thread pool replace dedicated thread?\n6.  Acker workload very high.\n   In the test, I spotted that the acker task is very busy. As each message size is small(100 byte), there are hugh amout of tuples need to be acked. \n   \n   Can this acker cost be reduced? \n   \n   For example, we can group the tuple at spout to time slice, and each time slice will share a same root tuple Id. For example, the time slice can be 100ms, and there are 10, 000 message in this slice, all share same root id, before sending to acker task, we can first XOR all acker message of same root Id locally on each worker. In that case, we may can reduce the acking network and task cost. The drawback is that when a message is lost, we need to reply all message in this slice.\n7.  Worker receive thread blocked by task receiver queue\n   \n   In worker receiver thread, it will try to publish the messages to the receive queue of each task sequentially in a blocking way. If one task receiver queue is full, the thread will block and wait.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45226047/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461121","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461121","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461121,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T14:29:59Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45226047\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45226047</a></p>\n\n<p>    @miguno, there are several more observations I have</p>\n\n<p>    1.\tNetwork still not efficient enough</p>\n\n<p>      We can see from the test report, after this fix, the throughput is still bottlenecked by network(CPU: 72%, network: 45%), because there are still margins in the CPU(28%). Thats weird because only 45% of theory network bandwidth is used.</p>\n\n<p>    2.\tUneven machine message receive latency</p>\n\n<p>      In the experiment, I noticed that there are always some machine whose message receive latency is much higher than the others. For example, tuples generated from machine A, are sent to tasks on machine B, C, D, in one run, tasks on B take more time to receive messages, in another run, D may be the slowest.</p>\n\n<p>      My guess is that some machine has a longer netty receiver queue than the other machines, and the queue length on all machines becomes stable but not equal after some time(new input = new output) . The latency is different because queue length is different. Changing max.spout.pending wont improve this, because it only control overall message sent from A, it doesnt treat B, C, D differently.</p>\n\n<p>    3. better max.spout.pending?<br/>\n    I observed, after we tune max.spout.pending to a big enough value, increasing max.spout.pending will only add to latency but not throughput. When spout.pending doubles, the latency doubles.</p>\n\n<p>      Can we do flow control adaptively so that we stops when there is no further benefit to continue increasing max.spout.pending?</p>\n\n<p>    4.\tPotential deadlock when all intermediate buffer is full</p>\n\n<p>      Consider two worker, task1(workerA) deliver message to task3(workerB), task3 deliver to task2(workerA). There is a loop! It is possible that all worker sender/receiver buffer will be full and block. </p>\n\n<p>      !<span class=\"error\">&#91;vvvv&#93;</span>(<a href=\"https://cloud.githubusercontent.com/assets/2595532/3188775/ba645bdc-ecbd-11e3-959b-dfb8208d4d1b.png\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://cloud.githubusercontent.com/assets/2595532/3188775/ba645bdc-ecbd-11e3-959b-dfb8208d4d1b.png</a>)</p>\n\n<p>      The current work-around in storm is tricky, it use a unbounded receiver buffer(LinkedBlockingQueue) for each worker to break the loop. But this is not good, because the receiver buffer can potentially be very long, and latency be very high.</p>\n\n<p>    5.\tIs it necessary for each task to have a dedicated send queue thread?<br/>\n      Currently, each task has a dedicated send queue thread to push data to worker transfer queue. During the profiling, the task send queue thread is usually at wait state. Maybe it is a good idea to use a shared thread pool replace dedicated thread?</p>\n\n<p>    6.\tAcker workload very high.<br/>\n      In the test, I spotted that the acker task is very busy. As each message size is small(100 byte), there are hugh amout of tuples need to be acked. </p>\n\n<p>      Can this acker cost be reduced? </p>\n\n<p>      For example, we can group the tuple at spout to time slice, and each time slice will share a same root tuple Id. For example, the time slice can be 100ms, and there are 10, 000 message in this slice, all share same root id, before sending to acker task, we can first XOR all acker message of same root Id locally on each worker. In that case, we may can reduce the acking network and task cost. The drawback is that when a message is lost, we need to reply all message in this slice.</p>\n\n<p>    7.\tWorker receive thread blocked by task receiver queue</p>\n\n<p>      In worker receiver thread, it will try to publish the messages to the receive queue of each task sequentially in a blocking way. If one task receiver queue is full, the thread will block and wait.</p>\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461121/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461126","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461126","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461126,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T14:48:30Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13443448\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13443448</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    @Gvain,</p>\n\n<p>    For an unacked topology, we can either block, drop, or store. before this patch, storm will always store, so there are potential OOM like you described. this patch steps a bit forward, if the downstream machine is down, it will block the upstream from sending thus avoiding OOM. </p>\n\n<p>    But for the case you mentioned, the downsteam is slow, but not down, it is possible that there will be more message pending at the netty client side or server side. If the network is OK, then it will pend on the server side, if the network is overwhelmed, then the message will be pending at the netty client side. </p>\n\n<p>    An example is that the spout crazyly generate really big message, but the bandwidth is not enough, it will lead to OOM on the spout worker JVM, and nothing can stop that.</p>\n\n<p>    Bobby's comment mentioned a similar situation <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-43632986\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-43632986</a>, </p>\n\n<p>    We should allow user to config to drop message in this case, thus avoiding OOM,  this bug is filed at followup jira <a href=\"https://issues.apache.org/jira/browse/STORM-329\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-329</a> after discussion with Bobby.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45242046","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45242046","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45242046,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjQyMDQ2","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T16:28:02Z","updated_at":"2014-06-05T16:28:02Z","author_association":"NONE","body":"Could we create a function that returns the TIMEOUT-CHECK-SECS value to ease testing, and then stub the new function?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45242046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454292","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454292","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454292,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQyOTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T16:28:05Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45242046\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45242046</a></p>\n\n<p>    Could we create a function that returns the TIMEOUT-CHECK-SECS value to ease testing, and then stub the new function?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45258175","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45258175","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45258175,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjU4MTc1","user":{"login":"knusbaum","id":1819836,"node_id":"MDQ6VXNlcjE4MTk4MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1819836?v=4","gravatar_id":"","url":"https://api.github.com/users/knusbaum","html_url":"https://github.com/knusbaum","followers_url":"https://api.github.com/users/knusbaum/followers","following_url":"https://api.github.com/users/knusbaum/following{/other_user}","gists_url":"https://api.github.com/users/knusbaum/gists{/gist_id}","starred_url":"https://api.github.com/users/knusbaum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knusbaum/subscriptions","organizations_url":"https://api.github.com/users/knusbaum/orgs","repos_url":"https://api.github.com/users/knusbaum/repos","events_url":"https://api.github.com/users/knusbaum/events{/privacy}","received_events_url":"https://api.github.com/users/knusbaum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T18:43:59Z","updated_at":"2014-06-05T18:43:59Z","author_association":"CONTRIBUTOR","body":"Mocked.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45258175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454296","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454296","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454296,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQyOTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T18:44:02Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user knusbaum commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45258175\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45258175</a></p>\n\n<p>    Mocked.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45260515","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45260515","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45260515,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjYwNTE1","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T19:02:54Z","updated_at":"2014-06-05T19:02:54Z","author_association":"NONE","body":"+1 Looks fine to me.\n@revans2 are you OK with having the new function instead?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45260515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454303","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454303","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454303,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQzMDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-05T19:02:56Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45260515\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45260515</a></p>\n\n<p>    +1 Looks fine to me.<br/>\n    @revans2 are you OK with having the new function instead?</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461130","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461130","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461130,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMzA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T06:21:36Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Gvain commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13477759\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13477759</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    @clockfly </p>\n\n<p>    Thanks for your remind. <br/>\n    For an unacked topology. Before your patch, the OOM problem do exists, and I filed it at <a href=\"https://issues.apache.org/jira/browse/STORM-339\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-339</a></p>\n\n<p>    After your patch, this OOM problem seems still exists just as what you said and filed up at jira <a href=\"https://issues.apache.org/jira/browse/STORM-329\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-329</a>. Now, we are stuck on this as we are using unacked topology under heavy throughput, so shall we make this issue's priority higher and fix it in time ?   </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461132","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461132","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461132,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T08:32:02Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13480579\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13480579</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    @Gvain,</p>\n\n<p>    Unacked topology with no flow control is dangerous! </p>\n\n<p>    There are two concepts, flow control and error control. You don't want acker for its performance penalty, that is no error control. But you do need flow control.</p>\n\n<p>    But the fact is that current storm flow control method \"max.spout.pending\" depends on error control channel \"acker\", that is the dilemma. Maybe we should seperate \"max.spout.pending\" from error control channel \"acker\" and only serves for flow control.</p>\n\n<p>    One work-around is that when you emit a message with SpoutOutputCollector, you emit a id with a sampling rate, for example 1%.</p>\n\n<p>    collector.emit(tuple, messageId), </p>\n\n<p>    only 1% tuple has messageId, while 99% don't have.</p>\n\n<p>    In this case, you only have 1% acker traffic, reducing the performance penalty of acker, while still have some basic flow control.</p>\n\n<p>    Hope this helps!</p>\n\n\n\n\n\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461137","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461137","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461137,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExMzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T11:41:51Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user Gvain commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13485764\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13485764</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    @clockfly</p>\n\n<p>    Shall we just use a limited size of message queue in netty-client, if the queue is full, we can block or drop until channel has flushed away some pending messages. The strategy can be configurable just as <a href=\"https://issues.apache.org/jira/browse/STORM-329\" class=\"external-link\" rel=\"nofollow\">https://issues.apache.org/jira/browse/STORM-329</a> described.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461143","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461143","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461143,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNDM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T13:19:33Z","updated_at":"2025-01-24T12:51:58Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on a diff in the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#discussion_r13488844\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#discussion_r13488844</a></p>\n\n<p>    &#8212; Diff: storm-core/src/jvm/backtype/storm/messaging/netty/Client.java &#8212;<br/>\n    @@ -128,133 +185,114 @@ private long getSleepTimeMs()<br/>\n }</p>\n\n<p> /**</p>\n<ul class=\"alternate\" type=\"square\">\n\t<li>* Enqueue a task message to be sent to server<br/>\n    +     * Enqueue task messages to be sent to server<br/>\n  */</li>\n\t<li>public void send(int task, byte[] message) {</li>\n\t<li>//throw exception if the client is being closed</li>\n\t<li>if (being_closed.get()) {<br/>\n    +    synchronized public void send(Iterator<TaskMessage> msgs) {<br/>\n    +<br/>\n    +// throw exception if the client is being closed<br/>\n    +if (closing) \n{\n throw new RuntimeException(\"Client is being closed, and does not take requests any more\");\n     }\n<p>    -</p></li>\n\t<li>try \n{\n    -    message_queue.put(new TaskMessage(task, message));\n    -\n    -    //resume delivery if it is waiting for requests\n    -    tryDeliverMessages(true);\n    -}\n<p> catch (InterruptedException e) {</p></li>\n\t<li>throw new RuntimeException(e);<br/>\n    +<br/>\n    +if (null == msgs || !msgs.hasNext()) \n{\n    +    return;\n     }</li>\n\t<li>}<br/>\n    -</li>\n\t<li>/**</li>\n\t<li>* Retrieve messages from queue, and delivery to server if any</li>\n\t<li>*/</li>\n\t<li>synchronized void tryDeliverMessages(boolean only_if_waiting) throws InterruptedException {</li>\n\t<li>//just skip if delivery only if waiting, and we are not waiting currently</li>\n\t<li>if (only_if_waiting && !wait_for_requests)  return;</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//make sure that channel was not closed<br/>\n     Channel channel = channelRef.get();</li>\n\t<li>if (channel == null)  return;</li>\n\t<li>if (!channel.isOpen()) {</li>\n\t<li>LOG.info(\"Channel to {} is no longer open.\",remote_addr);</li>\n\t<li>//The channel is not open yet. Reconnect?</li>\n\t<li>reconnect();</li>\n\t<li>return;<br/>\n    +if (null == channel) \n{\n    +    connect();\n    +    channel = channelRef.get();\n     }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>final MessageBatch requests = tryTakeMessages();</li>\n\t<li>if (requests==null) \n{\n    -    wait_for_requests = true;\n    -    return;\n    -}\n<p>    +while (msgs.hasNext()) {<br/>\n    +    TaskMessage message = msgs.next();<br/>\n    +    if (null == messageBatch) </p>\n{\n    +messageBatch = new MessageBatch(messageBatchSize);\n    +    }</li>\n</ul>\n\n\n<ul class=\"alternate\" type=\"square\">\n\t<li>//if channel is being closed and we have no outstanding messages,  let's close the channel</li>\n\t<li>if (requests.isEmpty() && being_closed.get()) {</li>\n\t<li>close_n_release();</li>\n\t<li>return;<br/>\n    +    messageBatch.add(message);<br/>\n    +    if (messageBatch.isFull()) {<br/>\n    +MessageBatch toBeFlushed = messageBatch;<br/>\n    +flushRequest(channel, toBeFlushed);\n\t<ul class=\"alternate\" type=\"square\">\n\t\t<li>\n\t\t<ul class=\"alternate\" type=\"square\">\n\t\t\t<li>End diff &#8211;</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n\n<p>    Yes, that is what storm-329 want to do. But it may require more thoughts, because introducing another blocking buffer have performance penalty, and may cause deadlock. </p>\n\n<p>    I think for your unacked topology, the more reasonable method is to introduce a flow control mechanism. Let's have more disucssion in the thread of <a href=\"https://issues.apache.org/jira/browse/STORM-329\" title=\"Fix cascading Storm failure by improving reconnection strategy and buffering messages\" class=\"issue-link\" data-issue-key=\"STORM-329\"><del>STORM-329</del></a>. </p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612463577","html_url":"https://github.com/apache/storm/issues/4155#issuecomment-2612463577","issue_url":"https://api.github.com/repos/apache/storm/issues/4155","id":2612463577,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjM1Nzc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:13:55Z","updated_at":"2025-01-24T12:53:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/106\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/106</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612463577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612463580","html_url":"https://github.com/apache/storm/issues/4155#issuecomment-2612463580","issue_url":"https://api.github.com/repos/apache/storm/issues/4155","id":2612463580,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjM1ODA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:15:44Z","updated_at":"2025-01-24T12:53:09Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>I merge this into master.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612463580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612431601","html_url":"https://github.com/apache/storm/issues/3905#issuecomment-2612431601","issue_url":"https://api.github.com/repos/apache/storm/issues/3905","id":2612431601,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0MzE2MDE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:26:34Z","updated_at":"2025-01-24T12:35:52Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/33\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/33</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612431601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45356400","html_url":"https://github.com/apache/storm/pull/33#issuecomment-45356400","issue_url":"https://api.github.com/repos/apache/storm/issues/33","id":45356400,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzU2NDAw","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:27:00Z","updated_at":"2014-06-06T16:27:00Z","author_association":"CONTRIBUTOR","body":"@xiaokang Thanks, I merged this into master.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45356400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612431604","html_url":"https://github.com/apache/storm/issues/3905#issuecomment-2612431604","issue_url":"https://api.github.com/repos/apache/storm/issues/3905","id":2612431604,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0MzE2MDQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:27:01Z","updated_at":"2025-01-24T12:35:52Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/33#issuecomment-45356400\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/33#issuecomment-45356400</a></p>\n\n<p>    @xiaokang Thanks, I merged this into master.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612431604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468151","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468151","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468151,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNTE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:28:54Z","updated_at":"2025-01-24T12:54:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=revans2\">revans2</a>:</i>\n<p>Derek, can you turn this into a pull request to master?  <a href=\"https://issues.apache.org/jira/browse/STORM-63\" title=\"timeout request stay in queue of drpc server\" class=\"issue-link\" data-issue-key=\"STORM-63\"><del>STORM-63</del></a> has been merged into master already.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45356881","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45356881","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45356881,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzU2ODgx","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:31:20Z","updated_at":"2014-06-06T16:31:20Z","author_association":"CONTRIBUTOR","body":"Can you change the name to STORM-338, not STORM-388?\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45356881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468153","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468153","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468153,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:37:07Z","updated_at":"2025-01-24T12:54:55Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r opened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-335\" title=\"Test for cleaning up timed-out DRPC Requests\" class=\"issue-link\" data-issue-key=\"STORM-335\"><del>STORM-335</del></a> add drpc test for removing timed out requests from queue</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/incubator-storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/incubator-storm</a> <a href=\"https://issues.apache.org/jira/browse/STORM-335\" title=\"Test for cleaning up timed-out DRPC Requests\" class=\"issue-link\" data-issue-key=\"STORM-335\"><del>STORM-335</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #133</p>\n\n<hr />\n<p>commit e4e2879496c71128c8e6dfab5239b1ddaa399329<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2014-05-03T01:07:43Z</p>\n\n<p>    add drpc test for removing timed out requests from queue</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45357623","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45357623","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45357623,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzU3NjIz","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:38:06Z","updated_at":"2014-06-06T16:38:06Z","author_association":"CONTRIBUTOR","body":"+1 looks good.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45357623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454312","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454312","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454312,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQzMTI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:38:07Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45357623\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45357623</a></p>\n\n<p>    +1 looks good.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468158","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468158","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468158,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNTg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:42:01Z","updated_at":"2025-01-24T12:54:56Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dagit\">dagit</a>:</i>\n<p>I was doing so as you were typing I think <img class=\"emoticon\" src=\"https://issues.apache.org/jira/images/icons/emoticons/smile.png\" height=\"16\" width=\"16\" align=\"absmiddle\" alt=\"\" border=\"0\"/></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454314","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454314","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454314,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQzMTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:47:14Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user asfgit closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45358648","html_url":"https://github.com/apache/storm/pull/132#issuecomment-45358648","issue_url":"https://api.github.com/repos/apache/storm/issues/132","id":45358648,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzU4NjQ4","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:47:31Z","updated_at":"2014-06-06T16:47:31Z","author_association":"CONTRIBUTOR","body":"Thanks Kyle,  I merge this into master.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45358648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454317","html_url":"https://github.com/apache/storm/issues/4086#issuecomment-2612454317","issue_url":"https://api.github.com/repos/apache/storm/issues/4086","id":2612454317,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTQzMTc=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T16:47:35Z","updated_at":"2025-01-24T12:48:15Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/132#issuecomment-45358648\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/132#issuecomment-45358648</a></p>\n\n<p>    Thanks Kyle,  I merge this into master.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612454317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45360004","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45360004","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45360004,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzYwMDA0","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:00:33Z","updated_at":"2014-06-06T17:00:33Z","author_association":"CONTRIBUTOR","body":"@clockfly and everyone else I love the discussion that is happening here.  I think the code is now at a point where we can merge it in (2 binding +1s), and continue the discussion and development on separate JIRAs.   I tried to go through all of the comments and most of what is left is around possible improvements that are still remaining, but nothing blocking.  If anyone disagrees or has issues they have seen, but not expressed yet please speak up.  Otherwise I plan to merge this in later today.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45360004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461149","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461149","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461149,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNDk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:00:37Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45360004\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45360004</a></p>\n\n<p>    @clockfly and everyone else I love the discussion that is happening here.  I think the code is now at a point where we can merge it in (2 binding +1s), and continue the discussion and development on separate JIRAs.   I tried to go through all of the comments and most of what is left is around possible improvements that are still remaining, but nothing blocking.  If anyone disagrees or has issues they have seen, but not expressed yet please speak up.  Otherwise I plan to merge this in later today.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45362633","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45362633","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45362633,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzYyNjMz","user":{"login":"ptgoetz","id":260896,"node_id":"MDQ6VXNlcjI2MDg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/260896?v=4","gravatar_id":"","url":"https://api.github.com/users/ptgoetz","html_url":"https://github.com/ptgoetz","followers_url":"https://api.github.com/users/ptgoetz/followers","following_url":"https://api.github.com/users/ptgoetz/following{/other_user}","gists_url":"https://api.github.com/users/ptgoetz/gists{/gist_id}","starred_url":"https://api.github.com/users/ptgoetz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptgoetz/subscriptions","organizations_url":"https://api.github.com/users/ptgoetz/orgs","repos_url":"https://api.github.com/users/ptgoetz/repos","events_url":"https://api.github.com/users/ptgoetz/events{/privacy}","received_events_url":"https://api.github.com/users/ptgoetz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:26:38Z","updated_at":"2014-06-06T17:26:38Z","author_association":"MEMBER","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45362633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461154","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461154","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461154,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNTQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:26:40Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user ptgoetz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45362633\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45362633</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461154/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45362679","html_url":"https://github.com/apache/storm/pull/133#issuecomment-45362679","issue_url":"https://api.github.com/repos/apache/storm/issues/133","id":45362679,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzYyNjc5","user":{"login":"d2r","id":905298,"node_id":"MDQ6VXNlcjkwNTI5OA==","avatar_url":"https://avatars.githubusercontent.com/u/905298?v=4","gravatar_id":"","url":"https://api.github.com/users/d2r","html_url":"https://github.com/d2r","followers_url":"https://api.github.com/users/d2r/followers","following_url":"https://api.github.com/users/d2r/following{/other_user}","gists_url":"https://api.github.com/users/d2r/gists{/gist_id}","starred_url":"https://api.github.com/users/d2r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d2r/subscriptions","organizations_url":"https://api.github.com/users/d2r/orgs","repos_url":"https://api.github.com/users/d2r/repos","events_url":"https://api.github.com/users/d2r/events{/privacy}","received_events_url":"https://api.github.com/users/d2r/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:27:06Z","updated_at":"2014-06-06T17:27:06Z","author_association":"NONE","body":"Hold off, this may conflict with STORM-244...\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45362679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468160","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468160","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468160,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNjA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:27:08Z","updated_at":"2025-01-24T12:54:56Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133#issuecomment-45362679\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133#issuecomment-45362679</a></p>\n\n<p>    Hold off, this may conflict with <a href=\"https://issues.apache.org/jira/browse/STORM-244\" title=\"DRPC timeout can return null instead of throwing an exception\" class=\"issue-link\" data-issue-key=\"STORM-244\"><del>STORM-244</del></a>...</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468164","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468164","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468164,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNjQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:27:09Z","updated_at":"2025-01-24T12:54:56Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user d2r closed the pull request at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133</a></p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468164/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468165","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468165","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468165,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNjU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T17:55:31Z","updated_at":"2025-01-24T12:54:56Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>GitHub user d2r reopened a pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133</a></p>\n\n<p>    <a href=\"https://issues.apache.org/jira/browse/STORM-335\" title=\"Test for cleaning up timed-out DRPC Requests\" class=\"issue-link\" data-issue-key=\"STORM-335\"><del>STORM-335</del></a> add drpc test for removing timed out requests from queue</p>\n\n\n\n<p>You can merge this pull request into a Git repository by running:</p>\n\n<p>    $ git pull <a href=\"https://github.com/d2r/incubator-storm\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/d2r/incubator-storm</a> <a href=\"https://issues.apache.org/jira/browse/STORM-335\" title=\"Test for cleaning up timed-out DRPC Requests\" class=\"issue-link\" data-issue-key=\"STORM-335\"><del>STORM-335</del></a></p>\n\n<p>Alternatively you can review and apply these changes as the patch at:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133.patch\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133.patch</a></p>\n\n<p>To close this pull request, make a commit to your master/trunk branch<br/>\nwith (at least) the following in the commit message:</p>\n\n<p>    This closes #133</p>\n\n<hr />\n<p>commit e4e2879496c71128c8e6dfab5239b1ddaa399329<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2014-05-03T01:07:43Z</p>\n\n<p>    add drpc test for removing timed out requests from queue</p>\n\n<p>commit e69ead05a6ae098af6c7df65c5a725dea4d44d3f<br/>\nAuthor: Derek Dagit <derekd@yahoo-inc.com><br/>\nDate:   2014-06-06T17:47:41Z</p>\n\n<p>    Merge remote-tracking branch 'apache/master' into <a href=\"https://issues.apache.org/jira/browse/STORM-335\" title=\"Test for cleaning up timed-out DRPC Requests\" class=\"issue-link\" data-issue-key=\"STORM-335\"><del>STORM-335</del></a></p>\n\n<p>    Conflicts:<br/>\n    \tstorm-core/test/clj/backtype/storm/drpc_test.clj</p>\n\n<hr />","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45386497","html_url":"https://github.com/apache/storm/pull/130#issuecomment-45386497","issue_url":"https://api.github.com/repos/apache/storm/issues/130","id":45386497,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg2NDk3","user":{"login":"xpe","id":4576329,"node_id":"MDQ6VXNlcjQ1NzYzMjk=","avatar_url":"https://avatars.githubusercontent.com/u/4576329?v=4","gravatar_id":"","url":"https://api.github.com/users/xpe","html_url":"https://github.com/xpe","followers_url":"https://api.github.com/users/xpe/followers","following_url":"https://api.github.com/users/xpe/following{/other_user}","gists_url":"https://api.github.com/users/xpe/gists{/gist_id}","starred_url":"https://api.github.com/users/xpe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xpe/subscriptions","organizations_url":"https://api.github.com/users/xpe/orgs","repos_url":"https://api.github.com/users/xpe/repos","events_url":"https://api.github.com/users/xpe/events{/privacy}","received_events_url":"https://api.github.com/users/xpe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T21:32:14Z","updated_at":"2014-06-06T21:32:14Z","author_association":"CONTRIBUTOR","body":"@revans2 Done. Sorry about that!\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45386497/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468472","html_url":"https://github.com/apache/storm/issues/4180#issuecomment-2612468472","issue_url":"https://api.github.com/repos/apache/storm/issues/4180","id":2612468472,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0Njg0NzI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T21:32:15Z","updated_at":"2025-01-24T12:55:06Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user xpe commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/130#issuecomment-45386497\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/130#issuecomment-45386497</a></p>\n\n<p>    @revans2 Done. Sorry about that!</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45389078","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45389078","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45389078,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mzg5MDc4","user":{"login":"miguno","id":294849,"node_id":"MDQ6VXNlcjI5NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/294849?v=4","gravatar_id":"","url":"https://api.github.com/users/miguno","html_url":"https://github.com/miguno","followers_url":"https://api.github.com/users/miguno/followers","following_url":"https://api.github.com/users/miguno/following{/other_user}","gists_url":"https://api.github.com/users/miguno/gists{/gist_id}","starred_url":"https://api.github.com/users/miguno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguno/subscriptions","organizations_url":"https://api.github.com/users/miguno/orgs","repos_url":"https://api.github.com/users/miguno/repos","events_url":"https://api.github.com/users/miguno/events{/privacy}","received_events_url":"https://api.github.com/users/miguno/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T22:06:24Z","updated_at":"2014-06-06T22:06:24Z","author_association":"CONTRIBUTOR","body":"+1\n\n> On 06.06.2014, at 19:00, \"Robert (Bobby) Evans\" notifications@github.com wrote:\n> \n> @clockfly and everyone else I love the discussion that is happening here. I think the code is now at a point where we can merge it in (2 binding +1s), and continue the discussion and development on separate JIRAs. I tried to go through all of the comments and most of what is left is around possible improvements that are still remaining, but nothing blocking. If anyone disagrees or has issues they have seen, but not expressed yet please speak up. Otherwise I plan to merge this in later today.\n> \n> \n> Reply to this email directly or view it on GitHub.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45389078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461161","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461161","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461161,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNjE=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-06T22:06:27Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user miguno commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45389078\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45389078</a></p>\n\n<p>    +1</p>\n\n<p>    > On 06.06.2014, at 19:00, \"Robert (Bobby) Evans\" <notifications@github.com> wrote:<br/>\n    > <br/>\n    > @clockfly and everyone else I love the discussion that is happening here. I think the code is now at a point where we can merge it in (2 binding +1s), and continue the discussion and development on separate JIRAs. I tried to go through all of the comments and most of what is left is around possible improvements that are still remaining, but nothing blocking. If anyone disagrees or has issues they have seen, but not expressed yet please speak up. Otherwise I plan to merge this in later today.<br/>\n    > <br/>\n    > <br/>\n    > Reply to this email directly or view it on GitHub.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45402968","html_url":"https://github.com/apache/storm/pull/41#issuecomment-45402968","issue_url":"https://api.github.com/repos/apache/storm/issues/41","id":45402968,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDAyOTY4","user":{"login":"neeleshs","id":611296,"node_id":"MDQ6VXNlcjYxMTI5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/611296?v=4","gravatar_id":"","url":"https://api.github.com/users/neeleshs","html_url":"https://github.com/neeleshs","followers_url":"https://api.github.com/users/neeleshs/followers","following_url":"https://api.github.com/users/neeleshs/following{/other_user}","gists_url":"https://api.github.com/users/neeleshs/gists{/gist_id}","starred_url":"https://api.github.com/users/neeleshs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neeleshs/subscriptions","organizations_url":"https://api.github.com/users/neeleshs/orgs","repos_url":"https://api.github.com/users/neeleshs/repos","events_url":"https://api.github.com/users/neeleshs/events{/privacy}","received_events_url":"https://api.github.com/users/neeleshs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T06:52:09Z","updated_at":"2014-06-07T06:52:09Z","author_association":"NONE","body":"I have a topology with kafkaspout (parallelism 3, 3 partitions in the topic). Im using storm 0.9.1 tag and have built it with this patch. That got rid of the negative timeout error. But every time a message is sent from , one of the workers dies with this message: \n\n```\n    2014-06-07 06:43:27 b.s.d.task [INFO] Emitting: processMunchkin __ack_ack [2264770826798969496 7102317654394246142]\n    2014-06-07 06:43:27 b.s.util [ERROR] Async loop died!\n    java.lang.RuntimeException: java.lang.RuntimeException: Client is being closed, and does not take requests any more\n        at backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:107) ~[storm-core-0.9.1.0-incubating.jar:0.9.1.0-incubating]\n        at backtype.storm.utils.DisruptorQueue.consumeBatchWhenAvailable(DisruptorQueue.java:78) ~[storm-core-0.9.1.0-incubating.jar:0.9.1.0-incubating]\n        at backtype.storm.disruptor$consume_batch_when_available.invoke(disruptor.clj:77) ~[storm-core-0.9.1.0-incubating.jar:0.9.1.0-incubating]\n        at backtype.storm.disruptor$consume_loop_STAR_$fn__1577.invoke(disruptor.clj:89) ~[na:na]\n        at backtype.storm.util$async_loop$fn__384.invoke(util.clj:433) ~[na:na]\n        at clojure.lang.AFn.run(AFn.java:24) [clojure-1.4.0.jar:na]\n        at java.lang.Thread.run(Thread.java:744) [na:1.7.0_55]\n    Caused by: java.lang.RuntimeException: Client is being closed, and does not take requests any more\n        at backtype.storm.messaging.netty.Client.send(Client.java:125) ~[storm-core-0.9.1.0-incubating.jar:0.9.1.0-incubating]\n        at backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn__4398$fn__4399.invoke(worker.clj:319) ~[na:na]\n        at backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn__4398.invoke(worker.clj:308) ~[na:na]\n        at backtype.storm.disruptor$clojure_handler$reify__1560.onEvent(disruptor.clj:58) ~[na:na]\n        at backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:104) ~[storm-core-0.9.1.0-incubating.jar:0.9.1.0-incubating]\n        ... 6 common frames omitted\n    2014-06-07 06:43:27 b.s.util [INFO] Halting process: (\"Async loop died!\")\n```\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45402968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45412870","html_url":"https://github.com/apache/storm/pull/133#issuecomment-45412870","issue_url":"https://api.github.com/repos/apache/storm/issues/133","id":45412870,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDEyODcw","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:27:47Z","updated_at":"2014-06-07T15:27:47Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45412870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468166","html_url":"https://github.com/apache/storm/issues/4177#issuecomment-2612468166","issue_url":"https://api.github.com/repos/apache/storm/issues/4177","id":2612468166,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgxNjY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:27:50Z","updated_at":"2025-01-24T12:54:56Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/133#issuecomment-45412870\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/133#issuecomment-45412870</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45412886","html_url":"https://github.com/apache/storm/pull/129#issuecomment-45412886","issue_url":"https://api.github.com/repos/apache/storm/issues/129","id":45412886,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDEyODg2","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:28:13Z","updated_at":"2014-06-07T15:28:13Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45412886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468349","html_url":"https://github.com/apache/storm/issues/4179#issuecomment-2612468349","issue_url":"https://api.github.com/repos/apache/storm/issues/4179","id":2612468349,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjgzNDk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:28:14Z","updated_at":"2025-01-24T12:55:02Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/129#issuecomment-45412886\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/129#issuecomment-45412886</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612468349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45413255","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45413255","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45413255,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDEzMjU1","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:44:44Z","updated_at":"2014-06-07T15:44:44Z","author_association":"CONTRIBUTOR","body":"I tried to merge the pull request into master, and the tests are now failing with the following in the logs (on my mac)\n\n```\n134871 [Thread-1250-disruptor-worker-transfer-queue] INFO  backtype.storm.util - Halting process: (\"Async loop died!\")\n```\n\nI have not tried it on Linux, but the tests all pass on master.  @clockfly could you please look into it.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45413255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461169","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461169","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461169,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNjk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T15:44:46Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45413255\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45413255</a></p>\n\n<p>    I tried to merge the pull request into master, and the tests are now failing with the following in the logs (on my mac)<br/>\n    ```<br/>\n    134871 <span class=\"error\">&#91;Thread-1250-disruptor-worker-transfer-queue&#93;</span> INFO  backtype.storm.util - Halting process: (\"Async loop died!\")<br/>\n    ```</p>\n\n<p>    I have not tried it on Linux, but the tests all pass on master.  @clockfly could you please look into it.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45413952","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45413952","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45413952,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDEzOTUy","user":{"login":"clockfly","id":2595532,"node_id":"MDQ6VXNlcjI1OTU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2595532?v=4","gravatar_id":"","url":"https://api.github.com/users/clockfly","html_url":"https://github.com/clockfly","followers_url":"https://api.github.com/users/clockfly/followers","following_url":"https://api.github.com/users/clockfly/following{/other_user}","gists_url":"https://api.github.com/users/clockfly/gists{/gist_id}","starred_url":"https://api.github.com/users/clockfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clockfly/subscriptions","organizations_url":"https://api.github.com/users/clockfly/orgs","repos_url":"https://api.github.com/users/clockfly/repos","events_url":"https://api.github.com/users/clockfly/events{/privacy}","received_events_url":"https://api.github.com/users/clockfly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:09:36Z","updated_at":"2014-06-07T16:10:05Z","author_association":"CONTRIBUTOR","body":"Test pass on my machine,\nTests run: 157, Assertions: 101461, Failures: 0, Errors: 0\n\nThere should have a stacktrace in the log file, it can searched by using \"Async loop died!\" without \"Halting process\". can you find the error log?\n\n```\n                (catch Throwable t\n                  (log-error t \"Async loop died!\")\n                  (kill-fn t)\n                  ))\n```\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45413952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461174","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461174","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461174,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNzQ=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:09:38Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45413952\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45413952</a></p>\n\n<p>    Test pass on my machine,<br/>\n    Tests run: 157, Assertions: 101461, Failures: 0, Errors: 0</p>\n\n<p>    There should have a stacktrace in the log file, it can searched by using \"Async loop died!\" without \"Halting process\"</p>\n\n<p>(catch Throwable t<br/>\n  (log-error t \"Async loop died!\")<br/>\n  (kill-fn t)<br/>\n  ))</p>\n\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45414150","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45414150","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45414150,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE0MTUw","user":{"login":"revans2","id":3441321,"node_id":"MDQ6VXNlcjM0NDEzMjE=","avatar_url":"https://avatars.githubusercontent.com/u/3441321?v=4","gravatar_id":"","url":"https://api.github.com/users/revans2","html_url":"https://github.com/revans2","followers_url":"https://api.github.com/users/revans2/followers","following_url":"https://api.github.com/users/revans2/following{/other_user}","gists_url":"https://api.github.com/users/revans2/gists{/gist_id}","starred_url":"https://api.github.com/users/revans2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/revans2/subscriptions","organizations_url":"https://api.github.com/users/revans2/orgs","repos_url":"https://api.github.com/users/revans2/repos","events_url":"https://api.github.com/users/revans2/events{/privacy}","received_events_url":"https://api.github.com/users/revans2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:17:28Z","updated_at":"2014-06-07T16:17:28Z","author_association":"CONTRIBUTOR","body":"OK I'll try to look into it on my side then.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45414150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461178","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461178","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461178,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExNzg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:17:30Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user revans2 commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45414150\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45414150</a></p>\n\n<p>    OK I'll try to look into it on my side then.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45414524","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45414524","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45414524,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE0NTI0","user":{"login":"clockfly","id":2595532,"node_id":"MDQ6VXNlcjI1OTU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2595532?v=4","gravatar_id":"","url":"https://api.github.com/users/clockfly","html_url":"https://github.com/clockfly","followers_url":"https://api.github.com/users/clockfly/followers","following_url":"https://api.github.com/users/clockfly/following{/other_user}","gists_url":"https://api.github.com/users/clockfly/gists{/gist_id}","starred_url":"https://api.github.com/users/clockfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clockfly/subscriptions","organizations_url":"https://api.github.com/users/clockfly/orgs","repos_url":"https://api.github.com/users/clockfly/repos","events_url":"https://api.github.com/users/clockfly/events{/privacy}","received_events_url":"https://api.github.com/users/clockfly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:31:31Z","updated_at":"2014-06-07T16:31:31Z","author_association":"CONTRIBUTOR","body":"@Bobby, I reproduced this. It is random. I will look into this, thanks.\n\nSeems the Netty Client is closed before worker transfer thread is closed.\nSo, transfer thread got an exception.\n\n137917 [Thread-549-disruptor-worker-transfer-queue] ERROR backtype.storm.util - Async loop died!\njava.lang.RuntimeException: java.lang.RuntimeException: Client is being closed, and does not take requests any more\n    at backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:114) ~[classes/:na]\n    at backtype.storm.utils.DisruptorQueue.consumeBatchWhenAvailable(DisruptorQueue.java:85) ~[classes/:na]\n    at backtype.storm.disruptor$consume_batch_when_available.invoke(disruptor.clj:78) ~[classes/:na]\n    at backtype.storm.disruptor$consume_loop_STAR_$fn__2895.invoke(disruptor.clj:89) ~[classes/:na]\n    at backtype.storm.util$async_loop$fn__442.invoke(util.clj:434) ~[classes/:na]\n    at clojure.lang.AFn.run(AFn.java:24) [clojure-1.4.0.jar:na]\n    at java.lang.Thread.run(Thread.java:679) [na:1.6.0_22]\nCaused by: java.lang.RuntimeException: Client is being closed, and does not take requests any more\n    at backtype.storm.messaging.netty.Client.send(Client.java:194) ~[classes/:na]\n    at backtype.storm.utils.TransferDrainer.send(TransferDrainer.java:54) ~[classes/:na]\n    at backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn__5765$fn__5766.invoke(worker.clj:322) ~[classes/:na]\n    at backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn__5765.invoke(worker.clj:320) ~[classes/:na]\n    at backtype.storm.disruptor$clojure_handler$reify__2882.onEvent(disruptor.clj:59) ~[classes/:na]\n    at backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:111) ~[classes/:na]\n    ... 6 common frames omitted\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45414524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461185","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461185","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461185,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExODU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T16:31:34Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45414524\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45414524</a></p>\n\n<p>    @Bobby, I reproduced this. It is random. I will look into this, thanks.</p>\n\n<p>    Seems the Netty Client is closed before worker transfer thread is closed.<br/>\n    So, transfer thread got an exception.</p>\n\n<p>    137917 <span class=\"error\">&#91;Thread-549-disruptor-worker-transfer-queue&#93;</span> ERROR backtype.storm.util - Async loop died!<br/>\n    java.lang.RuntimeException: java.lang.RuntimeException: Client is being closed, and does not take requests any more<br/>\n    \tat backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:114) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.utils.DisruptorQueue.consumeBatchWhenAvailable(DisruptorQueue.java:85) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.disruptor$consume_batch_when_available.invoke(disruptor.clj:78) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.disruptor$consume_loop_STAR_$fn__2895.invoke(disruptor.clj:89) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.util$async_loop$fn__442.invoke(util.clj:434) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat clojure.lang.AFn.run(AFn.java:24) <span class=\"error\">&#91;clojure-1.4.0.jar:na&#93;</span><br/>\n    \tat java.lang.Thread.run(Thread.java:679) <span class=\"error\">&#91;na:1.6.0_22&#93;</span><br/>\n    Caused by: java.lang.RuntimeException: Client is being closed, and does not take requests any more<br/>\n    \tat backtype.storm.messaging.netty.Client.send(Client.java:194) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.utils.TransferDrainer.send(TransferDrainer.java:54) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn_<em>5765$fn</em>_5766.invoke(worker.clj:322) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.daemon.worker$mk_transfer_tuples_handler$fn__5765.invoke(worker.clj:320) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.disruptor$clojure_handler$reify__2882.onEvent(disruptor.clj:59) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \tat backtype.storm.utils.DisruptorQueue.consumeBatchToCursor(DisruptorQueue.java:111) ~<span class=\"error\">&#91;classes/:na&#93;</span><br/>\n    \t... 6 common frames omitted</p>\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45416875","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45416875","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45416875,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE2ODc1","user":{"login":"clockfly","id":2595532,"node_id":"MDQ6VXNlcjI1OTU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2595532?v=4","gravatar_id":"","url":"https://api.github.com/users/clockfly","html_url":"https://github.com/clockfly","followers_url":"https://api.github.com/users/clockfly/followers","following_url":"https://api.github.com/users/clockfly/following{/other_user}","gists_url":"https://api.github.com/users/clockfly/gists{/gist_id}","starred_url":"https://api.github.com/users/clockfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clockfly/subscriptions","organizations_url":"https://api.github.com/users/clockfly/orgs","repos_url":"https://api.github.com/users/clockfly/repos","events_url":"https://api.github.com/users/clockfly/events{/privacy}","received_events_url":"https://api.github.com/users/clockfly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T18:03:55Z","updated_at":"2014-06-07T18:03:55Z","author_association":"CONTRIBUTOR","body":"fixed.\n\nThe failed case is under namespace: backtype.storm.messaging-test\n\nroot cause:\nThe test failure is caused by the bug of local topology simulation. funtion complete-topology will asume topology is finished after all spout return, but it is not always true, the downstream bolts may be still working.\n\ndirect cause:\ncomplete-topology->all spout finish -> shutdown the topology->shutdown worker->shutdown netty client -> bolt still not finished -> bolt try to send mesage to netty client -> client already shutdown -> throw runtime exception.\n\nthe fix is to add a config to allow this topology to wait a longer time to be killed.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45416875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461188","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461188","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461188,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExODg=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T18:03:57Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45416875\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45416875</a></p>\n\n<p>    fixed.</p>\n\n<p>    The failed case is under namespace: backtype.storm.messaging-test</p>\n\n<p>    root cause:<br/>\n    The test failure is caused by the bug of local topology simulation. funtion complete-topology will asume topology is finished after all spout return, but it is not always true, the downstream bolts may be still working.</p>\n\n<p>    direct cause:<br/>\n    complete-topology->all spout finish <del>> shutdown the topology</del>>shutdown worker->shutdown netty client -> bolt still not finished -> bolt try to send mesage to netty client -> client already shutdown -> throw runtime exception.</p>\n\n<p>    the fix is to add a config to allow this topology to wait a longer time to be killed.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45418252","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45418252","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45418252,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE4MjUy","user":{"login":"nathanmarz","id":131416,"node_id":"MDQ6VXNlcjEzMTQxNg==","avatar_url":"https://avatars.githubusercontent.com/u/131416?v=4","gravatar_id":"","url":"https://api.github.com/users/nathanmarz","html_url":"https://github.com/nathanmarz","followers_url":"https://api.github.com/users/nathanmarz/followers","following_url":"https://api.github.com/users/nathanmarz/following{/other_user}","gists_url":"https://api.github.com/users/nathanmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/nathanmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nathanmarz/subscriptions","organizations_url":"https://api.github.com/users/nathanmarz/orgs","repos_url":"https://api.github.com/users/nathanmarz/repos","events_url":"https://api.github.com/users/nathanmarz/events{/privacy}","received_events_url":"https://api.github.com/users/nathanmarz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T18:58:59Z","updated_at":"2014-06-07T18:58:59Z","author_association":"CONTRIBUTOR","body":"-1 Tests should never, ever rely on timing in order to pass. This is the whole reason for doing time simulation in the first place, so that when functionality depends on time it can be properly tested without having to worry about random delays messing up the tests. \n\ncomplete-topology is inherently reliant on detecting topology completion based on the spout saying all its tuples are \"complete\". If you're testing topologies that don't do full tuple acking, then you should be testing using the \"tracked topologies\" utilities in backtype.storm.testing.clj\n\nFor example, here is how the acking system is tested using tracked topologies: https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213\n\nThe \"tracked-wait\" function is the key which will only return when both that many tuples have been emitted by the spouts AND the topology is idle (no tuples have been emitted nor will be emitted without further input) You shouldn't use tracked-topologies for topologies that have tick tuples, but that shouldn't be a problem in this case.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45418252/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461193","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461193","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461193,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExOTM=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T18:59:01Z","updated_at":"2025-01-24T12:51:59Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user nathanmarz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45418252\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45418252</a></p>\n\n<p>    -1 Tests should never, ever rely on timing in order to pass. This is the whole reason for doing time simulation in the first place, so that when functionality depends on time it can be properly tested without having to worry about random delays messing up the tests. </p>\n\n<p>    complete-topology is inherently reliant on detecting topology completion based on the spout saying all its tuples are \"complete\". If you're testing topologies that don't do full tuple acking, then you should be testing using the \"tracked topologies\" utilities in backtype.storm.testing.clj</p>\n\n<p>    For example, here is how the acking system is tested using tracked topologies: <a href=\"https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213</a></p>\n\n<p>    The \"tracked-wait\" function is the key which will only return when both that many tuples have been emitted by the spouts AND the topology is idle (no tuples have been emitted nor will be emitted without further input) You shouldn't use tracked-topologies for topologies that have tick tuples, but that shouldn't be a problem in this case.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45419054","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45419054","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45419054,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE5MDU0","user":{"login":"nathanmarz","id":131416,"node_id":"MDQ6VXNlcjEzMTQxNg==","avatar_url":"https://avatars.githubusercontent.com/u/131416?v=4","gravatar_id":"","url":"https://api.github.com/users/nathanmarz","html_url":"https://github.com/nathanmarz","followers_url":"https://api.github.com/users/nathanmarz/followers","following_url":"https://api.github.com/users/nathanmarz/following{/other_user}","gists_url":"https://api.github.com/users/nathanmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/nathanmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nathanmarz/subscriptions","organizations_url":"https://api.github.com/users/nathanmarz/orgs","repos_url":"https://api.github.com/users/nathanmarz/repos","events_url":"https://api.github.com/users/nathanmarz/events{/privacy}","received_events_url":"https://api.github.com/users/nathanmarz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T19:32:55Z","updated_at":"2014-06-07T19:32:55Z","author_association":"CONTRIBUTOR","body":"Additionally, besides having the potential to fail randomly inserting sleeps into test code also slows down the tests.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45419054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461196","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461196","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461196,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjExOTY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T19:32:57Z","updated_at":"2025-01-24T12:52:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user nathanmarz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45419054\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45419054</a></p>\n\n<p>    Additionally, besides having the potential to fail randomly inserting sleeps into test code also slows down the tests.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45419642","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45419642","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45419642,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDE5NjQy","user":{"login":"clockfly","id":2595532,"node_id":"MDQ6VXNlcjI1OTU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/2595532?v=4","gravatar_id":"","url":"https://api.github.com/users/clockfly","html_url":"https://github.com/clockfly","followers_url":"https://api.github.com/users/clockfly/followers","following_url":"https://api.github.com/users/clockfly/following{/other_user}","gists_url":"https://api.github.com/users/clockfly/gists{/gist_id}","starred_url":"https://api.github.com/users/clockfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clockfly/subscriptions","organizations_url":"https://api.github.com/users/clockfly/orgs","repos_url":"https://api.github.com/users/clockfly/repos","events_url":"https://api.github.com/users/clockfly/events{/privacy}","received_events_url":"https://api.github.com/users/clockfly/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T19:56:23Z","updated_at":"2014-06-07T19:56:23Z","author_association":"CONTRIBUTOR","body":"fixed\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45419642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461202","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461202","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461202,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjEyMDI=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-07T19:56:24Z","updated_at":"2025-01-24T12:52:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user clockfly commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45419642\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45419642</a></p>\n\n<p>    fixed</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450139","html_url":"https://github.com/apache/storm/issues/4055#issuecomment-2612450139","issue_url":"https://api.github.com/repos/apache/storm/issues/4055","id":2612450139,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTAxMzk=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T15:30:13Z","updated_at":"2025-01-24T12:46:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=btiernay\">btiernay</a>:</i>\n<p>Agreed, this would be a very useful feature for integration testing. Right now disabling <tt>LocalCluster</tt>'s in-memory ZooKeeper would be great since it really slows down startup time when another ZK instance already exists (from an in-memory Kafka for example).</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450146","html_url":"https://github.com/apache/storm/issues/4055#issuecomment-2612450146","issue_url":"https://api.github.com/repos/apache/storm/issues/4055","id":2612450146,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NTAxNDY=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T16:12:23Z","updated_at":"2025-01-24T12:46:03Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=btiernay\">btiernay</a>:</i>\n<p>Trace from <tt>0.9.2-incubating-SNAPSHOT</tt> that demonstrates that it takes ~30s to startup. Its unclear what exactly is going on with all the retries, but it would be nice to be able to disable this process.</p>\n\n<div class=\"preformatted panel\" style=\"border-width: 1px;\"><div class=\"preformattedContent panelContent\">\n<pre>2014-06-08 10:56:45,211 [main] INFO  b.storm.zookeeper - Starting inprocess zookeeper at port 2000 and dir /var/folders/mf/03qtdmr131j0fstqrhncqmsr0000gp/T//11586a38-472a-4794-8a66-46fed033648e\n2014-06-08 10:56:45,291 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:56:50,390 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:56:50,390 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:56:50,391 [main-EventThread] INFO  b.storm.zookeeper - Zookeeper state update: :connected:none\n2014-06-08 10:56:50,407 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:56:55,484 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:56:55,484 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:56:55,511 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:57:00,589 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:00,589 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:57:00,590 [main-EventThread] INFO  b.storm.zookeeper - Zookeeper state update: :connected:none\n2014-06-08 10:57:00,593 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n2014-06-08 10:57:00,596 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n2014-06-08 10:57:00,596 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:00,597 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n\n2014-06-08 10:57:00,599 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:00,599 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:57:00,599 [main-EventThread] INFO  b.storm.zookeeper - Zookeeper state update: :connected:none\n2014-06-08 10:57:00,602 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:57:05,679 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:05,679 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:57:05,697 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:57:05,699 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:05,700 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n2014-06-08 10:57:05,700 [main-EventThread] INFO  b.storm.zookeeper - Zookeeper state update: :connected:none\n2014-06-08 10:57:05,702 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n\n2014-06-08 10:57:10,773 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:10,773 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n\n2014-06-08 10:57:10,800 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n2014-06-08 10:57:10,803 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:10,803 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n\n2014-06-08 10:57:10,803 [main-EventThread] INFO  b.storm.zookeeper - Zookeeper state update: :connected:none\n2014-06-08 10:57:10,805 [main] INFO  o.a.c.f.i.CuratorFrameworkImpl - Starting\n2014-06-08 10:57:10,807 [main-EventThread] INFO  o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n2014-06-08 10:57:10,807 [ConnectionStateManager-0] WARN  o.a.c.f.s.ConnectionStateManager - There are no ConnectionStateListeners registered.\n\n2014-06-08 10:57:11,210 [main] INFO  b.s.s.EvenScheduler - Available slots: ([\"ad0687ee-df98-4d70-b1e2-7f798703fdc7\" 1024] [\"ad0687ee-df98-4d70-b1e2-7f798703fdc7\" 1025] [\"ad0687ee-df98-4d70-b1e2-7f798703fdc7\" 1026] [\"31cb29bf-d9ae-4ea5-9279-175fcce7c6de\" 1027] [\"31cb29bf-d9ae-4ea5-9279-175fcce7c6de\" 1028] [\"31cb29bf-d9ae-4ea5-9279-175fcce7c6de\" 1029])\n</pre>\n</div></div>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612450146/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45447183","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45447183","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45447183,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDQ3MTgz","user":{"login":"nathanmarz","id":131416,"node_id":"MDQ6VXNlcjEzMTQxNg==","avatar_url":"https://avatars.githubusercontent.com/u/131416?v=4","gravatar_id":"","url":"https://api.github.com/users/nathanmarz","html_url":"https://github.com/nathanmarz","followers_url":"https://api.github.com/users/nathanmarz/followers","following_url":"https://api.github.com/users/nathanmarz/following{/other_user}","gists_url":"https://api.github.com/users/nathanmarz/gists{/gist_id}","starred_url":"https://api.github.com/users/nathanmarz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nathanmarz/subscriptions","organizations_url":"https://api.github.com/users/nathanmarz/orgs","repos_url":"https://api.github.com/users/nathanmarz/repos","events_url":"https://api.github.com/users/nathanmarz/events{/privacy}","received_events_url":"https://api.github.com/users/nathanmarz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T20:14:30Z","updated_at":"2014-06-08T20:14:30Z","author_association":"CONTRIBUTOR","body":"+1\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45447183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461205","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461205","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461205,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjEyMDU=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T20:14:32Z","updated_at":"2025-01-24T12:52:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user nathanmarz commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45447183\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45447183</a></p>\n\n<p>    +1</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/45448273","html_url":"https://github.com/apache/storm/pull/103#issuecomment-45448273","issue_url":"https://api.github.com/repos/apache/storm/issues/103","id":45448273,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDQ4Mjcz","user":{"login":"miguno","id":294849,"node_id":"MDQ6VXNlcjI5NDg0OQ==","avatar_url":"https://avatars.githubusercontent.com/u/294849?v=4","gravatar_id":"","url":"https://api.github.com/users/miguno","html_url":"https://github.com/miguno","followers_url":"https://api.github.com/users/miguno/followers","following_url":"https://api.github.com/users/miguno/following{/other_user}","gists_url":"https://api.github.com/users/miguno/gists{/gist_id}","starred_url":"https://api.github.com/users/miguno/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/miguno/subscriptions","organizations_url":"https://api.github.com/users/miguno/orgs","repos_url":"https://api.github.com/users/miguno/repos","events_url":"https://api.github.com/users/miguno/events{/privacy}","received_events_url":"https://api.github.com/users/miguno/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T20:54:53Z","updated_at":"2014-06-08T20:54:53Z","author_association":"CONTRIBUTOR","body":"FYI: I'll add Nathan's comment on our test methodology to DEVELOPER.md.\n\n> On 07.06.2014, at 20:59, Nathan Marz notifications@github.com wrote:\n> \n> -1 Tests should never, ever rely on timing in order to pass. This is the whole reason for doing time simulation in the first place, so that when functionality depends on time it can be properly tested without having to worry about random delays messing up the tests.\n> \n> complete-topology is inherently reliant on detecting topology completion based on the spout saying all its tuples are \"complete\". If you're testing topologies that don't do full tuple acking, then you should be testing using the \"tracked topologies\" utilities in backtype.storm.testing.clj\n> \n> For example, here is how the acking system is tested using tracked topologies: https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213\n> \n> The \"tracked-wait\" function is the key which will only return when both that many tuples have been emitted by the spouts AND the topology is idle (no tuples have been emitted nor will be emitted without further input) You shouldn't use tracked-topologies for topologies that have tick tuples, but that shouldn't be a problem in this case.\n> \n> \n> Reply to this email directly or view it on GitHub.\n","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/45448273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461210","html_url":"https://github.com/apache/storm/issues/4139#issuecomment-2612461210","issue_url":"https://api.github.com/repos/apache/storm/issues/4139","id":2612461210,"node_id":"MDEyOklzc3VlQ29tbWVudDI2MTI0NjEyMTA=","user":{"login":"jira-importer","id":99357308,"node_id":"U_kgDOBewSfA","avatar_url":"https://avatars.githubusercontent.com/u/99357308?v=4","gravatar_id":"","url":"https://api.github.com/users/jira-importer","html_url":"https://github.com/jira-importer","followers_url":"https://api.github.com/users/jira-importer/followers","following_url":"https://api.github.com/users/jira-importer/following{/other_user}","gists_url":"https://api.github.com/users/jira-importer/gists{/gist_id}","starred_url":"https://api.github.com/users/jira-importer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jira-importer/subscriptions","organizations_url":"https://api.github.com/users/jira-importer/orgs","repos_url":"https://api.github.com/users/jira-importer/repos","events_url":"https://api.github.com/users/jira-importer/events{/privacy}","received_events_url":"https://api.github.com/users/jira-importer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-06-08T20:54:57Z","updated_at":"2025-01-24T12:52:00Z","author_association":"COLLABORATOR","body":"<i><a href=\"https://issues.apache.org/jira/secure/ViewProfile.jspa?name=githubbot\">githubbot</a>:</i>\n<p>Github user miguno commented on the pull request:</p>\n\n<p>    <a href=\"https://github.com/apache/incubator-storm/pull/103#issuecomment-45448273\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/pull/103#issuecomment-45448273</a></p>\n\n<p>    FYI: I'll add Nathan's comment on our test methodology to DEVELOPER.md.</p>\n\n\n<p>    > On 07.06.2014, at 20:59, Nathan Marz <notifications@github.com> wrote:<br/>\n    > <br/>\n    > -1 Tests should never, ever rely on timing in order to pass. This is the whole reason for doing time simulation in the first place, so that when functionality depends on time it can be properly tested without having to worry about random delays messing up the tests.<br/>\n    > <br/>\n    > complete-topology is inherently reliant on detecting topology completion based on the spout saying all its tuples are \"complete\". If you're testing topologies that don't do full tuple acking, then you should be testing using the \"tracked topologies\" utilities in backtype.storm.testing.clj<br/>\n    > <br/>\n    > For example, here is how the acking system is tested using tracked topologies: <a href=\"https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213\" class=\"external-link\" target=\"_blank\" rel=\"nofollow noopener\">https://github.com/apache/incubator-storm/blob/master/storm-core/test/clj/backtype/storm/integration_test.clj#L213</a><br/>\n    > <br/>\n    > The \"tracked-wait\" function is the key which will only return when both that many tuples have been emitted by the spouts AND the topology is idle (no tuples have been emitted nor will be emitted without further input) You shouldn't use tracked-topologies for topologies that have tick tuples, but that shouldn't be a problem in this case.<br/>\n    > <br/>\n    > <br/>\n    > Reply to this email directly or view it on GitHub.</p>","reactions":{"url":"https://api.github.com/repos/apache/storm/issues/comments/2612461210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]