[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1095817099","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1095817099","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1095817099,"node_id":"IC_kwDOACaFSM5BUNeL","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T01:59:09Z","updated_at":"2022-04-12T02:45:43Z","author_association":"CONTRIBUTOR","body":"Thanks for the feedback & speedy response. You are correct -- normally we would see an InterruptedException get thrown. \r\n\r\nIn this case, though, what is actually thrown is an IOException in the form of ClosedByInterruptException when trying to open a socket: https://docs.oracle.com/javase/9/docs/api/java/nio/channels/ClosedByInterruptException.html . \r\n\r\n\"Checked exception received by a thread when another thread interrupts it while it is blocked in an I/O operation upon a channel. Before this exception is thrown the channel will have been closed and the interrupt status of the previously-blocked thread will have been set.\"\r\n\r\nThis ends up being swallowed and logged, so we see an endless loop of \"WARN ThriftUtil: Failed to open transport...\"\r\n\r\nIf you look in ThriftUtil.java, createClientTransport:\r\n\r\nI see this code:\r\n\r\n```java\r\n        try {\r\n          transport = TTimeoutTransport.create(address, timeout);\r\n        } catch (TTransportException e) {\r\n          log.warn(\"Failed to open transport to {}\", address);\r\n          throw e;\r\n        }\r\n```\r\n\r\nTTimeoutTransport.create ends up here:\r\n\r\n```java\r\n  TTransport createInternal(SocketAddress addr, long timeoutMillis) throws TTransportException {\r\n    Socket socket = null;\r\n    try {\r\n      socket = openSocket(addr, (int) timeoutMillis);\r\n    } catch (IOException e) {\r\n      // openSocket handles closing the Socket on error\r\n      throw new TTransportException(e);\r\n    }\r\n```\r\n\r\nSince this manifests as an IOException, it's turned into a TTransportException. Gets logged and re thrown, then in the execute loop, retried forever.\r\n\r\nI made the patch handle in this manner because this was the pattern I saw elsewhere -- in the ThriftServer while loop. So I thought this was the appropriate pattern. I also wasn't sure if either createClientTransport or TTimeoutTransport.create had the appropriate information to special case this exception -- felt like the caller should be handling it. More than happy to move this / handle differently though? Let me know.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1095817099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1095884144","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1095884144","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1095884144,"node_id":"IC_kwDOACaFSM5BUd1w","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T02:55:56Z","updated_at":"2022-04-12T02:55:56Z","author_association":"MEMBER","body":"@nikita-sirohi Thanks for the explanation! It helps a lot.\r\n\r\n(Note: I updated your markdown blocks in your comment above, so it looks better... in case you were curious why I edited your comment.)\r\n\r\nI'll have to see where this pattern is being used elsewhere... it feels wrong, but if it's being done that elsewhere, I'm curious why. Ideally, if we know that this can manifest as `ClosedByInterruptException` when opening a socket, we should probably have a separate catch block just for that to handle it differently than other `IOException`s, so we don't retry forever and maybe the interrupt exception gets propagated instead.\r\n\r\nI'm not sure I understand what you mean about `wasn't sure if either createClientTransport or TTimeoutTransport.create had the appropriate information to special case this exception`, but I suspect this will be obvious if we try to handle it differently.\r\n\r\nI'm not familiar with trino. What circumstance with that caused you to see this? Does it just have a command-line interface and you hit `Ctrl+C` while it was opening a socket? Or does it interrupt Accumulo threads routinely by some other mechanism? I know I haven't seen this very often... these threads don't normally get interrupted while opening sockets, so this is a very strange edge case for me.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1095884144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096099669","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1096099669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1096099669,"node_id":"IC_kwDOACaFSM5BVSdV","user":{"login":"Devamparikh","id":60180815,"node_id":"MDQ6VXNlcjYwMTgwODE1","avatar_url":"https://avatars.githubusercontent.com/u/60180815?v=4","gravatar_id":"","url":"https://api.github.com/users/Devamparikh","html_url":"https://github.com/Devamparikh","followers_url":"https://api.github.com/users/Devamparikh/followers","following_url":"https://api.github.com/users/Devamparikh/following{/other_user}","gists_url":"https://api.github.com/users/Devamparikh/gists{/gist_id}","starred_url":"https://api.github.com/users/Devamparikh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Devamparikh/subscriptions","organizations_url":"https://api.github.com/users/Devamparikh/orgs","repos_url":"https://api.github.com/users/Devamparikh/repos","events_url":"https://api.github.com/users/Devamparikh/events{/privacy}","received_events_url":"https://api.github.com/users/Devamparikh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T05:44:36Z","updated_at":"2022-04-12T05:46:27Z","author_association":"NONE","body":"Hey there, I have reviewed you plan, Can outsiders work on this issue? I want to help in migrating Junit4 to Junit5. Can I get some issues to work on? Thanks :)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096099669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096523124","html_url":"https://github.com/apache/accumulo/pull/2573#issuecomment-1096523124","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2573","id":1096523124,"node_id":"IC_kwDOACaFSM5BW510","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T10:22:15Z","updated_at":"2022-04-12T10:22:15Z","author_association":"CONTRIBUTOR","body":"> Is this important to you?\r\n\r\nNo, I had free time on my hands and decided to make things easily identifiable for later removal. I have no issue with punting or closing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096523124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096542312","html_url":"https://github.com/apache/accumulo/pull/2616#issuecomment-1096542312","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2616","id":1096542312,"node_id":"IC_kwDOACaFSM5BW-ho","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T10:31:08Z","updated_at":"2022-04-12T10:31:08Z","author_association":"CONTRIBUTOR","body":"> I think this should be held back until that one is merged.\r\n\r\nI have no issue with that\r\n\r\n> However, it seems quite large, and some of it probably conflicts with the design changes in https://github.com/apache/accumulo/pull/2197.\r\n\r\nIIRC most of the changes here have to do with the fact that CryptoService is now AutoClosable","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096542312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096557877","html_url":"https://github.com/apache/accumulo/pull/2616#issuecomment-1096557877","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2616","id":1096557877,"node_id":"IC_kwDOACaFSM5BXCU1","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T10:44:00Z","updated_at":"2022-04-12T10:44:00Z","author_association":"CONTRIBUTOR","body":"> > However, it seems quite large, and some of it probably conflicts with the design changes in #2197.\r\n> \r\n> IIRC most of the changes here have to do with the fact that CryptoService is now AutoClosable\r\n\r\nThe changes in #2197 are also incomplete so that would be another reason to wait and could be why this PR looks so big.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096557877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096592315","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1096592315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1096592315,"node_id":"IC_kwDOACaFSM5BXKu7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T11:17:39Z","updated_at":"2022-04-12T11:17:39Z","author_association":"CONTRIBUTOR","body":"> so we can create a service that is built using smaller service building blocks.\r\n\r\nLooking at how this could be broken down, I'm wondering if it makes sense to group the Thrift calls made in support of client operations (Instance, Namespace, Replication, Security, Table) into Thrift Service definitions (InstanceService, NamespaceService, ...). For the tablet mutating objects (BatchWriter, BatchDeleter, ...) create a TabletWriterService, and a TabletReaderService for tablet scanning objects (Scanner, BatchScanner, ...)\r\n\r\nI'm thinking that this could be a follow-on task to this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096592315/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096620059","html_url":"https://github.com/apache/accumulo/pull/2609#issuecomment-1096620059","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2609","id":1096620059,"node_id":"IC_kwDOACaFSM5BXRgb","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T11:46:08Z","updated_at":"2022-04-12T11:46:08Z","author_association":"CONTRIBUTOR","body":"> I was thinking along the lines of having a thread pool / executor that handles the actual writes, and these RPC threads just delegate the write work to that pool, and wait on its Future. Could have a different pool for metadata writes and user table writes, so only user table writes are constrained.\r\n\r\nI think I see what you are saying but these ideas sound like they could be a follow on improvement. If the current solution works and provides a config option for the user, are you OK merging? It would be nice to get the config option into 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096620059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096656539","html_url":"https://github.com/apache/accumulo/pull/2609#issuecomment-1096656539","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2609","id":1096656539,"node_id":"IC_kwDOACaFSM5BXaab","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T12:22:46Z","updated_at":"2022-04-12T12:22:46Z","author_association":"CONTRIBUTOR","body":"I screwed this up in my last commit. I am fixing it today.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096656539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096815550","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1096815550","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1096815550,"node_id":"IC_kwDOACaFSM5BYBO-","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T14:37:58Z","updated_at":"2022-04-12T14:37:58Z","author_association":"MEMBER","body":"> Hey there, I have reviewed you plan, Can outsiders work on this issue?\r\n\r\nYes, everyone is welcome to work on issues here.\r\n\r\n> I want to help in migrating Junit4 to Junit5. Can I get some issues to work on?\r\n\r\nThank you for your interest! I think in the case of this particular issue, there are only a few modules that still need to be converted to JUnit 5 and they are actively being worked on so this task should be finished soon. There are plenty of other open, unassigned tickets that are available to be worked if you are interested. Those marked as \"good first issue\" might be a good starting place.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096815550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096858176","html_url":"https://github.com/apache/accumulo/pull/2573#issuecomment-1096858176","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2573","id":1096858176,"node_id":"IC_kwDOACaFSM5BYLpA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T15:12:40Z","updated_at":"2022-04-12T15:12:40Z","author_association":"MEMBER","body":"> > Is this important to you?\r\n> \r\n> No, I had free time on my hands and decided to make things easily identifiable for later removal. I have no issue with punting or closing.\r\n\r\nI just saw that this was still open and was trying to close PRs yesterday. Let's merge or close this. I'll leave the decision to you.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096858176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096883760","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1096883760","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1096883760,"node_id":"IC_kwDOACaFSM5BYR4w","user":{"login":"Devamparikh","id":60180815,"node_id":"MDQ6VXNlcjYwMTgwODE1","avatar_url":"https://avatars.githubusercontent.com/u/60180815?v=4","gravatar_id":"","url":"https://api.github.com/users/Devamparikh","html_url":"https://github.com/Devamparikh","followers_url":"https://api.github.com/users/Devamparikh/followers","following_url":"https://api.github.com/users/Devamparikh/following{/other_user}","gists_url":"https://api.github.com/users/Devamparikh/gists{/gist_id}","starred_url":"https://api.github.com/users/Devamparikh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Devamparikh/subscriptions","organizations_url":"https://api.github.com/users/Devamparikh/orgs","repos_url":"https://api.github.com/users/Devamparikh/repos","events_url":"https://api.github.com/users/Devamparikh/events{/privacy}","received_events_url":"https://api.github.com/users/Devamparikh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T15:34:28Z","updated_at":"2022-04-12T15:34:28Z","author_association":"NONE","body":"Actually I have applied for GSoC2022 and asked to work on  Eclipse JKube™: Migrate To JUnit5 Testing Framework from JUnit4 project. I would appreciate it if you could assign a small portion of the migration to JUnit5 to me, please. And I assure you I'll work hard.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096883760/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096890092","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1096890092","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1096890092,"node_id":"IC_kwDOACaFSM5BYTbs","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T15:40:05Z","updated_at":"2022-04-12T15:40:05Z","author_association":"MEMBER","body":"@Devamparikh We appreciate your interest, but this work is already being done by others and is almost done, and there isn't anything left to share with you. If there's other tickets you're interested in working on, we would welcome your help with those instead. But, unfortunately, I don't think there's anything left for you to help with on this one.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1096890092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097029664","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1097029664","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1097029664,"node_id":"IC_kwDOACaFSM5BY1gg","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T18:02:08Z","updated_at":"2022-04-12T18:02:08Z","author_association":"CONTRIBUTOR","body":"Re \"What circumstance with that caused you to see this?\":\r\n\r\nTrino is a distributed SQL query engine: https://trino.io/ . Essentially, trino will spawn a number of threads to execute tasks against whatever the backing database/APIs are. If a query is aborted (ctrl+c as you asked about, etc), or a separate task fails, etc, the thread will be interrupted. \r\n\r\nMost of the time I've seen this has been from ctrl+c called, but have seen this from queries failing/getting aborted in other ways as well (OOMs, or bad data).\r\n\r\nTrino has some out of the box plugins, including one for accumulo, which from looking at the code I _suspect_ will have this same problem, but have not tried it out. We (my employer) wrote an us-specific plugin that uses trino to talk to accumulo/do some other things; we found that over time, performance would degrade until eventually no queries were serviceable. We saw the endless loop of \"WARN ThriftUtil: Failed to open transport...\" and traced from there. \r\n\r\nNot at all surprised this is such an edge case -- was surprised to see that opening sockets while threads are interrupted works this way.\r\n\r\n-------\r\n\r\nRe \"wasn't sure if either createClientTransport or TTimeoutTransport.create had the appropriate information to special case this exception\" -- \r\n\r\nit looked to me like these functions were doing very specific things, and not doing much \"logic\" with exceptions beyond wrapping them as TTransportExceptions and handing them to the caller. I also wasn't sure if every caller would want to see this exception handled the same way. I also wasn't sure if there were other such exceptions that would need special casing.\r\n\r\n------\r\n\r\nRe \"I'll have to see where this pattern is being used elsewhere... it feels wrong, but if it's being done that elsewhere, I'm curious why.\"\r\n\r\nHonestly, beyond this and a bit of other debugging, I haven't spent a ton of time digging through accumulo internals. I saw the patch tracked in ACCUMULO-3030/77226b05bbfc204ec45e3aefb5ea580fb5b9b5af and did a best effort pattern match; not much more to it :) . \r\n\r\nLet me know and will adjust the PR as needed. Thanks for all the conversation!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097029664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097184402","html_url":"https://github.com/apache/accumulo/pull/2608#issuecomment-1097184402","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2608","id":1097184402,"node_id":"IC_kwDOACaFSM5BZbSS","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-12T20:28:22Z","updated_at":"2022-04-12T20:29:30Z","author_association":"MEMBER","body":"This is looking good. Just had the one comment. Also, I was only able to get these tests to run with surefire version M6 so if you could merge main (which is on version M6) into this branch that would be good.\r\n\r\nAfter manually switching to M6 though, these tests pass in my IDE and when run with maven.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097184402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097524308","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1097524308","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1097524308,"node_id":"IC_kwDOACaFSM5BauRU","user":{"login":"Devamparikh","id":60180815,"node_id":"MDQ6VXNlcjYwMTgwODE1","avatar_url":"https://avatars.githubusercontent.com/u/60180815?v=4","gravatar_id":"","url":"https://api.github.com/users/Devamparikh","html_url":"https://github.com/Devamparikh","followers_url":"https://api.github.com/users/Devamparikh/followers","following_url":"https://api.github.com/users/Devamparikh/following{/other_user}","gists_url":"https://api.github.com/users/Devamparikh/gists{/gist_id}","starred_url":"https://api.github.com/users/Devamparikh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Devamparikh/subscriptions","organizations_url":"https://api.github.com/users/Devamparikh/orgs","repos_url":"https://api.github.com/users/Devamparikh/repos","events_url":"https://api.github.com/users/Devamparikh/events{/privacy}","received_events_url":"https://api.github.com/users/Devamparikh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T03:48:32Z","updated_at":"2022-04-13T03:48:32Z","author_association":"NONE","body":"@ctubbsii Okay, Let me check In what ways can I be helpful.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097524308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097912057","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1097912057","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1097912057,"node_id":"IC_kwDOACaFSM5BcM75","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T10:56:57Z","updated_at":"2022-04-13T11:54:54Z","author_association":"CONTRIBUTOR","body":"Exception being thrown in the Client:\r\n<pre>\r\n2022-04-13T06:37:33,846 [clientImpl.ScannerIterator] DEBUG: Exception when closing scan session\r\njava.lang.IllegalStateException: This client was closed.\r\n\tat org.apache.accumulo.core.clientImpl.ClientContext.ensureOpen(ClientContext.java:147) ~[classes/:?]\r\n\tat org.apache.accumulo.core.clientImpl.ClientContext.getTransportPool(ClientContext.java:1018) ~[classes/:?]\r\n\tat org.apache.accumulo.core.rpc.ThriftUtil.getClient(ThriftUtil.java:129) ~[classes/:?]\r\n\tat org.apache.accumulo.core.rpc.ThriftUtil.getTServerClient(ThriftUtil.java:175) ~[classes/:?]\r\n\tat org.apache.accumulo.core.clientImpl.ThriftScanner.close(ThriftScanner.java:586) ~[classes/:?]\r\n\tat org.apache.accumulo.core.clientImpl.ScannerIterator.lambda$close$0(ScannerIterator.java:129) ~[classes/:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[classes/:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52) ~[classes/:?]\r\n\tat java.lang.Thread.run(Thread.java:829) ~[?:?]\r\n</pre>\r\n\r\nUpdate: I decreased the timeout to 2 minutes and only 2 of the tests were timing out: `binary()` and `bulk`. I only saw this exception in the `bulk()` test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1097912057/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098056337","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098056337","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098056337,"node_id":"IC_kwDOACaFSM5BcwKR","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T13:32:53Z","updated_at":"2022-04-13T13:32:53Z","author_association":"CONTRIBUTOR","body":"It seems like this IT is just very flaky. I dropped the timeout of 6 minutes and when I run in my IDE (intelliJ) the tests pass. When I run the IT again on the command line, it takes a long time and sometimes fails.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098056337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098067549","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1098067549","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1098067549,"node_id":"IC_kwDOACaFSM5Bcy5d","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T13:42:54Z","updated_at":"2022-04-13T13:42:54Z","author_association":"CONTRIBUTOR","body":"I noticed while working on this that ManagerClient, FateManagerClient, ReplicationClient and ServerClient have a good amount of code duplication. I think it might be possible to consolidate them. Not sure if that should be part of this PR or another issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098067549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098107680","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098107680","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098107680,"node_id":"IC_kwDOACaFSM5Bc8sg","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T14:17:45Z","updated_at":"2022-04-13T14:18:01Z","author_association":"MEMBER","body":"I just ran these tests and am also seeing the binary() test timeout.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098107680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098148911","html_url":"https://github.com/apache/accumulo/pull/2627#issuecomment-1098148911","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2627","id":1098148911,"node_id":"IC_kwDOACaFSM5BdGwv","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T14:51:27Z","updated_at":"2022-04-13T14:52:36Z","author_association":"MEMBER","body":"> * Make SslWithBinaryIT and SslWithBulkIT children of the other ssl related ITs so we can better\r\n>       control the timeouts between the tests\r\n\r\nIf controlling the timeout per-test-method is what you are after, you could add an `@Timeout` annotation to the existing test methods which will take precedence over what is set by `defaultTimeout()`. For example you can add `@Timeout(value = 8, unit = MINUTES)` under the `@Test` annotation.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098148911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098248617","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1098248617","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1098248617,"node_id":"IC_kwDOACaFSM5BdfGp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T16:23:39Z","updated_at":"2022-04-13T16:23:39Z","author_association":"CONTRIBUTOR","body":"ITs (sans SSLIT) passed: https://github.com/dlmarion/accumulo/runs/6010169563","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098248617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098270329","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098270329","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098270329,"node_id":"IC_kwDOACaFSM5BdkZ5","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T16:47:14Z","updated_at":"2022-04-13T16:47:14Z","author_association":"MEMBER","body":"These tests started timing out after #2612 was merged. It's not just these tests that take longer, though... the total build time went from around 4h10m to 5h35m. I'm going to take another look at the changes in #2612 that might have caused this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098270329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098271787","html_url":"https://github.com/apache/accumulo/pull/2627#issuecomment-1098271787","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2627","id":1098271787,"node_id":"IC_kwDOACaFSM5Bdkwr","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T16:48:54Z","updated_at":"2022-04-13T16:48:54Z","author_association":"MEMBER","body":"I don't think this change is necessary. See https://github.com/apache/accumulo/issues/2626#issuecomment-1098270329 for why I think these tests are timing out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098271787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098312832","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098312832","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098312832,"node_id":"IC_kwDOACaFSM5BduyA","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T17:35:51Z","updated_at":"2022-04-13T17:35:51Z","author_association":"MEMBER","body":"I've confirmed that these timeouts were caused by the client side idle transports timeout being set to `GENERAL_RPC_TIMEOUT` instead of the previously hard-coded 3 seconds. Setting this in the client properties for the SslIT caused the `binary` test to go from 443.3 seconds to 152.6... much much faster.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098312832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098315570","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098315570","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098315570,"node_id":"IC_kwDOACaFSM5Bdvcy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T17:38:56Z","updated_at":"2022-04-13T17:38:56Z","author_association":"MEMBER","body":"I'm trying to decide whether we should change the client-side back to a hard-coded 3 seconds, or if we should just override the default to set it to a low number for MiniAccumuloCluster, or create a new client-side property specifically for this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098315570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098318840","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098318840","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098318840,"node_id":"IC_kwDOACaFSM5BdwP4","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T17:42:48Z","updated_at":"2022-04-13T17:42:48Z","author_association":"CONTRIBUTOR","body":"what - if any impact would any of the different timeout settings have on existing clients?   From the discussion, it seems that if they are closing (or letting the client close) then there would be no impact - but if it defaulted to a value larger than the 3 seconds, how would that impact them?\r\n\r\nEven having a separate, client-side prop that was set to the default - how would someone determine what a \"better\" value was?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098318840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098376133","html_url":"https://github.com/apache/accumulo/issues/2626#issuecomment-1098376133","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2626","id":1098376133,"node_id":"IC_kwDOACaFSM5Bd-PF","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T18:51:32Z","updated_at":"2022-04-13T18:51:32Z","author_association":"MEMBER","body":"> what - if any impact would any of the different timeout settings have on existing clients? From the discussion, it seems that if they are closing (or letting the client close) then there would be no impact - but if it defaulted to a value larger than the 3 seconds, how would that impact them?\r\n> \r\n> Even having a separate, client-side prop that was set to the default - how would someone determine what a \"better\" value was?\r\n\r\nSo, I'm not actually sure why the timeout is even making a difference... certainly not that substantial of a difference. The impact is in startup/teardown of new transports... I wouldn't have thought they'd be *that* expensive. But, apparently they are expensive enough to warrant us creating a pool to reuse them, and expensive enough for the JIRA request to make them configurable on the client side.\r\n\r\nThe fact that performance worsened when the timeout default increased implies the expense we saw was primarily in the shutting down of transports when the client is closed... because a longer timeout means more are still sticking around when the client is closed. I would have expected more performance lost creating new transports, not closing the ones that stuck around. But that's not what we saw in the tests after my change.\r\n\r\nSo, ultimately, I have no idea how users decide how to optimize this value. What I do know... is that the client side needs to go back to its previous default value, which was 3 seconds. So, I'm creating a separate property so its default is different on the client than on the server. I'm testing that locally now and will have a PR up soon.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098376133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098434023","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1098434023","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1098434023,"node_id":"IC_kwDOACaFSM5BeMXn","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-13T20:03:04Z","updated_at":"2022-04-13T20:03:04Z","author_association":"MEMBER","body":"I think everything that can be done at this point has been done for this ticket. The only JUnit4 tests that remain are those that use powermock. Im wondering if this ticket should stay open until we have completely removed all JUnit4 usage or if it should be closed and the remaining tests that use powermock be tracked in a new ticket.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098434023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098630444","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1098630444","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1098630444,"node_id":"IC_kwDOACaFSM5Be8Us","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T01:48:30Z","updated_at":"2022-04-14T01:48:30Z","author_association":"MEMBER","body":"> I think everything that can be done at this point has been done for this ticket. The only JUnit4 tests that remain are those that use powermock. Im wondering if this ticket should stay open until we have completely removed all JUnit4 usage or if it should be closed and the remaining tests that use powermock be tracked in a new ticket.\r\n\r\nThe only remaining thing I can think of for this issue is to add a check that:\r\n\r\n1. Fails if it detects uses of the vintage API in classes other than the few that currently need to use it for PowerMock.\r\n2. Fails if it detects that any jupiter API being used in one of those same few classes.\r\n\r\nAfter that, we should be able to close it as complete. There's nothing to be done for the few PowerMock classes, so there's nothing else to track in a new ticket.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098630444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098635019","html_url":"https://github.com/apache/accumulo/pull/2629#issuecomment-1098635019","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2629","id":1098635019,"node_id":"IC_kwDOACaFSM5Be9cL","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T01:59:26Z","updated_at":"2022-04-14T01:59:26Z","author_association":"MEMBER","body":"I verified this brought the build back to a reasonable 4h20m, within norms again, and both SSL tests passed on my server where they had been failing before.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1098635019/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099249960","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1099249960","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1099249960,"node_id":"IC_kwDOACaFSM5BhTko","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T14:33:19Z","updated_at":"2022-04-14T14:38:06Z","author_association":"MEMBER","body":"I am running the new/changed tests on this branch and am seeing some test failures:\r\n```\r\n[INFO] Results:\r\n[INFO] \r\n[ERROR] Failures: \r\n[ERROR]   PropStoreZooKeeperIT.createNoProps:153 expected: <null> but was: <dataVersion=0, timeStamp=2022-04-14T14:26:19.828273Z, >\r\n[ERROR]   PropStoreZooKeeperIT.deleteThroughWatcher:357 expected: <null> but was: <dataVersion=0, timeStamp=2022-04-14T14:26:20.130947Z, >\r\n[ERROR] Errors: \r\n[ERROR]   ZooBasedConfigIT.initPaths:160 » IllegalArgument Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n[ERROR]   ZooBasedConfigIT.initPaths:160 » IllegalArgument Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n[ERROR]   ZooBasedConfigIT.initPaths:160 » IllegalArgument Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n[ERROR]   ZooBasedConfigIT.initPaths:160 » IllegalArgument Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n[ERROR]   ZooBasedConfigIT.initPaths:160 » IllegalArgument Failed to load Accumulo configuration 'accumulo.properties' from classpath\r\n\r\n```\r\n\r\nBy the way, here is the command I am running to run all of the new or changed tests and ITs: `mvn clean verify -Dit.test=ZooBasedConfigIT,ShellServerIT,PropStoreZooKeeperIT,WatchTheWatchCountIT,KeywordStartIT -Dtest=ReadyMonitorTest,PropCacheKeyTest,VersionedPropertiesTest,VersionedPropCodecTest,ConfigPropertyUpgraderTest,VersionedPropEncryptCodecTest,RuntimeFixedPropertiesTest,TableConfigurationTest,VersionedPropGzipCodecTest,PropCacheCaffeineImplTest,PropSnapshotTest,ZooBasedConfigurationTest,SystemConfigurationTest,PropCacheCaffeineImplZkTest,PropStoreEventTest,TransformLockTest,PropStoreConfigTest,ConfigTransformerTest,ZooPropStoreTest,ZooCachePropertyAccessorTest,ServerConfigurationFactoryTest,BaseHostRegexTableLoadBalancerTest,UserImpersonationTest,ZooPropLoaderTest,AccumuloConfigurationTest,NamespaceConfigurationTest -Dspotbugs.skip -Dtimeout.factor=1`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099249960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099278251","html_url":"https://github.com/apache/accumulo/pull/2609#issuecomment-1099278251","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2609","id":1099278251,"node_id":"IC_kwDOACaFSM5Bhaer","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T15:02:05Z","updated_at":"2022-04-14T15:02:05Z","author_association":"CONTRIBUTOR","body":"Closing this for now until I can redesign these changes to use a Thread Pool instead of a Semaphore. A thread pool has the advantage over the Semaphore because it is more dynamic and admins won't have to restart the tserver if they want to change the thread limit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099278251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099279703","html_url":"https://github.com/apache/accumulo/pull/2614#issuecomment-1099279703","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2614","id":1099279703,"node_id":"IC_kwDOACaFSM5Bha1X","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T15:03:38Z","updated_at":"2022-04-14T15:03:38Z","author_association":"CONTRIBUTOR","body":"> The ConfigCommand has some of the same issues (as does the public API it calls).\r\n\r\nWhat kind of issues?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099279703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099280873","html_url":"https://github.com/apache/accumulo/pull/2614#issuecomment-1099280873","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2614","id":1099280873,"node_id":"IC_kwDOACaFSM5BhbHp","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T15:04:55Z","updated_at":"2022-04-14T15:04:55Z","author_association":"CONTRIBUTOR","body":"@ctubbsii has given me some better ideas for displaying the configuration information. Closing this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099280873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099281752","html_url":"https://github.com/apache/accumulo/pull/2600#issuecomment-1099281752","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2600","id":1099281752,"node_id":"IC_kwDOACaFSM5BhbVY","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T15:05:52Z","updated_at":"2022-04-14T15:05:52Z","author_association":"CONTRIBUTOR","body":"Anyone get a chance to peek at this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099281752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099440780","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1099440780","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1099440780,"node_id":"IC_kwDOACaFSM5BiCKM","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T17:24:18Z","updated_at":"2022-04-14T17:24:18Z","author_association":"CONTRIBUTOR","body":"Thanks @DomGarguilo - the test issues should be resolved with 864c00131b","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099440780/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099579706","html_url":"https://github.com/apache/accumulo/issues/2441#issuecomment-1099579706","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2441","id":1099579706,"node_id":"IC_kwDOACaFSM5BikE6","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-14T20:07:25Z","updated_at":"2022-04-14T20:07:25Z","author_association":"MEMBER","body":"I didn't realize there was already an open ticket for this: #2586 , so this can be closed now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1099579706/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100081640","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1100081640","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1100081640,"node_id":"IC_kwDOACaFSM5Bkeno","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T12:39:58Z","updated_at":"2022-04-15T12:41:15Z","author_association":"CONTRIBUTOR","body":"I'm thinking that this patch addresses only one case, but there could be other places where this might happen. For example, we have the same problem in `ManagerClient.execute`, `ManagerClient.executeGeneric`, and `ManagerClient.cancelFateOperation`. There are multiple places in ThriftUtil where the log message `Failed to open transport to {}` is logged. Two of those places are when calling `TTimeoutTransport.create` and the other two are when setting up `TSaslClientTransport`.\r\n\r\nFor the `TTimeoutTransport.create` case, I wonder if the right solution is to catch `ClosedByInterruptException` in `TTimeoutTransport.openSocket` and throw a new `InterruptedException`. The Threads' `interrupted` state is already set when the `ClosedByInterruptException` is raised by the underlying Socket code. I think that `ThriftUtil.createClientTransport` should *not* handle the `InterruptedException` and should let  it be handled by the caller. In the `ServerClient` and `ManagerClient` cases, the `InterruptedException` should be handled outside of the `while` loop and `Thread.interrupted` should be called to reset the Threads' interrupt state.\r\n\r\nFor the `TSaslClientTransport` case, I don't think we have an opportunity to catch `ClosedByInterruptException`. Instead we would have to see if that might be the cause of one of the exceptions that it raises and then throw a new InterruptedException.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100081640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100099583","html_url":"https://github.com/apache/accumulo/pull/2630#issuecomment-1100099583","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2630","id":1100099583,"node_id":"IC_kwDOACaFSM5Bki__","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T13:09:50Z","updated_at":"2022-04-15T13:09:50Z","author_association":"MEMBER","body":"Your changes look good to me. Thanks for the improvements and review, @ctubbsii.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100099583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100217063","html_url":"https://github.com/apache/accumulo/issues/1099#issuecomment-1100217063","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1099","id":1100217063,"node_id":"IC_kwDOACaFSM5Bk_rn","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-15T16:37:06Z","updated_at":"2022-04-15T16:37:06Z","author_association":"MEMBER","body":"What was run as part of the benchmark? I wonder if something like this would be useful if included in the accumulo-testing repo (or somewhere else).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100217063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100478362","html_url":"https://github.com/apache/accumulo/pull/2636#issuecomment-1100478362","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2636","id":1100478362,"node_id":"IC_kwDOACaFSM5Bl_ea","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-16T00:10:32Z","updated_at":"2022-04-16T00:10:32Z","author_association":"MEMBER","body":"I made some extra changes... I didn't expect the dependency analyzer changes, but I fixed the problems due to that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100478362/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100752893","html_url":"https://github.com/apache/accumulo/pull/2636#issuecomment-1100752893","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2636","id":1100752893,"node_id":"IC_kwDOACaFSM5BnCf9","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-16T20:49:25Z","updated_at":"2022-04-16T20:49:25Z","author_association":"MEMBER","body":"@DomGarguilo Let me know when you're done with your review. I have verified all the ITs pass now. I had a slight problem with RowHashIT, but fixed it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1100752893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101042541","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1101042541","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1101042541,"node_id":"IC_kwDOACaFSM5BoJNt","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-18T02:53:34Z","updated_at":"2022-04-18T02:53:53Z","author_association":"CONTRIBUTOR","body":"Thanks everyone for the feedback. Want to make sure I understand the salient points here: \r\n\r\n* If we go with the \"Thread.currentThread().isInterrupted()\" solution, we should reset the interrupted state -- this makes 100% sense to me, can/will fix.\r\n* Need to move the exception to the try/catch so that the finally executes (and add a bit more detail to the exception) -- again, makes total sense if we go with the while loop soln\r\n* This patch addresses only one case, but there could be other places where this might happen. Makes sense. Wanted to make sure I understand a few points though @dlmarion :\r\n\r\n> I think that ThriftUtil.createClientTransport should _not_ handle the InterruptedException and should let it be handled by the caller.\r\n\r\nThat was my inclination as well. \r\n\r\n>  In the ServerClient and ManagerClient cases, the InterruptedException should be handled outside of the while loop and Thread.interrupted should be called to reset the Threads' interrupt state.\r\n\r\nRe-calling Thread.interrupted makes sense to me, but why handle this outside of the while loop as opposed to in the try/catch? Is the thought here surrounding the loops in a try/catch that checks for an InterruptedException and converts it to an AccumuloException? Or at that point, why check for the exception at all?\r\n\r\n> For the TTimeoutTransport.create case, I wonder if the right solution is to catch ClosedByInterruptException in TTimeoutTransport.openSocket and throw a new InterruptedException. \r\n\r\nThis seems like a good option; my only concern here would be that the original exception is explicitly thrown as an IOException and the InterruptedException is _not_ thrown. We're essentially patching over that behavior. I don't understand well enough the reasoning behind the original behavior to know if this is a bad idea for some reason. \r\n\r\n> For the TSaslClientTransport case, I don't think we have an opportunity to catch ClosedByInterruptException. Instead we would have to see if that might be the cause of one of the exceptions that it raises and then throw a new InterruptedException.\r\n\r\nThat makes sense -- could just check for (and then reset) thread state interrupted the way I did in the original PR. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101042541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101339181","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1101339181","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1101339181,"node_id":"IC_kwDOACaFSM5BpRot","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-18T11:47:55Z","updated_at":"2022-04-18T11:47:55Z","author_association":"CONTRIBUTOR","body":"> Re-calling Thread.interrupted makes sense to me, but why handle this outside of the while loop as opposed to in the try/catch? Is the thought here surrounding the loops in a try/catch that checks for an InterruptedException and converts it to an AccumuloException? Or at that point, why check for the exception at all?\r\n\r\nI guess I was looking at how TTransportException was handled (logged) and it didn't break out of the loop. As long as you break out of the loop somehow I think that is sufficient.\r\n\r\n> This seems like a good option; my only concern here would be that the original exception is explicitly thrown as an IOException and the InterruptedException is not thrown.\r\n\r\nIt seems to me that `ClosedByInterruptException` is both an IOException and an InterruptedException as the reason it's thrown is the IO thread is interrupted by another thread, and then the interrupted state is set on the IO thread. I suggested throwing an InterruptedException in this case so that callers would know to handle the interrupted state appropriately.\r\n\r\n> could just check for (and then reset) thread state interrupted the way I did in the original PR\r\n\r\nYou could do that, but there may be a case where the parent class to `ClosedByInterruptException` is thrown ( I don't actually know if this is true). `AsynchronousCloseException` is the parent, has a similar description, but does not describe setting the interrupt state.\r\n\r\n\r\n\r\nI went back and read what @ctubbsii wrote:\r\n\r\n> Another alternative to consider: everywhere we throw new TTransportException because of an IOException, we could check the IOException is an instanceof ClosedByInterruptException and instead of wrapping it with TTransportException, we throw UncheckedIOException and throw that instead. There's only a few such occurrences in our code.\r\n\r\nIf we changed it to the following, then I think we would handle more cases but be less intrusive:\r\n\r\nAnother alternative to consider: everywhere we throw new TTransportException in `ThriftUtil.createClientTransport` because of an IOException, we could:\r\n  1. check the IOException is an instanceof `AsynchronousCloseException`\r\n  2. check if the Thread is interrupted and if so reset the interrupt state\r\n  3. and instead of wrapping it with TTransportException, we throw UncheckedIOException instead.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101339181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101421674","html_url":"https://github.com/apache/accumulo/issues/1099#issuecomment-1101421674","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1099","id":1101421674,"node_id":"IC_kwDOACaFSM5Bplxq","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-18T13:46:45Z","updated_at":"2022-04-18T13:46:45Z","author_association":"CONTRIBUTOR","body":"I don't think I did much. I think I just ingested some data. You could just run CI for a bit and get some good data.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101421674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101612691","html_url":"https://github.com/apache/accumulo/pull/2632#issuecomment-1101612691","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2632","id":1101612691,"node_id":"IC_kwDOACaFSM5BqUaT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-18T18:01:47Z","updated_at":"2022-04-18T18:01:47Z","author_association":"CONTRIBUTOR","body":"Closing this for now. No one seems to know what the real initial problem was or where exactly the bottleneck was occurring in the tablet server. In other words, the user had requested a knob to be turned to fine tune performance but we don't know where to put the knob or what it should be tuning.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1101612691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102038583","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1102038583","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1102038583,"node_id":"IC_kwDOACaFSM5Br8Y3","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T04:57:48Z","updated_at":"2022-04-19T04:57:48Z","author_association":"CONTRIBUTOR","body":"👍 Sounds good. Thanks!\r\n\r\nWill update the PR when I get a minute. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102038583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102501287","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102501287","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102501287,"node_id":"IC_kwDOACaFSM5BttWn","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T10:54:52Z","updated_at":"2022-04-19T10:54:52Z","author_association":"CONTRIBUTOR","body":"> > Overall, I'm in favor of this change. I do worry that change to Thrift code tend to break in surprising ways, but I think it will be fine with sufficient testing, as this is nothing new when working with Thrift.\r\n> \r\n> I am curious what the behavior is when a 2.1 client connects to a 2.0 server or visa versa a 2.0 client connects to a 2.1 server with this changes. Ideally there would be a nice error message that indicates RPC incompatibility, not sure if thrift will do this though.\r\n> \r\n\r\n It definitely is the case that if you have attempt to use a non-multiplexed client with a multiplexed server, then you get a message in the error suggesting that you should be using the multiplexed client. The error that is returned to the client is at https://github.com/apache/thrift/blob/master/lib/java/src/org/apache/thrift/TMultiplexedProcessor.java#L116\r\n\r\n> > Are there any performance implications for switching to this multiplexed protocol?\r\n> \r\n> I am also curious about this.\r\n\r\nI did look for issues in the Thrift JIRA regarding the multiplexed processors, but I didn't really find much. The client passes the service name and the message to the server, and in [this](https://github.com/apache/thrift/blob/master/lib/java/src/org/apache/thrift/TMultiplexedProcessor.java#L79) method the server uses the service name to get the correct Processor from a map and then passes the message to that Processor. I think there will be a small amount of time taken per API call to perform the logic in the TMultiplexedProcessor.process method. Do you think I should benchmark it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102501287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102560364","html_url":"https://github.com/apache/accumulo/issues/2566#issuecomment-1102560364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2566","id":1102560364,"node_id":"IC_kwDOACaFSM5Bt7xs","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T12:06:43Z","updated_at":"2022-04-19T12:06:43Z","author_association":"CONTRIBUTOR","body":"Apparently we already have some of the framework for this, its just being underutilized. \r\nhttp://localhost:9995/rest/tservers/recovery","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102560364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102578459","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102578459","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102578459,"node_id":"IC_kwDOACaFSM5BuAMb","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T12:22:11Z","updated_at":"2022-04-19T12:22:11Z","author_association":"MEMBER","body":"> Do you think I should benchmark it?\r\n\r\nIf you want to. A map lookup seems really trivial compared to the overhead of the IO","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102578459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102605450","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102605450","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102605450,"node_id":"IC_kwDOACaFSM5BuGyK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T12:48:34Z","updated_at":"2022-04-19T12:48:34Z","author_association":"CONTRIBUTOR","body":"> > Do you think I should benchmark it?\r\n> \r\n> If you want to. A map lookup seems really trivial compared to the overhead of the IO\r\n\r\nThat's what I'm thinking. I'm thinking the overhead is negligible. The map is created when the TProcessor is set up and is static. The Thrift server thread comes into the process method and decodes the message to know which TProcessor implementation to send it to.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102605450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102628244","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102628244","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102628244,"node_id":"IC_kwDOACaFSM5BuMWU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T13:05:22Z","updated_at":"2022-04-19T13:05:22Z","author_association":"MEMBER","body":"Okay. I'll try to take a more thorough look at this soon. I want to prioritize looking @EdColeman 's #2569, though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102628244/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102688608","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102688608","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102688608,"node_id":"IC_kwDOACaFSM5BubFg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T13:56:21Z","updated_at":"2022-04-19T13:56:21Z","author_association":"CONTRIBUTOR","body":"Mostly successful IT run (1 test failed due to ZK timeout): https://github.com/dlmarion/accumulo/actions/runs/2189701856","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102688608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102767586","html_url":"https://github.com/apache/accumulo/pull/2638#issuecomment-1102767586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2638","id":1102767586,"node_id":"IC_kwDOACaFSM5BuuXi","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T15:06:17Z","updated_at":"2022-04-19T15:06:17Z","author_association":"MEMBER","body":"> I do tend to prefer `Stream.of` over `Arrays.stream`, only because it's fewer characters, but either way works fine\r\n\r\nI did not know those two are equivalent. I think I like `Stream.of` better as well so I'll change them to that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102767586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102798205","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102798205","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102798205,"node_id":"IC_kwDOACaFSM5Bu119","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T15:34:15Z","updated_at":"2022-04-19T15:34:15Z","author_association":"CONTRIBUTOR","body":"> I am curious what the behavior is when a 2.1 client connects to a 2.0 server or visa versa a 2.0 client connects to a 2.1 server with this changes.\r\n\r\nI think they fail in both scenarios. I was unable to find the location where an error is from the server side when a multiplexed protocol is used by the client (2.1) but not by the server (2.0). Thrift does return a good error message when a non-multiplexed client is used against a multiplexed server (see above). This would mean that users would need to upgrade their clients to use the 2.1 libraries when they upgrade to 2.1 on the server side.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102798205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102799804","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102799804","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102799804,"node_id":"IC_kwDOACaFSM5Bu2O8","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T15:35:43Z","updated_at":"2022-04-19T15:35:43Z","author_association":"CONTRIBUTOR","body":">>> Do you think I should benchmark it?\r\n>>>\r\n>> If you want to. A map lookup seems really trivial compared to the overhead of the IO\r\n>>\r\n>That's what I'm thinking. I'm thinking the overhead is negligible. The map is created when the TProcessor is set up and is static. The Thrift server thread comes into the process method and decodes the message to know which TProcessor implementation to send it to.\r\n\r\nLooking at it does seem like it should be extremely fast and that benchmarking should not be needed. The map is a hashmap and the key is string which has good hashcode and equals functions.  Since we have a small static set of service names in a small hashmap, our worst case for performance would be if a lot of the service names happened to hash to the same bucket in the hashmap resulting in linear searches within the map. \r\n\r\nIt does add a small amount of data to each RPC request, looking at the javadoc for `TMultiplexedProcessor` it seems the servicename from the thrift IDL is added to each RPC request.  So scan RPCs may now have the extra data `TabletClientService` from the service name defined in the idl.  Not sure if this will matter or if it would be worthwhile to have a shorter service name.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102799804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102823450","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102823450","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102823450,"node_id":"IC_kwDOACaFSM5Bu8Aa","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T15:58:24Z","updated_at":"2022-04-19T15:58:24Z","author_association":"CONTRIBUTOR","body":"> It does add a small amount of data to each RPC request, looking at the javadoc for `TMultiplexedProcessor` it seems the servicename from the thrift IDL is added to each RPC request. So scan RPCs may now have the extra data `TabletClientService` from the service name defined in the idl. Not sure if this will matter or if it would be worthwhile to have a shorter service name.\r\n\r\nI know the javadoc says that the service name from the Thrift IDL is to be used, but I don't see anything in the code that enforces it. I think it might be possible to leave the IDL as-is and just register the TProcessors with a different service name in the `TMultiplexedProcessor.register(String serviceName, TProcessor processor)` [call](https://github.com/apache/thrift/blob/master/lib/java/src/org/apache/thrift/TMultiplexedProcessor.java#L67). If that works, then we could have an enum or something that is used by the client and server.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102823450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102840592","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1102840592","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1102840592,"node_id":"IC_kwDOACaFSM5BvAMQ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T16:15:55Z","updated_at":"2022-04-19T16:15:55Z","author_association":"CONTRIBUTOR","body":"> I know the javadoc says that the service name from the Thrift IDL is to be used, but I don't see anything in the code that enforces it. I think it might be possible to leave the IDL as-is and just register the TProcessors with a different service name in the TMultiplexedProcessor.register(String serviceName, TProcessor processor) [call](https://github.com/apache/thrift/blob/master/lib/java/src/org/apache/thrift/TMultiplexedProcessor.java#L67). If that works, then we could have an enum or something that is used by the client and server.\r\n\r\nOh interesting that its just a convention.  Yeah it may be worthwhile to map all the service name to short two or three letter codes.  It seems like the way you have organized the code in the PR that that mapping could be isolated to one or two places i the code so it would be well encapsulated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102840592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102873066","html_url":"https://github.com/apache/accumulo/pull/2638#issuecomment-1102873066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2638","id":1102873066,"node_id":"IC_kwDOACaFSM5BvIHq","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T16:50:51Z","updated_at":"2022-04-19T16:50:51Z","author_association":"MEMBER","body":"In [80eddf7](https://github.com/apache/accumulo/pull/2638/commits/80eddf7fc4270d0226ea3cdb0c8c72c0f23faf8b) I converted `Arrays.stream` to `Stream.of`. I also made some simplifications to PropertyTypeTest","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102873066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102978853","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1102978853","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1102978853,"node_id":"IC_kwDOACaFSM5Bvh8l","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-19T18:53:31Z","updated_at":"2022-04-19T18:53:31Z","author_association":"CONTRIBUTOR","body":"Would catalog, inventory or even help be a more fit name than debug?  Debug seems to imply something different than a list of end points.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1102978853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103768564","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1103768564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1103768564,"node_id":"IC_kwDOACaFSM5Byiv0","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T10:20:22Z","updated_at":"2022-04-20T10:20:22Z","author_association":"CONTRIBUTOR","body":"> Would catalog, inventory or even help be a more fit name than debug? Debug seems to imply something different than a list of end points.\r\n\r\nMaybe. I was thinking we could dump more stuff on the end point then just all the REST APIs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103768564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103859770","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1103859770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1103859770,"node_id":"IC_kwDOACaFSM5By5A6","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T12:11:47Z","updated_at":"2022-04-20T12:11:47Z","author_association":"CONTRIBUTOR","body":"@EdColeman I renamed the endpoint to \"all\". ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103859770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103891167","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1103891167","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1103891167,"node_id":"IC_kwDOACaFSM5BzArf","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T12:46:47Z","updated_at":"2022-04-20T12:46:47Z","author_association":"CONTRIBUTOR","body":"I am not sure why its failing on JDK 17. But I can look into that as a follow on.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103891167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103956045","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1103956045","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1103956045,"node_id":"IC_kwDOACaFSM5BzQhN","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T13:49:23Z","updated_at":"2022-04-20T13:49:23Z","author_association":"CONTRIBUTOR","body":"> I'm not convinced it's a good idea to add this without a disclaimer at the top of the template that these pages are subject to change from version to version. \r\n\r\nIsn't everything on the Monitor subject to change from version to version?\r\n\r\n> I'm not sure who this listing of endpoints is expected to help, because the site is already pretty intuitive to navigate. \r\n\r\nAnyone? The one endpoint is broken and I don't even think anyone knew it was there. I added this to help with debugging.\r\n\r\n> I'd be concerned about users relying on these endpoints as fixed. They have the JSON/XML endpoints to rely on for information that the monitor knows... they should not rely on these endpoints for any kind of automation, permanent bookmarks, etc., since they are subject to change.\r\n\r\nThey are fixed. It isn't easy to change them without breaking the monitor. I would argue that we should treat the endpoints better so users can rely on them for stuff like that.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1103956045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104199829","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1104199829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1104199829,"node_id":"IC_kwDOACaFSM5B0MCV","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T17:12:16Z","updated_at":"2022-04-20T17:13:47Z","author_association":"MEMBER","body":"> Isn't everything on the Monitor subject to change from version to version?\r\n\r\nYes, but we do try to keep the XML/JSON compatible and at a well-known location, because it can be used by automation.\r\n\r\n> > I'm not sure who this listing of endpoints is expected to help, because the site is already pretty intuitive to navigate.\r\n> \r\n> Anyone? The one endpoint is broken and I don't even think anyone knew it was there. I added this to help with debugging.\r\n\r\nIf it's only for debugging, then should this be off by default?\r\n\r\nThe main concern I had here is \"Implied reliability\":\r\n\r\nAdvertisements of information generally come with the implication that people can rely on the information in the advertisement. As an analogy, a flyer with a notice that an item is on sale at a store comes with the implication that a consumer can rely on getting the sale price when they visit the store to purchase the item. Similarly, a telephone/address directory listening comes with the implication that a person/business can be contacted at that telephone/address. -- This new page feels to me like it's a kind of advertisement of information, in that it seems to imply to me that those pages will exist and contain the expected information. Conversely, this implication does not seem present to me in the normal user experience of navigating menus on the site because our menus and other hyperlinks are more navigational, whereas this is more of an advertisement of information. In other words, with our current links, the information can be expected to be found only because the link is clickable... not because the information's address has been published in a listening, as is the case with this new page.\r\n\r\nSecondarily, I'm also concerned about addition of new navigation on the site that doesn't substantially add information for users.  It's an extra link with extraneous information. Extraneous information, and extra paths to the same information, can increase confusion and decrease usability. To maximize user experience and minimize potential confusion, we need to balance between convenience and conciseness. Imagine having a button to take you to some piece of information. Now, imagine adding a second button \"for convenience\" that takes you to the same information. Perhaps this second button displays the information very slightly differently (FWIW, Vanguard.com's website does this right now, and it's very frustrating), or perhaps it takes you to the exact same information. In either case, it can be confusing to users. They may ask \"what's the difference between these two?\" or \"do I need to visit both links to avoid missing out on important information?\" or \"these look the same, but are they actually the same?\". Even the most well-intentioned changes for convenience can make a site slightly more confusing overall, even if it is an improvement for the use case it was intended.\r\n\r\n> > I'd be concerned about users relying on these endpoints as fixed. They have the JSON/XML endpoints to rely on for information that the monitor knows... they should not rely on these endpoints for any kind of automation, permanent bookmarks, etc., since they are subject to change.\r\n> \r\n> They are fixed. It isn't easy to change them without breaking the monitor. I would argue that we should treat the endpoints better so users can rely on them for stuff like that.\r\n\r\nThey aren't fixed. We've already changed them a few times during 2.1's development. We renamed master to manager (granted that was a special case), we changed a numeric type from integer to long, we added external compaction stuff, we added an endpoint to append log events and renamed the one to clear logs, we separated the garbage collection information into a separate endpoint and removed the old endpoints, and possibly breaking formatting changes to several of the String-based values as well.\r\n\r\nWhile it's probably a good idea to have fixed endpoints at some point, it's difficult to do this when these need drive the monitor. They will need to change as our needs for the monitor change. Their primary task is to empower the views, not to provide automation to users. That's what the dedicated JSON/XML endpoints are for.\r\n\r\nThese were also not designed to be consumed by end users. If they had been, I think we should have spent more time on deciding what these should look like... we probably wouldn't have 10 of 23 endpoints dedicated to separate `/rest/statistics/time` values, and then also had a `/rest/tservers/serverStats`, but then aggregated everything about the manager into a single `/rest/manager` endpoint. These are what you get when you are trying to solve an immediate problem of getting data to the page... they are not what you get when you design them for end-user automated consumption.\r\n\r\nYes, you're right they can't change without breaking the monitor... but that's intentional, because they were designed ad hoc for the monitor. Not for users.\r\n\r\nI'm not opposed to having fixed rest endpoints at some point, well documented and ready for automated consumption by users... but I don't think what we have now are anywhere close to what those should look like. Maybe with a bit of design effort, they could be, but not right now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104199829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104276239","html_url":"https://github.com/apache/accumulo/issues/2618#issuecomment-1104276239","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2618","id":1104276239,"node_id":"IC_kwDOACaFSM5B0esP","user":{"login":"Akshit6828","id":57808363,"node_id":"MDQ6VXNlcjU3ODA4MzYz","avatar_url":"https://avatars.githubusercontent.com/u/57808363?v=4","gravatar_id":"","url":"https://api.github.com/users/Akshit6828","html_url":"https://github.com/Akshit6828","followers_url":"https://api.github.com/users/Akshit6828/followers","following_url":"https://api.github.com/users/Akshit6828/following{/other_user}","gists_url":"https://api.github.com/users/Akshit6828/gists{/gist_id}","starred_url":"https://api.github.com/users/Akshit6828/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Akshit6828/subscriptions","organizations_url":"https://api.github.com/users/Akshit6828/orgs","repos_url":"https://api.github.com/users/Akshit6828/repos","events_url":"https://api.github.com/users/Akshit6828/events{/privacy}","received_events_url":"https://api.github.com/users/Akshit6828/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T18:22:10Z","updated_at":"2022-04-20T18:22:10Z","author_association":"CONTRIBUTOR","body":"Hi @milleruntime. As per my understanding, do we need to replace `GENERAL_SIMPLETIMER_THREADPOOL_SIZE(\"general.server.simpletimer.threadpool.size\", \"1\", `  by `GENERAL_SIMPLETIMER_THREADPOOL_SIZE(\"general.server.threadpool.size\", \"1\", `. as the SimpleTimer class has been dropped?\r\n\r\nIf yes, can i go with it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104276239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104326241","html_url":"https://github.com/apache/accumulo/pull/2643#issuecomment-1104326241","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2643","id":1104326241,"node_id":"IC_kwDOACaFSM5B0q5h","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T18:39:38Z","updated_at":"2022-04-20T18:39:38Z","author_association":"CONTRIBUTOR","body":"IT Test run had 2 failures. SSLIT.adminStop timed out after 3 minutes and LateLastContactIT timed out. All others passed at https://github.com/dlmarion/accumulo/runs/6099910179","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104326241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104368037","html_url":"https://github.com/apache/accumulo/issues/2618#issuecomment-1104368037","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2618","id":1104368037,"node_id":"IC_kwDOACaFSM5B01Gl","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T19:20:04Z","updated_at":"2022-04-20T19:20:04Z","author_association":"CONTRIBUTOR","body":"This might be more than just a simple rename. There are considerations of current usages, how and where the name / value is used and the expected behavior of existing code that uses the current values.\r\n\r\nFor the original issue as stated, one possibility would be to would be to rename both the property enum name (GENERAL_SIMPLETIMER_THREADPOOL_SIZE) and the string value used as a key (general.server.simpletimer.threadpool.size) to something that reflects the current usage.  \r\n\r\nHowever, there are additional considerations:\r\n\r\nIt may be better (necessary?) to deprecate the current name with the replacement, but allow either to be used.\r\n\r\nThe change would need to replace the enum name in the code base and then any scripts that use the string value should also be modified.  This should also be documented in the release notes so that users know the change occurred.\r\n\r\nFor current installations that may use the current name, it would be necessary to rename the property name (key) that is stored in ZooKeeper during the upgrade processing so that the \"saved\" value would be transformed and remain valid any code that has this change. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104368037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104379909","html_url":"https://github.com/apache/accumulo/pull/2643#issuecomment-1104379909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2643","id":1104379909,"node_id":"IC_kwDOACaFSM5B04AF","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T19:32:23Z","updated_at":"2022-04-20T19:32:23Z","author_association":"MEMBER","body":"> SSLIT.adminStop timed out after 3 minutes \r\n\r\nThe timeouts for this IT were recently adjusted (see #2631) so it might just be that the timeout needs to be increased for this test","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104379909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104397492","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1104397492","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1104397492,"node_id":"IC_kwDOACaFSM5B08S0","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T19:51:50Z","updated_at":"2022-04-20T19:51:50Z","author_association":"MEMBER","body":"@dlmarion Just a heads up that I saw LateLastContactIT failing due to timeouts beginning when this was merged. I don't know if it's related, and haven't had time to troubleshoot, but just wanted to mention it here, in case you saw it too and maybe could reproduce it. We talked about performance impact above, but I doubt this had any significant impact on performance, since the overall build time hasn't really changed... it's just this test. So, maybe there's an edge case with some thrift stuff with this one? Or, could be entirely unrelated. :shrug: ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104397492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104419171","html_url":"https://github.com/apache/accumulo/pull/2644#issuecomment-1104419171","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2644","id":1104419171,"node_id":"IC_kwDOACaFSM5B1Blj","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T20:16:50Z","updated_at":"2022-04-20T20:16:50Z","author_association":"MEMBER","body":"I'm hoping that specifying the Java distribution explicitly helps with the recent build failures using Java 17.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104419171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104424675","html_url":"https://github.com/apache/accumulo/issues/2566#issuecomment-1104424675","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2566","id":1104424675,"node_id":"IC_kwDOACaFSM5B1C7j","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T20:24:14Z","updated_at":"2022-04-20T20:24:14Z","author_association":"CONTRIBUTOR","body":"Any objections to providing something in the Monitor? My idea was to have some sort of indicator when a tserver is in recovery. I was thinking either a separate table on the tservers page, similar to the Dead Tablet Servers table, for when a tserver is recovering it can be displayed in the \"Recovery\" table. Another idea I had was to put a flag on the tservers table, perhaps an icon on the row of the tserver. Or we could highlight the rows of the tservers that are recovering in orange to indicate a special status.\r\n\r\nI think this would be very helpful since while a tserver is starting up in Recovery, it can't do much else and on larger clusters tservers can take quite some time to recover.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104424675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104427371","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1104427371","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1104427371,"node_id":"IC_kwDOACaFSM5B1Dlr","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T20:27:49Z","updated_at":"2022-04-20T20:27:49Z","author_association":"CONTRIBUTOR","body":"@ctubbsii do you want me to revert this change? Is there any follow on work you would like done?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104427371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104448965","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1104448965","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1104448965,"node_id":"IC_kwDOACaFSM5B1I3F","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T20:57:00Z","updated_at":"2022-04-20T20:57:00Z","author_association":"CONTRIBUTOR","body":"I did notice it, I commented on it at https://github.com/apache/accumulo/pull/2643. I'll see if I can figure it out.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104448965/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104449372","html_url":"https://github.com/apache/accumulo/pull/2644#issuecomment-1104449372","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2644","id":1104449372,"node_id":"IC_kwDOACaFSM5B1I9c","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T20:57:35Z","updated_at":"2022-04-20T20:57:35Z","author_association":"MEMBER","body":"Based on the build success after moving from \"zulu\" builds of JDK 17 to \"adopt\" builds, I would argue that this is the likely culprit. I'm not sure why \"zulu\" builds are buggy, though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104449372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104454940","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1104454940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1104454940,"node_id":"IC_kwDOACaFSM5B1KUc","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-20T21:05:00Z","updated_at":"2022-04-20T21:05:00Z","author_association":"MEMBER","body":"> @ctubbsii do you want me to revert this change? Is there any follow on work you would like done?\r\n\r\nPersonally, I think it should be reverted (except the changes in logging the port that was used should be kept... that was a good change). Reverting is the position I've been arguing for above. However, I'm open to other positions, if a strong case can be made for doing something else.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1104454940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105100039","html_url":"https://github.com/apache/accumulo/pull/2620#issuecomment-1105100039","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2620","id":1105100039,"node_id":"IC_kwDOACaFSM5B3n0H","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T11:43:35Z","updated_at":"2022-04-21T11:43:35Z","author_association":"CONTRIBUTOR","body":"Merged a fix for it - #2645","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105100039/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105506829","html_url":"https://github.com/apache/accumulo/pull/2645#issuecomment-1105506829","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2645","id":1105506829,"node_id":"IC_kwDOACaFSM5B5LIN","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T17:40:13Z","updated_at":"2022-04-21T17:40:13Z","author_association":"MEMBER","body":"I think this fixed the broken LateLastContactIT integration test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105506829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105787633","html_url":"https://github.com/apache/accumulo/issues/2633#issuecomment-1105787633","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2633","id":1105787633,"node_id":"IC_kwDOACaFSM5B6Prx","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-21T21:40:24Z","updated_at":"2022-04-21T21:40:24Z","author_association":"CONTRIBUTOR","body":"Throwing an exception seems like the way to go. I am working through reviewing #2569 and saw a comment about this.  The code before #2569 would check the return value from TablePropUtil .setProperties() and throw an exception : https://github.com/apache/accumulo/blob/50b9267f526736fc2c510a2626693b072ca4dd04/server/manager/src/main/java/org/apache/accumulo/manager/ManagerClientServiceHandler.java#L428\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1105787633/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1108565919","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1108565919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1108565919,"node_id":"IC_kwDOACaFSM5CE1-f","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T13:21:58Z","updated_at":"2022-04-25T13:21:58Z","author_association":"CONTRIBUTOR","body":"> I think there may be a way to get these dynamically from the Application Resources or by peeking at the class path and looking at the @GET and @POST annotations.\r\n\r\nThere may be a way to do this dynamically, but I don't know how and that seems more complicated. \r\n\r\n> But, do we really want users to write applications to the Monitor REST API?\r\n\r\nIf we don't want users writing applications to get data from the Monitor, than that is fine. I wasn't trying to advertise any \"implied reliability\". The Monitor is very complex and we currently don't have any active web developers in the community to maintain it. I was only trying to provide developers and admins a way to see the data that is present through REST APIs that are present.\r\n\r\nBy having a link to the current REST endpoints  I had originally called everything \"debugging\" for this reason. This page is nice for debugging what end points exist and what data is returned. The only way to do that now is to grep the code and try to assemble a proper URL from the strings. Then it is more work to try and get a valid URL from those strings... good luck. Here is the commands I ran on my development box to just obtain the rest endpoints.\r\n\r\n`grep \"rest\" server/monitor/target/**/functions.js | sed -e 's/return $.getJSON(//g' | sed -e 's/var call = //g' | sed -e 's/, function(data) {//g'`\r\n\r\nThen from those strings, you have to expunge the parameterized endpoints.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1108565919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1108901139","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1108901139","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1108901139,"node_id":"IC_kwDOACaFSM5CGH0T","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-25T18:27:39Z","updated_at":"2022-04-25T18:27:39Z","author_association":"MEMBER","body":"If the point is to help with debugging rest endpoints, and we don't want to advertise to users (and I don't think we should), then I think we should just put it at /rest without any menu linking to it. The alternative is to make it off by default, and have a flag that turns it on. However, I prefer just putting it at /rest and removing the menu option. As a follow-on, I would be willing to investigate trying to get it to be auto-generated from the webapp resources.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1108901139/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109236386","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1109236386","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1109236386,"node_id":"IC_kwDOACaFSM5CHZqi","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T02:33:40Z","updated_at":"2022-04-26T02:33:40Z","author_association":"CONTRIBUTOR","body":"Updated with requested changes. Thanks for the feedback.\r\n\r\n> The other changes are suggestions, but I'm not 100% sure that's the solution we want to go with. I'm not super confident with handling this situation. @dlmarion WDYT?\r\n\r\nWould it be best for us to jump on a quick call? Let me know. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109236386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109505078","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1109505078","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1109505078,"node_id":"IC_kwDOACaFSM5CIbQ2","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T08:28:08Z","updated_at":"2022-04-26T08:28:08Z","author_association":"CONTRIBUTOR","body":"> I think we should just put it at /rest without any menu linking to it\r\n\r\nI had tried this by using an annotation in `WebViews` but it didn't seem to work. I wonder if its cause we set the Servlet in Monitor here: `        server.addServlet(getRestServlet(), \"/rest/*\");`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109505078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109592873","html_url":"https://github.com/apache/accumulo/pull/2650#issuecomment-1109592873","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2650","id":1109592873,"node_id":"IC_kwDOACaFSM5CIwsp","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T09:53:39Z","updated_at":"2022-04-26T09:53:39Z","author_association":"CONTRIBUTOR","body":"I did find an issue after merging that I fixed in https://github.com/apache/accumulo/commit/375e1cc6c233f583df6e724b5a3ed4d456ce5152","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109592873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109676319","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1109676319","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1109676319,"node_id":"IC_kwDOACaFSM5CJFEf","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T11:24:15Z","updated_at":"2022-04-26T11:24:15Z","author_association":"CONTRIBUTOR","body":"I'm good with these changes, they fix the original problem. I'm working in the Thrift code in another branch and can consolidate into a utility method if needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109676319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109876093","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1109876093","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1109876093,"node_id":"IC_kwDOACaFSM5CJ119","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T14:35:36Z","updated_at":"2022-04-26T14:35:36Z","author_association":"CONTRIBUTOR","body":"The metrics can be removed - but they were not intended to necessarily be user facing.  The multiple caching layers make reasoning about performance difficult.  It could be that using a single ZooKeeper node vs a node for each property reduces the original need for the caching because it is no longer necessary to walk the entire directory with multiple ZooKeeper calls to re-hydrate the configuration.\r\n\r\nWithout metrics or some other way to measure in context, it is not possible to predict which caching can be simplified nor the impact.  Is one node sufficient that the entire PropStore as a replacement for ZooCache under utilized and unnecessary?   Is the secondary caching with the derivers still providing benefits?  How about the ServerConfigurationFactory?\r\n\r\nI suspect that much of this could be simplified (esp. removal of ServerConfigutationFactory) and having measurements in place to measure impacts would help make an informed choice.  It also seems that most of the performance impacts would occur in things like long-running scans - having cache metrics along with other scan metrics seems like it could be informative for making such comparisons.\r\n\r\nOverall goal of this PR was to provide an equivalent replacement for ZooCache property storage while maintaining the same caching schemes until it can be determined where other simplifications can be made without impacting performance. \r\n\r\nI agree there is a lot of complexity for managing changes of properties that if they change, they are changed only rarely. I see this PR as establishing a baseline  for future optimizations. It attempts to maintain the existing structures until they can be evaluated and simplified. Metrics should form a base of future improvements.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1109876093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110040556","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1110040556","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1110040556,"node_id":"IC_kwDOACaFSM5CKd_s","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T17:03:43Z","updated_at":"2022-04-26T17:03:43Z","author_association":"MEMBER","body":"> The metrics can be removed\r\n\r\nWell, I'm not convinced they should be removed. They are just one piece adding to the size/complexity of this.\r\n\r\n> Without metrics or some other way to measure in context, it is not possible to predict which caching can be simplified nor the impact.\r\n\r\nWith simple code, some predictions are possible from visual inspection/static analysis. The more complex the code, the less that's possible. But, there's a risk that the tools that are added to provide those insights are themselves contributing to an arms race of complexity. I think it's okay to have less insight in exchange for simplicity sometimes. There's always trade-offs. I tend to favor simplicity unless there's a clear and overwhelming benefit for the complexity.\r\n\r\n> Overall goal of this PR was to provide an equivalent replacement for ZooCache property storage while maintaining the same caching schemes until it can be determined where other simplifications can be made without impacting performance.\r\n\r\nI'm not concerned about preserving the existing schemes, caching or otherwise, at all. The caching schemes aren't worth preserving for their own sake... they were added to solve specific performance problems found in the old design. With a new design, a lot of that can be thrown away. We should keep the lessons learned, and apply them to the new design if they are applicable, but we should be careful not to assume they are applicable. I think of this like \"We need to preserve functionality, not behavior\".\r\n\r\n> I see this PR as establishing a baseline for future optimizations.\r\n\r\nThat's fine. Just keep in mind that simplification is optimization, too. It optimizes our ability to read, understand, fix, and add other optimizations. So, simplification should be a standing design goal. But, this is just a general principle I'm expressing... I'm still figuring out how it applies here, as I navigate and try to understand these changes better.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110040556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110093861","html_url":"https://github.com/apache/accumulo/pull/2651#issuecomment-1110093861","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2651","id":1110093861,"node_id":"IC_kwDOACaFSM5CKrAl","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T18:00:57Z","updated_at":"2022-04-26T18:00:57Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I updated with your suggestion and made a few additional changes to get it working. If you are okay with these changes I will commit and then you can made any additional changes you would like.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110093861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110186887","html_url":"https://github.com/apache/accumulo/pull/2569#issuecomment-1110186887","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2569","id":1110186887,"node_id":"IC_kwDOACaFSM5CLBuH","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T19:49:50Z","updated_at":"2022-04-26T19:49:50Z","author_association":"MEMBER","body":"I forked main as a new branch, for collaboration, to help us incrementally merge this in. The branch is called `single-node-props`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110186887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110294874","html_url":"https://github.com/apache/accumulo/pull/2622#issuecomment-1110294874","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2622","id":1110294874,"node_id":"IC_kwDOACaFSM5CLcFa","user":{"login":"nikita-sirohi","id":72053786,"node_id":"MDQ6VXNlcjcyMDUzNzg2","avatar_url":"https://avatars.githubusercontent.com/u/72053786?v=4","gravatar_id":"","url":"https://api.github.com/users/nikita-sirohi","html_url":"https://github.com/nikita-sirohi","followers_url":"https://api.github.com/users/nikita-sirohi/followers","following_url":"https://api.github.com/users/nikita-sirohi/following{/other_user}","gists_url":"https://api.github.com/users/nikita-sirohi/gists{/gist_id}","starred_url":"https://api.github.com/users/nikita-sirohi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nikita-sirohi/subscriptions","organizations_url":"https://api.github.com/users/nikita-sirohi/orgs","repos_url":"https://api.github.com/users/nikita-sirohi/repos","events_url":"https://api.github.com/users/nikita-sirohi/events{/privacy}","received_events_url":"https://api.github.com/users/nikita-sirohi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-26T22:04:27Z","updated_at":"2022-04-26T22:04:27Z","author_association":"CONTRIBUTOR","body":"Will do, thanks!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110294874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110943452","html_url":"https://github.com/apache/accumulo/issues/2653#issuecomment-1110943452","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2653","id":1110943452,"node_id":"IC_kwDOACaFSM5CN6bc","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T12:30:47Z","updated_at":"2022-04-27T12:30:47Z","author_association":"MEMBER","body":"Does this only happen when you try to navigate to the replication page on the monitor? If so, that's expected. But, the replication resource rest endpoint could be smarter and check if the table is offline first.\r\n\r\nIf it's happening even when you don't navigate to that page, then it'd be surprising.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110943452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110945457","html_url":"https://github.com/apache/accumulo/issues/2653#issuecomment-1110945457","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2653","id":1110945457,"node_id":"IC_kwDOACaFSM5CN66x","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T12:32:55Z","updated_at":"2022-04-27T12:32:55Z","author_association":"MEMBER","body":"I think this should be an easy fix. I know somebody who might be interested in fixing this. Are you interested in fixing this, @tchaie ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110945457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110947017","html_url":"https://github.com/apache/accumulo/issues/2653#issuecomment-1110947017","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2653","id":1110947017,"node_id":"IC_kwDOACaFSM5CN7TJ","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T12:34:36Z","updated_at":"2022-04-27T12:34:36Z","author_association":"CONTRIBUTOR","body":"> Does this only happen when you try to navigate to the replication page on the monitor? If so, that's expected. But, the replication resource rest endpoint could be smarter and check if the table is offline first.\r\n> \r\n> If it's happening even when you don't navigate to that page, then it'd be surprising.\r\n\r\nYeah, I think it only happens when you navigate to the `Replication` page.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110947017/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110950184","html_url":"https://github.com/apache/accumulo/pull/2652#issuecomment-1110950184","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2652","id":1110950184,"node_id":"IC_kwDOACaFSM5CN8Eo","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T12:38:00Z","updated_at":"2022-04-27T12:38:00Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I want to do the other tables on this page as well. If you want to hold off reviewing this, I can convert it to a draft and clean up the entire `server.js`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1110950184/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111139437","html_url":"https://github.com/apache/accumulo/pull/2639#issuecomment-1111139437","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2639","id":1111139437,"node_id":"IC_kwDOACaFSM5COqRt","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T15:25:53Z","updated_at":"2022-04-27T15:25:53Z","author_association":"MEMBER","body":"> > I think we should just put it at /rest without any menu linking to it\r\n> \r\n> I had tried this by using an annotation in `WebViews` but it didn't seem to work. I wonder if its cause we set the Servlet in Monitor here: ` server.addServlet(getRestServlet(), \"/rest/*\");`\r\n\r\nI briefly looked into locating it at `/rest`... it's probably more trouble than it's worth to put it there.\r\n\r\nAlso, I don't see the problem with just relying on the WADL, that's provided by default with Jersey applications. There is a missing runtime dependency to get it working for the rest/ endpoints, though. I've fixed that in #2654","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111139437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111150061","html_url":"https://github.com/apache/accumulo/pull/2654#issuecomment-1111150061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2654","id":1111150061,"node_id":"IC_kwDOACaFSM5COs3t","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T15:34:57Z","updated_at":"2022-04-27T15:34:57Z","author_association":"MEMBER","body":"> Nice!\r\n\r\nI know it's not exactly what you had before. You still have to parse the WADL output a bit if you want to construct a clickable URL. But, using a standards-based approach I think is better. And, this was already a built-in feature that is enabled by default, so we just had to make sure it was working.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111150061/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111153394","html_url":"https://github.com/apache/accumulo/pull/2654#issuecomment-1111153394","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2654","id":1111153394,"node_id":"IC_kwDOACaFSM5COtry","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T15:38:02Z","updated_at":"2022-04-27T15:38:02Z","author_association":"CONTRIBUTOR","body":"As long as it works, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111153394/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111197399","html_url":"https://github.com/apache/accumulo/issues/2566#issuecomment-1111197399","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2566","id":1111197399,"node_id":"IC_kwDOACaFSM5CO4bX","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T16:17:43Z","updated_at":"2022-04-27T16:17:43Z","author_association":"MEMBER","body":"@milleruntime, it looks like a table already exists on `/manager` that displays this information. Do you think that is enough or should the other options mentioned be considered as well?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111197399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111253907","html_url":"https://github.com/apache/accumulo/issues/2566#issuecomment-1111253907","issue_url":"https://api.github.com/repos/apache/accumulo/issues/2566","id":1111253907,"node_id":"IC_kwDOACaFSM5CPGOT","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-27T17:08:13Z","updated_at":"2022-04-27T17:08:13Z","author_association":"CONTRIBUTOR","body":"Well the table you are looking at on the `/manager` page displays a table of tables. I was thinking since Recovery is done per tablet server, you could put an icon next to the status of the tablet server. So perhaps on the `/tservers` page, we could highlight the row or have some indicator that the tserver is in recovery mode. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1111253907/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]