[{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998446494","html_url":"https://github.com/apache/ratis/pull/567#issuecomment-998446494","issue_url":"https://api.github.com/repos/apache/ratis/issues/567","id":998446494,"node_id":"IC_kwDOBMxbGc47gxWe","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T03:44:39Z","updated_at":"2021-12-21T03:44:39Z","author_association":"CONTRIBUTOR","body":"The tasks look good.  We should also add some unit tests for the shell commands.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998446494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998512478","html_url":"https://github.com/apache/ratis/pull/568#issuecomment-998512478","issue_url":"https://api.github.com/repos/apache/ratis/issues/568","id":998512478,"node_id":"IC_kwDOBMxbGc47hBde","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T06:35:38Z","updated_at":"2021-12-21T06:35:38Z","author_association":"CONTRIBUTOR","body":"On the Stream client, it is only necessary to ensure that requests within the stream ID are ordered, which increases throughput","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998512478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998514229","html_url":"https://github.com/apache/ratis/pull/568#issuecomment-998514229","issue_url":"https://api.github.com/repos/apache/ratis/issues/568","id":998514229,"node_id":"IC_kwDOBMxbGc47hB41","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T06:39:55Z","updated_at":"2021-12-21T06:39:55Z","author_association":"CONTRIBUTOR","body":"What do you think of this change @szetszwo","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998514229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998771091","html_url":"https://github.com/apache/ratis/pull/568#issuecomment-998771091","issue_url":"https://api.github.com/repos/apache/ratis/issues/568","id":998771091,"node_id":"IC_kwDOBMxbGc47iAmT","user":{"login":"captainzmc","id":13825159,"node_id":"MDQ6VXNlcjEzODI1MTU5","avatar_url":"https://avatars.githubusercontent.com/u/13825159?v=4","gravatar_id":"","url":"https://api.github.com/users/captainzmc","html_url":"https://github.com/captainzmc","followers_url":"https://api.github.com/users/captainzmc/followers","following_url":"https://api.github.com/users/captainzmc/following{/other_user}","gists_url":"https://api.github.com/users/captainzmc/gists{/gist_id}","starred_url":"https://api.github.com/users/captainzmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/captainzmc/subscriptions","organizations_url":"https://api.github.com/users/captainzmc/orgs","repos_url":"https://api.github.com/users/captainzmc/repos","events_url":"https://api.github.com/users/captainzmc/events{/privacy}","received_events_url":"https://api.github.com/users/captainzmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-21T13:16:51Z","updated_at":"2021-12-21T13:16:51Z","author_association":"MEMBER","body":"Thanks @guohao-rosicky for the contribution. This should help with performance.\r\nIn the CI test, OrderedStreamAsync has a NullPointerException. Can you fix it?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/998771091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1000634076","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1000634076","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1000634076,"node_id":"IC_kwDOBMxbGc47pHbc","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-24T03:39:26Z","updated_at":"2021-12-24T03:39:26Z","author_association":"CONTRIBUTOR","body":"What do you think of this change @szetszwo","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1000634076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1001287981","html_url":"https://github.com/apache/ratis/pull/572#issuecomment-1001287981","issue_url":"https://api.github.com/repos/apache/ratis/issues/572","id":1001287981,"node_id":"IC_kwDOBMxbGc47rnEt","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-27T01:58:56Z","updated_at":"2021-12-27T01:58:56Z","author_association":"CONTRIBUTOR","body":"The CI test error seems to have nothing to do with this code change.\r\n```\r\nError:  testMultipleStreamsMultipleServersStepDownLeader(org.apache.ratis.datastream.TestNettyDataStreamChainTopologyWithGrpcCluster)  Time elapsed: 100.012 s  <<< ERROR!\r\norg.junit.runners.model.TestTimedOutException: test timed out after 100 seconds\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\tat java.util.concurrent.FutureTask.awaitDone(FutureTask.java:426)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout.getResult(FailOnTimeout.java:141)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout.evaluate(FailOnTimeout.java:127)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1001287981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002481483","html_url":"https://github.com/apache/ratis/pull/572#issuecomment-1002481483","issue_url":"https://api.github.com/repos/apache/ratis/issues/572","id":1002481483,"node_id":"IC_kwDOBMxbGc47wKdL","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T09:30:06Z","updated_at":"2021-12-29T09:30:06Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing the code, I don’t know much about the term on the file system. In Alluxio, it’s called takesnapshot/checkpoint. I have changed the code according to your comment. In addition, 1024 is really a good number, haha","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002481483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002527234","html_url":"https://github.com/apache/ratis/pull/572#issuecomment-1002527234","issue_url":"https://api.github.com/repos/apache/ratis/issues/572","id":1002527234,"node_id":"IC_kwDOBMxbGc47wVoC","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T10:34:17Z","updated_at":"2021-12-29T10:34:39Z","author_association":"CONTRIBUTOR","body":"> ... In Alluxio, it’s called takesnapshot/checkpoint.  ...\r\n\r\n@codings-dan , Good to know.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002527234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002556436","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1002556436","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1002556436,"node_id":"IC_kwDOBMxbGc47wcwU","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T11:48:09Z","updated_at":"2021-12-29T11:48:09Z","author_association":"CONTRIBUTOR","body":"@szetszwo hi, now the server-side code has been implemented, and some unit tests have been added. Can we discuss proto and API change, it seems that it is not appropriate to put it under AdminApi, can we create a new API interface, such as snapshotManagementApi?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002556436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002587391","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1002587391","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1002587391,"node_id":"IC_kwDOBMxbGc47wkT_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T13:10:44Z","updated_at":"2021-12-29T13:10:44Z","author_association":"CONTRIBUTOR","body":"@codings-dan , yes, it is a good time to talk about the API.  Let's add a SnapshotManagementApi.  Currently, we only have the create(..) method.  In the future, we may consider adding other operations such as \r\n- remove\r\n- list\r\n- download\r\n- upload","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002587391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002588306","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1002588306","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1002588306,"node_id":"IC_kwDOBMxbGc47wkiS","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-29T13:12:48Z","updated_at":"2021-12-29T13:12:48Z","author_association":"CONTRIBUTOR","body":"BTW, let's change the SimulatedRpc first and then change gRPC, Netty and Hadoop RPC later.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002588306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002974999","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1002974999","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1002974999,"node_id":"IC_kwDOBMxbGc47yC8X","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T10:53:46Z","updated_at":"2021-12-30T10:53:46Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , I have re-run the tests more that 10 times.  Some unit tests keep failing with TimeoutIOException.  \r\n```\r\njava.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException:\r\n Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-41B84410B9C9,type=STREAM_DATA,id=378,offset=7049852,length=0\r\n```\r\nI suspect this change causing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1002974999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003010545","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1003010545","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1003010545,"node_id":"IC_kwDOBMxbGc47yLnx","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T12:35:14Z","updated_at":"2021-12-30T12:35:14Z","author_association":"CONTRIBUTOR","body":"> @guohao-rosicky , I have re-run the tests more that 10 times. Some unit tests keep failing with TimeoutIOException.\r\n> \r\n> ```\r\n> java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException:\r\n>  Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-41B84410B9C9,type=STREAM_DATA,id=378,offset=7049852,length=0\r\n> ```\r\n> \r\n> I suspect this change causing it.\r\n\r\nI've been testing it and found the same problem","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003010545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003084150","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1003084150","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1003084150,"node_id":"IC_kwDOBMxbGc47ydl2","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-30T15:48:32Z","updated_at":"2021-12-30T15:48:32Z","author_association":"CONTRIBUTOR","body":"I use the master code, and I have the same problem @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003084150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003283440","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1003283440","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1003283440,"node_id":"IC_kwDOBMxbGc47zOPw","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-31T06:22:28Z","updated_at":"2021-12-31T06:22:28Z","author_association":"CONTRIBUTOR","body":"The time for the user-defined state machine to install snapshot right now only leaves 1 sec. This might be too tight. Shall we make it configurable? @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1003283440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004796115","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1004796115","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1004796115,"node_id":"IC_kwDOBMxbGc474_jT","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-04T13:08:48Z","updated_at":"2022-01-04T13:08:48Z","author_association":"CONTRIBUTOR","body":"@szetszwo I change the code, added the code in SimulatedRpc and the raft.proto, PTAL, thx! In addition, the CI test error seems to have nothing to do with this code change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004796115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004815368","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1004815368","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1004815368,"node_id":"IC_kwDOBMxbGc475EQI","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-04T13:32:42Z","updated_at":"2022-01-04T13:32:42Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , it seems that the tests started failing after the following commit.  Could you take a look?\r\n\r\ncommit beb3e3ded54432ae23a80e35b5abb1e5d466b08e\r\nAuthor: hao guo\r\nDate:   Wed Dec 22 23:25:08 2021 +0800\r\n\r\nRATIS-1475. Use the stream level SlidingWindow.client in OrderedStreamAsync ( #568 )\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004815368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004818083","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1004818083","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1004818083,"node_id":"IC_kwDOBMxbGc475E6j","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-04T13:36:48Z","updated_at":"2022-01-04T13:36:48Z","author_association":"CONTRIBUTOR","body":"> ... Shall we make it configurable?\r\n\r\nYes, it is a good idea to make it configurable.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1004818083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007177210","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1007177210","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1007177210,"node_id":"IC_kwDOBMxbGc48CE36","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T06:41:27Z","updated_at":"2022-01-07T07:16:17Z","author_association":"CONTRIBUTOR","body":"@szetszwo I have added snapshotmanagement related code to the admin related protocol, PTAL, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007177210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007238165","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1007238165","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1007238165,"node_id":"IC_kwDOBMxbGc48CTwV","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T08:52:59Z","updated_at":"2022-01-07T08:52:59Z","author_association":"CONTRIBUTOR","body":"@szetszwo In the next pull request, I will add gRPC, Netty and Hadoop related proto, and then I will add the corresponding shell command and add the corresponding unit test, what do you think?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007238165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007322644","html_url":"https://github.com/apache/ratis/pull/538#issuecomment-1007322644","issue_url":"https://api.github.com/repos/apache/ratis/issues/538","id":1007322644,"node_id":"IC_kwDOBMxbGc48CoYU","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-07T11:05:03Z","updated_at":"2022-01-07T11:05:03Z","author_association":"CONTRIBUTOR","body":"@codings-dan , sure.  Let's add gRPC first.  We will add Netty and Hadoop later.  Thanks a lot!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1007322644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008501156","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1008501156","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1008501156,"node_id":"IC_kwDOBMxbGc48HIGk","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T02:49:33Z","updated_at":"2022-01-10T02:55:43Z","author_association":"CONTRIBUTOR","body":"There is  problem just  for this commit, RATIs-1475 I have been running in a test environment for a week without finding any problems with it.\r\n\r\nAnother problem is that when we run the stream for a long time, we get a lot of timeouts.\r\n\r\nI suspect that the timeout was added to hide some other problem. @szetszwo \r\n\r\n\r\n> @guohao-rosicky , it seems that the tests started failing after the following commit. Could you take a look?\r\n> \r\n> commit [beb3e3d](https://github.com/apache/ratis/commit/beb3e3ded54432ae23a80e35b5abb1e5d466b08e) Author: hao guo Date: Wed Dec 22 23:25:08 2021 +0800\r\n> \r\n> RATIS-1475. Use the stream level SlidingWindow.client in OrderedStreamAsync ( #568 )\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008501156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008502818","html_url":"https://github.com/apache/ratis/pull/574#issuecomment-1008502818","issue_url":"https://api.github.com/repos/apache/ratis/issues/574","id":1008502818,"node_id":"IC_kwDOBMxbGc48HIgi","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T02:56:54Z","updated_at":"2022-01-10T03:11:17Z","author_association":"CONTRIBUTOR","body":"Yours is much more concise. I have submitted a new commit. PTAL @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008502818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008591625","html_url":"https://github.com/apache/ratis/pull/571#issuecomment-1008591625","issue_url":"https://api.github.com/repos/apache/ratis/issues/571","id":1008591625,"node_id":"IC_kwDOBMxbGc48HeMJ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-10T07:09:24Z","updated_at":"2022-01-10T07:09:24Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , I just have restarted the build.  See if we can get a clean build.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1008591625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1009545297","html_url":"https://github.com/apache/ratis/pull/575#issuecomment-1009545297","issue_url":"https://api.github.com/repos/apache/ratis/issues/575","id":1009545297,"node_id":"IC_kwDOBMxbGc48LHBR","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-11T02:34:29Z","updated_at":"2022-01-11T02:34:29Z","author_association":"CONTRIBUTOR","body":"@szetszwo I add code related to take snapshot grpc proto and request, PTAL, thx!  BTW, It seems the ci test error has noting to do with this code change\r\n```\r\njava.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException: Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-26F2CB066FC6,type=STREAM_DATA,id=415,offset=7345228,length=0\r\n\tat java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:292)\r\n\tat java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:308)\r\n\tat java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:783)\r\n\tat java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:750)\r\n\tat java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:488)\r\n\tat java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:1990)\r\n\tat org.apache.ratis.client.impl.OrderedStreamAsync.lambda$scheduleWithTimeout$7(OrderedStreamAsync.java:168)\r\n\tat org.apache.ratis.util.TimeoutScheduler.lambda$onTimeout$0(TimeoutScheduler.java:141)\r\n\tat org.apache.ratis.util.TimeoutScheduler.lambda$onTimeout$1(TimeoutScheduler.java:155)\r\n\tat org.apache.ratis.util.LogUtils.runAndLog(LogUtils.java:38)\r\n\tat org.apache.ratis.util.LogUtils$1.run(LogUtils.java:79)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: org.apache.ratis.protocol.exceptions.TimeoutIOException: Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-26F2CB066FC6,type=STREAM_DATA,id=415,offset=7345228,length=0\r\n\t... 12 more\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1009545297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1009843579","html_url":"https://github.com/apache/ratis/pull/576#issuecomment-1009843579","issue_url":"https://api.github.com/repos/apache/ratis/issues/576","id":1009843579,"node_id":"IC_kwDOBMxbGc48MP17","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-11T10:53:26Z","updated_at":"2022-01-11T10:53:26Z","author_association":"CONTRIBUTOR","body":"@szetszwo I added the code for take snapshot hadoop netty proto and request, PTAL, after this patch, I wil add a shell command to manage snapshot. BTW, the ci test error has nothing to do with this code change.\r\n```\r\norg.junit.runners.model.TestTimedOutException: test timed out after 100 seconds\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\tat java.util.concurrent.FutureTask.awaitDone(FutureTask.java:426)\r\n\tat java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout.getResult(FailOnTimeout.java:141)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout.evaluate(FailOnTimeout.java:127)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1009843579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010445545","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1010445545","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1010445545,"node_id":"IC_kwDOBMxbGc48Oizp","user":{"login":"hanishakoneru","id":10237377,"node_id":"MDQ6VXNlcjEwMjM3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/10237377?v=4","gravatar_id":"","url":"https://api.github.com/users/hanishakoneru","html_url":"https://github.com/hanishakoneru","followers_url":"https://api.github.com/users/hanishakoneru/followers","following_url":"https://api.github.com/users/hanishakoneru/following{/other_user}","gists_url":"https://api.github.com/users/hanishakoneru/gists{/gist_id}","starred_url":"https://api.github.com/users/hanishakoneru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanishakoneru/subscriptions","organizations_url":"https://api.github.com/users/hanishakoneru/orgs","repos_url":"https://api.github.com/users/hanishakoneru/repos","events_url":"https://api.github.com/users/hanishakoneru/events{/privacy}","received_events_url":"https://api.github.com/users/hanishakoneru/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-11T23:05:01Z","updated_at":"2022-01-11T23:05:01Z","author_association":"CONTRIBUTOR","body":"@Xushaohong, thanks for working on this.\r\nPlease correct me if I am wrong, but the state change calls mentioned above are still not being synchronized. \r\n\r\n> The following check in the main thread if (latestInstalledSnapshotIndex > 0) will be executed before state upgrade, which cause the raft server could not respond SNAPSHOT_INSTALLED in one request.\r\n\r\nThis is intentional so that we don't block the main thread while the SM is installing the snapshot. Instead we send a IN_PROGRESS notification back to the leader. ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010445545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010555152","html_url":"https://github.com/apache/ratis/pull/577#issuecomment-1010555152","issue_url":"https://api.github.com/repos/apache/ratis/issues/577","id":1010555152,"node_id":"IC_kwDOBMxbGc48O9kQ","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T02:01:43Z","updated_at":"2022-01-12T02:01:43Z","author_association":"CONTRIBUTOR","body":"@szetszwo I tried to implement a version of pause election code, PTAL, thx! BTW, the ci test error has noting to do with this code change:\r\n```\r\nError:  testSnapshotCleanup(org.apache.ratis.server.storage.TestRaftStorage)  Time elapsed: 0.036 s  <<< FAILURE!\r\njava.lang.AssertionError\r\n\tat org.junit.Assert.fail(Assert.java:86)\r\n\tat org.junit.Assert.assertTrue(Assert.java:41)\r\n\tat org.junit.Assert.assertTrue(Assert.java:52)\r\n\tat org.apache.ratis.server.storage.TestRaftStorage.testSnapshotCleanup(TestRaftStorage.java:266)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010555152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010607899","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1010607899","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1010607899,"node_id":"IC_kwDOBMxbGc48PKcb","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T03:58:56Z","updated_at":"2022-01-12T04:09:13Z","author_association":"CONTRIBUTOR","body":"> @Xushaohong, thanks for working on this. Please correct me if I am wrong, but the state change calls mentioned above are still not being synchronized.\r\n> \r\n> > The following check in the main thread if (latestInstalledSnapshotIndex > 0) will be executed before state upgrade, which cause the raft server could not respond SNAPSHOT_INSTALLED in one request.\r\n> \r\n> This is intentional so that we don't block the main thread while the SM is installing the snapshot. Instead we send a IN_PROGRESS notification back to the leader.\r\n\r\n@hanishakoneru \r\nI suppose the raw idea is to make the notifyStateMachineToInstallSnapshot process asynchronously, which means the notifications could be continuously arrived at the raft server to trigger the install of snapshot and the call should be idempotent before really installed. \r\n\r\nThe problem is due to ```whenComplete``` stage. This part would be executed serially after the future done by SM with the same thread. This is where I think should not be serializable. Since the install of the snapshot is asynchronous, the main thread will execute the following part first. ```      long latestInstalledSnapshotIndex = this.installedSnapshotIndex.getAndSet(0);\r\n      if (latestInstalledSnapshotIndex > 0) ``` . This should be fine at the beginning, coz it will pass this check and return IN_PROGRESS. \r\nBut once the SM has installed the snapshot, the main thread needs another call to go through the ```if (latestInstalledSnapshotIndex > 0)``` part as the previous call of notifyStateMachineToInstallSnapshot is done. There is a gap time between two calls. During this gap,  ```appendEntriesAsync``` might have seen the updated state and returned the ```state.getNextIndex()```. This causes the leader to misunderstand the follower's state,  not to send the next notification anymore and the notification of install will not be finished. \r\n\r\nTo avoid this, I think the state change part and the following check part should be serialized.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010607899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010791103","html_url":"https://github.com/apache/ratis/pull/576#issuecomment-1010791103","issue_url":"https://api.github.com/repos/apache/ratis/issues/576","id":1010791103,"node_id":"IC_kwDOBMxbGc48P3K_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T08:53:29Z","updated_at":"2022-01-12T08:53:29Z","author_association":"CONTRIBUTOR","body":"@codings-dan , just found that we have not changed the RaftClient.  Let's change it first and also add a test for Grpc, i.e. TestSnapshotManagementWithGpc.\r\n```\r\ndiff --git a/ratis-client/src/main/java/org/apache/ratis/client/RaftClient.java b/ratis-client/src/main/java/org/apache/ratis/client/RaftClient.java\r\nindex e7bd3bf1..8016a674 100644\r\n--- a/ratis-client/src/main/java/org/apache/ratis/client/RaftClient.java\r\n+++ b/ratis-client/src/main/java/org/apache/ratis/client/RaftClient.java\r\n@@ -24,6 +24,7 @@ import org.apache.ratis.client.api.BlockingApi;\r\n import org.apache.ratis.client.api.DataStreamApi;\r\n import org.apache.ratis.client.api.GroupManagementApi;\r\n import org.apache.ratis.client.api.MessageStreamApi;\r\n+import org.apache.ratis.client.api.SnapshotManagementApi;\r\n import org.apache.ratis.client.impl.ClientImplUtils;\r\n import org.apache.ratis.conf.Parameters;\r\n import org.apache.ratis.conf.RaftProperties;\r\n@@ -57,6 +58,9 @@ public interface RaftClient extends Closeable {\r\n   /** Get the {@link GroupManagementApi} for the given server. */\r\n   GroupManagementApi getGroupManagementApi(RaftPeerId server);\r\n \r\n+  /** Get the {@link SnapshotManagementApi}. */\r\n+  SnapshotManagementApi getSnapshotManagementApi();\r\n+\r\n   /** @return the {@link BlockingApi}. */\r\n   BlockingApi io();\r\n \r\ndiff --git a/ratis-client/src/main/java/org/apache/ratis/client/impl/RaftClientImpl.java b/ratis-client/src/main/java/org/apache/ratis/client/impl/RaftClientImpl.java\r\nindex ce7150b3..eae0606a 100644\r\n--- a/ratis-client/src/main/java/org/apache/ratis/client/impl/RaftClientImpl.java\r\n+++ b/ratis-client/src/main/java/org/apache/ratis/client/impl/RaftClientImpl.java\r\n@@ -21,6 +21,7 @@ import org.apache.ratis.client.DataStreamClient;\r\n import org.apache.ratis.client.RaftClient;\r\n import org.apache.ratis.client.RaftClientRpc;\r\n import org.apache.ratis.client.api.DataStreamApi;\r\n+import org.apache.ratis.client.api.SnapshotManagementApi;\r\n import org.apache.ratis.client.retry.ClientRetryEvent;\r\n import org.apache.ratis.conf.RaftProperties;\r\n import org.apache.ratis.proto.RaftProtos.SlidingWindowEntry;\r\n@@ -140,6 +141,7 @@ public final class RaftClientImpl implements RaftClient {\r\n \r\n   private final Supplier<AdminImpl> adminApi;\r\n   private final ConcurrentMap<RaftPeerId, GroupManagementImpl> groupManagmenets = new ConcurrentHashMap<>();\r\n+  private final Supplier<SnapshotManagementApi> snapshotManagemenet;\r\n \r\n   RaftClientImpl(ClientId clientId, RaftGroup group, RaftPeerId leaderId, RaftPeer primaryDataStreamServer,\r\n       RaftClientRpc clientRpc, RaftProperties properties, RetryPolicy retryPolicy) {\r\n@@ -170,6 +172,7 @@ public final class RaftClientImpl implements RaftClient {\r\n         .setProperties(properties)\r\n         .build());\r\n     this.adminApi = JavaUtils.memoize(() -> new AdminImpl(this));\r\n+    this.snapshotManagemenet= JavaUtils.memoize(() -> new SnapshotManagementImpl(this));\r\n   }\r\n \r\n   public RaftPeerId getLeaderId() {\r\n@@ -243,6 +246,11 @@ public final class RaftClientImpl implements RaftClient {\r\n     return groupManagmenets.computeIfAbsent(server, id -> new GroupManagementImpl(id, this));\r\n   }\r\n \r\n+  @Override\r\n+  public SnapshotManagementApi getSnapshotManagementApi() {\r\n+    return snapshotManagemenet.get();\r\n+  }\r\n+\r\n   @Override\r\n   public BlockingImpl io() {\r\n     return blockingApi.get();\r\ndiff --git a/ratis-server/src/test/java/org/apache/ratis/statemachine/SnapshotManagementTest.java b/ratis-server/src/test/java/org/apache/ratis/statemachine/SnapshotManagementTest.java\r\nindex 385b77ec..697aa748 100644\r\n--- a/ratis-server/src/test/java/org/apache/ratis/statemachine/SnapshotManagementTest.java\r\n+++ b/ratis-server/src/test/java/org/apache/ratis/statemachine/SnapshotManagementTest.java\r\n@@ -100,10 +100,7 @@ public abstract class SnapshotManagementTest<CLUSTER extends MiniRaftCluster>\r\n       }\r\n       Assert.assertTrue(leader.getStateMachine().getLastAppliedTermIndex().getIndex()\r\n             < RaftServerConfigKeys.Snapshot.creationGap(getProperties()));\r\n-      final SnapshotManagementRequest r =\r\n-          SnapshotManagementRequest.newCreate(client.getId(), leaderId, cluster.getGroupId(),\r\n-              CallId.getAndIncrement(), 3000);\r\n-      snapshotReply = RaftServerTestUtil.takeSnapshotAsync(leader, r).join();\r\n+      snapshotReply = client.getSnapshotManagementApi().create(3000);\r\n       Assert.assertTrue(snapshotReply.isSuccess());\r\n       Assert.assertEquals(0,snapshotReply.getLogIndex());\r\n       for (int i = 0; i < RaftServerConfigKeys.Snapshot.creationGap(getProperties())/2-1; i++) {\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010791103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010828193","html_url":"https://github.com/apache/ratis/pull/576#issuecomment-1010828193","issue_url":"https://api.github.com/repos/apache/ratis/issues/576","id":1010828193,"node_id":"IC_kwDOBMxbGc48QAOh","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T09:24:55Z","updated_at":"2022-01-12T09:25:13Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing code, now we need to change RaftClient and grpc-related test code, which is not related to the content of this PR. Do I complete the above work in this PR, or create another PR?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010828193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010902942","html_url":"https://github.com/apache/ratis/pull/576#issuecomment-1010902942","issue_url":"https://api.github.com/repos/apache/ratis/issues/576","id":1010902942,"node_id":"IC_kwDOBMxbGc48QSee","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T10:41:58Z","updated_at":"2022-01-12T10:41:58Z","author_association":"CONTRIBUTOR","body":"@codings-dan , please create a subtask for the RaftClient change.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1010902942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1011074953","html_url":"https://github.com/apache/ratis/pull/578#issuecomment-1011074953","issue_url":"https://api.github.com/repos/apache/ratis/issues/578","id":1011074953,"node_id":"IC_kwDOBMxbGc48Q8eJ","user":{"login":"ILuffZhe","id":37180946,"node_id":"MDQ6VXNlcjM3MTgwOTQ2","avatar_url":"https://avatars.githubusercontent.com/u/37180946?v=4","gravatar_id":"","url":"https://api.github.com/users/ILuffZhe","html_url":"https://github.com/ILuffZhe","followers_url":"https://api.github.com/users/ILuffZhe/followers","following_url":"https://api.github.com/users/ILuffZhe/following{/other_user}","gists_url":"https://api.github.com/users/ILuffZhe/gists{/gist_id}","starred_url":"https://api.github.com/users/ILuffZhe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ILuffZhe/subscriptions","organizations_url":"https://api.github.com/users/ILuffZhe/orgs","repos_url":"https://api.github.com/users/ILuffZhe/repos","events_url":"https://api.github.com/users/ILuffZhe/events{/privacy}","received_events_url":"https://api.github.com/users/ILuffZhe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-12T14:00:34Z","updated_at":"2022-01-12T14:00:34Z","author_association":"CONTRIBUTOR","body":"Hi, @szetszwo .\r\nThe workflow needs approval for the first time contribution. Please take a look when you are free.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1011074953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1012850614","html_url":"https://github.com/apache/ratis/pull/580#issuecomment-1012850614","issue_url":"https://api.github.com/repos/apache/ratis/issues/580","id":1012850614,"node_id":"IC_kwDOBMxbGc48Xt-2","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-14T07:37:53Z","updated_at":"2022-01-14T07:37:53Z","author_association":"CONTRIBUTOR","body":"@szetszwo I add the take snapshot command, PTAL, thx!  Now it seems that we can only let the leader take snapshot, should we also support follower to take snapshot?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1012850614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015038601","html_url":"https://github.com/apache/ratis/pull/577#issuecomment-1015038601","issue_url":"https://api.github.com/repos/apache/ratis/issues/577","id":1015038601,"node_id":"IC_kwDOBMxbGc48gEKJ","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T03:23:54Z","updated_at":"2022-01-18T03:23:54Z","author_association":"CONTRIBUTOR","body":"@szetszwo PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015038601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015119458","html_url":"https://github.com/apache/ratis/pull/581#issuecomment-1015119458","issue_url":"https://api.github.com/repos/apache/ratis/issues/581","id":1015119458,"node_id":"IC_kwDOBMxbGc48gX5i","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T06:52:17Z","updated_at":"2022-01-18T06:52:17Z","author_association":"CONTRIBUTOR","body":"I think this change is good, but it doesn't seem to be very easy to test it. Is it possible to consider adding a way to start Application in software like Intellij IDEA and start several ratis servers locally, which can easily add breakpoints and reproduce the problem, which is helpful for debugging and testing.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015119458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015492855","html_url":"https://github.com/apache/ratis/pull/581#issuecomment-1015492855","issue_url":"https://api.github.com/repos/apache/ratis/issues/581","id":1015492855,"node_id":"IC_kwDOBMxbGc48hzD3","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T14:56:17Z","updated_at":"2022-01-18T14:56:17Z","author_association":"CONTRIBUTOR","body":"Thanks @codings-dan, @szetszwo for the review, @szetszwo for merging this.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015492855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015589846","html_url":"https://github.com/apache/ratis/pull/582#issuecomment-1015589846","issue_url":"https://api.github.com/repos/apache/ratis/issues/582","id":1015589846,"node_id":"IC_kwDOBMxbGc48iKvW","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T16:35:37Z","updated_at":"2022-01-18T16:35:37Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , good catch.  Will update it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015589846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015603865","html_url":"https://github.com/apache/ratis/pull/583#issuecomment-1015603865","issue_url":"https://api.github.com/repos/apache/ratis/issues/583","id":1015603865,"node_id":"IC_kwDOBMxbGc48iOKZ","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-18T16:47:03Z","updated_at":"2022-01-18T16:47:03Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for reviewing and committing it.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1015603865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016397268","html_url":"https://github.com/apache/ratis/pull/584#issuecomment-1016397268","issue_url":"https://api.github.com/repos/apache/ratis/issues/584","id":1016397268,"node_id":"IC_kwDOBMxbGc48lP3U","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T11:57:48Z","updated_at":"2022-01-19T11:57:48Z","author_association":"CONTRIBUTOR","body":"@szetszwo Should we update the PR title to match the change (scope change instead of complete removal)?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016397268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016470638","html_url":"https://github.com/apache/ratis/pull/580#issuecomment-1016470638","issue_url":"https://api.github.com/repos/apache/ratis/issues/580","id":1016470638,"node_id":"IC_kwDOBMxbGc48lhxu","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T13:33:48Z","updated_at":"2022-01-19T13:33:48Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing code. I have update the code, PTAL again, thx! I will add some unit tests for the whole ratis-shell module in the future patch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016470638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016610062","html_url":"https://github.com/apache/ratis/pull/584#issuecomment-1016610062","issue_url":"https://api.github.com/repos/apache/ratis/issues/584","id":1016610062,"node_id":"IC_kwDOBMxbGc48mD0O","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-19T15:57:16Z","updated_at":"2022-01-19T15:57:16Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , Yes, we should update the title and the commit message.  Thanks.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1016610062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017045793","html_url":"https://github.com/apache/ratis/pull/577#issuecomment-1017045793","issue_url":"https://api.github.com/repos/apache/ratis/issues/577","id":1017045793,"node_id":"IC_kwDOBMxbGc48nuMh","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T02:02:52Z","updated_at":"2022-01-20T02:02:52Z","author_association":"CONTRIBUTOR","body":"@szetszwo Now that the server-side code change has been completed, I will add rpc and proto in the next work, what do you think? In addition, I noticed that the name of RaftPeerId in the constructor method of RaftClientImpl is leaderId. Can this be understood that ratis client only supports sending rpc requests to the leader server, and does not support sending to followers for the time being?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017045793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017170585","html_url":"https://github.com/apache/ratis/pull/577#issuecomment-1017170585","issue_url":"https://api.github.com/repos/apache/ratis/issues/577","id":1017170585,"node_id":"IC_kwDOBMxbGc48oMqZ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T06:51:38Z","updated_at":"2022-01-20T06:52:58Z","author_association":"CONTRIBUTOR","body":"@codings-dan , Sure, please feel free to add rpc and proto.  Please add grpc first.\r\n\r\n> ...  Can this be understood that ratis client only supports sending rpc requests to the leader server, and does not support sending to followers for the time being?\r\n\r\nRatis client could send requests to any server in a group.  See GroupManagementImpl as an example.  The GroupManagementApi.list() method is to list the groups in any server of the group, not necessarily the leader.\r\n\r\nWe should add another method to RaftClient.\r\n```\r\n  /** Get the {@link SnapshotManagementApi} for the given server. */\r\n  SnapshotManagementApi getSnapshotManagementApi(RaftPeerId server);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017170585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017989466","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1017989466","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1017989466,"node_id":"IC_kwDOBMxbGc48rUla","user":{"login":"hanishakoneru","id":10237377,"node_id":"MDQ6VXNlcjEwMjM3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/10237377?v=4","gravatar_id":"","url":"https://api.github.com/users/hanishakoneru","html_url":"https://github.com/hanishakoneru","followers_url":"https://api.github.com/users/hanishakoneru/followers","following_url":"https://api.github.com/users/hanishakoneru/following{/other_user}","gists_url":"https://api.github.com/users/hanishakoneru/gists{/gist_id}","starred_url":"https://api.github.com/users/hanishakoneru/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hanishakoneru/subscriptions","organizations_url":"https://api.github.com/users/hanishakoneru/orgs","repos_url":"https://api.github.com/users/hanishakoneru/repos","events_url":"https://api.github.com/users/hanishakoneru/events{/privacy}","received_events_url":"https://api.github.com/users/hanishakoneru/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-20T22:39:29Z","updated_at":"2022-01-20T22:39:29Z","author_association":"CONTRIBUTOR","body":"> But once the SM has installed the snapshot, the main thread needs another call to go through the if (latestInstalledSnapshotIndex > 0) part as the previous call of notifyStateMachineToInstallSnapshot is done. There is a gap time between two calls. During this gap, appendEntriesAsync might have seen the updated state and returned the state.getNextIndex(). This causes the leader to misunderstand the follower's state, not to send the next notification anymore and the notification of install will not be finished.\r\n\r\nLeader sends a snapshot (request or notification) to follower when either LogAppender#shouldInstallSnapshot() or GrpcLogAppender#shouldNotifyToInstallSnapshot() are true. And once these are true, without a state change acknowledgement from the follower, Leader will not send an appendEntries request.\r\n\r\nAlso, if the follower does not send a response back till it finishes installing the snapshot, the Leader will not be able to update the lastRpcResponseTime for this follower. This could lead to the leader stepping down thinking that it has lost the connection with this follower.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1017989466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1018124343","html_url":"https://github.com/apache/ratis/pull/573#issuecomment-1018124343","issue_url":"https://api.github.com/repos/apache/ratis/issues/573","id":1018124343,"node_id":"IC_kwDOBMxbGc48r1g3","user":{"login":"Xushaohong","id":10106574,"node_id":"MDQ6VXNlcjEwMTA2NTc0","avatar_url":"https://avatars.githubusercontent.com/u/10106574?v=4","gravatar_id":"","url":"https://api.github.com/users/Xushaohong","html_url":"https://github.com/Xushaohong","followers_url":"https://api.github.com/users/Xushaohong/followers","following_url":"https://api.github.com/users/Xushaohong/following{/other_user}","gists_url":"https://api.github.com/users/Xushaohong/gists{/gist_id}","starred_url":"https://api.github.com/users/Xushaohong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Xushaohong/subscriptions","organizations_url":"https://api.github.com/users/Xushaohong/orgs","repos_url":"https://api.github.com/users/Xushaohong/repos","events_url":"https://api.github.com/users/Xushaohong/events{/privacy}","received_events_url":"https://api.github.com/users/Xushaohong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-21T03:05:46Z","updated_at":"2022-01-21T03:06:23Z","author_association":"CONTRIBUTOR","body":"> Leader sends a snapshot (request or notification) to follower when either LogAppender#shouldInstallSnapshot() or GrpcLogAppender#shouldNotifyToInstallSnapshot() are true. And once these are true, without a state change acknowledgement from the follower, Leader will not send an appendEntries request.\r\n\r\nActually, Leader will send an appendEntries request. It  keeps send empty appendEntries requests to follower to keep in contact with follower as shouldNotifyToInstallSnapshot() is true as the below.\r\n```\r\n    if (heartbeatWaitTimeMs <= 0L || heartbeat) {\r\n      // heartbeat\r\n      return leaderState.newAppendEntriesRequestProto(follower, Collections.emptyList(), previous, callId);\r\n    }\r\n```\r\nHence The follower will send back INCONSISTENCY to the leader and the leader will updateNextIndex. \r\n```\r\n        case INCONSISTENCY:\r\n          grpcServerMetrics.onRequestInconsistency(getFollowerId().toString());\r\n          updateNextIndex(reply.getNextIndex());\r\n```\r\n\r\n\r\n\r\n> \r\n> Also, if the follower does not send a response back till it finishes installing the snapshot, the Leader will not be able to update the lastRpcResponseTime for this follower. This could lead to the leader stepping down thinking that it has lost the connection with this follower.\r\n\r\nThis is also explained above. append log (heartbeat) will keep the follower in contact! \r\n\r\n@hanishakoneru PTAL","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1018124343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019281202","html_url":"https://github.com/apache/ratis/pull/587#issuecomment-1019281202","issue_url":"https://api.github.com/repos/apache/ratis/issues/587","id":1019281202,"node_id":"IC_kwDOBMxbGc48wP8y","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T14:29:10Z","updated_at":"2022-01-22T14:29:10Z","author_association":"CONTRIBUTOR","body":"> ... should the new executors be declared as ExecutorService and shutdown() when appropriate?\r\n\r\nThe shutdown() method is to stop accepting new tasks.  Yes, we should call shutdown() except for the static PeerProxyMap.EXECUTOR, shutdown() is not needed.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019281202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019281683","html_url":"https://github.com/apache/ratis/pull/587#issuecomment-1019281683","issue_url":"https://api.github.com/repos/apache/ratis/issues/587","id":1019281683,"node_id":"IC_kwDOBMxbGc48wQET","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-22T14:31:49Z","updated_at":"2022-01-22T14:31:49Z","author_association":"CONTRIBUTOR","body":"BTW, I have reverted the LeaderStateImpl change since the GrpcClientProtocolService change will fix the reported problem.\r\n\r\nLeaderStateImpl will be fixed by https://issues.apache.org/jira/browse/RATIS-1500 ( #588 )","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019281683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019413640","html_url":"https://github.com/apache/ratis/pull/589#issuecomment-1019413640","issue_url":"https://api.github.com/repos/apache/ratis/issues/589","id":1019413640,"node_id":"IC_kwDOBMxbGc48wwSI","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-23T04:50:19Z","updated_at":"2022-01-23T04:50:19Z","author_association":"CONTRIBUTOR","body":"The following classes are excluded after this change:\r\n```\r\n$diff a.txt ../apache-ratis-2.3.0-SNAPSHOT-orig/a.txt \r\n945a946,966\r\n> org/apache/log4j/chainsaw/\r\n> org/apache/log4j/chainsaw/ControlPanel$1.class\r\n> org/apache/log4j/chainsaw/ControlPanel$2.class\r\n> org/apache/log4j/chainsaw/ControlPanel$3.class\r\n> org/apache/log4j/chainsaw/ControlPanel$4.class\r\n> org/apache/log4j/chainsaw/ControlPanel$5.class\r\n> org/apache/log4j/chainsaw/ControlPanel$6.class\r\n> org/apache/log4j/chainsaw/ControlPanel$7.class\r\n> org/apache/log4j/chainsaw/ControlPanel.class\r\n> org/apache/log4j/chainsaw/DetailPanel.class\r\n> org/apache/log4j/chainsaw/EventDetails.class\r\n> org/apache/log4j/chainsaw/ExitAction.class\r\n> org/apache/log4j/chainsaw/LoadXMLAction.class\r\n> org/apache/log4j/chainsaw/LoggingReceiver$Slurper.class\r\n> org/apache/log4j/chainsaw/LoggingReceiver.class\r\n> org/apache/log4j/chainsaw/Main$1.class\r\n> org/apache/log4j/chainsaw/Main.class\r\n> org/apache/log4j/chainsaw/MyTableModel$1.class\r\n> org/apache/log4j/chainsaw/MyTableModel$Processor.class\r\n> org/apache/log4j/chainsaw/MyTableModel.class\r\n> org/apache/log4j/chainsaw/XMLFileHandler.class\r\n985a1007,1008\r\n> org/apache/log4j/jdbc/\r\n> org/apache/log4j/jdbc/JDBCAppender.class\r\n1100a1124\r\n> org/apache/log4j/net/JMSSink.class\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019413640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019416138","html_url":"https://github.com/apache/ratis/pull/586#issuecomment-1019416138","issue_url":"https://api.github.com/repos/apache/ratis/issues/586","id":1019416138,"node_id":"IC_kwDOBMxbGc48ww5K","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-23T05:17:40Z","updated_at":"2022-01-23T05:17:40Z","author_association":"CONTRIBUTOR","body":"@szetszwo I changed the API related to take shanpshot, PTAL, thx! The result of the CI test has nothing to do with this code change.\r\n```\r\nError:  Tests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.116 s <<< FAILURE! - in org.apache.ratis.grpc.TestRaftStateMachineExceptionWithGrpc\r\nError:  testRetryOnExceptionDuringReplication(org.apache.ratis.grpc.TestRaftStateMachineExceptionWithGrpc)  Time elapsed: 0.59 s  <<< ERROR!\r\njava.lang.NullPointerException\r\n\tat java.util.Objects.requireNonNull(Objects.java:203)\r\n\tat org.apache.ratis.server.impl.RaftStateMachineExceptionTests.runTestRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:172)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)\r\n\tat org.apache.ratis.server.impl.RaftStateMachineExceptionTests.testRetryOnExceptionDuringReplication(RaftStateMachineExceptionTests.java:147)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:298)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:292)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019416138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019426448","html_url":"https://github.com/apache/ratis/pull/587#issuecomment-1019426448","issue_url":"https://api.github.com/repos/apache/ratis/issues/587","id":1019426448,"node_id":"IC_kwDOBMxbGc48wzaQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-23T06:48:24Z","updated_at":"2022-01-23T06:48:24Z","author_association":"CONTRIBUTOR","body":"Due to the test failures, I keep only the grpc change here and have reverted the server change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019426448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019877737","html_url":"https://github.com/apache/ratis/pull/589#issuecomment-1019877737","issue_url":"https://api.github.com/repos/apache/ratis/issues/589","id":1019877737,"node_id":"IC_kwDOBMxbGc48yhlp","user":{"login":"adoroszlai","id":6454655,"node_id":"MDQ6VXNlcjY0NTQ2NTU=","avatar_url":"https://avatars.githubusercontent.com/u/6454655?v=4","gravatar_id":"","url":"https://api.github.com/users/adoroszlai","html_url":"https://github.com/adoroszlai","followers_url":"https://api.github.com/users/adoroszlai/followers","following_url":"https://api.github.com/users/adoroszlai/following{/other_user}","gists_url":"https://api.github.com/users/adoroszlai/gists{/gist_id}","starred_url":"https://api.github.com/users/adoroszlai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/adoroszlai/subscriptions","organizations_url":"https://api.github.com/users/adoroszlai/orgs","repos_url":"https://api.github.com/users/adoroszlai/repos","events_url":"https://api.github.com/users/adoroszlai/events{/privacy}","received_events_url":"https://api.github.com/users/adoroszlai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T09:14:35Z","updated_at":"2022-01-24T09:14:35Z","author_association":"CONTRIBUTOR","body":"Thanks @szetszwo for the patch.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019877737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019989333","html_url":"https://github.com/apache/ratis/pull/588#issuecomment-1019989333","issue_url":"https://api.github.com/repos/apache/ratis/issues/588","id":1019989333,"node_id":"IC_kwDOBMxbGc48y81V","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-24T11:16:55Z","updated_at":"2022-01-24T11:16:55Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks for reviewing this.  Just have updated the change.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1019989333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1022995726","html_url":"https://github.com/apache/ratis/pull/593#issuecomment-1022995726","issue_url":"https://api.github.com/repos/apache/ratis/issues/593","id":1022995726,"node_id":"IC_kwDOBMxbGc48-a0O","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T09:10:27Z","updated_at":"2022-01-27T09:10:27Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing code, the code does have a more concise implementation and  I have changed it. PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1022995726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1023028794","html_url":"https://github.com/apache/ratis/pull/592#issuecomment-1023028794","issue_url":"https://api.github.com/repos/apache/ratis/issues/592","id":1023028794,"node_id":"IC_kwDOBMxbGc48-i46","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T09:49:10Z","updated_at":"2022-01-27T09:49:10Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , GrpcOutputStream is not really a public API.  It was known to be have bugs since the beginning as reported by RATIS-149.  So, I think we should not keep it.\r\n\r\nIndeed, the conf was confusing.  Someone has mistakenly using GrpcConfigKeys.OutputStream.RETRY_TIMES_KEY in arithmetic.cli.Server and filestoer.cli.Server.  It has no effect at all.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1023028794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1023140340","html_url":"https://github.com/apache/ratis/pull/592#issuecomment-1023140340","issue_url":"https://api.github.com/repos/apache/ratis/issues/592","id":1023140340,"node_id":"IC_kwDOBMxbGc48--H0","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-27T12:07:24Z","updated_at":"2022-01-27T12:07:24Z","author_association":"CONTRIBUTOR","body":"Sure.  Let me update the title in order to mention the conf.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1023140340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1024007691","html_url":"https://github.com/apache/ratis/pull/594#issuecomment-1024007691","issue_url":"https://api.github.com/repos/apache/ratis/issues/594","id":1024007691,"node_id":"IC_kwDOBMxbGc49CR4L","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T08:51:37Z","updated_at":"2022-01-28T08:51:37Z","author_association":"CONTRIBUTOR","body":"I have not changed the netty and hadoop relate proto, so the ci test error. I will change it in the next pull request\r\n```\r\nError:  testPauseResumeLeaderElection(org.apache.ratis.netty.TestLeaderElectionWithNetty)  Time elapsed: 100.011 s  <<< ERROR!\r\norg.junit.runners.model.TestTimedOutException: test timed out after 100 seconds\r\n\tat java.lang.Thread.sleep(Native Method)\r\n\tat java.lang.Thread.sleep(Thread.java:340)\r\n\tat java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)\r\n\tat org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:324)\r\n\tat org.apache.ratis.util.TimeDuration.sleep(TimeDuration.java:309)\r\n\tat org.apache.ratis.client.impl.BlockingImpl.sendRequestWithRetry(BlockingImpl.java:121)\r\n\tat org.apache.ratis.client.impl.SetLeaderElectionImpl.pause(SetLeaderElectionImpl.java:42)\r\n\tat org.apache.ratis.server.impl.LeaderElectionTests.runTestPauseResumeLeaderElection(LeaderElectionTests.java:427)\r\n\tat org.apache.ratis.server.impl.LeaderElectionTests$$Lambda$637/1498201939.accept(Unknown Source)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:125)\r\n\tat org.apache.ratis.server.impl.MiniRaftCluster$Factory$Get.runWithNewCluster(MiniRaftCluster.java:113)\r\n\tat org.apache.ratis.server.impl.LeaderElectionTests.testPauseResumeLeaderElection(LeaderElectionTests.java:415)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1024007691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1024090381","html_url":"https://github.com/apache/ratis/pull/594#issuecomment-1024090381","issue_url":"https://api.github.com/repos/apache/ratis/issues/594","id":1024090381,"node_id":"IC_kwDOBMxbGc49CmEN","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-28T10:38:57Z","updated_at":"2022-01-28T10:38:57Z","author_association":"CONTRIBUTOR","body":"> I have not changed the netty and hadoop relate proto, so the ci test error. I will change it in the next pull request\r\n\r\n@codings-dan , let's skip the test for netty and hadoop as below.\r\n```\r\n  @Test\r\n   public void testPauseResumeLeaderElection() throws Exception {\r\n+    final RpcType rpcType = RaftConfigKeys.Rpc.type(getProperties(), LOG::info);\r\n+    if (rpcType == SupportedRpcType.NETTY || rpcType == SupportedRpcType.HADOOP) {\r\n+      return;\r\n+    }\r\n     runWithNewCluster(3, this::runTestPauseResumeLeaderElection);\r\n   }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1024090381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1026015215","html_url":"https://github.com/apache/ratis/pull/595#issuecomment-1026015215","issue_url":"https://api.github.com/repos/apache/ratis/issues/595","id":1026015215,"node_id":"IC_kwDOBMxbGc49J7_v","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-31T17:16:28Z","updated_at":"2022-01-31T17:16:28Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , thanks a lot for your comments.\r\n\r\n> Should ratis-proto/src/main/proto/Hadoop.proto also move?\r\n\r\nYes.  \r\n\r\n> There is some Hadoop-specific logic in ratis-resource-bundle/src/main/resources/META-INF/LICENSE.vm.\r\n\r\nGood catch.  We should remove the  Hadoop-specific logic.\r\n\r\n> BUILDING.md mentions the separate (nonexistent) repo ratis-thirdparty-hadoop and that org.apache.hadoop.ipc.protobuf should be shaded. Is this still planned?\r\n\r\nThe ratis-thirdparty-hadoop module was renamed to ratis-thirdparty-misc some time ago.  Let me update the doc.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1026015215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1026447711","html_url":"https://github.com/apache/ratis/pull/595#issuecomment-1026447711","issue_url":"https://api.github.com/repos/apache/ratis/issues/595","id":1026447711,"node_id":"IC_kwDOBMxbGc49Lllf","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-01T03:36:28Z","updated_at":"2022-02-01T03:36:28Z","author_association":"CONTRIBUTOR","body":"@adoroszlai , LICENSE.vm will first detect the existence of a component.  It generates the license only if the component exists.  Since it doesn't hurt, how about we keep LICENSE.vm unchanged?\r\n\r\nJust have compared the original LICENSE.vm with the modified LICENSE.vm (with Hadoop and other components removed).  The generated LICENSE files are the same for both cases.\r\n\r\nUpdated the code with LICENSE.vm reverted.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1026447711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1028097409","html_url":"https://github.com/apache/ratis/pull/594#issuecomment-1028097409","issue_url":"https://api.github.com/repos/apache/ratis/issues/594","id":1028097409,"node_id":"IC_kwDOBMxbGc49R4WB","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T16:05:25Z","updated_at":"2022-02-02T16:05:25Z","author_association":"CONTRIBUTOR","body":"@szetszwo I change the name of the API and add the proto code related to netty,  PTAL , thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1028097409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1029912364","html_url":"https://github.com/apache/ratis/pull/594#issuecomment-1029912364","issue_url":"https://api.github.com/repos/apache/ratis/issues/594","id":1029912364,"node_id":"IC_kwDOBMxbGc49Yzcs","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-04T11:42:45Z","updated_at":"2022-02-04T11:42:45Z","author_association":"CONTRIBUTOR","body":"@szetszwo I hava changed the code, PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1029912364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1031127624","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1031127624","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1031127624,"node_id":"IC_kwDOBMxbGc49dcJI","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-07T06:45:19Z","updated_at":"2022-02-07T06:45:19Z","author_association":"CONTRIBUTOR","body":"@szetszwo Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1031127624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1031327544","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1031327544","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1031327544,"node_id":"IC_kwDOBMxbGc49eM84","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-07T10:46:51Z","updated_at":"2022-02-07T10:46:51Z","author_association":"CONTRIBUTOR","body":"@szetszwo  modified. I removed `streams.remove ()` from `readImpl`, Please take a look","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1031327544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1032169663","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1032169663","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1032169663,"node_id":"IC_kwDOBMxbGc49hai_","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-08T03:15:14Z","updated_at":"2022-02-08T03:19:55Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , there are some NPEs in https://github.com/apache/ratis/runs/5103000516?check_suite_focus=true .  Please take a look.  We may have to update the tests?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1032169663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1033376346","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1033376346","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1033376346,"node_id":"IC_kwDOBMxbGc49mBJa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-09T05:49:05Z","updated_at":"2022-02-09T05:49:05Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , from the debug message you added, it is a Mock for RaftServer.  It also showed \"DataStream null\". that We probably need to update the test.\r\n```\r\n2022-02-09 13:43:51,230 [Time-limited test] INFO  datastream.DataStreamTestUtils \r\n(DataStreamTestUtils.java:writeAndCloseAndAssertReplies(315)) - \r\ntest header: RaftClientRequest:client-992CD7CB0548->s0@group-9E34F31FA0DB, cid=0, seq=0, \r\nDataStream, null, \r\nserver: Mock for RaftServer, hashCode: 1696083569, bytesWritten: 7452308, stepDownLeader: false\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1033376346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1033752081","html_url":"https://github.com/apache/ratis/pull/597#issuecomment-1033752081","issue_url":"https://api.github.com/repos/apache/ratis/issues/597","id":1033752081,"node_id":"IC_kwDOBMxbGc49nc4R","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-09T13:18:24Z","updated_at":"2022-02-09T13:18:24Z","author_association":"CONTRIBUTOR","body":"The ci test error has nothing to do with this code change\r\n```\r\nError:  Tests run: 12, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 43.076 s <<< FAILURE! - in org.apache.ratis.server.simulation.TestLeaderElectionWithSimulatedRpc\r\nError:  testEnforceLeader(org.apache.ratis.server.simulation.TestLeaderElectionWithSimulatedRpc)  Time elapsed: 10.937 s  <<< FAILURE!\r\norg.junit.ComparisonFailure: expected:<s[2]> but was:<s[4]>\r\n\tat org.junit.Assert.assertEquals(Assert.java:117)\r\n\tat org.junit.Assert.assertEquals(Assert.java:146)\r\n\tat org.apache.ratis.server.impl.LeaderElectionTests.enforceLeader(LeaderElectionTests.java:249)\r\n\tat org.apache.ratis.server.impl.LeaderElectionTests.testEnforceLeader(LeaderElectionTests.java:235)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:[498](https://github.com/apache/ratis/runs/5125324814?check_suite_focus=true#step:5:498))\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:299)\r\n\tat org.junit.internal.runners.statements.FailOnTimeout$CallableStatement.call(FailOnTimeout.java:293)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1033752081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1034550231","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1034550231","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1034550231,"node_id":"IC_kwDOBMxbGc49qfvX","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-10T06:40:22Z","updated_at":"2022-02-10T06:49:55Z","author_association":"CONTRIBUTOR","body":"@szetszwo \r\n\r\nin `org.apache.ratis.datastream.DataStreamTestUtils#assertHeader`  `stateMachine.getSingleDataStream`  in null, I found that it will be added at `stateMachine.stream`, I wonder why not get it.\r\n\r\n\r\nCan you help me find it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1034550231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1034885140","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1034885140","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1034885140,"node_id":"IC_kwDOBMxbGc49rxgU","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-10T12:50:44Z","updated_at":"2022-02-10T12:50:44Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , It seems the server behavior was changed.  The primary did not forward the request to the next server as shown below that s1 returns null; see https://issues.apache.org/jira/secure/attachment/13039878/596_debug.patch\r\n```\r\n2022-02-10 20:37:26,654 [Time-limited test] INFO  datastream.DataStreamTestUtils (DataStreamTestUtils.java:writeAndCloseAndAssertReplies(314))\r\n - start Stream0\r\n2022-02-10 20:37:26,683 [nioEventLoopGroup-3-1] INFO  statemachine.StateMachine (DataStreamTestUtils.java:stream(151))\r\n - XXX MultiDataStreamStateMachine:s0:group-56A12F14DED8 put 0@client-E43970695D43, SingleDataStream:\r\n writeRequest=RaftClientRequest:client-E43970695D43->s0@group-56A12F14DED8, cid=0, seq=0, DataStream, Message:<EMPTY>, logEntry=null\r\n2022-02-10 20:37:26,736 [Time-limited test] INFO  datastream.DataStreamTestUtils (DataStreamTestUtils.java:assertHeader(331))\r\n - XXX s0: dataSize=7478599, stepDownLeader=false, header=RaftClientRequest:client-E43970695D43->s0@group-56A12F14DED8, cid=0, seq=0, DataStream, null\r\n2022-02-10 20:37:26,736 [Time-limited test] INFO  statemachine.StateMachine (DataStreamTestUtils.java:getSingleDataStream(181))\r\n - XXX MultiDataStreamStateMachine:s0:group-56A12F14DED8: get 0@client-E43970695D43 return SingleDataStream:\r\n writeRequest=RaftClientRequest:client-E43970695D43->s0@group-56A12F14DED8, cid=0, seq=0, DataStream, Message:<EMPTY>, logEntry=null\r\n2022-02-10 20:37:26,737 [Time-limited test] INFO  datastream.DataStreamTestUtils (DataStreamTestUtils.java:assertHeader(331))\r\n - XXX s1: dataSize=7478599, stepDownLeader=false, header=RaftClientRequest:client-E43970695D43->s0@group-56A12F14DED8, cid=0, seq=0, DataStream, null\r\n2022-02-10 20:37:26,737 [Time-limited test] INFO  statemachine.StateMachine (DataStreamTestUtils.java:getSingleDataStream(181))\r\n - XXX MultiDataStreamStateMachine:s1:group-56A12F14DED8: get 0@client-E43970695D43 return null\r\n```\r\nPlease check if the new behavior is correct.  If yes, we can update the test.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1034885140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1035993498","html_url":"https://github.com/apache/ratis/pull/597#issuecomment-1035993498","issue_url":"https://api.github.com/repos/apache/ratis/issues/597","id":1035993498,"node_id":"IC_kwDOBMxbGc49wAGa","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-11T08:55:33Z","updated_at":"2022-02-11T08:55:33Z","author_association":"CONTRIBUTOR","body":"@szetszwo PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1035993498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1036211093","html_url":"https://github.com/apache/ratis/pull/598#issuecomment-1036211093","issue_url":"https://api.github.com/repos/apache/ratis/issues/598","id":1036211093,"node_id":"IC_kwDOBMxbGc49w1OV","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-11T13:25:21Z","updated_at":"2022-02-11T13:25:21Z","author_association":"CONTRIBUTOR","body":"This pr is based on https://github.com/apache/ratis/pull/409 . Current, it has implemented the code related to leader election. I will continue to add the code related to transport log on it. My idea is that we can temporarily let the leader send logs to all listeners, and then we can consider iterative optimization, using followers or other listeners to pass logs.\r\n\r\nFor the log, I think the leader only needs to send all the committed logs to the listener, so that the log in the listner does not need to be truncate. In addition, I think the listener only needs to receive the log, and does not need to apply to the state machine.\r\n\r\nCan you give some suggestions for the above ideas, thank you @szetszwo ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1036211093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1037982892","html_url":"https://github.com/apache/ratis/pull/598#issuecomment-1037982892","issue_url":"https://api.github.com/repos/apache/ratis/issues/598","id":1037982892,"node_id":"IC_kwDOBMxbGc493lys","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-13T10:07:23Z","updated_at":"2022-02-13T10:07:23Z","author_association":"CONTRIBUTOR","body":"@codings-dan , thanks for working on this.  The change is quite big.  Let's separate it into two or more JIRAs.\r\n\r\nThe first one could be changing RaftConfiguration and the related classes to support Listener.  This probably is the most important change.  We should think the API and data structure change in details.  It seems to me that we should not change RaftGroup at all since RaftGroup should not care about the roles of the peers.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1037982892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038677375","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1038677375","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1038677375,"node_id":"IC_kwDOBMxbGc496PV_","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-14T06:01:50Z","updated_at":"2022-02-14T06:01:50Z","author_association":"CONTRIBUTOR","body":"@szetszwo  What do you think of this change?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038677375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038751298","html_url":"https://github.com/apache/ratis/pull/600#issuecomment-1038751298","issue_url":"https://api.github.com/repos/apache/ratis/issues/600","id":1038751298,"node_id":"IC_kwDOBMxbGc496hZC","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-14T07:36:27Z","updated_at":"2022-02-14T07:36:27Z","author_association":"CONTRIBUTOR","body":"@szetszwo What do you think of this change?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038751298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038874606","html_url":"https://github.com/apache/ratis/pull/597#issuecomment-1038874606","issue_url":"https://api.github.com/repos/apache/ratis/issues/597","id":1038874606,"node_id":"IC_kwDOBMxbGc496_fu","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-14T09:49:10Z","updated_at":"2022-02-14T09:49:10Z","author_association":"CONTRIBUTOR","body":"@szetszwo Thanks for reviewing code, I have changed it according to the comment you left, PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038874606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038921724","html_url":"https://github.com/apache/ratis/pull/600#issuecomment-1038921724","issue_url":"https://api.github.com/repos/apache/ratis/issues/600","id":1038921724,"node_id":"IC_kwDOBMxbGc497K_8","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-14T10:34:08Z","updated_at":"2022-02-14T10:34:08Z","author_association":"CONTRIBUTOR","body":"@szetszwo Yes, I don't have specific test data yet, I run it in my internal version for a while, and update later","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1038921724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1039918903","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1039918903","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1039918903,"node_id":"IC_kwDOBMxbGc49--c3","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T06:53:28Z","updated_at":"2022-02-15T06:53:28Z","author_association":"CONTRIBUTOR","body":"@szetszwo Has been modified, Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1039918903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1039969825","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1039969825","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1039969825,"node_id":"IC_kwDOBMxbGc49_K4h","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T07:59:20Z","updated_at":"2022-02-15T07:59:20Z","author_association":"CONTRIBUTOR","body":"@szetszwo What do you think of this change?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1039969825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040003570","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1040003570","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1040003570,"node_id":"IC_kwDOBMxbGc49_THy","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T08:40:29Z","updated_at":"2022-02-15T08:40:29Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , one of the tests failed with TimeoutIOException: Timeout 3000ms; see https://github.com/apache/ratis/runs/5194575007?check_suite_focus=true#step:5:543\r\n\r\nCould you fix it first?\r\n```\r\nError:  Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 94.996 s <<< FAILURE! - in org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster\r\nError:  testMultipleStreamsMultipleServersStepDownLeader(org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster)  Time elapsed: 5.388 s  <<< ERROR!\r\njava.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException:\r\n Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-DC7E0CEB7606,type=STREAM_DATA,id=368,offset=7387696,length=0\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040003570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040022460","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1040022460","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1040022460,"node_id":"IC_kwDOBMxbGc49_Xu8","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T09:02:23Z","updated_at":"2022-02-15T09:07:58Z","author_association":"CONTRIBUTOR","body":"@szetszwo I want to discuss a question about ozone BCSID.\r\n\r\nDoes BCSID still make sense when you use stream to transfer data and put A Block into the stream process? Because raft transport is deprecated, playback of raft log is eliminated.\r\n\r\nI can open a JIRA in Ozone and discuss this","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040022460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040100001","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1040100001","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1040100001,"node_id":"IC_kwDOBMxbGc49_qqh","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-15T10:22:11Z","updated_at":"2022-02-15T10:22:11Z","author_association":"CONTRIBUTOR","body":"> @guohao-rosicky , one of the tests failed with TimeoutIOException: Timeout 3000ms; see https://github.com/apache/ratis/runs/5194575007?check_suite_focus=true#step:5:543\r\n> \r\n> Could you fix it first?\r\n> \r\n> ```\r\n> Error:  Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 94.996 s <<< FAILURE! - in org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster\r\n> Error:  testMultipleStreamsMultipleServersStepDownLeader(org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster)  Time elapsed: 5.388 s  <<< ERROR!\r\n> java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException:\r\n>  Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-DC7E0CEB7606,type=STREAM_DATA,id=368,offset=7387696,length=0\r\n> ```\r\n\r\nI've been trying to fix Timeout for good, but I haven't done it yet","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1040100001/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041025620","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1041025620","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1041025620,"node_id":"IC_kwDOBMxbGc4-DMpU","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T02:21:59Z","updated_at":"2022-02-16T02:21:59Z","author_association":"CONTRIBUTOR","body":"@szetszwo I apply the patch, I still have an NPE, I'll keep tracking the issues","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041025620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041103968","html_url":"https://github.com/apache/ratis/pull/596#issuecomment-1041103968","issue_url":"https://api.github.com/repos/apache/ratis/issues/596","id":1041103968,"node_id":"IC_kwDOBMxbGc4-Dfxg","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T04:49:28Z","updated_at":"2022-02-16T04:49:28Z","author_association":"CONTRIBUTOR","body":"> ...  I apply the patch, I still have an NPE,  ...\r\n\r\n@guohao-rosicky , Do you mean https://issues.apache.org/jira/secure/attachment/13039878/596_debug.patch ?  It just prints out some dubug messages.  Please check if the new behavior is correct. If yes, we can update the test in order to avoid the NPE.\r\n","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041103968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041143334","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1041143334","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1041143334,"node_id":"IC_kwDOBMxbGc4-DpYm","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T06:09:17Z","updated_at":"2022-02-16T06:09:17Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , without BCSID and the Ratis log, the current Ozone design won't work for recovery.  Why we need Ratis (or Raft) in Ozone?  It is because Ratis provides a consistent view of the data among the servers.  Without Ratis, the data in the servers may diverge.  How could you tell which one to trust?  And how to do data recovery?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041143334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041315492","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1041315492","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1041315492,"node_id":"IC_kwDOBMxbGc4-ETak","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T10:01:56Z","updated_at":"2022-02-16T10:01:56Z","author_association":"CONTRIBUTOR","body":"Thank you @szetszwo , I have understood BCSID.\r\n\r\nIn one of my test versions of ozone, I generated raft logs by sending raft async RPC through DataStreamManagement#startTransaction to get the BCSID with the raft log index of ozone, Throughput is very small because raft needs to sort.\r\n\r\nIn another version of my test, if DataStreamManagement#startTransaction throughput was doubled by skipping it, could we get a BCSID in another way than raft log?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041315492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041407676","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1041407676","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1041407676,"node_id":"IC_kwDOBMxbGc4-Ep68","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T11:49:50Z","updated_at":"2022-02-16T11:49:50Z","author_association":"CONTRIBUTOR","body":"> ... could we get a BCSID in another way than raft log?\r\n\r\nWe need a BCSID and also the ability to commit transactions.  I guess there are no easy ways.  Otherwise, we can use it to replace the Raft Consensus Algorithm in general.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041407676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041469879","html_url":"https://github.com/apache/ratis/pull/602#issuecomment-1041469879","issue_url":"https://api.github.com/repos/apache/ratis/issues/602","id":1041469879,"node_id":"IC_kwDOBMxbGc4-E5G3","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T13:03:12Z","updated_at":"2022-02-16T13:03:12Z","author_association":"CONTRIBUTOR","body":"@szetszwo PTAL again, thx!","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041469879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041561733","html_url":"https://github.com/apache/ratis/pull/602#issuecomment-1041561733","issue_url":"https://api.github.com/repos/apache/ratis/issues/602","id":1041561733,"node_id":"IC_kwDOBMxbGc4-FPiF","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-16T14:41:14Z","updated_at":"2022-02-16T14:41:14Z","author_association":"CONTRIBUTOR","body":"@codings-dan , could you also remove `RaftServerImpl.setLeaderElectionPause`.  It is never used.\r\n```\r\n@@ -1448,11 +1452,6 @@ class RaftServerImpl implements RaftServer.Division,\r\n     return reply;\r\n   }\r\n \r\n-  void setLeaderElectionPause(boolean pause) throws ServerNotReadyException {\r\n-    assertLifeCycleState(LifeCycle.States.RUNNING);\r\n-    role.setLeaderElectionPause(pause);\r\n-  }\r\n-\r\n   boolean pause() {\r\n     // TODO: should pause() be limited on only working for a follower?\r\n```","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1041561733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042521209","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042521209","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042521209,"node_id":"IC_kwDOBMxbGc4-I5x5","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T03:03:38Z","updated_at":"2022-02-17T03:08:48Z","author_association":"CONTRIBUTOR","body":"> > ... could we get a BCSID in another way than raft log?\r\n> \r\n> We need a BCSID and also the ability to commit transactions. I guess there are no easy ways. Otherwise, we can use it to replace the Raft Consensus Algorithm in general.\r\n\r\n```\r\npackage org.apache.ratis.io;\r\n\r\npublic enum StandardWriteOption implements WriteOption {\r\n  /** Sync the data to the underlying storage. */\r\n  SYNC,\r\n  /** Close the data to the underlying storage. */\r\n  CLOSE,\r\n\r\n  /** Returns a unique ID **/\r\n  UNIQUE_ID,\r\n  \r\n}\r\n```\r\n@szetszwo \r\nCan we add a new WriteOption? When the primary node receives this request, it generates a unique ID of type long, synchronizes it to the other nodes, and returns it to the client\r\n\r\n\r\nIn other words, generating an ID on the Primary node and passing it to the other nodes as a stream can improve throughput without raft requests internally.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042521209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042537242","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042537242","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042537242,"node_id":"IC_kwDOBMxbGc4-I9sa","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T03:28:13Z","updated_at":"2022-02-17T03:28:13Z","author_association":"CONTRIBUTOR","body":"> ..., generating an ID on the Primary node ...\r\n\r\nHow to make sure the ID is unique?  All the nodes could be the Primary node at some point of time.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042537242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042543901","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042543901","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042543901,"node_id":"IC_kwDOBMxbGc4-I_Ud","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T03:43:59Z","updated_at":"2022-02-17T03:44:25Z","author_association":"CONTRIBUTOR","body":"I can open a JIRA in Ratis and discuss this @szetszwo @captainzmc \r\n\r\nhttps://issues.apache.org/jira/browse/RATIS-1513","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042543901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042547408","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042547408","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042547408,"node_id":"IC_kwDOBMxbGc4-JALQ","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T03:52:53Z","updated_at":"2022-02-17T03:52:53Z","author_association":"CONTRIBUTOR","body":"> https://issues.apache.org/jira/browse/RATIS-1513\r\n\r\n@guohao-rosicky, @captainzmc, I really hope that we could fix \"TimeoutIOException: Timeout 3000ms\".  How about we fix it first?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042547408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042585613","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042585613","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042585613,"node_id":"IC_kwDOBMxbGc4-JJgN","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T05:19:22Z","updated_at":"2022-02-17T05:25:37Z","author_association":"CONTRIBUTOR","body":"> > https://issues.apache.org/jira/browse/RATIS-1513\r\n> \r\n> @guohao-rosicky, @captainzmc, I really hope that we could fix \"TimeoutIOException: Timeout 3000ms\". How about we fix it first?\r\n\r\nWe changed this configuration to fix this problem because DataStreamManagement#startTransaction was taking too long.\r\n\r\n\r\nWe have a test report showing that DataStreamManagement#startTransaction caused \"TimeoutIOException: Timeout 3000ms\".\r\n\r\n@szetszwo I was hoping you could help us come up with a solution.  \r\nThe solution I can think of so far is to skip DataStreamManagement#startTransaction that triggers the timeout","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042585613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042604015","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042604015","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042604015,"node_id":"IC_kwDOBMxbGc4-JN_v","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T06:02:32Z","updated_at":"2022-02-17T06:02:32Z","author_association":"CONTRIBUTOR","body":"@szetszwo https://docs.google.com/document/d/1mS3GqovQ3D1b7V0L3--VF9xhl5jdId1mSL0cQNb7uHo/edit\r\n\r\nThis is the process of testing reports and locating problems","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042604015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042625657","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1042625657","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1042625657,"node_id":"IC_kwDOBMxbGc4-JTR5","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T06:45:49Z","updated_at":"2022-02-17T06:45:49Z","author_association":"CONTRIBUTOR","body":"@szetszwo \r\n\r\n> @guohao-rosicky , one of the tests failed with TimeoutIOException: Timeout 3000ms; see https://github.com/apache/ratis/runs/5194575007?check_suite_focus=true#step:5:543\r\n> \r\n> Could you fix it first?\r\n> \r\n> ```\r\n> Error:  Tests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 94.996 s <<< FAILURE! - in org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster\r\n> Error:  testMultipleStreamsMultipleServersStepDownLeader(org.apache.ratis.datastream.TestNettyDataStreamStarTopologyWithGrpcCluster)  Time elapsed: 5.388 s  <<< ERROR!\r\n> java.util.concurrent.CompletionException: org.apache.ratis.protocol.exceptions.TimeoutIOException:\r\n>  Timeout 3000ms: Failed to send DataStreamWindowRequest:seqNum=12,DataStreamRequestHeader:clientId=client-DC7E0CEB7606,type=STREAM_DATA,id=368,offset=7387696,length=0\r\n> ```\r\n\r\nThis has nothing to do with this PR, can we merge this PR first? I'm going to keep tracking the timeout problem","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042625657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042629666","html_url":"https://github.com/apache/ratis/pull/599#issuecomment-1042629666","issue_url":"https://api.github.com/repos/apache/ratis/issues/599","id":1042629666,"node_id":"IC_kwDOBMxbGc4-JUQi","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T06:54:01Z","updated_at":"2022-02-17T06:54:01Z","author_association":"CONTRIBUTOR","body":"@guohao-rosicky , let's re-run the jobs and try to get a successful build.","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042629666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042634240","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042634240","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042634240,"node_id":"IC_kwDOBMxbGc4-JVYA","user":{"login":"szetszwo","id":907380,"node_id":"MDQ6VXNlcjkwNzM4MA==","avatar_url":"https://avatars.githubusercontent.com/u/907380?v=4","gravatar_id":"","url":"https://api.github.com/users/szetszwo","html_url":"https://github.com/szetszwo","followers_url":"https://api.github.com/users/szetszwo/followers","following_url":"https://api.github.com/users/szetszwo/following{/other_user}","gists_url":"https://api.github.com/users/szetszwo/gists{/gist_id}","starred_url":"https://api.github.com/users/szetszwo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szetszwo/subscriptions","organizations_url":"https://api.github.com/users/szetszwo/orgs","repos_url":"https://api.github.com/users/szetszwo/repos","events_url":"https://api.github.com/users/szetszwo/events{/privacy}","received_events_url":"https://api.github.com/users/szetszwo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T07:02:44Z","updated_at":"2022-02-17T07:02:44Z","author_association":"CONTRIBUTOR","body":"> We changed this configuration to fix this problem because DataStreamManagement#startTransaction was taking too long.\r\n\r\nThis is not really a fix since it changes the functionality.\r\n\r\n```\r\ncommit f349fdf2488e254d0fa2eeb17bbaf44de2b0932d\r\nAuthor: hao guo <guohao1@360.cn>\r\nDate:   Wed Dec 15 10:29:13 2021 +0800\r\n\r\n    RATIS-1438. Add request timeout to ratis Streaming (#563)\r\n```\r\n\"TimeoutIOException: Timeout 3000ms\" probably started happening after RATIS-1438.  How about we increase the timeout value, say to 10 seconds?","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042634240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042653639","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042653639","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042653639,"node_id":"IC_kwDOBMxbGc4-JaHH","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T07:34:50Z","updated_at":"2022-02-17T07:34:50Z","author_association":"CONTRIBUTOR","body":"> > We changed this configuration to fix this problem because DataStreamManagement#startTransaction was taking too long.\r\n> \r\n> This is not really a fix since it changes the functionality.\r\n> \r\n> ```\r\n> commit f349fdf2488e254d0fa2eeb17bbaf44de2b0932d\r\n> Author: hao guo <guohao1@360.cn>\r\n> Date:   Wed Dec 15 10:29:13 2021 +0800\r\n> \r\n>     RATIS-1438. Add request timeout to ratis Streaming (#563)\r\n> ```\r\n> \r\n> \"TimeoutIOException: Timeout 3000ms\" probably started happening after RATIS-1438. How about we increase the timeout value, say to 10 seconds?\r\n\r\n\r\n\r\n> DataStreamManagement#startTransaction\r\n\r\nIt can be changed to 10 seconds and I will submit a new PR for this","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042653639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042656987","html_url":"https://github.com/apache/ratis/pull/601#issuecomment-1042656987","issue_url":"https://api.github.com/repos/apache/ratis/issues/601","id":1042656987,"node_id":"IC_kwDOBMxbGc4-Ja7b","user":{"login":"guohao-rosicky","id":5122636,"node_id":"MDQ6VXNlcjUxMjI2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/5122636?v=4","gravatar_id":"","url":"https://api.github.com/users/guohao-rosicky","html_url":"https://github.com/guohao-rosicky","followers_url":"https://api.github.com/users/guohao-rosicky/followers","following_url":"https://api.github.com/users/guohao-rosicky/following{/other_user}","gists_url":"https://api.github.com/users/guohao-rosicky/gists{/gist_id}","starred_url":"https://api.github.com/users/guohao-rosicky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guohao-rosicky/subscriptions","organizations_url":"https://api.github.com/users/guohao-rosicky/orgs","repos_url":"https://api.github.com/users/guohao-rosicky/repos","events_url":"https://api.github.com/users/guohao-rosicky/events{/privacy}","received_events_url":"https://api.github.com/users/guohao-rosicky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T07:40:17Z","updated_at":"2022-02-17T07:41:43Z","author_association":"CONTRIBUTOR","body":"@szetszwo \r\nThis is the process of testing reports and locating problems\r\nhttps://docs.google.com/document/d/1mS3GqovQ3D1b7V0L3--VF9xhl5jdId1mSL0cQNb7uHo/edit\r\n\r\nCan you take a look at our test report and consider further optimizing the performance of ratis stream over ozone based on the problems identified in the test report.\r\n\r\nDiscuss how to optimize the scheme. \r\n\r\n@captainzmc  and I can participate in the development of optimization","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042656987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042904221","html_url":"https://github.com/apache/ratis/pull/598#issuecomment-1042904221","issue_url":"https://api.github.com/repos/apache/ratis/issues/598","id":1042904221,"node_id":"IC_kwDOBMxbGc4-KXSd","user":{"login":"codings-dan","id":26144703,"node_id":"MDQ6VXNlcjI2MTQ0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/26144703?v=4","gravatar_id":"","url":"https://api.github.com/users/codings-dan","html_url":"https://github.com/codings-dan","followers_url":"https://api.github.com/users/codings-dan/followers","following_url":"https://api.github.com/users/codings-dan/following{/other_user}","gists_url":"https://api.github.com/users/codings-dan/gists{/gist_id}","starred_url":"https://api.github.com/users/codings-dan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codings-dan/subscriptions","organizations_url":"https://api.github.com/users/codings-dan/orgs","repos_url":"https://api.github.com/users/codings-dan/repos","events_url":"https://api.github.com/users/codings-dan/events{/privacy}","received_events_url":"https://api.github.com/users/codings-dan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-17T12:34:26Z","updated_at":"2022-02-17T12:34:26Z","author_association":"CONTRIBUTOR","body":"@szetszwo I change the code related to RaftConfiguration and RaftSeverImpl based on the logic that does not affect the original code. I added some listener related code according to the follower. Can you help review it, thx! ","reactions":{"url":"https://api.github.com/repos/apache/ratis/issues/comments/1042904221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]