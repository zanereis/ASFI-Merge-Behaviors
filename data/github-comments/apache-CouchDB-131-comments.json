[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260414110","html_url":"https://github.com/apache/couchdb/issues/5044#issuecomment-2260414110","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5044","id":2260414110,"node_id":"IC_kwDOAAMmUc6Guy6e","user":{"login":"tiju86","id":55751429,"node_id":"MDQ6VXNlcjU1NzUxNDI5","avatar_url":"https://avatars.githubusercontent.com/u/55751429?v=4","gravatar_id":"","url":"https://api.github.com/users/tiju86","html_url":"https://github.com/tiju86","followers_url":"https://api.github.com/users/tiju86/followers","following_url":"https://api.github.com/users/tiju86/following{/other_user}","gists_url":"https://api.github.com/users/tiju86/gists{/gist_id}","starred_url":"https://api.github.com/users/tiju86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiju86/subscriptions","organizations_url":"https://api.github.com/users/tiju86/orgs","repos_url":"https://api.github.com/users/tiju86/repos","events_url":"https://api.github.com/users/tiju86/events{/privacy}","received_events_url":"https://api.github.com/users/tiju86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T12:31:45Z","updated_at":"2024-07-31T12:31:45Z","author_association":"NONE","body":"I checked the management of attachments and they are retrieved in batches and not one by one.\r\non our side couchdb is slow for all requests (even to display the list of databases), after restarting the service everything is ok\r\n\r\nhow can we see our version of erlang?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260414110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260436979","html_url":"https://github.com/apache/couchdb/issues/5044#issuecomment-2260436979","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5044","id":2260436979,"node_id":"IC_kwDOAAMmUc6Gu4fz","user":{"login":"luca-simonetti","id":44196863,"node_id":"MDQ6VXNlcjQ0MTk2ODYz","avatar_url":"https://avatars.githubusercontent.com/u/44196863?v=4","gravatar_id":"","url":"https://api.github.com/users/luca-simonetti","html_url":"https://github.com/luca-simonetti","followers_url":"https://api.github.com/users/luca-simonetti/followers","following_url":"https://api.github.com/users/luca-simonetti/following{/other_user}","gists_url":"https://api.github.com/users/luca-simonetti/gists{/gist_id}","starred_url":"https://api.github.com/users/luca-simonetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luca-simonetti/subscriptions","organizations_url":"https://api.github.com/users/luca-simonetti/orgs","repos_url":"https://api.github.com/users/luca-simonetti/repos","events_url":"https://api.github.com/users/luca-simonetti/events{/privacy}","received_events_url":"https://api.github.com/users/luca-simonetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T12:44:03Z","updated_at":"2024-07-31T12:44:03Z","author_association":"NONE","body":"visit this `/_node/_local/_versions` after you login on Fauxton","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260436979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260461847","html_url":"https://github.com/apache/couchdb/issues/5044#issuecomment-2260461847","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5044","id":2260461847,"node_id":"IC_kwDOAAMmUc6Gu-kX","user":{"login":"tiju86","id":55751429,"node_id":"MDQ6VXNlcjU1NzUxNDI5","avatar_url":"https://avatars.githubusercontent.com/u/55751429?v=4","gravatar_id":"","url":"https://api.github.com/users/tiju86","html_url":"https://github.com/tiju86","followers_url":"https://api.github.com/users/tiju86/followers","following_url":"https://api.github.com/users/tiju86/following{/other_user}","gists_url":"https://api.github.com/users/tiju86/gists{/gist_id}","starred_url":"https://api.github.com/users/tiju86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiju86/subscriptions","organizations_url":"https://api.github.com/users/tiju86/orgs","repos_url":"https://api.github.com/users/tiju86/repos","events_url":"https://api.github.com/users/tiju86/events{/privacy}","received_events_url":"https://api.github.com/users/tiju86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T12:56:26Z","updated_at":"2024-07-31T12:56:26Z","author_association":"NONE","body":"thanks, so we have the version 24.3.4.14\r\n\r\n```\r\n{\r\n  \"javascript_engine\": {\r\n    \"version\": \"78\",\r\n    \"name\": \"spidermonkey\"\r\n  },\r\n  \"erlang\": {\r\n    \"version\": \"24.3.4.14\",\r\n    \"supported_hashes\": [\r\n      \"sha\",\r\n      \"sha224\",\r\n      \"sha256\",\r\n      \"sha384\",\r\n      \"sha512\",\r\n      \"sha3_224\",\r\n      \"sha3_256\",\r\n      \"sha3_384\",\r\n      \"sha3_512\",\r\n      \"blake2b\",\r\n      \"blake2s\",\r\n      \"md4\",\r\n      \"md5\",\r\n      \"ripemd160\"\r\n    ]\r\n  },\r\n  \"collation_driver\": {\r\n    \"name\": \"libicu\",\r\n    \"library_version\": \"67.1\",\r\n    \"collator_version\": \"153.104\",\r\n    \"collation_algorithm_version\": \"13\"\r\n  }\r\n}\r\n```\r\n\r\nthe os is DEBIAN, the detail of package :\r\n\r\n```\r\n dpkg -s couchdb\r\nPackage: couchdb\r\nStatus: install ok installed\r\nPriority: optional\r\nSection: misc\r\nInstalled-Size: 52954\r\nMaintainer: CouchDB Developers <dev@couchdb.apache.org>\r\nArchitecture: amd64\r\nVersion: 3.3.3~bullseye\r\nReplaces: couchdb-bin, couchdb-common\r\nDepends: adduser, curl, debconf, init-system-helpers, libmozjs-78-0 (>= 78.4.0), lsb-base, procps, debconf (>= 0.5) | debconf-2.0, libc6 (>= 2.29), libgcc-s1 (>= 3.4), libicu67 (>= 67.1-1~), libssl1.1 (>= 1.1.1), libstdc++6 (>= 9), libtinfo6 (>= 6)\r\nBreaks: couchdb-bin, couchdb-common\r\nConffiles:\r\n /opt/couchdb/etc/local.ini 5fd760551ab5f2f448107a253b0a7cfd\r\n /opt/couchdb/etc/vm.args c6e59e9c95f3323136267d8fc44fe0ac\r\n /etc/couchdb/NO_LONGER_USED_MOVED_TO_opt_couchdb_etc d41d8cd98f00b204e9800998ecf8427e\r\n /etc/default/couchdb cbed9de0f2dfa9ebd8dfa5f0d6c92ed1\r\n /etc/init.d/couchdb 00879038de10ac9d49cc5cd73e603355\r\n /etc/logrotate.d/couchdb 7387f7c2b461031ec9f1858326e485ec\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260461847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260496105","html_url":"https://github.com/apache/couchdb/issues/5044#issuecomment-2260496105","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5044","id":2260496105,"node_id":"IC_kwDOAAMmUc6GvG7p","user":{"login":"tiju86","id":55751429,"node_id":"MDQ6VXNlcjU1NzUxNDI5","avatar_url":"https://avatars.githubusercontent.com/u/55751429?v=4","gravatar_id":"","url":"https://api.github.com/users/tiju86","html_url":"https://github.com/tiju86","followers_url":"https://api.github.com/users/tiju86/followers","following_url":"https://api.github.com/users/tiju86/following{/other_user}","gists_url":"https://api.github.com/users/tiju86/gists{/gist_id}","starred_url":"https://api.github.com/users/tiju86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiju86/subscriptions","organizations_url":"https://api.github.com/users/tiju86/orgs","repos_url":"https://api.github.com/users/tiju86/repos","events_url":"https://api.github.com/users/tiju86/events{/privacy}","received_events_url":"https://api.github.com/users/tiju86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T13:13:12Z","updated_at":"2024-07-31T13:13:50Z","author_association":"NONE","body":"i see there are two new versions of packages 3.3.3-1 and 3.3.3-2\r\nhow to know if there is an erlang update in it?\r\n```\r\n\r\ncouchdb:\r\n  Installé : 3.3.3~bullseye\r\n  Candidat : 3.3.3~bullseye\r\n Table de version :\r\n     3.3.3-2~bullseye 990\r\n        990 https://apache.jfrog.io/artifactory/couchdb-deb bullseye/main amd64 Packages\r\n     3.3.3-1~bullseye 990\r\n        990 https://apache.jfrog.io/artifactory/couchdb-deb bullseye/main amd64 Packages\r\n *** 3.3.3~bullseye 1200\r\n        990 https://apache.jfrog.io/artifactory/couchdb-deb bullseye/main amd64 Packages\r\n        100 /var/lib/dpkg/status\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260496105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260919658","html_url":"https://github.com/apache/couchdb/pull/5157#issuecomment-2260919658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5157","id":2260919658,"node_id":"IC_kwDOAAMmUc6GwuVq","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-31T16:31:41Z","updated_at":"2024-07-31T16:31:41Z","author_association":"CONTRIBUTOR","body":"Looks good :-)\r\n\r\n```\r\nPS C:\\...\\couchdb-otp25> .\\rel\\couchdb\\nouveau\\bin\\nouveau.bat server .\\rel\\couchdb\\etc\\nouveau.yaml\r\nINFO  [2024-07-31 16:29:17,526] io.dropwizard.core.server.DefaultServerFactory: Registering jersey handler with root path prefix: /\r\nINFO  [2024-07-31 16:29:17,532] io.dropwizard.core.server.DefaultServerFactory: Registering admin handler with root path prefix: /\r\nINFO  [2024-07-31 16:29:17,761] io.dropwizard.core.server.ServerFactory: Starting Nouveau\r\n      .-.\r\n        /  |\r\n       /\\  | .-._.)  (  )   .-..-.  .-.  )  (\r\n      /  \\ |(   )(    )(   / ./.-'_(  | (    )\r\n .-' /    \\| `-'  `--': \\_/  (__.'  `-'-'`--':\r\n(__.'      `.\r\n\r\nINFO  [2024-07-31 16:29:18,016] org.eclipse.jetty.setuid.SetUIDListener: Opened application@240f6c41{HTTP/1.1, (http/1.1)}{127.0.0.1:5987}\r\nINFO  [2024-07-31 16:29:18,016] org.eclipse.jetty.setuid.SetUIDListener: Opened admin@3659d7b1{HTTP/1.1, (http/1.1)}{127.0.0.1:5988}\r\nINFO  [2024-07-31 16:29:18,022] org.eclipse.jetty.server.Server: jetty-11.0.20; built: 2024-01-29T21:04:22.394Z; git: 922f8dc188f7011e60d0361de585fd4ac4d63064; jvm 20.0.2+9\r\n\r\nINFO  [2024-07-31 16:29:18,926] io.dropwizard.jersey.DropwizardResourceConfig: The following paths were found for the configured resources:\r\n\r\n    POST    /analyze (org.apache.couchdb.nouveau.resources.AnalyzeResource)\r\n    DELETE  /index/{name} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    GET     /index/{name} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    POST    /index/{name} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    PUT     /index/{name} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    DELETE  /index/{name}/doc/{docId} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    PUT     /index/{name}/doc/{docId} (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    POST    /index/{name}/search (org.apache.couchdb.nouveau.resources.IndexResource)\r\n    GET     /openapi.{type:json|yaml} (io.swagger.v3.jaxrs2.integration.resources.OpenApiResource)\r\n\r\nINFO  [2024-07-31 16:29:18,929] org.eclipse.jetty.server.handler.ContextHandler: Started i.d.j.MutableServletContextHandler@38291795{/,null,AVAILABLE}\r\nINFO  [2024-07-31 16:29:18,934] io.dropwizard.core.setup.AdminEnvironment: tasks =\r\n\r\n    POST    /tasks/log-level (io.dropwizard.servlets.tasks.LogConfigurationTask)\r\n    POST    /tasks/gc (io.dropwizard.servlets.tasks.GarbageCollectionTask)\r\n    POST    /tasks/close-all-indexes (org.apache.couchdb.nouveau.tasks.CloseAllIndexesTask)\r\n\r\nINFO  [2024-07-31 16:29:18,935] org.eclipse.jetty.server.handler.ContextHandler: Started i.d.j.MutableServletContextHandler@180b3819{/,null,AVAILABLE}\r\nINFO  [2024-07-31 16:29:19,013] org.eclipse.jetty.server.AbstractConnector: Started application@240f6c41{HTTP/1.1, (http/1.1)}{127.0.0.1:5987}\r\nINFO  [2024-07-31 16:29:19,024] org.eclipse.jetty.server.AbstractConnector: Started admin@3659d7b1{HTTP/1.1, (http/1.1)}{127.0.0.1:5988}\r\nINFO  [2024-07-31 16:29:19,027] org.eclipse.jetty.server.Server: Started Server@2184b4f4{STARTING}[11.0.20,sto=30000] @14993ms\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2260919658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264709585","html_url":"https://github.com/apache/couchdb/issues/5127#issuecomment-2264709585","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5127","id":2264709585,"node_id":"IC_kwDOAAMmUc6G_LnR","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T07:04:32Z","updated_at":"2024-08-02T07:04:32Z","author_association":"CONTRIBUTOR","body":"So far in production we noticed most of the cases of `exit:timeout` errors generated by `rexi:init_stream` came from quick killing of design doc fetches from ddoc cache. That should be fixed by https://github.com/apache/couchdb/pull/5152. However, the analysis above is also correct that we do not clean up workers on error or timeouts. Except for a few expected error types only:\r\nhttps://github.com/apache/couchdb/blob/a2241d36621e6bee101aad0d1bf19e52de1be3aa/src/fabric/src/fabric_streams.erl#L168-L171\r\n\r\nIn this [PR](https://github.com/apache/couchdb/pull/5160) we improve cleanup and perform cleanup for all stream start errors, including timeouts.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264709585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264801197","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2264801197","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2264801197,"node_id":"IC_kwDOAAMmUc6G_h-t","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T07:59:18Z","updated_at":"2024-08-02T07:59:18Z","author_association":"MEMBER","body":"The rule is we support the current and the last feature release line. So when 3.4 comes out, 3.2 becomes EOL, and so on.\r\n\r\nThis rule is for CouchDB itself. The CVE's in the docker images are for unrelated (and unused) packages afaict, and should be addressed by an image rebuild (this is supposed to be automated...)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264801197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264802827","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2264802827","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2264802827,"node_id":"IC_kwDOAAMmUc6G_iYL","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T08:00:18Z","updated_at":"2024-08-02T08:00:18Z","author_association":"MEMBER","body":"As for release cadence, CouchDB is a mature project with a small dev team. There are not many releases in a year, patch level or feature level, but the project is definitely active. a 3.4 release is coming out soon.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2264802827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265093084","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2265093084","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2265093084,"node_id":"IC_kwDOAAMmUc6HApPc","user":{"login":"mamccorm","id":29855998,"node_id":"MDQ6VXNlcjI5ODU1OTk4","avatar_url":"https://avatars.githubusercontent.com/u/29855998?v=4","gravatar_id":"","url":"https://api.github.com/users/mamccorm","html_url":"https://github.com/mamccorm","followers_url":"https://api.github.com/users/mamccorm/followers","following_url":"https://api.github.com/users/mamccorm/following{/other_user}","gists_url":"https://api.github.com/users/mamccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/mamccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mamccorm/subscriptions","organizations_url":"https://api.github.com/users/mamccorm/orgs","repos_url":"https://api.github.com/users/mamccorm/repos","events_url":"https://api.github.com/users/mamccorm/events{/privacy}","received_events_url":"https://api.github.com/users/mamccorm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T10:43:42Z","updated_at":"2024-08-02T10:43:42Z","author_association":"NONE","body":"Thanks @rnewson, that was helpful and appreciated. Would you be open to accepting a small contribution to update the README?\r\n - https://github.com/apache/couchdb/pull/5161\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265093084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265216675","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2265216675","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2265216675,"node_id":"IC_kwDOAAMmUc6HBHaj","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T12:08:23Z","updated_at":"2024-08-02T12:08:23Z","author_association":"MEMBER","body":"I'm surprised it's not written somewhere. Since its project policy we're defining I'm going to propose my own PR with similar but hopefully clearer text.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265216675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265253268","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2265253268","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2265253268,"node_id":"IC_kwDOAAMmUc6HBQWU","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T12:30:48Z","updated_at":"2024-08-02T12:30:48Z","author_association":"MEMBER","body":"https://github.com/apache/couchdb/pull/5162","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265253268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265417179","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2265417179","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2265417179,"node_id":"IC_kwDOAAMmUc6HB4Xb","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T13:33:31Z","updated_at":"2024-08-02T13:33:31Z","author_association":"MEMBER","body":"@mamccorm we've merged https://github.com/apache/couchdb/pull/5162 in response to this issue. I hope that's helpful.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265417179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265441222","html_url":"https://github.com/apache/couchdb/pull/5161#issuecomment-2265441222","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5161","id":2265441222,"node_id":"IC_kwDOAAMmUc6HB-PG","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T13:46:59Z","updated_at":"2024-08-02T13:46:59Z","author_association":"MEMBER","body":"closing in favour of https://github.com/apache/couchdb/pull/5162","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265441222/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265884543","html_url":"https://github.com/apache/couchdb/pull/5163#issuecomment-2265884543","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5163","id":2265884543,"node_id":"IC_kwDOAAMmUc6HDqd_","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T17:59:14Z","updated_at":"2024-08-02T17:59:14Z","author_association":"CONTRIBUTOR","body":"Perhaps add a reference to the [regression's origin](https://github.com/apache/couchdb/pull/5132) for the curious?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265884543/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265887635","html_url":"https://github.com/apache/couchdb/pull/5163#issuecomment-2265887635","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5163","id":2265887635,"node_id":"IC_kwDOAAMmUc6HDrOT","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T18:01:24Z","updated_at":"2024-08-02T18:01:24Z","author_association":"CONTRIBUTOR","body":"@jaydoane good call, I'll update","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2265887635/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2266236454","html_url":"https://github.com/apache/couchdb/pull/5165#issuecomment-2266236454","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5165","id":2266236454,"node_id":"IC_kwDOAAMmUc6HFAYm","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-02T22:56:05Z","updated_at":"2024-08-02T22:56:05Z","author_association":"CONTRIBUTOR","body":"Draft PR for now, needs some tests","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2266236454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2266929254","html_url":"https://github.com/apache/couchdb/issues/5166#issuecomment-2266929254","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5166","id":2266929254,"node_id":"IC_kwDOAAMmUc6HHphm","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-03T16:18:01Z","updated_at":"2024-08-03T19:14:23Z","author_association":"CONTRIBUTOR","body":"One quick attempt to fix it is to try to keep the iterating tree and `Cache` tree in sync. So as soon as we update the tree, we always restart the iteration. That can be seen in https://github.com/apache/couchdb/pull/5165. One simplification then that can happen there is we don't really need an iterator. We always update it and create a new one, so we really just need the next larger key. However, that approach has a major problem: non-termination. If we keep bumping the entries and restarting the iteration, the close call may just keep going forever.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2266929254/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267111563","html_url":"https://github.com/apache/couchdb/issues/5077#issuecomment-2267111563","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5077","id":2267111563,"node_id":"IC_kwDOAAMmUc6HIWCL","user":{"login":"alleycat58uk","id":3010285,"node_id":"MDQ6VXNlcjMwMTAyODU=","avatar_url":"https://avatars.githubusercontent.com/u/3010285?v=4","gravatar_id":"","url":"https://api.github.com/users/alleycat58uk","html_url":"https://github.com/alleycat58uk","followers_url":"https://api.github.com/users/alleycat58uk/followers","following_url":"https://api.github.com/users/alleycat58uk/following{/other_user}","gists_url":"https://api.github.com/users/alleycat58uk/gists{/gist_id}","starred_url":"https://api.github.com/users/alleycat58uk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alleycat58uk/subscriptions","organizations_url":"https://api.github.com/users/alleycat58uk/orgs","repos_url":"https://api.github.com/users/alleycat58uk/repos","events_url":"https://api.github.com/users/alleycat58uk/events{/privacy}","received_events_url":"https://api.github.com/users/alleycat58uk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-03T19:26:27Z","updated_at":"2024-08-03T19:26:27Z","author_association":"NONE","body":"Is there an ETA for adding a convenience package for Ubuntu 24.04 LTS?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267111563/reactions","total_count":9,"+1":9,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267178171","html_url":"https://github.com/apache/couchdb/pull/5165#issuecomment-2267178171","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5165","id":2267178171,"node_id":"IC_kwDOAAMmUc6HImS7","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-03T22:33:47Z","updated_at":"2024-08-03T22:33:47Z","author_association":"CONTRIBUTOR","body":"Closing the PR for now, this approach won't work, I think.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267178171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267256002","html_url":"https://github.com/apache/couchdb/issues/5159#issuecomment-2267256002","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5159","id":2267256002,"node_id":"IC_kwDOAAMmUc6HI5TC","user":{"login":"mamccorm","id":29855998,"node_id":"MDQ6VXNlcjI5ODU1OTk4","avatar_url":"https://avatars.githubusercontent.com/u/29855998?v=4","gravatar_id":"","url":"https://api.github.com/users/mamccorm","html_url":"https://github.com/mamccorm","followers_url":"https://api.github.com/users/mamccorm/followers","following_url":"https://api.github.com/users/mamccorm/following{/other_user}","gists_url":"https://api.github.com/users/mamccorm/gists{/gist_id}","starred_url":"https://api.github.com/users/mamccorm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mamccorm/subscriptions","organizations_url":"https://api.github.com/users/mamccorm/orgs","repos_url":"https://api.github.com/users/mamccorm/repos","events_url":"https://api.github.com/users/mamccorm/events{/privacy}","received_events_url":"https://api.github.com/users/mamccorm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-04T02:23:53Z","updated_at":"2024-08-04T02:23:53Z","author_association":"NONE","body":"Much appreciated, that helps ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2267256002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2268219259","html_url":"https://github.com/apache/couchdb/issues/5166#issuecomment-2268219259","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5166","id":2268219259,"node_id":"IC_kwDOAAMmUc6HMkd7","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-05T05:45:44Z","updated_at":"2024-08-05T05:45:44Z","author_association":"CONTRIBUTOR","body":"In one of PR replacing the LRU dict with a map, and adding a few tests, @jaydoane and I stumbled on the root cause for the function clause error https://github.com/apache/couchdb/pull/5168#discussion_r1703072856\r\n\r\nWe noticed and discussed how just plain inserts for the same Db will be enough to corrupt the cache and insert duplicate entries in the Tree with only a single entry in the Map.\r\n\r\nThe reproducer eunit test looks like:\r\n\r\n```\r\nt_multiple_inserts_and_close({Dbs, _, [_, _]}) ->\r\n    {_, Map} = Cache = insert(?DB1, insert(?DB1, new())),\r\n    meck:expect(couch_db, is_idle, 1, meck:seq([meck:val(false), meck:val(true)])),\r\n    ?assertEqual(false, close(Cache)).\r\n```\r\n\r\nWhich results in:\r\n\r\n```\r\nmodule 'couch_lru'\r\n  couch_lru:112: -couch_lru_test_/0-fun-0- (t_multiple_inserts_and_close)...*failed*\r\nin function gb_trees:delete_1/2 (gb_trees.erl, line 408)\r\n  called as delete_1(4,nil)\r\nin call from gb_trees:delete_1/2 (gb_trees.erl, line 409)\r\nin call from gb_trees:delete_1/2 (gb_trees.erl, line 412)\r\nin call from gb_trees:delete/2 (gb_trees.erl, line 404)\r\nin call from couch_lru:close_int/2 (src/couch_lru.erl, line 77)\r\nin call from couch_lru:t_multiple_inserts_and_close/1 (src/couch_lru.erl, line 227)\r\nin call from eunit_test:run_testfun/1 (eunit_test.erl, line 71)\r\nin call from eunit_proc:run_test/1 (eunit_proc.erl, line 531)\r\n**error:function_clause\r\n  output:<<\"\">>\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2268219259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2291582166","html_url":"https://github.com/apache/couchdb/issues/5166#issuecomment-2291582166","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5166","id":2291582166,"node_id":"IC_kwDOAAMmUc6IlsTW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-15T15:49:23Z","updated_at":"2024-08-15T15:49:23Z","author_association":"CONTRIBUTOR","body":"This is now fixed","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2291582166/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294934851","html_url":"https://github.com/apache/couchdb/pull/5181#issuecomment-2294934851","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5181","id":2294934851,"node_id":"IC_kwDOAAMmUc6Iye1D","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-17T18:23:26Z","updated_at":"2024-08-17T18:23:26Z","author_association":"CONTRIBUTOR","body":"Do we also want to update the Elixir version in `mix.exs` (currently at `1.13`) to `1.17`, which [claims to support OTP 25-27](https://hexdocs.pm/elixir/1.17.2/compatibility-and-deprecations.html#between-elixir-and-erlang-otp)?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294934851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294946956","html_url":"https://github.com/apache/couchdb/pull/5181#issuecomment-2294946956","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5181","id":2294946956,"node_id":"IC_kwDOAAMmUc6IyhyM","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-17T19:10:03Z","updated_at":"2024-08-17T19:55:37Z","author_association":"CONTRIBUTOR","body":"> Do we also want to update the Elixir version in `mix.exs` (currently at `1.13`) to `1.17`, which [claims to support OTP 25-27](https://hexdocs.pm/elixir/1.17.2/compatibility-and-deprecations.html#between-elixir-and-erlang-otp)?\r\n\r\nWe should already be using 1.72:\r\n\r\n```\r\njenkins@d999e780ea71:/$ iex\r\nErlang/OTP 25 [erts-13.2.2.10] [source] [64-bit] [smp:8:8] [ds:8:8:10] [async-threads:1] [jit:ns]\r\n\r\nInteractive Elixir (1.17.2) - press Ctrl+C to exit (type h() ENTER for help)\r\n```\r\n\r\nNot sure what the 1.13 in mix.exs actually does but I don't think it actually installs elixir? It shouldn't be able to select an elixir version because there is no 1.13 any longer on our CI images (or any other except 1.17.2).  I think it will just complain if we try to compile with elixir < 1.13? We could bump it to 1.17.0 but we might accidentally exclude anyone still using 1.15 or something like that.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294946956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294984195","html_url":"https://github.com/apache/couchdb/pull/5181#issuecomment-2294984195","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5181","id":2294984195,"node_id":"IC_kwDOAAMmUc6Iyq4D","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-17T20:58:22Z","updated_at":"2024-08-17T20:58:22Z","author_association":"CONTRIBUTOR","body":"@jaydoane I gave it a try here https://github.com/apache/couchdb/pull/5182\r\n\r\nI just used 1.15, as 1.15 should still technically work and there is no need to force people to jump to 1.17.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294984195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294996920","html_url":"https://github.com/apache/couchdb/pull/5182#issuecomment-2294996920","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5182","id":2294996920,"node_id":"IC_kwDOAAMmUc6Iyt-4","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-17T21:59:12Z","updated_at":"2024-08-17T21:59:12Z","author_association":"CONTRIBUTOR","body":"@jaydoane good find, yeah that looks like a race condition. Another flaky test.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294996920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294997117","html_url":"https://github.com/apache/couchdb/pull/5182#issuecomment-2294997117","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5182","id":2294997117,"node_id":"IC_kwDOAAMmUc6IyuB9","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-17T22:00:08Z","updated_at":"2024-08-17T22:00:08Z","author_association":"CONTRIBUTOR","body":"> @jaydoane good find, yeah that looks like a race condition. Another flaky test.\r\n\r\nWorking on a PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2294997117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2295136927","html_url":"https://github.com/apache/couchdb/pull/5180#issuecomment-2295136927","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5180","id":2295136927,"node_id":"IC_kwDOAAMmUc6IzQKf","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-18T06:34:29Z","updated_at":"2024-08-19T09:26:49Z","author_association":"CONTRIBUTOR","body":"Thanks for the feedback!  I would like to do some testing on Windows, that is why I am not yet merging this PR.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2295136927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2297115198","html_url":"https://github.com/apache/couchdb/pull/5184#issuecomment-2297115198","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5184","id":2297115198,"node_id":"IC_kwDOAAMmUc6I6zI-","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-19T17:50:57Z","updated_at":"2024-08-19T17:50:57Z","author_association":"CONTRIBUTOR","body":"Used `git sed 'couch_rand' 'rand'` from the `git-extras` package (both brew and deb system have it usually).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2297115198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2297383786","html_url":"https://github.com/apache/couchdb/issues/5176#issuecomment-2297383786","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5176","id":2297383786,"node_id":"IC_kwDOAAMmUc6I70tq","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-19T20:22:56Z","updated_at":"2024-08-20T09:54:55Z","author_association":"MEMBER","body":"https://github.com/apache/couchdb/blob/aca60ddf147811547b11cf5e8fd10bcfbe3c053e/src/couch_mrview/include/couch_mrview.hrl#L57\r\n\r\nhttps://github.com/apache/couchdb/blob/aca60ddf147811547b11cf5e8fd10bcfbe3c053e/src/couch_mrview/include/couch_mrview.hrl#L72\r\n\r\nYou may need to paginate, or pass a larger `?limit=` query parameter. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2297383786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2299314545","html_url":"https://github.com/apache/couchdb/issues/5186#issuecomment-2299314545","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5186","id":2299314545,"node_id":"IC_kwDOAAMmUc6JDMFx","user":{"login":"hpop","id":168359,"node_id":"MDQ6VXNlcjE2ODM1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/168359?v=4","gravatar_id":"","url":"https://api.github.com/users/hpop","html_url":"https://github.com/hpop","followers_url":"https://api.github.com/users/hpop/followers","following_url":"https://api.github.com/users/hpop/following{/other_user}","gists_url":"https://api.github.com/users/hpop/gists{/gist_id}","starred_url":"https://api.github.com/users/hpop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpop/subscriptions","organizations_url":"https://api.github.com/users/hpop/orgs","repos_url":"https://api.github.com/users/hpop/repos","events_url":"https://api.github.com/users/hpop/events{/privacy}","received_events_url":"https://api.github.com/users/hpop/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-20T16:51:21Z","updated_at":"2024-08-20T16:51:21Z","author_association":"NONE","body":"After writing this, I discovered that the issue seems to be resolved when both `require_valid_user` and `require_valid_user_except_for_up` are set to true.\r\n\r\nIf this is the intended behavior, the documentation may be misleading.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2299314545/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2301442658","html_url":"https://github.com/apache/couchdb/pull/5180#issuecomment-2301442658","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5180","id":2301442658,"node_id":"IC_kwDOAAMmUc6JLTpi","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T08:17:50Z","updated_at":"2024-08-21T08:17:50Z","author_association":"CONTRIBUTOR","body":"I was able to verify this to be working on Windows, which is great.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2301442658/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302258326","html_url":"https://github.com/apache/couchdb/pull/5180#issuecomment-2302258326","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5180","id":2302258326,"node_id":"IC_kwDOAAMmUc6JOayW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T14:54:53Z","updated_at":"2024-08-21T14:54:53Z","author_association":"CONTRIBUTOR","body":"I noticed some repeated failures in the elixir search tests in CI on macos https://ci-couchdb.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/main/1267/pipeline/75\r\n\r\n```\r\n> \r\n[2024-08-21T09:17:08.018Z] + make elixir-search\r\n[2024-08-21T09:17:08.018Z] * creating /Users/jenkins2/workspace/kins-cm1_FullPlatformMatrix_main/.mix/elixir/1-15/rebar3\r\n[2024-08-21T09:17:08.642Z] * creating /Users/jenkins2/workspace/kins-cm1_FullPlatformMatrix_main/.mix/archives/hex-2.1.1\r\n[2024-08-21T09:17:09.939Z] Resolving Hex dependencies...\r\n[2024-08-21T09:17:09.940Z] Resolution completed in 0.015s\r\n[2024-08-21T09:17:09.940Z] Unchanged:\r\n[2024-08-21T09:17:09.940Z]   bunt 1.0.0\r\n[2024-08-21T09:17:09.940Z]   credo 1.7.7\r\n[2024-08-21T09:17:09.940Z]   excoveralls 0.18.2\r\n[2024-08-21T09:17:09.940Z]   file_system 1.0.1\r\n[2024-08-21T09:17:09.940Z]   httpotion 3.2.0 RETIRED!\r\n[2024-08-21T09:17:09.940Z]     (deprecated) Not really maintained, please check out Tesla\r\n[2024-08-21T09:17:09.940Z]   jason 1.4.4\r\n[2024-08-21T09:17:09.940Z]   junit_formatter 3.4.0\r\n[2024-08-21T09:17:09.940Z]   ssl_verify_fun 1.1.7\r\n[2024-08-21T09:17:10.220Z] make: *** [elixir-search] Error 1\r\n```\r\n\r\nIt works everywhere else so likely related to the macos worker setup.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302258326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302448072","html_url":"https://github.com/apache/couchdb/pull/5180#issuecomment-2302448072","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5180","id":2302448072,"node_id":"IC_kwDOAAMmUc6JPJHI","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T16:02:47Z","updated_at":"2024-08-21T16:02:47Z","author_association":"CONTRIBUTOR","body":"It worked for me on macOS (13.6), so my guess too this is an issue related to the worker.  I have seen something similar back in the beginning of this year on the FreeBSD/amd64 builder, but I did not have a chance to troubleshoot it further (partially due to lack of access).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302448072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302459451","html_url":"https://github.com/apache/couchdb/pull/5180#issuecomment-2302459451","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5180","id":2302459451,"node_id":"IC_kwDOAAMmUc6JPL47","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T16:08:34Z","updated_at":"2024-08-21T16:08:34Z","author_association":"CONTRIBUTOR","body":"Thanks, @pgj I'll try a test commit to dump the clouseau log like @jaydoane suggested in the dev chat.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2302459451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303001376","html_url":"https://github.com/apache/couchdb/issues/5191#issuecomment-2303001376","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5191","id":2303001376,"node_id":"IC_kwDOAAMmUc6JRQMg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T20:58:03Z","updated_at":"2024-08-21T20:58:03Z","author_association":"CONTRIBUTOR","body":"Thanks  for your report @Sekuraz.\r\n\r\nTo be clear if there was only one node on a cluster and that node is removed now there are no nodes, that's when the badmatch error happens?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303001376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303067614","html_url":"https://github.com/apache/couchdb/issues/5191#issuecomment-2303067614","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5191","id":2303067614,"node_id":"IC_kwDOAAMmUc6JRgXe","user":{"login":"Sekuraz","id":7331709,"node_id":"MDQ6VXNlcjczMzE3MDk=","avatar_url":"https://avatars.githubusercontent.com/u/7331709?v=4","gravatar_id":"","url":"https://api.github.com/users/Sekuraz","html_url":"https://github.com/Sekuraz","followers_url":"https://api.github.com/users/Sekuraz/followers","following_url":"https://api.github.com/users/Sekuraz/following{/other_user}","gists_url":"https://api.github.com/users/Sekuraz/gists{/gist_id}","starred_url":"https://api.github.com/users/Sekuraz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sekuraz/subscriptions","organizations_url":"https://api.github.com/users/Sekuraz/orgs","repos_url":"https://api.github.com/users/Sekuraz/repos","events_url":"https://api.github.com/users/Sekuraz/events{/privacy}","received_events_url":"https://api.github.com/users/Sekuraz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T21:48:02Z","updated_at":"2024-08-21T21:48:02Z","author_association":"NONE","body":"We had 2 nodes in a cluster and I removed one. The error happened when one of those two nodes was removed. The other node never got the shard update (the shard update was done on the node which was about to be removed).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303067614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303208920","html_url":"https://github.com/apache/couchdb/issues/5191#issuecomment-2303208920","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5191","id":2303208920,"node_id":"IC_kwDOAAMmUc6JSC3Y","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T22:38:00Z","updated_at":"2024-08-21T22:38:00Z","author_association":"CONTRIBUTOR","body":"Thanks for clarifying, @Sekuraz ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303208920/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303267054","html_url":"https://github.com/apache/couchdb/pull/5192#issuecomment-2303267054","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5192","id":2303267054,"node_id":"IC_kwDOAAMmUc6JSRDu","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-21T23:11:31Z","updated_at":"2024-08-21T23:11:31Z","author_association":"CONTRIBUTOR","body":"Don’t forget to update`Makefile.win` 😉","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303267054/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303538445","html_url":"https://github.com/apache/couchdb/issues/5189#issuecomment-2303538445","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5189","id":2303538445,"node_id":"IC_kwDOAAMmUc6JTTUN","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T02:06:30Z","updated_at":"2024-08-22T02:06:30Z","author_association":"CONTRIBUTOR","body":"Thanks for your report @zmara. Yeah it's a known deficiency that`$or` doesn't use an index. It would have to effectively use use the two or indexes and merge them appropriately, and that part isn't implemented currently.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303538445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303566123","html_url":"https://github.com/apache/couchdb/issues/5191#issuecomment-2303566123","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5191","id":2303566123,"node_id":"IC_kwDOAAMmUc6JTaEr","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T02:40:56Z","updated_at":"2024-08-22T02:40:56Z","author_association":"CONTRIBUTOR","body":"@Sekuraz this commit #5193 should fix it. Thank you again for your report.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303566123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303589600","html_url":"https://github.com/apache/couchdb/issues/5195#issuecomment-2303589600","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5195","id":2303589600,"node_id":"IC_kwDOAAMmUc6JTfzg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T03:10:42Z","updated_at":"2024-08-22T03:10:42Z","author_association":"CONTRIBUTOR","body":"Thank you for your report @juanbrein\r\n\r\n`{'EXIT',nodistribution}}` indicates an issue with erlang distribution (that's the erlang VM inter-node clustering system).\r\n\r\nUnfortunately I don't use couchdb with docker much so don't have an exact reason for the failure. It may be a networking issue or  a permissions issue.\r\n\r\nAlso try to take a look at https://hub.docker.com/_/couchdb it's one of experiments of creating a cluster with compose and running some basic load testing https://gist.github.com/nickva/cf9cac975ceb062b61872f7857a0e104. Maybe that will give you some hints.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303589600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303699114","html_url":"https://github.com/apache/couchdb/issues/5177#issuecomment-2303699114","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5177","id":2303699114,"node_id":"IC_kwDOAAMmUc6JT6iq","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T04:33:54Z","updated_at":"2024-08-22T04:33:54Z","author_association":"CONTRIBUTOR","body":"Thanks, @hkcomori. That might work, seeing as Erlang supports unix sockets https://www.erlang.org/doc/apps/kernel/inet#t:local_address/0, and assuming mochiweb will transparently pass it through.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303699114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303708896","html_url":"https://github.com/apache/couchdb/issues/5195#issuecomment-2303708896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5195","id":2303708896,"node_id":"IC_kwDOAAMmUc6JT87g","user":{"login":"juanbrein","id":2943422,"node_id":"MDQ6VXNlcjI5NDM0MjI=","avatar_url":"https://avatars.githubusercontent.com/u/2943422?v=4","gravatar_id":"","url":"https://api.github.com/users/juanbrein","html_url":"https://github.com/juanbrein","followers_url":"https://api.github.com/users/juanbrein/followers","following_url":"https://api.github.com/users/juanbrein/following{/other_user}","gists_url":"https://api.github.com/users/juanbrein/gists{/gist_id}","starred_url":"https://api.github.com/users/juanbrein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juanbrein/subscriptions","organizations_url":"https://api.github.com/users/juanbrein/orgs","repos_url":"https://api.github.com/users/juanbrein/repos","events_url":"https://api.github.com/users/juanbrein/events{/privacy}","received_events_url":"https://api.github.com/users/juanbrein/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T04:35:49Z","updated_at":"2024-08-22T04:35:49Z","author_association":"NONE","body":"Thanks for the hint! I tried using NODENAME, but the problem is that it sets the -name flag to couchdb@127.0.0.1 if NODENAME is 127.0.0.1 ... and that name is different from the one assigned on kubernetes ` -name couchdb` ....\r\n\r\nAnother way would be to change the node name in the shard files... but that is not documented either...\r\n\r\nI have to say that even though the restore process from / to same configurations work... if you are in scenarios like myself... which I believe is not so radical... it doesn't work, the errors are not very useful and is not documented...","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303708896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303909674","html_url":"https://github.com/apache/couchdb/issues/5189#issuecomment-2303909674","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5189","id":2303909674,"node_id":"IC_kwDOAAMmUc6JUt8q","user":{"login":"zmara","id":37733876,"node_id":"MDQ6VXNlcjM3NzMzODc2","avatar_url":"https://avatars.githubusercontent.com/u/37733876?v=4","gravatar_id":"","url":"https://api.github.com/users/zmara","html_url":"https://github.com/zmara","followers_url":"https://api.github.com/users/zmara/followers","following_url":"https://api.github.com/users/zmara/following{/other_user}","gists_url":"https://api.github.com/users/zmara/gists{/gist_id}","starred_url":"https://api.github.com/users/zmara/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zmara/subscriptions","organizations_url":"https://api.github.com/users/zmara/orgs","repos_url":"https://api.github.com/users/zmara/repos","events_url":"https://api.github.com/users/zmara/events{/privacy}","received_events_url":"https://api.github.com/users/zmara/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T06:48:05Z","updated_at":"2024-08-22T06:48:05Z","author_association":"NONE","body":"Thanks for explanation. What about that $in operator? I am using it on one field, so what is the issue there?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303909674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303913319","html_url":"https://github.com/apache/couchdb/pull/5193#issuecomment-2303913319","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5193","id":2303913319,"node_id":"IC_kwDOAAMmUc6JUu1n","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T06:50:43Z","updated_at":"2024-08-22T06:50:43Z","author_association":"MEMBER","body":"an explicit `nonode` result would be clearer, relying on the caller to decide to do nothing if it gets back `node()` is a bit cute. still, we need to handle these edge cases, it's interesting that we've never encountered this before.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2303913319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304142343","html_url":"https://github.com/apache/couchdb/issues/5005#issuecomment-2304142343","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5005","id":2304142343,"node_id":"IC_kwDOAAMmUc6JVmwH","user":{"login":"SijiaCui","id":102461369,"node_id":"U_kgDOBhtvuQ","avatar_url":"https://avatars.githubusercontent.com/u/102461369?v=4","gravatar_id":"","url":"https://api.github.com/users/SijiaCui","html_url":"https://github.com/SijiaCui","followers_url":"https://api.github.com/users/SijiaCui/followers","following_url":"https://api.github.com/users/SijiaCui/following{/other_user}","gists_url":"https://api.github.com/users/SijiaCui/gists{/gist_id}","starred_url":"https://api.github.com/users/SijiaCui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SijiaCui/subscriptions","organizations_url":"https://api.github.com/users/SijiaCui/orgs","repos_url":"https://api.github.com/users/SijiaCui/repos","events_url":"https://api.github.com/users/SijiaCui/events{/privacy}","received_events_url":"https://api.github.com/users/SijiaCui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T08:59:19Z","updated_at":"2024-08-22T08:59:19Z","author_association":"NONE","body":"> I just tried uninstalling couchdb and it worked with no errors (etc files kept). I tried to install again using \"apt-get install couchdb -y\" and it again fails.\r\n> \r\n> ` apt-get install couchdb -y Reading package lists... Done Building dependency tree... Done Reading state information... Done The following packages were automatically installed and are no longer required: gyp libc-ares2 libfile-basedir-perl libfile-desktopentry-perl libfile-mimeinfo-perl libfontenc1 libipc-system-simple-perl libjs-highlight.js libjs-inherits libjs-is-typedarray libjs-psl libjs-typedarray-to-buffer liblua5.3-0 libnet-dbus-perl libssl-dev libtext-iconv-perl libtie-ixhash-perl libuv1-dev libvte-2.91-0 libvte-2.91-common libx11-protocol-perl libxaw7 libxcb-shape0 libxkbfile1 libxml-parser-perl libxml-twig-perl libxml-xpathengine-perl libxmu6 libxmuu1 libxv1 libxxf86dga1 node-abbrev node-agent-base node-ajv node-ansi node-ansi-regex node-ansi-styles node-ansistyles node-aproba node-archy node-are-we-there-yet node-asap node-asn1 node-assert-plus node-asynckit node-aws-sign2 node-aws4 node-balanced-match node-bcrypt-pbkdf node-brace-expansion node-builtins node-cacache node-caseless node-chalk node-chownr node-clone node-color-convert node-color-name node-colors node-columnify node-combined-stream node-concat-map node-console-control-strings node-copy-concurrently node-core-util-is node-dashdash node-debug node-defaults node-delayed-stream node-delegates node-depd node-ecc-jsbn node-encoding node-err-code node-escape-string-regexp node-extend node-extsprintf node-fast-deep-equal node-forever-agent node-form-data node-fs-write-stream-atomic node-fs.realpath node-function-bind node-gauge node-getpass node-glob node-graceful-fs node-har-schema node-har-validator node-has-flag node-has-unicode node-hosted-git-info node-http-signature node-https-proxy-agent node-iconv-lite node-iferr node-imurmurhash node-indent-string node-inflight node-inherits node-ini node-ip node-ip-regex node-is-typedarray node-isarray node-isexe node-isstream node-jsbn node-json-parse-better-errors node-json-schema node-json-schema-traverse node-json-stable-stringify node-json-stringify-safe node-jsonify node-jsonparse node-jsonstream node-jsprim node-leven node-lockfile node-lru-cache node-mime node-mime-types node-minimatch node-mkdirp node-move-concurrently node-ms node-mute-stream node-nopt node-normalize-package-data node-npm-bundled node-npm-package-arg node-npmlog node-number-is-nan node-oauth-sign node-object-assign node-once node-opener node-osenv node-p-map node-path-is-absolute node-performance-now node-process-nextick-args node-promise-inflight node-promise-retry node-promzard node-psl node-puka node-punycode node-qs node-read node-read-package-json node-readable-stream node-request node-resolve node-resolve-from node-retry node-rimraf node-run-queue node-safe-buffer node-semver node-set-blocking node-signal-exit node-slash node-spdx-correct node-spdx-exceptions node-spdx-expression-parse node-spdx-license-ids node-sshpk node-ssri node-string-decoder node-string-width node-strip-ansi node-supports-color node-tar node-text-table node-through node-tough-cookie node-tunnel-agent node-tweetnacl node-typedarray-to-buffer node-unique-filename node-universalify node-uri-js node-util-deprecate node-uuid node-validate-npm-package-license node-validate-npm-package-name node-verror node-wcwidth.js node-which node-wide-align node-wrappy node-write-file-atomic node-yallist python3-pkg-resources termit x11-utils x11-xserver-utils xdg-utils Use 'apt autoremove' to remove them. The following NEW packages will be installed: couchdb 0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded. Need to get 0 B/30.9 MB of archives. After this operation, 54.2 MB of additional disk space will be used. Preconfiguring packages ... couchdb failed to preconfigure, with exit status 128 Selecting previously unselected package couchdb. (Reading database ... 103815 files and directories currently installed.) Preparing to unpack .../couchdb_3.3.3-1~bullseye_amd64.deb ... Unpacking couchdb (3.3.3-1~bullseye) ... Setting up couchdb (3.3.3-1~bullseye) ... dpkg: error processing package couchdb (--configure): installed couchdb package post-installation script subprocess returned error exit status 128 Processing triggers for man-db (2.9.4-2) ... Errors were encountered while processing: couchdb E: Sub-process /usr/bin/dpkg returned an error code (1)\r\n> \r\n> `\r\n> \r\n> I think it may have to do with the configuration directory existing already.\r\n\r\nI just stuck with the same issue \"post-installation script subprocess returned error exit status 128\", have you fixed the error?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304142343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304465210","html_url":"https://github.com/apache/couchdb/issues/5005#issuecomment-2304465210","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5005","id":2304465210,"node_id":"IC_kwDOAAMmUc6JW1k6","user":{"login":"jungalwala","id":1099499,"node_id":"MDQ6VXNlcjEwOTk0OTk=","avatar_url":"https://avatars.githubusercontent.com/u/1099499?v=4","gravatar_id":"","url":"https://api.github.com/users/jungalwala","html_url":"https://github.com/jungalwala","followers_url":"https://api.github.com/users/jungalwala/followers","following_url":"https://api.github.com/users/jungalwala/following{/other_user}","gists_url":"https://api.github.com/users/jungalwala/gists{/gist_id}","starred_url":"https://api.github.com/users/jungalwala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jungalwala/subscriptions","organizations_url":"https://api.github.com/users/jungalwala/orgs","repos_url":"https://api.github.com/users/jungalwala/repos","events_url":"https://api.github.com/users/jungalwala/events{/privacy}","received_events_url":"https://api.github.com/users/jungalwala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T11:44:50Z","updated_at":"2024-08-22T11:44:50Z","author_association":"NONE","body":"I had to upgrade my VM to debian 12 in order to get it to install.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304465210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304903172","html_url":"https://github.com/apache/couchdb/pull/5193#issuecomment-2304903172","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5193","id":2304903172,"node_id":"IC_kwDOAAMmUc6JYggE","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T15:02:38Z","updated_at":"2024-08-22T15:29:08Z","author_association":"CONTRIBUTOR","body":"It is a bit cute to use a replicate to self as a fallback. I was mainly relying on the existing \"replicate to self\" behavior being a no-op in \r\nhttps://github.com/apache/couchdb/blob/637fb79f56af6371f4522eb34467601be726c94c/src/mem3/src/mem3_sync.erl#L79-L82 with nonode  we would have had to add both special cases: one for self one for `nonode` in various places.\r\n\r\nI built a small test module to play with with the previous logic wondering the same thing, why we didn't see this before?\r\n\r\n```erlang\r\n-module(nn).\r\n\r\n-export([\r\n    find_next_node/3\r\n]).\r\n\r\nfind_next_node(Self, LiveNodes, Mem3Nodes) ->\r\n    AllNodes0 = lists:sort(Mem3Nodes),\r\n    AllNodes1 = [X || X <- AllNodes0, lists:member(X, LiveNodes)],\r\n    AllNodes = AllNodes1 ++ [hd(AllNodes1)],\r\n    [_Self, Next | _] = lists:dropwhile(fun(N) -> N =/= Self end, AllNodes),\r\n    Next.\r\n```\r\n\r\n```erlang\r\n> c(nn).\r\n\r\n> nn:find_next_node(n, [a,n], [a]).\r\n** exception error: no match of right hand side value []\r\n     in function  nn:find_next_node/3 (nn.erl, line 11)\r\n```\r\n\r\nSo one case where we'd trigger this is if the node we're on removes itself from the nodes list. Then the user reported the logs being filled and the machine was \"frozen\". It must have happened between the initial sync started with the node in the mem3:nodes() list then it was removed and an error happened, where initial_sync crashed.\r\n\r\n```\r\n[error] 2024-08-21T19:02:06.680089Z couchdb@192.168.10.235 emulator -------- Error in process <0.30202.42> on node 'couchdb@192.168.10.235' with exit value:\r\n{{badmatch,[]},[{mem3_sync,find_next_node,0,[{file,\"src/mem3_sync.erl\"},{line,309}]},{mem3_sync,sync_nodes_and_dbs,0,[{file,\"src/mem3_sync.erl\"},{line,265}]},{mem3_sync,initial_sync,1,[{file,\"src/mem3_sync.erl\"},{line,272}]}]}\r\n```\r\nOn a crash we end up restarting it https://github.com/apache/couchdb/blob/d38f14f7d777b7cda79b9862ee304150ad3418ea/src/mem3/src/mem3_sync_nodes.erl#L75-L78 and from then on it will just keep crashing. So I opted to fold both the self and the \"odd\" cases like that into the already existing \"no-op\" case so the crash cycle due to this reason doesn't happen.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2304903172/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2305363699","html_url":"https://github.com/apache/couchdb/issues/5196#issuecomment-2305363699","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5196","id":2305363699,"node_id":"IC_kwDOAAMmUc6JaQ7z","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-22T18:13:37Z","updated_at":"2024-08-28T03:11:48Z","author_association":"CONTRIBUTOR","body":"From what I remember from a while back, close-wait means the remote client closed the connection, then, our (server) kernel found out about it, and is now waiting on the application code (CouchDB) to notice as well and close it.\r\n\r\nSo, perhaps maybe that one node is overwhelmed, sometimes is blocked? (maybe a firewall?), or not getting enough CPU time to run?. Check your resource usage (cpu, memory, open file handles) and the logs to see if there are exceptions or errors on that one node. At least you have a few other nodes to compare to where this doesn't happen.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2305363699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2306341384","html_url":"https://github.com/apache/couchdb/issues/5200#issuecomment-2306341384","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5200","id":2306341384,"node_id":"IC_kwDOAAMmUc6Jd_oI","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-23T05:51:10Z","updated_at":"2024-08-23T05:51:10Z","author_association":"CONTRIBUTOR","body":"After 256 rows are emitted, because of the `feed=continuous` parameter, it will wait until the default timeout expires (60 seconds it seems). Yeah, that is a bit of odd behavior.  It seems if we emitted >= limit rows, we could end the request early, despite the timeout.\r\n\r\n[Docs say](https://docs.couchdb.org/en/stable/api/database/changes.html#continuous):\r\n\r\n> A continuous feed stays open and connected to the database until explicitly closed and changes are sent to the client as they happen, i.e. in near real-time.\r\n\r\nbut also\r\n\r\n> If limit has been specified the feed will end with a { last_seq } object.\r\n\r\nContinuous seems to take precedence regardless of limit\r\n\r\nI guess in general it may be possible to control the time it will keep waiting with an explicit `timeout=$msec` parameter:\r\n```\r\ncurl http://127.0.0.1:5984/myDb/_changes`?feed=continouos&limit=256&timeout=5000`","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2306341384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307270167","html_url":"https://github.com/apache/couchdb/issues/5200#issuecomment-2307270167","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5200","id":2307270167,"node_id":"IC_kwDOAAMmUc6JhiYX","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-23T14:59:51Z","updated_at":"2024-08-23T14:59:51Z","author_association":"MEMBER","body":"that combination of parameters is unusual. \"continuous=true\" meaning \"keep going\" and \"limit=X\" meaning \"stop after X\".\r\n\r\nA few options;\r\n\r\n1) make the combination illegal (400 Bad Request)\r\n2) Make the response end immediately after the X'th row is sent.\r\n\r\nI think 2 is the right move","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307270167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307302404","html_url":"https://github.com/apache/couchdb/issues/5189#issuecomment-2307302404","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5189","id":2307302404,"node_id":"IC_kwDOAAMmUc6JhqQE","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-23T15:17:56Z","updated_at":"2024-08-23T15:17:56Z","author_association":"MEMBER","body":"I recommend building a map-reduce view directly (queried via `_view` not `_find`). This is an actual index (on the emitted key), and any query you can do to `_view` will be done efficiently (`startkey`/`endkey` or `key` or `keys`) .\r\n\r\nAll that `_find` does is look at all the indexes and tries to find the most efficient one for the selector. If it doesn't find one it just reads the whole database and filters out non-matches.\r\n\r\nIn your case you could do the much more efficient `/dbname/_all_docs?keys=[\"CustomerElastic_00000a29-329f-477f-8d4a-8244a9c738aa\", \"CustomerElastic_00001280-7a18-466b-9e9c-da5a2d903bda\"]` instead.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307302404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307421391","html_url":"https://github.com/apache/couchdb/issues/5200#issuecomment-2307421391","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5200","id":2307421391,"node_id":"IC_kwDOAAMmUc6JiHTP","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-23T16:29:18Z","updated_at":"2024-08-23T16:29:18Z","author_association":"CONTRIBUTOR","body":"This should fix it: https://github.com/apache/couchdb/pull/5201\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2307421391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2311786564","html_url":"https://github.com/apache/couchdb/issues/5196#issuecomment-2311786564","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5196","id":2311786564,"node_id":"IC_kwDOAAMmUc6JyxBE","user":{"login":"MohammadrezaNasrabadi","id":77168970,"node_id":"MDQ6VXNlcjc3MTY4OTcw","avatar_url":"https://avatars.githubusercontent.com/u/77168970?v=4","gravatar_id":"","url":"https://api.github.com/users/MohammadrezaNasrabadi","html_url":"https://github.com/MohammadrezaNasrabadi","followers_url":"https://api.github.com/users/MohammadrezaNasrabadi/followers","following_url":"https://api.github.com/users/MohammadrezaNasrabadi/following{/other_user}","gists_url":"https://api.github.com/users/MohammadrezaNasrabadi/gists{/gist_id}","starred_url":"https://api.github.com/users/MohammadrezaNasrabadi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MohammadrezaNasrabadi/subscriptions","organizations_url":"https://api.github.com/users/MohammadrezaNasrabadi/orgs","repos_url":"https://api.github.com/users/MohammadrezaNasrabadi/repos","events_url":"https://api.github.com/users/MohammadrezaNasrabadi/events{/privacy}","received_events_url":"https://api.github.com/users/MohammadrezaNasrabadi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-27T07:38:24Z","updated_at":"2024-08-27T08:10:25Z","author_association":"NONE","body":"We don't apply any configuration about the firewall to have limitation or control over the connections.\r\n\r\nOn the other hand, We didn't see huge CPU or RAM usage on the nodes hosting CouchDB.\r\n\r\nDo you have any benchmark results based on the number of shards, replicas, amount of database requests and the available resources? It will be useful to compare our CouchDB infrastructure status with the ideal resource requirements.\r\n\r\nI will share the detailed information of our infrastructure if needed.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2311786564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2314124648","html_url":"https://github.com/apache/couchdb/issues/5196#issuecomment-2314124648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5196","id":2314124648,"node_id":"IC_kwDOAAMmUc6J7r1o","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-28T03:24:47Z","updated_at":"2024-08-28T03:24:47Z","author_association":"CONTRIBUTOR","body":"It's hard to compare architectures, it depends on the requirements. For instance some of our larger clusters have 30+ nodes and our load balancer handles 100k concurrent open connections. Even there, on the load balancer usually there almost no CLOSE_WAIT connections. At most I could see a short temporary increase in CLOSE_WAIT up to 3k out of 100k established connections, then they get cleared back to a few hundred only.\r\n\r\nIt's good that your resource usage is low it seems. Since you have other nodes to compare to, and others don't seem to show the same behavior try to see what's different between them (configuration, hardware resources). Maybe check your logs for any errors on some vs others?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2314124648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2316296482","html_url":"https://github.com/apache/couchdb/issues/5174#issuecomment-2316296482","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5174","id":2316296482,"node_id":"IC_kwDOAAMmUc6KD-Ei","user":{"login":"justinclloyd","id":63053500,"node_id":"MDQ6VXNlcjYzMDUzNTAw","avatar_url":"https://avatars.githubusercontent.com/u/63053500?v=4","gravatar_id":"","url":"https://api.github.com/users/justinclloyd","html_url":"https://github.com/justinclloyd","followers_url":"https://api.github.com/users/justinclloyd/followers","following_url":"https://api.github.com/users/justinclloyd/following{/other_user}","gists_url":"https://api.github.com/users/justinclloyd/gists{/gist_id}","starred_url":"https://api.github.com/users/justinclloyd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinclloyd/subscriptions","organizations_url":"https://api.github.com/users/justinclloyd/orgs","repos_url":"https://api.github.com/users/justinclloyd/repos","events_url":"https://api.github.com/users/justinclloyd/events{/privacy}","received_events_url":"https://api.github.com/users/justinclloyd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-28T21:39:52Z","updated_at":"2024-08-28T21:39:52Z","author_association":"NONE","body":"Hitting this same issue in Ubuntu 22.04.\r\n```\r\n{\r\n  \"couchdb\": \"Welcome\",\r\n  \"version\": \"3.3.3\",\r\n  \"git_sha\": \"40afbcfc7\",\r\n  \"uuid\": \"REDACTED\",\r\n  \"features\": [\r\n    \"access-ready\",\r\n    \"partitioned\",\r\n    \"pluggable-storage-engines\",\r\n    \"reshard\",\r\n    \"scheduler\"\r\n  ],\r\n  \"vendor\": {\r\n    \"name\": \"The Apache Software Foundation\"\r\n  }\r\n}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2316296482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2319676510","html_url":"https://github.com/apache/couchdb/pull/5192#issuecomment-2319676510","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5192","id":2319676510,"node_id":"IC_kwDOAAMmUc6KQ3Re","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-30T02:00:32Z","updated_at":"2024-08-30T02:00:32Z","author_association":"CONTRIBUTOR","body":"> +1 if the full CI passes (make a `jenkins-...` branch and use a `git commit amend --no-edit` to give it a new commit ID and push, no need for a PR even).\r\n> \r\n> Mainly because previously we had some issues with elixir + clean not working: #4740\r\n\r\nI updated `Makefile.win` and ran the full CI [here](https://ci-couchdb.apache.org/blue/organizations/jenkins/jenkins-cm1%2FFullPlatformMatrix/detail/jenkins-make-clean-elixir-test-deps/1/pipeline) and it seems to pass.\r\n\r\nIs it possible that whatever was causing https://github.com/apache/couchdb/issues/4706 has been fixed, and this is now safe to merge?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2319676510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2319696146","html_url":"https://github.com/apache/couchdb/pull/5192#issuecomment-2319696146","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5192","id":2319696146,"node_id":"IC_kwDOAAMmUc6KQ8ES","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-08-30T02:15:13Z","updated_at":"2024-08-30T02:15:13Z","author_association":"CONTRIBUTOR","body":"Thanks, Jay. Let’s merge it!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2319696146/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325163439","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2325163439","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2325163439,"node_id":"IC_kwDOAAMmUc6Kly2v","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T18:06:07Z","updated_at":"2024-09-02T18:06:07Z","author_association":"MEMBER","body":"This will need a code enhancement. In the meantime consider using haproxy for the TLS instead.\r\n\r\nAlso make sure you've added;\r\n\r\n```\r\n[ssl]\r\ntls_versions = ['tlvs1.2']\r\n```\r\n\r\nto your `local.ini`, or you might find tls 1.0 and 1.1 are also available (depending on erlang version)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325163439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325229728","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2325229728","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2325229728,"node_id":"IC_kwDOAAMmUc6KmDCg","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T19:26:50Z","updated_at":"2024-09-02T19:26:50Z","author_association":"CONTRIBUTOR","body":"Linking a discussion with the same question: https://github.com/apache/couchdb/discussions/5207","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325229728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325247858","html_url":"https://github.com/apache/couchdb/pull/5212#issuecomment-2325247858","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5212","id":2325247858,"node_id":"IC_kwDOAAMmUc6KmHdy","user":{"login":"big-r81","id":9985963,"node_id":"MDQ6VXNlcjk5ODU5NjM=","avatar_url":"https://avatars.githubusercontent.com/u/9985963?v=4","gravatar_id":"","url":"https://api.github.com/users/big-r81","html_url":"https://github.com/big-r81","followers_url":"https://api.github.com/users/big-r81/followers","following_url":"https://api.github.com/users/big-r81/following{/other_user}","gists_url":"https://api.github.com/users/big-r81/gists{/gist_id}","starred_url":"https://api.github.com/users/big-r81/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/big-r81/subscriptions","organizations_url":"https://api.github.com/users/big-r81/orgs","repos_url":"https://api.github.com/users/big-r81/repos","events_url":"https://api.github.com/users/big-r81/events{/privacy}","received_events_url":"https://api.github.com/users/big-r81/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T19:50:27Z","updated_at":"2024-09-02T19:50:27Z","author_association":"CONTRIBUTOR","body":"@rnewson Should we add some sensitive and safe defaults in `default.ini`?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325247858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325268835","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2325268835","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2325268835,"node_id":"IC_kwDOAAMmUc6KmMlj","user":{"login":"nsthakur7","id":25045937,"node_id":"MDQ6VXNlcjI1MDQ1OTM3","avatar_url":"https://avatars.githubusercontent.com/u/25045937?v=4","gravatar_id":"","url":"https://api.github.com/users/nsthakur7","html_url":"https://github.com/nsthakur7","followers_url":"https://api.github.com/users/nsthakur7/followers","following_url":"https://api.github.com/users/nsthakur7/following{/other_user}","gists_url":"https://api.github.com/users/nsthakur7/gists{/gist_id}","starred_url":"https://api.github.com/users/nsthakur7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsthakur7/subscriptions","organizations_url":"https://api.github.com/users/nsthakur7/orgs","repos_url":"https://api.github.com/users/nsthakur7/repos","events_url":"https://api.github.com/users/nsthakur7/events{/privacy}","received_events_url":"https://api.github.com/users/nsthakur7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T20:19:13Z","updated_at":"2024-09-02T20:19:13Z","author_association":"NONE","body":"Thank you, Robert for such a quick turnaround. Appreciate it. \r\n\r\nYes, we have configured the ini file to use TLS1. 2.\r\n\r\nAs I mentioned, we are using Windows Server 2016 Data Center, setting up HAProxy will require extra efforts. \r\n\r\nInstead, thinking of using IIS to act as proxy for https request. \r\n\r\nIt is possible for you to share the steps involved to configure couchdb and IIS in a proxy setup, such each incoming https request goes through IIS first and then to couchdb? \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325268835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325294461","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2325294461","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2325294461,"node_id":"IC_kwDOAAMmUc6KmS19","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T20:56:16Z","updated_at":"2024-09-02T20:56:16Z","author_association":"MEMBER","body":"Hi, sorry, I don't use Windows and have never used IIS. Our general guide on a reverse proxy in front covers a few options, perhaps that might include the hints you need: https://docs.couchdb.org/en/stable/best-practices/reverse-proxies.html","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325294461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325296794","html_url":"https://github.com/apache/couchdb/pull/5212#issuecomment-2325296794","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5212","id":2325296794,"node_id":"IC_kwDOAAMmUc6KmTaa","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-02T20:59:59Z","updated_at":"2024-09-02T20:59:59Z","author_association":"MEMBER","body":"No, I think let erlang/OTP version + mochiweb determine the default, and then a simple override.\r\n\r\nWe could submit a PR to mochiweb though, its defaults and notion of what is currently \"safe\" or not \"broken\" is quite out of date: https://github.com/mochi/mochiweb/blob/611254eb941e502227f221667389b98fd8e72d6f/src/mochiweb_socket.erl#L58","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2325296794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2326373095","html_url":"https://github.com/apache/couchdb/issues/5044#issuecomment-2326373095","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5044","id":2326373095,"node_id":"IC_kwDOAAMmUc6KqaLn","user":{"login":"tiju86","id":55751429,"node_id":"MDQ6VXNlcjU1NzUxNDI5","avatar_url":"https://avatars.githubusercontent.com/u/55751429?v=4","gravatar_id":"","url":"https://api.github.com/users/tiju86","html_url":"https://github.com/tiju86","followers_url":"https://api.github.com/users/tiju86/followers","following_url":"https://api.github.com/users/tiju86/following{/other_user}","gists_url":"https://api.github.com/users/tiju86/gists{/gist_id}","starred_url":"https://api.github.com/users/tiju86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiju86/subscriptions","organizations_url":"https://api.github.com/users/tiju86/orgs","repos_url":"https://api.github.com/users/tiju86/repos","events_url":"https://api.github.com/users/tiju86/events{/privacy}","received_events_url":"https://api.github.com/users/tiju86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-03T12:15:12Z","updated_at":"2024-09-03T12:15:12Z","author_association":"NONE","body":"hello,\r\n\r\nWe have installed the package 3.3.3-2~bullseye 990 which contains the latest version of erlang (24.3.4.17) but unfortunately we still have the same problems.\r\n\r\nfor example the graph of this morning : \r\n\r\n![image](https://github.com/user-attachments/assets/7a70d433-fbda-44f5-b44b-b5ebee50cf93)\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2326373095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2327446467","html_url":"https://github.com/apache/couchdb/pull/5212#issuecomment-2327446467","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5212","id":2327446467,"node_id":"IC_kwDOAAMmUc6KugPD","user":{"login":"nsthakur7","id":25045937,"node_id":"MDQ6VXNlcjI1MDQ1OTM3","avatar_url":"https://avatars.githubusercontent.com/u/25045937?v=4","gravatar_id":"","url":"https://api.github.com/users/nsthakur7","html_url":"https://github.com/nsthakur7","followers_url":"https://api.github.com/users/nsthakur7/followers","following_url":"https://api.github.com/users/nsthakur7/following{/other_user}","gists_url":"https://api.github.com/users/nsthakur7/gists{/gist_id}","starred_url":"https://api.github.com/users/nsthakur7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsthakur7/subscriptions","organizations_url":"https://api.github.com/users/nsthakur7/orgs","repos_url":"https://api.github.com/users/nsthakur7/repos","events_url":"https://api.github.com/users/nsthakur7/events{/privacy}","received_events_url":"https://api.github.com/users/nsthakur7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-03T21:12:35Z","updated_at":"2024-09-03T21:15:02Z","author_association":"NONE","body":"Thank you, Robert for actioning the fix so quickly. Any clue, when this fix will be released and which version(s) of couchDB have this fix?  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2327446467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2327451530","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2327451530","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2327451530,"node_id":"IC_kwDOAAMmUc6KuheK","user":{"login":"nsthakur7","id":25045937,"node_id":"MDQ6VXNlcjI1MDQ1OTM3","avatar_url":"https://avatars.githubusercontent.com/u/25045937?v=4","gravatar_id":"","url":"https://api.github.com/users/nsthakur7","html_url":"https://github.com/nsthakur7","followers_url":"https://api.github.com/users/nsthakur7/followers","following_url":"https://api.github.com/users/nsthakur7/following{/other_user}","gists_url":"https://api.github.com/users/nsthakur7/gists{/gist_id}","starred_url":"https://api.github.com/users/nsthakur7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsthakur7/subscriptions","organizations_url":"https://api.github.com/users/nsthakur7/orgs","repos_url":"https://api.github.com/users/nsthakur7/repos","events_url":"https://api.github.com/users/nsthakur7/events{/privacy}","received_events_url":"https://api.github.com/users/nsthakur7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-03T21:16:18Z","updated_at":"2024-09-03T21:16:18Z","author_association":"NONE","body":"Thank you, Robert for actioning the fix so quickly. Any clue, when this fix will be released and which version(s) of couchDB have this fix?  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2327451530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2329833599","html_url":"https://github.com/apache/couchdb/issues/5211#issuecomment-2329833599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5211","id":2329833599,"node_id":"IC_kwDOAAMmUc6K3nB_","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-04T19:39:28Z","updated_at":"2024-09-04T19:39:28Z","author_association":"MEMBER","body":"It could be a while tbh, we're just about to release 3.4.0 which is a bigger release (and has taken an age...). so it'll be after than (3.4.1 seems likely). You can obviously build a custom thing, checkout 3.3.3 and cherry-pick this single commit. the package building scripts are also OSS. Probably easier to wait though","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2329833599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2330709476","html_url":"https://github.com/apache/couchdb/pull/5217#issuecomment-2330709476","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5217","id":2330709476,"node_id":"IC_kwDOAAMmUc6K683k","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T06:32:33Z","updated_at":"2024-09-05T06:33:30Z","author_association":"CONTRIBUTOR","body":"Would not it be possible to make those problematic functions deterministic for the scanning?  Something along the lines of mocking the date and random functions to provide the same set of values, so that the different engines would run the same code with the same input.  If the sequence of pseudorandom values is seeded with the actual date and time, maybe it is enough to fixate that only.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2330709476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331659475","html_url":"https://github.com/apache/couchdb/pull/5217#issuecomment-2331659475","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5217","id":2331659475,"node_id":"IC_kwDOAAMmUc6K-kzT","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T13:16:27Z","updated_at":"2024-09-05T13:16:27Z","author_association":"CONTRIBUTOR","body":"@pgj good idea in general, but not sure how we'd do that in our case across two different javascript engines from Erlang.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331659475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331763186","html_url":"https://github.com/apache/couchdb/pull/5217#issuecomment-2331763186","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5217","id":2331763186,"node_id":"IC_kwDOAAMmUc6K--Hy","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T14:00:07Z","updated_at":"2024-09-05T14:00:07Z","author_association":"CONTRIBUTOR","body":"I am not (yet) familiar with the internals of SpiderMonkey and QuickJS.  I was thinking about finding the right API calls or interface elements that would allow us to seed the JS engine with a specific state for example.  Maybe that is not trivial or maybe this is not how the engines are integrated.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331763186/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331770683","html_url":"https://github.com/apache/couchdb/pull/5217#issuecomment-2331770683","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5217","id":2331770683,"node_id":"IC_kwDOAAMmUc6K-_87","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T14:03:05Z","updated_at":"2024-09-05T14:03:05Z","author_association":"CONTRIBUTOR","body":"There are of course solutions like [`faketime`](https://github.com/wolfcw/libfaketime) which are application-agnostic.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331770683/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331835788","html_url":"https://github.com/apache/couchdb/pull/5217#issuecomment-2331835788","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5217","id":2331835788,"node_id":"IC_kwDOAAMmUc6K_P2M","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T14:28:09Z","updated_at":"2024-09-05T14:28:09Z","author_association":"CONTRIBUTOR","body":"Ah, very nice! `LD_PRELOAD` is such a neat trick.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331835788/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331949173","html_url":"https://github.com/apache/couchdb/issues/5218#issuecomment-2331949173","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5218","id":2331949173,"node_id":"IC_kwDOAAMmUc6K_rh1","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T15:00:56Z","updated_at":"2024-09-05T16:20:58Z","author_association":"CONTRIBUTOR","body":"Hi @lpil, thanks for stopping by. \r\n\r\nAs-is CouchDB is not structured to be used as a dependency in an Erlang project. In rebar3-parlance it would be considered an `umbrella` project: https://rebar3.org/docs/workflow/\r\n\r\nBut with a bit of work it could be doable to integrate with it. All the applications in CouchDB are just standard Erlang apps located in the `./src` directory. We use rebar for compiling them (still rebar2 though, not rebar3).  So at the very least it should be possible to take all the src/* apps and add your apps alongside them, then adjust reltool to build the release including all the CouchDB apps and your apps. \r\n\r\n`chttpd` is sort of the top level API layer listening the requests.`fabric` is the clustering layer, in charge of dispatching requests to individual workers/shards on other nodes. And `couch` the app handling opening file handles. Each of those have associated helper apps and libraries. For example, you could integrate at the fabric layer, so you'd skip serializing and/deserializing to/from json. Or, if you don't need clustering and sharding, you can use the couch app directly to open local couch files (similar to how CouchDB 1.x worked).\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331949173/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331989136","html_url":"https://github.com/apache/couchdb/issues/5174#issuecomment-2331989136","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5174","id":2331989136,"node_id":"IC_kwDOAAMmUc6K_1SQ","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T15:17:25Z","updated_at":"2024-09-05T15:17:25Z","author_association":"CONTRIBUTOR","body":"`.ini` files are read in a hierarchy. The later ones override the early ones. It goes something like `default.ini`, `default.d/*.ini`, `local.ini` and `local.d/*.ini`. The `*.ini` ones are sorted, so typically there you'd want to add a numeric prefix indicating the order it should be `local.d/10-admins.ini` vs `local.d/50-admins.ini`. \r\n\r\nConfig values are written to the last file in the chain, so make sure to put your admins in the last file in the chain, say `local.d/80-mysettings.ini` for instance. Another approach is to pre-hash the password with an external tool. This is a bit more advanced but then it wouldn't rely on writing to the last `.ini` file rule.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2331989136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2332120796","html_url":"https://github.com/apache/couchdb/issues/5218#issuecomment-2332120796","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5218","id":2332120796,"node_id":"IC_kwDOAAMmUc6LAVbc","user":{"login":"lpil","id":6134406,"node_id":"MDQ6VXNlcjYxMzQ0MDY=","avatar_url":"https://avatars.githubusercontent.com/u/6134406?v=4","gravatar_id":"","url":"https://api.github.com/users/lpil","html_url":"https://github.com/lpil","followers_url":"https://api.github.com/users/lpil/followers","following_url":"https://api.github.com/users/lpil/following{/other_user}","gists_url":"https://api.github.com/users/lpil/gists{/gist_id}","starred_url":"https://api.github.com/users/lpil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lpil/subscriptions","organizations_url":"https://api.github.com/users/lpil/orgs","repos_url":"https://api.github.com/users/lpil/repos","events_url":"https://api.github.com/users/lpil/events{/privacy}","received_events_url":"https://api.github.com/users/lpil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T16:04:31Z","updated_at":"2024-09-05T16:04:31Z","author_association":"NONE","body":"Great to know, thank you. I think for my use this is not quite as practical so I'll continue to use the HTTP API.\n\nCheers!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2332120796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2332123924","html_url":"https://github.com/apache/couchdb/issues/5218#issuecomment-2332123924","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5218","id":2332123924,"node_id":"IC_kwDOAAMmUc6LAWMU","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T16:06:05Z","updated_at":"2024-09-05T16:06:05Z","author_association":"MEMBER","body":"Agree with nick that couchdb's interface is the http api, going below that is not supported or documented.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2332123924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333188438","html_url":"https://github.com/apache/couchdb/issues/3973#issuecomment-2333188438","issue_url":"https://api.github.com/repos/apache/couchdb/issues/3973","id":2333188438,"node_id":"IC_kwDOAAMmUc6LEaFW","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T03:59:38Z","updated_at":"2024-09-06T03:59:38Z","author_association":"NONE","body":"The latter might be related to #5223, it looks like there's some URL string manipulation bugs.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333188438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333189383","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2333189383","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2333189383,"node_id":"IC_kwDOAAMmUc6LEaUH","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T04:00:54Z","updated_at":"2024-09-06T04:02:11Z","author_association":"NONE","body":"From the CouchDB log:\r\n\r\n```\r\n[notice] 2024-09-06T03:54:09.540505Z nonode@nohost <0.393.0> -------- couch_replicator_scheduler: Job {\"3e9e019d74f393c8fb8319dd43abec45\",\"+continuous\"} started as <0.12000.0>\r\n[error] 2024-09-06T03:54:11.461321Z nonode@nohost <0.12000.0> -------- couch_replicator_httpc: auth plugin initialization failed \"http://[fdaa:a:d05:a7b:12:eb5a:cc23:2]:5984/_users/\" {session_request_failed,\"http://fdaa:a:d05:a7b:12:eb5a:cc23:2/_session\",\"admin\",{url_parsing_failed,{error,invalid_uri}}}\r\n[error] 2024-09-06T03:54:11.461920Z nonode@nohost <0.12000.0> -------- throw:{replication_auth_error,session_request_failed,\"http://fdaa:a:d05:a7b:12:eb5a:cc23:2/_session\",\"admin\",{url_parsing_failed,{error,invalid_uri}}}}: Replication 3e9e019d74f393c8fb8319dd43abec45+continuous failed to start \"http://[fdaa:a:d05:a7b:12:eb5a:cc23:2]:5984/_users/\" -> \"http://localhost:5984/_users/\" doc <<\"shards/00000000-7fffffff/_replicator.1725575687\">>:<<\"pup_fdaa:a:d05:a7b:12:eb5a:cc23:2__users\">> stack:[{couch_replicator_httpc,setup,1,[{file,\"src/couch_replicator_httpc.erl\"},{line,62}]},{couch_replicator_api_wrap,db_open,3,[{file,\"src/couch_replicator_api_wrap.erl\"},{line,68}]}]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333189383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333391137","html_url":"https://github.com/apache/couchdb/pull/5219#issuecomment-2333391137","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5219","id":2333391137,"node_id":"IC_kwDOAAMmUc6LFLkh","user":{"login":"pgj","id":277835,"node_id":"MDQ6VXNlcjI3NzgzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/277835?v=4","gravatar_id":"","url":"https://api.github.com/users/pgj","html_url":"https://github.com/pgj","followers_url":"https://api.github.com/users/pgj/followers","following_url":"https://api.github.com/users/pgj/following{/other_user}","gists_url":"https://api.github.com/users/pgj/gists{/gist_id}","starred_url":"https://api.github.com/users/pgj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pgj/subscriptions","organizations_url":"https://api.github.com/users/pgj/orgs","repos_url":"https://api.github.com/users/pgj/repos","events_url":"https://api.github.com/users/pgj/events{/privacy}","received_events_url":"https://api.github.com/users/pgj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T07:07:00Z","updated_at":"2024-09-06T07:07:00Z","author_association":"CONTRIBUTOR","body":"> Is it to be able to run the tests against a separate cluster, not `localhost`?\r\n\r\nYes, that is the idea behind the change.  For example, it can come handy if one deployed a new CouchDB cluster and somehow wants to validate if it works as expected.  Especially if Clouseau (Search) has been added as well.\r\n\r\nOf course, other use cases might be possible.  I heard about a company who used integration tests as health checks by running and reporting on them on a schedule, i.e. hourly or daily.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333391137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333792447","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2333792447","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2333792447,"node_id":"IC_kwDOAAMmUc6LGti_","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T10:50:15Z","updated_at":"2024-09-06T10:50:15Z","author_association":"MEMBER","body":"what version of erlang do you have there?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333792447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333794800","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2333794800","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2333794800,"node_id":"IC_kwDOAAMmUc6LGuHw","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T10:51:50Z","updated_at":"2024-09-06T10:51:50Z","author_association":"MEMBER","body":"on erlang 25/26 this works;\r\n\r\n```\r\n1> ibrowse_lib:parse_url(\"http://[fdaa:a:d05:a7b:12:eb5a:cc23:2]:5984/_users/\").\r\n{url,\"http://[fdaa:a:d05:a7b:12:eb5a:cc23:2]:5984/_users/\",\r\n     \"fdaa:a:d05:a7b:12:eb5a:cc23:2\",5984,undefined,undefined,\r\n     \"/_users/\",http,ipv6_address}\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2333794800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334242400","html_url":"https://github.com/apache/couchdb/pull/5219#issuecomment-2334242400","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5219","id":2334242400,"node_id":"IC_kwDOAAMmUc6LIbZg","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T14:55:32Z","updated_at":"2024-09-06T14:55:32Z","author_association":"CONTRIBUTOR","body":"@pgj ah definitely, that's a good case.  Using tests as a health check is also a very neat idea.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334242400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334258304","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334258304","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334258304,"node_id":"IC_kwDOAAMmUc6LIfSA","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T15:03:41Z","updated_at":"2024-09-06T15:03:41Z","author_association":"NONE","body":"Whatever you're packing in your Debian packages. I'm having trouble tracking that down.\r\n\r\nI'm using a fork of the semi-official container https://github.com/teahouse-hosting/couchdb-docker/blob/trunk/3.3.3/Dockerfile that's been updated to bookworm. (submitted as https://github.com/apache/couchdb-docker/pull/259) And that uses the Apache jFrog repos.\r\n\r\nAlso, I suspect the bug isn't in parsing `http://[fdaa:a:d05:a7b:12:eb5a:cc23:2]:5984/_users/`, but when that's transformed into `http://fdaa:a:d05:a7b:12:eb5a:cc23:2/_session` as part of the replicator. (It looses both the `[]` and `:5984`.)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334258304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334267085","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334267085","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334267085,"node_id":"IC_kwDOAAMmUc6LIhbN","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T15:07:54Z","updated_at":"2024-09-06T15:07:54Z","author_association":"NONE","body":"https://github.com/apache/couchdb/blob/c4aac977d2e6eafc34fcad72b624fc02cf07d49f/src/couch_replicator/src/couch_replicator_auth_session.erl#L267-L282\r\n\r\nYou're using string concatenation instead of URL unparsing, so when `ibrowse_lib:parse_url()` drops the `[]`, it messes everything up.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334267085/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334273684","html_url":"https://github.com/apache/couchdb/issues/5224#issuecomment-2334273684","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5224","id":2334273684,"node_id":"IC_kwDOAAMmUc6LIjCU","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T15:11:31Z","updated_at":"2024-09-06T15:11:31Z","author_association":"CONTRIBUTOR","body":"Yeah agree. This is a long-standing issue. Another idea might be emit periodic markers (a row without a doc_id, or empty doc_id or something) with the current update sequence, so a checkpointer can checkpoint intermediate results. We already emit a `no_pass` ping from the node workers to the coordinator to keep the stream alive, we just don't emit it to the users.\r\n\r\nA timeout might work as well, but there is a danger there if we don't differentiate between a timeout expiring and finishing streaming.  It could lead to a sort of a data loss then, as users would consider all the data streamed when in fact we just timed-out early.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334273684/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334277410","html_url":"https://github.com/apache/couchdb/pull/5221#issuecomment-2334277410","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5221","id":2334277410,"node_id":"IC_kwDOAAMmUc6LIj8i","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T15:13:33Z","updated_at":"2024-09-06T15:13:33Z","author_association":"CONTRIBUTOR","body":"@pgj thanks for taking a look, I made a PR with the fixes: https://github.com/apache/couchdb/pull/5225","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334277410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334443386","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334443386","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334443386,"node_id":"IC_kwDOAAMmUc6LJMd6","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T16:44:37Z","updated_at":"2024-09-06T16:44:37Z","author_association":"MEMBER","body":"nice find, we'll get it fixed.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334443386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334462953","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334462953","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334462953,"node_id":"IC_kwDOAAMmUc6LJRPp","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T16:57:34Z","updated_at":"2024-09-06T16:57:34Z","author_association":"NONE","body":"Since I don't really know the Couch devs, I feel the need to point out that since the root of this bug is an API that's missing half its round-trip, this is probably a systemic bug in the Couch codebase--any part of the code that assembles or munges URLs is probably affected.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334462953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334482900","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334482900","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334482900,"node_id":"IC_kwDOAAMmUc6LJWHU","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T17:07:45Z","updated_at":"2024-09-06T17:07:45Z","author_association":"MEMBER","body":"I'm certainly alive to the notion that couchdb has more bugs around this than the one you've highlighted. :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334482900/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334569599","html_url":"https://github.com/apache/couchdb/issues/5223#issuecomment-2334569599","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5223","id":2334569599,"node_id":"IC_kwDOAAMmUc6LJrR_","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T18:03:10Z","updated_at":"2024-09-06T18:03:10Z","author_association":"MEMBER","body":"extra context: the replicator application is the only thing that makes outbound http connections and has only recently needed to construct a url (to the `_session` endpoint to acquire a cookie) from another url supplied by the user (either the source or target). so we are looking for other occurrences but there likely aren't any.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334569599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334640202","html_url":"https://github.com/apache/couchdb/issues/5227#issuecomment-2334640202","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5227","id":2334640202,"node_id":"IC_kwDOAAMmUc6LJ8hK","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T18:54:10Z","updated_at":"2024-09-06T19:00:25Z","author_association":"NONE","body":"And yes, I did verify the validity of the URL with `dig`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334640202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334668708","html_url":"https://github.com/apache/couchdb/issues/5227#issuecomment-2334668708","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5227","id":2334668708,"node_id":"IC_kwDOAAMmUc6LKDek","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T19:14:23Z","updated_at":"2024-09-06T19:14:23Z","author_association":"NONE","body":"Investigating this further with curl, I also stumbled on https://community.fly.io/t/unable-to-access-6pn-peers/21706 (Summary: fly's private networking isn't working the way I expected, causing TCP-level connection errors.)\r\n\r\nIt's possible that this is an invalid bug--this environment will report nxdomain for IPv4 (`A`), which might be the error reported if IPv6 also fails.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334668708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334685825","html_url":"https://github.com/apache/couchdb/issues/5227#issuecomment-2334685825","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5227","id":2334685825,"node_id":"IC_kwDOAAMmUc6LKHqB","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T19:28:08Z","updated_at":"2024-09-06T19:28:08Z","author_association":"NONE","body":"Ok, resolving the fly networking problem does not fix this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334685825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334694294","html_url":"https://github.com/apache/couchdb/issues/5227#issuecomment-2334694294","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5227","id":2334694294,"node_id":"IC_kwDOAAMmUc6LKJuW","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T19:34:36Z","updated_at":"2024-09-06T19:34:36Z","author_association":"CONTRIBUTOR","body":"A related option related to this is to force the replicator to prefer the ipv6 addresses if both are present: https://docs.couchdb.org/en/stable/config/replicator.html#replicator/ibrowse_options","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334694294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334702790","html_url":"https://github.com/apache/couchdb/issues/5227#issuecomment-2334702790","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5227","id":2334702790,"node_id":"IC_kwDOAAMmUc6LKLzG","user":{"login":"AstraLuma","id":401438,"node_id":"MDQ6VXNlcjQwMTQzOA==","avatar_url":"https://avatars.githubusercontent.com/u/401438?v=4","gravatar_id":"","url":"https://api.github.com/users/AstraLuma","html_url":"https://github.com/AstraLuma","followers_url":"https://api.github.com/users/AstraLuma/followers","following_url":"https://api.github.com/users/AstraLuma/following{/other_user}","gists_url":"https://api.github.com/users/AstraLuma/gists{/gist_id}","starred_url":"https://api.github.com/users/AstraLuma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AstraLuma/subscriptions","organizations_url":"https://api.github.com/users/AstraLuma/orgs","repos_url":"https://api.github.com/users/AstraLuma/repos","events_url":"https://api.github.com/users/AstraLuma/events{/privacy}","received_events_url":"https://api.github.com/users/AstraLuma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-06T19:40:53Z","updated_at":"2024-09-06T19:40:53Z","author_association":"NONE","body":"Thanks! Setting `ibrowse_options = [{prefer_ipv6, true}]` seems to be a functional work-around for me.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2334702790/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2346974487","html_url":"https://github.com/apache/couchdb/pull/5238#issuecomment-2346974487","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5238","id":2346974487,"node_id":"IC_kwDOAAMmUc6L4_0X","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-12T18:30:03Z","updated_at":"2024-09-12T18:30:03Z","author_association":"MEMBER","body":"the real test should be whether there's a user doc to update vs not. will fix in another pr","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2346974487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2348711531","html_url":"https://github.com/apache/couchdb/issues/5236#issuecomment-2348711531","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5236","id":2348711531,"node_id":"IC_kwDOAAMmUc6L_n5r","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-13T11:27:56Z","updated_at":"2024-09-13T11:27:56Z","author_association":"MEMBER","body":"would you be interested in submitting a PR?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2348711531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2349428896","html_url":"https://github.com/apache/couchdb/pull/5242#issuecomment-2349428896","issue_url":"https://api.github.com/repos/apache/couchdb/issues/5242","id":2349428896,"node_id":"IC_kwDOAAMmUc6MCXCg","user":{"login":"JKDingwall","id":1579636,"node_id":"MDQ6VXNlcjE1Nzk2MzY=","avatar_url":"https://avatars.githubusercontent.com/u/1579636?v=4","gravatar_id":"","url":"https://api.github.com/users/JKDingwall","html_url":"https://github.com/JKDingwall","followers_url":"https://api.github.com/users/JKDingwall/followers","following_url":"https://api.github.com/users/JKDingwall/following{/other_user}","gists_url":"https://api.github.com/users/JKDingwall/gists{/gist_id}","starred_url":"https://api.github.com/users/JKDingwall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JKDingwall/subscriptions","organizations_url":"https://api.github.com/users/JKDingwall/orgs","repos_url":"https://api.github.com/users/JKDingwall/repos","events_url":"https://api.github.com/users/JKDingwall/events{/privacy}","received_events_url":"https://api.github.com/users/JKDingwall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-13T16:56:33Z","updated_at":"2024-09-13T16:56:57Z","author_association":"CONTRIBUTOR","body":"I'm not sure how to test the changes to make sure that they render correctly and that the `:ref:\\`document endpoint <api/doc>\\`` works as expected.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/2349428896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]