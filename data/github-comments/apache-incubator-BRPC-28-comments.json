[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602002346","html_url":"https://github.com/apache/brpc/issues/1068#issuecomment-602002346","issue_url":"https://api.github.com/repos/apache/brpc/issues/1068","id":602002346,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjAwMjM0Ng==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-21T06:23:30Z","updated_at":"2020-03-21T06:23:30Z","author_association":"CONTRIBUTOR","body":"> 如果偶尔的话是可能的，测量latency的是wall-time，可能回退\r\n\r\n那这里为什么不考虑使用std::chrono::steady_clock这种来避免呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602002346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602026663","html_url":"https://github.com/apache/brpc/issues/1068#issuecomment-602026663","issue_url":"https://api.github.com/repos/apache/brpc/issues/1068","id":602026663,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjAyNjY2Mw==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-21T10:55:07Z","updated_at":"2020-03-21T10:55:07Z","author_association":"NONE","body":" monotonic time 会比 wall-time 慢，统计类的数据偶尔出现时钟回退影响不大，通常优先考虑效率","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602026663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602058009","html_url":"https://github.com/apache/brpc/issues/1068#issuecomment-602058009","issue_url":"https://api.github.com/repos/apache/brpc/issues/1068","id":602058009,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjA1ODAwOQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-21T15:08:16Z","updated_at":"2020-03-21T15:08:16Z","author_association":"CONTRIBUTOR","body":"> monotonic time 会比 wall-time 慢，统计类的数据偶尔出现时钟回退影响不大，通常优先考虑效率\r\n\r\n有道理。不过这种latency的数据出现这种情况，也会干扰对server是否正常的判断吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602058009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602058906","html_url":"https://github.com/apache/brpc/issues/1068#issuecomment-602058906","issue_url":"https://api.github.com/repos/apache/brpc/issues/1068","id":602058906,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjA1ODkwNg==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-21T15:15:50Z","updated_at":"2020-03-21T15:15:50Z","author_association":"NONE","body":"> > monotonic time 会比 wall-time 慢，统计类的数据偶尔出现时钟回退影响不大，通常优先考虑效率\r\n> \r\n> 有道理。不过这种latency的数据出现这种情况，也会干扰对server是否正常的判断吧\r\n\r\n正常情况下不会。这类指标都是统计意义上的，偶尔的异常会被平均下去","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602058906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602060617","html_url":"https://github.com/apache/brpc/issues/1068#issuecomment-602060617","issue_url":"https://api.github.com/repos/apache/brpc/issues/1068","id":602060617,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjA2MDYxNw==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-21T15:29:36Z","updated_at":"2020-03-21T15:29:36Z","author_association":"CONTRIBUTOR","body":"> > > monotonic time 会比 wall-time 慢，统计类的数据偶尔出现时钟回退影响不大，通常优先考虑效率\r\n> > \r\n> > \r\n> > 有道理。不过这种latency的数据出现这种情况，也会干扰对server是否正常的判断吧\r\n> \r\n> 正常情况下不会。这类指标都是统计意义上的，偶尔的异常会被平均下去\r\n\r\n但是会有异常日志吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602060617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602141011","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-602141011","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":602141011,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjE0MTAxMQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-22T03:08:41Z","updated_at":"2020-03-22T03:08:41Z","author_association":"CONTRIBUTOR","body":"> 选项`-reuse_addr`没有设置为false吧\r\n\r\n戈神，话说我使用的是单链接，场景也是一个client和一个server，reuse_addr不管设置什么值，也不该出现这个情况吧。我理解都是在复用一个连接。\r\n还是没太懂reuse_addr设为false的用意，求解答下，感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602141011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602417633","html_url":"https://github.com/apache/brpc/pull/749#issuecomment-602417633","issue_url":"https://api.github.com/repos/apache/brpc/issues/749","id":602417633,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMjQxNzYzMw==","user":{"login":"cmxcn","id":5006705,"node_id":"MDQ6VXNlcjUwMDY3MDU=","avatar_url":"https://avatars.githubusercontent.com/u/5006705?v=4","gravatar_id":"","url":"https://api.github.com/users/cmxcn","html_url":"https://github.com/cmxcn","followers_url":"https://api.github.com/users/cmxcn/followers","following_url":"https://api.github.com/users/cmxcn/following{/other_user}","gists_url":"https://api.github.com/users/cmxcn/gists{/gist_id}","starred_url":"https://api.github.com/users/cmxcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cmxcn/subscriptions","organizations_url":"https://api.github.com/users/cmxcn/orgs","repos_url":"https://api.github.com/users/cmxcn/repos","events_url":"https://api.github.com/users/cmxcn/events{/privacy}","received_events_url":"https://api.github.com/users/cmxcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-23T06:52:37Z","updated_at":"2020-03-23T06:52:37Z","author_association":"NONE","body":"大佬们请问下这个PR目前如何了？看起来是个非常诱人的feature。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/602417633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604169021","html_url":"https://github.com/apache/brpc/issues/1038#issuecomment-604169021","issue_url":"https://api.github.com/repos/apache/brpc/issues/1038","id":604169021,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDE2OTAyMQ==","user":{"login":"guangpec1","id":60089203,"node_id":"MDQ6VXNlcjYwMDg5MjAz","avatar_url":"https://avatars.githubusercontent.com/u/60089203?v=4","gravatar_id":"","url":"https://api.github.com/users/guangpec1","html_url":"https://github.com/guangpec1","followers_url":"https://api.github.com/users/guangpec1/followers","following_url":"https://api.github.com/users/guangpec1/following{/other_user}","gists_url":"https://api.github.com/users/guangpec1/gists{/gist_id}","starred_url":"https://api.github.com/users/guangpec1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangpec1/subscriptions","organizations_url":"https://api.github.com/users/guangpec1/orgs","repos_url":"https://api.github.com/users/guangpec1/repos","events_url":"https://api.github.com/users/guangpec1/events{/privacy}","received_events_url":"https://api.github.com/users/guangpec1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T01:04:38Z","updated_at":"2020-03-26T01:04:38Z","author_association":"NONE","body":"@jamesge @cdjingit  对于local queue队列满了，上面方案可行的，我们经过验证，并且已经应用到在线服务.  brpc 官方可以考虑一下，或有更好的方案，多谢.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604169021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604169887","html_url":"https://github.com/apache/brpc/issues/1035#issuecomment-604169887","issue_url":"https://api.github.com/repos/apache/brpc/issues/1035","id":604169887,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDE2OTg4Nw==","user":{"login":"guangpec1","id":60089203,"node_id":"MDQ6VXNlcjYwMDg5MjAz","avatar_url":"https://avatars.githubusercontent.com/u/60089203?v=4","gravatar_id":"","url":"https://api.github.com/users/guangpec1","html_url":"https://github.com/guangpec1","followers_url":"https://api.github.com/users/guangpec1/followers","following_url":"https://api.github.com/users/guangpec1/following{/other_user}","gists_url":"https://api.github.com/users/guangpec1/gists{/gist_id}","starred_url":"https://api.github.com/users/guangpec1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guangpec1/subscriptions","organizations_url":"https://api.github.com/users/guangpec1/orgs","repos_url":"https://api.github.com/users/guangpec1/repos","events_url":"https://api.github.com/users/guangpec1/events{/privacy}","received_events_url":"https://api.github.com/users/guangpec1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T01:07:36Z","updated_at":"2020-03-26T01:07:36Z","author_association":"NONE","body":"@cdjingit 上面的方案，我们经过实践验证是可行，多谢.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604169887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604203141","html_url":"https://github.com/apache/brpc/issues/1042#issuecomment-604203141","issue_url":"https://api.github.com/repos/apache/brpc/issues/1042","id":604203141,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDIwMzE0MQ==","user":{"login":"machh","id":8188104,"node_id":"MDQ6VXNlcjgxODgxMDQ=","avatar_url":"https://avatars.githubusercontent.com/u/8188104?v=4","gravatar_id":"","url":"https://api.github.com/users/machh","html_url":"https://github.com/machh","followers_url":"https://api.github.com/users/machh/followers","following_url":"https://api.github.com/users/machh/following{/other_user}","gists_url":"https://api.github.com/users/machh/gists{/gist_id}","starred_url":"https://api.github.com/users/machh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/machh/subscriptions","organizations_url":"https://api.github.com/users/machh/orgs","repos_url":"https://api.github.com/users/machh/repos","events_url":"https://api.github.com/users/machh/events{/privacy}","received_events_url":"https://api.github.com/users/machh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-26T03:10:44Z","updated_at":"2020-03-26T03:10:44Z","author_association":"NONE","body":"export LD_LIBRARY_PATH=/home/protobuf-2.6/lib\r\n\r\n指定protobuf动态库的路径即可。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604203141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604788857","html_url":"https://github.com/apache/brpc/issues/1074#issuecomment-604788857","issue_url":"https://api.github.com/repos/apache/brpc/issues/1074","id":604788857,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNDc4ODg1Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-27T02:56:56Z","updated_at":"2020-03-27T02:56:56Z","author_association":"CONTRIBUTOR","body":"不支持，此类功能都需要对接用户的LogSink自行完成。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/604788857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/605553124","html_url":"https://github.com/apache/brpc/issues/1075#issuecomment-605553124","issue_url":"https://api.github.com/repos/apache/brpc/issues/1075","id":605553124,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTU1MzEyNA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-29T03:32:34Z","updated_at":"2020-03-29T03:32:34Z","author_association":"MEMBER","body":"curl传输的时候，会设置 Expect: 100-continue, 这个协议brpc本身没有实现, 所以curl对等待一个超时。\r\n加上 `-H 'Expect:'`  可以解决这个问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/605553124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/605769359","html_url":"https://github.com/apache/brpc/issues/1075#issuecomment-605769359","issue_url":"https://api.github.com/repos/apache/brpc/issues/1075","id":605769359,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNTc2OTM1OQ==","user":{"login":"billtenor","id":10627561,"node_id":"MDQ6VXNlcjEwNjI3NTYx","avatar_url":"https://avatars.githubusercontent.com/u/10627561?v=4","gravatar_id":"","url":"https://api.github.com/users/billtenor","html_url":"https://github.com/billtenor","followers_url":"https://api.github.com/users/billtenor/followers","following_url":"https://api.github.com/users/billtenor/following{/other_user}","gists_url":"https://api.github.com/users/billtenor/gists{/gist_id}","starred_url":"https://api.github.com/users/billtenor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/billtenor/subscriptions","organizations_url":"https://api.github.com/users/billtenor/orgs","repos_url":"https://api.github.com/users/billtenor/repos","events_url":"https://api.github.com/users/billtenor/events{/privacy}","received_events_url":"https://api.github.com/users/billtenor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-30T03:58:53Z","updated_at":"2020-03-30T03:58:53Z","author_association":"NONE","body":"加上 -H 'Expect:'，问题解决了，非常感谢！\r\n我记得我仔细看过文档，这个信息好像没在文档里，可以更新一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/605769359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606587991","html_url":"https://github.com/apache/brpc/issues/1078#issuecomment-606587991","issue_url":"https://api.github.com/repos/apache/brpc/issues/1078","id":606587991,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjU4Nzk5MQ==","user":{"login":"rickonji","id":46045107,"node_id":"MDQ6VXNlcjQ2MDQ1MTA3","avatar_url":"https://avatars.githubusercontent.com/u/46045107?v=4","gravatar_id":"","url":"https://api.github.com/users/rickonji","html_url":"https://github.com/rickonji","followers_url":"https://api.github.com/users/rickonji/followers","following_url":"https://api.github.com/users/rickonji/following{/other_user}","gists_url":"https://api.github.com/users/rickonji/gists{/gist_id}","starred_url":"https://api.github.com/users/rickonji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rickonji/subscriptions","organizations_url":"https://api.github.com/users/rickonji/orgs","repos_url":"https://api.github.com/users/rickonji/repos","events_url":"https://api.github.com/users/rickonji/events{/privacy}","received_events_url":"https://api.github.com/users/rickonji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T12:11:43Z","updated_at":"2020-03-31T12:11:43Z","author_association":"NONE","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606587991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606601855","html_url":"https://github.com/apache/brpc/issues/1078#issuecomment-606601855","issue_url":"https://api.github.com/repos/apache/brpc/issues/1078","id":606601855,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjYwMTg1NQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T12:40:58Z","updated_at":"2020-03-31T12:40:58Z","author_association":"MEMBER","body":"目前的框架不支持，可以自己encode 数据.\r\n框架支持的话，需要升级下协议支持在数据流里面有序插入一些控制流.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606601855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606610392","html_url":"https://github.com/apache/brpc/issues/1079#issuecomment-606610392","issue_url":"https://api.github.com/repos/apache/brpc/issues/1079","id":606610392,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjYxMDM5Mg==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T12:58:24Z","updated_at":"2020-03-31T12:58:24Z","author_association":"MEMBER","body":"exuection queue的close自带flush语义","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606610392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606660417","html_url":"https://github.com/apache/brpc/issues/1077#issuecomment-606660417","issue_url":"https://api.github.com/repos/apache/brpc/issues/1077","id":606660417,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNjY2MDQxNw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-31T14:24:12Z","updated_at":"2020-03-31T14:24:12Z","author_association":"MEMBER","body":"符合预期，socket建连是发生在第一次发送数据的时候。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/606660417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607160993","html_url":"https://github.com/apache/brpc/issues/1077#issuecomment-607160993","issue_url":"https://api.github.com/repos/apache/brpc/issues/1077","id":607160993,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzE2MDk5Mw==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-01T10:12:24Z","updated_at":"2020-04-01T10:12:24Z","author_association":"CONTRIBUTOR","body":"> 符合预期，socket建连是发生在第一次发送数据的时候。\r\n\r\n哦。init channel的时候，只是检查了ip port的格式对不对？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607160993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607584393","html_url":"https://github.com/apache/brpc/issues/1077#issuecomment-607584393","issue_url":"https://api.github.com/repos/apache/brpc/issues/1077","id":607584393,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzU4NDM5Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T02:23:15Z","updated_at":"2020-04-02T02:23:15Z","author_association":"MEMBER","body":"> > 符合预期，socket建连是发生在第一次发送数据的时候。\r\n> \r\n> 哦。init channel的时候，只是检查了ip port的格式对不对？\r\n\r\n嗯，另外如果访问集群的话，会去访问naming service得到集群列表","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607584393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607594551","html_url":"https://github.com/apache/brpc/issues/1077#issuecomment-607594551","issue_url":"https://api.github.com/repos/apache/brpc/issues/1077","id":607594551,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzU5NDU1MQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T03:02:19Z","updated_at":"2020-04-02T03:02:29Z","author_association":"CONTRIBUTOR","body":"明白了。感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607594551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607601109","html_url":"https://github.com/apache/brpc/issues/1080#issuecomment-607601109","issue_url":"https://api.github.com/repos/apache/brpc/issues/1080","id":607601109,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzYwMTEwOQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T03:30:02Z","updated_at":"2020-04-02T03:30:02Z","author_association":"MEMBER","body":"如果connection指的是tcp connection的话， 是一对多的. 一个connection上可以有多个stream.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/607601109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/612737106","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-612737106","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":612737106,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjczNzEwNg==","user":{"login":"yockie","id":2568971,"node_id":"MDQ6VXNlcjI1Njg5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/2568971?v=4","gravatar_id":"","url":"https://api.github.com/users/yockie","html_url":"https://github.com/yockie","followers_url":"https://api.github.com/users/yockie/followers","following_url":"https://api.github.com/users/yockie/following{/other_user}","gists_url":"https://api.github.com/users/yockie/gists{/gist_id}","starred_url":"https://api.github.com/users/yockie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yockie/subscriptions","organizations_url":"https://api.github.com/users/yockie/orgs","repos_url":"https://api.github.com/users/yockie/repos","events_url":"https://api.github.com/users/yockie/events{/privacy}","received_events_url":"https://api.github.com/users/yockie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T03:48:27Z","updated_at":"2020-04-13T03:48:27Z","author_association":"CONTRIBUTOR","body":"> 应该是超时没生效，死锁了\r\n\r\n老哥这个问题怎么解决的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/612737106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/612738870","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-612738870","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":612738870,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjczODg3MA==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T03:58:22Z","updated_at":"2020-04-13T03:58:22Z","author_association":"NONE","body":"bthread 和 pthread 混用有冲突，要么全换成bthread，要么改成pthread模式\r\n\r\n\r\n\r\n\r\n------------------&nbsp;原始邮件&nbsp;------------------\r\n发件人:&nbsp;\"youcheng huang\"<notifications@github.com&gt;;\r\n发送时间:&nbsp;2020年4月13日(星期一) 中午11:48\r\n收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;;\r\n抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;;\r\n主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962)\r\n\r\n\r\n\r\n\r\n\r\n  \r\n应该是超时没生效，死锁了\r\n  \r\n老哥这个问题怎么解决的？\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or unsubscribe.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/612738870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613164997","html_url":"https://github.com/apache/brpc/issues/1084#issuecomment-613164997","issue_url":"https://api.github.com/repos/apache/brpc/issues/1084","id":613164997,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzE2NDk5Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T00:43:06Z","updated_at":"2020-04-14T00:43:06Z","author_association":"CONTRIBUTOR","body":"可以直接上示例代码看看吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613164997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613165342","html_url":"https://github.com/apache/brpc/issues/1083#issuecomment-613165342","issue_url":"https://api.github.com/repos/apache/brpc/issues/1083","id":613165342,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzE2NTM0Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T00:44:38Z","updated_at":"2020-04-14T00:44:48Z","author_association":"CONTRIBUTOR","body":"> 计算qps使用的_q队列   \r\n\r\n这是什么？建议贴下你的代码和效果图","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613165342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613169520","html_url":"https://github.com/apache/brpc/issues/1082#issuecomment-613169520","issue_url":"https://api.github.com/repos/apache/brpc/issues/1082","id":613169520,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzE2OTUyMA==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T01:01:44Z","updated_at":"2020-04-14T01:01:44Z","author_association":"CONTRIBUTOR","body":"临时的Channel实例化太多了吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613169520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613206338","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613206338","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613206338,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzIwNjMzOA==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T03:27:28Z","updated_at":"2020-04-14T03:27:28Z","author_association":"NONE","body":"passive status里是不是有用bthread mutex的？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613206338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613206572","html_url":"https://github.com/apache/brpc/issues/962#issuecomment-613206572","issue_url":"https://api.github.com/repos/apache/brpc/issues/962","id":613206572,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzIwNjU3Mg==","user":{"login":"yockie","id":2568971,"node_id":"MDQ6VXNlcjI1Njg5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/2568971?v=4","gravatar_id":"","url":"https://api.github.com/users/yockie","html_url":"https://github.com/yockie","followers_url":"https://api.github.com/users/yockie/followers","following_url":"https://api.github.com/users/yockie/following{/other_user}","gists_url":"https://api.github.com/users/yockie/gists{/gist_id}","starred_url":"https://api.github.com/users/yockie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yockie/subscriptions","organizations_url":"https://api.github.com/users/yockie/orgs","repos_url":"https://api.github.com/users/yockie/repos","events_url":"https://api.github.com/users/yockie/events{/privacy}","received_events_url":"https://api.github.com/users/yockie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T03:28:33Z","updated_at":"2020-04-14T03:28:33Z","author_association":"CONTRIBUTOR","body":"> bthread 和 pthread 混用有冲突，要么全换成bthread，要么改成pthread模式\r\n> […](#)\r\n> ------------------&nbsp;原始邮件&nbsp;------------------ 发件人:&nbsp;\"youcheng huang\"<notifications@github.com&gt;; 发送时间:&nbsp;2020年4月13日(星期一) 中午11:48 收件人:&nbsp;\"apache/incubator-brpc\"<incubator-brpc@noreply.github.com&gt;; 抄送:&nbsp;\"郭灿文\"<326756760@qq.com&gt;;\"Author\"<author@noreply.github.com&gt;; 主题:&nbsp;Re: [apache/incubator-brpc] brpc block timeout (#962) 应该是超时没生效，死锁了 老哥这个问题怎么解决的？ — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub, or unsubscribe.\r\n\r\n我们启动参数已经设置usercode_in_pthread=true，全部使用pthread，但是产生的现象跟你的非常相似，而且超时也没生效","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613206572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613207192","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613207192","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613207192,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzIwNzE5Mg==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T03:31:16Z","updated_at":"2020-04-14T03:32:40Z","author_association":"NONE","body":"如果是在PassiveStatus里用了 bthread mutex，可能是内部版本fix过的一个问题。这里会有一个pthread mutex 下用 bthread mutex的嵌套。\r\n\r\n问题出在这段代码\r\n\r\nstruct VarMapWithLock : public VarMap {\r\n    pthread_mutex_t mutex;\r\n\r\n    VarMapWithLock() {\r\n        CHECK_EQ(0, init(1024, 80));\r\n        pthread_mutexattr_t attr;\r\n        pthread_mutexattr_init(&attr);\r\n        **pthread_mutexattr_settype(&attr, PTHREAD_MUTEX_RECURSIVE);**\r\n        pthread_mutex_init(&mutex, &attr);\r\n        pthread_mutexattr_destroy(&attr);\r\n    }\r\n};\r\n\r\n这里的pthread mutex可能重入，重入的pthread mutex在lock/unlock的时候会检查owner，即pthread id。bthread切换后，这个条件不再满足，导致锁未unlock。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613207192/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613339757","html_url":"https://github.com/apache/brpc/issues/763#issuecomment-613339757","issue_url":"https://api.github.com/repos/apache/brpc/issues/763","id":613339757,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzMzOTc1Nw==","user":{"login":"yockie","id":2568971,"node_id":"MDQ6VXNlcjI1Njg5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/2568971?v=4","gravatar_id":"","url":"https://api.github.com/users/yockie","html_url":"https://github.com/yockie","followers_url":"https://api.github.com/users/yockie/followers","following_url":"https://api.github.com/users/yockie/following{/other_user}","gists_url":"https://api.github.com/users/yockie/gists{/gist_id}","starred_url":"https://api.github.com/users/yockie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yockie/subscriptions","organizations_url":"https://api.github.com/users/yockie/orgs","repos_url":"https://api.github.com/users/yockie/repos","events_url":"https://api.github.com/users/yockie/events{/privacy}","received_events_url":"https://api.github.com/users/yockie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T09:47:31Z","updated_at":"2020-04-14T09:47:31Z","author_association":"CONTRIBUTOR","body":"> pthread 和 brpc 的 pthrea\r\n\r\n老哥，brpc的pthread为啥会等你自己的pthread？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613339757/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613346108","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613346108","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613346108,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzM0NjEwOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T10:01:35Z","updated_at":"2020-04-14T10:01:35Z","author_association":"CONTRIBUTOR","body":"@PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n\r\n@crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613346108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613350605","html_url":"https://github.com/apache/brpc/issues/1084#issuecomment-613350605","issue_url":"https://api.github.com/repos/apache/brpc/issues/1084","id":613350605,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzM1MDYwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-14T10:11:20Z","updated_at":"2020-04-14T10:11:29Z","author_association":"CONTRIBUTOR","body":"> 改成“析构第一个node；用第二个node拷贝构造第一个node；”\r\n\r\n之后不还是要析构“第二个node”么？如果拷贝构造也仅是拷贝下id，第二个node析构后，留在第一个node里的id仍然是野的。\r\n\r\n这里的问题是放在FlatMap中的对象没有正确地实现operator=（以及拷贝构造函数）。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613350605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613789099","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613789099","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613789099,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzc4OTA5OQ==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T03:06:00Z","updated_at":"2020-04-15T03:06:00Z","author_association":"NONE","body":"> @PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n> \r\n> @crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？\r\n\r\n嗯，不使用的话，不会有问题。另外，这个问题是可以fix的，PTHREAD_MUTEX_RECURSIVE 是为了fix另外一个问题引入的，改掉后可以兼容这个情况。\r\n我把那个patch pick出来提个pull request。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613789099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613790367","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613790367","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613790367,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzc5MDM2Nw==","user":{"login":"wu-hanqing","id":10327590,"node_id":"MDQ6VXNlcjEwMzI3NTkw","avatar_url":"https://avatars.githubusercontent.com/u/10327590?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-hanqing","html_url":"https://github.com/wu-hanqing","followers_url":"https://api.github.com/users/wu-hanqing/followers","following_url":"https://api.github.com/users/wu-hanqing/following{/other_user}","gists_url":"https://api.github.com/users/wu-hanqing/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-hanqing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-hanqing/subscriptions","organizations_url":"https://api.github.com/users/wu-hanqing/orgs","repos_url":"https://api.github.com/users/wu-hanqing/repos","events_url":"https://api.github.com/users/wu-hanqing/events{/privacy}","received_events_url":"https://api.github.com/users/wu-hanqing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T03:11:05Z","updated_at":"2020-04-15T03:11:05Z","author_association":"NONE","body":"> @PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n> \r\n> @crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？\r\n\r\n现场已经恢复了，而且没有符号表，所以也看不到变量的地址。后续我们会尝试复现，有进展会更新。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613790367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613790726","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613790726","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613790726,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzc5MDcyNg==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T03:12:39Z","updated_at":"2020-04-15T03:12:39Z","author_association":"NONE","body":"> > @PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n> > @crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？\r\n> \r\n> 现场已经恢复了，而且没有符号表，所以也看不到变量的地址。后续我们会尝试复现，有进展会更新。\r\n\r\n你可以确认下我说的这个问题，查找一下代码里所有的PassiveStatus，如果有的话，大概率就是这个了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613790726/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613791620","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613791620","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613791620,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzc5MTYyMA==","user":{"login":"wu-hanqing","id":10327590,"node_id":"MDQ6VXNlcjEwMzI3NTkw","avatar_url":"https://avatars.githubusercontent.com/u/10327590?v=4","gravatar_id":"","url":"https://api.github.com/users/wu-hanqing","html_url":"https://github.com/wu-hanqing","followers_url":"https://api.github.com/users/wu-hanqing/followers","following_url":"https://api.github.com/users/wu-hanqing/following{/other_user}","gists_url":"https://api.github.com/users/wu-hanqing/gists{/gist_id}","starred_url":"https://api.github.com/users/wu-hanqing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wu-hanqing/subscriptions","organizations_url":"https://api.github.com/users/wu-hanqing/orgs","repos_url":"https://api.github.com/users/wu-hanqing/repos","events_url":"https://api.github.com/users/wu-hanqing/events{/privacy}","received_events_url":"https://api.github.com/users/wu-hanqing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T03:15:53Z","updated_at":"2020-04-15T03:15:53Z","author_association":"NONE","body":"> > > @PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n> > > @crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？\r\n> > \r\n> > \r\n> > 现场已经恢复了，而且没有符号表，所以也看不到变量的地址。后续我们会尝试复现，有进展会更新。\r\n> \r\n> 你可以确认下我说的这个问题，查找一下代码里所有的PassiveStatus，如果有的话，大概率就是这个了\r\n\r\n我们自己的SDK中只有一处用到了bvar::PassiveStatus<std::string>，对应的回调只是一个简单的取值\r\n```c++\r\nstatic void GetStringValue(std::ostream& os, void* arg) {\r\n    os << *static_cast<std::string*>(arg);\r\n}\r\n```\r\n这里没有用到锁。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613791620/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613791852","html_url":"https://github.com/apache/brpc/issues/1085#issuecomment-613791852","issue_url":"https://api.github.com/repos/apache/brpc/issues/1085","id":613791852,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzc5MTg1Mg==","user":{"login":"PFZheng","id":3984083,"node_id":"MDQ6VXNlcjM5ODQwODM=","avatar_url":"https://avatars.githubusercontent.com/u/3984083?v=4","gravatar_id":"","url":"https://api.github.com/users/PFZheng","html_url":"https://github.com/PFZheng","followers_url":"https://api.github.com/users/PFZheng/followers","following_url":"https://api.github.com/users/PFZheng/following{/other_user}","gists_url":"https://api.github.com/users/PFZheng/gists{/gist_id}","starred_url":"https://api.github.com/users/PFZheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PFZheng/subscriptions","organizations_url":"https://api.github.com/users/PFZheng/orgs","repos_url":"https://api.github.com/users/PFZheng/repos","events_url":"https://api.github.com/users/PFZheng/events{/privacy}","received_events_url":"https://api.github.com/users/PFZheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T03:16:50Z","updated_at":"2020-04-15T03:17:34Z","author_association":"NONE","body":"> > > > @PFZheng 这个fix就是避免在回调中使用bthread mutex么？\r\n> > > > @crystalyouth 能看下thread 7中的mutex指针和其他线程中的是同一个么？\r\n> > > \r\n> > > \r\n> > > 现场已经恢复了，而且没有符号表，所以也看不到变量的地址。后续我们会尝试复现，有进展会更新。\r\n> > \r\n> > \r\n> > 你可以确认下我说的这个问题，查找一下代码里所有的PassiveStatus，如果有的话，大概率就是这个了\r\n> \r\n> 我们自己的SDK中只有一处用到了bvar::PassiveStatusstd::string，对应的回调只是一个简单的取值\r\n> \r\n> ```c++\r\n> static void GetStringValue(std::ostream& os, void* arg) {\r\n>     os << *static_cast<std::string*>(arg);\r\n> }\r\n> ```\r\n> \r\n> 这里没有用到锁。\r\n\r\n那不是这个问题。这个问题发生的前提是要有bthread切换","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/613791852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614390486","html_url":"https://github.com/apache/brpc/issues/1087#issuecomment-614390486","issue_url":"https://api.github.com/repos/apache/brpc/issues/1087","id":614390486,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDM5MDQ4Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T03:10:26Z","updated_at":"2020-04-16T03:10:26Z","author_association":"MEMBER","body":"grpc client默认的window size是65K，如果请求的response超过这个值，需要设置一下grpc client的stream_size","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614390486/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614419018","html_url":"https://github.com/apache/brpc/issues/1087#issuecomment-614419018","issue_url":"https://api.github.com/repos/apache/brpc/issues/1087","id":614419018,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDQxOTAxOA==","user":{"login":"hpsdy","id":10432981,"node_id":"MDQ6VXNlcjEwNDMyOTgx","avatar_url":"https://avatars.githubusercontent.com/u/10432981?v=4","gravatar_id":"","url":"https://api.github.com/users/hpsdy","html_url":"https://github.com/hpsdy","followers_url":"https://api.github.com/users/hpsdy/followers","following_url":"https://api.github.com/users/hpsdy/following{/other_user}","gists_url":"https://api.github.com/users/hpsdy/gists{/gist_id}","starred_url":"https://api.github.com/users/hpsdy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hpsdy/subscriptions","organizations_url":"https://api.github.com/users/hpsdy/orgs","repos_url":"https://api.github.com/users/hpsdy/repos","events_url":"https://api.github.com/users/hpsdy/events{/privacy}","received_events_url":"https://api.github.com/users/hpsdy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T05:09:36Z","updated_at":"2020-04-16T05:09:36Z","author_association":"NONE","body":"嗯，发现单独设置stream_size无效，加上connect size，maxmessagesize 已经OK了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614419018/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614482902","html_url":"https://github.com/apache/brpc/issues/1088#issuecomment-614482902","issue_url":"https://api.github.com/repos/apache/brpc/issues/1088","id":614482902,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDQ4MjkwMg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T08:02:06Z","updated_at":"2020-04-16T08:02:06Z","author_association":"CONTRIBUTOR","body":"[tracing](https://github.com/apache/incubator-brpc/blob/master/docs/cn/rpcz.md)有类似的作用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614482902/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614486542","html_url":"https://github.com/apache/brpc/issues/1089#issuecomment-614486542","issue_url":"https://api.github.com/repos/apache/brpc/issues/1089","id":614486542,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDQ4NjU0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T08:08:55Z","updated_at":"2020-04-16T08:08:55Z","author_association":"CONTRIBUTOR","body":"server端关闭连接大概率会导致client端关闭连接，下次rpc时会按需创建连接，对用户是透明的。即使一些原因下（fin包丢失）client端没关闭连接，下次写时也会发现，重试会解决这个问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614486542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614518344","html_url":"https://github.com/apache/brpc/issues/1089#issuecomment-614518344","issue_url":"https://api.github.com/repos/apache/brpc/issues/1089","id":614518344,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDUxODM0NA==","user":{"login":"nju2012zcl","id":10202816,"node_id":"MDQ6VXNlcjEwMjAyODE2","avatar_url":"https://avatars.githubusercontent.com/u/10202816?v=4","gravatar_id":"","url":"https://api.github.com/users/nju2012zcl","html_url":"https://github.com/nju2012zcl","followers_url":"https://api.github.com/users/nju2012zcl/followers","following_url":"https://api.github.com/users/nju2012zcl/following{/other_user}","gists_url":"https://api.github.com/users/nju2012zcl/gists{/gist_id}","starred_url":"https://api.github.com/users/nju2012zcl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nju2012zcl/subscriptions","organizations_url":"https://api.github.com/users/nju2012zcl/orgs","repos_url":"https://api.github.com/users/nju2012zcl/repos","events_url":"https://api.github.com/users/nju2012zcl/events{/privacy}","received_events_url":"https://api.github.com/users/nju2012zcl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T09:07:01Z","updated_at":"2020-04-16T12:21:54Z","author_association":"NONE","body":"client使用brpc的方式访问clb，clb再访问real server，现在的问题是clb会释放和real server长时间静默的链接(client无感知)，client再次调用clb时clb也不返回rst(什么都不返回)，导致client一直收到timeout。tcp重试十几分钟后，才会重建链接，恢复正常。\r\n\r\n所以希望brpc能够设置间隔一定时间ping一下clb；或者client能够主动断开连接，下次调用时再重连。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/614518344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616256243","html_url":"https://github.com/apache/brpc/issues/1089#issuecomment-616256243","issue_url":"https://api.github.com/repos/apache/brpc/issues/1089","id":616256243,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjI1NjI0Mw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-20T00:56:28Z","updated_at":"2020-04-20T00:56:28Z","author_association":"CONTRIBUTOR","body":"听起来是CLB的工作方式不太符合预期？释放连接后，当有新的数据包需要传输时，应该和real server重新建立可用连接才对。不管CLB工作在4层还是7层，都应该有相应的处理机制。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616256243/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616898361","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-616898361","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":616898361,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjg5ODM2MQ==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-21T01:37:04Z","updated_at":"2020-04-21T01:37:04Z","author_association":"CONTRIBUTOR","body":"1、尽管是单连接，但实例析构之后，连接不会得到复用，而是会重复建立连接。（这一点用ss命令查看确认一下即可）  \r\n2、reuse_addr 保持默认的true即可，但这个选项和你遇到的问题关系应该不大，怎么设置都解决不了你遇到的问题。原因是从brpc的实现来看，reuse_addr这个开关只对server端的listen动作管用，对于client端的connect动作是没有任何作用的。  \r\n综上，要解决你的问题，应该让channel实例得到复用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616898361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616909450","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-616909450","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":616909450,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjkwOTQ1MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-21T02:16:17Z","updated_at":"2020-04-21T02:16:17Z","author_association":"CONTRIBUTOR","body":"arm64 is already supported, aarch64 is the same thing?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616909450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616910498","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-616910498","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":616910498,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjkxMDQ5OA==","user":{"login":"darmac","id":29532367,"node_id":"MDQ6VXNlcjI5NTMyMzY3","avatar_url":"https://avatars.githubusercontent.com/u/29532367?v=4","gravatar_id":"","url":"https://api.github.com/users/darmac","html_url":"https://github.com/darmac","followers_url":"https://api.github.com/users/darmac/followers","following_url":"https://api.github.com/users/darmac/following{/other_user}","gists_url":"https://api.github.com/users/darmac/gists{/gist_id}","starred_url":"https://api.github.com/users/darmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darmac/subscriptions","organizations_url":"https://api.github.com/users/darmac/orgs","repos_url":"https://api.github.com/users/darmac/repos","events_url":"https://api.github.com/users/darmac/events{/privacy}","received_events_url":"https://api.github.com/users/darmac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-21T02:19:48Z","updated_at":"2020-04-21T02:19:59Z","author_association":"NONE","body":"Yes, but there are some build error on aarch64 paltform.\r\nI'll report the error later. \r\nAnother thing, maybe we can communication with Chinese??","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616910498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616911487","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-616911487","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":616911487,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNjkxMTQ4Nw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-21T02:23:03Z","updated_at":"2020-04-21T02:23:03Z","author_association":"CONTRIBUTOR","body":"It's ok to report issues in chinese, and we'll respond with the same language correspondingly.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/616911487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618147749","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-618147749","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":618147749,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODE0Nzc0OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T02:58:19Z","updated_at":"2020-04-23T02:58:19Z","author_association":"MEMBER","body":"可以复现吗？日志上有什么异常吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618147749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618229774","html_url":"https://github.com/apache/brpc/issues/1064#issuecomment-618229774","issue_url":"https://api.github.com/repos/apache/brpc/issues/1064","id":618229774,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODIyOTc3NA==","user":{"login":"steel2013","id":53460946,"node_id":"MDQ6VXNlcjUzNDYwOTQ2","avatar_url":"https://avatars.githubusercontent.com/u/53460946?v=4","gravatar_id":"","url":"https://api.github.com/users/steel2013","html_url":"https://github.com/steel2013","followers_url":"https://api.github.com/users/steel2013/followers","following_url":"https://api.github.com/users/steel2013/following{/other_user}","gists_url":"https://api.github.com/users/steel2013/gists{/gist_id}","starred_url":"https://api.github.com/users/steel2013/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steel2013/subscriptions","organizations_url":"https://api.github.com/users/steel2013/orgs","repos_url":"https://api.github.com/users/steel2013/repos","events_url":"https://api.github.com/users/steel2013/events{/privacy}","received_events_url":"https://api.github.com/users/steel2013/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T07:26:12Z","updated_at":"2020-04-23T07:59:56Z","author_association":"NONE","body":"@jamesge 偶现bthread_worker_usage是bthread_worker_count的2至3倍，一旦出现，就会一直持续，此时服务出现卡顿，api响应很慢，将此服务节点lvs负载关闭，bthread_worker_usage即恢复正常，维持在1左右，再次打开负载，又出现bthread_worker_usage是bthread_worker_count的2至3倍，此时抓取堆栈，如下：\r\nThread 16 (Thread 0x7fe05b9f9700 (LWP 27903)):\r\n#0  0x00007fe09056dba9 in syscall () from /lib64/libc.so.6\r\n#1  0x00007fe091ebaa3e in bthread::TaskGroup::wait_task(unsigned long*) () from ./libbrpc.so\r\n#2  0x00007fe091ebcb3b in bthread::TaskGroup::run_main_task() () from ./libbrpc.so\r\n#3  0x00007fe091eb87ee in bthread::TaskControl::worker_thread(void*) () from ./libbrpc.so\r\n#4  0x00007fe090260e65 in start_thread () from /lib64/libpthread.so.0\r\n#5  0x00007fe09057388d in clone () from /lib64/libc.so.6\r\n出现大量上述堆栈信息\r\n另一次堆栈如下\r\nThread 20 (Thread 0x7f1c0cdfa700 (LWP 22801)):\r\n#0  0x00007f1c3702b57c in __lll_lock_wait_private () from /lib64/libc.so.6\r\n#1  0x00007f1c36f8e7c4 in _L_lock_62 () from /lib64/libc.so.6\r\n#2  0x00007f1c36f8e64e in fwrite () from /lib64/libc.so.6\r\n#3  0x00007f1c3789b642 in std::ostream::write(char const*, long) () from /lib64/libstdc++.so.6\r\n#4  0x00007f1c389192ca in butil::operator<<(std::ostream&, butil::IOBuf const&) () from ./libbrpc.so\r\n#5  0x00007f1c38a22323 in brpc::policy::PrintMessage(butil::IOBuf const&, bool, bool) () from ./libbrpc.so\r\n#6  0x00007f1c38a25ffa in brpc::policy::SendHttpResponse(brpc::Controller*, google::protobuf::Message const*, google::protobuf::Message const*, brpc::Server const*, brpc::MethodStatus*, long) () from ./libbrpc.so\r\n#7  0x00007f1c38a2822a in brpc::internal::FunctionClosure6<brpc::Controller*, google::protobuf::Message const*, google::protobuf::Message const*, brpc::Server const*, brpc::MethodStatus*, long>::Run() () from ./libbrpc.so\r\n#8  0x00007f1c389d1299 in brpc::VarsService::default_method(google::protobuf::RpcController*, brpc::VarsRequest const*, brpc::VarsResponse*, google::protobuf::Closure*) () from ./libbrpc.so\r\n#9  0x00007f1c38abd4f5 in brpc::vars::CallMethod(google::protobuf::MethodDescriptor const*, google::protobuf::RpcController*, google::protobuf::Message const*, google::protobuf::Message*, google::protobuf::Closure*) () from ./libbrpc.so\r\n#10 0x00007f1c38a274e6 in brpc::policy::ProcessHttpRequest(brpc::InputMessageBase*) () from ./libbrpc.so\r\n#11 0x00007f1c38a01d1a in brpc::ProcessInputMessage(void*) () from ./libbrpc.so\r\n#12 0x00007f1c38a02d04 in brpc::InputMessenger::OnNewMessages(brpc::Socket*) () from ./libbrpc.so\r\n#13 0x00007f1c38a9a8bd in brpc::Socket::ProcessEvent(void*) () from ./libbrpc.so\r\n#14 0x00007f1c389668ea in bthread::TaskGroup::task_runner(long) () from ./libbrpc.so\r\n#15 0x00007f1c3894f741 in bthread_make_fcontext () from ./libbrpc.so\r\n#16 0x0000000000000000 in ?? ()\r\n\r\n\r\n重启服务后，打开负载，即可恢复正常。\r\n![image](https://user-images.githubusercontent.com/53460946/80071432-33824800-8577-11ea-87cd-81ea8b64168f.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618229774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618258608","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-618258608","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":618258608,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI1ODYwOA==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T08:26:36Z","updated_at":"2020-04-23T08:26:36Z","author_association":"NONE","body":"不能复现，当时很多请求都超时（120ms）\r\n需要补充的是：部分server是grpc，部分server是brpc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618258608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269365","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-618269365","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":618269365,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI2OTM2NQ==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T08:48:14Z","updated_at":"2020-04-23T08:48:14Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/11960192/80078972-37679780-8582-11ea-8350-7c5571b6d841.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269513","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-618269513","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":618269513,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI2OTUxMw==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T08:48:32Z","updated_at":"2020-04-23T08:48:32Z","author_association":"NONE","body":"很多这样的异常","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269803","html_url":"https://github.com/apache/brpc/issues/1093#issuecomment-618269803","issue_url":"https://api.github.com/repos/apache/brpc/issues/1093","id":618269803,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODI2OTgwMw==","user":{"login":"guocanwen","id":11960192,"node_id":"MDQ6VXNlcjExOTYwMTky","avatar_url":"https://avatars.githubusercontent.com/u/11960192?v=4","gravatar_id":"","url":"https://api.github.com/users/guocanwen","html_url":"https://github.com/guocanwen","followers_url":"https://api.github.com/users/guocanwen/followers","following_url":"https://api.github.com/users/guocanwen/following{/other_user}","gists_url":"https://api.github.com/users/guocanwen/gists{/gist_id}","starred_url":"https://api.github.com/users/guocanwen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guocanwen/subscriptions","organizations_url":"https://api.github.com/users/guocanwen/orgs","repos_url":"https://api.github.com/users/guocanwen/repos","events_url":"https://api.github.com/users/guocanwen/events{/privacy}","received_events_url":"https://api.github.com/users/guocanwen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T08:49:01Z","updated_at":"2020-04-23T08:49:01Z","author_association":"NONE","body":"一台机器重启之后触发其他机器也core掉","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618269803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618379539","html_url":"https://github.com/apache/brpc/issues/41#issuecomment-618379539","issue_url":"https://api.github.com/repos/apache/brpc/issues/41","id":618379539,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODM3OTUzOQ==","user":{"login":"irelandKen","id":2049898,"node_id":"MDQ6VXNlcjIwNDk4OTg=","avatar_url":"https://avatars.githubusercontent.com/u/2049898?v=4","gravatar_id":"","url":"https://api.github.com/users/irelandKen","html_url":"https://github.com/irelandKen","followers_url":"https://api.github.com/users/irelandKen/followers","following_url":"https://api.github.com/users/irelandKen/following{/other_user}","gists_url":"https://api.github.com/users/irelandKen/gists{/gist_id}","starred_url":"https://api.github.com/users/irelandKen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/irelandKen/subscriptions","organizations_url":"https://api.github.com/users/irelandKen/orgs","repos_url":"https://api.github.com/users/irelandKen/repos","events_url":"https://api.github.com/users/irelandKen/events{/privacy}","received_events_url":"https://api.github.com/users/irelandKen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T12:41:00Z","updated_at":"2020-04-23T12:41:00Z","author_association":"NONE","body":"是可以和grpc-go互通, 但走的grpc协议, 性能很差, 和原生grpc server的性能没区别了; \r\n必需走baidu-std协议性能才能上来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618379539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618405069","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-618405069","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":618405069,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODQwNTA2OQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-23T13:50:24Z","updated_at":"2020-04-23T13:50:24Z","author_association":"CONTRIBUTOR","body":"> 1、尽管是单连接，但实例析构之后，连接不会得到复用，而是会重复建立连接。（这一点用ss命令查看确认一下即可）\r\n\r\n实例析构是指得channel实例析构么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618405069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618771882","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-618771882","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":618771882,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc3MTg4Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T02:48:08Z","updated_at":"2020-04-24T02:48:08Z","author_association":"CONTRIBUTOR","body":"是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618771882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618780615","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-618780615","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":618780615,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc4MDYxNQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T03:24:00Z","updated_at":"2020-04-24T03:24:00Z","author_association":"CONTRIBUTOR","body":"> 是的\r\n\r\n尴尬，文档里面还说的 “Channel可以分配在栈上。”  这句话该咋理解呢？这句话不是连接可以复用？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618780615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618795897","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618795897","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618795897,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc5NTg5Nw==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:32:26Z","updated_at":"2020-04-24T05:05:18Z","author_association":"NONE","body":"我这边也有类似的需求，要求单链接严格有序\r\n我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618795897/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618799067","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-618799067","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":618799067,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODc5OTA2Nw==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T04:46:22Z","updated_at":"2020-04-24T04:46:22Z","author_association":"CONTRIBUTOR","body":"是可以放到栈上。但地址也是一种资源，就像内存一样，更多的要靠应用去选择合适的方式来避免资源耗尽，框架层面主要负责提供丰富的、灵活的接口，解决共性问题、满足共性需求。  \r\n回到你这个case，你是在向本机一直发请求吗？ QPS有多少？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618799067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618808508","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618808508","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618808508,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgwODUwOA==","user":{"login":"yichenluan","id":5328290,"node_id":"MDQ6VXNlcjUzMjgyOTA=","avatar_url":"https://avatars.githubusercontent.com/u/5328290?v=4","gravatar_id":"","url":"https://api.github.com/users/yichenluan","html_url":"https://github.com/yichenluan","followers_url":"https://api.github.com/users/yichenluan/followers","following_url":"https://api.github.com/users/yichenluan/following{/other_user}","gists_url":"https://api.github.com/users/yichenluan/gists{/gist_id}","starred_url":"https://api.github.com/users/yichenluan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yichenluan/subscriptions","organizations_url":"https://api.github.com/users/yichenluan/orgs","repos_url":"https://api.github.com/users/yichenluan/repos","events_url":"https://api.github.com/users/yichenluan/events{/privacy}","received_events_url":"https://api.github.com/users/yichenluan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T05:24:41Z","updated_at":"2020-04-24T05:24:41Z","author_association":"CONTRIBUTOR","body":"> 我这边也有类似的需求，要求单链接严格有序\r\n> 我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse\r\n\r\n这个不会呀，InputMessenger 中是 OnNewMessages 来循环处理 socket 的读 event，我现在的处理方式就是在 Parse 阶段完成消息的 decode、process，对于异步处理，会通过 bthread 的 CountdownEvent 来将 bthread 休眠","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618808508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618822086","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618822086","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618822086,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgyMjA4Ng==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T06:10:16Z","updated_at":"2020-04-24T06:10:16Z","author_association":"NONE","body":"> > 我这边也有类似的需求，要求单链接严格有序\r\n> > 我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse\r\n> \r\n> 这个不会呀，InputMessenger 中是 OnNewMessages 来循环处理 socket 的读 event，我现在的处理方式就是在 Parse 阶段完成消息的 decode、process，对于异步处理，会通过 bthread 的 CountdownEvent 来将 bthread 休眠\r\n\r\n也就是说你完全不再用brpc::server、brpc::client嘛，自己轮一个accetper这样的小型轮子？复用socket部分？\r\n我以为你是想要跟redis server那样实现一个新的protocl，在protocl结构体的回调的parse部分完成，因为我看大部分的并发是在调用parse函数执行CutMessage之后并发触发用户重载的回调（就是继承pb类的这个）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618822086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618825824","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618825824","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618825824,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODgyNTgyNA==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T06:19:57Z","updated_at":"2020-04-24T06:19:57Z","author_association":"NONE","body":"> > > 我这边也有类似的需求，要求单链接严格有序\r\n> > > 我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse\r\n> > \r\n> > \r\n> > 这个不会呀，InputMessenger 中是 OnNewMessages 来循环处理 socket 的读 event，我现在的处理方式就是在 Parse 阶段完成消息的 decode、process，对于异步处理，会通过 bthread 的 CountdownEvent 来将 bthread 休眠\r\n> \r\n![image](https://user-images.githubusercontent.com/16607943/80180960-7ce59c80-8636-11ea-851b-5000ce0f21be.png)\r\n我看process也是起一个尽量分配到当前线程的bthread来执行的，以上这一段在socket.cpp里面，由EventDispatcher在收到epoll的触发后调用\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618825824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618873519","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618873519","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618873519,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODg3MzUxOQ==","user":{"login":"yichenluan","id":5328290,"node_id":"MDQ6VXNlcjUzMjgyOTA=","avatar_url":"https://avatars.githubusercontent.com/u/5328290?v=4","gravatar_id":"","url":"https://api.github.com/users/yichenluan","html_url":"https://github.com/yichenluan","followers_url":"https://api.github.com/users/yichenluan/followers","following_url":"https://api.github.com/users/yichenluan/following{/other_user}","gists_url":"https://api.github.com/users/yichenluan/gists{/gist_id}","starred_url":"https://api.github.com/users/yichenluan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yichenluan/subscriptions","organizations_url":"https://api.github.com/users/yichenluan/orgs","repos_url":"https://api.github.com/users/yichenluan/repos","events_url":"https://api.github.com/users/yichenluan/events{/privacy}","received_events_url":"https://api.github.com/users/yichenluan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T08:17:19Z","updated_at":"2020-04-24T08:17:19Z","author_association":"CONTRIBUTOR","body":"> > > > 我这边也有类似的需求，要求单链接严格有序\r\n> > > > 我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse\r\n> > > \r\n> > > \r\n> > > 这个不会呀，InputMessenger 中是 OnNewMessages 来循环处理 socket 的读 event，我现在的处理方式就是在 Parse 阶段完成消息的 decode、process，对于异步处理，会通过 bthread 的 CountdownEvent 来将 bthread 休眠\r\n> \r\n> ![image](https://user-images.githubusercontent.com/16607943/80180960-7ce59c80-8636-11ea-851b-5000ce0f21be.png)\r\n> 我看process也是起一个尽量分配到当前线程的bthread来执行的，以上这一段在socket.cpp里面，由EventDispatcher在收到epoll的触发后调用\r\n\r\n我再看看代码再回复你，不太可能 parse 阶段也会有并发问题，因为 parse 阶段才去读 socket，并发读怎么读消息呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618873519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618882682","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-618882682","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":618882682,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODg4MjY4Mg==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T08:37:35Z","updated_at":"2020-04-24T08:38:22Z","author_association":"NONE","body":"\r\n\r\n> > > > > 我这边也有类似的需求，要求单链接严格有序\r\n> > > > > 我看socket部分的代码，epoll过来的事件，是按照fd起bthread处理的，如果前一个pipeline特别大，后一个特别小，感觉是有可能在InputManager这里有两个InputManager并发的情况出现，即使都走到Parse这里也可能是并行的Parse\r\n> > > > \r\n> > > > \r\n> > > > 这个不会呀，InputMessenger 中是 OnNewMessages 来循环处理 socket 的读 event，我现在的处理方式就是在 Parse 阶段完成消息的 decode、process，对于异步处理，会通过 bthread 的 CountdownEvent 来将 bthread 休眠\r\n> > \r\n> > \r\n> > ![image](https://user-images.githubusercontent.com/16607943/80180960-7ce59c80-8636-11ea-851b-5000ce0f21be.png)\r\n> > 我看process也是起一个尽量分配到当前线程的bthread来执行的，以上这一段在socket.cpp里面，由EventDispatcher在收到epoll的触发后调用\r\n> \r\n> 我再看看代码再回复你，不太可能 parse 阶段也会有并发问题，因为 parse 阶段才去读 socket，并发读怎么读消息呢\r\n\r\n不好意思，我又读了下代码，这里是用原子量实现的fd粒度的锁\r\n如果ProcessEvent正在读数据，再次ET触发的event取不到原子量不会再开协程，反而是在InputManager阶段又读到了新的数据（pipeline的情况），这样InputManager的锁不会释放反而会一直执行解包操作\r\n如果InputManager释放了原子量，证明余下的数据都已经处理完毕了，再次ET触发的event确实应该再开一个ProcessEvent线程\r\n\r\n这里似乎设计的很巧妙，第一眼确实没懂","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618882682/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618891035","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-618891035","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":618891035,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODg5MTAzNQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T08:55:28Z","updated_at":"2020-04-24T08:55:28Z","author_association":"CONTRIBUTOR","body":"> 回到你这个case，你是在向本机一直发请求吗？ QPS有多少？\r\n\r\n是向本地发的。qps没注意，就是起了几个线程while循环一直在发。\r\n\r\n你说的有道理，不过我一直理解成  单链接哪怕在channel实例析构后，还会存活一会，以便复用。。话说这样岂不是更好么？复用率更高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618891035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618903641","html_url":"https://github.com/apache/brpc/issues/986#issuecomment-618903641","issue_url":"https://api.github.com/repos/apache/brpc/issues/986","id":618903641,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkwMzY0MQ==","user":{"login":"one0320heart","id":1767788,"node_id":"MDQ6VXNlcjE3Njc3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1767788?v=4","gravatar_id":"","url":"https://api.github.com/users/one0320heart","html_url":"https://github.com/one0320heart","followers_url":"https://api.github.com/users/one0320heart/followers","following_url":"https://api.github.com/users/one0320heart/following{/other_user}","gists_url":"https://api.github.com/users/one0320heart/gists{/gist_id}","starred_url":"https://api.github.com/users/one0320heart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/one0320heart/subscriptions","organizations_url":"https://api.github.com/users/one0320heart/orgs","repos_url":"https://api.github.com/users/one0320heart/repos","events_url":"https://api.github.com/users/one0320heart/events{/privacy}","received_events_url":"https://api.github.com/users/one0320heart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T09:22:32Z","updated_at":"2020-04-24T09:22:32Z","author_association":"NONE","body":"每个地址可以附带一个tag，在常见的命名服务中，如果地址后有空格，则空格之后的内容均为tag。 相同的地址配合不同的tag被认为是不同的实例，brpc会建立不同的连接。用户可利用这个特性更灵活地控制与单个地址的连接方式。 如果你需要\"带权重的轮询\"，你应当优先考虑使用wrr算法，而不是用tag来模拟。\r\n---------------------------------------------------------------\r\n我理解你这个ip:port+空格 后面的这个数字，我理解应该是tag，而不是你理解的权重\r\n但是如何配置wrr，貌似文档中也没有给出来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618903641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618909890","html_url":"https://github.com/apache/brpc/issues/159#issuecomment-618909890","issue_url":"https://api.github.com/repos/apache/brpc/issues/159","id":618909890,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkwOTg5MA==","user":{"login":"one0320heart","id":1767788,"node_id":"MDQ6VXNlcjE3Njc3ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1767788?v=4","gravatar_id":"","url":"https://api.github.com/users/one0320heart","html_url":"https://github.com/one0320heart","followers_url":"https://api.github.com/users/one0320heart/followers","following_url":"https://api.github.com/users/one0320heart/following{/other_user}","gists_url":"https://api.github.com/users/one0320heart/gists{/gist_id}","starred_url":"https://api.github.com/users/one0320heart/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/one0320heart/subscriptions","organizations_url":"https://api.github.com/users/one0320heart/orgs","repos_url":"https://api.github.com/users/one0320heart/repos","events_url":"https://api.github.com/users/one0320heart/events{/privacy}","received_events_url":"https://api.github.com/users/one0320heart/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T09:36:25Z","updated_at":"2020-04-24T09:36:25Z","author_association":"NONE","body":"用tag多配几个实例在你想要高流量状态运行的机器上","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618909890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618948939","html_url":"https://github.com/apache/brpc/issues/1064#issuecomment-618948939","issue_url":"https://api.github.com/repos/apache/brpc/issues/1064","id":618948939,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk0ODkzOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T11:10:24Z","updated_at":"2020-04-24T11:10:24Z","author_association":"CONTRIBUTOR","body":"是不是打开了-http_verbose? 否则thread 20中不会出现PrintMessage。这个开关是用于debug的，不应该在线上系统中打开","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618948939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618985736","html_url":"https://github.com/apache/brpc/issues/1096#issuecomment-618985736","issue_url":"https://api.github.com/repos/apache/brpc/issues/1096","id":618985736,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODk4NTczNg==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T12:43:08Z","updated_at":"2020-04-24T12:43:08Z","author_association":"NONE","body":"这个问题有什么进展吗，各位大佬？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/618985736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619006638","html_url":"https://github.com/apache/brpc/issues/1094#issuecomment-619006638","issue_url":"https://api.github.com/repos/apache/brpc/issues/1094","id":619006638,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTAwNjYzOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T13:23:11Z","updated_at":"2020-04-24T13:23:11Z","author_association":"CONTRIBUTOR","body":"这里是不是把那个日志去掉也ok？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619006638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619035162","html_url":"https://github.com/apache/brpc/issues/1096#issuecomment-619035162","issue_url":"https://api.github.com/repos/apache/brpc/issues/1096","id":619035162,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTAzNTE2Mg==","user":{"login":"old-bear","id":1525532,"node_id":"MDQ6VXNlcjE1MjU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1525532?v=4","gravatar_id":"","url":"https://api.github.com/users/old-bear","html_url":"https://github.com/old-bear","followers_url":"https://api.github.com/users/old-bear/followers","following_url":"https://api.github.com/users/old-bear/following{/other_user}","gists_url":"https://api.github.com/users/old-bear/gists{/gist_id}","starred_url":"https://api.github.com/users/old-bear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/old-bear/subscriptions","organizations_url":"https://api.github.com/users/old-bear/orgs","repos_url":"https://api.github.com/users/old-bear/repos","events_url":"https://api.github.com/users/old-bear/events{/privacy}","received_events_url":"https://api.github.com/users/old-bear/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T14:12:30Z","updated_at":"2020-04-24T14:12:54Z","author_association":"CONTRIBUTOR","body":"1. `DoRead`这个函数设计返回0即约定表示遇到EOF，这也和非SSL情况统一，同时外层`input_messenger.cpp`中也会相应处理，因此SSL_read return 0直接返回0就行。由于brpc中不允许半关闭读写的情况，对于对端EOF情况只需直接close本端就行。\r\n2. 另外brpc中一个连接要么一直是SSL，要么永远是非SSL，不会来回再SSL状态间切换，因此也不需要SSL_shutdown。\r\n3. `cut_into_SSL_channel`在nw=0时也会设置ssl_error，外层`DoWrite`也会捕获感知设置errno。\r\n4. 从池中（`SocketPool`）拿出的Socket，是不会再次ssl_handshake的。因为连接池模式保证一次请求结束前独占这个Socket，后续拿出时其ssl_state应该set过了。\r\n5. BIO的api调用，一部分是为了证书buffer，另一部分是为了能让用户设置SSL底层读写的buffer大小，具体读写没有用BIO_read/write","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619035162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619052848","html_url":"https://github.com/apache/brpc/issues/1094#issuecomment-619052848","issue_url":"https://api.github.com/repos/apache/brpc/issues/1094","id":619052848,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTA1Mjg0OA==","user":{"login":"deerlu","id":5267880,"node_id":"MDQ6VXNlcjUyNjc4ODA=","avatar_url":"https://avatars.githubusercontent.com/u/5267880?v=4","gravatar_id":"","url":"https://api.github.com/users/deerlu","html_url":"https://github.com/deerlu","followers_url":"https://api.github.com/users/deerlu/followers","following_url":"https://api.github.com/users/deerlu/following{/other_user}","gists_url":"https://api.github.com/users/deerlu/gists{/gist_id}","starred_url":"https://api.github.com/users/deerlu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deerlu/subscriptions","organizations_url":"https://api.github.com/users/deerlu/orgs","repos_url":"https://api.github.com/users/deerlu/repos","events_url":"https://api.github.com/users/deerlu/events{/privacy}","received_events_url":"https://api.github.com/users/deerlu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T14:41:33Z","updated_at":"2020-04-24T14:41:33Z","author_association":"NONE","body":"不需要检测“是否真的删掉了这么多个server”吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619052848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619055213","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619055213","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619055213,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTA1NTIxMw==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T14:45:26Z","updated_at":"2020-04-24T14:45:26Z","author_association":"NONE","body":"走brpc stream的话应该可以保证顺序处理的，底层用的是execution queue来实现的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619055213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619062111","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619062111","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619062111,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTA2MjExMQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T14:56:55Z","updated_at":"2020-04-24T14:56:55Z","author_association":"NONE","body":"stream用起来挺不错，性能也好，不过也还有些不完善的地方，比如rpcz就不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619062111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619084365","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619084365","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619084365,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTA4NDM2NQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T15:34:36Z","updated_at":"2020-04-24T15:34:36Z","author_association":"NONE","body":"这个是需要用户实现的callback，返回值是自己填的啊。如果是连接断了的话，应该是on_error会被调用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619084365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619385096","html_url":"https://github.com/apache/brpc/issues/1096#issuecomment-619385096","issue_url":"https://api.github.com/repos/apache/brpc/issues/1096","id":619385096,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM4NTA5Ng==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T14:07:11Z","updated_at":"2020-04-25T15:29:52Z","author_association":"NONE","body":"感谢您的回复！第四点确实是如您所说。关于1，3点，有一些不同的看法：\r\nDoRead 的设计确实是读到0即代表约定遇到EOF，但是SSL_read为0时的处理并不完备，以下内容摘自man：\r\nSSL_read    return values:\r\n\r\n'>' 0\r\nThe read operation was successful; the return value is the number of bytes actually read from the TLS/SSL connection.\r\n\r\n0\r\n\r\nThe read operation was not successful. The reason may either be a clean shutdown due to a \"close notify\" alert sent by the peer (in which case the SSL_RECEIVED_SHUTDOWN flag in the ssl shutdown state is set (see ssl_shutdown(3), ssl_set_shutdown(3)). It is also possible, that the peer simply shut down the underlying transport and the shutdown is incomplete. Call SSL_get_error() with the return value ret to find out, whether an error occurred or the connection was shut down cleanly ( SSL_ERROR_ZERO_RETURN \r\n\r\nSSL_get_error Return Values：\r\nSSL_ERROR_ZERO_RETURN\r\nThe TLS/SSL connection has been closed.\r\nSSL_ERROR_SYSCALL\r\nSome I/O error occurred. The OpenSSL error queue may contain more information on the error. If the error queue is empty (i.e. ERR_get_error() returns 0), ret can be used to find out more about the error: If ret == 0, an EOF was observed that violates the protocol. If ret == -1, the underlying BIO reported an I/O error (for socket I/O on Unix systems, consult errno for details).\r\n\r\n在iobuf中是这样处理的：\r\n```\r\n\r\n         const int rc = SSL_read(ssl, _block->data + _block->size, read_len);\r\n        *ssl_error = SSL_get_error(ssl, rc);\r\n        if (rc > 0) {\r\n            const IOBuf::BlockRef r = { (uint32_t)_block->size, (uint32_t)rc, _block };\r\n            _push_back_ref(r);\r\n            _block->size += rc;\r\n            if (_block->full()) {\r\n                Block* const saved_next = _block->portal_next;\r\n                _block->dec_ref();  // _block may be deleted\r\n                _block = saved_next;\r\n            }\r\n            nr += rc;\r\n        } else {\r\n            if (rc < 0) {\r\n                if (*ssl_error == SSL_ERROR_WANT_READ\r\n                    || (*ssl_error == SSL_ERROR_SYSCALL\r\n                        && BIO_fd_non_fatal_error(errno) == 1)) {\r\n                    // Non fatal error, tell caller to read again\r\n                    *ssl_error = SSL_ERROR_WANT_READ;\r\n                } else {\r\n                    // Other errors are fatal\r\n                    return rc;\r\n                }\r\n            }\r\n            return (nr > 0 ? nr : rc);\r\n```\r\n在rc == 0时，返回，并置错误码，此处的错误码，有可能是SSL_ERROR_SYSCALL/SSL_ERROR_ZERO_RETURN, 在socket.cpp:\r\n```\r\n    int ssl_error = 0;\r\n    ssize_t nr = _read_buf.append_from_SSL_channel(_ssl_session, &ssl_error, size_hint);\r\n    switch (ssl_error) {\r\n    case SSL_ERROR_NONE:  // `nr' > 0\r\n        break;\r\n            \r\n    case SSL_ERROR_WANT_READ:\r\n        // Regard this error as EAGAIN\r\n        errno = EAGAIN;\r\n        break;\r\n            \r\n    case SSL_ERROR_WANT_WRITE:\r\n        // Disable renegotiation\r\n        errno = EPROTO;\r\n        return -1;\r\n\r\n    default: {\r\n        const unsigned long e = ERR_get_error();\r\n        if (nr == 0) {\r\n            // Socket EOF or SSL session EOF\r\n        } else if (e != 0) {\r\n            LOG(WARNING) << \"Fail to read from ssl_fd=\" << fd()\r\n                         << \": \" << SSLError(e);\r\n            errno = ESSL;\r\n        } else {\r\n            // System error with corresponding errno set\r\n            PLOG(WARNING) << \"Fail to read from ssl_fd=\" << fd();\r\n        }\r\n        break;\r\n    }\r\n\r\n```\r\n如上，以上错误码被default捕获，而此刻nr 有可能!=0 (iobuf.cpp : return (nr > 0 ? nr : rc);), 从而导致该EOF被忽略，导致socket无法关闭。在实际应用中，该问题已经频繁被触发，打印日志类似：\r\n Fail to read from ssl_fd=id：Success\r\nDoWrite有类似的问题，这里就不贴代码了，烦请您看看！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619385096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619396997","html_url":"https://github.com/apache/brpc/issues/1096#issuecomment-619396997","issue_url":"https://api.github.com/repos/apache/brpc/issues/1096","id":619396997,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTM5Njk5Nw==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-25T15:33:41Z","updated_at":"2020-04-25T15:33:41Z","author_association":"NONE","body":"另外，关于main socket，健康检查时，如果设置了SSL options，会尝试进行ssl连接。想问下这个操作是否有必要？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619396997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619467152","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-619467152","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":619467152,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ2NzE1Mg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T01:59:57Z","updated_at":"2020-04-26T01:59:57Z","author_association":"CONTRIBUTOR","body":"实例析构，而它背后的某些资源还存在，这其实有悖于RAII理念的设计。如果是换做连接池模式，你说的是可以的。我觉着就是用应用层面去复用实例就好，仔细想想，这种事情如果放到框架在背后偷偷做，可能你会更反对。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619467152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619474753","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619474753","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619474753,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NDc1Mw==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:24:10Z","updated_at":"2020-04-26T03:24:10Z","author_association":"NONE","body":"> stream用起来挺不错，性能也好，不过也还有些不完善的地方，比如rpcz就不支持\r\n\r\nstream我看了，不太符合我的要求：\r\n1.不支持除baidu_std协议之外的其他协议，我需要用到redis的RESP协议\r\n2.封装耦合非常紧密，没办法直接利用stream，直接在上面加入其他协议支持，例如Ctrl这里就有一个专门的存放streamID的private对象，正常复用没办法使用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619474753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475151","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619475151","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619475151,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NTE1MQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:29:03Z","updated_at":"2020-04-26T03:29:03Z","author_association":"NONE","body":"可以在同一个brpc server同时支持brpc stream和普通的brpc unary，后者是可以兼容其他协议的，不知道能不能解决你的问题\r\n\r\n> > stream用起来挺不错，性能也好，不过也还有些不完善的地方，比如rpcz就不支持\r\n> \r\n> stream我看了，不太符合我的要求：\r\n> 1.不支持除baidu_std协议之外的其他协议，我需要用到redis的RESP协议\r\n> 2.封装耦合非常紧密，没办法直接利用stream，直接在上面加入其他协议支持，例如Ctrl这里就有一个专门的存放streamID的private对象，正常复用没办法使用\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475343","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619475343","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619475343,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NTM0Mw==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:31:48Z","updated_at":"2020-04-26T03:31:48Z","author_association":"NONE","body":"> 可以在同一个brpc server同时支持brpc stream和普通的brpc unary，后者是可以兼容其他协议的，不知道能不能解决你的问题\r\n> \r\n> > > stream用起来挺不错，性能也好，不过也还有些不完善的地方，比如rpcz就不支持\r\n> > \r\n> > \r\n> > stream我看了，不太符合我的要求：\r\n> > 1.不支持除baidu_std协议之外的其他协议，我需要用到redis的RESP协议\r\n> > 2.封装耦合非常紧密，没办法直接利用stream，直接在上面加入其他协议支持，例如Ctrl这里就有一个专门的存放streamID的private对象，正常复用没办法使用\r\n\r\nbrpc unary？这个我第一次看到，是新特性么，我去看下文档\r\n其实我需求很简单，就是用现有框架（不局限于brpc）做一个redis的从库\r\n因为redis从库有：\r\n1.fd必须全双工，不能只成为server或者client\r\n2.成为client时协议与server时协议不同（都是RESP协议但是格式不太一样）\r\n3.需要解析RDB、AOF不同格式\r\n4.需要支持类似UDP的发送之后不回复（REPLCONF ACK {offset}）","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475553","html_url":"https://github.com/apache/brpc/issues/1064#issuecomment-619475553","issue_url":"https://api.github.com/repos/apache/brpc/issues/1064","id":619475553,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NTU1Mw==","user":{"login":"steel2013","id":53460946,"node_id":"MDQ6VXNlcjUzNDYwOTQ2","avatar_url":"https://avatars.githubusercontent.com/u/53460946?v=4","gravatar_id":"","url":"https://api.github.com/users/steel2013","html_url":"https://github.com/steel2013","followers_url":"https://api.github.com/users/steel2013/followers","following_url":"https://api.github.com/users/steel2013/following{/other_user}","gists_url":"https://api.github.com/users/steel2013/gists{/gist_id}","starred_url":"https://api.github.com/users/steel2013/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/steel2013/subscriptions","organizations_url":"https://api.github.com/users/steel2013/orgs","repos_url":"https://api.github.com/users/steel2013/repos","events_url":"https://api.github.com/users/steel2013/events{/privacy}","received_events_url":"https://api.github.com/users/steel2013/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:34:09Z","updated_at":"2020-04-26T03:34:09Z","author_association":"NONE","body":"@jamesge 是打开了http_verbose，发现服务卡顿，临时打开看trace的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619475553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619476256","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619476256","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619476256,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NjI1Ng==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:43:15Z","updated_at":"2020-04-26T03:43:15Z","author_association":"NONE","body":"哦，我就是指的普通的brpc，类似于grpc unary，所以我就这么叫了\r\n\r\n我大概理解你的意思了，我记得之前有人问过保序，jamesge的说法是只有stream才能支持，其他的方式都保证不了。在普通的brpc上支持保序不知道改动大不大，估计涉及到brpc内部的一些东西，可能也不太好弄\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619476256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619477365","html_url":"https://github.com/apache/brpc/issues/1047#issuecomment-619477365","issue_url":"https://api.github.com/repos/apache/brpc/issues/1047","id":619477365,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ3NzM2NQ==","user":{"login":"bailiyang","id":16607943,"node_id":"MDQ6VXNlcjE2NjA3OTQz","avatar_url":"https://avatars.githubusercontent.com/u/16607943?v=4","gravatar_id":"","url":"https://api.github.com/users/bailiyang","html_url":"https://github.com/bailiyang","followers_url":"https://api.github.com/users/bailiyang/followers","following_url":"https://api.github.com/users/bailiyang/following{/other_user}","gists_url":"https://api.github.com/users/bailiyang/gists{/gist_id}","starred_url":"https://api.github.com/users/bailiyang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bailiyang/subscriptions","organizations_url":"https://api.github.com/users/bailiyang/orgs","repos_url":"https://api.github.com/users/bailiyang/repos","events_url":"https://api.github.com/users/bailiyang/events{/privacy}","received_events_url":"https://api.github.com/users/bailiyang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T03:58:05Z","updated_at":"2020-04-26T03:58:05Z","author_association":"NONE","body":"> 哦，我就是指的普通的brpc，类似于grpc unary，所以我就这么叫了\r\n> \r\n> 我大概理解你的意思了，我记得之前有人问过保序，jamesge的说法是只有stream才能支持，其他的方式都保证不了。在普通的brpc上支持保序不知道改动大不大，估计涉及到brpc内部的一些东西，可能也不太好弄\r\n\r\n普通的brpc接口，失去有序性主要是在CutMessage之后吧，我看了EventDispatch到Process Request层的所有代码流程，没有发现失序的地方，单个fd用原子量加锁触发，看起来不会在CutMessage之前失去顺序\r\n如果从brpc::Socket+brpc::Accepter这一层复用的话，应该不会出现失序的情况","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619477365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619493775","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-619493775","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":619493775,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ5Mzc3NQ==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T06:40:01Z","updated_at":"2020-04-26T06:40:01Z","author_association":"CONTRIBUTOR","body":"> 实例析构，而它背后的某些资源还存在，这其实有悖于RAII理念的设计。如果是换做连接池模式，你说的是可以的。我觉着就是用应用层面去复用实例就好，仔细想想，这种事情如果放到框架在背后偷偷做，可能你会更反对。\r\n\r\n恩恩。感谢解答","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619493775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619494198","html_url":"https://github.com/apache/brpc/issues/1099#issuecomment-619494198","issue_url":"https://api.github.com/repos/apache/brpc/issues/1099","id":619494198,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ5NDE5OA==","user":{"login":"GOGOYAO","id":18675094,"node_id":"MDQ6VXNlcjE4Njc1MDk0","avatar_url":"https://avatars.githubusercontent.com/u/18675094?v=4","gravatar_id":"","url":"https://api.github.com/users/GOGOYAO","html_url":"https://github.com/GOGOYAO","followers_url":"https://api.github.com/users/GOGOYAO/followers","following_url":"https://api.github.com/users/GOGOYAO/following{/other_user}","gists_url":"https://api.github.com/users/GOGOYAO/gists{/gist_id}","starred_url":"https://api.github.com/users/GOGOYAO/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GOGOYAO/subscriptions","organizations_url":"https://api.github.com/users/GOGOYAO/orgs","repos_url":"https://api.github.com/users/GOGOYAO/repos","events_url":"https://api.github.com/users/GOGOYAO/events{/privacy}","received_events_url":"https://api.github.com/users/GOGOYAO/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T06:42:58Z","updated_at":"2020-04-26T06:42:58Z","author_association":"CONTRIBUTOR","body":"> 我看文档，感觉bthread 和boost.fiber 差不多\r\n> 另外bthread用了之后再使用线程的mutex的时候死锁，这个多人开发的时候不太好操作了。没办法每个人都知道哪些函数需要bthread的mutex,哪些是需要thread mutex\r\n\r\n+1。那个bthread用std::mutex导致死锁的问题，感觉很蛋疼。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619494198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619495220","html_url":"https://github.com/apache/brpc/issues/1069#issuecomment-619495220","issue_url":"https://api.github.com/repos/apache/brpc/issues/1069","id":619495220,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTQ5NTIyMA==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T06:49:08Z","updated_at":"2020-04-26T06:49:08Z","author_association":"MEMBER","body":"可以设置[-defer_close_second](https://github.com/apache/incubator-brpc/blob/2f8fc37d52c2a02ee6f348aaa52c7ded4a4844c3/src/brpc/socket_map.cpp#L43). 这个是用来解决这类问题的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619495220/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619508088","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619508088","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619508088,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTUwODA4OA==","user":{"login":"cstarc","id":11407488,"node_id":"MDQ6VXNlcjExNDA3NDg4","avatar_url":"https://avatars.githubusercontent.com/u/11407488?v=4","gravatar_id":"","url":"https://api.github.com/users/cstarc","html_url":"https://github.com/cstarc","followers_url":"https://api.github.com/users/cstarc/followers","following_url":"https://api.github.com/users/cstarc/following{/other_user}","gists_url":"https://api.github.com/users/cstarc/gists{/gist_id}","starred_url":"https://api.github.com/users/cstarc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cstarc/subscriptions","organizations_url":"https://api.github.com/users/cstarc/orgs","repos_url":"https://api.github.com/users/cstarc/repos","events_url":"https://api.github.com/users/cstarc/events{/privacy}","received_events_url":"https://api.github.com/users/cstarc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T08:22:33Z","updated_at":"2020-04-26T08:22:33Z","author_association":"CONTRIBUTOR","body":"> 这个是需要用户实现的callback，返回值是自己填的啊。如果是连接断了的话，应该是on_error会被调用\r\n\r\n返回值自己填的清楚，但这个是返回哪里？ 客户端怎么通过函数或变量获取这个返回值？\r\n找了下代码on_received_messages 没有处理返回值\r\n```\r\nclass MessageBatcher {\r\n    void flush() {\r\n        if (_size > 0 && _s->_options.handler != NULL) {\r\n            _s->_options.handler->on_received_messages(\r\n                    _s->id(), _storage, _size);\r\n        }\r\n        for (size_t i = 0; i < _size; ++i) {\r\n            delete _storage[i];\r\n        }\r\n        _size = 0;\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619508088/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619511569","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619511569","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619511569,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTUxMTU2OQ==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T08:48:22Z","updated_at":"2020-04-26T08:48:43Z","author_association":"NONE","body":"上边贴的代码，brpc里面是没有处理这个函数的返回值的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619511569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619529611","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619529611","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619529611,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTUyOTYxMQ==","user":{"login":"cstarc","id":11407488,"node_id":"MDQ6VXNlcjExNDA3NDg4","avatar_url":"https://avatars.githubusercontent.com/u/11407488?v=4","gravatar_id":"","url":"https://api.github.com/users/cstarc","html_url":"https://github.com/cstarc","followers_url":"https://api.github.com/users/cstarc/followers","following_url":"https://api.github.com/users/cstarc/following{/other_user}","gists_url":"https://api.github.com/users/cstarc/gists{/gist_id}","starred_url":"https://api.github.com/users/cstarc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cstarc/subscriptions","organizations_url":"https://api.github.com/users/cstarc/orgs","repos_url":"https://api.github.com/users/cstarc/repos","events_url":"https://api.github.com/users/cstarc/events{/privacy}","received_events_url":"https://api.github.com/users/cstarc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-26T10:59:47Z","updated_at":"2020-04-26T10:59:47Z","author_association":"CONTRIBUTOR","body":"@zhijunfu  那现在brpc 还不支持on_received_message返回错误? 即使返回了也不处理?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619529611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619674938","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619674938","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619674938,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY3NDkzOA==","user":{"login":"zhijunfu","id":37800433,"node_id":"MDQ6VXNlcjM3ODAwNDMz","avatar_url":"https://avatars.githubusercontent.com/u/37800433?v=4","gravatar_id":"","url":"https://api.github.com/users/zhijunfu","html_url":"https://github.com/zhijunfu","followers_url":"https://api.github.com/users/zhijunfu/followers","following_url":"https://api.github.com/users/zhijunfu/following{/other_user}","gists_url":"https://api.github.com/users/zhijunfu/gists{/gist_id}","starred_url":"https://api.github.com/users/zhijunfu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhijunfu/subscriptions","organizations_url":"https://api.github.com/users/zhijunfu/orgs","repos_url":"https://api.github.com/users/zhijunfu/repos","events_url":"https://api.github.com/users/zhijunfu/events{/privacy}","received_events_url":"https://api.github.com/users/zhijunfu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T02:31:19Z","updated_at":"2020-04-27T02:31:19Z","author_association":"NONE","body":"> @zhijunfu 那现在brpc 还不支持on_received_message返回错误? 即使返回了也不处理?\r\n\r\n这个应该不会支持的。一般错误处理逻辑是说上层处理下层的错误，比如说断连的错误brpc会通过on_closed 告诉上层。下层不会处理上层的错误的，你的函数返回个错误，brpc也不知道该怎么处理啊。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619674938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619681127","html_url":"https://github.com/apache/brpc/issues/1097#issuecomment-619681127","issue_url":"https://api.github.com/repos/apache/brpc/issues/1097","id":619681127,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTY4MTEyNw==","user":{"login":"cstarc","id":11407488,"node_id":"MDQ6VXNlcjExNDA3NDg4","avatar_url":"https://avatars.githubusercontent.com/u/11407488?v=4","gravatar_id":"","url":"https://api.github.com/users/cstarc","html_url":"https://github.com/cstarc","followers_url":"https://api.github.com/users/cstarc/followers","following_url":"https://api.github.com/users/cstarc/following{/other_user}","gists_url":"https://api.github.com/users/cstarc/gists{/gist_id}","starred_url":"https://api.github.com/users/cstarc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cstarc/subscriptions","organizations_url":"https://api.github.com/users/cstarc/orgs","repos_url":"https://api.github.com/users/cstarc/repos","events_url":"https://api.github.com/users/cstarc/events{/privacy}","received_events_url":"https://api.github.com/users/cstarc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T02:52:13Z","updated_at":"2020-04-27T02:54:00Z","author_association":"CONTRIBUTOR","body":"不是让brpc处理，是让brpc可以返回给客户端，这个函数返回类型就是int，如果返回了错误又不能处理，为什么不是void？\r\n这个函数接口是brpc定义的，我只是实现","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619681127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619761250","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-619761250","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":619761250,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTc2MTI1MA==","user":{"login":"darmac","id":29532367,"node_id":"MDQ6VXNlcjI5NTMyMzY3","avatar_url":"https://avatars.githubusercontent.com/u/29532367?v=4","gravatar_id":"","url":"https://api.github.com/users/darmac","html_url":"https://github.com/darmac","followers_url":"https://api.github.com/users/darmac/followers","following_url":"https://api.github.com/users/darmac/following{/other_user}","gists_url":"https://api.github.com/users/darmac/gists{/gist_id}","starred_url":"https://api.github.com/users/darmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darmac/subscriptions","organizations_url":"https://api.github.com/users/darmac/orgs","repos_url":"https://api.github.com/users/darmac/repos","events_url":"https://api.github.com/users/darmac/events{/privacy}","received_events_url":"https://api.github.com/users/darmac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T06:37:46Z","updated_at":"2020-04-27T06:37:46Z","author_association":"NONE","body":"@jamesge \r\n在brpc编译过程中,我们发现会有`narrowing conversion`错误,\r\n需要在`CMAKE_CXX_FLAGS`中加入`-Wno-narrowing`\r\n```\r\n  >> 355    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-128' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n     356     };\r\n     357     ^\r\n  >> 358    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-127' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 359    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-126' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 360    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-125' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 361    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-124' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 362    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-123' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 363    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-122' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 364    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-121' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 365    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-120' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 366    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-119' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 367    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-118' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 368    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-117' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 369    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-116' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 370    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-115' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 371    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-114' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 372    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-113' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 373    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-112' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 374    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-111' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 375    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-110' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 376    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-109' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 377    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-108' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 378    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-107' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 379    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-106' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 380    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-105' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 381    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-104' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 382    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-103' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 383    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-102' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 384    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-101' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 385    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-100' fro\r\n            m 'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 386    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-99' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 387    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-98' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 388    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-97' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 389    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-96' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 390    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-95' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 391    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-94' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 392    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-93' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 393    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-92' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 394    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-91' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 395    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-90' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 396    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-89' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 397    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-88' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 398    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-87' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 399    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-86' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 400    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-85' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 401    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-84' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 402    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-83' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 403    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-82' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 404    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-81' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 405    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-80' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 406    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-79' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 407    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-78' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 408    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-77' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 409    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-76' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 410    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-75' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 411    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-74' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 412    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-73' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 413    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-72' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 414    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-71' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 415    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-70' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 416    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-69' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 417    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-68' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 418    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-67' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 419    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-66' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 420    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-65' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 421    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-64' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 422    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-63' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 423    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-62' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 424    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-61' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 425    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-60' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 426    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-59' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 427    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-58' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 428    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-57' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 429    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-56' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 430    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-55' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 431    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-54' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 432    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-53' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 433    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-52' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 434    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-51' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 435    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-50' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 436    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-49' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 437    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-48' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 438    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-47' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 439    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-46' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 440    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-45' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 441    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-44' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 442    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-43' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 443    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-42' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 444    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-41' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 445    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-40' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 446    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-39' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 447    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-38' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 448    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-37' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 449    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-36' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 450    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-35' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 451    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-34' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 452    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-33' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 453    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-32' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 454    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-31' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 455    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-30' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 456    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-29' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 457    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-28' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 458    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-27' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 459    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-26' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 460    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-25' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 461    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-24' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 462    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-23' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 463    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-22' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 464    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-21' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 465    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-20' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 466    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-19' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 467    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-18' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 468    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-17' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 469    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-16' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 470    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-15' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 471    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-14' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 472    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-13' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 473    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-12' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 474    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-11' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 475    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-10' from\r\n             'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 476    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-9' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 477    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-8' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 478    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-7' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 479    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-6' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 480    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-5' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 481    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-4' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 482    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-3' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 483    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-2' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 484    /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/butil/containers/case_ignored_flat_map.cpp:49:1: error: narrowing conversion of '-1' from\r\n            'int' to 'char' inside { } [-Wnarrowing]\r\n  >> 485    make[2]: *** [src/CMakeFiles/BUTIL_LIB.dir/build.make:1474: src/CMakeFiles/BUTIL_LIB.dir/butil/containers/case_ignored_flat_map.cpp.o] Error 1\r\n     486    make[2]: *** Waiting for unfinished jobs....\r\n     487    Scanning dependencies of target SOURCES_LIB\r\n     488    make[2]: Leaving directory '/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build'\r\n     489    make -f src/CMakeFiles/SOURCES_LIB.dir/build.make src/CMakeFiles/SOURCES_LIB.dir/build\r\n     490    make[2]: Entering directory '/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build'\r\n     491    [ 43%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/collector.cpp.o\r\n     492    [ 43%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/default_variables.cpp.o\r\n     493    cd /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src && /home/xiaojun/spack/lib/spack/env/gcc/g++   -I/tmp/root/spack-stage/spack-stage-br\r\n            pc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build -I/home/xiaojun/spack/opt/spa\r\n            ck/linux-centos8-aarch64/gcc-8.2.1/gflags-2.1.2-bvdcmnc352f5pt7gecb7yvbcexg724r4/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/protobuf-3.11.2-tei2sd6ef46yjhuzah\r\n            spmwwjswvtj65c/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/leveldb-1.22-k4vngqjrdefeswzfnmpqt7lyzogasr3x/include -I/home/xiaojun/spack/opt/spack/linux-centos8-\r\n            aarch64/gcc-8.2.1/openssl-1.1.1g-ku5v5n2vxpjzaz6e4h7mavavabf7pvuw/include -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src  -DBRPC_WITH\r\n            _GLOG=0 -DGFLAGS_NS=google -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS\r\n            -DBRPC_REVISION=\\\"0.9.7\\\" -D__STRICT_ANSI__ -g  -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -fno-gcse -Wno-aligned-new -\r\n            DNDEBUG -O2 -g -DNDEBUG   -std=gnu++11 -o CMakeFiles/SOURCES_LIB.dir/bvar/collector.cpp.o -c /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/s\r\n            rc/bvar/collector.cpp\r\n     494    cd /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src && /home/xiaojun/spack/lib/spack/env/gcc/g++   -I/tmp/root/spack-stage/spack-stage-br\r\n            pc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build -I/home/xiaojun/spack/opt/spa\r\n            ck/linux-centos8-aarch64/gcc-8.2.1/gflags-2.1.2-bvdcmnc352f5pt7gecb7yvbcexg724r4/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/protobuf-3.11.2-tei2sd6ef46yjhuzah\r\n            spmwwjswvtj65c/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/leveldb-1.22-k4vngqjrdefeswzfnmpqt7lyzogasr3x/include -I/home/xiaojun/spack/opt/spack/linux-centos8-\r\n            aarch64/gcc-8.2.1/openssl-1.1.1g-ku5v5n2vxpjzaz6e4h7mavavabf7pvuw/include -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src  -DBRPC_WITH\r\n            _GLOG=0 -DGFLAGS_NS=google -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS\r\n            -DBRPC_REVISION=\\\"0.9.7\\\" -D__STRICT_ANSI__ -g  -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -fno-gcse -Wno-aligned-new -\r\n            DNDEBUG -O2 -g -DNDEBUG   -std=gnu++11 -o CMakeFiles/SOURCES_LIB.dir/bvar/default_variables.cpp.o -c /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spa\r\n            ck-src/src/bvar/default_variables.cpp\r\n     495    [ 44%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/detail/percentile.cpp.o\r\n     496    cd /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src && /home/xiaojun/spack/lib/spack/env/gcc/g++   -I/tmp/root/spack-stage/spack-stage-br\r\n            pc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build -I/home/xiaojun/spack/opt/spa\r\n            ck/linux-centos8-aarch64/gcc-8.2.1/gflags-2.1.2-bvdcmnc352f5pt7gecb7yvbcexg724r4/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/protobuf-3.11.2-tei2sd6ef46yjhuzah\r\n            spmwwjswvtj65c/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/leveldb-1.22-k4vngqjrdefeswzfnmpqt7lyzogasr3x/include -I/home/xiaojun/spack/opt/spack/linux-centos8-\r\n            aarch64/gcc-8.2.1/openssl-1.1.1g-ku5v5n2vxpjzaz6e4h7mavavabf7pvuw/include -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src  -DBRPC_WITH\r\n            _GLOG=0 -DGFLAGS_NS=google -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS\r\n            -DBRPC_REVISION=\\\"0.9.7\\\" -D__STRICT_ANSI__ -g  -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -fno-gcse -Wno-aligned-new -\r\n            DNDEBUG -O2 -g -DNDEBUG   -std=gnu++11 -o CMakeFiles/SOURCES_LIB.dir/bvar/detail/percentile.cpp.o -c /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spa\r\n            ck-src/src/bvar/detail/percentile.cpp\r\n     497    make[2]: Leaving directory '/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build'\r\n  >> 498    make[1]: *** [CMakeFiles/Makefile2:386: src/CMakeFiles/BUTIL_LIB.dir/all] Error 2\r\n     499    make[1]: *** Waiting for unfinished jobs....\r\n     500    [ 44%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/detail/sampler.cpp.o\r\n     501    cd /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src && /home/xiaojun/spack/lib/spack/env/gcc/g++   -I/tmp/root/spack-stage/spack-stage-br\r\n            pc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build -I/home/xiaojun/spack/opt/spa\r\n            ck/linux-centos8-aarch64/gcc-8.2.1/gflags-2.1.2-bvdcmnc352f5pt7gecb7yvbcexg724r4/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/protobuf-3.11.2-tei2sd6ef46yjhuzah\r\n            spmwwjswvtj65c/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/leveldb-1.22-k4vngqjrdefeswzfnmpqt7lyzogasr3x/include -I/home/xiaojun/spack/opt/spack/linux-centos8-\r\n            aarch64/gcc-8.2.1/openssl-1.1.1g-ku5v5n2vxpjzaz6e4h7mavavabf7pvuw/include -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src  -DBRPC_WITH\r\n            _GLOG=0 -DGFLAGS_NS=google -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS\r\n            -DBRPC_REVISION=\\\"0.9.7\\\" -D__STRICT_ANSI__ -g  -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -fno-gcse -Wno-aligned-new -\r\n            DNDEBUG -O2 -g -DNDEBUG   -std=gnu++11 -o CMakeFiles/SOURCES_LIB.dir/bvar/detail/sampler.cpp.o -c /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-\r\n            src/src/bvar/detail/sampler.cpp\r\n     502    [ 44%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/gflag.cpp.o\r\n     503    cd /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src && /home/xiaojun/spack/lib/spack/env/gcc/g++   -I/tmp/root/spack-stage/spack-stage-br\r\n            pc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build -I/home/xiaojun/spack/opt/spa\r\n            ck/linux-centos8-aarch64/gcc-8.2.1/gflags-2.1.2-bvdcmnc352f5pt7gecb7yvbcexg724r4/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/protobuf-3.11.2-tei2sd6ef46yjhuzah\r\n            spmwwjswvtj65c/include -I/home/xiaojun/spack/opt/spack/linux-centos8-aarch64/gcc-8.2.1/leveldb-1.22-k4vngqjrdefeswzfnmpqt7lyzogasr3x/include -I/home/xiaojun/spack/opt/spack/linux-centos8-\r\n            aarch64/gcc-8.2.1/openssl-1.1.1g-ku5v5n2vxpjzaz6e4h7mavavabf7pvuw/include -I/tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-build/src  -DBRPC_WITH\r\n            _GLOG=0 -DGFLAGS_NS=google -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS\r\n            -DBRPC_REVISION=\\\"0.9.7\\\" -D__STRICT_ANSI__ -g  -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -fno-gcse -Wno-aligned-new -\r\n            DNDEBUG -O2 -g -DNDEBUG   -std=gnu++11 -o CMakeFiles/SOURCES_LIB.dir/bvar/gflag.cpp.o -c /tmp/root/spack-stage/spack-stage-brpc-0.9.7-rc03-mphxg6yyath6c46pijdr5gxuzi6dsfrs/spack-src/src/b\r\n            var/gflag.cpp\r\n     504    [ 45%] Building CXX object src/CMakeFiles/SOURCES_LIB.dir/bvar/latency_recorder.cpp.o\r\n```\r\n\r\n本地修复补丁如下:\r\n```\r\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\r\nindex 3deb734..d77a70d 100644\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -137,7 +137,7 @@ if(CMAKE_CXX_COMPILER_ID STREQUAL \"GNU\")\r\n         set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -fno-gcse\")\r\n     endif()\r\n     if(NOT (CMAKE_CXX_COMPILER_VERSION VERSION_LESS 7.0))\r\n-        set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-aligned-new\")\r\n+        set(CMAKE_CXX_FLAGS \"${CMAKE_CXX_FLAGS} -Wno-aligned-new -Wno-narrowing\")\r\n     endif()\r\n endif()\r\n```\r\n\r\n请问这个补丁可以向社区内合入吗? 或是有其它方式(如优化代码)来修复此问题?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619761250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619819021","html_url":"https://github.com/apache/brpc/issues/1101#issuecomment-619819021","issue_url":"https://api.github.com/repos/apache/brpc/issues/1101","id":619819021,"node_id":"MDEyOklzc3VlQ29tbWVudDYxOTgxOTAyMQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-27T08:27:24Z","updated_at":"2020-04-27T08:27:24Z","author_association":"MEMBER","body":"目前不支持，异步逻辑会让整体性能差一点，另外考虑到redis每一条command可能会有依赖关系，所以只实现了同步。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/619819021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620332970","html_url":"https://github.com/apache/brpc/issues/1072#issuecomment-620332970","issue_url":"https://api.github.com/repos/apache/brpc/issues/1072","id":620332970,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMzMjk3MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T02:05:40Z","updated_at":"2020-04-28T02:05:40Z","author_association":"CONTRIBUTOR","body":"用一下0.9.7或master，加入了对arm64的支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620332970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620336665","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-620336665","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":620336665,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDMzNjY2NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T02:18:32Z","updated_at":"2020-04-28T02:19:23Z","author_association":"CONTRIBUTOR","body":"你在本地这样改下看看是否ok（去掉-Wno-narrowing）。可能编译器需要明确标识为signed char才能允许负值。\r\n\r\n```\r\ndiff --git a/src/butil/containers/case_ignored_flat_map.cpp b/src/butil/containers/case_ignored_flat_map.cpp\r\nindex 7f2fadc5..a7471561 100644\r\n--- a/src/butil/containers/case_ignored_flat_map.cpp\r\n+++ b/src/butil/containers/case_ignored_flat_map.cpp\r\n@@ -19,7 +19,7 @@\r\n \r\n namespace butil {\r\n \r\n-static const char g_tolower_map_base[] = {\r\n+static const signed char g_tolower_map_base[] = {\r\n     -128, -127, -126, -125, -124, -123, -122, -121, -120,\r\n     -119, -118, -117, -116, -115, -114, -113, -112, -111, -110,\r\n     -109, -108, -107, -106, -105, -104, -103, -102, -101, -100,\r\n@@ -48,6 +48,6 @@ static const char g_tolower_map_base[] = {\r\n     120, 121, 122, 123, 124, 125, 126, 127\r\n };\r\n \r\n-extern const char* const g_tolower_map = g_tolower_map_base + 128;\r\n+extern const signed char* const g_tolower_map = g_tolower_map_base + 128;\r\n \r\n } // namespace butil\r\ndiff --git a/src/butil/containers/case_ignored_flat_map.h b/src/butil/containers/case_ignored_flat_map.h\r\nindex ed6e58b4..6bc1a9af 100644\r\n--- a/src/butil/containers/case_ignored_flat_map.h\r\n+++ b/src/butil/containers/case_ignored_flat_map.h\r\n@@ -27,7 +27,7 @@ namespace butil {\r\n // NOTE: Using ascii_tolower instead of ::tolower shortens 150ns in\r\n // FlatMapTest.perf_small_string_map (with -O2 added, -O0 by default)\r\n inline char ascii_tolower(char c) {\r\n-    extern const char* const g_tolower_map;\r\n+    extern const signed char* const g_tolower_map;\r\n     return g_tolower_map[(int)c];\r\n }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620336665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620346023","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-620346023","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":620346023,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM0NjAyMw==","user":{"login":"darmac","id":29532367,"node_id":"MDQ6VXNlcjI5NTMyMzY3","avatar_url":"https://avatars.githubusercontent.com/u/29532367?v=4","gravatar_id":"","url":"https://api.github.com/users/darmac","html_url":"https://github.com/darmac","followers_url":"https://api.github.com/users/darmac/followers","following_url":"https://api.github.com/users/darmac/following{/other_user}","gists_url":"https://api.github.com/users/darmac/gists{/gist_id}","starred_url":"https://api.github.com/users/darmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darmac/subscriptions","organizations_url":"https://api.github.com/users/darmac/orgs","repos_url":"https://api.github.com/users/darmac/repos","events_url":"https://api.github.com/users/darmac/events{/privacy}","received_events_url":"https://api.github.com/users/darmac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T02:50:06Z","updated_at":"2020-04-28T02:50:38Z","author_association":"NONE","body":"@jamesge  \r\n\"你在本地这样改下看看是否ok（去掉-Wno-narrowing）。可能编译器需要明确标识为signed char才能允许负值。\"\r\n=> 这个补丁看起来可以, 可否帮忙合入呢?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620346023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620354364","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-620354364","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":620354364,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM1NDM2NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T03:17:47Z","updated_at":"2020-04-28T03:17:47Z","author_association":"CONTRIBUTOR","body":"@darmac 已经完全没有warning了么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620354364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620359837","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-620359837","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":620359837,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM1OTgzNw==","user":{"login":"darmac","id":29532367,"node_id":"MDQ6VXNlcjI5NTMyMzY3","avatar_url":"https://avatars.githubusercontent.com/u/29532367?v=4","gravatar_id":"","url":"https://api.github.com/users/darmac","html_url":"https://github.com/darmac","followers_url":"https://api.github.com/users/darmac/followers","following_url":"https://api.github.com/users/darmac/following{/other_user}","gists_url":"https://api.github.com/users/darmac/gists{/gist_id}","starred_url":"https://api.github.com/users/darmac/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/darmac/subscriptions","organizations_url":"https://api.github.com/users/darmac/orgs","repos_url":"https://api.github.com/users/darmac/repos","events_url":"https://api.github.com/users/darmac/events{/privacy}","received_events_url":"https://api.github.com/users/darmac/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T03:34:44Z","updated_at":"2020-04-28T03:34:44Z","author_association":"NONE","body":"是的 , narrowing 的警告已经完全找不到了.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620359837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620360910","html_url":"https://github.com/apache/brpc/issues/1091#issuecomment-620360910","issue_url":"https://api.github.com/repos/apache/brpc/issues/1091","id":620360910,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMDM2MDkxMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-28T03:38:13Z","updated_at":"2020-04-28T03:38:13Z","author_association":"CONTRIBUTOR","body":"提交到master了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/620360910/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null}]