[{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053329848","html_url":"https://github.com/apache/hudi/issues/4896#issuecomment-1053329848","issue_url":"https://api.github.com/repos/apache/hudi/issues/4896","id":1053329848,"node_id":"IC_kwDOBI7nWM4-yIm4","user":{"login":"Gatsby-Lee","id":22950880,"node_id":"MDQ6VXNlcjIyOTUwODgw","avatar_url":"https://avatars.githubusercontent.com/u/22950880?v=4","gravatar_id":"","url":"https://api.github.com/users/Gatsby-Lee","html_url":"https://github.com/Gatsby-Lee","followers_url":"https://api.github.com/users/Gatsby-Lee/followers","following_url":"https://api.github.com/users/Gatsby-Lee/following{/other_user}","gists_url":"https://api.github.com/users/Gatsby-Lee/gists{/gist_id}","starred_url":"https://api.github.com/users/Gatsby-Lee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gatsby-Lee/subscriptions","organizations_url":"https://api.github.com/users/Gatsby-Lee/orgs","repos_url":"https://api.github.com/users/Gatsby-Lee/repos","events_url":"https://api.github.com/users/Gatsby-Lee/events{/privacy}","received_events_url":"https://api.github.com/users/Gatsby-Lee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T08:03:11Z","updated_at":"2022-02-27T08:03:11Z","author_association":"CONTRIBUTOR","body":"@nsivabalan \r\n\r\nHi, \r\n\r\nhere is the content in .hoodie\r\n\r\n```\r\n    0 Feb 26 23:34 archived_$folder$\r\n    0 Feb 26 23:34 .temp_$folder$\r\n  514 Feb 26 23:34 hoodie.properties\r\n    0 Feb 26 23:34 .aux_$folder$\r\n    0 Feb 26 23:34 20220227073429.commit.requested\r\n    0 Feb 26 23:34 .heartbeat_$folder$\r\n48321 Feb 26 23:34 20220227073429.inflight\r\n68948 Feb 26 23:35 20220227073429.commit\r\n    0 Feb 26 23:35 metadata_$folder$\r\n    0 Feb 26 23:35 20220227073548.commit.requested\r\n47671 Feb 26 23:36 20220227073548.inflight\r\n69025 Feb 26 23:36 20220227073548.commit\r\n    0 Feb 26 23:37 20220227073706.commit.requested\r\n48322 Feb 26 23:37 20220227073706.inflight\r\n69957 Feb 26 23:37 20220227073706.commit\r\n    0 Feb 26 23:40 20220227074055.commit.requested\r\n    0 Feb 26 23:41 20220227074100.rollback.inflight\r\n15444 Feb 26 23:41 20220227074100.rollback\r\n50285 Feb 26 23:41 20220227074055.inflight\r\n72571 Feb 26 23:41 20220227074055.commit\r\n    0 Feb 26 23:42 20220227074225.commit.requested\r\n48970 Feb 26 23:42 20220227074225.inflight\r\n70917 Feb 26 23:43 20220227074225.commit\r\n    0 Feb 26 23:44 20220227074418.commit.requested\r\n47670 Feb 26 23:44 20220227074418.inflight\r\n69084 Feb 26 23:44 20220227074418.commit\r\n    0 Feb 26 23:46 20220227074617.commit.requested\r\n47013 Feb 26 23:46 20220227074617.inflight\r\n68146 Feb 26 23:46 20220227074617.commit\r\n    0 Feb 26 23:48 20220227074817.commit.requested\r\n49625 Feb 26 23:48 20220227074817.inflight\r\n71895 Feb 26 23:48 20220227074817.commit\r\n    0 Feb 26 23:50 20220227075018.commit.requested\r\n45706 Feb 26 23:50 20220227075018.inflight\r\n66287 Feb 26 23:50 20220227075018.commit\r\n    0 Feb 26 23:52 20220227075217.commit.requested\r\n48977 Feb 26 23:52 20220227075217.inflight\r\n70975 Feb 26 23:52 20220227075217.commit\r\n    0 Feb 26 23:54 20220227075416.commit.requested\r\n  256 Feb 26 23:54 ..\r\n  128 Feb 26 23:54 .aux\r\n 1376 Feb 26 23:54 .\r\n  192 Feb 26 23:54 metadata\r\n```\r\n\r\nhere is the content of .hoodie/metadata/.hoodie\r\n```\r\n   0 Feb 26 23:35 archived_$folder$\r\n 373 Feb 26 23:35 hoodie.properties\r\n   0 Feb 26 23:35 .temp_$folder$\r\n   0 Feb 26 23:35 .aux_$folder$\r\n   0 Feb 26 23:35 20220227073429.deltacommit.requested\r\n1187 Feb 26 23:35 20220227073429.deltacommit.inflight\r\n2195 Feb 26 23:35 20220227073429.deltacommit\r\n   0 Feb 26 23:36 20220227073548.deltacommit.requested\r\n1905 Feb 26 23:36 20220227073548.deltacommit.inflight\r\n2443 Feb 26 23:36 20220227073548.deltacommit\r\n   0 Feb 26 23:37 20220227073706.deltacommit.requested\r\n1905 Feb 26 23:37 20220227073706.deltacommit.inflight\r\n2518 Feb 26 23:37 20220227073706.deltacommit\r\n   0 Feb 26 23:41 20220227074055.deltacommit.requested\r\n1905 Feb 26 23:41 20220227074055.deltacommit.inflight\r\n2590 Feb 26 23:41 20220227074055.deltacommit\r\n   0 Feb 26 23:41 20220227074100.deltacommit.requested\r\n 526 Feb 26 23:41 20220227074100.deltacommit.inflight\r\n1297 Feb 26 23:41 20220227074100.deltacommit\r\n   0 Feb 26 23:43 20220227074225.deltacommit.requested\r\n1905 Feb 26 23:43 20220227074225.deltacommit.inflight\r\n2667 Feb 26 23:43 20220227074225.deltacommit\r\n   0 Feb 26 23:45 20220227074418.deltacommit.requested\r\n1905 Feb 26 23:45 20220227074418.deltacommit.inflight\r\n2742 Feb 26 23:45 20220227074418.deltacommit\r\n   0 Feb 26 23:47 20220227074617.deltacommit.requested\r\n1905 Feb 26 23:47 20220227074617.deltacommit.inflight\r\n2817 Feb 26 23:47 20220227074617.deltacommit\r\n   0 Feb 26 23:49 20220227074817.deltacommit.requested\r\n1905 Feb 26 23:49 20220227074817.deltacommit.inflight\r\n2893 Feb 26 23:49 20220227074817.deltacommit\r\n   0 Feb 26 23:50 20220227075018.deltacommit.requested\r\n1905 Feb 26 23:50 20220227075018.deltacommit.inflight\r\n2967 Feb 26 23:50 20220227075018.deltacommit\r\n   0 Feb 26 23:52 20220227075217.deltacommit.requested\r\n1905 Feb 26 23:52 20220227075217.deltacommit.inflight\r\n3042 Feb 26 23:53 20220227075217.deltacommit\r\n 128 Feb 26 23:54 .aux\r\n1280 Feb 26 23:54 .\r\n 192 Feb 26 23:54 ..\r\n```","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053329848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053400608","html_url":"https://github.com/apache/hudi/pull/4917#issuecomment-1053400608","issue_url":"https://api.github.com/repos/apache/hudi/issues/4917","id":1053400608,"node_id":"IC_kwDOBI7nWM4-yZ4g","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T09:10:03Z","updated_at":"2022-02-27T09:10:03Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"10e080b627f60dc5190f2b031f67dc61b85f938a\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6359\",\n    \"triggerID\" : \"10e080b627f60dc5190f2b031f67dc61b85f938a\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 10e080b627f60dc5190f2b031f67dc61b85f938a Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6359) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053400608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053438467","html_url":"https://github.com/apache/hudi/pull/4779#issuecomment-1053438467","issue_url":"https://api.github.com/repos/apache/hudi/issues/4779","id":1053438467,"node_id":"IC_kwDOBI7nWM4-yjID","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T09:48:55Z","updated_at":"2022-02-27T09:48:55Z","author_association":"CONTRIBUTOR","body":"> @pratyakshsharma : did you get a chance to test the patch out. Seems straight forward. but just asking.\r\n\r\nNo I have just written test cases, and they were passing. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053438467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053439441","html_url":"https://github.com/apache/hudi/pull/3929#issuecomment-1053439441","issue_url":"https://api.github.com/repos/apache/hudi/issues/3929","id":1053439441,"node_id":"IC_kwDOBI7nWM4-yjXR","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T09:49:56Z","updated_at":"2022-02-27T09:49:56Z","author_association":"CONTRIBUTOR","body":"Ack.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053439441/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053540283","html_url":"https://github.com/apache/hudi/pull/4918#issuecomment-1053540283","issue_url":"https://api.github.com/repos/apache/hudi/issues/4918","id":1053540283,"node_id":"IC_kwDOBI7nWM4-y7-7","user":{"login":"wangxianghu","id":49835526,"node_id":"MDQ6VXNlcjQ5ODM1NTI2","avatar_url":"https://avatars.githubusercontent.com/u/49835526?v=4","gravatar_id":"","url":"https://api.github.com/users/wangxianghu","html_url":"https://github.com/wangxianghu","followers_url":"https://api.github.com/users/wangxianghu/followers","following_url":"https://api.github.com/users/wangxianghu/following{/other_user}","gists_url":"https://api.github.com/users/wangxianghu/gists{/gist_id}","starred_url":"https://api.github.com/users/wangxianghu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wangxianghu/subscriptions","organizations_url":"https://api.github.com/users/wangxianghu/orgs","repos_url":"https://api.github.com/users/wangxianghu/repos","events_url":"https://api.github.com/users/wangxianghu/events{/privacy}","received_events_url":"https://api.github.com/users/wangxianghu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T12:28:06Z","updated_at":"2022-02-27T12:28:06Z","author_association":"CONTRIBUTOR","body":"hi @nsivabalan  do you have time to review this?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053540283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053602113","html_url":"https://github.com/apache/hudi/pull/4919#issuecomment-1053602113","issue_url":"https://api.github.com/repos/apache/hudi/issues/4919","id":1053602113,"node_id":"IC_kwDOBI7nWM4-zLFB","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T16:09:46Z","updated_at":"2022-02-27T16:09:46Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"a292f431368fb83282bc8e285608b7e94d2c959e\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6361\",\n    \"triggerID\" : \"a292f431368fb83282bc8e285608b7e94d2c959e\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* a292f431368fb83282bc8e285608b7e94d2c959e Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6361) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053602113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053603205","html_url":"https://github.com/apache/hudi/pull/4919#issuecomment-1053603205","issue_url":"https://api.github.com/repos/apache/hudi/issues/4919","id":1053603205,"node_id":"IC_kwDOBI7nWM4-zLWF","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T16:13:45Z","updated_at":"2022-02-27T16:13:45Z","author_association":"CONTRIBUTOR","body":"@codope : went ahead w/ merging since this is critical. If you have any feedback, will address in a follow up PR. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053603205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053612275","html_url":"https://github.com/apache/hudi/pull/4905#issuecomment-1053612275","issue_url":"https://api.github.com/repos/apache/hudi/issues/4905","id":1053612275,"node_id":"IC_kwDOBI7nWM4-zNjz","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T16:48:10Z","updated_at":"2022-02-27T16:54:36Z","author_association":"CONTRIBUTOR","body":"I spent time to go over all usages of both configs and here is my understanding. \r\n\r\nLets see what was the status prior to merging https://github.com/apache/hudi/pull/4828\r\n\r\nfor simplicitly, lets talk about one config i.e async enable clustering. \r\nfor this, we have one config at writer client layer(hoodie.clustering.async.enabled) and one at data source layer (hoodie.datasource.clustering.async.enable). lets call each of them writeClientAsyncConfig and dataSourceAsyncConfig for explanation purpose. \r\n\r\nDetlaStreamer flow:\r\nhere, dataSourceAsyncConfig is never in the picture. we check if writeClientAsyncConfig is set and go about it. no confusion here.\r\n\r\nSpark Datasource flow: \r\nWe expect users to set datasourceAsyncConfig in this case. \r\nAnd within HoodieSparkSqlWriter, while configuring/instantiating HoodieWriteClientConfig, based on whats set of datasourceAsyncConfig, hudi sets the writeClientAsyncConfig. \r\n\r\nExcerpt from DataSourceUtils \r\n```\r\n\r\npublic static HoodieWriteConfig createHoodieConfig(String schemaStr, String basePath,\r\n      String tblName, Map<String, String> parameters) {\r\n.\r\n.\r\n    boolean asyncClusteringEnabled = Boolean.parseBoolean(parameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()));\r\n.\r\nHoodieWriteConfig.newBuilder().... \r\n.withClusteringConfig(HoodieClusteringConfig.newBuilder()\r\n            .withAsyncClustering(asyncClusteringEnabled).build())\r\n.\r\n```\r\n\r\nSo, one bug I see here is, if someone sets writeClientAsyncConfig with spark datasource write, probably we may not honor, bcoz, we explicitly check the value of dataSourceAsyncConfig and set the writeClientAsyncConfig in HoodieWriteConfig while building the writeConfig.\r\n\r\nWe have another method in HoodieSparkSqlWriter where we check if asyncClustering is enabled. \r\n```\r\n  private def isAsyncClusteringEnabled(client: SparkRDDWriteClient[HoodieRecordPayload[Nothing]],\r\n                                       parameters: Map[String, String]): Boolean = {\r\n    log.info(s\"Config.asyncClusteringEnabled ? ${client.getConfig.isAsyncClusteringEnabled}\")\r\n    asyncClusteringTriggerFnDefined && client.getConfig.isAsyncClusteringEnabled &&\r\n      parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key).exists(r => r.toBoolean)\r\n  }\r\n```\r\n\r\nthis is called/used only in HoodieStreaming sink flow. Anyways. \r\nLets see what happens if \r\na) User sets just the datasourceAsyncConfig.\r\nwriteConfig will get instantiation properly and so client.getConfig.isAsyncClusteringEnabled will be true and parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key) will also be true.\r\nand we should be good here. \r\nb) User sets just the writeClientConfig. \r\nwriteConfig instantiation will have a gap here. and so client.getConfig.isAsyncClusteringEnabled will return false. \r\n\r\n\r\nNow, lets revisit whats the status with latest master (i.e. after landing https://github.com/apache/hudi/pull/4828) \r\n\r\nNo change in DeltaStreamer flow.\r\n\r\nSpark DataSource flow: \r\nExcerpt from DataSourceUtils \r\n```\r\n\r\npublic static HoodieWriteConfig createHoodieConfig(String schemaStr, String basePath,\r\n      String tblName, Map<String, String> parameters) {\r\n.\r\n.\r\n    boolean asyncClusteringEnabled = Boolean.parseBoolean(parameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()));\r\n.\r\nHoodieWriteConfig.newBuilder().... \r\n.withClusteringConfig(HoodieClusteringConfig.newBuilder()\r\n            .withAsyncClustering(asyncClusteringEnabled).build())\r\n.\r\n```\r\ndataSourceAsyncConfig (DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()) refers to same config key as writeClientAsyncConfig now. So, essentially the previously used dataSourceAsyncConfig does not exist anymore. \r\n\r\nand the other method of interest is \r\n```\r\n  private def isAsyncClusteringEnabled(client: SparkRDDWriteClient[HoodieRecordPayload[Nothing]],\r\n                                       parameters: Map[String, String]): Boolean = {\r\n    log.info(s\"Config.asyncClusteringEnabled ? ${client.getConfig.isAsyncClusteringEnabled}\")\r\n    asyncClusteringTriggerFnDefined && client.getConfig.isAsyncClusteringEnabled &&\r\n      parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key).exists(r => r.toBoolean)\r\n  }\r\n```\r\n\r\nNow, let's see both options.\r\na) User sets just old dataSourceAsyncConfig. \r\nparameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()) while instantiating writeConfig may or may not work. Even though we have added alternate keys, not sure what exactly gets returned as part of DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key(). \r\nAssuming both keys work, \r\nwithin isAsyncClusteringEnabled: client.getConfig.isAsyncClusteringEnabled will be true. parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key) will also be true. \r\nBut if old dataSourceAsyncConfig does not get picked up with parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key), there will be a gap. \r\nb) User sets writeClientAsyncConfig. \r\nparameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key) will refer to writeClientConfig. and so writeConfig instantiation should be good. and isAsyncClusteringEnabled() should also work. \r\n\r\n\r\n@codope : I am thinking if we should revert the old patch. Do you remember why did we introduced a new datasource config in the first place w/o re-using writeClientConfig for clustering enablement ? \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053612275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053615649","html_url":"https://github.com/apache/hudi/pull/4840#issuecomment-1053615649","issue_url":"https://api.github.com/repos/apache/hudi/issues/4840","id":1053615649,"node_id":"IC_kwDOBI7nWM4-zOYh","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T17:00:49Z","updated_at":"2022-02-27T17:00:49Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053615649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053616731","html_url":"https://github.com/apache/hudi/pull/4920#issuecomment-1053616731","issue_url":"https://api.github.com/repos/apache/hudi/issues/4920","id":1053616731,"node_id":"IC_kwDOBI7nWM4-zOpb","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T17:04:40Z","updated_at":"2022-02-27T17:04:40Z","author_association":"CONTRIBUTOR","body":"@stayrascal : this does not looks like minor. can you please file a jira and link it. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053616731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053617048","html_url":"https://github.com/apache/hudi/pull/4920#issuecomment-1053617048","issue_url":"https://api.github.com/repos/apache/hudi/issues/4920","id":1053617048,"node_id":"IC_kwDOBI7nWM4-zOuY","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T17:05:49Z","updated_at":"2022-02-27T17:05:49Z","author_association":"CONTRIBUTOR","body":"CC @codope. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053617048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053620001","html_url":"https://github.com/apache/hudi/pull/4921#issuecomment-1053620001","issue_url":"https://api.github.com/repos/apache/hudi/issues/4921","id":1053620001,"node_id":"IC_kwDOBI7nWM4-zPch","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T17:16:29Z","updated_at":"2022-02-27T17:16:29Z","author_association":"CONTRIBUTOR","body":"@alexeykudinkin : Can you review this please. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053620001/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053630698","html_url":"https://github.com/apache/hudi/pull/4920#issuecomment-1053630698","issue_url":"https://api.github.com/repos/apache/hudi/issues/4920","id":1053630698,"node_id":"IC_kwDOBI7nWM4-zSDq","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T17:53:19Z","updated_at":"2022-02-27T17:53:19Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"7a602cc73003c800e1694a980f1f61df646f4198\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6362\",\n    \"triggerID\" : \"7a602cc73003c800e1694a980f1f61df646f4198\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"80b76f21f4529ab29d20dec9b123035a33853ae5\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6364\",\n    \"triggerID\" : \"80b76f21f4529ab29d20dec9b123035a33853ae5\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 80b76f21f4529ab29d20dec9b123035a33853ae5 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6364) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053630698/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053635693","html_url":"https://github.com/apache/hudi/pull/4840#issuecomment-1053635693","issue_url":"https://api.github.com/repos/apache/hudi/issues/4840","id":1053635693,"node_id":"IC_kwDOBI7nWM4-zTRt","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-27T18:13:18Z","updated_at":"2022-02-27T18:13:18Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"4d014c22ead28e4594cd9ebc78ec72396b8033da\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6098\",\n    \"triggerID\" : \"4d014c22ead28e4594cd9ebc78ec72396b8033da\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"c2ebd32467cdcb907d22bea0e9a78f7e25902eee\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6174\",\n    \"triggerID\" : \"c2ebd32467cdcb907d22bea0e9a78f7e25902eee\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"43859892f433775b00097e573b3c4e9971f8f3fb\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6239\",\n    \"triggerID\" : \"43859892f433775b00097e573b3c4e9971f8f3fb\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"260c29fa4d9e1d0e45e9ee771d51ed3f6b2f7c5f\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6352\",\n    \"triggerID\" : \"260c29fa4d9e1d0e45e9ee771d51ed3f6b2f7c5f\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"260c29fa4d9e1d0e45e9ee771d51ed3f6b2f7c5f\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6366\",\n    \"triggerID\" : \"1053615649\",\n    \"triggerType\" : \"MANUAL\"\n  } ]\n}-->\n## CI report:\n\n* 260c29fa4d9e1d0e45e9ee771d51ed3f6b2f7c5f Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6352) Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6366) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053635693/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053753544","html_url":"https://github.com/apache/hudi/pull/4444#issuecomment-1053753544","issue_url":"https://api.github.com/repos/apache/hudi/issues/4444","id":1053753544,"node_id":"IC_kwDOBI7nWM4-zwDI","user":{"login":"guanziyue","id":30882822,"node_id":"MDQ6VXNlcjMwODgyODIy","avatar_url":"https://avatars.githubusercontent.com/u/30882822?v=4","gravatar_id":"","url":"https://api.github.com/users/guanziyue","html_url":"https://github.com/guanziyue","followers_url":"https://api.github.com/users/guanziyue/followers","following_url":"https://api.github.com/users/guanziyue/following{/other_user}","gists_url":"https://api.github.com/users/guanziyue/gists{/gist_id}","starred_url":"https://api.github.com/users/guanziyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guanziyue/subscriptions","organizations_url":"https://api.github.com/users/guanziyue/orgs","repos_url":"https://api.github.com/users/guanziyue/repos","events_url":"https://api.github.com/users/guanziyue/events{/privacy}","received_events_url":"https://api.github.com/users/guanziyue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T00:59:04Z","updated_at":"2022-02-28T00:59:04Z","author_association":"CONTRIBUTOR","body":"Hi @nsivabalan \r\nThis problem may be solved if we have HUDI-1517. [https://github.com/apache/hudi/pull/4913](url) And this case is also covered in the UT of HUDI-1517. So could you take a look at it when you have time. And if it is accepted, could I close this PR?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053753544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053786323","html_url":"https://github.com/apache/hudi/pull/4913#issuecomment-1053786323","issue_url":"https://api.github.com/repos/apache/hudi/issues/4913","id":1053786323,"node_id":"IC_kwDOBI7nWM4-z4DT","user":{"login":"guanziyue","id":30882822,"node_id":"MDQ6VXNlcjMwODgyODIy","avatar_url":"https://avatars.githubusercontent.com/u/30882822?v=4","gravatar_id":"","url":"https://api.github.com/users/guanziyue","html_url":"https://github.com/guanziyue","followers_url":"https://api.github.com/users/guanziyue/followers","following_url":"https://api.github.com/users/guanziyue/following{/other_user}","gists_url":"https://api.github.com/users/guanziyue/gists{/gist_id}","starred_url":"https://api.github.com/users/guanziyue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guanziyue/subscriptions","organizations_url":"https://api.github.com/users/guanziyue/orgs","repos_url":"https://api.github.com/users/guanziyue/repos","events_url":"https://api.github.com/users/guanziyue/events{/privacy}","received_events_url":"https://api.github.com/users/guanziyue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T01:47:44Z","updated_at":"2022-02-28T01:47:44Z","author_association":"CONTRIBUTOR","body":"Hi @yihua\r\nThis PR is ready for review. Could you have a look when you have spare time.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053786323/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053793481","html_url":"https://github.com/apache/hudi/pull/4902#issuecomment-1053793481","issue_url":"https://api.github.com/repos/apache/hudi/issues/4902","id":1053793481,"node_id":"IC_kwDOBI7nWM4-z5zJ","user":{"login":"zhangyue19921010","id":69956021,"node_id":"MDQ6VXNlcjY5OTU2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/69956021?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyue19921010","html_url":"https://github.com/zhangyue19921010","followers_url":"https://api.github.com/users/zhangyue19921010/followers","following_url":"https://api.github.com/users/zhangyue19921010/following{/other_user}","gists_url":"https://api.github.com/users/zhangyue19921010/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyue19921010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyue19921010/subscriptions","organizations_url":"https://api.github.com/users/zhangyue19921010/orgs","repos_url":"https://api.github.com/users/zhangyue19921010/repos","events_url":"https://api.github.com/users/zhangyue19921010/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyue19921010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T01:59:08Z","updated_at":"2022-02-28T01:59:08Z","author_association":"CONTRIBUTOR","body":"> @zhangyue19921010 : Can you help review this as well.\r\n\r\nSure will do it ASAP","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053793481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053805595","html_url":"https://github.com/apache/hudi/issues/4873#issuecomment-1053805595","issue_url":"https://api.github.com/repos/apache/hudi/issues/4873","id":1053805595,"node_id":"IC_kwDOBI7nWM4-z8wb","user":{"login":"cafelo-pfdrive","id":93156892,"node_id":"U_kgDOBY12HA","avatar_url":"https://avatars.githubusercontent.com/u/93156892?v=4","gravatar_id":"","url":"https://api.github.com/users/cafelo-pfdrive","html_url":"https://github.com/cafelo-pfdrive","followers_url":"https://api.github.com/users/cafelo-pfdrive/followers","following_url":"https://api.github.com/users/cafelo-pfdrive/following{/other_user}","gists_url":"https://api.github.com/users/cafelo-pfdrive/gists{/gist_id}","starred_url":"https://api.github.com/users/cafelo-pfdrive/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cafelo-pfdrive/subscriptions","organizations_url":"https://api.github.com/users/cafelo-pfdrive/orgs","repos_url":"https://api.github.com/users/cafelo-pfdrive/repos","events_url":"https://api.github.com/users/cafelo-pfdrive/events{/privacy}","received_events_url":"https://api.github.com/users/cafelo-pfdrive/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T02:19:50Z","updated_at":"2022-02-28T02:19:50Z","author_association":"NONE","body":"@Gatsby-Lee  really appreciate your answer. here it goes the latest .hoddie folder. I see new  \"clean\" file. What type of file should create it for the compaction? \r\n\r\n![image](https://user-images.githubusercontent.com/93156892/155913357-3aba06f8-3fd5-4355-96e4-76e074454e63.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053805595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053856892","html_url":"https://github.com/apache/hudi/pull/4919#issuecomment-1053856892","issue_url":"https://api.github.com/repos/apache/hudi/issues/4919","id":1053856892,"node_id":"IC_kwDOBI7nWM4-0JR8","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T03:53:59Z","updated_at":"2022-02-28T03:53:59Z","author_association":"MEMBER","body":"Looks good to me. I was just waiting for CI success 👍 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053856892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053943299","html_url":"https://github.com/apache/hudi/pull/4920#issuecomment-1053943299","issue_url":"https://api.github.com/repos/apache/hudi/issues/4920","id":1053943299,"node_id":"IC_kwDOBI7nWM4-0eYD","user":{"login":"stayrascal","id":13775334,"node_id":"MDQ6VXNlcjEzNzc1MzM0","avatar_url":"https://avatars.githubusercontent.com/u/13775334?v=4","gravatar_id":"","url":"https://api.github.com/users/stayrascal","html_url":"https://github.com/stayrascal","followers_url":"https://api.github.com/users/stayrascal/followers","following_url":"https://api.github.com/users/stayrascal/following{/other_user}","gists_url":"https://api.github.com/users/stayrascal/gists{/gist_id}","starred_url":"https://api.github.com/users/stayrascal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stayrascal/subscriptions","organizations_url":"https://api.github.com/users/stayrascal/orgs","repos_url":"https://api.github.com/users/stayrascal/repos","events_url":"https://api.github.com/users/stayrascal/events{/privacy}","received_events_url":"https://api.github.com/users/stayrascal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T06:50:35Z","updated_at":"2022-02-28T06:50:35Z","author_association":"CONTRIBUTOR","body":"> \r\n\r\nThanks @nsivabalan review this PR. I failed to create a Jira card, not sure where I can create the card or I didn't have the permission. Instead, I create an issue [here](https://github.com/apache/hudi/issues/4923).","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1053943299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054004151","html_url":"https://github.com/apache/hudi/pull/4924#issuecomment-1054004151","issue_url":"https://api.github.com/repos/apache/hudi/issues/4924","id":1054004151,"node_id":"IC_kwDOBI7nWM4-0tO3","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T08:23:07Z","updated_at":"2022-02-28T08:23:07Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"a9c0bcb8a33a8c046732a4aa135423f84f65235d\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6378\",\n    \"triggerID\" : \"a9c0bcb8a33a8c046732a4aa135423f84f65235d\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* a9c0bcb8a33a8c046732a4aa135423f84f65235d Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6378) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054004151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054031304","html_url":"https://github.com/apache/hudi/pull/4909#issuecomment-1054031304","issue_url":"https://api.github.com/repos/apache/hudi/issues/4909","id":1054031304,"node_id":"IC_kwDOBI7nWM4-0z3I","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T08:59:41Z","updated_at":"2022-03-01T03:14:01Z","author_association":"CONTRIBUTOR","body":"Thanks for the contribution, i have reviewed and supply a patch :)\r\n[HUDI-3516.patch.zip](https://github.com/apache/hudi/files/8151892/HUDI-3516.patch.zip)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054031304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054044282","html_url":"https://github.com/apache/hudi/pull/4905#issuecomment-1054044282","issue_url":"https://api.github.com/repos/apache/hudi/issues/4905","id":1054044282,"node_id":"IC_kwDOBI7nWM4-03B6","user":{"login":"boneanxs","id":10115332,"node_id":"MDQ6VXNlcjEwMTE1MzMy","avatar_url":"https://avatars.githubusercontent.com/u/10115332?v=4","gravatar_id":"","url":"https://api.github.com/users/boneanxs","html_url":"https://github.com/boneanxs","followers_url":"https://api.github.com/users/boneanxs/followers","following_url":"https://api.github.com/users/boneanxs/following{/other_user}","gists_url":"https://api.github.com/users/boneanxs/gists{/gist_id}","starred_url":"https://api.github.com/users/boneanxs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/boneanxs/subscriptions","organizations_url":"https://api.github.com/users/boneanxs/orgs","repos_url":"https://api.github.com/users/boneanxs/repos","events_url":"https://api.github.com/users/boneanxs/events{/privacy}","received_events_url":"https://api.github.com/users/boneanxs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T09:14:02Z","updated_at":"2022-02-28T09:14:02Z","author_association":"CONTRIBUTOR","body":"> parameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()) while instantiating writeConfig may or may not work. Even though we have added alternate keys, not sure what exactly gets returned as part of DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key().\r\n\r\nI think `DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()` returned `hoodie.clustering.async.enabled`\r\n\r\nAlso, after landing https://github.com/apache/hudi/pull/4828,  there are two kinds of situations from users side, \r\n\r\n1. If users enable clustering by `DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key` or `HoodieClusteringConfig.ASYNC_CLUSTERING_ENABLE.key`, the clustering service can be enabled, because in the configMap, it will store `hoodie.clustering.async.enabled -> true`\r\n```scala\r\ndf.option(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key, true)\r\n// or\r\ndf.option(HoodieClusteringConfig.ASYNC_CLUSTERING_ENABLE.key, true)\r\n```\r\n\r\n2. But if users enable clustering by key's value directly(which means using `hoodie.datasource.clustering.async.enable` or `hoodie.clustering.async.enabled`), there could be some differences,\r\n\r\n```scala\r\n// will not start clustering because codes\r\n// parameters.get(DataSourceOptions.ASYNC_CLUSTERING_ENABLE.key).exists(r => r.toBoolean) in method\r\n// isAsyncClusteringEnabled use value hoodie.clustering.async.enabled to check. \r\ndf.option(\"hoodie.datasource.clustering.async.enable\", true)\r\n// will work\r\ndf.option(\"hoodie.clustering.async.enabled\", true)\r\n```\r\nfrom DataSourceUtils\r\n\r\n```java\r\npublic static HoodieWriteConfig createHoodieConfig(String schemaStr, String basePath,\r\n      String tblName, Map<String, String> parameters) {\r\n\r\n    boolean asyncClusteringEnabled = Boolean.parseBoolean(parameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()));\r\n\r\nreturn builder.forTable(tblName)\r\n        .withCompactionConfig(HoodieCompactionConfig.newBuilder()\r\n            .withPayloadClass(parameters.get(DataSourceWriteOptions.PAYLOAD_CLASS_NAME().key()))\r\n            .withInlineCompaction(inlineCompact).build())\r\n        .withClusteringConfig(HoodieClusteringConfig.newBuilder()\r\n            .withInlineClustering(inlineClusteringEnabled)\r\n            .withAsyncClustering(asyncClusteringEnabled).build())\r\n        .withPayloadConfig(HoodiePayloadConfig.newBuilder().withPayloadOrderingField(parameters.get(DataSourceWriteOptions.PRECOMBINE_FIELD().key()))\r\n            .build())\r\n        // override above with Hoodie configs specified as options.\r\n        .withProps(parameters).build();\r\n```\r\nif we set `df.option(\"hoodie.datasource.clustering.async.enable\", true)`, `HoodieWriteConfig` will both contain `hoodie.datasource.clustering.async.enable -> true` and `hoodie.clustering.async.enabled -> false`, because it uses `parameters.get(DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key()))` which equals to `parameters.get(\"hoodie.clustering.async.enabled\")` to check async clustering is enabled or not, which of cause returns false, while it will also save all parameters to `HoodieWriteConfig` by `.withProps(parameters).build()`, so `hoodie.datasource.clustering.async.enable -> true` will also be saved. As method `HoodieWriteConfig.isAsyncClusteringEnabled` first use key `hoodie.clustering.async.enabled` to check, then use alternative key `hoodie.datasource.clustering.async.enable` to check, so it will be false.\r\n\r\nFrom my understanding, we can remove these parameters related checks in the pr(Looks these checks also is unnecessary), and only use `HoodieWriteConfig.isAsyncClusteringEnabled` to check if async clustering is enabled or not. In this way, following usages `DataSourceWriteOptions.ASYNC_CLUSTERING_ENABLE().key`, `HoodieClusteringConfig.ASYNC_CLUSTERING_ENABLE().key`, `hoodie.datasource.clustering.async.enable` and `hoodie.clustering.async.enabled` all works.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054044282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054073152","html_url":"https://github.com/apache/hudi/pull/4645#issuecomment-1054073152","issue_url":"https://api.github.com/repos/apache/hudi/issues/4645","id":1054073152,"node_id":"IC_kwDOBI7nWM4-0-FA","user":{"login":"watermelon12138","id":49849410,"node_id":"MDQ6VXNlcjQ5ODQ5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/49849410?v=4","gravatar_id":"","url":"https://api.github.com/users/watermelon12138","html_url":"https://github.com/watermelon12138","followers_url":"https://api.github.com/users/watermelon12138/followers","following_url":"https://api.github.com/users/watermelon12138/following{/other_user}","gists_url":"https://api.github.com/users/watermelon12138/gists{/gist_id}","starred_url":"https://api.github.com/users/watermelon12138/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/watermelon12138/subscriptions","organizations_url":"https://api.github.com/users/watermelon12138/orgs","repos_url":"https://api.github.com/users/watermelon12138/repos","events_url":"https://api.github.com/users/watermelon12138/events{/privacy}","received_events_url":"https://api.github.com/users/watermelon12138/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T09:46:29Z","updated_at":"2022-02-28T09:46:29Z","author_association":"CONTRIBUTOR","body":"@nsivabalan @pratyakshsharma\r\nThank you for your advice. I've changed the corresponding content in the code. Because my PR is too late for current version, and many conflicts occur during merge, I have difficulty resolving them. Therefore, I have created a new PR. I hope you can give suggestions in the new PR. Thank you very much.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054073152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054073675","html_url":"https://github.com/apache/hudi/pull/4645#issuecomment-1054073675","issue_url":"https://api.github.com/repos/apache/hudi/issues/4645","id":1054073675,"node_id":"IC_kwDOBI7nWM4-0-NL","user":{"login":"watermelon12138","id":49849410,"node_id":"MDQ6VXNlcjQ5ODQ5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/49849410?v=4","gravatar_id":"","url":"https://api.github.com/users/watermelon12138","html_url":"https://github.com/watermelon12138","followers_url":"https://api.github.com/users/watermelon12138/followers","following_url":"https://api.github.com/users/watermelon12138/following{/other_user}","gists_url":"https://api.github.com/users/watermelon12138/gists{/gist_id}","starred_url":"https://api.github.com/users/watermelon12138/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/watermelon12138/subscriptions","organizations_url":"https://api.github.com/users/watermelon12138/orgs","repos_url":"https://api.github.com/users/watermelon12138/repos","events_url":"https://api.github.com/users/watermelon12138/events{/privacy}","received_events_url":"https://api.github.com/users/watermelon12138/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T09:47:07Z","updated_at":"2022-02-28T09:47:07Z","author_association":"CONTRIBUTOR","body":"@nsivabalan @pratyakshsharma\r\nThis is new PR address.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054073675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054074075","html_url":"https://github.com/apache/hudi/pull/4645#issuecomment-1054074075","issue_url":"https://api.github.com/repos/apache/hudi/issues/4645","id":1054074075,"node_id":"IC_kwDOBI7nWM4-0-Tb","user":{"login":"watermelon12138","id":49849410,"node_id":"MDQ6VXNlcjQ5ODQ5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/49849410?v=4","gravatar_id":"","url":"https://api.github.com/users/watermelon12138","html_url":"https://github.com/watermelon12138","followers_url":"https://api.github.com/users/watermelon12138/followers","following_url":"https://api.github.com/users/watermelon12138/following{/other_user}","gists_url":"https://api.github.com/users/watermelon12138/gists{/gist_id}","starred_url":"https://api.github.com/users/watermelon12138/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/watermelon12138/subscriptions","organizations_url":"https://api.github.com/users/watermelon12138/orgs","repos_url":"https://api.github.com/users/watermelon12138/repos","events_url":"https://api.github.com/users/watermelon12138/events{/privacy}","received_events_url":"https://api.github.com/users/watermelon12138/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T09:47:36Z","updated_at":"2022-02-28T09:47:36Z","author_association":"CONTRIBUTOR","body":"@nsivabalan @pratyakshsharma\r\nhttps://github.com/apache/hudi/pull/4925/files","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054074075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054123412","html_url":"https://github.com/apache/hudi/pull/4645#issuecomment-1054123412","issue_url":"https://api.github.com/repos/apache/hudi/issues/4645","id":1054123412,"node_id":"IC_kwDOBI7nWM4-1KWU","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T10:44:04Z","updated_at":"2022-02-28T10:44:04Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"5332458bfb61a6e13b9b59ae3813d236f86e01da\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5358\",\n    \"triggerID\" : \"5332458bfb61a6e13b9b59ae3813d236f86e01da\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"ee9f2eaa28c5836977ea980a1d50b1d65ce342ef\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5380\",\n    \"triggerID\" : \"ee9f2eaa28c5836977ea980a1d50b1d65ce342ef\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"ee9f2eaa28c5836977ea980a1d50b1d65ce342ef\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5380\",\n    \"triggerID\" : \"1018113861\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"d98dd23ee2077ff5c70d7c1f57a89057319850fd\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6381\",\n    \"triggerID\" : \"d98dd23ee2077ff5c70d7c1f57a89057319850fd\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* d98dd23ee2077ff5c70d7c1f57a89057319850fd Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6381) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054123412/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054141117","html_url":"https://github.com/apache/hudi/pull/4885#issuecomment-1054141117","issue_url":"https://api.github.com/repos/apache/hudi/issues/4885","id":1054141117,"node_id":"IC_kwDOBI7nWM4-1Oq9","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T11:06:10Z","updated_at":"2022-02-28T11:06:10Z","author_association":"MEMBER","body":"@XuQianJin-Stars close this in favor of https://github.com/apache/hudi/pull/4720 ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054141117/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054143138","html_url":"https://github.com/apache/hudi/issues/4502#issuecomment-1054143138","issue_url":"https://api.github.com/repos/apache/hudi/issues/4502","id":1054143138,"node_id":"IC_kwDOBI7nWM4-1PKi","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T11:08:23Z","updated_at":"2022-02-28T11:08:23Z","author_association":"MEMBER","body":"Implementation https://github.com/apache/hudi/pull/4720/","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054143138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054164686","html_url":"https://github.com/apache/hudi/pull/4901#issuecomment-1054164686","issue_url":"https://api.github.com/repos/apache/hudi/issues/4901","id":1054164686,"node_id":"IC_kwDOBI7nWM4-1UbO","user":{"login":"XuQianJin-Stars","id":10494131,"node_id":"MDQ6VXNlcjEwNDk0MTMx","avatar_url":"https://avatars.githubusercontent.com/u/10494131?v=4","gravatar_id":"","url":"https://api.github.com/users/XuQianJin-Stars","html_url":"https://github.com/XuQianJin-Stars","followers_url":"https://api.github.com/users/XuQianJin-Stars/followers","following_url":"https://api.github.com/users/XuQianJin-Stars/following{/other_user}","gists_url":"https://api.github.com/users/XuQianJin-Stars/gists{/gist_id}","starred_url":"https://api.github.com/users/XuQianJin-Stars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XuQianJin-Stars/subscriptions","organizations_url":"https://api.github.com/users/XuQianJin-Stars/orgs","repos_url":"https://api.github.com/users/XuQianJin-Stars/repos","events_url":"https://api.github.com/users/XuQianJin-Stars/events{/privacy}","received_events_url":"https://api.github.com/users/XuQianJin-Stars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T11:32:56Z","updated_at":"2022-02-28T11:32:56Z","author_association":"CONTRIBUTOR","body":"hi @huberylee pls fixed the CI build.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054164686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054197087","html_url":"https://github.com/apache/hudi/issues/4230#issuecomment-1054197087","issue_url":"https://api.github.com/repos/apache/hudi/issues/4230","id":1054197087,"node_id":"IC_kwDOBI7nWM4-1cVf","user":{"login":"BenjMaq","id":24474267,"node_id":"MDQ6VXNlcjI0NDc0MjY3","avatar_url":"https://avatars.githubusercontent.com/u/24474267?v=4","gravatar_id":"","url":"https://api.github.com/users/BenjMaq","html_url":"https://github.com/BenjMaq","followers_url":"https://api.github.com/users/BenjMaq/followers","following_url":"https://api.github.com/users/BenjMaq/following{/other_user}","gists_url":"https://api.github.com/users/BenjMaq/gists{/gist_id}","starred_url":"https://api.github.com/users/BenjMaq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BenjMaq/subscriptions","organizations_url":"https://api.github.com/users/BenjMaq/orgs","repos_url":"https://api.github.com/users/BenjMaq/repos","events_url":"https://api.github.com/users/BenjMaq/events{/privacy}","received_events_url":"https://api.github.com/users/BenjMaq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T12:15:41Z","updated_at":"2022-02-28T12:16:50Z","author_association":"NONE","body":"I was wondering if someone could help me understand how to set `hoodie.write.markers.type=direct` when launching a `spark-sql` session?\r\n\r\nI know I can run it manually `set hoodie.write.markers.type=direct;` before I run any SQL statement, but I would love to be able to pass it as a `--conf` parameter, like we do for \r\n```\r\n--conf 'spark.sql.extensions=org.apache.spark.sql.hudi.HoodieSparkSessionExtension'\r\n```\r\n\r\nI tried\r\n```\r\nspark-sql --packages org.apache.hudi:hudi-spark-bundle_2.11:0.10.1,org.apache.spark:spark-avro_2.11:2.4.4 \\\r\n--conf 'spark.serializer=org.apache.spark.serializer.KryoSerializer' \\\r\n--conf 'spark.sql.extensions=org.apache.spark.sql.hudi.HoodieSparkSessionExtension'\r\n--conf 'hoodie.write.markers.type=direct'\r\n```\r\nbut it does not work. Would anyone be able to help?\r\n\r\nThanks!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054197087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054208658","html_url":"https://github.com/apache/hudi/pull/4926#issuecomment-1054208658","issue_url":"https://api.github.com/repos/apache/hudi/issues/4926","id":1054208658,"node_id":"IC_kwDOBI7nWM4-1fKS","user":{"login":"scxwhite","id":23207189,"node_id":"MDQ6VXNlcjIzMjA3MTg5","avatar_url":"https://avatars.githubusercontent.com/u/23207189?v=4","gravatar_id":"","url":"https://api.github.com/users/scxwhite","html_url":"https://github.com/scxwhite","followers_url":"https://api.github.com/users/scxwhite/followers","following_url":"https://api.github.com/users/scxwhite/following{/other_user}","gists_url":"https://api.github.com/users/scxwhite/gists{/gist_id}","starred_url":"https://api.github.com/users/scxwhite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scxwhite/subscriptions","organizations_url":"https://api.github.com/users/scxwhite/orgs","repos_url":"https://api.github.com/users/scxwhite/repos","events_url":"https://api.github.com/users/scxwhite/events{/privacy}","received_events_url":"https://api.github.com/users/scxwhite/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T12:29:59Z","updated_at":"2022-02-28T12:29:59Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054208658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054218095","html_url":"https://github.com/apache/hudi/pull/4679#issuecomment-1054218095","issue_url":"https://api.github.com/repos/apache/hudi/issues/4679","id":1054218095,"node_id":"IC_kwDOBI7nWM4-1hdv","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T12:42:02Z","updated_at":"2022-02-28T12:42:02Z","author_association":"MEMBER","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054218095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054225531","html_url":"https://github.com/apache/hudi/issues/3313#issuecomment-1054225531","issue_url":"https://api.github.com/repos/apache/hudi/issues/3313","id":1054225531,"node_id":"IC_kwDOBI7nWM4-1jR7","user":{"login":"abhishekshenoy","id":29061454,"node_id":"MDQ6VXNlcjI5MDYxNDU0","avatar_url":"https://avatars.githubusercontent.com/u/29061454?v=4","gravatar_id":"","url":"https://api.github.com/users/abhishekshenoy","html_url":"https://github.com/abhishekshenoy","followers_url":"https://api.github.com/users/abhishekshenoy/followers","following_url":"https://api.github.com/users/abhishekshenoy/following{/other_user}","gists_url":"https://api.github.com/users/abhishekshenoy/gists{/gist_id}","starred_url":"https://api.github.com/users/abhishekshenoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abhishekshenoy/subscriptions","organizations_url":"https://api.github.com/users/abhishekshenoy/orgs","repos_url":"https://api.github.com/users/abhishekshenoy/repos","events_url":"https://api.github.com/users/abhishekshenoy/events{/privacy}","received_events_url":"https://api.github.com/users/abhishekshenoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T12:51:12Z","updated_at":"2022-02-28T15:39:01Z","author_association":"NONE","body":"@nsivabalan i see the issue is closed . But in 0.10.1 i still face the duplicate issue when i provide a timestamp column as part of composite key.\r\n```\r\n    hoodiConfigs.put(\"hoodie.insert.shuffle.parallelism\", \"1\")\r\n    hoodiConfigs.put(\"hoodie.upsert.shuffle.parallelism\", \"1\")\r\n    hoodiConfigs.put(\"hoodie.bulkinsert.shuffle.parallelism\", \"1\")\r\n    hoodiConfigs.put(\"hoodie.delete.shuffle.parallelism\", \"1\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.row.writer.enable\", \"true\")\r\n    hoodiConfigs.put(\"hoodie.table.keygenerator.class\", classOf[ComplexKeyGenerator].getName)\r\n    hoodiConfigs.put(\"hoodie.datasource.write.keygenerator.class\", classOf[ComplexKeyGenerator].getName)\r\n    hoodiConfigs.put(\"hoodie.datasource.write.recordkey.field\", \"transactionId,storeNbr,transactionTs\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.precombine.field\", \"messageMetadata.srcLoadTs\")\r\n    hoodiConfigs.put(\"hoodie.table.precombine.field\", \"messageMetadata.srcLoadTs\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.partitionpath.field\", \"transactionDt\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.payload.class\",classOf[DefaultHoodieRecordPayload].getName)\r\n    hoodiConfigs.put(\"hoodie.datasource.write.hive_style_partitioning\", \"true\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.table.type\",COW_TABLE_TYPE_OPT_VAL)\r\n    hoodiConfigs.put(\"hoodie.combine.before.upsert\",\"true\")\r\n    hoodiConfigs.put(\"hoodie.table.name\",\"huditransaction\")\r\n    hoodiConfigs.put(\"hoodie.datasource.write.keygenerator.consistent.logical.timestamp.enabled\",\"true\")\r\n```    \r\n\r\nWith BULK_INSERT_OPERATION_OPT_VAL \r\n    \r\nOutput dataset after first Insert does not dedupe records within the batch even on setting combine before insert to true\r\nKey (abc, 4162 , 2022-02-25 05:08:10.73)\r\n```\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+-----------------------------------------------------------------------+-------------+--------+-----------------------+--------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n|_hoodie_commit_time|_hoodie_commit_seqno |_hoodie_record_key                                                   |_hoodie_partition_path  |_hoodie_file_name                                                      |transactionId|storeNbr|transactionTs          |messageMetadata                                   |prefixes  |dummyInt|dummyLong|dummyObjects    |transactionDt|\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+-----------------------------------------------------------------------+-------------+--------+-----------------------+--------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n|20220228210614823  |20220228210614823_0_1|transactionId:abc,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet|abc          |4162    |2022-02-25 05:08:10.073|{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_2|transactionId:abc,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet|abc          |4162    |2022-02-25 05:08:10.073|{key, value, 1, 2, 2022-02-26 05:09:10, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_3|transactionId:bcd,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet|bcd          |4162    |2022-02-25 05:08:10.073|{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_4|transactionId:cde,storeNbr:4163,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet|cde          |4163    |2022-02-25 05:08:10.073|{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_5|transactionId:def,storeNbr:4163,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet|def          |4163    |2022-02-25 05:08:10.073|{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+-----------------------------------------------------------------------+-------------+--------+-----------------------+--------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n\r\n```\r\n\r\nRepublishing the same data with UPSERT_OPERATION_OPT_VAL will result in duplicates as well as the data in transactionTs and messageMetadata.srcLoadTs for the records loaded using  BULK_INSERT_OPERATION_OPT_VAL has changed.\r\n\r\n1. If you see the recordKey field , the transactionTs value is epochTimeStamp for records loaded using UPSERT_OPERATION_OPT_VAL and UnixTimeStamp for records loaded using BULK_INSERT_OPERATION_OPT_VAL.\r\n2. With UPSERT_OPERATION_OPT_VAL we see Combine before insert work correctly.\r\n3. The columns transactionTs and messageMetadata.srcLoadTs has its value changed to 1970-01-20 06:39:05.890073\r\n\r\n```\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+------------------------------------------------------------------------+-------------+--------+--------------------------+-----------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n|_hoodie_commit_time|_hoodie_commit_seqno |_hoodie_record_key                                                   |_hoodie_partition_path  |_hoodie_file_name                                                       |transactionId|storeNbr|transactionTs             |messageMetadata                                      |prefixes  |dummyInt|dummyLong|dummyObjects    |transactionDt|\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+------------------------------------------------------------------------+-------------+--------+--------------------------+-----------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n|20220228210614823  |20220228210614823_0_1|transactionId:abc,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet |abc          |4162    |1970-01-20 06:39:05.890073|{key, value, 1, 2, 1970-01-20 06:39:05.95, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_2|transactionId:abc,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet |abc          |4162    |1970-01-20 06:39:05.890073|{key, value, 1, 2, 1970-01-20 06:40:32.35, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_3|transactionId:bcd,storeNbr:4162,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet |bcd          |4162    |1970-01-20 06:39:05.890073|{key, value, 1, 2, 1970-01-20 06:39:05.95, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_4|transactionId:cde,storeNbr:4163,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet |cde          |4163    |1970-01-20 06:39:05.890073|{key, value, 1, 2, 1970-01-20 06:39:05.95, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210614823  |20220228210614823_0_5|transactionId:def,storeNbr:4163,transactionTs:2022-02-25 05:08:10.073|transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-10-0_20220228210614823.parquet |def          |4163    |1970-01-20 06:39:05.890073|{key, value, 1, 2, 1970-01-20 06:39:05.95, 1, { -> }}|[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210729355  |20220228210729355_0_1|transactionId:bcd,storeNbr:4162,transactionTs:1645745890073000       |transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-26-20_20220228210729355.parquet|bcd          |4162    |2022-02-25 05:08:10.073   |{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}   |[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210729355  |20220228210729355_0_2|transactionId:cde,storeNbr:4163,transactionTs:1645745890073000       |transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-26-20_20220228210729355.parquet|cde          |4163    |2022-02-25 05:08:10.073   |{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}   |[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210729355  |20220228210729355_0_3|transactionId:def,storeNbr:4163,transactionTs:1645745890073000       |transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-26-20_20220228210729355.parquet|def          |4163    |2022-02-25 05:08:10.073   |{key, value, 1, 2, 2022-02-25 05:09:10, 1, { -> }}   |[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n|20220228210729355  |20220228210729355_0_4|transactionId:abc,storeNbr:4162,transactionTs:1645745890073000       |transactionDt=2022-02-25|d572dc96-ed78-46ae-8560-430d82456941-0_0-26-20_20220228210729355.parquet|abc          |4162    |2022-02-25 05:08:10.073   |{key, value, 1, 2, 2022-02-26 05:09:10, 1, { -> }}   |[abc, def]|1       |1        |[{a, 1}, {a, 1}]|2022-02-25   |\r\n+-------------------+---------------------+---------------------------------------------------------------------+------------------------+------------------------------------------------------------------------+-------------+--------+--------------------------+-----------------------------------------------------+----------+--------+---------+----------------+-------------+\r\n\r\n```\r\n\r\n    ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054225531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054242749","html_url":"https://github.com/apache/hudi/pull/4468#issuecomment-1054242749","issue_url":"https://api.github.com/repos/apache/hudi/issues/4468","id":1054242749,"node_id":"IC_kwDOBI7nWM4-1ne9","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T13:12:17Z","updated_at":"2022-02-28T13:12:17Z","author_association":"CONTRIBUTOR","body":"@codope : good to review the patch. I have pushed commits to address feedback. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054242749/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054330603","html_url":"https://github.com/apache/hudi/pull/4720#issuecomment-1054330603","issue_url":"https://api.github.com/repos/apache/hudi/issues/4720","id":1054330603,"node_id":"IC_kwDOBI7nWM4-187r","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T14:46:56Z","updated_at":"2022-02-28T14:46:56Z","author_association":"MEMBER","body":"@YannByron can you help reviewing this too? thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054330603/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054376542","html_url":"https://github.com/apache/hudi/pull/4811#issuecomment-1054376542","issue_url":"https://api.github.com/repos/apache/hudi/issues/4811","id":1054376542,"node_id":"IC_kwDOBI7nWM4-2IJe","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T15:32:18Z","updated_at":"2022-02-28T15:32:18Z","author_association":"CONTRIBUTOR","body":"@xushiyan : if you are occupied, I can ask sagar or ethan to review this patch. let me know. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054376542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054378545","html_url":"https://github.com/apache/hudi/issues/4839#issuecomment-1054378545","issue_url":"https://api.github.com/repos/apache/hudi/issues/4839","id":1054378545,"node_id":"IC_kwDOBI7nWM4-2Iox","user":{"login":"srehman420","id":23278048,"node_id":"MDQ6VXNlcjIzMjc4MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/23278048?v=4","gravatar_id":"","url":"https://api.github.com/users/srehman420","html_url":"https://github.com/srehman420","followers_url":"https://api.github.com/users/srehman420/followers","following_url":"https://api.github.com/users/srehman420/following{/other_user}","gists_url":"https://api.github.com/users/srehman420/gists{/gist_id}","starred_url":"https://api.github.com/users/srehman420/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srehman420/subscriptions","organizations_url":"https://api.github.com/users/srehman420/orgs","repos_url":"https://api.github.com/users/srehman420/repos","events_url":"https://api.github.com/users/srehman420/events{/privacy}","received_events_url":"https://api.github.com/users/srehman420/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T15:34:08Z","updated_at":"2022-02-28T15:34:08Z","author_association":"NONE","body":"@Gatsby-Lee our data volume is approx 200-300 events per sec, but it mostly (upto 75%) comprises of updates. This is why we are using ROM table.\r\n\r\nIs COW table a fine choice with upserts in such a scenerio ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054378545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054393803","html_url":"https://github.com/apache/hudi/issues/4923#issuecomment-1054393803","issue_url":"https://api.github.com/repos/apache/hudi/issues/4923","id":1054393803,"node_id":"IC_kwDOBI7nWM4-2MXL","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T15:49:46Z","updated_at":"2022-02-28T15:49:46Z","author_association":"MEMBER","body":"Fixed by #4920 ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054393803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054427848","html_url":"https://github.com/apache/hudi/pull/4901#issuecomment-1054427848","issue_url":"https://api.github.com/repos/apache/hudi/issues/4901","id":1054427848,"node_id":"IC_kwDOBI7nWM4-2UrI","user":{"login":"huberylee","id":11664307,"node_id":"MDQ6VXNlcjExNjY0MzA3","avatar_url":"https://avatars.githubusercontent.com/u/11664307?v=4","gravatar_id":"","url":"https://api.github.com/users/huberylee","html_url":"https://github.com/huberylee","followers_url":"https://api.github.com/users/huberylee/followers","following_url":"https://api.github.com/users/huberylee/following{/other_user}","gists_url":"https://api.github.com/users/huberylee/gists{/gist_id}","starred_url":"https://api.github.com/users/huberylee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huberylee/subscriptions","organizations_url":"https://api.github.com/users/huberylee/orgs","repos_url":"https://api.github.com/users/huberylee/repos","events_url":"https://api.github.com/users/huberylee/events{/privacy}","received_events_url":"https://api.github.com/users/huberylee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:22:39Z","updated_at":"2022-03-01T02:48:13Z","author_association":"CONTRIBUTOR","body":"@xiarixiaoyao @XuQianJin-Stars Sorry for the late reply, I will fix it right now.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054427848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054441096","html_url":"https://github.com/apache/hudi/issues/4793#issuecomment-1054441096","issue_url":"https://api.github.com/repos/apache/hudi/issues/4793","id":1054441096,"node_id":"IC_kwDOBI7nWM4-2X6I","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:34:52Z","updated_at":"2022-02-28T16:34:52Z","author_association":"MEMBER","body":"@pan3793 did you build the vanilla jars with spark 3 profile? since there is a spark version mismatch. \r\n\r\n```\r\n- get tables *** FAILED ***\r\n  java.sql.SQLException: Error operating EXECUTE_STATEMENT: java.lang.NoSuchMethodError: org.apache.spark.sql.catalyst.catalog.CatalogTable.copy(Lorg/apache/spark/sql/catalyst/TableIdentifier;Lorg/apache/spark/sql/catalyst/catalog/CatalogTableType;Lorg/apache/spark/sql/catalyst/catalog/CatalogStorageFormat;Lorg/apache/spark/sql/types/StructType;Lscala/Option;Lscala/collection/Seq;Lscala/Option;Ljava/lang/String;JJLjava/lang/String;Lscala/collection/immutable/Map;Lscala/Option;Lscala/Option;Lscala/Option;Lscala/collection/Seq;ZZLscala/collection/immutable/Map;)Lorg/apache/spark/sql/catalyst/catalog/CatalogTable;\r\n\tat org.apache.spark.sql.hudi.command.CreateHoodieTableCommand$.createTableInCatalog(CreateHoodieTableCommand.scala:136)\r\n```\r\n\r\n@YannByron do you happen to know what might be mismatched here?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054441096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054441877","html_url":"https://github.com/apache/hudi/pull/4922#issuecomment-1054441877","issue_url":"https://api.github.com/repos/apache/hudi/issues/4922","id":1054441877,"node_id":"IC_kwDOBI7nWM4-2YGV","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:35:42Z","updated_at":"2022-02-28T16:35:42Z","author_association":"CONTRIBUTOR","body":"Can you fix the description of the PR. we have a template to assist. I understand the jira will have the info. You can just copy paste most things from there. but lets try to see if we can fill in the description for diff sections. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054441877/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054448537","html_url":"https://github.com/apache/hudi/pull/4838#issuecomment-1054448537","issue_url":"https://api.github.com/repos/apache/hudi/issues/4838","id":1054448537,"node_id":"IC_kwDOBI7nWM4-2ZuZ","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:43:01Z","updated_at":"2022-02-28T16:43:01Z","author_association":"CONTRIBUTOR","body":"@harsh1231 : once you have the patch ready (either same one, or new ones), do let me know. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054448537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054453612","html_url":"https://github.com/apache/hudi/pull/4902#issuecomment-1054453612","issue_url":"https://api.github.com/repos/apache/hudi/issues/4902","id":1054453612,"node_id":"IC_kwDOBI7nWM4-2a9s","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:48:28Z","updated_at":"2022-02-28T16:48:28Z","author_association":"CONTRIBUTOR","body":"Have addressed all feedback. asked a clarification on one of the comment. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054453612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054461384","html_url":"https://github.com/apache/hudi/issues/4793#issuecomment-1054461384","issue_url":"https://api.github.com/repos/apache/hudi/issues/4793","id":1054461384,"node_id":"IC_kwDOBI7nWM4-2c3I","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T16:57:22Z","updated_at":"2022-02-28T16:57:22Z","author_association":"MEMBER","body":"@xushiyan thanks for helping, and sorry I didn't notice your first reply.\r\n\r\n> can you post which vanilla jars you used?\r\n\r\nBasically, we use the following jars related to Hudi, you can check more details in our project source code https://github.com/apache/incubator-kyuubi\r\n\r\n<details>\r\n<summary>pom.xml</summary>\r\n\r\n```\r\n            <!-- Hudi dependency  -->\r\n            <!--\r\n              We don't use hadoop-common directly, it's only for suppressing exception:\r\n                 Failed to execute goal org.apache.maven.plugins:maven-shade-plugin:3.2.4:shade (default) on project\r\n                 kyuubi-spark-sql-engine_2.12: Error creating shaded jar: Could not resolve following dependencies:\r\n                 [jdk.tools:jdk.tools:jar:1.6 (system)]\r\n\r\n              The issue only occurs on GitHub Action environment with Hudi 0.10.0 and JDK 11.\r\n              After few days digging, only found one place introduces jdk.tools,\r\n\r\n              - org.apache.hudi:hudi-common:jar:0.10.0:test\r\n                - org.apache.hbase:hbase-server:jar:1.2.3:test\r\n                  - org.apache.hadoop:hadoop-common:jar:2.5.1:test\r\n                    - org.apache.hadoop:hadoop-annotations:jar:2.5.1:test\r\n                      - jdk.tools:jdk.tools:jar:1.6:system\r\n            -->\r\n            <dependency>\r\n                <groupId>org.apache.hadoop</groupId>\r\n                <artifactId>hadoop-common</artifactId>\r\n                <version>${hadoop.version}</version>\r\n            </dependency>\r\n\r\n            <dependency>\r\n                <groupId>org.apache.parquet</groupId>\r\n                <artifactId>parquet-avro</artifactId>\r\n                <version>${parquet.version}</version>\r\n            </dependency>\r\n\r\n            <dependency>\r\n                <groupId>org.apache.spark</groupId>\r\n                <artifactId>spark-avro_${scala.binary.version}</artifactId>\r\n                <version>${spark.version}</version>\r\n            </dependency>\r\n\r\n            <dependency>\r\n                <groupId>org.apache.hudi</groupId>\r\n                <artifactId>hudi-spark-common_${scala.binary.version}</artifactId>\r\n                <version>${hudi.version}</version>\r\n                <exclusions>\r\n                    <exclusion>\r\n                        <groupId>org.scala-lang</groupId>\r\n                        <artifactId>scala-library</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hudi</groupId>\r\n                        <artifactId>hudi-timeline-service</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>io.dropwizard.metrics</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>io.prometheus</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>log4j</groupId>\r\n                        <artifactId>log4j</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.curator</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hadoop</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hbase</groupId>\r\n                        <artifactId>hbase-server</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.orc</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hudi</groupId>\r\n                        <artifactId>hudi-aws</artifactId>\r\n                    </exclusion>\r\n                </exclusions>\r\n            </dependency>\r\n\r\n            <dependency>\r\n                <groupId>org.apache.hudi</groupId>\r\n                <artifactId>hudi-spark_${scala.binary.version}</artifactId>\r\n                <version>${hudi.version}</version>\r\n                <exclusions>\r\n                    <exclusion>\r\n                        <groupId>org.scala-lang</groupId>\r\n                        <artifactId>scala-library</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hudi</groupId>\r\n                        <artifactId>hudi-spark-common_2.11</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hudi</groupId>\r\n                        <artifactId>hudi-spark2_2.11</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>org.apache.curator</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>com.fasterxml.jackson.core</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>com.fasterxml.jackson.module</groupId>\r\n                        <artifactId>*</artifactId>\r\n                    </exclusion>\r\n                    <exclusion>\r\n                        <groupId>log4j</groupId>\r\n                        <artifactId>log4j</artifactId>\r\n                    </exclusion>\r\n                </exclusions>\r\n            </dependency>\r\n\r\n            <dependency>\r\n                <groupId>org.apache.hudi</groupId>\r\n                <artifactId>hudi-spark3_${scala.binary.version}</artifactId>\r\n                <version>${hudi.version}</version>\r\n                <exclusions>\r\n                    <exclusion>\r\n                        <groupId>org.apache.hudi</groupId>\r\n                        <artifactId>hudi-spark-common_2.11</artifactId>\r\n                    </exclusion>\r\n                </exclusions>\r\n            </dependency>\r\n```\r\n</details>\r\n\r\n> did you build the vanilla jars with spark 3 profile?\r\n\r\nNo, we use the jar published by Hudi officially, it works fine on Hudi 0.10.0, but not Hudi 0.10.1\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054461384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054522224","html_url":"https://github.com/apache/hudi/pull/4902#issuecomment-1054522224","issue_url":"https://api.github.com/repos/apache/hudi/issues/4902","id":1054522224,"node_id":"IC_kwDOBI7nWM4-2rtw","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T18:04:55Z","updated_at":"2022-02-28T18:04:55Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"d525f1512675b437219170c6bc647cfc86d847cf\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6276\",\n    \"triggerID\" : \"d525f1512675b437219170c6bc647cfc86d847cf\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"ac695686878522f9b8d4a6dc68b903d41216bad6\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6398\",\n    \"triggerID\" : \"ac695686878522f9b8d4a6dc68b903d41216bad6\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* ac695686878522f9b8d4a6dc68b903d41216bad6 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6398) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054522224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054571187","html_url":"https://github.com/apache/hudi/pull/4645#issuecomment-1054571187","issue_url":"https://api.github.com/repos/apache/hudi/issues/4645","id":1054571187,"node_id":"IC_kwDOBI7nWM4-23qz","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T19:05:35Z","updated_at":"2022-02-28T19:05:35Z","author_association":"CONTRIBUTOR","body":"Closing in favour of https://github.com/apache/hudi/pull/4925","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054571187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054634554","html_url":"https://github.com/apache/hudi/pull/4786#issuecomment-1054634554","issue_url":"https://api.github.com/repos/apache/hudi/issues/4786","id":1054634554,"node_id":"IC_kwDOBI7nWM4-3HI6","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:28:07Z","updated_at":"2022-02-28T20:28:07Z","author_association":"CONTRIBUTOR","body":"@xiarixiaoyao : do you have cycles to review this in the next week. looking to see if we can get it in for 0.11. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054634554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054638533","html_url":"https://github.com/apache/hudi/issues/4896#issuecomment-1054638533","issue_url":"https://api.github.com/repos/apache/hudi/issues/4896","id":1054638533,"node_id":"IC_kwDOBI7nWM4-3IHF","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:33:38Z","updated_at":"2022-02-28T20:33:38Z","author_association":"CONTRIBUTOR","body":"@yihua : Can you assist in debugging data loss issue w/ metadata table. this is hudi-0.9.0 btw. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054638533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054639622","html_url":"https://github.com/apache/hudi/issues/4882#issuecomment-1054639622","issue_url":"https://api.github.com/repos/apache/hudi/issues/4882","id":1054639622,"node_id":"IC_kwDOBI7nWM4-3IYG","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:35:07Z","updated_at":"2022-02-28T20:35:07Z","author_association":"CONTRIBUTOR","body":"@leesf @danny0405 : can you loop in someone to follow up on this. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054639622/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054641615","html_url":"https://github.com/apache/hudi/issues/4839#issuecomment-1054641615","issue_url":"https://api.github.com/repos/apache/hudi/issues/4839","id":1054641615,"node_id":"IC_kwDOBI7nWM4-3I3P","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:37:57Z","updated_at":"2022-02-28T20:37:57Z","author_association":"CONTRIBUTOR","body":"@Gatsby-Lee : \r\nwe don't have any option at the moment. But we have a RFC and an active PR to support compaction/clustering for multiple tables \r\nhttps://github.com/apache/hudi/pull/4309\r\nhttps://github.com/apache/hudi/pull/4872\r\n\r\n@glory9211 : If you don't mind taking a slight on your write latency and having a good read perf, you can go for COW. \r\nbut if write speed is very critical, then you may want to stick with MOR. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054641615/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054642479","html_url":"https://github.com/apache/hudi/issues/4830#issuecomment-1054642479","issue_url":"https://api.github.com/repos/apache/hudi/issues/4830","id":1054642479,"node_id":"IC_kwDOBI7nWM4-3JEv","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:39:13Z","updated_at":"2022-02-28T20:39:13Z","author_association":"CONTRIBUTOR","body":"Hey @garyli1019 : have you worked on upgrading hudi version in impala before? can you take up the work item since you have context. Or if you know someone who can help us on that, would be great!","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054642479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054643179","html_url":"https://github.com/apache/hudi/issues/4796#issuecomment-1054643179","issue_url":"https://api.github.com/repos/apache/hudi/issues/4796","id":1054643179,"node_id":"IC_kwDOBI7nWM4-3JPr","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:40:12Z","updated_at":"2022-02-28T20:40:12Z","author_association":"CONTRIBUTOR","body":"@satishkotha : Can you please follow up here when you get a chance. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054643179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054643703","html_url":"https://github.com/apache/hudi/issues/4881#issuecomment-1054643703","issue_url":"https://api.github.com/repos/apache/hudi/issues/4881","id":1054643703,"node_id":"IC_kwDOBI7nWM4-3JX3","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:41:03Z","updated_at":"2022-02-28T20:41:03Z","author_association":"CONTRIBUTOR","body":"@leesf @danny0405 : can you folks loop in someone who can help here please","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054643703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054647123","html_url":"https://github.com/apache/hudi/issues/4457#issuecomment-1054647123","issue_url":"https://api.github.com/repos/apache/hudi/issues/4457","id":1054647123,"node_id":"IC_kwDOBI7nWM4-3KNT","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:45:48Z","updated_at":"2022-02-28T20:45:48Z","author_association":"CONTRIBUTOR","body":"@zuyanton : if we don't get more info, we might have to close out the github issue. sorry. \r\nfeel free to re-open if you at still stuck and looking for assistance. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054647123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054647505","html_url":"https://github.com/apache/hudi/issues/4456#issuecomment-1054647505","issue_url":"https://api.github.com/repos/apache/hudi/issues/4456","id":1054647505,"node_id":"IC_kwDOBI7nWM4-3KTR","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:46:21Z","updated_at":"2022-02-28T20:46:21Z","author_association":"CONTRIBUTOR","body":"@mainamit : do you have any updates for us. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054647505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054648026","html_url":"https://github.com/apache/hudi/issues/4437#issuecomment-1054648026","issue_url":"https://api.github.com/repos/apache/hudi/issues/4437","id":1054648026,"node_id":"IC_kwDOBI7nWM4-3Kba","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:47:09Z","updated_at":"2022-02-28T20:47:09Z","author_association":"CONTRIBUTOR","body":"thanks Sagar for the help. \r\nwill go ahead and close out the issue. If you come across any other issue, feel free to open a new issue. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054648026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054648747","html_url":"https://github.com/apache/hudi/issues/4230#issuecomment-1054648747","issue_url":"https://api.github.com/repos/apache/hudi/issues/4230","id":1054648747,"node_id":"IC_kwDOBI7nWM4-3Kmr","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T20:48:10Z","updated_at":"2022-02-28T20:48:10Z","author_association":"CONTRIBUTOR","body":"@YannByron @XuQianJin-Stars : Can you folks help w/ setting hoodie write configs in spark-sql dml. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054648747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054670857","html_url":"https://github.com/apache/hudi/issues/4456#issuecomment-1054670857","issue_url":"https://api.github.com/repos/apache/hudi/issues/4456","id":1054670857,"node_id":"IC_kwDOBI7nWM4-3QAJ","user":{"login":"mainamit","id":98375721,"node_id":"U_kgDOBd0YKQ","avatar_url":"https://avatars.githubusercontent.com/u/98375721?v=4","gravatar_id":"","url":"https://api.github.com/users/mainamit","html_url":"https://github.com/mainamit","followers_url":"https://api.github.com/users/mainamit/followers","following_url":"https://api.github.com/users/mainamit/following{/other_user}","gists_url":"https://api.github.com/users/mainamit/gists{/gist_id}","starred_url":"https://api.github.com/users/mainamit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mainamit/subscriptions","organizations_url":"https://api.github.com/users/mainamit/orgs","repos_url":"https://api.github.com/users/mainamit/repos","events_url":"https://api.github.com/users/mainamit/events{/privacy}","received_events_url":"https://api.github.com/users/mainamit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-28T21:17:04Z","updated_at":"2022-02-28T21:17:04Z","author_association":"NONE","body":"@nsivabalan I am also using 0.9 now and done a workaround of loading this data in sequential. If you have a working example of this it would be great, but I cannot test with 0.10 due to constraints at my end.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054670857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054853406","html_url":"https://github.com/apache/hudi/issues/4914#issuecomment-1054853406","issue_url":"https://api.github.com/repos/apache/hudi/issues/4914","id":1054853406,"node_id":"IC_kwDOBI7nWM4-38ke","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T00:36:43Z","updated_at":"2022-03-01T00:36:43Z","author_association":"CONTRIBUTOR","body":"schema has to be backwards compatible and new fields has to be added towards the end. From your example, the field of interest is \"name\" which is in the middle. \r\n\r\n```\r\n\r\ninputDF = spark.createDataFrame(\r\n    [\r\n        (\"100\", \"AAA\", \"2015-01-01\", \"2015-01-01T13:51:39.340396Z\", \"2015-01-01\"),\r\n        (\"101\", \"BBB\", \"2015-01-01\", \"2015-01-01T12:14:58.597216Z\", \"2015-01-01\"),\r\n        (\"102\", \"CCC\", \"2015-01-01\", \"2015-01-01T13:51:40.417052Z\", \"2015-01-01\"),\r\n        (\"103\", \"DDD\", \"2015-01-01\", \"2015-01-01T13:51:40.519832Z\", \"2015-01-01\"),\r\n        (\"104\", \"EEE\", \"2015-01-01\", \"2015-01-01T12:15:00.512679Z\", \"2015-01-01\"),\r\n        (\"105\", \"FFF\", \"2015-01-01\", \"2015-01-01T13:51:42.248818Z\", \"2015-01-01\")\r\n    ],\r\n    [\"id\", \"name\", \"creation_date\", \"last_update_time\", \"creation_date_1\"]\r\n)\r\n\r\ntable_name = \"first_hudi_table\"\r\ntable_path =  f\"s3://<bucket_name>/Hudi/{table_name}\"\r\n\r\nhudiOptions = {\r\n'hoodie.table.name': table_name,\r\n'hoodie.datasource.write.recordkey.field': 'id',\r\n'hoodie.datasource.write.precombine.field': 'last_update_time',\r\n}\r\n\r\nprint(table_name, table_path)\r\n\r\ninputDF.write\\\r\n.format('hudi')\\\r\n.option('hoodie.datasource.write.operation', 'insert')\\\r\n.options(**hudiOptions)\\\r\n.mode('overwrite')\\\r\n.save(table_path)\r\n\r\n\r\n\r\ninputDF = spark.createDataFrame(\r\n    [\r\n        (\"100\", \"AAA\", \"2015-01-01\", \"2015-01-01T13:51:39.340396Z\"),\r\n        (\"101\", \"BBB\", \"2015-01-01\", \"2015-01-01T12:14:58.597216Z\"),\r\n        (\"102\", \"CCC\", \"2015-01-01\", \"2015-01-01T13:51:40.417052Z\"),\r\n        (\"103\", \"DDD\", \"2015-01-01\", \"2015-01-01T13:51:40.519832Z\"),\r\n        (\"104\", \"EEE\", \"2015-01-01\", \"2015-01-01T12:15:00.512679Z\"),\r\n        (\"105\", \"FFF\", \"2015-01-01\", \"2015-01-01T13:51:42.248818Z\")\r\n    ],\r\n    [\"id\", \"name\", \"creation_date\", \"last_update_time\"]\r\n)\r\n\r\n\r\nhudiOptions = {\r\n'hoodie.table.name': table_name,\r\n'hoodie.datasource.write.recordkey.field': 'id',\r\n'hoodie.datasource.write.precombine.field': 'last_update_time',\r\n'hoodie.datasource.write.reconcile.schema': 'true',\r\n}\r\n\r\ninputDF.write\\\r\n.format('hudi')\\\r\n.option('hoodie.datasource.write.operation', 'insert')\\\r\n.options(**hudiOptions)\\\r\n.mode('append')\\\r\n.save(table_path)\r\n\r\n```\r\nThis works. \r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054853406/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054861378","html_url":"https://github.com/apache/hudi/issues/4604#issuecomment-1054861378","issue_url":"https://api.github.com/repos/apache/hudi/issues/4604","id":1054861378,"node_id":"IC_kwDOBI7nWM4-3-hC","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T00:51:57Z","updated_at":"2022-03-01T00:51:57Z","author_association":"CONTRIBUTOR","body":"only suspicion I have is around the schema. thats the only diff between what I tried to reproduce and yours. \r\n\r\nDo you see similar exception w/ other tables too. or just this table. If you don't see in other tables, can you check the schema of those tables if they have decimal logical fields too. \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054861378/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054887010","html_url":"https://github.com/apache/hudi/pull/4927#issuecomment-1054887010","issue_url":"https://api.github.com/repos/apache/hudi/issues/4927","id":1054887010,"node_id":"IC_kwDOBI7nWM4-4Exi","user":{"login":"kywe665","id":1703248,"node_id":"MDQ6VXNlcjE3MDMyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1703248?v=4","gravatar_id":"","url":"https://api.github.com/users/kywe665","html_url":"https://github.com/kywe665","followers_url":"https://api.github.com/users/kywe665/followers","following_url":"https://api.github.com/users/kywe665/following{/other_user}","gists_url":"https://api.github.com/users/kywe665/gists{/gist_id}","starred_url":"https://api.github.com/users/kywe665/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kywe665/subscriptions","organizations_url":"https://api.github.com/users/kywe665/orgs","repos_url":"https://api.github.com/users/kywe665/repos","events_url":"https://api.github.com/users/kywe665/events{/privacy}","received_events_url":"https://api.github.com/users/kywe665/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T01:34:07Z","updated_at":"2022-03-01T01:34:07Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/1703248/156087480-51f9b266-28ae-411b-91e9-8f630ea30512.png)\r\n![image](https://user-images.githubusercontent.com/1703248/156087513-a28e4135-38c5-4ee4-b842-033081362a8f.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054887010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054887457","html_url":"https://github.com/apache/hudi/pull/4927#issuecomment-1054887457","issue_url":"https://api.github.com/repos/apache/hudi/issues/4927","id":1054887457,"node_id":"IC_kwDOBI7nWM4-4E4h","user":{"login":"kywe665","id":1703248,"node_id":"MDQ6VXNlcjE3MDMyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/1703248?v=4","gravatar_id":"","url":"https://api.github.com/users/kywe665","html_url":"https://github.com/kywe665","followers_url":"https://api.github.com/users/kywe665/followers","following_url":"https://api.github.com/users/kywe665/following{/other_user}","gists_url":"https://api.github.com/users/kywe665/gists{/gist_id}","starred_url":"https://api.github.com/users/kywe665/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kywe665/subscriptions","organizations_url":"https://api.github.com/users/kywe665/orgs","repos_url":"https://api.github.com/users/kywe665/repos","events_url":"https://api.github.com/users/kywe665/events{/privacy}","received_events_url":"https://api.github.com/users/kywe665/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T01:35:03Z","updated_at":"2022-03-01T01:35:03Z","author_association":"NONE","body":"![image](https://user-images.githubusercontent.com/1703248/156087970-38e10f2b-5c04-47d2-af72-8d44ec8bfeb2.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054887457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054896500","html_url":"https://github.com/apache/hudi/pull/4878#issuecomment-1054896500","issue_url":"https://api.github.com/repos/apache/hudi/issues/4878","id":1054896500,"node_id":"IC_kwDOBI7nWM4-4HF0","user":{"login":"zhangyue19921010","id":69956021,"node_id":"MDQ6VXNlcjY5OTU2MDIx","avatar_url":"https://avatars.githubusercontent.com/u/69956021?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangyue19921010","html_url":"https://github.com/zhangyue19921010","followers_url":"https://api.github.com/users/zhangyue19921010/followers","following_url":"https://api.github.com/users/zhangyue19921010/following{/other_user}","gists_url":"https://api.github.com/users/zhangyue19921010/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangyue19921010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangyue19921010/subscriptions","organizations_url":"https://api.github.com/users/zhangyue19921010/orgs","repos_url":"https://api.github.com/users/zhangyue19921010/repos","events_url":"https://api.github.com/users/zhangyue19921010/events{/privacy}","received_events_url":"https://api.github.com/users/zhangyue19921010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T01:51:07Z","updated_at":"2022-03-01T01:51:07Z","author_association":"CONTRIBUTOR","body":"All good. We could land it after CI jobs passed.\r\nCC @nsivabalan :) ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054896500/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054919424","html_url":"https://github.com/apache/hudi/pull/4720#issuecomment-1054919424","issue_url":"https://api.github.com/repos/apache/hudi/issues/4720","id":1054919424,"node_id":"IC_kwDOBI7nWM4-4MsA","user":{"login":"YannByron","id":10036681,"node_id":"MDQ6VXNlcjEwMDM2Njgx","avatar_url":"https://avatars.githubusercontent.com/u/10036681?v=4","gravatar_id":"","url":"https://api.github.com/users/YannByron","html_url":"https://github.com/YannByron","followers_url":"https://api.github.com/users/YannByron/followers","following_url":"https://api.github.com/users/YannByron/following{/other_user}","gists_url":"https://api.github.com/users/YannByron/gists{/gist_id}","starred_url":"https://api.github.com/users/YannByron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YannByron/subscriptions","organizations_url":"https://api.github.com/users/YannByron/orgs","repos_url":"https://api.github.com/users/YannByron/repos","events_url":"https://api.github.com/users/YannByron/events{/privacy}","received_events_url":"https://api.github.com/users/YannByron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T02:25:27Z","updated_at":"2022-03-01T02:25:27Z","author_association":"CONTRIBUTOR","body":"> @YannByron can you help reviewing this too? thanks\r\n\r\nAs discussed with @XuQianJin-Stars, I prefer to make a separate pr based on the separate spark env with https://issues.apache.org/jira/browse/SPARK-37219. And we can merge this to hudi master once Spark3.3 releases.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054919424/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054922379","html_url":"https://github.com/apache/hudi/pull/4786#issuecomment-1054922379","issue_url":"https://api.github.com/repos/apache/hudi/issues/4786","id":1054922379,"node_id":"IC_kwDOBI7nWM4-4NaL","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T02:30:24Z","updated_at":"2022-03-01T02:30:24Z","author_association":"CONTRIBUTOR","body":"@MrSleeping123   thanks for your contribution. There are some minor problems.  once fixed we can lanch it， thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054922379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054928067","html_url":"https://github.com/apache/hudi/pull/4922#issuecomment-1054928067","issue_url":"https://api.github.com/repos/apache/hudi/issues/4922","id":1054928067,"node_id":"IC_kwDOBI7nWM4-4OzD","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T02:41:15Z","updated_at":"2022-03-01T02:41:15Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"911d7ac0445cfec6dd87779ce5e4a55d585520aa\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6375\",\n    \"triggerID\" : \"911d7ac0445cfec6dd87779ce5e4a55d585520aa\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"cdaabab72ea658e40f6e78aea5f80284d9f6cdfb\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6376\",\n    \"triggerID\" : \"cdaabab72ea658e40f6e78aea5f80284d9f6cdfb\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"a1c9b418d6ce372d52a97b1ac9b00121e6280901\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6377\",\n    \"triggerID\" : \"a1c9b418d6ce372d52a97b1ac9b00121e6280901\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"d3d2480d8907072bd302a49a8528c9990e05950f\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6394\",\n    \"triggerID\" : \"d3d2480d8907072bd302a49a8528c9990e05950f\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"d3d2480d8907072bd302a49a8528c9990e05950f\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6406\",\n    \"triggerID\" : \"1054884208\",\n    \"triggerType\" : \"MANUAL\"\n  } ]\n}-->\n## CI report:\n\n* d3d2480d8907072bd302a49a8528c9990e05950f Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6394) Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6406) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054928067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054929531","html_url":"https://github.com/apache/hudi/pull/4878#issuecomment-1054929531","issue_url":"https://api.github.com/repos/apache/hudi/issues/4878","id":1054929531,"node_id":"IC_kwDOBI7nWM4-4PJ7","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T02:44:17Z","updated_at":"2022-03-01T02:44:17Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"c8c95ab2e3028486524bcaf48d2f0e34a2846aca\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6401\",\n    \"triggerID\" : \"c8c95ab2e3028486524bcaf48d2f0e34a2846aca\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* c8c95ab2e3028486524bcaf48d2f0e34a2846aca Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6401) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054929531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054948385","html_url":"https://github.com/apache/hudi/issues/4793#issuecomment-1054948385","issue_url":"https://api.github.com/repos/apache/hudi/issues/4793","id":1054948385,"node_id":"IC_kwDOBI7nWM4-4Twh","user":{"login":"YannByron","id":10036681,"node_id":"MDQ6VXNlcjEwMDM2Njgx","avatar_url":"https://avatars.githubusercontent.com/u/10036681?v=4","gravatar_id":"","url":"https://api.github.com/users/YannByron","html_url":"https://github.com/YannByron","followers_url":"https://api.github.com/users/YannByron/followers","following_url":"https://api.github.com/users/YannByron/following{/other_user}","gists_url":"https://api.github.com/users/YannByron/gists{/gist_id}","starred_url":"https://api.github.com/users/YannByron/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YannByron/subscriptions","organizations_url":"https://api.github.com/users/YannByron/orgs","repos_url":"https://api.github.com/users/YannByron/repos","events_url":"https://api.github.com/users/YannByron/events{/privacy}","received_events_url":"https://api.github.com/users/YannByron/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:06:30Z","updated_at":"2022-03-01T03:06:30Z","author_association":"CONTRIBUTOR","body":"```\r\ns\"\"\"\r\n           | create table $table (\r\n           |  id int,\r\n           |  name string,\r\n           |  price double,\r\n           |  ts long\r\n           | ) using $format\r\n           | options (\r\n           |   primaryKey = 'id',\r\n           |   preCombineField = 'ts',\r\n           |   hoodie.bootstrap.index.class =\r\n           |   'org.apache.hudi.common.bootstrap.index.NoOpBootstrapIndex'\r\n           | )\r\n       \"\"\".stripMargin\r\n```\r\nSee it's hudi 0.10.1 and spark3.1.2 in https://github.com/apache/incubator-kyuubi/pull/1897/files. My test is ok in the same env, but i use bundle jar. In addition to the vanilla jar, what other hudi jars you put in the spark env ?\r\n\r\nAnd, is there the same problem if you use spark-sql instead of kyuubi ? @pan3793 \r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054948385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054959383","html_url":"https://github.com/apache/hudi/issues/4839#issuecomment-1054959383","issue_url":"https://api.github.com/repos/apache/hudi/issues/4839","id":1054959383,"node_id":"IC_kwDOBI7nWM4-4WcX","user":{"login":"srehman420","id":23278048,"node_id":"MDQ6VXNlcjIzMjc4MDQ4","avatar_url":"https://avatars.githubusercontent.com/u/23278048?v=4","gravatar_id":"","url":"https://api.github.com/users/srehman420","html_url":"https://github.com/srehman420","followers_url":"https://api.github.com/users/srehman420/followers","following_url":"https://api.github.com/users/srehman420/following{/other_user}","gists_url":"https://api.github.com/users/srehman420/gists{/gist_id}","starred_url":"https://api.github.com/users/srehman420/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srehman420/subscriptions","organizations_url":"https://api.github.com/users/srehman420/orgs","repos_url":"https://api.github.com/users/srehman420/repos","events_url":"https://api.github.com/users/srehman420/events{/privacy}","received_events_url":"https://api.github.com/users/srehman420/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:22:12Z","updated_at":"2022-03-01T03:22:12Z","author_association":"NONE","body":"@nsivabalan  For COW tables written using foreach batch, will clustering work or will it show same behaviour as MOR compaction i.e ( clustering isn't trigger for COW tables with foreach batch but works correctly when using pure streaming apis)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054959383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054965094","html_url":"https://github.com/apache/hudi/issues/4793#issuecomment-1054965094","issue_url":"https://api.github.com/repos/apache/hudi/issues/4793","id":1054965094,"node_id":"IC_kwDOBI7nWM4-4X1m","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:30:23Z","updated_at":"2022-03-01T03:32:34Z","author_association":"MEMBER","body":"@YannByron \r\n\r\n> what other hudi jars you put in the spark env\r\n\r\n<details>\r\n<summary>Dependency Tree</summary>\r\n\r\n```\r\n(apache-kyuubi) ➜  apache-kyuubi git:(hudi) mvn -pl :kyuubi-spark-sql-engine_2.12 dependency:tree\r\n[INFO] Scanning for projects...\r\n[INFO]\r\n[INFO] -----------< org.apache.kyuubi:kyuubi-spark-sql-engine_2.12 >-----------\r\n[INFO] Building Kyuubi Project Engine Spark SQL 1.5.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO]\r\n[INFO] --- maven-dependency-plugin:3.1.1:tree (default-cli) @ kyuubi-spark-sql-engine_2.12 ---\r\n[INFO] org.apache.kyuubi:kyuubi-spark-sql-engine_2.12:jar:1.5.0-SNAPSHOT\r\n[INFO] +- org.apache.kyuubi:kyuubi-common_2.12:jar:1.5.0-SNAPSHOT:compile\r\n[INFO] |  +- org.scala-lang:scala-library:jar:2.12.15:compile\r\n[INFO] |  +- org.slf4j:slf4j-api:jar:1.7.35:compile\r\n[INFO] |  +- org.slf4j:jcl-over-slf4j:jar:1.7.35:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-slf4j-impl:jar:2.17.1:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-api:jar:2.17.1:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-core:jar:2.17.1:compile\r\n[INFO] |  +- org.apache.logging.log4j:log4j-1.2-api:jar:2.17.1:compile\r\n[INFO] |  +- commons-codec:commons-codec:jar:1.15:compile\r\n[INFO] |  +- org.apache.commons:commons-lang3:jar:3.10:compile\r\n[INFO] |  +- com.google.guava:guava:jar:30.1-jre:compile\r\n[INFO] |  |  \\- com.google.guava:failureaccess:jar:1.0.1:compile\r\n[INFO] |  +- org.apache.thrift:libfb303:jar:0.9.3:compile\r\n[INFO] |  +- org.apache.thrift:libthrift:jar:0.16.0:compile\r\n[INFO] |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.15:compile\r\n[INFO] |  +- org.apache.hive:hive-service-rpc:jar:2.3.9:compile\r\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:2.3.2:compile\r\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:1.2.1:compile\r\n[INFO] |  +- com.fasterxml.jackson.module:jackson-module-scala_2.12:jar:2.13.1:compile\r\n[INFO] |  |  \\- com.thoughtworks.paranamer:paranamer:jar:2.8:compile\r\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-databind:jar:2.13.1:compile\r\n[INFO] +- org.apache.kyuubi:kyuubi-ha_2.12:jar:1.5.0-SNAPSHOT:compile\r\n[INFO] |  +- org.apache.curator:curator-framework:jar:2.12.0:compile\r\n[INFO] |  |  \\- org.apache.curator:curator-client:jar:2.12.0:compile\r\n[INFO] |  +- org.apache.curator:curator-recipes:jar:2.12.0:compile\r\n[INFO] |  \\- org.apache.zookeeper:zookeeper:jar:3.4.14:compile\r\n[INFO] +- org.apache.spark:spark-sql_2.12:jar:3.1.2:provided\r\n[INFO] |  +- com.univocity:univocity-parsers:jar:2.9.1:provided\r\n[INFO] |  +- org.apache.spark:spark-sketch_2.12:jar:3.1.2:provided\r\n[INFO] |  +- org.apache.spark:spark-core_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- com.twitter:chill_2.12:jar:0.9.5:provided\r\n[INFO] |  |  +- com.twitter:chill-java:jar:0.9.5:provided\r\n[INFO] |  |  +- org.apache.spark:spark-launcher_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- org.apache.spark:spark-kvstore_2.12:jar:3.1.2:provided\r\n[INFO] |  |  |  \\- org.fusesource.leveldbjni:leveldbjni-all:jar:1.8:provided\r\n[INFO] |  |  +- org.apache.spark:spark-network-common_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- org.apache.spark:spark-network-shuffle_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- org.apache.spark:spark-unsafe_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- javax.activation:activation:jar:1.1.1:provided\r\n[INFO] |  |  +- jakarta.servlet:jakarta.servlet-api:jar:4.0.4:provided\r\n[INFO] |  |  +- org.apache.commons:commons-math3:jar:3.4.1:provided\r\n[INFO] |  |  +- org.apache.commons:commons-text:jar:1.6:provided\r\n[INFO] |  |  +- com.ning:compress-lzf:jar:1.0.3:provided\r\n[INFO] |  |  +- org.xerial.snappy:snappy-java:jar:1.1.8.2:provided\r\n[INFO] |  |  +- org.lz4:lz4-java:jar:1.7.1:provided\r\n[INFO] |  |  +- com.github.luben:zstd-jni:jar:1.4.8-1:provided\r\n[INFO] |  |  +- org.roaringbitmap:RoaringBitmap:jar:0.9.0:provided\r\n[INFO] |  |  |  \\- org.roaringbitmap:shims:jar:0.9.0:provided\r\n[INFO] |  |  +- commons-net:commons-net:jar:3.1:provided\r\n[INFO] |  |  +- org.json4s:json4s-jackson_2.12:jar:3.7.0-M5:provided\r\n[INFO] |  |  |  \\- org.json4s:json4s-core_2.12:jar:3.7.0-M5:provided\r\n[INFO] |  |  |     +- org.json4s:json4s-ast_2.12:jar:3.7.0-M5:provided\r\n[INFO] |  |  |     \\- org.json4s:json4s-scalap_2.12:jar:3.7.0-M5:provided\r\n[INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:2.30:provided\r\n[INFO] |  |  |  +- jakarta.ws.rs:jakarta.ws.rs-api:jar:2.1.6:provided\r\n[INFO] |  |  |  \\- org.glassfish.hk2.external:jakarta.inject:jar:2.6.1:provided\r\n[INFO] |  |  +- org.glassfish.jersey.core:jersey-common:jar:2.34:provided\r\n[INFO] |  |  |  +- jakarta.annotation:jakarta.annotation-api:jar:1.3.5:provided\r\n[INFO] |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.3:provided\r\n[INFO] |  |  +- org.glassfish.jersey.core:jersey-server:jar:2.34:provided\r\n[INFO] |  |  |  \\- jakarta.validation:jakarta.validation-api:jar:2.0.2:provided\r\n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:2.30:provided\r\n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:2.34:provided\r\n[INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:2.34:provided\r\n[INFO] |  |  |  +- org.glassfish.hk2:hk2-locator:jar:2.6.1:provided\r\n[INFO] |  |  |  |  +- org.glassfish.hk2.external:aopalliance-repackaged:jar:2.6.1:provided\r\n[INFO] |  |  |  |  +- org.glassfish.hk2:hk2-api:jar:2.6.1:provided\r\n[INFO] |  |  |  |  \\- org.glassfish.hk2:hk2-utils:jar:2.6.1:provided\r\n[INFO] |  |  |  \\- org.javassist:javassist:jar:3.25.0-GA:provided\r\n[INFO] |  |  +- io.netty:netty-all:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-buffer:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-codec:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-common:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-handler:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-tcnative-classes:jar:2.0.46.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-resolver:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-classes-epoll:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-native-unix-common:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-classes-kqueue:jar:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-native-epoll:jar:linux-aarch_64:4.1.73.Final:provided\r\n[INFO] |  |  |  +- io.netty:netty-transport-native-kqueue:jar:osx-x86_64:4.1.73.Final:provided\r\n[INFO] |  |  |  \\- io.netty:netty-transport-native-kqueue:jar:osx-aarch_64:4.1.73.Final:provided\r\n[INFO] |  |  +- com.clearspring.analytics:stream:jar:2.9.6:provided\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-core:jar:4.2.8:provided\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-jvm:jar:4.2.8:provided\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-json:jar:4.2.8:provided\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-graphite:jar:4.1.1:provided\r\n[INFO] |  |  +- io.dropwizard.metrics:metrics-jmx:jar:4.2.8:provided\r\n[INFO] |  |  +- org.apache.ivy:ivy:jar:2.4.0:provided\r\n[INFO] |  |  +- oro:oro:jar:2.0.8:provided\r\n[INFO] |  |  +- net.razorvine:pyrolite:jar:4.30:provided\r\n[INFO] |  |  +- net.sf.py4j:py4j:jar:0.10.9:provided\r\n[INFO] |  |  \\- org.apache.commons:commons-crypto:jar:1.1.0:provided\r\n[INFO] |  +- org.apache.spark:spark-catalyst_2.12:jar:3.1.2:provided\r\n[INFO] |  |  +- org.scala-lang.modules:scala-parser-combinators_2.12:jar:1.1.2:provided\r\n[INFO] |  |  +- org.codehaus.janino:janino:jar:3.0.16:provided\r\n[INFO] |  |  +- org.codehaus.janino:commons-compiler:jar:3.0.16:provided\r\n[INFO] |  |  +- org.antlr:antlr4-runtime:jar:4.8-1:provided\r\n[INFO] |  |  +- org.apache.arrow:arrow-vector:jar:2.0.0:provided\r\n[INFO] |  |  |  +- org.apache.arrow:arrow-format:jar:2.0.0:provided\r\n[INFO] |  |  |  +- org.apache.arrow:arrow-memory-core:jar:2.0.0:provided\r\n[INFO] |  |  |  \\- com.google.flatbuffers:flatbuffers-java:jar:1.9.0:provided\r\n[INFO] |  |  \\- org.apache.arrow:arrow-memory-netty:jar:2.0.0:provided\r\n[INFO] |  +- org.apache.spark:spark-tags_2.12:jar:3.1.2:provided\r\n[INFO] |  +- org.apache.orc:orc-core:jar:1.5.12:provided\r\n[INFO] |  |  +- org.apache.orc:orc-shims:jar:1.5.12:provided\r\n[INFO] |  |  +- com.google.protobuf:protobuf-java:jar:2.5.0:provided\r\n[INFO] |  |  +- commons-lang:commons-lang:jar:2.6:provided\r\n[INFO] |  |  +- io.airlift:aircompressor:jar:0.10:provided\r\n[INFO] |  |  \\- org.threeten:threeten-extra:jar:1.5.0:provided\r\n[INFO] |  +- org.apache.orc:orc-mapreduce:jar:1.5.12:provided\r\n[INFO] |  +- org.apache.hive:hive-storage-api:jar:2.7.2:provided\r\n[INFO] |  +- org.apache.parquet:parquet-column:jar:1.10.1:provided\r\n[INFO] |  |  +- org.apache.parquet:parquet-common:jar:1.10.1:provided\r\n[INFO] |  |  \\- org.apache.parquet:parquet-encoding:jar:1.10.1:provided\r\n[INFO] |  +- org.apache.parquet:parquet-hadoop:jar:1.10.1:provided\r\n[INFO] |  |  +- org.apache.parquet:parquet-jackson:jar:1.10.1:provided\r\n[INFO] |  |  \\- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:provided\r\n[INFO] |  +- org.apache.xbean:xbean-asm7-shaded:jar:4.15:provided\r\n[INFO] |  \\- org.spark-project.spark:unused:jar:1.0.0:provided\r\n[INFO] +- org.apache.spark:spark-repl_2.12:jar:3.1.2:provided\r\n[INFO] |  \\- org.apache.spark:spark-mllib_2.12:jar:3.1.2:provided\r\n[INFO] |     +- org.apache.spark:spark-streaming_2.12:jar:3.1.2:provided\r\n[INFO] |     +- org.apache.spark:spark-graphx_2.12:jar:3.1.2:provided\r\n[INFO] |     |  +- com.github.fommil.netlib:core:jar:1.1.2:provided\r\n[INFO] |     |  \\- net.sourceforge.f2j:arpack_combined_all:jar:0.1:provided\r\n[INFO] |     +- org.apache.spark:spark-mllib-local_2.12:jar:3.1.2:provided\r\n[INFO] |     +- org.scalanlp:breeze_2.12:jar:1.0:provided\r\n[INFO] |     |  +- org.scalanlp:breeze-macros_2.12:jar:1.0:provided\r\n[INFO] |     |  +- com.github.wendykierp:JTransforms:jar:3.1:provided\r\n[INFO] |     |  |  \\- pl.edu.icm:JLargeArrays:jar:1.5:provided\r\n[INFO] |     |  +- com.chuusai:shapeless_2.12:jar:2.3.3:provided\r\n[INFO] |     |  |  \\- org.typelevel:macro-compat_2.12:jar:1.1.1:provided\r\n[INFO] |     |  +- org.typelevel:spire_2.12:jar:0.17.0-M1:provided\r\n[INFO] |     |  |  +- org.typelevel:spire-macros_2.12:jar:0.17.0-M1:provided\r\n[INFO] |     |  |  +- org.typelevel:spire-platform_2.12:jar:0.17.0-M1:provided\r\n[INFO] |     |  |  +- org.typelevel:spire-util_2.12:jar:0.17.0-M1:provided\r\n[INFO] |     |  |  +- org.typelevel:machinist_2.12:jar:0.6.8:provided\r\n[INFO] |     |  |  \\- org.typelevel:algebra_2.12:jar:2.0.0-M2:provided\r\n[INFO] |     |  |     \\- org.typelevel:cats-kernel_2.12:jar:2.0.0-M4:provided\r\n[INFO] |     |  \\- org.scala-lang.modules:scala-collection-compat_2.12:jar:2.1.1:provided\r\n[INFO] |     \\- org.glassfish.jaxb:jaxb-runtime:jar:2.3.2:provided\r\n[INFO] |        \\- com.sun.istack:istack-commons-runtime:jar:3.0.8:provided\r\n[INFO] +- org.scala-lang:scala-compiler:jar:2.12.15:provided\r\n[INFO] |  \\- org.scala-lang.modules:scala-xml_2.12:jar:1.0.6:provided\r\n[INFO] +- org.scala-lang:scala-reflect:jar:2.12.15:provided\r\n[INFO] +- org.apache.hadoop:hadoop-client-api:jar:3.3.1:provided\r\n[INFO] +- org.apache.kyuubi:kyuubi-common_2.12:test-jar:tests:1.5.0-SNAPSHOT:test\r\n[INFO] +- commons-collections:commons-collections:jar:3.2.2:test\r\n[INFO] +- commons-io:commons-io:jar:2.8.0:test\r\n[INFO] +- org.apache.spark:spark-hive_2.12:jar:3.1.2:test\r\n[INFO] |  +- org.apache.hive:hive-common:jar:2.3.7:test\r\n[INFO] |  |  +- commons-cli:commons-cli:jar:1.2:test\r\n[INFO] |  |  +- jline:jline:jar:0.9.94:test\r\n[INFO] |  |  +- org.apache.commons:commons-compress:jar:1.9:provided\r\n[INFO] |  |  +- com.tdunning:json:jar:1.8:test\r\n[INFO] |  |  \\- com.github.joshelser:dropwizard-metrics-hadoop-metrics2-reporter:jar:0.1.2:test\r\n[INFO] |  +- org.apache.hive:hive-exec:jar:core:2.3.7:test\r\n[INFO] |  |  +- org.apache.hive:hive-vector-code-gen:jar:2.3.7:test\r\n[INFO] |  |  |  \\- org.apache.velocity:velocity:jar:1.5:test\r\n[INFO] |  |  +- org.antlr:antlr-runtime:jar:3.5.2:test\r\n[INFO] |  |  +- org.antlr:ST4:jar:4.0.4:test\r\n[INFO] |  |  +- com.google.code.gson:gson:jar:2.2.4:test\r\n[INFO] |  |  \\- stax:stax-api:jar:1.0.1:test\r\n[INFO] |  +- org.apache.hive:hive-metastore:jar:2.3.7:test\r\n[INFO] |  |  +- javolution:javolution:jar:5.5.1:test\r\n[INFO] |  |  +- com.jolbox:bonecp:jar:0.8.0.RELEASE:test\r\n[INFO] |  |  +- com.zaxxer:HikariCP:jar:2.5.1:test\r\n[INFO] |  |  +- org.datanucleus:datanucleus-api-jdo:jar:4.2.4:test\r\n[INFO] |  |  +- org.datanucleus:datanucleus-rdbms:jar:4.1.19:test\r\n[INFO] |  |  +- commons-pool:commons-pool:jar:1.5.4:test\r\n[INFO] |  |  +- commons-dbcp:commons-dbcp:jar:1.4:test\r\n[INFO] |  |  +- javax.jdo:jdo-api:jar:3.0.1:test\r\n[INFO] |  |  |  \\- javax.transaction:jta:jar:1.1:test\r\n[INFO] |  |  \\- org.datanucleus:javax.jdo:jar:3.2.0-m3:test\r\n[INFO] |  |     \\- javax.transaction:transaction-api:jar:1.1:test\r\n[INFO] |  +- org.apache.hive:hive-serde:jar:2.3.7:test\r\n[INFO] |  |  \\- net.sf.opencsv:opencsv:jar:2.3:provided\r\n[INFO] |  +- org.apache.hive:hive-shims:jar:2.3.7:test\r\n[INFO] |  |  +- org.apache.hive.shims:hive-shims-common:jar:2.3.7:test\r\n[INFO] |  |  +- org.apache.hive.shims:hive-shims-0.23:jar:2.3.7:test\r\n[INFO] |  |  \\- org.apache.hive.shims:hive-shims-scheduler:jar:2.3.7:test\r\n[INFO] |  +- org.apache.hive:hive-llap-common:jar:2.3.7:test\r\n[INFO] |  +- org.apache.hive:hive-llap-client:jar:2.3.7:test\r\n[INFO] |  +- org.apache.avro:avro:jar:1.8.2:provided\r\n[INFO] |  |  \\- org.tukaani:xz:jar:1.5:provided\r\n[INFO] |  +- org.apache.avro:avro-mapred:jar:hadoop2:1.8.2:provided\r\n[INFO] |  |  \\- org.apache.avro:avro-ipc:jar:1.8.2:provided\r\n[INFO] |  +- commons-httpclient:commons-httpclient:jar:3.1:test\r\n[INFO] |  |  \\- commons-logging:commons-logging:jar:1.0.4:compile\r\n[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.6:compile\r\n[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:provided\r\n[INFO] |  +- joda-time:joda-time:jar:2.10.5:test\r\n[INFO] |  +- org.jodd:jodd-core:jar:3.5.2:test\r\n[INFO] |  +- com.google.code.findbugs:jsr305:jar:3.0.2:compile\r\n[INFO] |  +- org.datanucleus:datanucleus-core:jar:4.1.17:test\r\n[INFO] |  \\- org.apache.derby:derby:jar:10.12.1.1:test\r\n[INFO] +- org.apache.kyuubi:kyuubi-hive-jdbc-shaded:jar:1.5.0-SNAPSHOT:test\r\n[INFO] +- org.apache.hadoop:hadoop-client-runtime:jar:3.3.1:test\r\n[INFO] |  \\- org.apache.htrace:htrace-core4:jar:4.1.0-incubating:test\r\n[INFO] +- org.slf4j:jul-to-slf4j:jar:1.7.35:test\r\n[INFO] +- org.apache.iceberg:iceberg-spark3-runtime:jar:0.13.0:test\r\n[INFO] +- org.apache.spark:spark-avro_2.12:jar:3.1.2:test\r\n[INFO] +- org.apache.hudi:hudi-spark-common_2.12:jar:0.10.1:test\r\n[INFO] |  +- org.apache.hudi:hudi-client-common:jar:0.10.1:test\r\n[INFO] |  |  \\- com.github.davidmoten:hilbert-curve:jar:0.2.2:test\r\n[INFO] |  |     \\- com.github.davidmoten:guava-mini:jar:0.1.3:test\r\n[INFO] |  +- org.apache.hudi:hudi-spark-client:jar:0.10.1:test\r\n[INFO] |  +- org.apache.hudi:hudi-common:jar:0.10.1:test\r\n[INFO] |  |  +- org.apache.httpcomponents:fluent-hc:jar:4.4.1:test\r\n[INFO] |  |  +- org.rocksdb:rocksdbjni:jar:5.17.2:test\r\n[INFO] |  |  \\- com.esotericsoftware:kryo-shaded:jar:4.0.2:provided\r\n[INFO] |  |     +- com.esotericsoftware:minlog:jar:1.3.0:provided\r\n[INFO] |  |     \\- org.objenesis:objenesis:jar:2.5.1:provided\r\n[INFO] |  \\- org.apache.hudi:hudi-hive-sync:jar:0.10.1:test\r\n[INFO] |     \\- com.beust:jcommander:jar:1.72:test\r\n[INFO] +- org.apache.hudi:hudi-spark3_2.12:jar:0.10.1:test\r\n[INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.13.1:compile\r\n[INFO] |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.13.1:compile\r\n[INFO] +- org.apache.parquet:parquet-avro:jar:1.10.1:test\r\n[INFO] |  +- org.apache.parquet:parquet-format:jar:2.4.0:provided\r\n[INFO] |  \\- it.unimi.dsi:fastutil:jar:7.0.13:test\r\n[INFO] +- org.apache.hudi:hudi-spark_2.12:jar:0.10.1:test\r\n[INFO] |  +- org.apache.hudi:hudi-hadoop-mr:jar:0.10.1:test\r\n[INFO] |  \\- org.apache.hudi:hudi-sync-common:jar:0.10.1:test\r\n[INFO] +- io.delta:delta-core_2.12:jar:1.0.1:test\r\n[INFO] +- org.apache.kyuubi:kyuubi-zookeeper_2.12:jar:1.5.0-SNAPSHOT:test\r\n[INFO] \\- org.scalatest:scalatest_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-core_2.12:jar:3.2.9:test\r\n[INFO]    |  +- org.scalatest:scalatest-compatible:jar:3.2.9:test\r\n[INFO]    |  \\- org.scalactic:scalactic_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-featurespec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-flatspec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-freespec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-funsuite_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-funspec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-propspec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-refspec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-wordspec_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-diagrams_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-matchers-core_2.12:jar:3.2.9:test\r\n[INFO]    +- org.scalatest:scalatest-shouldmatchers_2.12:jar:3.2.9:test\r\n[INFO]    \\- org.scalatest:scalatest-mustmatchers_2.12:jar:3.2.9:test\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  1.702 s\r\n[INFO] Finished at: 2022-03-01T11:24:46+08:00\r\n[INFO] ------------------------------------------------------------------------\r\n```\r\n</details>\r\n\r\n> is there the same problem if you use spark-sql instead of kyuubi\r\n\r\nBasically, the component `kyuubi-spark-sql-engine` is just a Spark application which start a thrift server in Spark driver process and exposes interface which compatible with HiveServer2 thrift protocol. In this case, it just play a role forward the user SQL to `spark.sql(xxx)`, I don't think the result will be different with running SQL using `spark.sql(xxx)` directly, but let me try.\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054965094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054969972","html_url":"https://github.com/apache/hudi/pull/4901#issuecomment-1054969972","issue_url":"https://api.github.com/repos/apache/hudi/issues/4901","id":1054969972,"node_id":"IC_kwDOBI7nWM4-4ZB0","user":{"login":"huberylee","id":11664307,"node_id":"MDQ6VXNlcjExNjY0MzA3","avatar_url":"https://avatars.githubusercontent.com/u/11664307?v=4","gravatar_id":"","url":"https://api.github.com/users/huberylee","html_url":"https://github.com/huberylee","followers_url":"https://api.github.com/users/huberylee/followers","following_url":"https://api.github.com/users/huberylee/following{/other_user}","gists_url":"https://api.github.com/users/huberylee/gists{/gist_id}","starred_url":"https://api.github.com/users/huberylee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huberylee/subscriptions","organizations_url":"https://api.github.com/users/huberylee/orgs","repos_url":"https://api.github.com/users/huberylee/repos","events_url":"https://api.github.com/users/huberylee/events{/privacy}","received_events_url":"https://api.github.com/users/huberylee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:37:29Z","updated_at":"2022-03-01T03:37:29Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054969972/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054976081","html_url":"https://github.com/apache/hudi/pull/4468#issuecomment-1054976081","issue_url":"https://api.github.com/repos/apache/hudi/issues/4468","id":1054976081,"node_id":"IC_kwDOBI7nWM4-4ahR","user":{"login":"nsivabalan","id":513218,"node_id":"MDQ6VXNlcjUxMzIxOA==","avatar_url":"https://avatars.githubusercontent.com/u/513218?v=4","gravatar_id":"","url":"https://api.github.com/users/nsivabalan","html_url":"https://github.com/nsivabalan","followers_url":"https://api.github.com/users/nsivabalan/followers","following_url":"https://api.github.com/users/nsivabalan/following{/other_user}","gists_url":"https://api.github.com/users/nsivabalan/gists{/gist_id}","starred_url":"https://api.github.com/users/nsivabalan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nsivabalan/subscriptions","organizations_url":"https://api.github.com/users/nsivabalan/orgs","repos_url":"https://api.github.com/users/nsivabalan/repos","events_url":"https://api.github.com/users/nsivabalan/events{/privacy}","received_events_url":"https://api.github.com/users/nsivabalan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:48:45Z","updated_at":"2022-03-01T03:48:45Z","author_association":"CONTRIBUTOR","body":"sure. will add a test for schema evolution ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054976081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054978624","html_url":"https://github.com/apache/hudi/issues/4793#issuecomment-1054978624","issue_url":"https://api.github.com/repos/apache/hudi/issues/4793","id":1054978624,"node_id":"IC_kwDOBI7nWM4-4bJA","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:54:16Z","updated_at":"2022-03-01T03:55:44Z","author_association":"MEMBER","body":"@YannByron FYI, after switching to `spark.sql(xxx)` the SQL failed with same error.\r\n\r\n```\r\ntest(\"hudi 0.10.1\") {\r\n    val spark = SparkSession.builder()\r\n      .config(\"spark.sql.catalogImplementation\", \"in-memory\")\r\n      .config(\"spark.sql.defaultCatalog\", \"spark_catalog\")\r\n      .config(\"spark.sql.extensions\", \"org.apache.spark.sql.hudi.HoodieSparkSessionExtension\")\r\n      .config(\"spark.serializer\", \"org.apache.spark.serializer.KryoSerializer\")\r\n      .getOrCreate()\r\n\r\n    spark.sql(\r\n      s\"\"\"\r\n         | create table hudi_tbl (\r\n         |  id int,\r\n         |  name string,\r\n         |  price double,\r\n         |  ts long\r\n         | ) using hudi\r\n         | options (\r\n         |   primaryKey = 'id',\r\n         |   preCombineField = 'ts',\r\n         |   hoodie.bootstrap.index.class =\r\n         |   'org.apache.hudi.common.bootstrap.index.NoOpBootstrapIndex'\r\n         | )\r\n       \"\"\".stripMargin)\r\n  }\r\n```\r\n<details>\r\n<summary>Stacktrace</summary>\r\n\r\n```\r\nAn exception or error caused a run to abort: org.apache.spark.sql.catalyst.catalog.CatalogTable.copy(Lorg/apache/spark/sql/catalyst/TableIdentifier;Lorg/apache/spark/sql/catalyst/catalog/CatalogTableType;Lorg/apache/spark/sql/catalyst/catalog/CatalogStorageFormat;Lorg/apache/spark/sql/types/StructType;Lscala/Option;Lscala/collection/Seq;Lscala/Option;Ljava/lang/String;JJLjava/lang/String;Lscala/collection/immutable/Map;Lscala/Option;Lscala/Option;Lscala/Option;Lscala/collection/Seq;ZZLscala/collection/immutable/Map;)Lorg/apache/spark/sql/catalyst/catalog/CatalogTable; \r\njava.lang.NoSuchMethodError: org.apache.spark.sql.catalyst.catalog.CatalogTable.copy(Lorg/apache/spark/sql/catalyst/TableIdentifier;Lorg/apache/spark/sql/catalyst/catalog/CatalogTableType;Lorg/apache/spark/sql/catalyst/catalog/CatalogStorageFormat;Lorg/apache/spark/sql/types/StructType;Lscala/Option;Lscala/collection/Seq;Lscala/Option;Ljava/lang/String;JJLjava/lang/String;Lscala/collection/immutable/Map;Lscala/Option;Lscala/Option;Lscala/Option;Lscala/collection/Seq;ZZLscala/collection/immutable/Map;)Lorg/apache/spark/sql/catalyst/catalog/CatalogTable;\r\n\tat org.apache.spark.sql.hudi.command.CreateHoodieTableCommand$.createTableInCatalog(CreateHoodieTableCommand.scala:136)\r\n\tat org.apache.spark.sql.hudi.command.CreateHoodieTableCommand.run(CreateHoodieTableCommand.scala:71)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult$lzycompute(commands.scala:70)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.sideEffectResult(commands.scala:68)\r\n\tat org.apache.spark.sql.execution.command.ExecutedCommandExec.executeCollect(commands.scala:79)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$logicalPlan$1(Dataset.scala:228)\r\n\tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3687)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n\tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3685)\r\n\tat org.apache.spark.sql.Dataset.<init>(Dataset.scala:228)\r\n\tat org.apache.spark.sql.Dataset$.$anonfun$ofRows$2(Dataset.scala:99)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.Dataset$.ofRows(Dataset.scala:96)\r\n\tat org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:618)\r\n\tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n\tat org.apache.spark.sql.SparkSession.sql(SparkSession.scala:613)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.$anonfun$new$1(SparkHudiOperationSuite.scala:56)\r\n\tat org.scalatest.OutcomeOf.outcomeOf(OutcomeOf.scala:85)\r\n\tat org.scalatest.OutcomeOf.outcomeOf$(OutcomeOf.scala:83)\r\n\tat org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:22)\r\n\tat org.scalatest.Transformer.apply(Transformer.scala:20)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike$$anon$1.apply(AnyFunSuiteLike.scala:226)\r\n\tat org.apache.kyuubi.KyuubiFunSuite.withFixture(KyuubiFunSuite.scala:63)\r\n\tat org.apache.kyuubi.KyuubiFunSuite.withFixture$(KyuubiFunSuite.scala:57)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.withFixture(SparkHudiOperationSuite.scala:27)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.invokeWithFixture$1(AnyFunSuiteLike.scala:224)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$runTest$1(AnyFunSuiteLike.scala:236)\r\n\tat org.scalatest.SuperEngine.runTestImpl(Engine.scala:306)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTest(AnyFunSuiteLike.scala:236)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTest$(AnyFunSuiteLike.scala:218)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.org$scalatest$BeforeAndAfterEach$$super$runTest(SparkHudiOperationSuite.scala:27)\r\n\tat org.scalatest.BeforeAndAfterEach.runTest(BeforeAndAfterEach.scala:234)\r\n\tat org.scalatest.BeforeAndAfterEach.runTest$(BeforeAndAfterEach.scala:227)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.runTest(SparkHudiOperationSuite.scala:27)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$runTests$1(AnyFunSuiteLike.scala:269)\r\n\tat org.scalatest.SuperEngine.$anonfun$runTestsInBranch$1(Engine.scala:413)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:401)\r\n\tat org.scalatest.SuperEngine.runTestsInBranch(Engine.scala:396)\r\n\tat org.scalatest.SuperEngine.runTestsImpl(Engine.scala:475)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTests(AnyFunSuiteLike.scala:269)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.runTests$(AnyFunSuiteLike.scala:268)\r\n\tat org.scalatest.funsuite.AnyFunSuite.runTests(AnyFunSuite.scala:1563)\r\n\tat org.scalatest.Suite.run(Suite.scala:1112)\r\n\tat org.scalatest.Suite.run$(Suite.scala:1094)\r\n\tat org.scalatest.funsuite.AnyFunSuite.org$scalatest$funsuite$AnyFunSuiteLike$$super$run(AnyFunSuite.scala:1563)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.$anonfun$run$1(AnyFunSuiteLike.scala:273)\r\n\tat org.scalatest.SuperEngine.runImpl(Engine.scala:535)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.run(AnyFunSuiteLike.scala:273)\r\n\tat org.scalatest.funsuite.AnyFunSuiteLike.run$(AnyFunSuiteLike.scala:272)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.org$scalatest$BeforeAndAfterAll$$super$run(SparkHudiOperationSuite.scala:27)\r\n\tat org.scalatest.BeforeAndAfterAll.liftedTree1$1(BeforeAndAfterAll.scala:213)\r\n\tat org.scalatest.BeforeAndAfterAll.run(BeforeAndAfterAll.scala:210)\r\n\tat org.scalatest.BeforeAndAfterAll.run$(BeforeAndAfterAll.scala:208)\r\n\tat org.apache.kyuubi.engine.spark.operation.SparkHudiOperationSuite.run(SparkHudiOperationSuite.scala:27)\r\n\tat org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:45)\r\n\tat org.scalatest.tools.Runner$.$anonfun$doRunRunRunDaDoRunRun$13(Runner.scala:1322)\r\n\tat org.scalatest.tools.Runner$.$anonfun$doRunRunRunDaDoRunRun$13$adapted(Runner.scala:1316)\r\n\tat scala.collection.immutable.List.foreach(List.scala:431)\r\n\tat org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:1316)\r\n\tat org.scalatest.tools.Runner$.$anonfun$runOptionallyWithPassFailReporter$24(Runner.scala:993)\r\n\tat org.scalatest.tools.Runner$.$anonfun$runOptionallyWithPassFailReporter$24$adapted(Runner.scala:971)\r\n\tat org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:1482)\r\n\tat org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:971)\r\n\tat org.scalatest.tools.Runner$.run(Runner.scala:798)\r\n\tat org.scalatest.tools.Runner.run(Runner.scala)\r\n\tat org.jetbrains.plugins.scala.testingSupport.scalaTest.ScalaTestRunner.runScalaTest2or3(ScalaTestRunner.java:38)\r\n\tat org.jetbrains.plugins.scala.testingSupport.scalaTest.ScalaTestRunner.main(ScalaTestRunner.java:25)\r\n```\r\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054978624/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054979776","html_url":"https://github.com/apache/hudi/issues/4887#issuecomment-1054979776","issue_url":"https://api.github.com/repos/apache/hudi/issues/4887","id":1054979776,"node_id":"IC_kwDOBI7nWM4-4bbA","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T03:56:40Z","updated_at":"2022-03-01T03:56:40Z","author_association":"MEMBER","body":"@fisser001 I didn't try the HIVE_SYNC way myself so I am not sure if that would work, but the ddl script should work. If that possible to find any stack trace or log of the impala front end? Possible the file listing has some issues. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054979776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054984922","html_url":"https://github.com/apache/hudi/issues/4830#issuecomment-1054984922","issue_url":"https://api.github.com/repos/apache/hudi/issues/4830","id":1054984922,"node_id":"IC_kwDOBI7nWM4-4cra","user":{"login":"garyli1019","id":23007841,"node_id":"MDQ6VXNlcjIzMDA3ODQx","avatar_url":"https://avatars.githubusercontent.com/u/23007841?v=4","gravatar_id":"","url":"https://api.github.com/users/garyli1019","html_url":"https://github.com/garyli1019","followers_url":"https://api.github.com/users/garyli1019/followers","following_url":"https://api.github.com/users/garyli1019/following{/other_user}","gists_url":"https://api.github.com/users/garyli1019/gists{/gist_id}","starred_url":"https://api.github.com/users/garyli1019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/garyli1019/subscriptions","organizations_url":"https://api.github.com/users/garyli1019/orgs","repos_url":"https://api.github.com/users/garyli1019/repos","events_url":"https://api.github.com/users/garyli1019/events{/privacy}","received_events_url":"https://api.github.com/users/garyli1019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:04:40Z","updated_at":"2022-03-01T04:04:40Z","author_association":"MEMBER","body":"@nsivabalan I implemented the hudi connector on Impala, but I didn't touch the impala codebase since then(almost two years). It's quite complicated to set up the impala dev environment. IIRC we need a linux machine. I might not able to work on this at this point but happy to help if any contributor are interested. Filled a ticket here: https://issues.apache.org/jira/browse/HUDI-3537\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054984922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054989168","html_url":"https://github.com/apache/hudi/pull/4739#issuecomment-1054989168","issue_url":"https://api.github.com/repos/apache/hudi/issues/4739","id":1054989168,"node_id":"IC_kwDOBI7nWM4-4dtw","user":{"login":"alexeykudinkin","id":428277,"node_id":"MDQ6VXNlcjQyODI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/428277?v=4","gravatar_id":"","url":"https://api.github.com/users/alexeykudinkin","html_url":"https://github.com/alexeykudinkin","followers_url":"https://api.github.com/users/alexeykudinkin/followers","following_url":"https://api.github.com/users/alexeykudinkin/following{/other_user}","gists_url":"https://api.github.com/users/alexeykudinkin/gists{/gist_id}","starred_url":"https://api.github.com/users/alexeykudinkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexeykudinkin/subscriptions","organizations_url":"https://api.github.com/users/alexeykudinkin/orgs","repos_url":"https://api.github.com/users/alexeykudinkin/repos","events_url":"https://api.github.com/users/alexeykudinkin/events{/privacy}","received_events_url":"https://api.github.com/users/alexeykudinkin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:09:36Z","updated_at":"2022-03-01T04:09:36Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1054989168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055016784","html_url":"https://github.com/apache/hudi/issues/4839#issuecomment-1055016784","issue_url":"https://api.github.com/repos/apache/hudi/issues/4839","id":1055016784,"node_id":"IC_kwDOBI7nWM4-4kdQ","user":{"login":"Gatsby-Lee","id":22950880,"node_id":"MDQ6VXNlcjIyOTUwODgw","avatar_url":"https://avatars.githubusercontent.com/u/22950880?v=4","gravatar_id":"","url":"https://api.github.com/users/Gatsby-Lee","html_url":"https://github.com/Gatsby-Lee","followers_url":"https://api.github.com/users/Gatsby-Lee/followers","following_url":"https://api.github.com/users/Gatsby-Lee/following{/other_user}","gists_url":"https://api.github.com/users/Gatsby-Lee/gists{/gist_id}","starred_url":"https://api.github.com/users/Gatsby-Lee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gatsby-Lee/subscriptions","organizations_url":"https://api.github.com/users/Gatsby-Lee/orgs","repos_url":"https://api.github.com/users/Gatsby-Lee/repos","events_url":"https://api.github.com/users/Gatsby-Lee/events{/privacy}","received_events_url":"https://api.github.com/users/Gatsby-Lee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:54:27Z","updated_at":"2022-03-01T04:54:27Z","author_association":"CONTRIBUTOR","body":"@glory9211 Like @nsivabalan said, if your data latency is not critical, then CoW works as well.\r\nI use CoW for some datasets that have incoming data around 600-800/sec.\r\nI designed to use MoR initially, but due to the Async Compaction issue in AWS Glue, I moved to CoW for now.\r\nIf the data latency is not big concern, then try with the increased windowSize.\r\nYou can set the windowSize when you setup forEachBatch.\r\nWhat I learned is that as Big Data, Hudi write has high latency + high throughput.\r\nSo, rather than writing many small batch, try with a bigger size batch with less write.\r\nI believe that you can get some different ideas\r\n\r\n@glory9211 Good question. Yes. I'd like to ask the same that if Async Clustering is triggered or run in AWS Glue when it is enabled.\r\n\r\n@nsivabalan Does the Async Clustering has to run independently?\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055016784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017231","html_url":"https://github.com/apache/hudi/issues/4896#issuecomment-1055017231","issue_url":"https://api.github.com/repos/apache/hudi/issues/4896","id":1055017231,"node_id":"IC_kwDOBI7nWM4-4kkP","user":{"login":"Gatsby-Lee","id":22950880,"node_id":"MDQ6VXNlcjIyOTUwODgw","avatar_url":"https://avatars.githubusercontent.com/u/22950880?v=4","gravatar_id":"","url":"https://api.github.com/users/Gatsby-Lee","html_url":"https://github.com/Gatsby-Lee","followers_url":"https://api.github.com/users/Gatsby-Lee/followers","following_url":"https://api.github.com/users/Gatsby-Lee/following{/other_user}","gists_url":"https://api.github.com/users/Gatsby-Lee/gists{/gist_id}","starred_url":"https://api.github.com/users/Gatsby-Lee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Gatsby-Lee/subscriptions","organizations_url":"https://api.github.com/users/Gatsby-Lee/orgs","repos_url":"https://api.github.com/users/Gatsby-Lee/repos","events_url":"https://api.github.com/users/Gatsby-Lee/events{/privacy}","received_events_url":"https://api.github.com/users/Gatsby-Lee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:55:24Z","updated_at":"2022-03-01T04:55:24Z","author_association":"CONTRIBUTOR","body":"@nsivabalan @yihua Thank you\r\nPlease let me know if you need anything from me about this issue.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017415","html_url":"https://github.com/apache/hudi/pull/4909#issuecomment-1055017415","issue_url":"https://api.github.com/repos/apache/hudi/issues/4909","id":1055017415,"node_id":"IC_kwDOBI7nWM4-4knH","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:55:46Z","updated_at":"2022-03-01T04:55:46Z","author_association":"CONTRIBUTOR","body":"Thanks, overall looks good, i have reviewed and have another patch for this :)\r\n[HUDI-3516_2.patch.zip](https://github.com/apache/hudi/files/8158826/HUDI-3516_2.patch.zip)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017841","html_url":"https://github.com/apache/hudi/pull/3771#issuecomment-1055017841","issue_url":"https://api.github.com/repos/apache/hudi/issues/3771","id":1055017841,"node_id":"IC_kwDOBI7nWM4-4ktx","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T04:56:41Z","updated_at":"2022-03-01T04:56:41Z","author_association":"CONTRIBUTOR","body":"Hi @nsivabalan , many users report this issue so i mark this PR as blocker for release-0.11","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055017841/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055050715","html_url":"https://github.com/apache/hudi/pull/4752#issuecomment-1055050715","issue_url":"https://api.github.com/repos/apache/hudi/issues/4752","id":1055050715,"node_id":"IC_kwDOBI7nWM4-4svb","user":{"login":"huberylee","id":11664307,"node_id":"MDQ6VXNlcjExNjY0MzA3","avatar_url":"https://avatars.githubusercontent.com/u/11664307?v=4","gravatar_id":"","url":"https://api.github.com/users/huberylee","html_url":"https://github.com/huberylee","followers_url":"https://api.github.com/users/huberylee/followers","following_url":"https://api.github.com/users/huberylee/following{/other_user}","gists_url":"https://api.github.com/users/huberylee/gists{/gist_id}","starred_url":"https://api.github.com/users/huberylee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huberylee/subscriptions","organizations_url":"https://api.github.com/users/huberylee/orgs","repos_url":"https://api.github.com/users/huberylee/repos","events_url":"https://api.github.com/users/huberylee/events{/privacy}","received_events_url":"https://api.github.com/users/huberylee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T05:57:06Z","updated_at":"2022-03-01T05:57:06Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055050715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055085042","html_url":"https://github.com/apache/hudi/pull/4924#issuecomment-1055085042","issue_url":"https://api.github.com/repos/apache/hudi/issues/4924","id":1055085042,"node_id":"IC_kwDOBI7nWM4-41Hy","user":{"login":"cuibo01","id":36881649,"node_id":"MDQ6VXNlcjM2ODgxNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/36881649?v=4","gravatar_id":"","url":"https://api.github.com/users/cuibo01","html_url":"https://github.com/cuibo01","followers_url":"https://api.github.com/users/cuibo01/followers","following_url":"https://api.github.com/users/cuibo01/following{/other_user}","gists_url":"https://api.github.com/users/cuibo01/gists{/gist_id}","starred_url":"https://api.github.com/users/cuibo01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuibo01/subscriptions","organizations_url":"https://api.github.com/users/cuibo01/orgs","repos_url":"https://api.github.com/users/cuibo01/repos","events_url":"https://api.github.com/users/cuibo01/events{/privacy}","received_events_url":"https://api.github.com/users/cuibo01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T06:51:49Z","updated_at":"2022-03-01T06:51:49Z","author_association":"CONTRIBUTOR","body":"in hbase 2.x, scanner and reader add `close` method","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055085042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055087137","html_url":"https://github.com/apache/hudi/pull/4909#issuecomment-1055087137","issue_url":"https://api.github.com/repos/apache/hudi/issues/4909","id":1055087137,"node_id":"IC_kwDOBI7nWM4-41oh","user":{"login":"cuibo01","id":36881649,"node_id":"MDQ6VXNlcjM2ODgxNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/36881649?v=4","gravatar_id":"","url":"https://api.github.com/users/cuibo01","html_url":"https://github.com/cuibo01","followers_url":"https://api.github.com/users/cuibo01/followers","following_url":"https://api.github.com/users/cuibo01/following{/other_user}","gists_url":"https://api.github.com/users/cuibo01/gists{/gist_id}","starred_url":"https://api.github.com/users/cuibo01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuibo01/subscriptions","organizations_url":"https://api.github.com/users/cuibo01/orgs","repos_url":"https://api.github.com/users/cuibo01/repos","events_url":"https://api.github.com/users/cuibo01/events{/privacy}","received_events_url":"https://api.github.com/users/cuibo01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T06:55:32Z","updated_at":"2022-03-01T06:55:32Z","author_association":"CONTRIBUTOR","body":"@danny0405 Thank you very much for your review :)","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055087137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055113849","html_url":"https://github.com/apache/hudi/issues/4881#issuecomment-1055113849","issue_url":"https://api.github.com/repos/apache/hudi/issues/4881","id":1055113849,"node_id":"IC_kwDOBI7nWM4-48J5","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T07:36:00Z","updated_at":"2022-03-01T07:36:12Z","author_association":"CONTRIBUTOR","body":"Seems a known bug fixed before, does you code has this fix: https://github.com/apache/hudi/pull/3925 ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055113849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055114614","html_url":"https://github.com/apache/hudi/issues/4882#issuecomment-1055114614","issue_url":"https://api.github.com/repos/apache/hudi/issues/4882","id":1055114614,"node_id":"IC_kwDOBI7nWM4-48V2","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T07:37:16Z","updated_at":"2022-03-01T07:37:16Z","author_association":"CONTRIBUTOR","body":"These files should be archived then, did your job have pending compactions on the timeline ?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055114614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055119077","html_url":"https://github.com/apache/hudi/issues/3960#issuecomment-1055119077","issue_url":"https://api.github.com/repos/apache/hudi/issues/3960","id":1055119077,"node_id":"IC_kwDOBI7nWM4-49bl","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T07:44:24Z","updated_at":"2022-03-01T07:44:24Z","author_association":"CONTRIBUTOR","body":"> > IMO, this requires the flink can support schema evolution, current community flink doesn't support it, you can consider use aliyun enterprise flink, we are support it.\r\n> \r\n> @0x574C i hope this gives you a good idea about supporting schema evolution in flink. If you don't have further questions, we may close this. Thanks.\r\n\r\nYes, this feature is not supported yet mainly because there is no solution for adapter the schema changes of the internal row for flink engine, and for SQL semantics the row schema is solid, we may need some tricky syntax for that such as `create table target as select * from src_table` and the engine can handle the schema changes with varying SE/DE automatically.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055119077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055120580","html_url":"https://github.com/apache/hudi/issues/4558#issuecomment-1055120580","issue_url":"https://api.github.com/repos/apache/hudi/issues/4558","id":1055120580,"node_id":"IC_kwDOBI7nWM4-49zE","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T07:46:43Z","updated_at":"2022-03-01T07:46:43Z","author_association":"CONTRIBUTOR","body":"@waywtdcc Try 0.10.1 if possible again, the problem expects to be resolved ~","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055120580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055152064","html_url":"https://github.com/apache/hudi/issues/4882#issuecomment-1055152064","issue_url":"https://api.github.com/repos/apache/hudi/issues/4882","id":1055152064,"node_id":"IC_kwDOBI7nWM4-5FfA","user":{"login":"cdzryou","id":57514352,"node_id":"MDQ6VXNlcjU3NTE0MzUy","avatar_url":"https://avatars.githubusercontent.com/u/57514352?v=4","gravatar_id":"","url":"https://api.github.com/users/cdzryou","html_url":"https://github.com/cdzryou","followers_url":"https://api.github.com/users/cdzryou/followers","following_url":"https://api.github.com/users/cdzryou/following{/other_user}","gists_url":"https://api.github.com/users/cdzryou/gists{/gist_id}","starred_url":"https://api.github.com/users/cdzryou/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdzryou/subscriptions","organizations_url":"https://api.github.com/users/cdzryou/orgs","repos_url":"https://api.github.com/users/cdzryou/repos","events_url":"https://api.github.com/users/cdzryou/events{/privacy}","received_events_url":"https://api.github.com/users/cdzryou/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T08:27:47Z","updated_at":"2022-03-01T08:27:47Z","author_association":"NONE","body":"> These files should be archived then, did your job have pending compactions on the timeline ?\r\n\r\nthanks for your comment.\r\nhave no pending compactions, i run a job for a long time, and find these files were archived, files don't grow indefinitely.\r\nhowever, can I control the number of files by setting parameters? for example, i only want to keep 5 files or less","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055152064/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055154248","html_url":"https://github.com/apache/hudi/pull/3808#issuecomment-1055154248","issue_url":"https://api.github.com/repos/apache/hudi/issues/3808","id":1055154248,"node_id":"IC_kwDOBI7nWM4-5GBI","user":{"login":"xiarixiaoyao","id":13514703,"node_id":"MDQ6VXNlcjEzNTE0NzAz","avatar_url":"https://avatars.githubusercontent.com/u/13514703?v=4","gravatar_id":"","url":"https://api.github.com/users/xiarixiaoyao","html_url":"https://github.com/xiarixiaoyao","followers_url":"https://api.github.com/users/xiarixiaoyao/followers","following_url":"https://api.github.com/users/xiarixiaoyao/following{/other_user}","gists_url":"https://api.github.com/users/xiarixiaoyao/gists{/gist_id}","starred_url":"https://api.github.com/users/xiarixiaoyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiarixiaoyao/subscriptions","organizations_url":"https://api.github.com/users/xiarixiaoyao/orgs","repos_url":"https://api.github.com/users/xiarixiaoyao/repos","events_url":"https://api.github.com/users/xiarixiaoyao/events{/privacy}","received_events_url":"https://api.github.com/users/xiarixiaoyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T08:30:30Z","updated_at":"2022-03-01T08:30:30Z","author_association":"CONTRIBUTOR","body":"@bvaradar   we stored history schemas into .schema for the reason that we want track  the lineage of schema changes \r\nLater, we can use the incremental method to synchronize the schema to the metatable\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055154248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055174981","html_url":"https://github.com/apache/hudi/issues/4882#issuecomment-1055174981","issue_url":"https://api.github.com/repos/apache/hudi/issues/4882","id":1055174981,"node_id":"IC_kwDOBI7nWM4-5LFF","user":{"login":"danny0405","id":7644508,"node_id":"MDQ6VXNlcjc2NDQ1MDg=","avatar_url":"https://avatars.githubusercontent.com/u/7644508?v=4","gravatar_id":"","url":"https://api.github.com/users/danny0405","html_url":"https://github.com/danny0405","followers_url":"https://api.github.com/users/danny0405/followers","following_url":"https://api.github.com/users/danny0405/following{/other_user}","gists_url":"https://api.github.com/users/danny0405/gists{/gist_id}","starred_url":"https://api.github.com/users/danny0405/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danny0405/subscriptions","organizations_url":"https://api.github.com/users/danny0405/orgs","repos_url":"https://api.github.com/users/danny0405/repos","events_url":"https://api.github.com/users/danny0405/events{/privacy}","received_events_url":"https://api.github.com/users/danny0405/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T08:56:48Z","updated_at":"2022-03-01T08:56:48Z","author_association":"CONTRIBUTOR","body":"For flink option, it is `archive.min_commits` default 20 and `archive.max_commits` 30, i would suggest you keep the default value as it is to avoid weird problem. Because in hoodie, many operations depend on the active timeline ~","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055174981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055209599","html_url":"https://github.com/apache/hudi/pull/4925#issuecomment-1055209599","issue_url":"https://api.github.com/repos/apache/hudi/issues/4925","id":1055209599,"node_id":"IC_kwDOBI7nWM4-5Th_","user":{"login":"pratyakshsharma","id":30863489,"node_id":"MDQ6VXNlcjMwODYzNDg5","avatar_url":"https://avatars.githubusercontent.com/u/30863489?v=4","gravatar_id":"","url":"https://api.github.com/users/pratyakshsharma","html_url":"https://github.com/pratyakshsharma","followers_url":"https://api.github.com/users/pratyakshsharma/followers","following_url":"https://api.github.com/users/pratyakshsharma/following{/other_user}","gists_url":"https://api.github.com/users/pratyakshsharma/gists{/gist_id}","starred_url":"https://api.github.com/users/pratyakshsharma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pratyakshsharma/subscriptions","organizations_url":"https://api.github.com/users/pratyakshsharma/orgs","repos_url":"https://api.github.com/users/pratyakshsharma/repos","events_url":"https://api.github.com/users/pratyakshsharma/events{/privacy}","received_events_url":"https://api.github.com/users/pratyakshsharma/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T09:28:07Z","updated_at":"2022-03-01T09:28:07Z","author_association":"CONTRIBUTOR","body":"One high level question, is there any limitation or pre requisite in terms of different schemas from different source topics that users should be aware of when using this new feature? What happens when one source schema has few fields which are not present in second source schema and so on. Does that lead to data loss? How are we handling that?","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055209599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055231174","html_url":"https://github.com/apache/hudi/issues/4876#issuecomment-1055231174","issue_url":"https://api.github.com/repos/apache/hudi/issues/4876","id":1055231174,"node_id":"IC_kwDOBI7nWM4-5YzG","user":{"login":"pmgod8922","id":13418464,"node_id":"MDQ6VXNlcjEzNDE4NDY0","avatar_url":"https://avatars.githubusercontent.com/u/13418464?v=4","gravatar_id":"","url":"https://api.github.com/users/pmgod8922","html_url":"https://github.com/pmgod8922","followers_url":"https://api.github.com/users/pmgod8922/followers","following_url":"https://api.github.com/users/pmgod8922/following{/other_user}","gists_url":"https://api.github.com/users/pmgod8922/gists{/gist_id}","starred_url":"https://api.github.com/users/pmgod8922/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmgod8922/subscriptions","organizations_url":"https://api.github.com/users/pmgod8922/orgs","repos_url":"https://api.github.com/users/pmgod8922/repos","events_url":"https://api.github.com/users/pmgod8922/events{/privacy}","received_events_url":"https://api.github.com/users/pmgod8922/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T09:50:22Z","updated_at":"2022-03-01T09:50:22Z","author_association":"NONE","body":"> \r\n\r\nhello  ask a question：\r\n1、I create sparksession \r\nSparkSession sparkSession = SparkSession.builder().enableHiveSupport().appName(\"HudiTest\")\r\n.config(\"spark.serializer\",\"org.apache.spark.serializer.KryoSerializer\")\r\n.getOrCreate();\r\n2.Configure hudi parameters\r\noptionMap.put(DataSourceWriteOptions.RECORDKEY_FIELD().key(),\"uuid\");\r\noptionMap.put(DataSourceWriteOptions.PRECOMBINE_FIELD().key(),\"dt\");\r\noptionMap.put(DataSourceWriteOptions.PARTITIONPATH_FIELD().key(),\"dt\");\r\noptionMap.put(\"hoodie.insert.shuffle.parallelism\",\"10\");\r\noptionMap.put(\"hoodie.upsert.shuffle.parallelism\",\"10\");\r\noptionMap.put(\"hoodie.datasource.write.operation\",\"insert\");\r\noptionMap.put(\"hoodie.parquet.small.file.limit\",\"94857600\");\r\noptionMap.put(\"hoodie.parquet.max.file.size\",\"200829120\");\r\noptionMap.put(\"hoodie.merge.allow.duplicate.on.inserts\",\"true\");\r\noptionMap.put(HoodieWriteConfig.TBL_NAME.key(),\"my_table_B\");\r\n3.Output Data To Hdfs\r\n4.**Found small files not merged**\r\n\r\nCan you help me to see if the configuration is missing? ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055231174/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055238664","html_url":"https://github.com/apache/hudi/pull/4686#issuecomment-1055238664","issue_url":"https://api.github.com/repos/apache/hudi/issues/4686","id":1055238664,"node_id":"IC_kwDOBI7nWM4-5aoI","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T09:54:34Z","updated_at":"2022-03-01T09:54:34Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"3264a340cfac2614a919d34d01eb469bcc9a52ae\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5507\",\n    \"triggerID\" : \"3264a340cfac2614a919d34d01eb469bcc9a52ae\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7b32bf3ea8cbf260daf7807df20280bee531f25c\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5521\",\n    \"triggerID\" : \"7b32bf3ea8cbf260daf7807df20280bee531f25c\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7ae90ff969ad167d2b2eb046dfbbd542a228d697\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5534\",\n    \"triggerID\" : \"7ae90ff969ad167d2b2eb046dfbbd542a228d697\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"9a743a54626f0586cb14ae2da9aba966fee1c8d7\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5535\",\n    \"triggerID\" : \"9a743a54626f0586cb14ae2da9aba966fee1c8d7\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"bde7521aa98711e58d5a9dd17ed216ba73810b66\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6270\",\n    \"triggerID\" : \"bde7521aa98711e58d5a9dd17ed216ba73810b66\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"b40ab2952d3eefa8e373968b11db4df4b6611fcc\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6274\",\n    \"triggerID\" : \"b40ab2952d3eefa8e373968b11db4df4b6611fcc\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"316a57b79153f5fbd0c8fc7b635ac43e64ae4981\",\n    \"status\" : \"FAILURE\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6428\",\n    \"triggerID\" : \"316a57b79153f5fbd0c8fc7b635ac43e64ae4981\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 316a57b79153f5fbd0c8fc7b635ac43e64ae4981 Azure: [FAILURE](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6428) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055238664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055244794","html_url":"https://github.com/apache/hudi/pull/4910#issuecomment-1055244794","issue_url":"https://api.github.com/repos/apache/hudi/issues/4910","id":1055244794,"node_id":"IC_kwDOBI7nWM4-5cH6","user":{"login":"xushiyan","id":2701446,"node_id":"MDQ6VXNlcjI3MDE0NDY=","avatar_url":"https://avatars.githubusercontent.com/u/2701446?v=4","gravatar_id":"","url":"https://api.github.com/users/xushiyan","html_url":"https://github.com/xushiyan","followers_url":"https://api.github.com/users/xushiyan/followers","following_url":"https://api.github.com/users/xushiyan/following{/other_user}","gists_url":"https://api.github.com/users/xushiyan/gists{/gist_id}","starred_url":"https://api.github.com/users/xushiyan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xushiyan/subscriptions","organizations_url":"https://api.github.com/users/xushiyan/orgs","repos_url":"https://api.github.com/users/xushiyan/repos","events_url":"https://api.github.com/users/xushiyan/events{/privacy}","received_events_url":"https://api.github.com/users/xushiyan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T09:57:58Z","updated_at":"2022-03-01T09:57:58Z","author_association":"MEMBER","body":"@YannByron if you get a chance, please take a pass also. thanks","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055244794/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055257720","html_url":"https://github.com/apache/hudi/pull/4679#issuecomment-1055257720","issue_url":"https://api.github.com/repos/apache/hudi/issues/4679","id":1055257720,"node_id":"IC_kwDOBI7nWM4-5fR4","user":{"login":"hudi-bot","id":79415918,"node_id":"MDQ6VXNlcjc5NDE1OTE4","avatar_url":"https://avatars.githubusercontent.com/u/79415918?v=4","gravatar_id":"","url":"https://api.github.com/users/hudi-bot","html_url":"https://github.com/hudi-bot","followers_url":"https://api.github.com/users/hudi-bot/followers","following_url":"https://api.github.com/users/hudi-bot/following{/other_user}","gists_url":"https://api.github.com/users/hudi-bot/gists{/gist_id}","starred_url":"https://api.github.com/users/hudi-bot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hudi-bot/subscriptions","organizations_url":"https://api.github.com/users/hudi-bot/orgs","repos_url":"https://api.github.com/users/hudi-bot/repos","events_url":"https://api.github.com/users/hudi-bot/events{/privacy}","received_events_url":"https://api.github.com/users/hudi-bot/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T10:09:30Z","updated_at":"2022-03-01T10:09:30Z","author_association":"NONE","body":"<!--\nMeta data\n{\n  \"version\" : 1,\n  \"metaDataEntries\" : [ {\n    \"hash\" : \"d4f6e12cca613145904db85abc3e1bd68a08e823\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5471\",\n    \"triggerID\" : \"d4f6e12cca613145904db85abc3e1bd68a08e823\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"d4f6e12cca613145904db85abc3e1bd68a08e823\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5491\",\n    \"triggerID\" : \"1020748430\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"919d42914185e265b21d6124090bbda7a882f0f9\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5492\",\n    \"triggerID\" : \"919d42914185e265b21d6124090bbda7a882f0f9\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"7810bd0c529dc44094e13650696d585d21b23c82\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5493\",\n    \"triggerID\" : \"7810bd0c529dc44094e13650696d585d21b23c82\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"4d49dbe71e689f0d56d3447bc5c4367db35c33af\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=5528\",\n    \"triggerID\" : \"4d49dbe71e689f0d56d3447bc5c4367db35c33af\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"f63a0753eb2f8f25cd1cd68bf5e6356a73438588\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6030\",\n    \"triggerID\" : \"1040300417\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"f63a0753eb2f8f25cd1cd68bf5e6356a73438588\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6030\",\n    \"triggerID\" : \"f63a0753eb2f8f25cd1cd68bf5e6356a73438588\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"1040300417\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"ddbf502d11717d800971f736fa81054afa1873b7\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6056\",\n    \"triggerID\" : \"1041367799\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"ddbf502d11717d800971f736fa81054afa1873b7\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6056\",\n    \"triggerID\" : \"ddbf502d11717d800971f736fa81054afa1873b7\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"1041367799\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"48b162c6c411b9cb5b605d006acc8d6e7d45cec8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6189\",\n    \"triggerID\" : \"1047380901\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"48b162c6c411b9cb5b605d006acc8d6e7d45cec8\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6189\",\n    \"triggerID\" : \"48b162c6c411b9cb5b605d006acc8d6e7d45cec8\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"TBD\",\n    \"triggerID\" : \"1047380901\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"2e89b137fc1ede6cc5bd95fdf2e414eea706b091\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6195\",\n    \"triggerID\" : \"2e89b137fc1ede6cc5bd95fdf2e414eea706b091\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"2e89b137fc1ede6cc5bd95fdf2e414eea706b091\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6196\",\n    \"triggerID\" : \"1047494529\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"2e89b137fc1ede6cc5bd95fdf2e414eea706b091\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6195\",\n    \"triggerID\" : \"1047494529\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"96cbbb8e39d47a513d2ad5c0a43ffa06d249f1f2\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6271\",\n    \"triggerID\" : \"96cbbb8e39d47a513d2ad5c0a43ffa06d249f1f2\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"96cbbb8e39d47a513d2ad5c0a43ffa06d249f1f2\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6272\",\n    \"triggerID\" : \"1049827248\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"96cbbb8e39d47a513d2ad5c0a43ffa06d249f1f2\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6271\",\n    \"triggerID\" : \"1049827248\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"96cbbb8e39d47a513d2ad5c0a43ffa06d249f1f2\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6299\",\n    \"triggerID\" : \"1050610982\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"8120f64681ac4e42a075d2cc04b036f737622ccd\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6388\",\n    \"triggerID\" : \"8120f64681ac4e42a075d2cc04b036f737622ccd\",\n    \"triggerType\" : \"PUSH\"\n  }, {\n    \"hash\" : \"8120f64681ac4e42a075d2cc04b036f737622ccd\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6390\",\n    \"triggerID\" : \"1054218095\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"8120f64681ac4e42a075d2cc04b036f737622ccd\",\n    \"status\" : \"DELETED\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6388\",\n    \"triggerID\" : \"1054218095\",\n    \"triggerType\" : \"MANUAL\"\n  }, {\n    \"hash\" : \"3340d3ac9a0d00b0f217a0dffc63b24960f39904\",\n    \"status\" : \"SUCCESS\",\n    \"url\" : \"https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6429\",\n    \"triggerID\" : \"3340d3ac9a0d00b0f217a0dffc63b24960f39904\",\n    \"triggerType\" : \"PUSH\"\n  } ]\n}-->\n## CI report:\n\n* 3340d3ac9a0d00b0f217a0dffc63b24960f39904 Azure: [SUCCESS](https://dev.azure.com/apache-hudi-ci-org/785b6ef4-2f42-4a89-8f0e-5f0d7039a0cc/_build/results?buildId=6429) \n\n<details>\n<summary>Bot commands</summary>\n  @hudi-bot supports the following commands:\n\n - `@hudi-bot run azure` re-run the last Azure build\n</details>","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055257720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055290081","html_url":"https://github.com/apache/hudi/pull/4489#issuecomment-1055290081","issue_url":"https://api.github.com/repos/apache/hudi/issues/4489","id":1055290081,"node_id":"IC_kwDOBI7nWM4-5nLh","user":{"login":"XuQianJin-Stars","id":10494131,"node_id":"MDQ6VXNlcjEwNDk0MTMx","avatar_url":"https://avatars.githubusercontent.com/u/10494131?v=4","gravatar_id":"","url":"https://api.github.com/users/XuQianJin-Stars","html_url":"https://github.com/XuQianJin-Stars","followers_url":"https://api.github.com/users/XuQianJin-Stars/followers","following_url":"https://api.github.com/users/XuQianJin-Stars/following{/other_user}","gists_url":"https://api.github.com/users/XuQianJin-Stars/gists{/gist_id}","starred_url":"https://api.github.com/users/XuQianJin-Stars/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XuQianJin-Stars/subscriptions","organizations_url":"https://api.github.com/users/XuQianJin-Stars/orgs","repos_url":"https://api.github.com/users/XuQianJin-Stars/repos","events_url":"https://api.github.com/users/XuQianJin-Stars/events{/privacy}","received_events_url":"https://api.github.com/users/XuQianJin-Stars/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T10:43:55Z","updated_at":"2022-03-01T10:43:55Z","author_association":"CONTRIBUTOR","body":"hi @nsivabalan  I have updated this PR. ","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055290081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055367371","html_url":"https://github.com/apache/hudi/pull/4909#issuecomment-1055367371","issue_url":"https://api.github.com/repos/apache/hudi/issues/4909","id":1055367371,"node_id":"IC_kwDOBI7nWM4-56DL","user":{"login":"cuibo01","id":36881649,"node_id":"MDQ6VXNlcjM2ODgxNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/36881649?v=4","gravatar_id":"","url":"https://api.github.com/users/cuibo01","html_url":"https://github.com/cuibo01","followers_url":"https://api.github.com/users/cuibo01/followers","following_url":"https://api.github.com/users/cuibo01/following{/other_user}","gists_url":"https://api.github.com/users/cuibo01/gists{/gist_id}","starred_url":"https://api.github.com/users/cuibo01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuibo01/subscriptions","organizations_url":"https://api.github.com/users/cuibo01/orgs","repos_url":"https://api.github.com/users/cuibo01/repos","events_url":"https://api.github.com/users/cuibo01/events{/privacy}","received_events_url":"https://api.github.com/users/cuibo01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T12:03:48Z","updated_at":"2022-03-01T12:03:48Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055367371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055443733","html_url":"https://github.com/apache/hudi/pull/4909#issuecomment-1055443733","issue_url":"https://api.github.com/repos/apache/hudi/issues/4909","id":1055443733,"node_id":"IC_kwDOBI7nWM4-6MsV","user":{"login":"cuibo01","id":36881649,"node_id":"MDQ6VXNlcjM2ODgxNjQ5","avatar_url":"https://avatars.githubusercontent.com/u/36881649?v=4","gravatar_id":"","url":"https://api.github.com/users/cuibo01","html_url":"https://github.com/cuibo01","followers_url":"https://api.github.com/users/cuibo01/followers","following_url":"https://api.github.com/users/cuibo01/following{/other_user}","gists_url":"https://api.github.com/users/cuibo01/gists{/gist_id}","starred_url":"https://api.github.com/users/cuibo01/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuibo01/subscriptions","organizations_url":"https://api.github.com/users/cuibo01/orgs","repos_url":"https://api.github.com/users/cuibo01/repos","events_url":"https://api.github.com/users/cuibo01/events{/privacy}","received_events_url":"https://api.github.com/users/cuibo01/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T13:28:32Z","updated_at":"2022-03-01T13:28:32Z","author_association":"CONTRIBUTOR","body":"@hudi-bot run azure","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055443733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055454800","html_url":"https://github.com/apache/hudi/pull/4925#issuecomment-1055454800","issue_url":"https://api.github.com/repos/apache/hudi/issues/4925","id":1055454800,"node_id":"IC_kwDOBI7nWM4-6PZQ","user":{"login":"watermelon12138","id":49849410,"node_id":"MDQ6VXNlcjQ5ODQ5NDEw","avatar_url":"https://avatars.githubusercontent.com/u/49849410?v=4","gravatar_id":"","url":"https://api.github.com/users/watermelon12138","html_url":"https://github.com/watermelon12138","followers_url":"https://api.github.com/users/watermelon12138/followers","following_url":"https://api.github.com/users/watermelon12138/following{/other_user}","gists_url":"https://api.github.com/users/watermelon12138/gists{/gist_id}","starred_url":"https://api.github.com/users/watermelon12138/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/watermelon12138/subscriptions","organizations_url":"https://api.github.com/users/watermelon12138/orgs","repos_url":"https://api.github.com/users/watermelon12138/repos","events_url":"https://api.github.com/users/watermelon12138/events{/privacy}","received_events_url":"https://api.github.com/users/watermelon12138/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-01T13:41:49Z","updated_at":"2022-03-01T13:41:49Z","author_association":"CONTRIBUTOR","body":"> One high level question, is there any limitation or pre requisite in terms of different schemas from different source topics that users should be aware of when using this new feature? What happens when one source schema has few fields which are not present in second source schema and so on. Does that lead to data loss? How are we handling that?\r\n@pratyakshsharma \r\nGood question! This new feature is designed to support the service scenario in which multiple sources are injected to one sink table. When the schemas of multiple sources are inconsistent, we must configure the independent schema and transformer for each source to convert the schema of source to the schema of sink table so that source data can be written to the sink table. For example, We can configure hoodie.deltastreamer.schemaprovider.source.schema.file or hoodie.deltastreamer.source.schemaProviderClassName to specify the schema of each source, and then configure hoodie.deltastreamer.source.transformerClassNames or hoodie.deltastreamer.transformer.sql to convert the schema of source to the schema of sink table. I highly recommend the hoodie.deltastreamer.transformer.sql configuration, which can associate source data with Hive tables, for example, join. The preceding method is helpful for resolving schema inconsistency issues. I look forward to hearing from you.","reactions":{"url":"https://api.github.com/repos/apache/hudi/issues/comments/1055454800/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]