[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447533448","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-447533448","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":447533448,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzUzMzQ0OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-15T03:29:23Z","updated_at":"2018-12-15T03:29:23Z","author_association":"CONTRIBUTOR","body":"序列化和反序列化指的是pb request/response么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447533448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447547979","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-447547979","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":447547979,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzU0Nzk3OQ==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-15T08:16:26Z","updated_at":"2018-12-15T08:16:26Z","author_association":"NONE","body":"@jamesge 是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447547979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447558359","html_url":"https://github.com/apache/brpc/issues/572#issuecomment-447558359","issue_url":"https://api.github.com/repos/apache/brpc/issues/572","id":447558359,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzU1ODM1OQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-12-15T10:36:18Z","updated_at":"2018-12-15T10:36:18Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447558359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447621869","html_url":"https://github.com/apache/brpc/issues/598#issuecomment-447621869","issue_url":"https://api.github.com/repos/apache/brpc/issues/598","id":447621869,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzYyMTg2OQ==","user":{"login":"zyctree","id":17808052,"node_id":"MDQ6VXNlcjE3ODA4MDUy","avatar_url":"https://avatars.githubusercontent.com/u/17808052?v=4","gravatar_id":"","url":"https://api.github.com/users/zyctree","html_url":"https://github.com/zyctree","followers_url":"https://api.github.com/users/zyctree/followers","following_url":"https://api.github.com/users/zyctree/following{/other_user}","gists_url":"https://api.github.com/users/zyctree/gists{/gist_id}","starred_url":"https://api.github.com/users/zyctree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyctree/subscriptions","organizations_url":"https://api.github.com/users/zyctree/orgs","repos_url":"https://api.github.com/users/zyctree/repos","events_url":"https://api.github.com/users/zyctree/events{/privacy}","received_events_url":"https://api.github.com/users/zyctree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-16T06:54:06Z","updated_at":"2018-12-16T06:54:06Z","author_association":"CONTRIBUTOR","body":"#599 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447621869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447649736","html_url":"https://github.com/apache/brpc/issues/600#issuecomment-447649736","issue_url":"https://api.github.com/repos/apache/brpc/issues/600","id":447649736,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzY0OTczNg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-16T15:00:22Z","updated_at":"2018-12-16T15:00:22Z","author_association":"CONTRIBUTOR","body":"这里没有限制，并且pb 2.x中的repeated message是和map二进制兼容的。这里的coredump可能是其他原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447649736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447698773","html_url":"https://github.com/apache/brpc/issues/600#issuecomment-447698773","issue_url":"https://api.github.com/repos/apache/brpc/issues/600","id":447698773,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzY5ODc3Mw==","user":{"login":"qqsun8819","id":1409644,"node_id":"MDQ6VXNlcjE0MDk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1409644?v=4","gravatar_id":"","url":"https://api.github.com/users/qqsun8819","html_url":"https://github.com/qqsun8819","followers_url":"https://api.github.com/users/qqsun8819/followers","following_url":"https://api.github.com/users/qqsun8819/following{/other_user}","gists_url":"https://api.github.com/users/qqsun8819/gists{/gist_id}","starred_url":"https://api.github.com/users/qqsun8819/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qqsun8819/subscriptions","organizations_url":"https://api.github.com/users/qqsun8819/orgs","repos_url":"https://api.github.com/users/qqsun8819/repos","events_url":"https://api.github.com/users/qqsun8819/events{/privacy}","received_events_url":"https://api.github.com/users/qqsun8819/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-17T01:46:27Z","updated_at":"2018-12-17T01:46:27Z","author_association":"NONE","body":"谢谢 @jamesge 的回复 。我在做的事情是把brpc做为一个新的protocol接入tensorflow，目前tensorflow的so里面打入了grpc，我把brpc打进去以后 ，我怀疑是哪里起了冲突，因为把brpc的库链接进去以后 grpc也跑不过会出一样的core，而把brpc的库从tf的so中链接去掉，就没问题。你有没有什么提示呢，比如pb 哪里有什么 全局的东西 会导致此类问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447698773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447710383","html_url":"https://github.com/apache/brpc/issues/600#issuecomment-447710383","issue_url":"https://api.github.com/repos/apache/brpc/issues/600","id":447710383,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0NzcxMDM4Mw==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-17T03:16:19Z","updated_at":"2018-12-17T03:16:19Z","author_association":"MEMBER","body":"这个是因为_pywrap_tensorflow_internal(由于依赖了brpc)引入了protobuf的符号，和tensorflow_framework.so里面有符号冲突， 这个需要brpc里面都依赖protobuf_headers, 你可以先打一个bazel patch来解决这个问题.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447710383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447752291","html_url":"https://github.com/apache/brpc/issues/600#issuecomment-447752291","issue_url":"https://api.github.com/repos/apache/brpc/issues/600","id":447752291,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Nzc1MjI5MQ==","user":{"login":"qqsun8819","id":1409644,"node_id":"MDQ6VXNlcjE0MDk2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1409644?v=4","gravatar_id":"","url":"https://api.github.com/users/qqsun8819","html_url":"https://github.com/qqsun8819","followers_url":"https://api.github.com/users/qqsun8819/followers","following_url":"https://api.github.com/users/qqsun8819/following{/other_user}","gists_url":"https://api.github.com/users/qqsun8819/gists{/gist_id}","starred_url":"https://api.github.com/users/qqsun8819/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/qqsun8819/subscriptions","organizations_url":"https://api.github.com/users/qqsun8819/orgs","repos_url":"https://api.github.com/users/qqsun8819/repos","events_url":"https://api.github.com/users/qqsun8819/events{/privacy}","received_events_url":"https://api.github.com/users/qqsun8819/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-17T07:50:47Z","updated_at":"2018-12-17T07:50:47Z","author_association":"NONE","body":"@chenzhangyi  谢谢回复 ，原因 找到了，是mcpack 中链接的protoc_lib 与grpc中的冲突，改此为probobuf_headers后问题解决了。目前是通过对bazel上打一个patch来解决 ，你觉得 有没有可能加一个select条件来控制这个，这样brpc以bazel形式加入其它项目 的时候 就可以通过配置来解决 ，如果你觉得 可行， 我可以提一个PR ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/447752291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448069982","html_url":"https://github.com/apache/brpc/issues/535#issuecomment-448069982","issue_url":"https://api.github.com/repos/apache/brpc/issues/535","id":448069982,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODA2OTk4Mg==","user":{"login":"feng-y","id":1547384,"node_id":"MDQ6VXNlcjE1NDczODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1547384?v=4","gravatar_id":"","url":"https://api.github.com/users/feng-y","html_url":"https://github.com/feng-y","followers_url":"https://api.github.com/users/feng-y/followers","following_url":"https://api.github.com/users/feng-y/following{/other_user}","gists_url":"https://api.github.com/users/feng-y/gists{/gist_id}","starred_url":"https://api.github.com/users/feng-y/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feng-y/subscriptions","organizations_url":"https://api.github.com/users/feng-y/orgs","repos_url":"https://api.github.com/users/feng-y/repos","events_url":"https://api.github.com/users/feng-y/events{/privacy}","received_events_url":"https://api.github.com/users/feng-y/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-18T02:07:55Z","updated_at":"2018-12-18T02:07:55Z","author_association":"NONE","body":"这里是每个pv自己申请一个arena, pb 的message从这个arena上分配，pv 结束后再回收这个arena么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448069982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448113770","html_url":"https://github.com/apache/brpc/pull/593#issuecomment-448113770","issue_url":"https://api.github.com/repos/apache/brpc/issues/593","id":448113770,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODExMzc3MA==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-18T06:41:13Z","updated_at":"2018-12-18T06:41:13Z","author_association":"NONE","body":"什么时候能合入版本中呀？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448113770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448140096","html_url":"https://github.com/apache/brpc/issues/588#issuecomment-448140096","issue_url":"https://api.github.com/repos/apache/brpc/issues/588","id":448140096,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODE0MDA5Ng==","user":{"login":"niukuo","id":6831097,"node_id":"MDQ6VXNlcjY4MzEwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6831097?v=4","gravatar_id":"","url":"https://api.github.com/users/niukuo","html_url":"https://github.com/niukuo","followers_url":"https://api.github.com/users/niukuo/followers","following_url":"https://api.github.com/users/niukuo/following{/other_user}","gists_url":"https://api.github.com/users/niukuo/gists{/gist_id}","starred_url":"https://api.github.com/users/niukuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niukuo/subscriptions","organizations_url":"https://api.github.com/users/niukuo/orgs","repos_url":"https://api.github.com/users/niukuo/repos","events_url":"https://api.github.com/users/niukuo/events{/privacy}","received_events_url":"https://api.github.com/users/niukuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-18T08:39:21Z","updated_at":"2018-12-18T08:41:09Z","author_association":"CONTRIBUTOR","body":"原因找到了，是因为对栈上的对象执行了delete操作。\r\n猜测是因为jemalloc将部分申请、释放内存的动作暂存在了thread cache中，线程退出时才归还到全局内存池中，触发crash。\r\nbrpc 链接 jemalloc 并不是crash的原因。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448140096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448142463","html_url":"https://github.com/apache/brpc/pull/599#issuecomment-448142463","issue_url":"https://api.github.com/repos/apache/brpc/issues/599","id":448142463,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODE0MjQ2Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-18T08:47:26Z","updated_at":"2018-12-18T08:47:26Z","author_association":"CONTRIBUTOR","body":"你这个改法是不是只能适用于新版本bazel？我看官方的建议是“If you have the old file and want to support multiple versions of bazel - add the line import %workspace%/tools/bazel.rc at the top of your new .bazelrc file.”","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448142463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448443122","html_url":"https://github.com/apache/brpc/pull/593#issuecomment-448443122","issue_url":"https://api.github.com/repos/apache/brpc/issues/593","id":448443122,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ0MzEyMg==","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T02:07:00Z","updated_at":"2018-12-19T02:07:00Z","author_association":"NONE","body":"@jamesge 辛苦 再帮忙CR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448443122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448458189","html_url":"https://github.com/apache/brpc/issues/601#issuecomment-448458189","issue_url":"https://api.github.com/repos/apache/brpc/issues/601","id":448458189,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ1ODE4OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T03:34:22Z","updated_at":"2018-12-19T03:34:22Z","author_association":"CONTRIBUTOR","body":"没什么问题，这和socketid的分配方式有关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448458189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448459025","html_url":"https://github.com/apache/brpc/issues/588#issuecomment-448459025","issue_url":"https://api.github.com/repos/apache/brpc/issues/588","id":448459025,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ1OTAyNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T03:40:09Z","updated_at":"2018-12-19T03:40:09Z","author_association":"CONTRIBUTOR","body":"这类问题可以看看跑asan是否能报出来。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448459025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448459464","html_url":"https://github.com/apache/brpc/issues/588#issuecomment-448459464","issue_url":"https://api.github.com/repos/apache/brpc/issues/588","id":448459464,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ1OTQ2NA==","user":{"login":"niukuo","id":6831097,"node_id":"MDQ6VXNlcjY4MzEwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6831097?v=4","gravatar_id":"","url":"https://api.github.com/users/niukuo","html_url":"https://github.com/niukuo","followers_url":"https://api.github.com/users/niukuo/followers","following_url":"https://api.github.com/users/niukuo/following{/other_user}","gists_url":"https://api.github.com/users/niukuo/gists{/gist_id}","starred_url":"https://api.github.com/users/niukuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niukuo/subscriptions","organizations_url":"https://api.github.com/users/niukuo/orgs","repos_url":"https://api.github.com/users/niukuo/repos","events_url":"https://api.github.com/users/niukuo/events{/privacy}","received_events_url":"https://api.github.com/users/niukuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T03:43:06Z","updated_at":"2018-12-19T03:43:06Z","author_association":"CONTRIBUTOR","body":"> 这类问题可以看看跑asan是否能报出来。\r\n\r\n恩 这个是在链接了tcmalloc之后发现的 tcmalloc在删除栈上的对象时候会立即crash","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448459464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448481186","html_url":"https://github.com/apache/brpc/issues/602#issuecomment-448481186","issue_url":"https://api.github.com/repos/apache/brpc/issues/602","id":448481186,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ4MTE4Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T06:11:12Z","updated_at":"2018-12-19T06:11:12Z","author_association":"CONTRIBUTOR","body":"建议跑一下asan。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448481186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448483086","html_url":"https://github.com/apache/brpc/issues/602#issuecomment-448483086","issue_url":"https://api.github.com/repos/apache/brpc/issues/602","id":448483086,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODQ4MzA4Ng==","user":{"login":"cxxcunow","id":30883187,"node_id":"MDQ6VXNlcjMwODgzMTg3","avatar_url":"https://avatars.githubusercontent.com/u/30883187?v=4","gravatar_id":"","url":"https://api.github.com/users/cxxcunow","html_url":"https://github.com/cxxcunow","followers_url":"https://api.github.com/users/cxxcunow/followers","following_url":"https://api.github.com/users/cxxcunow/following{/other_user}","gists_url":"https://api.github.com/users/cxxcunow/gists{/gist_id}","starred_url":"https://api.github.com/users/cxxcunow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cxxcunow/subscriptions","organizations_url":"https://api.github.com/users/cxxcunow/orgs","repos_url":"https://api.github.com/users/cxxcunow/repos","events_url":"https://api.github.com/users/cxxcunow/events{/privacy}","received_events_url":"https://api.github.com/users/cxxcunow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T06:21:47Z","updated_at":"2018-12-19T06:21:47Z","author_association":"NONE","body":">           建议跑一下asan。\r\n我部署的环境是： 本端---->brpc server1 ---->brpc client2--->远端. 在server1 处发现了这个问题，加了log发现server1在调用回调函数之前，sock已经被释放，释放的路径是Controller::EndRPC ----Controller::Call::OnComplete 这里会reset掉。 \r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448483086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448575283","html_url":"https://github.com/apache/brpc/pull/599#issuecomment-448575283","issue_url":"https://api.github.com/repos/apache/brpc/issues/599","id":448575283,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODU3NTI4Mw==","user":{"login":"zyctree","id":17808052,"node_id":"MDQ6VXNlcjE3ODA4MDUy","avatar_url":"https://avatars.githubusercontent.com/u/17808052?v=4","gravatar_id":"","url":"https://api.github.com/users/zyctree","html_url":"https://github.com/zyctree","followers_url":"https://api.github.com/users/zyctree/followers","following_url":"https://api.github.com/users/zyctree/following{/other_user}","gists_url":"https://api.github.com/users/zyctree/gists{/gist_id}","starred_url":"https://api.github.com/users/zyctree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyctree/subscriptions","organizations_url":"https://api.github.com/users/zyctree/orgs","repos_url":"https://api.github.com/users/zyctree/repos","events_url":"https://api.github.com/users/zyctree/events{/privacy}","received_events_url":"https://api.github.com/users/zyctree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T12:19:15Z","updated_at":"2018-12-19T12:19:15Z","author_association":"CONTRIBUTOR","body":"travis ci 用的 bazel_0.8.1 没问题,  0.8.1~0.18.0之间的版本虽然没测过, 但也应该没问题\r\n文中说了 multiple versions, 觉得只有当有多个 rc 文件时才有这问题\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448575283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448579238","html_url":"https://github.com/apache/brpc/issues/574#issuecomment-448579238","issue_url":"https://api.github.com/repos/apache/brpc/issues/574","id":448579238,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODU3OTIzOA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-12-19T12:31:14Z","updated_at":"2018-12-19T12:31:14Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448579238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448861339","html_url":"https://github.com/apache/brpc/issues/576#issuecomment-448861339","issue_url":"https://api.github.com/repos/apache/brpc/issues/576","id":448861339,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODg2MTMzOQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2018-12-20T04:20:11Z","updated_at":"2018-12-20T04:20:11Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448861339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448919272","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-448919272","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":448919272,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0ODkxOTI3Mg==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-20T08:46:26Z","updated_at":"2018-12-20T08:46:26Z","author_association":"NONE","body":"@jamesge 通过查看机器秒级监控，发现当时cpu被打满了，所以导致序列化、反序列化耗时异常，进而导致超时，不确定是不是和brpc内部的spin lock有关，之前我们有遇到过tcmalloc中的spin lock导致cpu打满的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/448919272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449241053","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-449241053","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":449241053,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0MTA1Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:15:29Z","updated_at":"2018-12-21T04:15:29Z","author_association":"CONTRIBUTOR","body":"只有bthread在一个自增version处用了spinlock，其他地方都没用。看起来也和pb序列化没什么关系。可以尝试写一个脚本在cpu占用率很高时perf record，然后看看到底是什么函数。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449241053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449243680","html_url":"https://github.com/apache/brpc/issues/603#issuecomment-449243680","issue_url":"https://api.github.com/repos/apache/brpc/issues/603","id":449243680,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0MzY4MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:25:33Z","updated_at":"2018-12-21T04:25:33Z","author_association":"CONTRIBUTOR","body":"https://github.com/brpc/brpc/blob/master/src/brpc/controller.h#L194","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449243680/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449243819","html_url":"https://github.com/apache/brpc/issues/605#issuecomment-449243819","issue_url":"https://api.github.com/repos/apache/brpc/issues/605","id":449243819,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0MzgxOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:26:04Z","updated_at":"2018-12-21T04:26:04Z","author_association":"CONTRIBUTOR","body":"就是常规的swap语意","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449243819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449244358","html_url":"https://github.com/apache/brpc/issues/604#issuecomment-449244358","issue_url":"https://api.github.com/repos/apache/brpc/issues/604","id":449244358,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0NDM1OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:27:57Z","updated_at":"2018-12-21T04:27:57Z","author_association":"CONTRIBUTOR","body":"建议用其他协议。如果必须用这个协议的话，需要找百度内部同学debug","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449244358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449244709","html_url":"https://github.com/apache/brpc/issues/602#issuecomment-449244709","issue_url":"https://api.github.com/repos/apache/brpc/issues/602","id":449244709,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0NDcwOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:29:24Z","updated_at":"2018-12-21T04:29:24Z","author_association":"CONTRIBUTOR","body":"server1和client2用了同一个controller么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449244709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449245242","html_url":"https://github.com/apache/brpc/issues/597#issuecomment-449245242","issue_url":"https://api.github.com/repos/apache/brpc/issues/597","id":449245242,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTI0NTI0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T04:31:28Z","updated_at":"2018-12-21T04:31:28Z","author_association":"CONTRIBUTOR","body":"这里的cpu使用高是指被访问的server进程占用的cpu高么？还是这个py client的cpu高？有多高","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449245242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449359970","html_url":"https://github.com/apache/brpc/issues/603#issuecomment-449359970","issue_url":"https://api.github.com/repos/apache/brpc/issues/603","id":449359970,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTM1OTk3MA==","user":{"login":"athree","id":10734542,"node_id":"MDQ6VXNlcjEwNzM0NTQy","avatar_url":"https://avatars.githubusercontent.com/u/10734542?v=4","gravatar_id":"","url":"https://api.github.com/users/athree","html_url":"https://github.com/athree","followers_url":"https://api.github.com/users/athree/followers","following_url":"https://api.github.com/users/athree/following{/other_user}","gists_url":"https://api.github.com/users/athree/gists{/gist_id}","starred_url":"https://api.github.com/users/athree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athree/subscriptions","organizations_url":"https://api.github.com/users/athree/orgs","repos_url":"https://api.github.com/users/athree/repos","events_url":"https://api.github.com/users/athree/events{/privacy}","received_events_url":"https://api.github.com/users/athree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T11:07:39Z","updated_at":"2018-12-21T11:07:39Z","author_association":"NONE","body":"https://github.com/brpc/brpc/blob/master/src/brpc/socket.cpp#562，你好可能我没表述清楚，你说的这个接口我类似找到了这个实现，对于三次握手的server端来说，设置了socket的选项后，就污染了所有从这个端口接入的链接，局限性太大！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449359970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449363662","html_url":"https://github.com/apache/brpc/issues/603#issuecomment-449363662","issue_url":"https://api.github.com/repos/apache/brpc/issues/603","id":449363662,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTM2MzY2Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-21T11:24:40Z","updated_at":"2018-12-21T11:25:11Z","author_association":"CONTRIBUTOR","body":"brpc提供的接口只影响client发出rpc的那个链接的fd，不是server端用于accept的fd","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449363662/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449538804","html_url":"https://github.com/apache/brpc/issues/603#issuecomment-449538804","issue_url":"https://api.github.com/repos/apache/brpc/issues/603","id":449538804,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTUzODgwNA==","user":{"login":"athree","id":10734542,"node_id":"MDQ6VXNlcjEwNzM0NTQy","avatar_url":"https://avatars.githubusercontent.com/u/10734542?v=4","gravatar_id":"","url":"https://api.github.com/users/athree","html_url":"https://github.com/athree","followers_url":"https://api.github.com/users/athree/followers","following_url":"https://api.github.com/users/athree/following{/other_user}","gists_url":"https://api.github.com/users/athree/gists{/gist_id}","starred_url":"https://api.github.com/users/athree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/athree/subscriptions","organizations_url":"https://api.github.com/users/athree/orgs","repos_url":"https://api.github.com/users/athree/repos","events_url":"https://api.github.com/users/athree/events{/privacy}","received_events_url":"https://api.github.com/users/athree/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-22T02:28:50Z","updated_at":"2018-12-22T02:28:50Z","author_association":"NONE","body":"那server端是否有qos类似的接口呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449538804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449688381","html_url":"https://github.com/apache/brpc/issues/603#issuecomment-449688381","issue_url":"https://api.github.com/repos/apache/brpc/issues/603","id":449688381,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTY4ODM4MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-24T05:36:20Z","updated_at":"2018-12-24T05:36:20Z","author_association":"CONTRIBUTOR","body":"没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449688381/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449688445","html_url":"https://github.com/apache/brpc/issues/606#issuecomment-449688445","issue_url":"https://api.github.com/repos/apache/brpc/issues/606","id":449688445,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0OTY4ODQ0NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-24T05:37:21Z","updated_at":"2018-12-24T05:37:21Z","author_association":"CONTRIBUTOR","body":"不能保证。此种情况下应扩容或解决代码问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/449688445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450073604","html_url":"https://github.com/apache/brpc/issues/607#issuecomment-450073604","issue_url":"https://api.github.com/repos/apache/brpc/issues/607","id":450073604,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDA3MzYwNA==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T04:49:43Z","updated_at":"2018-12-27T04:49:43Z","author_association":"CONTRIBUTOR","body":"能提供一些线索吗，我们可以配合做排查","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450073604/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450075346","html_url":"https://github.com/apache/brpc/issues/607#issuecomment-450075346","issue_url":"https://api.github.com/repos/apache/brpc/issues/607","id":450075346,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDA3NTM0Ng==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T05:07:16Z","updated_at":"2018-12-27T05:07:16Z","author_association":"CONTRIBUTOR","body":"gdb attach 上看了一把，大量线程在锁等待\r\n```\r\n 44   Thread 0x7f3a477c0700 (LWP 3308518) \"bgkv\" 0x00007f3aac240d9b in recv () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  43   Thread 0x7f3a469ff700 (LWP 3308519) \"bgkv\" 0x00007f3aab7185b9 in syscall () from /opt/tiger/bytegraph/bgkv/lib/libc.so.6\r\n  42   Thread 0x7f3a461fe700 (LWP 3308520) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  41   Thread 0x7f3a459fd700 (LWP 3308521) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  40   Thread 0x7f3a451fc700 (LWP 3308522) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  39   Thread 0x7f3a449fb700 (LWP 3308523) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  38   Thread 0x7f3a441fa700 (LWP 3308524) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  37   Thread 0x7f3a435f9700 (LWP 3308525) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  36   Thread 0x7f3a429ff700 (LWP 3308526) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  35   Thread 0x7f3a41bff700 (LWP 3308527) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  34   Thread 0x7f3a413fe700 (LWP 3308528) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  33   Thread 0x7f3a3fdff700 (LWP 3308529) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  32   Thread 0x7f3a3f5fe700 (LWP 3308530) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  31   Thread 0x7f3a3edfd700 (LWP 3308531) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  30   Thread 0x7f3a3e1fd700 (LWP 3308532) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  29   Thread 0x7f3a3d9fc700 (LWP 3308533) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  28   Thread 0x7f3a3cdfc700 (LWP 3308534) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  27   Thread 0x7f3a3c5fb700 (LWP 3308535) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  26   Thread 0x7f3a3b5ff700 (LWP 3308536) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  25   Thread 0x7f3a3adfe700 (LWP 3308537) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  24   Thread 0x7f3a39dff700 (LWP 3308538) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  23   Thread 0x7f3a395fe700 (LWP 3308539) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  22   Thread 0x7f3a38dfd700 (LWP 3308540) \"bgkv\" 0x00007f3aab713bfd in posix_fadvise64 () from /opt/tiger/bytegraph/bgkv/lib/libc.so.6\r\n  21   Thread 0x7f3a385fc700 (LWP 3308541) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  20   Thread 0x7f3a37200700 (LWP 3308542) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  19   Thread 0x7f3a369ff700 (LWP 3308543) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  18   Thread 0x7f3a35bff700 (LWP 3308544) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  17   Thread 0x7f3a351fe700 (LWP 3308545) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  16   Thread 0x7f3a343ff700 (LWP 3308546) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  15   Thread 0x7f3a33bfe700 (LWP 3308547) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  14   Thread 0x7f3a32fff700 (LWP 3308548) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  13   Thread 0x7f3a32000700 (LWP 3308549) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  12   Thread 0x7f3a315ff700 (LWP 3308550) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  11   Thread 0x7f3a30dfe700 (LWP 3308551) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n---Type <return> to continue, or q <return> to quit---\r\n  10   Thread 0x7f3a301ff700 (LWP 3308552) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  9    Thread 0x7f3a2f5ff700 (LWP 3308553) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  8    Thread 0x7f3a2e7ff700 (LWP 3308554) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  7    Thread 0x7f3a2dbff700 (LWP 3308555) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  6    Thread 0x7f3a2d3fe700 (LWP 3308556) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  5    Thread 0x7f3a2c5ff700 (LWP 3308557) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  4    Thread 0x7f3a2bdfe700 (LWP 3308558) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  3    Thread 0x7f3a2ae00700 (LWP 3308559) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n  2    Thread 0x7f3a2a5ff700 (LWP 3308560) \"bgkv\" 0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n```\r\n\r\n堆栈基本都是 \r\n```\r\n(gdb) thread 25\r\n[Switching to thread 25 (Thread 0x7f3a3adfe700 (LWP 3308537))]\r\n#0  0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n(gdb) bt\r\n#0  0x00007f3aac23d9cd in pthread_rwlock_wrlock () from /opt/tiger/bytegraph/bgkv/lib/libpthread.so.0\r\n#1  0x00007f3aaee5b92f in Lock (this=<optimized out>) at src/base/mutex.h:248\r\n#2  MutexLock (mu=<optimized out>, this=<optimized out>) at src/base/mutex.h:288\r\n#3  google::LogMessage::Flush (this=0x7f3aaf07decc <google::log_mutex+12>, this@entry=0x7f3a29dfeda0) at src/logging.cc:1280\r\n#4  0x00007f3aaee5ba19 in google::LogMessage::~LogMessage (this=0x7f3a29dfeda0, __in_chrg=<optimized out>) at src/logging.cc:1240\r\n#5  0x00007f3aaee5c99e in google::ErrnoLogMessage::~ErrnoLogMessage (this=0x7f3a29dfeda0, __in_chrg=<optimized out>) at src/logging.cc:1565\r\n#6  0x00007f3aaf626e1c in brpc::policy::ThriftClosure::DoRun (this=this@entry=0x7f39cdd92400) at src/brpc/policy/thrift_protocol.cpp:341\r\n#7  0x00007f3aaf6285d0 in AllowToRun (this=0x7f39cdd92400) at src/brpc/policy/thrift_protocol.cpp:214\r\n#8  ProcessThriftFramedRequestNoExcept (done=0x7f39cdd92400, res=0x7f39cdd92450, req=0x7f39cdd92418, cntl=0x7f39cdd92488, service=0x7f3a46c0d000)\r\n    at src/brpc/policy/thrift_protocol.cpp:401\r\n#9  brpc::policy::ProcessThriftRequest (msg_base=0x7f3a35ecc580) at src/brpc/policy/thrift_protocol.cpp:544\r\n#10 0x00007f3aaf52b1ba in brpc::ProcessInputMessage (void_arg=<optimized out>) at src/brpc/input_messenger.cpp:133\r\n#11 0x00007f3aaf472651 in bthread::TaskGroup::task_runner (skip_remained=<optimized out>) at src/bthread/task_group.cpp:293\r\n#12 0x00007f3aaf4625b1 in bthread_make_fcontext () from /opt/tiger/bytegraph/bgkv/lib/libbrpc.so\r\n#13 0x0000000000000000 in ?? ()\r\n```\r\n\r\n是否是 glog 里有死锁的风险？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450075346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450076386","html_url":"https://github.com/apache/brpc/issues/607#issuecomment-450076386","issue_url":"https://api.github.com/repos/apache/brpc/issues/607","id":450076386,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDA3NjM4Ng==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T05:17:10Z","updated_at":"2018-12-27T05:17:10Z","author_association":"CONTRIBUTOR","body":"请问如何关闭日志呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450076386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450081768","html_url":"https://github.com/apache/brpc/issues/607#issuecomment-450081768","issue_url":"https://api.github.com/repos/apache/brpc/issues/607","id":450081768,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDA4MTc2OA==","user":{"login":"choleraehyq","id":8923413,"node_id":"MDQ6VXNlcjg5MjM0MTM=","avatar_url":"https://avatars.githubusercontent.com/u/8923413?v=4","gravatar_id":"","url":"https://api.github.com/users/choleraehyq","html_url":"https://github.com/choleraehyq","followers_url":"https://api.github.com/users/choleraehyq/followers","following_url":"https://api.github.com/users/choleraehyq/following{/other_user}","gists_url":"https://api.github.com/users/choleraehyq/gists{/gist_id}","starred_url":"https://api.github.com/users/choleraehyq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/choleraehyq/subscriptions","organizations_url":"https://api.github.com/users/choleraehyq/orgs","repos_url":"https://api.github.com/users/choleraehyq/repos","events_url":"https://api.github.com/users/choleraehyq/events{/privacy}","received_events_url":"https://api.github.com/users/choleraehyq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T06:01:05Z","updated_at":"2018-12-27T06:01:05Z","author_association":"CONTRIBUTOR","body":"查了一下，有一个打日志的线程卡在了临界区里的 posix_fadvise 上，似乎是由于 tmpfs 不支持的缘故卡住了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450081768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450160391","html_url":"https://github.com/apache/brpc/issues/609#issuecomment-450160391","issue_url":"https://api.github.com/repos/apache/brpc/issues/609","id":450160391,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDE2MDM5MQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-27T14:29:07Z","updated_at":"2018-12-27T14:29:07Z","author_association":"MEMBER","body":"cmake会自己生成对应的config.h. config_brpc.sh 和 cmake是两条独立的工具链，不存在依赖关系.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450160391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450284540","html_url":"https://github.com/apache/brpc/issues/608#issuecomment-450284540","issue_url":"https://api.github.com/repos/apache/brpc/issues/608","id":450284540,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDI4NDU0MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T03:54:42Z","updated_at":"2018-12-28T03:54:42Z","author_association":"CONTRIBUTOR","body":"ubuntu 18.04下的静态链接确实有这个问题，但原因没有具体看过。其他系统似乎没有发现。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450284540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450284668","html_url":"https://github.com/apache/brpc/issues/607#issuecomment-450284668","issue_url":"https://api.github.com/repos/apache/brpc/issues/607","id":450284668,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDI4NDY2OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T03:56:09Z","updated_at":"2018-12-28T03:56:24Z","author_association":"CONTRIBUTOR","body":"可以检查下glog的配置之类的，看看是否有异步日志之类的选项。glog C++版的质量整体上是比较差的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450284668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450383009","html_url":"https://github.com/apache/brpc/issues/608#issuecomment-450383009","issue_url":"https://api.github.com/repos/apache/brpc/issues/608","id":450383009,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDM4MzAwOQ==","user":{"login":"tigerzhang","id":751815,"node_id":"MDQ6VXNlcjc1MTgxNQ==","avatar_url":"https://avatars.githubusercontent.com/u/751815?v=4","gravatar_id":"","url":"https://api.github.com/users/tigerzhang","html_url":"https://github.com/tigerzhang","followers_url":"https://api.github.com/users/tigerzhang/followers","following_url":"https://api.github.com/users/tigerzhang/following{/other_user}","gists_url":"https://api.github.com/users/tigerzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/tigerzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tigerzhang/subscriptions","organizations_url":"https://api.github.com/users/tigerzhang/orgs","repos_url":"https://api.github.com/users/tigerzhang/repos","events_url":"https://api.github.com/users/tigerzhang/events{/privacy}","received_events_url":"https://api.github.com/users/tigerzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-28T16:06:35Z","updated_at":"2018-12-28T16:06:35Z","author_association":"NONE","body":"OS 换成 Ubuntu 16.04 工作正常，先关闭 issue","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450383009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450456658","html_url":"https://github.com/apache/brpc/issues/609#issuecomment-450456658","issue_url":"https://api.github.com/repos/apache/brpc/issues/609","id":450456658,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ1NjY1OA==","user":{"login":"ReviveChan","id":8264367,"node_id":"MDQ6VXNlcjgyNjQzNjc=","avatar_url":"https://avatars.githubusercontent.com/u/8264367?v=4","gravatar_id":"","url":"https://api.github.com/users/ReviveChan","html_url":"https://github.com/ReviveChan","followers_url":"https://api.github.com/users/ReviveChan/followers","following_url":"https://api.github.com/users/ReviveChan/following{/other_user}","gists_url":"https://api.github.com/users/ReviveChan/gists{/gist_id}","starred_url":"https://api.github.com/users/ReviveChan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ReviveChan/subscriptions","organizations_url":"https://api.github.com/users/ReviveChan/orgs","repos_url":"https://api.github.com/users/ReviveChan/repos","events_url":"https://api.github.com/users/ReviveChan/events{/privacy}","received_events_url":"https://api.github.com/users/ReviveChan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T02:18:06Z","updated_at":"2018-12-29T02:18:06Z","author_association":"NONE","body":"> cmake会自己生成对应的config.h. config_brpc.sh 和 cmake是两条独立的工具链，不存在依赖关系.\r\n\r\n那在使用cmake编译安装brpc后应该怎么在自己的代码中书写依赖呢？\r\n我目前是include了bthread的某个头文件，然后遇到了上面提到的log相关的问题，我自己的代码没有使用cmake","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450456658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450459532","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-450459532","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":450459532,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ1OTUzMg==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T02:47:27Z","updated_at":"2018-12-29T02:47:27Z","author_association":"NONE","body":"将pthread worker从48->16 rpc各项指标的max值均得到大大改善，比如之前反序列化pb的max值100s，调整完之后max值1s，调整前后机器流量不变，cpu利用率基本维持在20%以下，之前使用sofa-pbrpc的时候max值没有1s的情况。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450459532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450459822","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-450459822","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":450459822,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ1OTgyMg==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T02:51:13Z","updated_at":"2018-12-29T02:51:13Z","author_association":"NONE","body":"@jamesge 在线上部署过脚本，没有抓到有用的信息，抓到的栈没有异常，可能和持续时间非常短有关系。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450459822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450467250","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-450467250","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":450467250,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ2NzI1MA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T05:33:05Z","updated_at":"2018-12-29T05:33:05Z","author_association":"CONTRIBUTOR","body":"目前的表现很难用pthread worker从48调整到16来解释。链接tcmalloc或jemalloc了么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450467250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450468518","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-450468518","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":450468518,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ2ODUxOA==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T06:03:15Z","updated_at":"2018-12-29T06:03:15Z","author_association":"NONE","body":"@jamesge  我们有链接jemalloc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450468518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450469105","html_url":"https://github.com/apache/brpc/issues/582#issuecomment-450469105","issue_url":"https://api.github.com/repos/apache/brpc/issues/582","id":450469105,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ2OTEwNQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T06:15:37Z","updated_at":"2018-12-29T06:15:37Z","author_association":"CONTRIBUTOR","body":"有条件的话可以在48个线程的情况下不链接或链tcmalloc看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450469105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450499775","html_url":"https://github.com/apache/brpc/issues/611#issuecomment-450499775","issue_url":"https://api.github.com/repos/apache/brpc/issues/611","id":450499775,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDQ5OTc3NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-12-29T15:21:11Z","updated_at":"2018-12-29T15:21:11Z","author_association":"CONTRIBUTOR","body":"必须得处理回复。一个折衷是把response设置为NULL（不会解析了），并递一个done，其中删除了对应的Controller（和done自己）。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450499775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450784533","html_url":"https://github.com/apache/brpc/issues/612#issuecomment-450784533","issue_url":"https://api.github.com/repos/apache/brpc/issues/612","id":450784533,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDc4NDUzMw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T04:11:52Z","updated_at":"2019-01-02T04:11:52Z","author_association":"CONTRIBUTOR","body":"之所以server端也要有一个done，就是为了让用户在自己的event-loop或thread-pool中调用的，所以这么用是by design的。done里做的事情就是给client发response。这里需要注意的是入业务线程池时，不管是失败(满载了)还是成功，都要调用done。标记失败是调用controller.setfailed。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450784533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450785713","html_url":"https://github.com/apache/brpc/issues/612#issuecomment-450785713","issue_url":"https://api.github.com/repos/apache/brpc/issues/612","id":450785713,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDc4NTcxMw==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T04:30:57Z","updated_at":"2019-01-02T04:30:57Z","author_association":"NONE","body":"@jamesge 非常感谢您的详细解答哈。还有个问题，在自己的业务流程中调用done和在brpc的线程中调用done， 这两者是否会有不一样的地方呢？  brpc框架中socket的收发流程本身很复杂， 在业务自己的线程里调done write socket,  会不会破坏socket的一些逻辑 ？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450785713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450786242","html_url":"https://github.com/apache/brpc/issues/612#issuecomment-450786242","issue_url":"https://api.github.com/repos/apache/brpc/issues/612","id":450786242,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDc4NjI0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T04:39:38Z","updated_at":"2019-01-02T04:39:38Z","author_association":"CONTRIBUTOR","body":"不会，brpc的实现已经考虑了会在用户自己的线程中运行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/450786242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451042866","html_url":"https://github.com/apache/brpc/issues/613#issuecomment-451042866","issue_url":"https://api.github.com/repos/apache/brpc/issues/613","id":451042866,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTA0Mjg2Ng==","user":{"login":"scottzzq","id":1217132,"node_id":"MDQ6VXNlcjEyMTcxMzI=","avatar_url":"https://avatars.githubusercontent.com/u/1217132?v=4","gravatar_id":"","url":"https://api.github.com/users/scottzzq","html_url":"https://github.com/scottzzq","followers_url":"https://api.github.com/users/scottzzq/followers","following_url":"https://api.github.com/users/scottzzq/following{/other_user}","gists_url":"https://api.github.com/users/scottzzq/gists{/gist_id}","starred_url":"https://api.github.com/users/scottzzq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottzzq/subscriptions","organizations_url":"https://api.github.com/users/scottzzq/orgs","repos_url":"https://api.github.com/users/scottzzq/repos","events_url":"https://api.github.com/users/scottzzq/events{/privacy}","received_events_url":"https://api.github.com/users/scottzzq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T02:32:59Z","updated_at":"2019-01-03T02:32:59Z","author_association":"NONE","body":"补充下，线上机器使用64G内存，所以最高涨幅是16G.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451042866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451053207","html_url":"https://github.com/apache/brpc/issues/613#issuecomment-451053207","issue_url":"https://api.github.com/repos/apache/brpc/issues/613","id":451053207,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTA1MzIwNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T04:23:25Z","updated_at":"2019-01-03T04:23:25Z","author_association":"CONTRIBUTOR","body":"看下heap profile吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451053207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451090382","html_url":"https://github.com/apache/brpc/issues/611#issuecomment-451090382","issue_url":"https://api.github.com/repos/apache/brpc/issues/611","id":451090382,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MTA5MDM4Mg==","user":{"login":"BillyJoy","id":5675646,"node_id":"MDQ6VXNlcjU2NzU2NDY=","avatar_url":"https://avatars.githubusercontent.com/u/5675646?v=4","gravatar_id":"","url":"https://api.github.com/users/BillyJoy","html_url":"https://github.com/BillyJoy","followers_url":"https://api.github.com/users/BillyJoy/followers","following_url":"https://api.github.com/users/BillyJoy/following{/other_user}","gists_url":"https://api.github.com/users/BillyJoy/gists{/gist_id}","starred_url":"https://api.github.com/users/BillyJoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BillyJoy/subscriptions","organizations_url":"https://api.github.com/users/BillyJoy/orgs","repos_url":"https://api.github.com/users/BillyJoy/repos","events_url":"https://api.github.com/users/BillyJoy/events{/privacy}","received_events_url":"https://api.github.com/users/BillyJoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-03T09:24:04Z","updated_at":"2019-01-03T09:24:04Z","author_association":"NONE","body":"抱歉这么晚才回复，我这样迂回的处理下吧，把timeout置成-1,然后把那个backup_request_ms也置成-1，这样就没有副作用了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/451090382/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452153334","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452153334","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452153334,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE1MzMzNA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T02:30:46Z","updated_at":"2019-01-08T02:30:46Z","author_association":"CONTRIBUTOR","body":"1. serverB和clientB都用异步。\r\n2. 不支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452153334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452154395","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452154395","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452154395,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE1NDM5NQ==","user":{"login":"deardeng","id":3887565,"node_id":"MDQ6VXNlcjM4ODc1NjU=","avatar_url":"https://avatars.githubusercontent.com/u/3887565?v=4","gravatar_id":"","url":"https://api.github.com/users/deardeng","html_url":"https://github.com/deardeng","followers_url":"https://api.github.com/users/deardeng/followers","following_url":"https://api.github.com/users/deardeng/following{/other_user}","gists_url":"https://api.github.com/users/deardeng/gists{/gist_id}","starred_url":"https://api.github.com/users/deardeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deardeng/subscriptions","organizations_url":"https://api.github.com/users/deardeng/orgs","repos_url":"https://api.github.com/users/deardeng/repos","events_url":"https://api.github.com/users/deardeng/events{/privacy}","received_events_url":"https://api.github.com/users/deardeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T02:36:43Z","updated_at":"2019-01-08T02:36:43Z","author_association":"NONE","body":"@jamesge 那想自己修改brpc，支持2的话，工作量会不会非常大？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452154395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452155191","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452155191","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452155191,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE1NTE5MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T02:41:12Z","updated_at":"2019-01-08T02:41:12Z","author_association":"CONTRIBUTOR","body":"不建议修改。“消息传递”一般并不意味着没有回复，而是会用批量发送来提高吞吐，没有回复必然拥塞。不妨考虑下先用现成的流式系统，也了解下它们的一些实现原理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452155191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452157761","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452157761","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452157761,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE1Nzc2MQ==","user":{"login":"deardeng","id":3887565,"node_id":"MDQ6VXNlcjM4ODc1NjU=","avatar_url":"https://avatars.githubusercontent.com/u/3887565?v=4","gravatar_id":"","url":"https://api.github.com/users/deardeng","html_url":"https://github.com/deardeng","followers_url":"https://api.github.com/users/deardeng/followers","following_url":"https://api.github.com/users/deardeng/following{/other_user}","gists_url":"https://api.github.com/users/deardeng/gists{/gist_id}","starred_url":"https://api.github.com/users/deardeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deardeng/subscriptions","organizations_url":"https://api.github.com/users/deardeng/orgs","repos_url":"https://api.github.com/users/deardeng/repos","events_url":"https://api.github.com/users/deardeng/events{/privacy}","received_events_url":"https://api.github.com/users/deardeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T02:55:51Z","updated_at":"2019-01-08T02:55:51Z","author_association":"NONE","body":"好的，我先用异步模式写个demo测试一下性能。现成的流式系统，大多是java系的，对底层 消息处理 没有brpc中IO处理的这么好。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452157761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452193132","html_url":"https://github.com/apache/brpc/issues/550#issuecomment-452193132","issue_url":"https://api.github.com/repos/apache/brpc/issues/550","id":452193132,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjE5MzEzMg==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-08T06:47:23Z","updated_at":"2019-01-08T06:47:23Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452193132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452667949","html_url":"https://github.com/apache/brpc/issues/617#issuecomment-452667949","issue_url":"https://api.github.com/repos/apache/brpc/issues/617","id":452667949,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY2Nzk0OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-09T11:42:42Z","updated_at":"2019-01-09T11:42:42Z","author_association":"CONTRIBUTOR","body":"wait_for_butex中对这些情况有处理，重点看看应用代码吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452667949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452668137","html_url":"https://github.com/apache/brpc/issues/617#issuecomment-452668137","issue_url":"https://api.github.com/repos/apache/brpc/issues/617","id":452668137,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY2ODEzNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-09T11:43:28Z","updated_at":"2019-01-09T11:43:28Z","author_association":"CONTRIBUTOR","body":"ps：看下有没有自定义timer回调可能会阻塞全局的TimerThread","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452668137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452676714","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452676714","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452676714,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjY3NjcxNA==","user":{"login":"deardeng","id":3887565,"node_id":"MDQ6VXNlcjM4ODc1NjU=","avatar_url":"https://avatars.githubusercontent.com/u/3887565?v=4","gravatar_id":"","url":"https://api.github.com/users/deardeng","html_url":"https://github.com/deardeng","followers_url":"https://api.github.com/users/deardeng/followers","following_url":"https://api.github.com/users/deardeng/following{/other_user}","gists_url":"https://api.github.com/users/deardeng/gists{/gist_id}","starred_url":"https://api.github.com/users/deardeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deardeng/subscriptions","organizations_url":"https://api.github.com/users/deardeng/orgs","repos_url":"https://api.github.com/users/deardeng/repos","events_url":"https://api.github.com/users/deardeng/events{/privacy}","received_events_url":"https://api.github.com/users/deardeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-09T12:16:52Z","updated_at":"2019-01-09T12:16:52Z","author_association":"NONE","body":"@jamesge 请教一下，麻烦帮我看看，照猫画虎写的echo 异步中继服务器代码 有没有问题（按照session_data_and_thread_local 和 asynchronous_echo_c++，改的），希望给些建议，谢谢。\r\n\r\n1. 用session_data_and_thread_local的client->server直接测试qps大约10w多。\r\n2. 用session_data_and_thread_local的client->async_relay->server测得结果只有6.6w左右。\r\n应该是我async_relay的代码写的有问题。请教，怎么改一下\r\n[relay.txt](https://github.com/brpc/brpc/files/2740794/relay.txt)\r\n![question](https://user-images.githubusercontent.com/3887565/50898735-0033ac80-144b-11e9-97a0-ba0c73705ea7.jpg)\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452676714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452936623","html_url":"https://github.com/apache/brpc/issues/617#issuecomment-452936623","issue_url":"https://api.github.com/repos/apache/brpc/issues/617","id":452936623,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MjkzNjYyMw==","user":{"login":"eddie74748","id":10557665,"node_id":"MDQ6VXNlcjEwNTU3NjY1","avatar_url":"https://avatars.githubusercontent.com/u/10557665?v=4","gravatar_id":"","url":"https://api.github.com/users/eddie74748","html_url":"https://github.com/eddie74748","followers_url":"https://api.github.com/users/eddie74748/followers","following_url":"https://api.github.com/users/eddie74748/following{/other_user}","gists_url":"https://api.github.com/users/eddie74748/gists{/gist_id}","starred_url":"https://api.github.com/users/eddie74748/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eddie74748/subscriptions","organizations_url":"https://api.github.com/users/eddie74748/orgs","repos_url":"https://api.github.com/users/eddie74748/repos","events_url":"https://api.github.com/users/eddie74748/events{/privacy}","received_events_url":"https://api.github.com/users/eddie74748/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T01:31:48Z","updated_at":"2019-01-10T01:31:48Z","author_association":"NONE","body":"butex_wait 并没有自定义的回调，只是等待mutex直到有信号或者超时。\r\n目前，设计了一个测试场景。\r\n1. bthread A中调用 butex_wait() 设置1s超时。\r\n2. 修改butex_wait源代码 ：在g->set_remained(wait_for_butex, &&bbw)；之前添加一句：std::this_thread:::sleep_for(2s);如此构造的原因是确保erase_from_butex_and_wakeup在Timer线程中被先执行。\r\n3. A 这个bthread将永远都不会被唤醒。\r\n\r\n这个测试中修改源码当然是不合理的，但是我比较疑惑的是，只要erase_from_butex_and_wakeup这个超时函数在wait_for_butex之前被执行，这个场景就会出现。那么框架是如何保证erase_from_butex_and_wakeup永远不会早于wait_for_butex被执行呢？从可构造测试场景来看，这并不是一个强保证。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452936623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977181","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452977181","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452977181,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mjk3NzE4MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T05:40:13Z","updated_at":"2019-01-10T05:40:13Z","author_association":"CONTRIBUTOR","body":"这是因为这儿的client都是同步压测的，延时高了，在相同的压力线程数下，qps肯定降了，把thread_num调多点试试","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977655","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-452977655","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":452977655,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mjk3NzY1NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T05:43:12Z","updated_at":"2019-01-10T05:43:12Z","author_association":"CONTRIBUTOR","body":"另外这里server逻辑如果就是把收到的请求转发至下游server的话， 没什么必要启动一个线程来做这个事情，直接在service callback中写访问逻辑就行了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977655/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977711","html_url":"https://github.com/apache/brpc/issues/616#issuecomment-452977711","issue_url":"https://api.github.com/repos/apache/brpc/issues/616","id":452977711,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mjk3NzcxMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T05:43:36Z","updated_at":"2019-01-10T05:43:36Z","author_association":"CONTRIBUTOR","body":"不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/452977711/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453015792","html_url":"https://github.com/apache/brpc/issues/615#issuecomment-453015792","issue_url":"https://api.github.com/repos/apache/brpc/issues/615","id":453015792,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzAxNTc5Mg==","user":{"login":"cserken","id":5810937,"node_id":"MDQ6VXNlcjU4MTA5Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/5810937?v=4","gravatar_id":"","url":"https://api.github.com/users/cserken","html_url":"https://github.com/cserken","followers_url":"https://api.github.com/users/cserken/followers","following_url":"https://api.github.com/users/cserken/following{/other_user}","gists_url":"https://api.github.com/users/cserken/gists{/gist_id}","starred_url":"https://api.github.com/users/cserken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cserken/subscriptions","organizations_url":"https://api.github.com/users/cserken/orgs","repos_url":"https://api.github.com/users/cserken/repos","events_url":"https://api.github.com/users/cserken/events{/privacy}","received_events_url":"https://api.github.com/users/cserken/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T08:47:00Z","updated_at":"2019-01-10T08:49:33Z","author_association":"NONE","body":"经过定位，发现应用代码中的发起的一些网络调用有问题，导至brpc的work线程被read调用阻塞了，从而新请求触发max_concurrency错误，同时导致一些连接无法正常关闭而出现了CLOSE_WAIT状态.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453015792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453019103","html_url":"https://github.com/apache/brpc/issues/614#issuecomment-453019103","issue_url":"https://api.github.com/repos/apache/brpc/issues/614","id":453019103,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzAxOTEwMw==","user":{"login":"deardeng","id":3887565,"node_id":"MDQ6VXNlcjM4ODc1NjU=","avatar_url":"https://avatars.githubusercontent.com/u/3887565?v=4","gravatar_id":"","url":"https://api.github.com/users/deardeng","html_url":"https://github.com/deardeng","followers_url":"https://api.github.com/users/deardeng/followers","following_url":"https://api.github.com/users/deardeng/following{/other_user}","gists_url":"https://api.github.com/users/deardeng/gists{/gist_id}","starred_url":"https://api.github.com/users/deardeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deardeng/subscriptions","organizations_url":"https://api.github.com/users/deardeng/orgs","repos_url":"https://api.github.com/users/deardeng/repos","events_url":"https://api.github.com/users/deardeng/events{/privacy}","received_events_url":"https://api.github.com/users/deardeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-10T08:58:29Z","updated_at":"2019-01-10T08:58:29Z","author_association":"NONE","body":"@jamesge  谢谢，ge大，我把client改成异步的，测了一下，qps加上中继没啥变化了。另去掉server的那个开启的thread，中继cpu压力也低了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453019103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453774051","html_url":"https://github.com/apache/brpc/pull/560#issuecomment-453774051","issue_url":"https://api.github.com/repos/apache/brpc/issues/560","id":453774051,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mzc3NDA1MQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-12T19:21:23Z","updated_at":"2019-01-12T19:21:23Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453774051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453774056","html_url":"https://github.com/apache/brpc/issues/575#issuecomment-453774056","issue_url":"https://api.github.com/repos/apache/brpc/issues/575","id":453774056,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mzc3NDA1Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-12T19:21:28Z","updated_at":"2019-01-12T19:21:28Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453774056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453812076","html_url":"https://github.com/apache/brpc/issues/595#issuecomment-453812076","issue_url":"https://api.github.com/repos/apache/brpc/issues/595","id":453812076,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzgxMjA3Ng==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-13T08:41:35Z","updated_at":"2019-01-13T08:41:35Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453812076/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453907354","html_url":"https://github.com/apache/brpc/issues/596#issuecomment-453907354","issue_url":"https://api.github.com/repos/apache/brpc/issues/596","id":453907354,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkwNzM1NA==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T05:51:59Z","updated_at":"2019-01-14T05:51:59Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453907354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453908186","html_url":"https://github.com/apache/brpc/issues/619#issuecomment-453908186","issue_url":"https://api.github.com/repos/apache/brpc/issues/619","id":453908186,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkwODE4Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T06:00:14Z","updated_at":"2019-01-14T06:00:14Z","author_association":"CONTRIBUTOR","body":"线程里创建pa时外面的ppa可能在rpc结束时被析构了。这里需要在外面就用intrusive_ptr，然后拷贝到线程里。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453908186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453909363","html_url":"https://github.com/apache/brpc/pull/618#issuecomment-453909363","issue_url":"https://api.github.com/repos/apache/brpc/issues/618","id":453909363,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkwOTM2Mw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T06:10:55Z","updated_at":"2019-01-14T06:10:55Z","author_association":"MEMBER","body":"The problem here is that we wrote WITH_GLOG as BRPC_WITH_GLOG wrongly in CMakeLists.txt and config.h.in. I will make a new pull request and fix it. Thanks for your contribution and pull request!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453909363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453911160","html_url":"https://github.com/apache/brpc/pull/620#issuecomment-453911160","issue_url":"https://api.github.com/repos/apache/brpc/issues/620","id":453911160,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkxMTE2MA==","user":{"login":"wanglun","id":143647,"node_id":"MDQ6VXNlcjE0MzY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/143647?v=4","gravatar_id":"","url":"https://api.github.com/users/wanglun","html_url":"https://github.com/wanglun","followers_url":"https://api.github.com/users/wanglun/followers","following_url":"https://api.github.com/users/wanglun/following{/other_user}","gists_url":"https://api.github.com/users/wanglun/gists{/gist_id}","starred_url":"https://api.github.com/users/wanglun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wanglun/subscriptions","organizations_url":"https://api.github.com/users/wanglun/orgs","repos_url":"https://api.github.com/users/wanglun/repos","events_url":"https://api.github.com/users/wanglun/events{/privacy}","received_events_url":"https://api.github.com/users/wanglun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T06:26:24Z","updated_at":"2019-01-14T06:26:24Z","author_association":"CONTRIBUTOR","body":"conflicts with [config_brpc.sh](https://github.com/brpc/brpc/blob/1aeef03ce3c23e1f9ced301d52a1ead397157821/config_brpc.sh#L388)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453911160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453919384","html_url":"https://github.com/apache/brpc/pull/620#issuecomment-453919384","issue_url":"https://api.github.com/repos/apache/brpc/issues/620","id":453919384,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkxOTM4NA==","user":{"login":"wanglun","id":143647,"node_id":"MDQ6VXNlcjE0MzY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/143647?v=4","gravatar_id":"","url":"https://api.github.com/users/wanglun","html_url":"https://github.com/wanglun","followers_url":"https://api.github.com/users/wanglun/followers","following_url":"https://api.github.com/users/wanglun/following{/other_user}","gists_url":"https://api.github.com/users/wanglun/gists{/gist_id}","starred_url":"https://api.github.com/users/wanglun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wanglun/subscriptions","organizations_url":"https://api.github.com/users/wanglun/orgs","repos_url":"https://api.github.com/users/wanglun/repos","events_url":"https://api.github.com/users/wanglun/events{/privacy}","received_events_url":"https://api.github.com/users/wanglun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T07:30:12Z","updated_at":"2019-01-14T07:32:39Z","author_association":"CONTRIBUTOR","body":"need to update the document\r\n[compile with cmake](https://github.com/brpc/brpc/blob/master/docs/cn/getting_started.md#compile-brpc-with-cmake)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453919384/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453924546","html_url":"https://github.com/apache/brpc/pull/620#issuecomment-453924546","issue_url":"https://api.github.com/repos/apache/brpc/issues/620","id":453924546,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkyNDU0Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T08:03:55Z","updated_at":"2019-01-14T08:03:55Z","author_association":"MEMBER","body":"thanks for reminding","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453924546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453925741","html_url":"https://github.com/apache/brpc/pull/610#issuecomment-453925741","issue_url":"https://api.github.com/repos/apache/brpc/issues/610","id":453925741,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MzkyNTc0MQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T08:10:24Z","updated_at":"2019-01-14T08:10:24Z","author_association":"CONTRIBUTOR","body":"修改后的意思和原文不一样，所以无法merge。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453925741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453999583","html_url":"https://github.com/apache/brpc/issues/619#issuecomment-453999583","issue_url":"https://api.github.com/repos/apache/brpc/issues/619","id":453999583,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1Mzk5OTU4Mw==","user":{"login":"lzk90s","id":3248466,"node_id":"MDQ6VXNlcjMyNDg0NjY=","avatar_url":"https://avatars.githubusercontent.com/u/3248466?v=4","gravatar_id":"","url":"https://api.github.com/users/lzk90s","html_url":"https://github.com/lzk90s","followers_url":"https://api.github.com/users/lzk90s/followers","following_url":"https://api.github.com/users/lzk90s/following{/other_user}","gists_url":"https://api.github.com/users/lzk90s/gists{/gist_id}","starred_url":"https://api.github.com/users/lzk90s/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lzk90s/subscriptions","organizations_url":"https://api.github.com/users/lzk90s/orgs","repos_url":"https://api.github.com/users/lzk90s/repos","events_url":"https://api.github.com/users/lzk90s/events{/privacy}","received_events_url":"https://api.github.com/users/lzk90s/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-14T13:11:24Z","updated_at":"2019-01-14T13:11:24Z","author_association":"NONE","body":"感谢大佬","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/453999583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454242227","html_url":"https://github.com/apache/brpc/pull/618#issuecomment-454242227","issue_url":"https://api.github.com/repos/apache/brpc/issues/618","id":454242227,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDI0MjIyNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-15T02:14:52Z","updated_at":"2019-01-15T02:14:52Z","author_association":"CONTRIBUTOR","body":"@wanglun Please help to verify that the master head solves the issue. The flag to cmake is still WITH_GLOG (not BRPC_WITH_GLOG)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454242227/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454262178","html_url":"https://github.com/apache/brpc/issues/574#issuecomment-454262178","issue_url":"https://api.github.com/repos/apache/brpc/issues/574","id":454262178,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDI2MjE3OA==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-15T04:18:53Z","updated_at":"2019-01-15T04:18:53Z","author_association":"CONTRIBUTOR","body":"这个issue解决了？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454262178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454432396","html_url":"https://github.com/apache/brpc/pull/618#issuecomment-454432396","issue_url":"https://api.github.com/repos/apache/brpc/issues/618","id":454432396,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDQzMjM5Ng==","user":{"login":"wanglun","id":143647,"node_id":"MDQ6VXNlcjE0MzY0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/143647?v=4","gravatar_id":"","url":"https://api.github.com/users/wanglun","html_url":"https://github.com/wanglun","followers_url":"https://api.github.com/users/wanglun/followers","following_url":"https://api.github.com/users/wanglun/following{/other_user}","gists_url":"https://api.github.com/users/wanglun/gists{/gist_id}","starred_url":"https://api.github.com/users/wanglun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wanglun/subscriptions","organizations_url":"https://api.github.com/users/wanglun/orgs","repos_url":"https://api.github.com/users/wanglun/repos","events_url":"https://api.github.com/users/wanglun/events{/privacy}","received_events_url":"https://api.github.com/users/wanglun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-15T15:27:16Z","updated_at":"2019-01-15T15:27:16Z","author_association":"CONTRIBUTOR","body":"> @wanglun Please help to verify that the master head solves the issue. The flag to cmake is still WITH_GLOG (not BRPC_WITH_GLOG)\r\n\r\nverified, it's OK","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454432396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454698337","html_url":"https://github.com/apache/brpc/issues/225#issuecomment-454698337","issue_url":"https://api.github.com/repos/apache/brpc/issues/225","id":454698337,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NDY5ODMzNw==","user":{"login":"billowqiu","id":720496,"node_id":"MDQ6VXNlcjcyMDQ5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/720496?v=4","gravatar_id":"","url":"https://api.github.com/users/billowqiu","html_url":"https://github.com/billowqiu","followers_url":"https://api.github.com/users/billowqiu/followers","following_url":"https://api.github.com/users/billowqiu/following{/other_user}","gists_url":"https://api.github.com/users/billowqiu/gists{/gist_id}","starred_url":"https://api.github.com/users/billowqiu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/billowqiu/subscriptions","organizations_url":"https://api.github.com/users/billowqiu/orgs","repos_url":"https://api.github.com/users/billowqiu/repos","events_url":"https://api.github.com/users/billowqiu/events{/privacy}","received_events_url":"https://api.github.com/users/billowqiu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-16T08:46:48Z","updated_at":"2019-01-16T08:46:48Z","author_association":"NONE","body":"刚看到这个，https://github.com/baidu/brpc-java","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/454698337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455419089","html_url":"https://github.com/apache/brpc/pull/622#issuecomment-455419089","issue_url":"https://api.github.com/repos/apache/brpc/issues/622","id":455419089,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQxOTA4OQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T03:52:24Z","updated_at":"2019-01-18T03:52:24Z","author_association":"MEMBER","body":"是他们升级了吧，之前的discovery是正常返回的，另外discovery同学昨天说修复的问题和这个有关么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455419089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455438177","html_url":"https://github.com/apache/brpc/issues/600#issuecomment-455438177","issue_url":"https://api.github.com/repos/apache/brpc/issues/600","id":455438177,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTQzODE3Nw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T06:08:10Z","updated_at":"2019-01-18T06:08:10Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455438177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455525715","html_url":"https://github.com/apache/brpc/issues/624#issuecomment-455525715","issue_url":"https://api.github.com/repos/apache/brpc/issues/624","id":455525715,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTUyNTcxNQ==","user":{"login":"niukuo","id":6831097,"node_id":"MDQ6VXNlcjY4MzEwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6831097?v=4","gravatar_id":"","url":"https://api.github.com/users/niukuo","html_url":"https://github.com/niukuo","followers_url":"https://api.github.com/users/niukuo/followers","following_url":"https://api.github.com/users/niukuo/following{/other_user}","gists_url":"https://api.github.com/users/niukuo/gists{/gist_id}","starred_url":"https://api.github.com/users/niukuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niukuo/subscriptions","organizations_url":"https://api.github.com/users/niukuo/orgs","repos_url":"https://api.github.com/users/niukuo/repos","events_url":"https://api.github.com/users/niukuo/events{/privacy}","received_events_url":"https://api.github.com/users/niukuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T12:09:16Z","updated_at":"2019-01-18T12:09:16Z","author_association":"CONTRIBUTOR","body":"直接调用 FileWatcher 相关逻辑并不会报mmleak","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455525715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455554520","html_url":"https://github.com/apache/brpc/issues/624#issuecomment-455554520","issue_url":"https://api.github.com/repos/apache/brpc/issues/624","id":455554520,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTU1NDUyMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T13:58:09Z","updated_at":"2019-01-18T13:58:09Z","author_association":"CONTRIBUTOR","body":"估计和GlobalUpdate线程永远不退有关，这是符合预期的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455554520/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455556417","html_url":"https://github.com/apache/brpc/issues/623#issuecomment-455556417","issue_url":"https://api.github.com/repos/apache/brpc/issues/623","id":455556417,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTU1NjQxNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T14:04:15Z","updated_at":"2019-01-18T14:04:15Z","author_association":"CONTRIBUTOR","body":"server端无法假设Order Id不重不漏，如果只是简单\"有序处理\"，这里可能会出现活锁。具体处理方法和业务特性关系密切，是不可能在rpc层直接托管掉的。框架提供了[ExecutionQueue](https://github.com/brpc/brpc/blob/master/docs/cn/execution_queue.md)来提供基本的有序执行能力。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455556417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455603840","html_url":"https://github.com/apache/brpc/issues/624#issuecomment-455603840","issue_url":"https://api.github.com/repos/apache/brpc/issues/624","id":455603840,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYwMzg0MA==","user":{"login":"niukuo","id":6831097,"node_id":"MDQ6VXNlcjY4MzEwOTc=","avatar_url":"https://avatars.githubusercontent.com/u/6831097?v=4","gravatar_id":"","url":"https://api.github.com/users/niukuo","html_url":"https://github.com/niukuo","followers_url":"https://api.github.com/users/niukuo/followers","following_url":"https://api.github.com/users/niukuo/following{/other_user}","gists_url":"https://api.github.com/users/niukuo/gists{/gist_id}","starred_url":"https://api.github.com/users/niukuo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niukuo/subscriptions","organizations_url":"https://api.github.com/users/niukuo/orgs","repos_url":"https://api.github.com/users/niukuo/repos","events_url":"https://api.github.com/users/niukuo/events{/privacy}","received_events_url":"https://api.github.com/users/niukuo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T16:23:30Z","updated_at":"2019-01-18T16:23:30Z","author_association":"CONTRIBUTOR","body":"有没有什么推荐的办法能在不修改global.cpp代码的情况下避免这个提示呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455603840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455616630","html_url":"https://github.com/apache/brpc/pull/622#issuecomment-455616630","issue_url":"https://api.github.com/repos/apache/brpc/issues/622","id":455616630,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTYxNjYzMA==","user":{"login":"dyike","id":4496772,"node_id":"MDQ6VXNlcjQ0OTY3NzI=","avatar_url":"https://avatars.githubusercontent.com/u/4496772?v=4","gravatar_id":"","url":"https://api.github.com/users/dyike","html_url":"https://github.com/dyike","followers_url":"https://api.github.com/users/dyike/followers","following_url":"https://api.github.com/users/dyike/following{/other_user}","gists_url":"https://api.github.com/users/dyike/gists{/gist_id}","starred_url":"https://api.github.com/users/dyike/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dyike/subscriptions","organizations_url":"https://api.github.com/users/dyike/orgs","repos_url":"https://api.github.com/users/dyike/repos","events_url":"https://api.github.com/users/dyike/events{/privacy}","received_events_url":"https://api.github.com/users/dyike/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-18T17:01:47Z","updated_at":"2019-01-18T17:01:47Z","author_association":"CONTRIBUTOR","body":"discovery同学修复的问题跟这个有关系但也不完全。他们修复的只是不返回两个object。请求header不指定content-type，discovery还是返回错误。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455616630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455742817","html_url":"https://github.com/apache/brpc/pull/465#issuecomment-455742817","issue_url":"https://api.github.com/repos/apache/brpc/issues/465","id":455742817,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTc0MjgxNw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T02:47:27Z","updated_at":"2019-01-19T02:47:27Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455742817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455766764","html_url":"https://github.com/apache/brpc/issues/623#issuecomment-455766764","issue_url":"https://api.github.com/repos/apache/brpc/issues/623","id":455766764,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTc2Njc2NA==","user":{"login":"yujun777","id":8347843,"node_id":"MDQ6VXNlcjgzNDc4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/8347843?v=4","gravatar_id":"","url":"https://api.github.com/users/yujun777","html_url":"https://github.com/yujun777","followers_url":"https://api.github.com/users/yujun777/followers","following_url":"https://api.github.com/users/yujun777/following{/other_user}","gists_url":"https://api.github.com/users/yujun777/gists{/gist_id}","starred_url":"https://api.github.com/users/yujun777/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yujun777/subscriptions","organizations_url":"https://api.github.com/users/yujun777/orgs","repos_url":"https://api.github.com/users/yujun777/repos","events_url":"https://api.github.com/users/yujun777/events{/privacy}","received_events_url":"https://api.github.com/users/yujun777/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-19T10:07:19Z","updated_at":"2019-01-19T10:07:19Z","author_association":"NONE","body":"好的，我先研究一下~  谢谢戈总 ！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455766764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455836829","html_url":"https://github.com/apache/brpc/issues/604#issuecomment-455836829","issue_url":"https://api.github.com/repos/apache/brpc/issues/604","id":455836829,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTgzNjgyOQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-20T04:29:27Z","updated_at":"2019-01-20T04:29:27Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455836829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455841079","html_url":"https://github.com/apache/brpc/issues/597#issuecomment-455841079","issue_url":"https://api.github.com/repos/apache/brpc/issues/597","id":455841079,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTg0MTA3OQ==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-20T06:16:12Z","updated_at":"2019-01-20T06:16:12Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455841079/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455841103","html_url":"https://github.com/apache/brpc/issues/602#issuecomment-455841103","issue_url":"https://api.github.com/repos/apache/brpc/issues/602","id":455841103,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NTg0MTEwMw==","user":{"login":"stale[bot]","id":26384082,"node_id":"MDM6Qm90MjYzODQwODI=","avatar_url":"https://avatars.githubusercontent.com/in/1724?v=4","gravatar_id":"","url":"https://api.github.com/users/stale%5Bbot%5D","html_url":"https://github.com/apps/stale","followers_url":"https://api.github.com/users/stale%5Bbot%5D/followers","following_url":"https://api.github.com/users/stale%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/stale%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/stale%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stale%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/stale%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/stale%5Bbot%5D/repos","events_url":"https://api.github.com/users/stale%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/stale%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2019-01-20T06:16:52Z","updated_at":"2019-01-20T06:16:52Z","author_association":"NONE","body":"This issue has been automatically marked as stale because it's inactive for a long time. It will be closed if no further activity occurs, reopen if you have further ideas. Thank you for your contributions! 由于很久没有活跃，此Issue已被自动标记为过期。之后几天仍无变化的话将会被关闭，若你有新想法则可重新打开。感谢你的贡献!\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/455841103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456014435","html_url":"https://github.com/apache/brpc/issues/626#issuecomment-456014435","issue_url":"https://api.github.com/repos/apache/brpc/issues/626","id":456014435,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjAxNDQzNQ==","user":{"login":"yjhjstz","id":3832082,"node_id":"MDQ6VXNlcjM4MzIwODI=","avatar_url":"https://avatars.githubusercontent.com/u/3832082?v=4","gravatar_id":"","url":"https://api.github.com/users/yjhjstz","html_url":"https://github.com/yjhjstz","followers_url":"https://api.github.com/users/yjhjstz/followers","following_url":"https://api.github.com/users/yjhjstz/following{/other_user}","gists_url":"https://api.github.com/users/yjhjstz/gists{/gist_id}","starred_url":"https://api.github.com/users/yjhjstz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yjhjstz/subscriptions","organizations_url":"https://api.github.com/users/yjhjstz/orgs","repos_url":"https://api.github.com/users/yjhjstz/repos","events_url":"https://api.github.com/users/yjhjstz/events{/privacy}","received_events_url":"https://api.github.com/users/yjhjstz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T09:58:27Z","updated_at":"2019-01-21T09:58:37Z","author_association":"MEMBER","body":"> brpc: 2018年7月下旬的brpc版本 \r\n\r\n有具体的commit sha ？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456014435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456017799","html_url":"https://github.com/apache/brpc/issues/626#issuecomment-456017799","issue_url":"https://api.github.com/repos/apache/brpc/issues/626","id":456017799,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjAxNzc5OQ==","user":{"login":"wzw921026","id":15108642,"node_id":"MDQ6VXNlcjE1MTA4NjQy","avatar_url":"https://avatars.githubusercontent.com/u/15108642?v=4","gravatar_id":"","url":"https://api.github.com/users/wzw921026","html_url":"https://github.com/wzw921026","followers_url":"https://api.github.com/users/wzw921026/followers","following_url":"https://api.github.com/users/wzw921026/following{/other_user}","gists_url":"https://api.github.com/users/wzw921026/gists{/gist_id}","starred_url":"https://api.github.com/users/wzw921026/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wzw921026/subscriptions","organizations_url":"https://api.github.com/users/wzw921026/orgs","repos_url":"https://api.github.com/users/wzw921026/repos","events_url":"https://api.github.com/users/wzw921026/events{/privacy}","received_events_url":"https://api.github.com/users/wzw921026/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-21T10:08:31Z","updated_at":"2019-01-21T10:08:31Z","author_association":"NONE","body":"> > brpc: 2018年7月下旬的brpc版本\r\n> \r\n> 有具体的commit sha ？\r\n\r\n没有，应该是18年8月6号的master","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456017799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456376163","html_url":"https://github.com/apache/brpc/issues/627#issuecomment-456376163","issue_url":"https://api.github.com/repos/apache/brpc/issues/627","id":456376163,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjM3NjE2Mw==","user":{"login":"old-bear","id":1525532,"node_id":"MDQ6VXNlcjE1MjU1MzI=","avatar_url":"https://avatars.githubusercontent.com/u/1525532?v=4","gravatar_id":"","url":"https://api.github.com/users/old-bear","html_url":"https://github.com/old-bear","followers_url":"https://api.github.com/users/old-bear/followers","following_url":"https://api.github.com/users/old-bear/following{/other_user}","gists_url":"https://api.github.com/users/old-bear/gists{/gist_id}","starred_url":"https://api.github.com/users/old-bear/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/old-bear/subscriptions","organizations_url":"https://api.github.com/users/old-bear/orgs","repos_url":"https://api.github.com/users/old-bear/repos","events_url":"https://api.github.com/users/old-bear/events{/privacy}","received_events_url":"https://api.github.com/users/old-bear/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-22T12:05:17Z","updated_at":"2019-01-22T12:05:17Z","author_association":"CONTRIBUTOR","body":"1. Channel与Socket是n : 1，不同的Channel可能拥有相同的ChannelOption，那样就对应同一个Socket\r\n2. ChannelOption里有SSLOption，所以SSL配置参数不一样的Channel，也会对应不同的Socket区分\r\n3. 一个Socket对应一个SSL_CTX，一个Socket一个fd\r\n4. SSLSession跨线程共享，在启动时会调用\r\nhttps://github.com/brpc/brpc/blob/459387620f35209c8952f87d007e6efbca9b4da2/src/brpc/details/ssl_helper.cpp#L638-L649\r\n5. 但是这并不意味着可以多线程同时去write，因为SSL read和write同样不保证原子，数据会交织在一起；需要外面自己保证（比如brpc内Socket的实现，就是保证一个writer，一个reader）\r\n6. 那个SSL的ut，原版的build应该都是能pass的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456376163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456627480","html_url":"https://github.com/apache/brpc/issues/627#issuecomment-456627480","issue_url":"https://api.github.com/repos/apache/brpc/issues/627","id":456627480,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjYyNzQ4MA==","user":{"login":"ymjing","id":1444316,"node_id":"MDQ6VXNlcjE0NDQzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1444316?v=4","gravatar_id":"","url":"https://api.github.com/users/ymjing","html_url":"https://github.com/ymjing","followers_url":"https://api.github.com/users/ymjing/followers","following_url":"https://api.github.com/users/ymjing/following{/other_user}","gists_url":"https://api.github.com/users/ymjing/gists{/gist_id}","starred_url":"https://api.github.com/users/ymjing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymjing/subscriptions","organizations_url":"https://api.github.com/users/ymjing/orgs","repos_url":"https://api.github.com/users/ymjing/repos","events_url":"https://api.github.com/users/ymjing/events{/privacy}","received_events_url":"https://api.github.com/users/ymjing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T01:11:41Z","updated_at":"2019-01-23T01:20:44Z","author_association":"NONE","body":"@old-bear  多谢指点！请您看下我的理解对不对。\r\n\r\n以SSL的UT的sanity case为例\r\nhttps://github.com/brpc/brpc/blob/1aeef03ce3c23e1f9ced301d52a1ead397157821/test/brpc_ssl_unittest.cpp#L89-L157\r\n\r\n1 . 客户端NUM个线程共享一个Channel，这个Channel对应一个Socket、一个fd、和一个SSL_CTX*。\r\n2. 这一个SSL_CTX*建立了一个SSL*赋给SSLSession。\r\n3. 多个线程共用一个SSL*读写同一个fd，靠brpc防止数据交织。\r\n\r\n我还不清楚的是brpc是怎么防止数据交织的，我看到ssl_helper.cpp的CreateSSLSession函数调用SSL_set_app_data把SocketId保存在SSL里，和这个关系么？\r\nhttps://github.com/brpc/brpc/blob/459387620f35209c8952f87d007e6efbca9b4da2/src/brpc/details/ssl_helper.cpp#L543\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456627480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456642344","html_url":"https://github.com/apache/brpc/issues/627#issuecomment-456642344","issue_url":"https://api.github.com/repos/apache/brpc/issues/627","id":456642344,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1NjY0MjM0NA==","user":{"login":"xiongji","id":3364243,"node_id":"MDQ6VXNlcjMzNjQyNDM=","avatar_url":"https://avatars.githubusercontent.com/u/3364243?v=4","gravatar_id":"","url":"https://api.github.com/users/xiongji","html_url":"https://github.com/xiongji","followers_url":"https://api.github.com/users/xiongji/followers","following_url":"https://api.github.com/users/xiongji/following{/other_user}","gists_url":"https://api.github.com/users/xiongji/gists{/gist_id}","starred_url":"https://api.github.com/users/xiongji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiongji/subscriptions","organizations_url":"https://api.github.com/users/xiongji/orgs","repos_url":"https://api.github.com/users/xiongji/repos","events_url":"https://api.github.com/users/xiongji/events{/privacy}","received_events_url":"https://api.github.com/users/xiongji/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-23T02:16:56Z","updated_at":"2019-01-23T02:16:56Z","author_association":"NONE","body":"这个是操作系统保证的吧，操作系统能保证同一台机器上不同的线程或进程使用相同的端口时，将数据送达对应的进程或线程","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/456642344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]