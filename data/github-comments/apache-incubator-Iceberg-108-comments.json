[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907494846","html_url":"https://github.com/apache/iceberg/issues/3006#issuecomment-907494846","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3006","id":907494846,"node_id":"IC_kwDOCW7NX842F0W-","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T21:51:35Z","updated_at":"2021-08-27T21:51:35Z","author_association":"CONTRIBUTOR","body":"Closing this issue as we've added this to the labeler action.\r\n\r\nWe should probably consider adding this to all of our actions, if at least to help us understand the scope of what they need (and to limit the generated tokens to that).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907494846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907499637","html_url":"https://github.com/apache/iceberg/issues/2765#issuecomment-907499637","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2765","id":907499637,"node_id":"IC_kwDOCW7NX842F1h1","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T22:04:54Z","updated_at":"2021-08-27T22:04:54Z","author_association":"CONTRIBUTOR","body":"Hi @nautilus28. Sorry to leave this hanging for so long.\r\n\r\nThere is a bug in Spark (that has been patched but I don't think it's been released) where queries without any unresolved fields (such as named columns in the query) don't properly parse. There's also a bug where MERGE INTO queries are resolved by ordinal position (and not by field name) in Spark, which has also been patched but I don't believe we'll see those patches upstream until Spark 3.2. Though I don't think either of those are what you're hitting.\r\n\r\nIs this just a concern about predicate pushdown? I do seem to recall that (at least in older versions), predicates aren't always pushed down if the type is different (I think especially coming from subqueries). I'd have to look into it again.\r\n\r\nI'll see if I can recall (or find somebody who knows more than I do) about the conditions in which predicate pushdown does or does not occur.\r\n\r\nIf you can upgrade to Spark 3.1, that would be ideal. Now that we support Spark 3.1, I will admit that I am always a bit suspicious of a lot of behavior with Spark 3.0.x (though I cannot confirm that that's the issue here).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907499637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907503979","html_url":"https://github.com/apache/iceberg/pull/3030#issuecomment-907503979","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3030","id":907503979,"node_id":"IC_kwDOCW7NX842F2lr","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T22:15:37Z","updated_at":"2021-08-27T22:15:37Z","author_association":"CONTRIBUTOR","body":"Yes, reopening a PR will retrigger tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907503979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907515416","html_url":"https://github.com/apache/iceberg/pull/3008#issuecomment-907515416","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3008","id":907515416,"node_id":"IC_kwDOCW7NX842F5YY","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T22:56:29Z","updated_at":"2021-08-27T22:56:29Z","author_association":"CONTRIBUTOR","body":"Merging now. Thanks, @cwsteinbach!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907515416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907521866","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907521866","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907521866,"node_id":"IC_kwDOCW7NX842F69K","user":{"login":"kainoa21","id":4909735,"node_id":"MDQ6VXNlcjQ5MDk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/4909735?v=4","gravatar_id":"","url":"https://api.github.com/users/kainoa21","html_url":"https://github.com/kainoa21","followers_url":"https://api.github.com/users/kainoa21/followers","following_url":"https://api.github.com/users/kainoa21/following{/other_user}","gists_url":"https://api.github.com/users/kainoa21/gists{/gist_id}","starred_url":"https://api.github.com/users/kainoa21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kainoa21/subscriptions","organizations_url":"https://api.github.com/users/kainoa21/orgs","repos_url":"https://api.github.com/users/kainoa21/repos","events_url":"https://api.github.com/users/kainoa21/events{/privacy}","received_events_url":"https://api.github.com/users/kainoa21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T23:17:20Z","updated_at":"2021-08-27T23:17:20Z","author_association":"NONE","body":"More context in this Slack [thread](https://apache-iceberg.slack.com/archives/C025PH0G1D4/p1630083046068900)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907521866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907524109","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907524109","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907524109,"node_id":"IC_kwDOCW7NX842F7gN","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-27T23:26:02Z","updated_at":"2021-08-27T23:26:02Z","author_association":"CONTRIBUTOR","body":"If the only reason to have the GlueCatalog implement `Configurable` is to satisfy the current constraints of dynamic FileIO loading, likely we can change that (I believe dynamic FileIO loading was added when maybe the second additional Catalog beyond the basic Hadoop and Hive ones were added).\r\n\r\nIn fact, on first look, it seems like the GlueCatalog could _possibly_ just pass in `null` for the `hadoopConf` if it didn't implement Configurable, as the current dynamic FileIO loading only sets the hadoop configuration if the class implements `Configurable`.\r\n\r\nhttps://github.com/apache/iceberg/blob/4eb0853cd787bf2f5778195558d22a45ecf6c601/core/src/main/java/org/apache/iceberg/CatalogUtil.java#L189-L191\r\n\r\n@jackye1995 do you know if GlueCatalog really requires anything from the hadoop configuration? Or have any input on how Flink can be run in Kinesis Data Analytics?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907524109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907534399","html_url":"https://github.com/apache/iceberg/issues/3002#issuecomment-907534399","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3002","id":907534399,"node_id":"IC_kwDOCW7NX842F-A_","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T00:12:04Z","updated_at":"2021-08-28T00:12:04Z","author_association":"CONTRIBUTOR","body":"Closing this as it's been merged in and is running now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907534399/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907559375","html_url":"https://github.com/apache/iceberg/pull/2989#issuecomment-907559375","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2989","id":907559375,"node_id":"IC_kwDOCW7NX842GEHP","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T03:25:11Z","updated_at":"2021-08-28T03:25:11Z","author_association":"CONTRIBUTOR","body":"@szehon-ho thx a lot for fixing the flaky tests. overall, it looks good to me. Left a few minor comments.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907559375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907583242","html_url":"https://github.com/apache/iceberg/pull/3034#issuecomment-907583242","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3034","id":907583242,"node_id":"IC_kwDOCW7NX842GJ8K","user":{"login":"hehuiyuan","id":18002496,"node_id":"MDQ6VXNlcjE4MDAyNDk2","avatar_url":"https://avatars.githubusercontent.com/u/18002496?v=4","gravatar_id":"","url":"https://api.github.com/users/hehuiyuan","html_url":"https://github.com/hehuiyuan","followers_url":"https://api.github.com/users/hehuiyuan/followers","following_url":"https://api.github.com/users/hehuiyuan/following{/other_user}","gists_url":"https://api.github.com/users/hehuiyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/hehuiyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hehuiyuan/subscriptions","organizations_url":"https://api.github.com/users/hehuiyuan/orgs","repos_url":"https://api.github.com/users/hehuiyuan/repos","events_url":"https://api.github.com/users/hehuiyuan/events{/privacy}","received_events_url":"https://api.github.com/users/hehuiyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T06:52:04Z","updated_at":"2021-08-28T06:52:04Z","author_association":"NONE","body":"Hi @kbendick , thanks.\r\nUpdate.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907583242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907593330","html_url":"https://github.com/apache/iceberg/issues/3045#issuecomment-907593330","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3045","id":907593330,"node_id":"IC_kwDOCW7NX842GMZy","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T08:26:06Z","updated_at":"2021-08-28T08:26:06Z","author_association":"CONTRIBUTOR","body":"Instances of Locale.ROOT\r\n\r\n```\r\ncore/src/main/java/org/apache/iceberg/CatalogUtil.java\r\n213:      switch (catalogType.toLowerCase(Locale.ENGLISH)) {\r\n\r\ncore/src/main/java/org/apache/iceberg/DataFiles.java\r\n211:      this.format = FileFormat.valueOf(newFormat.toUpperCase(Locale.ENGLISH));\r\n\r\ncore/src/main/java/org/apache/iceberg/TableMetadataParser.java\r\n61:      return Codec.valueOf(codecName.toUpperCase(Locale.ENGLISH));\r\n\r\ncore/src/main/java/org/apache/iceberg/avro/Avro.java\r\n226:          return CodecName.valueOf(codecAsString.toUpperCase(Locale.ENGLISH)).get();\r\n\r\ncore/src/main/java/org/apache/iceberg/MetricsModes.java\r\n50:    Matcher truncateMatcher = TRUNCATE.matcher(mode.toLowerCase(Locale.ENGLISH));\r\n\r\ncore/src/main/java/org/apache/iceberg/FileMetadata.java\r\n149:      this.format = FileFormat.valueOf(newFormat.toUpperCase(Locale.ENGLISH));\r\n\r\nmr/src/test/java/org/apache/iceberg/mr/TestIcebergInputFormats.java\r\n135:    this.fileFormat = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\nmr/src/main/java/org/apache/iceberg/mr/hive/HiveIcebergOutputFormat.java\r\n75:        TableProperties.DEFAULT_FILE_FORMAT, TableProperties.DEFAULT_FILE_FORMAT_DEFAULT).toUpperCase(Locale.ENGLISH));\r\n\r\nhive-metastore/src/main/java/org/apache/iceberg/hive/HiveTableOperations.java\r\n359:    parameters.put(TABLE_TYPE_PROP, ICEBERG_TABLE_TYPE_VALUE.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/source/TestFlinkScan.java\r\n88:    this.fileFormat = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestTaskWriters.java\r\n79:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestDeltaTaskWriter.java\r\n74:    this.format = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestFlinkIcebergSink.java\r\n100:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestIcebergStreamWriter.java\r\n91:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestIcebergFilesCommitter.java\r\n95:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/test/java/org/apache/iceberg/flink/sink/TestFlinkIcebergSinkV2.java\r\n106:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/main/java/org/apache/iceberg/flink/source/RowDataRewriter.java\r\n73:    FileFormat format = FileFormat.valueOf(formatString.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/main/java/org/apache/iceberg/flink/sink/FlinkWriterFactory.java\r\n160:      this.dataFileFormat = FileFormat.valueOf(dataFileFormatName.toUpperCase(Locale.ENGLISH));\r\n163:      this.deleteFileFormat = FileFormat.valueOf(deleteFileFormatName.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/main/java/org/apache/iceberg/flink/sink/FlinkSink.java\r\n408:    return FileFormat.valueOf(formatString.toUpperCase(Locale.ENGLISH));\r\n\r\nflink/src/main/java/org/apache/iceberg/flink/FlinkCatalogFactory.java\r\n87:    switch (catalogType.toLowerCase(Locale.ENGLISH)) {\r\n\r\napi/src/main/java/org/apache/iceberg/types/CheckCompatibility.java\r\n259:          currentType.typeId().toString().toLowerCase(Locale.ENGLISH), readPrimitive));\r\n\r\napi/src/main/java/org/apache/iceberg/DistributionMode.java\r\n53:    return DistributionMode.valueOf(modeName.toUpperCase(Locale.ENGLISH));\r\n\r\napi/src/main/java/org/apache/iceberg/transforms/Transforms.java\r\n62:        return Timestamps.valueOf(transform.toUpperCase(Locale.ENGLISH));\r\n64:        return Dates.valueOf(transform.toUpperCase(Locale.ENGLISH));\r\n\r\naws/src/integration/java/org/apache/iceberg/aws/glue/GlueCatalogTableTest.java\r\n67:    Assert.assertEquals(BaseMetastoreTableOperations.ICEBERG_TABLE_TYPE_VALUE.toUpperCase(Locale.ENGLISH),\r\n\r\naws/src/main/java/org/apache/iceberg/aws/glue/GlueTableOperations.java\r\n172:    properties.put(TABLE_TYPE_PROP, ICEBERG_TABLE_TYPE_VALUE.toUpperCase(Locale.ENGLISH));\r\n\r\naws/src/main/java/org/apache/iceberg/aws/s3/S3RequestUtil.java\r\n77:    switch (awsProperties.s3FileIoSseType().toLowerCase(Locale.ENGLISH)) {\r\n\r\naws/src/main/java/org/apache/iceberg/aws/dynamodb/DynamoDbTableOperations.java\r\n160:    properties.put(TABLE_TYPE_PROP, ICEBERG_TABLE_TYPE_VALUE.toUpperCase(Locale.ENGLISH));\r\n\r\nparquet/src/main/java/org/apache/iceberg/parquet/Parquet.java\r\n345:          return CompressionCodecName.valueOf(codecAsString.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/io/TestAppenderFactory.java\r\n78:    this.format = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/io/TestBaseTaskWriter.java\r\n67:    this.format = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/TestSplitScan.java\r\n72:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/io/TestTaskEqualityDeltaWriter.java\r\n80:    this.format = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/io/TestGenericSortedPosDeleteWriter.java\r\n71:    this.format = FileFormat.valueOf(fileFormat.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/data/TestMetricsRowGroupFilter.java\r\n101:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/data/TestLocalScan.java\r\n91:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\ndata/src/test/java/org/apache/iceberg/data/TestMetricsRowGroupFilterTypes.java\r\n266:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nspark3/src/test/java/org/apache/iceberg/spark/source/TestFilteredScan.java\r\n182:    FileFormat fileFormat = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/source/SparkWrite.java\r\n168:    return FileFormat.valueOf(formatString.toUpperCase(Locale.ENGLISH));\r\n\r\nspark/src/test/java/org/apache/iceberg/spark/source/TestSparkDataWrite.java\r\n89:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nspark/src/test/java/org/apache/iceberg/spark/source/TestTimestampWithoutZone.java\r\n125:    FileFormat fileFormat = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nspark/src/main/java/org/apache/iceberg/spark/source/SparkWriterFactory.java\r\n161:      this.dataFileFormat = FileFormat.valueOf(dataFileFormatName.toUpperCase(Locale.ENGLISH));\r\n164:      this.deleteFileFormat = FileFormat.valueOf(deleteFileFormatName.toUpperCase(Locale.ENGLISH));\r\n\r\nspark/src/main/java/org/apache/iceberg/spark/source/RowDataRewriter.java\r\n66:    this.format = FileFormat.valueOf(formatString.toUpperCase(Locale.ENGLISH));\r\n\r\nspark2/src/test/java/org/apache/iceberg/spark/source/TestFilteredScan.java\r\n184:    FileFormat fileFormat = FileFormat.valueOf(format.toUpperCase(Locale.ENGLISH));\r\n\r\nspark2/src/main/java/org/apache/iceberg/spark/source/Writer.java\r\n127:    return FileFormat.valueOf(formatString.toUpperCase(Locale.ENGLISH));\r\n\r\nspark2/src/main/java/org/apache/iceberg/spark/source/Reader.java\r\n149:        fsscheme = fs.getScheme().toLowerCase(Locale.ENGLISH);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907593330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907593431","html_url":"https://github.com/apache/iceberg/issues/3045#issuecomment-907593431","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3045","id":907593431,"node_id":"IC_kwDOCW7NX842GMbX","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T08:27:00Z","updated_at":"2021-08-28T08:27:00Z","author_association":"CONTRIBUTOR","body":"Instances of Locale.ROOT\r\n\r\n```\r\ncore/src/test/java/org/apache/iceberg/hadoop/TestCachingCatalog.java\r\n94:      catalog.loadTable(TableIdentifier.parse(tableIdent + \".\" + type.name().toLowerCase(Locale.ROOT)));\r\n116:      TableIdentifier metadataIdent2 = TableIdentifier.parse(tableIdent + \".\" + type.name().toLowerCase(Locale.ROOT));\r\n\r\ncore/src/main/java/org/apache/iceberg/CachingCatalog.java\r\n157:      builder.add(TableIdentifier.parse(ident + \".\" + type.name().toLowerCase(Locale.ROOT)));\r\n\r\ncore/src/main/java/org/apache/iceberg/BaseFile.java\r\n442:        .add(\"content\", content.toString().toLowerCase(Locale.ROOT))\r\n\r\ncore/src/main/java/org/apache/iceberg/SortOrderParser.java\r\n75:    return direction.toString().toLowerCase(Locale.ROOT);\r\n134:    return SortDirection.valueOf(directionAsString.toUpperCase(Locale.ROOT));\r\n\r\ncore/src/main/java/org/apache/iceberg/io/OutputFileFactory.java\r\n156:      this.format = FileFormat.valueOf(formatAsString.toUpperCase(Locale.ROOT));\r\n\r\ncore/src/main/java/org/apache/iceberg/MetadataTableType.java\r\n37:      return MetadataTableType.valueOf(name.toUpperCase(Locale.ROOT));\r\n\r\nspark3-extensions/src/main/scala/org/apache/spark/sql/catalyst/analysis/ResolveProcedures.scala\r\n167:        val normalizedName = param.name.toLowerCase(Locale.ROOT)\r\n170:        val normalizedName = param.name.toLowerCase(Locale.ROOT)\r\n177:      case a @ NamedArgument(name, _) => a.copy(name = name.toLowerCase(Locale.ROOT))\r\n\r\nspark3-extensions/src/main/scala/org/apache/spark/sql/catalyst/parser/extensions/IcebergSparkSqlExtensionsParser.scala\r\n112:    val normalized = sqlText.toLowerCase(Locale.ROOT).trim().replaceAll(\"\\\\s+\", \" \")\r\n\r\napi/src/main/java/org/apache/iceberg/types/Types.java\r\n62:    String lowerTypeString = typeString.toLowerCase(Locale.ROOT);\r\n571:      return lazyFieldsByLowerCaseName().get(name.toLowerCase(Locale.ROOT));\r\n642:          byLowerCaseNameBuilder.put(field.name().toLowerCase(Locale.ROOT), field);\r\n\r\napi/src/main/java/org/apache/iceberg/types/TypeUtil.java\r\n125:        indexByLowerCaseName.put(name.toLowerCase(Locale.ROOT), integer));\r\n\r\napi/src/main/java/org/apache/iceberg/Schema.java\r\n318:    Integer id = lazyLowerCaseNameToId().get(name.toLowerCase(Locale.ROOT));\r\n444:        id = lazyLowerCaseNameToId().get(name.toLowerCase(Locale.ROOT));\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/procedures/SparkProcedures.java\r\n38:    Supplier<ProcedureBuilder> builderSupplier = BUILDERS.get(name.toLowerCase(Locale.ROOT));\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/source/SparkWriteBuilder.java\r\n69:        options.get(\"overwrite-mode\").toLowerCase(Locale.ROOT) : null;\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/source/SparkMicroBatchStream.java\r\n219:        \"Cannot process %s snapshot: %s\", op.toLowerCase(Locale.ROOT), snapshot.snapshotId());\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/source/SparkMergeBuilder.java\r\n71:    return IsolationLevel.valueOf(isolationLevelAsString.toUpperCase(Locale.ROOT));\r\n\r\nspark3/src/main/java/org/apache/iceberg/spark/actions/BaseTableCreationSparkAction.java\r\n126:    String sourceTableProvider = sourceCatalogTable.provider().get().toLowerCase(Locale.ROOT);\r\n\r\nspark/src/test/java/org/apache/iceberg/spark/source/TestSparkReadProjection.java\r\n79:    this.format = FileFormat.valueOf(format.toUpperCase(Locale.ROOT));\r\n\r\nspark/src/main/java/org/apache/iceberg/spark/SparkDataFile.java\r\n111:    String formatAsString = wrapped.getString(fileFormatPosition).toUpperCase(Locale.ROOT);\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907593431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907634671","html_url":"https://github.com/apache/iceberg/pull/3012#issuecomment-907634671","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3012","id":907634671,"node_id":"IC_kwDOCW7NX842GWfv","user":{"login":"moon-fall","id":7753372,"node_id":"MDQ6VXNlcjc3NTMzNzI=","avatar_url":"https://avatars.githubusercontent.com/u/7753372?v=4","gravatar_id":"","url":"https://api.github.com/users/moon-fall","html_url":"https://github.com/moon-fall","followers_url":"https://api.github.com/users/moon-fall/followers","following_url":"https://api.github.com/users/moon-fall/following{/other_user}","gists_url":"https://api.github.com/users/moon-fall/gists{/gist_id}","starred_url":"https://api.github.com/users/moon-fall/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moon-fall/subscriptions","organizations_url":"https://api.github.com/users/moon-fall/orgs","repos_url":"https://api.github.com/users/moon-fall/repos","events_url":"https://api.github.com/users/moon-fall/events{/privacy}","received_events_url":"https://api.github.com/users/moon-fall/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T14:33:10Z","updated_at":"2021-08-28T14:33:10Z","author_association":"CONTRIBUTOR","body":"@rdblue i have update the PR, I add the configuration onlyWriteEqualityFieldColumns in FlinkSInk and some test, please  have a look.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907634671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907651938","html_url":"https://github.com/apache/iceberg/issues/2554#issuecomment-907651938","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2554","id":907651938,"node_id":"IC_kwDOCW7NX842Gati","user":{"login":"fcomuniz","id":10547534,"node_id":"MDQ6VXNlcjEwNTQ3NTM0","avatar_url":"https://avatars.githubusercontent.com/u/10547534?v=4","gravatar_id":"","url":"https://api.github.com/users/fcomuniz","html_url":"https://github.com/fcomuniz","followers_url":"https://api.github.com/users/fcomuniz/followers","following_url":"https://api.github.com/users/fcomuniz/following{/other_user}","gists_url":"https://api.github.com/users/fcomuniz/gists{/gist_id}","starred_url":"https://api.github.com/users/fcomuniz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcomuniz/subscriptions","organizations_url":"https://api.github.com/users/fcomuniz/orgs","repos_url":"https://api.github.com/users/fcomuniz/repos","events_url":"https://api.github.com/users/fcomuniz/events{/privacy}","received_events_url":"https://api.github.com/users/fcomuniz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T16:42:18Z","updated_at":"2021-08-28T16:42:18Z","author_association":"NONE","body":"Having the issue on 0.12.0 using spark to drop the tables with Hive Meta Store, is there a way to do it without spark?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907651938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907656213","html_url":"https://github.com/apache/iceberg/issues/2918#issuecomment-907656213","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2918","id":907656213,"node_id":"IC_kwDOCW7NX842GbwV","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T17:11:51Z","updated_at":"2021-08-28T17:11:51Z","author_association":"CONTRIBUTOR","body":"> It doesn't make sense to have a different job parallelism (y) than CDC source parallelism (x). and then have the FlinkSink to do some magic to override the parallelism of an upstream operator that it doesn't own.\r\n\r\nBut CDC source parallelism (x) and job parallelism(y) are out of iceberg and define by user. Dose iceberg should restrict CDC source parallelism must equal to job parallelism? In other hand, if x != y and we don't override the parallelism of the FlinkSink upstream operator, Is there another way to resolve the disorder problem?\r\n\r\n> I am wondering if we should add a new equalityKeysHash to the DistributionMode.\r\n\r\nI think we need to discuss the relation between equailty keys and partition keys first. https://github.com/apache/iceberg/pull/2898#discussion_r697882281 @stevenzwu ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907656213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907686809","html_url":"https://github.com/apache/iceberg/issues/2918#issuecomment-907686809","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2918","id":907686809,"node_id":"IC_kwDOCW7NX842GjOZ","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-28T20:39:47Z","updated_at":"2021-08-28T20:39:47Z","author_association":"CONTRIBUTOR","body":"> But CDC source parallelism (x) and job parallelism(y) are out of iceberg and define by user. Dose iceberg should restrict CDC source parallelism must equal to job parallelism?\r\n\r\nHow does this scenario work for other sinks (like MySQL)? How can other sinks ensure the processing ordering? Do all sinks need to override the parallelism of upstream operator and force the upstream operator parallelism matches the source parallelism? To me, x=y is not a behavior imposed by Iceberg sink. Rather, it is a behavior imposed by the CDC source.\r\n\r\n> we need to discuss the relation between equality keys and partition keys. Are partition keys a subset of equality keys?\r\n\r\nAgree.  My intuition is that they are independent. But I am also not very clear on that.\r\n\r\ncc @openinx @rdblue to get more inputs on the whole discussion\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907686809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907741967","html_url":"https://github.com/apache/iceberg/pull/2961#issuecomment-907741967","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2961","id":907741967,"node_id":"IC_kwDOCW7NX842GwsP","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T07:12:34Z","updated_at":"2021-08-29T07:12:34Z","author_association":"CONTRIBUTOR","body":"Google doc proposal: https://docs.google.com/document/d/1PvxK_0ebEoX3s7nS6-LOJJZdBYr_olTWH9oepNUfJ-A/edit?usp=sharing","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907741967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907758924","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907758924","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907758924,"node_id":"IC_kwDOCW7NX842G01M","user":{"login":"tiborkiss","id":531899,"node_id":"MDQ6VXNlcjUzMTg5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/531899?v=4","gravatar_id":"","url":"https://api.github.com/users/tiborkiss","html_url":"https://github.com/tiborkiss","followers_url":"https://api.github.com/users/tiborkiss/followers","following_url":"https://api.github.com/users/tiborkiss/following{/other_user}","gists_url":"https://api.github.com/users/tiborkiss/gists{/gist_id}","starred_url":"https://api.github.com/users/tiborkiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiborkiss/subscriptions","organizations_url":"https://api.github.com/users/tiborkiss/orgs","repos_url":"https://api.github.com/users/tiborkiss/repos","events_url":"https://api.github.com/users/tiborkiss/events{/privacy}","received_events_url":"https://api.github.com/users/tiborkiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T09:23:04Z","updated_at":"2021-08-29T09:23:04Z","author_association":"NONE","body":"Last one-two days I wrote a streaming job and packaged as a fat jar. I had to add the minimal hadoop dependency and in the code I had to initialize the hadoop conf with the constructor which has a boolean false, telling that to not load any hadoop config file (since I don't have in Flink). Finally, I managed to work with the streaming job, which is running in Flink 1.13.1 (behind Ververica CE).\r\nDefinitively, I see a good reason to remove the hadoop conf dependency from GlueCatalog, which uses the custom catalog from iceberg code.\r\n\r\nCurrently there are three catalog implementation classes and somehow GlueCatalog falls under the custom catalog implementation. From design aspects, the constellation of these three type of catalogs and how another specialized like GlueCatalog is used, may cause some confusion at first time when you try to use. Some refactoring, such as removal of hadoop conf or more, it would be nice to see.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907758924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907759580","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907759580","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907759580,"node_id":"IC_kwDOCW7NX842G0_c","user":{"login":"tiborkiss","id":531899,"node_id":"MDQ6VXNlcjUzMTg5OQ==","avatar_url":"https://avatars.githubusercontent.com/u/531899?v=4","gravatar_id":"","url":"https://api.github.com/users/tiborkiss","html_url":"https://github.com/tiborkiss","followers_url":"https://api.github.com/users/tiborkiss/followers","following_url":"https://api.github.com/users/tiborkiss/following{/other_user}","gists_url":"https://api.github.com/users/tiborkiss/gists{/gist_id}","starred_url":"https://api.github.com/users/tiborkiss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiborkiss/subscriptions","organizations_url":"https://api.github.com/users/tiborkiss/orgs","repos_url":"https://api.github.com/users/tiborkiss/repos","events_url":"https://api.github.com/users/tiborkiss/events{/privacy}","received_events_url":"https://api.github.com/users/tiborkiss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T09:27:16Z","updated_at":"2021-08-29T09:27:16Z","author_association":"NONE","body":"> it seems like the GlueCatalog could _possibly_ just pass in `null` for the `hadoopConf`\r\n\r\nI tried that, but I got serialization error of the jobgraph.\r\nThe workaround was to create an empty hadoop configuration object with the constructor which has a boolean false, telling them to not load any config file (since I don't have), thus the conf object will have an empty map.\r\n\r\nSince is there this unnecessary hadoop conf dependency, the size of my fat jar doubled it's size to somewhere currently at 310MB.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907759580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907767727","html_url":"https://github.com/apache/iceberg/issues/3046#issuecomment-907767727","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3046","id":907767727,"node_id":"IC_kwDOCW7NX842G2-v","user":{"login":"alexey-fin","id":45828782,"node_id":"MDQ6VXNlcjQ1ODI4Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/45828782?v=4","gravatar_id":"","url":"https://api.github.com/users/alexey-fin","html_url":"https://github.com/alexey-fin","followers_url":"https://api.github.com/users/alexey-fin/followers","following_url":"https://api.github.com/users/alexey-fin/following{/other_user}","gists_url":"https://api.github.com/users/alexey-fin/gists{/gist_id}","starred_url":"https://api.github.com/users/alexey-fin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexey-fin/subscriptions","organizations_url":"https://api.github.com/users/alexey-fin/orgs","repos_url":"https://api.github.com/users/alexey-fin/repos","events_url":"https://api.github.com/users/alexey-fin/events{/privacy}","received_events_url":"https://api.github.com/users/alexey-fin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T10:30:58Z","updated_at":"2021-08-29T10:30:58Z","author_association":"CONTRIBUTOR","body":"reproduced in 0.11 as well, will need to investigate more","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907767727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907829687","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907829687","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907829687,"node_id":"IC_kwDOCW7NX842HGG3","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T17:11:00Z","updated_at":"2021-08-29T17:11:00Z","author_association":"CONTRIBUTOR","body":"> If the only reason to have the GlueCatalog implement Configurable is to satisfy the current constraints of dynamic FileIO loading, likely we can change that (I believe dynamic FileIO loading was added when maybe the second additional Catalog beyond the basic Hadoop and Hive ones were added).\r\n\r\nIt was added because some users still want to use `GlueCatalog` with `HadoopFIleIO`. One example is for users who are using EMR file system and has to use the `EmrFileSystem` plugin to make sure all their file system access are synchronized. (I know EmrFS is on deprecation path but it's a sticky dependency that is not easy to migrate)\r\n\r\nWith that being said, I agree that Glue catalog should work without a Hadoop installation. This is the most important reason to have such an independent implementation.\r\n\r\nOne approach I can think of is to make another `HadoopGlueCatalog` that supports Hadoop configuration, and remove the configurable aspect of Glue catalog. Let me put up a PR for this to discuss in more details.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907829687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907851594","html_url":"https://github.com/apache/iceberg/pull/3038#issuecomment-907851594","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3038","id":907851594,"node_id":"IC_kwDOCW7NX842HLdK","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T19:02:34Z","updated_at":"2021-08-29T19:02:34Z","author_association":"CONTRIBUTOR","body":"I'm surprised to see that we report the total data file size back to Spark. At Netflix, we switched over to reporting row size estimate * number of rows a long time ago to fix broadcast join memory problems. Spark should ignore the size on disk and use the row size * num rows, but if Spark doesn't do that then I think Iceberg should report that as the size instead.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907851594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907851733","html_url":"https://github.com/apache/iceberg/pull/3038#issuecomment-907851733","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3038","id":907851733,"node_id":"IC_kwDOCW7NX842HLfV","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T19:03:18Z","updated_at":"2021-08-29T19:03:18Z","author_association":"CONTRIBUTOR","body":"Thanks @wypoon! I'm okay with this, but I'd prefer to return a better estimate based on number of rows and not compressed size at all. Interested to hear what @aokolnychyi thinks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907851733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907856714","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-907856714","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":907856714,"node_id":"IC_kwDOCW7NX842HMtK","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T19:33:34Z","updated_at":"2021-08-29T19:33:34Z","author_association":"CONTRIBUTOR","body":"> > it seems like the GlueCatalog could _possibly_ just pass in `null` for the `hadoopConf`\r\n> \r\n> I tried that, but I got serialization error of the jobgraph.\r\n> The workaround was to create an empty hadoop configuration object with the constructor which has a boolean false, telling them to not load any config file (since I don't have), thus the conf object will have an empty map.\r\n> \r\n> Since is there this unnecessary hadoop conf dependency, the size of my fat jar doubled it's size to somewhere currently at 310MB.\r\n\r\nOh my apologies. I meant that with some reconfiguration we could potentially just pass in `null`.\r\n\r\nI'm going to take a look at @jackye1995's PR though as he's the author of the original GlueCatalog and there's possibly a need to have a `HadoopConfigurableGlueCatalog` (oftentimes for example, with Spark, the hadoop configuration is used for various purposes).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907856714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907862566","html_url":"https://github.com/apache/iceberg/issues/3046#issuecomment-907862566","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3046","id":907862566,"node_id":"IC_kwDOCW7NX842HOIm","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T20:04:20Z","updated_at":"2021-08-29T20:04:20Z","author_association":"CONTRIBUTOR","body":"Hi @alexey-fin! Thank you for opening this. I don't think it necessarily needs to be closed just because you were able to repro in 0.11. We don't necessarily need to have a full understanding for why a problem is occurring to have an open issue . That's what makes them issues  \r\n\r\nCould you add more information on your S3A configuration and environment setup? Or could you add a code snippet to repro? I'd like to see if I can reproduce this outside of the Databricks environment (unless you've tried that already).\r\n\r\n> putting iceberg workers to 1 also resolves the issue\r\n\r\nCan you clarify which configuration value you mean when for this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907862566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907863134","html_url":"https://github.com/apache/iceberg/issues/3046#issuecomment-907863134","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3046","id":907863134,"node_id":"IC_kwDOCW7NX842HORe","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T20:06:39Z","updated_at":"2021-08-29T20:06:39Z","author_association":"CONTRIBUTOR","body":"I know we have some discussion taking place on Slack https://the-asf.slack.com/archives/CF01LKV9S/p1629897820057500, but I'm going to reopen the issue now so we can have a more centralized place for the discussion.\r\n\r\nAny further information you can provide (preferably an example to reproduce) would be great! Even if it only reproduces in your Databricks environment, that would still be helpful :) ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907863134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907864928","html_url":"https://github.com/apache/iceberg/issues/3046#issuecomment-907864928","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3046","id":907864928,"node_id":"IC_kwDOCW7NX842HOtg","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T20:16:14Z","updated_at":"2021-08-29T20:16:14Z","author_association":"CONTRIBUTOR","body":"Also, if you do come back with more clarifying information, please feel free to move the discussion to a new issue if you'd like. Otherwise, the title of this issue should likely be updated  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907864928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907871931","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-907871931","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":907871931,"node_id":"IC_kwDOCW7NX842HQa7","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T21:01:35Z","updated_at":"2021-08-29T21:01:35Z","author_association":"CONTRIBUTOR","body":"The orphan files check shouldn't make a difference here. The only action/operation you need to run is `expireSnapshots` to remove old snapshots that are taking up memory. Orphan files are files that are not referenced by table metadata. Snapshot expiration usually cleans up data files that were logically deleted, so under normal circumstances it should not leak data files for the orphan file cleanup to find.\r\n\r\nIf I remember correctly, the problem after that was that you removed too many snapshots and could no longer run the downstream job because the snapshots were removed and Iceberg couldn't tell what had been done between the last snapshot that was processed and the oldest snapshot in history.\r\n\r\nWhat's happening here is that we get incremental changes by reading each snapshot and filtering down to manifests and data files that were added in that snapshot. Those files are what Flink processes when reading incremental changes from a table. But if you don't have all of the snapshots since the last time your Flink job ran, then although the data is in the table, Iceberg isn't sure what files it needs to process. That's because files could have been changed or rewritten before the current snapshot.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907871931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907878130","html_url":"https://github.com/apache/iceberg/pull/3034#issuecomment-907878130","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3034","id":907878130,"node_id":"IC_kwDOCW7NX842HR7y","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-29T21:36:08Z","updated_at":"2021-08-29T21:36:08Z","author_association":"CONTRIBUTOR","body":"> Hi @kbendick , thanks.\r\n> Update.\r\n\r\nHi @hehuiyuan, thanks for clarifying the reasoning for this. I'd have one suggestion. The `mergeHiveConf` method is getting a little large. Could you possibly create a method like `hiveConfFromEnvVariables` or something and then call that in `mergeHiveConf`?\r\n\r\nI know the current `mergeHiveConf` also isn't a strict merging, but now that it's getting more complicated, that would be ideal. So at least for this PR, if you could update your additions to be coming from their own function or functions, that would be helpful in working towards that goal.\r\n\r\nIf you want to wait until there's feedback from the more Flink-focused committers though (like openinx and Jingsong Li), then feel free. Wouldn't want to have my style request change be for nothing . But if these environment variables are commonly provided as you mentioned, I think that makes sense.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907878130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907941718","html_url":"https://github.com/apache/iceberg/issues/3050#issuecomment-907941718","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3050","id":907941718,"node_id":"IC_kwDOCW7NX842HhdW","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T01:30:18Z","updated_at":"2021-08-30T01:30:18Z","author_association":"CONTRIBUTOR","body":"@zhangjun0x01 already created PR #2629  for Flink 1.13 upgrade that covers this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907941718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907999183","html_url":"https://github.com/apache/iceberg/issues/3051#issuecomment-907999183","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3051","id":907999183,"node_id":"IC_kwDOCW7NX842HvfP","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T04:06:43Z","updated_at":"2021-08-30T04:07:40Z","author_association":"MEMBER","body":"Thanks to @netvl for tracking this one down!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/907999183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908024455","html_url":"https://github.com/apache/iceberg/pull/2230#issuecomment-908024455","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2230","id":908024455,"node_id":"IC_kwDOCW7NX842H1qH","user":{"login":"xingbowu","id":12458911,"node_id":"MDQ6VXNlcjEyNDU4OTEx","avatar_url":"https://avatars.githubusercontent.com/u/12458911?v=4","gravatar_id":"","url":"https://api.github.com/users/xingbowu","html_url":"https://github.com/xingbowu","followers_url":"https://api.github.com/users/xingbowu/followers","following_url":"https://api.github.com/users/xingbowu/following{/other_user}","gists_url":"https://api.github.com/users/xingbowu/gists{/gist_id}","starred_url":"https://api.github.com/users/xingbowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xingbowu/subscriptions","organizations_url":"https://api.github.com/users/xingbowu/orgs","repos_url":"https://api.github.com/users/xingbowu/repos","events_url":"https://api.github.com/users/xingbowu/events{/privacy}","received_events_url":"https://api.github.com/users/xingbowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T04:42:40Z","updated_at":"2021-08-30T04:42:40Z","author_association":"CONTRIBUTOR","body":"After walking through this issue, I agree with that it is helpful if we take this pr into community . I would like to pick up this issue in separated link, thanks for the contribution and great work @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908024455/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908026571","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-908026571","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":908026571,"node_id":"IC_kwDOCW7NX842H2LL","user":{"login":"kainoa21","id":4909735,"node_id":"MDQ6VXNlcjQ5MDk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/4909735?v=4","gravatar_id":"","url":"https://api.github.com/users/kainoa21","html_url":"https://github.com/kainoa21","followers_url":"https://api.github.com/users/kainoa21/followers","following_url":"https://api.github.com/users/kainoa21/following{/other_user}","gists_url":"https://api.github.com/users/kainoa21/gists{/gist_id}","starred_url":"https://api.github.com/users/kainoa21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kainoa21/subscriptions","organizations_url":"https://api.github.com/users/kainoa21/orgs","repos_url":"https://api.github.com/users/kainoa21/repos","events_url":"https://api.github.com/users/kainoa21/events{/privacy}","received_events_url":"https://api.github.com/users/kainoa21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T04:50:12Z","updated_at":"2021-08-30T04:54:24Z","author_association":"NONE","body":"Thanks for putting this [PR](https://github.com/apache/iceberg/pull/3047) up so quickly @jackye1995.\r\nI think these changes are reasonable, but I have a couple of high-level comments.\r\n\r\n1. Additional updates to the FlinkCatalogFactory are still needed on top of these changes in order to fully remove the hadoop dependency.  One possible solution is to add `glue` as one of the known `catalog-type`'s and avoid calling `clusterHadoopConf()` when the user sets this value (I tested this change with a local build and it worked in a non-hadoop environment).\r\n2. While this addresses the issue for the GlueCatalog, it will not fix this issue for other catalog implementations which also should be able to work outside of a hadoop environment (e.g. DynamoCatalog).\r\n\r\nI am not completely sure how best to address concern 2.  When I look at both the GlueCatalog and DynamoCatalog, it seems the only reason for the `Configurable` interface is for supporting dynamic loading of FileIO implementations which may or may not need to inspect hadoop conf (currently only `HadoopFileIO`).   `HadoopCatalog` and `HiveCatalog` both look for additional configuration settings in the hadoop conf (beyond just for `HadoopFileIO`).\r\n\r\nPerhaps it makes sense to decouple these two dependencies such that a FileIO implementation can be provided to any catalog independent of that catalog's interaction with hadoop (or lack thereof).  I think this would also simplify the story for the `GlueCatalog` without having to have two distinct classes.  (There is a potential strange place a user could get into trying to use the base `GlueCatalog` for the `catalog-impl` and `HadoopFileIO` for the `io-impl`).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908026571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908042284","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-908042284","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":908042284,"node_id":"IC_kwDOCW7NX842H6As","user":{"login":"kainoa21","id":4909735,"node_id":"MDQ6VXNlcjQ5MDk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/4909735?v=4","gravatar_id":"","url":"https://api.github.com/users/kainoa21","html_url":"https://github.com/kainoa21","followers_url":"https://api.github.com/users/kainoa21/followers","following_url":"https://api.github.com/users/kainoa21/following{/other_user}","gists_url":"https://api.github.com/users/kainoa21/gists{/gist_id}","starred_url":"https://api.github.com/users/kainoa21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kainoa21/subscriptions","organizations_url":"https://api.github.com/users/kainoa21/orgs","repos_url":"https://api.github.com/users/kainoa21/repos","events_url":"https://api.github.com/users/kainoa21/events{/privacy}","received_events_url":"https://api.github.com/users/kainoa21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T05:32:37Z","updated_at":"2021-08-30T05:32:37Z","author_association":"NONE","body":"I believe that one potential root issue is that `FileIO` has leaked out from `TableOperations` into catalog implementations like `GlueCatalog`.  Theoretically, provided a catalog extending `BaseMetastoreCatalog` can implement `newTableOps` then all the `FileIO` configuration should happen inside TableOperations.  \r\n\r\nIt makes more sense that `GlueTableOperations` might have multiple implementations (one that explicitly handles `HadoopFileIO`).  Even then, in an ideal case the only class that would explicitly need to handle hadoop conf would be `HadoopFileIO`.  This would require a more complex `Catalog` initialization implementation (probably some sort of builder pattern) where all of the requisite pieces could be instantiated and configured independently.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908042284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908311617","html_url":"https://github.com/apache/iceberg/pull/3034#issuecomment-908311617","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3034","id":908311617,"node_id":"IC_kwDOCW7NX842I7xB","user":{"login":"hehuiyuan","id":18002496,"node_id":"MDQ6VXNlcjE4MDAyNDk2","avatar_url":"https://avatars.githubusercontent.com/u/18002496?v=4","gravatar_id":"","url":"https://api.github.com/users/hehuiyuan","html_url":"https://github.com/hehuiyuan","followers_url":"https://api.github.com/users/hehuiyuan/followers","following_url":"https://api.github.com/users/hehuiyuan/following{/other_user}","gists_url":"https://api.github.com/users/hehuiyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/hehuiyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hehuiyuan/subscriptions","organizations_url":"https://api.github.com/users/hehuiyuan/orgs","repos_url":"https://api.github.com/users/hehuiyuan/repos","events_url":"https://api.github.com/users/hehuiyuan/events{/privacy}","received_events_url":"https://api.github.com/users/hehuiyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T12:44:57Z","updated_at":"2021-09-18T02:43:29Z","author_association":"NONE","body":"Hi  @kbendick , is that what you mean?\r\nTake a look when you have time.?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908311617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908354618","html_url":"https://github.com/apache/iceberg/pull/3013#issuecomment-908354618","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3013","id":908354618,"node_id":"IC_kwDOCW7NX842JGQ6","user":{"login":"ggershinsky","id":12033212,"node_id":"MDQ6VXNlcjEyMDMzMjEy","avatar_url":"https://avatars.githubusercontent.com/u/12033212?v=4","gravatar_id":"","url":"https://api.github.com/users/ggershinsky","html_url":"https://github.com/ggershinsky","followers_url":"https://api.github.com/users/ggershinsky/followers","following_url":"https://api.github.com/users/ggershinsky/following{/other_user}","gists_url":"https://api.github.com/users/ggershinsky/gists{/gist_id}","starred_url":"https://api.github.com/users/ggershinsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ggershinsky/subscriptions","organizations_url":"https://api.github.com/users/ggershinsky/orgs","repos_url":"https://api.github.com/users/ggershinsky/repos","events_url":"https://api.github.com/users/ggershinsky/events{/privacy}","received_events_url":"https://api.github.com/users/ggershinsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T13:43:25Z","updated_at":"2021-08-30T13:43:25Z","author_association":"CONTRIBUTOR","body":"Back from the vacation. This PR is a part of the \"encryption package\", comprised of a number of disjoint pull requests. I've sent a combined PR #3053  that creates an end-to-end implementation - sans the DDL part (using table properties for encryption activation). @huaxingao , will appreciate if you'd have a look at it for a compatibility with your PR down the road. I agree we should converge first on the implementation design and details, adding the DDL interface as the next step. Still, I think it's good to have all pieces in place before we start iterating on them.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908354618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908417067","html_url":"https://github.com/apache/iceberg/pull/3052#issuecomment-908417067","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3052","id":908417067,"node_id":"IC_kwDOCW7NX842JVgr","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T15:01:56Z","updated_at":"2021-08-30T15:01:56Z","author_association":"CONTRIBUTOR","body":"Thanks, @rawataaryan9! Looks good. I approved this to run tests and I'll merge when they pass.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908417067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908428481","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-908428481","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":908428481,"node_id":"IC_kwDOCW7NX842JYTB","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T15:14:44Z","updated_at":"2021-08-30T15:14:44Z","author_association":"MEMBER","body":"Thanks for pinging me @aokolnychyi ,  I've been on paternity leave for a while. So seems I've blocked this PR, I will take a look at this PR tomorrow or the day after tomorrow. (Sorry for the delay).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908428481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908430312","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908430312","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908430312,"node_id":"IC_kwDOCW7NX842JYvo","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T15:16:43Z","updated_at":"2021-08-30T15:16:43Z","author_association":"MEMBER","body":"We've encountered many issues or mail list from the iceberg beginners,    I think it would be better if we could add a document in the https://iceberg.apache.org/community/ page. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908430312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908432744","html_url":"https://github.com/apache/iceberg/pull/2230#issuecomment-908432744","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2230","id":908432744,"node_id":"IC_kwDOCW7NX842JZVo","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T15:19:46Z","updated_at":"2021-08-30T15:19:46Z","author_association":"MEMBER","body":"Thanks for picking this up, @xingbowu .  I would like to be the reviewer for this PR if you would like to make this into several small PRs.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908432744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908439747","html_url":"https://github.com/apache/iceberg/pull/2230#issuecomment-908439747","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2230","id":908439747,"node_id":"IC_kwDOCW7NX842JbDD","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T15:28:40Z","updated_at":"2021-08-30T15:28:40Z","author_association":"CONTRIBUTOR","body":"@openinx and @xingbowu, Let me know if I can help get this in!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908439747/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908556812","html_url":"https://github.com/apache/iceberg/pull/3052#issuecomment-908556812","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3052","id":908556812,"node_id":"IC_kwDOCW7NX842J3oM","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T17:52:58Z","updated_at":"2021-08-30T17:52:58Z","author_association":"CONTRIBUTOR","body":"Merged. I'm also marking this for inclusion in a patch release if we decide to make one. While it probably isn't reason in itself to do another release, it would be nice to fix this for people.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908556812/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908573562","html_url":"https://github.com/apache/iceberg/issues/3046#issuecomment-908573562","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3046","id":908573562,"node_id":"IC_kwDOCW7NX842J7t6","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T18:15:30Z","updated_at":"2021-08-30T18:15:30Z","author_association":"CONTRIBUTOR","body":"I spoke to @alexey-fin on Slack, and we're going to close this issue as they're not able to reproduce this at all anymore.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908573562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908590215","html_url":"https://github.com/apache/iceberg/issues/3050#issuecomment-908590215","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3050","id":908590215,"node_id":"IC_kwDOCW7NX842J_yH","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T18:40:01Z","updated_at":"2021-08-30T18:40:01Z","author_association":"CONTRIBUTOR","body":"Oh that's great. Thank you @stevenzwu for the info.\r\n\r\nWe are hoping to reduce the tight coupling of Hadoop `Configuration` from the catalogs, as some folks have pointed out that it's difficult (or not presently possible as far as they know) to use things like `GlueCatalog` which don't actually require Hadoop in environments that are difficult to configure (specifically when using `AWS Kinesis Data Analytics`).\r\n\r\nFurther information can be found in this issue: https://github.com/apache/iceberg/issues/3044\r\n\r\nSpecifically, S3FileIO doesn't actually make use of anything from the `Configurable` interface, so there is an effort to try to make it so that `GlueCatalog` (and also `DynamoDbCatalog`) can be used in environments where Hadoop is not present and that is difficult to configure for them. This will greatly help with that goal. Eventually, it might wind up being beneficial to use the class loader that's provided by the new `Context` interface of Flink 1.13's `CatalogFactory`.\r\n\r\nI'll leave the rest of the discussion over in that issue (and possibly bring it up in that PR, though it's something that can be done in a follow up PR once this open one has been merged in).\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908590215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908590765","html_url":"https://github.com/apache/iceberg/issues/3050#issuecomment-908590765","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3050","id":908590765,"node_id":"IC_kwDOCW7NX842J_6t","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T18:40:58Z","updated_at":"2021-08-30T18:40:58Z","author_association":"CONTRIBUTOR","body":"I will close this as a duplicate of https://github.com/apache/iceberg/issues/2558","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908590765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908597980","html_url":"https://github.com/apache/iceberg/issues/2558#issuecomment-908597980","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2558","id":908597980,"node_id":"IC_kwDOCW7NX842KBrc","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T18:51:18Z","updated_at":"2021-08-30T18:51:18Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this. I wanted to draw attention to the issue mentioned above (Update FlinkCatalogFactory to implement the new Factory interface). I closed it as basically a duplicate of this one though.\r\n\r\nThe reason I opened that issue is that several users have reported difficulties in using Iceberg with Flink, specifically in configuring Hadoop.\r\n\r\nIn some environments, users might not have access to setup the class path properly for including Hadoop. The new [Context interface that provides access to the ClassLoader ](https://github.com/apache/flink/commit/4497e96b96724aee6637f19f64ffc8ba47a9b0ac#diff-d4dda8460ab068327897de5487517f43186faced18d3a121981e70f6ad9f827aR85) might help with that.\r\n\r\nThe ultimate goal is to decouple the need for hadoop to be in the environment when it's not actually needed (for example, when using `S3FileIO`). The thought was that upgrading to 1.13 (and the new FlinkCatalogFactory interface) will be helpful to provide the easier access to the ClassLoader.\r\n\r\nIn environments where hadoop `Configuration` isn't used, such as Ververica Platform or AWS Kinesis Data Analytics with `S3FileIO`, the hope is to remove the need for the Hadoop `Configuration` entirely.\r\n\r\nFor Ververica, users have reported a workaround but in Kinesis Data Analytics, it's a bit more difficult (as far as has been reported).\r\n\r\nMore information on the Hadoop `Configurable` concern can be found in this issue: https://github.com/apache/iceberg/issues/3044\r\n\r\nThanks again @zhangjun0x01!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908597980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908609408","html_url":"https://github.com/apache/iceberg/issues/2934#issuecomment-908609408","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2934","id":908609408,"node_id":"IC_kwDOCW7NX842KEeA","user":{"login":"cccs-br","id":56260250,"node_id":"MDQ6VXNlcjU2MjYwMjUw","avatar_url":"https://avatars.githubusercontent.com/u/56260250?v=4","gravatar_id":"","url":"https://api.github.com/users/cccs-br","html_url":"https://github.com/cccs-br","followers_url":"https://api.github.com/users/cccs-br/followers","following_url":"https://api.github.com/users/cccs-br/following{/other_user}","gists_url":"https://api.github.com/users/cccs-br/gists{/gist_id}","starred_url":"https://api.github.com/users/cccs-br/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cccs-br/subscriptions","organizations_url":"https://api.github.com/users/cccs-br/orgs","repos_url":"https://api.github.com/users/cccs-br/repos","events_url":"https://api.github.com/users/cccs-br/events{/privacy}","received_events_url":"https://api.github.com/users/cccs-br/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T19:06:52Z","updated_at":"2021-08-30T19:06:52Z","author_association":"NONE","body":"Hi everyone, ...was just wondering if there are any updates on this?  As always, thank you.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908609408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908610677","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-908610677","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":908610677,"node_id":"IC_kwDOCW7NX842KEx1","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T19:08:31Z","updated_at":"2021-08-30T19:08:31Z","author_association":"CONTRIBUTOR","body":"Once we sort this out, we should definitely update the docs to clarify how to use Iceberg on Kinesis Data Analytics. We presently mention `EMR` in depth and have a section that mentions `Kinesis` (KDA), but the KDA docs don't go into much detail: https://iceberg.apache.org/aws/#run-iceberg-on-aws","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908610677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908613323","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-908613323","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":908613323,"node_id":"IC_kwDOCW7NX842KFbL","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T19:11:16Z","updated_at":"2021-08-30T19:11:16Z","author_association":"CONTRIBUTOR","body":"No worries, @openinx! Thank you!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908613323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908635309","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-908635309","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":908635309,"node_id":"IC_kwDOCW7NX842KKyt","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T19:41:45Z","updated_at":"2021-08-30T19:55:43Z","author_association":"CONTRIBUTOR","body":"There's an open PR for upgrading to Flink 1.13. I left some comments there, but my larger concern is not being able to access additional catalog options.  I've left some comments on that PR: https://github.com/apache/iceberg/pull/2629\r\n\r\n> One possible solution is to add glue as one of the known catalog-type's and avoid calling clusterHadoopConf() when the user sets this value (I tested this change with a local build and it worked in a non-hadoop environment).\r\n\r\nAt present, I think adding to the known `catalog-type`s might be the best path forward to resolve the issue more immediately. I asked on the upgrade to Flink 1.13 PR, but it's possible that generically allowing `*` as an additional catalog option might not be possible. In which case, we'll definitely need to add `glue` etc (or at least all of their possible options).\r\n\r\n> I believe that one potential root issue is that FileIO has leaked out from TableOperations into catalog implementations like GlueCatalog. Theoretically, provided a catalog extending BaseMetastoreCatalog can implement newTableOps then all the FileIO configuration should happen inside TableOperations.\r\n\r\nIn the longer term, if these larger API changes to the interactions between `FileIO` and `TableOperations` and `Catalog` are undertaken / considered, we can remove the added `catalog-type`s if need be. But this is possibly a larger API change that will probably need to be considered a bit more closely.\r\n\r\nIn the near-term, I think it's most realistic to add the catalogs we support here in the repo to `catalog-type` to address the immediate issue. They can be removed later on if they're not needed / if the API changes. Plus, the additional configs (even for S3FileIO / AWS Authentication) might need to be added as predeclared to the `FlinkCatalogFactoryOptions` class as part of the 1.13 upgrade.\r\n\r\nIf somebody can provide a workaround for KDA, then the issue wouldn't necessarily be as pressing.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908635309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908682253","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-908682253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":908682253,"node_id":"IC_kwDOCW7NX842KWQN","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T20:46:42Z","updated_at":"2021-08-30T20:46:42Z","author_association":"CONTRIBUTOR","body":"@openinx, congratulations!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908682253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908685270","html_url":"https://github.com/apache/iceberg/issues/2972#issuecomment-908685270","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2972","id":908685270,"node_id":"IC_kwDOCW7NX842KW_W","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T20:51:35Z","updated_at":"2021-08-30T20:51:35Z","author_association":"CONTRIBUTOR","body":"Hi @rodfsouza, are you still working on this issue?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908685270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908685960","html_url":"https://github.com/apache/iceberg/issues/3014#issuecomment-908685960","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3014","id":908685960,"node_id":"IC_kwDOCW7NX842KXKI","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-30T20:52:48Z","updated_at":"2021-08-30T20:52:48Z","author_association":"MEMBER","body":"@xinbinhuang How are things going?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908685960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908852178","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908852178","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908852178,"node_id":"IC_kwDOCW7NX842K_vS","user":{"login":"fuchanghai","id":33984497,"node_id":"MDQ6VXNlcjMzOTg0NDk3","avatar_url":"https://avatars.githubusercontent.com/u/33984497?v=4","gravatar_id":"","url":"https://api.github.com/users/fuchanghai","html_url":"https://github.com/fuchanghai","followers_url":"https://api.github.com/users/fuchanghai/followers","following_url":"https://api.github.com/users/fuchanghai/following{/other_user}","gists_url":"https://api.github.com/users/fuchanghai/gists{/gist_id}","starred_url":"https://api.github.com/users/fuchanghai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuchanghai/subscriptions","organizations_url":"https://api.github.com/users/fuchanghai/orgs","repos_url":"https://api.github.com/users/fuchanghai/repos","events_url":"https://api.github.com/users/fuchanghai/events{/privacy}","received_events_url":"https://api.github.com/users/fuchanghai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T02:45:12Z","updated_at":"2021-08-31T02:45:12Z","author_association":"MEMBER","body":"> We've encountered many issues or mail list from the iceberg beginners, I think it would be better if we could add a document in the https://iceberg.apache.org/community/ page.\r\n\r\nIts the first time I use gradle, maybe I have to understand gradle first to solve the environment dependency problem\r\nI'm sorry to bother you because of some low-level questions ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908852178/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908856289","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908856289","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908856289,"node_id":"IC_kwDOCW7NX842LAvh","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T02:57:35Z","updated_at":"2021-08-31T02:57:35Z","author_association":"MEMBER","body":"Try running the build, usually after building the project Intellij will be able to find the shaded libs. The issues is that the build puts those files in the proper place, so intellij doesn't think they are real until you've run the build.\r\n\r\nI agree with @openinx we should document this! I think we had a pr for it at one point ... @kbendick ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908856289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908867626","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908867626","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908867626,"node_id":"IC_kwDOCW7NX842LDgq","user":{"login":"myandpr","id":20159351,"node_id":"MDQ6VXNlcjIwMTU5MzUx","avatar_url":"https://avatars.githubusercontent.com/u/20159351?v=4","gravatar_id":"","url":"https://api.github.com/users/myandpr","html_url":"https://github.com/myandpr","followers_url":"https://api.github.com/users/myandpr/followers","following_url":"https://api.github.com/users/myandpr/following{/other_user}","gists_url":"https://api.github.com/users/myandpr/gists{/gist_id}","starred_url":"https://api.github.com/users/myandpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myandpr/subscriptions","organizations_url":"https://api.github.com/users/myandpr/orgs","repos_url":"https://api.github.com/users/myandpr/repos","events_url":"https://api.github.com/users/myandpr/events{/privacy}","received_events_url":"https://api.github.com/users/myandpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T03:25:34Z","updated_at":"2021-08-31T03:25:34Z","author_association":"CONTRIBUTOR","body":"If after building the project the problem hasn`t been solved yet, you can try this:\r\n```\r\n./gradlew clean build -x test -x javadoc -x integrationTest\r\n```\r\nif Intellij still cant`t find the shaded libs, you can \"Reload All Gradle Projects\". Usually can solve the problem.  @fuchanghai\r\n![image](https://user-images.githubusercontent.com/20159351/131436664-026699e3-10c2-40c8-bca3-bca619f04f76.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908867626/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908869324","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908869324","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908869324,"node_id":"IC_kwDOCW7NX842LD7M","user":{"login":"fuchanghai","id":33984497,"node_id":"MDQ6VXNlcjMzOTg0NDk3","avatar_url":"https://avatars.githubusercontent.com/u/33984497?v=4","gravatar_id":"","url":"https://api.github.com/users/fuchanghai","html_url":"https://github.com/fuchanghai","followers_url":"https://api.github.com/users/fuchanghai/followers","following_url":"https://api.github.com/users/fuchanghai/following{/other_user}","gists_url":"https://api.github.com/users/fuchanghai/gists{/gist_id}","starred_url":"https://api.github.com/users/fuchanghai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuchanghai/subscriptions","organizations_url":"https://api.github.com/users/fuchanghai/orgs","repos_url":"https://api.github.com/users/fuchanghai/repos","events_url":"https://api.github.com/users/fuchanghai/events{/privacy}","received_events_url":"https://api.github.com/users/fuchanghai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T03:30:48Z","updated_at":"2021-08-31T03:30:48Z","author_association":"MEMBER","body":"> If after building the project the problem hasn`t been solved yet, you can try this:\r\n> \r\n> ```\r\n> ./gradlew clean build -x test -x javadoc -x integrationTest\r\n> ```\r\n> \r\n> if Intellij still cant`t find the shaded libs, you can \"Reload All Gradle Projects\". Usually can solve the problem. @fuchanghai\r\n> ![image](https://user-images.githubusercontent.com/20159351/131436664-026699e3-10c2-40c8-bca3-bca619f04f76.png)\r\n\r\nI ran this project on windows, so there are some line break problems when I build(It needs '\\n 'but gave '\\r\\n')\r\n![image](https://user-images.githubusercontent.com/33984497/131437213-8bde219b-68fa-4e5f-b8ae-6972d0bbc6b2.png)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908869324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908899467","html_url":"https://github.com/apache/iceberg/issues/2208#issuecomment-908899467","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2208","id":908899467,"node_id":"IC_kwDOCW7NX842LLSL","user":{"login":"spancer","id":1046225,"node_id":"MDQ6VXNlcjEwNDYyMjU=","avatar_url":"https://avatars.githubusercontent.com/u/1046225?v=4","gravatar_id":"","url":"https://api.github.com/users/spancer","html_url":"https://github.com/spancer","followers_url":"https://api.github.com/users/spancer/followers","following_url":"https://api.github.com/users/spancer/following{/other_user}","gists_url":"https://api.github.com/users/spancer/gists{/gist_id}","starred_url":"https://api.github.com/users/spancer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/spancer/subscriptions","organizations_url":"https://api.github.com/users/spancer/orgs","repos_url":"https://api.github.com/users/spancer/repos","events_url":"https://api.github.com/users/spancer/events{/privacy}","received_events_url":"https://api.github.com/users/spancer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T04:59:44Z","updated_at":"2021-08-31T04:59:44Z","author_association":"NONE","body":"> Currently, Flink Iceberg sink can only write to one table with exactly-once semantic.\r\n> \r\n> If the table partition doesn't fit your requirements, maybe you can use filter or side output to split the stream into multiple sub streams. then attach a separate Iceberg sink to each sub DataStream. This probably won't work if the number of tables/datasets is really high (like hundreds). In that case, maybe split the uber stream before the Iceberg ingestion jobs.\r\n\r\nHi steven, \r\n  Using a side-output stream and attach a separate sink to each sub-stream can't solve the problem gracefully. This requires a fixed count of sub-streams, or we have to bind each sub-stream to a pre-defined name, otherwise, we can't use them in the follow-up sink. Because we have to make sure the job graph is pre-defined. I think using two jobs might achieve this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908899467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908969597","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-908969597","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":908969597,"node_id":"IC_kwDOCW7NX842LcZ9","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T07:21:08Z","updated_at":"2021-08-31T07:21:08Z","author_association":"NONE","body":"Yes, it's kind of a deadlock for us as without `expireSnapshots` flink job is taking up memory and also checkpoint time is very high. But with `expireSnapshots`, flink is not being able to create the history.\r\n\r\n@rdblue I don't think its about the number of snapshots to be expired as `startingSnapshotId` is always set to null so flink tries to get the complete history. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908969597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908979556","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-908979556","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":908979556,"node_id":"IC_kwDOCW7NX842Le1k","user":{"login":"fuchanghai","id":33984497,"node_id":"MDQ6VXNlcjMzOTg0NDk3","avatar_url":"https://avatars.githubusercontent.com/u/33984497?v=4","gravatar_id":"","url":"https://api.github.com/users/fuchanghai","html_url":"https://github.com/fuchanghai","followers_url":"https://api.github.com/users/fuchanghai/followers","following_url":"https://api.github.com/users/fuchanghai/following{/other_user}","gists_url":"https://api.github.com/users/fuchanghai/gists{/gist_id}","starred_url":"https://api.github.com/users/fuchanghai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuchanghai/subscriptions","organizations_url":"https://api.github.com/users/fuchanghai/orgs","repos_url":"https://api.github.com/users/fuchanghai/repos","events_url":"https://api.github.com/users/fuchanghai/events{/privacy}","received_events_url":"https://api.github.com/users/fuchanghai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T07:37:25Z","updated_at":"2021-08-31T07:37:25Z","author_association":"MEMBER","body":"It seems to work on my Mac, but not on Windows","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/908979556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909015445","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-909015445","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":909015445,"node_id":"IC_kwDOCW7NX842LnmV","user":{"login":"myandpr","id":20159351,"node_id":"MDQ6VXNlcjIwMTU5MzUx","avatar_url":"https://avatars.githubusercontent.com/u/20159351?v=4","gravatar_id":"","url":"https://api.github.com/users/myandpr","html_url":"https://github.com/myandpr","followers_url":"https://api.github.com/users/myandpr/followers","following_url":"https://api.github.com/users/myandpr/following{/other_user}","gists_url":"https://api.github.com/users/myandpr/gists{/gist_id}","starred_url":"https://api.github.com/users/myandpr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myandpr/subscriptions","organizations_url":"https://api.github.com/users/myandpr/orgs","repos_url":"https://api.github.com/users/myandpr/repos","events_url":"https://api.github.com/users/myandpr/events{/privacy}","received_events_url":"https://api.github.com/users/myandpr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T08:25:10Z","updated_at":"2021-08-31T08:25:10Z","author_association":"CONTRIBUTOR","body":"yes,obviously it`s file format error.Maybe your code is from linux os and you read it in win os.Please pull code from github directly.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909015445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909082159","html_url":"https://github.com/apache/iceberg/issues/3028#issuecomment-909082159","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3028","id":909082159,"node_id":"IC_kwDOCW7NX842L34v","user":{"login":"fuchanghai","id":33984497,"node_id":"MDQ6VXNlcjMzOTg0NDk3","avatar_url":"https://avatars.githubusercontent.com/u/33984497?v=4","gravatar_id":"","url":"https://api.github.com/users/fuchanghai","html_url":"https://github.com/fuchanghai","followers_url":"https://api.github.com/users/fuchanghai/followers","following_url":"https://api.github.com/users/fuchanghai/following{/other_user}","gists_url":"https://api.github.com/users/fuchanghai/gists{/gist_id}","starred_url":"https://api.github.com/users/fuchanghai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuchanghai/subscriptions","organizations_url":"https://api.github.com/users/fuchanghai/orgs","repos_url":"https://api.github.com/users/fuchanghai/repos","events_url":"https://api.github.com/users/fuchanghai/events{/privacy}","received_events_url":"https://api.github.com/users/fuchanghai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T09:53:03Z","updated_at":"2021-08-31T09:53:03Z","author_association":"MEMBER","body":"\r\n\r\n\r\n> yes,obviously it`s file format error.Maybe your code is from linux os and you read it in win os.Please pull code from github directly.\r\n\r\nI'm sure I pulled it directly from github. Now I use intellj to change the line separators to LF. It is still the same as the original . Classes starting with org.apache.iceberg.relocated cannot be imported, and other dependencies All are ok. I temporarily developed it with MAC","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909082159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909095921","html_url":"https://github.com/apache/iceberg/issues/3014#issuecomment-909095921","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3014","id":909095921,"node_id":"IC_kwDOCW7NX842L7Px","user":{"login":"xinbinhuang","id":27927454,"node_id":"MDQ6VXNlcjI3OTI3NDU0","avatar_url":"https://avatars.githubusercontent.com/u/27927454?v=4","gravatar_id":"","url":"https://api.github.com/users/xinbinhuang","html_url":"https://github.com/xinbinhuang","followers_url":"https://api.github.com/users/xinbinhuang/followers","following_url":"https://api.github.com/users/xinbinhuang/following{/other_user}","gists_url":"https://api.github.com/users/xinbinhuang/gists{/gist_id}","starred_url":"https://api.github.com/users/xinbinhuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xinbinhuang/subscriptions","organizations_url":"https://api.github.com/users/xinbinhuang/orgs","repos_url":"https://api.github.com/users/xinbinhuang/repos","events_url":"https://api.github.com/users/xinbinhuang/events{/privacy}","received_events_url":"https://api.github.com/users/xinbinhuang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T10:11:18Z","updated_at":"2021-08-31T10:11:18Z","author_association":"CONTRIBUTOR","body":"Hi @RussellSpitzer  , I had some time to look into the code last week but haven't gotten the time to draft up a PR yet. Planing to do it in the next two days. But I'm aware it has passed quite a few days from last Thursday, so if it'll be too late to get into the release cycle or it blocks other works. Please go ahead to fix it :)\n\nThanks!\nBin","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909095921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909209277","html_url":"https://github.com/apache/iceberg/issues/2991#issuecomment-909209277","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2991","id":909209277,"node_id":"IC_kwDOCW7NX842MW69","user":{"login":"fcvr1010","id":17031474,"node_id":"MDQ6VXNlcjE3MDMxNDc0","avatar_url":"https://avatars.githubusercontent.com/u/17031474?v=4","gravatar_id":"","url":"https://api.github.com/users/fcvr1010","html_url":"https://github.com/fcvr1010","followers_url":"https://api.github.com/users/fcvr1010/followers","following_url":"https://api.github.com/users/fcvr1010/following{/other_user}","gists_url":"https://api.github.com/users/fcvr1010/gists{/gist_id}","starred_url":"https://api.github.com/users/fcvr1010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcvr1010/subscriptions","organizations_url":"https://api.github.com/users/fcvr1010/orgs","repos_url":"https://api.github.com/users/fcvr1010/repos","events_url":"https://api.github.com/users/fcvr1010/events{/privacy}","received_events_url":"https://api.github.com/users/fcvr1010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T12:54:05Z","updated_at":"2021-08-31T12:55:10Z","author_association":"NONE","body":"I think I'm also running into the same problem. Setup is similar, EMR version 6.2.0 (so Spark 3.0.1), Iceberg 0.12, and I'm using the Glue Catalog with DynamoDB for locking as per the [Iceberg docs](https://iceberg.apache.org/aws/#iceberg-aws-integrations). The job is a PySpark job.\r\n\r\nFull error is the following. From `stderr`\r\n\r\n```text\r\nERROR TaskSetManager Task 0 in stage 3.0 failed 4 times; aborting job\r\nERROR AppendDataExec Data source write support IcebergBatchWrite(table=my_table, format=PARQUET) is aborting.\r\nERROR AppendDataExec Data source write support IcebergBatchWrite(table=my_table, format=PARQUET) aborted.\r\nERROR ApplicationMaster User application exited with status 1\r\n```\r\n\r\nand `stdout`\r\n\r\n```text\r\npy4j.protocol.Py4JJavaError: An error occurred while calling o147.saveAsTable.\r\n: org.apache.spark.SparkException: Writing job aborted.\r\n[...]\r\nCaused by: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 3.0 failed 4 times, most recent failure: Lost task 0.3 in stage 3.0 (TID 6, ip-1-2-3-4.eu-central-1.compute.internal, executor 3): java.io.UncheckedIOException: Failed to create output stream for location: s3://my_table_prefix/data/00000-6-ae5ed834-17b9-423f-b650-7c2783ebf81b-00001.parquet\r\n\tat org.apache.iceberg.aws.s3.S3OutputFile.createOrOverwrite(S3OutputFile.java:64)\r\n\tat org.apache.iceberg.parquet.ParquetIO$ParquetOutputFile.createOrOverwrite(ParquetIO.java:153)\r\n[...]\r\nCaused by: java.io.IOException: No such file or directory\r\n\tat java.io.UnixFileSystem.createFileExclusively(Native Method)\r\n\tat java.io.File.createTempFile(File.java:2063)\r\n\tat org.apache.iceberg.aws.s3.S3OutputStream.newStream(S3OutputStream.java:178)\r\n\tat org.apache.iceberg.aws.s3.S3OutputStream.<init>(S3OutputStream.java:114)\r\n\tat org.apache.iceberg.aws.s3.S3OutputFile.createOrOverwrite(S3OutputFile.java:62)\r\n\t... 28 more\r\n\r\nDriver stacktrace:\r\n\tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2215)\r\n\t[...]\r\nCaused by: java.io.UncheckedIOException: Failed to create output stream for location: s3://my_table_prefix/data/00000-6-ae5ed834-17b9-423f-b650-7c2783ebf81b-00001.parquet\r\n    [...]\r\nCaused by: java.io.IOException: No such file or directory\r\n\tat java.io.UnixFileSystem.createFileExclusively(Native Method)\r\n\tat java.io.File.createTempFile(File.java:2063)\r\n\tat org.apache.iceberg.aws.s3.S3OutputStream.newStream(S3OutputStream.java:178)\r\n\tat org.apache.iceberg.aws.s3.S3OutputStream.<init>(S3OutputStream.java:114)\r\n\tat org.apache.iceberg.aws.s3.S3OutputFile.createOrOverwrite(S3OutputFile.java:62)\r\n\t... 28 more\r\n```\r\n\r\nThe Iceberg and related JARs are backed into the Amazon Machine Image we use with code similar to the Spark example in [the docs](https://iceberg.apache.org/aws/#iceberg-aws-integrations).\r\n\r\nWe also have multiple [core nodes](https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-master-core-task-nodes.html) but I don't think the issue from the core nodes themselves. In fact, I observed that it happens in the following scenario: driver from an application A and executor from application B run concurrently on the same node. The executor  fails with the above message. I verified that the node is one of the _task_ nodes, not the _core_ ones.\r\n\r\nI tried to add `-Djava.io.tmpdir=/tmp/driver/` to ` spark.driver.extraJavaOptions` but didn't help in my case.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909209277/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909299051","html_url":"https://github.com/apache/iceberg/issues/2991#issuecomment-909299051","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2991","id":909299051,"node_id":"IC_kwDOCW7NX842Ms1r","user":{"login":"fcvr1010","id":17031474,"node_id":"MDQ6VXNlcjE3MDMxNDc0","avatar_url":"https://avatars.githubusercontent.com/u/17031474?v=4","gravatar_id":"","url":"https://api.github.com/users/fcvr1010","html_url":"https://github.com/fcvr1010","followers_url":"https://api.github.com/users/fcvr1010/followers","following_url":"https://api.github.com/users/fcvr1010/following{/other_user}","gists_url":"https://api.github.com/users/fcvr1010/gists{/gist_id}","starred_url":"https://api.github.com/users/fcvr1010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcvr1010/subscriptions","organizations_url":"https://api.github.com/users/fcvr1010/orgs","repos_url":"https://api.github.com/users/fcvr1010/repos","events_url":"https://api.github.com/users/fcvr1010/events{/privacy}","received_events_url":"https://api.github.com/users/fcvr1010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T14:38:16Z","updated_at":"2021-08-31T14:38:16Z","author_association":"NONE","body":"**UPDATE** WRT my previous comment. I've experienced the issue even when the failed executor was not on the same node of another app's driver, so the driver-executor interaction is probably a red-herring in my case.\r\n\r\nThis really puzzles me, though. How can the tmp file be created just fine most of the times, but not always? \r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909299051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909338948","html_url":"https://github.com/apache/iceberg/issues/2484#issuecomment-909338948","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2484","id":909338948,"node_id":"IC_kwDOCW7NX842M2lE","user":{"login":"mayursrivastava","id":8659624,"node_id":"MDQ6VXNlcjg2NTk2MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8659624?v=4","gravatar_id":"","url":"https://api.github.com/users/mayursrivastava","html_url":"https://github.com/mayursrivastava","followers_url":"https://api.github.com/users/mayursrivastava/followers","following_url":"https://api.github.com/users/mayursrivastava/following{/other_user}","gists_url":"https://api.github.com/users/mayursrivastava/gists{/gist_id}","starred_url":"https://api.github.com/users/mayursrivastava/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mayursrivastava/subscriptions","organizations_url":"https://api.github.com/users/mayursrivastava/orgs","repos_url":"https://api.github.com/users/mayursrivastava/repos","events_url":"https://api.github.com/users/mayursrivastava/events{/privacy}","received_events_url":"https://api.github.com/users/mayursrivastava/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T15:23:50Z","updated_at":"2021-08-31T15:23:50Z","author_association":"CONTRIBUTOR","body":"@nastra I left 2 comments in the pr. Thanks for adding the feature.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909338948/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909355804","html_url":"https://github.com/apache/iceberg/pull/3039#issuecomment-909355804","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3039","id":909355804,"node_id":"IC_kwDOCW7NX842M6sc","user":{"login":"SreeramGarlapati","id":11813428,"node_id":"MDQ6VXNlcjExODEzNDI4","avatar_url":"https://avatars.githubusercontent.com/u/11813428?v=4","gravatar_id":"","url":"https://api.github.com/users/SreeramGarlapati","html_url":"https://github.com/SreeramGarlapati","followers_url":"https://api.github.com/users/SreeramGarlapati/followers","following_url":"https://api.github.com/users/SreeramGarlapati/following{/other_user}","gists_url":"https://api.github.com/users/SreeramGarlapati/gists{/gist_id}","starred_url":"https://api.github.com/users/SreeramGarlapati/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SreeramGarlapati/subscriptions","organizations_url":"https://api.github.com/users/SreeramGarlapati/orgs","repos_url":"https://api.github.com/users/SreeramGarlapati/repos","events_url":"https://api.github.com/users/SreeramGarlapati/events{/privacy}","received_events_url":"https://api.github.com/users/SreeramGarlapati/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T15:44:03Z","updated_at":"2021-08-31T15:44:03Z","author_association":"COLLABORATOR","body":"@kbendick - thanks a lot for the review.\r\n@zhengzengprc - pl. take this PR forward..","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909355804/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909358112","html_url":"https://github.com/apache/iceberg/issues/3055#issuecomment-909358112","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3055","id":909358112,"node_id":"IC_kwDOCW7NX842M7Qg","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T15:46:46Z","updated_at":"2021-08-31T15:46:46Z","author_association":"CONTRIBUTOR","body":"I think we had a recent report of an Avro issue resurfacing, where readers could hang in certain cases. We'll have to look into this more.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909358112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909404305","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-909404305","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":909404305,"node_id":"IC_kwDOCW7NX842NGiR","user":{"login":"yupbank","id":741544,"node_id":"MDQ6VXNlcjc0MTU0NA==","avatar_url":"https://avatars.githubusercontent.com/u/741544?v=4","gravatar_id":"","url":"https://api.github.com/users/yupbank","html_url":"https://github.com/yupbank","followers_url":"https://api.github.com/users/yupbank/followers","following_url":"https://api.github.com/users/yupbank/following{/other_user}","gists_url":"https://api.github.com/users/yupbank/gists{/gist_id}","starred_url":"https://api.github.com/users/yupbank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupbank/subscriptions","organizations_url":"https://api.github.com/users/yupbank/orgs","repos_url":"https://api.github.com/users/yupbank/repos","events_url":"https://api.github.com/users/yupbank/events{/privacy}","received_events_url":"https://api.github.com/users/yupbank/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T16:43:43Z","updated_at":"2021-08-31T16:43:43Z","author_association":"NONE","body":"is there any progress on this ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909404305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909449473","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-909449473","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":909449473,"node_id":"IC_kwDOCW7NX842NRkB","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T17:41:58Z","updated_at":"2021-08-31T17:41:58Z","author_association":"CONTRIBUTOR","body":"@yupbank, @sunchao has a design doc for this that he's planning on sharing with the Spark community soon. I think that there is also some work going on to enable bucketed joins in Trino.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909449473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909453144","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-909453144","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":909453144,"node_id":"IC_kwDOCW7NX842NSdY","user":{"login":"sunchao","id":506679,"node_id":"MDQ6VXNlcjUwNjY3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/506679?v=4","gravatar_id":"","url":"https://api.github.com/users/sunchao","html_url":"https://github.com/sunchao","followers_url":"https://api.github.com/users/sunchao/followers","following_url":"https://api.github.com/users/sunchao/following{/other_user}","gists_url":"https://api.github.com/users/sunchao/gists{/gist_id}","starred_url":"https://api.github.com/users/sunchao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunchao/subscriptions","organizations_url":"https://api.github.com/users/sunchao/orgs","repos_url":"https://api.github.com/users/sunchao/repos","events_url":"https://api.github.com/users/sunchao/events{/privacy}","received_events_url":"https://api.github.com/users/sunchao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T17:46:39Z","updated_at":"2021-08-31T17:46:39Z","author_association":"MEMBER","body":"Hi @yupbank , yes like @rdblue said I'm in the process of wrapping up a design doc for this feature. Will cross link it here soon!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909453144/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909471717","html_url":"https://github.com/apache/iceberg/issues/430#issuecomment-909471717","issue_url":"https://api.github.com/repos/apache/iceberg/issues/430","id":909471717,"node_id":"IC_kwDOCW7NX842NW_l","user":{"login":"yupbank","id":741544,"node_id":"MDQ6VXNlcjc0MTU0NA==","avatar_url":"https://avatars.githubusercontent.com/u/741544?v=4","gravatar_id":"","url":"https://api.github.com/users/yupbank","html_url":"https://github.com/yupbank","followers_url":"https://api.github.com/users/yupbank/followers","following_url":"https://api.github.com/users/yupbank/following{/other_user}","gists_url":"https://api.github.com/users/yupbank/gists{/gist_id}","starred_url":"https://api.github.com/users/yupbank/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yupbank/subscriptions","organizations_url":"https://api.github.com/users/yupbank/orgs","repos_url":"https://api.github.com/users/yupbank/repos","events_url":"https://api.github.com/users/yupbank/events{/privacy}","received_events_url":"https://api.github.com/users/yupbank/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T18:06:29Z","updated_at":"2021-08-31T18:06:29Z","author_association":"NONE","body":"Nice! let me know if you need extra eyes, would love to help, as we run into the issue of shuffling big records recently ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909471717/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909541605","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-909541605","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":909541605,"node_id":"IC_kwDOCW7NX842NoDl","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T19:28:53Z","updated_at":"2021-08-31T19:28:53Z","author_association":"CONTRIBUTOR","body":"@tiborkiss mentioned in the apache-iceberg Slack that this PR would also be needed to fully support Flink SQL (and not just streaming apps): https://github.com/apache/iceberg/pull/2666","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909541605/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909964634","html_url":"https://github.com/apache/iceberg/pull/3048#issuecomment-909964634","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3048","id":909964634,"node_id":"IC_kwDOCW7NX842PPVa","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T06:47:15Z","updated_at":"2021-09-01T06:47:15Z","author_association":"CONTRIBUTOR","body":"@rdblue thanks for the quick review! \r\n\r\nAfter experimenting the whole night for a few different ways, I think it is likely better to\r\n1. directly map Iceberg partition fields to Glue partition keys, in that sense the iceberg partition fields are basically \"virtual columns\" in Glue\r\n2. add the full Iceberg field string as the comment of each column, so that users can see additional information like optional/required, nested field column ID, etc.\r\n\r\nHere is an example result stored in Glue:\r\n\r\n```json\r\n{\r\n    \"Table\": {\r\n        \"Name\": \"test\",\r\n        \"DatabaseName\": \"jack\",\r\n        \"CreateTime\": \"2021-08-31T22:56:30-07:00\",\r\n        \"UpdateTime\": \"2021-08-31T22:56:30-07:00\",\r\n        \"Retention\": 0,\r\n        \"StorageDescriptor\": {\r\n            \"Columns\": [\r\n                {\r\n                    \"Name\": \"i\",\r\n                    \"Type\": \"int\",\r\n                    \"Comment\": \"Iceberg column: { 1: i: required int }\"\r\n                },\r\n                {\r\n                    \"Name\": \"l\",\r\n                    \"Type\": \"bigint\",\r\n                    \"Comment\": \"Iceberg column: { 2: l: required long }\"\r\n                },\r\n                {\r\n                    \"Name\": \"d\",\r\n                    \"Type\": \"date\",\r\n                    \"Comment\": \"Iceberg column: { 3: d: required date }\"\r\n                },\r\n                {\r\n                    \"Name\": \"t\",\r\n                    \"Type\": \"string\",\r\n                    \"Comment\": \"Iceberg column: { 4: t: required time }\"\r\n                },\r\n                {\r\n                    \"Name\": \"ts\",\r\n                    \"Type\": \"timestamp\",\r\n                    \"Comment\": \"Iceberg column: { 5: ts: required timestamp }\"\r\n                },\r\n                {\r\n                    \"Name\": \"tstz\",\r\n                    \"Type\": \"timestamp\",\r\n                    \"Comment\": \"Iceberg column: { 6: tstz: required timestamptz }\"\r\n                },\r\n                {\r\n                    \"Name\": \"dec\",\r\n                    \"Type\": \"decimal(9,2)\",\r\n                    \"Comment\": \"Iceberg column: { 7: dec: required decimal(9, 2) }\"\r\n                },\r\n                {\r\n                    \"Name\": \"s\",\r\n                    \"Type\": \"string\",\r\n                    \"Comment\": \"Iceberg column: { 8: s: required string }\"\r\n                },\r\n                {\r\n                    \"Name\": \"u\",\r\n                    \"Type\": \"string\",\r\n                    \"Comment\": \"Iceberg column: { 9: u: required uuid }\"\r\n                },\r\n                {\r\n                    \"Name\": \"f\",\r\n                    \"Type\": \"binary\",\r\n                    \"Comment\": \"Iceberg column: { 10: f: required fixed[3] }\"\r\n                },\r\n                {\r\n                    \"Name\": \"b\",\r\n                    \"Type\": \"binary\",\r\n                    \"Comment\": \"Iceberg column: { 11: b: required binary }\"\r\n                },\r\n                {\r\n                    \"Name\": \"struct\",\r\n                    \"Type\": \"struct<i2:int,l2:bigint,d2:date>\",\r\n                    \"Comment\": \"Iceberg column: { 12: struct: required struct<15: i2: required int, 16: l2: required long, 17: d2: required date> }\"\r\n                },\r\n                {\r\n                    \"Name\": \"list\",\r\n                    \"Type\": \"array<struct<i3:int,l3:bigint,d3:date>>\",\r\n                    \"Comment\": \"Iceberg column: { 13: list: required list<struct<19: i3: required int, 20: l3: required long, 21: d3: required date>> }\"\r\n                },\r\n                {\r\n                    \"Name\": \"map\",\r\n                    \"Type\": \"map<string,struct<i4:int,l5:bigint,d6:date>>\",\r\n                    \"Comment\": \"Iceberg column: { 14: map: required map<string, struct<24: i4: required int, 25: l5: required long, 26: d6: required date>> }\"\r\n                }\r\n            ],\r\n            \"Location\": \"s3://bucket/path\",\r\n            \"Compressed\": false,\r\n            \"NumberOfBuckets\": 0,\r\n            \"SortColumns\": [],\r\n            \"StoredAsSubDirectories\": false\r\n        },\r\n        \"PartitionKeys\": [\r\n            {\r\n                \"Name\": \"s_bucket\",\r\n                \"Type\": \"int\",\r\n                \"Comment\": \"Iceberg partition field: {1000: s_bucket: bucket[16](8)}\"\r\n            },\r\n            {\r\n                \"Name\": \"map.i4_trunc\",\r\n                \"Type\": \"int\",\r\n                \"Comment\": \"Iceberg partition field: {1001: map.i4_trunc: truncate[2](24)}\"\r\n            },\r\n            {\r\n                \"Name\": \"ts_day\",\r\n                \"Type\": \"date\",\r\n                \"Comment\": \"Iceberg partition field: {1002: ts_day: day(5)}\"\r\n            },\r\n            {\r\n                \"Name\": \"i\",\r\n                \"Type\": \"int\",\r\n                \"Comment\": \"Iceberg partition field: {1003: i: identity(1)}\"\r\n            },\r\n            {\r\n                \"Name\": \"struct.i2\",\r\n                \"Type\": \"int\",\r\n                \"Comment\": \"Iceberg partition field: {1004: struct.i2: identity(15)}\"\r\n            }\r\n        ],\r\n        \"TableType\": \"EXTERNAL_TABLE\",\r\n        \"Parameters\": {\r\n            \"metadata_location\": \"s3://bucket/path\",\r\n            \"table_type\": \"ICEBERG\"\r\n        }\r\n    }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/909964634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910015259","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-910015259","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":910015259,"node_id":"IC_kwDOCW7NX842Pbsb","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T07:28:45Z","updated_at":"2021-09-01T07:28:45Z","author_association":"CONTRIBUTOR","body":"\r\n> At present, I think adding to the known catalog-types might be the best path forward to resolve the issue more immediately. \r\n\r\nThat is actually something we did not want to do and that's why the aws module is not a part of the flink module dependency. Adding that dependency is likely good for AWS, but as more catalog implementations are added, it becomes not manageable to have that many dependencies.\r\n\r\n>  believe that one potential root issue is that FileIO has leaked out from TableOperations into catalog implementations like GlueCatalog. \r\n\r\nThis was also discussed when implementing the catalog. Having FileIO default definition at catalog level is a feature, that's why `CatalogProperties.FILE_IO_IMPL` was created. Initializing the default FileIO in catalog allows reusing the same FileIO singleton instead of creating many different ones. \r\n\r\nI don't think the problem is solved even if you hide the `FileIO` creation in `TableOprations`, because `FileIO` also checks for the `Configurable` interface, it does not make much difference.\r\n\r\n> Additional updates to the FlinkCatalogFactory are still needed on top of these changes in order to fully remove the hadoop dependency\r\n\r\nYes you are right, we can fully remove the dependency in `GlueCatalog`, but the issue is more on the engine side that basically requires such dependency. The Flink catalog entry point `CatalogFactory.createCatalog(String name, Map<String, String> properties)` has a direct call to `createCatalog(name, properties, clusterHadoopConf())` that initializes Hadoop configuration, and the serialized catalog loader `CustomCatalogLoader` has `SerializableConfiguration` as a field, so you are guaranteed to get serialization exception in Flink if you don't have the Hadoop configuration. This looks like a deeper issue than just a fix at catalog side.\r\n\r\nI think we should first tackle this on engine side, and then see what's the best way forward for catalog implementations. This seems like a valid ask for Flink catalog factory improvement.\r\n\r\nMeanwhile, although a bit hacky, why not add just 2 empty classes `Configuration` and `Configurable` to your classpath? That removes the need for the entire hadoop jar.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910015259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910024430","html_url":"https://github.com/apache/iceberg/pull/3035#issuecomment-910024430","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3035","id":910024430,"node_id":"IC_kwDOCW7NX842Pd7u","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T07:41:07Z","updated_at":"2021-09-01T07:41:07Z","author_association":"CONTRIBUTOR","body":"can you also add the following integration test?\r\n\r\n```\r\n  @Test\r\n  public void testDropNamespace() {\r\n    Namespace namespace = Namespace.of(genRandomName());\r\n    catalog.createNamespace(namespace);\r\n    catalog.dropNamespace(namespace);\r\n    GetItemResponse response = dynamo.getItem(GetItemRequest.builder()\r\n        .tableName(catalogTableName)\r\n        .key(DynamoDbCatalog.namespacePrimaryKey(namespace))\r\n        .build());\r\n    Assert.assertFalse(\"namespace must not exist\", response.hasItem());\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910024430/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910380944","html_url":"https://github.com/apache/iceberg/pull/3035#issuecomment-910380944","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3035","id":910380944,"node_id":"IC_kwDOCW7NX842Q0-Q","user":{"login":"bijanhoule","id":7012524,"node_id":"MDQ6VXNlcjcwMTI1MjQ=","avatar_url":"https://avatars.githubusercontent.com/u/7012524?v=4","gravatar_id":"","url":"https://api.github.com/users/bijanhoule","html_url":"https://github.com/bijanhoule","followers_url":"https://api.github.com/users/bijanhoule/followers","following_url":"https://api.github.com/users/bijanhoule/following{/other_user}","gists_url":"https://api.github.com/users/bijanhoule/gists{/gist_id}","starred_url":"https://api.github.com/users/bijanhoule/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bijanhoule/subscriptions","organizations_url":"https://api.github.com/users/bijanhoule/orgs","repos_url":"https://api.github.com/users/bijanhoule/repos","events_url":"https://api.github.com/users/bijanhoule/events{/privacy}","received_events_url":"https://api.github.com/users/bijanhoule/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T15:11:30Z","updated_at":"2021-09-01T15:11:30Z","author_association":"CONTRIBUTOR","body":"> can you also add the following integration test?\r\n> \r\n> ...\r\n\r\nGood call, thank you!  Added","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910380944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910400144","html_url":"https://github.com/apache/iceberg/issues/2991#issuecomment-910400144","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2991","id":910400144,"node_id":"IC_kwDOCW7NX842Q5qQ","user":{"login":"fcvr1010","id":17031474,"node_id":"MDQ6VXNlcjE3MDMxNDc0","avatar_url":"https://avatars.githubusercontent.com/u/17031474?v=4","gravatar_id":"","url":"https://api.github.com/users/fcvr1010","html_url":"https://github.com/fcvr1010","followers_url":"https://api.github.com/users/fcvr1010/followers","following_url":"https://api.github.com/users/fcvr1010/following{/other_user}","gists_url":"https://api.github.com/users/fcvr1010/gists{/gist_id}","starred_url":"https://api.github.com/users/fcvr1010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fcvr1010/subscriptions","organizations_url":"https://api.github.com/users/fcvr1010/orgs","repos_url":"https://api.github.com/users/fcvr1010/repos","events_url":"https://api.github.com/users/fcvr1010/events{/privacy}","received_events_url":"https://api.github.com/users/fcvr1010/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T15:32:36Z","updated_at":"2021-09-01T16:26:51Z","author_association":"NONE","body":"I tried to debug a bit more by inspecting which temp file was being created. Given that the stack trace showed a failure at org.apache.iceberg.aws.s3.S3OutputStream.newStream(S3OutputStream.java:178)\r\n\r\n```java\r\ncurrentStagingFile = File.createTempFile(\"s3fileio-\", \".tmp\", stagingDirectory);\r\n```\r\n\r\nI tried to inspect the files being created with\r\n\r\n```sh\r\nsudo bpftrace -e 'kprobe:do_sys_open { printf(\"open: %s\\n\", str(arg1)); }' | grep s3fileio\r\n```\r\n\r\nbut I didn't get any output. I also verified that if I create a file with prefix \"s3fileio\" with `touch` or a temp file in Python, it shows up in the output of `bpftrace`. Going through that code path only in case of failures seems odd, I guess there may be some problem in my tracing. Can someone point out how the temporary files are supposed to be named?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910400144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910491137","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-910491137","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":910491137,"node_id":"IC_kwDOCW7NX842RP4B","user":{"login":"kainoa21","id":4909735,"node_id":"MDQ6VXNlcjQ5MDk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/4909735?v=4","gravatar_id":"","url":"https://api.github.com/users/kainoa21","html_url":"https://github.com/kainoa21","followers_url":"https://api.github.com/users/kainoa21/followers","following_url":"https://api.github.com/users/kainoa21/following{/other_user}","gists_url":"https://api.github.com/users/kainoa21/gists{/gist_id}","starred_url":"https://api.github.com/users/kainoa21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kainoa21/subscriptions","organizations_url":"https://api.github.com/users/kainoa21/orgs","repos_url":"https://api.github.com/users/kainoa21/repos","events_url":"https://api.github.com/users/kainoa21/events{/privacy}","received_events_url":"https://api.github.com/users/kainoa21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:19:26Z","updated_at":"2021-09-01T17:19:26Z","author_association":"NONE","body":"> The Flink catalog entry point CatalogFactory.createCatalog(String name, Map<String, String> properties) has a direct call to createCatalog(name, properties, clusterHadoopConf()) that initializes Hadoop configuration, and the serialized catalog loader CustomCatalogLoader has SerializableConfiguration as a field, so you are guaranteed to get serialization exception in Flink if you don't have the Hadoop configuration. \r\n\r\nYes, you are right.  And I also agree that there is likely a larger issue to tackle on the Flink side longer term.\r\n\r\nIn the interim, how would you feel about updating the dynamic catalog loader (`CatalogUtil.loadCatalog`) to accept a `SerializableSupplier<Configuration>` instead of a concrete instance of `Configuration`?  \r\n\r\nThis could allow delaying and potentially avoiding the call to `HadoopUtils.getHadoopConfiguration` when it is not required by the Catalog or the FileIO.  I was able to get a version of that working locally for flink w/o any hadoop env.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910491137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910491255","html_url":"https://github.com/apache/iceberg/issues/3044#issuecomment-910491255","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3044","id":910491255,"node_id":"IC_kwDOCW7NX842RP53","user":{"login":"kainoa21","id":4909735,"node_id":"MDQ6VXNlcjQ5MDk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/4909735?v=4","gravatar_id":"","url":"https://api.github.com/users/kainoa21","html_url":"https://github.com/kainoa21","followers_url":"https://api.github.com/users/kainoa21/followers","following_url":"https://api.github.com/users/kainoa21/following{/other_user}","gists_url":"https://api.github.com/users/kainoa21/gists{/gist_id}","starred_url":"https://api.github.com/users/kainoa21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kainoa21/subscriptions","organizations_url":"https://api.github.com/users/kainoa21/orgs","repos_url":"https://api.github.com/users/kainoa21/repos","events_url":"https://api.github.com/users/kainoa21/events{/privacy}","received_events_url":"https://api.github.com/users/kainoa21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T17:19:34Z","updated_at":"2021-09-01T17:19:34Z","author_association":"NONE","body":"> Meanwhile, although a bit hacky, why not add just 2 empty classes Configuration and Configurable to your classpath? That removes the need for the entire hadoop jar.\r\n\r\nI wasn't able to get this to work.  I think there is something about the way that Flink loads user-supplied jars that makes them unavailable to flink's `HadoopUtils.getHadoopConfiguration` method?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910491255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910792313","html_url":"https://github.com/apache/iceberg/pull/2952#issuecomment-910792313","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2952","id":910792313,"node_id":"IC_kwDOCW7NX842SZZ5","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-01T21:40:37Z","updated_at":"2021-09-01T21:40:37Z","author_association":"MEMBER","body":"@rdblue Added more tests and changed around the list/map/field if statement ordering, should be good to go now","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/910792313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911156610","html_url":"https://github.com/apache/iceberg/pull/2666#issuecomment-911156610","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2666","id":911156610,"node_id":"IC_kwDOCW7NX842TyWC","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T04:31:28Z","updated_at":"2021-09-02T04:31:28Z","author_association":"MEMBER","body":"> Is there a description of the proposed behavior for these tables in the Flink catalog?\r\n\r\nYes, the default in-memory flink catalog will maintain those tables inside it, once people drop those tables from the in-memory flink catalog. The in-memory flink catalog will don't see the tables, but the underlying iceberg tables in file system are still there. If people want to drop those data from tables, the correct way is to drop tables from the backend catalog.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911156610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911159322","html_url":"https://github.com/apache/iceberg/pull/2666#issuecomment-911159322","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2666","id":911159322,"node_id":"IC_kwDOCW7NX842TzAa","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T04:34:49Z","updated_at":"2021-09-02T04:34:49Z","author_association":"MEMBER","body":"I think this PR has been fully reviewed.  Seeem this useful feature has been blocked for so long,  I plan to get this merged into the offical apache iceberg repo. If people have more comments or improvements, pls file new issue or PR to address the following thing.  Thanks all for reviewing ! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911159322/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911232705","html_url":"https://github.com/apache/iceberg/pull/2629#issuecomment-911232705","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2629","id":911232705,"node_id":"IC_kwDOCW7NX842UE7B","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T06:03:15Z","updated_at":"2021-09-02T06:03:15Z","author_association":"MEMBER","body":"@zhangjun0x01 , I think it's time to upgrade the version to flink 1.13 now.  Would you like to fix the conflicts ?  I'd like to check whether it's OK to get this merge..","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911232705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911334551","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-911334551","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":911334551,"node_id":"IC_kwDOCW7NX842UdyX","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T07:49:59Z","updated_at":"2021-09-02T07:49:59Z","author_association":"MEMBER","body":"Before we start to split the PR into smaller PRs, I think we iceberg community need to reach the consistence about the public/private vendor integration contribution.  The iceberg-aws module is a great example, it provides independent mock unit tests for the small feature,  the most important point is :  Adobe has provided the s3 integration test utility : [com.adobe.testing:s3mock-junit4](https://github.com/adobe/S3Mock),   it could just launch a local mini s3 cluster for accessing the HTTP API (the S3Mock pretend as a real S3 http server by implementing the S3 API under a local fs directory).  The S3Mock simulator have fully covered test cases to guarantee the local S3 has the same semantics as the [aws s3](https://aws.amazon.com/cn/s3/). \r\n\r\nWhen I implement [the aliyun OSS integration](https://github.com/apache/iceberg/pull/2230/files),  I thought I should provide a  similar object storage simulator to align between the local tests and public aliyun oss,  so I provided a [OSSMockApplication](https://github.com/apache/iceberg/pull/2230/files#diff-cae7d6bade136ee5e97da24f979e6352929af6df9d244a3afc3a94770396c1bc) and [TestLocalOSS](https://github.com/apache/iceberg/pull/2230/files#diff-f8329e3691562000032033a485ecc5e30bf6d6a3b7e25e5f8cdd4f4e387b604aR53) to align the semantics.  For my personal view,  I would prefer to provide a fully tested simulator for private vendor integration so that we could build unit tests on top of it to verify the correctness.\r\n\r\nAs we will introduce more and more public/private vendor integration in future,  I think we should consider agreeing on the details of introducing the vendor as soon as possible, and provide a more complete guide for community contributors to follow and implement.\r\n\r\nFYI @rdblue & @danielcweeks . ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911334551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911335176","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-911335176","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":911335176,"node_id":"IC_kwDOCW7NX842Ud8I","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T07:50:33Z","updated_at":"2021-09-02T07:50:33Z","author_association":"MEMBER","body":"FYI @jackye1995 & @yyanyy ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911335176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911466476","html_url":"https://github.com/apache/iceberg/pull/3058#issuecomment-911466476","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3058","id":911466476,"node_id":"IC_kwDOCW7NX842U9_s","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T09:45:12Z","updated_at":"2021-09-02T09:45:12Z","author_association":"MEMBER","body":"cc @RussellSpitzer, please take a look if you have time.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911466476/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911672952","html_url":"https://github.com/apache/iceberg/pull/3058#issuecomment-911672952","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3058","id":911672952,"node_id":"IC_kwDOCW7NX842VwZ4","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T13:17:54Z","updated_at":"2021-09-02T13:17:54Z","author_association":"MEMBER","body":"Confirming what @kbendick said we made this change internally a while back. If everyone else is ok with it I think we should remove the library but this is the kind of change I think we need more folks to check out before we merge just incase we are missing someone's prod usage. @rdblue + @jackye1995  + @openinx ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911672952/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911835731","html_url":"https://github.com/apache/iceberg/pull/3058#issuecomment-911835731","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3058","id":911835731,"node_id":"IC_kwDOCW7NX842WYJT","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:00:56Z","updated_at":"2021-09-02T16:00:56Z","author_association":"CONTRIBUTOR","body":"Sounds good to me.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911835731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911844201","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-911844201","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":911844201,"node_id":"IC_kwDOCW7NX842WaNp","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:10:42Z","updated_at":"2021-09-02T16:10:42Z","author_association":"CONTRIBUTOR","body":"I generally agree that we want to be able to run tests that exercise the actual code against a working back-end, and not tests that use custom mocking at some level within the code being tested.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911844201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911868302","html_url":"https://github.com/apache/iceberg/pull/2847#issuecomment-911868302","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2847","id":911868302,"node_id":"IC_kwDOCW7NX842WgGO","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T16:40:19Z","updated_at":"2021-09-02T16:40:19Z","author_association":"CONTRIBUTOR","body":"@wang-x-xia, if EMC is S3 compatible and uses the v1 S3 API, why not make this an implementation of FileIO that uses the older S3 API? Can you help me understand why this is specific to EMC?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911868302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911921554","html_url":"https://github.com/apache/iceberg/pull/2989#issuecomment-911921554","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2989","id":911921554,"node_id":"IC_kwDOCW7NX842WtGS","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T17:50:55Z","updated_at":"2021-09-02T17:50:55Z","author_association":"COLLABORATOR","body":"@stevenzwu  thanks again for taking a look, I updated based on the feedback","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911921554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911936631","html_url":"https://github.com/apache/iceberg/issues/3064#issuecomment-911936631","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3064","id":911936631,"node_id":"IC_kwDOCW7NX842Wwx3","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T18:11:26Z","updated_at":"2021-09-02T18:12:37Z","author_association":"MEMBER","body":"@szehon-ho This is similar to the import data files fix that you added, I'm wondering if we should do the same thing here, or just always outlaw this ...\r\n\r\nMy only worry about always disabling this in the underlying code is to actually prevent duplicates we need to read the entire table datafiles listing before comitting. This could be expensive on a large table.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911936631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911945208","html_url":"https://github.com/apache/iceberg/issues/3064#issuecomment-911945208","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3064","id":911945208,"node_id":"IC_kwDOCW7NX842Wy34","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T18:23:46Z","updated_at":"2021-09-02T18:23:46Z","author_association":"CONTRIBUTOR","body":"It is not a big deal if the compute engine like Spark has done extra work to remove the duplication. However, the APIs are considered public Java APIs, https://iceberg.apache.org/api/#transactions. It would be nice to let user be aware of that.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/911945208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912041356","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-912041356","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":912041356,"node_id":"IC_kwDOCW7NX842XKWM","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T20:43:10Z","updated_at":"2021-09-02T20:43:10Z","author_association":"CONTRIBUTOR","body":"@ayush-san, why is `startingSnapshotId` always set to `null`? That should be the last snapshot processed in your streaming job. If you're starting a completely new stream, then it should be the oldest known snapshot.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912041356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912087388","html_url":"https://github.com/apache/iceberg/issues/3064#issuecomment-912087388","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3064","id":912087388,"node_id":"IC_kwDOCW7NX842XVlc","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T21:57:53Z","updated_at":"2021-09-02T21:59:21Z","author_association":"COLLABORATOR","body":"Yea it makes sense to just add the documentation , if it adds little value to do a whole spark job.  If we want to do something simple, we can do a quick in memory comparison on the Merge/FastAppend to check for any duplicates within the transaction, but doesnt seem that worth it either.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912087388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912112920","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-912112920","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":912112920,"node_id":"IC_kwDOCW7NX842Xb0Y","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T22:50:59Z","updated_at":"2021-09-02T22:50:59Z","author_association":"CONTRIBUTOR","body":"> Before we start to split the PR into smaller PRs, I think we iceberg community need to reach the consistence about the public/private vendor integration contribution. The iceberg-aws module is a great example, it provides independent mock unit tests for the small feature, the most important point is : Adobe has provided the s3 integration test utility : [com.adobe.testing:s3mock-junit4](https://github.com/adobe/S3Mock), it could just launch a local mini s3 cluster for accessing the HTTP API (the S3Mock pretend as a real S3 http server by implementing the S3 API under a local fs directory). The S3Mock simulator have fully covered test cases to guarantee the local S3 has the same semantics as the [aws s3](https://aws.amazon.com/cn/s3/).\r\n> \r\n> When I implement [the aliyun OSS integration](https://github.com/apache/iceberg/pull/2230/files), I thought I should provide a similar object storage simulator to align between the local tests and public aliyun oss, so I provided a [OSSMockApplication](https://github.com/apache/iceberg/pull/2230/files#diff-cae7d6bade136ee5e97da24f979e6352929af6df9d244a3afc3a94770396c1bc) and [TestLocalOSS](https://github.com/apache/iceberg/pull/2230/files#diff-f8329e3691562000032033a485ecc5e30bf6d6a3b7e25e5f8cdd4f4e387b604aR53) to align the semantics. For my personal view, I would prefer to provide a fully tested simulator for private vendor integration so that we could build unit tests on top of it to verify the correctness.\r\n> \r\n> As we will introduce more and more public/private vendor integration in future, I think we should consider agreeing on the details of introducing the vendor as soon as possible, and provide a more complete guide for community contributors to follow and implement.\r\n> \r\n> FYI @rdblue & @danielcweeks .\r\n\r\nI think in the ideal world we should, but I'm not sure if we need to completely block new contributions for cloud vendor integration if there is no working backend library for storage services that are available for unit test. In aws module we have an [integration test](https://github.com/apache/iceberg/tree/master/aws/src/integration/java/org/apache/iceberg/aws) package that talks to the actual service. However we don't run them during PR submission and they are run manually before each release. I think we should try to integrate them as one of the auto tests to catch regression. With or without a library that provides full functionality for unit testing, I think this integration test is still valuable. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912112920/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912136782","html_url":"https://github.com/apache/iceberg/pull/3038#issuecomment-912136782","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3038","id":912136782,"node_id":"IC_kwDOCW7NX842XhpO","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-02T23:50:47Z","updated_at":"2021-09-02T23:50:47Z","author_association":"CONTRIBUTOR","body":"@rdblue thanks for reviewing this. I changed the statistics estimation to use (row size * number of rows) for all cases. Of course, the row size estimation can be very far from accurate. Is this version preferable? @aokolnychyi or @RussellSpitzer do you prefer this change?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912136782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912196599","html_url":"https://github.com/apache/iceberg/pull/2952#issuecomment-912196599","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2952","id":912196599,"node_id":"IC_kwDOCW7NX842XwP3","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T02:07:43Z","updated_at":"2021-09-03T02:07:43Z","author_association":"MEMBER","body":"Tests had the timeout issue again, it has to be unrelated to this patch since this patch doesn't actually change any other used apis so I'm going to merge. The suite also passed before I changed the error messages.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912196599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912218155","html_url":"https://github.com/apache/iceberg/pull/2847#issuecomment-912218155","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2847","id":912218155,"node_id":"IC_kwDOCW7NX842X1gr","user":{"login":"wang-x-xia","id":83057695,"node_id":"MDQ6VXNlcjgzMDU3Njk1","avatar_url":"https://avatars.githubusercontent.com/u/83057695?v=4","gravatar_id":"","url":"https://api.github.com/users/wang-x-xia","html_url":"https://github.com/wang-x-xia","followers_url":"https://api.github.com/users/wang-x-xia/followers","following_url":"https://api.github.com/users/wang-x-xia/following{/other_user}","gists_url":"https://api.github.com/users/wang-x-xia/gists{/gist_id}","starred_url":"https://api.github.com/users/wang-x-xia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wang-x-xia/subscriptions","organizations_url":"https://api.github.com/users/wang-x-xia/orgs","repos_url":"https://api.github.com/users/wang-x-xia/repos","events_url":"https://api.github.com/users/wang-x-xia/events{/privacy}","received_events_url":"https://api.github.com/users/wang-x-xia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T03:05:32Z","updated_at":"2021-09-03T03:05:32Z","author_association":"CONTRIBUTOR","body":"> \r\n> \r\n> @wang-x-xia, if EMC is S3 compatible and uses the v1 S3 API, why not make this an implementation of FileIO that uses the older S3 API? Can you help me understand why this is specific to EMC?\r\n\r\nECS can append data to object. So the complex data cache of the S3 FileIO impl can be omit. \r\n\r\nThe ECSClient interface is for that if Amazon deprecated their V1 SDK, it's easily to create a new implementation of this interface.\r\n\r\nActually, the V2 SDK is same with V1 SDK. But just V1 SDK allow to custom HTTP headers that can help ECS and other object services to provide some extension feature.\r\nIf Iceberg need a V1-SDKed FileIO, I can help to implement one. The object writes will be same with current AWS implementation with a local data cache.\r\n\r\nECS also have its own SDK, but the license may cause some problems. Finally I used the S3 V1 SDK.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912218155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912222584","html_url":"https://github.com/apache/iceberg/pull/2807#issuecomment-912222584","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2807","id":912222584,"node_id":"IC_kwDOCW7NX842X2l4","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-03T03:15:11Z","updated_at":"2021-09-03T03:15:11Z","author_association":"MEMBER","body":"Let's make this more clear,  I write the following table:\r\n\r\n| Tests | Run in unit tests| Run when release| Public vendor services  | Private vendor services |\r\n| ------- | ---------------- | -------------- | ---------------------------- | --- |\r\n|API mock tests | YES | YES |  required | required  |\r\n|Services simulator | YES | YES |  **optional** | **required**  |\r\n|Integrated tests by accessing real vendor services| NO | YES ? Private services cannot be checked | required  | required  |","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/912222584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]