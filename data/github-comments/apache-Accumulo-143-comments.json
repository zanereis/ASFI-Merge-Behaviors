[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414541706","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2414541706","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2414541706,"node_id":"IC_kwDOACaFSM6P6vuK","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T16:54:26Z","updated_at":"2024-10-15T16:54:26Z","author_association":"CONTRIBUTOR","body":"I'm not a proponent of the Monitor as I think there are other things well suited. In fact, I was maybe the loudest to say that the Monitor should go for 4.0. However, after giving this some more thought:\r\n\r\n  1. There is a real-world cost to setting up, running, and maintaining metric and log aggregation and display systems. For large installations, doing this likely makes sense. For smaller systems, or in cases where someone is trying to evaluate whether Accumulo is right for them, this could be a negative.\r\n  \r\n  2. One thing that I think the Monitor does well, is condensing a lot of information into tables. If you look at the Grafana Table [documentation](https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/table/#supported-data-formats), for example, its supported formats are csv-like or a transformation on some query. The ability to do this via query, and the syntax used, would likely be dependent on the metric database being used. It's quite possible that a Table that we have on the Monitor today can't be built in the same way in Grafana or other monitoring systems.\r\n  \r\n  3. I have been putting some thought into how we might change the Monitor to display some of the new concepts that we have introduced, but using the Metrics that we generate instead of private information gathered via internal code that is funneled back to the Monitor via the Manager. If we did this in a kind of eat-your-own-dog-food type of way, then we could annotate (in a tool-tip?) which metrics were being used for the graph or table, so that a user trying to implement their own solution didn't have to guess which metrics made sense to go together.  We should also be able to determine which metrics are not really that useful, and which ones need to be added to create a new graph or table. In this case, the Monitor is the exemplar, and if it breaks down at some scale, so be it. We have given the user the documentation they need to build their own.\r\n  \r\n  Regarding Monitor changes:\r\n  \r\n  1. The External Compactions page needs to be removed, these are just major compactions now.\r\n  2. The main page might just be a summary of the resource groups. Type and number of server processes, how many are configured, active, and idle\r\n  3. We should likely have a page for each resource group\r\n  4. We likely want to remove OS-type things (e.g. OS load)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414541706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414918297","html_url":"https://github.com/apache/accumulo/pull/4986#issuecomment-2414918297","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4986","id":2414918297,"node_id":"IC_kwDOACaFSM6P8LqZ","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T20:13:54Z","updated_at":"2024-10-15T20:13:54Z","author_association":"MEMBER","body":"I added 9a218d6 to show how I was injecting the test data. If anyone wants to try these changes out you could use that commit in some form. Here is what the table looks like with some sample filters applied and one invalid filter:\r\n![Screenshot from 2024-10-15 16-09-37](https://github.com/user-attachments/assets/c2fa60cf-686a-403a-ab55-19e1bbfa46d2)\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2414918297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2415354803","html_url":"https://github.com/apache/accumulo/pull/4980#issuecomment-2415354803","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4980","id":2415354803,"node_id":"IC_kwDOACaFSM6P92Oz","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-15T23:47:36Z","updated_at":"2024-10-15T23:47:36Z","author_association":"CONTRIBUTOR","body":"> > Should we record a time of 0 if there's a job immediately available in both poll()?\r\n> \r\n> I do not understand this question.\r\n> \r\n\r\nOops, I think that was supposed to say \"Should we record a time of 0 if there's a job immediately in poll()\" but that doesn't make sense either because we are using the jobAges map to record the delay so you can just ignore that question.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2415354803/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2415371627","html_url":"https://github.com/apache/accumulo/pull/4980#issuecomment-2415371627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4980","id":2415371627,"node_id":"IC_kwDOACaFSM6P96Vr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T00:06:53Z","updated_at":"2024-10-16T00:06:53Z","author_association":"CONTRIBUTOR","body":"> I was trying to think of a good way to check that the stats are correct but the values are going to be non-deterministic as it's all timing in based so it would be hard to check exact values.\r\n\r\nThe best way I know to test these types of things is to add the ability to inject a time source.  That is somewhat doable in unit test, but not realistically achievable in the ITs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2415371627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417262067","html_url":"https://github.com/apache/accumulo/issues/4976#issuecomment-2417262067","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4976","id":2417262067,"node_id":"IC_kwDOACaFSM6QFH3z","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T16:00:01Z","updated_at":"2024-10-16T16:00:01Z","author_association":"MEMBER","body":"Maybe we could shorten it to `rpc.bind.address` and backport that to 2.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417262067/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417282248","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2417282248","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2417282248,"node_id":"IC_kwDOACaFSM6QFMzI","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T16:08:35Z","updated_at":"2024-10-16T16:08:35Z","author_association":"MEMBER","body":"I am still seeing errors when accessing an individual tserver page (e.g. `/tservers?s=<tserver address>`). There might be a few things to remove still from `server.js` and `server.ftl` that is in the scope of this PR but I am not certain that its the same thing that is being addressed with the other changes in this PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417282248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417659473","html_url":"https://github.com/apache/accumulo/issues/4977#issuecomment-2417659473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4977","id":2417659473,"node_id":"IC_kwDOACaFSM6QGo5R","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T18:49:53Z","updated_at":"2024-10-16T18:49:53Z","author_association":"CONTRIBUTOR","body":"I can take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417659473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417690084","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2417690084","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2417690084,"node_id":"IC_kwDOACaFSM6QGwXk","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T19:02:45Z","updated_at":"2024-10-16T19:02:45Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo @keith-turner @ddanielr @cshannon @ctubbsii and I met today to discuss the future of the Monitor. Several ideas were discussed, including one approach to the UI to add new information and center more on resource groups (image below). For now we decided to punt on the visualization aspect of the issue and make changes to the transport.\r\n\r\nCurrently the Manager collects this information into an object (ManagerMonitorInfo) that the Monitor then uses for most of the display. There are other items that the Monitor gathers from the metadata table. Initially we are going to create a custom MeterRegistry to aggregate information that the Monitor will use, then return that information via a Thrift RPC.\r\n\r\n\r\n![image](https://github.com/user-attachments/assets/43e1343e-b0d0-494d-a4de-e8b80d3943c1)\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417690084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417960681","html_url":"https://github.com/apache/accumulo/pull/4982#issuecomment-2417960681","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4982","id":2417960681,"node_id":"IC_kwDOACaFSM6QHybp","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T21:04:00Z","updated_at":"2024-10-16T21:04:00Z","author_association":"CONTRIBUTOR","body":"> Also, based on a conversation with @dlmarion , I understand that the main motivation for supporting HTTP/2 was to support adding a was to push micrometer metrics to the monitor. We discussed other means of accomplishing that, so I don't think this is really needed anymore, so unless I'm wrong about this, I don't think this alone adds any value to Accumulo.\r\n\r\nIf we are able to use the Thrift RPC for getting metrics *and* logs to the Monitor, then I agree that this is not needed. However, I think that #4879 may have introduced a potential issue, which is highlighted at https://github.com/apache/accumulo/pull/4879#issuecomment-2414359562. \r\n\r\n> I'm still looking at the details of the implementation in this PR, but the more I read about HTTP/2, the more I'm thinking this is probably more trouble than it's worth. Browsers (or perhaps most clients) don't typically support HTTP/2 without TLS, so, it adds a lot of complexity to our code (and Jetty code is notoriously frustrating to upgrade across major versions, so complexity is best avoided).\r\n> \r\n> If we are going to do HTTP/2, I suggest these steps first (in separate, incremental PRs):\r\n> \r\n> 1. Upgrade to newest web stack (latest Jetty, Jersey, jakartaee BOM, etc.), then\r\n> 2. Force use of TLS instead of making it configurable (use a generated self-signed cert by default, unless user configures one), to eliminate the complexity of supporting both TLS and non-TLS, then\r\n> 3. Force use of HTTP/2 (no fallback to HTTP/1.1), so there's no need to configure the extra factory, and no need for the configuration option or extra factory setup (all major browsers and CLI tools, like wget2 and cURL, support HTTP/2, so there's no reason to support HTTP/1.1)\r\n> \r\nI think there is still a case for HTTP/2 without TLS, even when used with a browser. That case is when SSL termination is done at some proxy, with only http being used behind the proxy. If we still end up needing to do this, then we might need/want to account for this case.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2417960681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418063534","html_url":"https://github.com/apache/accumulo/pull/4982#issuecomment-2418063534","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4982","id":2418063534,"node_id":"IC_kwDOACaFSM6QILiu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T22:16:37Z","updated_at":"2024-10-16T22:17:05Z","author_association":"MEMBER","body":"> I think there is still a case for HTTP/2 without TLS, even when used with a browser. That case is when SSL termination is done at some proxy, with only http being used behind the proxy. If we still end up needing to do this, then we might need/want to account for this case.\r\n\r\nMy understanding is, based on everything I've read, that going through a proxy is specifically the case where HTTP/2 without TLS (h2c) tends to break, and why it's necessary to use only TLS with HTTP/2 for a passthrough proxy (using HTTP CONNECT). My understanding is further that a TLS terminating proxy would necessarily request HTTP/1.1 plaintext, or HTTP/1.1 or HTTP/2 over TLS, depending if it supports TLS termination on both sides, but never HTTP/2 without TLS (h2c).\r\n\r\nSo, if we want to consider the TLS passthrough proxy case, then we don't need to support non-TLS, and can stick to just HTTP/2 over TLS. If we want to consider the TLS terminating proxy case, then it *might* support HTTP/2 over TLS if it's new enough (and if it supports TLS termination on both ends), but it definitely would support HTTP/1.1 without TLS. So even in that case, we don't need to support HTTP/2 without TLS (h2c).\r\n\r\nI'm not sure the exact situation you're thinking about, but I think it's worth noting that we don't do anything special to support either kinds of proxies today. If we want to continue to support the same kinds of use cases, we just need to continue to support HTTP/1.1 without TLS for the TLS terminating proxy case, and HTTP/2 with TLS would suffice for the TLS passthrough case, since the TCP connection is what is proxied via HTTP CONNECT, at a lower layer than the TLS and HTTP protocols.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418063534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418123919","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2418123919","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2418123919,"node_id":"IC_kwDOACaFSM6QIaSP","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T23:15:33Z","updated_at":"2024-10-16T23:15:33Z","author_association":"MEMBER","body":"I found the discussion on https://stackoverflow.com/q/71129297/196405 helpful to explain how HttpClient reuses (or doesn't) the connections.\r\n\r\nOne answer suggested `jdk.httpclient.connectionPoolSize` to limit the number of keep-alive connections, which is further documented at https://docs.oracle.com/en/java/javase/11/core/java-networking.html\r\n\r\nAnother answer clarified that won't work, because it's only the limit of idle keep-alive connections, not the number of concurrent active ones. So, you have to limit it in the application. It says you also can't limit it by controlling the size of the executor's thread pool, because the client is fully async. They suggested using a Semaphore in the application to impose a max.\r\n\r\nIf the proposed implementation in https://github.com/apache/accumulo/pull/4982#issuecomment-2417960681 works, then we don't really have to fix this, but we'd have to change the implementation to collect the logs for later retrieval, as that comment proposes.\r\n\r\nHowever, my concern over that approach is that the current design allows other components to use this Appender. An implementation that queues the logs for later retrieval by the monitor via Thrift will not be able to be reused by other components, and that was one of my originally intended uses with the creation of this Appender. So, I'm not entirely sure what the best approach is here.\r\n\r\nIdeally, I would prefer to just eliminate log collection in the monitor entirely. Users who need to collect and monitor logs for alerting or later analysis should really be using a log collection and aggregation system that is appropriate for that, and we shouldn't be baking this into the monitor at all. Removing it entirely would save us a lot of grief.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418123919/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418143315","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2418143315","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2418143315,"node_id":"IC_kwDOACaFSM6QIfBT","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T23:37:22Z","updated_at":"2024-10-16T23:37:22Z","author_association":"CONTRIBUTOR","body":"The comment in #4982 is on a PR for 3.1. Are you suggesting that we should look to move to a Thrift RPC for logs in 2.1? If we need to support the current Appender, then we may want to look http/2 as a solution, as that allows for multiple concurrent requests over the same connection. This should reduce the overall number of connections to the Monitor for logs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418143315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418185962","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2418185962","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2418185962,"node_id":"IC_kwDOACaFSM6QIpbq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T00:03:53Z","updated_at":"2024-10-17T00:03:53Z","author_association":"MEMBER","body":"> The comment in #4982 is on a PR for 3.1. Are you suggesting that we should look to move to a Thrift RPC for logs in 2.1?\r\n\r\nI was investigating options to limit the number of TCP connections above. I don't think we should do what was suggested in that comment in 2.1... I wasn't careful about which branch I was referring to. We still need to constrain the number of connections in 2.1 based off the current design. My earlier comment was suggesting that we could fix it with a different design in newer Accumulo versions... however, I'm not a fan of the fact that it would restrict the Appender to only being usable by Accumulo itself (and specifically, servers that the accumulo-monitor knows to poll). When we spoke earlier today about that approach for metrics, I didn't consider that point. I also didn't consider that there would be additional complexity regarding how many logs to preserve per-server for retrieval by the monitor. Overall, I'd rather drop the feature than try to handle increasing complexity for something users shouldn't even be using (because it's an awful way to do log collection, analysis, or alerting).\r\n\r\n> If we need to support the current Appender, then we may want to look http/2 as a solution, as that allows for multiple concurrent requests over the same connection. This should reduce the overall number of connections to the Monitor for logs.\r\n\r\nThat won't work. I discovered you can't upgrade a plaintext HTTP/1.1 to HTTP/2 using the \"Upgrade:\" header with POST calls, so this can't use HTTP/2 over plaintext anyway. We'd either have to use TLS on the monitor to get HTTP/2 or add in extra round-trip GET calls that we wait on to upgrade the connection before we can send POST. Furthermore, the \"h2c\" upgrade token to upgrade to HTTP/2 is obsoleted by the latest [HTTP/2 RFC](https://datatracker.ietf.org/doc/html/rfc9113), so we should probably not start relying on it now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418185962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418191187","html_url":"https://github.com/apache/accumulo/pull/4982#issuecomment-2418191187","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4982","id":2418191187,"node_id":"IC_kwDOACaFSM6QIqtT","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T00:09:33Z","updated_at":"2024-10-17T00:09:33Z","author_association":"MEMBER","body":"It looks like the the latest [HTTP/2 RFC](https://datatracker.ietf.org/doc/html/rfc9113) obsoletes the \"h2c\" upgrade mechanism to upgrade over plaintext HTTP. It also doesn't work over POST. So, if we do HTTP/2 it probably really should be TLS only. So that would be another reason to avoid supporting HTTP/2 with plaintext, and either continue doing HTTP/1.1 for plaintext, or no plain text at all.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418191187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418265797","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2418265797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2418265797,"node_id":"IC_kwDOACaFSM6QI87F","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T00:54:13Z","updated_at":"2024-10-17T00:54:13Z","author_association":"CONTRIBUTOR","body":"> Would it be better if the WorkFinder was just terminated and a new one was started (or some other fix)? This may also just not be an issue, I'm not sure; I just found it strange when I was testing what would happen if an InterruptedException occurred that the Manager logs would be flooded with AccumuloExceptions and seemingly leave the WorkFinder broken.\r\n\r\nThis infinite interrupt loop does not sounds good.,  The work finder being unhealthy for any reason is not good though.  It is catching exception to be resilient to occasional exceptions, but persistent exceptions are not good.  Maybe we could do something like the following as  simple way to detect persistent problems.\r\n\r\n\r\n```java\r\npublic void run() {\r\n      int exceptionCount = 0;\r\n      while (keepRunning.get()) {\r\n        try {\r\n          store.runnable(keepRunning, fateId -> {\r\n            while (keepRunning.get()) {\r\n              try {\r\n                // The reason for calling transfer instead of queueing is avoid rescanning the\r\n                // storage layer and adding the same thing over and over. For example if all threads\r\n                // were busy, the queue size was 100, and there are three runnable things in the\r\n                // store. Do not want to keep scanning the store adding those same 3 runnable things\r\n                // until the queue is full.\r\n                if (workQueue.tryTransfer(fateId, 100, MILLISECONDS)) {\r\n                  break;\r\n                }\r\n              } catch (InterruptedException e) {\r\n                Thread.currentThread().interrupt();\r\n                throw new IllegalStateException(e);\r\n              }\r\n            }\r\n          });\r\n          // made a successful pass, so clear exception count\r\n          exceptionCount = 0;\r\n        } catch (Exception e) {\r\n          exceptionCount++;\r\n\r\n          if(exceptionCount > 30){\r\n               // repeatedly failing to find work, something is really wrong so throw an error to cause the process to exit\r\n               throw new ThreadPools.ExecutionError(\"Too many failures in workFinder\", e);\r\n           }\r\n\r\n          if (keepRunning.get()) {\r\n            log.warn(\"Failure while attempting to find work for fate\", e);\r\n           // TODO maybe sleep here so that do not retry immediately\r\n          } else {\r\n            log.debug(\"Failure while attempting to find work for fate\", e);\r\n          }\r\n\r\n          workQueue.clear();\r\n        }\r\n      }\r\n    }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418265797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418500452","html_url":"https://github.com/apache/accumulo/issues/4973#issuecomment-2418500452","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4973","id":2418500452,"node_id":"IC_kwDOACaFSM6QJ2Nk","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T04:58:55Z","updated_at":"2024-10-17T04:58:55Z","author_association":"MEMBER","body":"I would suggest getting rid of the log aggregation on the monitor as well. It is quite a pain to do it properly and without killing the tservers, the network, or the monitor. Logs don't survive a restart, and are dropped if there are too many. And, any solution we come up with is going to be much more complex and less useful than a simple rsyslog setup, or a small scheduled rsync script. For large installations, it's worth setting up something suitable for log aggregation and analysis. For small installations, you can just ssh to a tserver and cat/grep/less the logs (what we do in development). Recently, we found a problem with too many TCP connections with our attempted fix for ensuring logging was async to the monitor in #4879. The proposed solutions aren't great.\r\n\r\nThings I'd want to keep are things that give you a big picture view of a deployed cluster:\r\n\r\n1. List of namespaces, list of tables in each namespace\r\n2. A page or view for each table (list of tablets, whether or not they are hosted)\r\n3. List of servers, organized in resource groups and by server type\r\n4. Overall health status for servers (some kind of obvious visual signal to indicate \"healthy\", \"needs attention\", \"out of service\", or similar)\r\n5. Basic activity report for each server, depending on the server type (gc should report on when the last garbage collection ran, when the next is expected to run, for example; the manager should report on its core responsibilities, like running fate operations and balancing; compactors should report on whether they are compacting; tservers and sservers should report what tablets they are hosting/scanning and client scan sessions, etc.)\r\n\r\nThese shouldn't duplicate merely reporting detailed metrics that can be obtained directly, but they could utilize some of the metrics to provide a more meaningful view of the status of the system or a particular component's health and status.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2418500452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2419315665","html_url":"https://github.com/apache/accumulo/pull/4879#issuecomment-2419315665","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4879","id":2419315665,"node_id":"IC_kwDOACaFSM6QM9PR","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T11:51:50Z","updated_at":"2024-10-17T11:54:46Z","author_association":"CONTRIBUTOR","body":"Can/should we remove the logs feature from the Monitor in a 2.1 patch release? Should we just tell users not to configure the Monitor appender in the 2.1.4 release notes and warn them that if they do they run the risk of overloading the Monitor host with TCP connections?\r\n\r\nIf we want/need to retain the logs feature in the Monitor, then I think the possible solutions are either implement `http/2+tls` or implement the Thrift RPC mechanism described in #4982. FWIW, it looks like http/2 without TLS is still a thing, they just removed the ability to discover that from the protocol. If both the server and client know via configuration that they are to speak http/2 without tls, then it should still work and should resolve the POST issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2419315665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2419844530","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2419844530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2419844530,"node_id":"IC_kwDOACaFSM6QO-Wy","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T15:20:22Z","updated_at":"2024-10-17T15:20:22Z","author_association":"CONTRIBUTOR","body":">  I just found it strange when I was testing what would happen if an InterruptedException occurred that the Manager logs would be flooded with AccumuloExceptions and seemingly leave the WorkFinder broken.\r\n\r\nOverall the current behavior is not great.  The way the code is structured with a loop it is ignoring interrupts and at the same time resetting  them so it can ignore them in the future.  For this situation seems like it would be best to change the catch block to the following dropping resetting the interrupted status.\r\n\r\n```java\r\n             } catch (InterruptedException e) {\r\n                throw new IllegalStateException(e);\r\n              }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2419844530/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420129671","html_url":"https://github.com/apache/accumulo/pull/4965#issuecomment-2420129671","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4965","id":2420129671,"node_id":"IC_kwDOACaFSM6QQD-H","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:41:37Z","updated_at":"2024-10-17T17:41:37Z","author_association":"MEMBER","body":"I opened #4994","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420129671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420132103","html_url":"https://github.com/apache/accumulo/pull/4986#issuecomment-2420132103","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4986","id":2420132103,"node_id":"IC_kwDOACaFSM6QQEkH","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:42:53Z","updated_at":"2024-10-17T17:42:53Z","author_association":"MEMBER","body":"Marking as ready for review. The duration filter has been added and everything is working as intended as far as I can tell. If anyone wants to try out these changes, I would recommend checking out 4828fdb which was before the test data was removed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420132103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420332147","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2420332147","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2420332147,"node_id":"IC_kwDOACaFSM6QQ1Zz","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T19:09:52Z","updated_at":"2024-10-17T19:09:52Z","author_association":"CONTRIBUTOR","body":"@DomGarguilo - I removed more majc information from the tserver detail page in 2abf7b0. However, now no data loads and there is some jquery error in the console. I reviewed my changes and it's not apparent to me what the issue is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420332147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420459190","html_url":"https://github.com/apache/accumulo/pull/4993#issuecomment-2420459190","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4993","id":2420459190,"node_id":"IC_kwDOACaFSM6QRUa2","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T20:09:09Z","updated_at":"2024-10-17T20:09:09Z","author_association":"CONTRIBUTOR","body":"Full IT build passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420459190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420653771","html_url":"https://github.com/apache/accumulo/pull/4987#issuecomment-2420653771","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4987","id":2420653771,"node_id":"IC_kwDOACaFSM6QSD7L","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T21:41:44Z","updated_at":"2024-10-17T21:41:44Z","author_association":"CONTRIBUTOR","body":"Saw test fail on this PR and found it was unrelated to these changes, opened #4997 with a fix for that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420653771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420897522","html_url":"https://github.com/apache/accumulo/pull/4998#issuecomment-2420897522","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4998","id":2420897522,"node_id":"IC_kwDOACaFSM6QS_by","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T00:08:38Z","updated_at":"2024-10-18T00:08:38Z","author_association":"CONTRIBUTOR","body":"Saw the following stack trace for this bug.\r\n\r\n```\r\njava.lang.IllegalArgumentException: ranges must be non null and contain at least 1 range\r\n\tat org.apache.accumulo.core.clientImpl.TabletServerBatchReader.setRanges(TabletServerBatchReader.java:101)\r\n\tat org.apache.accumulo.server.manager.state.TabletManagementScanner.<init>(TabletManagementScanner.java:94)\r\n\tat org.apache.accumulo.server.manager.state.MetaDataStateStore.iterator(MetaDataStateStore.java:67)\r\n\tat org.apache.accumulo.server.manager.state.LoggingTabletStateStore.iterator(LoggingTabletStateStore.java:62)\r\n\tat org.apache.accumulo.manager.TabletGroupWatcher.processRanges(TabletGroupWatcher.java:321)\r\n\tat org.apache.accumulo.manager.TabletGroupWatcher.hostOndemand(TabletGroupWatcher.java:374)\r\n\tat org.apache.accumulo.manager.Manager.hostOndemand(Manager.java:565)\r\n\tat org.apache.accumulo.manager.ManagerClientServiceHandler.requestTabletHosting(ManagerClientServiceHandler.java:616)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat org.apache.accumulo.server.rpc.HighlyAvailableServiceInvocationHandler.invoke(HighlyAvailableServiceInvocationHandler.java:66)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy33.requestTabletHosting(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat org.apache.accumulo.core.trace.TraceUtil.lambda$wrapService$0(TraceUtil.java:202)\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy33.requestTabletHosting(Unknown Source)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$Processor$requestTabletHosting.getResult(ManagerClientService.java:2399)\r\n\tat org.apache.accumulo.core.manager.thrift.ManagerClientService$Processor$requestTabletHosting.getResult(ManagerClientService.java:2375)\r\n\tat org.apache.thrift.ProcessFunction.process(ProcessFunction.java:40)\r\n\tat org.apache.thrift.TBaseProcessor.process(TBaseProcessor.java:40)\r\n\tat org.apache.thrift.TMultiplexedProcessor.process(TMultiplexedProcessor.java:147)\r\n\tat org.apache.accumulo.server.rpc.TimedProcessor.process(TimedProcessor.java:50)\r\n\tat org.apache.thrift.server.AbstractNonblockingServer$FrameBuffer.invoke(AbstractNonblockingServer.java:492)\r\n\tat org.apache.accumulo.server.rpc.CustomNonBlockingServer$CustomFrameBuffer.invoke(CustomNonBlockingServer.java:129)\r\n\tat org.apache.thrift.server.Invocation.run(Invocation.java:18)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n\tat java.base/java.lang.Thread.run(Thread.java:840)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420897522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420903106","html_url":"https://github.com/apache/accumulo/pull/4986#issuecomment-2420903106","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4986","id":2420903106,"node_id":"IC_kwDOACaFSM6QTAzC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T00:13:44Z","updated_at":"2024-10-18T00:19:03Z","author_association":"CONTRIBUTOR","body":"I tried running continuous ingest to generate compactions.  Was able to create lots of compactions that I could see in the shell using listcompactions, however I never saw any on this page. While running this test I ran into #4998, #4999,apache/accumulo-testing#285, and apache/accumulo-testing#284","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2420903106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2421062586","html_url":"https://github.com/apache/accumulo/pull/4996#issuecomment-2421062586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4996","id":2421062586,"node_id":"IC_kwDOACaFSM6QTnu6","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T01:44:44Z","updated_at":"2024-10-18T17:15:14Z","author_association":"CONTRIBUTOR","body":"In progress of fixing Upgrader11to12Test which failed the unit test checks.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2421062586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422271964","html_url":"https://github.com/apache/accumulo/issues/4999#issuecomment-2422271964","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4999","id":2422271964,"node_id":"IC_kwDOACaFSM6QYO_c","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T11:40:06Z","updated_at":"2024-10-18T11:40:06Z","author_association":"CONTRIBUTOR","body":"TabletGroupWatcher.manageTablets calls CheckCompactionConfig.validate at:\r\n\r\nhttps://github.com/apache/accumulo/blob/a3fd1edd109178c4887ae1488c5bdb4e1b0d5753/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L440-L453\r\n\r\nMaybe this is not a case handled by the validate code?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422271964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422419187","html_url":"https://github.com/apache/accumulo/pull/4980#issuecomment-2422419187","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4980","id":2422419187,"node_id":"IC_kwDOACaFSM6QYy7z","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T12:57:19Z","updated_at":"2024-10-18T12:57:19Z","author_association":"CONTRIBUTOR","body":"@keith-turner - I made a few changes and I think this is ready for review again:\r\n\r\n1. I updated async to record a time of 0 when jobs are immediately available.\r\n2. I realized we needed to update the removeOlderGenerations() method to clear out jobAges for any extents removed to prevent a memory leak for tablets that go away or don't need compactions.\r\n3. I updated the tests to check jobAges map contains the expected extents and is cleared when it should","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422419187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422698386","html_url":"https://github.com/apache/accumulo/pull/4980#issuecomment-2422698386","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4980","id":2422698386,"node_id":"IC_kwDOACaFSM6QZ3GS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T15:10:33Z","updated_at":"2024-10-18T15:10:33Z","author_association":"CONTRIBUTOR","body":"One thing to note as I was working on this was I started to wonder if it made sense to get rid of the jobAges map and just move the Timer into the TabletJobs object as it's always a 1 to 1 relationship that we have to keep in sync. This would make managing it easier, but the primary downside is being unable to iterate over the timers to collect the current stats without locking. Right now with the separate map it's a concurrent hashmap so we can iterate and collect data as a snapshot in the memoized field and I think that makes it worthwhile to keep separate, even if it's more work to make things correct.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422698386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422911383","html_url":"https://github.com/apache/accumulo/pull/4996#issuecomment-2422911383","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4996","id":2422911383,"node_id":"IC_kwDOACaFSM6QarGX","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T17:15:41Z","updated_at":"2024-10-18T17:15:41Z","author_association":"CONTRIBUTOR","body":"Upgrader11to12Test has been fixed and passes now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422911383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422932584","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2422932584","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2422932584,"node_id":"IC_kwDOACaFSM6QawRo","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T17:29:53Z","updated_at":"2024-10-18T17:30:26Z","author_association":"MEMBER","body":"@DomGarguilo just pointed me to this PR after I opened [issues/5001](https://github.com/apache/accumulo/issues/5001). I wasn't aware there was already a PR to address this problem (I just looked at the issues and didn't see one). I think I'll just leave that issue open to be completed by this PR","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422932584/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422935328","html_url":"https://github.com/apache/accumulo/pull/4986#issuecomment-2422935328","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4986","id":2422935328,"node_id":"IC_kwDOACaFSM6Qaw8g","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T17:31:42Z","updated_at":"2024-10-18T17:31:42Z","author_association":"MEMBER","body":"> * Duration filter shows \"invalid duration format\" after invalid entry is cleared and the box is empty. Would be nice if this message did not show in this case. This is not true for the other filters. Not sure how simply this can be done in current code, can ignore if changes are too large.\r\n\r\nGood catch, I did not notice that. I can fix that pretty easily I think.\r\n\r\n> * Noticed if filters are applied and then the \"Toggle Filters\" is turned back off, the filters are still applied to the table. It might be nicer if the filters are cleared on \"Toggle Filters\". This is just a style choice, so feel free to ignore if you prefer the current impl. Maybe if it is kept as it currently is \"Toggle Filters\" could be changed to \"Show Filters\".\r\n\r\nYea the \"Toggle Filters\" button is a bit misleading. It just minimizes the input fields. The filters are still applied while its minimized. Maybe a different indicator other than \"toggle\" should be used. Also, adding a clear filters button sounds like a good idea. \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2422935328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2423042648","html_url":"https://github.com/apache/accumulo/pull/5002#issuecomment-2423042648","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5002","id":2423042648,"node_id":"IC_kwDOACaFSM6QbLJY","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T18:44:26Z","updated_at":"2024-10-18T18:44:26Z","author_association":"CONTRIBUTOR","body":"> This fix looks good. When this is merged forward into main, the same changes will have to be made to FateOpsCommandsIT which replaced FateSummaryIT.\r\n\r\n@kevinrr888 that tip was really helpful in knowing where to fix things in 4.0.  Instead of making a bunch of changes in a merge commit, I made a follow on commit in main after the merge commit to fix the problem there.  Did that in af8a11c","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2423042648/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2426833627","html_url":"https://github.com/apache/accumulo/pull/4975#issuecomment-2426833627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4975","id":2426833627,"node_id":"IC_kwDOACaFSM6Qporb","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-21T14:22:22Z","updated_at":"2024-10-21T14:22:22Z","author_association":"MEMBER","body":"@keith-turner Let me know if eb7493477eeb36794b14c784503320e2d98fd1dd looks good. I'll merge this in then","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2426833627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2428017505","html_url":"https://github.com/apache/accumulo/pull/4986#issuecomment-2428017505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4986","id":2428017505,"node_id":"IC_kwDOACaFSM6QuJth","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-22T01:15:56Z","updated_at":"2024-10-22T01:15:56Z","author_association":"MEMBER","body":"I think I changed to be millis and pushed that in another commit so you\r\nmight have been looking at that.\r\n\r\nOn Mon, Oct 21, 2024 at 4:11PM Kevin Rathbun ***@***.***>\r\nwrote:\r\n\r\n> ***@***.**** commented on this pull request.\r\n> ------------------------------\r\n>\r\n> In\r\n> server/monitor/src/main/resources/org/apache/accumulo/monitor/resources/js/ec.js\r\n> <https://github.com/apache/accumulo/pull/4986#discussion_r1809457027>:\r\n>\r\n> > +      return value * 86400;\r\n> +    default:\r\n> +      return value;\r\n> +    }\r\n> +  }\r\n> +\r\n> +  // Helper function to validate duration input. Makes sure that the input is in the format of '<operator> <value> <unit>'\r\n> +  function validateDurationInput(input) {\r\n> +    return input.match(/^([<>]=?)\\s*(\\d+)([smhd])$/i);\r\n> +  }\r\n> +\r\n> +  /**\r\n> +   * @param {number} durationStr duration in milliseconds\r\n> +   * @returns duration in seconds\r\n> +   */\r\n> +  function parseDuration(durationStr) {\r\n>\r\n> Hmm. I didn't notice this. For me, the sample data seemed normal (nothing\r\n> over a couple hrs)\r\n>\r\n> \r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/apache/accumulo/pull/4986#discussion_r1809457027>, or\r\n> unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/ALMD2IIKOOEBW5NVEHBBF63Z4VNVFAVCNFSM6AAAAABP75WPR6VHI2DSMVQWIX3LMV43YUDVNRWFEZLROVSXG5CSMV3GSZLXHMZDGOBTGIYTIMBZHA>\r\n> .\r\n> You are receiving this because you were assigned.Message ID:\r\n> ***@***.***>\r\n>\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2428017505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2430184940","html_url":"https://github.com/apache/accumulo/pull/5007#issuecomment-2430184940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5007","id":2430184940,"node_id":"IC_kwDOACaFSM6Q2a3s","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-22T20:22:04Z","updated_at":"2024-10-22T20:22:04Z","author_association":"CONTRIBUTOR","body":"The milestone for this change in 2.1, but the target branch is main.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2430184940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2430191733","html_url":"https://github.com/apache/accumulo/pull/5008#issuecomment-2430191733","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5008","id":2430191733,"node_id":"IC_kwDOACaFSM6Q2ch1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-22T20:25:26Z","updated_at":"2024-10-22T20:25:26Z","author_association":"CONTRIBUTOR","body":"This change will probably fix a failure in InterruptibleScannersIT also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2430191733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432355250","html_url":"https://github.com/apache/accumulo/pull/5007#issuecomment-2432355250","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5007","id":2432355250,"node_id":"IC_kwDOACaFSM6Q-suy","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-23T14:15:05Z","updated_at":"2024-10-23T14:15:05Z","author_association":"MEMBER","body":"> The milestone for this change in 2.1, but the target branch is main.\r\n\r\nOops, thanks. Updated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432355250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432403538","html_url":"https://github.com/apache/accumulo/issues/5006#issuecomment-2432403538","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5006","id":2432403538,"node_id":"IC_kwDOACaFSM6Q-4hS","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-23T14:26:49Z","updated_at":"2024-10-23T14:26:49Z","author_association":"CONTRIBUTOR","body":"Was looking into some other metric issues earlier and happened to see the executor metrics with 2.1.4.\r\n\r\nStarted a local 2.1.4 accumulo cluster with `general.micrometer.enabled=true` which uses the  `LoggingMeterRegistryFactory` by default. \r\n\r\nChecked the compactor logs and saw the following metrics:\r\n```\r\nexecutor.completed{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} throughput=0.016667 tasks/s\r\nexecutor.active{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=0 threads\r\nexecutor.active{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=0 threads\r\nexecutor.pool.core{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=1 threads\r\nexecutor.pool.core{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=1 threads\r\nexecutor.pool.max{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=1 threads\r\nexecutor.pool.max{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=2147483647 threads\r\nexecutor.pool.size{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=1 threads\r\nexecutor.pool.size{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=0 threads\r\nexecutor.queue.remaining{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=2147483647 tasks\r\nexecutor.queue.remaining{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=2147483647 tasks\r\nexecutor.queued{host=localhost,instance.name=uno,name=accumulo.poolcompactor.client,port=9134,process.name=compactor} value=0 tasks\r\nexecutor.queued{host=localhost,instance.name=uno,name=accumulo.pool.general.server,port=9134,process.name=compactor} value=1 tasks\r\n```\r\n\r\nDo you want to add a specific test for the `executor` prefix? ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432403538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432468967","html_url":"https://github.com/apache/accumulo/pull/5009#issuecomment-2432468967","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5009","id":2432468967,"node_id":"IC_kwDOACaFSM6Q_Ifn","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-23T14:45:20Z","updated_at":"2024-10-23T14:45:20Z","author_association":"CONTRIBUTOR","body":"> I'm seeing a negative number being reported in the change I am working on dealing with metrics. Is this what you were seeing?\r\n\r\nYeah that is what I was seeing.  When experimenting with this I locally changed MetricsIT to run 10K scans and this counter went to -103xx ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432468967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432534304","html_url":"https://github.com/apache/accumulo/issues/5010#issuecomment-2432534304","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5010","id":2432534304,"node_id":"IC_kwDOACaFSM6Q_Ycg","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-23T15:02:03Z","updated_at":"2024-10-23T15:02:03Z","author_association":"CONTRIBUTOR","body":"This change may support the ability for tablet servers to ask other tablet servers to load a tablet eventually.  So when tablet unload for a migration that tablet server could immediately ask the other tablet server to load the tablet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2432534304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435066012","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2435066012","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2435066012,"node_id":"IC_kwDOACaFSM6RJCic","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T11:52:27Z","updated_at":"2024-10-24T11:52:27Z","author_association":"CONTRIBUTOR","body":"> Regarding Javalin, the existing monitor is well-established, and accomplishes a lot of goals that this demo of Javalin doesn't do (it handles serving JS/CSS resources from the classpath using the default servlet, for example, and automatically handles the serialization of POJO objects via the /rest endpoints in either JSON or XML using Jackson, with only JAX-RS annotations; it's also designed to be easily configured for TLS with client-auth certs, if desired, and handles a lot of other things). I think the switching cost of moving to Javelin are high, bring in a lot of new dependencies... on libraries written in a completely different programming language (Kotlin) that will be difficult for those unfamiliar to trace into for troubleshooting, if that becomes needed.\r\n\r\nI think I addressed this in my other comment, but since Javalin is a wrapper on top of Jetty, and it exposes all of the underlying Jetty controls, I don't think any of the points you raised regarding serving up static resources, TLS configuration, etc. are going to be an issue. I almost started with replacing the EmbeddedWebServer with Javalin completely, but then figured it would be better to keep them separate as it will be easier to remove the old monitor code once the new monitor is complete. The intention with this PR is to have two separate monitor (old and new) running off the same Monitor process until the new one is complete. All of this work could be done in a feature branch and *not* merged into `main`. @DomGarguilo's needs something that serves up the data to create the new UI.\r\n\r\n> It also isn't clear that the way it connects resources to endpoints is really all that much better or simpler than the JAX-RS specification that we get with Jersey annotations.\r\n\r\nI think it's simpler. With the current Monitor code you have to search for the class and method that has the matching path to understand which method is being called by the UI code. The way that the routes are built with Javalin, the mapping is centrally located in one place and can be made visible via the RouteOverview plugin to aid in debugging and development.\r\n\r\n> If we decide to expose the metrics directly from the servers, for general consumption by users who implement their own monitors, in order to get rid of our own monitor, a Javalin-based server might be a reasonable reference implementation. But, I don't think it should be part of these changes today.\r\n\r\nExposing metrics directly from the servers for general consumption was not something that was discussed. This exposes metrics from the servers for the purpose of serving data to the Monitor. The MetricServiceHandler class in this PR currently exposes all of the Accumulo application metrics as it's unknown at this point which metrics will be needed by the Monitor. Once we know what that set is, we can further reduce the set of metrics being exposed by the new Thrift endpoint.\r\n\r\n> Regarding flatbuffers, I'd really like to understand why you did that, since it seems to me that it's not providing anything we don't already get with Thrift directly, and it adds extra layers and dependencies. I'm not sure I understand the intent.\r\n\r\nI think I addressed this in my other comment.\r\n\r\n> For the core change of exposing the metrics via Thrift, I was only able to review at a glance, because it was hard to see what was part of that core change, and what was part of the other things in this PR... but the overall mechanism seemed okay. However, it still depends on the assumption that we should put full metrics on the monitor (rather than just a small curated set of health/status items on a custom API, and leaving it to the user to collect metrics for analysis using a dedicated metrics-specific system, if they need that, rather than try to get them via our lightweight monitor). \r\n\r\nThe intention is to just supply the metrics that are needed for the Monitor. Getting all of the metrics via a dedicated metrics system is the better and more complete solution.\r\n\r\n\r\n> Also, I was talking with @DomGarguilo earlier today and it occurred to me that it has happened a few times in the past that a user has come to us with an observation that the monitor is the only place where certain information exists, and as a solution, we've created public API methods to provide that information. So then I was wondering, instead of exposing a thrift RPC for metrics, that we use internally, maybe we should instead expose it as a public API, which the monitor can get directly from the AccumuloClient (it's own ServerContext). Then, anybody wanting to write their own monitor and expose the information differently, could just get the same information from the public API. This could be a step towards making the monitor an optional server that is merely another Accumulo client process. In the public API, we could also expose things that are not easily exposed in the metrics... like aggregated data per table or per tablet, which are not easily seen in the per-process metrics alone.\r\n\r\nI think the intention here is to build the new Monitor off of exposed metric information. If there is something new that is needed, then we should add the metric for it. This approach means that the Monitor is not getting special data that can't be retrieved or calculated by just getting the metrics via some MeterRegistry. I don't think we should expose this via the public API in the AccumuloClient, I think that's the wrong approach.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435066012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435250066","html_url":"https://github.com/apache/accumulo/issues/5006#issuecomment-2435250066","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5006","id":2435250066,"node_id":"IC_kwDOACaFSM6RJveS","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T13:07:31Z","updated_at":"2024-10-24T13:07:31Z","author_association":"CONTRIBUTOR","body":"It seems like you answered my question - they are getting reported. I'm not sure that we need to add a test, I think it was more of a misunderstanding of how the hierarchical CompositeMeterRegistry works. It looks like things are working ok, so I'm going to close this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435250066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435310222","html_url":"https://github.com/apache/accumulo/issues/5000#issuecomment-2435310222","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5000","id":2435310222,"node_id":"IC_kwDOACaFSM6RJ-KO","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T13:32:06Z","updated_at":"2024-10-24T13:32:06Z","author_association":"CONTRIBUTOR","body":"> 1. Using REST and Json is probably not ideal for all RPC calls.\r\n\r\nHave you looked at CBOR?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435310222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435659307","html_url":"https://github.com/apache/accumulo/pull/5007#issuecomment-2435659307","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5007","id":2435659307,"node_id":"IC_kwDOACaFSM6RLTYr","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T15:50:01Z","updated_at":"2024-10-24T15:50:01Z","author_association":"MEMBER","body":"> These changes look good. Was wondering if the conversion could be done on the java side prior to sending the data out via rest. Then maybe the rest API would consistently use milliseconds. But not sure if that is a good idea or not and it should not hold up this bug fix.\r\n\r\nI think that it would work too. Since the current changes look okay though, ill get this merged in and we can change things later on if needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2435659307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436135994","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2436135994","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2436135994,"node_id":"IC_kwDOACaFSM6RNHw6","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T19:01:21Z","updated_at":"2024-10-24T19:01:21Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - I added a new endpoint in 0543a48. There was no need to add any new classes with JAX-RS annotations or any classes to hold the data just for serialization","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436135994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436221491","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2436221491","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2436221491,"node_id":"IC_kwDOACaFSM6RNcoz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T19:52:03Z","updated_at":"2024-10-24T19:52:03Z","author_association":"MEMBER","body":"> The intention with this PR is to have two separate monitor (old and new) running off the same Monitor process until the new one is complete. All of this work could be done in a feature branch and _not_ merged into `main`. @DomGarguilo's needs something that serves up the data to create the new UI.\r\n\r\nI don't think it's necessary to do that. The pages can be served from the same server. There's no need to run two. Also, I didn't think it was in scope to create a whole new monitor from scratch... I thought the goal was to do a comprehensive review of what's there, get rid of the bits we want to drop, and add stuff we think should be there. That doesn't require running two servers. We can build off of the previous work, the previous design, etc. That's what I had been discussing with @DomGarguilo. If your goal is to just create a monitor to view published metrics, I can see that being a standalone server, separate from the existing monitor, but I don't think it would be a replacement.\r\n\r\n> I think it's simpler. With the current Monitor code you have to search for the class and method that has the matching path to understand which method is being called by the UI code. The way that the routes are built with Javalin, the mapping is centrally located in one place and can be made visible via the RouteOverview plugin to aid in debugging and development.\r\n\r\nI think it's pretty easy to look at the `@Path` annotations to see the mappings. We used to have a centralized view, with servlets, and it got better when we switched to this. I think it might only look better now because the number of endpoints without a UI is still very small. Once that starts growing, and you start adding all the features back in that we want to keep from the old monitor, that's going to get quite cumbersome. Preferring one over the other may still be subjective. But even if there are some small style benefits, I still strongly prefer building off what we have, rather than make the lateral move, and add all the new dependencies.\r\n\r\n> I think the intention here is to build the new Monitor off of exposed metric information. If there is something new that is needed, then we should add the metric for it. This approach means that the Monitor is not getting special data that can't be retrieved or calculated by just getting the metrics via some MeterRegistry. I don't think we should expose this via the public API in the AccumuloClient, I think that's the wrong approach.\r\n\r\nI think the fundamental difference in our perspective on this is that you seem to see the monitor as a way to get some metrics information about the system. And, I see it as a way to get an overview of the system's deployed state and current activity. Some of the deployed state and current activity can be viewed as metrics, but some of it simply can't be. There isn't a metric for instanceName or instanceId, for example, or list of tables, or list of resource groups, or list of zookeepers the system is configured with, or whether a table is currently \"offline\" or \"disabled\". These kinds of things are status things that don't make sense as metrics, but are instead retrieved from the public API. So, I absolutely think that the monitor does have a need of getting data that can't be retrieved or calculated by just getting the metrics via some MeterRegistry. To the extent that the monitor is showing stuff that is specifically metrics, or can be metrics, I think the monitor should do very little of that, and instead rely on the user's use of a dedicated metrics collection/aggregation/alerting/visualization thing. If that's the kind of thing you're trying to prototype here, I think that's fine, but perhaps it shouldn't have anything to do with the monitor at all? Or, to the extent that it is, it's a very specific page on the monitor, separate from the non-metrics stuff. So, I think we should discuss what the actual goal is here, because it currently feels like \"metrics\" is being used as a hammer to hit every nail, when a lot of the monitor isn't actually a nail... some of it is, and for that stuff, it's probably useful to prototype that like you're doing in this PR... but not all of it is.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436221491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436268653","html_url":"https://github.com/apache/accumulo/issues/5003#issuecomment-2436268653","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5003","id":2436268653,"node_id":"IC_kwDOACaFSM6RNoJt","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T20:21:05Z","updated_at":"2024-10-24T20:21:05Z","author_association":"CONTRIBUTOR","body":"Discussed this with @dlmarion  and @ddanielr . These may not actually be redundant.  The `resource.group` tag is for the manager process and will always be default ATM.  The `queue.id` tag is per compactor resource group in the compaction coordinator and can differ.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436268653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436285134","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2436285134","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2436285134,"node_id":"IC_kwDOACaFSM6RNsLO","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T20:31:30Z","updated_at":"2024-10-24T20:31:30Z","author_association":"CONTRIBUTOR","body":"[QueueMetrics](https://github.com/apache/accumulo/blob/main/server/manager/src/main/java/org/apache/accumulo/manager/compaction/coordinator/QueueMetrics.java)  could serve as  a potential model for per table metrics.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436285134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436303567","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2436303567","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2436303567,"node_id":"IC_kwDOACaFSM6RNwrP","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T20:43:09Z","updated_at":"2024-10-24T20:43:09Z","author_association":"CONTRIBUTOR","body":"> I think the fundamental difference in our perspective on this is that you seem to see the monitor as a way to get some metrics information about the system.\r\n\r\nNot really, I think that the Monitor can display state from the metrics that we collect.\r\n\r\n> And, I see it as a way to get an overview of the system's deployed state and current activity. Some of the deployed state and current activity can be viewed as metrics, but some of it simply can't be. There isn't a metric for instanceName or instanceId, for example, or list of tables, or list of resource groups, or list of zookeepers the system is configured with, or whether a table is currently \"offline\" or \"disabled\". These kinds of things are status things that don't make sense as metrics, but are instead retrieved from the public API. So, I absolutely think that the monitor does have a need of getting data that can't be retrieved or calculated by just getting the metrics via some MeterRegistry.\r\n\r\nThe MetricsResponse object that is returned from the Metrics Thrift API contains a small amount of information that is not metrics (server type, address, resource group, and timestamp) in addition to a list of Metrics. I think we should try to convey as much of that information as possible as metrics, and then add the remaining information to the MetricsResponse as non-metrics. Certainly the Manager could emit a metric for the number of tablets per table, from which we could create a list of tables. The nice thing about capturing most things as metrics is that we don't need two different code paths to capture the information about the system. If the monitor can run mostly off the metrics, then the monitor is optional as a user could decide to create their own monitor using some enterprise level monitoring system.\r\n\r\n> To the extent that the monitor is showing stuff that is specifically metrics, or can be metrics, I think the monitor should do very little of that, and instead rely on the user's use of a dedicated metrics collection/aggregation/alerting/visualization thing. If that's the kind of thing you're trying to prototype here, I think that's fine, but perhaps it shouldn't have anything to do with the monitor at all? Or, to the extent that it is, it's a very specific page on the monitor, separate from the non-metrics stuff. So, I think we should discuss what the actual goal is here, because it currently feels like \"metrics\" is being used as a hammer to hit every nail, when a lot of the monitor isn't actually a nail... some of it is, and for that stuff, it's probably useful to prototype that like you're doing in this PR... but not all of it is.\r\n\r\nMy thought for the new monitor is based upon the image I put in https://github.com/apache/accumulo/issues/4973#issuecomment-2417690084. It's information about the system as whole, most of which can be gleaned from the metrics. I realize that not everything is a metric, but if your idea is that the Monitor should show non-metrics, what is it showing? A description would be useful I think as there are certainly a lot of numbers being shown on the current Monitor pages, most of which are captured as metrics in 4.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436303567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436336629","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2436336629","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2436336629,"node_id":"IC_kwDOACaFSM6RN4v1","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T21:05:19Z","updated_at":"2024-10-24T21:05:19Z","author_association":"MEMBER","body":"> A description would be useful I think as there are certainly a lot of numbers being shown on the current Monitor pages, most of which are captured as metrics in 4.0.\r\n\r\nThe monitor currently shows activity aggregated on a per-table and per-tablet basis, and that those are not currently available as metrics. To the extent that these can be converted to metrics, I think that's fine to do that. However, it still may be useful to expose the aggregated status via a public API, rather than a Thrift endpoint, for direct consumption by the monitor, as well as outside tools. I'm not 100% sold on the idea, though... I'm just pitching it as an alternative to doing it via a server-only Thrift call that users don't have access to.\r\n\r\nBasically, my idea is that if it is not the whole metrics, but a curated set of useful data to show on the monitor, then it's also a useful set of curated data to show via an API, so users who want it don't resort to scraping the monitor.\r\n\r\nAside from that, my general assumption is that the monitor's overall structure, and view of a deployed system is not primarily about serving metrics (in spite of the fact that we have a lot of metrics-like data in tabular and graphical format right now), and its design should not be centered around metrics. To the extent that it's showing detailed metrics, I would prefer to leave those off the monitor entirely, leaving it to the user to plug into the metrics system directly for those. But, I think the real value of the monitor is the ability to have a big picture view of the system as a whole, and most of that doesn't come from the metrics. Sure, some can be powered by metrics, but that alone doesn't warrant a complete redesign. I don't think we should redesign the front end, except to determine which pages we want to keep, and which we want to lose, which we want to change, and which we want to lose. Powering the monitor with data collected from the metrics system doesn't require a complete overhaul, and I don't think we need a complete overhaul... changing the data source behind the scenes should be a largely invisible change to users.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436336629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436373746","html_url":"https://github.com/apache/accumulo/pull/5012#issuecomment-2436373746","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5012","id":2436373746,"node_id":"IC_kwDOACaFSM6ROBzy","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-24T21:32:09Z","updated_at":"2024-10-24T21:32:09Z","author_association":"CONTRIBUTOR","body":"> ... it still may be useful to expose the aggregated status via a public API, rather than a Thrift endpoint, for direct consumption by the monitor, as well as outside tools. I'm not 100% sold on the idea, though... I'm just pitching it as an alternative to doing it via a server-only Thrift call that users don't have access to.\r\n\r\nI'm not sure how that would work, the client would need to talk with every server to gather the information, or the information would have to be aggregated somewhere and then the client just fetches it from that location. Removing the ManagerMonitorInfo object in the Manager, the current mechanism of aggregation, was part of the reason for some of these changes (Thrift API in each server component).\r\n\r\nAnother item to bring into this conversation, as it overlaps some, is the `accumulo admin serviceStatus` command added in #4567. It does provide a limited overview of the deployment.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2436373746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438294203","html_url":"https://github.com/apache/accumulo/issues/4905#issuecomment-2438294203","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4905","id":2438294203,"node_id":"IC_kwDOACaFSM6RVWq7","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T16:40:47Z","updated_at":"2024-10-25T16:41:17Z","author_association":"MEMBER","body":"Another thing to note with this change is that we would also be able to have checks for expected statuses like `UserFateStore` can (and already does) do (for example, compare the differences between `UserFateStore` and `MetaFateStore`s impls of `delete()`). This would give us the extra validation that `UserFateStore` has in `MetaFateStore`. Additional context regarding this can be found here #4242\r\n\r\nThis might be done in a follow on to this issue, or as part of this issue","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438294203/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438659206","html_url":"https://github.com/apache/accumulo/issues/5005#issuecomment-2438659206","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5005","id":2438659206,"node_id":"IC_kwDOACaFSM6RWvyG","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T19:38:22Z","updated_at":"2024-10-25T19:38:22Z","author_association":"CONTRIBUTOR","body":"I just saw this happen for the first time locally during a build:\r\n\r\n```\r\n[ERROR] Tests run: 4, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 4.079 s <<< FAILURE! -- in org.apache.accumulo.manager.compaction.queue.CompactionJobQueuesTest\r\n[ERROR] org.apache.accumulo.manager.compaction.queue.CompactionJobQueuesTest.testGetAsync -- Time elapsed: 1.647 s <<< FAILURE!\r\norg.opentest4j.AssertionFailedError: expected: <true> but was: <false>\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:151)\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.buildAndThrow(AssertionFailureBuilder.java:132)\r\n\tat org.junit.jupiter.api.AssertTrue.failNotTrue(AssertTrue.java:63)\r\n\tat org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:36)\r\n\tat org.junit.jupiter.api.AssertTrue.assertTrue(AssertTrue.java:31)\r\n\tat org.junit.jupiter.api.Assertions.assertTrue(Assertions.java:183)\r\n\tat org.apache.accumulo.manager.compaction.queue.CompactionJobQueuesTest.testGetAsync(CompactionJobQueuesTest.java:402)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:569)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438659206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438688708","html_url":"https://github.com/apache/accumulo/issues/5005#issuecomment-2438688708","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5005","id":2438688708,"node_id":"IC_kwDOACaFSM6RW2_E","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T19:56:59Z","updated_at":"2024-10-25T19:56:59Z","author_association":"MEMBER","body":"@cshannon Thanks for the confirmation and stack trace. I was not able to reproduce it again.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438688708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438935930","html_url":"https://github.com/apache/accumulo/issues/5005#issuecomment-2438935930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5005","id":2438935930,"node_id":"IC_kwDOACaFSM6RXzV6","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-25T21:56:48Z","updated_at":"2024-10-25T21:56:48Z","author_association":"CONTRIBUTOR","body":"I think the root issue is that the sleep that is supposed to wait for future6 to timeout may not wait quite long enough sometimes, so future6 gets the job when added to the queue and not future7. I have a small PR to push up shortly to make the test more reliable","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2438935930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2439695783","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2439695783","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2439695783,"node_id":"IC_kwDOACaFSM6Ras2n","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-26T19:02:30Z","updated_at":"2024-10-26T19:02:30Z","author_association":"CONTRIBUTOR","body":"Experimented with adding tableId tags to metric in this [branch](https://github.com/keith-turner/accumulo/tree/accumulo-4511).   The branch is a mess because I got sidetracked by https://github.com/micrometer-metrics/micrometer/issues/5607 during this experiment which caused the following problem. \r\n\r\n 1. Tsever creates a registry that ingnores tableId tags using the SPI plugin and then wraps this registry with a CompositeMeterRegistry\r\n 2. Tsever hosts a tablet for tableId=1 and create meters for tableId=1\r\n 3. Tsever hosts a tablet for tableId=2 and create meters for tableId=2\r\n 4. The tablet for tableId=1 is unloaded from the tserver and there are no other tablets for tableId=1 so remove the meters for tableId=1.  Because of micrometer issue 5607 after this removal no metrics are ever seen again for tableId=2.\r\n\r\nTrying to figure out how this could be worked around and/or fixed upstream.  Want to wait and see if the bug is considered valid before attempting an upstream fix.  If we can not figure out a workaround, this bug may prevent adding tableId tags to metrics because we must have the ability to filter out tableId tags.  Would only run into this bug if filtering and/or collapsing the tableId tag using a MeterFilter.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2439695783/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2442729423","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2442729423","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2442729423,"node_id":"IC_kwDOACaFSM6RmRfP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-28T21:58:49Z","updated_at":"2024-10-28T21:59:26Z","author_association":"CONTRIBUTOR","body":"> I am still seeing errors when accessing an individual tserver page (e.g. /tservers?s=<tserver address>). There might be a few things to remove still from server.js and server.ftl that is in the scope of this PR but I am not certain that its the same thing that is being addressed with the other changes in this PR.\r\n\r\nI tried running this locally and looking at a page for a tserver and it failed.   Looked in the monitor log and saw the following.  Tracing this back I suspect the cause may be this [line](https://github.com/apache/accumulo/blob/0f5984d769afe3c08f0b2704f50ab9aed5045c43/server/tserver/src/main/java/org/apache/accumulo/tserver/TabletStatsKeeper.java#L77) where `null` is passed in for the split into (looked at 3.1 and it always passes some object).  Could try passing in a `new ActionStats()` obj there for the split info and see if that fixes the monitor, if it does can open a follow on issue about fixing the tserver code.  Not sure why its passing null in there all the time, probably a bug introduced by removing bulk import and/or compaction code from the tserver.\r\n\r\n```\r\n2024-10-28T21:41:36,576 [server.HttpChannel] WARN : /rest/tservers/localhost:9997\r\njakarta.servlet.ServletException: java.lang.NullPointerException: Cannot read field \"elapsed\" because \"this.historical.splits\" is null\r\n        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:410) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        at org.glassfish.jersey.servlet.WebComponent.service(WebComponent.java:346) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:358) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:311) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        at org.glassfish.jersey.servlet.ServletContainer.service(ServletContainer.java:205) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:764) ~[jetty-servlet-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:529) ~[jetty-servlet-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:131) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:598) ~[jetty-security-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:223) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:1580) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:221) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1381) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:176) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:484) ~[jetty-servlet-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:1553) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:174) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1303) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:129) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:122) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.Server.handle(Server.java:563) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.HttpChannel$RequestDispatchable.dispatch(HttpChannel.java:1598) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.HttpChannel.dispatch(HttpChannel.java:753) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:501) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:287) ~[jetty-server-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314) ~[jetty-io-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100) ~[jetty-io-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53) ~[jetty-io-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask(AdaptiveExecutionStrategy.java:421) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask(AdaptiveExecutionStrategy.java:390) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce(AdaptiveExecutionStrategy.java:277) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.run(AdaptiveExecutionStrategy.java:199) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:411) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149) ~[jetty-util-11.0.19.jar:11.0.19]\r\n        at java.base/java.lang.Thread.run(Thread.java:840) [?:?]\r\nCaused by: java.lang.NullPointerException: Cannot read field \"elapsed\" because \"this.historical.splits\" is null\r\n        at org.apache.accumulo.monitor.rest.tservers.TabletServerResource.getTserverDetails(TabletServerResource.java:208) ~[accumulo-monitor-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[?:?]\r\n        at org.glassfish.jersey.server.model.internal.ResourceMethodInvocationHandlerFactory.lambda$static$0(ResourceMethodInvocationHandlerFactory.java:52) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher$1.run(AbstractJavaResourceMethodDispatcher.java:134) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.invoke(AbstractJavaResourceMethodDispatcher.java:177) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.internal.JavaResourceMethodDispatcherProvider$TypeOutInvoker.doDispatch(JavaResourceMethodDispatcherProvider.java:219) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.internal.AbstractJavaResourceMethodDispatcher.dispatch(AbstractJavaResourceMethodDispatcher.java:81) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.invoke(ResourceMethodInvoker.java:478) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:400) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.model.ResourceMethodInvoker.apply(ResourceMethodInvoker.java:81) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.ServerRuntime$1.run(ServerRuntime.java:256) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:248) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.internal.Errors$1.call(Errors.java:244) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:292) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:274) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:244) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:265) ~[jersey-common-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.ServerRuntime.process(ServerRuntime.java:235) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.server.ApplicationHandler.handle(ApplicationHandler.java:684) ~[jersey-server-3.0.9.jar:?]\r\n        at org.glassfish.jersey.servlet.WebComponent.serviceImpl(WebComponent.java:394) ~[jersey-container-servlet-core-3.0.9.jar:?]\r\n        ... 37 more\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2442729423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2442770109","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2442770109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2442770109,"node_id":"IC_kwDOACaFSM6Rmba9","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-28T22:10:58Z","updated_at":"2024-10-28T22:10:58Z","author_association":"CONTRIBUTOR","body":"> Not sure why its passing null in there all the time, probably a bug introduced by removing bulk import and/or compaction code from the tserver.\r\n\r\nSplit code was moved out of the tserevr also, so that is why that is null.  So those split stats need to be removed from, thrift and monitor.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2442770109/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2443030462","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2443030462","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2443030462,"node_id":"IC_kwDOACaFSM6Rna--","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-29T02:20:54Z","updated_at":"2024-10-29T02:20:54Z","author_association":"CONTRIBUTOR","body":"Looked into finding a work around for the behavior of CompositeRegistry and have not found one so for.  Did notice the Accumulo code could sometimes avoid using CompositeRegistry and opened #5021.  That may open up a hacky workaround of only adding tableId tags when not using CompositeRegistry which is far from optimal.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2443030462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2444509005","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2444509005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2444509005,"node_id":"IC_kwDOACaFSM6RtD9N","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-29T14:55:53Z","updated_at":"2024-10-29T14:55:53Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - thanks for the pointer. I removed the splits in 3fe2774 and I'm not getting any errors in local testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2444509005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447436021","html_url":"https://github.com/apache/accumulo/pull/5016#issuecomment-2447436021","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5016","id":2447436021,"node_id":"IC_kwDOACaFSM6R4Oj1","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:00:04Z","updated_at":"2024-10-30T15:00:04Z","author_association":"CONTRIBUTOR","body":"Regarding consistency - what's the behavior in earlier releases? I think they both should be consistent with that answer.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447436021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447451356","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2447451356","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2447451356,"node_id":"IC_kwDOACaFSM6R4STc","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:05:29Z","updated_at":"2024-10-30T15:05:29Z","author_association":"CONTRIBUTOR","body":"While researching this I found another problem with using MeterFilters to remove tableId tags.  The problem is that Gauge meters are not properly aggregated.  If there are two Gauge meters and tags are removed collapsing them into a single meter, then the collapsed meter will only pull data from one of the gauges.  Given there two problems with using meter filters to remove tableId tags in the only way I can see forward is to have a an accumulo property that enables/disable per table tags on metrics.  I think the implementation of this could be pretty straightforward and I am going to to try to prototype it. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447451356/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447457687","html_url":"https://github.com/apache/accumulo/pull/4736#issuecomment-2447457687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4736","id":2447457687,"node_id":"IC_kwDOACaFSM6R4T2X","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:07:22Z","updated_at":"2024-10-30T15:07:22Z","author_association":"CONTRIBUTOR","body":"This only filters Meters out of the log. It doesn't apply the filter to all MeterRegistryFactory's. If you look at MetricsInfoImpl.init, the replicationFilter is applied to all MeterRegistryFactory's specified by the user.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447457687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447460418","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2447460418","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2447460418,"node_id":"IC_kwDOACaFSM6R4UhC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:08:06Z","updated_at":"2024-10-30T15:08:06Z","author_association":"CONTRIBUTOR","body":"> No issue with these changes. But I'm wondering if all of the log messages that occur next to the removed ProblemReport should all go to a centralized Logger, including the ProblemReportingIterator.\r\n\r\nI will take a pass at improving the log messages logger, may be able to use the table files logger in some cases.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447460418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447509326","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2447509326","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2447509326,"node_id":"IC_kwDOACaFSM6R4gdO","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:19:00Z","updated_at":"2024-10-30T15:19:00Z","author_association":"CONTRIBUTOR","body":"> > No issue with these changes. But I'm wondering if all of the log messages that occur next to the removed ProblemReport should all go to a centralized Logger, including the ProblemReportingIterator.\r\n> \r\n> I will take a pass at improving the log messages logger, may be able to use the table files logger in some cases.\r\n\r\nWe've discussed having an \"event\" type logger. Not sure if that makes things simpler vs having a dedicated logger for problems. Using MDC (Mapped Diagnostic Context) might make this easier. \r\nWe currently use slf4j which has a noop MDC https://www.slf4j.org/api/org/slf4j/MDC.html but I believe both log4j and logback support MDC.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447509326/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447550762","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2447550762","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2447550762,"node_id":"IC_kwDOACaFSM6R4qkq","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T15:28:05Z","updated_at":"2024-10-30T15:28:05Z","author_association":"CONTRIBUTOR","body":"What if you had a Thread in the tserver that maintained the aggregate Meters and removed them from the MeterRegistry when no tablets for the table are being hosted?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447550762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447760530","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2447760530","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2447760530,"node_id":"IC_kwDOACaFSM6R5dyS","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T16:40:07Z","updated_at":"2024-10-30T16:40:07Z","author_association":"CONTRIBUTOR","body":"> What if you had a Thread in the tserver that maintained the aggregate Meters and removed them from the MeterRegistry when no tablets for the table are being hosted?\r\n\r\nI tried to do something like this and ran into problems with MeterFilters.  I was trying to support the following functionality in my initial experiment.\r\n\r\n * Accumulo has some per table meters.  When a tablet server or scan server no longer has tablets for a table it will eventually remove meters related to that table from the registry.  This removal was done by a scheduled task in the experimental branch.\r\n * If a user does not want per table meters, then they could use `MeterFilter.ignoreTags()` to remove the tableId tags when setting up their registries.\r\n\r\nWhile trying to support the above workflow I found two problems with `MeterFilter.ignoreTags()`.  First was micrometer issue 5607 which caused metrics to be lost.  The second issue I found is the one I mentioned with two or more gauges in an earlier comment where data is lost.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447760530/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447956955","html_url":"https://github.com/apache/accumulo/pull/4985#issuecomment-2447956955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4985","id":2447956955,"node_id":"IC_kwDOACaFSM6R6Nvb","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T18:02:20Z","updated_at":"2024-10-30T18:02:20Z","author_association":"CONTRIBUTOR","body":"@keith-turner as far as I can tell, yes. It looks like they have already been removed from the TabletServer side.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447956955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447986849","html_url":"https://github.com/apache/accumulo/pull/4982#issuecomment-2447986849","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4982","id":2447986849,"node_id":"IC_kwDOACaFSM6R6VCh","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T18:15:54Z","updated_at":"2024-10-30T18:15:54Z","author_association":"CONTRIBUTOR","body":"#5012 has implemented a mechanism to pull metrics and other information for the Monitor from the servers. Propogating logs to the Monitor is likely going to be removed, but if not could use the same mechanism being used in #5012. Closing this in favor of #5012.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2447986849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448001489","html_url":"https://github.com/apache/accumulo/issues/5024#issuecomment-2448001489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5024","id":2448001489,"node_id":"IC_kwDOACaFSM6R6YnR","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T18:20:17Z","updated_at":"2024-10-30T18:20:34Z","author_association":"CONTRIBUTOR","body":"When a compactor fails we could add a fraction like 1/(total failed compactors) to the per file failure count.  This would be a simple way to detect events related to a single tablet vs systemic issues unrelated to a single tablet.    For example when the dead compaction detector runs if it detects 200 dead compactors it could add 1/200 to each file that was involved.  If the dead compactor runs and detects 2 failed compactors it could add 1/2 to each file the compactor was processing.  This would make the count increase faster when a few tablets are repeatedly killing compactors.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448001489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448163971","html_url":"https://github.com/apache/accumulo/issues/4939#issuecomment-2448163971","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4939","id":2448163971,"node_id":"IC_kwDOACaFSM6R7ASD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T19:22:49Z","updated_at":"2024-10-30T19:22:49Z","author_association":"CONTRIBUTOR","body":"It looks like [QueueMetrics](https://github.com/apache/accumulo/blob/main/server/manager/src/main/java/org/apache/accumulo/manager/compaction/coordinator/QueueMetrics.java) contains these metrics. If #5012 is merged, then I think this can be closed via that PR.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448163971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448345613","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2448345613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2448345613,"node_id":"IC_kwDOACaFSM6R7soN","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T20:47:57Z","updated_at":"2024-10-30T20:47:57Z","author_association":"MEMBER","body":"> Using MDC (Mapped Diagnostic Context) might make this easier\r\n\r\nI don't think it would make it easier. slf4j, log4j 1.2, and log4j2 all have different thread-local context concepts, and it requires a converter to switch between them. It really introduces a lot of complexity, from using more of the slf4j API rather than treating it as a simple logging facade, to adding extra configuration and possibly code to convert between them, and modifying the logging templates to include the map context. It also forces developers to think about thread-local views of the context, every time you want to include thread-local context in a log message, and is likely going to lead to a lot of programmer errors with regard to logging (like not realizing that a log message originating from a class executed in an executor won't inherit the context, when refactoring code that logs).\r\n\r\nIt'd be much easier to just avoid MDC and ThreadLocalContext for logging, and limit our use of slf4j to a very simple logging facade for the basic log level methods `logger.info()`, `logger.error()`, etc. If we want to log additional contextual details, it's much easier to maintain if we just pass around the contextual data we want to log, and include it directly in the message string. MDC/ThreadLocalContext is really best used for general-purpose context information you want to include in every log message, but aren't directly related to what is being logged (like the client IP address and username associated with a request, in a server-side error message that handles the request - not directly related to the error, but perhaps useful to know who is triggering it or who is impacted by it). I don't think that's quite the use case we have here.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448345613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448402380","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2448402380","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2448402380,"node_id":"IC_kwDOACaFSM6R76fM","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T21:19:18Z","updated_at":"2024-10-30T21:19:18Z","author_association":"CONTRIBUTOR","body":">>No issue with these changes. But I'm wondering if all of the log messages that occur next to the removed ProblemReport should all go to a centralized Logger, including the ProblemReportingIterator.\r\n>\r\n>I will take a pass at improving the log messages logger, may be able to use the table files logger in some cases.\r\n\r\n@dlmarion updated the logging to use some of the existing named loggers for tablet events in 111a7e5","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448402380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448559117","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2448559117","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2448559117,"node_id":"IC_kwDOACaFSM6R8gwN","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T22:15:03Z","updated_at":"2024-10-30T22:15:03Z","author_association":"CONTRIBUTOR","body":"> I would like to apply this change to the 3.1 branch, and I think we should add a notice about it being removed in the 2.1.4 release.\r\n\r\n@ctubbsii  if you want to apply this change to the 3.1 branch that is fine with me.  I am finished making changes with this branch so feel free to do whatever you think is best to get these changes to 3.1.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448559117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448671797","html_url":"https://github.com/apache/accumulo/pull/5016#issuecomment-2448671797","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5016","id":2448671797,"node_id":"IC_kwDOACaFSM6R88Q1","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-30T23:34:04Z","updated_at":"2024-10-30T23:34:04Z","author_association":"CONTRIBUTOR","body":"> Regarding consistency - what's the behavior in earlier releases? I think they both should be consistent with that answer.\r\n\r\nLooking at the 3.1 code it would delete the fate tx no matter what state it was in.  In 3.1 there as no check in the fate store of the status.  \r\n\r\nI would recommend adding a forceDelete() call to the fate store that will delete no matter what the status. The admin code could call this and would have the same behavior as 3.1.   However the non-admin fate code that calls delete would have this stronger check of the status that prevents bugs.  Do not expect the non admin fate code to delete in progress transactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448671797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448776526","html_url":"https://github.com/apache/accumulo/pull/5019#issuecomment-2448776526","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5019","id":2448776526,"node_id":"IC_kwDOACaFSM6R9V1O","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T00:52:08Z","updated_at":"2024-10-31T00:52:08Z","author_association":"MEMBER","body":"> > I would like to apply this change to the 3.1 branch, and I think we should add a notice about it being removed in the 2.1.4 release.\r\n> \r\n> @ctubbsii if you want to apply this change to the 3.1 branch that is fine with me. I am finished making changes with this branch so feel free to do whatever you think is best to get these changes to 3.1.\r\n\r\nOkay. Please hold off on merging it, then. I'll rebase it onto the 3.1 branch, and move the upgrade code to the 3.1 upgrade code. The notice on the 2.1 monitor can be added in a subsequent change. But, I don't want this merged, because the target upgrade code will be different, and it will cause unnecessary conflicts if merged to main first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2448776526/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450107875","html_url":"https://github.com/apache/accumulo/issues/5023#issuecomment-2450107875","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5023","id":2450107875,"node_id":"IC_kwDOACaFSM6SCa3j","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T15:01:29Z","updated_at":"2024-10-31T15:01:29Z","author_association":"CONTRIBUTOR","body":"In #5026 I increased the priority of major compactions where the compaction manager realizes that the tablet is over the file size threshold and there is no compaction queued up. This might alleviate the condition to some degree.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450107875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450113570","html_url":"https://github.com/apache/accumulo/issues/5024#issuecomment-2450113570","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5024","id":2450113570,"node_id":"IC_kwDOACaFSM6SCcQi","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T15:03:47Z","updated_at":"2024-10-31T15:03:47Z","author_association":"CONTRIBUTOR","body":"This seems similar to the cascading tablet server death problem, where a tserver fails due to data in a scan, the scan moves to another tserver and subsequently kills that one, repeat. I don't know that we have code that handles this, I think the user has to look at logs/metrics to realize their server count is going down.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450113570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450365958","html_url":"https://github.com/apache/accumulo/pull/5026#issuecomment-2450365958","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5026","id":2450365958,"node_id":"IC_kwDOACaFSM6SDZ4G","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T16:54:04Z","updated_at":"2024-10-31T16:54:04Z","author_association":"CONTRIBUTOR","body":"May still want to leave #4610 open after merging this.  This change is nice in that it helps compactions run faster for tablets over the threshold.  There is still the problem that scan servers cache the file list.  So if a scan server caches the list of files of a tablet w/ too many files for 5 mins then that tablet can not be scanned for that 5 min period even if it does compact.  Not sure of the best way to handle this, scan servers could possibly poll the tablets files a bit more frequently when a tablet is in this condition.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450365958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450667357","html_url":"https://github.com/apache/accumulo/issues/4511#issuecomment-2450667357","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4511","id":2450667357,"node_id":"IC_kwDOACaFSM6SEjdd","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-31T19:30:51Z","updated_at":"2024-10-31T19:31:11Z","author_association":"CONTRIBUTOR","body":"Opened https://github.com/micrometer-metrics/micrometer/issues/5616 about the other problem I ran into while attempting to use MeterFilters to drop table ids.  Looking into this a bit more we should be using Counter meters instead of Gauge meters in the code when possible, will open an issue about this.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2450667357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2451984478","html_url":"https://github.com/apache/accumulo/pull/5016#issuecomment-2451984478","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5016","id":2451984478,"node_id":"IC_kwDOACaFSM6SJlBe","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T14:38:33Z","updated_at":"2024-11-01T14:38:33Z","author_association":"MEMBER","body":"> Looking at the 3.1 code it would delete the fate tx no matter what state it was in. In 3.1 there as no check in the fate store of the status.\r\n\r\nYeah, 3.1 and prior only has `ZooStore`/`MetaFateStore` which never checks for an expected status. The new `UserFateStore` does this for things like `delete()` since it can be performed atomically with conditional mutations. `MetaFateStore` can't do this yet (but should be able with #4905)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2451984478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2452330086","html_url":"https://github.com/apache/accumulo/pull/4996#issuecomment-2452330086","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4996","id":2452330086,"node_id":"IC_kwDOACaFSM6SK5Zm","user":{"login":"meatballspaghetti","id":69256191,"node_id":"MDQ6VXNlcjY5MjU2MTkx","avatar_url":"https://avatars.githubusercontent.com/u/69256191?v=4","gravatar_id":"","url":"https://api.github.com/users/meatballspaghetti","html_url":"https://github.com/meatballspaghetti","followers_url":"https://api.github.com/users/meatballspaghetti/followers","following_url":"https://api.github.com/users/meatballspaghetti/following{/other_user}","gists_url":"https://api.github.com/users/meatballspaghetti/gists{/gist_id}","starred_url":"https://api.github.com/users/meatballspaghetti/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meatballspaghetti/subscriptions","organizations_url":"https://api.github.com/users/meatballspaghetti/orgs","repos_url":"https://api.github.com/users/meatballspaghetti/repos","events_url":"https://api.github.com/users/meatballspaghetti/events{/privacy}","received_events_url":"https://api.github.com/users/meatballspaghetti/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-01T17:58:17Z","updated_at":"2024-11-01T17:58:17Z","author_association":"CONTRIBUTOR","body":"Commit [dd8c4fa](https://github.com/apache/accumulo/pull/4996/commits/dd8c4fa937ee86fb4e5189f112c4270cd107a15b) has moved all namespace mapping actions (create/put, rename, remove) into NamespaceMapping, ensured that mutateExisting() is used in all cases, and gives checks for non-existent/already-existing namespaces (depending on the action). The actual namespace node creation and removal functionalities remain in their respective classes and occur after the mapping is updated.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2452330086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2455132260","html_url":"https://github.com/apache/accumulo/pull/5030#issuecomment-2455132260","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5030","id":2455132260,"node_id":"IC_kwDOACaFSM6SVlhk","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-04T16:15:17Z","updated_at":"2024-11-04T16:15:17Z","author_association":"CONTRIBUTOR","body":"The static analysis checks in the build had a really good find.  Found a bug where I forgot check the future for the scheduled task.\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project accumulo-server-base: Compilation failure\r\n[ERROR] /home/runner/work/accumulo/accumulo/server/base/src/main/java/org/apache/accumulo/server/metrics/PerTableMetrics.java:[81,56] error: [FutureReturnValueIgnored] Return value of methods returning Future must be checked. Ignoring returned Futures suppresses exceptions thrown from the code that completes the Future.\r\n[ERROR]     (see https://errorprone.info/bugpattern/FutureReturnValueIgnored)\r\n[ERROR]   Did you mean 'var unused = context.getScheduledExecutor().scheduleAtFixedRate(this::refresh, 30, 30, TimeUnit.SECONDS);' or to remove this line?\r\n[ERROR] \r\n[ERROR] -> [Help 1]\r\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.11.0:compile (default-compile) on project accumulo-server-base: Compilation failure\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2455132260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2457201128","html_url":"https://github.com/apache/accumulo/pull/5026#issuecomment-2457201128","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5026","id":2457201128,"node_id":"IC_kwDOACaFSM6Sdeno","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-05T13:35:11Z","updated_at":"2024-11-05T13:35:11Z","author_association":"CONTRIBUTOR","body":"@keith-turner  - I think I addressed all of your suggestions in the latest commit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2457201128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2458238337","html_url":"https://github.com/apache/accumulo/pull/4957#issuecomment-2458238337","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4957","id":2458238337,"node_id":"IC_kwDOACaFSM6Shb2B","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-05T22:06:02Z","updated_at":"2024-11-05T22:06:02Z","author_association":"MEMBER","body":"> @kevinrr888 these changes look good. I was running the changes locally and I noticed at the top level the `accumulo check-server-config` command exists. Was wondering if that should be rolled into this check command, if it should could add that to the checklist on #4892.\r\n\r\nThanks, I had missed that. Added to #4892. Also noticed `accumulo check-compaction-config`, which I also added to the checklist. Did you think this should be included as well or no?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2458238337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2458250149","html_url":"https://github.com/apache/accumulo/pull/4957#issuecomment-2458250149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4957","id":2458250149,"node_id":"IC_kwDOACaFSM6Sheul","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-05T22:14:52Z","updated_at":"2024-11-05T22:14:52Z","author_association":"MEMBER","body":"Changes in 11f1f7643e51c7f0851a0220b4892e074ff86594:\r\n- `System.out` -> `log.trace/warn` to avoid flooding output with unnecessary/detailed info. The most important info (e.g., output of `admin check list` command, and the final run status table from the `admin check run` command) is still printed to stdout. Problems found are now logged at warn instead of stdout. Detailed, non-error info logged at trace.\r\n- Created new check `Check.TABLE_LOCKS` which ensures that table and namespace locks are valid and are associated with a FATE op. This depends on SYSTEM_CONFIG, which seemed like the most fitting location for it in the dependency tree.\r\n- New check `assertNoOtherChecksRan()` in `AdminCheckIT` which ensures only the expected checks ran\r\n- A few misc review changes: `MetadataCheckRunner` code improved to only fetch required columns when scanning, object creation moved outside of a loop\r\n\r\nLet me know how these changes look. Something still left TODO is tests for failing checks. Tests should be added to ensure everything that is supposed to be checked correctly fails when it is expected to. I imagine this will take quite a bit of time to do and the changes are already pretty large, so thinking it might be best to leave for follow-on.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2458250149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460245149","html_url":"https://github.com/apache/accumulo/issues/4875#issuecomment-2460245149","issue_url":"https://api.github.com/repos/apache/accumulo/issues/4875","id":2460245149,"node_id":"IC_kwDOACaFSM6SpFyd","user":{"login":"ArbaazKhan1","id":29344877,"node_id":"MDQ6VXNlcjI5MzQ0ODc3","avatar_url":"https://avatars.githubusercontent.com/u/29344877?v=4","gravatar_id":"","url":"https://api.github.com/users/ArbaazKhan1","html_url":"https://github.com/ArbaazKhan1","followers_url":"https://api.github.com/users/ArbaazKhan1/followers","following_url":"https://api.github.com/users/ArbaazKhan1/following{/other_user}","gists_url":"https://api.github.com/users/ArbaazKhan1/gists{/gist_id}","starred_url":"https://api.github.com/users/ArbaazKhan1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArbaazKhan1/subscriptions","organizations_url":"https://api.github.com/users/ArbaazKhan1/orgs","repos_url":"https://api.github.com/users/ArbaazKhan1/repos","events_url":"https://api.github.com/users/ArbaazKhan1/events{/privacy}","received_events_url":"https://api.github.com/users/ArbaazKhan1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T16:29:45Z","updated_at":"2024-11-06T16:29:45Z","author_association":"CONTRIBUTOR","body":"I can take a look at this","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460245149/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460683597","html_url":"https://github.com/apache/accumulo/issues/5034#issuecomment-2460683597","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5034","id":2460683597,"node_id":"IC_kwDOACaFSM6Sqw1N","user":{"login":"kevinrr888","id":43969518,"node_id":"MDQ6VXNlcjQzOTY5NTE4","avatar_url":"https://avatars.githubusercontent.com/u/43969518?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinrr888","html_url":"https://github.com/kevinrr888","followers_url":"https://api.github.com/users/kevinrr888/followers","following_url":"https://api.github.com/users/kevinrr888/following{/other_user}","gists_url":"https://api.github.com/users/kevinrr888/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinrr888/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinrr888/subscriptions","organizations_url":"https://api.github.com/users/kevinrr888/orgs","repos_url":"https://api.github.com/users/kevinrr888/repos","events_url":"https://api.github.com/users/kevinrr888/events{/privacy}","received_events_url":"https://api.github.com/users/kevinrr888/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T20:11:17Z","updated_at":"2024-11-06T20:11:17Z","author_association":"MEMBER","body":"I'll take a look at this, if you aren't already.\r\nA ticket I'm currently working on (#4892) would involve moving this check, so would be nice to fix this before I make those changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460683597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460688039","html_url":"https://github.com/apache/accumulo/issues/5034#issuecomment-2460688039","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5034","id":2460688039,"node_id":"IC_kwDOACaFSM6Sqx6n","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T20:13:19Z","updated_at":"2024-11-06T20:13:19Z","author_association":"CONTRIBUTOR","body":"@kevinrr888 - I'm not currently looking at this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460688039/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460829104","html_url":"https://github.com/apache/accumulo/issues/5033#issuecomment-2460829104","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5033","id":2460829104,"node_id":"IC_kwDOACaFSM6SrUWw","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T21:34:03Z","updated_at":"2024-11-06T21:34:03Z","author_association":"CONTRIBUTOR","body":"We could have static method in the code somewhere named `isValidResourceGroupName()`.  This could be called by the yaml parsing code and the code that starts a server using a RG name option. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460829104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460833181","html_url":"https://github.com/apache/accumulo/pull/5037#issuecomment-2460833181","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5037","id":2460833181,"node_id":"IC_kwDOACaFSM6SrVWd","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T21:36:43Z","updated_at":"2024-11-06T21:36:43Z","author_association":"CONTRIBUTOR","body":"Draft because I have not tested locally yet.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460833181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460835032","html_url":"https://github.com/apache/accumulo/issues/5033#issuecomment-2460835032","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5033","id":2460835032,"node_id":"IC_kwDOACaFSM6SrVzY","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T21:37:54Z","updated_at":"2024-11-06T21:37:54Z","author_association":"CONTRIBUTOR","body":"Yeah, I found some information on the web that suggests that [a-zA-Z0-9_] are valid, portable characters for shell environment variable names.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460835032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460842947","html_url":"https://github.com/apache/accumulo/pull/5037#issuecomment-2460842947","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5037","id":2460842947,"node_id":"IC_kwDOACaFSM6SrXvD","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T21:43:17Z","updated_at":"2024-11-06T21:43:17Z","author_association":"CONTRIBUTOR","body":"I'm not sure what change `shfmt` is suggesting I make. I looked for tabs in the file and did not see any.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460842947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460904868","html_url":"https://github.com/apache/accumulo/issues/5033#issuecomment-2460904868","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5033","id":2460904868,"node_id":"IC_kwDOACaFSM6Srm2k","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-06T22:17:33Z","updated_at":"2024-11-06T22:17:33Z","author_association":"CONTRIBUTOR","body":"> This could be called by the yaml parsing code and the code that starts a server using a RG name option.\r\n\r\nI don't know that we need to validate from the server as the issue is solely with the bash environment variables, which are created by parsing the cluster.yaml file and used in `accumulo-cluster`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2460904868/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2461163283","html_url":"https://github.com/apache/accumulo/pull/5039#issuecomment-2461163283","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5039","id":2461163283,"node_id":"IC_kwDOACaFSM6Ssl8T","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-07T02:01:20Z","updated_at":"2024-11-07T02:01:20Z","author_association":"CONTRIBUTOR","body":"When running lots of compactor processes was seeing this code cause a noticeable delay in starting the shell.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2461163283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2461293537","html_url":"https://github.com/apache/accumulo/pull/5040#issuecomment-2461293537","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5040","id":2461293537,"node_id":"IC_kwDOACaFSM6StFvh","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-07T04:27:06Z","updated_at":"2024-11-07T04:27:06Z","author_association":"CONTRIBUTOR","body":"Noticed that zoocache may not be properly caching the absence of a node for the case of getChildren, but did not want to change that in this PR.  Will open a follow on issue.  For this changes wanted to maintain the exact same behavior and only change the concurrency model.\r\n\r\nWill open an issue about back-porting the changes to 2.1.0 or 3.1.0 if they do not cause problems in 4.0.0 testing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2461293537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465132401","html_url":"https://github.com/apache/accumulo/pull/5035#issuecomment-2465132401","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5035","id":2465132401,"node_id":"IC_kwDOACaFSM6S7u9x","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-08T16:08:23Z","updated_at":"2024-11-08T16:08:23Z","author_association":"CONTRIBUTOR","body":"I think this is ready for merge.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465132401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465200143","html_url":"https://github.com/apache/accumulo/pull/5040#issuecomment-2465200143","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5040","id":2465200143,"node_id":"IC_kwDOACaFSM6S7_gP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-08T16:21:21Z","updated_at":"2024-11-08T16:21:21Z","author_association":"CONTRIBUTOR","body":"Wrote the following test to experiment with these changes from a performance perspective.\r\n\r\n```java\r\npackage org.apache.accumulo.test.zookeeper;\r\n\r\nimport static java.nio.charset.StandardCharsets.UTF_8;\r\nimport static org.apache.accumulo.harness.AccumuloITBase.ZOOKEEPER_TESTING_SERVER;\r\n\r\nimport java.io.File;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\nimport org.apache.accumulo.core.Constants;\r\nimport org.apache.accumulo.core.fate.zookeeper.ZooCache;\r\nimport org.apache.accumulo.core.fate.zookeeper.ZooReaderWriter;\r\nimport org.apache.accumulo.core.fate.zookeeper.ZooUtil;\r\nimport org.junit.jupiter.api.AfterAll;\r\nimport org.junit.jupiter.api.Assertions;\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.Tag;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.io.TempDir;\r\n\r\n@Tag(ZOOKEEPER_TESTING_SERVER)\r\npublic class ZooCacheIT {\r\n  private static ZooKeeperTestingServer szk = null;\r\n  private static ZooReaderWriter zk = null;\r\n  private static final String ZK_ROOT = \"/accumulo/\" + UUID.randomUUID();\r\n\r\n  @TempDir\r\n  private static File tempDir;\r\n\r\n  @BeforeAll\r\n  public static void setup() throws Exception {\r\n    szk = new ZooKeeperTestingServer(tempDir);\r\n    zk = szk.getZooReaderWriter();\r\n    zk.mkdirs(ZK_ROOT + Constants.ZTABLES);\r\n  }\r\n\r\n  @AfterAll\r\n  public static void teardown() throws Exception {\r\n    szk.close();\r\n  }\r\n\r\n  @Test\r\n  public void testLotsOfNodes() throws Exception {\r\n    for (int i = 0; i < 30_000; i++) {\r\n      zk.putPersistentData(ZK_ROOT + Constants.ZTABLES + \"/\" + i, \"i\".getBytes(UTF_8),\r\n          ZooUtil.NodeExistsPolicy.FAIL);\r\n    }\r\n\r\n    var zc = new ZooCache(zk, null);\r\n\r\n    List<String> children = zc.getChildren(ZK_ROOT + Constants.ZTABLES);\r\n    Assertions.assertEquals(30_000, children.size());\r\n\r\n    for (int i = 0; i < 20; i++) {\r\n      long t1 = System.currentTimeMillis();\r\n      for (var child : children) {\r\n        zc.get(ZK_ROOT + Constants.ZTABLES + \"/\" + child);\r\n      }\r\n      long t2 = System.currentTimeMillis();\r\n      System.out.println(i + \" : \" + (t2 - t1) + \"ms\");\r\n    }\r\n\r\n  }\r\n}\r\n```\r\n\r\n\r\nWhen running against these changes saw the following.  Assuming the first read from ZK its taking 22s to do 30K RPC to ZK.\r\n\r\n```\r\n0 : 21593ms\r\n1 : 14ms\r\n2 : 13ms\r\n3 : 14ms\r\n4 : 15ms\r\n5 : 6ms\r\n6 : 6ms\r\n7 : 7ms\r\n8 : 13ms\r\n9 : 14ms\r\n10 : 6ms\r\n11 : 9ms\r\n12 : 6ms\r\n13 : 6ms\r\n14 : 6ms\r\n15 : 5ms\r\n16 : 5ms\r\n17 : 6ms\r\n18 : 6ms\r\n19 : 6ms\r\n```\r\n\r\nWhen running these test against the code that existed before these changes saw the following where it takes 57s to read the 30K entries the first time.  So the extra CPU overhead is causing it to take 2.6 times longer.\r\n\r\n```\r\n0 : 56883ms\r\n1 : 11ms\r\n2 : 11ms\r\n3 : 11ms\r\n4 : 11ms\r\n5 : 9ms\r\n6 : 9ms\r\n7 : 8ms\r\n8 : 6ms\r\n9 : 5ms\r\n10 : 6ms\r\n11 : 5ms\r\n12 : 9ms\r\n13 : 6ms\r\n14 : 5ms\r\n15 : 5ms\r\n16 : 5ms\r\n17 : 5ms\r\n18 : 5ms\r\n19 : 6ms\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465200143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465450561","html_url":"https://github.com/apache/accumulo/pull/5037#issuecomment-2465450561","issue_url":"https://api.github.com/repos/apache/accumulo/issues/5037","id":2465450561,"node_id":"IC_kwDOACaFSM6S88pB","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-08T18:01:52Z","updated_at":"2024-11-08T18:01:52Z","author_association":"CONTRIBUTOR","body":"Would a 2.1 cluster.yaml file fail to parse w/ a clean message w/ these changes?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/2465450561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]