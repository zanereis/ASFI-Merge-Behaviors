[{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566729609","html_url":"https://github.com/apache/couchdb/pull/2360#issuecomment-566729609","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2360","id":566729609,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjcyOTYwOQ==","user":{"login":"ksnavely","id":1530988,"node_id":"MDQ6VXNlcjE1MzA5ODg=","avatar_url":"https://avatars.githubusercontent.com/u/1530988?v=4","gravatar_id":"","url":"https://api.github.com/users/ksnavely","html_url":"https://github.com/ksnavely","followers_url":"https://api.github.com/users/ksnavely/followers","following_url":"https://api.github.com/users/ksnavely/following{/other_user}","gists_url":"https://api.github.com/users/ksnavely/gists{/gist_id}","starred_url":"https://api.github.com/users/ksnavely/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ksnavely/subscriptions","organizations_url":"https://api.github.com/users/ksnavely/orgs","repos_url":"https://api.github.com/users/ksnavely/repos","events_url":"https://api.github.com/users/ksnavely/events{/privacy}","received_events_url":"https://api.github.com/users/ksnavely/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T20:11:42Z","updated_at":"2019-12-17T20:12:07Z","author_association":"CONTRIBUTOR","body":"I've been performing additional benchmarks, focussed on replication recently. I was not able to demonstrate a replication performance gain due to e.g. `_changes` performance gains. I was able to demonstrate the opposite however, finding a q=192, 1M doc DB takes ~80% longer to index with the stream limit set to 100.\r\n\r\nThe stream limit 5 and 10 replication time results were within error of each other for q=192 and 1M docs. I believe this indicates replication's dominant bottleneck is not rexi's streaming performance.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566729609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566731879","html_url":"https://github.com/apache/couchdb/issues/2368#issuecomment-566731879","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2368","id":566731879,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjczMTg3OQ==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T20:17:37Z","updated_at":"2019-12-17T20:17:37Z","author_association":"MEMBER","body":"Hi @creativityjuice, thanks! A couple of comments from my end on this topic:\r\n\r\n* The `revs_limit` setting doesn't control how many document bodies are kept, only how many revision *identifiers*. This is important when you have a frequently updated document and a replication peer that only checks in periodically. If the document is updated more than `revs_limit` times in between replications it will look like a new conflict from the perspective of the replication peer (as the peer won't be able to join up edit histories).\r\n* There is no setting to control how many document bodies are preserved; compaction (whether automatic or manually triggered) always removes the body of any revision for which a descendant exists in the edit history.\r\n\r\nIf I understand your situation correctly what you're really asking for is the ability for compaction to preserve some number of older edits, and then for a flag to have smoosh use that configuration. Unfortunately, that'd be a relatively sophisticated patch; a lot of the codebase is organized around the notion that \"leafs\" of the revision tree are special. I should also point out that in the 4.0 release there won't be a compaction process at all -- old document revisions will be removed immediately when the new update is committed.\r\n\r\nAs an aside, if I take the question \"Does smoosh take `_revs_limit` into account?\" literally the answer is **yes** -- smoosh will honor a database's configured revision stemming limit. It's just that this setting doesn't do what you're looking for it to do.\r\n\r\nI'm going to close this issue but happy to hear your thoughts on the above.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566731879/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566767043","html_url":"https://github.com/apache/couchdb/issues/2191#issuecomment-566767043","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2191","id":566767043,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njc2NzA0Mw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T21:56:58Z","updated_at":"2019-12-17T21:56:58Z","author_association":"MEMBER","body":"thanks","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566767043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566783602","html_url":"https://github.com/apache/couchdb/issues/1502#issuecomment-566783602","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1502","id":566783602,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njc4MzYwMg==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T22:46:30Z","updated_at":"2019-12-17T22:46:30Z","author_association":"MEMBER","body":"Noting that this one becomes much easier in 4.0. We are already aliasing the DB name to a short key prefix, so renaming a database only requires a (transactional) update of a single KV.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566783602/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566811437","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-566811437","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":566811437,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjgxMTQzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T00:29:47Z","updated_at":"2019-12-18T00:29:47Z","author_association":"MEMBER","body":"Thanks again @jiangphcn .","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566811437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566815071","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-566815071","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":566815071,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjgxNTA3MQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T00:44:59Z","updated_at":"2019-12-18T00:44:59Z","author_association":"CONTRIBUTOR","body":"Apologies, but I've not gotten to this yet. I plan to do so this week.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566815071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566822204","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-566822204","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":566822204,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjgyMjIwNA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T01:14:44Z","updated_at":"2019-12-18T01:15:08Z","author_association":"CONTRIBUTOR","body":"Thanks again @wohali and @tilgovi. I will take care of these comments. And enjoy your coming holidays.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566822204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566879572","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-566879572","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":566879572,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njg3OTU3Mg==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T05:54:29Z","updated_at":"2019-12-18T05:54:29Z","author_association":"CONTRIBUTOR","body":"I'll pick up more review tomorrow. This is looking good!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566879572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566926232","html_url":"https://github.com/apache/couchdb/issues/2365#issuecomment-566926232","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2365","id":566926232,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjkyNjIzMg==","user":{"login":"arifcse019","id":10591704,"node_id":"MDQ6VXNlcjEwNTkxNzA0","avatar_url":"https://avatars.githubusercontent.com/u/10591704?v=4","gravatar_id":"","url":"https://api.github.com/users/arifcse019","html_url":"https://github.com/arifcse019","followers_url":"https://api.github.com/users/arifcse019/followers","following_url":"https://api.github.com/users/arifcse019/following{/other_user}","gists_url":"https://api.github.com/users/arifcse019/gists{/gist_id}","starred_url":"https://api.github.com/users/arifcse019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arifcse019/subscriptions","organizations_url":"https://api.github.com/users/arifcse019/orgs","repos_url":"https://api.github.com/users/arifcse019/repos","events_url":"https://api.github.com/users/arifcse019/events{/privacy}","received_events_url":"https://api.github.com/users/arifcse019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T08:17:39Z","updated_at":"2019-12-18T08:17:39Z","author_association":"NONE","body":"@davisp thanks for your response. any pointer on how to enable core dump for beam.smp?\r\n\r\nmeanwhile, we found this in the upstart log\r\n\r\n> `eheap_alloc: Cannot allocate 3936326656 bytes of memory (of type “heap”).\r\nCrash dump is being written to: erl_crash.dump...[os_mon] memory supervisor port (memsup): Erlang has closed\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed`\r\n\r\nbut cant find the crash dump file in /opt where couchdb is running from\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566926232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566940762","html_url":"https://github.com/apache/couchdb/issues/2365#issuecomment-566940762","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2365","id":566940762,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njk0MDc2Mg==","user":{"login":"arifcse019","id":10591704,"node_id":"MDQ6VXNlcjEwNTkxNzA0","avatar_url":"https://avatars.githubusercontent.com/u/10591704?v=4","gravatar_id":"","url":"https://api.github.com/users/arifcse019","html_url":"https://github.com/arifcse019","followers_url":"https://api.github.com/users/arifcse019/followers","following_url":"https://api.github.com/users/arifcse019/following{/other_user}","gists_url":"https://api.github.com/users/arifcse019/gists{/gist_id}","starred_url":"https://api.github.com/users/arifcse019/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arifcse019/subscriptions","organizations_url":"https://api.github.com/users/arifcse019/orgs","repos_url":"https://api.github.com/users/arifcse019/repos","events_url":"https://api.github.com/users/arifcse019/events{/privacy}","received_events_url":"https://api.github.com/users/arifcse019/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T09:01:55Z","updated_at":"2019-12-18T09:01:55Z","author_association":"NONE","body":"There seems to be a memory leak issue going on. In the attached image, the orange line is showing memory usage percentage of a 2.3.1 node and the blue line is of a 1.7.1 node. They are running independently, not connected to each other. Where the orange line dips down after consistently rising is when the crash happened\r\n\r\n<img width=\"1175\" alt=\"Screen Shot 2019-12-18 at 1 58 43 AM\" src=\"https://user-images.githubusercontent.com/10591704/71071697-4d7bcc00-213a-11ea-9761-70245fa95747.png\">\r\n\r\nI will close this ticket and open a new one","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566940762/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566998267","html_url":"https://github.com/apache/couchdb/issues/2221#issuecomment-566998267","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2221","id":566998267,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Njk5ODI2Nw==","user":{"login":"danielfoxp2","id":2607307,"node_id":"MDQ6VXNlcjI2MDczMDc=","avatar_url":"https://avatars.githubusercontent.com/u/2607307?v=4","gravatar_id":"","url":"https://api.github.com/users/danielfoxp2","html_url":"https://github.com/danielfoxp2","followers_url":"https://api.github.com/users/danielfoxp2/followers","following_url":"https://api.github.com/users/danielfoxp2/following{/other_user}","gists_url":"https://api.github.com/users/danielfoxp2/gists{/gist_id}","starred_url":"https://api.github.com/users/danielfoxp2/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielfoxp2/subscriptions","organizations_url":"https://api.github.com/users/danielfoxp2/orgs","repos_url":"https://api.github.com/users/danielfoxp2/repos","events_url":"https://api.github.com/users/danielfoxp2/events{/privacy}","received_events_url":"https://api.github.com/users/danielfoxp2/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T11:44:25Z","updated_at":"2019-12-18T11:44:25Z","author_association":"NONE","body":"> This console warning is not an error or an actual problem — Chrome is just spreading the word about this new standard to increase developer adoption.\r\n> \r\nI know it is not an error or problem, but since it is the couch itself that sets the cookie I thought that should be the couch the one who needs to set the same site attribute. Am I wrong about this?\r\n\r\nI'm asking because I understand very little about this subject.\r\n\r\nThanks.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/566998267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567089388","html_url":"https://github.com/apache/couchdb/issues/1502#issuecomment-567089388","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1502","id":567089388,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzA4OTM4OA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T15:48:19Z","updated_at":"2019-12-18T15:48:19Z","author_association":"MEMBER","body":"Also gotta bump the db version key so we invalidate all of the cached db handles.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567089388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567099425","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567099425","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567099425,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzA5OTQyNQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T16:09:58Z","updated_at":"2019-12-18T16:09:58Z","author_association":"MEMBER","body":"I've tested `make javascript` on both `./configure --dev` and `./configure --dev --spidermonkey-version=1.8.5` and that passes. Having moved on to using `--spidermonkey-version=60` I'm getting these errors consistently:\r\n\r\n```\r\nError: chttpd_view_test:chttpd_view_test:75 should_succeed_on_view_with_queries_keys\r\n\r\n::in function lists:nth/2 (lists.erl, line 170)\r\n  called as nth(1,undefined)\r\nin call from chttpd_view_test:'-should_succeed_on_view_with_queries_keys/1-fun-2-'/1 (test/eunit/chttpd_view_test.erl, line 85)\r\n**error:function_clause\r\n\r\nError: chttpd_view_test:chttpd_view_test:91 should_succeed_on_view_with_queries_limit_skip\r\n\r\n::in function chttpd_view_test:'-should_succeed_on_view_with_queries_limit_skip/1-fun-1-'/1 (test/eunit/chttpd_view_test.erl, line 98)\r\nin call from chttpd_view_test:'-should_succeed_on_view_with_queries_limit_skip/1-fun-4-'/1 (test/eunit/chttpd_view_test.erl, line 98)\r\n**error:{assertEqual,[{module,chttpd_view_test},\r\n              {line,98},\r\n              {expression,\"RC\"},\r\n              {expected,200},\r\n              {value,404}]}\r\n\r\nError: chttpd_view_test:chttpd_view_test:108 should_succeed_on_view_with_multiple_queries\r\n\r\n::in function chttpd_view_test:'-should_succeed_on_view_with_multiple_queries/1-fun-1-'/1 (test/eunit/chttpd_view_test.erl, line 116)\r\nin call from chttpd_view_test:'-should_succeed_on_view_with_multiple_queries/1-fun-5-'/1 (test/eunit/chttpd_view_test.erl, line 116)\r\n**error:{assertEqual,[{module,chttpd_view_test},\r\n              {line,116},\r\n              {expression,\"RC\"},\r\n              {expected,200},\r\n              {value,404}]}\r\n\r\nError: chttpd_security_tests:fixture setup [39,1,1,14]\r\n\r\n::in function chttpd_security_tests:create_user/4 (test/eunit/chttpd_security_tests.erl, line 91)\r\nin call from chttpd_security_tests:setup/0 (test/eunit/chttpd_security_tests.erl, line 51)\r\n**error:{badmatch,{ok,500,\r\n              [{\"Cache-Control\",\"must-revalidate\"},\r\n               {\"Content-Length\",\"5555\"},\r\n               {\"Content-Type\",\"application/json\"},\r\n               {\"Date\",\"Wed, 18 Dec 2019 16:07:37 GMT\"},\r\n               {\"Server\",\"CouchDB/3.0.0-61486a5e4 (Erlang OTP/20)\"},\r\n               {\"X-Couch-Request-ID\",\"7707c95a33\"},\r\n               {\"X-CouchDB-Body-Time\",\"0\"}],\r\n              <<\"{\\\"error\\\":\\\"compilation_error\\\",\\\"reason\\\":\\\"(new SyntaxError(\\\\\\\"function statement requires a name\\\\\\\", \\\\\\\"<unknown>\\\\\\\", 2)) (\\\\n    function(newDoc, oldDoc, userCtx, secObj) {\\\\n        if (newDoc._deleted === true) {\\\\n            // allow deletes by admins and matching users\\\\n            // without checking the other fields\\\\n            if ((userCtx.roles.indexOf('_admin') !== -1\"...>>}}\r\n\r\n```\r\n\r\nI haven't looked at them in any depth. That last one is obviously us missing a call to `rewriteFun` somewhere though.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567099425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567100061","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567100061","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567100061,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzEwMDA2MQ==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T16:11:11Z","updated_at":"2019-12-18T16:11:11Z","author_association":"MEMBER","body":"Also we should rebase this against master which includes those fixes for JavaScript tests. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567100061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567148820","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567148820","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567148820,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzE0ODgyMA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T18:15:21Z","updated_at":"2019-12-18T18:15:21Z","author_association":"MEMBER","body":"I've created the requested mirrors:\r\n\r\nhttps://github.com/apache/couchdb-esprima\r\nhttps://github.com/apache/couchdb-escodegen\r\n\r\nThe esprima repo in particular is nearly 60MiB so we'll want to figure out some sort of script to avoid having to download that for every build. Not sure how all the JS tooling works for that sort of thing.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567148820/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":2,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567168234","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567168234","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567168234,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzE2ODIzNA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T19:07:31Z","updated_at":"2019-12-18T19:07:31Z","author_association":"MEMBER","body":"Finally managed to get the esprima.js thing \"compiled\" and importable into SpiderMonkey. In the `couchdb-esprima` repo you can do this (assuming you have TypeScript and webpack installed, both available in Homebrew):\r\n\r\n```\r\ntsc -p src/\r\nwebpack --mode none\r\n```\r\n\r\nThis gives a human readable `dist/esprima.js`\r\n\r\nThe patch that CouchDB needs to make this work is:\r\n\r\n```diff\r\n--- esprima.js\t2019-12-18 12:59:30.000000000 -0600\r\n+++ esprima.couchdb.js\t2019-12-18 13:05:04.000000000 -0600\r\n@@ -7,7 +7,7 @@\r\n \t\texports[\"esprima\"] = factory();\r\n \telse\r\n \t\troot[\"esprima\"] = factory();\r\n-})(window, function() {\r\n+})(this, function() {\r\n return /******/ (function(modules) { // webpackBootstrap\r\n /******/ \t// The module cache\r\n /******/ \tvar installedModules = {};\r\n@@ -3468,7 +3468,9 @@\r\n                     statement = this.parseLexicalDeclaration({ inFor: false });\r\n                     break;\r\n                 case 'function':\r\n-                    statement = this.parseFunctionDeclaration();\r\n+                    // Apache CouchDB modification: add true to tolerate\r\n+                    // missing function identifiers.\r\n+                    statement = this.parseFunctionDeclaration(true);\r\n                     break;\r\n                 case 'class':\r\n                     statement = this.parseClassDeclaration();\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567168234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567179843","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567179843","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567179843,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzE3OTg0Mw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-18T19:37:52Z","updated_at":"2019-12-18T19:37:52Z","author_association":"MEMBER","body":"I can't figure out how to get a standalone escodegen.js as it has commonjs stuff and the `npm run release` script fails. If any JS folks want to take a look at that I'd be much obliged.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567179843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567274090","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-567274090","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":567274090,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzI3NDA5MA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T00:28:52Z","updated_at":"2019-12-19T02:13:45Z","author_association":"CONTRIBUTOR","body":"@davisp Hey Paul, regarding https://github.com/apache/couchdb/pull/2345#issuecomment-567099425, it is due to our refactoring of bffa5e6 this week. Removing this line will resolve issue. I also rebased from master along with this change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567274090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567447223","html_url":"https://github.com/apache/couchdb/pull/2361#issuecomment-567447223","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2361","id":567447223,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzQ0NzIyMw==","user":{"login":"willholley","id":97787,"node_id":"MDQ6VXNlcjk3Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/97787?v=4","gravatar_id":"","url":"https://api.github.com/users/willholley","html_url":"https://github.com/willholley","followers_url":"https://api.github.com/users/willholley/followers","following_url":"https://api.github.com/users/willholley/following{/other_user}","gists_url":"https://api.github.com/users/willholley/gists{/gist_id}","starred_url":"https://api.github.com/users/willholley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/willholley/subscriptions","organizations_url":"https://api.github.com/users/willholley/orgs","repos_url":"https://api.github.com/users/willholley/repos","events_url":"https://api.github.com/users/willholley/events{/privacy}","received_events_url":"https://api.github.com/users/willholley/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T11:15:01Z","updated_at":"2019-12-19T11:16:00Z","author_association":"MEMBER","body":"@jaydoane this creates a subtle breaking change from the scheduled compaction settings in [previous versions](https://github.com/apache/couchdb/blob/2.3.1/src/couch/src/couch_compaction_daemon.erl#L400) and seems like it could create some user confusion, particularly given the standard requirement to run compaction outside of peak hours which tend to follow local time rather than utc (e.g. adjust for daylight savings).\r\n\r\nI wonder if it would be better to maintain compatibility with the previous settings and change the tests to use local time instead?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567447223/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567489206","html_url":"https://github.com/apache/couchdb/issues/2307#issuecomment-567489206","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2307","id":567489206,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzQ4OTIwNg==","user":{"login":"af-silva","id":11874980,"node_id":"MDQ6VXNlcjExODc0OTgw","avatar_url":"https://avatars.githubusercontent.com/u/11874980?v=4","gravatar_id":"","url":"https://api.github.com/users/af-silva","html_url":"https://github.com/af-silva","followers_url":"https://api.github.com/users/af-silva/followers","following_url":"https://api.github.com/users/af-silva/following{/other_user}","gists_url":"https://api.github.com/users/af-silva/gists{/gist_id}","starred_url":"https://api.github.com/users/af-silva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/af-silva/subscriptions","organizations_url":"https://api.github.com/users/af-silva/orgs","repos_url":"https://api.github.com/users/af-silva/repos","events_url":"https://api.github.com/users/af-silva/events{/privacy}","received_events_url":"https://api.github.com/users/af-silva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T13:27:24Z","updated_at":"2019-12-19T15:19:12Z","author_association":"NONE","body":"Hi @davisp thanks for the insight.\r\n\r\nI think you are right, the problem was that somehow the shard appears to have been corrupted. In the meanwhile we have recovered some of the data by reverting to a previous backup.\r\n\r\nOur current set up is a single virtual machine stored in an Hyper-V server. We are at the moment starting to think that a better choice would be to configure a CouchDB cluster inside the Hyper-V server connected to another an external instance, i.e., three couchdb instances working in parallel. The problem was that our server was shutdown by a power cut, whiteout notice, and the UPS's were not able to handle the load and also failed. \r\n\r\nBut nonetheless, our virtual machine is Debian based and only holds the CouchDB server, so the file systems is ext4 and then the hyper-v image of the machine, this one yes, is stored in the NFS file system of the server. \r\n\r\nWe just don't know or understand how the file become corrupted... this never happened, and we have a previous similar situation....\r\n\r\nIf you have any advice we are thankful,\r\nBest regards, and thanks for the answer.  \r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567489206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567575787","html_url":"https://github.com/apache/couchdb/issues/2307#issuecomment-567575787","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2307","id":567575787,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzU3NTc4Nw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T17:02:56Z","updated_at":"2019-12-19T17:02:56Z","author_association":"MEMBER","body":"The only times I've ever seen file corruption in CouchDB is hardware failure, operator error (i.e., someone truncated the really wrong thing), or storing .couch files on NFS mounts. I don't know enough about Hyper-V to have a solid opinion but it sounds like you've got ext4 inside the VM and outside those writes are going to NFS? If so, that coupled with your power outage is likely the cause of the issue.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567575787/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567592251","html_url":"https://github.com/apache/couchdb/pull/2361#issuecomment-567592251","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2361","id":567592251,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzU5MjI1MQ==","user":{"login":"jaydoane","id":51209,"node_id":"MDQ6VXNlcjUxMjA5","avatar_url":"https://avatars.githubusercontent.com/u/51209?v=4","gravatar_id":"","url":"https://api.github.com/users/jaydoane","html_url":"https://github.com/jaydoane","followers_url":"https://api.github.com/users/jaydoane/followers","following_url":"https://api.github.com/users/jaydoane/following{/other_user}","gists_url":"https://api.github.com/users/jaydoane/gists{/gist_id}","starred_url":"https://api.github.com/users/jaydoane/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaydoane/subscriptions","organizations_url":"https://api.github.com/users/jaydoane/orgs","repos_url":"https://api.github.com/users/jaydoane/repos","events_url":"https://api.github.com/users/jaydoane/events{/privacy}","received_events_url":"https://api.github.com/users/jaydoane/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T17:48:07Z","updated_at":"2019-12-19T17:48:07Z","author_association":"CONTRIBUTOR","body":"> @jaydoane this creates a subtle breaking change from the scheduled compaction settings in [previous versions](https://github.com/apache/couchdb/blob/2.3.1/src/couch/src/couch_compaction_daemon.erl#L400) and seems like it could create some user confusion, particularly given the standard requirement to run compaction outside of peak hours which tend to follow local time rather than utc (e.g. adjust for daylight savings).\r\n> \r\n> I wonder if it would be better to maintain compatibility with the previous settings and change the tests to use local time instead?\r\n\r\n@willholley Oh drat, I was completely unaware that the old compaction demon used local time, which is a strange decision on its face, but I can see how it might have made sense, and how it could cause problems to change it. Although I could argue that a good time to change it might be now, with the introduction of smoosh. In any case, whichever way we go, the documentation should be very clear. I'm happy to change the tests instead to local time (or approve a PR if that's easier).\r\n\r\n@kocolosk what do you think is the best approach here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567592251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567650108","html_url":"https://github.com/apache/couchdb/pull/2361#issuecomment-567650108","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2361","id":567650108,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzY1MDEwOA==","user":{"login":"kocolosk","id":16679,"node_id":"MDQ6VXNlcjE2Njc5","avatar_url":"https://avatars.githubusercontent.com/u/16679?v=4","gravatar_id":"","url":"https://api.github.com/users/kocolosk","html_url":"https://github.com/kocolosk","followers_url":"https://api.github.com/users/kocolosk/followers","following_url":"https://api.github.com/users/kocolosk/following{/other_user}","gists_url":"https://api.github.com/users/kocolosk/gists{/gist_id}","starred_url":"https://api.github.com/users/kocolosk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kocolosk/subscriptions","organizations_url":"https://api.github.com/users/kocolosk/orgs","repos_url":"https://api.github.com/users/kocolosk/repos","events_url":"https://api.github.com/users/kocolosk/events{/privacy}","received_events_url":"https://api.github.com/users/kocolosk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T20:27:06Z","updated_at":"2019-12-19T20:27:06Z","author_association":"MEMBER","body":"Funny, I added this enhancement and copied over the use of `erlang:time()` from the old compaction daemon without even thinking about the timezone issue. Even when I was writing the documentation it seemed totally natural to include examples of suspending compactions during  business hours. Sort of crazy in hindsight.\r\n\r\nISO8601 says to assume local time if no offset is given, so I guess that's what we should do for servers that set a timezone to something other than UTC.\r\n\r\nIt seems like it'd also be a good idea to enhance smoosh to understand ISO8601-formatted timestamps and recommend their usage to avoid ambiguity.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567650108/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567683856","html_url":"https://github.com/apache/couchdb/pull/2092#issuecomment-567683856","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2092","id":567683856,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzY4Mzg1Ng==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T21:28:06Z","updated_at":"2019-12-19T21:28:06Z","author_association":"MEMBER","body":"@rnewson You merged a thing I thought? Does this need to be closed?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567683856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567880348","html_url":"https://github.com/apache/couchdb/issues/2378#issuecomment-567880348","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2378","id":567880348,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Nzg4MDM0OA==","user":{"login":"intckarl","id":14276240,"node_id":"MDQ6VXNlcjE0Mjc2MjQw","avatar_url":"https://avatars.githubusercontent.com/u/14276240?v=4","gravatar_id":"","url":"https://api.github.com/users/intckarl","html_url":"https://github.com/intckarl","followers_url":"https://api.github.com/users/intckarl/followers","following_url":"https://api.github.com/users/intckarl/following{/other_user}","gists_url":"https://api.github.com/users/intckarl/gists{/gist_id}","starred_url":"https://api.github.com/users/intckarl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/intckarl/subscriptions","organizations_url":"https://api.github.com/users/intckarl/orgs","repos_url":"https://api.github.com/users/intckarl/repos","events_url":"https://api.github.com/users/intckarl/events{/privacy}","received_events_url":"https://api.github.com/users/intckarl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T10:41:28Z","updated_at":"2019-12-20T10:41:28Z","author_association":"NONE","body":"Also\r\n HTTP POST request '/_cluster_setup' failed. Code 500. Error:{\"error\":\"error\",\"reason\":\"{invalid_ejson,{conn_failed,{error,nxdomain}}}","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567880348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567953480","html_url":"https://github.com/apache/couchdb/issues/2307#issuecomment-567953480","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2307","id":567953480,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Nzk1MzQ4MA==","user":{"login":"af-silva","id":11874980,"node_id":"MDQ6VXNlcjExODc0OTgw","avatar_url":"https://avatars.githubusercontent.com/u/11874980?v=4","gravatar_id":"","url":"https://api.github.com/users/af-silva","html_url":"https://github.com/af-silva","followers_url":"https://api.github.com/users/af-silva/followers","following_url":"https://api.github.com/users/af-silva/following{/other_user}","gists_url":"https://api.github.com/users/af-silva/gists{/gist_id}","starred_url":"https://api.github.com/users/af-silva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/af-silva/subscriptions","organizations_url":"https://api.github.com/users/af-silva/orgs","repos_url":"https://api.github.com/users/af-silva/repos","events_url":"https://api.github.com/users/af-silva/events{/privacy}","received_events_url":"https://api.github.com/users/af-silva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T14:58:59Z","updated_at":"2019-12-20T14:58:59Z","author_association":"NONE","body":"Hi @davisp ,\r\n\r\n> but it sounds like you've got ext4 inside the VM and outside those writes are going to NFS?\r\n\r\nYap you are right, but i think (i'm also not an expert in Hyper-V) that the image file of the VM is it self saved as a whole in the NFS filesystem, so if this file was corrupted the virtual machine would not even load.\r\nMy objective with this issue was to understand what happened and try to mitigate as much as possible that it occurs again. Also, I'm still learning the the ropes around CouchDB and this error could be a miss configuration or a bad architecture choice (at least we have identified one).\r\n\r\nBut Thanks for the reply and your insight into this issue.\r\nDo you wish me toclose the issue, or leave it for discussion ??\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567953480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567959247","html_url":"https://github.com/apache/couchdb/issues/2191#issuecomment-567959247","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2191","id":567959247,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Nzk1OTI0Nw==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T15:15:46Z","updated_at":"2019-12-20T15:15:46Z","author_association":"MEMBER","body":"Noting that https://github.com/apache/couchdb/pull/2339 is now merged. Is there more to be done here?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/567959247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568005070","html_url":"https://github.com/apache/couchdb/issues/2307#issuecomment-568005070","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2307","id":568005070,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODAwNTA3MA==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T17:12:38Z","updated_at":"2019-12-20T17:12:38Z","author_association":"MEMBER","body":"@af-silva Hiya!\r\n\r\nDoing a quick Google it looks like there are various recommendations about data consistency from within a Hyper-V guest [1]. I'd give a look through some of those to see if your Hyper-V configuration is setup properly. I'd pay particularly close attention to the last couple bullet points on ways that the host needs to be configured to honor a guest's write flushing and so on. Also a heads up that you may want to also Google for hosting MySQL or PostgreSQL in Hyper-V as they'll likely have more hits on how to configure the Hyper-V host properly.\r\n\r\nI'll leave this ticket open incase you find any settings that need tweaked that we might want to add to docs somewhere.\r\n\r\n[1] https://support.microsoft.com/en-us/help/2801713/hyper-v-storage-caching-layers-and-implications-for-data-consistency","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568005070/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568128909","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-568128909","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":568128909,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODEyODkwOQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-20T23:58:00Z","updated_at":"2019-12-20T23:58:00Z","author_association":"CONTRIBUTOR","body":"Thanks @davisp @wohali @janl @tilgovi @garrensmith and all who helped make this happen. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568128909/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568326127","html_url":"https://github.com/apache/couchdb/pull/2379#issuecomment-568326127","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2379","id":568326127,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODMyNjEyNw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-23T01:44:07Z","updated_at":"2019-12-23T01:44:07Z","author_association":"CONTRIBUTOR","body":"+1 and local test passed\r\n```\r\n==> couch_replicator (compile)\r\n==> rel (compile)\r\n==> couchdb (compile)\r\n==> couchdb (setup_eunit)\r\n==> couch_replicator (eunit)\r\nCompiled src/couch_replicator_utils.erl\r\nCompiled src/couch_replicator_doc_processor_worker.erl\r\nCompiled src/couch_replicator_doc_processor.erl\r\n/Users/jiangph/couchdb/couchdb.multi-sm/couchdb/src/couch_replicator/src/couch_replicator_scheduler_job.erl:319: Warning: erlang:get_stacktrace/0: deprecated; use the new try/catch syntax for retrieving the stack backtrace\r\nCompiled src/couch_replicator_scheduler_job.erl\r\nCompiled src/couch_replicator.erl\r\nCompiled src/couch_replicator_docs.erl\r\nCompiled src/couch_replicator_scheduler.erl\r\n======================== EUnit ========================\r\nmodule 'couch_replicator_httpc'\r\nmodule 'couch_replicator_db_changes'\r\nmodule 'couch_replicator_app'\r\ncouch_replicator_api_wrap: normalize_http_db_test (module 'couch_replicator_api_wrap')...ok\r\nmodule 'couch_replicator_auth'\r\nmodule 'couch_replicator_sup'\r\nmodule 'couch_replicator_scheduler_job'\r\n  couch_replicator_scheduler_job: replication_start_error_test...[0.004 s] ok\r\n  couch_replicator_scheduler_job: scheduler_job_format_status_test...[0.006 s] ok\r\n  [done in 0.016 s]\r\nmodule 'couch_replicator_fabric'\r\nmodule 'couch_replicator_changes_reader'\r\nmodule 'couch_replicator_ids'\r\n  couch_replicator_ids:190: replication_id_convert_test_...ok\r\n  couch_replicator_ids:190: replication_id_convert_test_...ok\r\n  couch_replicator_ids:190: replication_id_convert_test_...ok\r\n  couch_replicator_ids:190: replication_id_convert_test_...ok\r\n  couch_replicator_ids:190: replication_id_convert_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...[0.001 s] ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\nApplication crypto was left running!endpoint_test_...ok\r\n\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  couch_replicator_ids:199: http_v4_endpoint_test_...ok\r\n  [done in 0.065 s]\r\nmodule 'couch_replicator_fabric_rpc'\r\ncouch_replicator_worker: replication_worker_format_status_test (module 'couch_replicator_worker')...ok\r\nmodule 'couch_replicator_clustering'\r\n  couch_replicator_clustering:217: t_stable_callback...ok\r\n  couch_replicator_clustering:225: t_unstable_callback...ok\r\n  [done in 0.339 s]\r\nmodule 'couch_replicator_attachments_too_large'\r\n  Attachment size too large replication tests\r\n    couch_replicator_attachments_too_large:55: should_succeed...[0.003 s] ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    couch_replicator_attachments_too_large:65: should_fail...[0.001 s] ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 1.473 s]\r\n  [done in 1.473 s]\r\nmodule 'couch_replicator_small_max_request_size_target'\r\n  Replicate docs when target has a small max_http_request_size\r\n    remote -> remote\r\n      couch_replicator_small_max_request_size_target:102: should_populate_source...[0.066 s] ok\r\n      couch_replicator_small_max_request_size_target:126: should_replicate...[0.116 s] ok\r\n      couch_replicator_small_max_request_size_target:136: should_compare_databases...[0.001 s] ok\r\n      [done in 0.192 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    remote -> remote\r\n      couch_replicator_small_max_request_size_target:109: should_populate_source_one_large_one_small...[0.071 s] ok\r\n      couch_replicator_small_max_request_size_target:126: should_replicate...[0.065 s] ok\r\n      couch_replicator_small_max_request_size_target:136: should_compare_databases...[0.001 s] ok\r\n      [done in 0.147 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    remote -> remote\r\n      couch_replicator_small_max_request_size_target:116: should_populate_source_one_large_attachment...[0.032 s] ok\r\n      couch_replicator_small_max_request_size_target:102: should_populate_source...[0.067 s] ok\r\n      couch_replicator_small_max_request_size_target:126: should_replicate...[0.073 s] ok\r\n      couch_replicator_small_max_request_size_target:136: should_compare_databases...[0.001 s] ok\r\n      [done in 0.185 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 1.169 s]\r\n  [done in 1.169 s]\r\nmodule 'couch_replicator_doc_processor_worker'\r\n  couch_replicator_doc_processor_worker:162: t_should_add_job...[0.002 s] ok\r\n  couch_replicator_doc_processor_worker:172: t_already_running_same_docid...[0.011 s] ok\r\n  couch_replicator_doc_processor_worker:183: t_already_running_transient...[0.013 s] ok\r\n  couch_replicator_doc_processor_worker:196: t_already_running_other_db_other_doc...[0.011 s] ok\r\n  couch_replicator_doc_processor_worker:209: t_spawn_worker...[0.007 s] ok\r\n  couch_replicator_doc_processor_worker:226: t_ignore_if_doc_deleted...[0.007 s] ok\r\n  couch_replicator_doc_processor_worker:238: t_ignore_if_worker_ref_does_not_match...[0.007 s] ok\r\n  [done in 5.973 s]\r\nmodule 'couch_replicator_auth_noop'\r\nmodule 'couch_replicator_rate_limiter_tables'\r\nmodule 'couch_replicator_notifier'\r\nmodule 'couch_replicator_connection'\r\n  module 'couch_replicator_connection_tests'\r\n    replicator connection sharing tests\r\n      couch_replicator_connection_tests:55: connections_shared_after_release...ok\r\n      couch_replicator_connection_tests:71: connections_not_shared_after_owner_death...ok\r\n      couch_replicator_connection_tests:92: idle_connections_closed...[0.006 s] ok\r\n      couch_replicator_connection_tests:108: test_owner_monitors...ok\r\n      couch_replicator_connection_tests:130: worker_discards_creds_on_create...ok\r\n      couch_replicator_connection_tests:141: worker_discards_url_creds_after_request...[0.001 s] ok\r\n      couch_replicator_connection_tests:158: worker_discards_creds_in_headers_after_request...[0.001 s] ok\r\n      couch_replicator_connection_tests:176: worker_discards_proxy_creds_after_request...[0.001 s] ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n      [done in 0.034 s]\r\n    [done in 0.171 s]\r\n  [done in 0.171 s]\r\nmodule 'couch_replicator_httpd'\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  couch_replicator_httpd:164: unquoted_scheduler_docs_path_test_...ok\r\n  [done in 0.018 s]\r\nmodule 'couch_replicator'\r\n  couch_replicator:311: t_admin_is_always_authorized...[0.291 s] ok\r\n  couch_replicator:319: t_username_must_match...[0.285 s] ok\r\n  couch_replicator:330: t_replication_not_found...[0.281 s] ok\r\n  couch_replicator:367: t_strip_http_basic_creds...[0.002 s] ok\r\n  couch_replicator:381: t_strip_http_props_creds...ok\r\n  couch_replicator:363: t_strip_local_db_creds...ok\r\n  [done in 1.143 s]\r\nmodule 'couch_replicator_test_helper'\r\nmodule 'couch_replicator_job_sup'\r\nmodule 'couch_replicator_retain_stats_between_job_runs'\r\n  couch_replicator_retain_stats_between_job_runs:49: t_stats_retained...[0.629 s] ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n  [done in 0.632 s]\r\nmodule 'couch_replicator_scheduler_sup'\r\nmodule 'json_stream_parse'\r\nmodule 'couch_replicator_utils'\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:199: remove_basic_auth_from_headers_test_...ok\r\n  couch_replicator_utils:252: normalize_rep_test_...ok\r\n  [done in 0.110 s]\r\nmodule 'couch_replicator_httpc_pool'\r\n  module 'couch_replicator_httpc_pool_tests'\r\n    httpc pool tests\r\n      couch_replicator_httpc_pool_tests:47: should_block_new_clients_when_full...[1.001 s] ok\r\n      couch_replicator_httpc_pool_tests:84: should_replace_worker_on_death...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n      [done in 1.009 s]\r\n    [done in 1.141 s]\r\n  [done in 1.141 s]\r\nmodule 'couch_replicator_doc_processor'\r\n  couch_replicator_doc_processor:641: t_bad_change...ok\r\n  couch_replicator_doc_processor:649: t_regular_change...[0.010 s] ok\r\n  couch_replicator_doc_processor:659: t_change_with_doc_processor_crash...[0.010 s] ok\r\n  couch_replicator_doc_processor:669: t_change_with_existing_job...[0.011 s] ok\r\n  couch_replicator_doc_processor:679: t_deleted_change...[0.012 s] ok\r\n  couch_replicator_doc_processor:688: t_triggered_change...[0.012 s] ok\r\n  couch_replicator_doc_processor:699: t_completed_change...ok\r\n  couch_replicator_doc_processor:712: t_active_replication_completed...[0.010 s] ok\r\n  couch_replicator_doc_processor:726: t_error_change...[0.010 s] ok\r\n  couch_replicator_doc_processor:738: t_failed_change...ok\r\n  couch_replicator_doc_processor:749: t_change_for_different_node...[0.006 s] ok\r\n  couch_replicator_doc_processor:760: t_change_when_cluster_unstable...[0.006 s] ok\r\n  couch_replicator_doc_processor:769: t_ejson_docs...[0.010 s] ok\r\n  couch_replicator_doc_processor:798: t_cluster_membership_foldl...[0.020 s] ok\r\n  couch_replicator_doc_processor:817: get_worker_ref_test_...ok\r\n  [done in 9.641 s]\r\nmodule 'couch_replicator_httpd_util'\r\nmodule 'couch_replicator_rate_limiter'\r\n  module 'couch_replicator_rate_limiter_tests'\r\n    couch_replicator_rate_limiter_tests:23: t_new_key...ok\r\n    couch_replicator_rate_limiter_tests:29: t_1_failure...ok\r\n    couch_replicator_rate_limiter_tests:44: t_2_failures_back_to_back...ok\r\n    couch_replicator_rate_limiter_tests:35: t_2_failures...[0.101 s] ok\r\n    couch_replicator_rate_limiter_tests:52: t_success_threshold...ok\r\n    couch_replicator_rate_limiter_tests:61: t_1_failure_2_successes...[0.202 s] ok\r\n    [done in 0.322 s]\r\n  [done in 0.322 s]\r\nmodule 'couch_replicator_auth_session'\r\n  couch_replicator_auth_session:561: get_session_url_test_...ok\r\n  couch_replicator_auth_session:561: get_session_url_test_...ok\r\n  couch_replicator_auth_session:561: get_session_url_test_...ok\r\n  couch_replicator_auth_session:561: get_session_url_test_...ok\r\n  couch_replicator_auth_session:561: get_session_url_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:572: extract_creds_success_test_...ok\r\n  couch_replicator_auth_session:656: t_do_refresh_without_max_age...[0.002 s] ok\r\n  couch_replicator_auth_session:667: t_do_refresh_with_max_age...[0.016 s] ok\r\n  couch_replicator_auth_session:679: t_dont_refresh...ok\r\n  couch_replicator_auth_session:696: t_process_auth_failure...ok\r\n  couch_replicator_auth_session:705: t_process_auth_failure_stale_epoch...ok\r\n  couch_replicator_auth_session:712: t_process_auth_failure_too_frequent...ok\r\n  couch_replicator_auth_session:719: t_process_ok_update_cookie...ok\r\n  couch_replicator_auth_session:730: t_process_ok_no_cookie...ok\r\n  couch_replicator_auth_session:739: t_init_state_fails_on_401...[0.015 s] ok\r\n  couch_replicator_auth_session:748: t_init_state_401_with_require_valid_user...[0.014 s] ok\r\n  couch_replicator_auth_session:756: t_init_state_404...[0.016 s] ok\r\n  couch_replicator_auth_session:763: t_init_state_no_creds...ok\r\n  couch_replicator_auth_session:769: t_init_state_http_error...[0.013 s] ok\r\n  couch_replicator_auth_session:820: extract_creds_error_test_...ok\r\n  couch_replicator_auth_session:820: extract_creds_error_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  couch_replicator_auth_session:828: parse_max_age_test_...ok\r\n  [done in 3.606 s]\r\nmodule 'couch_replicator_stats'\r\nmodule 'couch_replicator_filters'\r\n  couch_replicator_filters: ejsort_basic_values_test...ok\r\n  couch_replicator_filters: ejsort_compound_values_test...ok\r\n  [done in 0.006 s]\r\nmodule 'couch_replicator_scheduler'\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:973: backoff_micros_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:981: consecutive_crashes_test_...ok\r\n  couch_replicator_scheduler:1001: consecutive_crashes_non_default_threshold_test_...ok\r\n  couch_replicator_scheduler:1001: consecutive_crashes_non_default_threshold_test_...ok\r\n  couch_replicator_scheduler:1008: latest_crash_timestamp_test_...ok\r\n  couch_replicator_scheduler:1008: latest_crash_timestamp_test_...ok\r\n  couch_replicator_scheduler:1008: latest_crash_timestamp_test_...ok\r\n  couch_replicator_scheduler:1008: latest_crash_timestamp_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler:1017: last_started_test_...ok\r\n  couch_replicator_scheduler: longest_running_test...ok\r\n  couch_replicator_scheduler:1080: t_pending_jobs_simple...[0.003 s] ok\r\n  couch_replicator_scheduler:1092: t_pending_jobs_skip_crashed...ok\r\n  couch_replicator_scheduler:1107: t_one_job_starts...ok\r\n  couch_replicator_scheduler:1116: t_no_jobs_start_if_max_is_0...ok\r\n  couch_replicator_scheduler:1124: t_one_job_starts_if_max_is_1...ok\r\n  couch_replicator_scheduler:1132: t_max_churn_does_not_throttle_initial_start...ok\r\n  couch_replicator_scheduler:1140: t_excess_oneshot_only_jobs...ok\r\n  couch_replicator_scheduler:1151: t_excess_continuous_only_jobs...[0.001 s] ok\r\n  couch_replicator_scheduler:1162: t_excess_prefer_continuous_first...[0.001 s] ok\r\n  couch_replicator_scheduler:1182: t_stop_oldest_first...ok\r\n  couch_replicator_scheduler:1198: t_start_oldest_first...[0.001 s] ok\r\n  couch_replicator_scheduler:1212: t_jobs_churn_even_if_not_all_max_jobs_are_running...ok\r\n  couch_replicator_scheduler:1225: t_jobs_dont_churn_if_there_are_available_running_slots...ok\r\n  couch_replicator_scheduler:1238: t_start_only_pending_jobs_do_not_churn_existing_ones...ok\r\n  couch_replicator_scheduler:1251: t_dont_stop_if_nothing_pending...ok\r\n  couch_replicator_scheduler:1259: t_max_churn_limits_number_of_rotated_jobs...[0.001 s] ok\r\n  couch_replicator_scheduler:1396: t_existing_jobs...ok\r\n  couch_replicator_scheduler:1273: t_if_pending_less_than_running_start_all_pending...ok\r\n  couch_replicator_scheduler:1288: t_running_less_than_pending_swap_all_running...ok\r\n  couch_replicator_scheduler:1303: t_oneshot_dont_get_rotated...ok\r\n  couch_replicator_scheduler:1311: t_rotate_continuous_only_if_mixed...ok\r\n  couch_replicator_scheduler:1319: t_oneshot_dont_get_starting_priority...ok\r\n  couch_replicator_scheduler:1330: t_oneshot_will_hog_the_scheduler...ok\r\n  couch_replicator_scheduler:1344: t_if_excess_is_trimmed_rotation_still_happens...[0.001 s] ok\r\n  couch_replicator_scheduler:1357: t_if_transient_job_crashes_it_gets_removed...ok\r\n  couch_replicator_scheduler:1375: t_if_permanent_job_crashes_it_stays_in_ets...[0.001 s] ok\r\n  couch_replicator_scheduler:1420: t_job_summary_running...ok\r\n  couch_replicator_scheduler:1445: t_job_summary_pending...ok\r\n  couch_replicator_scheduler:1466: t_job_summary_crashing_once...ok\r\n  couch_replicator_scheduler:1482: t_job_summary_crashing_many_times...ok\r\n  couch_replicator_scheduler:1498: t_job_summary_proxy_fields...ok\r\n  [done in 3.376 s]\r\nmodule 'couch_replicator_docs'\r\n  couch_replicator_docs: check_options_pass_values_test...ok\r\n  couch_replicator_docs: check_options_fail_values_test...ok\r\n  couch_replicator_docs: check_convert_options_pass_test...ok\r\n  couch_replicator_docs: check_convert_options_fail_test...ok\r\n  couch_replicator_docs: check_strip_credentials_test...ok\r\n  couch_replicator_docs:831: t_vdu_does_not_crash_on_save...[0.085 s] ok\r\nerl_child_setup: failed with error 32 on line 253\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n  couch_replicator_docs:851: t_error_on_local_endpoint...ok\r\n  [done in 0.376 s]\r\nmodule 'couch_replicator_large_atts_tests'\r\n  Replicate docs with large attachments\r\n    remote -> remote\r\n      couch_replicator_large_atts_tests:80: should_populate_source...[2.134 s] ok\r\n      couch_replicator_large_atts_tests:87: should_replicate...[1.726 s] ok\r\n      couch_replicator_large_atts_tests:94: should_compare_databases...[2.054 s] ok\r\n      [done in 5.923 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 5.923 s]\r\n  [done in 6.138 s]\r\nmodule 'couch_replicator_create_target_with_options_tests'\r\n  Create target with range partitions tests\r\n    couch_replicator_create_target_with_options_tests:67: should_create_target_with_q_4...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    couch_replicator_create_target_with_options_tests:87: should_create_target_with_q_2_n_1...ok\r\n    couch_replicator_create_target_with_options_tests:88: should_create_target_with_q_2_n_1...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    couch_replicator_create_target_with_options_tests:107: should_create_target_with_default...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    couch_replicator_create_target_with_options_tests:122: should_not_create_target_with_q_any...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 1.280 s]\r\n  [done in 1.280 s]\r\nmodule 'couch_replicator_proxy_tests'\r\n  replicator proxy tests\r\n    couch_replicator_proxy_tests:50: parse_rep_doc_without_proxy...ok\r\n    couch_replicator_proxy_tests:62: parse_rep_doc_with_proxy...ok\r\n    couch_replicator_proxy_tests:76: parse_rep_source_target_proxy...ok\r\n    couch_replicator_proxy_tests:94: mutually_exclusive_proxy_and_source_proxy...ok\r\n    couch_replicator_proxy_tests:107: mutually_exclusive_proxy_and_target_proxy...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.015 s]\r\n  [done in 0.174 s]\r\nmodule 'couch_replicator_missing_stubs_tests'\r\n  Replicate docs with missing stubs (COUCHDB-1365)\r\n    remote -> remote\r\n      couch_replicator_missing_stubs_tests:81: should_populate_source...[0.013 s] ok\r\n      couch_replicator_missing_stubs_tests:93: should_set_target_revs_limit...[0.006 s] ok\r\n      couch_replicator_missing_stubs_tests:88: should_replicate...[0.054 s] ok\r\n      couch_replicator_missing_stubs_tests:104: should_compare_databases...ok\r\n      couch_replicator_missing_stubs_tests:109: should_update_source_docs...[0.081 s] ok\r\n      couch_replicator_missing_stubs_tests:88: should_replicate...[0.045 s] ok\r\n      couch_replicator_missing_stubs_tests:104: should_compare_databases...ok\r\n      [done in 0.221 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.222 s]\r\n  [done in 0.413 s]\r\nmodule 'couch_replicator_selector_tests'\r\n  Selector filtered replication tests\r\n    remote -> remote\r\n      couch_replicator_selector_tests:58: should_succeed (Target DB has proper number of docs)...ok\r\n      couch_replicator_selector_tests:60: should_succeed (All the docs selected as expected)...ok\r\n      [done in 0.006 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.006 s]\r\n  [done in 0.258 s]\r\nmodule 'couch_replicator_many_leaves_tests'\r\n  Replicate documents with many leaves\r\n    remote -> remote\r\n      couch_replicator_many_leaves_tests:88: should_populate_source...[0.107 s] ok\r\n      couch_replicator_many_leaves_tests:95: should_replicate...[0.189 s] ok\r\n      couch_replicator_many_leaves_tests:102: should_verify_target...[0.042 s] ok\r\n      couch_replicator_many_leaves_tests:113: should_add_attachments_to_source...[0.186 s] ok\r\n      couch_replicator_many_leaves_tests:95: should_replicate...[1.100 s] ok\r\n      couch_replicator_many_leaves_tests:102: should_verify_target...[0.108 s] ok\r\n      [done in 1.751 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 1.751 s]\r\n  [done in 1.944 s]\r\nmodule 'couch_replicator_compact_tests'\r\n  Compaction during replication tests\r\n    remote -> remote\r\n      couch_replicator_compact_tests:92: should_run_replication...[0.051 s] ok\r\n      couch_replicator_compact_tests:83: should_all_processes_be_alive...ok\r\n      couch_replicator_compact_tests:153: should_populate_and_compact...[8.425 s] ok\r\n      couch_replicator_compact_tests:200: should_wait_target_in_sync...[0.502 s] ok\r\n      couch_replicator_compact_tests:95: should_ensure_replication_still_running...ok\r\n      couch_replicator_compact_tests:147: should_cancel_replication...[0.032 s] ok\r\n      couch_replicator_compact_tests:233: should_compare_databases...[0.189 s] ok\r\n      [done in 9.221 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 9.221 s]\r\n  [done in 9.402 s]\r\nmodule 'couch_replicator_id_too_long_tests'\r\n  Doc id too long tests\r\n    couch_replicator_id_too_long_tests:55: should_succeed...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    couch_replicator_id_too_long_tests:65: should_fail...ok\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.448 s]\r\n  [done in 0.448 s]\r\nmodule 'couch_replicator_filtered_tests'\r\n  Filtered replication tests\r\n    remote -> remote\r\n      couch_replicator_filtered_tests:110: should_succeed (Target DB has proper number of docs)...ok\r\n      couch_replicator_filtered_tests:112: should_succeed (Target DB doesn't have deleted docs)...ok\r\n      couch_replicator_filtered_tests:114: should_succeed (All the docs filtered as expected)...ok\r\n      [done in 0.009 s]\r\nerl_child_setup: failed with error 32 on line 253\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.009 s]\r\n  Filtered with query replication tests\r\n    remote -> remote\r\n      couch_replicator_filtered_tests:136: should_succeed_with_query (Target DB has proper number of docs)...ok\r\n      couch_replicator_filtered_tests:138: should_succeed_with_query (Target DB doesn't have deleted docs)...ok\r\n      couch_replicator_filtered_tests:140: should_succeed_with_query (All the docs filtered as expected)...ok\r\n      [done in 0.009 s]\r\nerl_child_setup: failed with error 32 on line 253\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.009 s]\r\n  Filtered with a view replication tests\r\n    remote -> remote\r\n      couch_replicator_filtered_tests:159: should_succeed_with_view (Target DB has proper number of docs)...ok\r\n      couch_replicator_filtered_tests:161: should_succeed_with_view (Target DB doesn't have deleted docs)...ok\r\n      couch_replicator_filtered_tests:163: should_succeed_with_view (All the docs filtered as expected)...ok\r\n      [done in 0.009 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n    [done in 0.009 s]\r\n  [done in 1.033 s]\r\nmodule 'couch_replicator_use_checkpoints_tests'\r\n  Replication use_checkpoints feature tests\r\n    use_checkpoints: false\r\n      remote -> remote\r\n        couch_replicator_use_checkpoints_tests:113: should_populate_source...[0.025 s] ok\r\n        couch_replicator_use_checkpoints_tests:120: should_replicate...[0.083 s] ok\r\n        couch_replicator_use_checkpoints_tests:127: should_compare_databases...[0.027 s] ok\r\n        [done in 0.144 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n      [done in 0.144 s]\r\n    use_checkpoints: true\r\n      remote -> remote\r\n        couch_replicator_use_checkpoints_tests:113: should_populate_source...[0.024 s] ok\r\n        couch_replicator_use_checkpoints_tests:120: should_replicate...[0.117 s] ok\r\n        couch_replicator_use_checkpoints_tests:127: should_compare_databases...[0.029 s] ok\r\n        [done in 0.179 s]\r\n[os_mon] cpu supervisor port (cpu_sup): Erlang has closed\r\n      [done in 0.179 s]\r\n    [done in 0.708 s]\r\n  [done in 0.708 s]\r\n=======================================================\r\n  All 269 tests passed.\r\n==> rel (eunit)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568326127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568327460","html_url":"https://github.com/apache/couchdb/pull/2170#issuecomment-568327460","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2170","id":568327460,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODMyNzQ2MA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-23T01:55:16Z","updated_at":"2019-12-23T01:55:16Z","author_association":"CONTRIBUTOR","body":"Close in favor of https://github.com/apache/couchdb/pull/2345","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568327460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568327873","html_url":"https://github.com/apache/couchdb/issues/1875#issuecomment-568327873","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1875","id":568327873,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODMyNzg3Mw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-23T01:58:27Z","updated_at":"2019-12-23T01:58:27Z","author_association":"CONTRIBUTOR","body":"PR https://github.com/apache/couchdb/pull/2345 was merged. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568327873/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568948797","html_url":"https://github.com/apache/couchdb/pull/2381#issuecomment-568948797","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2381","id":568948797,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODk0ODc5Nw==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T02:04:41Z","updated_at":"2019-12-26T02:04:41Z","author_association":"CONTRIBUTOR","body":"Great! I use `./configure  --spidermonkey-version 60 --disable-docs --disable-fauxton` to test against spidermonkey 60 and all tests passed.\r\n\r\nJut noticed that all `make javascript` was moved to `make elixir`. Is it expected? Do we have the same coverage after moving them to `make elixir`?\r\n\r\n```\r\ntest/javascript/tests/all_docs.js                              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachment_names.js                      HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachment_paths.js                      HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachment_ranges.js                     HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachment_views.js                      HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachments.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/attachments_multipart.js                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/auth_cache.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/basics.js                                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/batch_save.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/bulk_docs.js                             HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/changes.js                               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/coffee.js                                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/compact.js                               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/config.js                                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/conflicts.js                             HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/cookie_auth.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/copy_doc.js                              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/design_docs.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/design_docs_query.js                     HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/design_options.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/design_paths.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/erlang_views.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/etags_head.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/etags_views.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/form_submit.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/http.js                                  HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/invalid_docids.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/jsonp.js                                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/large_docs.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/list_views.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/lots_of_docs.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/method_override.js                       HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/multiple_rows.js                         HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/proxyauth.js                             HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/purge.js                                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/reader_acl.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/recreate_doc.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/reduce.js                                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/reduce_builtin.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/reduce_false.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/reduce_false_temp.js                     HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_bad_rep_id.js              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_by_doc_id.js               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_compact_rep_db.js          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_continuous.js              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_credential_delegation.js   HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_field_validation.js        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_filtered.js                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_identical.js               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_identical_continuous.js    HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_invalid_filter.js          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_security.js                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_simple.js                  HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_successive.js              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_survives.js                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_swap_rep_db.js             HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_update_security.js         HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_user_ctx.js                HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/replicator_db_write_auth.js              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/rev_stemming.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/rewrite.js                               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/rewrite_js.js                            HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/security_validation.js                   HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/show_documents.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/stats.js                                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/update_documents.js                      HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/users_db.js                              HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/users_db_security.js                     HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/utf8.js                                  HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/uuids.js                                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_collation.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_collation_raw.js                    HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_compaction.js                       HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_conflicts.js                        HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_errors.js                           HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_include_docs.js                     HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_multi_key_all_docs.js               HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_multi_key_design.js                 HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_multi_key_temp.js                   HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_offsets.js                          HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_pagination.js                       HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_sandboxing.js                       HTTP API was disabled at compile time.\r\nported to elixir\r\ntest/javascript/tests/view_update_seq.js                       HTTP API was disabled at compile time.\r\nported to elixir\r\n=======================================================\r\nJavaScript tests complete.\r\n  Failed: 0.  Skipped or passed: 84.\r\n==> config (compile)\r\n==> b64url (compile)\r\n==> ets_lru (compile)\r\n==> khash (compile)\r\n==> snappy (compile)\r\n==> ioq (compile)\r\n==> hqueue (compile)\r\n==> bear (compile)\r\n==> meck (compile)\r\n==> folsom (compile)\r\n==> triq (compile)\r\n==> hyper (compile)\r\n==> ibrowse (compile)\r\n==> jiffy (compile)\r\n==> mochiweb (compile)\r\n==> proper (compile)\r\n==> couch_epi (compile)\r\n==> couch_log (compile)\r\n==> chttpd (compile)\r\n==> couch (compile)\r\n==> couch_event (compile)\r\n==> mem3 (compile)\r\n==> couch_index (compile)\r\n==> couch_mrview (compile)\r\n==> couch_replicator (compile)\r\n==> couch_plugins (compile)\r\n==> couch_pse_tests (compile)\r\n==> couch_stats (compile)\r\n==> couch_peruser (compile)\r\n==> couch_tests (compile)\r\n==> ddoc_cache (compile)\r\n==> dreyfus (compile)\r\n==> fabric (compile)\r\n==> global_changes (compile)\r\n==> ken (compile)\r\n==> mango (compile)\r\n==> rexi (compile)\r\n==> setup (compile)\r\n==> smoosh (compile)\r\n==> rel (compile)\r\n==> couchdb (compile)\r\nLooking in indexes: https://jiangph%40cn.ibm.com:****@na.artifactory.swg-devops.com/artifactory/api/pypi/wcp-cldinfra-pypi-local/simple, https://jiangph%40cn.ibm.com:****@na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/simple\r\nCollecting nose==1.3.7 (from -r requirements.txt (line 1))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/15/d8/dd071918c040f50fa1cf80da16423af51ff8ce4a0f2399b7bf8de45ac3d9/nose-1.3.7-py3-none-any.whl\r\nCollecting requests==2.20.1 (from -r requirements.txt (line 2))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/ff/17/5cbb026005115301a8fb2f9b0e3e8d32313142fe8b617070e7baad20554f/requests-2.20.1-py2.py3-none-any.whl\r\nCollecting hypothesis==3.79.0 (from -r requirements.txt (line 3))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/ef/45/18083ab0c6614a6c1e260da8050e0f4eaaf86eedcdb640fae7e1c19b2b1f/hypothesis-3.79.0-py3-none-any.whl\r\nCollecting certifi>=2017.4.17 (from requests==2.20.1->-r requirements.txt (line 2))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/b9/63/df50cac98ea0d5b006c55a399c3bf1db9da7b5a24de7890bc9cfd5dd9e99/certifi-2019.11.28-py2.py3-none-any.whl\r\nCollecting idna<2.8,>=2.5 (from requests==2.20.1->-r requirements.txt (line 2))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/4b/2a/0276479a4b3caeb8a8c1af2f8e4355746a97fab05a372e4a2c6a6b876165/idna-2.7-py2.py3-none-any.whl\r\nCollecting urllib3<1.25,>=1.21.1 (from requests==2.20.1->-r requirements.txt (line 2))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/01/11/525b02e4acc0c747de8b6ccdab376331597c569c42ea66ab0a1dbd36eca2/urllib3-1.24.3-py2.py3-none-any.whl\r\nCollecting chardet<3.1.0,>=3.0.2 (from requests==2.20.1->-r requirements.txt (line 2))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/bc/a9/01ffebfb562e4274b6487b4bb1ddec7ca55ec7510b22e4c51f14098443b8/chardet-3.0.4-py2.py3-none-any.whl\r\nCollecting attrs>=16.0.0 (from hypothesis==3.79.0->-r requirements.txt (line 3))\r\n  Using cached https://na.artifactory.swg-devops.com/artifactory/api/pypi/wdp-cloumpose-pypi-virtual/packages/packages/a2/db/4313ab3be961f7a763066401fb77f7748373b6094076ae2bda2806988af6/attrs-19.3.0-py2.py3-none-any.whl\r\nInstalling collected packages: nose, certifi, idna, urllib3, chardet, requests, attrs, hypothesis\r\nSuccessfully installed attrs-19.3.0 certifi-2019.11.28 chardet-3.0.4 hypothesis-3.79.0 idna-2.7 nose-1.3.7 requests-2.20.1 urllib3-1.24.3\r\nYou are using pip version 19.0.3, however version 19.3.1 is available.\r\nYou should consider upgrading via the 'pip install --upgrade pip' command.\r\n[ * ] Setup environment ... ok\r\n[ * ] Ensure CouchDB is built ... ok\r\n[ * ] Prepare configuration files ... ok\r\n[ * ] Start node node1 ... ok\r\n[ * ] Check node at http://127.0.0.1:15984/ ... ok\r\n[ * ] Running cluster setup ... ok\r\n[ * ] Exec command .venv/bin/python3 -m nose --with-xunit ... ...............SSS...................................................................SSSSSSSSSSSSSSSSSSSSSSSSSS.................SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS.SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS......................................SS.......SSSSSSSS...........\r\n----------------------------------------------------------------------\r\nRan 284 tests in 48.156s\r\n\r\nOK (SKIP=128)\r\n* creating /Users/jiangph/.mix/rebar\r\n* creating /Users/jiangph/.mix/rebar3\r\n* creating /Users/jiangph/.mix/archives/hex-0.20.1\r\nResolving Hex dependencies...\r\nDependency resolution completed:\r\nUnchanged:\r\n  bunt 0.2.0\r\n  certifi 2.5.1\r\n  credo 1.0.5\r\n  excoveralls 0.12.1\r\n  hackney 1.15.2\r\n  httpotion 3.1.3\r\n  idna 6.0.0\r\n  jason 1.1.2\r\n  junit_formatter 3.0.0\r\n  metrics 1.0.1\r\n  mimerl 1.2.0\r\n  parse_trans 3.3.0\r\n  ssl_verify_fun 1.1.5\r\n  unicode_util_compat 0.4.1\r\n* Getting junit_formatter (Hex package)\r\n* Getting httpotion (Hex package)\r\n* Getting excoveralls (Hex package)\r\n* Getting credo (Hex package)\r\n* Getting bunt (Hex package)\r\n* Getting jason (Hex package)\r\n* Getting hackney (Hex package)\r\n* Getting certifi (Hex package)\r\n* Getting idna (Hex package)\r\n* Getting metrics (Hex package)\r\n* Getting mimerl (Hex package)\r\n* Getting ssl_verify_fun (Hex package)\r\n* Getting unicode_util_compat (Hex package)\r\n* Getting parse_trans (Hex package)\r\n==> bunt\r\nCompiling 2 files (.ex)\r\nGenerated bunt app\r\n===> Compiling jiffy\r\n==> jason\r\nCompiling 8 files (.ex)\r\nGenerated jason app\r\n==> junit_formatter\r\nCompiling 1 file (.ex)\r\nGenerated junit_formatter app\r\n==> credo\r\nCompiling 183 files (.ex)\r\nGenerated credo app\r\n==> httpotion\r\nCompiling 1 file (.ex)\r\nGenerated httpotion app\r\nChecking 70 source files (this might take a while) ...\r\n\r\ninfo: the following checks were skipped because they're not compatible with\r\nyour version of Elixir (1.9.1).\r\n\r\n   1) Credo.Check.Refactor.MapInto\r\n   2) Credo.Check.Warning.LazyLogging\r\n\r\n\r\nPlease report incorrect results: https://github.com/rrrene/credo/issues\r\n\r\nAnalysis took 3.4 seconds (0.2s to load, 3.1s running checks)\r\n286 mods/funs, found no issues.\r\n\r\nUse `--strict` to show all issues, `--help` for options.\r\n[ * ] Setup environment ... ok\r\n[ * ] Ensure CouchDB is built ... ok\r\n[ * ] Prepare configuration files ... ok\r\n[ * ] Start node node1 ... ok\r\n[ * ] Check node at http://127.0.0.1:15984/ ... ok\r\n[ * ] Running cluster setup ... ok\r\n[ * ] Exec command mix test --trace --exclude without_quorum_test --exclude with_quorum_test  ... ===> Compiling jiffy\r\nCompiling 12 files (.ex)\r\nGenerated couchdbtest app\r\nExcluding tags: [:without_quorum_test, :with_quorum_test, :pending]\r\n\r\n\r\nReplicationTest\r\n  * test validate_doc_update failure replications - remote-to-remote (429.7ms)\r\n  * test create_target filter option - remote-to-remote (233.9ms)\r\n  * test non-admin user on target - remote-to-remote (311.8ms)\r\n  * test non-admin or reader user on source - remote-to-remote (196.9ms)\r\n  * test replication by doc ids - remote-to-remote (3281.5ms)\r\n  * test compressed attachment replication - remote-to-remote (251.5ms)\r\n  * test replication cancellation (686.6ms)\r\n  * test filtered replications - remote-to-remote (470.8ms)\r\n  * test simple remote-to-remote replication - remote-to-remote (1497.9ms)\r\n  * test replicate with since_seq - remote-to-remote (208.7ms)\r\n  * test source database not found with host (6.6ms)\r\n  * test replication restarts after filter change - COUCHDB-892 - remote-to-remote (417.4ms)\r\n  * test unauthorized replication cancellation (686.3ms)\r\n  * test continuous replication - remote-to-remote (3206.9ms)\r\n  * test replicating attachment without conflict - COUCHDB-885 (413.6ms)\r\n\r\nReduceTest\r\n  * test More complex reductions that need to use the combine option (495.9ms)\r\n  * test Reduce pagination (343.7ms)\r\n  * test More complex array key view row testing (2492.5ms)\r\n  * test Basic reduce functions (381.2ms)\r\n\r\nRewriteTest\r\n  * test Test basic rewrites on test_rewrite_suite_db (258.2ms)\r\n  * test Test basic rewrites on test_rewrite_suite_db%2Fwith_slashes (269.6ms)\r\n\r\nSecurityValidationTest\r\n  * test _session API (1.5ms)\r\n  * test Author presence and user security (215.0ms)\r\n  * test Jerry can save a document normally (69.8ms)\r\n  * test Ddoc writes with admin and replication contexts (140.9ms)\r\n  * test Saving document using the wrong credentials (2.1ms)\r\n  * test Force basic login (1.4ms)\r\n  * test Non-admin user cannot save a ddoc (70.0ms)\r\n\r\nViewTest\r\n  * test POST with query parameter and JSON body (30.1ms)\r\n  * test POST edge case with colliding parameters - query takes precedence (1.5ms)\r\n  * test GET with multiple keys (1.5ms)\r\n  * test POST with keys and limit (1.6ms)\r\n  * test GET with no parameters (1.9ms)\r\n  * test GET with one key (1.2ms)\r\n  * test POST with empty body (1.2ms)\r\n\r\nViewCollationTest\r\n  * test inclusive_end=true (31.4ms)\r\n  * test inclusive_end=false (5.2ms)\r\n  * test ascending collation order (1.4ms)\r\n  * test key query option (31.5ms)\r\n  * test descending collation order (1.4ms)\r\n\r\nUUIDsTest\r\n  * test cache busting headers are set (1.6ms)\r\n  * test utc_random uuids are roughly random (15.5ms)\r\n  * test utc_id uuids are correct (4.0ms)\r\n  * test Method Not Allowed error on POST (0.6ms)\r\n  * test sequential uuids are sequential (9.7ms)\r\n  * test can return single uuid (1.5ms)\r\n  * test no duplicates in 1,000 UUIDs (6.8ms)\r\n  * test Bad Request error when exceeding max UUID count (0.8ms)\r\n\r\nViewPartitionTest\r\n  * test global query works with keys (140.2ms)\r\n  * test partition query works with limit (2.1ms)\r\n  * test partition query can set query limits (51.3ms)\r\n  * test include_design works correctly (12.7ms)\r\n  * test partition query with key (1.1ms)\r\n  * test query will return zero results for wrong inputs (1.4ms)\r\n  * test query with reduce works (4.8ms)\r\n  * test default view query returns partitioned fields (3.0ms)\r\n  * test view query returns all docs for global query (2.0ms)\r\n  * test query with partitioned:true returns partitioned fields (4.9ms)\r\n  * test partition query with descending (2.5ms)\r\n  * test partitioned query works with startkey, endkey range (1.4ms)\r\n  * test conflicting partitions in path and query string rejected (0.8ms)\r\n  * test partitioned query works with keys (1.8ms)\r\n  * test partitioned ddoc cannot be used in global query (0.8ms)\r\n  * test partition query with skip (1.4ms)\r\n  * test partition query errors with incorrect partition supplied (1.2ms)\r\n  * test partition query with startkey_docid and endkey_docid (5.4ms)\r\n  * test partitioned query cannot be used with global ddoc (0.7ms)\r\n\r\nPartitionMangoTest\r\n  * test partitioned query using _all_docs (104.7ms)\r\n  * test explain works with partitions (118.2ms)\r\n  * test partitioned _find and _explain with missing partition returns 400 (52.8ms)\r\n  * test partitioned query sends correct errors for sort errors (95.5ms)\r\n  * test global query uses global index (189.4ms)\r\n  * test query using _id and partition works (149.6ms)\r\n  * test partitioned query does not use global index (133.4ms)\r\n  * test partitioned query using _all_docs with $eq (123.9ms)\r\n  * test explain works with non partitioned db (118.0ms)\r\n  * test partitioned query using index and range scan (146.0ms)\r\n  * test partitioned query using _all_docs and range scan (113.2ms)\r\n  * test query using _id works for global and local query (159.4ms)\r\n  * test partitioned query using bookmarks (146.3ms)\r\n  * test non-partitioned query using _all_docs and $eq (118.7ms)\r\n  * test global query does not use partition index (160.1ms)\r\n  * test query with partitioned:true using index and $eq (154.4ms)\r\n\r\nReshardBasicTest\r\n  * test split q=1 db shards on node1 (1 job) (451.4ms)\r\n  * test split q=2 shards on node1 (2 jobs) (1847.8ms)\r\n  * test basic api querying, no jobs present (2.6ms)\r\n  * test toggle global state (30.5ms)\r\n  * test check validation of invalid parameters (7.5ms)\r\n\r\nPartitionSizeTest\r\n  * test adding docs increases partition sizes (67.7ms)\r\n  * test updating docs affects partition sizes (87.6ms)\r\n  * test partition activity not affect other partition sizes (260.2ms)\r\n  * test purging docs decreases partition size (195.9ms)\r\n  * test get all partition sizes (195.4ms)\r\n  * test attachments don't affect other partitions (226.5ms)\r\n  * test deleting a doc affects partition sizes (84.3ms)\r\n  * test unknown partition return's zero (191.0ms)\r\n  * test simple partition size (65.5ms)\r\n  * test design docs do not affect partition sizes (328.4ms)\r\n  * test get empty partition (50.5ms)\r\n  * test get partition size with attachment (53.2ms)\r\n\r\nPartitionSizeLimitTest\r\n  * test full partitions can accept updates that reduce size (79.4ms)\r\n  * test full partition does not affect other partitions (83.5ms)\r\n  * test increasing partition size allows more writes (74.4ms)\r\n  * test decreasing partition size disables more writes (95.3ms)\r\n  * test compacting a full partition works (270.2ms)\r\n  * test fill partition manually (201.0ms)\r\n  * test purging docs allows writes (93.1ms)\r\n  * test full partitions reject POST /dbname/_bulk_docs (77.6ms)\r\n  * test full partition does not affect design documents (120.6ms)\r\n  * test full partitions are still readable (56.1ms)\r\n  * test full partitions can accept deletes (70.8ms)\r\n  * test full partitions reject POST /dbname (73.5ms)\r\n  * test replication into a full partition works (82.0ms)\r\n  * test full partitions with mixed POST /dbname/_bulk_docs (90.0ms)\r\n  * test indexing a full partition works (104.4ms)\r\n  * test full partitions reject PUT /dbname/docid (67.1ms)\r\n\r\nPartitionCrudTest\r\n  * test _bulk_docs errors with missing partition key (57.8ms)\r\n  * test _bulk_docs errors with bad partition key (42.1ms)\r\n  * test can create unpartitioned system db (94.6ms)\r\n  * test cannot create partitioned system db (39.3ms)\r\n  * test can purge partitioned db docs (85.7ms)\r\n  * test PUT fails for bad partitions (59.1ms)\r\n  * test create database with bad `partitioned` value (1.4ms)\r\n  * test PUT fails if a partition key is not supplied (54.1ms)\r\n  * test POST and _bulk_get document (73.7ms)\r\n  * test PUT and GET document (71.0ms)\r\n  * test _bulk_docs errors with bad doc key (81.1ms)\r\n  * test POST fails if a partition key is not supplied (102.0ms)\r\n  * test PUT fails for partitions with _ (74.3ms)\r\n  * test _bulk_docs saves docs with partition key (126.1ms)\r\n  * test POST and GET document (119.1ms)\r\n  * test saves attachment with partitioned doc (151.0ms)\r\n  * test Sets partition in db info (93.9ms)\r\n  * test _bulk_get bad partitioned document (108.8ms)\r\n  * test purge rejects unpartitioned docid (88.9ms)\r\n  * test GET to partition returns 400 (80.9ms)\r\n\r\nPartitionViewUpdateTest\r\n  * test purge removes view rows (350.3ms)\r\n  * test purged conflict changes view rows (230.0ms)\r\n  * test query with update=false works (230.5ms)\r\n  * test view updates properly remove old keys (165.1ms)\r\n\r\nBasicsTest\r\n  * test PUT doc has a Location header (excluded)\r\n  * test On restart, a request for creating an already existing db can not override (excluded)\r\n  * test Regression test for COUCHDB-954 (excluded)\r\n  * test POST doc with an _id field isn't overwritten by uuid (71.7ms)\r\n  * test Session contains adm context (1.1ms)\r\n  * test oops, the doc id got lost in code nirwana (61.8ms)\r\n  * test PUT error when body not an object (60.1ms)\r\n  * test Revs info status is good (77.5ms)\r\n  * test _all_docs POST error when multi-get is not a {'key': [...]} structure (61.1ms)\r\n  * test Empty database should have zero docs (46.8ms)\r\n  * test Can create several documents (107.4ms)\r\n  * test Database should be in _all_dbs (61.5ms)\r\n  * test DELETE'ing a non-existent doc should 404 (43.3ms)\r\n  * test Simple map functions (311.9ms)\r\n  * test Create a document and save it to the database (91.1ms)\r\n  * test POST doc response has a Location header (71.5ms)\r\n  * test A document read with etag works (74.0ms)\r\n  * test Check for invalid document members (60.8ms)\r\n  * test Created database has appropriate db info name (57.2ms)\r\n  * test _bulk_docs POST error when body not an object (57.3ms)\r\n  * test Make sure you can do a seq=true option (74.7ms)\r\n  * test Creating a new DB with slashes should return Location header (COUCHDB-411) (70.7ms)\r\n  * test PUT on existing DB should return 412 instead of 500 (57.8ms)\r\n  * test Welcome endpoint (2.5ms)\r\n  * test Creating a new DB should return location header (69.0ms)\r\n\r\nReshardAllDocsTest\r\n  * test all_docs after splitting all shards on node1 (781.7ms)\r\n  * test all_docs after splitting the same range on all nodes (540.2ms)\r\n\r\nPartitionDDocTest\r\n  * test DELETE /dbname/_design/foo (69.5ms)\r\n  * test POST /dbname with design doc (54.1ms)\r\n  * test GET /dbname/_all_docs?key=$ddoc_id (50.9ms)\r\n  * test GET /dbname/_design_docs (53.1ms)\r\n  * test GET /dbname/_design/foo?rev=$rev (52.5ms)\r\n  * test GET /dbname/_bulk_get with rev (72.5ms)\r\n  * test POST /dbname/_bulk_docs with design doc (47.5ms)\r\n  * test PUT /dbname/_design/foo to update (63.2ms)\r\n  * test PUT /dbname/_design/foo/readme.txt (65.8ms)\r\n  * test GET /dbname/_design/foo (49.0ms)\r\n  * test PUT /dbname/_design/foo (48.9ms)\r\n  * test GET /dbname/_bulk_get (48.3ms)\r\n\r\nPartitionAllDocsTest\r\n  * test partition _all_docs with timeout (excluded)\r\n  * test partition all_docs errors with incorrect partition supplied (2.1ms)\r\n  * test partitioned _all_docs works with startkey, endkey range (1.9ms)\r\n  * test partition all docs can set query limits (60.3ms)\r\n  * test partition _all_docs with descending (2.9ms)\r\n  * test partition _all_docs with key (1.5ms)\r\n  * test partitioned _all_docs works with keys (1.5ms)\r\n  * test all_docs with partitioned:true returns partitioned fields (4.6ms)\r\n  * test partition _all_docs works with limit (1.6ms)\r\n  * test partition _all_docs with skip (2.1ms)\r\n\r\nAttachmentsTest\r\n  * test saves binary (120.9ms)\r\n  * test empty attachments (91.7ms)\r\n  * test md5 header for attachments (73.3ms)\r\n  * test attachment via multipart/form-data (97.8ms)\r\n  * test test COUCHDB-497 - empty attachments (110.9ms)\r\n  * test COUCHDB-809 - stubs should only require the 'stub' field (82.7ms)\r\n  * test errors for bad attachment (45.6ms)\r\n  * test large attachments COUCHDB-366 (84.4ms)\r\n  * test update attachment (85.1ms)\r\n  * test delete attachment (103.0ms)\r\n  * test etags for attachments (59.6ms)\r\n  * test reads attachment successfully (72.3ms)\r\n  * test implicit doc creation allows creating docs with a reserved id. COUCHDB-565 (61.1ms)\r\n  * test saves attachment successfully (67.6ms)\r\n\r\nMultipleRowsTest\r\n  * test multiple rows (275.4ms)\r\n\r\nAttachmentMultipartTest\r\n  * test manages attachments multipart requests successfully (97.7ms)\r\n  * test manages compressed attachments successfully (110.3ms)\r\n\r\nAllDocsTest\r\n  * test POST with query parameter and JSON body (94.7ms)\r\n  * test POST edge case with colliding parameters - query takes precedence (91.6ms)\r\n  * test GET with one key (92.4ms)\r\n  * test POST with keys and limit (97.6ms)\r\n  * test All Docs tests (237.4ms)\r\n  * test POST with empty body (81.2ms)\r\n\r\nLotsOfDocsTest\r\n  * test lots of docs with _all_docs (307.0ms)\r\n  * test lots of docs with a regular view (504.5ms)\r\n\r\nLocalDocsTest\r\n  * test POST with query parameter and JSON body (2.3ms)\r\n  * test POST edge case with colliding parameters - query takes precedence (1.4ms)\r\n  * test GET with multiple keys (2.1ms)\r\n  * test POST with keys and limit (1.7ms)\r\n  * test GET with no parameters (1.4ms)\r\n  * test POST with empty body (1.6ms)\r\n\r\nPartitionDesignDocsTest\r\n  * test /_partition/:pk/_design/doc 404 (52.9ms)\r\n\r\nInvalidDocIDsTest\r\n  * test invalid _prefix (74.9ms)\r\n  * test explicit _bulk_docks policy (87.0ms)\r\n  * test using a non-string id is forbidden (52.8ms)\r\n  * test accidental POST to form handling code (60.4ms)\r\n  * test _local-prefixed ids are illegal (62.2ms)\r\n  * test a PUT request with absent _id is forbidden (57.6ms)\r\n\r\nWithoutQuorumTest\r\n  * test Creating/Deleting DB should return 202-Acepted (excluded)\r\n  * test Attachments should return 202-Acepted (excluded)\r\n  * test Attachments overriden quorum should return 201-Created (excluded)\r\n  * test Copy doc should return 202-Acepted (excluded)\r\n  * test Bulk docs overriden quorum should return 201-Created (excluded)\r\n  * test Creating/Updating/Deleting doc should return 202-Acepted (excluded)\r\n  * test Creating-Updating/Deleting doc with overriden quorum should return 201-Created/200-OK (excluded)\r\n  * test Bulk docs should return 202-Acepted (excluded)\r\n\r\nDesignDocsTest\r\n  * test POST with query parameter and JSON body (2.1ms)\r\n  * test POST edge case with colliding parameters - query takes precedence (1.4ms)\r\n  * test GET with multiple keys (2.1ms)\r\n  * test POST with keys and limit (1.4ms)\r\n  * test GET with no parameters (1.2ms)\r\n  * test POST with empty body (1.3ms)\r\n\r\nHelperTest\r\n  * test retry_until handles assertions (0.02ms)\r\n  * test retry_until times out (7.1ms)\r\n  * test retry_until handles boolean conditions (0.01ms)\r\n\r\nCopyDocTest\r\n  * test Copy doc tests (144.1ms)\r\n\r\nRevisionTest\r\n  * test mismatched rev in body and etag returns error (74.6ms)\r\n  * test `new_edits: false` prevents bulk updates (COUCHDB-1178) (188.3ms)\r\n  * test mismatched rev in body and query string returns error (70.5ms)\r\n  * test multiple updates with same _rev raise conflict errors (121.5ms)\r\n\r\nConfigTest\r\n  * test PORT `BUGGED` ?raw tests from config.js (excluded)\r\n  * test CouchDB respects configured protocols (excluded)\r\n  * test Settings can be altered with undefined whitelist allowing any change (4.5ms)\r\n  * test Server-side password hashing, and raw updates disabling that (17.5ms)\r\n  * test Atoms, binaries, and strings suffice as whitelist sections and keys. (13.2ms)\r\n  * test Blacklist is functional (9.0ms)\r\n  * test Non-list whitelist values allow further modification of the whitelist (5.5ms)\r\n  * test Non-2-tuples in the whitelist are ignored (5.7ms)\r\n  * test Standard config options are present (1.3ms)\r\n  * test Non-term whitelist values allow further modification of the whitelist (9.7ms)\r\n  * test Keys not in the whitelist may not be modified (5.8ms)\r\n\r\nCompactTest\r\n  * test compaction reduces size of deleted docs (excluded)\r\n\r\nBulkDocsTest\r\n  * test bulk docs can create, update, & delete many docs per request (164.1ms)\r\n  * test bulk docs can detect conflicts (182.8ms)\r\n  * test bulk docs raises error for invlaid `new_edits` parameter (82.6ms)\r\n  * test bulk docs emits conflict error for duplicate doc `_id`s (125.4ms)\r\n  * test bulk docs raises conflict error for combined update & delete (120.3ms)\r\n  * test bulk docs raises error for invlaid `docs` parameter (146.8ms)\r\n  * test bulk docs supplies `id` if not provided in doc (114.9ms)\r\n  * test bulk docs raises error for `all_or_nothing` option (119.1ms)\r\n  * test bulk docs raises error for missing `docs` parameter (80.9ms)\r\n\r\nWithQuorumTest\r\n  * test Creating/Deleting DB should return 201-Created/202-Acepted (excluded)\r\n  * test Attachments should return 201-Created (excluded)\r\n  * test Attachments overriden quorum should return 202-Acepted (excluded)\r\n  * test Copy doc should return 201-Created (excluded)\r\n  * test Bulk docs overriden quorum should return 202-Acepted (excluded)\r\n  * test Creating-Updating/Deleting doc should return 201-Created/200-OK (excluded)\r\n  * test Creating-Updating/Deleting doc with overriden quorum should return 202-Acepted/200-OK (excluded)\r\n  * test Bulk docs should return 201-Created (excluded)\r\n\r\nAttachmentPathsTest\r\n  * test manages attachment paths successfully (196.5ms)\r\n  * test manages attachment paths successfully - design docs (207.4ms)\r\n\r\nCoffeeTest\r\n  * test CoffeeScript basic functionality (482.3ms)\r\n\r\nAttachmentRangesTest\r\n  * test manages attachment range requests successfully (109.7ms)\r\n\r\nAttachmentNamesTest\r\n  * test saves attachment names successfully (127.4ms)\r\n\r\nAttachmentViewTest\r\n  * test manages attachments in views successfully (699.5ms)\r\n\r\nBatchSaveTest\r\n  * test batch post (234.2ms)\r\n  * test batch put with identical doc ids (145.1ms)\r\n  * test batch put (253.8ms)\r\n\r\nChangesTest\r\n  * test Changes feed negative heartbeat (60.2ms)\r\n  * test Changes feed non-integer heartbeat (78.3ms)\r\n\r\nReshardHelpers\r\n\r\nPartitionHelpers\r\n\r\n\r\nFinished in 46.2 seconds\r\n289 tests, 0 failures, 23 excluded\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/568948797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569061892","html_url":"https://github.com/apache/couchdb/issues/2364#issuecomment-569061892","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2364","id":569061892,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA2MTg5Mg==","user":{"login":"backendit","id":6822728,"node_id":"MDQ6VXNlcjY4MjI3Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6822728?v=4","gravatar_id":"","url":"https://api.github.com/users/backendit","html_url":"https://github.com/backendit","followers_url":"https://api.github.com/users/backendit/followers","following_url":"https://api.github.com/users/backendit/following{/other_user}","gists_url":"https://api.github.com/users/backendit/gists{/gist_id}","starred_url":"https://api.github.com/users/backendit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/backendit/subscriptions","organizations_url":"https://api.github.com/users/backendit/orgs","repos_url":"https://api.github.com/users/backendit/repos","events_url":"https://api.github.com/users/backendit/events{/privacy}","received_events_url":"https://api.github.com/users/backendit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T13:49:44Z","updated_at":"2019-12-26T15:01:33Z","author_association":"NONE","body":"> Can you run `ldd bin/couchjs` to see what it thinks its linked to? If `libmozjs185.so.1.0` is in `/usr/local/lib` you may have to update `/etc/ld.so.conf` and run `ldconfig` to get those shared libraries updated.\r\n\r\nThanks.\r\nI run the command `ldd bin/couchjs`,It's show as :\r\n```\r\ncouchdb  couchdb.cmd  couchjs  couchup  nohup.out  remsh\r\n[root@redhat-server bin]# ldd couchjs\r\n\tlinux-vdso.so.1 =>  (0x00007ffcec381000)\r\n\tlibmozjs185.so.1.0 => not found\r\n\tlibm.so.6 => /lib64/libm.so.6 (0x0000003be8c00000)\r\n\tlibc.so.6 => /lib64/libc.so.6 (0x0000003be8000000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x00005610277ff000)\r\n[root@redhat-server bin]#\r\n```\r\n\r\nand then I run the `ldconfig` command，and copy the` libmozjs185.so.1.0` to the `/usr/lib/`，the ldd command show as:\r\n```\r\n[root@redhat-server bin]# ldd couchjs\r\n./couchjs: /usr/lib64/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /usr/lib/libmozjs185.so.1.0)\r\n./couchjs: /lib64/libc.so.6: version `GLIBC_2.14' not found (required by /usr/lib/libmozjs185.so.1.0)\r\n\tlinux-vdso.so.1 =>  (0x00007fff3e720000)\r\n```\r\nbut it still get this error `Save failed. Reason: undefined` when I create a new view.\r\n\r\nSo I run `strings /usr/lib64/libstdc++.so.6 | grep CXXABI` ,an not found the 1.3.9 version.\r\nCXXABI_1.3\r\nCXXABI_1.3.1\r\nCXXABI_1.3.2\r\nCXXABI_1.3.3\r\n\r\nand I see the ` libstdc++.so.6 -> libstdc++.so.6.0.13`, It's old version.\r\n\r\nNow I try to update the gcc and try again.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569061892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569062806","html_url":"https://github.com/apache/couchdb/issues/2377#issuecomment-569062806","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2377","id":569062806,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA2MjgwNg==","user":{"login":"backendit","id":6822728,"node_id":"MDQ6VXNlcjY4MjI3Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6822728?v=4","gravatar_id":"","url":"https://api.github.com/users/backendit","html_url":"https://github.com/backendit","followers_url":"https://api.github.com/users/backendit/followers","following_url":"https://api.github.com/users/backendit/following{/other_user}","gists_url":"https://api.github.com/users/backendit/gists{/gist_id}","starred_url":"https://api.github.com/users/backendit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/backendit/subscriptions","organizations_url":"https://api.github.com/users/backendit/orgs","repos_url":"https://api.github.com/users/backendit/repos","events_url":"https://api.github.com/users/backendit/events{/privacy}","received_events_url":"https://api.github.com/users/backendit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T13:57:00Z","updated_at":"2019-12-26T13:57:00Z","author_association":"NONE","body":"It show the error `couchdb : Depends: libicu60 (>= 60.1-1~) but it is not installable`. So you should install the `libicu` and `libicu-dev` library.\r\n```\r\n$ sudo apt-get intall libicu\r\n$ sudo apt-get intall libicu-dev\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569062806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569093513","html_url":"https://github.com/apache/couchdb/pull/2381#issuecomment-569093513","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2381","id":569093513,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA5MzUxMw==","user":{"login":"davisp","id":19929,"node_id":"MDQ6VXNlcjE5OTI5","avatar_url":"https://avatars.githubusercontent.com/u/19929?v=4","gravatar_id":"","url":"https://api.github.com/users/davisp","html_url":"https://github.com/davisp","followers_url":"https://api.github.com/users/davisp/followers","following_url":"https://api.github.com/users/davisp/following{/other_user}","gists_url":"https://api.github.com/users/davisp/gists{/gist_id}","starred_url":"https://api.github.com/users/davisp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davisp/subscriptions","organizations_url":"https://api.github.com/users/davisp/orgs","repos_url":"https://api.github.com/users/davisp/repos","events_url":"https://api.github.com/users/davisp/events{/privacy}","received_events_url":"https://api.github.com/users/davisp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T17:09:51Z","updated_at":"2019-12-26T17:09:51Z","author_association":"MEMBER","body":"@jiangphcn Both `make javascript` and `make elixir` exist. We're in the process of porting all of the JavaScript tests to Elixir. As we port tests we should mark the JavaScript tests as such and when they're all ported we'll remove `make javascript`.\r\n\r\nAnd to be clear, when porting those tests the first pass should be to port them directly so that we know we've got the same coverage. Once ported we can look at starting to DRY them out a bit to remove duplicate tests and so on.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569093513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569159160","html_url":"https://github.com/apache/couchdb/issues/2383#issuecomment-569159160","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2383","id":569159160,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTE1OTE2MA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T01:06:09Z","updated_at":"2019-12-27T01:06:09Z","author_association":"CONTRIBUTOR","body":"@akircher thanks for your report.\r\n\r\nDo you by chance use a custom reduce?\r\n\r\n(Asking since saw the ` fabric_rpc:reduce_view/4` line the traceback above)..\r\n\r\nIf you do, make sure the reduce function reduces the values it outputs, otherwise you could be running out of memory or get time outs.\r\n\r\nIf your reduce function is ok, you might consider increasing the default couchjs stack size. Try setting to say 32MB and see if it makes a difference.\r\n\r\nIn 2.3.* it's specified as a OS environment variable only not via the *.ini files. I could modify it by editing the bin/couchdb file\r\n\r\n```\r\n...\r\nexport COUCHDB_QUERY_SERVER_JAVASCRIPT=\"./bin/couchjs ./share/server/main.js -S 33554430\"\r\n...\r\n```","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569159160/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569161119","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569161119","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569161119,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTE2MTExOQ==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T01:22:18Z","updated_at":"2019-12-27T01:22:18Z","author_association":"CONTRIBUTOR","body":"I have never tried adding zones later after the setup has been running for a while already. Also running a cluster over a WAN might need a bit of tweaking.\r\n\r\nMaybe someone else can chime in with more info about zones, I am not too familiar with it. (The  docs http://docs.couchdb.org/en/latest/cluster/databases.html should be here though).\r\n\r\nHowever, I'd like to offer an alternative - run regular replications from the primary cluster to the secondary. So set up a secondary database as a separate cluster and then have a script to discover dbs in the primary instance and set up regular CouchDB replications to the this disaster recovery cluster. You can tweak replication worker numbers, batch size and `[scheduler] max_jobs` to limit resources used. You'd get explicit monitoring, restart and backoff in case of network errors or disconnects, etc.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569161119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569161644","html_url":"https://github.com/apache/couchdb/pull/2381#issuecomment-569161644","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2381","id":569161644,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTE2MTY0NA==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T01:26:39Z","updated_at":"2019-12-27T01:26:39Z","author_association":"CONTRIBUTOR","body":"Understood, Paul @davisp We can review these javascript tests and create equivalent in elixir for missing ones.  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569161644/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569162020","html_url":"https://github.com/apache/couchdb/issues/2378#issuecomment-569162020","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2378","id":569162020,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTE2MjAyMA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T01:29:35Z","updated_at":"2019-12-27T01:29:35Z","author_association":"CONTRIBUTOR","body":"@intckarl \r\n\r\nMake sure to follow https://docs.couchdb.org/en/stable/setup/cluster.html and verify cluster connectivity after setting up node names.\r\n\r\n`{mem3_shards,load_shards_from_db,\"_users\",` should stop appearing as soon as you create the `_users` database.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569162020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569189380","html_url":"https://github.com/apache/couchdb/issues/2383#issuecomment-569189380","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2383","id":569189380,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTE4OTM4MA==","user":{"login":"akircher","id":5734777,"node_id":"MDQ6VXNlcjU3MzQ3Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5734777?v=4","gravatar_id":"","url":"https://api.github.com/users/akircher","html_url":"https://github.com/akircher","followers_url":"https://api.github.com/users/akircher/followers","following_url":"https://api.github.com/users/akircher/following{/other_user}","gists_url":"https://api.github.com/users/akircher/gists{/gist_id}","starred_url":"https://api.github.com/users/akircher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akircher/subscriptions","organizations_url":"https://api.github.com/users/akircher/orgs","repos_url":"https://api.github.com/users/akircher/repos","events_url":"https://api.github.com/users/akircher/events{/privacy}","received_events_url":"https://api.github.com/users/akircher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T05:07:43Z","updated_at":"2019-12-27T05:16:43Z","author_association":"NONE","body":"Hi Nick, \r\n\r\nThanks for your quick and thoughtful response! \r\n\r\nI am using the built-in `_stats` reducer but am emitting an array of 2 `values` for each `key` so I get 2 stats objects. And I am emitting those 5-10x times per document (so its a [very?] large view). I modified the `opts/couchdb/bin/couchdb` file as you suggested trying both 32MB and 64MB (67108864) values and restarted couchdb but unfortunately the same error.\r\n\r\nAny other ideas of what could be happening?\r\n\r\nThanks\r\nAdam","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569189380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569236344","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569236344","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569236344,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTIzNjM0NA==","user":{"login":"nicknaychov","id":1932847,"node_id":"MDQ6VXNlcjE5MzI4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1932847?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknaychov","html_url":"https://github.com/nicknaychov","followers_url":"https://api.github.com/users/nicknaychov/followers","following_url":"https://api.github.com/users/nicknaychov/following{/other_user}","gists_url":"https://api.github.com/users/nicknaychov/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknaychov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknaychov/subscriptions","organizations_url":"https://api.github.com/users/nicknaychov/orgs","repos_url":"https://api.github.com/users/nicknaychov/repos","events_url":"https://api.github.com/users/nicknaychov/events{/privacy}","received_events_url":"https://api.github.com/users/nicknaychov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-27T09:59:42Z","updated_at":"2019-12-27T10:01:33Z","author_association":"NONE","body":"Thanks a lot for your input.\r\nThis also crossed my mind, but I think might be too complex, while I would like more elegant and issue free solution. There must be a way without doing custom scripts.\r\n\r\nI read the docs numerous times but I could not find the answers of those questions and I do not think I am the only one who would benefit of them:\r\n\r\nWhen we should use zones and when replicas?\r\n\r\nCan we and how to add zones later to existing setup?\r\n\r\nWhat is the best/optimal way to setup remote \"hot\" site backup of existing cluster?\r\n\r\nOptimal settings for cluster deployed at different remote sites?\r\n\r\nI think if they add this practical cases with examples to documentation would be great benefit to the community.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569236344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569388484","html_url":"https://github.com/apache/couchdb/issues/2383#issuecomment-569388484","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2383","id":569388484,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTM4ODQ4NA==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-28T05:46:58Z","updated_at":"2019-12-28T05:46:58Z","author_association":"CONTRIBUTOR","body":"Hi Adam,\r\n\r\nThanks for giving that setting a try.  I had now realized that 64Mb was actually the default, wonder if 128Mb would make any difference, then? Maybe there is a way to monitor memory usage of the machine to see if there were any unexpected large spikes around when the crash was reported.\r\n\r\nAnother thing that could be happening is that the values emitted are not conforming to what a `_stats` reducer would expect. https://docs.couchdb.org/en/stable/ddocs/ddocs.html#_stats. There are some rules about those:\r\n\r\n> _stats can operate on key-value pairs where each value is an array comprised of numbers or pre-aggregated objects. In this case every value emitted from the map function must be an array, and the arrays must all be the same length\r\n\r\nPerhaps there is a way to confirm that the shape of emitted values matches those rules.\r\n\r\nAnother idea is to replace the stats reducer with a count or sum reducer and see if it would exhibit the crash as well.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569388484/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569391582","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569391582","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569391582,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTM5MTU4Mg==","user":{"login":"nickva","id":211822,"node_id":"MDQ6VXNlcjIxMTgyMg==","avatar_url":"https://avatars.githubusercontent.com/u/211822?v=4","gravatar_id":"","url":"https://api.github.com/users/nickva","html_url":"https://github.com/nickva","followers_url":"https://api.github.com/users/nickva/followers","following_url":"https://api.github.com/users/nickva/following{/other_user}","gists_url":"https://api.github.com/users/nickva/gists{/gist_id}","starred_url":"https://api.github.com/users/nickva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickva/subscriptions","organizations_url":"https://api.github.com/users/nickva/orgs","repos_url":"https://api.github.com/users/nickva/repos","events_url":"https://api.github.com/users/nickva/events{/privacy}","received_events_url":"https://api.github.com/users/nickva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-28T06:38:56Z","updated_at":"2019-12-28T06:38:56Z","author_association":"CONTRIBUTOR","body":"@nicknaychov \r\n\r\nI'll try to answer some of the questions you had\r\n\r\n> When we should use zones and when replicas?\r\n\r\nA placement setting using zones will override replicas. So setting a default placement or providing it in the db creation HTTP API request will use that setting over what `n` values holds. So specifying `.../?&placement=zone_a:2,zone_b:2&n=3` would create 4 copies instead of 3. One thing to watch out for here is that `zone_a` and `zone_b` have at least two nodes each.\r\n\r\n> Can we and how to add zones later to existing setup?\r\n\r\nYou'd decide what the zone configuration looks like, then edit the `_nodes` metadata db to add zone labels to each node, then edit the `_dbs` and update the shard map. This would be the re-balance part you mentioned. You could follow some of the instructions from shard moving doc section: https://docs.couchdb.org/en/stable/cluster/sharding.html#moving-a-shard\r\n\r\nThis would have to be done right and in the correct order or all of the sudden you data won't be \"found\" by the incoming requests. \r\n\r\nIt's much easier if the dbs are created with the new setting already...\r\n\r\n> What is the best/optimal way to setup remote \"hot\" site backup of existing cluster?\r\n\r\nIn general I mostly have seen simple replications there :-) but using zones you'd do the outline above and then maybe follow this archived blog https://web.archive.org/web/20160429122538/https://cloudant.com/blog/choosing-zone-configurations-for-bigcouch which discusses the issue pretty well I thought. The top recommendation there I think is to run 3 zones: 2 primary ones with 2 nodes each, and 1 backup node in its own zone.\r\n\r\n> Optimal settings for cluster deployed at different remote sites?\r\n\r\nThe danger there is running Erlang clustering over WAN. By default it is tuned to run over LAN type networks. Might need to do more research there but I know of at least one parameter `+zdbbl <KB>` that changes the Erlang distribution (clustering) buffer size. It might be good to have a larger value. http://erlang.org/doc/man/erl.html#+zdbbl that change would go into the `vm.args` file.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569391582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569447496","html_url":"https://github.com/apache/couchdb/issues/2383#issuecomment-569447496","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2383","id":569447496,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTQ0NzQ5Ng==","user":{"login":"akircher","id":5734777,"node_id":"MDQ6VXNlcjU3MzQ3Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/5734777?v=4","gravatar_id":"","url":"https://api.github.com/users/akircher","html_url":"https://github.com/akircher","followers_url":"https://api.github.com/users/akircher/followers","following_url":"https://api.github.com/users/akircher/following{/other_user}","gists_url":"https://api.github.com/users/akircher/gists{/gist_id}","starred_url":"https://api.github.com/users/akircher/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akircher/subscriptions","organizations_url":"https://api.github.com/users/akircher/orgs","repos_url":"https://api.github.com/users/akircher/repos","events_url":"https://api.github.com/users/akircher/events{/privacy}","received_events_url":"https://api.github.com/users/akircher/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-28T20:09:24Z","updated_at":"2019-12-28T20:09:24Z","author_association":"NONE","body":"This appears to be an error within the view and not with CouchDB.  I had a `for loop` in the code that would iterate (and `emit`) several times per document.  However I had a few (~100) misformed documents that caused the `for loop` to run emit about a 1000 times on each of the 100 malformed documents.  Once I put a check into the view to make sure the loop only ran on well-formed documents the views began to compile.  \r\n\r\nIn an ideal world, CouchDB would have a better error message here to help quickly diagnose the issue but I know the team is busy with v3.0 and v4.0 so I think that is a better use of their time than improving this error message.  Thus I am closing for now, but feel free to reopen if someone wants to work on this.\r\n\r\nThanks again to Nick for the help.  You all make the couchdb community great and welcoming.  ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569447496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569463365","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569463365","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569463365,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTQ2MzM2NQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-29T00:44:41Z","updated_at":"2019-12-29T00:44:41Z","author_association":"MEMBER","body":"As Nick has noted, Erlang expect low latency between nodes and there is only minimal security for that traffic by default (it's not encrypted), so you should not typically span datacenters (though see below) or geographical regions within a couchdb cluster. For inter-cluster data sync, use replication (over https).\r\n\r\nThe \"r\" and \"w\" config parameters are ignored by the system these days and are calculated from \"n\" (as n/2+1). You can override with query parameters but it is not recommended. The properties you think will be guaranteed by this will not be (and, as per my first paragraph, the cluster topology you would be using is both badly performing and insecure).\r\n\r\nOn zones, these exist to help map the shards (q*n) of a database evenly across failure domains. In practice this would be nodes in adjacent datacenters with very good low-latency connectivity (think AWS zone), for the purpose of surviving a datacenter failure. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569463365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569463499","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569463499","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569463499,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTQ2MzQ5OQ==","user":{"login":"rnewson","id":47223,"node_id":"MDQ6VXNlcjQ3MjIz","avatar_url":"https://avatars.githubusercontent.com/u/47223?v=4","gravatar_id":"","url":"https://api.github.com/users/rnewson","html_url":"https://github.com/rnewson","followers_url":"https://api.github.com/users/rnewson/followers","following_url":"https://api.github.com/users/rnewson/following{/other_user}","gists_url":"https://api.github.com/users/rnewson/gists{/gist_id}","starred_url":"https://api.github.com/users/rnewson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rnewson/subscriptions","organizations_url":"https://api.github.com/users/rnewson/orgs","repos_url":"https://api.github.com/users/rnewson/repos","events_url":"https://api.github.com/users/rnewson/events{/privacy}","received_events_url":"https://api.github.com/users/rnewson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-29T00:47:52Z","updated_at":"2019-12-29T00:47:52Z","author_association":"MEMBER","body":"Also I'm curious about q=3. q is unrelated to your problem, it's the amount of \"scale\" the db has, and is related most strongly with document count. it's not the number of replicas of your data.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569463499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569491393","html_url":"https://github.com/apache/couchdb/issues/2382#issuecomment-569491393","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2382","id":569491393,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTQ5MTM5Mw==","user":{"login":"nicknaychov","id":1932847,"node_id":"MDQ6VXNlcjE5MzI4NDc=","avatar_url":"https://avatars.githubusercontent.com/u/1932847?v=4","gravatar_id":"","url":"https://api.github.com/users/nicknaychov","html_url":"https://github.com/nicknaychov","followers_url":"https://api.github.com/users/nicknaychov/followers","following_url":"https://api.github.com/users/nicknaychov/following{/other_user}","gists_url":"https://api.github.com/users/nicknaychov/gists{/gist_id}","starred_url":"https://api.github.com/users/nicknaychov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicknaychov/subscriptions","organizations_url":"https://api.github.com/users/nicknaychov/orgs","repos_url":"https://api.github.com/users/nicknaychov/repos","events_url":"https://api.github.com/users/nicknaychov/events{/privacy}","received_events_url":"https://api.github.com/users/nicknaychov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-29T10:09:16Z","updated_at":"2019-12-29T10:12:22Z","author_association":"NONE","body":"@nickva thanks for the really useful thoughts and links. It looks I can not escape from spinning up zones. I currently have 3 nodes with n=3 i.e. each node have full copy of the DB. I am trying to avoid shard moving, I am un-experienced and I feel will broke the things, so I am thinking of creating 2 zones, first with 2 nodes in the main datacenter and second zone with just one node. All this using existing setup, without creating brand new cluster or re-balancing the existing, by just moving one of the nodes from the main datacenter to the second one. \r\nI am not sure if this will work so please comment on this. In theory I think it should be valid since using this approach altering of existing shard map is not needed.\r\n@rnewson The upper layer logic would create and remove DBs on the fly constantly and I think if I  use replication instead of zones for data sync, that will not work out of the box, but I will have to create custom script as @nickva  noted above.  Also in the link which he posted it is clearly mentioned that using of replication for inter-cluster sync is very bad idea - \"While perfectly acceptable, this has a vastly reduced guarantee of data freshness, even using continuous replication, plus increased latency and decreased throughput due to the serialization of data into the JSON format required for replication.\" \r\nIn conclusion, beside my experiment for setting zoning without doing re-balancing using the 3 existing nodes with n=3, I would like also to ask you guys for comment on if there is a secure way data to be replicated over WAN using zones?\r\nThanks a lot","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569491393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569549621","html_url":"https://github.com/apache/couchdb/issues/2384#issuecomment-569549621","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2384","id":569549621,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTU0OTYyMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-29T22:55:33Z","updated_at":"2019-12-29T22:55:33Z","author_association":"MEMBER","body":"Hi @pablobm ,\r\n\r\nThis is unfortunately a problem with readthedocs.org, who host our documentation for us:\r\n\r\n* https://github.com/readthedocs/readthedocs.org/issues/3242\r\n* https://github.com/readthedocs/readthedocs.org/issues/4190\r\n\r\nWorse, because of our build approach, the single `index.html` file only includes the splash page, not the full contents.\r\n\r\nBecause this page is generated by the RTD service and their template, we have no control over its format or contents.\r\n\r\nFortunately, there's a workaround. Just download the prebuilt CouchDB **tarball** from https://couchdb.apache.org/ that matches your version of CouchDB, unpack it, and open `share/docs/html/index.html` with your favourite browser.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569549621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569872636","html_url":"https://github.com/apache/couchdb/pull/2385#issuecomment-569872636","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2385","id":569872636,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg3MjYzNg==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T06:22:56Z","updated_at":"2019-12-31T06:22:56Z","author_association":"CONTRIBUTOR","body":"+1 thanks @wohali ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/569872636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570097065","html_url":"https://github.com/apache/couchdb/issues/2377#issuecomment-570097065","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2377","id":570097065,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDA5NzA2NQ==","user":{"login":"rpotter12","id":34352567,"node_id":"MDQ6VXNlcjM0MzUyNTY3","avatar_url":"https://avatars.githubusercontent.com/u/34352567?v=4","gravatar_id":"","url":"https://api.github.com/users/rpotter12","html_url":"https://github.com/rpotter12","followers_url":"https://api.github.com/users/rpotter12/followers","following_url":"https://api.github.com/users/rpotter12/following{/other_user}","gists_url":"https://api.github.com/users/rpotter12/gists{/gist_id}","starred_url":"https://api.github.com/users/rpotter12/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rpotter12/subscriptions","organizations_url":"https://api.github.com/users/rpotter12/orgs","repos_url":"https://api.github.com/users/rpotter12/repos","events_url":"https://api.github.com/users/rpotter12/events{/privacy}","received_events_url":"https://api.github.com/users/rpotter12/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T00:36:30Z","updated_at":"2020-01-02T00:36:30Z","author_association":"NONE","body":"@jyxiaoka \r\nresults for `sudo apt install ilbicu`: \r\n```\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nE: Unable to locate package libicu\r\n```\r\n\r\nand for `sudo apt install libicu60`:\r\n```\r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nPackage libicu60 is not available, but is referred to by another package.\r\nThis may mean that the package is missing, has been obsoleted, or\r\nis only available from another source\r\n\r\nE: Package 'libicu60' has no installation candidate\r\n```\r\n\r\nhow to solve this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570097065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570100176","html_url":"https://github.com/apache/couchdb/issues/2377#issuecomment-570100176","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2377","id":570100176,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDEwMDE3Ng==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T01:25:52Z","updated_at":"2020-01-02T01:25:52Z","author_association":"MEMBER","body":"https://packages.ubuntu.com/bionic/libicu60 says the package is available for 18.04.\r\n\r\nCheck your `/etc/apt/sources.list` file and ensure it has the correct line in it, such as:\r\n\r\n```\r\ndeb http://us.archive.ubuntu.com/ubuntu/ bionic main restricted\r\n```\r\n\r\nThen do `sudo apt update && sudo apt install libicu60`.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570100176/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570206899","html_url":"https://github.com/apache/couchdb/pull/2367#issuecomment-570206899","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2367","id":570206899,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIwNjg5OQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T13:27:57Z","updated_at":"2020-01-02T13:27:57Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570206899/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570658299","html_url":"https://github.com/apache/couchdb/issues/2191#issuecomment-570658299","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2191","id":570658299,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY1ODI5OQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:33:21Z","updated_at":"2020-01-03T18:33:21Z","author_association":"MEMBER","body":"I’d say https://github.com/apache/couchdb/pull/2389","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570658299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570661910","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570661910","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570661910,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2MTkxMA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:46:43Z","updated_at":"2020-01-03T18:46:43Z","author_association":"MEMBER","body":"ah needs some work to run with the test suite.\r\n\r\nwe probably need an override. How about setting an environment variable in `make eunit`, something like `COUCH_TEST_ADMIN_PARTY_OVERRIDE` that, if set, disables the mechanisms that refuses to start without an admin pass?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570661910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570662159","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-570662159","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":570662159,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2MjE1OQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:47:40Z","updated_at":"2020-01-03T18:47:40Z","author_association":"MEMBER","body":"great job everybody!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570662159/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570662983","html_url":"https://github.com/apache/couchdb/issues/2171#issuecomment-570662983","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2171","id":570662983,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2Mjk4Mw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:50:49Z","updated_at":"2020-01-03T18:50:49Z","author_association":"MEMBER","body":"ioq merged, closing","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570662983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570664637","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570664637","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570664637,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2NDYzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:56:57Z","updated_at":"2020-01-03T18:56:57Z","author_association":"MEMBER","body":"@janl Had this dance with @rnewson recently who tried to special case a setting in the .ini file. He was able to work around it using `./rel/files/eunit.ini` for eunit, and modifying `dev/run` for the latter.\r\n\r\nWe already have a command line way to pass a static `admin:password` to `dev/run` so perhaps just pass that in and bake `admin:password` as the auth into the tests? I bet we can do it in one place for each of Elixir and JS, except maybe for any admin level tests.\r\n\r\nPersonally I'd rather not have an escape hatch on this one, otherwise people will find it and abuse it, just as they did when we rushed 2.0 out the door and left 5986 open.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570664637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570664964","html_url":"https://github.com/apache/couchdb/pull/2388#issuecomment-570664964","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2388","id":570664964,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2NDk2NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T18:58:06Z","updated_at":"2020-01-03T18:58:06Z","author_association":"MEMBER","body":"definitely no harm in advertising it here, will add a commit","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570664964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570665803","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570665803","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570665803,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2NTgwMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:01:03Z","updated_at":"2020-01-03T19:01:03Z","author_association":"MEMBER","body":"@wohali the problem is that we have tests that rely on setting/changing admin-party, so it’s not that we could just set a admin/pass, we’d have to rework many gnarly tests which might exceed our time budget for this.\r\n\r\nI hear you on the escape hatch, my idea was make this a `COUCH_TEST` prefix. One additional thing we could do is add a little process that logs an error message once a minute or hour if that variable is set and no admin is configured, just to make sure folks get the message.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570665803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570666291","html_url":"https://github.com/apache/couchdb/issues/2249#issuecomment-570666291","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2249","id":570666291,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2NjI5MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:02:36Z","updated_at":"2020-01-03T19:02:36Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570666291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570668492","html_url":"https://github.com/apache/couchdb/pull/2388#issuecomment-570668492","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2388","id":570668492,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2ODQ5Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:10:32Z","updated_at":"2020-01-03T19:10:32Z","author_association":"MEMBER","body":"Done.\r\n","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570668492/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570669127","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570669127","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570669127,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY2OTEyNw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:12:32Z","updated_at":"2020-01-03T19:12:32Z","author_association":"MEMBER","body":"One thing we’d not do is document this escape hatch, which sets it apart from 5986 which we didn’t leave open by accident, but advertised its use for administrative purposes.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570669127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570670648","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570670648","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570670648,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY3MDY0OA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:18:00Z","updated_at":"2020-01-03T19:18:00Z","author_association":"MEMBER","body":"@janl ok, if you don't want to do the heavy lifting around fixing all the tests as a blocker, I understand. We at least have an easy way to get something into the `.ini` file, that might be better than an env var...unless you want to do something sneaky like put it in the app context (though IIRC that requires a recompile, doesn't it?)\r\n\r\nGood idea on periodic logging. How about every 5 minutes? :) We should really be noisy about this.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570670648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570675033","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570675033","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570675033,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY3NTAzMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:33:50Z","updated_at":"2020-01-03T19:33:50Z","author_association":"MEMBER","body":"FYI Jan and I are having a sidebar on IRC; he's reducing the sleep to 500ms to deal with some `couch_log` latency problems.\r\n\r\nWhen I get back from lunch, I will do a test package of this PR and see if systemd correctly throttles restarting when no admin is configured.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570675033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570676926","html_url":"https://github.com/apache/couchdb/issues/2249#issuecomment-570676926","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2249","id":570676926,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY3NjkyNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:40:52Z","updated_at":"2020-01-03T19:40:52Z","author_association":"MEMBER","body":"This is done: https://github.com/apache/couchdb-ioq/commit/4843f3709b4be997cf8424c44f856523fd31b7d1","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570676926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570678890","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570678890","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570678890,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY3ODg5MA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:48:33Z","updated_at":"2020-01-03T19:48:33Z","author_association":"MEMBER","body":"squashed it all into one commit, includes the reduced timeout, escape hatch and annoyance reporter.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570678890/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570679023","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570679023","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570679023,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDY3OTAyMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T19:48:59Z","updated_at":"2020-01-03T19:48:59Z","author_association":"MEMBER","body":"and the Makefile fix","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570679023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570702099","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570702099","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570702099,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDcwMjA5OQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T21:22:29Z","updated_at":"2020-01-03T21:22:29Z","author_association":"MEMBER","body":"Tests still failing, will need to look more closely","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570702099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570765111","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570765111","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570765111,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc2NTExMQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T07:50:26Z","updated_at":"2020-01-04T07:50:26Z","author_association":"MEMBER","body":"Aha, of course, my advice was wrong. I am working on the fix now.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570765111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570766608","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570766608","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570766608,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc2NjYwOA==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T08:16:34Z","updated_at":"2020-01-04T08:16:34Z","author_association":"MEMBER","body":"This should have fixed it, tests are passing locally.\r\n\r\nThe unrelated Python change was to make `make python-black` succeed, the test was actually broken by the addition of `$(TEST_OPTS)` and was missing the formatting problem in the new file `build-aux/show-test-results.py`. (fyi @davisp )\r\n\r\nSetting to approved, I'll merge tomorrow if no one else notices it first.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570766608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570767125","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570767125","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570767125,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc2NzEyNQ==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T08:26:44Z","updated_at":"2020-01-04T08:26:44Z","author_association":"MEMBER","body":"@janl tag. Forgot to update `Makefile.win`, would you please? thanks :) zzzz.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570767125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570770732","html_url":"https://github.com/apache/couchdb/pull/2389#issuecomment-570770732","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2389","id":570770732,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3MDczMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T09:31:43Z","updated_at":"2020-01-04T09:31:43Z","author_association":"MEMBER","body":"ported to Makefile.win as best I could, and simplified the annoyance process to be only spawned when the env var is set, instead of checking the env var on each iteration, which won’t ever change.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570770732/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570771395","html_url":"https://github.com/apache/couchdb/pull/2345#issuecomment-570771395","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2345","id":570771395,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3MTM5NQ==","user":{"login":"jiangphcn","id":18000622,"node_id":"MDQ6VXNlcjE4MDAwNjIy","avatar_url":"https://avatars.githubusercontent.com/u/18000622?v=4","gravatar_id":"","url":"https://api.github.com/users/jiangphcn","html_url":"https://github.com/jiangphcn","followers_url":"https://api.github.com/users/jiangphcn/followers","following_url":"https://api.github.com/users/jiangphcn/following{/other_user}","gists_url":"https://api.github.com/users/jiangphcn/gists{/gist_id}","starred_url":"https://api.github.com/users/jiangphcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiangphcn/subscriptions","organizations_url":"https://api.github.com/users/jiangphcn/orgs","repos_url":"https://api.github.com/users/jiangphcn/repos","events_url":"https://api.github.com/users/jiangphcn/events{/privacy}","received_events_url":"https://api.github.com/users/jiangphcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T09:43:00Z","updated_at":"2020-01-04T09:43:00Z","author_association":"CONTRIBUTOR","body":"thanks @janl ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570771395/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777123","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-570777123","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":570777123,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3NzEyMw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:19:59Z","updated_at":"2020-01-04T11:19:59Z","author_association":"MEMBER","body":"I think this is a useful addition IF we can make it efficient to provide.\r\n\r\nCurrently, CouchDB internally needs to store the doc `_id` inside a view index to effectively perform view updates. Because it is already in the index, we show it with every result*. If the view index already also includes the `_rev` for each row (something I’m not sure about at the moment), then we could add an option along the lines of `?include_rev=true` to show it as well.\r\n\r\nIf the `_rev` is NOT already in the view index, would not suggest we add, just for this feature for performance reasons.\r\n\r\n* there might be a valid reverse request to hide the id if it is not needed (`?include_id=false` maybe)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777181","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-570777181","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":570777181,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3NzE4MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:20:44Z","updated_at":"2020-01-04T11:20:44Z","author_association":"MEMBER","body":"Is someone here up for checking if the `_rev` is already part of a view index?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777181/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777506","html_url":"https://github.com/apache/couchdb/issues/2380#issuecomment-570777506","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2380","id":570777506,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3NzUwNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:25:53Z","updated_at":"2020-01-04T11:25:53Z","author_association":"MEMBER","body":"the verify installation code is very old, it might need updating to account for password auth’d clusters, which are the default now.\r\n\r\nhttps://github.com/apache/couchdb-fauxton/blob/master/app/addons/verifyinstall/resources.js#L124-L125 suggests that the code is using “local” database URLs (no http://server… in front of the database name), which no longer works.\r\n\r\nThe patch to make the fully qualified URLs should be simple enough :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777581","html_url":"https://github.com/apache/couchdb/issues/2387#issuecomment-570777581","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2387","id":570777581,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3NzU4MQ==","user":{"login":"elChapoSing","id":5416611,"node_id":"MDQ6VXNlcjU0MTY2MTE=","avatar_url":"https://avatars.githubusercontent.com/u/5416611?v=4","gravatar_id":"","url":"https://api.github.com/users/elChapoSing","html_url":"https://github.com/elChapoSing","followers_url":"https://api.github.com/users/elChapoSing/followers","following_url":"https://api.github.com/users/elChapoSing/following{/other_user}","gists_url":"https://api.github.com/users/elChapoSing/gists{/gist_id}","starred_url":"https://api.github.com/users/elChapoSing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elChapoSing/subscriptions","organizations_url":"https://api.github.com/users/elChapoSing/orgs","repos_url":"https://api.github.com/users/elChapoSing/repos","events_url":"https://api.github.com/users/elChapoSing/events{/privacy}","received_events_url":"https://api.github.com/users/elChapoSing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:27:04Z","updated_at":"2020-01-04T11:27:04Z","author_association":"NONE","body":"Beyond my skillset I'm afraid. ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777726","html_url":"https://github.com/apache/couchdb/issues/2364#issuecomment-570777726","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2364","id":570777726,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3NzcyNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:29:27Z","updated_at":"2020-01-04T11:29:27Z","author_association":"MEMBER","body":"please reopen if this is still an issue","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777726/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777775","html_url":"https://github.com/apache/couchdb/issues/2348#issuecomment-570777775","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2348","id":570777775,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc3Nzc3NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T11:30:13Z","updated_at":"2020-01-04T11:30:13Z","author_association":"MEMBER","body":"please re open if this problem persists","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570777775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570784375","html_url":"https://github.com/apache/couchdb/pull/2296#issuecomment-570784375","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2296","id":570784375,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc4NDM3NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T13:07:12Z","updated_at":"2020-01-04T13:07:12Z","author_association":"MEMBER","body":"great start, I’ll see this over the finish line","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570784375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570785301","html_url":"https://github.com/apache/couchdb/pull/2322#issuecomment-570785301","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2322","id":570785301,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc4NTMwMQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T13:21:33Z","updated_at":"2020-01-04T13:21:33Z","author_association":"MEMBER","body":"should we hold this for 3.0 in light of making search setup easy?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570785301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570785481","html_url":"https://github.com/apache/couchdb/pull/2152#issuecomment-570785481","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2152","id":570785481,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDc4NTQ4MQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T13:24:24Z","updated_at":"2020-01-04T13:24:24Z","author_association":"MEMBER","body":"good one, I’ll see this over the finish line","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570785481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803875","html_url":"https://github.com/apache/couchdb/pull/2254#issuecomment-570803875","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2254","id":570803875,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwMzg3NQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T17:33:35Z","updated_at":"2020-01-04T17:33:35Z","author_association":"MEMBER","body":"Merged in https://github.com/apache/couchdb/pull/2394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803894","html_url":"https://github.com/apache/couchdb/pull/2007#issuecomment-570803894","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2007","id":570803894,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwMzg5NA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T17:33:46Z","updated_at":"2020-01-04T17:33:46Z","author_association":"MEMBER","body":"Merged in https://github.com/apache/couchdb/pull/2394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803909","html_url":"https://github.com/apache/couchdb/pull/2094#issuecomment-570803909","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2094","id":570803909,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwMzkwOQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T17:34:00Z","updated_at":"2020-01-04T17:34:00Z","author_association":"MEMBER","body":"Merged in https://github.com/apache/couchdb/pull/2394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803922","html_url":"https://github.com/apache/couchdb/pull/2238#issuecomment-570803922","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2238","id":570803922,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwMzkyMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T17:34:10Z","updated_at":"2020-01-04T17:34:10Z","author_association":"MEMBER","body":"Merged in https://github.com/apache/couchdb/pull/2394","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570803922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570807705","html_url":"https://github.com/apache/couchdb/pull/1967#issuecomment-570807705","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1967","id":570807705,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwNzcwNQ==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T18:24:48Z","updated_at":"2020-01-04T18:24:48Z","author_association":"MEMBER","body":"thanks! :)","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570807705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570809137","html_url":"https://github.com/apache/couchdb/pull/1912#issuecomment-570809137","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1912","id":570809137,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgwOTEzNw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T18:45:42Z","updated_at":"2020-01-04T18:46:38Z","author_association":"MEMBER","body":"I'm leaning towards -1, as this removes the microsecond timing output which has been crucial in determining failures in the past. Unless this is an optional mode that can be turned on and off.\r\n\r\nThink of people using the logging infrastructure via syslogd to send this data to a remote machine (which is common in large, industrial-grade installations).","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570809137/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570810126","html_url":"https://github.com/apache/couchdb/pull/2296#issuecomment-570810126","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2296","id":570810126,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgxMDEyNg==","user":{"login":"AGrzes","id":1086454,"node_id":"MDQ6VXNlcjEwODY0NTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1086454?v=4","gravatar_id":"","url":"https://api.github.com/users/AGrzes","html_url":"https://github.com/AGrzes","followers_url":"https://api.github.com/users/AGrzes/followers","following_url":"https://api.github.com/users/AGrzes/following{/other_user}","gists_url":"https://api.github.com/users/AGrzes/gists{/gist_id}","starred_url":"https://api.github.com/users/AGrzes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AGrzes/subscriptions","organizations_url":"https://api.github.com/users/AGrzes/orgs","repos_url":"https://api.github.com/users/AGrzes/repos","events_url":"https://api.github.com/users/AGrzes/events{/privacy}","received_events_url":"https://api.github.com/users/AGrzes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T18:58:00Z","updated_at":"2020-01-04T18:58:00Z","author_association":"CONTRIBUTOR","body":"@janl Do you need anythin from me at this point?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570810126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570814600","html_url":"https://github.com/apache/couchdb/pull/1828#issuecomment-570814600","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1828","id":570814600,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgxNDYwMA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T19:53:57Z","updated_at":"2020-01-04T19:53:57Z","author_association":"MEMBER","body":"Merged in https://github.com/apache/couchdb/pull/2395","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570814600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570814782","html_url":"https://github.com/apache/couchdb/pull/2393#issuecomment-570814782","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2393","id":570814782,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgxNDc4Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T19:56:28Z","updated_at":"2020-01-04T19:56:28Z","author_association":"MEMBER","body":"fixed in latest push","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570814782/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570816914","html_url":"https://github.com/apache/couchdb/pull/1912#issuecomment-570816914","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1912","id":570816914,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgxNjkxNA==","user":{"login":"gdamjan","id":81654,"node_id":"MDQ6VXNlcjgxNjU0","avatar_url":"https://avatars.githubusercontent.com/u/81654?v=4","gravatar_id":"","url":"https://api.github.com/users/gdamjan","html_url":"https://github.com/gdamjan","followers_url":"https://api.github.com/users/gdamjan/followers","following_url":"https://api.github.com/users/gdamjan/following{/other_user}","gists_url":"https://api.github.com/users/gdamjan/gists{/gist_id}","starred_url":"https://api.github.com/users/gdamjan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gdamjan/subscriptions","organizations_url":"https://api.github.com/users/gdamjan/orgs","repos_url":"https://api.github.com/users/gdamjan/repos","events_url":"https://api.github.com/users/gdamjan/events{/privacy}","received_events_url":"https://api.github.com/users/gdamjan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T20:24:50Z","updated_at":"2020-01-04T20:24:50Z","author_association":"CONTRIBUTOR","body":"> I'm leaning towards -1, as this removes the microsecond timing\r\n\r\nI'm not sure on what basis is this conclusion? The journal does store time in microsecond precision (for ex. see here: https://www.freedesktop.org/software/systemd/man/systemd.journal-fields.html#__REALTIME_TIMESTAMP= etc.). `journalctl` can then display that information in different formats, based on user preference.\r\n\r\n> Unless this is an optional mode that can be turned on and off.\r\n\r\nI'm not sure what \"optional mode\" is about, here. the logger itself needs to be explicitly enabled with `[log] writer = journald` (as I wrote in the PR).\r\n \r\n> Think of people using the logging infrastructure via syslogd to send this data to a remote machine (which is common in large, industrial-grade installations).\r\n\r\nSure, I actually am using journald in a large industrial-grade installations and shipping logs from many machines to external services (like CloudWatch etc.). Not sure what this refers to?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570816914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570819733","html_url":"https://github.com/apache/couchdb/pull/1912#issuecomment-570819733","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1912","id":570819733,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDgxOTczMw==","user":{"login":"wohali","id":112292,"node_id":"MDQ6VXNlcjExMjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/112292?v=4","gravatar_id":"","url":"https://api.github.com/users/wohali","html_url":"https://github.com/wohali","followers_url":"https://api.github.com/users/wohali/followers","following_url":"https://api.github.com/users/wohali/following{/other_user}","gists_url":"https://api.github.com/users/wohali/gists{/gist_id}","starred_url":"https://api.github.com/users/wohali/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wohali/subscriptions","organizations_url":"https://api.github.com/users/wohali/orgs","repos_url":"https://api.github.com/users/wohali/repos","events_url":"https://api.github.com/users/wohali/events{/privacy}","received_events_url":"https://api.github.com/users/wohali/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-04T21:02:03Z","updated_at":"2020-01-04T21:02:03Z","author_association":"MEMBER","body":"Sorry, I should have read the code change before commenting.\r\n\r\nI see now that this is a new module for `couch_log_writer` and does not prevent you from using the existing `couch_log_writer_file`, `couch_log_writer_stderr` or `couch_log_writer_syslog`. In that case this is fine, objection removed :)\r\n\r\nPlease update `rel/overlay/etc/default.ini`:\r\n\r\nL449: s/three/four\r\n~L457: add a paragraph describing this writer.\r\n\r\nDefault should remain `stderr`. Thanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570819733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570889242","html_url":"https://github.com/apache/couchdb/pull/2296#issuecomment-570889242","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2296","id":570889242,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDg4OTI0Mg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T08:28:50Z","updated_at":"2020-01-05T08:28:50Z","author_association":"MEMBER","body":"@AGrzes not yet, I’ll let you know. I’ll take the liberty of doing small amendments directly.","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570889242/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570892602","html_url":"https://github.com/apache/couchdb/pull/1783#issuecomment-570892602","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1783","id":570892602,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDg5MjYwMg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T09:24:19Z","updated_at":"2020-01-05T09:24:19Z","author_association":"MEMBER","body":"After fixing the linter errors and allowing for CI flakes in view_compaction.js, this now fails with an error in the new tests:\r\n\r\n```\r\nTraceback (most recent call last):\r\n8269  File \"/home/travis/build/apache/couchdb/src/mango/test/21-empty-selector-tests.py\", line 42, in test_empty_array_and_with_age\r\n8270    self.assertEqual(resp[\"index\"][\"type\"], klass.INDEX_TYPE)\r\n8271AssertionError: 'special' != 'text'\r\n8272- special\r\n8273+ text\r\n```\r\n\r\n@tonysun83 do you have time to look into this?","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570892602/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570898336","html_url":"https://github.com/apache/couchdb/pull/2092#issuecomment-570898336","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2092","id":570898336,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDg5ODMzNg==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T10:36:43Z","updated_at":"2020-01-05T10:36:43Z","author_association":"MEMBER","body":"This happened in https://github.com/apache/couchdb/pull/2336","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570898336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570898597","html_url":"https://github.com/apache/couchdb/pull/2018#issuecomment-570898597","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2018","id":570898597,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDg5ODU5Nw==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T10:39:46Z","updated_at":"2020-01-05T10:39:46Z","author_association":"MEMBER","body":"@iilyak are you interested in rebasing this? I’d be happy to see it land asap","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570898597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570900188","html_url":"https://github.com/apache/couchdb/pull/2296#issuecomment-570900188","issue_url":"https://api.github.com/repos/apache/couchdb/issues/2296","id":570900188,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDkwMDE4OA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T10:59:43Z","updated_at":"2020-01-05T10:59:43Z","author_association":"MEMBER","body":"swapped the name from `standalone` to `single_node` everywhere, to me more consistent with the rest of our naming. Excellent work overall 👍 ","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570900188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570905714","html_url":"https://github.com/apache/couchdb/pull/1912#issuecomment-570905714","issue_url":"https://api.github.com/repos/apache/couchdb/issues/1912","id":570905714,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDkwNTcxNA==","user":{"login":"janl","id":11321,"node_id":"MDQ6VXNlcjExMzIx","avatar_url":"https://avatars.githubusercontent.com/u/11321?v=4","gravatar_id":"","url":"https://api.github.com/users/janl","html_url":"https://github.com/janl","followers_url":"https://api.github.com/users/janl/followers","following_url":"https://api.github.com/users/janl/following{/other_user}","gists_url":"https://api.github.com/users/janl/gists{/gist_id}","starred_url":"https://api.github.com/users/janl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/janl/subscriptions","organizations_url":"https://api.github.com/users/janl/orgs","repos_url":"https://api.github.com/users/janl/repos","events_url":"https://api.github.com/users/janl/events{/privacy}","received_events_url":"https://api.github.com/users/janl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-05T12:07:48Z","updated_at":"2020-01-05T12:07:48Z","author_association":"MEMBER","body":"LGTM, thanks for all the clarifications, also @wohali, I’ll take this over the CI finish line","reactions":{"url":"https://api.github.com/repos/apache/couchdb/issues/comments/570905714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]