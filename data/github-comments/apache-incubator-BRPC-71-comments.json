[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1949825562","html_url":"https://github.com/apache/brpc/issues/1640#issuecomment-1949825562","issue_url":"https://api.github.com/repos/apache/brpc/issues/1640","id":1949825562,"node_id":"IC_kwDOBhmkcs50N_oa","user":{"login":"Divyansh200102","id":146909065,"node_id":"U_kgDOCMGniQ","avatar_url":"https://avatars.githubusercontent.com/u/146909065?v=4","gravatar_id":"","url":"https://api.github.com/users/Divyansh200102","html_url":"https://github.com/Divyansh200102","followers_url":"https://api.github.com/users/Divyansh200102/followers","following_url":"https://api.github.com/users/Divyansh200102/following{/other_user}","gists_url":"https://api.github.com/users/Divyansh200102/gists{/gist_id}","starred_url":"https://api.github.com/users/Divyansh200102/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Divyansh200102/subscriptions","organizations_url":"https://api.github.com/users/Divyansh200102/orgs","repos_url":"https://api.github.com/users/Divyansh200102/repos","events_url":"https://api.github.com/users/Divyansh200102/events{/privacy}","received_events_url":"https://api.github.com/users/Divyansh200102/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T06:44:05Z","updated_at":"2024-02-17T06:44:05Z","author_association":"CONTRIBUTOR","body":"@wasphin could you please take a look at #2540 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1949825562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950241677","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1950241677","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1950241677,"node_id":"IC_kwDOBhmkcs50PlON","user":{"login":"ketor","id":3497139,"node_id":"MDQ6VXNlcjM0OTcxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/3497139?v=4","gravatar_id":"","url":"https://api.github.com/users/ketor","html_url":"https://github.com/ketor","followers_url":"https://api.github.com/users/ketor/followers","following_url":"https://api.github.com/users/ketor/following{/other_user}","gists_url":"https://api.github.com/users/ketor/gists{/gist_id}","starred_url":"https://api.github.com/users/ketor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketor/subscriptions","organizations_url":"https://api.github.com/users/ketor/orgs","repos_url":"https://api.github.com/users/ketor/repos","events_url":"https://api.github.com/users/ketor/events{/privacy}","received_events_url":"https://api.github.com/users/ketor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T15:53:40Z","updated_at":"2024-02-17T15:53:40Z","author_association":"CONTRIBUTOR","body":"braft目前用起来有一个有点棘手的问题，每个raft group都会开启4个execq，包括fsm caller、log manager、node apply、raft meta。当raft group数量比较多，或者fsm caller中有长耗时操作，或者fsm caller的调用内有pthread阻塞，braft实际上就会把brpc的所有线程用满，导致整个进程都无法处理新的message，导致braft本身的心跳也会超时。\r\n\r\n如前文所述，对外服务的业务逻辑涉及到写braft状态机，并等待fsm caller执行完成后的callback再返回response给调用方。因此就会存在对外服务的线程池与braft的execq之间需要使用bthread同步原语。除了这种情况之外，服务本身还有一些业务逻辑的处理也涉及到提交raft状态机等待状态写入成功后才能继续执行的逻辑，也会涉及到跨线程池同步。\r\n\r\n表达能力比较差，可能描述得不好：）。\r\n\r\n> 划分线程池的目的是为了隔离，感觉你对外服务和braft已经在上层通过execq做了隔离，是不是就没必要再使用这个功能了呢？\r\n如果要使用可能要做一些改造，attribute可以按照你的情况制定，但是bthread原语确实不能跨线程池。\r\n\r\n这个地方比较难处理的点是braft的逻辑几乎都是通过execq来执行的，当execq的数量变大之后，实际上一个execq就相当于一个并发，可以跑满一个线程。execq数量多了之后，线程数就不够用了，这个问题是最早希望使用tag调度来限制braft使用的资源的一个主要原因。但是使用了tag调度之后，跨线程池使用bthread原语又会有问题，就有点不好处理。\r\n\r\n我们现在通过一些方法已经基本实现了控制braft的并发度了，结合tag调度这个feature，应该能扩展一些新的方法来做这个事情。\r\n\r\n技术上bthread原语跨线程池的使用，以后是否有办法支持呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950241677/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950246452","html_url":"https://github.com/apache/brpc/issues/2537#issuecomment-1950246452","issue_url":"https://api.github.com/repos/apache/brpc/issues/2537","id":1950246452,"node_id":"IC_kwDOBhmkcs50PmY0","user":{"login":"ketor","id":3497139,"node_id":"MDQ6VXNlcjM0OTcxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/3497139?v=4","gravatar_id":"","url":"https://api.github.com/users/ketor","html_url":"https://github.com/ketor","followers_url":"https://api.github.com/users/ketor/followers","following_url":"https://api.github.com/users/ketor/following{/other_user}","gists_url":"https://api.github.com/users/ketor/gists{/gist_id}","starred_url":"https://api.github.com/users/ketor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketor/subscriptions","organizations_url":"https://api.github.com/users/ketor/orgs","repos_url":"https://api.github.com/users/ketor/repos","events_url":"https://api.github.com/users/ketor/events{/privacy}","received_events_url":"https://api.github.com/users/ketor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-17T16:14:16Z","updated_at":"2024-02-17T16:14:16Z","author_association":"CONTRIBUTOR","body":"希望可以早日支持protobuf v22.0+","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950246452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950962856","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1950962856","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1950962856,"node_id":"IC_kwDOBhmkcs50SVSo","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T05:01:33Z","updated_at":"2024-02-18T05:01:33Z","author_association":"CONTRIBUTOR","body":"> braft目前用起来有一个有点棘手的问题，每个raft group都会开启4个execq，包括fsm caller、log manager、node apply、raft meta。当raft group数量比较多，或者fsm caller中有长耗时操作，或者fsm caller的调用内有pthread阻塞，braft实际上就会把brpc的所有线程用满，导致整个进程都无法处理新的message，导致braft本身的心跳也会超时。\r\n> \r\n> 如前文所述，对外服务的业务逻辑涉及到写braft状态机，并等待fsm caller执行完成后的callback再返回response给调用方。因此就会存在对外服务的线程池与braft的execq之间需要使用bthread同步原语。除了这种情况之外，服务本身还有一些业务逻辑的处理也涉及到提交raft状态机等待状态写入成功后才能继续执行的逻辑，也会涉及到跨线程池同步。\r\n> \r\n> 表达能力比较差，可能描述得不好：）。\r\n> \r\n> > 划分线程池的目的是为了隔离，感觉你对外服务和braft已经在上层通过execq做了隔离，是不是就没必要再使用这个功能了呢？\r\n> > 如果要使用可能要做一些改造，attribute可以按照你的情况制定，但是bthread原语确实不能跨线程池。\r\n> \r\n> 这个地方比较难处理的点是braft的逻辑几乎都是通过execq来执行的，当execq的数量变大之后，实际上一个execq就相当于一个并发，可以跑满一个线程。execq数量多了之后，线程数就不够用了，这个问题是最早希望使用tag调度来限制braft使用的资源的一个主要原因。但是使用了tag调度之后，跨线程池使用bthread原语又会有问题，就有点不好处理。\r\n> \r\n> 我们现在通过一些方法已经基本实现了控制braft的并发度了，结合tag调度这个feature，应该能扩展一些新的方法来做这个事情。\r\n> \r\n> 技术上bthread原语跨线程池的使用，以后是否有办法支持呢？\r\n\r\n技术上是能实现的，但是做起来也有些复杂，同步的代码确实更好一些，否则execq里面就得调用callback了吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1950962856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1951033584","html_url":"https://github.com/apache/brpc/issues/2356#issuecomment-1951033584","issue_url":"https://api.github.com/repos/apache/brpc/issues/2356","id":1951033584,"node_id":"IC_kwDOBhmkcs50Smjw","user":{"login":"lzhprigrammer","id":16067215,"node_id":"MDQ6VXNlcjE2MDY3MjE1","avatar_url":"https://avatars.githubusercontent.com/u/16067215?v=4","gravatar_id":"","url":"https://api.github.com/users/lzhprigrammer","html_url":"https://github.com/lzhprigrammer","followers_url":"https://api.github.com/users/lzhprigrammer/followers","following_url":"https://api.github.com/users/lzhprigrammer/following{/other_user}","gists_url":"https://api.github.com/users/lzhprigrammer/gists{/gist_id}","starred_url":"https://api.github.com/users/lzhprigrammer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lzhprigrammer/subscriptions","organizations_url":"https://api.github.com/users/lzhprigrammer/orgs","repos_url":"https://api.github.com/users/lzhprigrammer/repos","events_url":"https://api.github.com/users/lzhprigrammer/events{/privacy}","received_events_url":"https://api.github.com/users/lzhprigrammer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-18T08:54:39Z","updated_at":"2024-02-18T08:55:03Z","author_association":"NONE","body":"确实有这问题，doubly_buffered_data.h  替换为1.5.0 就可以了！编译成功！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1951033584/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1953400945","html_url":"https://github.com/apache/brpc/issues/2534#issuecomment-1953400945","issue_url":"https://api.github.com/repos/apache/brpc/issues/2534","id":1953400945,"node_id":"IC_kwDOBhmkcs50bohx","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T02:49:27Z","updated_at":"2024-02-20T02:49:27Z","author_association":"CONTRIBUTOR","body":"应该是因为构造函数无法返回失败吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1953400945/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1954409081","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1954409081","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1954409081,"node_id":"IC_kwDOBhmkcs50fep5","user":{"login":"ketor","id":3497139,"node_id":"MDQ6VXNlcjM0OTcxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/3497139?v=4","gravatar_id":"","url":"https://api.github.com/users/ketor","html_url":"https://github.com/ketor","followers_url":"https://api.github.com/users/ketor/followers","following_url":"https://api.github.com/users/ketor/following{/other_user}","gists_url":"https://api.github.com/users/ketor/gists{/gist_id}","starred_url":"https://api.github.com/users/ketor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketor/subscriptions","organizations_url":"https://api.github.com/users/ketor/orgs","repos_url":"https://api.github.com/users/ketor/repos","events_url":"https://api.github.com/users/ketor/events{/privacy}","received_events_url":"https://api.github.com/users/ketor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T15:03:10Z","updated_at":"2024-02-20T15:03:10Z","author_association":"CONTRIBUTOR","body":"> 技术上是能实现的，但是做起来也有些复杂，同步的代码确实更好一些，否则execq里面就得调用callback了吧？\r\n\r\n确实还是有同步代码的需求。有些场景如果用callback，就会使callback里的逻辑很重，虽然技术上是可以的，但是代码看起来就很难看了。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1954409081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1955121870","html_url":"https://github.com/apache/brpc/issues/1255#issuecomment-1955121870","issue_url":"https://api.github.com/repos/apache/brpc/issues/1255","id":1955121870,"node_id":"IC_kwDOBhmkcs50iMrO","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-20T21:24:00Z","updated_at":"2024-02-20T21:24:00Z","author_association":"MEMBER","body":"Should be closed","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1955121870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1956004161","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1956004161","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1956004161,"node_id":"IC_kwDOBhmkcs50lkFB","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-21T06:53:49Z","updated_at":"2024-02-21T06:53:49Z","author_association":"CONTRIBUTOR","body":"> > 技术上是能实现的，但是做起来也有些复杂，同步的代码确实更好一些，否则execq里面就得调用callback了吧？\r\n> \r\n> 确实还是有同步代码的需求。有些场景如果用callback，就会使callback里的逻辑很重，虽然技术上是可以的，但是代码看起来就很难看了。\r\n\r\nok，这块后续可以支持。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1956004161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960583840","html_url":"https://github.com/apache/brpc/pull/1947#issuecomment-1960583840","issue_url":"https://api.github.com/repos/apache/brpc/issues/1947","id":1960583840,"node_id":"IC_kwDOBhmkcs503CKg","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-23T00:47:22Z","updated_at":"2024-02-23T00:47:22Z","author_association":"MEMBER","body":"@Aaaaaaron 请问这个可以合并了么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960583840/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960648155","html_url":"https://github.com/apache/brpc/issues/1241#issuecomment-1960648155","issue_url":"https://api.github.com/repos/apache/brpc/issues/1241","id":1960648155,"node_id":"IC_kwDOBhmkcs503R3b","user":{"login":"panlei-coder","id":62509266,"node_id":"MDQ6VXNlcjYyNTA5MjY2","avatar_url":"https://avatars.githubusercontent.com/u/62509266?v=4","gravatar_id":"","url":"https://api.github.com/users/panlei-coder","html_url":"https://github.com/panlei-coder","followers_url":"https://api.github.com/users/panlei-coder/followers","following_url":"https://api.github.com/users/panlei-coder/following{/other_user}","gists_url":"https://api.github.com/users/panlei-coder/gists{/gist_id}","starred_url":"https://api.github.com/users/panlei-coder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/panlei-coder/subscriptions","organizations_url":"https://api.github.com/users/panlei-coder/orgs","repos_url":"https://api.github.com/users/panlei-coder/repos","events_url":"https://api.github.com/users/panlei-coder/events{/privacy}","received_events_url":"https://api.github.com/users/panlei-coder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-23T02:22:57Z","updated_at":"2024-02-23T02:22:57Z","author_association":"NONE","body":"> 有的，留一下你的微信号，我拉你\r\n\r\nvx:PL17396120156，求拉谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960648155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960648506","html_url":"https://github.com/apache/brpc/issues/2544#issuecomment-1960648506","issue_url":"https://api.github.com/repos/apache/brpc/issues/2544","id":1960648506,"node_id":"IC_kwDOBhmkcs503R86","user":{"login":"dingxiaoshuai123","id":56024577,"node_id":"MDQ6VXNlcjU2MDI0NTc3","avatar_url":"https://avatars.githubusercontent.com/u/56024577?v=4","gravatar_id":"","url":"https://api.github.com/users/dingxiaoshuai123","html_url":"https://github.com/dingxiaoshuai123","followers_url":"https://api.github.com/users/dingxiaoshuai123/followers","following_url":"https://api.github.com/users/dingxiaoshuai123/following{/other_user}","gists_url":"https://api.github.com/users/dingxiaoshuai123/gists{/gist_id}","starred_url":"https://api.github.com/users/dingxiaoshuai123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dingxiaoshuai123/subscriptions","organizations_url":"https://api.github.com/users/dingxiaoshuai123/orgs","repos_url":"https://api.github.com/users/dingxiaoshuai123/repos","events_url":"https://api.github.com/users/dingxiaoshuai123/events{/privacy}","received_events_url":"https://api.github.com/users/dingxiaoshuai123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-23T02:23:39Z","updated_at":"2024-02-23T02:23:39Z","author_association":"NONE","body":"另外我希望加入 brpc 的社区群","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960648506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960727209","html_url":"https://github.com/apache/brpc/issues/2544#issuecomment-1960727209","issue_url":"https://api.github.com/repos/apache/brpc/issues/2544","id":1960727209,"node_id":"IC_kwDOBhmkcs503lKp","user":{"login":"dingxiaoshuai123","id":56024577,"node_id":"MDQ6VXNlcjU2MDI0NTc3","avatar_url":"https://avatars.githubusercontent.com/u/56024577?v=4","gravatar_id":"","url":"https://api.github.com/users/dingxiaoshuai123","html_url":"https://github.com/dingxiaoshuai123","followers_url":"https://api.github.com/users/dingxiaoshuai123/followers","following_url":"https://api.github.com/users/dingxiaoshuai123/following{/other_user}","gists_url":"https://api.github.com/users/dingxiaoshuai123/gists{/gist_id}","starred_url":"https://api.github.com/users/dingxiaoshuai123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dingxiaoshuai123/subscriptions","organizations_url":"https://api.github.com/users/dingxiaoshuai123/orgs","repos_url":"https://api.github.com/users/dingxiaoshuai123/repos","events_url":"https://api.github.com/users/dingxiaoshuai123/events{/privacy}","received_events_url":"https://api.github.com/users/dingxiaoshuai123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-23T04:47:06Z","updated_at":"2024-02-23T04:47:06Z","author_association":"NONE","body":"在 Ubuntu 上是正常的，但是 macOS 上出现了上述问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1960727209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1962955207","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-1962955207","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":1962955207,"node_id":"IC_kwDOBhmkcs51AFHH","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-25T14:17:07Z","updated_at":"2024-02-25T14:17:07Z","author_association":"MEMBER","body":"还有几个问题需要讨论一下：\r\n1. 目前编译方式有多种, 有一定维护成本：\r\n   - cmake 和 bazel 相对标准, 依赖外部工具;\r\n   - config_brpc.sh 是自定义的用于生成 makefile 的配置脚本, 是否有必要再保留？\r\n1. Protobuf 22 Log 迁移 absl 后, 需要自定义 absl 的 LogSink 实现自定义的 Log 文件写, 是否可以不在再 brpc 中配置, 改由应用层自定义?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1962955207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963223910","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-1963223910","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":1963223910,"node_id":"IC_kwDOBhmkcs51BGtm","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T02:45:02Z","updated_at":"2024-02-26T02:45:02Z","author_association":"CONTRIBUTOR","body":"> 还有几个问题需要讨论一下：\r\n> \r\n> 1. 目前编译方式有多种, 有一定维护成本：\r\n>    \r\n>    * cmake 和 bazel 相对标准, 依赖外部工具;\r\n>    * config_brpc.sh 是自定义的用于生成 makefile 的配置脚本, 是否有必要再保留？\r\n> 2. Protobuf 22 Log 迁移 absl 后, 需要自定义 absl 的 LogSink 实现自定义的 Log 文件写, 是否可以不在再 brpc 中配置, 改由应用层自定义?\r\n\r\nconfig_brpc.sh还是保留吧，挺方便的，不用依赖cmake/bazel","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963223910/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963232579","html_url":"https://github.com/apache/brpc/issues/2545#issuecomment-1963232579","issue_url":"https://api.github.com/repos/apache/brpc/issues/2545","id":1963232579,"node_id":"IC_kwDOBhmkcs51BI1D","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T02:57:33Z","updated_at":"2024-02-26T02:57:33Z","author_association":"CONTRIBUTOR","body":"目前还不支持监控streamwrite的请求","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963232579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963359574","html_url":"https://github.com/apache/brpc/issues/2545#issuecomment-1963359574","issue_url":"https://api.github.com/repos/apache/brpc/issues/2545","id":1963359574,"node_id":"IC_kwDOBhmkcs51Bn1W","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T05:42:54Z","updated_at":"2024-02-26T05:43:52Z","author_association":"MEMBER","body":"> 目前还不支持监控streamwrite的请求\r\n\r\n\r\n> 目前还不支持监控streamwrite的请求\r\n\r\n谢谢，请问 streaming 的方式通常来说是否应该比普通rpc的性能要高？我在项目里集成了brpc streaming后发现在传输的对象变大后性能对比起grpc就开始下降，正在排查是我们的代码的问题还是 streaming rpc 使用起来有什么要注意的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963359574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963741713","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1963741713","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1963741713,"node_id":"IC_kwDOBhmkcs51DFIR","user":{"login":"uvletter","id":18381436,"node_id":"MDQ6VXNlcjE4MzgxNDM2","avatar_url":"https://avatars.githubusercontent.com/u/18381436?v=4","gravatar_id":"","url":"https://api.github.com/users/uvletter","html_url":"https://github.com/uvletter","followers_url":"https://api.github.com/users/uvletter/followers","following_url":"https://api.github.com/users/uvletter/following{/other_user}","gists_url":"https://api.github.com/users/uvletter/gists{/gist_id}","starred_url":"https://api.github.com/users/uvletter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uvletter/subscriptions","organizations_url":"https://api.github.com/users/uvletter/orgs","repos_url":"https://api.github.com/users/uvletter/repos","events_url":"https://api.github.com/users/uvletter/events{/privacy}","received_events_url":"https://api.github.com/users/uvletter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T10:04:38Z","updated_at":"2024-02-26T10:04:38Z","author_association":"NONE","body":"```\r\n=================================================================\r\n==155368==ERROR: AddressSanitizer: new-delete-type-mismatch on 0x621000030d00 in thread T22 (brpc_timer):\r\n  object passed to delete has wrong type:\r\n  size of the allocated type:   4096 bytes;\r\n  size of the deallocated type: 4096 bytes.\r\n  alignment of the allocated type:   default-aligned;\r\n  alignment of the deallocated type: 64 bytes.\r\n    #0 0x7ff6e41a35d5 in operator delete(void*, unsigned long, std::align_val_t) (/usr/lib64/libasan.so.5+0x1105d5)\r\n    #1 0x752bc9 in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::_destroy_tls_blocks() external/com_github_apache_brpc/src/bvar/detail/agent_group.h:166\r\n    #2 0x752bc9 in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::_destroy_tls_blocks() external/com_github_apache_brpc/src/bvar/detail/agent_group.h:161\r\n    #3 0x150d34f in butil::detail::ThreadExitHelper::~ThreadExitHelper() external/com_github_apache_brpc/src/butil/thread_local.cpp:41\r\n    #4 0x150d34f in delete_thread_exit_helper external/com_github_apache_brpc/src/butil/thread_local.cpp:77\r\n    #5 0x150d34f in delete_thread_exit_helper external/com_github_apache_brpc/src/butil/thread_local.cpp:76\r\n    #6 0x7ff6e3c68ca1 in __nptl_deallocate_tsd /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:155\r\n    #7 0x7ff6e3c68eb2 in start_thread /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:314\r\n    #8 0x7ff6e2690b0c in clone (/lib64/libc.so.6+0xfeb0c)\r\n\r\n0x621000030d00 is located 0 bytes inside of 4096-byte region [0x621000030d00,0x621000031d00)\r\nallocated by thread T22 (brpc_timer) here:\r\n    #0 0x7ff6e41a1767 in operator new(unsigned long, std::nothrow_t const&) (/usr/lib64/libasan.so.5+0x10e767)\r\n    #1 0x1227afe in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::get_or_create_tls_agent(int) external/com_github_apache_brpc/src/bvar/detail/agent_group.h:150\r\n    #2 0x1227afe in bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::get_or_create_tls_agent() external/com_github_apache_brpc/src/bvar/detail/combiner.h:297\r\n    #3 0x1227afe in bvar::Reducer<long, bvar::detail::AddTo<long>, bvar::detail::MinusFrom<long> >::operator<<(long) external/com_github_apache_brpc/src/bvar/reducer.h:194\r\n    #4 0x1227afe in int bthread::TaskGroup::start_background<true>(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) external/com_github_apache_brpc/src/bthread/task_group.cpp:453\r\n    #5 0x11fa28f in bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) external/com_github_apache_brpc/src/bthread/bthread.cpp:150\r\n    #6 0x11fa28f in bthread_start_background external/com_github_apache_brpc/src/bthread/bthread.cpp:230\r\n    #7 0xaac90d in braft::RepeatedTimerTask::on_timedout(void*) external/com_meituan_mraft/src/braft/repeated_timer_task.cpp:120\r\n    #8 0x1200a04 in bthread::TimerThread::Task::run_and_delete() external/com_github_apache_brpc/src/bthread/timer_thread.cpp:282\r\n    #9 0x1202fb5 in bthread::TimerThread::run() external/com_github_apache_brpc/src/bthread/timer_thread.cpp:395\r\n    #10 0x12075ef in bthread::TimerThread::run_this(void*) external/com_github_apache_brpc/src/bthread/timer_thread.cpp:122\r\n    #11 0x7ff6e3c68ea4 in start_thread /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:307\r\n```\r\n\r\nI met the same problem. I compile my project in C++17, while the compilation option for BRPC is C++11, so ASAN detects the dismatch between new and delete.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1963741713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1964341023","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1964341023","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1964341023,"node_id":"IC_kwDOBhmkcs51FXcf","user":{"login":"ehds","id":17853449,"node_id":"MDQ6VXNlcjE3ODUzNDQ5","avatar_url":"https://avatars.githubusercontent.com/u/17853449?v=4","gravatar_id":"","url":"https://api.github.com/users/ehds","html_url":"https://github.com/ehds","followers_url":"https://api.github.com/users/ehds/followers","following_url":"https://api.github.com/users/ehds/following{/other_user}","gists_url":"https://api.github.com/users/ehds/gists{/gist_id}","starred_url":"https://api.github.com/users/ehds/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ehds/subscriptions","organizations_url":"https://api.github.com/users/ehds/orgs","repos_url":"https://api.github.com/users/ehds/repos","events_url":"https://api.github.com/users/ehds/events{/privacy}","received_events_url":"https://api.github.com/users/ehds/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T14:56:04Z","updated_at":"2024-02-26T14:56:37Z","author_association":"CONTRIBUTOR","body":"\r\n> \r\n> I met the same problem. I compile my project in C++17, while the compilation option for BRPC is C++11, so ASAN detects the dismatch between new and delete.\r\n\r\nhttps://github.com/apache/brpc/pull/2421 Try this fix.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1964341023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1964383015","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1964383015","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1964383015,"node_id":"IC_kwDOBhmkcs51Fhsn","user":{"login":"uvletter","id":18381436,"node_id":"MDQ6VXNlcjE4MzgxNDM2","avatar_url":"https://avatars.githubusercontent.com/u/18381436?v=4","gravatar_id":"","url":"https://api.github.com/users/uvletter","html_url":"https://github.com/uvletter","followers_url":"https://api.github.com/users/uvletter/followers","following_url":"https://api.github.com/users/uvletter/following{/other_user}","gists_url":"https://api.github.com/users/uvletter/gists{/gist_id}","starred_url":"https://api.github.com/users/uvletter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uvletter/subscriptions","organizations_url":"https://api.github.com/users/uvletter/orgs","repos_url":"https://api.github.com/users/uvletter/repos","events_url":"https://api.github.com/users/uvletter/events{/privacy}","received_events_url":"https://api.github.com/users/uvletter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-26T15:14:37Z","updated_at":"2024-02-26T15:14:37Z","author_association":"NONE","body":"Thx, my current workaround is compiling brpc with std=c++17 too. Just wanna report the unworkable cacheline alignment and underlying  risk in mixed compilation units.\r\n\r\n获取 Outlook for iOS<https://aka.ms/o0ukef>\r\n________________________________\r\n发件人: Dongsheng He ***@***.***>\r\n发送时间: Monday, February 26, 2024 10:56:16 PM\r\n收件人: apache/brpc ***@***.***>\r\n抄送: Tian ***@***.***>; Comment ***@***.***>\r\n主题: Re: [apache/brpc] struct/class that require cacheline alignment may not work when using new (before c++17). (Issue #2416)\r\n\r\n\r\n=================================================================\r\n==155368==ERROR: AddressSanitizer: new-delete-type-mismatch on 0x621000030d00 in thread T22 (brpc_timer):\r\n  object passed to delete has wrong type:\r\n  size of the allocated type:   4096 bytes;\r\n  size of the deallocated type: 4096 bytes.\r\n  alignment of the allocated type:   default-aligned;\r\n  alignment of the deallocated type: 64 bytes.\r\n    #0 0x7ff6e41a35d5 in operator delete(void*, unsigned long, std::align_val_t) (/usr/lib64/libasan.so.5+0x1105d5)\r\n    #1 0x752bc9 in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::_destroy_tls_blocks() external/com_github_apache_brpc/src/bvar/detail/agent_group.h:166\r\n    #2 0x752bc9 in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::_destroy_tls_blocks() external/com_github_apache_brpc/src/bvar/detail/agent_group.h:161\r\n    #3 0x150d34f in butil::detail::ThreadExitHelper::~ThreadExitHelper() external/com_github_apache_brpc/src/butil/thread_local.cpp:41\r\n    #4 0x150d34f in delete_thread_exit_helper external/com_github_apache_brpc/src/butil/thread_local.cpp:77\r\n    #5 0x150d34f in delete_thread_exit_helper external/com_github_apache_brpc/src/butil/thread_local.cpp:76\r\n    #6 0x7ff6e3c68ca1 in __nptl_deallocate_tsd /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:155\r\n    #7 0x7ff6e3c68eb2 in start_thread /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:314\r\n    #8 0x7ff6e2690b0c in clone (/lib64/libc.so.6+0xfeb0c)\r\n\r\n0x621000030d00 is located 0 bytes inside of 4096-byte region [0x621000030d00,0x621000031d00)\r\nallocated by thread T22 (brpc_timer) here:\r\n    #0 0x7ff6e41a1767 in operator new(unsigned long, std::nothrow_t const&) (/usr/lib64/libasan.so.5+0x10e767)\r\n    #1 0x1227afe in bvar::detail::AgentGroup<bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::Agent>::get_or_create_tls_agent(int) external/com_github_apache_brpc/src/bvar/detail/agent_group.h:150\r\n    #2 0x1227afe in bvar::detail::AgentCombiner<long, long, bvar::detail::AddTo<long> >::get_or_create_tls_agent() external/com_github_apache_brpc/src/bvar/detail/combiner.h:297\r\n    #3 0x1227afe in bvar::Reducer<long, bvar::detail::AddTo<long>, bvar::detail::MinusFrom<long> >::operator<<(long) external/com_github_apache_brpc/src/bvar/reducer.h:194\r\n    #4 0x1227afe in int bthread::TaskGroup::start_background<true>(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) external/com_github_apache_brpc/src/bthread/task_group.cpp:453\r\n    #5 0x11fa28f in bthread::start_from_non_worker(unsigned long*, bthread_attr_t const*, void* (*)(void*), void*) external/com_github_apache_brpc/src/bthread/bthread.cpp:150\r\n    #6 0x11fa28f in bthread_start_background external/com_github_apache_brpc/src/bthread/bthread.cpp:230\r\n    #7 0xaac90d in braft::RepeatedTimerTask::on_timedout(void*) external/com_meituan_mraft/src/braft/repeated_timer_task.cpp:120\r\n    #8 0x1200a04 in bthread::TimerThread::Task::run_and_delete() external/com_github_apache_brpc/src/bthread/timer_thread.cpp:282\r\n    #9 0x1202fb5 in bthread::TimerThread::run() external/com_github_apache_brpc/src/bthread/timer_thread.cpp:395\r\n    #10 0x12075ef in bthread::TimerThread::run_this(void*) external/com_github_apache_brpc/src/bthread/timer_thread.cpp:122\r\n    #11 0x7ff6e3c68ea4 in start_thread /usr/src/debug/glibc-2.17-c758a686/nptl/pthread_create.c:307\r\n\r\n\r\nI met the same problem. I compile my project in C++17, while the compilation option for BRPC is C++11, so ASAN detects the dismatch between new and delete.\r\n\r\n#2421<https://github.com/apache/brpc/pull/2421> Try this fix.\r\n\r\n―\r\nReply to this email directly, view it on GitHub<https://github.com/apache/brpc/issues/2416#issuecomment-1964341023>, or unsubscribe<https://github.com/notifications/unsubscribe-auth/AEMHU7GMT5HWBZ4A7IDOXYTYVSPBBAVCNFSM6AAAAAA6GV4RTGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMYTSNRUGM2DCMBSGM>.\r\nYou are receiving this because you commented.Message ID: ***@***.***>\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1964383015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1965752700","html_url":"https://github.com/apache/brpc/pull/2421#issuecomment-1965752700","issue_url":"https://api.github.com/repos/apache/brpc/issues/2421","id":1965752700,"node_id":"IC_kwDOBhmkcs51KwF8","user":{"login":"uvletter","id":18381436,"node_id":"MDQ6VXNlcjE4MzgxNDM2","avatar_url":"https://avatars.githubusercontent.com/u/18381436?v=4","gravatar_id":"","url":"https://api.github.com/users/uvletter","html_url":"https://github.com/uvletter","followers_url":"https://api.github.com/users/uvletter/followers","following_url":"https://api.github.com/users/uvletter/following{/other_user}","gists_url":"https://api.github.com/users/uvletter/gists{/gist_id}","starred_url":"https://api.github.com/users/uvletter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/uvletter/subscriptions","organizations_url":"https://api.github.com/users/uvletter/orgs","repos_url":"https://api.github.com/users/uvletter/repos","events_url":"https://api.github.com/users/uvletter/events{/privacy}","received_events_url":"https://api.github.com/users/uvletter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-27T04:10:14Z","updated_at":"2024-02-27T04:10:14Z","author_association":"NONE","body":"The solution is not sophisticated in my opinion. The brpc header file may be included in other translation units, which could be not aligned-new, so the final artifact will be a mixture of aligned-new and non-aligned-new.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1965752700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1966293991","html_url":"https://github.com/apache/brpc/issues/2549#issuecomment-1966293991","issue_url":"https://api.github.com/repos/apache/brpc/issues/2549","id":1966293991,"node_id":"IC_kwDOBhmkcs51M0Pn","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-27T10:58:05Z","updated_at":"2024-02-27T10:58:05Z","author_association":"CONTRIBUTOR","body":" 假定这里的设置都是默认的，done->Run()会让回调运行在独立的bthread中，done->Run()里只是创建。所以如果bthread不是特别多，且pthread在调用done->Run()时全程带锁，这里也不会死锁。但有一些设置可以让Done原地运行，这个要检查一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1966293991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1966414866","html_url":"https://github.com/apache/brpc/issues/2549#issuecomment-1966414866","issue_url":"https://api.github.com/repos/apache/brpc/issues/2549","id":1966414866,"node_id":"IC_kwDOBhmkcs51NRwS","user":{"login":"coyorkdow","id":30541655,"node_id":"MDQ6VXNlcjMwNTQxNjU1","avatar_url":"https://avatars.githubusercontent.com/u/30541655?v=4","gravatar_id":"","url":"https://api.github.com/users/coyorkdow","html_url":"https://github.com/coyorkdow","followers_url":"https://api.github.com/users/coyorkdow/followers","following_url":"https://api.github.com/users/coyorkdow/following{/other_user}","gists_url":"https://api.github.com/users/coyorkdow/gists{/gist_id}","starred_url":"https://api.github.com/users/coyorkdow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coyorkdow/subscriptions","organizations_url":"https://api.github.com/users/coyorkdow/orgs","repos_url":"https://api.github.com/users/coyorkdow/repos","events_url":"https://api.github.com/users/coyorkdow/events{/privacy}","received_events_url":"https://api.github.com/users/coyorkdow/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-27T12:13:40Z","updated_at":"2024-02-27T12:22:28Z","author_association":"CONTRIBUTOR","body":"> 假定这里的设置都是默认的，done->Run()会让回调运行在独立的bthread中，done->Run()里只是创建。所以如果bthread不是特别多，且pthread在调用done->Run()时全程带锁，这里也不会死锁。但有一些设置可以让Done原地运行，这个要检查一下\r\n\r\n请问一下是什么设置呢。\r\n\r\n另外“done->Run()会让回调运行在独立的bthread中，done->Run()里只是创建”的意思是否是指done->Run()创建了新的bthread后直接返回，而不会join它。在这种情况下，即使新的bthread中去请求了mutex也不会死锁。因为pthread在done->Run()时不会被阻塞，可以之后把mutex释放，从而让bthread worker可以继续工作。\r\n\r\n我理解在这个情况下确实不会死锁，但是如果done->Run()要等待这个bthread里的回调执行完，那还是会死锁的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1966414866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1968576982","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1968576982","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1968576982,"node_id":"IC_kwDOBhmkcs51VhnW","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-28T09:33:02Z","updated_at":"2024-02-28T09:33:02Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/brpc/pull/2551","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1968576982/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970341448","html_url":"https://github.com/apache/brpc/pull/2551#issuecomment-1970341448","issue_url":"https://api.github.com/repos/apache/brpc/issues/2551","id":1970341448,"node_id":"IC_kwDOBhmkcs51cQZI","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T03:41:23Z","updated_at":"2024-02-29T03:41:23Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 这个PR有一个点没有处理到\r\nint TaskGroup::interrupt(bthread_t tid, TaskControl* c) 这个函数里面在sleep_id != 0，这部分，因为无法拿到tid原来的执行上下文信息，所以没有办法得到正确的tag分组。你看这块怎么处理合适呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970341448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970525763","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1970525763","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1970525763,"node_id":"IC_kwDOBhmkcs51c9ZD","user":{"login":"pavel2003","id":7892679,"node_id":"MDQ6VXNlcjc4OTI2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/7892679?v=4","gravatar_id":"","url":"https://api.github.com/users/pavel2003","html_url":"https://github.com/pavel2003","followers_url":"https://api.github.com/users/pavel2003/followers","following_url":"https://api.github.com/users/pavel2003/following{/other_user}","gists_url":"https://api.github.com/users/pavel2003/gists{/gist_id}","starred_url":"https://api.github.com/users/pavel2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavel2003/subscriptions","organizations_url":"https://api.github.com/users/pavel2003/orgs","repos_url":"https://api.github.com/users/pavel2003/repos","events_url":"https://api.github.com/users/pavel2003/events{/privacy}","received_events_url":"https://api.github.com/users/pavel2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T06:59:35Z","updated_at":"2024-02-29T06:59:35Z","author_association":"NONE","body":"我们有个环境也有类似的问题，但是我们没有使用nameservice，channel都是ip port直接连接的，这个会是什么问题\r\n\r\n@chenBright \r\n\r\n![](https://file.tapd.woa.com/tfl/captures/2023-09/tapd_20407842_base64_1694057414_892.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970525763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970526984","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1970526984","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1970526984,"node_id":"IC_kwDOBhmkcs51c9sI","user":{"login":"pavel2003","id":7892679,"node_id":"MDQ6VXNlcjc4OTI2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/7892679?v=4","gravatar_id":"","url":"https://api.github.com/users/pavel2003","html_url":"https://github.com/pavel2003","followers_url":"https://api.github.com/users/pavel2003/followers","following_url":"https://api.github.com/users/pavel2003/following{/other_user}","gists_url":"https://api.github.com/users/pavel2003/gists{/gist_id}","starred_url":"https://api.github.com/users/pavel2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavel2003/subscriptions","organizations_url":"https://api.github.com/users/pavel2003/orgs","repos_url":"https://api.github.com/users/pavel2003/repos","events_url":"https://api.github.com/users/pavel2003/events{/privacy}","received_events_url":"https://api.github.com/users/pavel2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T07:00:52Z","updated_at":"2024-02-29T07:00:52Z","author_association":"NONE","body":"![Uploading fff.png…]()\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970526984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970552708","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1970552708","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1970552708,"node_id":"IC_kwDOBhmkcs51dD-E","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T07:23:48Z","updated_at":"2024-02-29T07:24:17Z","author_association":"CONTRIBUTOR","body":"用ip:port直连，也是会有同样问题的。你们的brpc已经带上这个patch了吗？@pavel2003","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970552708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970665824","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1970665824","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1970665824,"node_id":"IC_kwDOBhmkcs51dflg","user":{"login":"pavel2003","id":7892679,"node_id":"MDQ6VXNlcjc4OTI2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/7892679?v=4","gravatar_id":"","url":"https://api.github.com/users/pavel2003","html_url":"https://github.com/pavel2003","followers_url":"https://api.github.com/users/pavel2003/followers","following_url":"https://api.github.com/users/pavel2003/following{/other_user}","gists_url":"https://api.github.com/users/pavel2003/gists{/gist_id}","starred_url":"https://api.github.com/users/pavel2003/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pavel2003/subscriptions","organizations_url":"https://api.github.com/users/pavel2003/orgs","repos_url":"https://api.github.com/users/pavel2003/repos","events_url":"https://api.github.com/users/pavel2003/events{/privacy}","received_events_url":"https://api.github.com/users/pavel2003/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T08:42:42Z","updated_at":"2024-02-29T08:42:42Z","author_association":"NONE","body":"还没带，我想先根据这个流程复现下，我在KeepWrite之前先sleep了，但是HealthCheckThread会在WaitAndReset中一直等\r\n\r\n因为没有NamingService的话，应该没人从SocketMap把socket删掉吧， 我们的channel是全局的，channel自己不会释放\r\n\r\n@chenBright ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970665824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970677032","html_url":"https://github.com/apache/brpc/pull/1814#issuecomment-1970677032","issue_url":"https://api.github.com/repos/apache/brpc/issues/1814","id":1970677032,"node_id":"IC_kwDOBhmkcs51diUo","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T08:49:53Z","updated_at":"2024-02-29T08:49:53Z","author_association":"CONTRIBUTOR","body":"全局的channel就不会删除SocketMap的socket了，那应该不是这个问题导致的了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1970677032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972080824","html_url":"https://github.com/apache/brpc/issues/2416#issuecomment-1972080824","issue_url":"https://api.github.com/repos/apache/brpc/issues/2416","id":1972080824,"node_id":"IC_kwDOBhmkcs51i5C4","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-02-29T22:30:22Z","updated_at":"2024-02-29T22:32:53Z","author_association":"CONTRIBUTOR","body":"请问针对这种c++不同版本不匹配的问题，c++官方哪里有个统一的列表说明吗？想看看是否还有别的坑。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972080824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972382498","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1972382498","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1972382498,"node_id":"IC_kwDOBhmkcs51kCsi","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T03:01:09Z","updated_at":"2024-03-01T03:01:09Z","author_association":"CONTRIBUTOR","body":"@yanglimingcn 我有几个疑问。比如我有一个server，tag是tag1。\r\n1. 处理service请求的bthread是tag1?\r\n2. service的所有io bthread是tag1?\r\n3.  请求下游服务时创建的io bthread也是tag1吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972382498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972404251","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1972404251","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1972404251,"node_id":"IC_kwDOBhmkcs51kIAb","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T03:21:49Z","updated_at":"2024-03-01T03:21:49Z","author_association":"CONTRIBUTOR","body":"> @yanglimingcn 我有几个疑问。比如我有一个server，tag是tag1。\r\n> \r\n> 1. 处理service请求的bthread是tag1?\r\n> 2. service的所有io bthread是tag1?\r\n> 3. 请求下游服务时创建的io bthread也是tag1吗？\r\n\r\n是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972404251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972511211","html_url":"https://github.com/apache/brpc/issues/1779#issuecomment-1972511211","issue_url":"https://api.github.com/repos/apache/brpc/issues/1779","id":1972511211,"node_id":"IC_kwDOBhmkcs51kiHr","user":{"login":"shishc9","id":52554717,"node_id":"MDQ6VXNlcjUyNTU0NzE3","avatar_url":"https://avatars.githubusercontent.com/u/52554717?v=4","gravatar_id":"","url":"https://api.github.com/users/shishc9","html_url":"https://github.com/shishc9","followers_url":"https://api.github.com/users/shishc9/followers","following_url":"https://api.github.com/users/shishc9/following{/other_user}","gists_url":"https://api.github.com/users/shishc9/gists{/gist_id}","starred_url":"https://api.github.com/users/shishc9/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shishc9/subscriptions","organizations_url":"https://api.github.com/users/shishc9/orgs","repos_url":"https://api.github.com/users/shishc9/repos","events_url":"https://api.github.com/users/shishc9/events{/privacy}","received_events_url":"https://api.github.com/users/shishc9/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-01T04:58:59Z","updated_at":"2024-03-01T04:58:59Z","author_association":"NONE","body":"good work","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1972511211/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1974197342","html_url":"https://github.com/apache/brpc/pull/2551#issuecomment-1974197342","issue_url":"https://api.github.com/repos/apache/brpc/issues/2551","id":1974197342,"node_id":"IC_kwDOBhmkcs51q9xe","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-02T02:12:03Z","updated_at":"2024-03-02T02:12:03Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm 这个PR有一个点没有处理到 int TaskGroup::interrupt(bthread_t tid, TaskControl* c) 这个函数里面在sleep_id != 0，这部分，因为无法拿到tid原来的执行上下文信息，所以没有办法得到正确的tag分组。你看这块怎么处理合适呢？\r\n\r\n修改了一下，给bthread_interrupt加了一个tag参数，代表用户希望在那个tag分组上执行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1974197342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976430923","html_url":"https://github.com/apache/brpc/pull/2156#issuecomment-1976430923","issue_url":"https://api.github.com/repos/apache/brpc/issues/2156","id":1976430923,"node_id":"IC_kwDOBhmkcs51zfFL","user":{"login":"zcfh","id":70124382,"node_id":"MDQ6VXNlcjcwMTI0Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/70124382?v=4","gravatar_id":"","url":"https://api.github.com/users/zcfh","html_url":"https://github.com/zcfh","followers_url":"https://api.github.com/users/zcfh/followers","following_url":"https://api.github.com/users/zcfh/following{/other_user}","gists_url":"https://api.github.com/users/zcfh/gists{/gist_id}","starred_url":"https://api.github.com/users/zcfh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcfh/subscriptions","organizations_url":"https://api.github.com/users/zcfh/orgs","repos_url":"https://api.github.com/users/zcfh/repos","events_url":"https://api.github.com/users/zcfh/events{/privacy}","received_events_url":"https://api.github.com/users/zcfh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-04T12:04:29Z","updated_at":"2024-03-04T12:24:56Z","author_association":"NONE","body":"目前从clang11 切换 到clang16 遇到了一些新的问题。和 #1776  提到的问题应该是一样的，不过我看**1776对应的代码并没有合入**, 是有做了其他修复吗?\r\n\r\n对比了汇编，这样差异在于326-331 行这段代码（version 0.96）, 并且把这段代码拆到一个函数里，加上禁用优化的标注，就没问题了。 \r\n```c++\r\n        // Clean tls variables, must be done before changing version_butex\r\n        // otherwise another thread just joined this thread may not see side\r\n        // effects of destructing tls variables.\r\n        KeyTable* kt = tls_bls.keytable;\r\n        if (kt != NULL) {\r\n            return_keytable(m->attr.keytable_pool, kt);\r\n            // After deletion: tls may be set during deletion.\r\n            tls_bls.keytable = NULL;\r\n            m->local_storage.keytable = NULL; // optional\r\n        }\r\n```\r\n\r\nclang11 对于 tls_bls 成员变量的读写，每次都会经过一次call。而clang16会在`do`循环外缓存`tls_bls`的地址。\r\n具体汇编差异如下\r\nclang11\r\n``` as\r\n;third_party/brpc-0.9.6/src/bthread/task_group.cpp:325 \r\n# KeyTable* kt = tls_bls.keytable;\r\n     a9e:\t66 48 8d 3d 00 00 00 \tdata16 lea 0x0(%rip),%rdi        # aa6 <bthread::TaskGroup::task_runner(long)+0x196>\r\n     aa5:\t00\r\n     aa6:\t66 66 48 e8 00 00 00 \tdata16 data16 callq aae <bthread::TaskGroup::task_runner(long)+0x19e>\r\n     aad:\t00\r\n     aae:\t48 8b 30             \tmov    (%rax),%rsi\r\nthird_party/brpc-0.9.6/src/bthread/task_group.cpp:326\r\n     ab1:\t48 85 f6             \ttest   %rsi,%rsi\r\n     ab4:\t74 28                \tje     ade <bthread::TaskGroup::task_runner(long)+0x1ce>\r\n...\r\nthird_party/brpc-0.9.6/src/bthread/task_group.cpp:329\r\n# tls_bls.keytable = NULL;\r\n     abf:\t66 48 8d 3d 00 00 00 \tdata16 lea 0x0(%rip),%rdi        # ac7 <bthread::TaskGroup::task_runner(long)+0x1b7>\r\n     ac6:\t00\r\n     ac7:\t66 66 48 e8 00 00 00 \tdata16 data16 callq acf <bthread::TaskGroup::task_runner(long)+0x1bf>\r\n     ace:\t00\r\n     acf:\t48 c7 00 00 00 00 00 \tmovq   $0x0,(%rax)\r\n```\r\nclang16\r\n\r\n```as\r\n;third_party/brpc-0.9.6/src/bthread/task_group.cpp:265\r\n     838:\t48 8b 40 30          \tmov    0x30(%rax),%rax\r\n     83c:\t48 85 c0             \ttest   %rax,%rax\r\n     83f:\t75 df                \tjne    820 <bthread::TaskGroup::task_runner(long)+0x30>\r\n     841:\t4c 89 65 d0          \tmov    %r12,-0x30(%rbp)\r\n     845:\t66 48 8d 3d 00 00 00 \tdata16 lea 0x0(%rip),%rdi        # 84d <bthread::TaskGroup::task_runner(long)+0x5d>\r\n     84c:\t00\r\n     84d:\t66 66 48 e8 00 00 00 \tdata16 data16 callq 855 <bthread::TaskGroup::task_runner(long)+0x65>\r\n     854:\t00\r\n     855:\t48 89 c3             \tmov    %rax,%rbx  # do 循环外保存 tls_bls 的地址到rbx\r\n...\r\n;third_party/brpc-0.9.6/src/bthread/task_group.cpp:325\r\n# KeyTable* kt = tls_bls.keytable;\r\n     96e:\t48 8b 33             \tmov    (%rbx),%rsi\r\n;third_party/brpc-0.9.6/src/bthread/task_group.cpp:326\r\n     971:\t48 85 f6             \ttest   %rsi,%rsi\r\n     974:\t74 18                \tje     98e <bthread::TaskGroup::task_runner(long)+0x19e>\r\n...\r\n;third_party/brpc-0.9.6/src/bthread/task_group.cpp:329\r\n# tls_bls.keytable = NULL;\r\n     97f:\t48 c7 03 00 00 00 00 \tmovq   $0x0,(%rbx)\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976430923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976553107","html_url":"https://github.com/apache/brpc/issues/1392#issuecomment-1976553107","issue_url":"https://api.github.com/repos/apache/brpc/issues/1392","id":1976553107,"node_id":"IC_kwDOBhmkcs51z86T","user":{"login":"1797818494","id":92515062,"node_id":"U_kgDOBYOq9g","avatar_url":"https://avatars.githubusercontent.com/u/92515062?v=4","gravatar_id":"","url":"https://api.github.com/users/1797818494","html_url":"https://github.com/1797818494","followers_url":"https://api.github.com/users/1797818494/followers","following_url":"https://api.github.com/users/1797818494/following{/other_user}","gists_url":"https://api.github.com/users/1797818494/gists{/gist_id}","starred_url":"https://api.github.com/users/1797818494/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1797818494/subscriptions","organizations_url":"https://api.github.com/users/1797818494/orgs","repos_url":"https://api.github.com/users/1797818494/repos","events_url":"https://api.github.com/users/1797818494/events{/privacy}","received_events_url":"https://api.github.com/users/1797818494/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-04T13:12:16Z","updated_at":"2024-03-04T13:12:16Z","author_association":"NONE","body":"同样的问题，有解决的吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976553107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976555306","html_url":"https://github.com/apache/brpc/issues/1392#issuecomment-1976555306","issue_url":"https://api.github.com/repos/apache/brpc/issues/1392","id":1976555306,"node_id":"IC_kwDOBhmkcs51z9cq","user":{"login":"1797818494","id":92515062,"node_id":"U_kgDOBYOq9g","avatar_url":"https://avatars.githubusercontent.com/u/92515062?v=4","gravatar_id":"","url":"https://api.github.com/users/1797818494","html_url":"https://github.com/1797818494","followers_url":"https://api.github.com/users/1797818494/followers","following_url":"https://api.github.com/users/1797818494/following{/other_user}","gists_url":"https://api.github.com/users/1797818494/gists{/gist_id}","starred_url":"https://api.github.com/users/1797818494/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1797818494/subscriptions","organizations_url":"https://api.github.com/users/1797818494/orgs","repos_url":"https://api.github.com/users/1797818494/repos","events_url":"https://api.github.com/users/1797818494/events{/privacy}","received_events_url":"https://api.github.com/users/1797818494/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-04T13:13:30Z","updated_at":"2024-03-04T13:13:30Z","author_association":"NONE","body":"\r\n![image](https://github.com/apache/brpc/assets/92515062/a3c99e0e-e540-46f7-961b-66ed2768d871)\r\n![image](https://github.com/apache/brpc/assets/92515062/2d2667de-532f-47f3-8bae-8256b71ab625)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976555306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976865640","html_url":"https://github.com/apache/brpc/issues/2381#issuecomment-1976865640","issue_url":"https://api.github.com/repos/apache/brpc/issues/2381","id":1976865640,"node_id":"IC_kwDOBhmkcs511JNo","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-04T15:38:13Z","updated_at":"2024-03-04T15:40:08Z","author_association":"CONTRIBUTOR","body":"@yanglimingcn 有空看看，提了个PR支持这个feature #2560 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976865640/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976919647","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-1976919647","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":1976919647,"node_id":"IC_kwDOBhmkcs511WZf","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-04T16:02:13Z","updated_at":"2024-03-04T16:02:13Z","author_association":"MEMBER","body":"未进行生产环境验证，需谨慎使用。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1976919647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1977903132","html_url":"https://github.com/apache/brpc/issues/1392#issuecomment-1977903132","issue_url":"https://api.github.com/repos/apache/brpc/issues/1392","id":1977903132,"node_id":"IC_kwDOBhmkcs515Ggc","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-05T03:27:17Z","updated_at":"2024-03-05T03:27:17Z","author_association":"CONTRIBUTOR","body":"@1797818494 一般这种undefined reference的问题，首先利用 gcc -print-search-dirs 或者 ld --verbose | grep SEARCH_DIR 找到系统里寻找 so 的路径，还有上面编译命令里指定的 -L 后面的路径，从这里路径里找到 libprotobuf.so 这个文件，然后利用 objdump/nm 命令确认它们是否包含了上面提到的符号（google::protobuf::internal::AssignDescriptors)。如果没有，那么大概率是protobuf版本不对，如果有多个libprotobuf.so，那么就是装了多个版本的protobuf，并且链接错了，这个时候可以卸载掉错误版本，或者使用LD_LIBRARY_PATH等手段提升正确版本的优先级。测试protofbuf.so是否正确的时候，可以把编译命令复制下来，使用/absolutely/path/of/protobuf.so 替换 -lprotobuf。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1977903132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1978029444","html_url":"https://github.com/apache/brpc/issues/2561#issuecomment-1978029444","issue_url":"https://api.github.com/repos/apache/brpc/issues/2561","id":1978029444,"node_id":"IC_kwDOBhmkcs515lWE","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-05T06:06:48Z","updated_at":"2024-03-05T06:06:48Z","author_association":"CONTRIBUTOR","body":"欢迎提PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1978029444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980342491","html_url":"https://github.com/apache/brpc/issues/2552#issuecomment-1980342491","issue_url":"https://api.github.com/repos/apache/brpc/issues/2552","id":1980342491,"node_id":"IC_kwDOBhmkcs52CaDb","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T08:37:45Z","updated_at":"2024-03-06T08:37:45Z","author_association":"CONTRIBUTOR","body":"有设置FLAGS_usercode_in_pthread这个gflag吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980342491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980344874","html_url":"https://github.com/apache/brpc/issues/2549#issuecomment-1980344874","issue_url":"https://api.github.com/repos/apache/brpc/issues/2549","id":1980344874,"node_id":"IC_kwDOBhmkcs52Caoq","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T08:39:13Z","updated_at":"2024-03-06T08:39:13Z","author_association":"CONTRIBUTOR","body":"应该是FLAGS_usercode_in_pthread这个gflag设置吧。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980344874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980346149","html_url":"https://github.com/apache/brpc/issues/2549#issuecomment-1980346149","issue_url":"https://api.github.com/repos/apache/brpc/issues/2549","id":1980346149,"node_id":"IC_kwDOBhmkcs52Ca8l","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T08:39:58Z","updated_at":"2024-03-06T08:39:58Z","author_association":"CONTRIBUTOR","body":"done->Run()不会等。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980346149/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980347417","html_url":"https://github.com/apache/brpc/issues/2555#issuecomment-1980347417","issue_url":"https://api.github.com/repos/apache/brpc/issues/2555","id":1980347417,"node_id":"IC_kwDOBhmkcs52CbQZ","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T08:40:46Z","updated_at":"2024-03-06T08:40:46Z","author_association":"CONTRIBUTOR","body":"有验证过性能收益吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980347417/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980400083","html_url":"https://github.com/apache/brpc/issues/2552#issuecomment-1980400083","issue_url":"https://api.github.com/repos/apache/brpc/issues/2552","id":1980400083,"node_id":"IC_kwDOBhmkcs52CoHT","user":{"login":"yyweii","id":598529,"node_id":"MDQ6VXNlcjU5ODUyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/598529?v=4","gravatar_id":"","url":"https://api.github.com/users/yyweii","html_url":"https://github.com/yyweii","followers_url":"https://api.github.com/users/yyweii/followers","following_url":"https://api.github.com/users/yyweii/following{/other_user}","gists_url":"https://api.github.com/users/yyweii/gists{/gist_id}","starred_url":"https://api.github.com/users/yyweii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyweii/subscriptions","organizations_url":"https://api.github.com/users/yyweii/orgs","repos_url":"https://api.github.com/users/yyweii/repos","events_url":"https://api.github.com/users/yyweii/events{/privacy}","received_events_url":"https://api.github.com/users/yyweii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T09:07:56Z","updated_at":"2024-03-06T09:07:56Z","author_association":"CONTRIBUTOR","body":"> 有设置FLAGS_usercode_in_pthread这个gflag吗？\r\n\r\n没有设置过","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980400083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980660439","html_url":"https://github.com/apache/brpc/issues/1776#issuecomment-1980660439","issue_url":"https://api.github.com/repos/apache/brpc/issues/1776","id":1980660439,"node_id":"IC_kwDOBhmkcs52DnrX","user":{"login":"zcfh","id":70124382,"node_id":"MDQ6VXNlcjcwMTI0Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/70124382?v=4","gravatar_id":"","url":"https://api.github.com/users/zcfh","html_url":"https://github.com/zcfh","followers_url":"https://api.github.com/users/zcfh/followers","following_url":"https://api.github.com/users/zcfh/following{/other_user}","gists_url":"https://api.github.com/users/zcfh/gists{/gist_id}","starred_url":"https://api.github.com/users/zcfh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcfh/subscriptions","organizations_url":"https://api.github.com/users/zcfh/orgs","repos_url":"https://api.github.com/users/zcfh/repos","events_url":"https://api.github.com/users/zcfh/events{/privacy}","received_events_url":"https://api.github.com/users/zcfh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T11:26:23Z","updated_at":"2024-03-06T11:26:23Z","author_association":"NONE","body":"Has this issue been resolved so far? I see that the relevant patch has not been merged yet, and the issue is still open.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1980660439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1981301525","html_url":"https://github.com/apache/brpc/issues/2552#issuecomment-1981301525","issue_url":"https://api.github.com/repos/apache/brpc/issues/2552","id":1981301525,"node_id":"IC_kwDOBhmkcs52GEMV","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T16:39:37Z","updated_at":"2024-03-06T16:41:01Z","author_association":"CONTRIBUTOR","body":"有用BTHREAD_ATTR_PTHREAD启动bthread吗？\r\n\r\n默认情况下，CallMethod是跑在bthread上的，不会阻塞worker pthread。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1981301525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1981836072","html_url":"https://github.com/apache/brpc/issues/2555#issuecomment-1981836072","issue_url":"https://api.github.com/repos/apache/brpc/issues/2555","id":1981836072,"node_id":"IC_kwDOBhmkcs52IGso","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T21:39:24Z","updated_at":"2024-03-07T03:47:56Z","author_association":"MEMBER","body":"> 有验证过性能收益吗？\r\n\r\n在我们的5MB数据chunk传输场景下性能至少提升了15%，我们需要把接收端iobuf的数据去掉metadata后拷贝进一个提前预留好的连续的buffer里。改大blocksize后主要是copy_to这块显著加速了，这周我会再测一下具体数字。\r\n\r\n可能和这个issue有点类似，https://github.com/apache/brpc/issues/2120 只不过我们的场景下数据大小基本固定是5mb，所以不需要根据不同协议从收到的iobuf里面读数据长度出来。只需要一个自定义block_size大小的功能就行了。\r\n> 可以考虑给iobuf加个reserve_continuous_buffer(int size)方法，然后由协议来控制预留buffer的大小\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1981836072/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1982154753","html_url":"https://github.com/apache/brpc/issues/2552#issuecomment-1982154753","issue_url":"https://api.github.com/repos/apache/brpc/issues/2552","id":1982154753,"node_id":"IC_kwDOBhmkcs52JUgB","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T01:08:11Z","updated_at":"2024-03-07T01:08:23Z","author_association":"CONTRIBUTOR","body":"既然一直有chan connection创建，可以先尝试确认下这个chan connection是往哪里连的，是不是同一个ip，然后dgb抓出来的两处堆栈，可以想办法trace下每次的锁占用时间。看看是不是有一个地方锁被占用没释放导致的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1982154753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1982298831","html_url":"https://github.com/apache/brpc/issues/2555#issuecomment-1982298831","issue_url":"https://api.github.com/repos/apache/brpc/issues/2555","id":1982298831,"node_id":"IC_kwDOBhmkcs52J3rP","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T03:49:01Z","updated_at":"2024-03-07T03:49:01Z","author_association":"MEMBER","body":"这些性能上的测试结果我会过段时间整理好后推到brpc上游的文档里。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1982298831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983043315","html_url":"https://github.com/apache/brpc/pull/2358#issuecomment-1983043315","issue_url":"https://api.github.com/repos/apache/brpc/issues/2358","id":1983043315,"node_id":"IC_kwDOBhmkcs52Mtbz","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T09:09:31Z","updated_at":"2024-03-07T09:09:31Z","author_association":"CONTRIBUTOR","body":"> > 技术上是能实现的，但是做起来也有些复杂，同步的代码确实更好一些，否则execq里面就得调用callback了吧？\r\n> \r\n> 确实还是有同步代码的需求。有些场景如果用callback，就会使callback里的逻辑很重，虽然技术上是可以的，但是代码看起来就很难看了。\r\n\r\nhttps://github.com/apache/brpc/pull/2551","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983043315/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983124012","html_url":"https://github.com/apache/brpc/pull/2551#issuecomment-1983124012","issue_url":"https://api.github.com/repos/apache/brpc/issues/2551","id":1983124012,"node_id":"IC_kwDOBhmkcs52NBIs","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T09:46:53Z","updated_at":"2024-03-07T09:46:53Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 辛苦有时间review这个PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983124012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983377494","html_url":"https://github.com/apache/brpc/issues/2120#issuecomment-1983377494","issue_url":"https://api.github.com/repos/apache/brpc/issues/2120","id":1983377494,"node_id":"IC_kwDOBhmkcs52N_BW","user":{"login":"wanghenshui","id":8872493,"node_id":"MDQ6VXNlcjg4NzI0OTM=","avatar_url":"https://avatars.githubusercontent.com/u/8872493?v=4","gravatar_id":"","url":"https://api.github.com/users/wanghenshui","html_url":"https://github.com/wanghenshui","followers_url":"https://api.github.com/users/wanghenshui/followers","following_url":"https://api.github.com/users/wanghenshui/following{/other_user}","gists_url":"https://api.github.com/users/wanghenshui/gists{/gist_id}","starred_url":"https://api.github.com/users/wanghenshui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wanghenshui/subscriptions","organizations_url":"https://api.github.com/users/wanghenshui/orgs","repos_url":"https://api.github.com/users/wanghenshui/repos","events_url":"https://api.github.com/users/wanghenshui/events{/privacy}","received_events_url":"https://api.github.com/users/wanghenshui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-07T12:09:23Z","updated_at":"2024-03-07T12:09:23Z","author_association":"NONE","body":"mark","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1983377494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1984982553","html_url":"https://github.com/apache/brpc/issues/2555#issuecomment-1984982553","issue_url":"https://api.github.com/repos/apache/brpc/issues/2555","id":1984982553,"node_id":"IC_kwDOBhmkcs52UG4Z","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-08T03:32:49Z","updated_at":"2024-03-08T03:32:49Z","author_association":"CONTRIBUTOR","body":"这个会有PR吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1984982553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985019741","html_url":"https://github.com/apache/brpc/issues/2555#issuecomment-1985019741","issue_url":"https://api.github.com/repos/apache/brpc/issues/2555","id":1985019741,"node_id":"IC_kwDOBhmkcs52UP9d","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-08T04:27:15Z","updated_at":"2024-03-08T04:32:00Z","author_association":"MEMBER","body":"> 这个会有PR吗\r\n\r\n@yanglimingcn 两周内我会推pr，我还在验证下这样做会不会在什么场景下有副作用，我们这个还和streaming rpc + rdma一起用的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985019741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985569712","html_url":"https://github.com/apache/brpc/pull/2558#issuecomment-1985569712","issue_url":"https://api.github.com/repos/apache/brpc/issues/2558","id":1985569712,"node_id":"IC_kwDOBhmkcs52WWOw","user":{"login":"MJY-HUST","id":52315061,"node_id":"MDQ6VXNlcjUyMzE1MDYx","avatar_url":"https://avatars.githubusercontent.com/u/52315061?v=4","gravatar_id":"","url":"https://api.github.com/users/MJY-HUST","html_url":"https://github.com/MJY-HUST","followers_url":"https://api.github.com/users/MJY-HUST/followers","following_url":"https://api.github.com/users/MJY-HUST/following{/other_user}","gists_url":"https://api.github.com/users/MJY-HUST/gists{/gist_id}","starred_url":"https://api.github.com/users/MJY-HUST/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MJY-HUST/subscriptions","organizations_url":"https://api.github.com/users/MJY-HUST/orgs","repos_url":"https://api.github.com/users/MJY-HUST/repos","events_url":"https://api.github.com/users/MJY-HUST/events{/privacy}","received_events_url":"https://api.github.com/users/MJY-HUST/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-08T11:58:37Z","updated_at":"2024-03-08T11:58:37Z","author_association":"CONTRIBUTOR","body":"@chenBright 加上了UT和注释","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985569712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985937413","html_url":"https://github.com/apache/brpc/issues/2564#issuecomment-1985937413","issue_url":"https://api.github.com/repos/apache/brpc/issues/2564","id":1985937413,"node_id":"IC_kwDOBhmkcs52XwAF","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-08T15:52:20Z","updated_at":"2024-03-08T15:52:20Z","author_association":"MEMBER","body":"顺便 RDMA 可以在没有硬件的情况下使用，software rdma 可以作为测试环境或者无法获得硬件的情况下使用brpc rdma","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1985937413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987511258","html_url":"https://github.com/apache/brpc/issues/2548#issuecomment-1987511258","issue_url":"https://api.github.com/repos/apache/brpc/issues/2548","id":1987511258,"node_id":"IC_kwDOBhmkcs52dwPa","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:19:19Z","updated_at":"2024-03-11T02:19:19Z","author_association":"CONTRIBUTOR","body":"> 更具体来说，是`HttpResponseSenderAsDone::Run()`的调用。\r\n\r\n这个里面不会有阻塞等待bthread的操作","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987511258/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987512193","html_url":"https://github.com/apache/brpc/pull/2550#issuecomment-1987512193","issue_url":"https://api.github.com/repos/apache/brpc/issues/2550","id":1987512193,"node_id":"IC_kwDOBhmkcs52dweB","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:20:41Z","updated_at":"2024-03-11T02:20:41Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987512193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987515838","html_url":"https://github.com/apache/brpc/pull/2556#issuecomment-1987515838","issue_url":"https://api.github.com/repos/apache/brpc/issues/2556","id":1987515838,"node_id":"IC_kwDOBhmkcs52dxW-","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:26:15Z","updated_at":"2024-03-11T02:26:15Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987515838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987517585","html_url":"https://github.com/apache/brpc/pull/2557#issuecomment-1987517585","issue_url":"https://api.github.com/repos/apache/brpc/issues/2557","id":1987517585,"node_id":"IC_kwDOBhmkcs52dxyR","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:28:54Z","updated_at":"2024-03-11T02:28:54Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987517585/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987525766","html_url":"https://github.com/apache/brpc/issues/1776#issuecomment-1987525766","issue_url":"https://api.github.com/repos/apache/brpc/issues/1776","id":1987525766,"node_id":"IC_kwDOBhmkcs52dzyG","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:40:29Z","updated_at":"2024-03-11T02:40:29Z","author_association":"CONTRIBUTOR","body":"This bug has been fixed in #2558 .","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987525766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987525907","html_url":"https://github.com/apache/brpc/pull/1777#issuecomment-1987525907","issue_url":"https://api.github.com/repos/apache/brpc/issues/1777","id":1987525907,"node_id":"IC_kwDOBhmkcs52dz0T","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:40:42Z","updated_at":"2024-03-11T02:40:42Z","author_association":"CONTRIBUTOR","body":"This bug has been fixed in #2558 .","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987525907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987527067","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-1987527067","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":1987527067,"node_id":"IC_kwDOBhmkcs52d0Gb","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:42:14Z","updated_at":"2024-03-11T02:42:14Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987527067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987532489","html_url":"https://github.com/apache/brpc/pull/2562#issuecomment-1987532489","issue_url":"https://api.github.com/repos/apache/brpc/issues/2562","id":1987532489,"node_id":"IC_kwDOBhmkcs52d1bJ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:49:44Z","updated_at":"2024-03-11T02:49:44Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987532489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987537343","html_url":"https://github.com/apache/brpc/pull/2551#issuecomment-1987537343","issue_url":"https://api.github.com/repos/apache/brpc/issues/2551","id":1987537343,"node_id":"IC_kwDOBhmkcs52d2m_","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-11T02:56:46Z","updated_at":"2024-03-11T02:56:46Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1987537343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1989844093","html_url":"https://github.com/apache/brpc/pull/2556#issuecomment-1989844093","issue_url":"https://api.github.com/repos/apache/brpc/issues/2556","id":1989844093,"node_id":"IC_kwDOBhmkcs52mpx9","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-12T02:23:08Z","updated_at":"2024-03-12T02:23:08Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1989844093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1989867995","html_url":"https://github.com/apache/brpc/pull/2547#issuecomment-1989867995","issue_url":"https://api.github.com/repos/apache/brpc/issues/2547","id":1989867995,"node_id":"IC_kwDOBhmkcs52mvnb","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-12T02:32:30Z","updated_at":"2024-03-12T02:32:30Z","author_association":"CONTRIBUTOR","body":"@wwbmmm 有空看看这个PR","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1989867995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1990745834","html_url":"https://github.com/apache/brpc/issues/167#issuecomment-1990745834","issue_url":"https://api.github.com/repos/apache/brpc/issues/167","id":1990745834,"node_id":"IC_kwDOBhmkcs52qF7q","user":{"login":"sherlock-wong","id":35927727,"node_id":"MDQ6VXNlcjM1OTI3NzI3","avatar_url":"https://avatars.githubusercontent.com/u/35927727?v=4","gravatar_id":"","url":"https://api.github.com/users/sherlock-wong","html_url":"https://github.com/sherlock-wong","followers_url":"https://api.github.com/users/sherlock-wong/followers","following_url":"https://api.github.com/users/sherlock-wong/following{/other_user}","gists_url":"https://api.github.com/users/sherlock-wong/gists{/gist_id}","starred_url":"https://api.github.com/users/sherlock-wong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sherlock-wong/subscriptions","organizations_url":"https://api.github.com/users/sherlock-wong/orgs","repos_url":"https://api.github.com/users/sherlock-wong/repos","events_url":"https://api.github.com/users/sherlock-wong/events{/privacy}","received_events_url":"https://api.github.com/users/sherlock-wong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-12T06:06:47Z","updated_at":"2024-03-12T06:06:47Z","author_association":"NONE","body":"it dosen't work!!!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1990745834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1992555200","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-1992555200","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":1992555200,"node_id":"IC_kwDOBhmkcs52w_rA","user":{"login":"Superskyyy","id":26076517,"node_id":"MDQ6VXNlcjI2MDc2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/26076517?v=4","gravatar_id":"","url":"https://api.github.com/users/Superskyyy","html_url":"https://github.com/Superskyyy","followers_url":"https://api.github.com/users/Superskyyy/followers","following_url":"https://api.github.com/users/Superskyyy/following{/other_user}","gists_url":"https://api.github.com/users/Superskyyy/gists{/gist_id}","starred_url":"https://api.github.com/users/Superskyyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Superskyyy/subscriptions","organizations_url":"https://api.github.com/users/Superskyyy/orgs","repos_url":"https://api.github.com/users/Superskyyy/repos","events_url":"https://api.github.com/users/Superskyyy/events{/privacy}","received_events_url":"https://api.github.com/users/Superskyyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-12T20:52:15Z","updated_at":"2024-03-12T20:52:15Z","author_association":"MEMBER","body":"请 merge一下 我这里可以验证是不是ok 谢谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1992555200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1993252450","html_url":"https://github.com/apache/brpc/issues/2409#issuecomment-1993252450","issue_url":"https://api.github.com/repos/apache/brpc/issues/2409","id":1993252450,"node_id":"IC_kwDOBhmkcs52zp5i","user":{"login":"Ryan-Git","id":5906907,"node_id":"MDQ6VXNlcjU5MDY5MDc=","avatar_url":"https://avatars.githubusercontent.com/u/5906907?v=4","gravatar_id":"","url":"https://api.github.com/users/Ryan-Git","html_url":"https://github.com/Ryan-Git","followers_url":"https://api.github.com/users/Ryan-Git/followers","following_url":"https://api.github.com/users/Ryan-Git/following{/other_user}","gists_url":"https://api.github.com/users/Ryan-Git/gists{/gist_id}","starred_url":"https://api.github.com/users/Ryan-Git/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ryan-Git/subscriptions","organizations_url":"https://api.github.com/users/Ryan-Git/orgs","repos_url":"https://api.github.com/users/Ryan-Git/repos","events_url":"https://api.github.com/users/Ryan-Git/events{/privacy}","received_events_url":"https://api.github.com/users/Ryan-Git/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T03:00:17Z","updated_at":"2024-03-13T03:00:37Z","author_association":"NONE","body":"intel cpu 的话，linux 启动的时候会做跨 cpu 校准的，第三个基本不是问题。\r\n频率直接用 cpu 的确实可能略有差距，手边的机器大概是 2200.000 vs 2194.843\r\n可以参考 [dpdk](https://github.com/DPDK/dpdk/blob/a86f381b826660e88794754c41d3aec79ce9b87c/lib/eal/x86/rte_cycles.c#L107) 的做法读 cpuid。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1993252450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994383916","html_url":"https://github.com/apache/brpc/issues/2568#issuecomment-1994383916","issue_url":"https://api.github.com/repos/apache/brpc/issues/2568","id":1994383916,"node_id":"IC_kwDOBhmkcs523-Is","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T13:16:07Z","updated_at":"2024-03-13T13:16:07Z","author_association":"MEMBER","body":"可以先试下 cmake3，稍后修复。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994383916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994392311","html_url":"https://github.com/apache/brpc/issues/2568#issuecomment-1994392311","issue_url":"https://api.github.com/repos/apache/brpc/issues/2568","id":1994392311,"node_id":"IC_kwDOBhmkcs524AL3","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T13:20:28Z","updated_at":"2024-03-13T13:20:28Z","author_association":"MEMBER","body":"@howz97 辛苦试下这个吧\r\n```patch\r\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\r\nindex 9df7f1ef..6af29dc6 100644\r\n--- a/CMakeLists.txt\r\n+++ b/CMakeLists.txt\r\n@@ -154,7 +154,7 @@ if(CMAKE_CXX_COMPILER_ID STREQUAL \"GNU\")\r\n endif()\r\n\r\n find_package(Protobuf REQUIRED)\r\n-if(Protobuf_VERSION GREATER_EQUAL 4.22)\r\n+if(Protobuf_VERSION GREATER 4.21)\r\n     # required by absl\r\n     set(CMAKE_CXX_STANDARD 17)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994392311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994395143","html_url":"https://github.com/apache/brpc/issues/2568#issuecomment-1994395143","issue_url":"https://api.github.com/repos/apache/brpc/issues/2568","id":1994395143,"node_id":"IC_kwDOBhmkcs524A4H","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-13T13:22:00Z","updated_at":"2024-03-13T13:25:09Z","author_association":"MEMBER","body":"另外依赖 protobuf 3, centos 自带的 protobuf 2.5 在 1.8.0 下无法编译了\r\n\r\n#2493 以及 #2406 中引入了两个 protobuf 3 的语法","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1994395143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996259274","html_url":"https://github.com/apache/brpc/pull/2570#issuecomment-1996259274","issue_url":"https://api.github.com/repos/apache/brpc/issues/2570","id":1996259274,"node_id":"IC_kwDOBhmkcs52_H_K","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T02:05:20Z","updated_at":"2024-03-14T02:05:20Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996259274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996261044","html_url":"https://github.com/apache/brpc/pull/2569#issuecomment-1996261044","issue_url":"https://api.github.com/repos/apache/brpc/issues/2569","id":1996261044,"node_id":"IC_kwDOBhmkcs52_Ia0","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T02:07:35Z","updated_at":"2024-03-14T02:07:35Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996261044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996307179","html_url":"https://github.com/apache/brpc/issues/1776#issuecomment-1996307179","issue_url":"https://api.github.com/repos/apache/brpc/issues/1776","id":1996307179,"node_id":"IC_kwDOBhmkcs52_Trr","user":{"login":"zcfh","id":70124382,"node_id":"MDQ6VXNlcjcwMTI0Mzgy","avatar_url":"https://avatars.githubusercontent.com/u/70124382?v=4","gravatar_id":"","url":"https://api.github.com/users/zcfh","html_url":"https://github.com/zcfh","followers_url":"https://api.github.com/users/zcfh/followers","following_url":"https://api.github.com/users/zcfh/following{/other_user}","gists_url":"https://api.github.com/users/zcfh/gists{/gist_id}","starred_url":"https://api.github.com/users/zcfh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zcfh/subscriptions","organizations_url":"https://api.github.com/users/zcfh/orgs","repos_url":"https://api.github.com/users/zcfh/repos","events_url":"https://api.github.com/users/zcfh/events{/privacy}","received_events_url":"https://api.github.com/users/zcfh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T03:06:06Z","updated_at":"2024-03-14T03:06:06Z","author_association":"NONE","body":"问题2，关于 tls_bls 被缓存在寄存器上的问题，看起来还没解决吧？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996307179/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996604805","html_url":"https://github.com/apache/brpc/issues/2568#issuecomment-1996604805","issue_url":"https://api.github.com/repos/apache/brpc/issues/2568","id":1996604805,"node_id":"IC_kwDOBhmkcs53AcWF","user":{"login":"howz97","id":33745049,"node_id":"MDQ6VXNlcjMzNzQ1MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/33745049?v=4","gravatar_id":"","url":"https://api.github.com/users/howz97","html_url":"https://github.com/howz97","followers_url":"https://api.github.com/users/howz97/followers","following_url":"https://api.github.com/users/howz97/following{/other_user}","gists_url":"https://api.github.com/users/howz97/gists{/gist_id}","starred_url":"https://api.github.com/users/howz97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howz97/subscriptions","organizations_url":"https://api.github.com/users/howz97/orgs","repos_url":"https://api.github.com/users/howz97/repos","events_url":"https://api.github.com/users/howz97/events{/privacy}","received_events_url":"https://api.github.com/users/howz97/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T06:19:37Z","updated_at":"2024-03-14T06:19:37Z","author_association":"NONE","body":"感谢回复。\r\n\r\n除了 cmake3 , protobuf3 ,还要升级到gcc8，brpc就编译过了。\r\n\r\n编译example/redis_c++ 时 还需要 `yum install readline-devel` 。然后把代码``google::ParseCommandLineFlags``改成`gflags::ParseCommandLineFlags`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996604805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996780032","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-1996780032","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":1996780032,"node_id":"IC_kwDOBhmkcs53BHIA","user":{"login":"dingxiaoshuai123","id":56024577,"node_id":"MDQ6VXNlcjU2MDI0NTc3","avatar_url":"https://avatars.githubusercontent.com/u/56024577?v=4","gravatar_id":"","url":"https://api.github.com/users/dingxiaoshuai123","html_url":"https://github.com/dingxiaoshuai123","followers_url":"https://api.github.com/users/dingxiaoshuai123/followers","following_url":"https://api.github.com/users/dingxiaoshuai123/following{/other_user}","gists_url":"https://api.github.com/users/dingxiaoshuai123/gists{/gist_id}","starred_url":"https://api.github.com/users/dingxiaoshuai123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dingxiaoshuai123/subscriptions","organizations_url":"https://api.github.com/users/dingxiaoshuai123/orgs","repos_url":"https://api.github.com/users/dingxiaoshuai123/repos","events_url":"https://api.github.com/users/dingxiaoshuai123/events{/privacy}","received_events_url":"https://api.github.com/users/dingxiaoshuai123/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T08:04:08Z","updated_at":"2024-03-14T08:04:08Z","author_association":"NONE","body":"> > > > master 已修复\r\n> > > \r\n> > > \r\n> > > Hi @wwbmmm ，我看了下master的提交记录，好像是给g++添加了`-fno-gcse`的编译选项来修复这个问题，请问，如果用clang编译器编译brpc的话，得怎么处理呢？\r\n> > \r\n> > \r\n> > 目前还不太清楚clang中有没有对应选项\r\n> \r\n> Mac M1 下确实还会遇到这个问题，目前似乎没有找到对应的选项来解决这个问题。 stackoverflow 上问了下类似的情况：[https://stackoverflow.com/questions/75592038/how-to-disable-clang-expression-elimination-for-thread-local-variable/75622732#75622732。](https://stackoverflow.com/questions/75592038/how-to-disable-clang-expression-elimination-for-thread-local-variable/75622732#75622732%E3%80%82)\r\n> \r\n> 建议是说给获取 tls 的变量加上 noinline 的函数防止优化，但是可能存在函数调用开销。 参考 qemu 的做法：https://github.com/qemu/qemu/blob/d7e2fe4aac8b74bbfe82b2309536528b4dbe0d34/include/qemu/coroutine-tls.h#L141-L163\r\n> \r\n> 是否可以在 clang && mac 的情况下走这个解决方法，避免错误的产生？\r\n\r\n您好，请问在 clang && mac 的情况下解决了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996780032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996780938","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-1996780938","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":1996780938,"node_id":"IC_kwDOBhmkcs53BHWK","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T08:04:47Z","updated_at":"2024-03-18T01:54:09Z","author_association":"NONE","body":"您好，邮件已收到...","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1996780938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1997088589","html_url":"https://github.com/apache/brpc/issues/2573#issuecomment-1997088589","issue_url":"https://api.github.com/repos/apache/brpc/issues/2573","id":1997088589,"node_id":"IC_kwDOBhmkcs53CSdN","user":{"login":"howz97","id":33745049,"node_id":"MDQ6VXNlcjMzNzQ1MDQ5","avatar_url":"https://avatars.githubusercontent.com/u/33745049?v=4","gravatar_id":"","url":"https://api.github.com/users/howz97","html_url":"https://github.com/howz97","followers_url":"https://api.github.com/users/howz97/followers","following_url":"https://api.github.com/users/howz97/following{/other_user}","gists_url":"https://api.github.com/users/howz97/gists{/gist_id}","starred_url":"https://api.github.com/users/howz97/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howz97/subscriptions","organizations_url":"https://api.github.com/users/howz97/orgs","repos_url":"https://api.github.com/users/howz97/repos","events_url":"https://api.github.com/users/howz97/events{/privacy}","received_events_url":"https://api.github.com/users/howz97/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-14T10:10:03Z","updated_at":"2024-03-14T10:10:03Z","author_association":"NONE","body":"\r\n[bench.zip](https://github.com/apache/brpc/files/14600594/bench.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1997088589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002774169","html_url":"https://github.com/apache/brpc/pull/2567#issuecomment-2002774169","issue_url":"https://api.github.com/repos/apache/brpc/issues/2567","id":2002774169,"node_id":"IC_kwDOBhmkcs53X-iZ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T02:42:22Z","updated_at":"2024-03-18T02:42:22Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002774169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002775718","html_url":"https://github.com/apache/brpc/pull/2565#issuecomment-2002775718","issue_url":"https://api.github.com/repos/apache/brpc/issues/2565","id":2002775718,"node_id":"IC_kwDOBhmkcs53X-6m","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T02:44:28Z","updated_at":"2024-03-18T02:44:28Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002775718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002777327","html_url":"https://github.com/apache/brpc/pull/2497#issuecomment-2002777327","issue_url":"https://api.github.com/repos/apache/brpc/issues/2497","id":2002777327,"node_id":"IC_kwDOBhmkcs53X_Tv","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T02:46:54Z","updated_at":"2024-03-18T02:46:54Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2002777327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003265889","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2003265889","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2003265889,"node_id":"IC_kwDOBhmkcs53Z2lh","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T09:08:17Z","updated_at":"2024-03-18T09:08:31Z","author_association":"CONTRIBUTOR","body":"多次通过调用SetHeader(\"Set-Cookie\", \"xxx\")来设置cookie吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003265889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003523529","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2003523529","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2003523529,"node_id":"IC_kwDOBhmkcs53a1fJ","user":{"login":"pirDOL","id":8159453,"node_id":"MDQ6VXNlcjgxNTk0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/8159453?v=4","gravatar_id":"","url":"https://api.github.com/users/pirDOL","html_url":"https://github.com/pirDOL","followers_url":"https://api.github.com/users/pirDOL/followers","following_url":"https://api.github.com/users/pirDOL/following{/other_user}","gists_url":"https://api.github.com/users/pirDOL/gists{/gist_id}","starred_url":"https://api.github.com/users/pirDOL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirDOL/subscriptions","organizations_url":"https://api.github.com/users/pirDOL/orgs","repos_url":"https://api.github.com/users/pirDOL/repos","events_url":"https://api.github.com/users/pirDOL/events{/privacy}","received_events_url":"https://api.github.com/users/pirDOL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T10:32:05Z","updated_at":"2024-03-18T10:33:48Z","author_association":"NONE","body":"@chenBright 根据HttpHeader接口来看，只有SetHeader和AppendHeader，两个接口都不能构造出http server返回响应报文中有多个set-cookie的场景，可以使用如下代码构造复现场景。\r\n使用brpc channel访问这个server获取响应后，通过controller.http_response获取set-cookie的值是`a=b;,c=d;`，这个不是一个合法的set-cookie格式\r\n```python\r\n#!/noah/bin/python\r\nimport socket\r\n\r\ndef handle_request(client_socket):\r\n    request = client_socket.recv(1024)\r\n    response = 'HTTP/1.1 200 OK\\r\\n'\r\n    response += 'Set-Cookie: a=b;\\r\\n'\r\n    response += 'Set-Cookie: c=d;\\r\\n'\r\n    response += 'Content-Type: text/plain\\r\\n'\r\n    response += 'Content-Length: 4\\r\\n'\r\n    response += '\\r\\n'\r\n    response += 'echo'\r\n\r\n    client_socket.sendall(response.encode())\r\n    client_socket.close()\r\n\r\ndef start_server(port):\r\n    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\r\n    server_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\r\n    server_socket.bind(('0.0.0.0', port))\r\n    server_socket.listen(5)\r\n    print('Server is listening on port {port}...')\r\n\r\n    while True:\r\n        client_socket, client_address = server_socket.accept()\r\n        print('Accepted connection from {client_address}')\r\n        handle_request(client_socket)\r\n\r\nif __name__ == '__main__':\r\n    PORT = 1024\r\n    start_server(PORT)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003523529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003527639","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-2003527639","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":2003527639,"node_id":"IC_kwDOBhmkcs53a2fX","user":{"login":"ketor","id":3497139,"node_id":"MDQ6VXNlcjM0OTcxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/3497139?v=4","gravatar_id":"","url":"https://api.github.com/users/ketor","html_url":"https://github.com/ketor","followers_url":"https://api.github.com/users/ketor/followers","following_url":"https://api.github.com/users/ketor/following{/other_user}","gists_url":"https://api.github.com/users/ketor/gists{/gist_id}","starred_url":"https://api.github.com/users/ketor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketor/subscriptions","organizations_url":"https://api.github.com/users/ketor/orgs","repos_url":"https://api.github.com/users/ketor/repos","events_url":"https://api.github.com/users/ketor/events{/privacy}","received_events_url":"https://api.github.com/users/ketor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T10:33:13Z","updated_at":"2024-03-18T10:33:13Z","author_association":"CONTRIBUTOR","body":"请问这个PR使用的protobuf的版本是多少呢？  \r\n\r\n用prototbuf 3.22.5版本验证，cmake编译会报错：\r\n/home/mengsz/git/other/brpc/src/json2pb/json_to_pb.cpp: In function ‘bool json2pb::JsonValueToProtoMessage(const butil::rapidjson::Value&, google::protobuf::Message*, const Json2PbOptions&, std::string*, bool)’:\r\n/home/mengsz/git/other/brpc/src/json2pb/json_to_pb.cpp:540:42: error: ‘const struct google::protobuf::Descriptor::ExtensionRange’ has no member named ‘start_number’\r\n  540 |         for (int tag_number = ext_range->start_number(); tag_number < ext_range->end_number(); ++tag_number)\r\n\r\n\r\n这个地方是不是代码里判断的值不对啊？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003527639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003754254","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-2003754254","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":2003754254,"node_id":"IC_kwDOBhmkcs53bt0O","user":{"login":"ketor","id":3497139,"node_id":"MDQ6VXNlcjM0OTcxMzk=","avatar_url":"https://avatars.githubusercontent.com/u/3497139?v=4","gravatar_id":"","url":"https://api.github.com/users/ketor","html_url":"https://github.com/ketor","followers_url":"https://api.github.com/users/ketor/followers","following_url":"https://api.github.com/users/ketor/following{/other_user}","gists_url":"https://api.github.com/users/ketor/gists{/gist_id}","starred_url":"https://api.github.com/users/ketor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ketor/subscriptions","organizations_url":"https://api.github.com/users/ketor/orgs","repos_url":"https://api.github.com/users/ketor/repos","events_url":"https://api.github.com/users/ketor/events{/privacy}","received_events_url":"https://api.github.com/users/ketor/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T12:14:23Z","updated_at":"2024-03-18T17:16:18Z","author_association":"CONTRIBUTOR","body":"`\r\n#if GOOGLE_PROTOBUF_VERSION < 4025000\r\n        for (int tag_number = ext_range->start; tag_number < ext_range->end; ++tag_number)\r\n#else\r\n        for (int tag_number = ext_range->start_number(); tag_number < ext_range->end_number(); ++tag_number)\r\n#endif\r\n`\r\n\r\n\r\n在Rocky 8.9的环境实际验证了一下，3.22-3.24版本这个地方都应该维持旧的处理方式，3.25版本开始才改为了start_number()。\r\n\r\n所以pb_to_json.cpp:78 和 json_to_pb.cpp:537 的判断都应该改成 GOOGLE_PROTOBUF_VERSION < 4025000 。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2003754254/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2004305249","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2004305249","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2004305249,"node_id":"IC_kwDOBhmkcs53d0Vh","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-18T15:54:56Z","updated_at":"2024-03-18T15:54:56Z","author_association":"CONTRIBUTOR","body":"[RFC-7230 Field Order](https://tools.ietf.org/html/rfc7230#section-3.2.2)\r\nIn practice, the \"Set-Cookie\" header field ([RFC6265]) often\r\nappears multiple times in a response message and does not use the\r\nlist syntax, violating the above requirements on multiple header\r\nfields with the same name. Since it cannot be combined into a\r\nsingle field-value, recipients ought to handle \"Set-Cookie\" as a\r\nspecial case while processing header fields. (See Appendix A.2.3\r\nof [Kri2001] for details.)\r\n\r\n[RFC-6265 Overview](https://tools.ietf.org/html/rfc6265#section-3)\r\nOrigin servers SHOULD NOT fold multiple Set-Cookie header fields into a single header field.\r\nThe usual mechanism for folding HTTP headers fields (i.e., as defined in [RFC2616]) might\r\nchange the semantics of the Set-Cookie header field because the %x2C (\",\") character is\r\nused by Set-Cookie in a way that conflicts with such folding.\r\n\r\n根据HTTP标准定义，不能将多个Set-Cookie合并到一个header。bRPC的处理方式有问题，需要针对Set-Cookie进行特殊处理。\r\n\r\n另外，多个Cookie之间不能使用`,`分隔，应该要用`;`分隔。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2004305249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2005696601","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2005696601","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2005696601,"node_id":"IC_kwDOBhmkcs53jIBZ","user":{"login":"pirDOL","id":8159453,"node_id":"MDQ6VXNlcjgxNTk0NTM=","avatar_url":"https://avatars.githubusercontent.com/u/8159453?v=4","gravatar_id":"","url":"https://api.github.com/users/pirDOL","html_url":"https://github.com/pirDOL","followers_url":"https://api.github.com/users/pirDOL/followers","following_url":"https://api.github.com/users/pirDOL/following{/other_user}","gists_url":"https://api.github.com/users/pirDOL/gists{/gist_id}","starred_url":"https://api.github.com/users/pirDOL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirDOL/subscriptions","organizations_url":"https://api.github.com/users/pirDOL/orgs","repos_url":"https://api.github.com/users/pirDOL/repos","events_url":"https://api.github.com/users/pirDOL/events{/privacy}","received_events_url":"https://api.github.com/users/pirDOL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T03:42:49Z","updated_at":"2024-03-19T03:43:29Z","author_association":"NONE","body":"@chenBright \r\n\r\n`;`是[Attributes](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes)分隔符，因此如果bRPC中需要特殊处理应使用其他符号\r\n\r\n> 另外，多个Cookie之间不能使用,分隔，应该要用;分隔。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2005696601/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2007043794","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2007043794","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2007043794,"node_id":"IC_kwDOBhmkcs53oQ7S","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T12:25:15Z","updated_at":"2024-03-19T12:25:15Z","author_association":"CONTRIBUTOR","body":"> @chenBright\r\n> \r\n> `;`是[Attributes](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie#attributes)分隔符，因此如果bRPC中需要特殊处理应使用其他符号\r\n> \r\n> > 另外，多个Cookie之间不能使用,分隔，应该要用;分隔。\r\n\r\n嗯嗯，我指的是cookie这个header。\r\n\r\nset-cookie这个header的话，HttpHeader不将其合并，每个set-cookie独立一项。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2007043794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2007066853","html_url":"https://github.com/apache/brpc/pull/2546#issuecomment-2007066853","issue_url":"https://api.github.com/repos/apache/brpc/issues/2546","id":2007066853,"node_id":"IC_kwDOBhmkcs53oWjl","user":{"login":"wasphin","id":1237906,"node_id":"MDQ6VXNlcjEyMzc5MDY=","avatar_url":"https://avatars.githubusercontent.com/u/1237906?v=4","gravatar_id":"","url":"https://api.github.com/users/wasphin","html_url":"https://github.com/wasphin","followers_url":"https://api.github.com/users/wasphin/followers","following_url":"https://api.github.com/users/wasphin/following{/other_user}","gists_url":"https://api.github.com/users/wasphin/gists{/gist_id}","starred_url":"https://api.github.com/users/wasphin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wasphin/subscriptions","organizations_url":"https://api.github.com/users/wasphin/orgs","repos_url":"https://api.github.com/users/wasphin/repos","events_url":"https://api.github.com/users/wasphin/events{/privacy}","received_events_url":"https://api.github.com/users/wasphin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-19T12:37:19Z","updated_at":"2024-03-19T12:37:19Z","author_association":"MEMBER","body":"https://github.com/protocolbuffers/protobuf/blob/v3.24.0/src/google/protobuf/descriptor.h#L469\r\n\r\n确实是 24 版本开始的 `start_number`, 当时改糊涂了\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2007066853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2009029395","html_url":"https://github.com/apache/brpc/issues/2575#issuecomment-2009029395","issue_url":"https://api.github.com/repos/apache/brpc/issues/2575","id":2009029395,"node_id":"IC_kwDOBhmkcs53v1sT","user":{"login":"chenBright","id":12249635,"node_id":"MDQ6VXNlcjEyMjQ5NjM1","avatar_url":"https://avatars.githubusercontent.com/u/12249635?v=4","gravatar_id":"","url":"https://api.github.com/users/chenBright","html_url":"https://github.com/chenBright","followers_url":"https://api.github.com/users/chenBright/followers","following_url":"https://api.github.com/users/chenBright/following{/other_user}","gists_url":"https://api.github.com/users/chenBright/gists{/gist_id}","starred_url":"https://api.github.com/users/chenBright/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenBright/subscriptions","organizations_url":"https://api.github.com/users/chenBright/orgs","repos_url":"https://api.github.com/users/chenBright/repos","events_url":"https://api.github.com/users/chenBright/events{/privacy}","received_events_url":"https://api.github.com/users/chenBright/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-20T08:33:53Z","updated_at":"2024-03-20T08:33:53Z","author_association":"CONTRIBUTOR","body":"@pirDOL 试试 #2577 能不能解决问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2009029395/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011259857","html_url":"https://github.com/apache/brpc/pull/2571#issuecomment-2011259857","issue_url":"https://api.github.com/repos/apache/brpc/issues/2571","id":2011259857,"node_id":"IC_kwDOBhmkcs534WPR","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T05:40:38Z","updated_at":"2024-03-21T05:40:38Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011259857/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011262495","html_url":"https://github.com/apache/brpc/pull/2547#issuecomment-2011262495","issue_url":"https://api.github.com/repos/apache/brpc/issues/2547","id":2011262495,"node_id":"IC_kwDOBhmkcs534W4f","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T05:43:15Z","updated_at":"2024-03-21T05:43:15Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011262495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011264087","html_url":"https://github.com/apache/brpc/pull/2574#issuecomment-2011264087","issue_url":"https://api.github.com/repos/apache/brpc/issues/2574","id":2011264087,"node_id":"IC_kwDOBhmkcs534XRX","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-21T05:45:06Z","updated_at":"2024-03-21T05:45:06Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2011264087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2014152387","html_url":"https://github.com/apache/brpc/issues/1597#issuecomment-2014152387","issue_url":"https://api.github.com/repos/apache/brpc/issues/1597","id":2014152387,"node_id":"IC_kwDOBhmkcs54DYbD","user":{"login":"tuhbo","id":75490989,"node_id":"MDQ6VXNlcjc1NDkwOTg5","avatar_url":"https://avatars.githubusercontent.com/u/75490989?v=4","gravatar_id":"","url":"https://api.github.com/users/tuhbo","html_url":"https://github.com/tuhbo","followers_url":"https://api.github.com/users/tuhbo/followers","following_url":"https://api.github.com/users/tuhbo/following{/other_user}","gists_url":"https://api.github.com/users/tuhbo/gists{/gist_id}","starred_url":"https://api.github.com/users/tuhbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuhbo/subscriptions","organizations_url":"https://api.github.com/users/tuhbo/orgs","repos_url":"https://api.github.com/users/tuhbo/repos","events_url":"https://api.github.com/users/tuhbo/events{/privacy}","received_events_url":"https://api.github.com/users/tuhbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T01:30:02Z","updated_at":"2024-03-22T01:30:02Z","author_association":"NONE","body":"> > 一个workaround：把grpc端的window_size调大就可以不用等brpc的WINDOW_UPDATE回复了\r\n> \r\n> 调大grpc的window_size是没有用的。按照h2协议，grpc端的window_size是由brpc端决定的。\r\n> \r\n> 嗷，你是不是想说调大brpc端的window_size？嗯，调成1GB好了，要啥流控呢\r\n这个怎么调大brpc端的window_size呢\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2014152387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2014154449","html_url":"https://github.com/apache/brpc/issues/1983#issuecomment-2014154449","issue_url":"https://api.github.com/repos/apache/brpc/issues/1983","id":2014154449,"node_id":"IC_kwDOBhmkcs54DY7R","user":{"login":"tuhbo","id":75490989,"node_id":"MDQ6VXNlcjc1NDkwOTg5","avatar_url":"https://avatars.githubusercontent.com/u/75490989?v=4","gravatar_id":"","url":"https://api.github.com/users/tuhbo","html_url":"https://github.com/tuhbo","followers_url":"https://api.github.com/users/tuhbo/followers","following_url":"https://api.github.com/users/tuhbo/following{/other_user}","gists_url":"https://api.github.com/users/tuhbo/gists{/gist_id}","starred_url":"https://api.github.com/users/tuhbo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuhbo/subscriptions","organizations_url":"https://api.github.com/users/tuhbo/orgs","repos_url":"https://api.github.com/users/tuhbo/repos","events_url":"https://api.github.com/users/tuhbo/events{/privacy}","received_events_url":"https://api.github.com/users/tuhbo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-22T01:32:55Z","updated_at":"2024-03-22T01:32:55Z","author_association":"NONE","body":"这个window_size是在哪里关闭呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/2014154449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]