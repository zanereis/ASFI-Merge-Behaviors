[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819465792","html_url":"https://github.com/apache/brpc/issues/1373#issuecomment-819465792","issue_url":"https://api.github.com/repos/apache/brpc/issues/1373","id":819465792,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTQ2NTc5Mg==","user":{"login":"cuisonghui","id":8772285,"node_id":"MDQ6VXNlcjg3NzIyODU=","avatar_url":"https://avatars.githubusercontent.com/u/8772285?v=4","gravatar_id":"","url":"https://api.github.com/users/cuisonghui","html_url":"https://github.com/cuisonghui","followers_url":"https://api.github.com/users/cuisonghui/followers","following_url":"https://api.github.com/users/cuisonghui/following{/other_user}","gists_url":"https://api.github.com/users/cuisonghui/gists{/gist_id}","starred_url":"https://api.github.com/users/cuisonghui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cuisonghui/subscriptions","organizations_url":"https://api.github.com/users/cuisonghui/orgs","repos_url":"https://api.github.com/users/cuisonghui/repos","events_url":"https://api.github.com/users/cuisonghui/events{/privacy}","received_events_url":"https://api.github.com/users/cuisonghui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T12:04:17Z","updated_at":"2021-04-14T12:04:17Z","author_association":"NONE","body":"> 有可能，如果执行函数内部有bthread提供的同步原语，比如bthread_mutex，如果没有获取到会被挂起，后面条件达到时会加入队列等待调度，此时有可能其他空闲工作线程会来窃取bthread执行，最终执行函数会在多个工作线程(pthread)执行\r\n\r\n多谢，明白了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819465792/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819465944","html_url":"https://github.com/apache/brpc/issues/1374#issuecomment-819465944","issue_url":"https://api.github.com/repos/apache/brpc/issues/1374","id":819465944,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTQ2NTk0NA==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T12:04:35Z","updated_at":"2021-04-14T12:04:35Z","author_association":"CONTRIBUTOR","body":"Solved by using GRPC java `NettyChannelBuilder` instead of `ManagedChannelBuilder`.\r\nAnd setting `NettyChannelBuilder`'s `flowControlWindow()` to a large value, such as 1GB.\r\n\r\n`ManagedChannelBuilder` doesn't have interface to set the flow control window size, and its default size is 64K.\r\n\r\nBut I found that when interacting with the brpc server, http2's SETTING frame and WINDOW_UPDATE frame behave strangely, and they cannot handle a RPC request for big data. I don't know why...","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819465944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819750871","html_url":"https://github.com/apache/brpc/issues/1374#issuecomment-819750871","issue_url":"https://api.github.com/repos/apache/brpc/issues/1374","id":819750871,"node_id":"MDEyOklzc3VlQ29tbWVudDgxOTc1MDg3MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-14T18:47:33Z","updated_at":"2021-04-14T18:47:33Z","author_association":"MEMBER","body":"What do you mean by 'behave strangely'?\r\n\r\nDo you have any error logs when server can't handle a RPC request for big data?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/819750871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/820692575","html_url":"https://github.com/apache/brpc/issues/1380#issuecomment-820692575","issue_url":"https://api.github.com/repos/apache/brpc/issues/1380","id":820692575,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMDY5MjU3NQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-15T19:54:54Z","updated_at":"2021-04-15T19:55:06Z","author_association":"MEMBER","body":"可能是因为两个client看似是并发执行其实是串行的（代码块太小了），导致框架一直用原来的socket对象表示这个对端，而你服务器重启的时候导致这个socket处于Failed状态，之后发消息自然失败了。两个办法：\r\n1）确保两个new Channel发生在两个delete Channel之后\r\n2）等健康检查恢复server","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/820692575/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/822259545","html_url":"https://github.com/apache/brpc/issues/1380#issuecomment-822259545","issue_url":"https://api.github.com/repos/apache/brpc/issues/1380","id":822259545,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMjI1OTU0NQ==","user":{"login":"guowei-bian","id":71699414,"node_id":"MDQ6VXNlcjcxNjk5NDE0","avatar_url":"https://avatars.githubusercontent.com/u/71699414?v=4","gravatar_id":"","url":"https://api.github.com/users/guowei-bian","html_url":"https://github.com/guowei-bian","followers_url":"https://api.github.com/users/guowei-bian/followers","following_url":"https://api.github.com/users/guowei-bian/following{/other_user}","gists_url":"https://api.github.com/users/guowei-bian/gists{/gist_id}","starred_url":"https://api.github.com/users/guowei-bian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guowei-bian/subscriptions","organizations_url":"https://api.github.com/users/guowei-bian/orgs","repos_url":"https://api.github.com/users/guowei-bian/repos","events_url":"https://api.github.com/users/guowei-bian/events{/privacy}","received_events_url":"https://api.github.com/users/guowei-bian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-19T07:59:02Z","updated_at":"2021-04-19T07:59:02Z","author_association":"NONE","body":"感谢zyearn的回复，对我理解这块有很大帮助。下面是我的简单理解，请您空了帮忙看看是否有误，谢谢！\r\n那么channel和socket是什么关系呢？\r\n通常情况下，一个channel对应一个socket，随着channel的init创建socket，channel析构时销毁socket。但在多个channel使用single连接类型情况下，多个channel就公用一个socket；在这种情况下，某个channel析构后，socket也不会析构；所以，在两个channel并发delete后又new的工作场景下，其对应的socket是否能够真正释放后再重建就不能确定了。\r\n前面在issue中提到的，在服务端重启后，两个客户端军返回E112，就是因为两个channel并发delete和new，一旦其中一个client delete和new执行完了，另一个client才执行，就会导致原socket不能释放，也就是新的client1和client2还继续使用原socket，而原socket由于服务端重启还处在恢复过程中，所以两个client给server发消息就报E112错误，直到socket通过healchcheck恢复才可以成功发送。\r\nchannel对socket的管理是通过引用计数实现的，只有socket的引用计数归0，socket才能回收。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/822259545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/823289692","html_url":"https://github.com/apache/brpc/issues/1383#issuecomment-823289692","issue_url":"https://api.github.com/repos/apache/brpc/issues/1383","id":823289692,"node_id":"MDEyOklzc3VlQ29tbWVudDgyMzI4OTY5Mg==","user":{"login":"hotaery","id":29942326,"node_id":"MDQ6VXNlcjI5OTQyMzI2","avatar_url":"https://avatars.githubusercontent.com/u/29942326?v=4","gravatar_id":"","url":"https://api.github.com/users/hotaery","html_url":"https://github.com/hotaery","followers_url":"https://api.github.com/users/hotaery/followers","following_url":"https://api.github.com/users/hotaery/following{/other_user}","gists_url":"https://api.github.com/users/hotaery/gists{/gist_id}","starred_url":"https://api.github.com/users/hotaery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hotaery/subscriptions","organizations_url":"https://api.github.com/users/hotaery/orgs","repos_url":"https://api.github.com/users/hotaery/repos","events_url":"https://api.github.com/users/hotaery/events{/privacy}","received_events_url":"https://api.github.com/users/hotaery/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-20T13:49:29Z","updated_at":"2021-04-20T13:49:29Z","author_association":"NONE","body":"https://github.com/apache/incubator-brpc/blob/master/src/bvar/detail/sampler.cpp#L189\r\nhere is code. brpc has sampling thread. if your project register too many bvar, this thread will consume more time than threshold so that print this log. \r\n```cpp\r\nbvar::Adder adder(\"example\");\r\n```\r\nmaybe your project use bvar like this. Normally, it not affect performance. But i suggest don't use too many named bvar :)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/823289692/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824178608","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-824178608","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":824178608,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNDE3ODYwOA==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-21T16:03:43Z","updated_at":"2021-04-21T16:03:43Z","author_association":"NONE","body":"m1是arm架构的，姑且添加了相关的支持,麻烦测试一下其他部分还有没有问题 @roczpwu \r\nhttps://github.com/VZIKL/incubator-brpc/commit/110d67077929222c627ff95310ea9ec8d76e7a15\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824178608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824339776","html_url":"https://github.com/apache/brpc/issues/1380#issuecomment-824339776","issue_url":"https://api.github.com/repos/apache/brpc/issues/1380","id":824339776,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNDMzOTc3Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-21T20:34:26Z","updated_at":"2021-04-21T20:34:26Z","author_association":"MEMBER","body":"> 但在多个channel使用single连接类型情况下，多个channel就公用一个socket\r\n\r\n我之前说的socket对象和single连接没关系，这个socket是在socket_map中的socket（详见channel.cpp中调用的SocketMapInsert），拿到这个socket后，会根据不同的连接类型single,short还是pooled再确定发送数据的socket","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824339776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824970750","html_url":"https://github.com/apache/brpc/issues/165#issuecomment-824970750","issue_url":"https://api.github.com/repos/apache/brpc/issues/165","id":824970750,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNDk3MDc1MA==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-22T16:00:59Z","updated_at":"2023-02-15T05:51:13Z","author_association":"MEMBER","body":"> ```\r\n> #include <string>\r\n> std::stof(\"a\");\r\n> ```\r\n> \r\n> 在brpc接口内部使用该方法，导致服务core。通过分析core有办法能直接定位到哪一行出现的问题吗？\r\n> \r\n> 使用gdb打开core文件，bt后得到下面的信息：\r\n> \r\n> ```\r\n> (gdb) bt\r\n> #0  0x00007f98eb2b11f7 in raise () from /lib64/libc.so.6\r\n> #1  0x00007f98eb2b28e8 in abort () from /lib64/libc.so.6\r\n> #2  0x0000000000a7a6b5 in __gnu_cxx::__verbose_terminate_handler() ()\r\n> #3  0x0000000000a23406 in __cxxabiv1::__terminate(void (*)()) ()\r\n> #4  0x0000000000a7a159 in __cxa_call_terminate ()\r\n> #5  0x0000000000a232f4 in __gxx_personality_v0 ()\r\n> #6  0x0000000000a7eeb3 in _Unwind_RaiseException_Phase2 ()\r\n> #7  0x0000000000a7f6a7 in _Unwind_Resume ()\r\n> #8  0x00000000007bdd2a in operator() (this=<optimized out>, obj=<optimized out>) at ./src/brpc/destroyable.h:33\r\n> #9  ~unique_ptr (this=<synthetic pointer>, __in_chrg=<optimized out>) at /usr/include/c++/4.8.2/bits/unique_ptr.h:184\r\n> #10 ~DestroyingPtr (this=<synthetic pointer>, __in_chrg=<optimized out>) at ./src/brpc/destroyable.h:39\r\n> #11 brpc::policy::ProcessRpcRequest (msg_base=<optimized out>) at src/brpc/policy/baidu_rpc_protocol.cpp:508\r\n> #12 0x00000000008df7fa in brpc::ProcessInputMessage (void_arg=void_arg@entry=0x7f98a8021930) at src/brpc/input_messenger.cpp:132\r\n> #13 0x00000000008e07e4 in operator() (this=<optimized out>, last_msg=0x7f98a8021930) at src/brpc/input_messenger.cpp:138\r\n> #14 brpc::InputMessenger::OnNewMessages (m=0x7f987401ac80) at /usr/include/c++/4.8.2/bits/unique_ptr.h:184\r\n> #15 0x00000000008d04ed in brpc::Socket::ProcessEvent (arg=0x7f987401ac80) at src/brpc/socket.cpp:1049\r\n> #16 0x000000000071c1f4 in bthread::TaskGroup::task_runner (skip_remained=<optimized out>) at src/bthread/task_group.cpp:291\r\n> #17 0x0000000000834791 in bthread_make_fcontext ()\r\n> #18 0x0000000000000000 in ?? ()\r\n> ```\r\n> \r\n\r\n很明显是出现了未捕获的异常，下次遇到这种core栈，给自己的业务代码多加noexcept来缩小排查范围","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/824970750/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825355006","html_url":"https://github.com/apache/brpc/pull/1345#issuecomment-825355006","issue_url":"https://api.github.com/repos/apache/brpc/issues/1345","id":825355006,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTM1NTAwNg==","user":{"login":"gydong","id":3294444,"node_id":"MDQ6VXNlcjMyOTQ0NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/3294444?v=4","gravatar_id":"","url":"https://api.github.com/users/gydong","html_url":"https://github.com/gydong","followers_url":"https://api.github.com/users/gydong/followers","following_url":"https://api.github.com/users/gydong/following{/other_user}","gists_url":"https://api.github.com/users/gydong/gists{/gist_id}","starred_url":"https://api.github.com/users/gydong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gydong/subscriptions","organizations_url":"https://api.github.com/users/gydong/orgs","repos_url":"https://api.github.com/users/gydong/repos","events_url":"https://api.github.com/users/gydong/events{/privacy}","received_events_url":"https://api.github.com/users/gydong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T03:10:53Z","updated_at":"2021-04-23T03:10:53Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825355006/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825374469","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-825374469","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":825374469,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTM3NDQ2OQ==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T04:20:23Z","updated_at":"2021-04-23T04:20:23Z","author_association":"NONE","body":"报错结果\r\n> Generating src/idl_options.pb.cc\r\n/opt/homebrew/bin/protoc --cpp_out=./src --proto_path=./src --proto_path=/opt/homebrew/include/ src/idl_options.proto\r\n> Compiling src/mcpack2pb/generator.o\r\nclang++ -c -I./src -I/opt/homebrew/include/ -I/usr/local/opt/openssl/include -DBRPC_WITH_GLOG=0 -DGFLAGS_NS=google -g -Wno-deprecated-declarations -Wno-inconsistent-missing-override -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DNDEBUG -DBRPC_REVISION=\\\"0.9.7\\|master\\|110d6707\\|2021-04-22T00:01:09+08:00\\\" -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -std=c++0x -msse4 -msse4.2 src/mcpack2pb/generator.cpp -o src/mcpack2pb/generator.o\r\nclang: warning: argument unused during compilation: '-msse4' [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-msse4.2' [-Wunused-command-line-argument]\r\nIn file included from src/mcpack2pb/generator.cpp:28:\r\nIn file included from ./src/butil/file_util.h:28:\r\nIn file included from ./src/butil/files/file.h:21:\r\nIn file included from ./src/butil/files/scoped_file.h:11:\r\nIn file included from ./src/butil/logging.h:33:\r\n./src/butil/time.h:228:5: error: unknown type name 'uint32'\r\n    uint32 pmccntr;\r\n    ^\r\n./src/butil/time.h:229:5: error: unknown type name 'uint32'\r\n    uint32 pmuseren;\r\n    ^\r\n./src/butil/time.h:230:5: error: unknown type name 'uint32'\r\n    uint32 pmcntenset;\r\n    ^\r\n./src/butil/time.h:238:28: error: unknown type name 'int64'\r\n        return static_cast<int64>(pmccntr) * 64;  // Should optimize to << 6\r\n                           ^\r\n4 errors generated.\r\nmake: *** [src/mcpack2pb/generator.o] Error 1","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825374469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825483664","html_url":"https://github.com/apache/brpc/pull/1314#issuecomment-825483664","issue_url":"https://api.github.com/repos/apache/brpc/issues/1314","id":825483664,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTQ4MzY2NA==","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T08:14:39Z","updated_at":"2021-04-23T08:14:39Z","author_association":"CONTRIBUTOR","body":"@jamesge @zyearn @chenzhangyi @TousakaRin 辛苦各位大神抽空评审下哈，多谢啦！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825483664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825513442","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-825513442","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":825513442,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTUxMzQ0Mg==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T09:00:40Z","updated_at":"2021-04-23T09:00:40Z","author_association":"NONE","body":"没注意类型，我重新更新了一下代码\r\n找了台arm机编译测试了一下，跑了个基本的echo example看起来挺正常的 麻烦验证一下\r\n\r\n@likunyao\r\n https://github.com/VZIKL/incubator-brpc/commit/55a6d100a9aeaa8253d380afe218dab43ab85637\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825513442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825624353","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-825624353","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":825624353,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTYyNDM1Mw==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T12:29:15Z","updated_at":"2021-04-23T12:31:12Z","author_association":"NONE","body":"还是不行\r\n\r\n> In file included from src/bthread/context.cpp:16:\r\n./src/bthread/context.h:77:41: error: expected ';' after top level declarator\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                        ^\r\n                                        ;\r\n./src/bthread/context.h:80:20: error: redefinition of\r\n      'BTHREAD_CONTEXT_CALL_CONVENTION' with a different type:\r\n      'bthread_fcontext_t' (aka 'void *') vs 'intptr_t' (aka 'long')\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                   ^\r\n./src/bthread/context.h:77:10: note: previous definition is here\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n         ^\r\n./src/bthread/context.h:80:51: error: expected ';' after top level declarator\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                                  ^\r\n                                                  ;\r\n3 errors generated.\r\nmake: *** [src/bthread/context.o] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\nIn file included from src/bthread/bthread.cpp:25:\r\nIn file included from ./src/bthread/task_group.h:26:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:28:\r\n./src/bthread/context.h:77:41: error: expected ';' after top level declarator\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                        ^\r\n                                        ;\r\n./src/bthread/context.h:80:20: error: redefinition of\r\n      'BTHREAD_CONTEXT_CALL_CONVENTION' with a different type:\r\n      'bthread_fcontext_t' (aka 'void *') vs 'intptr_t' (aka 'long')\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                   ^\r\n./src/bthread/context.h:77:10: note: previous definition is here\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n         ^\r\n./src/bthread/context.h:80:51: error: expected ';' after top level declarator\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                                  ^\r\n                                                  ;\r\nIn file included from src/bthread/bthread.cpp:25:\r\nIn file included from ./src/bthread/task_group.h:26:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:81:\r\n./src/bthread/stack_inl.h:132:5: error: use of undeclared identifier\r\n      'bthread_jump_fcontext'\r\n    bthread_jump_fcontext(&from->context, to->context, 0/*not skip remained*/);\r\n    ^\r\nIn file included from src/bthread/butex.cpp:34:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:28:\r\n./src/bthread/context.h:77:41: error: expected ';' after top level declarator\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                        ^\r\n                                        ;\r\n./src/bthread/context.h:80:20: error: redefinition of\r\n      'BTHREAD_CONTEXT_CALL_CONVENTION' with a different type:\r\n      'bthread_fcontext_t' (aka 'void *') vs 'intptr_t' (aka 'long')\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                   ^\r\n./src/bthread/context.h:77:10: note: previous definition is here\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n         ^\r\n./src/bthread/context.h:80:51: error: expected ';' after top level declarator\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                                  ^\r\n                                                  ;\r\nIn file included from src/bthread/butex.cpp:34:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:81:\r\n./src/bthread/stack_inl.h:132:5: error: use of undeclared identifier\r\n      'bthread_jump_fcontext'\r\n    bthread_jump_fcontext(&from->context, to->context, 0/*not skip remained*/);\r\n    ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::SmallStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::SmallStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:101:47: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::SmallStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<SmallStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::NormalStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::NormalStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:103:48: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::NormalStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<NormalStackClass>::get_stack(entry);\r\n                                               ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::SmallStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::SmallStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:101:47: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::SmallStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<SmallStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::LargeStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::LargeStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:105:47: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::LargeStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<LargeStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::NormalStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::NormalStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:103:48: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::NormalStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<NormalStackClass>::get_stack(entry);\r\n                                               ^\r\n7 errors generated.\r\nmake: *** [src/bthread/bthread.o] Error 1\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier\r\n      'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stac...\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::LargeStackClass>::Wrapper::Wrapper'\r\n      requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro\r\n      'BAIDU_OBJECT_POOL_GET'\r\n  ...T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                              ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function\r\n      template specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::LocalPool::get<void\r\n      (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template\r\n      specialization\r\n      'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::get_object<void\r\n      (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template\r\n      specialization\r\n      'butil::get_object<bthread::StackFactory<bthread::LargeStackClass>::Wrapper,\r\n      void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:105:47: note: in instantiation of member function\r\n      'bthread::StackFactory<bthread::LargeStackClass>::get_stack' requested\r\n      here\r\n        return StackFactory<LargeStackClass>::get_stack(entry);\r\n                                              ^\r\n7 errors generated.\r\nmake: *** [src/bthread/butex.o] Error 1\r\n1 warning generated.\r\nmake: *** wait: No child processes.  Stop.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825624353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825634550","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-825634550","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":825634550,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTYzNDU1MA==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T12:47:49Z","updated_at":"2021-04-23T13:47:46Z","author_association":"NONE","body":"@likunyao 麻烦提供一下构建参数以及相关命令\r\n我这边arm机器上使用\r\nsh config_brpc.sh --headers=/usr/include --libs=/usr/lib && make -j64 是正常可用的 （用gcc/g++编译)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825634550/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825857003","html_url":"https://github.com/apache/brpc/pull/1314#issuecomment-825857003","issue_url":"https://api.github.com/repos/apache/brpc/issues/1314","id":825857003,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTg1NzAwMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T18:57:18Z","updated_at":"2021-04-23T18:57:18Z","author_association":"MEMBER","body":"Hi, 可以描述一下这个PR的一些情况吗？\r\n* 背景（比如实际场景是什么）\r\n* 要解决什么问题\r\n* 为什么wrr不能解决问题\r\n* 真实场景的落地情况\r\n\r\nThanks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825857003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825863580","html_url":"https://github.com/apache/brpc/issues/1388#issuecomment-825863580","issue_url":"https://api.github.com/repos/apache/brpc/issues/1388","id":825863580,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNTg2MzU4MA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-23T19:10:07Z","updated_at":"2021-04-23T19:10:07Z","author_association":"MEMBER","body":"为了保证前后台数据一致。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/825863580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826023271","html_url":"https://github.com/apache/brpc/issues/1388#issuecomment-826023271","issue_url":"https://api.github.com/repos/apache/brpc/issues/1388","id":826023271,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjAyMzI3MQ==","user":{"login":"shiludeng","id":1152246,"node_id":"MDQ6VXNlcjExNTIyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1152246?v=4","gravatar_id":"","url":"https://api.github.com/users/shiludeng","html_url":"https://github.com/shiludeng","followers_url":"https://api.github.com/users/shiludeng/followers","following_url":"https://api.github.com/users/shiludeng/following{/other_user}","gists_url":"https://api.github.com/users/shiludeng/gists{/gist_id}","starred_url":"https://api.github.com/users/shiludeng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shiludeng/subscriptions","organizations_url":"https://api.github.com/users/shiludeng/orgs","repos_url":"https://api.github.com/users/shiludeng/repos","events_url":"https://api.github.com/users/shiludeng/events{/privacy}","received_events_url":"https://api.github.com/users/shiludeng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-24T02:53:28Z","updated_at":"2021-04-24T02:53:28Z","author_association":"NONE","body":"好的 感谢 我本来以为修改都是全量修改的，对于增量修改的场景确实需要前后台都改一次","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826023271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826212827","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-826212827","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":826212827,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjIxMjgyNw==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T02:08:34Z","updated_at":"2021-04-25T02:08:34Z","author_association":"NONE","body":"sh config_brpc.sh --headers=/opt/homebrew/include --libs=/opt/homebrew/lib --cc=clang --cxx=clang++ && make\r\nApple clang version 12.0.0 (clang-1200.0.32.29)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826212827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826312350","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-826312350","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":826312350,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjMxMjM1MA==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T11:59:34Z","updated_at":"2021-04-25T11:59:34Z","author_association":"NONE","body":"@likunyao \r\n看了下目前context的实现应该是只针对mac x86有编写 我先直接用宏隔开这部分代码 麻烦测试一下\r\nhttps://github.com/VZIKL/incubator-brpc/commit/3c350c5ed7c00e3ff9ca40af40edb9e9124100a7","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826312350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826342934","html_url":"https://github.com/apache/brpc/issues/1374#issuecomment-826342934","issue_url":"https://api.github.com/repos/apache/brpc/issues/1374","id":826342934,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjM0MjkzNA==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T15:30:19Z","updated_at":"2021-04-25T15:30:36Z","author_association":"CONTRIBUTOR","body":"I am not very familiar with the httpv2 protocol. I just read the code briefly. The error log only has \r\n`INTERNAL: HTTP/2 error code: FLOW_CONTROL_ERROR.`\r\n\r\nIn my understanding, the server and client should control the window size through the interaction of SETTING frame and WINDOW_UPDATE frame. I added some logs to the brpc code to observe the interaction of these frames, but I did not find any rules. In some cases, the window size is not set to an appropriate size. The error seems to be thrown in the method `H2UnsentResponse::AppendAndDestroySelf()`, and the reason is the left window size is smaller than required size.\r\n\r\n@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826342934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826372306","html_url":"https://github.com/apache/brpc/issues/1374#issuecomment-826372306","issue_url":"https://api.github.com/repos/apache/brpc/issues/1374","id":826372306,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjM3MjMwNg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-25T18:56:09Z","updated_at":"2021-04-25T18:56:09Z","author_association":"MEMBER","body":"brpc defers the sending of WINDOW_UPDATE frame to avoid the storm of those frames caused by small req/res and high throughput.\r\n\r\nIn your cases, changing window_size in your client should solve the problem.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826372306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826455548","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-826455548","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":826455548,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjQ1NTU0OA==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T02:14:21Z","updated_at":"2021-04-26T02:14:21Z","author_association":"NONE","body":"跟上次报错结果一样。。。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826455548/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826505388","html_url":"https://github.com/apache/brpc/issues/1387#issuecomment-826505388","issue_url":"https://api.github.com/repos/apache/brpc/issues/1387","id":826505388,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjUwNTM4OA==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T05:10:12Z","updated_at":"2021-04-26T05:10:12Z","author_association":"CONTRIBUTOR","body":"If you use local network connection you should set rdma_disable_local_connection=false. Otherwise you can just ignore this warning.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826505388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826520394","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-826520394","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":826520394,"node_id":"MDEyOklzc3VlQ29tbWVudDgyNjUyMDM5NA==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-26T05:42:22Z","updated_at":"2021-04-26T05:42:22Z","author_association":"NONE","body":"还是应该实现一下arm mac context的部分 我晚点写一下 @likunyao  ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/826520394/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/829111415","html_url":"https://github.com/apache/brpc/issues/1389#issuecomment-829111415","issue_url":"https://api.github.com/repos/apache/brpc/issues/1389","id":829111415,"node_id":"MDEyOklzc3VlQ29tbWVudDgyOTExMTQxNQ==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-04-29T10:16:44Z","updated_at":"2021-04-29T10:16:44Z","author_association":"CONTRIBUTOR","body":"For now I can use custom client to send and receive from brpc rdma server. But I have one more question. My client only can send and receive the rq size request. And cannot send and receive more request.\n\nSo what the problem. Maybe I miss some param to set?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/829111415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830624398","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-830624398","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":830624398,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDYyNDM5OA==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-01T12:23:58Z","updated_at":"2021-05-01T12:23:58Z","author_association":"NONE","body":"https://github.com/VZIKL/incubator-brpc/commit/49db58dac288a7b145438af21ad30a57d19b54be @likunyao 帮忙测试一下看看有没有啥问题\r\n 借鉴了boost的context部分 也没啥太大改动 （说不定直接copy上面arm64的也能用","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830624398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830767209","html_url":"https://github.com/apache/brpc/issues/1372#issuecomment-830767209","issue_url":"https://api.github.com/repos/apache/brpc/issues/1372","id":830767209,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDc2NzIwOQ==","user":{"login":"yuan-luo","id":4908075,"node_id":"MDQ6VXNlcjQ5MDgwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4908075?v=4","gravatar_id":"","url":"https://api.github.com/users/yuan-luo","html_url":"https://github.com/yuan-luo","followers_url":"https://api.github.com/users/yuan-luo/followers","following_url":"https://api.github.com/users/yuan-luo/following{/other_user}","gists_url":"https://api.github.com/users/yuan-luo/gists{/gist_id}","starred_url":"https://api.github.com/users/yuan-luo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yuan-luo/subscriptions","organizations_url":"https://api.github.com/users/yuan-luo/orgs","repos_url":"https://api.github.com/users/yuan-luo/repos","events_url":"https://api.github.com/users/yuan-luo/events{/privacy}","received_events_url":"https://api.github.com/users/yuan-luo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-02T07:52:36Z","updated_at":"2021-05-02T07:52:36Z","author_association":"NONE","body":"我在Ubuntu 20.04上遇到类似的问题。\r\n undefined reference to `google::FlagRegisterer::FlagRegisterer()\r\n\r\nhttps://github.com/apache/incubator-brpc/issues/1392","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830767209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830816105","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-830816105","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":830816105,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDgxNjEwNQ==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-02T14:14:06Z","updated_at":"2021-05-02T14:14:06Z","author_association":"NONE","body":"😳😳😳\r\n> ./src/bthread/context.h:81:41: error: expected ';' after top level declarator\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                        ^\r\n                                        ;\r\n./src/bthread/context.h:84:20: error: redefinition of 'BTHREAD_CONTEXT_CALL_CONVENTION' with a different type: 'bthread_fcontext_t' (aka 'void *') vs 'intptr_t' (aka 'long')\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                   ^\r\n./src/bthread/context.h:81:10: note: previous definition is here\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n         ^\r\n./src/bthread/context.h:84:51: error: expected ';' after top level declarator\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                                  ^\r\n                                                  ;\r\n./src/bthread/context.h:91:2: error: #endif without #if\r\n#endif  // BTHREAD_CONTEXT_H\r\n ^\r\nIn file included from src/bthread/bthread.cpp:25:\r\nIn file included from ./src/bthread/task_group.h:26:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:81:\r\n./src/bthread/stack_inl.h:132:5: error: use of undeclared identifier 'bthread_jump_fcontext'\r\n    bthread_jump_fcontext(&from->context, to->context, 0/*not skip remained*/);\r\n    ^\r\nIn file included from src/bthread/butex.cpp:34:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:28:\r\n./src/bthread/context.h:81:41: error: expected ';' after top level declarator\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                        ^\r\n                                        ;\r\n./src/bthread/context.h:84:20: error: redefinition of 'BTHREAD_CONTEXT_CALL_CONVENTION' with a different type: 'bthread_fcontext_t' (aka 'void *') vs 'intptr_t' (aka 'long')\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                   ^\r\n./src/bthread/context.h:81:10: note: previous definition is here\r\nintptr_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n         ^\r\n./src/bthread/context.h:84:51: error: expected ';' after top level declarator\r\nbthread_fcontext_t BTHREAD_CONTEXT_CALL_CONVENTION\r\n                                                  ^\r\n                                                  ;\r\n./src/bthread/context.h:91:2: error: #endif without #if\r\n#endif  // BTHREAD_CONTEXT_H\r\n ^\r\nIn file included from src/bthread/butex.cpp:34:\r\nIn file included from ./src/bthread/task_control.h:31:\r\nIn file included from ./src/bthread/task_meta.h:29:\r\nIn file included from ./src/bthread/stack.h:81:\r\n./src/bthread/stack_inl.h:132:5: error: use of undeclared identifier 'bthread_jump_fcontext'\r\n    bthread_jump_fcontext(&from->context, to->context, 0/*not skip remained*/);\r\n    ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::SmallStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::SmallStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:101:47: note: in instantiation of member function 'bthread::StackFactory<bthread::SmallStackClass>::get_stack' requested here\r\n        return StackFactory<SmallStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::NormalStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::NormalStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:103:48: note: in instantiation of member function 'bthread::StackFactory<bthread::NormalStackClass>::get_stack' requested here\r\n        return StackFactory<NormalStackClass>::get_stack(entry);\r\n                                               ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::SmallStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::SmallStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::SmallStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:101:47: note: in instantiation of member function 'bthread::StackFactory<bthread::SmallStackClass>::get_stack' requested here\r\n        return StackFactory<SmallStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::NormalStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::NormalStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::NormalStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:103:48: note: in instantiation of member function 'bthread::StackFactory<bthread::NormalStackClass>::get_stack' requested here\r\n        return StackFactory<NormalStackClass>::get_stack(entry);\r\n                                               ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::LargeStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::LargeStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:105:47: note: in instantiation of member function 'bthread::StackFactory<bthread::LargeStackClass>::get_stack' requested here\r\n        return StackFactory<LargeStackClass>::get_stack(entry);\r\n                                              ^\r\n./src/bthread/stack_inl.h:58:23: error: use of undeclared identifier 'bthread_make_fcontext'\r\n            context = bthread_make_fcontext(storage.bottom, storage.stacksize, entry);\r\n                      ^\r\n./src/butil/object_pool_inl.h:191:13: note: in instantiation of member function 'bthread::StackFactory<bthread::LargeStackClass>::Wrapper::Wrapper' requested here\r\n            BAIDU_OBJECT_POOL_GET((a1));\r\n            ^\r\n./src/butil/object_pool_inl.h:163:70: note: expanded from macro 'BAIDU_OBJECT_POOL_GET'\r\n            T* obj = new ((T*)_cur_block->items + _cur_block->nitem) T CTOR_ARGS; \\\r\n                                                                     ^\r\n./src/butil/object_pool_inl.h:238:24: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::LocalPool::get<void (*)(long)>' requested here\r\n            return lp->get(arg1);\r\n                       ^\r\n./src/butil/object_pool.h:81:40: note: in instantiation of function template specialization 'butil::ObjectPool<bthread::StackFactory<bthread::LargeStackClass>::Wrapper>::get_object<void (*)(long)>' requested here\r\n    return ObjectPool<T>::singleton()->get_object(arg1);\r\n                                       ^\r\n./src/bthread/stack_inl.h:71:23: note: in instantiation of function template specialization 'butil::get_object<bthread::StackFactory<bthread::LargeStackClass>::Wrapper, void (*)(long)>' requested here\r\n        return butil::get_object<Wrapper>(entry);\r\n                      ^\r\n./src/bthread/stack_inl.h:105:47: note: in instantiation of member function 'bthread::StackFactory<bthread::LargeStackClass>::get_stack' requested here\r\n        return StackFactory<LargeStackClass>::get_stack(entry);\r\n                                              ^\r\n8 errors generated.\r\nmake: *** [src/bthread/bthread.o] Error 1\r\n8 errors generated.\r\nmake: *** [src/bthread/butex.o] Error 1\r\n1 warning generated.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830816105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830824821","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-830824821","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":830824821,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMDgyNDgyMQ==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-02T15:15:03Z","updated_at":"2021-05-02T15:15:03Z","author_association":"NONE","body":"@likunyao 瞎了（少删了一行endif 看看呗应该可以了 主要是没机器测试\r\nhttps://github.com/VZIKL/incubator-brpc/commit/46ab26de83b6ce6213488b657feb27ae759059d3","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/830824821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/831107891","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-831107891","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":831107891,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTEwNzg5MQ==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T08:26:53Z","updated_at":"2021-05-03T08:26:53Z","author_association":"NONE","body":"老哥，还得麻烦你😭\r\n\r\n> Compiling src/bthread/context.o\r\nclang++ -c -I./src -I/opt/homebrew/include/ -I/usr/local/opt/openssl/include -DBRPC_WITH_GLOG=0 -DGFLAGS_NS=google -g -Wno-deprecated-declarations -Wno-inconsistent-missing-override -DBTHREAD_USE_FAST_PTHREAD_MUTEX -D__const__= -D_GNU_SOURCE -DUSE_SYMBOLIZE -DNO_TCMALLOC -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DNDEBUG -DBRPC_REVISION=\\\"0.9.7\\|master\\|46ab26de\\|2021-05-02T23:12:29+08:00\\\" -O2 -pipe -Wall -W -fPIC -fstrict-aliasing -Wno-invalid-offsetof -Wno-unused-parameter -fno-omit-frame-pointer -std=c++0x -msse4 -msse4.2 src/bthread/context.cpp -o src/bthread/context.o\r\nclang: warning: argument unused during compilation: '-msse4' [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-msse4.2' [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-msse4' [-Wunused-command-line-argument]\r\nclang: warning: argument unused during compilation: '-msse4.2' [-Wunused-command-line-argument]\r\n<inline asm>:5:1: error: unknown directive\r\n.type   bthread_jump_fcontext, %function\r\n^\r\n<inline asm>:36:14: error: invalid operand for instruction\r\n    str  x4, x0\r\n             ^\r\n<inline asm>:63:1: error: unknown directive\r\n.size   bthread_jump_fcontext,.-bthread_jump_fcontext\r\n^\r\n<inline asm>:65:19: error: unexpected token in '.section' directive\r\n.section .note.GNU-stack,\"\",%progbits\r\n                  ^\r\n<inline asm>:70:1: error: unknown directive\r\n.type   bthread_make_fcontext, %function\r\n^\r\n<inline asm>:89:1: error: unknown directive\r\n.size   bthread_make_fcontext,.-bthread_make_fcontext\r\n^\r\n<inline asm>:91:19: error: unexpected token in '.section' directive\r\n.section .note.GNU-stack,\"\",%progbits\r\n                  ^\r\n<inline asm>:81:5: error: unknown AArch64 fixup kind!\r\n    adr  x1, finish\r\n    ^\r\n8 errors generated.\r\nmake: *** [src/bthread/context.o] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/831107891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/831419766","html_url":"https://github.com/apache/brpc/pull/1031#issuecomment-831419766","issue_url":"https://api.github.com/repos/apache/brpc/issues/1031","id":831419766,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTQxOTc2Ng==","user":{"login":"JimChengLin","id":16563096,"node_id":"MDQ6VXNlcjE2NTYzMDk2","avatar_url":"https://avatars.githubusercontent.com/u/16563096?v=4","gravatar_id":"","url":"https://api.github.com/users/JimChengLin","html_url":"https://github.com/JimChengLin","followers_url":"https://api.github.com/users/JimChengLin/followers","following_url":"https://api.github.com/users/JimChengLin/following{/other_user}","gists_url":"https://api.github.com/users/JimChengLin/gists{/gist_id}","starred_url":"https://api.github.com/users/JimChengLin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimChengLin/subscriptions","organizations_url":"https://api.github.com/users/JimChengLin/orgs","repos_url":"https://api.github.com/users/JimChengLin/repos","events_url":"https://api.github.com/users/JimChengLin/events{/privacy}","received_events_url":"https://api.github.com/users/JimChengLin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T17:43:46Z","updated_at":"2021-05-03T17:43:46Z","author_association":"CONTRIBUTOR","body":"这个实现性能有很大优化吧。这个无脑 butex 唤醒有问题吧？理想状态下应该有个 flag 标识有没有真的有 bthread 在等待。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/831419766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/832674705","html_url":"https://github.com/apache/brpc/issues/1238#issuecomment-832674705","issue_url":"https://api.github.com/repos/apache/brpc/issues/1238","id":832674705,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMjY3NDcwNQ==","user":{"login":"a9QrX3Lu","id":46620760,"node_id":"MDQ6VXNlcjQ2NjIwNzYw","avatar_url":"https://avatars.githubusercontent.com/u/46620760?v=4","gravatar_id":"","url":"https://api.github.com/users/a9QrX3Lu","html_url":"https://github.com/a9QrX3Lu","followers_url":"https://api.github.com/users/a9QrX3Lu/followers","following_url":"https://api.github.com/users/a9QrX3Lu/following{/other_user}","gists_url":"https://api.github.com/users/a9QrX3Lu/gists{/gist_id}","starred_url":"https://api.github.com/users/a9QrX3Lu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a9QrX3Lu/subscriptions","organizations_url":"https://api.github.com/users/a9QrX3Lu/orgs","repos_url":"https://api.github.com/users/a9QrX3Lu/repos","events_url":"https://api.github.com/users/a9QrX3Lu/events{/privacy}","received_events_url":"https://api.github.com/users/a9QrX3Lu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-05T13:10:50Z","updated_at":"2021-05-05T13:10:50Z","author_association":"NONE","body":"It seems to be hard to make the StringPiece API exactly matches std::string_view. There are many methods in StringPiece that do not exist in std::string_view, such as `trim_spaces`, `front_or_0`, `wordmemcmp` and `CopyToString`. \r\nThere are two possible ways to solve this issue:\r\n1. Change these unmatching methods to functions and modify all the callers to use these functions. \r\n2. Extend the std::string_view with the unmatching methods after c++17 is introduced by brpc.\r\nAny suggestions? @gydong ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/832674705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/833355725","html_url":"https://github.com/apache/brpc/issues/1374#issuecomment-833355725","issue_url":"https://api.github.com/repos/apache/brpc/issues/1374","id":833355725,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMzM1NTcyNQ==","user":{"login":"morningman","id":2899462,"node_id":"MDQ6VXNlcjI4OTk0NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2899462?v=4","gravatar_id":"","url":"https://api.github.com/users/morningman","html_url":"https://github.com/morningman","followers_url":"https://api.github.com/users/morningman/followers","following_url":"https://api.github.com/users/morningman/following{/other_user}","gists_url":"https://api.github.com/users/morningman/gists{/gist_id}","starred_url":"https://api.github.com/users/morningman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/morningman/subscriptions","organizations_url":"https://api.github.com/users/morningman/orgs","repos_url":"https://api.github.com/users/morningman/repos","events_url":"https://api.github.com/users/morningman/events{/privacy}","received_events_url":"https://api.github.com/users/morningman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-06T08:54:19Z","updated_at":"2021-05-06T08:54:19Z","author_association":"CONTRIBUTOR","body":"> brpc defers the sending of WINDOW_UPDATE frame to avoid the storm of those frames caused by small req/res and high throughput.\r\n> \r\n> In your cases, changing window_size in your client should solve the problem.\r\n\r\nYes, after set the window size to 1GB, the error disappeared.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/833355725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834139942","html_url":"https://github.com/apache/brpc/issues/1271#issuecomment-834139942","issue_url":"https://api.github.com/repos/apache/brpc/issues/1271","id":834139942,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNDEzOTk0Mg==","user":{"login":"rebornfz","id":27042311,"node_id":"MDQ6VXNlcjI3MDQyMzEx","avatar_url":"https://avatars.githubusercontent.com/u/27042311?v=4","gravatar_id":"","url":"https://api.github.com/users/rebornfz","html_url":"https://github.com/rebornfz","followers_url":"https://api.github.com/users/rebornfz/followers","following_url":"https://api.github.com/users/rebornfz/following{/other_user}","gists_url":"https://api.github.com/users/rebornfz/gists{/gist_id}","starred_url":"https://api.github.com/users/rebornfz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebornfz/subscriptions","organizations_url":"https://api.github.com/users/rebornfz/orgs","repos_url":"https://api.github.com/users/rebornfz/repos","events_url":"https://api.github.com/users/rebornfz/events{/privacy}","received_events_url":"https://api.github.com/users/rebornfz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-07T07:39:02Z","updated_at":"2021-05-07T07:39:02Z","author_association":"NONE","body":"@guodongxiaren 老哥解决了吗？ 我在一个server里需要用到client来发送和下载图片，qps高一点的时候也遇到了这个情况。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834139942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834162432","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-834162432","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":834162432,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNDE2MjQzMg==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-07T08:16:34Z","updated_at":"2021-05-07T08:16:34Z","author_association":"NONE","body":"@likunyao @roczpwu  \r\nhttps://github.com/VZIKL/incubator-brpc/commit/6bafcca7e53460fcb9269c748a0b89f57a3b2e4c \r\n这个版本在m1正常构建 （感谢 https://github.com/shiptux 提供的m1 mac air环境)\r\n就是跑好像有点问题 进程popen打开就掉进了ferror \r\n771 src/butil/popen.cpp:173] Encountered error while reading for the pipe","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834162432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834976286","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-834976286","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":834976286,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNDk3NjI4Ng==","user":{"login":"likunyao","id":16969814,"node_id":"MDQ6VXNlcjE2OTY5ODE0","avatar_url":"https://avatars.githubusercontent.com/u/16969814?v=4","gravatar_id":"","url":"https://api.github.com/users/likunyao","html_url":"https://github.com/likunyao","followers_url":"https://api.github.com/users/likunyao/followers","following_url":"https://api.github.com/users/likunyao/following{/other_user}","gists_url":"https://api.github.com/users/likunyao/gists{/gist_id}","starred_url":"https://api.github.com/users/likunyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/likunyao/subscriptions","organizations_url":"https://api.github.com/users/likunyao/orgs","repos_url":"https://api.github.com/users/likunyao/repos","events_url":"https://api.github.com/users/likunyao/events{/privacy}","received_events_url":"https://api.github.com/users/likunyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-08T02:24:41Z","updated_at":"2021-05-08T02:24:41Z","author_association":"NONE","body":"编译能过，echo跑不起来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/834976286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836190106","html_url":"https://github.com/apache/brpc/pull/1031#issuecomment-836190106","issue_url":"https://api.github.com/repos/apache/brpc/issues/1031","id":836190106,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNjE5MDEwNg==","user":{"login":"JimChengLin","id":16563096,"node_id":"MDQ6VXNlcjE2NTYzMDk2","avatar_url":"https://avatars.githubusercontent.com/u/16563096?v=4","gravatar_id":"","url":"https://api.github.com/users/JimChengLin","html_url":"https://github.com/JimChengLin","followers_url":"https://api.github.com/users/JimChengLin/followers","following_url":"https://api.github.com/users/JimChengLin/following{/other_user}","gists_url":"https://api.github.com/users/JimChengLin/gists{/gist_id}","starred_url":"https://api.github.com/users/JimChengLin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JimChengLin/subscriptions","organizations_url":"https://api.github.com/users/JimChengLin/orgs","repos_url":"https://api.github.com/users/JimChengLin/repos","events_url":"https://api.github.com/users/JimChengLin/events{/privacy}","received_events_url":"https://api.github.com/users/JimChengLin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-10T05:22:06Z","updated_at":"2022-07-14T09:26:03Z","author_association":"CONTRIBUTOR","body":"我的实现是这样的，由于 bthread 的 butex 没有按 tag 唤醒，有可能产生读写者同时唤醒（惊群）\r\n\r\n```c++\r\n#pragma once\r\n\r\n#include <bthread/bthread.h>\r\n#include <bthread/butex.h>\r\n#include <butil/atomicops.h>\r\n\r\n#include <cassert>\r\n\r\nnamespace bcache {\r\n\r\nclass SingleWriterBthreadRWLock {\r\n public:\r\n    SingleWriterBthreadRWLock() : flag_(bthread::butex_create_checked<unsigned int>()) { *flag_ = 0; }\r\n\r\n    ~SingleWriterBthreadRWLock() { bthread::butex_destroy(flag_); }\r\n\r\n    void lock_shared() { CHECK_EQ(0, ReadLock()); }\r\n\r\n    void unlock_shared() { ReadUnlock(); }\r\n\r\n    void lock() { CHECK_EQ(0, WriteLock()); }\r\n\r\n    void unlock() { WriteUnlock(); }\r\n\r\n private:\r\n    int ReadLock() {\r\n        auto& f = *reinterpret_cast<butil::atomic<unsigned int>*>(flag_);\r\n        unsigned int state;\r\n    wait_stage:\r\n        while ((state = f.load(std::memory_order_relaxed)) & kLockMask) {\r\n            unsigned int after = state | kWaitMask;\r\n            while (!(state & kWaitMask) && !f.compare_exchange_weak(state, after, std::memory_order_relaxed,\r\n                                                                    std::memory_order_relaxed)) {\r\n                if (!(state & kLockMask)) {\r\n                    goto lock_stage;\r\n                }\r\n                after = state | kWaitMask;\r\n            }\r\n            if (bthread::butex_wait(flag_, after, nullptr) < 0 && errno != EWOULDBLOCK && errno != EINTR) {\r\n                return errno;\r\n            }\r\n        }\r\n    lock_stage:\r\n        if (f.fetch_add(1, std::memory_order_acquire) & kLockMask) {\r\n            state = f.fetch_sub(1, std::memory_order_relaxed) - 1;\r\n            if ((state & (kWaitMask | kReaderCountMask)) == kWaitMask) {\r\n                state = f.fetch_and(~kWaitMask, std::memory_order_relaxed);\r\n                if (state & kWaitMask) {\r\n                    bthread::butex_wake_all(flag_);\r\n                }\r\n            }\r\n            if (state & kLockMask) {\r\n                goto wait_stage;\r\n            } else {\r\n                goto lock_stage;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    void ReadUnlock() {\r\n        auto& f = *reinterpret_cast<butil::atomic<unsigned int>*>(flag_);\r\n        unsigned int state = f.fetch_sub(1, std::memory_order_release) - 1;\r\n        if ((state & (kWaitMask | kReaderCountMask)) == kWaitMask) {\r\n            assert(state & kLockMask);\r\n            state = f.fetch_and(~kWaitMask, std::memory_order_relaxed);\r\n            if (state & kWaitMask) {\r\n                bthread::butex_wake_all(flag_);\r\n            }\r\n        }\r\n    }\r\n\r\n    int WriteLock() {\r\n        auto& f = *reinterpret_cast<butil::atomic<unsigned int>*>(flag_);\r\n        unsigned int state;\r\n        if ((state = f.fetch_or(kLockMask, std::memory_order_acquire))) {\r\n            assert(!(state & (kLockMask | kWaitMask)));\r\n            state |= kLockMask;\r\n            do {\r\n                assert(state & kLockMask);\r\n                unsigned int after = state | kWaitMask;\r\n                while (!(state & kWaitMask) &&\r\n                       !f.compare_exchange_weak(state, after, std::memory_order_relaxed,\r\n                                                std::memory_order_acquire)) {\r\n                    assert(state & kLockMask);\r\n                    if (!(state & kReaderCountMask)) {\r\n                        return 0;\r\n                    }\r\n                    after = state | kWaitMask;\r\n                }\r\n                if (bthread::butex_wait(flag_, after, nullptr) < 0 && errno != EWOULDBLOCK &&\r\n                    errno != EINTR) {\r\n                    WriteUnlock();\r\n                    return errno;\r\n                }\r\n            } while ((state = f.load(std::memory_order_acquire)) & kReaderCountMask);\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    void WriteUnlock() {\r\n        auto& f = *reinterpret_cast<butil::atomic<unsigned int>*>(flag_);\r\n        unsigned int state = f.fetch_and(~(kLockMask | kWaitMask), std::memory_order_release);\r\n        assert(state & kLockMask);\r\n        if (state & kWaitMask) {\r\n            bthread::butex_wake_all(flag_);\r\n        }\r\n    }\r\n\r\n private:\r\n    static constexpr unsigned int kLockMask = 1U << 31U;\r\n    static constexpr unsigned int kWaitMask = 1U << 30U;\r\n    static constexpr unsigned int kReaderCountMask = (1U << 30U) - 1U;\r\n\r\n    unsigned int* const flag_;\r\n};\r\n\r\nclass GeneralBthreadRWLock {\r\n public:\r\n    void lock_shared() { internal_rwlock_.lock_shared(); }\r\n\r\n    void unlock_shared() { internal_rwlock_.unlock_shared(); }\r\n\r\n    void lock() {\r\n        writer_mtx_.lock();\r\n        internal_rwlock_.lock();\r\n    }\r\n\r\n    void unlock() {\r\n        internal_rwlock_.unlock();\r\n        writer_mtx_.unlock();\r\n    }\r\n\r\n private:\r\n    bthread::Mutex writer_mtx_;\r\n    SingleWriterBthreadRWLock internal_rwlock_;\r\n};\r\n\r\n}  // namespace bcache\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836190106/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836538449","html_url":"https://github.com/apache/brpc/pull/1002#issuecomment-836538449","issue_url":"https://api.github.com/repos/apache/brpc/issues/1002","id":836538449,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNjUzODQ0OQ==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-10T10:42:17Z","updated_at":"2021-05-10T10:42:17Z","author_association":"CONTRIBUTOR","body":"@Tuvie 有个问题问下，为什么rdma现在采用的epoll_wait方式实现呢，采用poll_cq不是更高效吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836538449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836582222","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-836582222","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":836582222,"node_id":"MDEyOklzc3VlQ29tbWVudDgzNjU4MjIyMg==","user":{"login":"VZIKL","id":14778020,"node_id":"MDQ6VXNlcjE0Nzc4MDIw","avatar_url":"https://avatars.githubusercontent.com/u/14778020?v=4","gravatar_id":"","url":"https://api.github.com/users/VZIKL","html_url":"https://github.com/VZIKL","followers_url":"https://api.github.com/users/VZIKL/followers","following_url":"https://api.github.com/users/VZIKL/following{/other_user}","gists_url":"https://api.github.com/users/VZIKL/gists{/gist_id}","starred_url":"https://api.github.com/users/VZIKL/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VZIKL/subscriptions","organizations_url":"https://api.github.com/users/VZIKL/orgs","repos_url":"https://api.github.com/users/VZIKL/repos","events_url":"https://api.github.com/users/VZIKL/events{/privacy}","received_events_url":"https://api.github.com/users/VZIKL/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-10T11:30:16Z","updated_at":"2021-05-10T11:30:46Z","author_association":"NONE","body":"@likunyao  是的 我看到了 这个问题得查一下  跟上面的context部分应该是没啥关系的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/836582222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/838270463","html_url":"https://github.com/apache/brpc/pull/1400#issuecomment-838270463","issue_url":"https://api.github.com/repos/apache/brpc/issues/1400","id":838270463,"node_id":"MDEyOklzc3VlQ29tbWVudDgzODI3MDQ2Mw==","user":{"login":"wwc7654321","id":8026791,"node_id":"MDQ6VXNlcjgwMjY3OTE=","avatar_url":"https://avatars.githubusercontent.com/u/8026791?v=4","gravatar_id":"","url":"https://api.github.com/users/wwc7654321","html_url":"https://github.com/wwc7654321","followers_url":"https://api.github.com/users/wwc7654321/followers","following_url":"https://api.github.com/users/wwc7654321/following{/other_user}","gists_url":"https://api.github.com/users/wwc7654321/gists{/gist_id}","starred_url":"https://api.github.com/users/wwc7654321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwc7654321/subscriptions","organizations_url":"https://api.github.com/users/wwc7654321/orgs","repos_url":"https://api.github.com/users/wwc7654321/repos","events_url":"https://api.github.com/users/wwc7654321/events{/privacy}","received_events_url":"https://api.github.com/users/wwc7654321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-11T10:58:12Z","updated_at":"2021-05-11T10:58:12Z","author_association":"CONTRIBUTOR","body":"Only edited .md file. Will it cause build fail?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/838270463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/839807085","html_url":"https://github.com/apache/brpc/pull/1400#issuecomment-839807085","issue_url":"https://api.github.com/repos/apache/brpc/issues/1400","id":839807085,"node_id":"MDEyOklzc3VlQ29tbWVudDgzOTgwNzA4NQ==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T14:13:44Z","updated_at":"2021-05-12T14:13:44Z","author_association":"CONTRIBUTOR","body":"Travis CI is not working now. So all pull request will failed.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/839807085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/839810444","html_url":"https://github.com/apache/brpc/issues/1389#issuecomment-839810444","issue_url":"https://api.github.com/repos/apache/brpc/issues/1389","id":839810444,"node_id":"MDEyOklzc3VlQ29tbWVudDgzOTgxMDQ0NA==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-12T14:18:10Z","updated_at":"2021-05-12T14:18:10Z","author_association":"CONTRIBUTOR","body":"I have fixed the bug. Because the brpc client need  send imm data in client to finish the request. If not send the imm data. The request will not complete. And more request will cause the server rq is full. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/839810444/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840478090","html_url":"https://github.com/apache/brpc/issues/1401#issuecomment-840478090","issue_url":"https://api.github.com/repos/apache/brpc/issues/1401","id":840478090,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDQ3ODA5MA==","user":{"login":"tbago","id":12290248,"node_id":"MDQ6VXNlcjEyMjkwMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/12290248?v=4","gravatar_id":"","url":"https://api.github.com/users/tbago","html_url":"https://github.com/tbago","followers_url":"https://api.github.com/users/tbago/followers","following_url":"https://api.github.com/users/tbago/following{/other_user}","gists_url":"https://api.github.com/users/tbago/gists{/gist_id}","starred_url":"https://api.github.com/users/tbago/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbago/subscriptions","organizations_url":"https://api.github.com/users/tbago/orgs","repos_url":"https://api.github.com/users/tbago/repos","events_url":"https://api.github.com/users/tbago/events{/privacy}","received_events_url":"https://api.github.com/users/tbago/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T10:48:17Z","updated_at":"2021-05-13T10:48:17Z","author_association":"CONTRIBUTOR","body":"I found the rdma_cm_id is not matched when use the second device. I have add the bind function in client side. And it can fixed the client connection isuse.\r\n<img width=\"829\" alt=\"WechatIMG27\" src=\"https://user-images.githubusercontent.com/12290248/118115593-bd6bb000-b41b-11eb-90c1-b161939d237c.png\">\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840478090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840489621","html_url":"https://github.com/apache/brpc/issues/1268#issuecomment-840489621","issue_url":"https://api.github.com/repos/apache/brpc/issues/1268","id":840489621,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDQ4OTYyMQ==","user":{"login":"hiberabyss","id":2898670,"node_id":"MDQ6VXNlcjI4OTg2NzA=","avatar_url":"https://avatars.githubusercontent.com/u/2898670?v=4","gravatar_id":"","url":"https://api.github.com/users/hiberabyss","html_url":"https://github.com/hiberabyss","followers_url":"https://api.github.com/users/hiberabyss/followers","following_url":"https://api.github.com/users/hiberabyss/following{/other_user}","gists_url":"https://api.github.com/users/hiberabyss/gists{/gist_id}","starred_url":"https://api.github.com/users/hiberabyss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hiberabyss/subscriptions","organizations_url":"https://api.github.com/users/hiberabyss/orgs","repos_url":"https://api.github.com/users/hiberabyss/repos","events_url":"https://api.github.com/users/hiberabyss/events{/privacy}","received_events_url":"https://api.github.com/users/hiberabyss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T11:12:49Z","updated_at":"2021-05-13T11:12:49Z","author_association":"CONTRIBUTOR","body":"用 bazel 4 也编译不了，protobu 现在会有问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840489621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840559816","html_url":"https://github.com/apache/brpc/issues/572#issuecomment-840559816","issue_url":"https://api.github.com/repos/apache/brpc/issues/572","id":840559816,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDU1OTgxNg==","user":{"login":"troycheng","id":1331080,"node_id":"MDQ6VXNlcjEzMzEwODA=","avatar_url":"https://avatars.githubusercontent.com/u/1331080?v=4","gravatar_id":"","url":"https://api.github.com/users/troycheng","html_url":"https://github.com/troycheng","followers_url":"https://api.github.com/users/troycheng/followers","following_url":"https://api.github.com/users/troycheng/following{/other_user}","gists_url":"https://api.github.com/users/troycheng/gists{/gist_id}","starred_url":"https://api.github.com/users/troycheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/troycheng/subscriptions","organizations_url":"https://api.github.com/users/troycheng/orgs","repos_url":"https://api.github.com/users/troycheng/repos","events_url":"https://api.github.com/users/troycheng/events{/privacy}","received_events_url":"https://api.github.com/users/troycheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T13:25:26Z","updated_at":"2021-05-13T13:25:26Z","author_association":"NONE","body":"请问一下，这个问题解决了吗，如果解决了是如何解决的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840559816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840565974","html_url":"https://github.com/apache/brpc/issues/1064#issuecomment-840565974","issue_url":"https://api.github.com/repos/apache/brpc/issues/1064","id":840565974,"node_id":"MDEyOklzc3VlQ29tbWVudDg0MDU2NTk3NA==","user":{"login":"troycheng","id":1331080,"node_id":"MDQ6VXNlcjEzMzEwODA=","avatar_url":"https://avatars.githubusercontent.com/u/1331080?v=4","gravatar_id":"","url":"https://api.github.com/users/troycheng","html_url":"https://github.com/troycheng","followers_url":"https://api.github.com/users/troycheng/followers","following_url":"https://api.github.com/users/troycheng/following{/other_user}","gists_url":"https://api.github.com/users/troycheng/gists{/gist_id}","starred_url":"https://api.github.com/users/troycheng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/troycheng/subscriptions","organizations_url":"https://api.github.com/users/troycheng/orgs","repos_url":"https://api.github.com/users/troycheng/repos","events_url":"https://api.github.com/users/troycheng/events{/privacy}","received_events_url":"https://api.github.com/users/troycheng/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-13T13:36:00Z","updated_at":"2021-05-13T13:36:00Z","author_association":"NONE","body":"请问这个问题最终有解决的办法了吗","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/840565974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/842783075","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-842783075","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":842783075,"node_id":"MDEyOklzc3VlQ29tbWVudDg0Mjc4MzA3NQ==","user":{"login":"luobuda","id":5410447,"node_id":"MDQ6VXNlcjU0MTA0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5410447?v=4","gravatar_id":"","url":"https://api.github.com/users/luobuda","html_url":"https://github.com/luobuda","followers_url":"https://api.github.com/users/luobuda/followers","following_url":"https://api.github.com/users/luobuda/following{/other_user}","gists_url":"https://api.github.com/users/luobuda/gists{/gist_id}","starred_url":"https://api.github.com/users/luobuda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luobuda/subscriptions","organizations_url":"https://api.github.com/users/luobuda/orgs","repos_url":"https://api.github.com/users/luobuda/repos","events_url":"https://api.github.com/users/luobuda/events{/privacy}","received_events_url":"https://api.github.com/users/luobuda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-18T02:48:11Z","updated_at":"2021-05-18T02:48:11Z","author_association":"NONE","body":"baikalDB开源了一个，欢迎交流使用：https://github.com/baidu/BaikalDB/tree/master/baikal-client","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/842783075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/843758103","html_url":"https://github.com/apache/brpc/issues/535#issuecomment-843758103","issue_url":"https://api.github.com/repos/apache/brpc/issues/535","id":843758103,"node_id":"MDEyOklzc3VlQ29tbWVudDg0Mzc1ODEwMw==","user":{"login":"huntinux","id":6072626,"node_id":"MDQ6VXNlcjYwNzI2MjY=","avatar_url":"https://avatars.githubusercontent.com/u/6072626?v=4","gravatar_id":"","url":"https://api.github.com/users/huntinux","html_url":"https://github.com/huntinux","followers_url":"https://api.github.com/users/huntinux/followers","following_url":"https://api.github.com/users/huntinux/following{/other_user}","gists_url":"https://api.github.com/users/huntinux/gists{/gist_id}","starred_url":"https://api.github.com/users/huntinux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/huntinux/subscriptions","organizations_url":"https://api.github.com/users/huntinux/orgs","repos_url":"https://api.github.com/users/huntinux/repos","events_url":"https://api.github.com/users/huntinux/events{/privacy}","received_events_url":"https://api.github.com/users/huntinux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-19T05:30:04Z","updated_at":"2021-05-19T05:31:27Z","author_association":"NONE","body":"尝试改了http协议里面的pb创建方式\r\n```\r\ndiff --git a/src/brpc/policy/http_rpc_protocol.cpp b/src/brpc/policy/http_rpc_protocol.cpp\r\nindex 8787574..c5a498d 100644\r\n--- a/src/brpc/policy/http_rpc_protocol.cpp\r\n+++ b/src/brpc/policy/http_rpc_protocol.cpp\r\n@@ -16,6 +16,7 @@\r\n //          Ge,Jun (gejun@baidu.com)\r\n \r\n #include <google/protobuf/descriptor.h>             // MethodDescriptor\r\n+#include <google/protobuf/arena.h>             // MethodDescriptor\r\n #include <gflags/gflags.h>\r\n #include <json2pb/pb_to_json.h>                    // ProtoMessageToJson\r\n #include <json2pb/json_to_pb.h>                    // JsonToProtoMessage\r\n@@ -71,6 +72,8 @@ DEFINE_bool(pb_enum_as_number, false, \"[Not recommended] Convert enums in \"\r\n             \"protobuf to json as numbers, affecting both client-side and \"\r\n             \"server-side\");\r\n \r\n+DEFINE_bool(enable_pb_arena, false, \"Create request/response message on arena\");\r\n+\r\n // Read user address from the header specified by -http_header_of_user_ip\r\n static bool GetUserAddressFromHeaderImpl(const HttpHeader& headers,\r\n                                          butil::EndPoint* user_addr) {\r\n@@ -685,6 +688,7 @@ public:\r\n         : _cntl(std::move(s._cntl))\r\n         , _req(std::move(s._req))\r\n         , _res(std::move(s._res))\r\n+        , _arena(std::move(s._arena))\r\n         , _method_status(std::move(s._method_status))\r\n         , _received_us(s._received_us)\r\n         , _h2_stream_id(s._h2_stream_id) {\r\n@@ -693,6 +697,7 @@ public:\r\n \r\n     void own_request(google::protobuf::Message* req) { _req.reset(req); }\r\n     void own_response(google::protobuf::Message* res) { _res.reset(res); }\r\n+    void own_arena(google::protobuf::Arena* arena) { _arena.reset(arena); }\r\n     void set_method_status(MethodStatus* ms) { _method_status = ms; }\r\n     void set_received_us(int64_t t) { _received_us = t; }\r\n     void set_h2_stream_id(int id) { _h2_stream_id = id; }\r\n@@ -701,6 +706,7 @@ private:\r\n     std::unique_ptr<Controller, LogErrorTextAndDelete> _cntl;\r\n     std::unique_ptr<google::protobuf::Message> _req;\r\n     std::unique_ptr<google::protobuf::Message> _res;\r\n+    std::unique_ptr<google::protobuf::Arena> _arena;\r\n     MethodStatus* _method_status;\r\n     int64_t _received_us;\r\n     int _h2_stream_id;\r\n@@ -1424,10 +1430,19 @@ void ProcessHttpRequest(InputMessageBase *msg) {\r\n     google::protobuf::Service* svc = sp->service;\r\n     const google::protobuf::MethodDescriptor* method = sp->method;\r\n     accessor.set_method(method);\r\n-    google::protobuf::Message* req = svc->GetRequestPrototype(method).New();\r\n-    resp_sender.own_request(req);\r\n-    google::protobuf::Message* res = svc->GetResponsePrototype(method).New();\r\n-    resp_sender.own_response(res);\r\n+    google::protobuf::Message* req = nullptr;\r\n+    google::protobuf::Message* res = nullptr;\r\n+    if (FLAGS_enable_pb_arena) {\r\n+      google::protobuf::Arena* arena = new google::protobuf::Arena();\r\n+      req = svc->GetRequestPrototype(method).New(arena);\r\n+      res = svc->GetResponsePrototype(method).New(arena);\r\n+      resp_sender.own_arena(arena);\r\n+    } else {\r\n+      req = svc->GetRequestPrototype(method).New();\r\n+      resp_sender.own_request(req);\r\n+      res = svc->GetResponsePrototype(method).New();\r\n+      resp_sender.own_response(res);\r\n+    }\r\n \r\n     if (__builtin_expect(!req || !res, 0)) {\r\n         PLOG(FATAL) << \"Fail to new req or res\";\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/843758103/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/844317440","html_url":"https://github.com/apache/brpc/issues/1271#issuecomment-844317440","issue_url":"https://api.github.com/repos/apache/brpc/issues/1271","id":844317440,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NDMxNzQ0MA==","user":{"login":"guoliushui","id":16949718,"node_id":"MDQ6VXNlcjE2OTQ5NzE4","avatar_url":"https://avatars.githubusercontent.com/u/16949718?v=4","gravatar_id":"","url":"https://api.github.com/users/guoliushui","html_url":"https://github.com/guoliushui","followers_url":"https://api.github.com/users/guoliushui/followers","following_url":"https://api.github.com/users/guoliushui/following{/other_user}","gists_url":"https://api.github.com/users/guoliushui/gists{/gist_id}","starred_url":"https://api.github.com/users/guoliushui/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guoliushui/subscriptions","organizations_url":"https://api.github.com/users/guoliushui/orgs","repos_url":"https://api.github.com/users/guoliushui/repos","events_url":"https://api.github.com/users/guoliushui/events{/privacy}","received_events_url":"https://api.github.com/users/guoliushui/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-19T17:31:25Z","updated_at":"2021-05-19T17:31:25Z","author_association":"NONE","body":"在高qps下，我也遇到了这个问题，辛苦有进展后在这里同步下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/844317440/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845110570","html_url":"https://github.com/apache/brpc/issues/1271#issuecomment-845110570","issue_url":"https://api.github.com/repos/apache/brpc/issues/1271","id":845110570,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTExMDU3MA==","user":{"login":"rebornfz","id":27042311,"node_id":"MDQ6VXNlcjI3MDQyMzEx","avatar_url":"https://avatars.githubusercontent.com/u/27042311?v=4","gravatar_id":"","url":"https://api.github.com/users/rebornfz","html_url":"https://github.com/rebornfz","followers_url":"https://api.github.com/users/rebornfz/followers","following_url":"https://api.github.com/users/rebornfz/following{/other_user}","gists_url":"https://api.github.com/users/rebornfz/gists{/gist_id}","starred_url":"https://api.github.com/users/rebornfz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rebornfz/subscriptions","organizations_url":"https://api.github.com/users/rebornfz/orgs","repos_url":"https://api.github.com/users/rebornfz/repos","events_url":"https://api.github.com/users/rebornfz/events{/privacy}","received_events_url":"https://api.github.com/users/rebornfz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-20T13:15:22Z","updated_at":"2021-05-20T13:15:22Z","author_association":"NONE","body":"> 在高qps下，我也遇到了这个问题，辛苦有进展后在这里同步下\r\n我是因为用bthread并发下载导致的（文档里说了不要用bthread并发下载），改成异步就好了\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845110570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845588028","html_url":"https://github.com/apache/brpc/pull/1409#issuecomment-845588028","issue_url":"https://api.github.com/repos/apache/brpc/issues/1409","id":845588028,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTU4ODAyOA==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T01:29:48Z","updated_at":"2021-05-21T01:29:48Z","author_association":"MEMBER","body":"@jamesge ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845588028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845614816","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-845614816","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":845614816,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTYxNDgxNg==","user":{"login":"fuzhufang","id":6743583,"node_id":"MDQ6VXNlcjY3NDM1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6743583?v=4","gravatar_id":"","url":"https://api.github.com/users/fuzhufang","html_url":"https://github.com/fuzhufang","followers_url":"https://api.github.com/users/fuzhufang/followers","following_url":"https://api.github.com/users/fuzhufang/following{/other_user}","gists_url":"https://api.github.com/users/fuzhufang/gists{/gist_id}","starred_url":"https://api.github.com/users/fuzhufang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fuzhufang/subscriptions","organizations_url":"https://api.github.com/users/fuzhufang/orgs","repos_url":"https://api.github.com/users/fuzhufang/repos","events_url":"https://api.github.com/users/fuzhufang/events{/privacy}","received_events_url":"https://api.github.com/users/fuzhufang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T02:54:23Z","updated_at":"2021-05-21T03:03:42Z","author_association":"NONE","body":"非常感谢您的指点.  同是百度开源, 就是说 baikal-client 是可以使用在 bthread 里的,  我在baikal-client代码里是看到有bthread命名的代码,  请问使用上是否有些值得注意的地方呢?  \r\n\r\n> baikalDB开源了一个，欢迎交流使用：https://github.com/baidu/BaikalDB/tree/master/baikal-client\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845614816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845635357","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-845635357","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":845635357,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTYzNTM1Nw==","user":{"login":"lgqss","id":40157860,"node_id":"MDQ6VXNlcjQwMTU3ODYw","avatar_url":"https://avatars.githubusercontent.com/u/40157860?v=4","gravatar_id":"","url":"https://api.github.com/users/lgqss","html_url":"https://github.com/lgqss","followers_url":"https://api.github.com/users/lgqss/followers","following_url":"https://api.github.com/users/lgqss/following{/other_user}","gists_url":"https://api.github.com/users/lgqss/gists{/gist_id}","starred_url":"https://api.github.com/users/lgqss/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lgqss/subscriptions","organizations_url":"https://api.github.com/users/lgqss/orgs","repos_url":"https://api.github.com/users/lgqss/repos","events_url":"https://api.github.com/users/lgqss/events{/privacy}","received_events_url":"https://api.github.com/users/lgqss/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T03:58:25Z","updated_at":"2021-05-21T03:58:25Z","author_association":"NONE","body":"需要注意的就是在bthread中使用会切pthread，所以不能使用pthread local，连接数配置需要考虑并发请求数，而不是ptrhead数","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845635357/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845655979","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-845655979","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":845655979,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTY1NTk3OQ==","user":{"login":"luobuda","id":5410447,"node_id":"MDQ6VXNlcjU0MTA0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5410447?v=4","gravatar_id":"","url":"https://api.github.com/users/luobuda","html_url":"https://github.com/luobuda","followers_url":"https://api.github.com/users/luobuda/followers","following_url":"https://api.github.com/users/luobuda/following{/other_user}","gists_url":"https://api.github.com/users/luobuda/gists{/gist_id}","starred_url":"https://api.github.com/users/luobuda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luobuda/subscriptions","organizations_url":"https://api.github.com/users/luobuda/orgs","repos_url":"https://api.github.com/users/luobuda/repos","events_url":"https://api.github.com/users/luobuda/events{/privacy}","received_events_url":"https://api.github.com/users/luobuda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T05:06:08Z","updated_at":"2021-05-21T05:08:17Z","author_association":"NONE","body":"还有需要配置文件，可以参考https://gist.github.com/luobuda/3d7f9cd4ca187a6e27f507f210449a2d","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845655979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845684549","html_url":"https://github.com/apache/brpc/issues/1403#issuecomment-845684549","issue_url":"https://api.github.com/repos/apache/brpc/issues/1403","id":845684549,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NTY4NDU0OQ==","user":{"login":"SHASHENp","id":44922899,"node_id":"MDQ6VXNlcjQ0OTIyODk5","avatar_url":"https://avatars.githubusercontent.com/u/44922899?v=4","gravatar_id":"","url":"https://api.github.com/users/SHASHENp","html_url":"https://github.com/SHASHENp","followers_url":"https://api.github.com/users/SHASHENp/followers","following_url":"https://api.github.com/users/SHASHENp/following{/other_user}","gists_url":"https://api.github.com/users/SHASHENp/gists{/gist_id}","starred_url":"https://api.github.com/users/SHASHENp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SHASHENp/subscriptions","organizations_url":"https://api.github.com/users/SHASHENp/orgs","repos_url":"https://api.github.com/users/SHASHENp/repos","events_url":"https://api.github.com/users/SHASHENp/events{/privacy}","received_events_url":"https://api.github.com/users/SHASHENp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-21T06:14:48Z","updated_at":"2021-05-21T06:14:48Z","author_association":"NONE","body":"好像不支持，我在Channel看到存储地址的EndPoint类型是IPv4的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/845684549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846490302","html_url":"https://github.com/apache/brpc/pull/1409#issuecomment-846490302","issue_url":"https://api.github.com/repos/apache/brpc/issues/1409","id":846490302,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjQ5MDMwMg==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-23T02:16:00Z","updated_at":"2021-05-23T02:16:00Z","author_association":"CONTRIBUTOR","body":"@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846490302/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846620372","html_url":"https://github.com/apache/brpc/pull/1409#issuecomment-846620372","issue_url":"https://api.github.com/repos/apache/brpc/issues/1409","id":846620372,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjYyMDM3Mg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-23T20:30:05Z","updated_at":"2021-05-23T20:30:05Z","author_association":"MEMBER","body":"Restarted CI.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846620372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846621370","html_url":"https://github.com/apache/brpc/pull/1411#issuecomment-846621370","issue_url":"https://api.github.com/repos/apache/brpc/issues/1411","id":846621370,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjYyMTM3MA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-23T20:38:39Z","updated_at":"2021-05-23T20:38:39Z","author_association":"MEMBER","body":"Thanks for the contribution!","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846621370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846722641","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-846722641","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":846722641,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NjcyMjY0MQ==","user":{"login":"hotaery","id":29942326,"node_id":"MDQ6VXNlcjI5OTQyMzI2","avatar_url":"https://avatars.githubusercontent.com/u/29942326?v=4","gravatar_id":"","url":"https://api.github.com/users/hotaery","html_url":"https://github.com/hotaery","followers_url":"https://api.github.com/users/hotaery/followers","following_url":"https://api.github.com/users/hotaery/following{/other_user}","gists_url":"https://api.github.com/users/hotaery/gists{/gist_id}","starred_url":"https://api.github.com/users/hotaery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hotaery/subscriptions","organizations_url":"https://api.github.com/users/hotaery/orgs","repos_url":"https://api.github.com/users/hotaery/repos","events_url":"https://api.github.com/users/hotaery/events{/privacy}","received_events_url":"https://api.github.com/users/hotaery/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T04:24:52Z","updated_at":"2021-05-24T04:24:52Z","author_association":"NONE","body":"对端启动了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846722641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846987719","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-846987719","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":846987719,"node_id":"MDEyOklzc3VlQ29tbWVudDg0Njk4NzcxOQ==","user":{"login":"hotaery","id":29942326,"node_id":"MDQ6VXNlcjI5OTQyMzI2","avatar_url":"https://avatars.githubusercontent.com/u/29942326?v=4","gravatar_id":"","url":"https://api.github.com/users/hotaery","html_url":"https://github.com/hotaery","followers_url":"https://api.github.com/users/hotaery/followers","following_url":"https://api.github.com/users/hotaery/following{/other_user}","gists_url":"https://api.github.com/users/hotaery/gists{/gist_id}","starred_url":"https://api.github.com/users/hotaery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hotaery/subscriptions","organizations_url":"https://api.github.com/users/hotaery/orgs","repos_url":"https://api.github.com/users/hotaery/repos","events_url":"https://api.github.com/users/hotaery/events{/privacy}","received_events_url":"https://api.github.com/users/hotaery/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T11:44:40Z","updated_at":"2021-05-24T11:44:40Z","author_association":"NONE","body":"> 对端启动了吗？\r\n\r\n能提供下最小复现的代码吗，可能不是对端没有启动的原因","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/846987719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847183931","html_url":"https://github.com/apache/brpc/pull/1409#issuecomment-847183931","issue_url":"https://api.github.com/repos/apache/brpc/issues/1409","id":847183931,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzE4MzkzMQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T16:41:20Z","updated_at":"2021-05-24T16:41:20Z","author_association":"MEMBER","body":"PR 乱了。。出现了其他diff。我重新提","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847183931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847188495","html_url":"https://github.com/apache/brpc/pull/1413#issuecomment-847188495","issue_url":"https://api.github.com/repos/apache/brpc/issues/1413","id":847188495,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzE4ODQ5NQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T16:49:07Z","updated_at":"2021-05-24T16:49:07Z","author_association":"MEMBER","body":"@zyearn 之前的PR diff乱了，重提了一个","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847188495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847224209","html_url":"https://github.com/apache/brpc/pull/1413#issuecomment-847224209","issue_url":"https://api.github.com/repos/apache/brpc/issues/1413","id":847224209,"node_id":"MDEyOklzc3VlQ29tbWVudDg0NzIyNDIwOQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-24T17:51:48Z","updated_at":"2021-05-24T17:51:48Z","author_association":"MEMBER","body":"感谢修复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/847224209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851325534","html_url":"https://github.com/apache/brpc/issues/209#issuecomment-851325534","issue_url":"https://api.github.com/repos/apache/brpc/issues/209","id":851325534,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTMyNTUzNA==","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T08:42:38Z","updated_at":"2021-05-31T08:42:38Z","author_association":"MEMBER","body":"Hi, I wonder if MySQL supported now? If not, whats the status now?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851325534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851333322","html_url":"https://github.com/apache/brpc/issues/1392#issuecomment-851333322","issue_url":"https://api.github.com/repos/apache/brpc/issues/1392","id":851333322,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTMzMzMyMg==","user":{"login":"namelij","id":20858692,"node_id":"MDQ6VXNlcjIwODU4Njky","avatar_url":"https://avatars.githubusercontent.com/u/20858692?v=4","gravatar_id":"","url":"https://api.github.com/users/namelij","html_url":"https://github.com/namelij","followers_url":"https://api.github.com/users/namelij/followers","following_url":"https://api.github.com/users/namelij/following{/other_user}","gists_url":"https://api.github.com/users/namelij/gists{/gist_id}","starred_url":"https://api.github.com/users/namelij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namelij/subscriptions","organizations_url":"https://api.github.com/users/namelij/orgs","repos_url":"https://api.github.com/users/namelij/repos","events_url":"https://api.github.com/users/namelij/events{/privacy}","received_events_url":"https://api.github.com/users/namelij/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T08:53:07Z","updated_at":"2021-05-31T08:53:07Z","author_association":"NONE","body":"按照提示，编译时候，需要指定gflags gtest库","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851333322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851336541","html_url":"https://github.com/apache/brpc/issues/1416#issuecomment-851336541","issue_url":"https://api.github.com/repos/apache/brpc/issues/1416","id":851336541,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTMzNjU0MQ==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T08:57:38Z","updated_at":"2021-05-31T08:57:38Z","author_association":"CONTRIBUTOR","body":"不需要这么麻烦，E收到请求后依次请求各个服务即可A RPC -> B RPC -> C RPC -> D RPC。brpc优点之一就是可以用同步的方式写异步执行的代码，bthread在框架层面提供这样的调度。建议先看下[文档](https://github.com/apache/incubator-brpc/blob/master/docs/cn/client.md#%E5%8F%91%E8%B5%B7%E8%AE%BF%E9%97%AE)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851336541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851340806","html_url":"https://github.com/apache/brpc/issues/1416#issuecomment-851340806","issue_url":"https://api.github.com/repos/apache/brpc/issues/1416","id":851340806,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTM0MDgwNg==","user":{"login":"namelij","id":20858692,"node_id":"MDQ6VXNlcjIwODU4Njky","avatar_url":"https://avatars.githubusercontent.com/u/20858692?v=4","gravatar_id":"","url":"https://api.github.com/users/namelij","html_url":"https://github.com/namelij","followers_url":"https://api.github.com/users/namelij/followers","following_url":"https://api.github.com/users/namelij/following{/other_user}","gists_url":"https://api.github.com/users/namelij/gists{/gist_id}","starred_url":"https://api.github.com/users/namelij/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/namelij/subscriptions","organizations_url":"https://api.github.com/users/namelij/orgs","repos_url":"https://api.github.com/users/namelij/repos","events_url":"https://api.github.com/users/namelij/events{/privacy}","received_events_url":"https://api.github.com/users/namelij/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T09:03:32Z","updated_at":"2021-05-31T09:03:32Z","author_association":"NONE","body":"> 不需要这么麻烦，E收到请求后依次请求各个服务即可A RPC -> B RPC -> C RPC -> D RPC。brpc优点之一就是可以用同步的方式写异步执行的代码，bthread在框架层面提供这样的调度。建议先看下[文档](https://github.com/apache/incubator-brpc/blob/master/docs/cn/client.md#%E5%8F%91%E8%B5%B7%E8%AE%BF%E9%97%AE)\r\n\r\n现在就是这么实现的，原本想通过ExecutionQueue来提升下性能，看来还是按照现在的方式来做\r\n\r\n感谢回复","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851340806/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851430090","html_url":"https://github.com/apache/brpc/issues/1403#issuecomment-851430090","issue_url":"https://api.github.com/repos/apache/brpc/issues/1403","id":851430090,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTQzMDA5MA==","user":{"login":"MaoJianwei","id":12800168,"node_id":"MDQ6VXNlcjEyODAwMTY4","avatar_url":"https://avatars.githubusercontent.com/u/12800168?v=4","gravatar_id":"","url":"https://api.github.com/users/MaoJianwei","html_url":"https://github.com/MaoJianwei","followers_url":"https://api.github.com/users/MaoJianwei/followers","following_url":"https://api.github.com/users/MaoJianwei/following{/other_user}","gists_url":"https://api.github.com/users/MaoJianwei/gists{/gist_id}","starred_url":"https://api.github.com/users/MaoJianwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MaoJianwei/subscriptions","organizations_url":"https://api.github.com/users/MaoJianwei/orgs","repos_url":"https://api.github.com/users/MaoJianwei/repos","events_url":"https://api.github.com/users/MaoJianwei/events{/privacy}","received_events_url":"https://api.github.com/users/MaoJianwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T11:38:48Z","updated_at":"2021-05-31T11:38:48Z","author_association":"NONE","body":"> 好像不支持，我在Channel看到存储地址的EndPoint类型是IPv4的\r\n\r\n这样啊，多谢哈","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851430090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851473526","html_url":"https://github.com/apache/brpc/issues/1382#issuecomment-851473526","issue_url":"https://api.github.com/repos/apache/brpc/issues/1382","id":851473526,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTQ3MzUyNg==","user":{"login":"peeweep","id":624223,"node_id":"MDQ6VXNlcjYyNDIyMw==","avatar_url":"https://avatars.githubusercontent.com/u/624223?v=4","gravatar_id":"","url":"https://api.github.com/users/peeweep","html_url":"https://github.com/peeweep","followers_url":"https://api.github.com/users/peeweep/followers","following_url":"https://api.github.com/users/peeweep/following{/other_user}","gists_url":"https://api.github.com/users/peeweep/gists{/gist_id}","starred_url":"https://api.github.com/users/peeweep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peeweep/subscriptions","organizations_url":"https://api.github.com/users/peeweep/orgs","repos_url":"https://api.github.com/users/peeweep/repos","events_url":"https://api.github.com/users/peeweep/events{/privacy}","received_events_url":"https://api.github.com/users/peeweep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T12:57:32Z","updated_at":"2021-05-31T12:57:32Z","author_association":"NONE","body":"Is there any updates? @VZIKL ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851473526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851578301","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-851578301","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":851578301,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTU3ODMwMQ==","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-31T16:06:11Z","updated_at":"2021-05-31T16:06:11Z","author_association":"MEMBER","body":"> 需要注意的就是在bthread中使用会切pthread，所以不能使用pthread local，连接数配置需要考虑并发请求数，而不是ptrhead数\r\n\r\n请问 “连接数配置需要考虑并发请求数，而不是ptrhead数” 是什么意思呢？指的是 https://gist.github.com/luobuda/3d7f9cd4ca187a6e27f507f210449a2d 这里面的 ：\r\n```\r\n#每个connectionpool中的连接数\r\nconnection_num: 3\r\n#每个实例最大的连接数\r\nmax_connection_per_instance:5\r\n```\r\n这些吗？\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851578301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851759823","html_url":"https://github.com/apache/brpc/issues/615#issuecomment-851759823","issue_url":"https://api.github.com/repos/apache/brpc/issues/615","id":851759823,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc1OTgyMw==","user":{"login":"yqynju","id":3240660,"node_id":"MDQ6VXNlcjMyNDA2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3240660?v=4","gravatar_id":"","url":"https://api.github.com/users/yqynju","html_url":"https://github.com/yqynju","followers_url":"https://api.github.com/users/yqynju/followers","following_url":"https://api.github.com/users/yqynju/following{/other_user}","gists_url":"https://api.github.com/users/yqynju/gists{/gist_id}","starred_url":"https://api.github.com/users/yqynju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqynju/subscriptions","organizations_url":"https://api.github.com/users/yqynju/orgs","repos_url":"https://api.github.com/users/yqynju/repos","events_url":"https://api.github.com/users/yqynju/events{/privacy}","received_events_url":"https://api.github.com/users/yqynju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T02:27:25Z","updated_at":"2021-06-01T02:27:25Z","author_association":"NONE","body":"> 经过定位，发现应用代码中的发起的一些网络调用有问题，导至brpc的work线程被read调用阻塞了，从而新请求触发max_concurrency错误，同时导致一些连接无法正常关闭而出现了CLOSE_WAIT状态.\r\n\r\n能详细展开一下不？感谢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851759823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851778255","html_url":"https://github.com/apache/brpc/issues/1404#issuecomment-851778255","issue_url":"https://api.github.com/repos/apache/brpc/issues/1404","id":851778255,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc3ODI1NQ==","user":{"login":"luobuda","id":5410447,"node_id":"MDQ6VXNlcjU0MTA0NDc=","avatar_url":"https://avatars.githubusercontent.com/u/5410447?v=4","gravatar_id":"","url":"https://api.github.com/users/luobuda","html_url":"https://github.com/luobuda","followers_url":"https://api.github.com/users/luobuda/followers","following_url":"https://api.github.com/users/luobuda/following{/other_user}","gists_url":"https://api.github.com/users/luobuda/gists{/gist_id}","starred_url":"https://api.github.com/users/luobuda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luobuda/subscriptions","organizations_url":"https://api.github.com/users/luobuda/orgs","repos_url":"https://api.github.com/users/luobuda/repos","events_url":"https://api.github.com/users/luobuda/events{/privacy}","received_events_url":"https://api.github.com/users/luobuda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T03:28:30Z","updated_at":"2021-06-01T03:28:30Z","author_association":"NONE","body":"> > 需要注意的就是在bthread中使用会切pthread，所以不能使用pthread local，连接数配置需要考虑并发请求数，而不是ptrhead数\r\n> \r\n> 请问 “连接数配置需要考虑并发请求数，而不是ptrhead数” 是什么意思呢？指的是 https://gist.github.com/luobuda/3d7f9cd4ca187a6e27f507f210449a2d 这里面的 ：\r\n> \r\n> ```\r\n> #每个connectionpool中的连接数\r\n> connection_num: 3\r\n> #每个实例最大的连接数\r\n> max_connection_per_instance:5\r\n> ```\r\n> \r\n> 这些吗？\r\n这两个配置是对单个mysql实例来说的，“连接数配置需要考虑并发请求数，而不是ptrhead数” 其实说的链接数：pthread=M:N这种关系，baikal-client用的libmariadb异步接口\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851778255/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851781004","html_url":"https://github.com/apache/brpc/issues/1159#issuecomment-851781004","issue_url":"https://api.github.com/repos/apache/brpc/issues/1159","id":851781004,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc4MTAwNA==","user":{"login":"critical27","id":13706157,"node_id":"MDQ6VXNlcjEzNzA2MTU3","avatar_url":"https://avatars.githubusercontent.com/u/13706157?v=4","gravatar_id":"","url":"https://api.github.com/users/critical27","html_url":"https://github.com/critical27","followers_url":"https://api.github.com/users/critical27/followers","following_url":"https://api.github.com/users/critical27/following{/other_user}","gists_url":"https://api.github.com/users/critical27/gists{/gist_id}","starred_url":"https://api.github.com/users/critical27/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/critical27/subscriptions","organizations_url":"https://api.github.com/users/critical27/orgs","repos_url":"https://api.github.com/users/critical27/repos","events_url":"https://api.github.com/users/critical27/events{/privacy}","received_events_url":"https://api.github.com/users/critical27/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T03:38:07Z","updated_at":"2021-06-01T03:38:45Z","author_association":"NONE","body":"Still failed on macos big sur 11.3.1, it will fail if `--with-glog`. Will work if no `--with-glog` is added. Perhaps glog need to build a static lib.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851781004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851785526","html_url":"https://github.com/apache/brpc/issues/1419#issuecomment-851785526","issue_url":"https://api.github.com/repos/apache/brpc/issues/1419","id":851785526,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc4NTUyNg==","user":{"login":"yz1509","id":18455347,"node_id":"MDQ6VXNlcjE4NDU1MzQ3","avatar_url":"https://avatars.githubusercontent.com/u/18455347?v=4","gravatar_id":"","url":"https://api.github.com/users/yz1509","html_url":"https://github.com/yz1509","followers_url":"https://api.github.com/users/yz1509/followers","following_url":"https://api.github.com/users/yz1509/following{/other_user}","gists_url":"https://api.github.com/users/yz1509/gists{/gist_id}","starred_url":"https://api.github.com/users/yz1509/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yz1509/subscriptions","organizations_url":"https://api.github.com/users/yz1509/orgs","repos_url":"https://api.github.com/users/yz1509/repos","events_url":"https://api.github.com/users/yz1509/events{/privacy}","received_events_url":"https://api.github.com/users/yz1509/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T03:54:02Z","updated_at":"2021-06-01T03:54:02Z","author_association":"NONE","body":"我们线上也遇到这个问题，sql 的慢查询会影响同进程内的 redis 访问，是使用粗暴的加大 worker 数量来应对 = =\r\n\r\n[关于在bthread里调用网络操作的问题](https://github.com/apache/incubator-brpc/issues/194)\r\n[若有大量的bthread调用了阻塞的pthread或系统函数，会影响RPC运行么](https://github.com/apache/incubator-brpc/blob/master/docs/cn/bthread.md#q%E8%8B%A5%E6%9C%89%E5%A4%A7%E9%87%8F%E7%9A%84bthread%E8%B0%83%E7%94%A8%E4%BA%86%E9%98%BB%E5%A1%9E%E7%9A%84pthread%E6%88%96%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0%E4%BC%9A%E5%BD%B1%E5%93%8Drpc%E8%BF%90%E8%A1%8C%E4%B9%88)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851785526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851786177","html_url":"https://github.com/apache/brpc/issues/1419#issuecomment-851786177","issue_url":"https://api.github.com/repos/apache/brpc/issues/1419","id":851786177,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc4NjE3Nw==","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T03:56:39Z","updated_at":"2021-06-01T03:56:39Z","author_association":"MEMBER","body":"@yz1509 Seems brpc has official redis client, but no MySQL client...","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851786177/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851792461","html_url":"https://github.com/apache/brpc/issues/1419#issuecomment-851792461","issue_url":"https://api.github.com/repos/apache/brpc/issues/1419","id":851792461,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTc5MjQ2MQ==","user":{"login":"yz1509","id":18455347,"node_id":"MDQ6VXNlcjE4NDU1MzQ3","avatar_url":"https://avatars.githubusercontent.com/u/18455347?v=4","gravatar_id":"","url":"https://api.github.com/users/yz1509","html_url":"https://github.com/yz1509","followers_url":"https://api.github.com/users/yz1509/followers","following_url":"https://api.github.com/users/yz1509/following{/other_user}","gists_url":"https://api.github.com/users/yz1509/gists{/gist_id}","starred_url":"https://api.github.com/users/yz1509/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yz1509/subscriptions","organizations_url":"https://api.github.com/users/yz1509/orgs","repos_url":"https://api.github.com/users/yz1509/repos","events_url":"https://api.github.com/users/yz1509/events{/privacy}","received_events_url":"https://api.github.com/users/yz1509/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T04:17:57Z","updated_at":"2021-06-01T04:17:57Z","author_association":"NONE","body":"@mapleFU 确实只有 redis client 是基于 `CallMethod` 重写了，我们线上使用的是框架组自己封装的 MySQL client","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851792461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851818132","html_url":"https://github.com/apache/brpc/issues/1419#issuecomment-851818132","issue_url":"https://api.github.com/repos/apache/brpc/issues/1419","id":851818132,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTgxODEzMg==","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T05:24:50Z","updated_at":"2021-06-01T05:24:50Z","author_association":"MEMBER","body":"@yz1509 Currently we using a pthread pool and using the blocking client to visit. Seems that you are using libco to hook the IO?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851818132/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851913597","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-851913597","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":851913597,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTkxMzU5Nw==","user":{"login":"yqynju","id":3240660,"node_id":"MDQ6VXNlcjMyNDA2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3240660?v=4","gravatar_id":"","url":"https://api.github.com/users/yqynju","html_url":"https://github.com/yqynju","followers_url":"https://api.github.com/users/yqynju/followers","following_url":"https://api.github.com/users/yqynju/following{/other_user}","gists_url":"https://api.github.com/users/yqynju/gists{/gist_id}","starred_url":"https://api.github.com/users/yqynju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqynju/subscriptions","organizations_url":"https://api.github.com/users/yqynju/orgs","repos_url":"https://api.github.com/users/yqynju/repos","events_url":"https://api.github.com/users/yqynju/events{/privacy}","received_events_url":"https://api.github.com/users/yqynju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T07:58:04Z","updated_at":"2021-06-01T07:58:04Z","author_association":"NONE","body":"场景就是，\r\nclient --- server --- backupend\r\n如果client侧的timeout_ms比server到backupend的timeout_ms小的时候。\r\n\r\nclient超时，断开连接，server感知不到，导致链接处于CLOSE_WAIT，当超过了系统连接限制就进入假死状态。\r\n\r\n![image](https://user-images.githubusercontent.com/3240660/120287756-22ffdd80-c2f2-11eb-87af-5dad21e81161.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851913597/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851913884","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-851913884","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":851913884,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTkxMzg4NA==","user":{"login":"yqynju","id":3240660,"node_id":"MDQ6VXNlcjMyNDA2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3240660?v=4","gravatar_id":"","url":"https://api.github.com/users/yqynju","html_url":"https://github.com/yqynju","followers_url":"https://api.github.com/users/yqynju/followers","following_url":"https://api.github.com/users/yqynju/following{/other_user}","gists_url":"https://api.github.com/users/yqynju/gists{/gist_id}","starred_url":"https://api.github.com/users/yqynju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqynju/subscriptions","organizations_url":"https://api.github.com/users/yqynju/orgs","repos_url":"https://api.github.com/users/yqynju/repos","events_url":"https://api.github.com/users/yqynju/events{/privacy}","received_events_url":"https://api.github.com/users/yqynju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T07:58:26Z","updated_at":"2021-06-01T07:58:26Z","author_association":"NONE","body":"> > 对端启动了吗？\r\n> \r\n> 能提供下最小复现的代码吗，可能不是对端没有启动的原因\r\n\r\n场景就是，\r\nclient --- server --- backupend\r\n如果client侧的timeout_ms比server到backupend的timeout_ms小的时候。\r\n\r\nclient超时，断开连接，server感知不到，导致链接处于CLOSE_WAIT，当超过了系统连接限制就进入假死状态。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851913884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851928747","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-851928747","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":851928747,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTkyODc0Nw==","user":{"login":"yqynju","id":3240660,"node_id":"MDQ6VXNlcjMyNDA2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3240660?v=4","gravatar_id":"","url":"https://api.github.com/users/yqynju","html_url":"https://github.com/yqynju","followers_url":"https://api.github.com/users/yqynju/followers","following_url":"https://api.github.com/users/yqynju/following{/other_user}","gists_url":"https://api.github.com/users/yqynju/gists{/gist_id}","starred_url":"https://api.github.com/users/yqynju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqynju/subscriptions","organizations_url":"https://api.github.com/users/yqynju/orgs","repos_url":"https://api.github.com/users/yqynju/repos","events_url":"https://api.github.com/users/yqynju/events{/privacy}","received_events_url":"https://api.github.com/users/yqynju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T08:18:27Z","updated_at":"2021-06-01T08:18:27Z","author_association":"NONE","body":"--usercode_in_pthread=true","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851928747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851962763","html_url":"https://github.com/apache/brpc/issues/1410#issuecomment-851962763","issue_url":"https://api.github.com/repos/apache/brpc/issues/1410","id":851962763,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MTk2Mjc2Mw==","user":{"login":"yqynju","id":3240660,"node_id":"MDQ6VXNlcjMyNDA2NjA=","avatar_url":"https://avatars.githubusercontent.com/u/3240660?v=4","gravatar_id":"","url":"https://api.github.com/users/yqynju","html_url":"https://github.com/yqynju","followers_url":"https://api.github.com/users/yqynju/followers","following_url":"https://api.github.com/users/yqynju/following{/other_user}","gists_url":"https://api.github.com/users/yqynju/gists{/gist_id}","starred_url":"https://api.github.com/users/yqynju/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yqynju/subscriptions","organizations_url":"https://api.github.com/users/yqynju/orgs","repos_url":"https://api.github.com/users/yqynju/repos","events_url":"https://api.github.com/users/yqynju/events{/privacy}","received_events_url":"https://api.github.com/users/yqynju/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T09:06:52Z","updated_at":"2021-06-01T09:06:52Z","author_association":"NONE","body":"> --usercode_in_pthread=true\r\n\r\n去掉这个，CLOSE_WAIT很快就释放了，如果存在这个配置，CLOSE_WAIT会一直存在。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/851962763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852278740","html_url":"https://github.com/apache/brpc/issues/1419#issuecomment-852278740","issue_url":"https://api.github.com/repos/apache/brpc/issues/1419","id":852278740,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjI3ODc0MA==","user":{"login":"yz1509","id":18455347,"node_id":"MDQ6VXNlcjE4NDU1MzQ3","avatar_url":"https://avatars.githubusercontent.com/u/18455347?v=4","gravatar_id":"","url":"https://api.github.com/users/yz1509","html_url":"https://github.com/yz1509","followers_url":"https://api.github.com/users/yz1509/followers","following_url":"https://api.github.com/users/yz1509/following{/other_user}","gists_url":"https://api.github.com/users/yz1509/gists{/gist_id}","starred_url":"https://api.github.com/users/yz1509/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yz1509/subscriptions","organizations_url":"https://api.github.com/users/yz1509/orgs","repos_url":"https://api.github.com/users/yz1509/repos","events_url":"https://api.github.com/users/yz1509/events{/privacy}","received_events_url":"https://api.github.com/users/yz1509/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-01T16:45:56Z","updated_at":"2021-06-01T16:45:56Z","author_association":"NONE","body":"@mapleFU 框架组那边貌似是这么干的，具体细节我也不太清楚 = =","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852278740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852676743","html_url":"https://github.com/apache/brpc/issues/1322#issuecomment-852676743","issue_url":"https://api.github.com/repos/apache/brpc/issues/1322","id":852676743,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MjY3Njc0Mw==","user":{"login":"cfreebuf","id":22336250,"node_id":"MDQ6VXNlcjIyMzM2MjUw","avatar_url":"https://avatars.githubusercontent.com/u/22336250?v=4","gravatar_id":"","url":"https://api.github.com/users/cfreebuf","html_url":"https://github.com/cfreebuf","followers_url":"https://api.github.com/users/cfreebuf/followers","following_url":"https://api.github.com/users/cfreebuf/following{/other_user}","gists_url":"https://api.github.com/users/cfreebuf/gists{/gist_id}","starred_url":"https://api.github.com/users/cfreebuf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfreebuf/subscriptions","organizations_url":"https://api.github.com/users/cfreebuf/orgs","repos_url":"https://api.github.com/users/cfreebuf/repos","events_url":"https://api.github.com/users/cfreebuf/events{/privacy}","received_events_url":"https://api.github.com/users/cfreebuf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-02T03:00:40Z","updated_at":"2021-06-02T03:00:40Z","author_association":"NONE","body":"进度如何呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852676743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852763899","html_url":"https://github.com/apache/brpc/pull/1420#issuecomment-852763899","issue_url":"https://api.github.com/repos/apache/brpc/issues/1420","id":852763899,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Mjc2Mzg5OQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-02T06:10:30Z","updated_at":"2021-06-02T06:10:30Z","author_association":"MEMBER","body":"@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/852763899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/853313287","html_url":"https://github.com/apache/brpc/pull/1420#issuecomment-853313287","issue_url":"https://api.github.com/repos/apache/brpc/issues/1420","id":853313287,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzMxMzI4Nw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-02T19:07:21Z","updated_at":"2021-06-02T19:07:21Z","author_association":"MEMBER","body":"感谢修复。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/853313287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/853546823","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-853546823","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":853546823,"node_id":"MDEyOklzc3VlQ29tbWVudDg1MzU0NjgyMw==","user":{"login":"psylambda","id":36839348,"node_id":"MDQ6VXNlcjM2ODM5MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/36839348?v=4","gravatar_id":"","url":"https://api.github.com/users/psylambda","html_url":"https://github.com/psylambda","followers_url":"https://api.github.com/users/psylambda/followers","following_url":"https://api.github.com/users/psylambda/following{/other_user}","gists_url":"https://api.github.com/users/psylambda/gists{/gist_id}","starred_url":"https://api.github.com/users/psylambda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/psylambda/subscriptions","organizations_url":"https://api.github.com/users/psylambda/orgs","repos_url":"https://api.github.com/users/psylambda/repos","events_url":"https://api.github.com/users/psylambda/events{/privacy}","received_events_url":"https://api.github.com/users/psylambda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-03T04:11:47Z","updated_at":"2021-06-03T04:12:46Z","author_association":"NONE","body":"场景是情况1, server端异常宕机/断电, client端的tcp包会一直重传, 且重传间隔越来越长, 如下图所示。\r\n![image](https://user-images.githubusercontent.com/36839348/120583745-63ca3480-c461-11eb-9922-991084dd4301.png)\r\n\r\n在上图的例子中, client端在231秒和352秒分别发了一个重传包。 如果server端恰好在232秒恢复正常, 那么client端并不会立刻感知到, 而是在352秒时刻发重传包的时候才感知到, 并重新建tcp连接, 之后的请求才能正常被server端处理。  这意味着232秒到352秒时间内, 虽然server端恢复了, 但是client端的所有请求都持续报错。 \r\n\r\n\r\n* 对于grpc, 可以通过配置tcp_user_timeout, 来控制重传时间, 避免重传间隔过长导致server端恢复后, client端还要较长时间才能感知到\r\n* 对于brpc, 现在有办法避免这个问题么?\r\n\r\n@zyearn \r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/853546823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/854342119","html_url":"https://github.com/apache/brpc/pull/1422#issuecomment-854342119","issue_url":"https://api.github.com/repos/apache/brpc/issues/1422","id":854342119,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDM0MjExOQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T04:06:28Z","updated_at":"2021-06-04T04:06:28Z","author_association":"MEMBER","body":"@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/854342119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/854930046","html_url":"https://github.com/apache/brpc/issues/1423#issuecomment-854930046","issue_url":"https://api.github.com/repos/apache/brpc/issues/1423","id":854930046,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NDkzMDA0Ng==","user":{"login":"mapleFU","id":24351052,"node_id":"MDQ6VXNlcjI0MzUxMDUy","avatar_url":"https://avatars.githubusercontent.com/u/24351052?v=4","gravatar_id":"","url":"https://api.github.com/users/mapleFU","html_url":"https://github.com/mapleFU","followers_url":"https://api.github.com/users/mapleFU/followers","following_url":"https://api.github.com/users/mapleFU/following{/other_user}","gists_url":"https://api.github.com/users/mapleFU/gists{/gist_id}","starred_url":"https://api.github.com/users/mapleFU/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mapleFU/subscriptions","organizations_url":"https://api.github.com/users/mapleFU/orgs","repos_url":"https://api.github.com/users/mapleFU/repos","events_url":"https://api.github.com/users/mapleFU/events{/privacy}","received_events_url":"https://api.github.com/users/mapleFU/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-04T18:40:51Z","updated_at":"2021-06-04T18:40:51Z","author_association":"MEMBER","body":"oops, 似乎我搞错了, bthread 调 pthread blocking 接口应该不会有问题( 除非依赖 thread_local) ?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/854930046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855365307","html_url":"https://github.com/apache/brpc/issues/596#issuecomment-855365307","issue_url":"https://api.github.com/repos/apache/brpc/issues/596","id":855365307,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTM2NTMwNw==","user":{"login":"jl2005","id":2718972,"node_id":"MDQ6VXNlcjI3MTg5NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2718972?v=4","gravatar_id":"","url":"https://api.github.com/users/jl2005","html_url":"https://github.com/jl2005","followers_url":"https://api.github.com/users/jl2005/followers","following_url":"https://api.github.com/users/jl2005/following{/other_user}","gists_url":"https://api.github.com/users/jl2005/gists{/gist_id}","starred_url":"https://api.github.com/users/jl2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jl2005/subscriptions","organizations_url":"https://api.github.com/users/jl2005/orgs","repos_url":"https://api.github.com/users/jl2005/repos","events_url":"https://api.github.com/users/jl2005/events{/privacy}","received_events_url":"https://api.github.com/users/jl2005/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-06T09:05:09Z","updated_at":"2021-06-06T09:05:09Z","author_association":"NONE","body":"@dengzhanqiao  这个问题解决了吗？我也遇到同样的问题。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855365307/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855365702","html_url":"https://github.com/apache/brpc/issues/783#issuecomment-855365702","issue_url":"https://api.github.com/repos/apache/brpc/issues/783","id":855365702,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTM2NTcwMg==","user":{"login":"jl2005","id":2718972,"node_id":"MDQ6VXNlcjI3MTg5NzI=","avatar_url":"https://avatars.githubusercontent.com/u/2718972?v=4","gravatar_id":"","url":"https://api.github.com/users/jl2005","html_url":"https://github.com/jl2005","followers_url":"https://api.github.com/users/jl2005/followers","following_url":"https://api.github.com/users/jl2005/following{/other_user}","gists_url":"https://api.github.com/users/jl2005/gists{/gist_id}","starred_url":"https://api.github.com/users/jl2005/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jl2005/subscriptions","organizations_url":"https://api.github.com/users/jl2005/orgs","repos_url":"https://api.github.com/users/jl2005/repos","events_url":"https://api.github.com/users/jl2005/events{/privacy}","received_events_url":"https://api.github.com/users/jl2005/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-06T09:08:31Z","updated_at":"2021-06-06T09:08:31Z","author_association":"NONE","body":"@mingolm 请问这个问题解决了吗？我也遇到了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855365702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855533925","html_url":"https://github.com/apache/brpc/pull/1422#issuecomment-855533925","issue_url":"https://api.github.com/repos/apache/brpc/issues/1422","id":855533925,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NTUzMzkyNQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T02:34:19Z","updated_at":"2021-06-07T02:34:19Z","author_association":"MEMBER","body":"@zyearn 辛苦有空看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/855533925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/856252034","html_url":"https://github.com/apache/brpc/pull/1422#issuecomment-856252034","issue_url":"https://api.github.com/repos/apache/brpc/issues/1422","id":856252034,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NjI1MjAzNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-07T20:57:21Z","updated_at":"2021-06-07T20:57:21Z","author_association":"MEMBER","body":"已合Thanks","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/856252034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857291478","html_url":"https://github.com/apache/brpc/pull/1381#issuecomment-857291478","issue_url":"https://api.github.com/repos/apache/brpc/issues/1381","id":857291478,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzI5MTQ3OA==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T00:57:38Z","updated_at":"2021-06-09T00:57:38Z","author_association":"MEMBER","body":"我也遇到这个问题，虽然不影响编译。但是warning确实太多了…我是gcc 11。希望官方看一下 @jamesge  @zyearn @cdjingit ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857291478/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857303249","html_url":"https://github.com/apache/brpc/issues/1044#issuecomment-857303249","issue_url":"https://api.github.com/repos/apache/brpc/issues/1044","id":857303249,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzMwMzI0OQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T01:33:36Z","updated_at":"2021-06-09T01:33:36Z","author_association":"MEMBER","body":"这个是因为你编译的protobuf没有开启C++11的编译参数。所以protobuf的string不会套上cxx11的命名空间！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857303249/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857524936","html_url":"https://github.com/apache/brpc/pull/1426#issuecomment-857524936","issue_url":"https://api.github.com/repos/apache/brpc/issues/1426","id":857524936,"node_id":"MDEyOklzc3VlQ29tbWVudDg1NzUyNDkzNg==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T09:07:49Z","updated_at":"2021-06-09T09:07:49Z","author_association":"MEMBER","body":"@chenzhangyi ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857524936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857796041","html_url":"https://github.com/apache/brpc/pull/1427#issuecomment-857796041","issue_url":"https://api.github.com/repos/apache/brpc/issues/1427","id":857796041,"node_id":"MDEyOklzc3VlQ29tbWVudDg1Nzc5NjA0MQ==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T15:21:22Z","updated_at":"2021-06-09T15:21:22Z","author_association":"MEMBER","body":"@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/857796041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858067672","html_url":"https://github.com/apache/brpc/issues/1154#issuecomment-858067672","issue_url":"https://api.github.com/repos/apache/brpc/issues/1154","id":858067672,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA2NzY3Mg==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:10:53Z","updated_at":"2021-06-09T20:10:53Z","author_association":"MEMBER","body":"这个需要通过brpc支持SO_KEEPALIVE来实现了。目前可以通过设置rpc超时时间来控制一下这个等待时间。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858067672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858070960","html_url":"https://github.com/apache/brpc/pull/1427#issuecomment-858070960","issue_url":"https://api.github.com/repos/apache/brpc/issues/1427","id":858070960,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODA3MDk2MA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-09T20:15:08Z","updated_at":"2021-06-09T20:15:08Z","author_association":"MEMBER","body":"能帮忙验证下目前master是不是把这个警告了去除了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858070960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858211183","html_url":"https://github.com/apache/brpc/issues/1347#issuecomment-858211183","issue_url":"https://api.github.com/repos/apache/brpc/issues/1347","id":858211183,"node_id":"MDEyOklzc3VlQ29tbWVudDg1ODIxMTE4Mw==","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-10T01:29:54Z","updated_at":"2021-06-10T01:29:54Z","author_association":"MEMBER","body":" 可以把完整url贴出来看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/858211183/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]