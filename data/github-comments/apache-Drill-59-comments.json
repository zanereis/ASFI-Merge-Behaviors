[{"url":"https://api.github.com/repos/apache/drill/issues/comments/560383657","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560383657","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560383657,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDM4MzY1Nw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T12:52:51Z","updated_at":"2019-12-02T12:52:51Z","author_association":"MEMBER","body":"Looks like changing previous approach if **it is possible** might be rather hard and might take long  time. Since this Jira is just aligns tests with existing approach and is a release broker (is needed to merge Hadoop 3 upgrade), I suggest the following:\r\n@agozhiy - to address general code review comments (renaming etc) not connected with approach.\r\n@vvysotskyi - to merge the changes and start the release.\r\n\r\n@paul-rogers / @vvysotskyi is this acceptable?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560383657/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560395023","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560395023","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560395023,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDM5NTAyMw==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T13:24:29Z","updated_at":"2019-12-02T13:24:29Z","author_association":"MEMBER","body":"@arina-ielchiieva, yes, it is acceptable for me.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560395023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560440925","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-560440925","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":560440925,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDQ0MDkyNQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T15:18:29Z","updated_at":"2019-12-02T15:18:29Z","author_association":"MEMBER","body":"@KazydubB looks like `org.apache.drill.exec.physical.resultSet.project.ProjectionType` does not support Dict type, could you please check?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560440925/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560491448","html_url":"https://github.com/apache/drill/pull/1892#issuecomment-560491448","issue_url":"https://api.github.com/repos/apache/drill/issues/1892","id":560491448,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDQ5MTQ0OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T17:16:07Z","updated_at":"2019-12-02T17:16:07Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, @cgivre, either path is fine. Most of the existing storage plugins are copy/paste efforts from earlier work. There is a large amount of duplication and lots of \"tradition\" code that may or may not be correct. It could be a burden to have to learn the new, simpler framework rather than just repeating past practice. All that said, the new framework was created for a different REST service, so porting this one should be pretty simple.  ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560491448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560493496","html_url":"https://github.com/apache/drill/pull/1914#issuecomment-560493496","issue_url":"https://api.github.com/repos/apache/drill/issues/1914","id":560493496,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDQ5MzQ5Ng==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T17:21:13Z","updated_at":"2019-12-02T17:26:35Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, excellent point; a reusable framework is more useful if some explanation exists for use. There are two sources, both preliminary. First, there are comments in the code: `package-info.java` files and Javadoc. Second, there is an early draft of a guide on [this wiki](https://github.com/paul-rogers/drill/wiki/Create-a-Storage-Plugin). At present, the pages describe starting from scratch, but that got so complex that I ended up creating this framework instead. The pages need to be updated based on this framework. Any feedback would be greatly appreciated!\r\n\r\nIt might make sense for me to update the wiki before the review; that way you can provide feedback on both the code and documentation. I'll tackle that over the next few days.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560493496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560498165","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-560498165","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":560498165,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDQ5ODE2NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T17:33:30Z","updated_at":"2019-12-02T17:33:30Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, @KazydubB, it turns out that `ProjectionType` does support `DICT`. This is a subtle topic. The projection type encodes information we can glean from the `SELECT` list, as encoded in the `SchemaPath`: `a`, `a[3]`, `a.b`. As a result, `DICT` is already covered: a reference will be either to the whole dict: `d`, or to a member: `d.m`.\r\n\r\nWe would change the `ProjectionType` only if we enhance the `SchemaPath` to, say, allow Python-like syntax: `d[`foo`]. Did we make any such changes?  ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560498165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560512155","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560512155","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560512155,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUxMjE1NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T18:08:12Z","updated_at":"2019-12-02T18:08:12Z","author_association":"CONTRIBUTOR","body":"@agozhiy, thank you for the explanation. To summarize, when we run a Drillbit, patching occurs. This means that any test that starts a Drillbit should *not* need to patch. In fact, we probably *do not want* to patch: we need the tests to verify that the Drillbit does any needed patching on its own.\r\n\r\nWe have tests that do not start a Drillbit; these tend to test specific bits of the system. Such tests should not need patching unless they pull in one of the affected dependencies. In this case, it makes sense for the test to explicitly declare that it needs patching so we can verify that the dependency works as needed.\r\n\r\nFrom this, we get the following suggestion:\r\n\r\n* Any test that derives from `BaseTestQuery` or `ClusterTest` will start a Drillbit. So the test *should not* attempt to patch as doing so will hide any Drillbit patching errors.\r\n* Any other test should optionally invoke patching if needed for the specific item under test. (For example, if we have HBase, MapR or other tests that do unit tests without a Drillbit.) In this case, part of the test is to verify that the patching works for that dependency.\r\n\r\nA result of this thinking is that we *should not* create a new base test class that always does patching. \r\n\r\nI wonder, how does the result above differ from what we already do?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560512155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560518278","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560518278","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560518278,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUxODI3OA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T18:22:35Z","updated_at":"2019-12-02T18:22:35Z","author_association":"MEMBER","body":"@paul-rogers, your suggestion sounds reasonable to me, but one more thing should be mentioned - is that we use guava in test classes also, so there are possible cases when class is loaded before Drill is patched, and therefore patching is failed. I can observe such scenarios at least for `Preconditions` class.\r\n\r\nAlso, before the changes in this PR, patching was produced in `DrillTest` static block (one more common parent for a lot of test classes).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560518278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560539390","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560539390","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560539390,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDUzOTM5MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T19:15:05Z","updated_at":"2019-12-02T19:15:05Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi, thanks for the additional info. Doing the patching in a static block makes sense; that ensures the patching is done early (though it still depends on when the class is loaded.)\r\n\r\nPutting the patching in a test base class solves the ordering issue: the static block will be invoked before any other code in the test. However, the problem with a base class is we'd need a common base class for all tests, as was done in this PR. This means that we then mask the Drillbit patching, which, as explained earlier, we don't want to do.\r\n\r\nI wonder, can we define an interface to solve the problem? Something like this:\r\n\r\n```\r\npublic interface RequiresGuavaPatch {\r\n  GuavaPatcher PATCHER = new GuavaPatcher();\r\n}\r\n\r\npublic class MyTest implements RequiresGuavaPatch {\r\n ...\r\n}\r\n``` \r\n\r\nAssuming that creating the patcher does the patches. Else, we can create a specialized \"shim\" class that does patching in its constructor.\r\n\r\nThis approach hides the details of patching, yet declares that the test does require patching. Only non-Drillbit tests need worry about this interface. And, only tests that have affected dependencies need implement the interface.\r\n\r\nAn alternative is to be more specific, `HBaseTest`, `MapRTest` and so on that do whatever patching is needed just for that dependency. As these dependencies upgrade their own dependencies, we can change the code behind, say, `MapRTest` to remove patching no longer needed.\r\n\r\nThis way, we track patching at the dependency level, rather than as a single global (and thus hard-to-understand) task.\r\n\r\nLet me clarify that point a bit. We need to patch due to specific transitive dependencies. As those are removed, we should remove patches. If we know that such-and-so patching is needed for each dependency, we can track when that patching is no longer needed. If patching is just done globally, then we have no good way to know why we do each patch, and when it is no longer needed.\r\n\r\nWould something like this solve the problem?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560539390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560573022","html_url":"https://github.com/apache/drill/pull/1915#issuecomment-560573022","issue_url":"https://api.github.com/repos/apache/drill/issues/1915","id":560573022,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDU3MzAyMg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T20:45:13Z","updated_at":"2019-12-02T20:45:13Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560573022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560639306","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560639306","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560639306,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDYzOTMwNg==","user":{"login":"agozhiy","id":31588230,"node_id":"MDQ6VXNlcjMxNTg4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/31588230?v=4","gravatar_id":"","url":"https://api.github.com/users/agozhiy","html_url":"https://github.com/agozhiy","followers_url":"https://api.github.com/users/agozhiy/followers","following_url":"https://api.github.com/users/agozhiy/following{/other_user}","gists_url":"https://api.github.com/users/agozhiy/gists{/gist_id}","starred_url":"https://api.github.com/users/agozhiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agozhiy/subscriptions","organizations_url":"https://api.github.com/users/agozhiy/orgs","repos_url":"https://api.github.com/users/agozhiy/repos","events_url":"https://api.github.com/users/agozhiy/events{/privacy}","received_events_url":"https://api.github.com/users/agozhiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T21:43:57Z","updated_at":"2019-12-02T21:43:57Z","author_association":"MEMBER","body":"@paul-rogers, the approach you suggested is reasonable and actually it is similar to the one used in Drill now. But it doesn't solve the original issue. Let me describe it:\r\n\r\n**Prerequisites:**\r\n- In java-exec module we have both tests that require patching (or use Drillbit) and standalone tests that don't need patching but might use some Guava classes (e.g. Closeables)\r\n\r\n**Steps:**\r\n1. Run tests by command:\r\n`mvn clean test -pl exec/java-exec -DforkCount=4`\r\nChanging forkCount is needed to increase probability of race conditions.\r\n2. Wait for failures.\r\n\r\n**Expected result:**\r\nTests are passed.\r\n\r\n**Actual result:**\r\nSome tests will fail because patching didn't happen.\r\n\r\nSo, let's see what is happening here:\r\nAs we cannot guarantee the tests execution order, it is quite possible that a test that doesn't init patching will run first. It is also possible that this test is using some Guava class inside (and it'll be loaded during the test execution). Once the class is loaded it cannot be patched (Javassist constructs a modified class, attempts to load it and fail with error \"attempted  duplicate class definition for name\"). Then, all patching-dependent tests will fail. I hope my explanation is clear.\r\n\r\nP.S.: Thank you for the feedback!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560639306/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/560733231","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-560733231","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":560733231,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MDczMzIzMQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-02T22:17:37Z","updated_at":"2019-12-02T22:17:37Z","author_association":"CONTRIBUTOR","body":"@agozhiy, thank you, the explanation is crystal clear. In fact, I think I've been seeing a similar issue with the ZK and Dynamic UDF tests: they randomly fail about 75% of the time due to issues associated with loading/finding classes that appear to be generated on the fly.\r\n\r\nThe test solution might solve the above race conditions if all tests invoke the same patcher as their first task. We would have to assume that the Drillbit does also. But, even then, we *still* would not solve the problem. SqlLine runs, then loads any number of JDBC drivers (in the general case) followed by the Drill JDBC driver which can, if requested, start a Drillbit. We have little control over when patching is done in this case (unless we add patching to SqlLine startup.)\r\n\r\nGeneralizing, since any app can load the Drill JDBC driver and run Drill, *every* app would need the magic patcher run at startup. This seems like a solution that won't scale.\r\n\r\nWe're talking about patching at runtime. I wonder, can we patch at build time? Can we create a Drill-specific version of Guava with the patches applied, stored in a jar file?\r\n\r\nThis still does not help with third-party apps: they might put their own Guava on the class path before the patched Drill version.\r\n\r\nDid some Googling for solutions since we can't be the only folks with the problem. You've probably done the same. Here is a [note from the Guava team](https://github.com/google/guava/wiki/UseGuavaInYourBuild) which recommends using Guava version 21.\r\n\r\n> In the simple case, just upgrade your project to the newest version of Guava. ... However, this can fail in some cases:\r\n>\r\n> *One of your dependencies uses a version of Guava from the days when we were still removing non-@Beta APIs.\r\n>\r\n> In these cases, you may be able to find an older version of Guava that satisfies all your dependencies. However, the only general solution is for all projects to update to at least Guava 21...\r\n\r\nThere seems to be a [Java library compliance checker tool](https://github.com/lvc/japi-compliance-checker) that might help identify actual gaps.\r\n\r\nIt also seems that that the only real solution that folks mention is [shading](https://bryantsai.com/how-to-resolve-dependency-conflict-out-of-your-control-e75ace79e54f). Can we shade the MapR plugin along with its dependent obsolete Guava version?\r\n\r\nOtherwise, the only reliable solution is to get the set of dependencies to use compatible Guava versions. Can we upgrade our Hive/Hadoop dependencies to newer versions that depend on recent Guava versions? \r\n\r\nLook at it from the point of view of MapR and Hadoop: they cannot expect their clients to be on an ancient version of Guava; to support their users (including Drill), they have to stay current. Perhaps a bit of lobbying, searching will solve the problem without patching?\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/560733231/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561111801","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-561111801","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":561111801,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTExMTgwMQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T10:48:27Z","updated_at":"2019-12-03T10:48:27Z","author_association":"MEMBER","body":"@paul-rogers, all these approaches require a large amount of time. What do you think about @arina-ielchiieva's suggestion from this comment https://github.com/apache/drill/pull/1910#issuecomment-560383657 to unblock the release?\r\n\r\nDiscussing the approach on how to fix the general problem and implementing it may be done after the release.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561111801/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561135023","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-561135023","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":561135023,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTEzNTAyMw==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T11:54:20Z","updated_at":"2019-12-03T11:54:20Z","author_association":"MEMBER","body":"@paul-rogers, `ProjectionType` now has no notion of `MinorType#DICT` and treats it as `ProjectionType#SCALAR`. And yes, we do need to allow Python-like syntax for the type. (My bad, haven't made changes to this).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561135023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561320699","html_url":"https://github.com/apache/drill/pull/1908#issuecomment-561320699","issue_url":"https://api.github.com/repos/apache/drill/issues/1908","id":561320699,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTMyMDY5OQ==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T19:30:27Z","updated_at":"2019-12-03T19:30:27Z","author_association":"CONTRIBUTOR","body":"+1\r\n\r\nJIRA #https://issues.apache.org/jira/browse/DRILL-7462","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561320699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561321827","html_url":"https://github.com/apache/drill/pull/1909#issuecomment-561321827","issue_url":"https://api.github.com/repos/apache/drill/issues/1909","id":561321827,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTMyMTgyNw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-03T19:33:21Z","updated_at":"2019-12-03T19:33:21Z","author_association":"CONTRIBUTOR","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561321827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561448583","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-561448583","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":561448583,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTQ0ODU4Mw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T02:34:52Z","updated_at":"2019-12-04T02:34:52Z","author_association":"CONTRIBUTOR","body":"On `ProjectionType`, if the `SchemaPath` is, say, `foo`, then the `ProjectionType` will be `SCALAR`. I can see that this name is misleading. Perhaps `SIMPLE` is better. We don't know that the column **is** scalar, we just know that it is consistent with a scalar. It could be a map, array or dict as well.\r\n\r\nBut, if you do add a `SchemaPath` representation for `foo['bar']`, then, yes, that can only be a `DICT`, so we can introduce a `DICT` projection type.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561448583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561449338","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-561449338","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":561449338,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTQ0OTMzOA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T02:38:13Z","updated_at":"2019-12-04T02:38:13Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi, you got me on that one. If this is a release blocker, then, yes, we have to live with the best fix we can do right now. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561449338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561566135","html_url":"https://github.com/apache/drill/pull/1916#issuecomment-561566135","issue_url":"https://api.github.com/repos/apache/drill/issues/1916","id":561566135,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTU2NjEzNQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T10:01:30Z","updated_at":"2019-12-04T10:01:30Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561566135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561636243","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-561636243","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":561636243,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTYzNjI0Mw==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T13:11:05Z","updated_at":"2019-12-04T13:11:05Z","author_association":"MEMBER","body":"@paul-rogers, thank, I have merged this PR.\r\n\r\n@agozhiy could you please create a Jira where this discussion may be continued?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561636243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/561708455","html_url":"https://github.com/apache/drill/pull/1910#issuecomment-561708455","issue_url":"https://api.github.com/repos/apache/drill/issues/1910","id":561708455,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MTcwODQ1NQ==","user":{"login":"agozhiy","id":31588230,"node_id":"MDQ6VXNlcjMxNTg4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/31588230?v=4","gravatar_id":"","url":"https://api.github.com/users/agozhiy","html_url":"https://github.com/agozhiy","followers_url":"https://api.github.com/users/agozhiy/followers","following_url":"https://api.github.com/users/agozhiy/following{/other_user}","gists_url":"https://api.github.com/users/agozhiy/gists{/gist_id}","starred_url":"https://api.github.com/users/agozhiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agozhiy/subscriptions","organizations_url":"https://api.github.com/users/agozhiy/orgs","repos_url":"https://api.github.com/users/agozhiy/repos","events_url":"https://api.github.com/users/agozhiy/events{/privacy}","received_events_url":"https://api.github.com/users/agozhiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-04T15:57:14Z","updated_at":"2019-12-04T15:57:14Z","author_association":"MEMBER","body":"@paul-rogers, @vvysotskyi, I created a JIRA:\r\nhttps://jira.apache.org/jira/browse/DRILL-7465","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/561708455/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/562590767","html_url":"https://github.com/apache/drill/pull/1918#issuecomment-562590767","issue_url":"https://api.github.com/repos/apache/drill/issues/1918","id":562590767,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjU5MDc2Nw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-06T14:24:13Z","updated_at":"2019-12-06T14:24:13Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/562590767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/562591610","html_url":"https://github.com/apache/drill/pull/1917#issuecomment-562591610","issue_url":"https://api.github.com/repos/apache/drill/issues/1917","id":562591610,"node_id":"MDEyOklzc3VlQ29tbWVudDU2MjU5MTYxMA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-06T14:26:38Z","updated_at":"2019-12-06T14:26:38Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/562591610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/562748278","html_url":"https://github.com/apache/drill/pull/1914#issuecomment-562748278","issue_url":"https://api.github.com/repos/apache/drill/issues/1914","id":562748278,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Mjc0ODI3OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-06T21:45:15Z","updated_at":"2019-12-06T21:45:15Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, updated some of the comments to make things a bit clearer. Also, did an extensive tutorial [here](https://github.com/paul-rogers/drill/wiki/Create-a-Storage-Plugin).\r\n\r\nAs it turns out, the \"base\" stuff is pretty basic; it is just a thin layer on what is there. (Still struggling with how to abstract out some of the remaining complexity.) The key new bit is the filter push-down strategy. The best way to understand that is to look at the unit test cases.\r\n\r\nThanks much for taking another look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/562748278/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/562862060","html_url":"https://github.com/apache/drill/pull/1919#issuecomment-562862060","issue_url":"https://api.github.com/repos/apache/drill/issues/1919","id":562862060,"node_id":"MDEyOklzc3VlQ29tbWVudDU2Mjg2MjA2MA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-07T15:45:57Z","updated_at":"2019-12-07T15:45:57Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/562862060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564094547","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-564094547","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":564094547,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDA5NDU0Nw==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-10T15:44:55Z","updated_at":"2019-12-10T15:44:55Z","author_association":"MEMBER","body":"Could you please move this file under `.github` directory?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564094547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564099528","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-564099528","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":564099528,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDA5OTUyOA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-10T15:55:21Z","updated_at":"2019-12-10T15:55:21Z","author_association":"MEMBER","body":"Could you please add examples into every section, for example as it was done there: https://github.com/apache/parquet-mr/blob/master/.github/PULL_REQUEST_TEMPLATE.md","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564099528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564104267","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-564104267","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":564104267,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDEwNDI2Nw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-10T16:05:22Z","updated_at":"2019-12-10T16:05:22Z","author_association":"CONTRIBUTOR","body":"Done","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564104267/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564864142","html_url":"https://github.com/apache/drill/pull/1922#issuecomment-564864142","issue_url":"https://api.github.com/repos/apache/drill/issues/1922","id":564864142,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDg2NDE0Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T06:06:35Z","updated_at":"2019-12-12T06:06:35Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi, I had a nice unit test that I used when debugging. However, it turns out that we can't use it in Maven: the information in the system table ('connections') changes too much. (One row for one connection when run in the IDE, but 9 (?) rows when run in Maven.)\r\n\r\nI can perhaps add a different test: the problem should appear anytime a `LIMIT` is done where the limit amount is the same as the row count. But, to create such a test, I'll need to do it on master before this fix (to verify that the test catches the error.)\r\n\r\nEven better, this PR does include a new batch check that *did* catch the error. If the error occurs, all offsets in a VARCHAR offset vector will be 0. A check verifies that the largest offset is the same size as the data vector. If this bug occurs, that check will trigger and we'll see an error. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564864142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564868743","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-564868743","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":564868743,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDg2ODc0Mw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T06:25:44Z","updated_at":"2019-12-12T06:25:44Z","author_association":"CONTRIBUTOR","body":"What is the intent here? Looks like this PR is trying to solve two problems:\r\n\r\n1. Provide a standard template for PR messages,\r\n2. Provide a checklist of things we want the contributer to do.\r\n\r\nI wonder, should we think about the *commit* message; the one that will travel with the code in Git?\r\n\r\nFor the commit message, a simple template would be helpful:\r\n\r\n```\r\nDRILL-XXXX: Summary\r\n\r\nDescription of change.\r\n```\r\n\r\nI have seen folks include only the bug number. (Of course, I'm not sure anyone ever reads the commit messages...)\r\n\r\nFor the PR message, do we insist people keep our headings? Only our headings? Should they replace the commit message with a differently worded message? That is, do we want people to describe the change twice, in two different ways?\r\n\r\nEach time I've seen shops provide these templates, it ends up that either the templates are off the mark, or they grow to be cumbersome. They are no substitute for people just doing the right thing.\r\n\r\nA good reviewer will look for tests (I do that first.) A `pom.xml` file change should be carefully reviewed. What are we solving by adding a template?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564868743/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/564970733","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-564970733","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":564970733,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NDk3MDczMw==","user":{"login":"agozhiy","id":31588230,"node_id":"MDQ6VXNlcjMxNTg4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/31588230?v=4","gravatar_id":"","url":"https://api.github.com/users/agozhiy","html_url":"https://github.com/agozhiy","followers_url":"https://api.github.com/users/agozhiy/followers","following_url":"https://api.github.com/users/agozhiy/following{/other_user}","gists_url":"https://api.github.com/users/agozhiy/gists{/gist_id}","starred_url":"https://api.github.com/users/agozhiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agozhiy/subscriptions","organizations_url":"https://api.github.com/users/agozhiy/orgs","repos_url":"https://api.github.com/users/agozhiy/repos","events_url":"https://api.github.com/users/agozhiy/events{/privacy}","received_events_url":"https://api.github.com/users/agozhiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T11:35:52Z","updated_at":"2019-12-12T11:35:52Z","author_association":"MEMBER","body":"I agree with @paul-rogers, the PR message shouldn't duplicate the commit message. Still, it's good to have some checklist to ensure that nothing is missed accidentally.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/564970733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565029637","html_url":"https://github.com/apache/drill/pull/1926#issuecomment-565029637","issue_url":"https://api.github.com/repos/apache/drill/issues/1926","id":565029637,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTAyOTYzNw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T14:29:55Z","updated_at":"2019-12-12T14:29:55Z","author_association":"MEMBER","body":"@agozhiy is there any statistics how size has changed?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565029637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565053358","html_url":"https://github.com/apache/drill/pull/1926#issuecomment-565053358","issue_url":"https://api.github.com/repos/apache/drill/issues/1926","id":565053358,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTA1MzM1OA==","user":{"login":"agozhiy","id":31588230,"node_id":"MDQ6VXNlcjMxNTg4MjMw","avatar_url":"https://avatars.githubusercontent.com/u/31588230?v=4","gravatar_id":"","url":"https://api.github.com/users/agozhiy","html_url":"https://github.com/agozhiy","followers_url":"https://api.github.com/users/agozhiy/followers","following_url":"https://api.github.com/users/agozhiy/following{/other_user}","gists_url":"https://api.github.com/users/agozhiy/gists{/gist_id}","starred_url":"https://api.github.com/users/agozhiy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agozhiy/subscriptions","organizations_url":"https://api.github.com/users/agozhiy/orgs","repos_url":"https://api.github.com/users/agozhiy/repos","events_url":"https://api.github.com/users/agozhiy/events{/privacy}","received_events_url":"https://api.github.com/users/agozhiy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T15:25:08Z","updated_at":"2019-12-12T15:25:08Z","author_association":"MEMBER","body":"@arina-ielchiieva,\r\nBefore: 403942K\r\nAfter: 308749K\r\n(~93M difference)\r\nSlightly bigger than in 1.16.0 (283120K), but not so critical (we have some new features after all).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565053358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565078876","html_url":"https://github.com/apache/drill/pull/1926#issuecomment-565078876","issue_url":"https://api.github.com/repos/apache/drill/issues/1926","id":565078876,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTA3ODg3Ng==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T16:24:25Z","updated_at":"2019-12-12T16:24:25Z","author_association":"MEMBER","body":"Awesome! Thanks for making the changes. \r\nAdditionally tested S3 connection on your branch, everything works fine.\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565078876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565079260","html_url":"https://github.com/apache/drill/pull/1925#issuecomment-565079260","issue_url":"https://api.github.com/repos/apache/drill/issues/1925","id":565079260,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTA3OTI2MA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T16:25:21Z","updated_at":"2019-12-12T16:35:59Z","author_association":"MEMBER","body":"@paul-rogers addressed code review comments, please take a look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565079260/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565104256","html_url":"https://github.com/apache/drill/pull/1927#issuecomment-565104256","issue_url":"https://api.github.com/repos/apache/drill/issues/1927","id":565104256,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTEwNDI1Ng==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T17:26:11Z","updated_at":"2019-12-12T17:26:11Z","author_association":"MEMBER","body":"+1, LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565104256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565129775","html_url":"https://github.com/apache/drill/pull/1925#issuecomment-565129775","issue_url":"https://api.github.com/repos/apache/drill/issues/1925","id":565129775,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTEyOTc3NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T18:35:11Z","updated_at":"2019-12-12T18:35:11Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this. Some of the issues discussed here suggest that Drill has grown to have many ways to do the same thing (project push-down or not, etc.) Would be good to fix those over time.\r\n\r\nStill, this one looks good, so\r\n+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565129775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565130140","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-565130140","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":565130140,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTEzMDE0MA==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T18:36:17Z","updated_at":"2019-12-12T18:36:17Z","author_association":"CONTRIBUTOR","body":"@paul-rogers \r\nThe goals here were:\r\n1.  To encourage authors of PRs, especially those PRs introducing new functionality, to make sure that there is enough documentation so that others can understand what the PR does.\r\n\r\n2. To save everyone's time by encouraging authors to make sure that their PRs have adequate tests, licenses, etc.  so that the review process will be smoother. \r\n\r\nI'm fine with shortening it, but I really like the idea of a checklist so that authors (myself included) make sure that their PRs are really ready to go.  Ideally, I'd like also to include an issue template on JIRA so that when people have issues we don't have to go back and ask the obvious questions... \r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565130140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565141768","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565141768","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565141768,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTE0MTc2OA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T19:07:53Z","updated_at":"2019-12-12T19:59:34Z","author_association":"CONTRIBUTOR","body":"Tried making  `ColumnStatistics` generic. However there are several places where the type of the column is required (min/max values, for example.)\r\n\r\nThe issue is that each column has multiple stats: some are of the same type as the column (min, max, histogram), others are not (HLL, NDV.)\r\n\r\nEven those that are the \"same\" type as the column are not: the column is of type `VARCHAR`, but the `ColumnStatistics` is of type `String`, say. There is no mapping from Drill to Java types; this knowedge appears to be implicit in the code.\r\n\r\nFurther, the `ColumnStatisticsKind` is not what you would think: it has a compile-time type (the type parameter), but, because of type erasure, no runtime type (I cannot ask what kind of value the kind holds.)\r\n\r\nI think we need to rethink this a bit:\r\n\r\n* A type definition holds the type-specific logic (such as merging stats) as well as giving both the Java and SQL type (if any) for the stat.\r\n* A mapping tells us the Java stats type for the SQL type.\r\n* A stats definition holds a name and a type definition. (Where the type definition may be \"same as column type.\")\r\n* A Statistic has a definition, a (possibly implied) type and a value.\r\n* A column is generic: it has a name, a SQL type and a list of statistics.\r\n* It may be worthwhile having a column \"meta-meta\" definition: the list of statistics valid for a column of a given SQL type. (There is no min or max for a VarBinary, say.)\r\n\r\nThis PR at least removes many warnings an obscure compile error from the present design.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565141768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565149077","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-565149077","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":565149077,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTE0OTA3Nw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T19:26:38Z","updated_at":"2019-12-12T19:26:38Z","author_association":"CONTRIBUTOR","body":"Makes sense. Maybe provide the commit template that gives the gist of the change. (The JIRA number is not sufficient, requires a check or JIRA just to find out, say, that this was upgrading library X to a new version.)\r\n\r\nI like the pattern you have used: to create a README file to explain things. That becomes a permanent source of documentation. For other cases, a `.md` file or `package-info.java` can serve the same purpose.\r\n\r\nThis leaves the PR note. It should include the same info as the commit (though perhaps in another form.) We can offer two parts:\r\n\r\n1. Outline of the topics that might be covered, if relevant. (Just omit the bits that don't apply rather than filling in \"Does not apply.\") This is where the (reformatted) commit message would go.\r\n2. Checklist of common tasks. The author is free to remove those that don't apply (such a \"check license terms for any new libraries\" if no libraries are added.) Add those that do apply to this case.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565149077/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565176282","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565176282","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565176282,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTE3NjI4Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T20:37:10Z","updated_at":"2019-12-12T20:37:10Z","author_association":"CONTRIBUTOR","body":"Tried to clean up a few more warnings. Have found even more cases where we want to assign types statically, but work with them generically at runtime. Had to add some horrible hacks to cast away the (unknown) type.\r\n\r\nAlso, found another issue in `FilterExpression.Visitor`. The predicates are parameterized, but untyped in the visitor class. Typing them causes many tests to fail. So, we've got a case where we *must* abuse the Java type system to get the code to work. That is a strong \"code smell\" that some adjusting wants to be done.\r\n\r\nThe one issue I can see is that some of the proposed changes will change the serialized metadata format. If anyone starts to use the features from this release, some form of upgrade will be needed when that user upgrades. This incompatibility could be a reason to fix the issues now rather than later.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565176282/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565177247","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565177247","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565177247,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTE3NzI0Nw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T20:39:50Z","updated_at":"2019-12-12T20:39:50Z","author_association":"CONTRIBUTOR","body":"All that said, hat's off to the folks who did this code. There is an incredible amount of complex functionality in the metadata & Parquet filter push down modules! We just need a bit of tweaking to the very fiddly problem of handling types both statically and dynamically.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565177247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565235691","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565235691","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565235691,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTIzNTY5MQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T23:37:46Z","updated_at":"2019-12-12T23:37:46Z","author_association":"MEMBER","body":"@paul-rogers, regarding `FilterExpression.Visitor`, it may seem that generics usage is redundant here, but such design was chosen to make this class extendable as much as possible but with strict API. By design, implementations of this class should be used for specific metastore implementation, so it may be required to provide a storage-specific type for the visitor, as it was done in the existing implementation. Though, there is a single implementation typed with `org.apache.iceberg.expressionsExpression` (non-Drill class), but in the future, it is possible, that other implementations will be added. \r\nI worked with the code of `iceberg-metastore` module a lot, and every time I ensured that this is the most thoughtful and stainless part of the metastore work.\r\n\r\nRegarding changing the serialized metadata format, could you please share some details on how it happens, since I thought that we use only actual types of data that is written to the metastore.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565235691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565238765","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565238765","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565238765,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTIzODc2NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-12T23:49:56Z","updated_at":"2019-12-12T23:49:56Z","author_association":"CONTRIBUTOR","body":"Another commit to fix the remaining warnings in metastore.\r\n\r\nJust to summarize based on what I've seen, there are two use cases:\r\n\r\n* Generic: Example: take two columns, get their min values generically, combine them generically. Compile-time typing is a hindrance here; we need run-time typing.\r\n* Specific: compute or obtain a specific value of a specific type. The NDV, say, to be used in estimating selectivity.\r\n\r\nIt is easy to go from specific to generic:\r\n\r\n```\r\n  int foo = ...;\r\n  metadata.setValue(foo);\r\n...\r\n  public void setValue(Object value) {\r\n...\r\n```\r\n\r\nIf is harder to go the other way. If we know the value is an `int`:\r\n\r\n```\r\n  int foo = metadata.getInt();\r\n  // Or, less ideally:\r\n  assert metadata.getType() == MinorType.INT;\r\n  int foo = (Int) metadata.getValue();\r\n```\r\n\r\nHere `getInt()` just does in a method what the second example does inline.\r\n\r\nTo be type aware for all types:\r\n\r\n```\r\n  switch(metadata.getType()) {\r\n    case INT:\r\n      int intFoo = (Int) metadata.getValue();\r\n      ...\r\n    case VARCHAR:\r\n      String strFoo = (String) metadata.getValue();\r\n    ...\r\n```\r\n\r\nThe above is true if we introduce, say a `ValueHolder<T>` that holds a value of type T. Instead of casting the value, we'd cast the value holder. There is no escaping the issue.\r\n\r\nPoint is: we need to understand the use cases so we can more precisely refine the metadata data model.\r\n\r\nSome example:\r\n\r\n* The pending filter push-down PR: uses a value holder with a (type, value) pair.\r\n* The Impala solution: has nodes that represent literals, with subclasses for various kinds of literal: `IntLiteral`, `StringLiteral`, etc.\r\n* The JDBC approach: a separate schema that tells us that when `foo` appears, it is an `int`, so we should use `getInt(colIndex)`.\r\n* The `ColumnMetadata` (and HOCON config) approach; store values as strings, parse to the desired type on demand.\r\n\r\nPerhaps one of these (or, more likely, some combination) might help us here.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565238765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565248380","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565248380","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565248380,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTI0ODM4MA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-13T00:28:05Z","updated_at":"2019-12-13T00:28:05Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi, thanks for the explanation on the `FilterExpression.Visitor` class. I think your idea is right. The question is, how do we achieve extensibility? This is a very complex subject to discuss via written form, but I'll try. I'm sure I'll miss something obvious.\r\n\r\nAny metastore can add its own metadata fields (`min`, `max`, `myOwnMetric`), etc. When that happens, the rest of Drill should *not* change. So, adding a class to a class hierarchy that Drill must understand may not be the way to go. Instead, we have to identify the parts that are fixed by Drill and the parts that the specific metastore can extend.\r\n\r\nLet's take our list of metadata \"fields.\" Drill defines `min` and `max`: I as a metastore author need to honor Drill's definition. (Or, I need to tell that I can't report `min` and `max`, but I can report, say, `NDV` because I'm Hive.) On the other hand, `myOwnMetric` is something I define for use, perhaps, in my own WizzBang store plugin.\r\n\r\nWe are talking about a predicate visitor. For the code to compile in Drill, the visitor has to know about all possible predicates that can be visited; that's the only way to create the `visit(Foo)` methods in the base class.\r\n\r\nI like how you've categorized the predicates. (MUCH easier than using internal function names the way many plugins currently do.) (I might quibble and say that there are only four predicate types: Unary (IS NULL, IS TRUE, etc.), Binary (=, !=, etc.), Boolean (AND, OR) and List (IN).) Yes, Boolean predicates are binary, but they are \"special\" because, by definition, each of their two arguments is, itself, a predicate (or a Boolean literal.)\r\n\r\nSo, since Drill defines the predicates (they come from the SQL query), the types should be known to Drill.\r\n\r\nFor predicates derived from a SQL query, the argument types are also defined: Drill must have been able to parse them out of the SQL text and apply some type (at least Number, String, Boolean). And, predicates can be of mixed types: `10 = '10'` say. So, the predicate *result* is binary, but the arguments are of any type (even if they don't make sense as in my example.)\r\n\r\nWhat, then, can be extended? The underlying type of a column. (Maybe `INT96` in Parquet, or `IPAddress` in some security system.) My custom plugin has to convert between my values (`INT96`) and Drill's values. So, if we see `X = 123456`, our custom code might know that `X` is a column in our DB that is of type `INT96`, so we might then try to convert the Drill-type (`INT`, say) of `123456` into the `INT96` type for our push-down filter.\r\n\r\nIn stats, I might define `min` to be of my own specific `INT96` type. (That is, the `min` value is of the type of the actual data, not of the type that the reader will convert it to in Drill.)\r\n\r\nDrill's description of the min value must be generic, however. (Drill does not know about my type.) One way to do that is to add \"meta-meta-data\" that says that the value of this metadata field is my private `INT96` type. Only I know how to read those values; Drill treats them as `Object`s.\r\n\r\nIf something wanted to do a query on my metadata, my \"meta-meta-data\" could provide a `toString` method to convert the `INT96` `min` value to something that Drill can display.\r\n\r\nOh, one other topic to cover. Different systems provide different stats. Generally, a system provides NDV or a histogram (or nothing). This info exists, primarily, to compute selectivity for a filter. (How many values will `X = 10` match?) Where should this logic be? Generically in Drill? For equality:\r\n\r\n```\r\n  if (metadata == null) {\r\n    sel = 0.15;\r\n  } else if (metadata.get(\"histogram\") != null) {\r\n    sel = metadata.getHistorgramProbability(arg);\r\n   } else if (metadata.get(\"ndv\") != null) {\r\n    sel = 1 / metadata.get(\"ndv\");\r\n  } ...\r\n```\r\n\r\nOr, we could make this more generic: require that the metadata provide a `computeSelectivity(arg)` method that \"does the right thing\" for the system in question with the metadata available. (A special \"dummy\" metadata provider could provide Calcite's default 0.15 guess.)\r\n\r\nIn short, this is a tricky topic. We have to think about what Drill does and what the extension does. Maybe we can move the discussion to another forum (maybe direct e-mail) so we don't spam the dev list. Then we can work through specific use cases so I can perhaps make more specific suggestions.\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565248380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565433401","html_url":"https://github.com/apache/drill/pull/1931#issuecomment-565433401","issue_url":"https://api.github.com/repos/apache/drill/issues/1931","id":565433401,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTQzMzQwMQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-13T13:02:01Z","updated_at":"2019-12-13T13:02:01Z","author_association":"MEMBER","body":"@j-4 overrall looks good, please address code review comments and update commit message (should be the same as PR naming which I have already updated).","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565433401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565435846","html_url":"https://github.com/apache/drill/pull/1931#issuecomment-565435846","issue_url":"https://api.github.com/repos/apache/drill/issues/1931","id":565435846,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTQzNTg0Ng==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-13T13:10:39Z","updated_at":"2019-12-13T13:10:39Z","author_association":"CONTRIBUTOR","body":"@j-4 Thanks for the contribution and welcome to Drill!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565435846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565482352","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-565482352","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":565482352,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTQ4MjM1Mg==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-13T15:26:33Z","updated_at":"2019-12-13T15:26:33Z","author_association":"MEMBER","body":"@paul-rogers, moving the discussion into another place is a good idea. Perhaps we can continue it in a Jira to preserve our ideas for other contributors.\r\n\r\nRegarding the additional changes, I think we should merge this PR to avoid errors in Eclipse and continue the release process since it was already postponed a lot due to metastore issues...","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565482352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565775299","html_url":"https://github.com/apache/drill/pull/1932#issuecomment-565775299","issue_url":"https://api.github.com/repos/apache/drill/issues/1932","id":565775299,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTc3NTI5OQ==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-15T03:58:36Z","updated_at":"2019-12-15T03:58:36Z","author_association":"CONTRIBUTOR","body":"Addressed review comments and squashed commits.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565775299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565816621","html_url":"https://github.com/apache/drill/pull/1934#issuecomment-565816621","issue_url":"https://api.github.com/repos/apache/drill/issues/1934","id":565816621,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTgxNjYyMQ==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-15T14:54:48Z","updated_at":"2019-12-15T14:54:48Z","author_association":"CONTRIBUTOR","body":"1.  It looks like you added the colon.\r\n2.  I tested `http.pcap` on VirusTotal [1] and it checked out with no malicious content.\r\n3.  I added the file `dataFromRemote.txt` which contains an http response.  The reason was that the content would have been a REALLY long string, so I figured it would be best to put that in a separate file, rather than in the unit test itself.  \r\n\r\n[1] https://www.virustotal.com/gui/file/25a72bdf10339f2c29916920c8b9501d294923108de8f29b19aba7cc001ab60d/detection\r\n\r\n![Screen Shot 2019-12-15 at 9 52 29 AM](https://user-images.githubusercontent.com/5513150/70864502-a708ae80-1f20-11ea-8c72-086d9956931d.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565816621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/565936020","html_url":"https://github.com/apache/drill/pull/1931#issuecomment-565936020","issue_url":"https://api.github.com/repos/apache/drill/issues/1931","id":565936020,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NTkzNjAyMA==","user":{"login":"j-4","id":1511668,"node_id":"MDQ6VXNlcjE1MTE2Njg=","avatar_url":"https://avatars.githubusercontent.com/u/1511668?v=4","gravatar_id":"","url":"https://api.github.com/users/j-4","html_url":"https://github.com/j-4","followers_url":"https://api.github.com/users/j-4/followers","following_url":"https://api.github.com/users/j-4/following{/other_user}","gists_url":"https://api.github.com/users/j-4/gists{/gist_id}","starred_url":"https://api.github.com/users/j-4/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/j-4/subscriptions","organizations_url":"https://api.github.com/users/j-4/orgs","repos_url":"https://api.github.com/users/j-4/repos","events_url":"https://api.github.com/users/j-4/events{/privacy}","received_events_url":"https://api.github.com/users/j-4/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T07:20:25Z","updated_at":"2019-12-16T07:20:25Z","author_association":"CONTRIBUTOR","body":"Thanks for the worm welcome and the really fast code review - sorry for not being able to keep up this pace ;-) I edited the commit message and changed the code according to your suggestions.\r\n\r\nThanks for your great work on Drill!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/565936020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566007400","html_url":"https://github.com/apache/drill/pull/1934#issuecomment-566007400","issue_url":"https://api.github.com/repos/apache/drill/issues/1934","id":566007400,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjAwNzQwMA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T10:46:40Z","updated_at":"2019-12-16T10:46:56Z","author_association":"MEMBER","body":"+1, thanks for making the changes","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566007400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566008149","html_url":"https://github.com/apache/drill/pull/1931#issuecomment-566008149","issue_url":"https://api.github.com/repos/apache/drill/issues/1931","id":566008149,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjAwODE0OQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T10:48:44Z","updated_at":"2019-12-16T10:48:44Z","author_association":"MEMBER","body":"+1, thanks for making the changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566008149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566011228","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-566011228","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":566011228,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjAxMTIyOA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T10:57:48Z","updated_at":"2019-12-16T10:57:48Z","author_association":"MEMBER","body":"@vvysotskyi please copy discussion points and link to this PR into https://issues.apache.org/jira/browse/DRILL-7480 .\r\nWhat else is left for @paul-rogers to do so this PR can be merged?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566011228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566012536","html_url":"https://github.com/apache/drill/pull/1928#issuecomment-566012536","issue_url":"https://api.github.com/repos/apache/drill/issues/1928","id":566012536,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjAxMjUzNg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T11:01:38Z","updated_at":"2019-12-16T11:01:38Z","author_association":"MEMBER","body":"@paul-rogers is you address code review comments today, we can include this PR into the release.\r\ncc @vvysotskyi ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566012536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566041493","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-566041493","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":566041493,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjA0MTQ5Mw==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T12:31:11Z","updated_at":"2019-12-16T12:31:11Z","author_association":"MEMBER","body":"I have added a couple of comments to the commit which was added after I have approved this PR, so they should be resolved to merge this PR.\r\n\r\n@paul-rogers, could you please take a look at them?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566041493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566055844","html_url":"https://github.com/apache/drill/pull/1934#issuecomment-566055844","issue_url":"https://api.github.com/repos/apache/drill/issues/1934","id":566055844,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjA1NTg0NA==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T13:15:43Z","updated_at":"2019-12-16T13:15:43Z","author_association":"CONTRIBUTOR","body":"Thanks all for the review.  Commits squashed.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566055844/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566056468","html_url":"https://github.com/apache/drill/pull/1932#issuecomment-566056468","issue_url":"https://api.github.com/repos/apache/drill/issues/1932","id":566056468,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjA1NjQ2OA==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T13:17:31Z","updated_at":"2019-12-16T13:17:31Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi \r\nThanks for the review.  Commits squashed.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566056468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566130764","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-566130764","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":566130764,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjEzMDc2NA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T16:16:52Z","updated_at":"2019-12-16T16:16:52Z","author_association":"MEMBER","body":"Please fix bug in `org.apache.drill.exec.record.metadata.DictBuilder`\r\n```\r\n  public DictBuilder resumeMap() {\r\n    build();\r\n    return (DictBuilder) parent;\r\n  }\r\n```\r\nResume map should return map builder.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566130764/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566155082","html_url":"https://github.com/apache/drill/pull/1935#issuecomment-566155082","issue_url":"https://api.github.com/repos/apache/drill/issues/1935","id":566155082,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjE1NTA4Mg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T17:14:51Z","updated_at":"2019-12-16T17:14:51Z","author_association":"MEMBER","body":"+1, LGTM.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566155082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566201759","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-566201759","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":566201759,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjIwMTc1OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T19:16:14Z","updated_at":"2019-12-16T19:16:14Z","author_association":"CONTRIBUTOR","body":"Make requested changes.\r\n\r\nThe changes here were the simplest, mechanical changes I could make to remove the many rawtypes warnings and the error which Eclipse flagged.\r\n\r\n@vvysotskyi, think of this as one possible way to temporarily solve the raw types issues. Please suggest better solutions, push a commit with your improvements, or offer an alternative PR. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566201759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566219911","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-566219911","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":566219911,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjIxOTkxMQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T20:02:57Z","updated_at":"2019-12-16T20:02:57Z","author_association":"CONTRIBUTOR","body":"Would be great if we could push this over the finish line. \r\n\r\nThere will be a conflict with DRILL-7486.\r\n\r\nI made some suggestions about finding DICT values and handling missing values. Let me know if I can help with that work. If we're not sure what we want to do in this area, then, as noted earlier, might be good to commit what we have; then we can refine it over time as we try the code.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566219911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566305209","html_url":"https://github.com/apache/drill/pull/1928#issuecomment-566305209","issue_url":"https://api.github.com/repos/apache/drill/issues/1928","id":566305209,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjMwNTIwOQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-16T23:59:28Z","updated_at":"2019-12-16T23:59:28Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva, addressed the comments. Should be ready to go. Thanks for including this one. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566305209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566432534","html_url":"https://github.com/apache/drill/pull/1928#issuecomment-566432534","issue_url":"https://api.github.com/repos/apache/drill/issues/1928","id":566432534,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQzMjUzNA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T08:13:49Z","updated_at":"2019-12-17T08:13:49Z","author_association":"MEMBER","body":"+1, LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566432534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566448821","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-566448821","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":566448821,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQ0ODgyMQ==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T09:02:28Z","updated_at":"2019-12-17T09:02:28Z","author_association":"MEMBER","body":"@paul-rogers, I'm sorry for taking so long. I'm planning to finish this in a few days.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566448821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/566478827","html_url":"https://github.com/apache/drill/pull/1923#issuecomment-566478827","issue_url":"https://api.github.com/repos/apache/drill/issues/1923","id":566478827,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NjQ3ODgyNw==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-17T10:22:35Z","updated_at":"2019-12-17T10:22:35Z","author_association":"MEMBER","body":"@paul-rogers, thanks for making changes, +1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/566478827/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/567445901","html_url":"https://github.com/apache/drill/pull/1936#issuecomment-567445901","issue_url":"https://api.github.com/repos/apache/drill/issues/1936","id":567445901,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzQ0NTkwMQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T11:11:15Z","updated_at":"2019-12-19T11:11:15Z","author_association":"MEMBER","body":"+1. LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/567445901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/567599020","html_url":"https://github.com/apache/drill/pull/1913#issuecomment-567599020","issue_url":"https://api.github.com/repos/apache/drill/issues/1913","id":567599020,"node_id":"MDEyOklzc3VlQ29tbWVudDU2NzU5OTAyMA==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-19T18:05:41Z","updated_at":"2019-12-19T18:49:02Z","author_association":"MEMBER","body":"@paul-rogers, thanks a lot for making this PR. It is a giant step towards fixing most of the JSON format issues.\r\n\r\nLooks like `TestComplexTypeReader` tests fail with enabled v2 reader. Failing tests check obtaining nested array value.\r\n\r\nThere are some other unit tests failures, but most of them are connected with the features which weren't reflected in v2 reader. \r\n```\r\n[INFO] Results:\r\n[INFO] \r\n[ERROR] Failures: \r\n[ERROR]   TestStarQueries.testSelStarOrderBy:148 Unexpected extra column `end_date` returned by query.\r\n[ERROR]   TestStarQueries.testSelStarOrderByLimit:162 Unexpected extra column `end_date` returned by query.\r\n[ERROR]   TestStarQueries.testSelStarWhereOrderBy:185 Unexpected extra column `end_date` returned by query.\r\n[ERROR]   TestAnalyze.testAnalyzeSupportedFormats:170->verifyAnalyzeOutput:565 expected:<1[6]> but was:<1[7]>\r\n[ERROR]   TestExtendedTypes.checkReadWriteExtended:58 expected:<...    \"$numberLong\" : [4\r\n  },\r\n  \"inner\" : {\r\n    \"bin\" : {\r\n      \"$binary\" : \"ZHJpbGw=\"\r\n    },\r\n    \"drill_date\" : {\r\n      \"$dateDay\" : \"1997-07-16\"\r\n    },\r\n    \"drill_timestamp\" : {\r\n      \"$date\" : \"2009-02-23T08:00:00.000Z\"\r\n    },\r\n    \"time\" : {\r\n      \"$time\" : \"19:20:30.450Z\"\r\n    },\r\n    \"interval\" : {\r\n      \"$interval\" : \"PT26.400S\"\r\n    },\r\n    \"integer\" : {\r\n      \"$numberLong\" : 4]\r\n    }\r\n  },\r\n  \"other...> but was:<...    \"$numberLong\" : [{\r\n      \"$numberLong\" : 4\r\n    }\r\n  },\r\n  \"inner\" : {\r\n    \"bin\" : {\r\n      \"$binary\" : \"ZHJpbGw=\"\r\n    },\r\n    \"drill_date\" : {\r\n      \"$dateDay\" : \"1997-07-16\"\r\n    },\r\n    \"drill_timestamp\" : {\r\n      \"$date\" : \"2009-02-23T08:00:00.000Z\"\r\n    },\r\n    \"time\" : {\r\n      \"$time\" : \"19:20:30.450Z\"\r\n    },\r\n    \"interval\" : {\r\n      \"$interval\" : \"PT26.400S\"\r\n    },\r\n    \"integer\" : {\r\n      \"$numberLong\" : {\r\n        \"$numberLong\" : 4\r\n      }]\r\n    }\r\n  },\r\n  \"other...>\r\n[ERROR]   TestExtendedTypes.testMongoExtendedTypes:81 expected:<...mp_millies,bin,bin1\r\n[2015-07-07 03:59:43.488,drill,drill]\r\n> but was:<...mp_millies,bin,bin1\r\n[{\"$date\":1436241583488},{\"$binary\":\"ZHJpbGw=\",\"$type\":1},{\"$type\":1,\"$binary\":\"ZHJpbGw=\"}]\r\n>\r\n[ERROR]   TestJsonEscapeAnyChar.testwithOptionDisabled:71 \r\nExpected: a string containing \"DATA_READ ERROR: Error parsing JSON - Unrecognized character escape\"\r\n     but: was \"DATA_READ ERROR: Unrecognized character escape 'S' (code 83)\r\n at [Source: (org.apache.drill.exec.store.dfs.DrillFSDataInputStream); line: 1, column: 16]\r\n\r\nI/O error reading JSON\r\nLocation null, line 1, column 16, near token \"\"\r\nFragment 0:0\r\n\r\n[Error Id: e375d7e6-bc4c-481c-9149-cba03d0e791d on cv5:31037]\"\r\n[ERROR]   TestJsonNanInf.testNanInfFailure Expected exception: org.apache.drill.common.exceptions.UserRemoteException\r\n[ERROR] Errors: \r\n[ERROR]   TestEmptyInputSql.testQueryMapArrayEmptyJson:132->BaseTestQuery.testRunAndReturn:343  Rpc\r\n[ERROR]   TestSchemaPathMaterialization.testMultiProjectionFromMultiLevelRepeatedListWhenFieldsExist  UserRemote\r\n[ERROR]   TestSchemaPathMaterialization.testSingleProjectionFromMultiLevelRepeatedList:50  \r\n[ERROR]   TestNestedDateTimeTimestamp.testNestedDateTimeCTASExtendedJson:152   at posit...\r\n[ERROR]   TestTopNSchemaChanges.testMissingColumn  UserRemote SYSTEM ERROR: IllegalStat...\r\n[ERROR]   TestTopNSchemaChanges.testUnionTypes:162   org.apache.drill.common.exceptions...\r\n[ERROR]   TestMergeJoinWithSchemaChanges.testOneSideSchemaChanges:348->BaseTestQuery.testRunAndReturn:343  Rpc\r\n[ERROR]   TestE2EUnnestAndLateral.testMultipleBatchesLateral_WithGroupByInParent  UserRemote\r\n[ERROR]   TestExternalSort.testNewColumnsLegacy  UserRemote SYSTEM ERROR: IllegalStateE...\r\n[ERROR]   TestExternalSort.testNewColumnsManaged  UserRemote SYSTEM ERROR: IllegalState...\r\n[ERROR]   TestImplicitFileColumns.testStarColumnJson:176   Expected and actual numbers ...\r\n[ERROR]   TestJsonRecordReader.testMixedNumberTypes:205  Mixed number types verification...\r\n[ERROR]   TestComplexTypeReader.testX8  UserRemote VALIDATION ERROR: Column type not co...\r\n[ERROR]   TestComplexTypeReader.testZ1  UserRemote VALIDATION ERROR: Column type not co...\r\n[ERROR]   TestComplexTypeReader.testZ2  UserRemote VALIDATION ERROR: Column type not co...\r\n[ERROR]   TestComplexTypeReader.testZ3  UserRemote VALIDATION ERROR: Column type not co...\r\n[ERROR]   TestJsonEscapeAnyChar.testwithOptionEnabled:59  Rpc org.apache.drill.common.e...\r\n[ERROR]   TestJsonReader.testSelectFromListWithCase:237   org.apache.drill.common.excep...\r\n[ERROR]   TestJsonReader.testSelectStarWithUnionType:218   org.apache.drill.common.exce...\r\n[ERROR]   TestJsonReader.testSumFilesWithDifferentSchema:355   org.apache.drill.common....\r\n[ERROR]   TestJsonReader.testSumMultipleBatches:324   org.apache.drill.common.exception...\r\n[ERROR]   TestJsonReader.testSumWithTypeCase:279   org.apache.drill.common.exceptions.U...\r\n[ERROR]   TestJsonReader.testTypeCase:259   org.apache.drill.common.exceptions.UserRemo...\r\n[ERROR]   TestJsonReader.testUnionExpressionMaterialization:298   org.apache.drill.comm...\r\n[ERROR]   TestJsonReader.testUntypedPathWithUnion:557   org.apache.drill.common.excepti...\r\n```\r\n\r\nI think we should fix most of them since in most cases they require just passing additional configs into Jackson.\r\nAlso, there are issues with duplicated values in JSON, for example, the following query returns the incorrect result:\r\n```\r\nselect rownum, kvgen(varcharcol) from `json_kvgenflatten/kvgen2.json`\r\n```\r\nreturns\r\n```\r\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n| rownum<BIGINT(OPTIONAL)>                                                                            | EXPR$1<MAP(REPEATED)>{$offsets$<UINT4(REQUIRED)>,key<VARCHAR(OPTIONAL)>,value<VARCHAR(OPTIONAL)>}   |\r\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n| 1                                                                                                   | [{\"key\":\"varchar_1\",\"value\":\"abc\"},{\"key\":\"varchar_2\",\"value\":\"def\"},{\"key\":\"key\",\"value\":\"value\"}] |\r\n| 2                                                                                                   | [{\"key\":\"varchar_2\",\"value\":\"\"}]                                                                    |\r\n| 3                                                                                                   | [{\"key\":\"varchar_2\",\"value\":\"hellohow\"}]                                                            |\r\n| 2                                                                                                   | []                                                                                                  |\r\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n```\r\nData file content:\r\n```\r\n{\r\n  \"rownum\": 1,\r\n  \"varcharcol\": {\r\n    \"varchar_1\": \"abc\",\r\n    \"varchar_2\": \"def\",\r\n    \"key\": \"value\"\r\n  }\r\n}\r\n{\r\n  \"rownum\": 2,\r\n  \"varcharcol\": {\r\n    \"varchar_1\": null,\r\n    \"varchar_2\": \"\"\r\n  }\r\n}\r\n{\r\n  \"rownum\": 3,\r\n  \"varcharcol\": {\r\n    \"varchar_1\": null,\r\n    \"varchar_2\": \"\",\r\n    \"varchar_2\": null,\r\n    \"varchar_2\": \"hello\",\r\n    \"varchar_2\": \"how\"\r\n  }\r\n}\r\n{\r\n  \"rownum\": 2,\r\n  \"varcharcol\": {\r\n  }\r\n}\r\n```\r\nPrevious reader just uses the last value.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/567599020/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/568248470","html_url":"https://github.com/apache/drill/pull/1938#issuecomment-568248470","issue_url":"https://api.github.com/repos/apache/drill/issues/1938","id":568248470,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODI0ODQ3MA==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-22T10:07:30Z","updated_at":"2019-12-22T10:07:30Z","author_association":"MEMBER","body":"LGTM, +1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/568248470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/568778984","html_url":"https://github.com/apache/drill/pull/1939#issuecomment-568778984","issue_url":"https://api.github.com/repos/apache/drill/issues/1939","id":568778984,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODc3ODk4NA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-24T17:01:36Z","updated_at":"2019-12-24T17:01:36Z","author_association":"MEMBER","body":"+1, LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/568778984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/568910375","html_url":"https://github.com/apache/drill/pull/1937#issuecomment-568910375","issue_url":"https://api.github.com/repos/apache/drill/issues/1937","id":568910375,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODkxMDM3NQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-25T15:45:25Z","updated_at":"2019-12-25T15:45:25Z","author_association":"MEMBER","body":"Please include info about Docker.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/568910375/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/568912112","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-568912112","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":568912112,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODkxMjExMg==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-25T16:10:04Z","updated_at":"2019-12-25T16:10:04Z","author_association":"MEMBER","body":"@KazydubB I see you have pushed new commit, is PR ready for review? Please tag Paul if yes.\r\nAlso please check if `org.apache.drill.exec.record.metadata.DictBuilder` method `public DictBuilder resumeMap()` was fixed.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/568912112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/568933123","html_url":"https://github.com/apache/drill/pull/1941#issuecomment-568933123","issue_url":"https://api.github.com/repos/apache/drill/issues/1941","id":568933123,"node_id":"MDEyOklzc3VlQ29tbWVudDU2ODkzMzEyMw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-25T21:35:53Z","updated_at":"2019-12-25T21:35:53Z","author_association":"CONTRIBUTOR","body":"@arina-ielchiieva \r\nI addressed all review comments and squashed commits.  Thanks for the review and Happy Holidays!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/568933123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569054104","html_url":"https://github.com/apache/drill/pull/1943#issuecomment-569054104","issue_url":"https://api.github.com/repos/apache/drill/issues/1943","id":569054104,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA1NDEwNA==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T12:56:38Z","updated_at":"2019-12-26T12:56:38Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569054104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569054996","html_url":"https://github.com/apache/drill/pull/1941#issuecomment-569054996","issue_url":"https://api.github.com/repos/apache/drill/issues/1941","id":569054996,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA1NDk5Ng==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T13:02:27Z","updated_at":"2019-12-26T13:02:27Z","author_association":"MEMBER","body":"+1, happy holidays to you, too :)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569054996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569082379","html_url":"https://github.com/apache/drill/pull/1942#issuecomment-569082379","issue_url":"https://api.github.com/repos/apache/drill/issues/1942","id":569082379,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTA4MjM3OQ==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T16:10:16Z","updated_at":"2019-12-26T16:10:16Z","author_association":"MEMBER","body":"+1","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569082379/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569130340","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-569130340","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":569130340,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTEzMDM0MA==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-26T20:41:17Z","updated_at":"2019-12-26T20:41:17Z","author_association":"MEMBER","body":"@paul-rogers, I've updated the PR, please have a look again.\r\n@arina-ielchiieva this is now fixed, thanks for pointing this out!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569130340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569633946","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-569633946","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":569633946,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTYzMzk0Ng==","user":{"login":"ihuzenko","id":4282630,"node_id":"MDQ6VXNlcjQyODI2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/4282630?v=4","gravatar_id":"","url":"https://api.github.com/users/ihuzenko","html_url":"https://github.com/ihuzenko","followers_url":"https://api.github.com/users/ihuzenko/followers","following_url":"https://api.github.com/users/ihuzenko/following{/other_user}","gists_url":"https://api.github.com/users/ihuzenko/gists{/gist_id}","starred_url":"https://api.github.com/users/ihuzenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ihuzenko/subscriptions","organizations_url":"https://api.github.com/users/ihuzenko/orgs","repos_url":"https://api.github.com/users/ihuzenko/repos","events_url":"https://api.github.com/users/ihuzenko/events{/privacy}","received_events_url":"https://api.github.com/users/ihuzenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-30T10:12:15Z","updated_at":"2019-12-30T10:12:15Z","author_association":"MEMBER","body":"@paul-rogers , omg, sometimes I'm so blind:( That last comment from my side was a big mistake and caused StackOverFlow error in our tests with this ```Autocloseable.close(varargs)```. I'm so sorry about that, please revert the last commit. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569633946/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569647510","html_url":"https://github.com/apache/drill/pull/1870#issuecomment-569647510","issue_url":"https://api.github.com/repos/apache/drill/issues/1870","id":569647510,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTY0NzUxMA==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-30T11:05:33Z","updated_at":"2019-12-30T11:05:33Z","author_association":"MEMBER","body":"@paul-rogers, I've updated the PR: added tests for `key` and `value` overflow for single and `DICT` array, introduced separate `VectorState`s for single `DICT` and `DICT` array, performed minor refacttoring. Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569647510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569836457","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-569836457","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":569836457,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTgzNjQ1Nw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T00:32:43Z","updated_at":"2019-12-31T00:32:43Z","author_association":"CONTRIBUTOR","body":"@ihuzenko, I should have spotted that one. Also, I should have done my own test run, but I thought, hey, it is one simple change, what could go wrong? My fault for not actually thinking. Anyway, we should be good now. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569836457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569844669","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-569844669","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":569844669,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg0NDY2OQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T01:32:41Z","updated_at":"2019-12-31T01:32:41Z","author_association":"CONTRIBUTOR","body":"Rebased on the latest master and reran all unit tests.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569844669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569887172","html_url":"https://github.com/apache/drill/pull/1940#issuecomment-569887172","issue_url":"https://api.github.com/repos/apache/drill/issues/1940","id":569887172,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg4NzE3Mg==","user":{"login":"ihuzenko","id":4282630,"node_id":"MDQ6VXNlcjQyODI2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/4282630?v=4","gravatar_id":"","url":"https://api.github.com/users/ihuzenko","html_url":"https://github.com/ihuzenko","followers_url":"https://api.github.com/users/ihuzenko/followers","following_url":"https://api.github.com/users/ihuzenko/following{/other_user}","gists_url":"https://api.github.com/users/ihuzenko/gists{/gist_id}","starred_url":"https://api.github.com/users/ihuzenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ihuzenko/subscriptions","organizations_url":"https://api.github.com/users/ihuzenko/orgs","repos_url":"https://api.github.com/users/ihuzenko/repos","events_url":"https://api.github.com/users/ihuzenko/events{/privacy}","received_events_url":"https://api.github.com/users/ihuzenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T08:22:14Z","updated_at":"2019-12-31T08:22:14Z","author_association":"MEMBER","body":"@vvysotskyi , @paul-rogers  I have updated the PR, please take a look again. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569887172/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569889329","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-569889329","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":569889329,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg4OTMyOQ==","user":{"login":"ihuzenko","id":4282630,"node_id":"MDQ6VXNlcjQyODI2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/4282630?v=4","gravatar_id":"","url":"https://api.github.com/users/ihuzenko","html_url":"https://github.com/ihuzenko","followers_url":"https://api.github.com/users/ihuzenko/followers","following_url":"https://api.github.com/users/ihuzenko/following{/other_user}","gists_url":"https://api.github.com/users/ihuzenko/gists{/gist_id}","starred_url":"https://api.github.com/users/ihuzenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ihuzenko/subscriptions","organizations_url":"https://api.github.com/users/ihuzenko/orgs","repos_url":"https://api.github.com/users/ihuzenko/repos","events_url":"https://api.github.com/users/ihuzenko/events{/privacy}","received_events_url":"https://api.github.com/users/ihuzenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T08:39:09Z","updated_at":"2019-12-31T08:39:09Z","author_association":"MEMBER","body":"LGTM, +1. Thanks, @paul-rogers for making the changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569889329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/569895159","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-569895159","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":569895159,"node_id":"MDEyOklzc3VlQ29tbWVudDU2OTg5NTE1OQ==","user":{"login":"ihuzenko","id":4282630,"node_id":"MDQ6VXNlcjQyODI2MzA=","avatar_url":"https://avatars.githubusercontent.com/u/4282630?v=4","gravatar_id":"","url":"https://api.github.com/users/ihuzenko","html_url":"https://github.com/ihuzenko","followers_url":"https://api.github.com/users/ihuzenko/followers","following_url":"https://api.github.com/users/ihuzenko/following{/other_user}","gists_url":"https://api.github.com/users/ihuzenko/gists{/gist_id}","starred_url":"https://api.github.com/users/ihuzenko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ihuzenko/subscriptions","organizations_url":"https://api.github.com/users/ihuzenko/orgs","repos_url":"https://api.github.com/users/ihuzenko/repos","events_url":"https://api.github.com/users/ihuzenko/events{/privacy}","received_events_url":"https://api.github.com/users/ihuzenko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T09:20:53Z","updated_at":"2019-12-31T09:20:53Z","author_association":"MEMBER","body":"@paul-rogers please squash commits into one.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/569895159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570004303","html_url":"https://github.com/apache/drill/pull/1929#issuecomment-570004303","issue_url":"https://api.github.com/repos/apache/drill/issues/1929","id":570004303,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDAwNDMwMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T23:18:16Z","updated_at":"2019-12-31T23:18:16Z","author_association":"CONTRIBUTOR","body":"@ihuzenko, thanks much for your review. Squashed commits. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570004303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570005377","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-570005377","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":570005377,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDAwNTM3Nw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T23:33:57Z","updated_at":"2019-12-31T23:33:57Z","author_association":"CONTRIBUTOR","body":"To move this along, I'd like to propose we that have two files. The first would be a \"Contributing.md\" file in the Drill root directory. As a Markdown file, it can be easily viewed by clicking on it. Perhaps add a link to the file from the \"README.md\" file that shows by default in Github. In this file, add all the contribution guidelines, pointers to style, how to run unit tests, checklist for contributors, and so on. We can make this file as verbose as needed.\r\n\r\nThen, have a separate PR template that is concise. Perhaps:\r\n\r\n```\r\n<Title should be DRILL-XXXX: Fix Summary>\r\n<describe the change. If more than one ticket is fixed, include a reference to those tickets.)\r\n\r\n## Documentation\r\n\r\n<Describe user-visible changes in a form close to what should appear in documentation.>\r\n\r\n## Tests\r\n\r\n<Describe tests including new unit or other tests added which cover the change.>\r\n```","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570005377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570006103","html_url":"https://github.com/apache/drill/pull/1913#issuecomment-570006103","issue_url":"https://api.github.com/repos/apache/drill/issues/1913","id":570006103,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDAwNjEwMw==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-12-31T23:43:23Z","updated_at":"2019-12-31T23:43:23Z","author_association":"CONTRIBUTOR","body":"@vvysotskyi, thanks for running the tests with V2 enabled. My original thought was to get the basics in with V2 disabled by default in order to reduce the work required. But, since you went ahead and did the full testing, I agree we should include those fixes in the PR as well.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570006103/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570007876","html_url":"https://github.com/apache/drill/pull/1921#issuecomment-570007876","issue_url":"https://api.github.com/repos/apache/drill/issues/1921","id":570007876,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDAwNzg3Ng==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-01T00:07:53Z","updated_at":"2020-01-01T00:07:53Z","author_association":"CONTRIBUTOR","body":"I concur.  Here's the shortened PR template. We can add a `CONTRIBUTING.md` in another PR. I do think that would be a good addition.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570007876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570093777","html_url":"https://github.com/apache/drill/pull/1946#issuecomment-570093777","issue_url":"https://api.github.com/repos/apache/drill/issues/1946","id":570093777,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDA5Mzc3Nw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-01T23:51:00Z","updated_at":"2020-01-01T23:51:00Z","author_association":"CONTRIBUTOR","body":"After looking at the PCAP and PCAP-NG plugins, both of these really do need some work. I'm going to submit some PRs in the next few weeks for some code cleanup and general improvements.  This is in support of a use case at my company, but in general, I'd like to consolidate the PCAP and PCAP-NG plugins into one so that improvements don't have to be duplicated across both plugins.  But... that's not for this PR.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570093777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570163187","html_url":"https://github.com/apache/drill/pull/1946#issuecomment-570163187","issue_url":"https://api.github.com/repos/apache/drill/issues/1946","id":570163187,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDE2MzE4Nw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T10:03:28Z","updated_at":"2020-01-02T10:03:28Z","author_association":"MEMBER","body":"+1, please squash the commits.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570163187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570193523","html_url":"https://github.com/apache/drill/pull/1949#issuecomment-570193523","issue_url":"https://api.github.com/repos/apache/drill/issues/1949","id":570193523,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDE5MzUyMw==","user":{"login":"arina-ielchiieva","id":15086720,"node_id":"MDQ6VXNlcjE1MDg2NzIw","avatar_url":"https://avatars.githubusercontent.com/u/15086720?v=4","gravatar_id":"","url":"https://api.github.com/users/arina-ielchiieva","html_url":"https://github.com/arina-ielchiieva","followers_url":"https://api.github.com/users/arina-ielchiieva/followers","following_url":"https://api.github.com/users/arina-ielchiieva/following{/other_user}","gists_url":"https://api.github.com/users/arina-ielchiieva/gists{/gist_id}","starred_url":"https://api.github.com/users/arina-ielchiieva/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arina-ielchiieva/subscriptions","organizations_url":"https://api.github.com/users/arina-ielchiieva/orgs","repos_url":"https://api.github.com/users/arina-ielchiieva/repos","events_url":"https://api.github.com/users/arina-ielchiieva/events{/privacy}","received_events_url":"https://api.github.com/users/arina-ielchiieva/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T12:26:06Z","updated_at":"2020-01-02T12:26:06Z","author_association":"MEMBER","body":"+1, LGTM","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570193523/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570227893","html_url":"https://github.com/apache/drill/pull/1946#issuecomment-570227893","issue_url":"https://api.github.com/repos/apache/drill/issues/1946","id":570227893,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDIyNzg5Mw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T14:43:50Z","updated_at":"2020-01-02T14:43:50Z","author_association":"CONTRIBUTOR","body":"Thanks @arina-ielchiieva for the review.  Commits squashed.  Could we please merge this today as this is a blocker for a POC I'm working on?\r\nThanks and Happy New Year!","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570227893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570267104","html_url":"https://github.com/apache/drill/pull/1949#issuecomment-570267104","issue_url":"https://api.github.com/repos/apache/drill/issues/1949","id":570267104,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI2NzEwNA==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T16:50:42Z","updated_at":"2020-01-02T16:51:28Z","author_association":"MEMBER","body":"@paul-rogers, there are conflicts after https://github.com/apache/drill/pull/1929 was merged. Can you resolve it, please?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570267104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570269960","html_url":"https://github.com/apache/drill/pull/1941#issuecomment-570269960","issue_url":"https://api.github.com/repos/apache/drill/issues/1941","id":570269960,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI2OTk2MA==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T17:00:09Z","updated_at":"2020-01-02T17:05:43Z","author_association":"MEMBER","body":"@cgivre, while running tests I've encountered the next test failure:\r\n```\r\n[ERROR] Failures: \r\n[ERROR]   TestExcelFormat.testFileWithDoubleDates:401 1:0 expected:<1412308800000> but was:<1412294400000>\r\n[INFO] \r\n[ERROR] Tests run: 17, Failures: 1, Errors: 0, Skipped: 0\r\n\r\n```\r\n\r\nProbably, you need to use another `DateUtil.getJavaDate(...)` with `TimeZone` notion, and pass `UTC`, rather than using system time zone. ","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570269960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570270213","html_url":"https://github.com/apache/drill/pull/1941#issuecomment-570270213","issue_url":"https://api.github.com/repos/apache/drill/issues/1941","id":570270213,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI3MDIxMw==","user":{"login":"cgivre","id":5513150,"node_id":"MDQ6VXNlcjU1MTMxNTA=","avatar_url":"https://avatars.githubusercontent.com/u/5513150?v=4","gravatar_id":"","url":"https://api.github.com/users/cgivre","html_url":"https://github.com/cgivre","followers_url":"https://api.github.com/users/cgivre/followers","following_url":"https://api.github.com/users/cgivre/following{/other_user}","gists_url":"https://api.github.com/users/cgivre/gists{/gist_id}","starred_url":"https://api.github.com/users/cgivre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgivre/subscriptions","organizations_url":"https://api.github.com/users/cgivre/orgs","repos_url":"https://api.github.com/users/cgivre/repos","events_url":"https://api.github.com/users/cgivre/events{/privacy}","received_events_url":"https://api.github.com/users/cgivre/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T17:00:54Z","updated_at":"2020-01-02T17:00:54Z","author_association":"CONTRIBUTOR","body":"Which test failure?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570270213/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570271066","html_url":"https://github.com/apache/drill/pull/1941#issuecomment-570271066","issue_url":"https://api.github.com/repos/apache/drill/issues/1941","id":570271066,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDI3MTA2Ng==","user":{"login":"KazydubB","id":38408110,"node_id":"MDQ6VXNlcjM4NDA4MTEw","avatar_url":"https://avatars.githubusercontent.com/u/38408110?v=4","gravatar_id":"","url":"https://api.github.com/users/KazydubB","html_url":"https://github.com/KazydubB","followers_url":"https://api.github.com/users/KazydubB/followers","following_url":"https://api.github.com/users/KazydubB/following{/other_user}","gists_url":"https://api.github.com/users/KazydubB/gists{/gist_id}","starred_url":"https://api.github.com/users/KazydubB/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KazydubB/subscriptions","organizations_url":"https://api.github.com/users/KazydubB/orgs","repos_url":"https://api.github.com/users/KazydubB/repos","events_url":"https://api.github.com/users/KazydubB/events{/privacy}","received_events_url":"https://api.github.com/users/KazydubB/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T17:03:38Z","updated_at":"2020-01-02T17:03:38Z","author_association":"MEMBER","body":"@cgivre, excuse me, posted accidentaly while not finished :)","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570271066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570305285","html_url":"https://github.com/apache/drill/pull/1947#issuecomment-570305285","issue_url":"https://api.github.com/repos/apache/drill/issues/1947","id":570305285,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDMwNTI4NQ==","user":{"login":"vvysotskyi","id":20928429,"node_id":"MDQ6VXNlcjIwOTI4NDI5","avatar_url":"https://avatars.githubusercontent.com/u/20928429?v=4","gravatar_id":"","url":"https://api.github.com/users/vvysotskyi","html_url":"https://github.com/vvysotskyi","followers_url":"https://api.github.com/users/vvysotskyi/followers","following_url":"https://api.github.com/users/vvysotskyi/following{/other_user}","gists_url":"https://api.github.com/users/vvysotskyi/gists{/gist_id}","starred_url":"https://api.github.com/users/vvysotskyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vvysotskyi/subscriptions","organizations_url":"https://api.github.com/users/vvysotskyi/orgs","repos_url":"https://api.github.com/users/vvysotskyi/repos","events_url":"https://api.github.com/users/vvysotskyi/events{/privacy}","received_events_url":"https://api.github.com/users/vvysotskyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T18:55:02Z","updated_at":"2020-01-02T18:55:02Z","author_association":"MEMBER","body":"`Readme.md` file will be displayed as images repository readme and will be updated after every auto-build even if custom Readme was specified. I didn't find a way how to disable it but added there a reference to instructions for running Drill on Docker containers.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570305285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570328592","html_url":"https://github.com/apache/drill/pull/1945#issuecomment-570328592","issue_url":"https://api.github.com/repos/apache/drill/issues/1945","id":570328592,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDMyODU5Mg==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-02T20:10:08Z","updated_at":"2020-01-02T20:10:08Z","author_association":"CONTRIBUTOR","body":"Am now seeing failures in the `GUnionFunctions` where a parameter is declared as `UnionHolder` but is now being created as `FieldReader`. Seems that the bug that I fixed may have been introduced to make these functions work, but had the side effect of forcing union parameters to be a `UnionReader` even if declared as a `FieldReader`. Looks like my change now does the opposite. So, more work to be done to make the decision based on the kind of field.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570328592/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570465320","html_url":"https://github.com/apache/drill/pull/1944#issuecomment-570465320","issue_url":"https://api.github.com/repos/apache/drill/issues/1944","id":570465320,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDQ2NTMyMA==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T05:16:18Z","updated_at":"2020-01-03T05:16:18Z","author_association":"CONTRIBUTOR","body":"@ihuzenko, thanks for your thorough review, as usual. Here is my general philosophy on refactoring: do it in bite-size chunks. The first step here was simply to break code gen out of the operator itself. By leaving the bulk of the code unchanged, one can do a review by diffing the old and new files (not in GitHub, sadly), and see that blocks of code are identical, they have just been moved; in some cases from one huge function to smaller functions. Then, once we're satisfied that this simple refactoring works, we can think about the next step.\r\n\r\nIf you agree with the step-by-step approach, then perhaps we can commit this first step to put us in position to make subsequent changes.","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570465320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/drill/issues/comments/570465345","html_url":"https://github.com/apache/drill/pull/1944#issuecomment-570465345","issue_url":"https://api.github.com/repos/apache/drill/issues/1944","id":570465345,"node_id":"MDEyOklzc3VlQ29tbWVudDU3MDQ2NTM0NQ==","user":{"login":"paul-rogers","id":3248881,"node_id":"MDQ6VXNlcjMyNDg4ODE=","avatar_url":"https://avatars.githubusercontent.com/u/3248881?v=4","gravatar_id":"","url":"https://api.github.com/users/paul-rogers","html_url":"https://github.com/paul-rogers","followers_url":"https://api.github.com/users/paul-rogers/followers","following_url":"https://api.github.com/users/paul-rogers/following{/other_user}","gists_url":"https://api.github.com/users/paul-rogers/gists{/gist_id}","starred_url":"https://api.github.com/users/paul-rogers/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paul-rogers/subscriptions","organizations_url":"https://api.github.com/users/paul-rogers/orgs","repos_url":"https://api.github.com/users/paul-rogers/repos","events_url":"https://api.github.com/users/paul-rogers/events{/privacy}","received_events_url":"https://api.github.com/users/paul-rogers/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-01-03T05:16:29Z","updated_at":"2020-01-03T05:16:29Z","author_association":"CONTRIBUTOR","body":"\r\nLonger term, it seems we might want to restructure how we generate code. Today, if we run a query across, say, 20 minor fragments in the same Drillbit, and they all see the same schema (the normal case), then all 20 will generate exactly the same code. Then, down in the compiler layer, the first thread will compile the code and put it into the code cache. Threads 2 through 20 will get the compiled code from the cache.\r\n\r\nBut, today, the process is **very** inefficient. Each thread:\r\n\r\n* Does the semantic expression analysis (function lookup, type resolution, etc.)\r\n* Generate the entire Java code.\r\n* Rewrite the Java code to remove the varying bits (the generated class name).\r\n* Hash the entire code to get a hash code to look up in the code cache.\r\n* If a match is found, compare the entire code block byte-by-byte to verify a match.\r\n* If new, generate code, cache it, and use the source code (which can be huge) as the cache key.\r\n\r\nThe only real benefit of this approach is that it has worked all these years. \r\n\r\nThe better approach is to:\r\n\r\n* Create a parameterized \"descriptor\" object that holds all the factors needed to generate the code. (Input schema, expressions, relevant session options.)\r\n* Use that descriptor as a key into the code lookup table. If found, reuse the compiled code without any code gen.\r\n* If not found, only then tell the descriptor to generate the needed code, which will then be shared by all fragments.\r\n\r\nThe work I did back in the managed sort, and that I'm starting here, at least splits code gen from the operator.\r\n\r\nI suspect one (very long term) improvement would be to introduce another layer of abstraction like we had in Impala. The code gen code tries to do the kind of logical type analysis normally done in a planner. But, because the goal is Java code gen, it tends to mix SQL type analysis with Java implementation details, leading to overly complex code. (That's what I'm fighting with the typeof/UNION issue.).\r\n\r\nSuch an approach would be doubly useful a we roll out the schema improvements your team has been doing. If we know the schema (types) at plan time, we can work out all the type conversion stuff at that time. In fact, we can even play the Spark trick: generate Java once in the planner and send it to the workers.\r\n\r\nI have only vague ideas here; have not spent much time on it. Sounds like you've looked at this some. What do you suggest we do?","reactions":{"url":"https://api.github.com/repos/apache/drill/issues/comments/570465345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]