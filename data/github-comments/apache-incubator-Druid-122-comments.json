[{"url":"https://api.github.com/repos/apache/druid/issues/comments/271337833","html_url":"https://github.com/apache/druid/pull/3792#issuecomment-271337833","issue_url":"https://api.github.com/repos/apache/druid/issues/3792","id":271337833,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTMzNzgzMw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T16:49:41Z","updated_at":"2017-01-09T16:49:41Z","author_association":"CONTRIBUTOR","body":"@gianm, thank you for the review. I updated the patch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271337833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271354828","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-271354828","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":271354828,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTM1NDgyOA==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T17:53:11Z","updated_at":"2017-01-09T17:53:11Z","author_association":"MEMBER","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271354828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271421413","html_url":"https://github.com/apache/druid/pull/3834#issuecomment-271421413","issue_url":"https://api.github.com/repos/apache/druid/issues/3834","id":271421413,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQyMTQxMw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:01:02Z","updated_at":"2017-01-09T22:01:02Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271421413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271427816","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271427816","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271427816,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQyNzgxNg==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:27:13Z","updated_at":"2017-01-09T22:27:13Z","author_association":"MEMBER","body":"We use Java 8 to build and run druid code and facing this issue in our internal deployment. The way it manifests is that thread gets stuck at point where `JavaCompatUtils.keySet(<Map>)` is used. Using `entrySet` for iteration or explicitly casting to a Map like `((Map)m).keySet` as suggested in https://bugs.openjdk.java.net/browse/JDK-8151366 works. Explicit cast however leads to loss of Generic type for key and values in the map.\r\nAny thoughts ?\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271427816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271428596","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271428596","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271428596,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQyODU5Ng==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:30:18Z","updated_at":"2017-01-09T22:30:18Z","author_association":"CONTRIBUTOR","body":"What do you mean by \"the thread gets stuck\"? We use jdk 8 to build and run Druid code too and haven't seen anything like that.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271428596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430262","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271430262","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271430262,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQzMDI2Mg==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:37:06Z","updated_at":"2017-01-09T22:37:06Z","author_association":"MEMBER","body":"I mean the code beyond that point is not executed. For example, neither [this](https://github.com/druid-io/druid/blob/master/extensions-core/kafka-indexing-service/src/main/java/io/druid/indexing/kafka/supervisor/KafkaSupervisor.java#L1231) `for` loop gets executed nor the control goes beyond the loop. I took a thread dump but that suggests that the supervisor thread is waiting on `take` method. So I am not entirely sure what's happening.\r\n```\r\n\"KafkaSupervisor-v2_metrics_cluster-Scheduler-0\" #196 daemon prio=5 os_prio=0 tid=0x00007fe780180000 nid=0x74b0 waiting on condition [0x00007fe6f9da2000]\r\n   java.lang.Thread.State: TIMED_WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x00000004e1c30bc8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2078)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:1093)\r\n\tat java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:809)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n\r\n\"KafkaSupervisor-v2_metrics_cluster\" #195 daemon prio=5 os_prio=0 tid=0x00007fe780173800 nid=0x74af waiting on condition [0x00007fe6f9ea3000]\r\n   java.lang.Thread.State: WAITING (parking)\r\n\tat sun.misc.Unsafe.park(Native Method)\r\n\t- parking to wait for  <0x00000004e1c30df8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)\r\n\tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:175)\r\n\tat java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039)\r\n\tat java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)\r\n\tat java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1067)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430853","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271430853","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271430853,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQzMDg1Mw==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:39:40Z","updated_at":"2017-01-09T22:39:40Z","author_association":"MEMBER","body":"I added log statements to check how far the code is being executed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430882","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271430882","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271430882,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQzMDg4Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:39:48Z","updated_at":"2017-01-09T22:39:48Z","author_association":"CONTRIBUTOR","body":"Hmm, that seems like some sort of \"Throwable gets thrown but not caught and thread dies\" thing. Do you see interesting errors if you put a try/catch Throwable around whatever is calling keySet?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271430882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271432588","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271432588","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271432588,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQzMjU4OA==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:47:17Z","updated_at":"2017-01-09T22:47:17Z","author_association":"MEMBER","body":"I just tried that and do not see any exceptions","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271432588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271434958","html_url":"https://github.com/apache/druid/issues/3795#issuecomment-271434958","issue_url":"https://api.github.com/repos/apache/druid/issues/3795","id":271434958,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQzNDk1OA==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T22:57:58Z","updated_at":"2017-01-09T22:57:58Z","author_association":"MEMBER","body":"Actually there is an `Error` thrown, I was just catching `Exception` and seems like I have an old version of `java-util` jar that does not have the `JavaCompatUtils` sorry for bothering. My mistake, I think it will work after I put in the new jar. Thanks ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271434958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271445536","html_url":"https://github.com/apache/druid/pull/3831#issuecomment-271445536","issue_url":"https://api.github.com/repos/apache/druid/issues/3831","id":271445536,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQ0NTUzNg==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-09T23:54:31Z","updated_at":"2017-01-09T23:54:31Z","author_association":"CONTRIBUTOR","body":"@KurtYoung can you take a look?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271445536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271453727","html_url":"https://github.com/apache/druid/issues/3835#issuecomment-271453727","issue_url":"https://api.github.com/repos/apache/druid/issues/3835","id":271453727,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQ1MzcyNw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T00:44:44Z","updated_at":"2017-01-10T00:44:44Z","author_association":"CONTRIBUTOR","body":"That should be there already.\n\n/leader\n\nOn Mon, Jan 9, 2017 at 4:34 PM, Charles Allen <notifications@github.com>\nwrote:\n\n> This ask is that a Monitor be put in place on the overlord (and probably\n> coordinator) that reports the leadership status of that part of the service.\n>\n> ‚Äî\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/druid-io/druid/issues/3835>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AAaJJcDaPTOSPrqf7dJi8TdEutc8-oOXks5rQtIMgaJpZM4Le5mT>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271453727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271454553","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-271454553","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":271454553,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQ1NDU1Mw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T00:50:01Z","updated_at":"2017-01-10T00:50:01Z","author_association":"CONTRIBUTOR","body":"I'm working on this.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271454553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271454558","html_url":"https://github.com/apache/druid/issues/3835#issuecomment-271454558","issue_url":"https://api.github.com/repos/apache/druid/issues/3835","id":271454558,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQ1NDU1OA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T00:50:05Z","updated_at":"2017-01-10T00:50:05Z","author_association":"CONTRIBUTOR","body":"@drcrallen do you mean a separate monitor vs an http endpoint? what's the use case?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271454558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271458100","html_url":"https://github.com/apache/druid/issues/3835#issuecomment-271458100","issue_url":"https://api.github.com/repos/apache/druid/issues/3835","id":271458100,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTQ1ODEwMA==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T01:12:42Z","updated_at":"2017-01-10T01:12:42Z","author_association":"CONTRIBUTOR","body":"I mean a `com.metamx.metrics.Monitor` that emits information about if the node is currently leader. We're seeing some leadership issues when the zk connection has problems. And having information about if a node thinks it is leader would have been helpful.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271458100/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271514288","html_url":"https://github.com/apache/druid/pull/3529#issuecomment-271514288","issue_url":"https://api.github.com/repos/apache/druid/issues/3529","id":271514288,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTUxNDI4OA==","user":{"login":"kosii","id":419033,"node_id":"MDQ6VXNlcjQxOTAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/419033?v=4","gravatar_id":"","url":"https://api.github.com/users/kosii","html_url":"https://github.com/kosii","followers_url":"https://api.github.com/users/kosii/followers","following_url":"https://api.github.com/users/kosii/following{/other_user}","gists_url":"https://api.github.com/users/kosii/gists{/gist_id}","starred_url":"https://api.github.com/users/kosii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kosii/subscriptions","organizations_url":"https://api.github.com/users/kosii/orgs","repos_url":"https://api.github.com/users/kosii/repos","events_url":"https://api.github.com/users/kosii/events{/privacy}","received_events_url":"https://api.github.com/users/kosii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T08:25:43Z","updated_at":"2017-01-10T08:25:43Z","author_association":"NONE","body":"okay, for future reference it only works for non-union nested fields","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271514288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271626885","html_url":"https://github.com/apache/druid/pull/3836#issuecomment-271626885","issue_url":"https://api.github.com/repos/apache/druid/issues/3836","id":271626885,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTYyNjg4NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T16:40:23Z","updated_at":"2017-01-10T16:40:23Z","author_association":"CONTRIBUTOR","body":"Thanks @jihoonson, more checkstyles are more better!\r\n\r\nI reviewed the changes ignoring whitespace (https://github.com/druid-io/druid/pull/3836/files?w=1) and it looks like other than whitespace, mostly you are adding headers to files that miss them, and changing the old style headers in druid-api to new style headers. That's good, since we just moved them in a while back without updating the headers.\r\n\r\nCould you please fix the headers on SQLServerConnector.java, BoundDimFilterTest.java, SQLMetadataRuleManager.java, and SQLMetadataSegmentPublisher.java? They all have two headers now.\r\n\r\nAfter that the change LGTM","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271626885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271653387","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271653387","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271653387,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1MzM4Nw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T18:15:32Z","updated_at":"2017-01-10T18:15:32Z","author_association":"CONTRIBUTOR","body":"@kaijianding @KurtYoung is still WIP? We are really hoping to get it in for 0.10.0","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271653387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271654434","html_url":"https://github.com/apache/druid/pull/3792#issuecomment-271654434","issue_url":"https://api.github.com/repos/apache/druid/issues/3792","id":271654434,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1NDQzNA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T18:19:35Z","updated_at":"2017-01-10T18:19:35Z","author_association":"CONTRIBUTOR","body":"üëç from me","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271654434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271654876","html_url":"https://github.com/apache/druid/pull/3836#issuecomment-271654876","issue_url":"https://api.github.com/repos/apache/druid/issues/3836","id":271654876,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1NDg3Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T18:21:13Z","updated_at":"2017-01-10T18:21:13Z","author_association":"CONTRIBUTOR","body":"üëç from me after addressing @gianm's comment","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271654876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271655085","html_url":"https://github.com/apache/druid/issues/3837#issuecomment-271655085","issue_url":"https://api.github.com/repos/apache/druid/issues/3837","id":271655085,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1NTA4NQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T18:22:04Z","updated_at":"2017-01-10T18:22:04Z","author_association":"CONTRIBUTOR","body":"This is the motivation for https://github.com/druid-io/druid/issues/3835 better monitoring of what the overlord thinks its internal state is.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271655085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271659843","html_url":"https://github.com/apache/druid/pull/3831#issuecomment-271659843","issue_url":"https://api.github.com/repos/apache/druid/issues/3831","id":271659843,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY1OTg0Mw==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T18:40:40Z","updated_at":"2017-01-10T18:40:40Z","author_association":"CONTRIBUTOR","body":"@gianm is there any possible race condition where active=0 but we still need the segment?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271659843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271671571","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-271671571","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":271671571,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY3MTU3MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T19:23:13Z","updated_at":"2017-01-10T19:41:52Z","author_association":"CONTRIBUTOR","body":"@drcrallen we discussed it more in the syncup and general consensus is on letting coordinator load lookup extensions and adjust namespace lookup implementation if necessary so that it only starts populating cache etc if start() method is called or some other way. \r\n\r\ndoes that sound ok?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271671571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271681976","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-271681976","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":271681976,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTY4MTk3Ng==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T20:02:10Z","updated_at":"2017-01-10T20:02:10Z","author_association":"CONTRIBUTOR","body":"The lookup def currently is most closely related to a LoadSpec (as mentioned in the sync up).\r\n\r\nAs such, if there's a way to add a wrapping metadata (kind of like the segment info) around it that accomplishes the versioning desired, I would rather have that.\r\n\r\nBasically it boils down to this: When a historical tier is full-ish, or the coordinator is having trouble assigning segments, or has a lot of segments to assign, then it spends extra long computing segment placement. Our coordinator is already pretty heavily utilized and I do not want it to be doing more stuff that can cause random spikes of load on the service without very strict QoS on what it needs to be doing, and good controls over the footprint.\r\n\r\nAnother way to think about it is with segment load/drop strategies. I would rather move lookups in a way that would make sense for segment management to go that DOESN'T involve ZK, and let it serve as an experimental ground for node state management. If it wouldn't work for segment management, I don't have a lot of faith it would work for lookups, and the coordinator trying to resolve `replaces` on all segments or lookup defs per node does not seem scalable.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271681976/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271716818","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-271716818","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":271716818,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTcxNjgxOA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-10T22:21:31Z","updated_at":"2017-01-10T22:21:56Z","author_association":"CONTRIBUTOR","body":"@drcrallen I do want segment mgmt and lookup mgmt to happen in similar ways and without zookeeper and m working towards that.\r\n\r\nnow, coordinator does check segment versions and makes appropriate load/drop decisions. it doesn't has to happen per historical because all segments are not supposed to go to all historicals . but in case of lookups, all lookups has to go to all historicals for a given lookup-tier so the check has to be done per historical and lookup combination within a lookup-tier.\r\n\r\nnow regarding the check, it can be done by using `replace` method (needs lookup extensions loaded on coordinator) or possibly by managing wrapping metadata for each lookup. side advantage of first approach is that you get deserialization verification done for the lookups submitted by user.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271716818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271744884","html_url":"https://github.com/apache/druid/pull/3792#issuecomment-271744884","issue_url":"https://api.github.com/repos/apache/druid/issues/3792","id":271744884,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc0NDg4NA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T00:48:06Z","updated_at":"2017-01-11T00:48:06Z","author_association":"CONTRIBUTOR","body":"@gianm, thank you for your review. I updated the patch.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271744884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271748202","html_url":"https://github.com/apache/druid/pull/3836#issuecomment-271748202","issue_url":"https://api.github.com/repos/apache/druid/issues/3836","id":271748202,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc0ODIwMg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T01:08:09Z","updated_at":"2017-01-11T01:08:09Z","author_association":"CONTRIBUTOR","body":"@gianm, @fjy thank you for your review. I fixed it. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271748202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271774038","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271774038","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271774038,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc3NDAzOA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T04:18:29Z","updated_at":"2017-01-11T04:22:11Z","author_association":"CONTRIBUTOR","body":"I did not have a way to test it on our normal setups, yet, but I've done some preliminary checks on my home setup. The caveat is that the data was stored on HDD, as I don't have a large enough SSD at home.\r\nAt this time I can confirm that this indeed avoids the pitfall described in #3297. This means, in our case (on HDD) it is 100 times (!) faster than normal select. I was able to retrieve about a million rows per second (again, that's on HDD).\r\nIt was tested by talking directly to Historical.\r\n\r\nHaving used it a bit, I have a concern about the API, though. Currently, it seems that even though it's streaming, it always returns all data as one JSON list. This means that the client has to download the whole set anyway, before it's able to decode it.\r\nSay that we ask for 5 billion rows (which is not very unusual in our setups), the client likely won't be able to fit it in memory at once.\r\nWhat I'd like to see instead is a series of JSON lists, one for each batch, separated with new line (or `\\0` or whatever). E.g.\r\n```json\r\n[{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<first_batch>]}]\r\n[{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<second_batch>]}]\r\n[{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<third_batch>]}]\r\n```\r\n, instead of\r\n```json\r\n[{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<first_batch>]}, {\"segmentId\": \"...\", \"columns\": [...], \"events\": [<second_batch>]}, {\"segmentId\": \"...\", \"columns\": [...], \"events\": [<third_batch>]}]\r\n```\r\nIt will produce a bit more \"noise\", true, but is more feasible to use in practice, I think.\r\nApart from better memory use, this would also enable the client to start processing partial data, while the db connector is downloading the next batch.\r\n\r\nAnyway, thanks a lot for this, hopefully it will solve majority of our performance problems regarding Druid use :-).\r\n\r\n/cc @kaijianding \r\n\r\nEdit: Fix second example.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271774038/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271780028","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271780028","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271780028,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc4MDAyOA==","user":{"login":"kaijianding","id":8663725,"node_id":"MDQ6VXNlcjg2NjM3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8663725?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijianding","html_url":"https://github.com/kaijianding","followers_url":"https://api.github.com/users/kaijianding/followers","following_url":"https://api.github.com/users/kaijianding/following{/other_user}","gists_url":"https://api.github.com/users/kaijianding/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijianding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijianding/subscriptions","organizations_url":"https://api.github.com/users/kaijianding/orgs","repos_url":"https://api.github.com/users/kaijianding/repos","events_url":"https://api.github.com/users/kaijianding/events{/privacy}","received_events_url":"https://api.github.com/users/kaijianding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T05:13:28Z","updated_at":"2017-01-11T05:13:28Z","author_association":"CONTRIBUTOR","body":"You should use streaming jackson read to make it real streaming, please check the JsonParserIterator in DirectDruidClient. \r\nIn this way, you don't have to buffer all data in memory, you will get one batch on one time and get the next batch when you need it (the next batch is even not produced in historical before you retrieve it! This the real streaming). @KenjiTakahashi ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271780028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271783854","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271783854","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271783854,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc4Mzg1NA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T05:45:46Z","updated_at":"2017-01-11T05:45:46Z","author_association":"CONTRIBUTOR","body":"@kaijianding Thanks, but we're using Python, not Java. Is it possible to perform such query in a generic manner? Or is it just an iterative JSON parser? That could work, but I've always felt that it's bending the JSON spec too much ;-).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271783854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271785296","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271785296","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271785296,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc4NTI5Ng==","user":{"login":"kaijianding","id":8663725,"node_id":"MDQ6VXNlcjg2NjM3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8663725?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijianding","html_url":"https://github.com/kaijianding","followers_url":"https://api.github.com/users/kaijianding/followers","following_url":"https://api.github.com/users/kaijianding/following{/other_user}","gists_url":"https://api.github.com/users/kaijianding/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijianding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijianding/subscriptions","organizations_url":"https://api.github.com/users/kaijianding/orgs","repos_url":"https://api.github.com/users/kaijianding/repos","events_url":"https://api.github.com/users/kaijianding/events{/privacy}","received_events_url":"https://api.github.com/users/kaijianding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T05:57:51Z","updated_at":"2017-01-11T06:05:43Z","author_association":"CONTRIBUTOR","body":"https://pypi.python.org/pypi/ijson/ and https://github.com/danielyule/naya should work. @KenjiTakahashi you can google how to parse streaming json in python\r\nDruid can only export json, though I think it is not efficient, but this is the life :)","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271785296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271797117","html_url":"https://github.com/apache/druid/pull/3834#issuecomment-271797117","issue_url":"https://api.github.com/repos/apache/druid/issues/3834","id":271797117,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc5NzExNw==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T07:24:15Z","updated_at":"2017-01-11T07:24:15Z","author_association":"CONTRIBUTOR","body":"Looks good to me. I checked the options work well.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271797117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271798820","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271798820","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271798820,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTc5ODgyMA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T07:35:41Z","updated_at":"2017-01-11T07:35:41Z","author_association":"CONTRIBUTOR","body":"@kaijianding OK, so I get that it's not (easily) doable for Druid to return multiple JSONs for a single query? Well, then, I guess we'll have to live with that ;-).\r\nI am aware of the `ijson` library, I'll try to make some use of it later, we'll see how it goes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271798820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271806255","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271806255","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271806255,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTgwNjI1NQ==","user":{"login":"kaijianding","id":8663725,"node_id":"MDQ6VXNlcjg2NjM3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8663725?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijianding","html_url":"https://github.com/kaijianding","followers_url":"https://api.github.com/users/kaijianding/followers","following_url":"https://api.github.com/users/kaijianding/following{/other_user}","gists_url":"https://api.github.com/users/kaijianding/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijianding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijianding/subscriptions","organizations_url":"https://api.github.com/users/kaijianding/orgs","repos_url":"https://api.github.com/users/kaijianding/repos","events_url":"https://api.github.com/users/kaijianding/events{/privacy}","received_events_url":"https://api.github.com/users/kaijianding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T08:20:49Z","updated_at":"2017-01-11T08:20:49Z","author_association":"CONTRIBUTOR","body":"Use multi JSONs or not is defined by how QueryResource output the ```yielder```, currently , it is ```jsonWriter.writeValue(os, yielder);``` which is actually in DruidDefaultSerializersModule\r\n```\r\n            try {\r\n              jgen.writeStartArray();\r\n              while (!yielder.isDone()) {\r\n                final Object o = yielder.get();\r\n                jgen.writeObject(o);\r\n                yielder = yielder.next(null);\r\n              }\r\n              jgen.writeEndArray();\r\n            } finally {\r\n              yielder.close();\r\n            }\r\n```\r\nWe can copy the code to QueryResource and remove the ``` jgen.writeStartArray();``` and ```jgen.writeEndArray();``` to produce the result like:\r\n```\r\n{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<first_batch>]}\r\n{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<second_batch>]}\r\n{\"segmentId\": \"...\", \"columns\": [...], \"events\": [<third_batch>]}\r\n```\r\n\r\nHowever we can handle streaming json by using jackson in java and ijson in python, I think it is not a good idea to modify this part of code when we have alternative solution.\r\n@KenjiTakahashi ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271806255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271819860","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-271819860","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":271819860,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTgxOTg2MA==","user":{"login":"KurtYoung","id":955396,"node_id":"MDQ6VXNlcjk1NTM5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/955396?v=4","gravatar_id":"","url":"https://api.github.com/users/KurtYoung","html_url":"https://github.com/KurtYoung","followers_url":"https://api.github.com/users/KurtYoung/followers","following_url":"https://api.github.com/users/KurtYoung/following{/other_user}","gists_url":"https://api.github.com/users/KurtYoung/gists{/gist_id}","starred_url":"https://api.github.com/users/KurtYoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KurtYoung/subscriptions","organizations_url":"https://api.github.com/users/KurtYoung/orgs","repos_url":"https://api.github.com/users/KurtYoung/repos","events_url":"https://api.github.com/users/KurtYoung/events{/privacy}","received_events_url":"https://api.github.com/users/KurtYoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T09:27:53Z","updated_at":"2017-01-11T09:27:53Z","author_association":"CONTRIBUTOR","body":"@kaijianding I think we should make this finalized by this week, and fix every problems we met in production environment, what do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271819860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271820448","html_url":"https://github.com/apache/druid/pull/3831#issuecomment-271820448","issue_url":"https://api.github.com/repos/apache/druid/issues/3831","id":271820448,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTgyMDQ0OA==","user":{"login":"KurtYoung","id":955396,"node_id":"MDQ6VXNlcjk1NTM5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/955396?v=4","gravatar_id":"","url":"https://api.github.com/users/KurtYoung","html_url":"https://github.com/KurtYoung","followers_url":"https://api.github.com/users/KurtYoung/followers","following_url":"https://api.github.com/users/KurtYoung/following{/other_user}","gists_url":"https://api.github.com/users/KurtYoung/gists{/gist_id}","starred_url":"https://api.github.com/users/KurtYoung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KurtYoung/subscriptions","organizations_url":"https://api.github.com/users/KurtYoung/orgs","repos_url":"https://api.github.com/users/KurtYoung/repos","events_url":"https://api.github.com/users/KurtYoung/events{/privacy}","received_events_url":"https://api.github.com/users/KurtYoung/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T09:30:40Z","updated_at":"2017-01-11T16:35:33Z","author_association":"CONTRIBUTOR","body":"@fjy Yeah, i will take a look. @haoxiang47 thanks for your work, and i think it's better to keep the code style consistent with current project, it contains too many spaces and format changes, make it hard to see what exactly had been changed.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271820448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271977582","html_url":"https://github.com/apache/druid/issues/325#issuecomment-271977582","issue_url":"https://api.github.com/repos/apache/druid/issues/325","id":271977582,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTk3NzU4Mg==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T20:00:24Z","updated_at":"2017-01-11T20:00:24Z","author_association":"MEMBER","body":"I wonder could this become not an issue by design (and even configurations like \"numConnections\" and \"numThreads\" are removed) if we use asynchronous computations everywhere, because asynchronous piece of work doesn't lock the thread.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271977582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/271988195","html_url":"https://github.com/apache/druid/pull/3834#issuecomment-271988195","issue_url":"https://api.github.com/repos/apache/druid/issues/3834","id":271988195,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MTk4ODE5NQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T20:43:30Z","updated_at":"2017-01-11T20:43:30Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/271988195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272004023","html_url":"https://github.com/apache/druid/issues/325#issuecomment-272004023","issue_url":"https://api.github.com/repos/apache/druid/issues/325","id":272004023,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAwNDAyMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T21:42:10Z","updated_at":"2017-01-11T21:42:10Z","author_association":"CONTRIBUTOR","body":"This issue was specifically about tcp connections to a dead historical node not getting reset or timed out in a timely manner, leading to queries involving that historical node (which might be all queries) getting stalled and then potentially stalling the entire broker (if all its query threads were taken up by such stalled queries).\r\n\r\n@leventov I think you're suggesting that if we remove the \"one query thread per query\" limit, then even if we have a bunch of stalled queries, we could prevent the entire broker from getting stalled. That's true but we do need _some_ limit on concurrent queries, because each one requires memory (for result buffers, tracking involved data nodes, etc) and if we allow unlimited concurrent queries we will eventually run out of memory. See related discussion on #3810. We could probably increase the number of possible concurrent queries substantially though.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272004023/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272018804","html_url":"https://github.com/apache/druid/pull/3841#issuecomment-272018804","issue_url":"https://api.github.com/repos/apache/druid/issues/3841","id":272018804,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAxODgwNA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T22:40:29Z","updated_at":"2017-01-11T22:40:29Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272018804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272019812","html_url":"https://github.com/apache/druid/pull/3736#issuecomment-272019812","issue_url":"https://api.github.com/repos/apache/druid/issues/3736","id":272019812,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAxOTgxMg==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T22:44:58Z","updated_at":"2017-01-11T22:44:58Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272019812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272030524","html_url":"https://github.com/apache/druid/pull/3842#issuecomment-272030524","issue_url":"https://api.github.com/repos/apache/druid/issues/3842","id":272030524,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAzMDUyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-11T23:36:21Z","updated_at":"2017-01-11T23:36:21Z","author_association":"CONTRIBUTOR","body":"@pjain1 is this a new approach to #3678? It looks like it's reworking some of the stuff from that patch. Also is it meant to solve the issue with replicas brought up in https://github.com/druid-io/druid/issues/3741#issuecomment-264952142?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272030524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272038703","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272038703","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272038703,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjAzODcwMw==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T00:22:49Z","updated_at":"2017-01-12T00:22:49Z","author_association":"MEMBER","body":"@gianm thanks, addressed comments.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272038703/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272057639","html_url":"https://github.com/apache/druid/pull/3806#issuecomment-272057639","issue_url":"https://api.github.com/repos/apache/druid/issues/3806","id":272057639,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA1NzYzOQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T02:21:18Z","updated_at":"2017-01-12T02:21:18Z","author_association":"CONTRIBUTOR","body":":+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272057639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272062480","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272062480","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272062480,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA2MjQ4MA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T02:55:56Z","updated_at":"2017-01-12T02:55:56Z","author_association":"MEMBER","body":"@gianm I want also resolve the question with `LimitedSequence` and `isDone()` as part of this PR, so marked as WIP","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272062480/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272064861","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272064861","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272064861,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA2NDg2MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T03:14:46Z","updated_at":"2017-01-12T03:14:46Z","author_association":"CONTRIBUTOR","body":"ok @leventov. @cheddar do you have insight into this thread: https://github.com/druid-io/druid/pull/3693#discussion_r95703215, & if there's a good reason for why things are the way they are?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272064861/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272066454","html_url":"https://github.com/apache/druid/pull/3843#issuecomment-272066454","issue_url":"https://api.github.com/repos/apache/druid/issues/3843","id":272066454,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA2NjQ1NA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T03:26:53Z","updated_at":"2017-01-12T03:26:53Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272066454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272071034","html_url":"https://github.com/apache/druid/pull/3831#issuecomment-272071034","issue_url":"https://api.github.com/repos/apache/druid/issues/3831","id":272071034,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA3MTAzNA==","user":{"login":"haoxiang47","id":7543477,"node_id":"MDQ6VXNlcjc1NDM0Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7543477?v=4","gravatar_id":"","url":"https://api.github.com/users/haoxiang47","html_url":"https://github.com/haoxiang47","followers_url":"https://api.github.com/users/haoxiang47/followers","following_url":"https://api.github.com/users/haoxiang47/following{/other_user}","gists_url":"https://api.github.com/users/haoxiang47/gists{/gist_id}","starred_url":"https://api.github.com/users/haoxiang47/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haoxiang47/subscriptions","organizations_url":"https://api.github.com/users/haoxiang47/orgs","repos_url":"https://api.github.com/users/haoxiang47/repos","events_url":"https://api.github.com/users/haoxiang47/events{/privacy}","received_events_url":"https://api.github.com/users/haoxiang47/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T04:05:37Z","updated_at":"2017-01-12T04:05:37Z","author_association":"NONE","body":"Yeah thanks for review, I will keep the code style first and update my code, so excepet the code style, if there has any other problem? My logic will simplely like this:\r\n\r\ncompare the druid_tasks and druid_pendingSegments, find the dataset which 'active' is 0 in druid_tasks and match the sequence_name in druid_pendingSegments and baseSequenceName in druid_tasks's payload ioConfig parameter which type is kafka.\r\n\r\nand then I have the question that where should this interface to action? maybe in overlord or kafka supervisior?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272071034/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272072925","html_url":"https://github.com/apache/druid/issues/3840#issuecomment-272072925","issue_url":"https://api.github.com/repos/apache/druid/issues/3840","id":272072925,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA3MjkyNQ==","user":{"login":"erikdubbelboer","id":522870,"node_id":"MDQ6VXNlcjUyMjg3MA==","avatar_url":"https://avatars.githubusercontent.com/u/522870?v=4","gravatar_id":"","url":"https://api.github.com/users/erikdubbelboer","html_url":"https://github.com/erikdubbelboer","followers_url":"https://api.github.com/users/erikdubbelboer/followers","following_url":"https://api.github.com/users/erikdubbelboer/following{/other_user}","gists_url":"https://api.github.com/users/erikdubbelboer/gists{/gist_id}","starred_url":"https://api.github.com/users/erikdubbelboer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erikdubbelboer/subscriptions","organizations_url":"https://api.github.com/users/erikdubbelboer/orgs","repos_url":"https://api.github.com/users/erikdubbelboer/repos","events_url":"https://api.github.com/users/erikdubbelboer/events{/privacy}","received_events_url":"https://api.github.com/users/erikdubbelboer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T04:24:30Z","updated_at":"2017-01-12T04:24:30Z","author_association":"CONTRIBUTOR","body":"I think I can implement this by adding another method to [ValueMatcherFactory.java](https://github.com/druid-io/druid/blob/d981a2aa02aedfdf18e0bed5848e704bd9597563/processing/src/main/java/io/druid/query/filter/ValueMatcherFactory.java#L38) like `makeValueMatcher(String[] dimensions, Comparator<String> compare)`. The implementation in [StringValueMatcherColumnSelectorStrategy](https://github.com/druid-io/druid/blob/d8702ebece43a7103766240e218aa1f9ac441627/processing/src/main/java/io/druid/query/filter/StringValueMatcherColumnSelectorStrategy.java#L31) would be quite easy and just passes different dimensions values to the comparator (would need a custom comparator class if we want to support comparing more than 2 dimensions at once). Implementing the actual Filter after this is quite easy.\r\n\r\nDoes that seem accurate?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272072925/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272074371","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272074371","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272074371,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA3NDM3MQ==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T04:38:55Z","updated_at":"2017-01-12T04:38:55Z","author_association":"CONTRIBUTOR","body":"Gian, which things specifically?  Just reading the description of the PR it\nall sounds legit (and I would agree that the yielder closing thing is a\nbug).  Are there specific things you are concerned about?\n\n\nOn Wed, Jan 11, 2017 at 7:14 PM Gian Merlino <notifications@github.com>\nwrote:\n\n> ok @leventov <https://github.com/leventov>. @cheddar\n> <https://github.com/cheddar> do you have insight into this thread: #3693\n> (comment)\n> <https://github.com/druid-io/druid/pull/3693#discussion_r95703215>, & if\n> there's a good reason for why things are the way they are?\n>\n>\n>\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n>\n>\n> Reply to this email directly, view it on GitHub\n> <https://github.com/druid-io/druid/pull/3693#issuecomment-272064861>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AANOyr5STYgjeR-J3ocMVATUQLffPYz1ks5rRZqngaJpZM4Kx7lg>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272074371/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272074849","html_url":"https://github.com/apache/druid/pull/3842#issuecomment-272074849","issue_url":"https://api.github.com/repos/apache/druid/issues/3842","id":272074849,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA3NDg0OQ==","user":{"login":"pjain1","id":11787983,"node_id":"MDQ6VXNlcjExNzg3OTgz","avatar_url":"https://avatars.githubusercontent.com/u/11787983?v=4","gravatar_id":"","url":"https://api.github.com/users/pjain1","html_url":"https://github.com/pjain1","followers_url":"https://api.github.com/users/pjain1/followers","following_url":"https://api.github.com/users/pjain1/following{/other_user}","gists_url":"https://api.github.com/users/pjain1/gists{/gist_id}","starred_url":"https://api.github.com/users/pjain1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjain1/subscriptions","organizations_url":"https://api.github.com/users/pjain1/orgs","repos_url":"https://api.github.com/users/pjain1/repos","events_url":"https://api.github.com/users/pjain1/events{/privacy}","received_events_url":"https://api.github.com/users/pjain1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T04:43:39Z","updated_at":"2017-01-12T04:43:39Z","author_association":"MEMBER","body":"Yes it is a new approach to #3678 and yes it will solve the issue that you mentioned in https://github.com/druid-io/druid/issues/3741#issuecomment-264952142 as the decision to reset the offsets in metadata store is made by supervisor. However, the reset hint is sent by a task. This enables to also handle the case where a running task is lagging behind in consuming from kafka and suddenly some earlier messages are deleted which includes the one that was going to be consumed next by the task.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272074849/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272082454","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272082454","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272082454,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjA4MjQ1NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T05:52:43Z","updated_at":"2017-01-12T05:52:43Z","author_association":"CONTRIBUTOR","body":"@cheddar Just wondering if there's a good reason that limited sequences aren't done when they finish, or if that's a bug. It seems like a bug but maybe there's a reason that they behave the way they do.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272082454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272228941","html_url":"https://github.com/apache/druid/issues/325#issuecomment-272228941","issue_url":"https://api.github.com/repos/apache/druid/issues/325","id":272228941,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjIyODk0MQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T17:35:18Z","updated_at":"2017-01-12T17:35:18Z","author_association":"CONTRIBUTOR","body":"@leventov did you mean using Async request handling so that jetty threads serving requests are not blocked. In order to do that with Jersey, we would need to migrate to Jersey 2.x .\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272228941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272241236","html_url":"https://github.com/apache/druid/pull/3844#issuecomment-272241236","issue_url":"https://api.github.com/repos/apache/druid/issues/3844","id":272241236,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI0MTIzNg==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T18:24:20Z","updated_at":"2017-01-12T18:24:20Z","author_association":"CONTRIBUTOR","body":"can you check in other places as well and update those too if needed?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272241236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272242299","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-272242299","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":272242299,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI0MjI5OQ==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T18:28:44Z","updated_at":"2017-01-12T18:28:44Z","author_association":"CONTRIBUTOR","body":"@drcrallen so, I'm gonna implement a wrapper on top of LookupExtractorFactory which would have version in it and I will remove `replace` method from LookupExtractorFactory.\r\nWith that, we wouldn't need lookup modules loaded at coordinator as that is the biggest concern.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272242299/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250496","html_url":"https://github.com/apache/druid/pull/3845#issuecomment-272250496","issue_url":"https://api.github.com/repos/apache/druid/issues/3845","id":272250496,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MDQ5Ng==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:00:17Z","updated_at":"2017-01-12T19:00:17Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250589","html_url":"https://github.com/apache/druid/pull/3844#issuecomment-272250589","issue_url":"https://api.github.com/repos/apache/druid/issues/3844","id":272250589,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MDU4OQ==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:00:36Z","updated_at":"2017-01-12T19:00:36Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250824","html_url":"https://github.com/apache/druid/issues/3846#issuecomment-272250824","issue_url":"https://api.github.com/repos/apache/druid/issues/3846","id":272250824,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MDgyNA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:01:34Z","updated_at":"2017-01-12T19:01:34Z","author_association":"CONTRIBUTOR","body":"Oh, cool. Also that class should be called SchemalessSimpleTest, since if it doesn't end in Test, it won't run through maven.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272250824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251311","html_url":"https://github.com/apache/druid/issues/3846#issuecomment-272251311","issue_url":"https://api.github.com/repos/apache/druid/issues/3846","id":272251311,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MTMxMQ==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:03:28Z","updated_at":"2017-01-12T19:03:28Z","author_association":"CONTRIBUTOR","body":"@gianm i was banging my head how this was uncaught but i guess you have the answer ...","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251354","html_url":"https://github.com/apache/druid/pull/3844#issuecomment-272251354","issue_url":"https://api.github.com/repos/apache/druid/issues/3844","id":272251354,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MTM1NA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:03:37Z","updated_at":"2017-01-12T19:03:37Z","author_association":"CONTRIBUTOR","body":"@dclim: If we fail to handle a notice, is it a good idea to resume processing from the next notice? Or would it be better to restart the supervisor? In other words: will the supervisor be in a good state, or a bad state, after a notice fails to handle?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251527","html_url":"https://github.com/apache/druid/issues/3846#issuecomment-272251527","issue_url":"https://api.github.com/repos/apache/druid/issues/3846","id":272251527,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI1MTUyNw==","user":{"login":"b-slim","id":7376396,"node_id":"MDQ6VXNlcjczNzYzOTY=","avatar_url":"https://avatars.githubusercontent.com/u/7376396?v=4","gravatar_id":"","url":"https://api.github.com/users/b-slim","html_url":"https://github.com/b-slim","followers_url":"https://api.github.com/users/b-slim/followers","following_url":"https://api.github.com/users/b-slim/following{/other_user}","gists_url":"https://api.github.com/users/b-slim/gists{/gist_id}","starred_url":"https://api.github.com/users/b-slim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/b-slim/subscriptions","organizations_url":"https://api.github.com/users/b-slim/orgs","repos_url":"https://api.github.com/users/b-slim/repos","events_url":"https://api.github.com/users/b-slim/events{/privacy}","received_events_url":"https://api.github.com/users/b-slim/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T19:04:20Z","updated_at":"2017-01-12T19:04:20Z","author_association":"CONTRIBUTOR","body":"FYI same for `SchemalessTestFull`","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272251527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272295063","html_url":"https://github.com/apache/druid/pull/3844#issuecomment-272295063","issue_url":"https://api.github.com/repos/apache/druid/issues/3844","id":272295063,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI5NTA2Mw==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T21:51:18Z","updated_at":"2017-01-12T21:51:18Z","author_association":"CONTRIBUTOR","body":"I think if its a Throwable and not Exception then the Supervisor should just die... Non-Exception Throwables would be fatal errors mostly.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272295063/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272299855","html_url":"https://github.com/apache/druid/issues/3840#issuecomment-272299855","issue_url":"https://api.github.com/repos/apache/druid/issues/3840","id":272299855,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjI5OTg1NQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:09:58Z","updated_at":"2017-01-12T22:10:48Z","author_association":"CONTRIBUTOR","body":"ValueMatcherFactory doesn't exist anymore! It was removed in #3797 to make it possible for filters to be more flexible. The new Filter interface should let you do this. You want a filter that always returns false from \"supportsBitmapIndex\", throws unsupported operation exception from getBitmapIndex, and in \"makeMatcher\" it should create two selectors and build a ValueMatcher that compares their results.\r\n\r\nThat sounds like a useful contribution if you're interested in working on it.\r\n\r\nWe'll need to figure out what the semantics of \"a == b\" should be if a and b are both multi-value columns. Only true if the lists of values are identical? Or true if there's any overlap in values?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272299855/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272300458","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-272300458","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":272300458,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMwMDQ1OA==","user":{"login":"KenjiTakahashi","id":431488,"node_id":"MDQ6VXNlcjQzMTQ4OA==","avatar_url":"https://avatars.githubusercontent.com/u/431488?v=4","gravatar_id":"","url":"https://api.github.com/users/KenjiTakahashi","html_url":"https://github.com/KenjiTakahashi","followers_url":"https://api.github.com/users/KenjiTakahashi/followers","following_url":"https://api.github.com/users/KenjiTakahashi/following{/other_user}","gists_url":"https://api.github.com/users/KenjiTakahashi/gists{/gist_id}","starred_url":"https://api.github.com/users/KenjiTakahashi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenjiTakahashi/subscriptions","organizations_url":"https://api.github.com/users/KenjiTakahashi/orgs","repos_url":"https://api.github.com/users/KenjiTakahashi/repos","events_url":"https://api.github.com/users/KenjiTakahashi/events{/privacy}","received_events_url":"https://api.github.com/users/KenjiTakahashi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:12:21Z","updated_at":"2017-01-12T22:12:21Z","author_association":"CONTRIBUTOR","body":"@kaijianding I thought it might be possible to define the way data is returned within the scan query code itself. If this requires changes to the outside world, then maybe it's better to leave this for another change?\r\n\r\nI have tested it with the `ijson` lib and it works. Although, as I expected, even with the new, experimental C-based backend (which is much faster than the current one), it is still 4 times slower than reading line delimited batches and using Python's stdlib JSON module on them. Using ujson (alternative implementation meant for speed), it is 10 times slower.\r\nSo, I think there's enough to be gained to consider implementing such alternative return syntax.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272300458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272300824","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-272300824","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":272300824,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMwMDgyNA==","user":{"login":"fjy","id":428325,"node_id":"MDQ6VXNlcjQyODMyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/428325?v=4","gravatar_id":"","url":"https://api.github.com/users/fjy","html_url":"https://github.com/fjy","followers_url":"https://api.github.com/users/fjy/followers","following_url":"https://api.github.com/users/fjy/following{/other_user}","gists_url":"https://api.github.com/users/fjy/gists{/gist_id}","starred_url":"https://api.github.com/users/fjy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fjy/subscriptions","organizations_url":"https://api.github.com/users/fjy/orgs","repos_url":"https://api.github.com/users/fjy/repos","events_url":"https://api.github.com/users/fjy/events{/privacy}","received_events_url":"https://api.github.com/users/fjy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:13:48Z","updated_at":"2017-01-12T22:13:48Z","author_association":"CONTRIBUTOR","body":"üëç ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272300824/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272302255","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-272302255","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":272302255,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMwMjI1NQ==","user":{"login":"jon-wei","id":8729063,"node_id":"MDQ6VXNlcjg3MjkwNjM=","avatar_url":"https://avatars.githubusercontent.com/u/8729063?v=4","gravatar_id":"","url":"https://api.github.com/users/jon-wei","html_url":"https://github.com/jon-wei","followers_url":"https://api.github.com/users/jon-wei/followers","following_url":"https://api.github.com/users/jon-wei/following{/other_user}","gists_url":"https://api.github.com/users/jon-wei/gists{/gist_id}","starred_url":"https://api.github.com/users/jon-wei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jon-wei/subscriptions","organizations_url":"https://api.github.com/users/jon-wei/orgs","repos_url":"https://api.github.com/users/jon-wei/repos","events_url":"https://api.github.com/users/jon-wei/events{/privacy}","received_events_url":"https://api.github.com/users/jon-wei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-12T22:19:56Z","updated_at":"2017-01-12T22:19:56Z","author_association":"CONTRIBUTOR","body":"Had a minor comment on doc wording, otherwise :+1:","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272302255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272336492","html_url":"https://github.com/apache/druid/pull/3694#issuecomment-272336492","issue_url":"https://api.github.com/repos/apache/druid/issues/3694","id":272336492,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMzNjQ5Mg==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T01:30:27Z","updated_at":"2017-01-13T01:33:16Z","author_association":"CONTRIBUTOR","body":"@drcrallen Sorry for the delay, I was out for sometime. I rebased the pr but checkstyle is failing because of the license headers on extended set files. I can not change the license because extendedset is a fork of someone else's repository and licensed to Metamarkets under a CLA is not true.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272336492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272339724","html_url":"https://github.com/apache/druid/pull/3705#issuecomment-272339724","issue_url":"https://api.github.com/repos/apache/druid/issues/3705","id":272339724,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjMzOTcyNA==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T01:52:00Z","updated_at":"2017-01-13T01:52:00Z","author_association":"CONTRIBUTOR","body":"@b-slim @himanshug Sorry for the delay, I was out for vacation. As @b-slim suggested I removed the HDFSDataSegmentUtil and using fs.makeQualified().","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272339724/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272346812","html_url":"https://github.com/apache/druid/pull/3694#issuecomment-272346812","issue_url":"https://api.github.com/repos/apache/druid/issues/3694","id":272346812,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjM0NjgxMg==","user":{"login":"akashdw","id":5886276,"node_id":"MDQ6VXNlcjU4ODYyNzY=","avatar_url":"https://avatars.githubusercontent.com/u/5886276?v=4","gravatar_id":"","url":"https://api.github.com/users/akashdw","html_url":"https://github.com/akashdw","followers_url":"https://api.github.com/users/akashdw/followers","following_url":"https://api.github.com/users/akashdw/following{/other_user}","gists_url":"https://api.github.com/users/akashdw/gists{/gist_id}","starred_url":"https://api.github.com/users/akashdw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akashdw/subscriptions","organizations_url":"https://api.github.com/users/akashdw/orgs","repos_url":"https://api.github.com/users/akashdw/repos","events_url":"https://api.github.com/users/akashdw/events{/privacy}","received_events_url":"https://api.github.com/users/akashdw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T02:44:54Z","updated_at":"2017-01-13T20:31:16Z","author_association":"CONTRIBUTOR","body":"@drcrallen I added a suppress header check for extendedset files.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272346812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272375780","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272375780","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272375780,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjM3NTc4MA==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T07:04:42Z","updated_at":"2017-01-13T07:04:42Z","author_association":"CONTRIBUTOR","body":"@gianm I'm not sure why you think it wouldn't be done.  I see `Yielders.done` being called, which should be done.  Also, remember that the call to `close` is the user of the Yielder's responsibility, so once the final Yielder is yielded, `close()` should get called and resources cleaned up.\r\n\r\nThat said, I also realize you might be talking abotu the `isDone()` call.  A cursory glance at that makes me wonder if it is implemented correctly.  I'm not quite sure.  It looks like at some point in time `interruptYield` and the other check were added on top of just \"within bounds\".  I'm not sure those belong in `isDone`.  That said, though, there's nothing like a unit test or two to show the current behavior and see if it lines up or doesn't line up with what we expect.  Fwiw, I would expect that the yielder returned on the `next()` call after the final element to be `done()`.\r\n\r\nAlso, all of the \"baggage\" related stuff I would expect to be done in the `close()` method.  I'm not quite sure what the semantic difference is between `withEffect` and `withBaggage`, but I would question the semantics of anything that is not done in the `close()` method or on each iteration.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272375780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272460436","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272460436","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272460436,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjQ2MDQzNg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T14:49:55Z","updated_at":"2017-01-13T14:49:55Z","author_association":"CONTRIBUTOR","body":"Ahhh, I think I see what's going on. I misunderstood the behavior that exists now. I thought that @leventov was saying that limited sequences don't act as done when they hit their limit. They do and that's good. What _does_ happen is that if you do this:\r\n\r\n```java\r\nSequences.limit(\r\n  Sequences.withEffect(baseSequence, runnable, exec),\r\n  threshold\r\n)\r\n```\r\n\r\nThen the \"runnable\" will not run if the \"threshold\" is reached before \"baseSequence\" is exhausted. This is good behavior for what we use withEffect for in production, which is populating the cache. We don't want the cache to populate with an un-exhausted result set.\r\n\r\nSo I think the behavior is fine as-is and just needs to be documented (since it's not obvious what is going on and why).","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272460436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272569085","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272569085","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272569085,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU2OTA4NQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T22:48:05Z","updated_at":"2017-01-13T22:48:05Z","author_association":"MEMBER","body":"@gianm @cheddar the problem is #3849. I don't see how it could be easily fixed, so I'm not going to fix this in this PR. At least, this PR shouldn't make the things worse than they used to be. So I'm removing [WIP]\r\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272569085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272569498","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272569498","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272569498,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU2OTQ5OA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T22:50:25Z","updated_at":"2017-01-13T22:50:25Z","author_association":"MEMBER","body":"Specifically the test is\r\n```java\r\n  @Test\r\n  public void testLimitedOverEffectSequence() {\r\n    for (int limit = 0; limit < 5; limit++) {\r\n      Sequence<Integer> seq = Sequences.simple(Arrays.asList(1, 2, 3));\r\n      final AtomicBoolean effectExecuted = new AtomicBoolean();\r\n      Sequence<Integer> seqWithEffect = Sequences.withEffect(seq, new Runnable()\r\n      {\r\n        @Override\r\n        public void run()\r\n        {\r\n          effectExecuted.set(true);\r\n        }\r\n      }, MoreExecutors.sameThreadExecutor());\r\n      Sequence<Integer> limitedSeq = Sequences.limit(seqWithEffect, limit);\r\n      Sequences.toList(limitedSeq, new ArrayList<Integer>());\r\n      System.out.println(\"limit=\" + limit + \": effect executed=\" + effectExecuted.get());\r\n    }\r\n  }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272569498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272576377","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272576377","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272576377,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU3NjM3Nw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T23:32:47Z","updated_at":"2017-01-13T23:32:47Z","author_association":"CONTRIBUTOR","body":"I don't think this is a bug. The \"effect\" is only meant to execute if all results have been pulled out of the sequence. In this case, not all results have been pulled out of `Sequences.simple(Arrays.asList(1, 2, 3))`, so the effect shouldn't happen. This behavior makes it useful for cache population, where we wouldn't want to populate cache with a partial result set.\r\n\r\nSequences.withBaggage provides a way to make effects that _always_ happen, so callers should use that if that's what they want.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272576377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272579793","html_url":"https://github.com/apache/druid/pull/3693#issuecomment-272579793","issue_url":"https://api.github.com/repos/apache/druid/issues/3693","id":272579793,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU3OTc5Mw==","user":{"login":"cheddar","id":216778,"node_id":"MDQ6VXNlcjIxNjc3OA==","avatar_url":"https://avatars.githubusercontent.com/u/216778?v=4","gravatar_id":"","url":"https://api.github.com/users/cheddar","html_url":"https://github.com/cheddar","followers_url":"https://api.github.com/users/cheddar/followers","following_url":"https://api.github.com/users/cheddar/following{/other_user}","gists_url":"https://api.github.com/users/cheddar/gists{/gist_id}","starred_url":"https://api.github.com/users/cheddar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cheddar/subscriptions","organizations_url":"https://api.github.com/users/cheddar/orgs","repos_url":"https://api.github.com/users/cheddar/repos","events_url":"https://api.github.com/users/cheddar/events{/privacy}","received_events_url":"https://api.github.com/users/cheddar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-13T23:57:11Z","updated_at":"2017-01-13T23:57:11Z","author_association":"CONTRIBUTOR","body":"I think the \"fix\" to #3849 is to just rename \"withEffect\" to\n\"withEffectOnCompletion\" or \"withEffectOnExhaustion\".\n\nSounds like that is by design (I'll admit, I also find it\ncounter-intuitive, but if those are the semantics, they are the semantics),\nso it's the naming that is making it confusing.\n\n--Eric\n\n\nOn Fri, Jan 13, 2017 at 2:48 PM Roman Leventov <notifications@github.com>\nwrote:\n\n> @gianm <https://github.com/gianm> @cheddar <https://github.com/cheddar>\n> the problem is #3849 <https://github.com/druid-io/druid/issues/3849>. I\n> don't see how it could be easily fixed, so I'm not going to fix this in\n> this PR. At least, this PR shouldn't make the things worse than they used\n> to be. So I'm removing [WIP]\n>\n>\n>\n>\n> ‚Äî\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/druid-io/druid/pull/3693#issuecomment-272569085>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/AANOyrCwvKoXnALxkVDbeBqrPXUjOKzpks5rR_8mgaJpZM4Kx7lg>\n> .\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272579793/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272588438","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-272588438","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":272588438,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU4ODQzOA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T01:08:43Z","updated_at":"2017-01-14T01:08:43Z","author_association":"CONTRIBUTOR","body":"üëé booo JavaScript makes the world go round. There are a number of cool things in Plywood that would stop working if JavaScript was disabled.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272588438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272590825","html_url":"https://github.com/apache/druid/issues/2647#issuecomment-272590825","issue_url":"https://api.github.com/repos/apache/druid/issues/2647","id":272590825,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU5MDgyNQ==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T01:34:19Z","updated_at":"2017-01-14T01:34:19Z","author_association":"CONTRIBUTOR","body":"@gianm I thin this is done now, can this issue be closed?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272590825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591124","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272591124","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272591124,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU5MTEyNA==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T01:37:54Z","updated_at":"2017-01-14T01:37:54Z","author_association":"MEMBER","body":"@gianm why not all results are pulled? If you apply `Sequences.toList()` to this limited sequence, the result is `[1, 2, 3]`, i. e. all results are pulled.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591124/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591488","html_url":"https://github.com/apache/druid/issues/507#issuecomment-272591488","issue_url":"https://api.github.com/repos/apache/druid/issues/507","id":272591488,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU5MTQ4OA==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T01:42:27Z","updated_at":"2017-01-14T01:42:27Z","author_association":"CONTRIBUTOR","body":"I am happy to report that this has been fixed because the `regex` extractionFn now supports the `replaceMissingValueWith` option that effectively solves this issue","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591722","html_url":"https://github.com/apache/druid/pull/3818#issuecomment-272591722","issue_url":"https://api.github.com/repos/apache/druid/issues/3818","id":272591722,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjU5MTcyMg==","user":{"login":"vogievetsky","id":177816,"node_id":"MDQ6VXNlcjE3NzgxNg==","avatar_url":"https://avatars.githubusercontent.com/u/177816?v=4","gravatar_id":"","url":"https://api.github.com/users/vogievetsky","html_url":"https://github.com/vogievetsky","followers_url":"https://api.github.com/users/vogievetsky/followers","following_url":"https://api.github.com/users/vogievetsky/following{/other_user}","gists_url":"https://api.github.com/users/vogievetsky/gists{/gist_id}","starred_url":"https://api.github.com/users/vogievetsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vogievetsky/subscriptions","organizations_url":"https://api.github.com/users/vogievetsky/orgs","repos_url":"https://api.github.com/users/vogievetsky/repos","events_url":"https://api.github.com/users/vogievetsky/events{/privacy}","received_events_url":"https://api.github.com/users/vogievetsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T01:44:57Z","updated_at":"2017-01-14T01:44:57Z","author_association":"CONTRIBUTOR","body":"The specific things that JS is used for as a gap filler are:\r\n\r\n- Aggregations over dimensions (https://github.com/druid-io/druid/issues/3004)\r\n- Applying a boolean predicate (filter) as an extractionFn i.e. `GROUP BY x == \"lol\"`\r\n- Applying cool functions like `ABS` and `POWER`\r\n- Doing expression transformation within aggregates like `SUM(x * y)`\r\n- Certain time manipulations (https://github.com/druid-io/druid/issues/1877) that are currently done like so:\r\n\r\n`$(\"time\").timePart('SECOND_OF_DAY', 'Etc/UTC')`\r\n\r\n=>\r\n\r\n```json\r\n{\r\n  \"dimension\": \"__time\",\r\n  \"extractionFn\": {\r\n    \"function\": \"function(s){try{\\nvar d = new org.joda.time.DateTime(s);\\nd = d.getSecondOfDay();\\nreturn d;\\n}catch(e){return null;}}\",\r\n    \"type\": \"javascript\"\r\n  },\r\n  \"outputName\": \"Time\",\r\n  \"type\": \"extraction\"\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272591722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272607213","html_url":"https://github.com/apache/druid/issues/3840#issuecomment-272607213","issue_url":"https://api.github.com/repos/apache/druid/issues/3840","id":272607213,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjYwNzIxMw==","user":{"login":"erikdubbelboer","id":522870,"node_id":"MDQ6VXNlcjUyMjg3MA==","avatar_url":"https://avatars.githubusercontent.com/u/522870?v=4","gravatar_id":"","url":"https://api.github.com/users/erikdubbelboer","html_url":"https://github.com/erikdubbelboer","followers_url":"https://api.github.com/users/erikdubbelboer/followers","following_url":"https://api.github.com/users/erikdubbelboer/following{/other_user}","gists_url":"https://api.github.com/users/erikdubbelboer/gists{/gist_id}","starred_url":"https://api.github.com/users/erikdubbelboer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/erikdubbelboer/subscriptions","organizations_url":"https://api.github.com/users/erikdubbelboer/orgs","repos_url":"https://api.github.com/users/erikdubbelboer/repos","events_url":"https://api.github.com/users/erikdubbelboer/events{/privacy}","received_events_url":"https://api.github.com/users/erikdubbelboer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T07:07:38Z","updated_at":"2017-01-14T07:07:38Z","author_association":"CONTRIBUTOR","body":"Should I modify [ValueMatcherColumnSelectorStrategy](https://github.com/druid-io/druid/blob/b0232b4e403b7e175f876d3224a0a36654974416/processing/src/main/java/io/druid/query/filter/ValueMatcherColumnSelectorStrategy.java) and [StringValueMatcherColumnSelectorStrategy](https://github.com/druid-io/druid/blob/b0232b4e403b7e175f876d3224a0a36654974416/processing/src/main/java/io/druid/query/filter/StringValueMatcherColumnSelectorStrategy.java) and add a method to match multiple columns with each other? I think that's probably cleanest.\r\n\r\nHow about if instead of making a new filter I extend the `selector` filter by adding an `valueDimension` parameter. So either `value` or `valueDimension` need to be set. Then we can keep the current semantics of `selector` with the addition that if `valueDimension` is multi-value all of its values need to be in `dimension`.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272607213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272635515","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272635515","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272635515,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjYzNTUxNQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T16:39:16Z","updated_at":"2017-01-14T16:39:16Z","author_association":"CONTRIBUTOR","body":"@leventov are you saying that the bug in this case is when the limit is 3? That makes sense to me. I ran your test and got:\r\n\r\n```\r\nlimit=0: effect executed=false\r\nlimit=1: effect executed=false\r\nlimit=2: effect executed=false\r\nlimit=3: effect executed=false\r\nlimit=4: effect executed=true\r\n```\r\n\r\nTo me those all look good except for the limit = 3 case.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272635515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272636176","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272636176","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272636176,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjYzNjE3Ng==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T16:49:27Z","updated_at":"2017-01-14T16:49:27Z","author_association":"MEMBER","body":"@gianm yes, this corner case.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272636176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272636518","html_url":"https://github.com/apache/druid/issues/3849#issuecomment-272636518","issue_url":"https://api.github.com/repos/apache/druid/issues/3849","id":272636518,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjYzNjUxOA==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-14T16:55:11Z","updated_at":"2017-01-14T16:55:11Z","author_association":"CONTRIBUTOR","body":"Got it, yeah, that one looks like a bug.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272636518/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272673568","html_url":"https://github.com/apache/druid/pull/3766#issuecomment-272673568","issue_url":"https://api.github.com/repos/apache/druid/issues/3766","id":272673568,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjY3MzU2OA==","user":{"login":"praveev","id":297278,"node_id":"MDQ6VXNlcjI5NzI3OA==","avatar_url":"https://avatars.githubusercontent.com/u/297278?v=4","gravatar_id":"","url":"https://api.github.com/users/praveev","html_url":"https://github.com/praveev","followers_url":"https://api.github.com/users/praveev/followers","following_url":"https://api.github.com/users/praveev/following{/other_user}","gists_url":"https://api.github.com/users/praveev/gists{/gist_id}","starred_url":"https://api.github.com/users/praveev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/praveev/subscriptions","organizations_url":"https://api.github.com/users/praveev/orgs","repos_url":"https://api.github.com/users/praveev/repos","events_url":"https://api.github.com/users/praveev/events{/privacy}","received_events_url":"https://api.github.com/users/praveev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-15T04:45:40Z","updated_at":"2017-01-15T04:45:55Z","author_association":"CONTRIBUTOR","body":"@fjy @leventov  I've created a PR to unify granularities #3850. Please take a look.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272673568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272798003","html_url":"https://github.com/apache/druid/issues/3840#issuecomment-272798003","issue_url":"https://api.github.com/repos/apache/druid/issues/3840","id":272798003,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjc5ODAwMw==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T08:15:45Z","updated_at":"2017-01-16T08:15:45Z","author_association":"CONTRIBUTOR","body":"Hmm that could work too, although \"selector\" is kind of a weird name for a filter that checks if two columns are equal. If you do it that way then how about having a list called \"dimensions\"? So the syntax would be:\r\n\r\n```json\r\n{\"type\": \"selector\", \"dimensions\": [\"a\", \"b\"]}\r\n```\r\n\r\nI think \"they're equal if there is any overlap\" is probably the best semantic for multi-value, since:\r\n\r\n- it is symmetric, such that `selector([\"a\", \"b\"], [\"a\", \"b\", \"c\"])` and `selector([\"a\", \"b\", \"c\"], [\"a\", \"b\"])` are both true\r\n- it is a proper extension of single-value, such that `selector([\"a\", \"b\"], \"b\")` and `selector([\"a\", \"b\"], [\"b\"])` are both true","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272798003/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272892842","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-272892842","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":272892842,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjg5Mjg0Mg==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T15:32:48Z","updated_at":"2017-01-17T00:40:20Z","author_association":"CONTRIBUTOR","body":"Hi Gian, I'm investigating what the root cause and its fundamental solution are.\r\n\r\nIMHO, the root cause looks that a nested group-by query needs to allocate two or more merge buffers during preparing query execution even though at most one query block (containing a group-by subquery) can be executed at the same time. So, I think it would be better if fine-grained memory management is possible. Of course we still need to make queries fail if they cannot acquire sufficient memory for certain amount of time. \r\n\r\nWhat do you think?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272892842/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272919664","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-272919664","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":272919664,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjkxOTY2NA==","user":{"login":"kaijianding","id":8663725,"node_id":"MDQ6VXNlcjg2NjM3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8663725?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijianding","html_url":"https://github.com/kaijianding","followers_url":"https://api.github.com/users/kaijianding/followers","following_url":"https://api.github.com/users/kaijianding/following{/other_user}","gists_url":"https://api.github.com/users/kaijianding/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijianding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijianding/subscriptions","organizations_url":"https://api.github.com/users/kaijianding/orgs","repos_url":"https://api.github.com/users/kaijianding/repos","events_url":"https://api.github.com/users/kaijianding/events{/privacy}","received_events_url":"https://api.github.com/users/kaijianding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T17:21:05Z","updated_at":"2017-01-16T17:21:05Z","author_association":"CONTRIBUTOR","body":"@fjy it is ready for review now","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272919664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272921609","html_url":"https://github.com/apache/druid/issues/325#issuecomment-272921609","issue_url":"https://api.github.com/repos/apache/druid/issues/325","id":272921609,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjkyMTYwOQ==","user":{"login":"leventov","id":609240,"node_id":"MDQ6VXNlcjYwOTI0MA==","avatar_url":"https://avatars.githubusercontent.com/u/609240?v=4","gravatar_id":"","url":"https://api.github.com/users/leventov","html_url":"https://github.com/leventov","followers_url":"https://api.github.com/users/leventov/followers","following_url":"https://api.github.com/users/leventov/following{/other_user}","gists_url":"https://api.github.com/users/leventov/gists{/gist_id}","starred_url":"https://api.github.com/users/leventov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leventov/subscriptions","organizations_url":"https://api.github.com/users/leventov/orgs","repos_url":"https://api.github.com/users/leventov/repos","events_url":"https://api.github.com/users/leventov/events{/privacy}","received_events_url":"https://api.github.com/users/leventov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T17:30:12Z","updated_at":"2017-01-16T17:30:34Z","author_association":"MEMBER","body":"@gianm in async model, we can have a limited number of processing threads on a historical/realtime node (we already have), and requests=events wait in the queue. After all it is not so much different from what we already have on historicals (not sure about realtime nodes). It is different on brokers, which don't queue/limit requests, delegating this to processing nodes.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272921609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272921691","html_url":"https://github.com/apache/druid/pull/3307#issuecomment-272921691","issue_url":"https://api.github.com/repos/apache/druid/issues/3307","id":272921691,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjkyMTY5MQ==","user":{"login":"kaijianding","id":8663725,"node_id":"MDQ6VXNlcjg2NjM3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/8663725?v=4","gravatar_id":"","url":"https://api.github.com/users/kaijianding","html_url":"https://github.com/kaijianding","followers_url":"https://api.github.com/users/kaijianding/followers","following_url":"https://api.github.com/users/kaijianding/following{/other_user}","gists_url":"https://api.github.com/users/kaijianding/gists{/gist_id}","starred_url":"https://api.github.com/users/kaijianding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaijianding/subscriptions","organizations_url":"https://api.github.com/users/kaijianding/orgs","repos_url":"https://api.github.com/users/kaijianding/repos","events_url":"https://api.github.com/users/kaijianding/events{/privacy}","received_events_url":"https://api.github.com/users/kaijianding/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T17:30:36Z","updated_at":"2017-01-16T17:30:36Z","author_association":"CONTRIBUTOR","body":"@KenjiTakahashi it needs to modify QueryResource to return line delimited JSON batches, maybe in another PR.\r\nAlso I added a new resultFormat called `compactedList`. In this format, the result is much less bytes and should improve JSON ser/der speed, memory usage, and network transfer speed. It is useful if you only need the values of each rows(currently, the map keys are redundant.) You can have a try.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272921691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272926492","html_url":"https://github.com/apache/druid/issues/325#issuecomment-272926492","issue_url":"https://api.github.com/repos/apache/druid/issues/325","id":272926492,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MjkyNjQ5Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-16T17:54:25Z","updated_at":"2017-01-16T17:54:25Z","author_association":"CONTRIBUTOR","body":"@leventov I was referring to the brokers, they also need to allocate some memory per query for results merging (& other things, but results buffers are the biggest). A fixed set of brokers cannot have infinite capacity for concurrent queries, at some point they have to either reject new queries, block on new queries, or crash. But with better resource management the limits could probably be higher than they are today.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272926492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272993951","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-272993951","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":272993951,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjk5Mzk1MQ==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T00:46:19Z","updated_at":"2017-01-17T00:46:19Z","author_association":"CONTRIBUTOR","body":"@jihoonson What do you have in mind for more fine-grained memory management?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272993951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272996401","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-272996401","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":272996401,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjk5NjQwMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T01:08:03Z","updated_at":"2017-01-17T01:08:03Z","author_association":"CONTRIBUTOR","body":"Currently, it is required to acquire all merge buffers for every subquery before query execution. For example, given a nested group-by query consisting of an inner group-by and an outer group-by, two merge buffers need to be acquired before actual query execution. \r\nHowever, since the outer group-by should be executed after the inner one completes, this query can be executed with only one merge buffer. \r\n\r\nSo, it would be better if we can postpone buffer acquisition until it is really needed and release the acquired buffer as soon as the buffer is not needed anymore. I think merge buffers can be acquired before executing a subquery and released as the processing of the subquery completes. ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272996401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/272998832","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-272998832","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":272998832,"node_id":"MDEyOklzc3VlQ29tbWVudDI3Mjk5ODgzMg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T01:28:58Z","updated_at":"2017-01-17T01:28:58Z","author_association":"CONTRIBUTOR","body":"Deeply nested groupBys still require two merge buffers at once though. If you do groupBy A -> groupBy B -> table, then when groupBy A is running, it needs its own merge buffer to put results in, but also it needs B's merge buffer to read B's results from.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/272998832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273002501","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-273002501","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":273002501,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzAwMjUwMQ==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T01:59:23Z","updated_at":"2017-01-17T01:59:23Z","author_association":"CONTRIBUTOR","body":"Oh, you are right. So, does it make sense to always use at most two merge buffers for deeply nested groupBys like groupBy A -> groupBy B -> groupBy C -> table?","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273002501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273002642","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-273002642","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":273002642,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzAwMjY0Mg==","user":{"login":"gianm","id":1214075,"node_id":"MDQ6VXNlcjEyMTQwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1214075?v=4","gravatar_id":"","url":"https://api.github.com/users/gianm","html_url":"https://github.com/gianm","followers_url":"https://api.github.com/users/gianm/followers","following_url":"https://api.github.com/users/gianm/following{/other_user}","gists_url":"https://api.github.com/users/gianm/gists{/gist_id}","starred_url":"https://api.github.com/users/gianm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gianm/subscriptions","organizations_url":"https://api.github.com/users/gianm/orgs","repos_url":"https://api.github.com/users/gianm/repos","events_url":"https://api.github.com/users/gianm/events{/privacy}","received_events_url":"https://api.github.com/users/gianm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T02:00:26Z","updated_at":"2017-01-17T02:00:26Z","author_association":"CONTRIBUTOR","body":"I think so yes. We still have the deadlock problem to fix with two merge buffers, but two merge buffers is better than unbounded!","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273002642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273004134","html_url":"https://github.com/apache/druid/issues/3819#issuecomment-273004134","issue_url":"https://api.github.com/repos/apache/druid/issues/3819","id":273004134,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzAwNDEzNA==","user":{"login":"jihoonson","id":2322288,"node_id":"MDQ6VXNlcjIzMjIyODg=","avatar_url":"https://avatars.githubusercontent.com/u/2322288?v=4","gravatar_id":"","url":"https://api.github.com/users/jihoonson","html_url":"https://github.com/jihoonson","followers_url":"https://api.github.com/users/jihoonson/followers","following_url":"https://api.github.com/users/jihoonson/following{/other_user}","gists_url":"https://api.github.com/users/jihoonson/gists{/gist_id}","starred_url":"https://api.github.com/users/jihoonson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jihoonson/subscriptions","organizations_url":"https://api.github.com/users/jihoonson/orgs","repos_url":"https://api.github.com/users/jihoonson/repos","events_url":"https://api.github.com/users/jihoonson/events{/privacy}","received_events_url":"https://api.github.com/users/jihoonson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T02:12:17Z","updated_at":"2017-01-17T02:12:17Z","author_association":"CONTRIBUTOR","body":"Thanks! \r\nI think the deadlock problem can be avoided by guaranteeing the order of requests for buffer acquisition. For example, given a query of groupBy A -> groupBy B -> groupBy C -> table, the inner-most subquery (groupBy C -> table) requests a buffer first, and then its outer subquery (groupBy B -> groupBy C) requests a buffer. If it cannot acquire the buffer for certain amount of time, the query should fail at that point. If it can, release the buffer for the (groupBy C -> table) subquery, request a new buffer for (groupBy A -> groupBy B). ","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273004134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273244796","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-273244796","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":273244796,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzI0NDc5Ng==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T17:51:02Z","updated_at":"2017-01-17T17:51:02Z","author_association":"CONTRIBUTOR","body":"In the face of of a historical tier being full, coordinator can spend lots of cpu time trying to figure out where to place segments. Please make sure the callbacks do not make this worse.\r\n\r\nIf we move the lookup json as it stands now, to something that is handled more like a loadspec, and have a wrapping metadata that holds the version, I think that should work.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273244796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273247780","html_url":"https://github.com/apache/druid/issues/3821#issuecomment-273247780","issue_url":"https://api.github.com/repos/apache/druid/issues/3821","id":273247780,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzI0Nzc4MA==","user":{"login":"himanshug","id":246308,"node_id":"MDQ6VXNlcjI0NjMwOA==","avatar_url":"https://avatars.githubusercontent.com/u/246308?v=4","gravatar_id":"","url":"https://api.github.com/users/himanshug","html_url":"https://github.com/himanshug","followers_url":"https://api.github.com/users/himanshug/followers","following_url":"https://api.github.com/users/himanshug/following{/other_user}","gists_url":"https://api.github.com/users/himanshug/gists{/gist_id}","starred_url":"https://api.github.com/users/himanshug/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/himanshug/subscriptions","organizations_url":"https://api.github.com/users/himanshug/orgs","repos_url":"https://api.github.com/users/himanshug/repos","events_url":"https://api.github.com/users/himanshug/events{/privacy}","received_events_url":"https://api.github.com/users/himanshug/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T18:00:50Z","updated_at":"2017-01-17T18:00:50Z","author_association":"CONTRIBUTOR","body":"@drcrallen let us continue this on https://github.com/druid-io/druid/pull/3855 which talks things more concretely.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273247780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/druid/issues/comments/273248239","html_url":"https://github.com/apache/druid/pull/3855#issuecomment-273248239","issue_url":"https://api.github.com/repos/apache/druid/issues/3855","id":273248239,"node_id":"MDEyOklzc3VlQ29tbWVudDI3MzI0ODIzOQ==","user":{"login":"drcrallen","id":8213081,"node_id":"MDQ6VXNlcjgyMTMwODE=","avatar_url":"https://avatars.githubusercontent.com/u/8213081?v=4","gravatar_id":"","url":"https://api.github.com/users/drcrallen","html_url":"https://github.com/drcrallen","followers_url":"https://api.github.com/users/drcrallen/followers","following_url":"https://api.github.com/users/drcrallen/following{/other_user}","gists_url":"https://api.github.com/users/drcrallen/gists{/gist_id}","starred_url":"https://api.github.com/users/drcrallen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drcrallen/subscriptions","organizations_url":"https://api.github.com/users/drcrallen/orgs","repos_url":"https://api.github.com/users/drcrallen/repos","events_url":"https://api.github.com/users/drcrallen/events{/privacy}","received_events_url":"https://api.github.com/users/drcrallen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-17T18:02:30Z","updated_at":"2017-01-17T18:02:30Z","author_association":"CONTRIBUTOR","body":"As per https://github.com/druid-io/druid/issues/3821#issuecomment-273244796 : \r\n\r\n> In the face of of a historical tier being full, coordinator can spend lots of cpu time trying to figure out where to place segments. Please make sure the callbacks do not make this worse.\r\n\r\n> If we move the lookup json as it stands now, to something that is handled more like a loadspec, and have a wrapping metadata that holds the version, I think that should work.","reactions":{"url":"https://api.github.com/repos/apache/druid/issues/comments/273248239/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]