[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518198541","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-518198541","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":518198541,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODE5ODU0MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T11:35:53Z","updated_at":"2019-08-05T11:35:53Z","author_association":"MEMBER","body":"为什么要用这个版本，这个不是brpc官方版本","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518198541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518201435","html_url":"https://github.com/apache/brpc/issues/853#issuecomment-518201435","issue_url":"https://api.github.com/repos/apache/brpc/issues/853","id":518201435,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODIwMTQzNQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T11:46:21Z","updated_at":"2019-08-05T11:46:21Z","author_association":"MEMBER","body":"Fixed in https://github.com/apache/incubator-brpc/pull/876","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518201435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518422630","html_url":"https://github.com/apache/brpc/pull/878#issuecomment-518422630","issue_url":"https://api.github.com/repos/apache/brpc/issues/878","id":518422630,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODQyMjYzMA==","user":{"login":"ymjing","id":1444316,"node_id":"MDQ6VXNlcjE0NDQzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1444316?v=4","gravatar_id":"","url":"https://api.github.com/users/ymjing","html_url":"https://github.com/ymjing","followers_url":"https://api.github.com/users/ymjing/followers","following_url":"https://api.github.com/users/ymjing/following{/other_user}","gists_url":"https://api.github.com/users/ymjing/gists{/gist_id}","starred_url":"https://api.github.com/users/ymjing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymjing/subscriptions","organizations_url":"https://api.github.com/users/ymjing/orgs","repos_url":"https://api.github.com/users/ymjing/repos","events_url":"https://api.github.com/users/ymjing/events{/privacy}","received_events_url":"https://api.github.com/users/ymjing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-05T22:18:38Z","updated_at":"2019-08-05T22:18:38Z","author_association":"NONE","body":"All CI tasks passed except this one: https://travis-ci.org/apache/incubator-brpc/jobs/568078842 \r\nLooks like a problem with Travis itself. Could anyone restart this task?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518422630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518915452","html_url":"https://github.com/apache/brpc/issues/862#issuecomment-518915452","issue_url":"https://api.github.com/repos/apache/brpc/issues/862","id":518915452,"node_id":"MDEyOklzc3VlQ29tbWVudDUxODkxNTQ1Mg==","user":{"login":"zhangwei17","id":2209809,"node_id":"MDQ6VXNlcjIyMDk4MDk=","avatar_url":"https://avatars.githubusercontent.com/u/2209809?v=4","gravatar_id":"","url":"https://api.github.com/users/zhangwei17","html_url":"https://github.com/zhangwei17","followers_url":"https://api.github.com/users/zhangwei17/followers","following_url":"https://api.github.com/users/zhangwei17/following{/other_user}","gists_url":"https://api.github.com/users/zhangwei17/gists{/gist_id}","starred_url":"https://api.github.com/users/zhangwei17/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhangwei17/subscriptions","organizations_url":"https://api.github.com/users/zhangwei17/orgs","repos_url":"https://api.github.com/users/zhangwei17/repos","events_url":"https://api.github.com/users/zhangwei17/events{/privacy}","received_events_url":"https://api.github.com/users/zhangwei17/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T02:35:25Z","updated_at":"2019-08-07T02:35:25Z","author_association":"NONE","body":"查看代码后，初步定位是连接建立后，在发送数据前，等待是否可写的时候，等待超时导致的。\r\n查看当时的运行环境，网卡带宽充足、下游压力并不大、连接数也并不高。\r\n\r\n出现此异常情况的机器列表是我自己实现的zk的naming service（并未使用事件出发，使用的是轮询方式，100ms的getservers间隔），load balance策略是RR轮询。后来改为使用file:///path/to/machine/list方式，问题就不再出现。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/518915452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519051971","html_url":"https://github.com/apache/brpc/issues/879#issuecomment-519051971","issue_url":"https://api.github.com/repos/apache/brpc/issues/879","id":519051971,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTA1MTk3MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-07T11:12:22Z","updated_at":"2019-08-07T11:12:22Z","author_association":"MEMBER","body":"支持计划在 https://github.com/apache/incubator-brpc/issues/207","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519051971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519396791","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519396791","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519396791,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTM5Njc5MQ==","user":{"login":"a0soft","id":17812886,"node_id":"MDQ6VXNlcjE3ODEyODg2","avatar_url":"https://avatars.githubusercontent.com/u/17812886?v=4","gravatar_id":"","url":"https://api.github.com/users/a0soft","html_url":"https://github.com/a0soft","followers_url":"https://api.github.com/users/a0soft/followers","following_url":"https://api.github.com/users/a0soft/following{/other_user}","gists_url":"https://api.github.com/users/a0soft/gists{/gist_id}","starred_url":"https://api.github.com/users/a0soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a0soft/subscriptions","organizations_url":"https://api.github.com/users/a0soft/orgs","repos_url":"https://api.github.com/users/a0soft/repos","events_url":"https://api.github.com/users/a0soft/events{/privacy}","received_events_url":"https://api.github.com/users/a0soft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:09:31Z","updated_at":"2019-08-08T07:09:31Z","author_association":"NONE","body":"@gxkevin  我遇到类似的问题，只是我在WSL ubuntu18.04下，您这边最终怎么解决的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519396791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519397658","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519397658","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519397658,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTM5NzY1OA==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:12:32Z","updated_at":"2019-08-08T07:12:32Z","author_association":"NONE","body":"你用的什么版本的brpc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519397658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519402720","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519402720","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519402720,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTQwMjcyMA==","user":{"login":"a0soft","id":17812886,"node_id":"MDQ6VXNlcjE3ODEyODg2","avatar_url":"https://avatars.githubusercontent.com/u/17812886?v=4","gravatar_id":"","url":"https://api.github.com/users/a0soft","html_url":"https://github.com/a0soft","followers_url":"https://api.github.com/users/a0soft/followers","following_url":"https://api.github.com/users/a0soft/following{/other_user}","gists_url":"https://api.github.com/users/a0soft/gists{/gist_id}","starred_url":"https://api.github.com/users/a0soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a0soft/subscriptions","organizations_url":"https://api.github.com/users/a0soft/orgs","repos_url":"https://api.github.com/users/a0soft/repos","events_url":"https://api.github.com/users/a0soft/events{/privacy}","received_events_url":"https://api.github.com/users/a0soft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:29:14Z","updated_at":"2019-08-08T07:29:14Z","author_association":"NONE","body":"谢谢你的快速回复。\r\n具体版本号没查到，我是在编译DMKit的依赖时出现编译错误的。\r\ngit checkout master\r\ngit pull\r\ngit checkout 2ae7f04ce513c6aee27545df49d5439a98ae3a3f","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519402720/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519403126","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519403126","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519403126,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTQwMzEyNg==","user":{"login":"a0soft","id":17812886,"node_id":"MDQ6VXNlcjE3ODEyODg2","avatar_url":"https://avatars.githubusercontent.com/u/17812886?v=4","gravatar_id":"","url":"https://api.github.com/users/a0soft","html_url":"https://github.com/a0soft","followers_url":"https://api.github.com/users/a0soft/followers","following_url":"https://api.github.com/users/a0soft/following{/other_user}","gists_url":"https://api.github.com/users/a0soft/gists{/gist_id}","starred_url":"https://api.github.com/users/a0soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a0soft/subscriptions","organizations_url":"https://api.github.com/users/a0soft/orgs","repos_url":"https://api.github.com/users/a0soft/repos","events_url":"https://api.github.com/users/a0soft/events{/privacy}","received_events_url":"https://api.github.com/users/a0soft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:30:23Z","updated_at":"2019-08-08T07:30:23Z","author_association":"NONE","body":"2AE7F04CE513C6AEE27545DF49D5439A98AE3A3F","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519403126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519403343","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519403343","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519403343,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTQwMzM0Mw==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:31:10Z","updated_at":"2019-08-08T07:31:10Z","author_association":"NONE","body":"建议pb的版本低于3.7\r\n或者升级到最新的brpc","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519403343/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519404349","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519404349","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519404349,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTQwNDM0OQ==","user":{"login":"a0soft","id":17812886,"node_id":"MDQ6VXNlcjE3ODEyODg2","avatar_url":"https://avatars.githubusercontent.com/u/17812886?v=4","gravatar_id":"","url":"https://api.github.com/users/a0soft","html_url":"https://github.com/a0soft","followers_url":"https://api.github.com/users/a0soft/followers","following_url":"https://api.github.com/users/a0soft/following{/other_user}","gists_url":"https://api.github.com/users/a0soft/gists{/gist_id}","starred_url":"https://api.github.com/users/a0soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a0soft/subscriptions","organizations_url":"https://api.github.com/users/a0soft/orgs","repos_url":"https://api.github.com/users/a0soft/repos","events_url":"https://api.github.com/users/a0soft/events{/privacy}","received_events_url":"https://api.github.com/users/a0soft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T07:34:30Z","updated_at":"2019-08-08T07:34:30Z","author_association":"NONE","body":"我试试，谢谢。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519404349/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519507386","html_url":"https://github.com/apache/brpc/issues/857#issuecomment-519507386","issue_url":"https://api.github.com/repos/apache/brpc/issues/857","id":519507386,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTUwNzM4Ng==","user":{"login":"kenshinxf","id":7056720,"node_id":"MDQ6VXNlcjcwNTY3MjA=","avatar_url":"https://avatars.githubusercontent.com/u/7056720?v=4","gravatar_id":"","url":"https://api.github.com/users/kenshinxf","html_url":"https://github.com/kenshinxf","followers_url":"https://api.github.com/users/kenshinxf/followers","following_url":"https://api.github.com/users/kenshinxf/following{/other_user}","gists_url":"https://api.github.com/users/kenshinxf/gists{/gist_id}","starred_url":"https://api.github.com/users/kenshinxf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kenshinxf/subscriptions","organizations_url":"https://api.github.com/users/kenshinxf/orgs","repos_url":"https://api.github.com/users/kenshinxf/repos","events_url":"https://api.github.com/users/kenshinxf/events{/privacy}","received_events_url":"https://api.github.com/users/kenshinxf/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T12:59:35Z","updated_at":"2019-08-08T12:59:35Z","author_association":"NONE","body":"看了一下thrift原生的实现，oneway情况下， client只发送数据， server只处理不返回结果，在当前brpc的框架下还没法解决client端的问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519507386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519556830","html_url":"https://github.com/apache/brpc/issues/872#issuecomment-519556830","issue_url":"https://api.github.com/repos/apache/brpc/issues/872","id":519556830,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTU1NjgzMA==","user":{"login":"a0soft","id":17812886,"node_id":"MDQ6VXNlcjE3ODEyODg2","avatar_url":"https://avatars.githubusercontent.com/u/17812886?v=4","gravatar_id":"","url":"https://api.github.com/users/a0soft","html_url":"https://github.com/a0soft","followers_url":"https://api.github.com/users/a0soft/followers","following_url":"https://api.github.com/users/a0soft/following{/other_user}","gists_url":"https://api.github.com/users/a0soft/gists{/gist_id}","starred_url":"https://api.github.com/users/a0soft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/a0soft/subscriptions","organizations_url":"https://api.github.com/users/a0soft/orgs","repos_url":"https://api.github.com/users/a0soft/repos","events_url":"https://api.github.com/users/a0soft/events{/privacy}","received_events_url":"https://api.github.com/users/a0soft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-08T15:01:31Z","updated_at":"2019-08-08T15:01:31Z","author_association":"NONE","body":"升级到最新的brpc，经测试可以正常编译。\r\n非常感谢！@gxkevin ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519556830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519904964","html_url":"https://github.com/apache/brpc/issues/882#issuecomment-519904964","issue_url":"https://api.github.com/repos/apache/brpc/issues/882","id":519904964,"node_id":"MDEyOklzc3VlQ29tbWVudDUxOTkwNDk2NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T12:45:11Z","updated_at":"2019-08-09T12:45:11Z","author_association":"CONTRIBUTOR","body":"感谢指出。默认值应以代码中的为准，文档中的已删除","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/519904964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520022420","html_url":"https://github.com/apache/brpc/pull/878#issuecomment-520022420","issue_url":"https://api.github.com/repos/apache/brpc/issues/878","id":520022420,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDAyMjQyMA==","user":{"login":"ymjing","id":1444316,"node_id":"MDQ6VXNlcjE0NDQzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1444316?v=4","gravatar_id":"","url":"https://api.github.com/users/ymjing","html_url":"https://github.com/ymjing","followers_url":"https://api.github.com/users/ymjing/followers","following_url":"https://api.github.com/users/ymjing/following{/other_user}","gists_url":"https://api.github.com/users/ymjing/gists{/gist_id}","starred_url":"https://api.github.com/users/ymjing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymjing/subscriptions","organizations_url":"https://api.github.com/users/ymjing/orgs","repos_url":"https://api.github.com/users/ymjing/repos","events_url":"https://api.github.com/users/ymjing/events{/privacy}","received_events_url":"https://api.github.com/users/ymjing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-09T18:38:05Z","updated_at":"2019-08-09T18:38:05Z","author_association":"NONE","body":"CI passed at https://travis-ci.com/mesalock-linux/brpc/builds/122628741","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520022420/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520191691","html_url":"https://github.com/apache/brpc/issues/4#issuecomment-520191691","issue_url":"https://api.github.com/repos/apache/brpc/issues/4","id":520191691,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDE5MTY5MQ==","user":{"login":"geffzhang","id":439390,"node_id":"MDQ6VXNlcjQzOTM5MA==","avatar_url":"https://avatars.githubusercontent.com/u/439390?v=4","gravatar_id":"","url":"https://api.github.com/users/geffzhang","html_url":"https://github.com/geffzhang","followers_url":"https://api.github.com/users/geffzhang/followers","following_url":"https://api.github.com/users/geffzhang/following{/other_user}","gists_url":"https://api.github.com/users/geffzhang/gists{/gist_id}","starred_url":"https://api.github.com/users/geffzhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/geffzhang/subscriptions","organizations_url":"https://api.github.com/users/geffzhang/orgs","repos_url":"https://api.github.com/users/geffzhang/repos","events_url":"https://api.github.com/users/geffzhang/events{/privacy}","received_events_url":"https://api.github.com/users/geffzhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-11T01:06:56Z","updated_at":"2019-08-11T01:06:56Z","author_association":"NONE","body":"同问需求 +1","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520191691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520211048","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-520211048","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":520211048,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDIxMTA0OA==","user":{"login":"taozhiwei","id":5679313,"node_id":"MDQ6VXNlcjU2NzkzMTM=","avatar_url":"https://avatars.githubusercontent.com/u/5679313?v=4","gravatar_id":"","url":"https://api.github.com/users/taozhiwei","html_url":"https://github.com/taozhiwei","followers_url":"https://api.github.com/users/taozhiwei/followers","following_url":"https://api.github.com/users/taozhiwei/following{/other_user}","gists_url":"https://api.github.com/users/taozhiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/taozhiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taozhiwei/subscriptions","organizations_url":"https://api.github.com/users/taozhiwei/orgs","repos_url":"https://api.github.com/users/taozhiwei/repos","events_url":"https://api.github.com/users/taozhiwei/events{/privacy}","received_events_url":"https://api.github.com/users/taozhiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-11T08:42:25Z","updated_at":"2019-08-11T08:42:42Z","author_association":"NONE","body":"“当h2response的包体长度小于remote window size时，当前的做法是直接返回RST_STREAM，更好的做法是等到收到window_update再发”；是大于吧？\r\n请问大概什么时候修复这个问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520211048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520291791","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-520291791","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":520291791,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDI5MTc5MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-12T03:48:03Z","updated_at":"2019-08-12T03:48:03Z","author_association":"MEMBER","body":"@taozhiwei 目前可以把remote window size调大作为workaround，在你们业务场景会带来什么问题么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520291791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520699651","html_url":"https://github.com/apache/brpc/issues/885#issuecomment-520699651","issue_url":"https://api.github.com/repos/apache/brpc/issues/885","id":520699651,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDY5OTY1MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T05:58:39Z","updated_at":"2019-08-13T05:58:39Z","author_association":"MEMBER","body":"compare_exchange_strong在失败的时候会把实际的值赋给expected_version，详细的可以看下函数文档","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520699651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520701470","html_url":"https://github.com/apache/brpc/issues/885#issuecomment-520701470","issue_url":"https://api.github.com/repos/apache/brpc/issues/885","id":520701470,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDcwMTQ3MA==","user":{"login":"caftxx","id":8357128,"node_id":"MDQ6VXNlcjgzNTcxMjg=","avatar_url":"https://avatars.githubusercontent.com/u/8357128?v=4","gravatar_id":"","url":"https://api.github.com/users/caftxx","html_url":"https://github.com/caftxx","followers_url":"https://api.github.com/users/caftxx/followers","following_url":"https://api.github.com/users/caftxx/following{/other_user}","gists_url":"https://api.github.com/users/caftxx/gists{/gist_id}","starred_url":"https://api.github.com/users/caftxx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caftxx/subscriptions","organizations_url":"https://api.github.com/users/caftxx/orgs","repos_url":"https://api.github.com/users/caftxx/repos","events_url":"https://api.github.com/users/caftxx/events{/privacy}","received_events_url":"https://api.github.com/users/caftxx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T06:06:55Z","updated_at":"2019-08-13T06:06:55Z","author_association":"NONE","body":"> compare_exchange_strong在失败的时候会把实际的值赋给expected_version，详细的可以看下函数文档\r\n\r\nget，明白了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520701470/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520777403","html_url":"https://github.com/apache/brpc/issues/884#issuecomment-520777403","issue_url":"https://api.github.com/repos/apache/brpc/issues/884","id":520777403,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDc3NzQwMw==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T10:18:05Z","updated_at":"2019-08-13T10:18:05Z","author_association":"MEMBER","body":"每个worker pthread都有它自己的tls TaskGroup，只push自己的WorkStealingQueue，这样push不会有竞争。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520777403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520841621","html_url":"https://github.com/apache/brpc/issues/516#issuecomment-520841621","issue_url":"https://api.github.com/repos/apache/brpc/issues/516","id":520841621,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMDg0MTYyMQ==","user":{"login":"taozhiwei","id":5679313,"node_id":"MDQ6VXNlcjU2NzkzMTM=","avatar_url":"https://avatars.githubusercontent.com/u/5679313?v=4","gravatar_id":"","url":"https://api.github.com/users/taozhiwei","html_url":"https://github.com/taozhiwei","followers_url":"https://api.github.com/users/taozhiwei/followers","following_url":"https://api.github.com/users/taozhiwei/following{/other_user}","gists_url":"https://api.github.com/users/taozhiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/taozhiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/taozhiwei/subscriptions","organizations_url":"https://api.github.com/users/taozhiwei/orgs","repos_url":"https://api.github.com/users/taozhiwei/repos","events_url":"https://api.github.com/users/taozhiwei/events{/privacy}","received_events_url":"https://api.github.com/users/taozhiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-13T13:47:15Z","updated_at":"2019-08-13T13:47:49Z","author_association":"NONE","body":"> @taozhiwei 目前可以把remote window size调大作为workaround，在你们业务场景会带来什么问题么\r\n\r\n我已经修改grpc client调用方式了： ManagedChannel channel  = NettyChannelBuilder.forAddress(\"127.0.0.1\",8080).flowControlWindow(2097152).usePlaintext().build();","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/520841621/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521091284","html_url":"https://github.com/apache/brpc/issues/886#issuecomment-521091284","issue_url":"https://api.github.com/repos/apache/brpc/issues/886","id":521091284,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTA5MTI4NA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T03:48:12Z","updated_at":"2019-08-14T03:48:12Z","author_association":"CONTRIBUTOR","body":"这个log主要是提供接口，实现作为参考，性能是没有任何优化的，在生产环境中建议适配使用公司内或第三方日志库","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521091284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521138048","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521138048","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521138048,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTEzODA0OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T07:39:56Z","updated_at":"2019-08-14T07:39:56Z","author_association":"CONTRIBUTOR","body":"client端是瓶颈么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521138048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521149389","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521149389","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521149389,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTE0OTM4OQ==","user":{"login":"lwmonster","id":4264580,"node_id":"MDQ6VXNlcjQyNjQ1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/4264580?v=4","gravatar_id":"","url":"https://api.github.com/users/lwmonster","html_url":"https://github.com/lwmonster","followers_url":"https://api.github.com/users/lwmonster/followers","following_url":"https://api.github.com/users/lwmonster/following{/other_user}","gists_url":"https://api.github.com/users/lwmonster/gists{/gist_id}","starred_url":"https://api.github.com/users/lwmonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwmonster/subscriptions","organizations_url":"https://api.github.com/users/lwmonster/orgs","repos_url":"https://api.github.com/users/lwmonster/repos","events_url":"https://api.github.com/users/lwmonster/events{/privacy}","received_events_url":"https://api.github.com/users/lwmonster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T08:17:06Z","updated_at":"2019-08-14T08:17:06Z","author_association":"NONE","body":"> client端是瓶颈么？\r\n\r\n意思是说，这个时间有可能耗费在 client 端？ 这之前倒是没有考虑过。\r\n戈神，有啥办法确定一下吗？ ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521149389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521150450","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521150450","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521150450,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTE1MDQ1MA==","user":{"login":"lwmonster","id":4264580,"node_id":"MDQ6VXNlcjQyNjQ1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/4264580?v=4","gravatar_id":"","url":"https://api.github.com/users/lwmonster","html_url":"https://github.com/lwmonster","followers_url":"https://api.github.com/users/lwmonster/followers","following_url":"https://api.github.com/users/lwmonster/following{/other_user}","gists_url":"https://api.github.com/users/lwmonster/gists{/gist_id}","starred_url":"https://api.github.com/users/lwmonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwmonster/subscriptions","organizations_url":"https://api.github.com/users/lwmonster/orgs","repos_url":"https://api.github.com/users/lwmonster/repos","events_url":"https://api.github.com/users/lwmonster/events{/privacy}","received_events_url":"https://api.github.com/users/lwmonster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T08:20:30Z","updated_at":"2019-08-14T08:20:50Z","author_association":"NONE","body":"> client端是瓶颈么？\r\n\r\n对了，在我做压测的同时，我从 client 端 ping server 端的机器，延时稳定在 1.2ms","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521150450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521159396","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521159396","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521159396,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTE1OTM5Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T08:47:44Z","updated_at":"2019-08-14T08:47:52Z","author_association":"CONTRIBUTOR","body":"\"从client端ping server的延时\"只能说明它们之间的网络是通顺的，并不能说明压测时的client是否成为了瓶颈。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521159396/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521164509","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521164509","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521164509,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTE2NDUwOQ==","user":{"login":"lwmonster","id":4264580,"node_id":"MDQ6VXNlcjQyNjQ1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/4264580?v=4","gravatar_id":"","url":"https://api.github.com/users/lwmonster","html_url":"https://github.com/lwmonster","followers_url":"https://api.github.com/users/lwmonster/followers","following_url":"https://api.github.com/users/lwmonster/following{/other_user}","gists_url":"https://api.github.com/users/lwmonster/gists{/gist_id}","starred_url":"https://api.github.com/users/lwmonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwmonster/subscriptions","organizations_url":"https://api.github.com/users/lwmonster/orgs","repos_url":"https://api.github.com/users/lwmonster/repos","events_url":"https://api.github.com/users/lwmonster/events{/privacy}","received_events_url":"https://api.github.com/users/lwmonster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T09:02:48Z","updated_at":"2019-08-14T09:02:48Z","author_association":"NONE","body":"> \"从client端ping server的延时\"只能说明它们之间的网络是通顺的，并不能说明压测时的client是否成为了瓶颈。\r\n\r\n明白，我看看怎么 check 一下客户端","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521164509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521348656","html_url":"https://github.com/apache/brpc/pull/878#issuecomment-521348656","issue_url":"https://api.github.com/repos/apache/brpc/issues/878","id":521348656,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTM0ODY1Ng==","user":{"login":"ymjing","id":1444316,"node_id":"MDQ6VXNlcjE0NDQzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1444316?v=4","gravatar_id":"","url":"https://api.github.com/users/ymjing","html_url":"https://github.com/ymjing","followers_url":"https://api.github.com/users/ymjing/followers","following_url":"https://api.github.com/users/ymjing/following{/other_user}","gists_url":"https://api.github.com/users/ymjing/gists{/gist_id}","starred_url":"https://api.github.com/users/ymjing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymjing/subscriptions","organizations_url":"https://api.github.com/users/ymjing/orgs","repos_url":"https://api.github.com/users/ymjing/repos","events_url":"https://api.github.com/users/ymjing/events{/privacy}","received_events_url":"https://api.github.com/users/ymjing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-14T17:47:49Z","updated_at":"2019-08-14T17:47:49Z","author_association":"NONE","body":"Any comments on the new commits pushed 5 days ago?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521348656/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521598929","html_url":"https://github.com/apache/brpc/issues/886#issuecomment-521598929","issue_url":"https://api.github.com/repos/apache/brpc/issues/886","id":521598929,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTU5ODkyOQ==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T10:42:55Z","updated_at":"2019-08-15T10:42:55Z","author_association":"NONE","body":"@jamesge 好的，谢谢戈神，目前我实现的方法是继承了LogSink，但没看到类似于glog那种AddLogSink()，如何调用我这个logsink呢，还是得改brpc源码","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521598929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521639933","html_url":"https://github.com/apache/brpc/issues/886#issuecomment-521639933","issue_url":"https://api.github.com/repos/apache/brpc/issues/886","id":521639933,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTYzOTkzMw==","user":{"login":"gxkevin","id":3214440,"node_id":"MDQ6VXNlcjMyMTQ0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/3214440?v=4","gravatar_id":"","url":"https://api.github.com/users/gxkevin","html_url":"https://github.com/gxkevin","followers_url":"https://api.github.com/users/gxkevin/followers","following_url":"https://api.github.com/users/gxkevin/following{/other_user}","gists_url":"https://api.github.com/users/gxkevin/gists{/gist_id}","starred_url":"https://api.github.com/users/gxkevin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gxkevin/subscriptions","organizations_url":"https://api.github.com/users/gxkevin/orgs","repos_url":"https://api.github.com/users/gxkevin/repos","events_url":"https://api.github.com/users/gxkevin/events{/privacy}","received_events_url":"https://api.github.com/users/gxkevin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T13:26:36Z","updated_at":"2019-08-15T13:26:36Z","author_association":"NONE","body":"找到了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521639933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521772508","html_url":"https://github.com/apache/brpc/pull/883#issuecomment-521772508","issue_url":"https://api.github.com/repos/apache/brpc/issues/883","id":521772508,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTc3MjUwOA==","user":{"login":"ymjing","id":1444316,"node_id":"MDQ6VXNlcjE0NDQzMTY=","avatar_url":"https://avatars.githubusercontent.com/u/1444316?v=4","gravatar_id":"","url":"https://api.github.com/users/ymjing","html_url":"https://github.com/ymjing","followers_url":"https://api.github.com/users/ymjing/followers","following_url":"https://api.github.com/users/ymjing/following{/other_user}","gists_url":"https://api.github.com/users/ymjing/gists{/gist_id}","starred_url":"https://api.github.com/users/ymjing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ymjing/subscriptions","organizations_url":"https://api.github.com/users/ymjing/orgs","repos_url":"https://api.github.com/users/ymjing/repos","events_url":"https://api.github.com/users/ymjing/events{/privacy}","received_events_url":"https://api.github.com/users/ymjing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-15T19:47:48Z","updated_at":"2019-08-15T19:47:48Z","author_association":"NONE","body":"CI passed at https://travis-ci.com/mesalock-linux/brpc/builds/123398886","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521772508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521865956","html_url":"https://github.com/apache/brpc/issues/889#issuecomment-521865956","issue_url":"https://api.github.com/repos/apache/brpc/issues/889","id":521865956,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTg2NTk1Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T02:53:55Z","updated_at":"2019-08-16T02:53:55Z","author_association":"MEMBER","body":"用高版本的protobuf重新编一下brpc不能解决问题么？*.pb.h会重新生成的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521865956/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521913719","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521913719","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521913719,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTkxMzcxOQ==","user":{"login":"lwmonster","id":4264580,"node_id":"MDQ6VXNlcjQyNjQ1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/4264580?v=4","gravatar_id":"","url":"https://api.github.com/users/lwmonster","html_url":"https://github.com/lwmonster","followers_url":"https://api.github.com/users/lwmonster/followers","following_url":"https://api.github.com/users/lwmonster/following{/other_user}","gists_url":"https://api.github.com/users/lwmonster/gists{/gist_id}","starred_url":"https://api.github.com/users/lwmonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwmonster/subscriptions","organizations_url":"https://api.github.com/users/lwmonster/orgs","repos_url":"https://api.github.com/users/lwmonster/repos","events_url":"https://api.github.com/users/lwmonster/events{/privacy}","received_events_url":"https://api.github.com/users/lwmonster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T07:22:52Z","updated_at":"2019-08-16T07:22:52Z","author_association":"NONE","body":"> \"从client端ping server的延时\"只能说明它们之间的网络是通顺的，并不能说明压测时的client是否成为了瓶颈。\r\n\r\n我更新了一下数据，大佬再帮忙看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521913719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521929105","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521929105","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521929105,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTkyOTEwNQ==","user":{"login":"chenzhangyi","id":6805583,"node_id":"MDQ6VXNlcjY4MDU1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/6805583?v=4","gravatar_id":"","url":"https://api.github.com/users/chenzhangyi","html_url":"https://github.com/chenzhangyi","followers_url":"https://api.github.com/users/chenzhangyi/followers","following_url":"https://api.github.com/users/chenzhangyi/following{/other_user}","gists_url":"https://api.github.com/users/chenzhangyi/gists{/gist_id}","starred_url":"https://api.github.com/users/chenzhangyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenzhangyi/subscriptions","organizations_url":"https://api.github.com/users/chenzhangyi/orgs","repos_url":"https://api.github.com/users/chenzhangyi/repos","events_url":"https://api.github.com/users/chenzhangyi/events{/privacy}","received_events_url":"https://api.github.com/users/chenzhangyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T08:21:04Z","updated_at":"2019-08-16T08:21:04Z","author_association":"MEMBER","body":"cpu高峰那么平，有没有被cgroup限制","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521929105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521936542","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-521936542","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":521936542,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTkzNjU0Mg==","user":{"login":"lwmonster","id":4264580,"node_id":"MDQ6VXNlcjQyNjQ1ODA=","avatar_url":"https://avatars.githubusercontent.com/u/4264580?v=4","gravatar_id":"","url":"https://api.github.com/users/lwmonster","html_url":"https://github.com/lwmonster","followers_url":"https://api.github.com/users/lwmonster/followers","following_url":"https://api.github.com/users/lwmonster/following{/other_user}","gists_url":"https://api.github.com/users/lwmonster/gists{/gist_id}","starred_url":"https://api.github.com/users/lwmonster/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lwmonster/subscriptions","organizations_url":"https://api.github.com/users/lwmonster/orgs","repos_url":"https://api.github.com/users/lwmonster/repos","events_url":"https://api.github.com/users/lwmonster/events{/privacy}","received_events_url":"https://api.github.com/users/lwmonster/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T08:46:40Z","updated_at":"2019-08-16T08:46:40Z","author_association":"NONE","body":"> cpu高峰那么平，有没有被cgroup限制\r\n\r\n我们的机器都没有配置 cgroup","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521936542/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521951401","html_url":"https://github.com/apache/brpc/issues/207#issuecomment-521951401","issue_url":"https://api.github.com/repos/apache/brpc/issues/207","id":521951401,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMTk1MTQwMQ==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-16T09:38:45Z","updated_at":"2019-08-16T09:38:45Z","author_association":"CONTRIBUTOR","body":"请问目前支持ipv6的计划是怎样的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/521951401/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522224768","html_url":"https://github.com/apache/brpc/issues/891#issuecomment-522224768","issue_url":"https://api.github.com/repos/apache/brpc/issues/891","id":522224768,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjIyNDc2OA==","user":{"login":"Re-bin","id":52506698,"node_id":"MDQ6VXNlcjUyNTA2Njk4","avatar_url":"https://avatars.githubusercontent.com/u/52506698?v=4","gravatar_id":"","url":"https://api.github.com/users/Re-bin","html_url":"https://github.com/Re-bin","followers_url":"https://api.github.com/users/Re-bin/followers","following_url":"https://api.github.com/users/Re-bin/following{/other_user}","gists_url":"https://api.github.com/users/Re-bin/gists{/gist_id}","starred_url":"https://api.github.com/users/Re-bin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Re-bin/subscriptions","organizations_url":"https://api.github.com/users/Re-bin/orgs","repos_url":"https://api.github.com/users/Re-bin/repos","events_url":"https://api.github.com/users/Re-bin/events{/privacy}","received_events_url":"https://api.github.com/users/Re-bin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-17T10:16:45Z","updated_at":"2019-08-17T14:31:12Z","author_association":"NONE","body":"目前CPU的架构不是X86,是mips,有什么解决办法嘛。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522224768/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522397275","html_url":"https://github.com/apache/brpc/issues/889#issuecomment-522397275","issue_url":"https://api.github.com/repos/apache/brpc/issues/889","id":522397275,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjM5NzI3NQ==","user":{"login":"libratiger","id":870144,"node_id":"MDQ6VXNlcjg3MDE0NA==","avatar_url":"https://avatars.githubusercontent.com/u/870144?v=4","gravatar_id":"","url":"https://api.github.com/users/libratiger","html_url":"https://github.com/libratiger","followers_url":"https://api.github.com/users/libratiger/followers","following_url":"https://api.github.com/users/libratiger/following{/other_user}","gists_url":"https://api.github.com/users/libratiger/gists{/gist_id}","starred_url":"https://api.github.com/users/libratiger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/libratiger/subscriptions","organizations_url":"https://api.github.com/users/libratiger/orgs","repos_url":"https://api.github.com/users/libratiger/repos","events_url":"https://api.github.com/users/libratiger/events{/privacy}","received_events_url":"https://api.github.com/users/libratiger/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-19T03:24:12Z","updated_at":"2019-08-19T03:24:12Z","author_association":"NONE","body":"可以解决，发现还是pb的兼容性不太好，一个项目使用的pb3.7和pb3.6之间都有差别。\r\n\r\n不过把语法升级到pb3仍旧比较好，新用户可以不用再去理会Pb2和pb3直接的差别。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522397275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522839042","html_url":"https://github.com/apache/brpc/issues/887#issuecomment-522839042","issue_url":"https://api.github.com/repos/apache/brpc/issues/887","id":522839042,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjgzOTA0Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T03:34:31Z","updated_at":"2019-08-20T03:34:31Z","author_association":"CONTRIBUTOR","body":"试过增加client的个数么？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522839042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522839110","html_url":"https://github.com/apache/brpc/issues/892#issuecomment-522839110","issue_url":"https://api.github.com/repos/apache/brpc/issues/892","id":522839110,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjgzOTExMA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T03:34:56Z","updated_at":"2019-08-20T03:34:56Z","author_association":"CONTRIBUTOR","body":"应该没有，我们没有条件测试这个架构","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522839110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522968251","html_url":"https://github.com/apache/brpc/issues/767#issuecomment-522968251","issue_url":"https://api.github.com/repos/apache/brpc/issues/767","id":522968251,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk2ODI1MQ==","user":{"login":"haolujun","id":10751631,"node_id":"MDQ6VXNlcjEwNzUxNjMx","avatar_url":"https://avatars.githubusercontent.com/u/10751631?v=4","gravatar_id":"","url":"https://api.github.com/users/haolujun","html_url":"https://github.com/haolujun","followers_url":"https://api.github.com/users/haolujun/followers","following_url":"https://api.github.com/users/haolujun/following{/other_user}","gists_url":"https://api.github.com/users/haolujun/gists{/gist_id}","starred_url":"https://api.github.com/users/haolujun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/haolujun/subscriptions","organizations_url":"https://api.github.com/users/haolujun/orgs","repos_url":"https://api.github.com/users/haolujun/repos","events_url":"https://api.github.com/users/haolujun/events{/privacy}","received_events_url":"https://api.github.com/users/haolujun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T11:18:01Z","updated_at":"2019-08-20T11:18:01Z","author_association":"NONE","body":"> 看一下机器的 tcp 重传监控，是否tcp重传很高 。 200ms看起来是触发了 tcp重传 导致部分请求+200ms\r\n\r\n是的，应该是网络流量大，有偶尔的丢包现象，导致触发tcp重传，重传是的ttl最小值一般为200ms。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522968251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522974958","html_url":"https://github.com/apache/brpc/issues/896#issuecomment-522974958","issue_url":"https://api.github.com/repos/apache/brpc/issues/896","id":522974958,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk3NDk1OA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T11:40:12Z","updated_at":"2019-08-20T11:40:12Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-brpc/blob/8c32109de6d697f4c14bf808e19f251fb3a47e9d/src/brpc/details/http_message.cpp#L164","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522974958/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522977038","html_url":"https://github.com/apache/brpc/pull/893#issuecomment-522977038","issue_url":"https://api.github.com/repos/apache/brpc/issues/893","id":522977038,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk3NzAzOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T11:46:27Z","updated_at":"2019-08-20T11:46:27Z","author_association":"CONTRIBUTOR","body":"看下 #617","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522977038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522983524","html_url":"https://github.com/apache/brpc/issues/896#issuecomment-522983524","issue_url":"https://api.github.com/repos/apache/brpc/issues/896","id":522983524,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk4MzUyNA==","user":{"login":"Re-bin","id":52506698,"node_id":"MDQ6VXNlcjUyNTA2Njk4","avatar_url":"https://avatars.githubusercontent.com/u/52506698?v=4","gravatar_id":"","url":"https://api.github.com/users/Re-bin","html_url":"https://github.com/Re-bin","followers_url":"https://api.github.com/users/Re-bin/followers","following_url":"https://api.github.com/users/Re-bin/following{/other_user}","gists_url":"https://api.github.com/users/Re-bin/gists{/gist_id}","starred_url":"https://api.github.com/users/Re-bin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Re-bin/subscriptions","organizations_url":"https://api.github.com/users/Re-bin/orgs","repos_url":"https://api.github.com/users/Re-bin/repos","events_url":"https://api.github.com/users/Re-bin/events{/privacy}","received_events_url":"https://api.github.com/users/Re-bin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T12:05:41Z","updated_at":"2019-08-20T12:09:07Z","author_association":"NONE","body":"> https://github.com/apache/incubator-brpc/blob/8c32109de6d697f4c14bf808e19f251fb3a47e9d/src/brpc/details/http_message.cpp#L164\r\n\r\n多谢大佬，还向问一下这个实例，里面的controller也能获得uri数据，也是通过上述的办法嘛？对这个地方有一些疑惑，还望不吝赐教。(代码源于Baidu开源的AnyQ) 不知道为什么代码放上来没法全进那个框....\r\n\r\n\r\n`void HttpServiceImpl::anyq(google::protobuf::RpcController* cntl_base,\r\n               const HttpRequest* request,\r\n               HttpResponse*,\r\n               google::protobuf::Closure* done) {\r\n    brpc::ClosureGuard done_guard(done);\r\n    brpc::Controller* cntl = static_cast<brpc::Controller*>(cntl_base);\r\n    cntl->http_response().set_content_type(\"application/json;charset=utf8\");\r\n\r\n    // preprocess\r\n    Json::Value parameters;\r\n    if (this->normalize_input(cntl, parameters) != 0\r\n        || parameters.type() != Json::objectValue) {\r\n        FATAL_LOG(\"normalize input failed!\");\r\n        return;\r\n    }\r\n\r\n    std::string str_anyq_input;\r\n    if (_preproc_plugin->process(cntl, parameters, str_anyq_input) != 0) {\r\n        FATAL_LOG(\"make anyq input failed!\");\r\n        return;\r\n    }`","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522983524/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522990934","html_url":"https://github.com/apache/brpc/pull/893#issuecomment-522990934","issue_url":"https://api.github.com/repos/apache/brpc/issues/893","id":522990934,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk5MDkzNA==","user":{"login":"liupengs","id":7744133,"node_id":"MDQ6VXNlcjc3NDQxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7744133?v=4","gravatar_id":"","url":"https://api.github.com/users/liupengs","html_url":"https://github.com/liupengs","followers_url":"https://api.github.com/users/liupengs/followers","following_url":"https://api.github.com/users/liupengs/following{/other_user}","gists_url":"https://api.github.com/users/liupengs/gists{/gist_id}","starred_url":"https://api.github.com/users/liupengs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liupengs/subscriptions","organizations_url":"https://api.github.com/users/liupengs/orgs","repos_url":"https://api.github.com/users/liupengs/repos","events_url":"https://api.github.com/users/liupengs/events{/privacy}","received_events_url":"https://api.github.com/users/liupengs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T12:27:31Z","updated_at":"2019-08-20T12:27:31Z","author_association":"CONTRIBUTOR","body":"这个问题在我们使用场景中出现频率挺高，我们在百度内部和社区提 issues 都是一直无人理。\r\n\r\n问题根源就是函数 erase_from_butex 和 wait_for_butex 中操作  container 的顺序不确定， 理论上只需保证操作container 的顺序 或 添加辅助变量记录状态， 就可以解决这个问题。 当前我修复的版本在内部一直运行良好。\r\n\r\n但是如 #617 中讨论的由于  butex_requeue 的逻辑掺杂， 导致修复困难， 加上我还没有分析butex_requeue代码， 所以这个 pull request 可以暂时搁置。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522990934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522992234","html_url":"https://github.com/apache/brpc/issues/866#issuecomment-522992234","issue_url":"https://api.github.com/repos/apache/brpc/issues/866","id":522992234,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMjk5MjIzNA==","user":{"login":"liupengs","id":7744133,"node_id":"MDQ6VXNlcjc3NDQxMzM=","avatar_url":"https://avatars.githubusercontent.com/u/7744133?v=4","gravatar_id":"","url":"https://api.github.com/users/liupengs","html_url":"https://github.com/liupengs","followers_url":"https://api.github.com/users/liupengs/followers","following_url":"https://api.github.com/users/liupengs/following{/other_user}","gists_url":"https://api.github.com/users/liupengs/gists{/gist_id}","starred_url":"https://api.github.com/users/liupengs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liupengs/subscriptions","organizations_url":"https://api.github.com/users/liupengs/orgs","repos_url":"https://api.github.com/users/liupengs/repos","events_url":"https://api.github.com/users/liupengs/events{/privacy}","received_events_url":"https://api.github.com/users/liupengs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-20T12:31:06Z","updated_at":"2019-08-20T12:31:06Z","author_association":"CONTRIBUTOR","body":"见 #617 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/522992234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/523282324","html_url":"https://github.com/apache/brpc/issues/894#issuecomment-523282324","issue_url":"https://api.github.com/repos/apache/brpc/issues/894","id":523282324,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzI4MjMyNA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-21T03:40:04Z","updated_at":"2019-08-21T03:40:16Z","author_association":"MEMBER","body":"worker全部都阻塞住了么（可以通过curl 'ip:port/health'判断，如果没有返回就是阻塞了）？如果阻塞住的话，EventDispatcher就不工作了，fd可能不会被close","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/523282324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/523870648","html_url":"https://github.com/apache/brpc/issues/897#issuecomment-523870648","issue_url":"https://api.github.com/repos/apache/brpc/issues/897","id":523870648,"node_id":"MDEyOklzc3VlQ29tbWVudDUyMzg3MDY0OA==","user":{"login":"feifeiiong","id":4979167,"node_id":"MDQ6VXNlcjQ5NzkxNjc=","avatar_url":"https://avatars.githubusercontent.com/u/4979167?v=4","gravatar_id":"","url":"https://api.github.com/users/feifeiiong","html_url":"https://github.com/feifeiiong","followers_url":"https://api.github.com/users/feifeiiong/followers","following_url":"https://api.github.com/users/feifeiiong/following{/other_user}","gists_url":"https://api.github.com/users/feifeiiong/gists{/gist_id}","starred_url":"https://api.github.com/users/feifeiiong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feifeiiong/subscriptions","organizations_url":"https://api.github.com/users/feifeiiong/orgs","repos_url":"https://api.github.com/users/feifeiiong/repos","events_url":"https://api.github.com/users/feifeiiong/events{/privacy}","received_events_url":"https://api.github.com/users/feifeiiong/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-22T11:47:08Z","updated_at":"2019-08-22T11:47:08Z","author_association":"NONE","body":"新版已经解决","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/523870648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524182633","html_url":"https://github.com/apache/brpc/issues/894#issuecomment-524182633","issue_url":"https://api.github.com/repos/apache/brpc/issues/894","id":524182633,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDE4MjYzMw==","user":{"login":"wxj1992","id":12080448,"node_id":"MDQ6VXNlcjEyMDgwNDQ4","avatar_url":"https://avatars.githubusercontent.com/u/12080448?v=4","gravatar_id":"","url":"https://api.github.com/users/wxj1992","html_url":"https://github.com/wxj1992","followers_url":"https://api.github.com/users/wxj1992/followers","following_url":"https://api.github.com/users/wxj1992/following{/other_user}","gists_url":"https://api.github.com/users/wxj1992/gists{/gist_id}","starred_url":"https://api.github.com/users/wxj1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxj1992/subscriptions","organizations_url":"https://api.github.com/users/wxj1992/orgs","repos_url":"https://api.github.com/users/wxj1992/repos","events_url":"https://api.github.com/users/wxj1992/events{/privacy}","received_events_url":"https://api.github.com/users/wxj1992/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T05:54:29Z","updated_at":"2019-08-23T05:55:29Z","author_association":"NONE","body":"@zyearn 多谢解答，发现问题了，有个地方关于缓存的更新代码会死锁，但因为过期时间很长，再加上相关功能是代码上线之后很久才开启的，而且是个不影响主要业务效果的缓存，一直没有排查到那里去 = =。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524182633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524239082","html_url":"https://github.com/apache/brpc/issues/898#issuecomment-524239082","issue_url":"https://api.github.com/repos/apache/brpc/issues/898","id":524239082,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDIzOTA4Mg==","user":{"login":"liuzhiwei","id":2460599,"node_id":"MDQ6VXNlcjI0NjA1OTk=","avatar_url":"https://avatars.githubusercontent.com/u/2460599?v=4","gravatar_id":"","url":"https://api.github.com/users/liuzhiwei","html_url":"https://github.com/liuzhiwei","followers_url":"https://api.github.com/users/liuzhiwei/followers","following_url":"https://api.github.com/users/liuzhiwei/following{/other_user}","gists_url":"https://api.github.com/users/liuzhiwei/gists{/gist_id}","starred_url":"https://api.github.com/users/liuzhiwei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liuzhiwei/subscriptions","organizations_url":"https://api.github.com/users/liuzhiwei/orgs","repos_url":"https://api.github.com/users/liuzhiwei/repos","events_url":"https://api.github.com/users/liuzhiwei/events{/privacy}","received_events_url":"https://api.github.com/users/liuzhiwei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-23T09:12:15Z","updated_at":"2019-08-23T09:12:15Z","author_association":"CONTRIBUTOR","body":"已提 pull request 进行解决：\r\n\r\nhttps://github.com/apache/incubator-brpc/pull/895","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524239082/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524619944","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-524619944","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":524619944,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDYxOTk0NA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-25T10:49:10Z","updated_at":"2019-08-25T10:49:10Z","author_association":"CONTRIBUTOR","body":"可以参考 #903 ，只支持process，不支持core dump","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524619944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524695054","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-524695054","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":524695054,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDY5NTA1NA==","user":{"login":"NetWilliam","id":3966971,"node_id":"MDQ6VXNlcjM5NjY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/3966971?v=4","gravatar_id":"","url":"https://api.github.com/users/NetWilliam","html_url":"https://github.com/NetWilliam","followers_url":"https://api.github.com/users/NetWilliam/followers","following_url":"https://api.github.com/users/NetWilliam/following{/other_user}","gists_url":"https://api.github.com/users/NetWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/NetWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NetWilliam/subscriptions","organizations_url":"https://api.github.com/users/NetWilliam/orgs","repos_url":"https://api.github.com/users/NetWilliam/repos","events_url":"https://api.github.com/users/NetWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/NetWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T02:43:49Z","updated_at":"2019-08-26T02:43:49Z","author_association":"NONE","body":"既然cmake 已经没有更新支持了, 为什么不删掉呢? 我在这个地方搞了一天...  还有bazel 什么的, 我是不敢用的.\r\n\r\n如果只支持类似autogen 的方式的编译, 建议就把命名改一下, 免得别人走歧路","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524695054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524697771","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-524697771","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":524697771,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDY5Nzc3MQ==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T03:00:44Z","updated_at":"2019-08-26T03:00:44Z","author_association":"MEMBER","body":"libbrpc.so依赖libgflags.so，libleveldb.so，libprotobuf.so，你看看自己系统里有没有","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524697771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524717659","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-524717659","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":524717659,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDcxNzY1OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T05:09:41Z","updated_at":"2019-08-26T05:09:41Z","author_association":"CONTRIBUTOR","body":"```\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n0x00007f15dda3d30d in nanosleep () at ../sysdeps/unix/syscall-template.S:84\r\n84\t../sysdeps/unix/syscall-template.S: No such file or directory.\r\n(gdb) source gdb_bthread_stack.py\r\n(gdb) bthread_begin\r\nPython Exception <class 'gdb.error'> No type \"detail\" within class or namespace \"bvar\".: \r\nError occurred in Python command: No type \"detail\" within class or namespace \"bvar\".\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524717659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524726180","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-524726180","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":524726180,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDcyNjE4MA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T05:55:17Z","updated_at":"2019-08-26T05:55:17Z","author_association":"CONTRIBUTOR","body":"> ```\r\n> [Thread debugging using libthread_db enabled]\r\n> Using host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n> 0x00007f15dda3d30d in nanosleep () at ../sysdeps/unix/syscall-template.S:84\r\n> 84\t../sysdeps/unix/syscall-template.S: No such file or directory.\r\n> (gdb) source gdb_bthread_stack.py\r\n> (gdb) bthread_begin\r\n> Python Exception <class 'gdb.error'> No type \"detail\" within class or namespace \"bvar\".: \r\n> Error occurred in Python command: No type \"detail\" within class or namespace \"bvar\".\r\n> ```\r\n\r\n获取bthread数量使用了bvar，有可复现的方法吗，这个测试的程序是怎么构建的呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524726180/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524727431","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-524727431","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":524727431,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDcyNzQzMQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T06:00:55Z","updated_at":"2019-08-26T06:09:53Z","author_association":"CONTRIBUTOR","body":"就是example/multi_threaded_echo_c++用Makefile编译后运行echo_server并按上述流程操作的结果。os: ubuntu 16.04，gcc: 5.4, gdb:7.11.1, python: 2.7.12","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524727431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524748632","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-524748632","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":524748632,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDc0ODYzMg==","user":{"login":"NetWilliam","id":3966971,"node_id":"MDQ6VXNlcjM5NjY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/3966971?v=4","gravatar_id":"","url":"https://api.github.com/users/NetWilliam","html_url":"https://github.com/NetWilliam","followers_url":"https://api.github.com/users/NetWilliam/followers","following_url":"https://api.github.com/users/NetWilliam/following{/other_user}","gists_url":"https://api.github.com/users/NetWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/NetWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NetWilliam/subscriptions","organizations_url":"https://api.github.com/users/NetWilliam/orgs","repos_url":"https://api.github.com/users/NetWilliam/repos","events_url":"https://api.github.com/users/NetWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/NetWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T07:22:44Z","updated_at":"2019-08-26T07:22:44Z","author_association":"NONE","body":"> libbrpc.so依赖libgflags.so，libleveldb.so，libprotobuf.so，你看看自己系统里有没有\r\n\r\n有的, 我调试cmake的时候发现 寻找那个package的时候总是找到的是静态库, 不知道为什么.\r\ncmake 这种编译方式好像有问题走不通, 用那个 config_brpc.sh 才可以跑通","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524748632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524749767","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-524749767","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":524749767,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDc0OTc2Nw==","user":{"login":"NetWilliam","id":3966971,"node_id":"MDQ6VXNlcjM5NjY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/3966971?v=4","gravatar_id":"","url":"https://api.github.com/users/NetWilliam","html_url":"https://github.com/NetWilliam","followers_url":"https://api.github.com/users/NetWilliam/followers","following_url":"https://api.github.com/users/NetWilliam/following{/other_user}","gists_url":"https://api.github.com/users/NetWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/NetWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NetWilliam/subscriptions","organizations_url":"https://api.github.com/users/NetWilliam/orgs","repos_url":"https://api.github.com/users/NetWilliam/repos","events_url":"https://api.github.com/users/NetWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/NetWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T07:26:22Z","updated_at":"2019-08-26T07:26:22Z","author_association":"NONE","body":"我cmake 的版本还挺新的\r\ncmake version 3.15.2\r\n\r\n不晓得是不是cmake 的脚本在不同系统上有细微区别导致的. 这边是centos","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524749767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524751456","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-524751456","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":524751456,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDc1MTQ1Ng==","user":{"login":"iamchxj","id":19329921,"node_id":"MDQ6VXNlcjE5MzI5OTIx","avatar_url":"https://avatars.githubusercontent.com/u/19329921?v=4","gravatar_id":"","url":"https://api.github.com/users/iamchxj","html_url":"https://github.com/iamchxj","followers_url":"https://api.github.com/users/iamchxj/followers","following_url":"https://api.github.com/users/iamchxj/following{/other_user}","gists_url":"https://api.github.com/users/iamchxj/gists{/gist_id}","starred_url":"https://api.github.com/users/iamchxj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamchxj/subscriptions","organizations_url":"https://api.github.com/users/iamchxj/orgs","repos_url":"https://api.github.com/users/iamchxj/repos","events_url":"https://api.github.com/users/iamchxj/events{/privacy}","received_events_url":"https://api.github.com/users/iamchxj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T07:31:56Z","updated_at":"2019-08-26T07:31:56Z","author_association":"NONE","body":"非常感谢，刚刚我试了一下，可以看到死锁bthread的堆栈信息了。\r\n但是有部分的bthread frame出现了如下的报错：\r\n\r\n```\r\n(gdb) bthread_frame 4\r\nPython Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x8: \r\nError occurred in Python command: Cannot access memory at address 0x8\r\n(gdb) bt\r\n#0  0x0000000000922b0b in jump_stack (to=<optimized out>, from=<optimized out>) at /root/incubator-brpc-0.9.5/src/bthread/stack_inl.h:129\r\n#1  bthread::TaskGroup::sched_to (pg=0x0, next_meta=0x7ffd67ea77f0) at /root/incubator-brpc-0.9.5/src/bthread/task_group.cpp:601\r\n(gdb) bthread_frame 5\r\nPython Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x8: \r\nError occurred in Python command: Cannot access memory at address 0x8\r\n(gdb) bt\r\n#0  0x0000000000922b3f in bthread::TaskGroup::sched_to (pg=0x0, pg@entry=<error reading variable: Cannot access memory at address 0x8>, next_meta=<error reading variable: Cannot access memory at address 0x8>)\r\n    at /root/incubator-brpc-0.9.5/src/bthread/task_group.cpp:626\r\nCannot access memory at address 0x8\r\n```\r\n看上去像是计算地址时出现了一点问题？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524751456/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524837338","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-524837338","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":524837338,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDgzNzMzOA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T12:17:39Z","updated_at":"2019-08-26T12:17:49Z","author_association":"MEMBER","body":"config_brpc.sh会搜索指定路径下的所有文件，而cmake只会搜索特定前缀，比如/usr/local/lib，要把so放在这下面，再检查下软链接对不对。cmake一般是向后兼容的，如果不是，也会有对应的warning","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524837338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524932096","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-524932096","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":524932096,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDkzMjA5Ng==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T16:36:48Z","updated_at":"2019-08-26T16:36:48Z","author_association":"CONTRIBUTOR","body":"> 就是example/multi_threaded_echo_c++用Makefile编译后运行echo_server并按上述流程操作的结果。os: ubuntu 16.04，gcc: 5.4, gdb:7.11.1, python: 2.7.12\r\n\r\n感谢review，修复了，取类型的时候新版本的gdb报错了，加了个单引号好了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524932096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524935696","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-524935696","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":524935696,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNDkzNTY5Ng==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-26T16:46:50Z","updated_at":"2019-08-26T16:46:50Z","author_association":"CONTRIBUTOR","body":"bthread_list的结果发一下我看看","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/524935696/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525117338","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525117338","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525117338,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTExNzMzOA==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T03:07:49Z","updated_at":"2019-08-27T03:07:49Z","author_association":"CONTRIBUTOR","body":"```\r\n(gdb) bthread_meta\r\nPython Exception <class 'ValueError'> invalid literal for int() with base 10: '': \r\nError occurred in Python command: invalid literal for int() with base 10: ''\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525117338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525118553","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525118553","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525118553,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTExODU1Mw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T03:14:12Z","updated_at":"2019-08-27T03:14:12Z","author_association":"CONTRIBUTOR","body":"bthread_list中显示的数目和bthread_num的不一致\r\n```\r\n(gdb) bthread_begin \r\nActive bthreads: 25, will display 25 bthreads\r\nEnter bthread debug mode, do not switch thread before exec 'bthread_end' !!!\r\n(gdb) bthread_list\r\nid\ttid\tfunction total:5\r\n#0\t2675764627290\t0x503a60 <brpc::Socket::ProcessEvent(void*)>\r\n#1\t4294969344\t0x511900 <brpc::GlobalUpdate(void*)>\r\n#2\t4294969345\t0x4fa3f0 <brpc::EventDispatcher::RunThis(void*)>\r\n#3\t4294969346\t0x4d71b0 <brpc::Server::UpdateDerivedVars(void*)>\r\n#4\t2628519987470\t0x6cd9d0 <brpc::ProcessInputMessage(void*)>\r\n(gdb) bthread_num\r\n25\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525118553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525118852","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525118852","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525118852,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTExODg1Mg==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T03:15:50Z","updated_at":"2019-08-27T03:15:50Z","author_association":"CONTRIBUTOR","body":"目前这个脚本还会时不时报个内部错误，进而把attach的进程杀死，这样加到tools目录下的话万一被其他用户对线上进程使用，风险还是很高。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525118852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525125331","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525125331","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525125331,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEyNTMzMQ==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T03:51:11Z","updated_at":"2019-08-27T03:51:11Z","author_association":"CONTRIBUTOR","body":"> 目前这个脚本还会时不时报个内部错误，进而把attach的进程杀死，这样加到tools目录下的话万一被其他用户对线上进程使用，风险还是很高。\r\n\r\n好我先看看这些已知问题，兼容性的问题确实没想好，自己的环境用着是都没问题的，已经使用了一些时间，但是换个环境确实有些不兼容","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525125331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525125993","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525125993","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525125993,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEyNTk5Mw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T03:54:54Z","updated_at":"2019-08-27T03:54:54Z","author_association":"CONTRIBUTOR","body":"> ```\r\n> (gdb) bthread_meta\r\n> Python Exception <class 'ValueError'> invalid literal for int() with base 10: '': \r\n> Error occurred in Python command: invalid literal for int() with base 10: ''\r\n> ```\r\n\r\nbthread_meta 需要指定一个bthread id类似bthread_frame，比如bthread_meta 0，我完善一下报错信息","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525125993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525127091","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525127091","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525127091,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEyNzA5MQ==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T04:00:39Z","updated_at":"2019-08-27T04:00:39Z","author_association":"CONTRIBUTOR","body":"> bthread_list中显示的数目和bthread_num的不一致\r\n> \r\n> ```\r\n> (gdb) bthread_begin \r\n> Active bthreads: 25, will display 25 bthreads\r\n> Enter bthread debug mode, do not switch thread before exec 'bthread_end' !!!\r\n> (gdb) bthread_list\r\n> id\ttid\tfunction total:5\r\n> #0\t2675764627290\t0x503a60 <brpc::Socket::ProcessEvent(void*)>\r\n> #1\t4294969344\t0x511900 <brpc::GlobalUpdate(void*)>\r\n> #2\t4294969345\t0x4fa3f0 <brpc::EventDispatcher::RunThis(void*)>\r\n> #3\t4294969346\t0x4d71b0 <brpc::Server::UpdateDerivedVars(void*)>\r\n> #4\t2628519987470\t0x6cd9d0 <brpc::ProcessInputMessage(void*)>\r\n> (gdb) bthread_num\r\n> 25\r\n> ```\r\n\r\n数量不一致也是符合预期的，目前计数依赖的是bvar，但扫bthread的时候对于stack是0x0的跳过了，因为之前认为这些堆栈信息没有意义，所以创建了bthread但是还没被调度执行（没有分配stack）的就不会显示在list里","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525127091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525136887","html_url":"https://github.com/apache/brpc/pull/903#issuecomment-525136887","issue_url":"https://api.github.com/repos/apache/brpc/issues/903","id":525136887,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTEzNjg4Nw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T04:55:29Z","updated_at":"2019-08-27T04:55:29Z","author_association":"CONTRIBUTOR","body":"不过meta信息可能是有意义的，这个可以考虑都列一下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525136887/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525141748","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-525141748","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":525141748,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE0MTc0OA==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T05:19:21Z","updated_at":"2019-08-27T05:19:21Z","author_association":"NONE","body":"编译自己的链接库加上brpc需要的leveldb  gflags等就可以了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525141748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525142718","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-525142718","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":525142718,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE0MjcxOA==","user":{"login":"hongbshi","id":42710460,"node_id":"MDQ6VXNlcjQyNzEwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/42710460?v=4","gravatar_id":"","url":"https://api.github.com/users/hongbshi","html_url":"https://github.com/hongbshi","followers_url":"https://api.github.com/users/hongbshi/followers","following_url":"https://api.github.com/users/hongbshi/following{/other_user}","gists_url":"https://api.github.com/users/hongbshi/gists{/gist_id}","starred_url":"https://api.github.com/users/hongbshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hongbshi/subscriptions","organizations_url":"https://api.github.com/users/hongbshi/orgs","repos_url":"https://api.github.com/users/hongbshi/repos","events_url":"https://api.github.com/users/hongbshi/events{/privacy}","received_events_url":"https://api.github.com/users/hongbshi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T05:23:31Z","updated_at":"2019-08-27T05:23:31Z","author_association":"NONE","body":"> 编译自己的链接库加上brpc需要的leveldb gflags等就可以了\r\n\r\n编译自己的程序时，我已经加上了leveldb, gflags, protobuf, 不过都是静态库。必须改为动态库嘛？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525142718/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525154163","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-525154163","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":525154163,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE1NDE2Mw==","user":{"login":"nxtreaming","id":3108107,"node_id":"MDQ6VXNlcjMxMDgxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/3108107?v=4","gravatar_id":"","url":"https://api.github.com/users/nxtreaming","html_url":"https://github.com/nxtreaming","followers_url":"https://api.github.com/users/nxtreaming/followers","following_url":"https://api.github.com/users/nxtreaming/following{/other_user}","gists_url":"https://api.github.com/users/nxtreaming/gists{/gist_id}","starred_url":"https://api.github.com/users/nxtreaming/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nxtreaming/subscriptions","organizations_url":"https://api.github.com/users/nxtreaming/orgs","repos_url":"https://api.github.com/users/nxtreaming/repos","events_url":"https://api.github.com/users/nxtreaming/events{/privacy}","received_events_url":"https://api.github.com/users/nxtreaming/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T06:12:25Z","updated_at":"2019-08-27T06:12:25Z","author_association":"NONE","body":"建议不要用静态库编译brpc，否则你要改动好几个地方来增加-fPIC 选项重新编译所有依赖的第三方库。\r\n此外还需要修改brpc的cmake链接选项。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525154163/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525159009","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-525159009","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":525159009,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE1OTAwOQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T06:30:38Z","updated_at":"2019-08-27T06:30:38Z","author_association":"CONTRIBUTOR","body":"@nxtreaming 静态链接和-fPIC零关系。\r\n@hongbshi 狭义地说，编译和链接是两个过程，这里的日志告诉你链接时找不到符号，那就是顾名思义，没有链到对应的lib，要么没有加上那个lib(-l)，要么路径不对(-L)。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525159009/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525184422","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-525184422","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":525184422,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTE4NDQyMg==","user":{"login":"iamchxj","id":19329921,"node_id":"MDQ6VXNlcjE5MzI5OTIx","avatar_url":"https://avatars.githubusercontent.com/u/19329921?v=4","gravatar_id":"","url":"https://api.github.com/users/iamchxj","html_url":"https://github.com/iamchxj","followers_url":"https://api.github.com/users/iamchxj/followers","following_url":"https://api.github.com/users/iamchxj/following{/other_user}","gists_url":"https://api.github.com/users/iamchxj/gists{/gist_id}","starred_url":"https://api.github.com/users/iamchxj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamchxj/subscriptions","organizations_url":"https://api.github.com/users/iamchxj/orgs","repos_url":"https://api.github.com/users/iamchxj/repos","events_url":"https://api.github.com/users/iamchxj/events{/privacy}","received_events_url":"https://api.github.com/users/iamchxj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T07:51:33Z","updated_at":"2019-08-27T07:51:33Z","author_association":"NONE","body":"昨天的没有了，我今天在同样的地方构造了死锁，但是今天的除了其中3个frame可以看到报错之外其他的frame都没有任何输出了。\r\n\r\n下面有bthread_list的结果以及bthread_frame和bthread_meta的输出信息\r\n\r\n```\r\n(gdb) bthread_list \r\nid      tid     function total:10\r\n#0      4294969600      0x96ede0 <brpc::GlobalUpdate(void*)>\r\n#1      4294969601      0x8c6900 <mds::LBAGarbageProc::thread_fn(void*)>\r\n#2      4294969602      0xa2b660 <brpc::SocketMap::RunWatchConnections(void*)>\r\n#3      4294969603      0x96e850 <brpc::EventDispatcher::RunThis(void*)>\r\n#4      4294969604      0xa10940 <brpc::Server::UpdateDerivedVars(void*)>\r\n#5      12884904449     0xa1f2a0 <brpc::Socket::ProcessEvent(void*)>\r\n#6      8589941249      0x977510 <brpc::ProcessInputMessage(void*)>\r\n#7      4294973954      0x8eb770 <mds::SITCache::update_sit_container(void*)>\r\n#8      4294973957      0x977510 <brpc::ProcessInputMessage(void*)>\r\n#9      4294973958      0x977510 <brpc::ProcessInputMessage(void*)>\r\n\r\n(gdb) bthread_frame 0\r\nPython Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x100000007: \r\nError occurred in Python command: Cannot access memory at address 0x100000007\r\n(gdb) bthread_frame 1\r\n(gdb) bthread_frame 2\r\nPython Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x8: \r\nError occurred in Python command: Cannot access memory at address 0x8\r\n(gdb) bthread_frame 3\r\nPython Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x8: \r\nError occurred in Python command: Cannot access memory at address 0x8\r\n(gdb) bthread_frame 4\r\n(gdb) bthread_frame 5\r\n(gdb) bthread_frame 6\r\n(gdb) bthread_frame 7\r\n(gdb) bthread_frame 8\r\n(gdb) bthread_frame 9\r\n(gdb) \r\n\r\n(gdb) bthread_meta 0\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 8589935890, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x367c800, tid = 4294969600, fn = 0x96ede0 <brpc::GlobalUpdate(void*)>, arg = 0x0, stack = 0x34f0b00, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772045948636962, stat = {cputime_ns = 446514, nswitch = 18}, local_storage = {keytable = 0x0, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 1\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x367ca40, tid = 4294969601, fn = 0x8c6900 <mds::LBAGarbageProc::thread_fn(void*)>, arg = 0x344f5e8, stack = 0x34f0b28, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772045949769170, stat = {cputime_ns = 0, nswitch = 0}, local_storage = {keytable = 0x0, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 2\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 8589936146, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x367ca80, tid = 4294969602, fn = 0xa2b660 <brpc::SocketMap::RunWatchConnections(void*)>, arg = 0x32caa50, stack = 0x34f2c00, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772045951715982, stat = {cputime_ns = 209589, nswitch = 18}, local_storage = {keytable = 0x0, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 3\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x367d800, tid = 4294969603, fn = 0x96e850 <brpc::EventDispatcher::RunThis(void*)>, arg = 0x34f6208, stack = 0x3e8a000, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772045959472239, stat = {cputime_ns = 2857446521, nswitch = 7}, local_storage = {keytable = 0x0, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 4\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 8589936402, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x367d840, tid = 4294969604, fn = 0xa10940 <brpc::Server::UpdateDerivedVars(void*)>, arg = 0x7fffea07e680, stack = 0x3e90000, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772045959486570, stat = {cputime_ns = 7087921, nswitch = 18}, local_storage = {keytable = 0x0, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 5\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x7f8df213ce00}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x3ca41c0, tid = 4294974466, fn = 0x8eb770 <mds::SITCache::update_sit_container(void*)>, arg = 0x40e0ce0, stack = 0x3e94d00, attr = {stack_type = 3, flags = 0, keytable_pool = 0x0}, cpuwide_start_ns = 772048607359328, stat = {cputime_ns = 2741907, nswitch = 147}, local_storage = {keytable = 0x41a2a00, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 6\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x3ca6440, tid = 4294974721, fn = 0xa1f2a0 <brpc::Socket::ProcessEvent(void*)>, arg = 0x4022000, stack = 0x3e92128, attr = {stack_type = 3, flags = 0, keytable_pool = 0x34f69c0}, cpuwide_start_ns = 772048817406440, stat = {cputime_ns = 0, nswitch = 0}, local_storage = {keytable = 0x3b29d00, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n\r\n(gdb) bthread_meta 7\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x7f8df4d45ac0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x3ca6480, tid = 4294974722, fn = 0x977510 <brpc::ProcessInputMessage(void*)>, arg = 0x4d00000, stack = 0x3e92c00, attr = {stack_type = 3, flags = 32, keytable_pool = 0x34f69c0}, cpuwide_start_ns = 772048817466559, stat = {cputime_ns = 52994, nswitch = 1}, local_storage = {keytable = 0x3b28700, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 8\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x3ca64c0, tid = 4294974723, fn = 0x977510 <brpc::ProcessInputMessage(void*)>, arg = 0x4d00080, stack = 0x3e92c28, attr = {stack_type = 3, flags = 32, keytable_pool = 0x34f69c0}, cpuwide_start_ns = 772048817468086, stat = {cputime_ns = 0, nswitch = 0}, local_storage = {keytable = 0x41a2f00, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n(gdb) bthread_meta 9\r\n{current_waiter = {<std::atomic<bthread::ButexWaiter*>> = {_M_b = {_M_p = 0x0}}, <No data fields>}, current_sleep = 0, stop = false, interrupted = false, about_to_quit = false, version_lock = 1, version_butex = 0x3ca6500, tid = 4294974724, fn = 0x977510 <brpc::ProcessInputMessage(void*)>, arg = 0x4d00100, stack = 0x3e8cc00, attr = {stack_type = 3, flags = 32, keytable_pool = 0x34f69c0}, cpuwide_start_ns = 772048817477545, stat = {cputime_ns = 0, nswitch = 0}, local_storage = {keytable = 0x3727800, assigned_data = 0x0, rpcz_parent_span = 0x0}}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525184422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525210259","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-525210259","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":525210259,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNTIxMDI1OQ==","user":{"login":"hnwyllmm","id":5187215,"node_id":"MDQ6VXNlcjUxODcyMTU=","avatar_url":"https://avatars.githubusercontent.com/u/5187215?v=4","gravatar_id":"","url":"https://api.github.com/users/hnwyllmm","html_url":"https://github.com/hnwyllmm","followers_url":"https://api.github.com/users/hnwyllmm/followers","following_url":"https://api.github.com/users/hnwyllmm/following{/other_user}","gists_url":"https://api.github.com/users/hnwyllmm/gists{/gist_id}","starred_url":"https://api.github.com/users/hnwyllmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hnwyllmm/subscriptions","organizations_url":"https://api.github.com/users/hnwyllmm/orgs","repos_url":"https://api.github.com/users/hnwyllmm/repos","events_url":"https://api.github.com/users/hnwyllmm/events{/privacy}","received_events_url":"https://api.github.com/users/hnwyllmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-27T09:01:32Z","updated_at":"2019-08-27T09:01:32Z","author_association":"NONE","body":"@hongbshi  可以把Makefile执行链接的命令发出来","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/525210259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526008674","html_url":"https://github.com/apache/brpc/issues/905#issuecomment-526008674","issue_url":"https://api.github.com/repos/apache/brpc/issues/905","id":526008674,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjAwODY3NA==","user":{"login":"hongbshi","id":42710460,"node_id":"MDQ6VXNlcjQyNzEwNDYw","avatar_url":"https://avatars.githubusercontent.com/u/42710460?v=4","gravatar_id":"","url":"https://api.github.com/users/hongbshi","html_url":"https://github.com/hongbshi","followers_url":"https://api.github.com/users/hongbshi/followers","following_url":"https://api.github.com/users/hongbshi/following{/other_user}","gists_url":"https://api.github.com/users/hongbshi/gists{/gist_id}","starred_url":"https://api.github.com/users/hongbshi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hongbshi/subscriptions","organizations_url":"https://api.github.com/users/hongbshi/orgs","repos_url":"https://api.github.com/users/hongbshi/repos","events_url":"https://api.github.com/users/hongbshi/events{/privacy}","received_events_url":"https://api.github.com/users/hongbshi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-29T03:45:25Z","updated_at":"2019-08-29T03:45:25Z","author_association":"NONE","body":"非常感谢。现在可以了, 使用libbrpc.a链接时把leveldb, gflags, protobuf全部链接动态库就可以了。用静态链接是因为不想每台机器都安装这三个依赖。后面我试了下, libbrpc.a链接leveldb, gflags, protobuf的静态库时, 需要把这三个库的依赖也链接上去, 都链接了也可以成功了。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526008674/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526454288","html_url":"https://github.com/apache/brpc/issues/907#issuecomment-526454288","issue_url":"https://api.github.com/repos/apache/brpc/issues/907","id":526454288,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjQ1NDI4OA==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T04:49:52Z","updated_at":"2019-08-30T04:49:52Z","author_association":"MEMBER","body":"grpc-go客户端默认就是HTTP2，”h2:grpc”是给brpc client设置用的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526454288/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526455376","html_url":"https://github.com/apache/brpc/issues/908#issuecomment-526455376","issue_url":"https://api.github.com/repos/apache/brpc/issues/908","id":526455376,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjQ1NTM3Ng==","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T04:56:28Z","updated_at":"2019-08-30T04:56:28Z","author_association":"MEMBER","body":"[SelectiveChannel](https://github.com/apache/incubator-brpc/blob/master/docs/cn/combo_channel.md#selectivechannel) 能满足你的场景么","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526455376/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526516712","html_url":"https://github.com/apache/brpc/issues/908#issuecomment-526516712","issue_url":"https://api.github.com/repos/apache/brpc/issues/908","id":526516712,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjUxNjcxMg==","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T08:44:00Z","updated_at":"2019-08-30T08:44:00Z","author_association":"CONTRIBUTOR","body":"> [SelectiveChannel](https://github.com/apache/incubator-brpc/blob/master/docs/cn/combo_channel.md#selectivechannel) 能满足你的场景么\r\n\r\n和SelectiveChannel不完全一样，这里负载均衡还是希望在所有实例间做负载均衡（可能是RR、WRR、LA等），但是SelectiveChannel把负载均衡变成了两层，效果就不一样了，特别是不同组的实例数量不同的情况。而且这个会拆出很多NS，这个组的数量可能会动态变化，这些情况处理起来比较复杂。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526516712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526563196","html_url":"https://github.com/apache/brpc/issues/908#issuecomment-526563196","issue_url":"https://api.github.com/repos/apache/brpc/issues/908","id":526563196,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjU2MzE5Ng==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T11:15:18Z","updated_at":"2019-08-30T11:15:18Z","author_association":"CONTRIBUTOR","body":"SelectiveChannel是考虑了实例数不同这个问题的，不同的组有不同“weight\"。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526563196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526563995","html_url":"https://github.com/apache/brpc/pull/912#issuecomment-526563995","issue_url":"https://api.github.com/repos/apache/brpc/issues/912","id":526563995,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjU2Mzk5NQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T11:18:47Z","updated_at":"2019-08-30T11:18:47Z","author_association":"CONTRIBUTOR","body":"thanks for the corrections~","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526563995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526575081","html_url":"https://github.com/apache/brpc/issues/909#issuecomment-526575081","issue_url":"https://api.github.com/repos/apache/brpc/issues/909","id":526575081,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjU3NTA4MQ==","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-30T12:01:45Z","updated_at":"2019-08-30T12:01:45Z","author_association":"CONTRIBUTOR","body":"This is a bug. Thanks a lot.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526575081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526878659","html_url":"https://github.com/apache/brpc/issues/690#issuecomment-526878659","issue_url":"https://api.github.com/repos/apache/brpc/issues/690","id":526878659,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjg3ODY1OQ==","user":{"login":"loginhel","id":14918453,"node_id":"MDQ6VXNlcjE0OTE4NDUz","avatar_url":"https://avatars.githubusercontent.com/u/14918453?v=4","gravatar_id":"","url":"https://api.github.com/users/loginhel","html_url":"https://github.com/loginhel","followers_url":"https://api.github.com/users/loginhel/followers","following_url":"https://api.github.com/users/loginhel/following{/other_user}","gists_url":"https://api.github.com/users/loginhel/gists{/gist_id}","starred_url":"https://api.github.com/users/loginhel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/loginhel/subscriptions","organizations_url":"https://api.github.com/users/loginhel/orgs","repos_url":"https://api.github.com/users/loginhel/repos","events_url":"https://api.github.com/users/loginhel/events{/privacy}","received_events_url":"https://api.github.com/users/loginhel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-01T01:47:54Z","updated_at":"2019-09-01T01:47:54Z","author_association":"NONE","body":"同问，编译所有使用DBRPC_ENABLE_CPU_PROFILER的程序，运行都会报Check failed: !internal_init_start_has_run: Heap-check constructor called twice.  Perhaps you both linked in the heap checker, and also used LD_PRELOAD to load it?\r\n只能关掉这个然后取消连接GPERFTOOLS_LIBRARIES才可以正常运行。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526878659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526888503","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-526888503","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":526888503,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNjg4ODUwMw==","user":{"login":"altman08","id":12977319,"node_id":"MDQ6VXNlcjEyOTc3MzE5","avatar_url":"https://avatars.githubusercontent.com/u/12977319?v=4","gravatar_id":"","url":"https://api.github.com/users/altman08","html_url":"https://github.com/altman08","followers_url":"https://api.github.com/users/altman08/followers","following_url":"https://api.github.com/users/altman08/following{/other_user}","gists_url":"https://api.github.com/users/altman08/gists{/gist_id}","starred_url":"https://api.github.com/users/altman08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altman08/subscriptions","organizations_url":"https://api.github.com/users/altman08/orgs","repos_url":"https://api.github.com/users/altman08/repos","events_url":"https://api.github.com/users/altman08/events{/privacy}","received_events_url":"https://api.github.com/users/altman08/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-01T05:32:26Z","updated_at":"2019-09-01T05:32:26Z","author_association":"NONE","body":"我也遇到了这个问题，bthread好多单元测试过不去。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/526888503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527049709","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-527049709","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":527049709,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzA0OTcwOQ==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T08:15:19Z","updated_at":"2019-09-02T08:15:19Z","author_association":"NONE","body":"编译不过去只是有些地方变量类型与变量之间没空格，修改一下，对于context.cpp中两个线程上下文切换的可以参考github里面libcontext库相应的修改为arch64\r\n\r\n\r\n发自我的iPhone\r\n\r\n------------------ 原始邮件 ------------------\r\n发件人: altman08 <notifications@github.com&gt;\r\n发送时间: 2019年9月1日 13:33\r\n收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com&gt;\r\n抄送: x-x-p <x_x_p@qq.com&gt;, Author <author@noreply.github.com&gt;\r\n主题: 回复：[apache/incubator-brpc] 在aarch64下编译之后，运行会触发 LOG(FATAL) << \"bthread=\" << g-&gt;current_tid() << \" sched_to itself!\"; 请问下哪种情况下会有这个情况？ (#845)\r\n\r\n\r\n\r\n\r\n我也遇到了这个问题，bthread好多单元测试过不去。\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or mute the thread.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527049709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527082661","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-527082661","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":527082661,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzA4MjY2MQ==","user":{"login":"altman08","id":12977319,"node_id":"MDQ6VXNlcjEyOTc3MzE5","avatar_url":"https://avatars.githubusercontent.com/u/12977319?v=4","gravatar_id":"","url":"https://api.github.com/users/altman08","html_url":"https://github.com/altman08","followers_url":"https://api.github.com/users/altman08/followers","following_url":"https://api.github.com/users/altman08/following{/other_user}","gists_url":"https://api.github.com/users/altman08/gists{/gist_id}","starred_url":"https://api.github.com/users/altman08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altman08/subscriptions","organizations_url":"https://api.github.com/users/altman08/orgs","repos_url":"https://api.github.com/users/altman08/repos","events_url":"https://api.github.com/users/altman08/events{/privacy}","received_events_url":"https://api.github.com/users/altman08/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T09:48:20Z","updated_at":"2019-09-02T09:48:20Z","author_association":"NONE","body":"> 编译不过去只是有些地方变量类型与变量之间没空格，修改一下，对于context.cpp中两个线程上下文切换的可以参考github里面libcontext库相应的修改为arch64 发自我的iPhone\r\n> […](#)\r\n> ------------------ 原始邮件 ------------------ 发件人: altman08 <notifications@github.com&gt; 发送时间: 2019年9月1日 13:33 收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com&gt; 抄送: x-x-p <x_x_p@qq.com&gt;, Author <author@noreply.github.com&gt; 主题: 回复：[apache/incubator-brpc] 在aarch64下编译之后，运行会触发 LOG(FATAL) << \"bthread=\" << g-&gt;current_tid() << \" sched_to itself!\"; 请问下哪种情况下会有这个情况？ (#845) 我也遇到了这个问题，bthread好多单元测试过不去。 — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub, or mute the thread.\r\n\r\n不是编译不过，是编过了单元测试过不了，bthead切换会间歇性core","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527082661/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527105974","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-527105974","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":527105974,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzEwNTk3NA==","user":{"login":"x-x-p","id":49055325,"node_id":"MDQ6VXNlcjQ5MDU1MzI1","avatar_url":"https://avatars.githubusercontent.com/u/49055325?v=4","gravatar_id":"","url":"https://api.github.com/users/x-x-p","html_url":"https://github.com/x-x-p","followers_url":"https://api.github.com/users/x-x-p/followers","following_url":"https://api.github.com/users/x-x-p/following{/other_user}","gists_url":"https://api.github.com/users/x-x-p/gists{/gist_id}","starred_url":"https://api.github.com/users/x-x-p/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/x-x-p/subscriptions","organizations_url":"https://api.github.com/users/x-x-p/orgs","repos_url":"https://api.github.com/users/x-x-p/repos","events_url":"https://api.github.com/users/x-x-p/events{/privacy}","received_events_url":"https://api.github.com/users/x-x-p/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T11:02:35Z","updated_at":"2019-09-02T11:02:35Z","author_association":"NONE","body":"😂去掉编译器优化 debug模式能正常使用\r\n\r\n\r\n发自我的iPhone\r\n\r\n------------------ 原始邮件 ------------------\r\n发件人: altman08 <notifications@github.com&gt;\r\n发送时间: 2019年9月2日 17:49\r\n收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com&gt;\r\n抄送: x-x-p <x_x_p@qq.com&gt;, Author <author@noreply.github.com&gt;\r\n主题: 回复：[apache/incubator-brpc] 在aarch64下编译之后，运行会触发 LOG(FATAL) << \"bthread=\" << g-&gt;current_tid() << \" sched_to itself!\"; 请问下哪种情况下会有这个情况？ (#845)\r\n\r\n\r\n\r\n \r\n编译不过去只是有些地方变量类型与变量之间没空格，修改一下，对于context.cpp中两个线程上下文切换的可以参考github里面libcontext库相应的修改为arch64 发自我的iPhone\r\n …\r\n ------------------ 原始邮件 ------------------ 发件人: altman08 <notifications@github.com&gt; 发送时间: 2019年9月1日 13:33 收件人: apache/incubator-brpc <incubator-brpc@noreply.github.com&gt; 抄送: x-x-p <x_x_p@qq.com&gt;, Author <author@noreply.github.com&gt; 主题: 回复：[apache/incubator-brpc] 在aarch64下编译之后，运行会触发 LOG(FATAL) << \"bthread=\" << g-&gt;current_tid() << \" sched_to itself!\"; 请问下哪种情况下会有这个情况？ (#845) 我也遇到了这个问题，bthread好多单元测试过不去。 — You are receiving this because you authored the thread. Reply to this email directly, view it on GitHub, or mute the thread.\r\n  \r\n不是编译不过，是编过了单元测试过不了，bthead切换会间歇性core\r\n \r\n—\r\nYou are receiving this because you authored the thread.\r\nReply to this email directly, view it on GitHub, or mute the thread.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527105974/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527156350","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-527156350","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":527156350,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzE1NjM1MA==","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-02T13:53:47Z","updated_at":"2019-09-02T13:53:47Z","author_association":"CONTRIBUTOR","body":"禁用gcse优化就可以了：-fno-gcse","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527156350/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527336351","html_url":"https://github.com/apache/brpc/issues/901#issuecomment-527336351","issue_url":"https://api.github.com/repos/apache/brpc/issues/901","id":527336351,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzMzNjM1MQ==","user":{"login":"NetWilliam","id":3966971,"node_id":"MDQ6VXNlcjM5NjY5NzE=","avatar_url":"https://avatars.githubusercontent.com/u/3966971?v=4","gravatar_id":"","url":"https://api.github.com/users/NetWilliam","html_url":"https://github.com/NetWilliam","followers_url":"https://api.github.com/users/NetWilliam/followers","following_url":"https://api.github.com/users/NetWilliam/following{/other_user}","gists_url":"https://api.github.com/users/NetWilliam/gists{/gist_id}","starred_url":"https://api.github.com/users/NetWilliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NetWilliam/subscriptions","organizations_url":"https://api.github.com/users/NetWilliam/orgs","repos_url":"https://api.github.com/users/NetWilliam/repos","events_url":"https://api.github.com/users/NetWilliam/events{/privacy}","received_events_url":"https://api.github.com/users/NetWilliam/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-03T07:17:12Z","updated_at":"2019-09-03T07:17:12Z","author_association":"NONE","body":"找到原因了, 因为我的系统上装了几个版本的protobuf 这个链接链接到了老的版本, 删掉就好了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527336351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527785674","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-527785674","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":527785674,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzc4NTY3NA==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T07:48:52Z","updated_at":"2019-09-04T07:48:52Z","author_association":"CONTRIBUTOR","body":"gdb是什么版本呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527785674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527786579","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-527786579","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":527786579,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzc4NjU3OQ==","user":{"login":"iamchxj","id":19329921,"node_id":"MDQ6VXNlcjE5MzI5OTIx","avatar_url":"https://avatars.githubusercontent.com/u/19329921?v=4","gravatar_id":"","url":"https://api.github.com/users/iamchxj","html_url":"https://github.com/iamchxj","followers_url":"https://api.github.com/users/iamchxj/followers","following_url":"https://api.github.com/users/iamchxj/following{/other_user}","gists_url":"https://api.github.com/users/iamchxj/gists{/gist_id}","starred_url":"https://api.github.com/users/iamchxj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamchxj/subscriptions","organizations_url":"https://api.github.com/users/iamchxj/orgs","repos_url":"https://api.github.com/users/iamchxj/repos","events_url":"https://api.github.com/users/iamchxj/events{/privacy}","received_events_url":"https://api.github.com/users/iamchxj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T07:51:42Z","updated_at":"2019-09-04T07:51:42Z","author_association":"NONE","body":"GNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-100.el7\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\n\r\nGDB这个版本的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527786579/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527947433","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-527947433","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":527947433,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk0NzQzMw==","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T15:14:32Z","updated_at":"2019-09-04T15:14:32Z","author_association":"CONTRIBUTOR","body":"brpc的版本呢","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527947433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527959593","html_url":"https://github.com/apache/brpc/issues/900#issuecomment-527959593","issue_url":"https://api.github.com/repos/apache/brpc/issues/900","id":527959593,"node_id":"MDEyOklzc3VlQ29tbWVudDUyNzk1OTU5Mw==","user":{"login":"iamchxj","id":19329921,"node_id":"MDQ6VXNlcjE5MzI5OTIx","avatar_url":"https://avatars.githubusercontent.com/u/19329921?v=4","gravatar_id":"","url":"https://api.github.com/users/iamchxj","html_url":"https://github.com/iamchxj","followers_url":"https://api.github.com/users/iamchxj/followers","following_url":"https://api.github.com/users/iamchxj/following{/other_user}","gists_url":"https://api.github.com/users/iamchxj/gists{/gist_id}","starred_url":"https://api.github.com/users/iamchxj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iamchxj/subscriptions","organizations_url":"https://api.github.com/users/iamchxj/orgs","repos_url":"https://api.github.com/users/iamchxj/repos","events_url":"https://api.github.com/users/iamchxj/events{/privacy}","received_events_url":"https://api.github.com/users/iamchxj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-04T15:42:41Z","updated_at":"2019-09-04T15:42:41Z","author_association":"NONE","body":"用的release 0.9.5","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/527959593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/529112949","html_url":"https://github.com/apache/brpc/issues/845#issuecomment-529112949","issue_url":"https://api.github.com/repos/apache/brpc/issues/845","id":529112949,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTExMjk0OQ==","user":{"login":"altman08","id":12977319,"node_id":"MDQ6VXNlcjEyOTc3MzE5","avatar_url":"https://avatars.githubusercontent.com/u/12977319?v=4","gravatar_id":"","url":"https://api.github.com/users/altman08","html_url":"https://github.com/altman08","followers_url":"https://api.github.com/users/altman08/followers","following_url":"https://api.github.com/users/altman08/following{/other_user}","gists_url":"https://api.github.com/users/altman08/gists{/gist_id}","starred_url":"https://api.github.com/users/altman08/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/altman08/subscriptions","organizations_url":"https://api.github.com/users/altman08/orgs","repos_url":"https://api.github.com/users/altman08/repos","events_url":"https://api.github.com/users/altman08/events{/privacy}","received_events_url":"https://api.github.com/users/altman08/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-07T14:27:55Z","updated_at":"2019-09-07T14:27:55Z","author_association":"NONE","body":"禁用gcse优化，bthread的单测可以通过了，切换也没有遇到core问题了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/529112949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/529959327","html_url":"https://github.com/apache/brpc/issues/920#issuecomment-529959327","issue_url":"https://api.github.com/repos/apache/brpc/issues/920","id":529959327,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTk1OTMyNw==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-10T14:22:46Z","updated_at":"2019-09-10T14:22:46Z","author_association":"CONTRIBUTOR","body":"https://github.com/apache/incubator-brpc/blob/master/docs/cn/getting_started.md#protobuf-24","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/529959327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/530670259","html_url":"https://github.com/apache/brpc/issues/921#issuecomment-530670259","issue_url":"https://api.github.com/repos/apache/brpc/issues/921","id":530670259,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDY3MDI1OQ==","user":{"login":"jamesge","id":6566535,"node_id":"MDQ6VXNlcjY1NjY1MzU=","avatar_url":"https://avatars.githubusercontent.com/u/6566535?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesge","html_url":"https://github.com/jamesge","followers_url":"https://api.github.com/users/jamesge/followers","following_url":"https://api.github.com/users/jamesge/following{/other_user}","gists_url":"https://api.github.com/users/jamesge/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesge/subscriptions","organizations_url":"https://api.github.com/users/jamesge/orgs","repos_url":"https://api.github.com/users/jamesge/repos","events_url":"https://api.github.com/users/jamesge/events{/privacy}","received_events_url":"https://api.github.com/users/jamesge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T05:26:05Z","updated_at":"2019-09-12T05:26:05Z","author_association":"CONTRIBUTOR","body":"看下 https://github.com/apache/incubator-brpc/blob/master/docs/cn/bvar.md#%E7%9B%91%E6%8E%A7bvar","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/530670259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/530677682","html_url":"https://github.com/apache/brpc/issues/921#issuecomment-530677682","issue_url":"https://api.github.com/repos/apache/brpc/issues/921","id":530677682,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMDY3NzY4Mg==","user":{"login":"fliage","id":20479939,"node_id":"MDQ6VXNlcjIwNDc5OTM5","avatar_url":"https://avatars.githubusercontent.com/u/20479939?v=4","gravatar_id":"","url":"https://api.github.com/users/fliage","html_url":"https://github.com/fliage","followers_url":"https://api.github.com/users/fliage/followers","following_url":"https://api.github.com/users/fliage/following{/other_user}","gists_url":"https://api.github.com/users/fliage/gists{/gist_id}","starred_url":"https://api.github.com/users/fliage/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fliage/subscriptions","organizations_url":"https://api.github.com/users/fliage/orgs","repos_url":"https://api.github.com/users/fliage/repos","events_url":"https://api.github.com/users/fliage/events{/privacy}","received_events_url":"https://api.github.com/users/fliage/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-12T05:58:38Z","updated_at":"2019-09-12T05:58:38Z","author_association":"NONE","body":"就是说需要额外的监控程序去定期汇总每台机器导出的文件，brpc本身的监控页面只能显示单机的指标，对吧？多谢指教","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/530677682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/531625400","html_url":"https://github.com/apache/brpc/issues/688#issuecomment-531625400","issue_url":"https://api.github.com/repos/apache/brpc/issues/688","id":531625400,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMTYyNTQwMA==","user":{"login":"hairet","id":7167017,"node_id":"MDQ6VXNlcjcxNjcwMTc=","avatar_url":"https://avatars.githubusercontent.com/u/7167017?v=4","gravatar_id":"","url":"https://api.github.com/users/hairet","html_url":"https://github.com/hairet","followers_url":"https://api.github.com/users/hairet/followers","following_url":"https://api.github.com/users/hairet/following{/other_user}","gists_url":"https://api.github.com/users/hairet/gists{/gist_id}","starred_url":"https://api.github.com/users/hairet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hairet/subscriptions","organizations_url":"https://api.github.com/users/hairet/orgs","repos_url":"https://api.github.com/users/hairet/repos","events_url":"https://api.github.com/users/hairet/events{/privacy}","received_events_url":"https://api.github.com/users/hairet/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-16T02:38:07Z","updated_at":"2019-09-16T02:38:07Z","author_association":"NONE","body":"bthread_cond_wait里面会判断ic->seq,即如果ic->seq被fetch_add了，则存在一个可能性是wait的bthread在butex_wait里面还未进入代码阻塞（pthread的butex_wait_from_pthread或者bthread的sched），已经因为expected_value被改变而直接退出bthread_cond_wait。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/531625400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532081507","html_url":"https://github.com/apache/brpc/pull/760#issuecomment-532081507","issue_url":"https://api.github.com/repos/apache/brpc/issues/760","id":532081507,"node_id":"MDEyOklzc3VlQ29tbWVudDUzMjA4MTUwNw==","user":{"login":"cdjingit","id":31362185,"node_id":"MDQ6VXNlcjMxMzYyMTg1","avatar_url":"https://avatars.githubusercontent.com/u/31362185?v=4","gravatar_id":"","url":"https://api.github.com/users/cdjingit","html_url":"https://github.com/cdjingit","followers_url":"https://api.github.com/users/cdjingit/followers","following_url":"https://api.github.com/users/cdjingit/following{/other_user}","gists_url":"https://api.github.com/users/cdjingit/gists{/gist_id}","starred_url":"https://api.github.com/users/cdjingit/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cdjingit/subscriptions","organizations_url":"https://api.github.com/users/cdjingit/orgs","repos_url":"https://api.github.com/users/cdjingit/repos","events_url":"https://api.github.com/users/cdjingit/events{/privacy}","received_events_url":"https://api.github.com/users/cdjingit/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-17T06:34:05Z","updated_at":"2019-09-17T06:34:05Z","author_association":"CONTRIBUTOR","body":"> 添加了mysql的prepared statement协议的支持。\r\n> 遇到的两个问题解决方案如下：\r\n> 1、prepared statement首先是在某个连接上创建一个statement id，后续操作可以根据这个statement id向这个连接发送后续的请求。同一个语句在每个连接上的statement id是不同的。在pooled模式下，每次RPC选择的连接是不同的，所以需要记录SocketId和statement id的关系，我们这里称为id_map。但是一个SocketId有可能关闭，然后又重新建立起来，这个新SocketId对应的连接没有这个statement id。id_map没有机制可以做到同步更新，保存的SocketId与statement id关系信息是旧的关系。这样就会产生问题。\r\n> 这个问题的修改方式是，给socketid对应的fd一个唯一的版本号，每次通过stmt_id找到socketid的时候对比一下版本号，版本号一致说明fd没有变化，版本号不一致说明fd变化过。\r\n> 2、目前还不能支持single模式，唯一的原因就是auth部分，正常auth多个请求会竞争发送auth，后续操作就不需要发送auth了，auth不用等待服务端应答，就可以让其他请求继续发送。但是mysql的auth和这个逻辑不通，mysql的auth首先接收mysql-server发送过来的salt，客户端根据salt加密密码，再把加密后的密码发送给服务端。这样的逻辑如果不等待服务端应答就解锁别的请求，就会出现发送auth的请求落后于正常的请求，导致消息乱序。\r\n> 这个目前就先不支持single模式了。\r\n1. statement id是和连接相关的？还是和地址相关，即同一个地址不同的连接可以用一个statement id？\r\n2. single模式的认证过程的问题，我在开发cql协议的时候也遇到了，解决放案如下：\r\n在认证交互流程完成前，业务请求包先累积在buf里，等认证完成再一起发送出去。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/532081507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]