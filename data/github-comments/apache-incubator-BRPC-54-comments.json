[{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318247334","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1318247334","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1318247334,"node_id":"IC_kwDOBhmkcs5Oktum","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T08:10:31Z","updated_at":"2022-11-17T08:10:31Z","author_association":"CONTRIBUTOR","body":"@Tuvie We use `append_user_data` in tensorflow's `AsyncOpKernel::ComputeAsync`. The memory comes from tensor in TensorFlow OP. It's allocated by the framework on each run.\r\nWe could use `IOBuf::append`, but `append` introduces an extra copy.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318247334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318269408","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1318269408","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1318269408,"node_id":"IC_kwDOBhmkcs5OkzHg","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T08:31:52Z","updated_at":"2022-11-17T08:31:52Z","author_association":"CONTRIBUTOR","body":"> @Tuvie We use `append_user_data` in tensorflow's `AsyncOpKernel::ComputeAsync`. The memory comes from tensor in TensorFlow OP. It's allocated by the framework on each run. We could use `IOBuf::append`, but `append` introduces an extra copy.\r\n\r\nSo what do you think if we add a new parameter for append_user_data function to specify the lkey directly? In this case we don't need to lookup the lkey in an inefficient way. But you have to manage the lkey as a corresponding buffer id by yourself.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318269408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318280013","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1318280013","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1318280013,"node_id":"IC_kwDOBhmkcs5Ok1tN","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T08:40:59Z","updated_at":"2022-11-17T08:40:59Z","author_association":"CONTRIBUTOR","body":"Yes, we can manage `LKey`. Does adding parameter to `append_user_data ` breaks backward compatibility?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318280013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318291576","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1318291576","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1318291576,"node_id":"IC_kwDOBhmkcs5Ok4h4","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T08:50:28Z","updated_at":"2022-11-17T08:50:28Z","author_association":"CONTRIBUTOR","body":"> Yes, we can manage `LKey`. Does adding parameter to `append_user_data ` breaks backward compatibility?\r\n\r\nYes. Must try to keep the ABI compatibility. But I think it is a better way to solve this problem. Because application has more information than brpc so that the overall efficiency will be higher.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318291576/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318310432","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1318310432","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1318310432,"node_id":"IC_kwDOBhmkcs5Ok9Ig","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T09:05:57Z","updated_at":"2022-11-17T09:05:57Z","author_association":"NONE","body":"有没有办法在低压力下提供低延时又在高压力下高吞吐。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1318310432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319702633","html_url":"https://github.com/apache/brpc/pull/2003#issuecomment-1319702633","issue_url":"https://api.github.com/repos/apache/brpc/issues/2003","id":1319702633,"node_id":"IC_kwDOBhmkcs5OqRBp","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T08:40:57Z","updated_at":"2022-11-18T08:40:57Z","author_association":"CONTRIBUTOR","body":"@changchengx Do you have any problem using memset ? (eg. compile error or unexpected behavior at runtime)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319702633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319715850","html_url":"https://github.com/apache/brpc/pull/2003#issuecomment-1319715850","issue_url":"https://api.github.com/repos/apache/brpc/issues/2003","id":1319715850,"node_id":"IC_kwDOBhmkcs5OqUQK","user":{"login":"changchengx","id":19362263,"node_id":"MDQ6VXNlcjE5MzYyMjYz","avatar_url":"https://avatars.githubusercontent.com/u/19362263?v=4","gravatar_id":"","url":"https://api.github.com/users/changchengx","html_url":"https://github.com/changchengx","followers_url":"https://api.github.com/users/changchengx/followers","following_url":"https://api.github.com/users/changchengx/following{/other_user}","gists_url":"https://api.github.com/users/changchengx/gists{/gist_id}","starred_url":"https://api.github.com/users/changchengx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changchengx/subscriptions","organizations_url":"https://api.github.com/users/changchengx/orgs","repos_url":"https://api.github.com/users/changchengx/repos","events_url":"https://api.github.com/users/changchengx/events{/privacy}","received_events_url":"https://api.github.com/users/changchengx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T08:55:41Z","updated_at":"2022-11-18T08:55:41Z","author_association":"NONE","body":"@wwbmmm No. From semantic perspective, memset doesn't consider variable type at all and guarantee atomic operation.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319715850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319777273","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1319777273","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1319777273,"node_id":"IC_kwDOBhmkcs5OqjP5","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-18T09:54:26Z","updated_at":"2022-11-18T09:54:26Z","author_association":"CONTRIBUTOR","body":"Maybe another interface `append_user_data_ib` :)","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1319777273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1320817221","html_url":"https://github.com/apache/brpc/pull/1996#issuecomment-1320817221","issue_url":"https://api.github.com/repos/apache/brpc/issues/1996","id":1320817221,"node_id":"IC_kwDOBhmkcs5OuhJF","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-19T06:39:12Z","updated_at":"2022-11-19T06:39:12Z","author_association":"MEMBER","body":"> > \r\n> \r\n> Ok, I will try it later.\r\nMac能生效吗？\r\n@Huixxi ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1320817221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1320943345","html_url":"https://github.com/apache/brpc/issues/1997#issuecomment-1320943345","issue_url":"https://api.github.com/repos/apache/brpc/issues/1997","id":1320943345,"node_id":"IC_kwDOBhmkcs5Ou_7x","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-19T18:39:09Z","updated_at":"2022-11-19T18:40:53Z","author_association":"MEMBER","body":"> > 这个是你业务代码抛出了异常，没有catch，异常逃逸到了brpc框架内。\n> \n> \n> \n> 业务代码抛异常为什么会跑到brpc的 SocketDeleter::operator() 函数里呢？\n> \n> 这种堆栈以前也见过，但想不明白为啥会core在这里\n\n```cpp\n\nstruct SocketDeleter {\n    void operator()(Socket* m) const {\n        DereferenceSocket(m);\n    }\n};\n\ntypedef std::unique_ptr<Socket, SocketDeleter> SocketUniquePtr;\n\n```\n因为这个是SocketDeleter的operator()，SocketDeleter是作为unique_ptr的删除器的。会在unique_ptr对象析构的时候调用。而所有析构函数在C++11以后默认是noexcept的。所以当检测到异常的时候，程序立即终止。\n\n\n前几天我没仔细看这个网友的栈信息。如果是core在SocketDeleter的operator()中，应该是Socket::Dereference这个函数抛出了异常。\n我怀疑是这里\n```cpp\n\n        LOG(FATAL) << \"Invalid SocketId=\" << id;\n        return -1;\n    }\n    LOG(FATAL) << \"Over dereferenced SocketId=\" << id;\n\n```\n老问题。当链接了glog的时候，FATAL级别日志，会触发abort抛出异常，导致core。\n@wwbmmm \n\n\n\n请问你们是不是链接了glog？ @vinllen ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1320943345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321032110","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1321032110","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1321032110,"node_id":"IC_kwDOBhmkcs5OvVmu","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T04:06:38Z","updated_at":"2022-11-20T04:06:38Z","author_association":"CONTRIBUTOR","body":"@372046933 Pls try this PR: https://github.com/apache/incubator-brpc/pull/2005\r\n\r\nA new function named append_user_data_with_meta is provided. You should give the lkey returned by RegisterMemoryForRdma as the meta. Pls note that now RegisterMemoryForRdma returns 0 when failed, just contrast to the previous code.\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321032110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321077817","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1321077817","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1321077817,"node_id":"IC_kwDOBhmkcs5Ovgw5","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T09:17:55Z","updated_at":"2022-11-20T09:17:55Z","author_association":"CONTRIBUTOR","body":"Thanks a million. Is `append_user_data_with_meta` in the PR? I couldn't find the definition in https://github.com/apache/incubator-brpc/pull/2005/commits/40a24ab3b5f440d11bfb09c8afb2bc6300157688","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321077817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321134546","html_url":"https://github.com/apache/brpc/pull/1996#issuecomment-1321134546","issue_url":"https://api.github.com/repos/apache/brpc/issues/1996","id":1321134546,"node_id":"IC_kwDOBhmkcs5OvunS","user":{"login":"fansehep","id":75058860,"node_id":"MDQ6VXNlcjc1MDU4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/75058860?v=4","gravatar_id":"","url":"https://api.github.com/users/fansehep","html_url":"https://github.com/fansehep","followers_url":"https://api.github.com/users/fansehep/followers","following_url":"https://api.github.com/users/fansehep/following{/other_user}","gists_url":"https://api.github.com/users/fansehep/gists{/gist_id}","starred_url":"https://api.github.com/users/fansehep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fansehep/subscriptions","organizations_url":"https://api.github.com/users/fansehep/orgs","repos_url":"https://api.github.com/users/fansehep/repos","events_url":"https://api.github.com/users/fansehep/events{/privacy}","received_events_url":"https://api.github.com/users/fansehep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-20T13:35:53Z","updated_at":"2022-11-20T13:35:53Z","author_association":"CONTRIBUTOR","body":"> > \r\n> \r\n> Ok, I will try it later.\r\n\r\n@Huixxi Have you test successful in ```MacOS```?\r\nHere is a simple demo in this pull request.\r\n```bash\r\ncd example/build_with_bazel\r\nbazel build \"...\"\r\n./bazel-bin/test\r\n```\r\nTry this?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321134546/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321346714","html_url":"https://github.com/apache/brpc/issues/1997#issuecomment-1321346714","issue_url":"https://api.github.com/repos/apache/brpc/issues/1997","id":1321346714,"node_id":"IC_kwDOBhmkcs5Owiaa","user":{"login":"vinllen","id":6987398,"node_id":"MDQ6VXNlcjY5ODczOTg=","avatar_url":"https://avatars.githubusercontent.com/u/6987398?v=4","gravatar_id":"","url":"https://api.github.com/users/vinllen","html_url":"https://github.com/vinllen","followers_url":"https://api.github.com/users/vinllen/followers","following_url":"https://api.github.com/users/vinllen/following{/other_user}","gists_url":"https://api.github.com/users/vinllen/gists{/gist_id}","starred_url":"https://api.github.com/users/vinllen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vinllen/subscriptions","organizations_url":"https://api.github.com/users/vinllen/orgs","repos_url":"https://api.github.com/users/vinllen/repos","events_url":"https://api.github.com/users/vinllen/events{/privacy}","received_events_url":"https://api.github.com/users/vinllen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T01:58:00Z","updated_at":"2022-11-21T06:30:23Z","author_association":"NONE","body":"> > > 这个是你业务代码抛出了异常，没有catch，异常逃逸到了brpc框架内。\r\n> > \r\n> > \r\n> > 业务代码抛异常为什么会跑到brpc的 SocketDeleter::operator() 函数里呢？\r\n> > 这种堆栈以前也见过，但想不明白为啥会core在这里\r\n> \r\n> ```c++\r\n> struct SocketDeleter {\r\n>     void operator()(Socket* m) const {\r\n>         DereferenceSocket(m);\r\n>     }\r\n> };\r\n> \r\n> typedef std::unique_ptr<Socket, SocketDeleter> SocketUniquePtr;\r\n> ```\r\n> \r\n> 因为这个是SocketDeleter的operator()，SocketDeleter是作为unique_ptr的删除器的。会在unique_ptr对象析构的时候调用。而所有析构函数在C++11以后默认是noexcept的。所以当检测到异常的时候，程序立即终止。\r\n> \r\n> 前几天我没仔细看这个网友的栈信息。如果是core在SocketDeleter的operator()中，应该是Socket::Dereference这个函数抛出了异常。 我怀疑是这里\r\n> \r\n> ```c++\r\n>         LOG(FATAL) << \"Invalid SocketId=\" << id;\r\n>         return -1;\r\n>     }\r\n>     LOG(FATAL) << \"Over dereferenced SocketId=\" << id;\r\n> ```\r\n> \r\n> 老问题。当链接了glog的时候，FATAL级别日志，会触发abort抛出异常，导致core。 @wwbmmm\r\n> \r\n> 请问你们是不是链接了glog？ @vinllen\r\n\r\n我们修改了LOG，统一链接用的外部的spdlog","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321346714/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321385642","html_url":"https://github.com/apache/brpc/pull/2005#issuecomment-1321385642","issue_url":"https://api.github.com/repos/apache/brpc/issues/2005","id":1321385642,"node_id":"IC_kwDOBhmkcs5Owr6q","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T02:54:11Z","updated_at":"2022-11-21T02:54:11Z","author_association":"CONTRIBUTOR","body":"`append_user_data_with_meta` not found in files changed","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321385642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321408977","html_url":"https://github.com/apache/brpc/pull/2003#issuecomment-1321408977","issue_url":"https://api.github.com/repos/apache/brpc/issues/2003","id":1321408977,"node_id":"IC_kwDOBhmkcs5OwxnR","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T03:27:50Z","updated_at":"2022-11-21T03:27:50Z","author_association":"CONTRIBUTOR","body":"Could you please submit the application scenario of brpc in your company?\r\nSee #1640 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321408977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321422814","html_url":"https://github.com/apache/brpc/issues/2002#issuecomment-1321422814","issue_url":"https://api.github.com/repos/apache/brpc/issues/2002","id":1321422814,"node_id":"IC_kwDOBhmkcs5Ow0_e","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T03:43:19Z","updated_at":"2022-11-21T03:43:19Z","author_association":"CONTRIBUTOR","body":"指的是ServerOptions中的`const Authenticator* auth;`?，按照如下方式设置试试：\r\n```c++\r\nbrpc::ServerOptions options;\r\noptions.auth = nullptr;\r\n\r\nif (server.Start(point, &options) != 0) {\r\n    LOG(ERROR) << \"Fail to start Server\";\r\n    return -1;\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321422814/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321491547","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1321491547","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1321491547,"node_id":"IC_kwDOBhmkcs5OxFxb","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T05:39:58Z","updated_at":"2022-11-21T05:39:58Z","author_association":"CONTRIBUTOR","body":"> Thanks a million. Is `append_user_data_with_meta` in the PR? I couldn't find the definition in [40a24ab](https://github.com/apache/incubator-brpc/commit/40a24ab3b5f440d11bfb09c8afb2bc6300157688)\r\n\r\nsorry, I repush the PR. Pls try again.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1321491547/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1322414866","html_url":"https://github.com/apache/brpc/issues/1963#issuecomment-1322414866","issue_url":"https://api.github.com/repos/apache/brpc/issues/1963","id":1322414866,"node_id":"IC_kwDOBhmkcs5O0nMS","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T17:29:37Z","updated_at":"2022-11-21T17:29:37Z","author_association":"MEMBER","body":"sorry, I missed this message last week. I have submitted one pull request for two compile task.\r\n@zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1322414866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1322427935","html_url":"https://github.com/apache/brpc/pull/2008#issuecomment-1322427935","issue_url":"https://api.github.com/repos/apache/brpc/issues/2008","id":1322427935,"node_id":"IC_kwDOBhmkcs5O0qYf","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-21T17:40:52Z","updated_at":"2022-11-21T17:40:52Z","author_association":"MEMBER","body":"测试过程中commit比较多，合并的时候可以选择 squash and merge @zyearn @wwbmmm \n\nunittest在Linux上也有失败。后面单独提一个PR来让大家确认问题。\n\nbazel编译，以及gcc clang分别编译，本周再提几次。\n\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1322427935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323020485","html_url":"https://github.com/apache/brpc/pull/2008#issuecomment-1323020485","issue_url":"https://api.github.com/repos/apache/brpc/issues/2008","id":1323020485,"node_id":"IC_kwDOBhmkcs5O27DF","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T04:11:42Z","updated_at":"2022-11-22T04:11:42Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323020485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323534641","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1323534641","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1323534641,"node_id":"IC_kwDOBhmkcs5O44kx","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T11:38:40Z","updated_at":"2022-11-22T11:38:40Z","author_association":"CONTRIBUTOR","body":"@Tuvie \r\nIf `IOBuf::append_user_data` with size 0. Could we do early return here?\r\nhttps://github.com/apache/incubator-brpc/blob/4308819cc4cf52fa52027ab9b10a2dbcaa84d3c4/src/butil/iobuf.cpp#L1209-L1213","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323534641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323723025","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1323723025","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1323723025,"node_id":"IC_kwDOBhmkcs5O5mkR","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T14:00:10Z","updated_at":"2022-11-22T14:00:10Z","author_association":"CONTRIBUTOR","body":"> If `IOBuf::append_user_data` with size 0. Could we do early return here?\r\n\r\nThat's OK.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323723025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323816098","html_url":"https://github.com/apache/brpc/pull/2008#issuecomment-1323816098","issue_url":"https://api.github.com/repos/apache/brpc/issues/2008","id":1323816098,"node_id":"IC_kwDOBhmkcs5O59Si","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-22T15:01:59Z","updated_at":"2022-11-22T15:04:27Z","author_association":"MEMBER","body":"@zyearn 看下，可以先merge了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1323816098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324465314","html_url":"https://github.com/apache/brpc/pull/2005#issuecomment-1324465314","issue_url":"https://api.github.com/repos/apache/brpc/issues/2005","id":1324465314,"node_id":"IC_kwDOBhmkcs5O8byi","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T02:20:28Z","updated_at":"2022-11-23T02:20:28Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324465314/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324513623","html_url":"https://github.com/apache/brpc/issues/2010#issuecomment-1324513623","issue_url":"https://api.github.com/repos/apache/brpc/issues/2010","id":1324513623,"node_id":"IC_kwDOBhmkcs5O8nlX","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T03:48:06Z","updated_at":"2022-11-23T03:48:06Z","author_association":"CONTRIBUTOR","body":"这个测试case里面，带宽是瓶颈，都达到25G满带宽了。时延不会有啥差距的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324513623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324582053","html_url":"https://github.com/apache/brpc/pull/2009#issuecomment-1324582053","issue_url":"https://api.github.com/repos/apache/brpc/issues/2009","id":1324582053,"node_id":"IC_kwDOBhmkcs5O84Sl","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T05:51:01Z","updated_at":"2022-11-23T05:51:01Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324582053/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324594007","html_url":"https://github.com/apache/brpc/pull/1777#issuecomment-1324594007","issue_url":"https://api.github.com/repos/apache/brpc/issues/1777","id":1324594007,"node_id":"IC_kwDOBhmkcs5O87NX","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:05:24Z","updated_at":"2022-11-23T06:05:24Z","author_association":"CONTRIBUTOR","body":"> > Thanks for reporting the issue and submitting this PR! I think it's better to add some comments to explain the code, or add some test cases, to prevent future modification from breaking this case.\r\n> \r\n> OK! I will add some test cases and then update this pr\r\n\r\n@zhaodongzhi Any update of this PR?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324594007/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324594460","html_url":"https://github.com/apache/brpc/pull/1313#issuecomment-1324594460","issue_url":"https://api.github.com/repos/apache/brpc/issues/1313","id":1324594460,"node_id":"IC_kwDOBhmkcs5O87Uc","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:06:06Z","updated_at":"2022-11-23T06:06:06Z","author_association":"CONTRIBUTOR","body":"There is a better solution: https://github.com/apache/incubator-brpc/pull/1777","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324594460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324596522","html_url":"https://github.com/apache/brpc/pull/1947#issuecomment-1324596522","issue_url":"https://api.github.com/repos/apache/brpc/issues/1947","id":1324596522,"node_id":"IC_kwDOBhmkcs5O870q","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:09:01Z","updated_at":"2022-11-23T06:09:01Z","author_association":"CONTRIBUTOR","body":"@Aaaaaaron 这个PR和master有冲突了，能否解决一下。并补充单测，谢谢！","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324596522/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324605671","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1324605671","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1324605671,"node_id":"IC_kwDOBhmkcs5O8-Dn","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:22:38Z","updated_at":"2022-11-23T06:22:38Z","author_association":"CONTRIBUTOR","body":"brpc是多线程的，存在多线程调度延时，而原生redis service是单线程的，没有这个问题，所以没有可比性。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324605671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324610024","html_url":"https://github.com/apache/brpc/issues/1945#issuecomment-1324610024","issue_url":"https://api.github.com/repos/apache/brpc/issues/1945","id":1324610024,"node_id":"IC_kwDOBhmkcs5O8_Ho","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:30:08Z","updated_at":"2022-11-23T06:30:08Z","author_association":"CONTRIBUTOR","body":"rdma分支已不再维护，请使用master分支\r\n这个先close了，如果master有问题，可以再提issue","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324610024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324622578","html_url":"https://github.com/apache/brpc/issues/2010#issuecomment-1324622578","issue_url":"https://api.github.com/repos/apache/brpc/issues/2010","id":1324622578,"node_id":"IC_kwDOBhmkcs5O9CLy","user":{"login":"zoulei","id":11936655,"node_id":"MDQ6VXNlcjExOTM2NjU1","avatar_url":"https://avatars.githubusercontent.com/u/11936655?v=4","gravatar_id":"","url":"https://api.github.com/users/zoulei","html_url":"https://github.com/zoulei","followers_url":"https://api.github.com/users/zoulei/followers","following_url":"https://api.github.com/users/zoulei/following{/other_user}","gists_url":"https://api.github.com/users/zoulei/gists{/gist_id}","starred_url":"https://api.github.com/users/zoulei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoulei/subscriptions","organizations_url":"https://api.github.com/users/zoulei/orgs","repos_url":"https://api.github.com/users/zoulei/repos","events_url":"https://api.github.com/users/zoulei/events{/privacy}","received_events_url":"https://api.github.com/users/zoulei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T06:51:21Z","updated_at":"2022-11-23T06:51:21Z","author_association":"NONE","body":"> 这个测试case里面，带宽是瓶颈，都达到25G满带宽了。时延不会有啥差距的。\r\n\r\n但是我看RDMA的理论介绍中，RMDA能减少一次内存的拷贝，减少这一次拷贝却没有降低延迟是因为和网络传输相比，内存的拷贝速度太快了吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324622578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324634492","html_url":"https://github.com/apache/brpc/issues/2010#issuecomment-1324634492","issue_url":"https://api.github.com/repos/apache/brpc/issues/2010","id":1324634492,"node_id":"IC_kwDOBhmkcs5O9FF8","user":{"login":"zoulei","id":11936655,"node_id":"MDQ6VXNlcjExOTM2NjU1","avatar_url":"https://avatars.githubusercontent.com/u/11936655?v=4","gravatar_id":"","url":"https://api.github.com/users/zoulei","html_url":"https://github.com/zoulei","followers_url":"https://api.github.com/users/zoulei/followers","following_url":"https://api.github.com/users/zoulei/following{/other_user}","gists_url":"https://api.github.com/users/zoulei/gists{/gist_id}","starred_url":"https://api.github.com/users/zoulei/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zoulei/subscriptions","organizations_url":"https://api.github.com/users/zoulei/orgs","repos_url":"https://api.github.com/users/zoulei/repos","events_url":"https://api.github.com/users/zoulei/events{/privacy}","received_events_url":"https://api.github.com/users/zoulei/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T07:08:18Z","updated_at":"2022-11-23T07:08:18Z","author_association":"NONE","body":"> 这个测试case里面，带宽是瓶颈，都达到25G满带宽了。时延不会有啥差距的。\r\n\r\n我大概有点明白了，在一次请求的数据传输过程中，内存的拷贝和数据通过网络传输，并不是串行的，而是并行的，拷贝了一部分之后，就会开始并行的拷贝与传输，而内存的拷贝速度要远快于网络传输的速度，从而导致出现延迟并没有下降的结果。请问大佬们，是这样的吗？\r\n如果是这样的话，那么对于IO密集型服务，cpu利用率本身就不高，使用RDMA也基本无法带来收益。我这么理解对吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324634492/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324641789","html_url":"https://github.com/apache/brpc/issues/1929#issuecomment-1324641789","issue_url":"https://api.github.com/repos/apache/brpc/issues/1929","id":1324641789,"node_id":"IC_kwDOBhmkcs5O9G39","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T07:17:19Z","updated_at":"2022-11-23T07:17:19Z","author_association":"CONTRIBUTOR","body":"Fixed by https://github.com/apache/incubator-brpc/pull/1958","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324641789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324662026","html_url":"https://github.com/apache/brpc/issues/2010#issuecomment-1324662026","issue_url":"https://api.github.com/repos/apache/brpc/issues/2010","id":1324662026,"node_id":"IC_kwDOBhmkcs5O9L0K","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-23T07:43:31Z","updated_at":"2022-11-23T07:43:31Z","author_association":"CONTRIBUTOR","body":"在这个benchmark里面，你发送这么大的数据，瓶颈不在cpu，也不在内存拷贝，物理带宽限制才是原因。针对你的IO密集型服务，你也需要看瓶颈是什么。如果cpu不是瓶颈，瓶颈是物理带宽打满，那么带来收益的只可能是你换更高速率的网卡接入。但是我理解通常不会出现带宽优先打满的情况。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1324662026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325848850","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1325848850","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1325848850,"node_id":"IC_kwDOBhmkcs5PBtkS","user":{"login":"372046933","id":1251167,"node_id":"MDQ6VXNlcjEyNTExNjc=","avatar_url":"https://avatars.githubusercontent.com/u/1251167?v=4","gravatar_id":"","url":"https://api.github.com/users/372046933","html_url":"https://github.com/372046933","followers_url":"https://api.github.com/users/372046933/followers","following_url":"https://api.github.com/users/372046933/following{/other_user}","gists_url":"https://api.github.com/users/372046933/gists{/gist_id}","starred_url":"https://api.github.com/users/372046933/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/372046933/subscriptions","organizations_url":"https://api.github.com/users/372046933/orgs","repos_url":"https://api.github.com/users/372046933/repos","events_url":"https://api.github.com/users/372046933/events{/privacy}","received_events_url":"https://api.github.com/users/372046933/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T01:55:02Z","updated_at":"2022-11-24T01:55:02Z","author_association":"CONTRIBUTOR","body":"@Tuvie I have tested `append_user_data_with_meta`. It works as expected. As for the return value of `append_user_data` when size is 0. I added a pre-check in application and skip the call when size equals 0.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325848850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325850024","html_url":"https://github.com/apache/brpc/issues/1995#issuecomment-1325850024","issue_url":"https://api.github.com/repos/apache/brpc/issues/1995","id":1325850024,"node_id":"IC_kwDOBhmkcs5PBt2o","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T01:57:38Z","updated_at":"2022-11-24T01:57:38Z","author_association":"CONTRIBUTOR","body":"@372046933 Thanks for your feedback. About the return value problem, maybe @wwbmmm can share your opinion.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325850024/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325908659","html_url":"https://github.com/apache/brpc/issues/2013#issuecomment-1325908659","issue_url":"https://api.github.com/repos/apache/brpc/issues/2013","id":1325908659,"node_id":"IC_kwDOBhmkcs5PB8Kz","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T03:35:21Z","updated_at":"2022-11-24T03:35:21Z","author_association":"CONTRIBUTOR","body":"我觉得可以","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325908659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325909263","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325909263","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325909263,"node_id":"IC_kwDOBhmkcs5PB8UP","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T03:36:52Z","updated_at":"2022-11-24T03:36:52Z","author_association":"NONE","body":"可能我描述的不是很清楚，和多线程应该没有直接关系。其他的类redis数据库，比如DragonFly DB，延时也很低。\r\n我对ProcessEvent加了bvar统计，如果ProcessEvent走bthread，则ProcessEvent函数的处理平均耗时为26us。如果不走，则ProcessEvent只有6us。单链接下最明显。\r\n\r\n所以，我奇怪的是，ProcessEvent在redis协议下处理很简单，主要是系统调用read和write。而且ProcessEvent在bthread里调度时，自身并没有切线程，只是线程将函数调用栈从Socket::StartInputEvent切换到ProcessEvent函数,为何会影响系统调用read和write的开销呢？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325909263/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325914657","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325914657","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325914657,"node_id":"IC_kwDOBhmkcs5PB9oh","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T03:40:40Z","updated_at":"2022-11-24T03:40:40Z","author_association":"NONE","body":"Socket::StartInputEvent 里如果直接调用ProcessEvent函数，也是函数调用过程和栈切换，为何brpc jumpstack就能影响系统调用。是否和jumpstack的处理有关系？jumpstack是汇编代码，能力有限，看不大懂。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325914657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325919196","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325919196","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325919196,"node_id":"IC_kwDOBhmkcs5PB-vc","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T03:44:40Z","updated_at":"2022-11-24T03:44:40Z","author_association":"NONE","body":"如果将进程用taskset绑定到固定的CPU上，也没有此差异。是不是brpc jumpstack的过程导致线程pthread切换了CPU，导致了cache miss，从而影响系统调用的开销。\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325919196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325927072","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325927072","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325927072,"node_id":"IC_kwDOBhmkcs5PCAqg","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T04:02:03Z","updated_at":"2022-11-24T04:02:03Z","author_association":"CONTRIBUTOR","body":"bthread_start_urgent会把当前pthread的栈切到ProcessEvent函数，同时也会将当前bthread挂起并signal其它的worker来继续执行这个bthread，所以会对性能带来一定影响。并不是jumpstack带来的影响。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325927072/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325952578","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325952578","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325952578,"node_id":"IC_kwDOBhmkcs5PCG5C","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T04:46:46Z","updated_at":"2022-11-24T04:46:46Z","author_association":"NONE","body":"不不，我的重点不是当前bthread挂起并signal其它的worker来继续执行这个bthread带来的性能损耗，我的重点是经过bthread的ProcessEvent并没有切换pthread，为何系统调用函数write和read的开销高于直接调用ProcessEvent时的系统调用函数write和read的开销。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325952578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325979641","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1325979641","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1325979641,"node_id":"IC_kwDOBhmkcs5PCNf5","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T05:37:16Z","updated_at":"2022-11-24T05:37:16Z","author_association":"CONTRIBUTOR","body":"> 不不，我的重点不是当前bthread挂起并signal其它的worker来继续执行这个bthread带来的性能损耗，我的重点是经过bthread的ProcessEvent并没有切换pthread，为何系统调用函数write和read的开销高于直接调用ProcessEvent时的系统调用函数write和read的开销。\r\n\r\n有关系的。当前bthread负责IO事件的处理，如果当前bthread挂起并signal其它的worker来继续执行，那么后续的read和write动作就会跑到其它的worker的，这就会影响到系统调用函数write和read的开销","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1325979641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326116094","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1326116094","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1326116094,"node_id":"IC_kwDOBhmkcs5PCuz-","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T08:34:28Z","updated_at":"2022-11-24T08:34:28Z","author_association":"NONE","body":"> \r\n\r\n它处理过程是这样的。Pthread A上运行bthreadA（epoll_wait）,然后处理epoll事件，即ProcessEvent过程，其为bthread B，PthreadA会去执行bthread B，而将bthread A丢给队列，由其他pthread去继续执行。write和read是在ProcessEvent内部执行的，还在PthreadA上执行。\r\n\r\n之前怀疑pthread 在bthread调度过程中切换了cpu，线程绑核后并没有效果。\r\n\r\n之所以怀疑jump stack，因为jump stack各系统实现的汇编代码不同，而mac pro上ProcessEvent是否基于bthread没有任何区别。当然也有可能是CPU架构或操作系统不同的原因。\r\n现在就是不清楚ProcessEvent走bthread影响系统调用的真实原因具体在哪里，从而无法进行优化。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326116094/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326138637","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1326138637","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1326138637,"node_id":"IC_kwDOBhmkcs5PC0UN","user":{"login":"fusying-hwang","id":101255426,"node_id":"U_kgDOBgkJAg","avatar_url":"https://avatars.githubusercontent.com/u/101255426?v=4","gravatar_id":"","url":"https://api.github.com/users/fusying-hwang","html_url":"https://github.com/fusying-hwang","followers_url":"https://api.github.com/users/fusying-hwang/followers","following_url":"https://api.github.com/users/fusying-hwang/following{/other_user}","gists_url":"https://api.github.com/users/fusying-hwang/gists{/gist_id}","starred_url":"https://api.github.com/users/fusying-hwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fusying-hwang/subscriptions","organizations_url":"https://api.github.com/users/fusying-hwang/orgs","repos_url":"https://api.github.com/users/fusying-hwang/repos","events_url":"https://api.github.com/users/fusying-hwang/events{/privacy}","received_events_url":"https://api.github.com/users/fusying-hwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T08:56:27Z","updated_at":"2022-11-24T08:56:27Z","author_association":"NONE","body":"alright, it turns out to be my problem. They do support building as an external lib from source. My humble bazel knowledge limits my ability to appreciate this project.\r\n\r\n    custom_http_archive(\r\n        name = \"brpc\",\r\n        auto_bind = False,\r\n        repository_name = \"com_github_brpc_brpc\",\r\n        auto_strip = False,\r\n        strip_prefix = \"incubator-brpc-1.3.0\",\r\n        repo_mapping = {\r\n            \"@com_github_google_leveldb\": \"@com_leveldb\",\r\n            \"@com_github_gflags_gflags\": \"@com_gflags\",\r\n            \"@com_github_madler_zlib\": \"@net_zlib_zlib_2\",\r\n            \"@openssl\": \"@com_openssl\",\r\n            \"@com_github_google_glog\": \"@com_glog\",\r\n        },\r\n    )\r\n    native.bind(\r\n        name = \"brpc\",\r\n        actual = \"@com_github_brpc_brpc//:brpc\",\r\n    )\r\n\r\nthis is my solution, basically we already had some local names like leveldb, gflags, ... all we need to do is using repo_mapping to map it.\r\n\r\nOne caveat, we statically linked openssl and in static linkage the order of these two dependencies matter, \r\n         \"@openssl//:crypto\",\r\n        \"@openssl//:ssl\",\r\nI do suggest the BRPC team switch these two lines so that I don't need to patch it.\r\n\r\nHope that helps. And I think this issue can close now.   \r\n        ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326138637/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326140568","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1326140568","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1326140568,"node_id":"IC_kwDOBhmkcs5PC0yY","user":{"login":"fusying-hwang","id":101255426,"node_id":"U_kgDOBgkJAg","avatar_url":"https://avatars.githubusercontent.com/u/101255426?v=4","gravatar_id":"","url":"https://api.github.com/users/fusying-hwang","html_url":"https://github.com/fusying-hwang","followers_url":"https://api.github.com/users/fusying-hwang/followers","following_url":"https://api.github.com/users/fusying-hwang/following{/other_user}","gists_url":"https://api.github.com/users/fusying-hwang/gists{/gist_id}","starred_url":"https://api.github.com/users/fusying-hwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fusying-hwang/subscriptions","organizations_url":"https://api.github.com/users/fusying-hwang/orgs","repos_url":"https://api.github.com/users/fusying-hwang/repos","events_url":"https://api.github.com/users/fusying-hwang/events{/privacy}","received_events_url":"https://api.github.com/users/fusying-hwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T08:58:23Z","updated_at":"2022-11-24T08:58:23Z","author_association":"NONE","body":"it's already resolved close now. ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326140568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326141452","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1326141452","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1326141452,"node_id":"IC_kwDOBhmkcs5PC1AM","user":{"login":"fansehep","id":75058860,"node_id":"MDQ6VXNlcjc1MDU4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/75058860?v=4","gravatar_id":"","url":"https://api.github.com/users/fansehep","html_url":"https://github.com/fansehep","followers_url":"https://api.github.com/users/fansehep/followers","following_url":"https://api.github.com/users/fansehep/following{/other_user}","gists_url":"https://api.github.com/users/fansehep/gists{/gist_id}","starred_url":"https://api.github.com/users/fansehep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fansehep/subscriptions","organizations_url":"https://api.github.com/users/fansehep/orgs","repos_url":"https://api.github.com/users/fansehep/repos","events_url":"https://api.github.com/users/fansehep/events{/privacy}","received_events_url":"https://api.github.com/users/fansehep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T08:59:17Z","updated_at":"2022-11-24T08:59:17Z","author_association":"CONTRIBUTOR","body":"> alright, it turns out to be my problem. They do support building as an external lib from source. My humble bazel knowledge limits my ability to appreciate this project.\r\n> \r\n> ```\r\n> custom_http_archive(\r\n>     name = \"brpc\",\r\n>     auto_bind = False,\r\n>     repository_name = \"com_github_brpc_brpc\",\r\n>     auto_strip = False,\r\n>     strip_prefix = \"incubator-brpc-1.3.0\",\r\n>     repo_mapping = {\r\n>         \"@com_github_google_leveldb\": \"@com_leveldb\",\r\n>         \"@com_github_gflags_gflags\": \"@com_gflags\",\r\n>         \"@com_github_madler_zlib\": \"@net_zlib_zlib_2\",\r\n>         \"@openssl\": \"@com_openssl\",\r\n>         \"@com_github_google_glog\": \"@com_glog\",\r\n>     },\r\n> )\r\n> native.bind(\r\n>     name = \"brpc\",\r\n>     actual = \"@com_github_brpc_brpc//:brpc\",\r\n> )\r\n> ```\r\n> \r\n> this is my solution, basically we already had some local names like leveldb, gflags, ... all we need to do is using repo_mapping to map it.\r\n> \r\n> One caveat, we statically linked openssl and in static linkage the order of these two dependencies matter, \"@openssl//:crypto\", \"@openssl//:ssl\", I do suggest the BRPC team switch these two lines so that I don't need to patch it.\r\n> \r\n> Hope that helps. And I think this issue can close now.\r\n\r\nlooks more great than my way.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326141452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326254330","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1326254330","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1326254330,"node_id":"IC_kwDOBhmkcs5PDQj6","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T10:27:57Z","updated_at":"2022-11-24T10:27:57Z","author_association":"NONE","body":"还有一个原因可能是因为同1个socket的write调用一直在不同的线程里切换导致开销变高？因为看其他的网络框架，一般socket会绑到一个固定io线程处理。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326254330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326332240","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1326332240","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1326332240,"node_id":"IC_kwDOBhmkcs5PDjlQ","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T11:38:30Z","updated_at":"2022-11-24T11:38:30Z","author_association":"CONTRIBUTOR","body":"> write和read是在ProcessEvent内部执行的，还在PthreadA上执行。\r\n\r\n这个请求是在pthread A 执行，下一个请求就到pthread B（接收了epoll bthread的那个pthread）执行了呀。每个请求都换pthread，这样效率就降低了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326332240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326336262","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1326336262","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1326336262,"node_id":"IC_kwDOBhmkcs5PDkkG","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T11:42:27Z","updated_at":"2022-11-24T11:42:27Z","author_association":"NONE","body":"> \r\n\r\n那感觉是不是还是像其他网络框架那样，io线程和socket是绑定的，只是rpc process那里用bthread去做负载均衡要好一点呢？这样也可以避免长尾请求的阻塞效应。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326336262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326354421","html_url":"https://github.com/apache/brpc/pull/2005#issuecomment-1326354421","issue_url":"https://api.github.com/repos/apache/brpc/issues/2005","id":1326354421,"node_id":"IC_kwDOBhmkcs5PDo_1","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T12:00:48Z","updated_at":"2022-11-24T12:00:48Z","author_association":"CONTRIBUTOR","body":"@wwbmmm is this PR qualified to be merged? It seems that the Travis often fails due to some irrelevant reason.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326354421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326688916","html_url":"https://github.com/apache/brpc/pull/2016#issuecomment-1326688916","issue_url":"https://api.github.com/repos/apache/brpc/issues/2016","id":1326688916,"node_id":"IC_kwDOBhmkcs5PE6qU","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-24T17:03:33Z","updated_at":"2022-11-24T17:03:33Z","author_association":"MEMBER","body":"会有失败的case","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326688916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326927755","html_url":"https://github.com/apache/brpc/pull/2014#issuecomment-1326927755","issue_url":"https://api.github.com/repos/apache/brpc/issues/2014","id":1326927755,"node_id":"IC_kwDOBhmkcs5PF0-L","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T01:09:09Z","updated_at":"2022-11-25T01:09:09Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326927755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326939893","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1326939893","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1326939893,"node_id":"IC_kwDOBhmkcs5PF371","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T01:45:18Z","updated_at":"2022-11-25T01:45:18Z","author_association":"CONTRIBUTOR","body":"独立的io线程性能不一定会好，因为存在io线程和process线程之间同步的开销\r\n你这里减小pthread worker的数量（最小是4），应该会好一些","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326939893/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326971733","html_url":"https://github.com/apache/brpc/issues/2013#issuecomment-1326971733","issue_url":"https://api.github.com/repos/apache/brpc/issues/2013","id":1326971733,"node_id":"IC_kwDOBhmkcs5PF_tV","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T03:00:22Z","updated_at":"2022-11-25T03:00:22Z","author_association":"CONTRIBUTOR","body":"那我这边提一个PR吧，到时候你来看看。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1326971733/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327068423","html_url":"https://github.com/apache/brpc/issues/2012#issuecomment-1327068423","issue_url":"https://api.github.com/repos/apache/brpc/issues/2012","id":1327068423,"node_id":"IC_kwDOBhmkcs5PGXUH","user":{"login":"xiaohei520321","id":25146253,"node_id":"MDQ6VXNlcjI1MTQ2MjUz","avatar_url":"https://avatars.githubusercontent.com/u/25146253?v=4","gravatar_id":"","url":"https://api.github.com/users/xiaohei520321","html_url":"https://github.com/xiaohei520321","followers_url":"https://api.github.com/users/xiaohei520321/followers","following_url":"https://api.github.com/users/xiaohei520321/following{/other_user}","gists_url":"https://api.github.com/users/xiaohei520321/gists{/gist_id}","starred_url":"https://api.github.com/users/xiaohei520321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xiaohei520321/subscriptions","organizations_url":"https://api.github.com/users/xiaohei520321/orgs","repos_url":"https://api.github.com/users/xiaohei520321/repos","events_url":"https://api.github.com/users/xiaohei520321/events{/privacy}","received_events_url":"https://api.github.com/users/xiaohei520321/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T06:26:38Z","updated_at":"2022-11-25T06:26:38Z","author_association":"NONE","body":"还有connection_count也是一样，自定义LatencyRecord会导出，server默认的LatencyRecord不导出","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327068423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327086093","html_url":"https://github.com/apache/brpc/issues/1596#issuecomment-1327086093","issue_url":"https://api.github.com/repos/apache/brpc/issues/1596","id":1327086093,"node_id":"IC_kwDOBhmkcs5PGboN","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T06:53:33Z","updated_at":"2022-11-25T06:53:33Z","author_association":"CONTRIBUTOR","body":"测试了一下，master并没有这个问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327086093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327159647","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1327159647","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1327159647,"node_id":"IC_kwDOBhmkcs5PGtlf","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T08:37:21Z","updated_at":"2022-11-25T08:37:21Z","author_association":"NONE","body":"> 独立的io线程性能不一定会好，因为存在io线程和process线程之间同步的开销 你这里减小pthread worker的数量（最小是4），应该会好一些\r\n\r\n我测试了一下，确实worker少的时候，write的开销也较小。深层原因是什么呢？线程数越少？write落在同一个CPU核上的概率越高，cpu cache失效的概率越低，性能越好？对吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327159647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327196831","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1327196831","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1327196831,"node_id":"IC_kwDOBhmkcs5PG2qf","user":{"login":"zhouyanghere","id":22021122,"node_id":"MDQ6VXNlcjIyMDIxMTIy","avatar_url":"https://avatars.githubusercontent.com/u/22021122?v=4","gravatar_id":"","url":"https://api.github.com/users/zhouyanghere","html_url":"https://github.com/zhouyanghere","followers_url":"https://api.github.com/users/zhouyanghere/followers","following_url":"https://api.github.com/users/zhouyanghere/following{/other_user}","gists_url":"https://api.github.com/users/zhouyanghere/gists{/gist_id}","starred_url":"https://api.github.com/users/zhouyanghere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zhouyanghere/subscriptions","organizations_url":"https://api.github.com/users/zhouyanghere/orgs","repos_url":"https://api.github.com/users/zhouyanghere/repos","events_url":"https://api.github.com/users/zhouyanghere/events{/privacy}","received_events_url":"https://api.github.com/users/zhouyanghere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T09:18:11Z","updated_at":"2022-11-25T09:18:11Z","author_association":"NONE","body":"补充开销统计：\r\n1个worker   ProcessEvent：9us， Write：5us\r\n2个worker   ProcessEvent：12us， Write：7us\r\n4个worker   ProcessEvent：29us， Write：16us\r\n8个worker   ProcessEvent：28us， Write：16us\r\n16个worker   ProcessEvent：26us， Write：15us\r\n24个worker   ProcessEvent：29us， Write：16us\r\n48个worker    ProcessEvent：61us， Write：30us\r\n不同worker下，处理的开销统计，非线性概率，呈现阶梯性概率曲线。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327196831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327211987","html_url":"https://github.com/apache/brpc/issues/2000#issuecomment-1327211987","issue_url":"https://api.github.com/repos/apache/brpc/issues/2000","id":1327211987,"node_id":"IC_kwDOBhmkcs5PG6XT","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-25T09:33:48Z","updated_at":"2022-11-25T09:33:48Z","author_association":"CONTRIBUTOR","body":"> \r\n> 我测试了一下，确实worker少的时候，write的开销也较小。深层原因是什么呢？线程数越少？write落在同一个CPU核上的概率越高，cpu cache失效的概率越低，性能越好？对吗？\r\n\r\n是的","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1327211987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328098448","html_url":"https://github.com/apache/brpc/pull/2018#issuecomment-1328098448","issue_url":"https://api.github.com/repos/apache/brpc/issues/2018","id":1328098448,"node_id":"IC_kwDOBhmkcs5PKSyQ","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-26T19:04:34Z","updated_at":"2022-11-26T19:04:34Z","author_association":"MEMBER","body":"> 针对make编译，额外调用一次protoc来处理mcpack2pb中的proto，因为make的编译不稳定，经常报错src/mcpack2pb/generator.cpp:30:10: fatal error: idl_options.pb.h: No such file or directory\r\nSide effects:\r\n\r\n我记得这个是并发编译的时候protoc还在执行，但引用idl_options.pb.h已经需要前一步的结果了，这里应该需要加一个编译顺序","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328098448/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328099489","html_url":"https://github.com/apache/brpc/pull/2018#issuecomment-1328099489","issue_url":"https://api.github.com/repos/apache/brpc/issues/2018","id":1328099489,"node_id":"IC_kwDOBhmkcs5PKTCh","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-26T19:12:25Z","updated_at":"2022-11-26T19:12:25Z","author_association":"MEMBER","body":"install-all-dependences 和 install-dependences 的区别是all包含非必要的依赖，可以换个名字比如：\r\n* install-essential-dependences\r\n* install-all-dependences\r\n\r\n然后all版本引用essential的文件而不是再写一份，不清楚这个在yml文件里能不能实现？\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328099489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328227202","html_url":"https://github.com/apache/brpc/pull/2018#issuecomment-1328227202","issue_url":"https://api.github.com/repos/apache/brpc/issues/2018","id":1328227202,"node_id":"IC_kwDOBhmkcs5PKyOC","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-27T11:35:57Z","updated_at":"2022-11-27T11:35:57Z","author_association":"MEMBER","body":"@zyearn 修改了，有空看下","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328227202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318092","html_url":"https://github.com/apache/brpc/pull/2018#issuecomment-1328318092","issue_url":"https://api.github.com/repos/apache/brpc/issues/2018","id":1328318092,"node_id":"IC_kwDOBhmkcs5PLIaM","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-27T19:03:25Z","updated_at":"2022-11-27T19:03:25Z","author_association":"MEMBER","body":"赞，之后提个PR把老的travis删掉应该就好了","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318092/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318321","html_url":"https://github.com/apache/brpc/pull/2016#issuecomment-1328318321","issue_url":"https://api.github.com/repos/apache/brpc/issues/2016","id":1328318321,"node_id":"IC_kwDOBhmkcs5PLIdx","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-27T19:04:45Z","updated_at":"2022-11-27T19:04:45Z","author_association":"MEMBER","body":"这个PR还需要吗？","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318544","html_url":"https://github.com/apache/brpc/pull/2018#issuecomment-1328318544","issue_url":"https://api.github.com/repos/apache/brpc/issues/2018","id":1328318544,"node_id":"IC_kwDOBhmkcs5PLIhQ","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-27T19:06:11Z","updated_at":"2022-11-27T19:06:11Z","author_association":"MEMBER","body":"以及github主页上的build link应该要改成指向Actions","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328318544/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328413233","html_url":"https://github.com/apache/brpc/pull/2020#issuecomment-1328413233","issue_url":"https://api.github.com/repos/apache/brpc/issues/2020","id":1328413233,"node_id":"IC_kwDOBhmkcs5PLfox","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T01:36:01Z","updated_at":"2022-11-28T01:36:01Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328413233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328444529","html_url":"https://github.com/apache/brpc/pull/2019#issuecomment-1328444529","issue_url":"https://api.github.com/repos/apache/brpc/issues/2019","id":1328444529,"node_id":"IC_kwDOBhmkcs5PLnRx","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T02:23:32Z","updated_at":"2022-11-28T02:23:32Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328444529/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328616643","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1328616643","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1328616643,"node_id":"IC_kwDOBhmkcs5PMRTD","user":{"login":"Huixxi","id":21335093,"node_id":"MDQ6VXNlcjIxMzM1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/21335093?v=4","gravatar_id":"","url":"https://api.github.com/users/Huixxi","html_url":"https://github.com/Huixxi","followers_url":"https://api.github.com/users/Huixxi/followers","following_url":"https://api.github.com/users/Huixxi/following{/other_user}","gists_url":"https://api.github.com/users/Huixxi/gists{/gist_id}","starred_url":"https://api.github.com/users/Huixxi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Huixxi/subscriptions","organizations_url":"https://api.github.com/users/Huixxi/orgs","repos_url":"https://api.github.com/users/Huixxi/repos","events_url":"https://api.github.com/users/Huixxi/events{/privacy}","received_events_url":"https://api.github.com/users/Huixxi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T06:47:34Z","updated_at":"2022-11-28T06:47:34Z","author_association":"CONTRIBUTOR","body":"Fix #2012 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328616643/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328621078","html_url":"https://github.com/apache/brpc/issues/2012#issuecomment-1328621078","issue_url":"https://api.github.com/repos/apache/brpc/issues/2012","id":1328621078,"node_id":"IC_kwDOBhmkcs5PMSYW","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T06:51:45Z","updated_at":"2022-11-28T06:51:45Z","author_association":"CONTRIBUTOR","body":"@xiaohei520321 可以试试PR #2024 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328621078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328974433","html_url":"https://github.com/apache/brpc/issues/2012#issuecomment-1328974433","issue_url":"https://api.github.com/repos/apache/brpc/issues/2012","id":1328974433,"node_id":"IC_kwDOBhmkcs5PNoph","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T12:13:02Z","updated_at":"2022-11-28T12:13:02Z","author_association":"MEMBER","body":"这个当时是按照 https://prometheus.io/docs/concepts/metric_types/#histogram 实现的，客户端可以通过设置 sum/count来实现latency的效果","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328974433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328976572","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1328976572","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1328976572,"node_id":"IC_kwDOBhmkcs5PNpK8","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T12:14:29Z","updated_at":"2022-11-28T12:14:29Z","author_association":"MEMBER","body":"这个可能得加在其它地方，这个函数export的是Histogram\r\n类型 https://prometheus.io/docs/concepts/metric_types/#histogram","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328976572/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328990128","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1328990128","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1328990128,"node_id":"IC_kwDOBhmkcs5PNsew","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T12:25:06Z","updated_at":"2022-11-28T12:25:06Z","author_association":"CONTRIBUTOR","body":"> 这个可能得加在其它地方，这个函数export的是Histogram 类型 https://prometheus.io/docs/concepts/metric_types/#histogram\r\n\r\n应该不是Histogram，是Summary类型\r\nhttps://github.com/apache/incubator-brpc/blob/master/src/brpc/builtin/prometheus_metrics_service.cpp#L159","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1328990128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1329340427","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1329340427","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1329340427,"node_id":"IC_kwDOBhmkcs5PPCAL","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-28T15:57:45Z","updated_at":"2022-11-28T15:57:45Z","author_association":"MEMBER","body":"> > 这个可能得加在其它地方，这个函数export的是Histogram 类型 https://prometheus.io/docs/concepts/metric_types/#histogram\r\n> \r\n> 应该不是Histogram，是Summary类型 https://github.com/apache/incubator-brpc/blob/master/src/brpc/builtin/prometheus_metrics_service.cpp#L159\r\n\r\n嗯嗯是Summary。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1329340427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330040099","html_url":"https://github.com/apache/brpc/issues/2013#issuecomment-1330040099","issue_url":"https://api.github.com/repos/apache/brpc/issues/2013","id":1330040099,"node_id":"IC_kwDOBhmkcs5PRs0j","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T03:55:56Z","updated_at":"2022-11-29T03:55:56Z","author_association":"CONTRIBUTOR","body":"#2027 @wwbmmm 我提交了一个PR，还没有写单测，你先大概Review以下，看看是否合理。其实都是基于auto concurrency limiter修改的。","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330040099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330585434","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1330585434","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1330585434,"node_id":"IC_kwDOBhmkcs5PTx9a","user":{"login":"fansehep","id":75058860,"node_id":"MDQ6VXNlcjc1MDU4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/75058860?v=4","gravatar_id":"","url":"https://api.github.com/users/fansehep","html_url":"https://github.com/fansehep","followers_url":"https://api.github.com/users/fansehep/followers","following_url":"https://api.github.com/users/fansehep/following{/other_user}","gists_url":"https://api.github.com/users/fansehep/gists{/gist_id}","starred_url":"https://api.github.com/users/fansehep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fansehep/subscriptions","organizations_url":"https://api.github.com/users/fansehep/orgs","repos_url":"https://api.github.com/users/fansehep/repos","events_url":"https://api.github.com/users/fansehep/events{/privacy}","received_events_url":"https://api.github.com/users/fansehep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T12:39:12Z","updated_at":"2022-11-29T12:39:12Z","author_association":"CONTRIBUTOR","body":"> alright, it turns out to be my problem. They do support building as an external lib from source. My humble bazel knowledge limits my ability to appreciate this project.\r\n> \r\n> ```\r\n> custom_http_archive(\r\n>     name = \"brpc\",\r\n>     auto_bind = False,\r\n>     repository_name = \"com_github_brpc_brpc\",\r\n>     auto_strip = False,\r\n>     strip_prefix = \"incubator-brpc-1.3.0\",\r\n>     repo_mapping = {\r\n>         \"@com_github_google_leveldb\": \"@com_leveldb\",\r\n>         \"@com_github_gflags_gflags\": \"@com_gflags\",\r\n>         \"@com_github_madler_zlib\": \"@net_zlib_zlib_2\",\r\n>         \"@openssl\": \"@com_openssl\",\r\n>         \"@com_github_google_glog\": \"@com_glog\",\r\n>     },\r\n> )\r\n> native.bind(\r\n>     name = \"brpc\",\r\n>     actual = \"@com_github_brpc_brpc//:brpc\",\r\n> )\r\n> ```\r\n> \r\n> this is my solution, basically we already had some local names like leveldb, gflags, ... all we need to do is using repo_mapping to map it.\r\n> \r\n> One caveat, we statically linked openssl and in static linkage the order of these two dependencies matter, \"@openssl//:crypto\", \"@openssl//:ssl\", I do suggest the BRPC team switch these two lines so that I don't need to patch it.\r\n> \r\n> Hope that helps. And I think this issue can close now.\r\n\r\nCan you provide more details about your build way? I try a demo with the ```build style```, but bazel can not found the ```custom_http_archive```. I want to make the way to the master branch.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330585434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330685155","html_url":"https://github.com/apache/brpc/issues/2025#issuecomment-1330685155","issue_url":"https://api.github.com/repos/apache/brpc/issues/2025","id":1330685155,"node_id":"IC_kwDOBhmkcs5PUKTj","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T13:53:38Z","updated_at":"2022-11-29T13:53:38Z","author_association":"CONTRIBUTOR","body":"贴下core栈信息：\r\n1. `ulimit -c unlimited` 开启coredump\r\n2. `gdb echo_server ${coredump}` 查看core栈信息","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330685155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330729699","html_url":"https://github.com/apache/brpc/pull/2016#issuecomment-1330729699","issue_url":"https://api.github.com/repos/apache/brpc/issues/2016","id":1330729699,"node_id":"IC_kwDOBhmkcs5PUVLj","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T14:25:57Z","updated_at":"2022-11-29T14:25:57Z","author_association":"MEMBER","body":"> 这个PR还需要吗？\n\n先留着吧，gcc的ut有点问题，还没合入master @zyearn ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330729699/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330904025","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1330904025","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1330904025,"node_id":"IC_kwDOBhmkcs5PU_vZ","user":{"login":"fusying-hwang","id":101255426,"node_id":"U_kgDOBgkJAg","avatar_url":"https://avatars.githubusercontent.com/u/101255426?v=4","gravatar_id":"","url":"https://api.github.com/users/fusying-hwang","html_url":"https://github.com/fusying-hwang","followers_url":"https://api.github.com/users/fusying-hwang/followers","following_url":"https://api.github.com/users/fusying-hwang/following{/other_user}","gists_url":"https://api.github.com/users/fusying-hwang/gists{/gist_id}","starred_url":"https://api.github.com/users/fusying-hwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fusying-hwang/subscriptions","organizations_url":"https://api.github.com/users/fusying-hwang/orgs","repos_url":"https://api.github.com/users/fusying-hwang/repos","events_url":"https://api.github.com/users/fusying-hwang/events{/privacy}","received_events_url":"https://api.github.com/users/fusying-hwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T16:20:50Z","updated_at":"2022-11-29T16:20:50Z","author_association":"NONE","body":"oh, that's my customized http_archive, because I already had those dependencies in my workspace (some other projects already depended on them).  but I think you basically need is something like [grpc_deps.bzl](https://github.com/grpc/grpc/blob/master/bazel/grpc_deps.bzl). You put all those dependencies in this file and when people want to use brpc as an external dependent, all they need to do is put codes like \r\n`load(\"@com_github_grpc_grpc//bazel:grpc_deps.bzl\", \"grpc_deps\")`\r\n`grpc_deps()`\r\nin their WORKSPACE","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330904025/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330910950","html_url":"https://github.com/apache/brpc/issues/1918#issuecomment-1330910950","issue_url":"https://api.github.com/repos/apache/brpc/issues/1918","id":1330910950,"node_id":"IC_kwDOBhmkcs5PVBbm","user":{"login":"fusying-hwang","id":101255426,"node_id":"U_kgDOBgkJAg","avatar_url":"https://avatars.githubusercontent.com/u/101255426?v=4","gravatar_id":"","url":"https://api.github.com/users/fusying-hwang","html_url":"https://github.com/fusying-hwang","followers_url":"https://api.github.com/users/fusying-hwang/followers","following_url":"https://api.github.com/users/fusying-hwang/following{/other_user}","gists_url":"https://api.github.com/users/fusying-hwang/gists{/gist_id}","starred_url":"https://api.github.com/users/fusying-hwang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fusying-hwang/subscriptions","organizations_url":"https://api.github.com/users/fusying-hwang/orgs","repos_url":"https://api.github.com/users/fusying-hwang/repos","events_url":"https://api.github.com/users/fusying-hwang/events{/privacy}","received_events_url":"https://api.github.com/users/fusying-hwang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-29T16:26:00Z","updated_at":"2022-11-29T16:26:00Z","author_association":"NONE","body":"one caveat is that they used a bazel defined variable to control if building with glog or not. I didn't find a good way to pass this variable to brpc when built as an external dependency, so I slapped a patch on it to stipulate the building with glog. If you find a way to solve this, pls let me know. Thanks.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1330910950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1331655819","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1331655819","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1331655819,"node_id":"IC_kwDOBhmkcs5PX3SL","user":{"login":"serverglen","id":38067377,"node_id":"MDQ6VXNlcjM4MDY3Mzc3","avatar_url":"https://avatars.githubusercontent.com/u/38067377?v=4","gravatar_id":"","url":"https://api.github.com/users/serverglen","html_url":"https://github.com/serverglen","followers_url":"https://api.github.com/users/serverglen/followers","following_url":"https://api.github.com/users/serverglen/following{/other_user}","gists_url":"https://api.github.com/users/serverglen/gists{/gist_id}","starred_url":"https://api.github.com/users/serverglen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/serverglen/subscriptions","organizations_url":"https://api.github.com/users/serverglen/orgs","repos_url":"https://api.github.com/users/serverglen/repos","events_url":"https://api.github.com/users/serverglen/events{/privacy}","received_events_url":"https://api.github.com/users/serverglen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T05:16:51Z","updated_at":"2022-11-30T05:16:51Z","author_association":"CONTRIBUTOR","body":"LGTM","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1331655819/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1331870232","html_url":"https://github.com/apache/brpc/issues/1887#issuecomment-1331870232","issue_url":"https://api.github.com/repos/apache/brpc/issues/1887","id":1331870232,"node_id":"IC_kwDOBhmkcs5PYroY","user":{"login":"TousakaRin","id":8801314,"node_id":"MDQ6VXNlcjg4MDEzMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/8801314?v=4","gravatar_id":"","url":"https://api.github.com/users/TousakaRin","html_url":"https://github.com/TousakaRin","followers_url":"https://api.github.com/users/TousakaRin/followers","following_url":"https://api.github.com/users/TousakaRin/following{/other_user}","gists_url":"https://api.github.com/users/TousakaRin/gists{/gist_id}","starred_url":"https://api.github.com/users/TousakaRin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TousakaRin/subscriptions","organizations_url":"https://api.github.com/users/TousakaRin/orgs","repos_url":"https://api.github.com/users/TousakaRin/repos","events_url":"https://api.github.com/users/TousakaRin/events{/privacy}","received_events_url":"https://api.github.com/users/TousakaRin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T09:30:50Z","updated_at":"2022-11-30T09:30:50Z","author_association":"CONTRIBUTOR","body":"具体什么依赖版本不匹配呢，我觉得大部分时候还是用发行版里给的版本会更好。\r\n\r\n常见有问题的是gflag/glog/protobuf，brpc在动态库里引用了静态库是有点容易出问题","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1331870232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332207105","html_url":"https://github.com/apache/brpc/pull/2024#issuecomment-1332207105","issue_url":"https://api.github.com/repos/apache/brpc/issues/2024","id":1332207105,"node_id":"IC_kwDOBhmkcs5PZ94B","user":{"login":"lorinlee","id":16054841,"node_id":"MDQ6VXNlcjE2MDU0ODQx","avatar_url":"https://avatars.githubusercontent.com/u/16054841?v=4","gravatar_id":"","url":"https://api.github.com/users/lorinlee","html_url":"https://github.com/lorinlee","followers_url":"https://api.github.com/users/lorinlee/followers","following_url":"https://api.github.com/users/lorinlee/following{/other_user}","gists_url":"https://api.github.com/users/lorinlee/gists{/gist_id}","starred_url":"https://api.github.com/users/lorinlee/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lorinlee/subscriptions","organizations_url":"https://api.github.com/users/lorinlee/orgs","repos_url":"https://api.github.com/users/lorinlee/repos","events_url":"https://api.github.com/users/lorinlee/events{/privacy}","received_events_url":"https://api.github.com/users/lorinlee/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T14:10:02Z","updated_at":"2022-11-30T14:10:02Z","author_association":"CONTRIBUTOR","body":"summary的quantile写avg是Prometheus支持的吗，这个有相关文档不，我搜了下只找到了quantile里是百分比数字的，还有_sum和_count","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332207105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332816766","html_url":"https://github.com/apache/brpc/pull/1996#issuecomment-1332816766","issue_url":"https://api.github.com/repos/apache/brpc/issues/1996","id":1332816766,"node_id":"IC_kwDOBhmkcs5PcSt-","user":{"login":"zyearn","id":4475779,"node_id":"MDQ6VXNlcjQ0NzU3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4475779?v=4","gravatar_id":"","url":"https://api.github.com/users/zyearn","html_url":"https://github.com/zyearn","followers_url":"https://api.github.com/users/zyearn/followers","following_url":"https://api.github.com/users/zyearn/following{/other_user}","gists_url":"https://api.github.com/users/zyearn/gists{/gist_id}","starred_url":"https://api.github.com/users/zyearn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zyearn/subscriptions","organizations_url":"https://api.github.com/users/zyearn/orgs","repos_url":"https://api.github.com/users/zyearn/repos","events_url":"https://api.github.com/users/zyearn/events{/privacy}","received_events_url":"https://api.github.com/users/zyearn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-30T22:26:44Z","updated_at":"2022-11-30T22:26:44Z","author_association":"MEMBER","body":"Hi, What's the status on it? Could you update the latest code?","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332816766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332931959","html_url":"https://github.com/apache/brpc/pull/1996#issuecomment-1332931959","issue_url":"https://api.github.com/repos/apache/brpc/issues/1996","id":1332931959,"node_id":"IC_kwDOBhmkcs5Pcu13","user":{"login":"fansehep","id":75058860,"node_id":"MDQ6VXNlcjc1MDU4ODYw","avatar_url":"https://avatars.githubusercontent.com/u/75058860?v=4","gravatar_id":"","url":"https://api.github.com/users/fansehep","html_url":"https://github.com/fansehep","followers_url":"https://api.github.com/users/fansehep/followers","following_url":"https://api.github.com/users/fansehep/following{/other_user}","gists_url":"https://api.github.com/users/fansehep/gists{/gist_id}","starred_url":"https://api.github.com/users/fansehep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fansehep/subscriptions","organizations_url":"https://api.github.com/users/fansehep/orgs","repos_url":"https://api.github.com/users/fansehep/repos","events_url":"https://api.github.com/users/fansehep/events{/privacy}","received_events_url":"https://api.github.com/users/fansehep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T00:21:46Z","updated_at":"2022-12-01T00:21:46Z","author_association":"CONTRIBUTOR","body":"> Hi, What's the status on it? Could you update the latest code?\r\n\r\nIn fact, this is ok. I have tried some other methods, but none of them seem very elegant. So I thinks it can be merged. 😢 ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1332931959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333150885","html_url":"https://github.com/apache/brpc/issues/2025#issuecomment-1333150885","issue_url":"https://api.github.com/repos/apache/brpc/issues/2025","id":1333150885,"node_id":"IC_kwDOBhmkcs5PdkSl","user":{"login":"SillyBoyenjoy","id":49710570,"node_id":"MDQ6VXNlcjQ5NzEwNTcw","avatar_url":"https://avatars.githubusercontent.com/u/49710570?v=4","gravatar_id":"","url":"https://api.github.com/users/SillyBoyenjoy","html_url":"https://github.com/SillyBoyenjoy","followers_url":"https://api.github.com/users/SillyBoyenjoy/followers","following_url":"https://api.github.com/users/SillyBoyenjoy/following{/other_user}","gists_url":"https://api.github.com/users/SillyBoyenjoy/gists{/gist_id}","starred_url":"https://api.github.com/users/SillyBoyenjoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SillyBoyenjoy/subscriptions","organizations_url":"https://api.github.com/users/SillyBoyenjoy/orgs","repos_url":"https://api.github.com/users/SillyBoyenjoy/repos","events_url":"https://api.github.com/users/SillyBoyenjoy/events{/privacy}","received_events_url":"https://api.github.com/users/SillyBoyenjoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T04:23:52Z","updated_at":"2022-12-01T04:24:55Z","author_association":"NONE","body":"是mac才会有的问题，以下是lldb的backtrace：\r\n  * frame 0: 0x0000000000000000\r\n    frame  1: 0x00000001ab00f718 libobjc.A.dylib`load_images + 1616\r\n    frame 2: 0x000000010116b9a8 dyld`dyld4::RuntimeState::notifyObjCInit(dyld4::Loader const*) + 164\r\n    frame 3: 0x0000000101171cf4 dyld`dyld4::Loader::runInitializersBottomUp(dyld4::RuntimeState&, dyld3::Array<dyld4::Loader const*>&) const + 196\r\n    frame 4: 0x0000000101171cdc dyld`dyld4::Loader::runInitializersBottomUp(dyld4::RuntimeState&, dyld3::Array<dyld4::Loader const*>&) const + 172\r\n    frame 5: 0x0000000101171dcc dyld`dyld4::Loader::runInitializersBottomUpPlusUpwardLinks(dyld4::RuntimeState&) const + 124\r\n    frame 6: 0x0000000101186db4 dyld`dyld4::APIs::runAllInitializersForMain() + 312\r\n    frame 7: 0x0000000101161e00 dyld`dyld4::prepare(dyld4::APIs&, dyld3::MachOAnalyzer const*) + 3100\r\n    frame 8: 0x00000001011610d4 dyld`start + 488","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333150885/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333155303","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1333155303","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1333155303,"node_id":"IC_kwDOBhmkcs5PdlXn","user":{"login":"liyichao","id":2576762,"node_id":"MDQ6VXNlcjI1NzY3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2576762?v=4","gravatar_id":"","url":"https://api.github.com/users/liyichao","html_url":"https://github.com/liyichao","followers_url":"https://api.github.com/users/liyichao/followers","following_url":"https://api.github.com/users/liyichao/following{/other_user}","gists_url":"https://api.github.com/users/liyichao/gists{/gist_id}","starred_url":"https://api.github.com/users/liyichao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liyichao/subscriptions","organizations_url":"https://api.github.com/users/liyichao/orgs","repos_url":"https://api.github.com/users/liyichao/repos","events_url":"https://api.github.com/users/liyichao/events{/privacy}","received_events_url":"https://api.github.com/users/liyichao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T04:29:49Z","updated_at":"2022-12-01T04:33:03Z","author_association":"NONE","body":"@wwbmmm I have fixed the build, the CI failure seems unrelated to this patch, please help check it.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333155303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333639271","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1333639271","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1333639271,"node_id":"IC_kwDOBhmkcs5Pfbhn","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T11:43:16Z","updated_at":"2022-12-01T11:43:16Z","author_association":"CONTRIBUTOR","body":"@guodongxiaren Please help to see this CI failure, the error is so strange.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333639271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333912138","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1333912138","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1333912138,"node_id":"IC_kwDOBhmkcs5PgeJK","user":{"login":"guodongxiaren","id":5945107,"node_id":"MDQ6VXNlcjU5NDUxMDc=","avatar_url":"https://avatars.githubusercontent.com/u/5945107?v=4","gravatar_id":"","url":"https://api.github.com/users/guodongxiaren","html_url":"https://github.com/guodongxiaren","followers_url":"https://api.github.com/users/guodongxiaren/followers","following_url":"https://api.github.com/users/guodongxiaren/following{/other_user}","gists_url":"https://api.github.com/users/guodongxiaren/gists{/gist_id}","starred_url":"https://api.github.com/users/guodongxiaren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guodongxiaren/subscriptions","organizations_url":"https://api.github.com/users/guodongxiaren/orgs","repos_url":"https://api.github.com/users/guodongxiaren/repos","events_url":"https://api.github.com/users/guodongxiaren/events{/privacy}","received_events_url":"https://api.github.com/users/guodongxiaren/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-01T15:09:43Z","updated_at":"2022-12-01T15:10:19Z","author_association":"MEMBER","body":"I have fixed this issue in #2030 @wwbmmm please review and merge in master.","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1333912138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334680122","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1334680122","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1334680122,"node_id":"IC_kwDOBhmkcs5PjZo6","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T02:18:38Z","updated_at":"2022-12-02T02:18:38Z","author_association":"CONTRIBUTOR","body":"> @wwbmmm I have fixed the build, the CI failure seems unrelated to this patch, please help check it.\r\n\r\n@liyichao the master branch has fixed the CI issue, please merge master and retry","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334680122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334723850","html_url":"https://github.com/apache/brpc/issues/2025#issuecomment-1334723850","issue_url":"https://api.github.com/repos/apache/brpc/issues/2025","id":1334723850,"node_id":"IC_kwDOBhmkcs5PjkUK","user":{"login":"leaf-potato","id":49188857,"node_id":"MDQ6VXNlcjQ5MTg4ODU3","avatar_url":"https://avatars.githubusercontent.com/u/49188857?v=4","gravatar_id":"","url":"https://api.github.com/users/leaf-potato","html_url":"https://github.com/leaf-potato","followers_url":"https://api.github.com/users/leaf-potato/followers","following_url":"https://api.github.com/users/leaf-potato/following{/other_user}","gists_url":"https://api.github.com/users/leaf-potato/gists{/gist_id}","starred_url":"https://api.github.com/users/leaf-potato/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leaf-potato/subscriptions","organizations_url":"https://api.github.com/users/leaf-potato/orgs","repos_url":"https://api.github.com/users/leaf-potato/repos","events_url":"https://api.github.com/users/leaf-potato/events{/privacy}","received_events_url":"https://api.github.com/users/leaf-potato/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T03:42:19Z","updated_at":"2022-12-02T03:42:19Z","author_association":"CONTRIBUTOR","body":"看着不太像，编译没开debug吧","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334723850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334775241","html_url":"https://github.com/apache/brpc/pull/1975#issuecomment-1334775241","issue_url":"https://api.github.com/repos/apache/brpc/issues/1975","id":1334775241,"node_id":"IC_kwDOBhmkcs5Pjw3J","user":{"login":"liyichao","id":2576762,"node_id":"MDQ6VXNlcjI1NzY3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2576762?v=4","gravatar_id":"","url":"https://api.github.com/users/liyichao","html_url":"https://github.com/liyichao","followers_url":"https://api.github.com/users/liyichao/followers","following_url":"https://api.github.com/users/liyichao/following{/other_user}","gists_url":"https://api.github.com/users/liyichao/gists{/gist_id}","starred_url":"https://api.github.com/users/liyichao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liyichao/subscriptions","organizations_url":"https://api.github.com/users/liyichao/orgs","repos_url":"https://api.github.com/users/liyichao/repos","events_url":"https://api.github.com/users/liyichao/events{/privacy}","received_events_url":"https://api.github.com/users/liyichao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T05:16:37Z","updated_at":"2022-12-02T05:16:37Z","author_association":"NONE","body":"@wwbmmm I have merged master, the workflows need approval","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334775241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334939533","html_url":"https://github.com/apache/brpc/issues/2029#issuecomment-1334939533","issue_url":"https://api.github.com/repos/apache/brpc/issues/2029","id":1334939533,"node_id":"IC_kwDOBhmkcs5PkY-N","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T08:58:28Z","updated_at":"2022-12-02T08:58:28Z","author_association":"CONTRIBUTOR","body":"你是指istio的xds协议吗？\r\n那个是grpc stream协议，目前还不支持","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334939533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334944220","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1334944220","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1334944220,"node_id":"IC_kwDOBhmkcs5PkaHc","user":{"login":"wwbmmm","id":3894631,"node_id":"MDQ6VXNlcjM4OTQ2MzE=","avatar_url":"https://avatars.githubusercontent.com/u/3894631?v=4","gravatar_id":"","url":"https://api.github.com/users/wwbmmm","html_url":"https://github.com/wwbmmm","followers_url":"https://api.github.com/users/wwbmmm/followers","following_url":"https://api.github.com/users/wwbmmm/following{/other_user}","gists_url":"https://api.github.com/users/wwbmmm/gists{/gist_id}","starred_url":"https://api.github.com/users/wwbmmm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wwbmmm/subscriptions","organizations_url":"https://api.github.com/users/wwbmmm/orgs","repos_url":"https://api.github.com/users/wwbmmm/repos","events_url":"https://api.github.com/users/wwbmmm/events{/privacy}","received_events_url":"https://api.github.com/users/wwbmmm/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T09:00:29Z","updated_at":"2022-12-02T09:00:29Z","author_association":"CONTRIBUTOR","body":"the rdma-old branch is no longer maintained","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334944220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334955599","html_url":"https://github.com/apache/brpc/issues/2031#issuecomment-1334955599","issue_url":"https://api.github.com/repos/apache/brpc/issues/2031","id":1334955599,"node_id":"IC_kwDOBhmkcs5Pkc5P","user":{"login":"changchengx","id":19362263,"node_id":"MDQ6VXNlcjE5MzYyMjYz","avatar_url":"https://avatars.githubusercontent.com/u/19362263?v=4","gravatar_id":"","url":"https://api.github.com/users/changchengx","html_url":"https://github.com/changchengx","followers_url":"https://api.github.com/users/changchengx/followers","following_url":"https://api.github.com/users/changchengx/following{/other_user}","gists_url":"https://api.github.com/users/changchengx/gists{/gist_id}","starred_url":"https://api.github.com/users/changchengx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/changchengx/subscriptions","organizations_url":"https://api.github.com/users/changchengx/orgs","repos_url":"https://api.github.com/users/changchengx/repos","events_url":"https://api.github.com/users/changchengx/events{/privacy}","received_events_url":"https://api.github.com/users/changchengx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T09:06:40Z","updated_at":"2022-12-02T09:06:40Z","author_association":"NONE","body":"@wwbmmm \r\n1. Is it normal to run two server processes and use one client process to connect with the two server processes when running rdma_performance with using RDMA to get the performance data?\r\n\r\n3. It rdma-old branch, when connecting one client process  & one server process, it only create one QP when running rdma_performance/verbs. However, in master branch, the client will create lots of QPs when it connects with one server process. Is this the expected behavior? You can check the QPs info with below command:\r\n```\r\n# ls -d /sys/kernel/debug/mlx5/*/QPs\r\n/sys/kernel/debug/mlx5/0000:17:00.0/QPs  /sys/kernel/debug/mlx5/0000:17:00.1/QPs  /sys/kernel/debug/mlx5/0000:ca:00.0/QPs\r\n```","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1334955599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1335067131","html_url":"https://github.com/apache/brpc/pull/2005#issuecomment-1335067131","issue_url":"https://api.github.com/repos/apache/brpc/issues/2005","id":1335067131,"node_id":"IC_kwDOBhmkcs5Pk4H7","user":{"login":"Tuvie","id":5780312,"node_id":"MDQ6VXNlcjU3ODAzMTI=","avatar_url":"https://avatars.githubusercontent.com/u/5780312?v=4","gravatar_id":"","url":"https://api.github.com/users/Tuvie","html_url":"https://github.com/Tuvie","followers_url":"https://api.github.com/users/Tuvie/followers","following_url":"https://api.github.com/users/Tuvie/following{/other_user}","gists_url":"https://api.github.com/users/Tuvie/gists{/gist_id}","starred_url":"https://api.github.com/users/Tuvie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tuvie/subscriptions","organizations_url":"https://api.github.com/users/Tuvie/orgs","repos_url":"https://api.github.com/users/Tuvie/repos","events_url":"https://api.github.com/users/Tuvie/events{/privacy}","received_events_url":"https://api.github.com/users/Tuvie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T10:49:44Z","updated_at":"2022-12-02T10:49:44Z","author_association":"CONTRIBUTOR","body":"Has resolved conflict. Any plan to merge? ","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1335067131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1335170504","html_url":"https://github.com/apache/brpc/issues/1895#issuecomment-1335170504","issue_url":"https://api.github.com/repos/apache/brpc/issues/1895","id":1335170504,"node_id":"IC_kwDOBhmkcs5PlRXI","user":{"login":"yanglimingcn","id":7091130,"node_id":"MDQ6VXNlcjcwOTExMzA=","avatar_url":"https://avatars.githubusercontent.com/u/7091130?v=4","gravatar_id":"","url":"https://api.github.com/users/yanglimingcn","html_url":"https://github.com/yanglimingcn","followers_url":"https://api.github.com/users/yanglimingcn/followers","following_url":"https://api.github.com/users/yanglimingcn/following{/other_user}","gists_url":"https://api.github.com/users/yanglimingcn/gists{/gist_id}","starred_url":"https://api.github.com/users/yanglimingcn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yanglimingcn/subscriptions","organizations_url":"https://api.github.com/users/yanglimingcn/orgs","repos_url":"https://api.github.com/users/yanglimingcn/repos","events_url":"https://api.github.com/users/yanglimingcn/events{/privacy}","received_events_url":"https://api.github.com/users/yanglimingcn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-02T12:36:11Z","updated_at":"2022-12-02T12:36:11Z","author_association":"CONTRIBUTOR","body":"这个啥时候发pr","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1335170504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336130225","html_url":"https://github.com/apache/brpc/issues/2025#issuecomment-1336130225","issue_url":"https://api.github.com/repos/apache/brpc/issues/2025","id":1336130225,"node_id":"IC_kwDOBhmkcs5Po7qx","user":{"login":"SillyBoyenjoy","id":49710570,"node_id":"MDQ6VXNlcjQ5NzEwNTcw","avatar_url":"https://avatars.githubusercontent.com/u/49710570?v=4","gravatar_id":"","url":"https://api.github.com/users/SillyBoyenjoy","html_url":"https://github.com/SillyBoyenjoy","followers_url":"https://api.github.com/users/SillyBoyenjoy/followers","following_url":"https://api.github.com/users/SillyBoyenjoy/following{/other_user}","gists_url":"https://api.github.com/users/SillyBoyenjoy/gists{/gist_id}","starred_url":"https://api.github.com/users/SillyBoyenjoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SillyBoyenjoy/subscriptions","organizations_url":"https://api.github.com/users/SillyBoyenjoy/orgs","repos_url":"https://api.github.com/users/SillyBoyenjoy/repos","events_url":"https://api.github.com/users/SillyBoyenjoy/events{/privacy}","received_events_url":"https://api.github.com/users/SillyBoyenjoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-03T10:27:11Z","updated_at":"2022-12-03T10:27:11Z","author_association":"NONE","body":"应该打开了，dyld是ios系统main执行前的动态链接器？我把LINK_SO打开后bt好像详细了点，问题似乎出在class_name.cpp里面？\r\n* thread 1, queue = 'com.apple.main-thread', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\r\n  * frame 0: 0x0000000000000000\r\n    frame 1: 0x00000001012e071c libbrpc.dylib`butil::demangle(name=<unavailable>) at class_name.cpp:54:9 [opt]\r\n    frame 2: 0x00000001000057f0 echo_server`::__cxx_global_var_init.24() at class_name.h:35:62 [opt]\r\n    frame 3: 0x0000000100031c1c dyld`invocation function for block in dyld4::Loader::findAndRunAllInitializers(dyld4::RuntimeState&) const + 164\r\n    frame 4: 0x000000010005afcc dyld`invocation function for block in dyld3::MachOAnalyzer::forEachInitializer(Diagnostics&, dyld3::MachOAnalyzer::VMAddrConverter const&, void (unsigned int) block_pointer, void const*) const + 340\r\n    frame 5: 0x0000000100051988 dyld`invocation function for block in dyld3::MachOFile::forEachSection(void (dyld3::MachOFile::SectionInfo const&, bool, bool&) block_pointer) const + 532\r\n    frame 6: 0x000000010001df98 dyld`dyld3::MachOFile::forEachLoadCommand(Diagnostics&, void (load_command const*, bool&) block_pointer) const + 168\r\n    frame 7: 0x000000010005172c dyld`dyld3::MachOFile::forEachSection(void (dyld3::MachOFile::SectionInfo const&, bool, bool&) block_pointer) const + 192\r\n    frame 8: 0x000000010005aa14 dyld`dyld3::MachOAnalyzer::forEachInitializer(Diagnostics&, dyld3::MachOAnalyzer::VMAddrConverter const&, void (unsigned int) block_pointer, void const*) const + 516\r\n    frame 9: 0x0000000100031b5c dyld`dyld4::Loader::findAndRunAllInitializers(dyld4::RuntimeState&) const + 172\r\n    frame 10: 0x0000000100031d00 dyld`dyld4::Loader::runInitializersBottomUp(dyld4::RuntimeState&, dyld3::Array<dyld4::Loader const*>&) const + 208\r\n    frame 11: 0x0000000100031dcc dyld`dyld4::Loader::runInitializersBottomUpPlusUpwardLinks(dyld4::RuntimeState&) const + 124\r\n    frame 12: 0x0000000100046db4 dyld`dyld4::APIs::runAllInitializersForMain() + 312\r\n    frame 13: 0x0000000100021e00 dyld`dyld4::prepare(dyld4::APIs&, dyld3::MachOAnalyzer const*) + 3100\r\n    frame 14: 0x00000001000210d4 dyld`start + 488","reactions":{"url":"https://api.github.com/repos/apache/brpc/issues/comments/1336130225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]