[{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429343112","html_url":"https://github.com/apache/incubator-annotator/pull/41#issuecomment-429343112","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/41","id":429343112,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTM0MzExMg==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-12T14:22:37Z","updated_at":"2018-10-12T14:22:37Z","author_association":"MEMBER","body":"@tilgovi @niq does @jccr need to sign an ICLA before we merge this? https://www.apache.org/licenses/#clas\r\n\r\nThis question would also pertain to @JakeHartnell's contributions here and the website https://github.com/apache/incubator-annotator-website/graphs/contributors","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429343112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429379115","html_url":"https://github.com/apache/incubator-annotator/pull/41#issuecomment-429379115","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/41","id":429379115,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTM3OTExNQ==","user":{"login":"niq","id":983664,"node_id":"MDQ6VXNlcjk4MzY2NA==","avatar_url":"https://avatars.githubusercontent.com/u/983664?v=4","gravatar_id":"","url":"https://api.github.com/users/niq","html_url":"https://github.com/niq","followers_url":"https://api.github.com/users/niq/followers","following_url":"https://api.github.com/users/niq/following{/other_user}","gists_url":"https://api.github.com/users/niq/gists{/gist_id}","starred_url":"https://api.github.com/users/niq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/niq/subscriptions","organizations_url":"https://api.github.com/users/niq/orgs","repos_url":"https://api.github.com/users/niq/repos","events_url":"https://api.github.com/users/niq/events{/privacy}","received_events_url":"https://api.github.com/users/niq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-12T16:12:51Z","updated_at":"2018-10-12T16:12:51Z","author_association":"MEMBER","body":"\n> On 12 Oct 2018, at 15:22, BigBlueHat <notifications@github.com> wrote:\n> \n> @tilgovi @niq does @jccr need to sign an ICLA before we merge this? https://www.apache.org/licenses/#clas\n\nNo.  We can (and regularly do) accept small patches from third-parties who contribute them.\n\nIt might be appropriate if (and only if) jccr is taking a longer-term interest and likely to\ncontribute regularly (or at least semi-regularly).  But that would be a matter to raise at apache,\nnot github.\n\n-- \nNick Kew","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429379115/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429381222","html_url":"https://github.com/apache/incubator-annotator/pull/41#issuecomment-429381222","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/41","id":429381222,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTM4MTIyMg==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-12T16:19:43Z","updated_at":"2018-10-12T16:19:43Z","author_association":"MEMBER","body":"Thanks for this contribution @jccr! We look forward to many more. ðŸ˜‰ ","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429381222/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429920858","html_url":"https://github.com/apache/incubator-annotator/pull/42#issuecomment-429920858","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/42","id":429920858,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTkyMDg1OA==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-15T16:24:02Z","updated_at":"2018-10-15T16:24:02Z","author_association":"MEMBER","body":"@tilgovi thanks for tackling this upgrade! Any thoughts on the broken `import` situation?\r\nhttps://travis-ci.org/apache/incubator-annotator/jobs/441169476#L518","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429920858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429927283","html_url":"https://github.com/apache/incubator-annotator/pull/42#issuecomment-429927283","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/42","id":429927283,"node_id":"MDEyOklzc3VlQ29tbWVudDQyOTkyNzI4Mw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-15T16:43:19Z","updated_at":"2018-10-15T16:43:19Z","author_association":"CONTRIBUTOR","body":"Yes. First, #43. Next, turns out another misbehaviour we've been coasting by on is mocha importing mjs files.\r\n\r\nI might move all test files to .js, or at least have an entry point .js test file that runs as esm/babel compatibility mode and imports the others from .mjs. I have the latter approach (also taken by esm itself) working locally, just haven't pushed everything yet.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/429927283/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/433399606","html_url":"https://github.com/apache/incubator-annotator/issues/45#issuecomment-433399606","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/45","id":433399606,"node_id":"MDEyOklzc3VlQ29tbWVudDQzMzM5OTYwNg==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-10-26T13:01:46Z","updated_at":"2018-10-26T13:01:46Z","author_association":"MEMBER","body":"There's recent discussion here for those who want to follow along there and/or sign-up for that list:\r\nhttps://lists.w3.org/Archives/Public/public-aria/2018Oct/0016.html","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/433399606/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/439415504","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-439415504","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":439415504,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTQxNTUwNA==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-16T14:47:39Z","updated_at":"2018-11-16T14:47:39Z","author_association":"MEMBER","body":"@BigBlueHat You're thinking here about sections that can be described by element boundaries, but not arbitrary indexing (character-by-character) into texts, right?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/439415504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/439972525","html_url":"https://github.com/apache/incubator-annotator/pull/48#issuecomment-439972525","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/48","id":439972525,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTk3MjUyNQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-19T17:20:01Z","updated_at":"2018-11-19T17:20:01Z","author_association":"MEMBER","body":"Good catch! That's where we were doing issues/wiki prior to getting GitHub setup for this project. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/439972525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/440413927","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-440413927","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":440413927,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDQxMzkyNw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T20:12:26Z","updated_at":"2018-11-20T20:12:26Z","author_association":"CONTRIBUTOR","body":"@ajs6f arbitrary indexing.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/440413927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/441663411","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-441663411","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":441663411,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTY2MzQxMQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T14:46:32Z","updated_at":"2018-11-26T14:46:32Z","author_association":"MEMBER","body":"@ajs6f mainly selections that traverse multiple element boundaries--i.e. selecting part of A and part of B. Trees don't do that so good.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/441663411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/450985246","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-450985246","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":450985246,"node_id":"MDEyOklzc3VlQ29tbWVudDQ1MDk4NTI0Ng==","user":{"login":"ajs6f","id":110994,"node_id":"MDQ6VXNlcjExMDk5NA==","avatar_url":"https://avatars.githubusercontent.com/u/110994?v=4","gravatar_id":"","url":"https://api.github.com/users/ajs6f","html_url":"https://github.com/ajs6f","followers_url":"https://api.github.com/users/ajs6f/followers","following_url":"https://api.github.com/users/ajs6f/following{/other_user}","gists_url":"https://api.github.com/users/ajs6f/gists{/gist_id}","starred_url":"https://api.github.com/users/ajs6f/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajs6f/subscriptions","organizations_url":"https://api.github.com/users/ajs6f/orgs","repos_url":"https://api.github.com/users/ajs6f/repos","events_url":"https://api.github.com/users/ajs6f/events{/privacy}","received_events_url":"https://api.github.com/users/ajs6f/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-01-02T21:07:32Z","updated_at":"2019-01-02T21:07:32Z","author_association":"MEMBER","body":"This seems pretty challenging. I did [some work in a similar area ](https://www.balisage.net/Proceedings/vol5/html/Cayless01/BalisageVol5-Cayless01.html) years ago but it was simple and text-only, and it wasn't completely trivial. Is this really meant for text (or text-y) documents, or anything that could be addressed by the DOM (SVG, other things like that)?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/450985246/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/479896983","html_url":"https://github.com/apache/incubator-annotator/issues/44#issuecomment-479896983","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/44","id":479896983,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTg5Njk4Mw==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-04T13:28:55Z","updated_at":"2019-04-04T13:28:55Z","author_association":"MEMBER","body":"As long as this doesn't further slow our coding on our actual project, I'm all in. ðŸ˜‰ ","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/479896983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/479897600","html_url":"https://github.com/apache/incubator-annotator/pull/42#issuecomment-479897600","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/42","id":479897600,"node_id":"MDEyOklzc3VlQ29tbWVudDQ3OTg5NzYwMA==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-04T13:30:29Z","updated_at":"2019-04-04T13:30:29Z","author_association":"MEMBER","body":"@tilgovi do you know the current status of this PR? #43 is merged, so not sure what else might be blocking this one. Happy to help close the loop, but I know you mentioned you have other pending code. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/479897600/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/480373363","html_url":"https://github.com/apache/incubator-annotator/pull/42#issuecomment-480373363","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/42","id":480373363,"node_id":"MDEyOklzc3VlQ29tbWVudDQ4MDM3MzM2Mw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-04-05T18:15:10Z","updated_at":"2019-04-05T18:15:10Z","author_association":"CONTRIBUTOR","body":"I'll make new PRs to do chunks of this.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/480373363/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/494935397","html_url":"https://github.com/apache/incubator-annotator/issues/44#issuecomment-494935397","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/44","id":494935397,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDkzNTM5Nw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-22T19:27:00Z","updated_at":"2019-05-22T19:27:00Z","author_association":"CONTRIBUTOR","body":"I changed my mind. I propose we close this issue an not worry so much about automating every little thing until we actually make releases often enough that we feel that pain.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/494935397/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/494935699","html_url":"https://github.com/apache/incubator-annotator/issues/38#issuecomment-494935699","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/38","id":494935699,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NDkzNTY5OQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-22T19:27:52Z","updated_at":"2019-05-22T19:27:52Z","author_association":"CONTRIBUTOR","body":"I propose we bump this out of the first release. Let's just get the basics. I'm not yet sure whether those packages have the right API for us.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/494935699/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/495240205","html_url":"https://github.com/apache/incubator-annotator/issues/44#issuecomment-495240205","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/44","id":495240205,"node_id":"MDEyOklzc3VlQ29tbWVudDQ5NTI0MDIwNQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-05-23T14:22:32Z","updated_at":"2019-05-23T14:22:32Z","author_association":"MEMBER","body":"Agreed. This one can wait.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/495240205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/500187281","html_url":"https://github.com/apache/incubator-annotator/issues/52#issuecomment-500187281","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/52","id":500187281,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMDE4NzI4MQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-09T05:56:04Z","updated_at":"2019-06-09T05:56:04Z","author_association":"CONTRIBUTOR","body":"There is a runnable demo included if you check out the repository, with which you can play around and get familiar with the code.\r\n\r\nIt is also live on the website here: http://annotator.apache.org/demo/","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/500187281/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/501846314","html_url":"https://github.com/apache/incubator-annotator/issues/51#issuecomment-501846314","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/51","id":501846314,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTg0NjMxNA==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T19:27:23Z","updated_at":"2019-06-13T19:27:23Z","author_association":"MEMBER","body":"@tilgovi please do bring in this rewrite. We can make it available as it's own module for others to use as well.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/501846314/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/501858119","html_url":"https://github.com/apache/incubator-annotator/issues/51#issuecomment-501858119","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/51","id":501858119,"node_id":"MDEyOklzc3VlQ29tbWVudDUwMTg1ODExOQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-13T20:02:45Z","updated_at":"2019-06-13T20:02:45Z","author_association":"CONTRIBUTOR","body":"Will do.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/501858119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504705777","html_url":"https://github.com/apache/incubator-annotator/issues/25#issuecomment-504705777","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/25","id":504705777,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDcwNTc3Nw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-22T23:27:57Z","updated_at":"2019-06-22T23:27:57Z","author_association":"CONTRIBUTOR","body":"Fixed in c7e98eeac3e07e45b14b94e2aec2add8f137aea9.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504705777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504707918","html_url":"https://github.com/apache/incubator-annotator/issues/51#issuecomment-504707918","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/51","id":504707918,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDcwNzkxOA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-23T00:17:33Z","updated_at":"2019-06-23T00:17:33Z","author_association":"CONTRIBUTOR","body":"As this dependency was removed in c7e98eeac3e07e45b14b94e2aec2add8f137aea9, I am going to defer this decision for a while.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504707918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504708066","html_url":"https://github.com/apache/incubator-annotator/issues/50#issuecomment-504708066","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/50","id":504708066,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNDcwODA2Ng==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-23T00:20:24Z","updated_at":"2019-06-23T00:20:28Z","author_association":"CONTRIBUTOR","body":"I have long thought that mozilla/fathom would be an interesting tool to use for such things.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/504708066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/506492876","html_url":"https://github.com/apache/incubator-annotator/issues/38#issuecomment-506492876","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/38","id":506492876,"node_id":"MDEyOklzc3VlQ29tbWVudDUwNjQ5Mjg3Ng==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-06-27T20:11:49Z","updated_at":"2019-06-27T20:11:49Z","author_association":"CONTRIBUTOR","body":"Relatedly, as I just wrote on the [dev mailing list](https://mail-archives.apache.org/mod_mbox/annotator-dev/201906.mbox/browser):\r\n\r\n> Do you have, or else shall we perhaps create, an overview of the modules we want to create, and how they relate to each other? That way we would have a clear reason why we have and maintain each module. In the attached graph, I sketched the relations between the mentioned modules (as I understand them), while already adding two hypothetical candidates in grey.\r\n\r\nBut as the dev mailing list appears not to support attaching images, I hope it helps if I post the graph here:\r\n\r\n![modules-overview](https://user-images.githubusercontent.com/4191409/60297298-2b8e5300-9928-11e9-906d-aba867b05d6d.png)\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/506492876/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/534354809","html_url":"https://github.com/apache/incubator-annotator/issues/27#issuecomment-534354809","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/27","id":534354809,"node_id":"MDEyOklzc3VlQ29tbWVudDUzNDM1NDgwOQ==","user":{"login":"mengxu2018","id":20497420,"node_id":"MDQ6VXNlcjIwNDk3NDIw","avatar_url":"https://avatars.githubusercontent.com/u/20497420?v=4","gravatar_id":"","url":"https://api.github.com/users/mengxu2018","html_url":"https://github.com/mengxu2018","followers_url":"https://api.github.com/users/mengxu2018/followers","following_url":"https://api.github.com/users/mengxu2018/following{/other_user}","gists_url":"https://api.github.com/users/mengxu2018/gists{/gist_id}","starred_url":"https://api.github.com/users/mengxu2018/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mengxu2018/subscriptions","organizations_url":"https://api.github.com/users/mengxu2018/orgs","repos_url":"https://api.github.com/users/mengxu2018/repos","events_url":"https://api.github.com/users/mengxu2018/events{/privacy}","received_events_url":"https://api.github.com/users/mengxu2018/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-24T01:59:38Z","updated_at":"2019-09-24T01:59:38Z","author_association":"NONE","body":"thanks. Upgrading works","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/534354809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/539655970","html_url":"https://github.com/apache/incubator-annotator/issues/55#issuecomment-539655970","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/55","id":539655970,"node_id":"MDEyOklzc3VlQ29tbWVudDUzOTY1NTk3MA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-08T19:02:28Z","updated_at":"2019-10-08T19:02:28Z","author_association":"CONTRIBUTOR","body":"See also WICG/ScrollToTextFragment#42","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/539655970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/540742888","html_url":"https://github.com/apache/incubator-annotator/pull/56#issuecomment-540742888","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/56","id":540742888,"node_id":"MDEyOklzc3VlQ29tbWVudDU0MDc0Mjg4OA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-10-10T19:26:33Z","updated_at":"2019-10-10T19:26:33Z","author_association":"CONTRIBUTOR","body":"Let's merge it and go from there!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/540742888/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/552475416","html_url":"https://github.com/apache/incubator-annotator/pull/58#issuecomment-552475416","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/58","id":552475416,"node_id":"MDEyOklzc3VlQ29tbWVudDU1MjQ3NTQxNg==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-11-11T14:50:08Z","updated_at":"2019-11-11T14:50:08Z","author_association":"MEMBER","body":"Good thinking @tilgovi! Change made. This is now just the configuration, so imma merge it. ðŸ˜€ ","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/552475416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/592187087","html_url":"https://github.com/apache/incubator-annotator/issues/60#issuecomment-592187087","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/60","id":592187087,"node_id":"MDEyOklzc3VlQ29tbWVudDU5MjE4NzA4Nw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-02-27T21:32:34Z","updated_at":"2020-02-27T21:32:42Z","author_association":"CONTRIBUTOR","body":"We might also polyfill just the `window.location.fragmentDirective` as a building block for this: https://wicg.github.io/ScrollToTextFragment/#feature-detectability","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/592187087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601307168","html_url":"https://github.com/apache/incubator-annotator/issues/63#issuecomment-601307168","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/63","id":601307168,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTMwNzE2OA==","user":{"login":"jccr","id":5132652,"node_id":"MDQ6VXNlcjUxMzI2NTI=","avatar_url":"https://avatars.githubusercontent.com/u/5132652?v=4","gravatar_id":"","url":"https://api.github.com/users/jccr","html_url":"https://github.com/jccr","followers_url":"https://api.github.com/users/jccr/followers","following_url":"https://api.github.com/users/jccr/following{/other_user}","gists_url":"https://api.github.com/users/jccr/gists{/gist_id}","starred_url":"https://api.github.com/users/jccr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jccr/subscriptions","organizations_url":"https://api.github.com/users/jccr/orgs","repos_url":"https://api.github.com/users/jccr/repos","events_url":"https://api.github.com/users/jccr/events{/privacy}","received_events_url":"https://api.github.com/users/jccr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T17:16:07Z","updated_at":"2020-03-19T17:16:07Z","author_association":"CONTRIBUTOR","body":"Is there a convention/policy within Apache's to allow for a `LICENSE-3RD-PARTY` file? Would that help with the separation of dependency licenses from the main project's license?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601307168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601307688","html_url":"https://github.com/apache/incubator-annotator/issues/63#issuecomment-601307688","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/63","id":601307688,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTMwNzY4OA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T17:17:05Z","updated_at":"2020-03-19T17:17:05Z","author_association":"CONTRIBUTOR","body":"I think the process is to append it to LICENSE. Here's the documentation: http://www.apache.org/dev/licensing-howto.html","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601307688/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601313201","html_url":"https://github.com/apache/incubator-annotator/issues/63#issuecomment-601313201","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/63","id":601313201,"node_id":"MDEyOklzc3VlQ29tbWVudDYwMTMxMzIwMQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-03-19T17:27:27Z","updated_at":"2020-03-19T17:27:27Z","author_association":"MEMBER","body":"Getting this in order now. I'd been using https://github.com/apache/couchdb/blob/master/NOTICE for reference...not realizing that https://github.com/apache/couchdb/blob/master/LICENSE also had more... It's becoming clearer...with time. ðŸ˜ƒ ","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/601313201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/607938177","html_url":"https://github.com/apache/incubator-annotator/issues/70#issuecomment-607938177","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/70","id":607938177,"node_id":"MDEyOklzc3VlQ29tbWVudDYwNzkzODE3Nw==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-02T16:05:06Z","updated_at":"2020-04-02T16:05:06Z","author_association":"MEMBER","body":"I removed a couple original suggestions. [Calimachus](https://github.com/3-Round-Stones/callimachus) looks abandoned (sadly) and [Virtuoso](http://vos.openlinksw.com/owiki/wiki/VOS/VirtLDP) is a GPLv2 project--so harder for us (as an Apache project) to contribute to directly.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/607938177/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608413746","html_url":"https://github.com/apache/incubator-annotator/pull/71#issuecomment-608413746","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/71","id":608413746,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQxMzc0Ng==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T12:46:43Z","updated_at":"2020-04-03T12:46:43Z","author_association":"CONTRIBUTOR","body":"And fantastic that you made work of this right away!\r\n\r\nI did however plan to first merge the tests and tweaks I did yesterday, in order to keep them available in our history (without having a dead branch linger around forever).\r\n\r\nI will just merge those additions first, then we can remove them again while merging this. :)","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608413746/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608422127","html_url":"https://github.com/apache/incubator-annotator/pull/71#issuecomment-608422127","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/71","id":608422127,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQyMjEyNw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T13:05:44Z","updated_at":"2020-04-03T13:05:44Z","author_association":"CONTRIBUTOR","body":"To resolve merge conflicts already, I rebased onto master and force-pushed this PR. Hope thatâ€™s okay!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608422127/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608478918","html_url":"https://github.com/apache/incubator-annotator/pull/71#issuecomment-608478918","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/71","id":608478918,"node_id":"MDEyOklzc3VlQ29tbWVudDYwODQ3ODkxOA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-03T14:50:46Z","updated_at":"2020-04-03T14:50:46Z","author_association":"CONTRIBUTOR","body":"Excellent! Thank you.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/608478918/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/614736335","html_url":"https://github.com/apache/incubator-annotator/issues/22#issuecomment-614736335","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/22","id":614736335,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNDczNjMzNQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-16T15:50:21Z","updated_at":"2020-04-16T15:50:21Z","author_association":"CONTRIBUTOR","body":"Done in PR 59: <https://github.com/apache/incubator-annotator/pull/59>","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/614736335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/617187237","html_url":"https://github.com/apache/incubator-annotator/issues/53#issuecomment-617187237","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/53","id":617187237,"node_id":"MDEyOklzc3VlQ29tbWVudDYxNzE4NzIzNw==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-21T13:41:07Z","updated_at":"2020-04-21T13:41:07Z","author_association":"MEMBER","body":"ARIA Annotations are headed to be a core part of ARIA 1.3 and implemented in Firefox 75 (at least):\r\nhttps://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Annotations\r\n\r\nIt'd be super handy to help folks add Web Annotations to a web page with properly accessible HTML.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/617187237/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/625320812","html_url":"https://github.com/apache/incubator-annotator/issues/63#issuecomment-625320812","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/63","id":625320812,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNTMyMDgxMg==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-07T15:20:48Z","updated_at":"2020-05-07T15:20:48Z","author_association":"MEMBER","body":"Not sure why this didn't auto-close, but this is completed in #66.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/625320812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/629384737","html_url":"https://github.com/apache/incubator-annotator/issues/77#issuecomment-629384737","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/77","id":629384737,"node_id":"MDEyOklzc3VlQ29tbWVudDYyOTM4NDczNw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-15T17:27:57Z","updated_at":"2020-05-15T17:27:57Z","author_association":"CONTRIBUTOR","body":"In the call yesterday we discussed moving to jest as a possible solution. [Karma](https://github.com/karma-runner/karma) was suggested as a way to run automated tests in actual browsers, not just jsdom; this seems a good thing to do anyway, @tilgovi volunteered to set this up soon.\r\n\r\nAlso [global-jsdom](https://github.com/modosc/global-jsdom) was suggested, which is a recent reincarnation of [jsdom-global](https://github.com/rstacruz/jsdom-global) that is too outdated for us to use (likewise for [browser-env](https://github.com/lukechilds/browser-env/), etc; forking is the new maintaining). This seems to be usable for the time being, unblocking me right now!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/629384737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635372689","html_url":"https://github.com/apache/incubator-annotator/pull/79#issuecomment-635372689","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/79","id":635372689,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTM3MjY4OQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T14:07:58Z","updated_at":"2020-05-28T14:08:13Z","author_association":"CONTRIBUTOR","body":"Note that this branch grows forth from the typescript branch, PR #74, and may best be rebased onto master after that one has been finalised and merged.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635372689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635380270","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-635380270","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":635380270,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTM4MDI3MA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T14:21:09Z","updated_at":"2020-05-28T14:21:09Z","author_association":"CONTRIBUTOR","body":"> Could `Node.normalize()` be used on `highlightElement.parentNode`?\r\n\r\nIndeed! That idea popped up recently too, and is what we started doing in the demo [1][]. I was not sure yet whether we would want to do it in the `removeHighlight` function. However it would not be a perfect undo function either, as it would also merge nodes that were already split beforehand (for some reason).\r\n\r\nBut might there be occasions where the user may *not* want their text nodes to be normalised? So far I have not come up with any such situation, so it may be a good idea to just run `parentNode.normalize()` indeed.\r\n\r\n[1]: https://github.com/apache/incubator-annotator/blob/ac3b5bd4b2793b8f01a12bcd328b6beb947069fc/web/demo/index.js#L91","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635380270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635428423","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-635428423","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":635428423,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTQyODQyMw==","user":{"login":"danielweck","id":625201,"node_id":"MDQ6VXNlcjYyNTIwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/625201?v=4","gravatar_id":"","url":"https://api.github.com/users/danielweck","html_url":"https://github.com/danielweck","followers_url":"https://api.github.com/users/danielweck/followers","following_url":"https://api.github.com/users/danielweck/following{/other_user}","gists_url":"https://api.github.com/users/danielweck/gists{/gist_id}","starred_url":"https://api.github.com/users/danielweck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielweck/subscriptions","organizations_url":"https://api.github.com/users/danielweck/orgs","repos_url":"https://api.github.com/users/danielweck/repos","events_url":"https://api.github.com/users/danielweck/events{/privacy}","received_events_url":"https://api.github.com/users/danielweck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-28T15:41:50Z","updated_at":"2020-05-28T15:47:53Z","author_association":"NONE","body":"> However it would not be a perfect undo function either, as it would also merge nodes that were already split beforehand (for some reason).\r\n\r\nMy thoughts exactly. Even if non-normalized empty / adjacent text nodes is a \"weird\" edge-case to start with, the assertion that the DOM will be restored to its exact original form is not 100% bullet proof, which can be problematic in usage scenarios where the DOM must be a source of truth for further selections / annotations. A pragmatic workaround for this is to reload the document from scratch instead of walking the tree in order to revert each individual DOM mutation, but this may not be a practical solution in usage scenarios where some context must persist.\r\n\r\nAs always, there are pros/cons, and interspersing DOM elements in order to \"mark\" text ranges no doubt has its merits. However, there are evident computational costs in \"wrapping\" + \"unwrapping\" DOM mutations, possibly also triggering prohibitive web browser's render/layout. In my experience though, performance degradation only becomes perceivable in stress-tested cases, for example when highlighting many thousands of search results inside a large document. I realize that the vast majority of use-cases probably do not require such level of scrutiny.\r\n\r\nJust a bit of background to explain why I am paying attention to Apache Annotator, Hypothesis, etc.:\r\n\r\nI work on a Readium project where document \"annotations\" are rendered using pixel-perfect overlays (i.e. shape \"drawings\" made with SVG or HTML elements + CSS), which are displayed above text characters using CSS mix blend mode 'multiply' in order to preserve text contrast, and with a translucent background color to \"paint\" the actual highlighting shape.\r\n\r\nDOM mutations are batched and inserted at the end of the original document (using DocumentFragments), which is a more efficient technique than tree-walking and interspersing individual mutations. The primary computational cost is therefore the calculation of \"client rectangles\" (i.e. 2D shape coordinates at the character level), but this is relatively cheap if no re-renders are triggered in the web browser engine. The arithmetics needed to optimize the bounding shapes are cheap too (i.e. elimination of duplicates, overlapping regions, thin areas, etc.)\r\n\r\nBundling DOM \"annotations\" together at the end of the original DOM makes it easy to blacklist \"foreign\" document artefacts when calculating / matching references to the unadulterated HTML (simply speaking, we can just ignore whole subtrees when computing CSS selectors or when resolving DOM Ranges, for example). \r\n\r\nWe use pointer-events 'none' so that annotation overlays are effectively \"transparent\" to user interactions with the underlying document, which in turn makes it possible to create overlapping text selections / highlights. That being said, annotation overlays remain \"tactile\" in the sense that we simulate direct interaction using event delegation, for example to implement hit-testing with the mouse cursor, for hover and click actions at the level of each individual highlight.\r\n\r\nAs a final note, I will say that out-of-band overlays (versus inline / interspersed DOM mutations)  introduced non-trivial implementation challenges related to the different display modes our application supports. This is in the EPUB context, so we have the traditional vertical \"webby\" scrolling view, a paginated mode (using CSS Columns), and fixed-layout (i.e. document root scaled with a zoom factor to fit entirely into the visible viewport). Once the idiosyncrasies of the CSS box model with `position` `absolute` vs. `fixed` in these different rendering contexts were figured-out ... we were good to go :)\r\n\r\nSorry to bombard you with slightly-unrelated information, I hope this is a useful exchange nonetheless. Keep up the good work in Apache Annotator and related projects (CC @tilgovi too).\r\n\r\nPS: our project will at some point visit the problem space of creating interoperable annotations, likely relying on the W3C standard(s)...so I will continue to watch your projects.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635428423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635894043","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-635894043","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":635894043,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTg5NDA0Mw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T10:15:23Z","updated_at":"2020-05-29T10:15:23Z","author_association":"CONTRIBUTOR","body":"Thanks for the elaboration, this sounds like great work. A highlighter that overlays on the dom seems preferable in many situations. Is/will your implementation be available as a module?\r\n\r\nNote that we are not at all attached to our current highlighter implementation. We mainly included it in this repository in an attempt to be helpful to users that just want *some* way to visualise a range of text. But highlighting, and UI stuff in general, seems like something that has so many trade-offs (and entanglements with UI frameworks) that we better remain mostly unopinionated about it, and instead we could make it easy for users to mix and match our modules with any third party modules that fit their needs â€” including perhaps yours?\r\n\r\nIt would be great to learn more about your application and ways in which our work could become of use to you; be welcome on our mailing list, IRC, and/or weekly video calls.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635894043/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635902789","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-635902789","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":635902789,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTkwMjc4OQ==","user":{"login":"danielweck","id":625201,"node_id":"MDQ6VXNlcjYyNTIwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/625201?v=4","gravatar_id":"","url":"https://api.github.com/users/danielweck","html_url":"https://github.com/danielweck","followers_url":"https://api.github.com/users/danielweck/followers","following_url":"https://api.github.com/users/danielweck/following{/other_user}","gists_url":"https://api.github.com/users/danielweck/gists{/gist_id}","starred_url":"https://api.github.com/users/danielweck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielweck/subscriptions","organizations_url":"https://api.github.com/users/danielweck/orgs","repos_url":"https://api.github.com/users/danielweck/repos","events_url":"https://api.github.com/users/danielweck/events{/privacy}","received_events_url":"https://api.github.com/users/danielweck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T10:37:37Z","updated_at":"2020-05-29T10:37:37Z","author_association":"NONE","body":"> Is/will your implementation be available as a module?\r\n\r\nIt's all open-source (TypeScript), but at this stage there is some tight-coupling with our internal layout/rendering logic, and the relevant pieces of code are not easily extractable from our codebase.\r\n\r\nHowever, the intent is indeed to open-source this work \"properly\", i.e. a standalone (NPM) package, maintained in its own (GitHub) repository (with some documentation for both the public API and the internals).","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635902789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635903713","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-635903713","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":635903713,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNTkwMzcxMw==","user":{"login":"danielweck","id":625201,"node_id":"MDQ6VXNlcjYyNTIwMQ==","avatar_url":"https://avatars.githubusercontent.com/u/625201?v=4","gravatar_id":"","url":"https://api.github.com/users/danielweck","html_url":"https://github.com/danielweck","followers_url":"https://api.github.com/users/danielweck/followers","following_url":"https://api.github.com/users/danielweck/following{/other_user}","gists_url":"https://api.github.com/users/danielweck/gists{/gist_id}","starred_url":"https://api.github.com/users/danielweck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/danielweck/subscriptions","organizations_url":"https://api.github.com/users/danielweck/orgs","repos_url":"https://api.github.com/users/danielweck/repos","events_url":"https://api.github.com/users/danielweck/events{/privacy}","received_events_url":"https://api.github.com/users/danielweck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-29T10:40:00Z","updated_at":"2020-05-29T10:40:00Z","author_association":"NONE","body":"> It would be great to learn more about your application and ways in which our work could become of use to you; be welcome on our mailing list, IRC, and/or weekly video calls.\r\n\r\nThanks. I will get back to you when our work stabilizes.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/635903713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/638946715","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-638946715","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":638946715,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODk0NjcxNQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T15:55:33Z","updated_at":"2020-06-04T15:55:33Z","author_association":"MEMBER","body":"Originally posted this as a separate issue in #78 (but closing and moving here to keep @Treora sane ðŸ˜‰):\r\n> https://www.w3.org/TR/intersection-observer/\r\n>\r\n> Might help with highlighter and other anchoring implementations in the DOM.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/638946715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/638947031","html_url":"https://github.com/apache/incubator-annotator/issues/78#issuecomment-638947031","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/78","id":638947031,"node_id":"MDEyOklzc3VlQ29tbWVudDYzODk0NzAzMQ==","user":{"login":"BigBlueHat","id":43209,"node_id":"MDQ6VXNlcjQzMjA5","avatar_url":"https://avatars.githubusercontent.com/u/43209?v=4","gravatar_id":"","url":"https://api.github.com/users/BigBlueHat","html_url":"https://github.com/BigBlueHat","followers_url":"https://api.github.com/users/BigBlueHat/followers","following_url":"https://api.github.com/users/BigBlueHat/following{/other_user}","gists_url":"https://api.github.com/users/BigBlueHat/gists{/gist_id}","starred_url":"https://api.github.com/users/BigBlueHat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/BigBlueHat/subscriptions","organizations_url":"https://api.github.com/users/BigBlueHat/orgs","repos_url":"https://api.github.com/users/BigBlueHat/repos","events_url":"https://api.github.com/users/BigBlueHat/events{/privacy}","received_events_url":"https://api.github.com/users/BigBlueHat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-04T15:56:02Z","updated_at":"2020-06-04T15:56:02Z","author_association":"MEMBER","body":"Closing in favor of #78.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/638947031/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646153752","html_url":"https://github.com/apache/incubator-annotator/issues/77#issuecomment-646153752","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/77","id":646153752,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjE1Mzc1Mg==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T16:38:55Z","updated_at":"2020-06-18T16:38:55Z","author_association":"CONTRIBUTOR","body":"First tests merged in #79, more can be developed as we go. Closing this issue.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646153752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646156324","html_url":"https://github.com/apache/incubator-annotator/issues/64#issuecomment-646156324","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/64","id":646156324,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjE1NjMyNA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T16:41:38Z","updated_at":"2020-06-18T16:41:38Z","author_association":"CONTRIBUTOR","body":"I suppose this is finished. On the wiki: [Creating a Release](https://github.com/apache/incubator-annotator/wiki/Creating-a-Release) and [Testing a Source Release](https://github.com/apache/incubator-annotator/wiki/Testing-a-Source-Release).","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646156324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646204117","html_url":"https://github.com/apache/incubator-annotator/issues/49#issuecomment-646204117","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/49","id":646204117,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjIwNDExNw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T17:32:29Z","updated_at":"2020-06-18T17:32:29Z","author_association":"CONTRIBUTOR","body":"I added this to the new [Tech Radar](https://github.com/apache/incubator-annotator/wiki/Tech-Radar) page on the wiki; updates can be added there, and discussion may also continue in this issue; but I will close it as there is no current activity on this and no particular action to take.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646204117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646206067","html_url":"https://github.com/apache/incubator-annotator/issues/45#issuecomment-646206067","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/45","id":646206067,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjIwNjA2Nw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T17:34:41Z","updated_at":"2020-06-18T17:34:41Z","author_association":"CONTRIBUTOR","body":"Superseded by #53? Closing. (also, I added this topic to the new [Tech Radar](https://github.com/apache/incubator-annotator/wiki/Tech-Radar) page on the wiki)","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646206067/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646207455","html_url":"https://github.com/apache/incubator-annotator/issues/54#issuecomment-646207455","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/54","id":646207455,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjIwNzQ1NQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T17:36:15Z","updated_at":"2020-06-18T17:36:15Z","author_association":"CONTRIBUTOR","body":"Current home seems to be: https://drafts.csswg.org/css-highlight-api-1/\r\n\r\nI added this topic to the new [Tech Radar](https://github.com/apache/incubator-annotator/wiki/Tech-Radar) page on the wiki; updates can be added there, and discussion may also continue in this issue; but I will close it as there is no current activity on this and no particular action to take.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646207455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646207986","html_url":"https://github.com/apache/incubator-annotator/issues/55#issuecomment-646207986","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/55","id":646207986,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjIwNzk4Ng==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T17:36:52Z","updated_at":"2020-06-18T17:36:52Z","author_association":"CONTRIBUTOR","body":"I added this topic to the new [Tech Radar](https://github.com/apache/incubator-annotator/wiki/Tech-Radar) page on the wiki; updates can be added there, and discussion may also continue in this issue; but I will close it as there is no current activity on this and no particular action to take.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646207986/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646209725","html_url":"https://github.com/apache/incubator-annotator/issues/60#issuecomment-646209725","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/60","id":646209725,"node_id":"MDEyOklzc3VlQ29tbWVudDY0NjIwOTcyNQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-18T17:39:52Z","updated_at":"2020-06-18T17:39:52Z","author_association":"CONTRIBUTOR","body":"Is this still a plan? We have ditched our other fragment identifier effort (see PR #71).\r\n\r\nBesides making a parser for the fragment identifier syntax itself, I suppose we would want to implement the algorithm for resolving it. May well be worthwhile if others are not already doing this!\r\n\r\nAlso, I added this topic to the new [Tech Radar](https://github.com/apache/incubator-annotator/wiki/Tech-Radar) page on the wiki.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/646209725/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/655697223","html_url":"https://github.com/apache/incubator-annotator/issues/82#issuecomment-655697223","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/82","id":655697223,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NTY5NzIyMw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-08T18:57:46Z","updated_at":"2020-07-08T18:57:46Z","author_association":"CONTRIBUTOR","body":"We have stopped publishing pre-release versions for the moment, as we are getting our release process in order. The first official release is v0.1.0, which was tagged less than 24 hours ago. I am waiting 24 hours for the tarball to propagate to appear on Apache mirrors before I send a release announcement and publish to npm.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/655697223/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/657183392","html_url":"https://github.com/apache/incubator-annotator/issues/82#issuecomment-657183392","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/82","id":657183392,"node_id":"MDEyOklzc3VlQ29tbWVudDY1NzE4MzM5Mg==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-12T06:55:32Z","updated_at":"2020-07-12T06:55:32Z","author_association":"CONTRIBUTOR","body":"The release is now live. Thank you for your patience!\r\n\r\nThere is no formal documentation at the moment, so please dig into the code and raise questions on the mailing list or in GitHub issues. We are very interested in getting feedback and helping people get started working with the project and contributing.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/657183392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/659538621","html_url":"https://github.com/apache/incubator-annotator/issues/38#issuecomment-659538621","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/38","id":659538621,"node_id":"MDEyOklzc3VlQ29tbWVudDY1OTUzODYyMQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-16T16:52:36Z","updated_at":"2020-07-16T16:52:36Z","author_association":"CONTRIBUTOR","body":"Just discussed in the weekly call: rather than importing these modules as such, we better just get at (and beyond) feature parity and thereby make them obsolete.\r\n\r\nFor the missing functionalities see their relevant issues:\r\n- dom-anchor-text-position: see #75 \r\n- dom-anchor-text-quote: we lack fuzzy matching, see #83 \r\n- dom-anchor-fragment: does anybody actually use this? Open an issue if so. :) (it seems Hypothes.is [dropped](https://github.com/hypothesis/client/commit/f8784b2c8837f67b82866c63b74215bc90739653) it)","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/659538621/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":2,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/663492713","html_url":"https://github.com/apache/incubator-annotator/issues/21#issuecomment-663492713","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/21","id":663492713,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzQ5MjcxMw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T11:23:48Z","updated_at":"2020-07-24T11:23:48Z","author_association":"CONTRIBUTOR","body":"We do have a simple highlighter now, using the `<mark>`-based approach, which could be used for overlapping annotations as described [above](https://github.com/apache/incubator-annotator/issues/21#issuecomment-348224795).\r\n\r\nUnless I overlook a relevant nuance, this issue and #47 (â€œInterleaving selections within the DOMâ€) seem pretty much the same topic; closing this one.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/663492713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/663510334","html_url":"https://github.com/apache/incubator-annotator/issues/47#issuecomment-663510334","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/47","id":663510334,"node_id":"MDEyOklzc3VlQ29tbWVudDY2MzUxMDMzNA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-07-24T12:16:54Z","updated_at":"2020-07-24T12:16:54Z","author_association":"CONTRIBUTOR","body":"Since recently we have a simple highlighter, which wraps text nodes in `<mark>` elements, and ignores any existing `<mark>`s to allow for nested use. I just created some simple tests (see PR #84), including ones inspired by the examples above, that deal with situations like this: `'<b>lorem ipsum <mark>dolor <mark2>am</mark2></mark><mark2>et yada</mark2> yada</b>'`.\r\n\r\nNote there is a difficulty with how a Range behaves when the DOM is modified: running highlight with our current highlighter can mess up other Range objects that point at the same text nodes. So this can cause trouble:\r\n\r\n```\r\nrange1 = anchor(annotation1);\r\nrange2 = anchor(annotation2);\r\nhighlight(range1); // this may mess up range2\r\nhighlight(range2); // highlights some unintended target.\r\n```\r\n\r\nA solution is to anchor&highlight as a single action: considering the Range a ephemeral pointer:\r\n\r\n```\r\nrange1 = anchor(annotation1);\r\nhighlight(range1);\r\nrange2 = anchor(annotation2);\r\nhighlight(range2);\r\n```\r\n\r\nOur generator-based approach to anchoring should help to do this right, but still it is a pitfall that Iâ€™m not very happy with. Some ideas for avoiding this problem:\r\n- Using a highlighter that does not modify the document content; some highlighter approaches add an (svg) element to the end of the `<body>` and display it on the right spot using absolute positioning. While solving this issue, it does create others (e.g. need to reposition the element when text reflows).\r\n- Stop using Range for our â€˜hydratedâ€™ selector, i.e. as our way to point at a part of the DOM. We could e.g. try implement a â€˜RobustRangeâ€™ that updates its start-&endContainer&-Offset as needed in one way or another.\r\n\r\nFor the time being, or if we decide not to fix this, we should probably warn users in any documentation and examples that Ranges are perishable.\r\n\r\nNote that the behaviour of Range actually differs between the current jsdom and web browsers, so it is important to run relevant tests in a browser (use our `yarn start` command) to ensure the tests pass there too.\r\n\r\nOn the bright side, I added [tests](https://github.com/apache/incubator-annotator/blob/d4d933c61bb559221b5dd896fde399fc53adedba/packages/dom/test/highlight-range/highlight-range.test.ts#L172-L198) to check if one can remove highlights in arbitrary order, and that seems to work as intended. This should give the freedom to ignore the tree structure and treat highlights as being independent from each other. Please suggest/write other scenarios that we should include in our tests.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/663510334/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674584671","html_url":"https://github.com/apache/incubator-annotator/issues/81#issuecomment-674584671","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/81","id":674584671,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDU4NDY3MQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-16T22:15:36Z","updated_at":"2020-08-16T22:15:36Z","author_association":"CONTRIBUTOR","body":"I propose we start by making some attempt to have core pieces of our reusable code allow for synchronous iterators, but keep the asynchronous consumer API.\r\n\r\nI started experimenting with something like this, that we could use in our definitions for cartesian product or our matcher functions.\r\n\r\n``` typescript\r\ntype AbstractIterable<T> = AsyncIterable<T> | Iterable<T>;\r\n\r\nexport function isAsyncIterable<T>(\r\n  iterable: AbstractIterable<T>,\r\n): iterable is AsyncIterable<T> {\r\n  return typeof iterable[Symbol.asyncIterator] === 'function';\r\n}\r\n\r\nexport function makeAsync<T>(iterable: AbstractIterable<T>): AsyncIterable<T> {\r\n  if (isAsyncIterable<T>(iterable)) {\r\n    return iterable;\r\n  }\r\n\r\n  return {\r\n    [Symbol.asyncIterator]() {\r\n      const iter = iterable[Symbol.iterator]();\r\n      return {\r\n        next() {\r\n          return Promise.resolve(iter.next());\r\n        },\r\n      };\r\n    },\r\n  };\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674584671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674584836","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-674584836","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":674584836,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDU4NDgzNg==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-16T22:17:31Z","updated_at":"2020-08-16T22:17:31Z","author_association":"CONTRIBUTOR","body":"Is there any action here, or are we okay to leave the nodes split?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674584836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674586963","html_url":"https://github.com/apache/incubator-annotator/issues/75#issuecomment-674586963","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/75","id":674586963,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDU4Njk2Mw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-16T22:40:23Z","updated_at":"2020-08-16T22:40:23Z","author_association":"CONTRIBUTOR","body":"> The text MUST be normalized before recording the annotation. Thus HTML/XML tags SHOULD be removed and character entities SHOULD be replaced with the character that they encode.\r\n\r\nAs long as we stick to `textContent` or `innerText`, we are covered here. The tags are not part of this and entities are already replaced.\r\n\r\n> Possibly more problematic, can one even access the source html accurately enough through the DOM? Might a source parser have modified whitespace, thus leading to miscounts? I am not even talking about executed scripts that may modify the DOM too, I suppose we have to disregard that scenario.\r\n\r\nWe should be fine, at least for text nodes. The CSS white space properties make it important that parsers preserve the text nodes as is.\r\n\r\nI think the spec is still somewhat vague and open to interpretation. I am partial to using `innerText` because it's the closest to the actual presentation. Regardless of what we choose, we have some work that supports any decision and helps us handle characters with multiple code units.\r\n\r\nIterating over a string in JavaScript yields strings representing the code points (each iteration may yield a string with more than one code units). As a result, one can also do `[...string]` and get an array of the code points. If we write a generic text position selector in terms of iteration over code points then we can compose it with anything that generates such an iterator from any other source, like generating `innerText` from a DOM Node or Range. The simplest thing is to call it with `[...string]`.\r\n\r\nHowever, I think we should consider going a step further and writing a text selector that consumes an iterator that yields _chunks_ rather than receiving a full text with the initial call. This interface would be useful for streaming scenarios where the whole text may not be available or may be extremely large. The chunks themselves could be arrays or strings, and if we decide that they are strings we may wish to iterate over their code points.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674586963/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674593638","html_url":"https://github.com/apache/incubator-annotator/issues/51#issuecomment-674593638","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/51","id":674593638,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDU5MzYzOA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-16T23:41:54Z","updated_at":"2020-08-16T23:41:54Z","author_association":"CONTRIBUTOR","body":"I'll close this for now, as it seems like we may not need this at the moment.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674593638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674803745","html_url":"https://github.com/apache/incubator-annotator/issues/80#issuecomment-674803745","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/80","id":674803745,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDgwMzc0NQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T10:36:45Z","updated_at":"2020-08-17T10:36:45Z","author_association":"CONTRIBUTOR","body":"> Is there any action here, or are we okay to leave the nodes split?\r\n\r\nI ended up thinking that running e.g. `range.commonAncestorContainer.normalize()` in the cleanup would be a bit much; Iâ€™d rather not merge nodes we did not touch. We only split the start node and/or end node, and could change the implementation to just merge those nodes we split. This change simply did not seem a priority yet.\r\n\r\nI just added a comment for now to suggest running `range.commonAncestorContainer.normalize()`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674803745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674807172","html_url":"https://github.com/apache/incubator-annotator/issues/81#issuecomment-674807172","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/81","id":674807172,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDgwNzE3Mg==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T10:44:47Z","updated_at":"2020-08-17T10:44:47Z","author_association":"CONTRIBUTOR","body":"Looks good. Iâ€™d be fine with adopting this approach, but equally fine with just keeping it in mind for when we have a need/requests for synchronous use.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674807172/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674836567","html_url":"https://github.com/apache/incubator-annotator/issues/85#issuecomment-674836567","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/85","id":674836567,"node_id":"MDEyOklzc3VlQ29tbWVudDY3NDgzNjU2Nw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T11:54:07Z","updated_at":"2020-08-17T11:54:07Z","author_association":"CONTRIBUTOR","body":"@tilgovi alluded to this chunking idea in #75:\r\n\r\n> However, I think we should consider going a step further and writing a text selector that consumes an iterator that yields chunks rather than receiving a full text with the initial call. This interface would be useful for streaming scenarios where the whole text may not be available or may be extremely large. The chunks themselves could be arrays or strings, and if we decide that they are strings we may wish to iterate over their code points.\r\n\r\nJust one idea this raised: would it go too far to just ask for a stream of characters, that we permit to be nested? A simple experiment:\r\n\r\n```\r\nfunction isCharacter(charOrStream) {\r\n  return typeof charOrStream === 'string' && [...charOrStream].length === 1;\r\n}\r\n\r\nfunction printCharacters(iterable) {\r\n  for (charOrStream of iterable) {\r\n    if (!isCharacter(charOrStream)) {\r\n      printCharacters(charOrStream);\r\n    } else {\r\n      console.log(charOrStream);\r\n    }\r\n  }\r\n}\r\n\r\nprintCharacters('bla. ');\r\nprintCharacters(['two', ' chunks. '])\r\nprintCharacters(['chunks', [' could', ' nest.', '', ]]);\r\n```\r\n\r\nI suppose such an approach may be elegant for a specification or reference implementation, but perhaps making a stricter structure could help increase performance (iterating through a stringâ€™s individual characters might anyhow be required when anchoring a TextPositionSelector, but for a TextQuoteSelector it could be superfluous?)","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/674836567/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/679141635","html_url":"https://github.com/apache/incubator-annotator/pull/87#issuecomment-679141635","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/87","id":679141635,"node_id":"MDEyOklzc3VlQ29tbWVudDY3OTE0MTYzNQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-24T13:56:46Z","updated_at":"2020-08-24T13:56:46Z","author_association":"CONTRIBUTOR","body":"> Make several changes to eliminate unnecessary type definitions.\r\n\r\nAre we talking about â€œunnecessaryâ€ in a pedagogical or technical sense? :) (my view has been that types are primarily there to help readers create an mental overview of the concepts that we deal with in the code base; implementation needs come second)\r\n\r\n> Remove the centrally-exported selector interfaces from the selector\r\n> package and migrate them to where they are used. The selector package\r\n> need not commit to the existence of any particular set of selectors. In\r\n> the future, the apache-annotator package may consolidate the existing\r\n> selector definitions and export them under a unified namespace.\r\n\r\n:question:  My thinking was rather that the type definitions would be based on the WA specification, rather than on the needs of our implementation. The type definitions could be considered a product by itself, in theory even usable without using any of our implementations. But we could also decide that this is not a goal of ours.\r\n\r\n> Remove the matcher interface in favor of being explicit and verbose about function types.\r\n\r\n:+1: If we use the same signature throughout, and as part of our user-facing API, give the signature a name seems helpful; on the other hand, if that hides its definition it might also be obscuring things. With our current small API either way seems fine to me, so we could just remove them now and see if we feel a need to reintroduce such names at some point.\r\n\r\n> Simplify the type signature for makeRefinable. The selector is defined\r\n> as an interface, thus callers are free to pass anything that extends it,\r\n> so there is no need to parametrize its type. â€¦\r\n\r\n:-1:  But callers are not free to pass any type of `Selector`. When assigning `f = makeRefinable(createTextQuoteSelectorMatcher)`, `f`â€™s parameter must still be a `TextQuoteSelector`, not just any `Selector`.\r\n\r\nIn a quick test, after this change even `makeRefinable(createTextQuoteSelectorMatcher)` seems to be invalid because of mismatching types, so this needs more scrutiny anyway. (perhaps we could make some integration tests, and/or turn the demo into typescript, to discover such errors more easily)\r\n\r\n> â€¦ Use the same type definition for the input and output of the selector creator.\r\n\r\n:+1:\r\n\r\n> Define the DOM match functions in terms of Range and place the burden on\r\n> the caller to pass a Range. Remove the unused scope functions. This\r\n> change may hurt the developer experience, but that will require some\r\n> experience and feedback.\r\n\r\n:+1: Hurting developer experience sounds undesirable; but this change makes the code and API simpler, which may actually help developers. For ease of use, we could consider providing a simple helper to turn a nodes into Range:\r\n\r\n```\r\nexport function nodeToRange(node: Node): Range {\r\n    const range = (node.ownerDocument ?? node as Document).createRange();\r\n    range.selectNodeContents(node);\r\n    return range;\r\n}\r\n```\r\n\r\n> Remove the \"type\" field from all selector definitions, since the match\r\n> functions do not use this information. Applications may decide to\r\n> include type information in selectors, but it is not necessary to\r\n> dictate the specific way to achieve this. In the future, utility\r\n> functions in the selector package may dictate this by providing a typed\r\n> selector creator that delegates to implementations based on a type\r\n> field.\r\n\r\n:question: Indeed technically we do not need the `type` field, but (in case we take a spec-first focus) that seems an implementation detail. On the other hand, itâ€™s also a bit silly to require adding the `type` everywhere (e.g. in our test cases) just for spec conformance. As a compromise, we could also consider defining the types according to spec, and then creating supertypes using `Pick<â€¦, â€¦>` or `Omit<â€¦, 'type'>` in our implementation.\r\n\r\nIâ€™m fine with merging the proposed changes (after fixing the refinement issue) and then reconsidering some aspects later once we better know what weâ€™d want. I suppose the whole distinction between selector and dom package, and what exactly they export, will only make sense once we have tools for non-dom environments.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/679141635/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/681311670","html_url":"https://github.com/apache/incubator-annotator/pull/87#issuecomment-681311670","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/87","id":681311670,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTMxMTY3MA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T02:49:13Z","updated_at":"2020-08-27T02:49:13Z","author_association":"CONTRIBUTOR","body":"> My thinking was rather that the type definitions would be based on the WA specification, rather than on the needs of our implementation. The type definitions could be considered a product by itself, in theory even usable without using any of our implementations. But we could also decide that this is not a goal of ours.\r\n\r\nI share the goal of defining selectors that correspond to the WA specification. I would prefer that the individual selector packages define the selectors they use, though, rather than trying to define them all in a single selectors package.\r\n\r\n> If we use the same signature throughout, and as part of our user-facing API, give the signature a name seems helpful; on the other hand, if that hides its definition it might also be obscuring things. With our current small API either way seems fine to me, so we could just remove them now and see if we feel a need to reintroduce such names at some point.\r\n\r\nThat's my thought, too. I wasn't sure if it made things easier or obscured things yet. I also wasn't sure how I wanted to resolve the relative path linting yet, either. This change allows us to punt these questions down the road a little bit.\r\n\r\n> But callers are not free to pass any type of Selector.\r\n\r\nI had a fear about this and I'll investigate. I thought that the type parameter on the scope would be sufficient to restrict the input match function creator, and that using an generic Selector interface here would still allow arbitrary other selectors to be passed in. Since Selector has only an optional `refinedBy` attribute, any selector should be fine, so long as it does not redefine `refinedBy` to be anything else. I do want to capture the notion of iterative refinement, but maybe parametrization of the Selector interface would allow us to define `makeRefinable` such that the output match function creator accepts and produces a sub-type of Selector that conforms to the original input type of the provided `createMatcher` function.\r\n\r\n> Hurting developer experience sounds undesirable; but this change makes the code and API simpler, which may actually help developers. For ease of use, we could consider providing a simple helper to turn a nodes into Range:\r\n\r\nThat is my thinking, too. It gives us a good reason to expose the functions I deleted from the scope module. We may even want to formalize the idea of creating different types of scopes for the different packages. For example, we might want the DOM scope to be something that has attributes for the owner document, the range, and maybe an iteration protocol for nodes.\r\n\r\n> Indeed technically we do not need the type field, but (in case we take a spec-first focus) that seems an implementation detail.\r\n\r\nThe specification is written in terms of JSON-LD, where individual attributes are absolute URIs to linked data properties. There's a canonical short-hand of attribute names provided by the JSON-LD context, but I was thinking that it's not necessary to require that the selectors have a `type` field with any particular value. If the caller knows that a selector is a text quote selector, then we can assume its attribute refer to the attributes of a text quote selector, but the type is implicit.\r\n\r\nI think it will make sense to define helpers, like a typed matcher creator that we have in the demo. That would be a good addition to the selector package. That is a good place to be opinionated about the type field, while letting the user have control of its values.\r\n\r\n``` typescript\r\ncreateTypedMatcherCreator({\r\n  TextQuoteSelector: createTextQuoteSelectorMatcher\r\n});\r\n```","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/681311670/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/681312139","html_url":"https://github.com/apache/incubator-annotator/pull/87#issuecomment-681312139","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/87","id":681312139,"node_id":"MDEyOklzc3VlQ29tbWVudDY4MTMxMjEzOQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-27T02:51:08Z","updated_at":"2020-08-27T02:51:08Z","author_association":"CONTRIBUTOR","body":"I'll take another look at `makeRefinable` and test out how it behaves when called from TypeScript on different inputs.\r\n\r\nI also think it may be okay to add back the `Matcher` parametrized type, but might avoid aliasing it with filled in parameters to avoid the relative path lint issues _for now_. I do want to solve that code organization question, though, and I think we could eventually add `DomMatcher` back in.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/681312139/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/686651856","html_url":"https://github.com/apache/incubator-annotator/issues/60#issuecomment-686651856","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/60","id":686651856,"node_id":"MDEyOklzc3VlQ29tbWVudDY4NjY1MTg1Ng==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-03T17:50:45Z","updated_at":"2020-09-03T17:50:45Z","author_association":"CONTRIBUTOR","body":"> Besides making a parser for the fragment identifier syntax itself, I suppose we would want to implement the algorithm for resolving it. May well be worthwhile if others are not already doing this!\r\n\r\nUpdate: last month, I decided to take a stab at this and implemented the algorithm in TypeScript: <https://code.treora.com/gerben/text-fragments-ts>\r\n\r\nSee also: <https://github.com/WICG/scroll-to-text-fragment/issues/135>\r\n\r\nPerhaps it could some day be considered adopting this implementation in Annotator, but I suppose it is a bit early as the spec is still in flux, and so far my impression is that few people (want to) adopt it.\r\n\r\nI expect that a significant disadvantage for many annotation-ish tools would be that, as it is currently defined, the expressivity of the text fragment identifier is limited by only being able to point at whole words. See my [issue #37](https://github.com/WICG/scroll-to-text-fragment/issues/137) on the specâ€™s repo.\r\n\r\nTo use the fragment syntax as a standard for use within, and exchange between, annotation softwares, one could of course choose to interpret it differently (except when activating a â€˜browser compat modeâ€™), e.g. as a WA RangeSelector containing two TextQuoteSelectors. But that might lead to a misleading situation of half-interoperability which seems better to avoid.\r\n\r\nNevertheless, for the goal of making annotations (ex)portable from annotation tools, it could be valuable to have a tool that helps convert (where possible) annotation targets to browser-compatible text-fragment URLs. And vice versa to import them.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/686651856/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/688882247","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-688882247","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":688882247,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg4MjI0Nw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T13:41:15Z","updated_at":"2020-09-08T13:41:15Z","author_association":"CONTRIBUTOR","body":"I hope you donâ€™t mind I turned my suggestions (except using AbstractRange) into commits. I noticed that the `ownerDocument(range)` helper was not permitted by the eslint rule forbidding relative parent imports. Was that your reason to repeat the exact same lines in several files? I suggest we just remove this rule; even though it seems a nice idea, I think itâ€™s really not worth obscuring our code with repeated rote implementation details just for the sake of organisational purity. Or, if you insist, we could publish our helper functions in a package; or (my preference) weâ€™d modify the linter rule to allow relative parent imports from a single â€˜utilsâ€™ or â€˜commonâ€™ folder.\r\n\r\nItâ€™s not directly related to this PR, but I also fixed two accidental uses of the global `document`, where `ownerDocument(range)` should have been used instead. Extra reason to keep this helper.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/688882247/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689010515","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-689010515","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":689010515,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAxMDUxNQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T16:58:05Z","updated_at":"2020-09-08T16:58:05Z","author_association":"CONTRIBUTOR","body":"> I noticed that the ownerDocument(range) helper was not permitted by the eslint rule forbidding relative parent imports. Was that your reason to repeat the exact same lines in several files?\r\n\r\nNo, that wasn't the reason. I felt that it was a couple lines of simple destructing and one nullish coalescing assignment. In context, it might often be useful to destructure other properties of the range at the same time. I'm fine to have a helper function, but it didn't feel necessary or very clarifying.\r\n\r\nI still do want to look at changing the lint rules, I'm sorry I have not had time to yet.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689010515/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689016825","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-689016825","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":689016825,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAxNjgyNQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:09:27Z","updated_at":"2020-09-08T17:09:27Z","author_association":"CONTRIBUTOR","body":"This looks good. I think I'm okay with removing the relative import rule for now. I don't like having modules called `util`, or packages called `common` or `utils` or anything like this, much, though. I would prefer to leave it in a file called `scope.ts`.\r\n\r\nI might wish to flatten everything a bit. I understand you like grouping relating things, but I don't mind longer files for groupings or filename prefixes. We have a monorepo so that we can make many packages easily. For any of those packages to have much internal hierarchy or structure feels wrong to me. Having the parent relative imports feels like we haven't given things the right structure. We should be able to easily make a package, like `@annotator/dom-range` to have range related utilities, or simply `@annotator/dom` to have DOM-related utilities. For this reason, I think I would prefer to just inline the two lines of `ownerDocument()` and then do that separately.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689016825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689017845","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-689017845","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":689017845,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAxNzg0NQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:11:15Z","updated_at":"2020-09-08T17:11:15Z","author_association":"CONTRIBUTOR","body":"So, to summarize, I'd rather you left the inline `ownerDocument` code, but I'm okay with this as a temporary change before we extract a package. I like the lint rule, because I would like to encourage us to make packages (that's why we have a monorepo), but I'm okay with it temporarily.\r\n\r\nI appreciate the other changes and think this is good. I'll approve, but recommend renaming `util.ts` to just `owner-document.ts` or `scope.ts`.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689017845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689018248","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-689018248","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":689018248,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTAxODI0OA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T17:11:59Z","updated_at":"2020-09-08T17:11:59Z","author_association":"CONTRIBUTOR","body":"Hah, I can't approve my own PR, but I may just merge this in the evening then, with your changes. Thanks for taking a look.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689018248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689082728","html_url":"https://github.com/apache/incubator-annotator/pull/88#issuecomment-689082728","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/88","id":689082728,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA4MjcyOA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T19:16:46Z","updated_at":"2020-09-08T19:16:46Z","author_association":"CONTRIBUTOR","body":"> I'll approve, but recommend renaming `util.ts` to just `owner-document.ts` or `scope.ts`.\r\n\r\nAs it is not specific to scopes and now also used for other ranges, `owner-document.ts` seems better.\r\n\r\n> I felt that it was a couple lines of simple destructing and one nullish coalescing assignment. In context, it might often be useful to destructure other properties of the range at the same time. I'm fine to have a helper function, but it didn't feel necessary or very clarifying.\r\n\r\nOk. I think we have different priorities; for me, even if it is just two or three lines of code, the fact that the *intention* of the code is somewhat obscured makes it an undesirable distraction for a reader. I suppose it deserves a comment line to explain the need for the type assertion, so Iâ€™ll add that while at it. Moreover I donâ€™t see the usefulness of destructuring in these cases, as it results in variable names that hide their context (â€œwhose â€˜commonAncestorContainerâ€™ are we talking about, that of scope or of the other range?â€). It may be clear by now that I write code primarily for people, not computers. :)\r\n\r\nI like folders, but Iâ€™m okay with flatter packages and/or more packages. As long as it is easy to find out which things belong together.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/689082728/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/690362276","html_url":"https://github.com/apache/incubator-annotator/pull/87#issuecomment-690362276","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/87","id":690362276,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDM2MjI3Ng==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T15:21:37Z","updated_at":"2020-09-10T15:21:37Z","author_association":"CONTRIBUTOR","body":"Closing this. We pulled the DOM scope change out into #88 and we're investigating a different pattern for composing the higher level match function creators to be re-introduced in another PR.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/690362276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/693569313","html_url":"https://github.com/apache/incubator-annotator/issues/85#issuecomment-693569313","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/85","id":693569313,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzU2OTMxMw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-16T18:03:25Z","updated_at":"2020-09-16T18:03:25Z","author_association":"CONTRIBUTOR","body":"> Currently, our text quote anchoring function (in the dom package) is hard-coded to search for text quote using Range, NodeIterator, TreeWalker. When using the chunk approach, this functionality should be composed of two parts: one generic text quote anchoring function that takes a stream of Chunks of text; and one dom-to-chunk converter that uses TreeWalkers and such to present the DOM as a stream of text Chunks.\r\n\r\nI started playing with this idea in the branch [chunking](https://github.com/apache/incubator-annotator/compare/chunking).\r\n\r\nIn this first attempt a Chunk is anything that has a toString() method: \r\n\r\n```\r\nexport interface Chunk {\r\n  toString(): string;\r\n}\r\n```\r\n\r\nAnd we can point at a part of the text using a straightforward generalisation of `Range`:\r\n\r\n```\r\nexport interface ChunkRange<TChunk extends Chunk> {\r\n  startChunk: TChunk;\r\n  startIndex: number;\r\n  endChunk: TChunk;\r\n  endIndex: number;\r\n}\r\n```\r\n\r\nI made an abstracted version of the text quote matcher that accepts as its scope an `AsyncIterable<TChunk>`:\r\n\r\n```\r\nexport function abstractTextQuoteSelectorMatcher(\r\n  selector: TextQuoteSelector,\r\n): <TChunk extends Chunk>(textChunks: AsyncIterable<TChunk>) => AsyncIterable<ChunkRange<TChunk>> {\r\n```\r\n\r\nSo one can throw any type of `TChunk` in, and get ranges using the same type back. For the concrete implementation, I actually used `Range`s as the `TChunk` type, with each `Range` wrapping a single text node. (we canâ€™t just throw in text nodes themselves, both because their `toString()` method does not return the text content, and because the first and the last node might be only partially part of the scope).\r\n\r\nFor the text quote matching this works fine (all tests pass). For describing a text quote however, it would be helpful to have more freedom to navigate the text, instead of only walking through it in a single pass (especially to find prefixes). I suppose our scope should have an API that is more like a TreeWalker than like a NodeIterator: jump to any spot, and then walk in either direction.\r\n\r\n@tilgovi: Any thoughts about the approach to try, before I go further down this rabbit hole?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/693569313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/694930052","html_url":"https://github.com/apache/incubator-annotator/issues/90#issuecomment-694930052","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/90","id":694930052,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDkzMDA1Mg==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T15:20:08Z","updated_at":"2020-09-18T16:11:33Z","author_association":"CONTRIBUTOR","body":"What exactly would a meta-package provide? Should it be just like the current apache-annotator that you published to npm, and the issue is simply to automate its publishing process?\r\n\r\nThe current meta-package would be used as: `import {â€‰â€¦ } from 'apache-annotator/dom';`. Shall we keep it like that, or would you prefer to change it to `import { dom } from 'apache-annotator';`? Or something else?","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/694930052/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695055922","html_url":"https://github.com/apache/incubator-annotator/pull/94#issuecomment-695055922","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/94","id":695055922,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA1NTkyMg==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T19:53:11Z","updated_at":"2020-09-18T19:53:11Z","author_association":"CONTRIBUTOR","body":"> Before a release, weâ€™d have to manually update the packagesâ€™ version numbers in package.json. Also when adding a package, weâ€™d have to add it manually in several places. Neither is too much hassle I suppose, but if thereâ€™s a simple way to automate such tasks that could be nice.\r\n\r\nI think this can be automated with lerna or yarn.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695055922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695059327","html_url":"https://github.com/apache/incubator-annotator/issues/92#issuecomment-695059327","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/92","id":695059327,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA1OTMyNw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T20:01:44Z","updated_at":"2020-09-18T20:01:44Z","author_association":"CONTRIBUTOR","body":"I suppose we could continue using the `dev` tag that we once used? E.g. [`@annotator/dom`](https://www.npmjs.com/package/@annotator/dom) has a release `0.1.0-dev.9d100c0f`. As discussed in the last call, we could try set up a hook to automatically build and publish it on npm whenever the master branch has changed, while generating a version number from the commit number.\r\n\r\nOn the other hand, I started wondering if we even want every development version to be pushed to the npm central registry. We discussed before that ideally people could just depend on the repository directly, using [a Git URL as dependency](https://docs.npmjs.com/files/package.json#git-urls-as-dependencies); e.g. writing `npm install https://github.com/apache/incubator-annotator#master`. The only problem we found was that our repo contains multiple packages. But perhaps we could still try make this work by making the top-level package the meta-package discussed in #90?\r\n\r\nIf we want to publish pre-built packages, we could also create a branch (or branches, or a separate repo) that contains those, e.g. using [`publish-to-git`](https://github.com/Rush/publish-to-git/) to automate this. Or we can just publish the latest tarball on the website: e.g. `npm install https://annotator.apache.org/packages/dom/0.2.0-dev.tar.gz` would be nice? While it would be good to make our packages readily available in the npm *ecosystem*, this need not mean they have to be on the npm *central registry*.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695059327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695060189","html_url":"https://github.com/apache/incubator-annotator/issues/92#issuecomment-695060189","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/92","id":695060189,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA2MDE4OQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T20:03:56Z","updated_at":"2020-09-18T20:03:56Z","author_association":"CONTRIBUTOR","body":"> While it would be good to make our packages readily available in the npm ecosystem, this need not mean they have to be on the npm central registry.\r\n\r\nThat's well said. Let me change the issue title to better reflect the goal.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695060189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695063313","html_url":"https://github.com/apache/incubator-annotator/issues/92#issuecomment-695063313","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/92","id":695063313,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA2MzMxMw==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T20:11:08Z","updated_at":"2020-09-18T20:11:08Z","author_association":"CONTRIBUTOR","body":"> But perhaps we could still try make this work by making the top-level package the meta-package discussed in #90?\r\n\r\nThat won't work because I think lerna and/or yarn enforces that the top-level package must be private and won't publish it.\r\n\r\nIt might be possible to work _without_ lerna or yarn workspaces and just configure typescript and babel to know how to resolve everything, but we'd have to automate running yarn install separately for each package, they would all have their own yarn.lock, there would be no hoisting, and we might have to add all the development dependencies to each package.\r\n\r\nI think we are better off not trying to publish the root, if we can find any way make the packages consumable otherwise.\r\n\r\nMaybe GitHub Actions exist for this.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695063313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695064308","html_url":"https://github.com/apache/incubator-annotator/issues/92#issuecomment-695064308","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/92","id":695064308,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA2NDMwOA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T20:13:23Z","updated_at":"2020-09-18T20:13:23Z","author_association":"CONTRIBUTOR","body":"We could maybe use the GitHub package registry, too, if that's at all easier to integrate for whatever reason.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695064308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695412156","html_url":"https://github.com/apache/incubator-annotator/pull/94#issuecomment-695412156","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/94","id":695412156,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTQxMjE1Ng==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-20T01:06:35Z","updated_at":"2020-09-20T01:06:35Z","author_association":"CONTRIBUTOR","body":"I believe we do want the types and the dependencies. Even just importing things leads to the build having babel import helpers from the runtime package. We may not need core-js@3 at all, since I think it's bundled in the babel runtime package. I'll remove that after I merge.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695412156/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695419350","html_url":"https://github.com/apache/incubator-annotator/issues/90#issuecomment-695419350","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/90","id":695419350,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTQxOTM1MA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-20T01:11:39Z","updated_at":"2020-09-20T01:11:39Z","author_association":"CONTRIBUTOR","body":"Closed by #94.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695419350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695712549","html_url":"https://github.com/apache/incubator-annotator/issues/89#issuecomment-695712549","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/89","id":695712549,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTcxMjU0OQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-20T04:37:21Z","updated_at":"2020-09-20T04:37:21Z","author_association":"CONTRIBUTOR","body":"Closed by bb78bd5.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/695712549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/699748065","html_url":"https://github.com/apache/incubator-annotator/issues/96#issuecomment-699748065","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/96","id":699748065,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTc0ODA2NQ==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T03:23:22Z","updated_at":"2020-09-28T03:23:22Z","author_association":"CONTRIBUTOR","body":"The types build process is designed with a solution style, where each package has is its own TypeScript build that emits declaration files. This error looks like what happens when one project tries to compile its declaration files before a dependency has built successfully.\r\n\r\nWhat version of TypeScript is being used? I would think that most invocations would result in the local TypeScript declared by package.json being used. Just in case some global TypeScript version is used instead, I think 3.9 is a minimum required version.\r\n\r\nI might be able to help debug if you can give me a way to reproduce, like a containerized build or something. I have no experience with nix packaging, but I'll gladly help look into it.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/699748065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/700015551","html_url":"https://github.com/apache/incubator-annotator/issues/96#issuecomment-700015551","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/96","id":700015551,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDAxNTU1MQ==","user":{"login":"ysndr","id":7040031,"node_id":"MDQ6VXNlcjcwNDAwMzE=","avatar_url":"https://avatars.githubusercontent.com/u/7040031?v=4","gravatar_id":"","url":"https://api.github.com/users/ysndr","html_url":"https://github.com/ysndr","followers_url":"https://api.github.com/users/ysndr/followers","following_url":"https://api.github.com/users/ysndr/following{/other_user}","gists_url":"https://api.github.com/users/ysndr/gists{/gist_id}","starred_url":"https://api.github.com/users/ysndr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ysndr/subscriptions","organizations_url":"https://api.github.com/users/ysndr/orgs","repos_url":"https://api.github.com/users/ysndr/repos","events_url":"https://api.github.com/users/ysndr/events{/privacy}","received_events_url":"https://api.github.com/users/ysndr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T13:43:19Z","updated_at":"2020-09-28T13:43:19Z","author_association":"NONE","body":"Thanks I guess I found part of the error. The subpackages' src were not included in the node_modules (issue related to nix yarn toolset). So apparently not an issue with the project :)","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/700015551/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/700279048","html_url":"https://github.com/apache/incubator-annotator/issues/96#issuecomment-700279048","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/96","id":700279048,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI3OTA0OA==","user":{"login":"tilgovi","id":20818,"node_id":"MDQ6VXNlcjIwODE4","avatar_url":"https://avatars.githubusercontent.com/u/20818?v=4","gravatar_id":"","url":"https://api.github.com/users/tilgovi","html_url":"https://github.com/tilgovi","followers_url":"https://api.github.com/users/tilgovi/followers","following_url":"https://api.github.com/users/tilgovi/following{/other_user}","gists_url":"https://api.github.com/users/tilgovi/gists{/gist_id}","starred_url":"https://api.github.com/users/tilgovi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tilgovi/subscriptions","organizations_url":"https://api.github.com/users/tilgovi/orgs","repos_url":"https://api.github.com/users/tilgovi/repos","events_url":"https://api.github.com/users/tilgovi/events{/privacy}","received_events_url":"https://api.github.com/users/tilgovi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T21:01:11Z","updated_at":"2020-09-28T21:01:11Z","author_association":"CONTRIBUTOR","body":"@ysndr great! Let us know if anything else come sup.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/700279048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/705834642","html_url":"https://github.com/apache/incubator-annotator/issues/75#issuecomment-705834642","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/75","id":705834642,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTgzNDY0Mg==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-08T21:31:04Z","updated_at":"2020-10-08T21:31:04Z","author_association":"CONTRIBUTOR","body":"I started implementing this in the `text-position` branch. I started by simply copying the code and tests from text quote selection, and adapting them as needed.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/705834642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/722659798","html_url":"https://github.com/apache/incubator-annotator/issues/60#issuecomment-722659798","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/60","id":722659798,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjY1OTc5OA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T21:36:06Z","updated_at":"2020-11-05T21:36:06Z","author_association":"CONTRIBUTOR","body":"We shortly discussed this topic in todayâ€™s call while looking over the open issues. We agreed that just parsing the syntax is not much use, as it comes together with a specific algorithm for finding the target text, which differs from the Web Annotation model.\r\n\r\nA quick overview of things we could provide:\r\n\r\n- anchoring of a fragment directive: I implemented the essence of this already (see above comment); we could provide a function that simply wraps my implementation. (we even discussed the option of importing my whole implementation into this repo, though to me it feels cleaner to keep these as separate projects)\r\n\r\n- describing a selection (a Range or perhaps a list of Ranges) as a fragment directive: this would need a custom adaptation of `describeTextQuote`, modified to ensure that the total quote (including prefix&suffix) ends at word boundaries (note that at least this is possible now, since a recent [change][] in the spec). Also, it should use a `textStart,textEnd` pair (again to be cut at word boundaries) instead of an exact quote when the selection crosses block elements. And perhaps there are more hurdles.\r\n\r\n- convert fragment directive â‡’ Selector: If the document is available, we could simply anchor it and describe it in the other format. Without the document at hand, we could also convert it, although with a (hopefully small) risk that the differences in specifications will make it fail to anchor or (worse) point at something else. I think the conversion could, after syntax parsing, be done with more or less this simple code:\r\n\r\n  ```\r\n    ({ prefix, textStart, textEnd, suffix }) => textEnd\r\n        ? {\r\n            type: 'RangeSelector',\r\n            start: { type: 'TextQuoteSelector', prefix, exact: textStart },\r\n            end: { type: 'TextQuoteSelector', prefix: textEnd, exact: '', suffix }\r\n        }\r\n        : { type: 'TextQuoteSelector', prefix, exact: textStart, suffix }\r\n    ```\r\n    (note the little hack of using `prefix: textEnd, exact: ''` because RangeSelectorâ€™s end is exclusive and `textEnd` should nevertheless be included in the target)\r\n\r\n- convert Selector â‡’ fragment directive: the reverse of the above. Again, if the document is available, we could simply anchor it and describe it in the other format. But in case the document is not available, conversion in this direction would only possible if the selector is of the type/shape shown in the above example code.\r\n\r\nI suppose it is mainly a matter of demand and priority whether weâ€™ll implement any of these. I might actually try tackle some of these points soon, as I would like to use these features myself.\r\n\r\n[change]: https://github.com/WICG/scroll-to-text-fragment/pull/148","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/722659798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/722666886","html_url":"https://github.com/apache/incubator-annotator/issues/92#issuecomment-722666886","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/92","id":722666886,"node_id":"MDEyOklzc3VlQ29tbWVudDcyMjY2Njg4Ng==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-05T21:52:02Z","updated_at":"2020-11-05T21:52:02Z","author_association":"CONTRIBUTOR","body":"Note from todayâ€™s call: supposedly yarn 2 should be able to install packages from within a monorepo, so we could start with accepting that nightly users have to use yarn 2, and hopefully npm and other clients follow. The remaining tasks would be to test if this indeed works in yarn 2, and if so add a sentence about it to the readme.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/722666886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/737667397","html_url":"https://github.com/apache/incubator-annotator/issues/70#issuecomment-737667397","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/70","id":737667397,"node_id":"MDEyOklzc3VlQ29tbWVudDczNzY2NzM5Nw==","user":{"login":"vrish88","id":36475,"node_id":"MDQ6VXNlcjM2NDc1","avatar_url":"https://avatars.githubusercontent.com/u/36475?v=4","gravatar_id":"","url":"https://api.github.com/users/vrish88","html_url":"https://github.com/vrish88","followers_url":"https://api.github.com/users/vrish88/followers","following_url":"https://api.github.com/users/vrish88/following{/other_user}","gists_url":"https://api.github.com/users/vrish88/gists{/gist_id}","starred_url":"https://api.github.com/users/vrish88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrish88/subscriptions","organizations_url":"https://api.github.com/users/vrish88/orgs","repos_url":"https://api.github.com/users/vrish88/repos","events_url":"https://api.github.com/users/vrish88/events{/privacy}","received_events_url":"https://api.github.com/users/vrish88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T05:03:00Z","updated_at":"2020-12-03T05:03:00Z","author_association":"CONTRIBUTOR","body":"Hello! I've been lurking here a while, so now to pop in! I came across [elucidate](https://github.com/dlcs/elucidate-server) via the [w3c's implementation test results](https://w3c.github.io/test-results/annotation-protocol/all.html). It could be a short to medium term storage solution. Not sure how it would play out in the long run.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/737667397/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/738020715","html_url":"https://github.com/apache/incubator-annotator/issues/70#issuecomment-738020715","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/70","id":738020715,"node_id":"MDEyOklzc3VlQ29tbWVudDczODAyMDcxNQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T14:15:57Z","updated_at":"2020-12-03T14:15:57Z","author_association":"CONTRIBUTOR","body":"> Hello! I've been lurking here a while, so now to pop in!\r\n\r\nWelcome! If you are interested in getting involved in some way, or just curious, feel free to join the [mailing list][] and/or a [weekly call][] (next one is in ~2 hours!).\r\n\r\n[mailing list]: https://lists.apache.org/list.html?dev@annotator.apache.org\r\n[weekly call]: https://lists.apache.org/thread.html/r5338cf41bcbc919675e48b0168f9fde21b9584b727114cd2d894f244%40%3Cdev.annotator.apache.org%3E\r\n\r\n\r\n\r\n>  I came across [elucidate](https://github.com/dlcs/elucidate-server) via the [w3c's implementation test results](https://w3c.github.io/test-results/annotation-protocol/all.html). It could be a short to medium term storage solution. Not sure how it would play out in the long run.\r\n\r\nThanks for the pointer! As you may realise, we have so far been focussed on the front-end technicalities of annotation selectors, but this is certainly worth looking into.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/738020715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/738342322","html_url":"https://github.com/apache/incubator-annotator/issues/70#issuecomment-738342322","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/70","id":738342322,"node_id":"MDEyOklzc3VlQ29tbWVudDczODM0MjMyMg==","user":{"login":"vrish88","id":36475,"node_id":"MDQ6VXNlcjM2NDc1","avatar_url":"https://avatars.githubusercontent.com/u/36475?v=4","gravatar_id":"","url":"https://api.github.com/users/vrish88","html_url":"https://github.com/vrish88","followers_url":"https://api.github.com/users/vrish88/followers","following_url":"https://api.github.com/users/vrish88/following{/other_user}","gists_url":"https://api.github.com/users/vrish88/gists{/gist_id}","starred_url":"https://api.github.com/users/vrish88/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vrish88/subscriptions","organizations_url":"https://api.github.com/users/vrish88/orgs","repos_url":"https://api.github.com/users/vrish88/repos","events_url":"https://api.github.com/users/vrish88/events{/privacy}","received_events_url":"https://api.github.com/users/vrish88/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-03T21:53:49Z","updated_at":"2020-12-03T21:53:49Z","author_association":"CONTRIBUTOR","body":"@Treora Actually, I may take you up on that. I've got a side project that I'm really looking to use the whole annotation ecosystem for and I've got some time off work now. I'll plan on attending the one next week!","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/738342322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750933430","html_url":"https://github.com/apache/incubator-annotator/pull/98#issuecomment-750933430","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/98","id":750933430,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDkzMzQzMA==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-24T17:38:33Z","updated_at":"2020-12-24T17:38:33Z","author_association":"CONTRIBUTOR","body":"> I'm not 100 on all the APIs yet, â€¦\r\n\r\nMe neither.\r\n\r\n> â€¦but I'd like to merge and then make incremental changes from there. Excellent stuff.\r\n\r\nCool with me! I squashed some of the commits to make the path towards this a little more comprehensible.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750933430/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750933811","html_url":"https://github.com/apache/incubator-annotator/issues/75#issuecomment-750933811","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/75","id":750933811,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDkzMzgxMQ==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-24T17:41:16Z","updated_at":"2020-12-24T17:41:16Z","author_association":"CONTRIBUTOR","body":"Implemented in #98.","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750933811/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750943153","html_url":"https://github.com/apache/incubator-annotator/issues/83#issuecomment-750943153","issue_url":"https://api.github.com/repos/apache/incubator-annotator/issues/83","id":750943153,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDk0MzE1Mw==","user":{"login":"Treora","id":4191409,"node_id":"MDQ6VXNlcjQxOTE0MDk=","avatar_url":"https://avatars.githubusercontent.com/u/4191409?v=4","gravatar_id":"","url":"https://api.github.com/users/Treora","html_url":"https://github.com/Treora","followers_url":"https://api.github.com/users/Treora/followers","following_url":"https://api.github.com/users/Treora/following{/other_user}","gists_url":"https://api.github.com/users/Treora/gists{/gist_id}","starred_url":"https://api.github.com/users/Treora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Treora/subscriptions","organizations_url":"https://api.github.com/users/Treora/orgs","repos_url":"https://api.github.com/users/Treora/repos","events_url":"https://api.github.com/users/Treora/events{/privacy}","received_events_url":"https://api.github.com/users/Treora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-24T18:39:23Z","updated_at":"2020-12-24T18:39:23Z","author_association":"CONTRIBUTOR","body":"> Prior art we could borrow from:\r\n> \r\n> * https://github.com/tilgovi/dom-anchor-text-quote (uses diff-match-patch)\r\n> * https://github.com/robertknight/approx-string-match-js/\r\n\r\nUpdate: @judell kindly informed us that Hypothesis now switched from the former to the latter. See https://github.com/hypothesis/client/pull/2814 and https://github.com/hypothesis/client/pull/2779\r\n\r\nIâ€™d be eager to see how they compare (at least itâ€™s supposed to be much faster now!), what could still be improved, etc.\r\n\r\nSome observations from looking at how exactly approx-string-match-js is being used in H:\r\n\r\n- A nifty choice is that its new implementation [gives a score using weights][1] such that it is fuzzier when matching the prefix and suffix than when it matches the exact quote.\r\n- Also it allows giving a hint at which position in the text the quote is expected, giving a penalty to matches that are further away from that position; this elegantly enables combining the information from a TextQuoteSelector and TextPositionSelector.\r\n- The score for each matched string (before weighting) seems to be [calculated][2] as 1 minus the number of errors (i.e. its levenshtein distance) normalised by the stringâ€™s length. This makes sense, though I wonder if it might cause e.g. a one-character prefix to have an unfairly heavy influence on the match score (perhaps not significant, but dropping this thought here for later).\r\n\r\nCC @robertknight (happy to hear if you have more research notes, experimental results or other relevant tips from your experience developing this!)\r\n\r\n[1]: https://github.com/hypothesis/client/blob/0c2871ab98e6cf0a2bbfdb4d0aba439a3ba9039a/src/annotator/anchoring/match-quote.js#L109-L145\r\n[2]: https://github.com/hypothesis/client/blob/0c2871ab98e6cf0a2bbfdb4d0aba439a3ba9039a/src/annotator/anchoring/match-quote.js#L55-L64","reactions":{"url":"https://api.github.com/repos/apache/incubator-annotator/issues/comments/750943153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]