[{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288816882","html_url":"https://github.com/apache/pulsar/issues/277#issuecomment-288816882","issue_url":"https://api.github.com/repos/apache/pulsar/issues/277","id":288816882,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgxNjg4Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T18:25:16Z","updated_at":"2017-03-23T18:25:16Z","author_association":"CONTRIBUTOR","body":"@rdhabalia It seems like it might be the case. If you look at the jars included in the binary tgz, there are multiple netty packages with different versions that are being pulled in: \r\n\r\n```\r\n$ ls lib/ | grep netty\r\nasync-http-client-netty-utils-2.0.19.jar\r\nnetty-all-4.0.40.Final.jar\r\nnetty-buffer-4.0.42.Final.jar\r\nnetty-codec-4.0.42.Final.jar\r\nnetty-codec-dns-2.0.19.jar\r\nnetty-codec-http-4.0.42.Final.jar\r\nnetty-common-4.0.42.Final.jar\r\nnetty-handler-4.0.42.Final.jar\r\nnetty-reactive-streams-1.0.8.jar\r\nnetty-resolver-2.0.19.jar\r\nnetty-resolver-dns-2.0.19.jar\r\nnetty-transport-4.0.42.Final.jar\r\nnetty-transport-native-epoll-4.0.42.Final-linux-x86_64.jar\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288816882/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288821848","html_url":"https://github.com/apache/pulsar/issues/277#issuecomment-288821848","issue_url":"https://api.github.com/repos/apache/pulsar/issues/277","id":288821848,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgyMTg0OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T18:42:24Z","updated_at":"2017-03-23T18:42:24Z","author_association":"CONTRIBUTOR","body":"I think this is probably due to maven assembly ignoring the dependency exclusion.\r\n\r\nIf you look at `mvn dependency:tree` these jars are not included, but they are anyway added to the tgz","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288821848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288825446","html_url":"https://github.com/apache/pulsar/pull/311#issuecomment-288825446","issue_url":"https://api.github.com/repos/apache/pulsar/issues/311","id":288825446,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODgyNTQ0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T18:55:05Z","updated_at":"2017-03-23T18:55:05Z","author_association":"CONTRIBUTOR","body":"@rdhabalia @saandrews This should be possibly backported to 1.16 branch","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288825446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288842390","html_url":"https://github.com/apache/pulsar/pull/302#issuecomment-288842390","issue_url":"https://api.github.com/repos/apache/pulsar/issues/302","id":288842390,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODg0MjM5MA==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-23T19:59:46Z","updated_at":"2017-03-23T19:59:46Z","author_association":"CONTRIBUTOR","body":"@merlimat @rdhabalia is it safe to deploy this in production? I worry about the ledger id generation, seems to have changed a lot","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288842390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288900556","html_url":"https://github.com/apache/pulsar/issues/308#issuecomment-288900556","issue_url":"https://api.github.com/repos/apache/pulsar/issues/308","id":288900556,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODkwMDU1Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T00:33:00Z","updated_at":"2017-03-24T00:33:00Z","author_association":"CONTRIBUTOR","body":">  we had to replace our current local ZK leader in a cluster and this seems to cause a LOT of issues in the cluster.\r\n\r\nRestarting the leader should not be causing a ZK quorum loss, provided the other 2 (or 4) servers are fine. Can you check the ZK servers logs at the time the leader was taken out? There should be some lines in the logs that tells how much time it took to elect a new leader.\r\n\r\nIf the leader election takes (overall) more than the session timeout configured in the brokers, the brokers will restart themselves.\r\n\r\nThe question here is why should the leader election take so much time. Can you share the hardware and ZK config?\r\n\r\nAnother important factor is the snapshot size. Leader election is dependent on that. If the size of the metadata kept in ZK grows to the 100s of MB it can start slowing down the leader election. Internally, we had a patch to fix that. It has been merged upstream and will be released in ZK 3.4.10 (https://issues.apache.org/jira/browse/ZOOKEEPER-2678).\r\n\r\nIf leader election timing is the cause in this case, increasing the `sessionTimeout` in the brokers can make them able to \"survive\" and reconnect to quorum before the session is expired, thus not needing to restart.\r\n\r\n> 1 - Why do brokers shutdown on ZK Leader disconnection?\r\n\r\nThe main reason is to preserve the ownership of the topic. If I cannot ensure I have a lock on a particular set of topics, then some other broker will take them over. Second reason is how to reconciliate the state of the metadata between what the broker has in memory and what is in ZK. That can diverge during a session loss because of timeouts and other problems.\r\n\r\nWe have already been discussing a bit on improving this behavior by having a \"degraded\" mode in which brokers with no ZK session can continue sending and delivering messages without attempting to do any metadata operations (no new topics, no ledger rollovers..). The design is still up in the air, but it's an area that we surely are going to improve.\r\n\r\n> 2 - Why could this affect the backlog of consumers? we're running with a branch that persists individualDeletedMessages.\r\n\r\nNot sure about this one. One possibility is that after the restart, the cursor recovery failed and that triggers a rollback. The logic there is that if we cannot recover a cursor for a permanent error, and thus we don't know the position, we roll it back to the oldest available message to avoid data loss.\r\n\r\nCan you share the logs in the topic loading phase after the restart?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288900556/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288911388","html_url":"https://github.com/apache/pulsar/pull/302#issuecomment-288911388","issue_url":"https://api.github.com/repos/apache/pulsar/issues/302","id":288911388,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODkxMTM4OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T01:52:21Z","updated_at":"2017-03-24T01:52:21Z","author_association":"CONTRIBUTOR","body":"In theory the ledger id generation changes should be pretty safe and backward compatible (can rollback to previous release in case of issues). \r\nIn practice, to be safe you should wait until the official 1.17 release (should not too far away, the last big change is the load manager revamping). The release is guaranteed to go through a more rigorous regression test suite and system/stress test that runs continuously.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288911388/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288912078","html_url":"https://github.com/apache/pulsar/pull/192#issuecomment-288912078","issue_url":"https://api.github.com/repos/apache/pulsar/issues/192","id":288912078,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODkxMjA3OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T01:58:01Z","updated_at":"2017-03-24T01:58:01Z","author_association":"CONTRIBUTOR","body":"Closing this one since the change was carried over in #276 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288912078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288913221","html_url":"https://github.com/apache/pulsar/issues/309#issuecomment-288913221","issue_url":"https://api.github.com/repos/apache/pulsar/issues/309","id":288913221,"node_id":"MDEyOklzc3VlQ29tbWVudDI4ODkxMzIyMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T02:06:52Z","updated_at":"2017-03-24T02:06:52Z","author_association":"CONTRIBUTOR","body":"The ledger is in read-only because it was assigned after the recovery from the ledger itself. \r\n\r\nIt is being assigned at [ManagedCursorImpl.java#L243](https://github.com/yahoo/pulsar/blob/master/managed-ledger/src/main/java/org/apache/bookkeeper/mledger/impl/ManagedCursorImpl.java#L243). This is wrong because it doesn't make sense to save that ledgerId.\r\n\r\nThe `NoLedger` state is valid and expected after recovering a cursor and not issuing any delete/markDelete requests. The reason is that we want to \"recover\" a topic in the least possible number of steps, especially in terms of ZK writes (and creating a ledger involves few ZK writes), so we defer it for later.\r\n\r\nIn this case the reset cursor should trigger the creation of a new ledger, the same as when the 1st markDelete request is issued.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/288913221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289083104","html_url":"https://github.com/apache/pulsar/pull/315#issuecomment-289083104","issue_url":"https://api.github.com/repos/apache/pulsar/issues/315","id":289083104,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA4MzEwNA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:06:39Z","updated_at":"2017-03-24T17:06:39Z","author_association":"CONTRIBUTOR","body":"cc @sschepens ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289083104/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099196","html_url":"https://github.com/apache/pulsar/issues/238#issuecomment-289099196","issue_url":"https://api.github.com/repos/apache/pulsar/issues/238","id":289099196,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5OTE5Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:58:21Z","updated_at":"2017-03-24T17:58:21Z","author_association":"CONTRIBUTOR","body":"@jai1 was this already fixed?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099246","html_url":"https://github.com/apache/pulsar/issues/263#issuecomment-289099246","issue_url":"https://api.github.com/repos/apache/pulsar/issues/263","id":289099246,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5OTI0Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:58:30Z","updated_at":"2017-03-24T17:58:30Z","author_association":"CONTRIBUTOR","body":"@jai1 was this already fixed?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099246/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099774","html_url":"https://github.com/apache/pulsar/issues/180#issuecomment-289099774","issue_url":"https://api.github.com/repos/apache/pulsar/issues/180","id":289099774,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTA5OTc3NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T17:59:55Z","updated_at":"2017-03-24T17:59:55Z","author_association":"CONTRIBUTOR","body":"Closing this one since the changes are already implemented and merged in #276 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289099774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289119245","html_url":"https://github.com/apache/pulsar/pull/313#issuecomment-289119245","issue_url":"https://api.github.com/repos/apache/pulsar/issues/313","id":289119245,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTExOTI0NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T19:16:23Z","updated_at":"2017-03-24T19:16:43Z","author_association":"CONTRIBUTOR","body":"There are few unit test failures in the travis build. Restarted a few times, but they seem persistent","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289119245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289122563","html_url":"https://github.com/apache/pulsar/pull/306#issuecomment-289122563","issue_url":"https://api.github.com/repos/apache/pulsar/issues/306","id":289122563,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEyMjU2Mw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T19:31:09Z","updated_at":"2017-03-24T19:31:09Z","author_association":"CONTRIBUTOR","body":"Couple of seemingly legitimate unit test failures: \r\n\r\n```\r\nServerCnxTest.testProducerOnNotOwnedTopic:397 expected [ServiceNotReady] but found [UnknownError]\r\n  BrokerClientIntegrationTest.testMaxConcurrentTopicLoading:579 » Execution com....\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289122563/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289128257","html_url":"https://github.com/apache/pulsar/pull/313#issuecomment-289128257","issue_url":"https://api.github.com/repos/apache/pulsar/issues/313","id":289128257,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTEyODI1Nw==","user":{"login":"bobbeyreese","id":25467949,"node_id":"MDQ6VXNlcjI1NDY3OTQ5","avatar_url":"https://avatars.githubusercontent.com/u/25467949?v=4","gravatar_id":"","url":"https://api.github.com/users/bobbeyreese","html_url":"https://github.com/bobbeyreese","followers_url":"https://api.github.com/users/bobbeyreese/followers","following_url":"https://api.github.com/users/bobbeyreese/following{/other_user}","gists_url":"https://api.github.com/users/bobbeyreese/gists{/gist_id}","starred_url":"https://api.github.com/users/bobbeyreese/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bobbeyreese/subscriptions","organizations_url":"https://api.github.com/users/bobbeyreese/orgs","repos_url":"https://api.github.com/users/bobbeyreese/repos","events_url":"https://api.github.com/users/bobbeyreese/events{/privacy}","received_events_url":"https://api.github.com/users/bobbeyreese/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T19:57:51Z","updated_at":"2017-03-24T19:57:51Z","author_association":"CONTRIBUTOR","body":"The `isConnected` logic needed to be hard coded for this function, since the state had already been updated.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289128257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289150044","html_url":"https://github.com/apache/pulsar/issues/238#issuecomment-289150044","issue_url":"https://api.github.com/repos/apache/pulsar/issues/238","id":289150044,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTE1MDA0NA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T21:41:55Z","updated_at":"2017-03-24T21:41:55Z","author_association":"CONTRIBUTOR","body":"@merlimat -no will work on it next week \r\nThe fix is easy but I have noticed that CPP Tests always fail, I don't want to let CPP Test failures hamper the pulsar build.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289150044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289150552","html_url":"https://github.com/apache/pulsar/issues/263#issuecomment-289150552","issue_url":"https://api.github.com/repos/apache/pulsar/issues/263","id":289150552,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTE1MDU1Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T21:44:30Z","updated_at":"2017-03-24T21:44:30Z","author_association":"CONTRIBUTOR","body":"Yes #278 ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289150552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289157565","html_url":"https://github.com/apache/pulsar/pull/306#issuecomment-289157565","issue_url":"https://api.github.com/repos/apache/pulsar/issues/306","id":289157565,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTE1NzU2NQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-24T22:25:23Z","updated_at":"2017-03-24T22:25:23Z","author_association":"CONTRIBUTOR","body":"yes, fixed.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289157565/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289529933","html_url":"https://github.com/apache/pulsar/pull/196#issuecomment-289529933","issue_url":"https://api.github.com/repos/apache/pulsar/issues/196","id":289529933,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTUyOTkzMw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T17:47:07Z","updated_at":"2017-03-27T17:47:07Z","author_association":"CONTRIBUTOR","body":"@merlimat, Can we revisit this? We could still use this feature when we setup new cluster.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289529933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289583817","html_url":"https://github.com/apache/pulsar/pull/318#issuecomment-289583817","issue_url":"https://api.github.com/repos/apache/pulsar/issues/318","id":289583817,"node_id":"MDEyOklzc3VlQ29tbWVudDI4OTU4MzgxNw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-27T20:57:24Z","updated_at":"2017-03-27T20:57:24Z","author_association":"CONTRIBUTOR","body":"after running system-test with and without change into perf environment, we can see young-gc improvements from avg 450msec to 150ms\r\n\r\n**Before change:**\r\nML-Cache ................................................................................................GC\r\n![screenshot before-change](http://i.imgur.com/eQY4ikR.png)\r\n\r\n**After change**\r\nML-Cache ................................................................................................GC\r\n![screenshot after-change](http://i.imgur.com/0mEYVdq.png)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/289583817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290231488","html_url":"https://github.com/apache/pulsar/pull/318#issuecomment-290231488","issue_url":"https://api.github.com/repos/apache/pulsar/issues/318","id":290231488,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDIzMTQ4OA==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T21:28:18Z","updated_at":"2017-03-29T21:28:18Z","author_association":"CONTRIBUTOR","body":"@merlimat Do you have any more concern? We are trying to get this merged today if there is no blocker.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290231488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290239899","html_url":"https://github.com/apache/pulsar/pull/320#issuecomment-290239899","issue_url":"https://api.github.com/repos/apache/pulsar/issues/320","id":290239899,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDIzOTg5OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T22:01:05Z","updated_at":"2017-03-29T22:01:05Z","author_association":"CONTRIBUTOR","body":"@merlimat addressed comments.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290239899/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290250358","html_url":"https://github.com/apache/pulsar/pull/320#issuecomment-290250358","issue_url":"https://api.github.com/repos/apache/pulsar/issues/320","id":290250358,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDI1MDM1OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-29T22:51:30Z","updated_at":"2017-03-29T22:51:30Z","author_association":"CONTRIBUTOR","body":"also I haven't added zk-stats recording at broker-startup [cleanup](https://github.com/yahoo/pulsar/blob/master/pulsar-broker/src/main/java/com/yahoo/pulsar/broker/namespace/ServiceUnitZkUtils.java#L103). ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290250358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290379485","html_url":"https://github.com/apache/pulsar/issues/324#issuecomment-290379485","issue_url":"https://api.github.com/repos/apache/pulsar/issues/324","id":290379485,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDM3OTQ4NQ==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T11:09:56Z","updated_at":"2017-03-31T14:30:59Z","author_association":"NONE","body":"Edit: ignore comment, based on misreading of OP\r\n\r\nBookkeeper should have a dedicated disk to journalDir.\r\nSee: http://bookkeeper.apache.org/docs/r4.0.0/bookkeeperConfigParams.html","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290379485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290388964","html_url":"https://github.com/apache/pulsar/issues/324#issuecomment-290388964","issue_url":"https://api.github.com/repos/apache/pulsar/issues/324","id":290388964,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDM4ODk2NA==","user":{"login":"krumo","id":9900913,"node_id":"MDQ6VXNlcjk5MDA5MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9900913?v=4","gravatar_id":"","url":"https://api.github.com/users/krumo","html_url":"https://github.com/krumo","followers_url":"https://api.github.com/users/krumo/followers","following_url":"https://api.github.com/users/krumo/following{/other_user}","gists_url":"https://api.github.com/users/krumo/gists{/gist_id}","starred_url":"https://api.github.com/users/krumo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krumo/subscriptions","organizations_url":"https://api.github.com/users/krumo/orgs","repos_url":"https://api.github.com/users/krumo/repos","events_url":"https://api.github.com/users/krumo/events{/privacy}","received_events_url":"https://api.github.com/users/krumo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T11:56:40Z","updated_at":"2017-03-30T11:56:40Z","author_association":"CONTRIBUTOR","body":"@agarman Thank you for your reply~Yes, for each bookkeeper, I put journal, ledger and index files on different disk devices, but my result is still very poor.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290388964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290495013","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-290495013","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":290495013,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDQ5NTAxMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T18:07:28Z","updated_at":"2017-03-30T18:07:28Z","author_association":"CONTRIBUTOR","body":"> what was the issue you ran into with using curl? integrating with the asio event loop?\r\n\r\n@msb-at-yahoo @jai1 Integrating with asio should not be impossible. You could have a thread pool running libcurl in blocking way and then notifying the completion by \"posting\" work on the asio event loop thread.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290495013/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290500981","html_url":"https://github.com/apache/pulsar/issues/324#issuecomment-290500981","issue_url":"https://api.github.com/repos/apache/pulsar/issues/324","id":290500981,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUwMDk4MQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T18:24:48Z","updated_at":"2017-03-30T18:24:48Z","author_association":"CONTRIBUTOR","body":"Hi @krumo, I think the main difference resides in the disk config and also the 1Gbps NIC. \r\n\r\nFor example with 1Gbps in the broker you're not able to send 100K msg/s at 1KB payload size, because that's already over capacity.\r\n\r\nFor disk latency, the reason is that in BookKeeper every entry is flushed to disk before an ack is returned. This is to prevent any data loss in case of system crash or power failure.\r\n\r\nThe downside of it is that on normal HDDs you're seeing high latency, even if you use a dedicated disk for the journal.\r\n\r\nAs stated in the [Cluster Setup](https://github.com/yahoo/pulsar/blob/master/docs/ClusterSetup.md#bookkeeper)  : \r\n\r\n> It is critical to have fast fsync operation on this device for sequential writes. Typically, a small and fast SSDs will be fine, or HDDs with RAID controller and battery backed write cache. Both solutions can reach fsync latency of ~0.4 ms.\r\n\r\nSo you have 2 options:\r\n 1. Use SSD for journal. Latency should be good, even though we have seen different performance numbers for different SSD disks.\r\n 2. Use HDD with RAID and write cache. The battery on the RAID controller will make sure that all the data in the write cache gets flushed to disk in case of crashes or power loss.\r\n\r\nFinally, we have been using XFS for both journal and ledger devices since it was leading to better latencies (especially at 99pct and on).\r\n\r\nCan you also post the bookie internal stats? That should give more insight to understand where the latency is coming from. If you use the default config, bookies should dump the stats every 1min into a `bookie-stats.json` file.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290500981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290509398","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-290509398","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":290509398,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUwOTM5OA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T18:53:13Z","updated_at":"2017-03-30T18:53:13Z","author_association":"CONTRIBUTOR","body":"@merlimat @msb-at-yahoo @saandrews  - curl works with asio (example below) but getting it work with boost::asio 1.41 was a bit difficult since few methods are not supported in the old version and also in the standup there was an issue of not liking libcurl so I abandoned the effort.\r\n\r\nAnyways, I will spend some more time on this and try to get the old asio to work with libcurl.\r\n\r\nhttps://curl.haxx.se/libcurl/c/asiohiper.html ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290509398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290510112","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-290510112","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":290510112,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUxMDExMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T18:55:37Z","updated_at":"2017-03-30T18:55:37Z","author_association":"CONTRIBUTOR","body":"@jai1 I don't think that making curl to use asio underneath is necessary. That might be much more difficult than just using a thread pool and normal blocking libcurl calls.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290510112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290517113","html_url":"https://github.com/apache/pulsar/pull/303#issuecomment-290517113","issue_url":"https://api.github.com/repos/apache/pulsar/issues/303","id":290517113,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUxNzExMw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T19:20:48Z","updated_at":"2017-03-30T19:20:48Z","author_association":"CONTRIBUTOR","body":"Can we create a separate pull request to document the steps to enable/disable the new load manager?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290517113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290524380","html_url":"https://github.com/apache/pulsar/pull/318#issuecomment-290524380","issue_url":"https://api.github.com/repos/apache/pulsar/issues/318","id":290524380,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUyNDM4MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T19:48:43Z","updated_at":"2017-03-30T19:48:43Z","author_association":"CONTRIBUTOR","body":"@rdhabalia @saandrews Added 1 commit on top of this PR. Take a look at https://github.com/merlimat/pulsar/commit/08de7c7c47fdb242074b08ddbb81a3fae8b2f72b \r\n\r\nFew things: \r\n 1. Use proper ref-count sematic for EntryImpl. EntryImpl owns a ref of the buffer (so, while we have an `EntryImpl`, the buffer is alive.\r\n 2. Removed recycling on PositionImpl, this was long due since it's impossible to achieve on the current premises. Use ledgerId/entryId in entryImpl so that is more compact","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290524380/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290528651","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-290528651","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":290528651,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUyODY1MQ==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T20:03:59Z","updated_at":"2017-03-30T20:03:59Z","author_association":"CONTRIBUTOR","body":"the only thing we'd need of asio is a way to plug in the curl fds into the epoll loop.\r\n\r\nhaving a queue and using the \"easy curl\" interface from a background thread is reasonable, too. it'd have the benefit of providing a natural rate limit","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290528651/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290529323","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-290529323","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":290529323,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUyOTMyMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T20:06:33Z","updated_at":"2017-03-30T20:06:49Z","author_association":"CONTRIBUTOR","body":"> having a queue and using the \"easy curl\" interface from a background thread is reasonable, too. it'd have the benefit of providing a natural rate limit\r\n\r\nI think it would be easier to do and anyway we have already another mechanism to do efficient lookups with the binary protocol, so I wouldn't put a big emphasis on performance for HTTP lookup at this point.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290529323/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290529496","html_url":"https://github.com/apache/pulsar/pull/298#issuecomment-290529496","issue_url":"https://api.github.com/repos/apache/pulsar/issues/298","id":290529496,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUyOTQ5Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T20:07:11Z","updated_at":"2017-03-30T20:07:11Z","author_association":"CONTRIBUTOR","body":"@sschepens The change looks good to me. Can you expand on what would be the use case for cancelling the receive future? Also can you add a unit test for the new behavior?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290529496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290534992","html_url":"https://github.com/apache/pulsar/pull/298#issuecomment-290534992","issue_url":"https://api.github.com/repos/apache/pulsar/issues/298","id":290534992,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDUzNDk5Mg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T20:28:20Z","updated_at":"2017-03-30T20:28:20Z","author_association":"CONTRIBUTOR","body":"@merlimat We're building a process that consumes from multiple consumers and then triggers http requests. We're using netty and building it in an async way.\r\nThe best way to consume messages in an async way is to use receiveAsync(), other options are synchronous and would require for us to use some scheduling logic when no messages are received to not block threads.\r\nNow, we would also like to be able to have a timeout on receiveAsync or be able to cancel it if we wish to control the amount of receiveAsync calls that are pending at any time.\r\n\r\nI will add a test, just wanted to check with you first","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290534992/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290553962","html_url":"https://github.com/apache/pulsar/pull/318#issuecomment-290553962","issue_url":"https://api.github.com/repos/apache/pulsar/issues/318","id":290553962,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDU1Mzk2Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T21:44:02Z","updated_at":"2017-03-30T21:44:02Z","author_association":"CONTRIBUTOR","body":"@merlimat Looks good to me. By introducing refCounted `EntryImpl`, we init it with refCount=1 so, it will be recycled immediately once we call `release` on it. So, we may have issue if that same entry is being used anywhere after releasing it.\r\nI will cherry-pick this change into this PR and I am verifying if we have such usecase so, we can address it after this change.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290553962/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290554058","html_url":"https://github.com/apache/pulsar/pull/325#issuecomment-290554058","issue_url":"https://api.github.com/repos/apache/pulsar/issues/325","id":290554058,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDU1NDA1OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T21:44:30Z","updated_at":"2017-03-30T21:44:30Z","author_association":"CONTRIBUTOR","body":"In addition to how enable the load manager, can you also cover how it works (how is the traffic reassigned, what kind of resources are monitored, etc..)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290554058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290554423","html_url":"https://github.com/apache/pulsar/pull/318#issuecomment-290554423","issue_url":"https://api.github.com/repos/apache/pulsar/issues/318","id":290554423,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDU1NDQyMw==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-30T21:46:05Z","updated_at":"2017-03-30T21:46:05Z","author_association":"CONTRIBUTOR","body":"> So, we may have issue if that same entry is being used anywhere after releasing it.\r\n\r\nYes, take it with a grain of salt.. it would be good to have it go through a regression as well\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290554423/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290615864","html_url":"https://github.com/apache/pulsar/issues/238#issuecomment-290615864","issue_url":"https://api.github.com/repos/apache/pulsar/issues/238","id":290615864,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDYxNTg2NA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T04:56:08Z","updated_at":"2017-03-31T04:56:08Z","author_association":"CONTRIBUTOR","body":"Only one fix remaining - CPP client crashes on Producer Destruction","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290615864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290706451","html_url":"https://github.com/apache/pulsar/issues/324#issuecomment-290706451","issue_url":"https://api.github.com/repos/apache/pulsar/issues/324","id":290706451,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDcwNjQ1MQ==","user":{"login":"krumo","id":9900913,"node_id":"MDQ6VXNlcjk5MDA5MTM=","avatar_url":"https://avatars.githubusercontent.com/u/9900913?v=4","gravatar_id":"","url":"https://api.github.com/users/krumo","html_url":"https://github.com/krumo","followers_url":"https://api.github.com/users/krumo/followers","following_url":"https://api.github.com/users/krumo/following{/other_user}","gists_url":"https://api.github.com/users/krumo/gists{/gist_id}","starred_url":"https://api.github.com/users/krumo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/krumo/subscriptions","organizations_url":"https://api.github.com/users/krumo/orgs","repos_url":"https://api.github.com/users/krumo/repos","events_url":"https://api.github.com/users/krumo/events{/privacy}","received_events_url":"https://api.github.com/users/krumo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-03-31T13:05:00Z","updated_at":"2017-03-31T13:05:00Z","author_association":"CONTRIBUTOR","body":"@merlimat Thank you for your detailed explanation. It's a sad story that my lab only have machines with HDDs. So now I have to test the performance of Pulsar on HDDs. And I will suggest my advisor to buy some SSDs to present the real power of Pulsar. \r\n\r\nAttached is my bookie-stats file generated by one of the bookies during the test. Hope it can help to reflect what is the bottleneck of the bookie.\r\n[bookie-stats.zip](https://github.com/yahoo/pulsar/files/884610/bookie-stats.zip)\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290706451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290977130","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-290977130","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":290977130,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MDk3NzEzMA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-02T10:15:57Z","updated_at":"2017-04-02T10:16:54Z","author_association":"CONTRIBUTOR","body":"@saandrews @msb-at-yahoo \r\nI was able to get libcurl (Version 7.19.7) with boost (Version 1.41) using curl_multi_socket_action -  \r\nhttps://github.com/jai1/CPlusPlus-Learn/blob/master/curlExamples/old_curl_asio_without_socket_reuse.cpp\r\n\r\n**but** when I ran it with valgrind I saw memory leaks https://gist.github.com/jai1/950d93198eea07ab5522833b40bfd9f6 \r\n\r\nI think this is an issue with the old curl library since \r\na. I saw checked curl github issues where someone complained about similar memory leak and was instructed to use the new library version.\r\nb. I built and linked the code to the latest version curl library - I see no leaks.\r\n\r\nSo I am going ahead with Matteo's suggestion and creating a thread pool with block curl calls (using easy interface). Let me know if you want me to change the approach.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/290977130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291220519","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-291220519","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":291220519,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTIyMDUxOQ==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-03T17:51:46Z","updated_at":"2017-04-03T17:51:46Z","author_association":"CONTRIBUTOR","body":"i suggest you default the thread pool size to 1.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291220519/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291566400","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-291566400","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":291566400,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTU2NjQwMA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-04T17:05:08Z","updated_at":"2017-04-04T17:05:08Z","author_association":"CONTRIBUTOR","body":"I ran into this issue with libcurl - https://www.redhat.com/archives/libvir-list/2012-October/msg00210.html\r\n\r\n#0  0x00007ffff68ab70b in addbyter (output=110, data=0x7fffcabfbca0) at /home/jai1/curl-master/lib/mprintf.c:998\r\n#1  0x00007ffff68aa543 in dprintf_formatf (data=0x7fffcabfbca0, stream=0x7ffff68ab6d2 <addbyter>, format=0x7ffff68ea1e1 \"name lookup timed out\", ap_save=0x7fffcabfbce0)\r\n    at /home/jai1/curl-master/lib/mprintf.c:631\r\n#2  0x00007ffff68ab78b in curl_mvsnprintf (buffer=0x0, maxlength=16384, format=0x7ffff68ea1e1 \"name lookup timed out\", ap_save=0x7fffcabfbce0) at /home/jai1/curl-master/lib/mprintf.c:1016\r\n#3  0x00007ffff688df85 in Curl_failf (data=0x8bc530, fmt=0x7ffff68ea1e1 \"name lookup timed out\") at /home/jai1/curl-master/lib/sendf.c:248\r\n#4  0x00007ffff687ec72 in Curl_resolv_timeout (conn=0x7ffff737bf3f, hostname=0x7fffcabfbe20 \"@\\276\\277\\312\\377\\177\", port=32767, entry=0x7fffb0019368, timeoutms=140737341013673)\r\n    at /home/jai1/curl-master/lib/hostip.c:622\r\n#5  0x00000000008d9b58 in ?? ()\r\n#6  0x00007fffcabfbfd0 in ?? ()","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291566400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291578365","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-291578365","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":291578365,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTU3ODM2NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-04T17:47:00Z","updated_at":"2017-04-04T17:47:00Z","author_association":"CONTRIBUTOR","body":"@jai1 Did you see these tips for libcurl in multi-thread apps? \r\nhttps://curl.haxx.se/libcurl/c/threadsafe.html","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291578365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291621002","html_url":"https://github.com/apache/pulsar/issues/307#issuecomment-291621002","issue_url":"https://api.github.com/repos/apache/pulsar/issues/307","id":291621002,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTYyMTAwMg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-04T20:24:08Z","updated_at":"2017-04-04T20:24:08Z","author_association":"CONTRIBUTOR","body":"@msb-at-yahoo @merlimat \r\n- Sorry to cause a storm in a teacup, I had not read the document that Matteo sent \r\n\r\nThe implementation is done and passes the cms-qa tests - can you please review it and give a +1.\r\nhttps://github.com/yahoo/pulsar/pull/317","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291621002/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291955535","html_url":"https://github.com/apache/pulsar/pull/317#issuecomment-291955535","issue_url":"https://api.github.com/repos/apache/pulsar/issues/317","id":291955535,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTk1NTUzNQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-05T18:37:28Z","updated_at":"2017-04-05T18:37:28Z","author_association":"CONTRIBUTOR","body":"@merlimat - I have handled your CR comments - can I please get a +1 \r\nAlso for the URL part:-\r\nThe legacy code Url.cc:42 regex was designed for handling URLs of type http://test.example.com/dir/subdir/file.html?arg1=var1,arg2=var2\r\n\r\nWhere path is \"/dir/subdir/\" and file is \"file.html\"\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291955535/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291969892","html_url":"https://github.com/apache/pulsar/pull/332#issuecomment-291969892","issue_url":"https://api.github.com/repos/apache/pulsar/issues/332","id":291969892,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MTk2OTg5Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-05T19:26:35Z","updated_at":"2017-04-05T19:26:35Z","author_association":"CONTRIBUTOR","body":"can we also add unit test for changes.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/291969892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292087228","html_url":"https://github.com/apache/pulsar/pull/334#issuecomment-292087228","issue_url":"https://api.github.com/repos/apache/pulsar/issues/334","id":292087228,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjA4NzIyOA==","user":{"login":"yahoocla","id":6155154,"node_id":"MDQ6VXNlcjYxNTUxNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/6155154?v=4","gravatar_id":"","url":"https://api.github.com/users/yahoocla","html_url":"https://github.com/yahoocla","followers_url":"https://api.github.com/users/yahoocla/followers","following_url":"https://api.github.com/users/yahoocla/following{/other_user}","gists_url":"https://api.github.com/users/yahoocla/gists{/gist_id}","starred_url":"https://api.github.com/users/yahoocla/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yahoocla/subscriptions","organizations_url":"https://api.github.com/users/yahoocla/orgs","repos_url":"https://api.github.com/users/yahoocla/repos","events_url":"https://api.github.com/users/yahoocla/events{/privacy}","received_events_url":"https://api.github.com/users/yahoocla/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T07:03:39Z","updated_at":"2017-04-06T07:03:39Z","author_association":"NONE","body":"Thank you for submitting this pull request, however I do not see a valid CLA on file for you. Before we can merge this request please visit https://yahoocla.herokuapp.com/ and agree to the terms. Thanks! :smile:","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292087228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292223642","html_url":"https://github.com/apache/pulsar/pull/299#issuecomment-292223642","issue_url":"https://api.github.com/repos/apache/pulsar/issues/299","id":292223642,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjIyMzY0Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T16:07:58Z","updated_at":"2017-04-06T16:07:58Z","author_association":"CONTRIBUTOR","body":"The change looks good for a quick approach to the issue. The only concern that I have is that there is no way to retain ordering when doing this operation, since the switch from the old to new partitions is not coordinated.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292223642/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292230888","html_url":"https://github.com/apache/pulsar/pull/299#issuecomment-292230888","issue_url":"https://api.github.com/repos/apache/pulsar/issues/299","id":292230888,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjIzMDg4OA==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T16:33:19Z","updated_at":"2017-04-06T16:33:19Z","author_association":"CONTRIBUTOR","body":"The violation of the ordering behavior should be included in the documentation.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292230888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292245233","html_url":"https://github.com/apache/pulsar/pull/305#issuecomment-292245233","issue_url":"https://api.github.com/repos/apache/pulsar/issues/305","id":292245233,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjI0NTIzMw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T17:21:02Z","updated_at":"2017-04-06T17:21:02Z","author_association":"CONTRIBUTOR","body":"@merlimat @saandrews @msb-at-yahoo - Can you please give me a +1 on this - need to get it into production","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292245233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292247759","html_url":"https://github.com/apache/pulsar/pull/305#issuecomment-292247759","issue_url":"https://api.github.com/repos/apache/pulsar/issues/305","id":292247759,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjI0Nzc1OQ==","user":{"login":"msb-at-yahoo","id":7442825,"node_id":"MDQ6VXNlcjc0NDI4MjU=","avatar_url":"https://avatars.githubusercontent.com/u/7442825?v=4","gravatar_id":"","url":"https://api.github.com/users/msb-at-yahoo","html_url":"https://github.com/msb-at-yahoo","followers_url":"https://api.github.com/users/msb-at-yahoo/followers","following_url":"https://api.github.com/users/msb-at-yahoo/following{/other_user}","gists_url":"https://api.github.com/users/msb-at-yahoo/gists{/gist_id}","starred_url":"https://api.github.com/users/msb-at-yahoo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msb-at-yahoo/subscriptions","organizations_url":"https://api.github.com/users/msb-at-yahoo/orgs","repos_url":"https://api.github.com/users/msb-at-yahoo/repos","events_url":"https://api.github.com/users/msb-at-yahoo/events{/privacy}","received_events_url":"https://api.github.com/users/msb-at-yahoo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T17:28:12Z","updated_at":"2017-04-06T17:28:12Z","author_association":"CONTRIBUTOR","body":"can you rebase this to one commit?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292247759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292248196","html_url":"https://github.com/apache/pulsar/pull/305#issuecomment-292248196","issue_url":"https://api.github.com/repos/apache/pulsar/issues/305","id":292248196,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjI0ODE5Ng==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T17:29:30Z","updated_at":"2017-04-06T17:29:30Z","author_association":"CONTRIBUTOR","body":"@msb-at-yahoo Merging the PR will anyway force a squash. I've configured github to only leave that option ;)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292248196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292323364","html_url":"https://github.com/apache/pulsar/pull/332#issuecomment-292323364","issue_url":"https://api.github.com/repos/apache/pulsar/issues/332","id":292323364,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjMyMzM2NA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-06T21:14:03Z","updated_at":"2017-04-06T21:14:03Z","author_association":"CONTRIBUTOR","body":"@merlimat @saandrews I think we can include #336 and this #332 PR for patch. so, can you please review this one as well.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292323364/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292369942","html_url":"https://github.com/apache/pulsar/pull/338#issuecomment-292369942","issue_url":"https://api.github.com/repos/apache/pulsar/issues/338","id":292369942,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjM2OTk0Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-07T00:07:57Z","updated_at":"2017-04-07T00:07:57Z","author_association":"CONTRIBUTOR","body":"#332 will be fixed as part of 1.18 and we can take this PR for 1.17 patch.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292369942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292383248","html_url":"https://github.com/apache/pulsar/pull/299#issuecomment-292383248","issue_url":"https://api.github.com/repos/apache/pulsar/issues/299","id":292383248,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjM4MzI0OA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-07T00:59:05Z","updated_at":"2017-04-07T00:59:05Z","author_association":"CONTRIBUTOR","body":"> The only concern that I have is that there is no way to retain ordering when doing this operation, since the switch from the old to new partitions is not coordinated.\r\n\r\nThat's correct. Here after increasing partitions, disconnecting producers/consumer will not help because they again connect to individual partition-topic and **client has to restart** application to create producer/consumer for newly created partitioned because that's the only time when PulsarClient fetches new partition-metadata and creates producers for them. And **client restart** has to be coordinated.\r\nSo, in that case as @msb-at-yahoo mentioned: we can document it at api and admin-tool.\r\nany thought?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292383248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292632042","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-292632042","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":292632042,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjYzMjA0Mg==","user":{"login":"agarman","id":138454,"node_id":"MDQ6VXNlcjEzODQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/138454?v=4","gravatar_id":"","url":"https://api.github.com/users/agarman","html_url":"https://github.com/agarman","followers_url":"https://api.github.com/users/agarman/followers","following_url":"https://api.github.com/users/agarman/following{/other_user}","gists_url":"https://api.github.com/users/agarman/gists{/gist_id}","starred_url":"https://api.github.com/users/agarman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agarman/subscriptions","organizations_url":"https://api.github.com/users/agarman/orgs","repos_url":"https://api.github.com/users/agarman/repos","events_url":"https://api.github.com/users/agarman/events{/privacy}","received_events_url":"https://api.github.com/users/agarman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-07T19:36:24Z","updated_at":"2017-04-09T02:28:46Z","author_association":"NONE","body":"This would be a minor concern except that `mvn test` now fails or takes >2 hours (from 12 minutes 2 days ago).\r\n\r\nEdit: the build issues are a Sierra+JDK+Corporate SW issue... unlikely a Pulsar issue.\r\nEdit: tracked down issue with slow compile: [slow IP resolution in Java + Sierra](http://stackoverflow.com/questions/39636792/jvm-takes-a-long-time-to-resolve-ip-address-for-localhost)","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292632042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292677421","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-292677421","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":292677421,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY3NzQyMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-07T23:49:36Z","updated_at":"2017-04-07T23:49:36Z","author_association":"CONTRIBUTOR","body":"Bin releases missing is not voluntary.. we need to understand why travis is not pushing the releases anymore. @rdhabalia any idea?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292677421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292678803","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-292678803","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":292678803,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY3ODgwMw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-08T00:02:22Z","updated_at":"2017-04-08T00:02:22Z","author_association":"CONTRIBUTOR","body":"I don't see any clear reason why it stopped after 1.17 release but I am still investigating it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292678803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292686541","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-292686541","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":292686541,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MjY4NjU0MQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-08T01:43:57Z","updated_at":"2017-04-08T01:43:57Z","author_association":"CONTRIBUTOR","body":"@merlimat - I agree that the tag id should remain 4 so that an old client can still talk to the new server but we don't have an old client. On the client side this feature will be released after this Pull request (i.e old clients don't have getBrokerConsumerStats API). I have added the version check to make sure that new client doesn't send requests to old broker.\r\n\r\nHence I don't think we need to keep the tag id as 4.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292686541/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292757230","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-292757230","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":292757230,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjc1NzIzMA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-09T01:28:46Z","updated_at":"2017-04-09T01:28:46Z","author_association":"CONTRIBUTOR","body":"I think a new client can prevent requesting old broker by introducing version V8, but as we already had one release 1.17 with old -client which can send `topic_name=2` to new broker so, to handle this scenario we can keep `consumer_id=4` and comment-out removed fields for future reference.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292757230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292757477","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-292757477","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":292757477,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjc1NzQ3Nw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-09T01:35:06Z","updated_at":"2017-04-09T01:35:06Z","author_association":"CONTRIBUTOR","body":"We don't have any client released which uses the BrokerConsumerStats command \r\na. Java - client PR is still not approved\r\nb. CPP - PR was approved but not a single release has been made since 10th Jan 2017\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292757477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292758461","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-292758461","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":292758461,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjc1ODQ2MQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-09T02:00:41Z","updated_at":"2017-04-09T02:00:41Z","author_association":"CONTRIBUTOR","body":"Anyways I have  changed the field number to 4 in the last commit, I will merge the PR by tomorrow noon.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292758461/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292854977","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-292854977","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":292854977,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mjg1NDk3Nw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-10T05:45:02Z","updated_at":"2017-04-10T05:45:02Z","author_association":"CONTRIBUTOR","body":"@merlimat - can you please give me a +1 on this - I have addressed your comments and got a +1 from Rajan but for some reason, the system is not allowing me to merge the changes - it is stuck on \"merlimat requested changes\"","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/292854977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293018482","html_url":"https://github.com/apache/pulsar/pull/339#issuecomment-293018482","issue_url":"https://api.github.com/repos/apache/pulsar/issues/339","id":293018482,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzAxODQ4Mg==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-10T17:21:10Z","updated_at":"2017-04-10T17:21:10Z","author_association":"CONTRIBUTOR","body":"I think the consumer_id could have been 2 since there is no real client implementation released wth that change. Should we put it back to 2?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293018482/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293056453","html_url":"https://github.com/apache/pulsar/pull/337#issuecomment-293056453","issue_url":"https://api.github.com/repos/apache/pulsar/issues/337","id":293056453,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzA1NjQ1Mw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-10T19:39:17Z","updated_at":"2017-04-10T19:39:17Z","author_association":"CONTRIBUTOR","body":"@merlimat \r\nScenarios-\r\n1. Pooling OFF:-\r\n\ta. Create producer/consumer fails \r\n\t\t- handled in connectionOpened();\r\n\tb. Lookup or getMeta fails \r\n\t\t- handled in findBroker and getPartitionedTopicMetadata\r\n\tc. Reconnect fail - handled by calling  removeConsume/Producer explicitly on old connection\r\n\td. Close fails - handled by removeConsume/Producer\r\n\te. Consumer/Producer gets GC’d without closing\r\n\t\t- No way right now but we can implement Closeable and explicitly throw IOException in the constructor to force ppl to use try-with-resource idiom - it’s a big change and we need to think about backward compatibility.\r\n\r\n2. Pooling ON:-\r\n\ta. We are guaranteed to leak atmost X number of resources.\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293056453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293084829","html_url":"https://github.com/apache/pulsar/pull/320#issuecomment-293084829","issue_url":"https://api.github.com/repos/apache/pulsar/issues/320","id":293084829,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzA4NDgyOQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-10T21:30:06Z","updated_at":"2017-04-10T21:30:06Z","author_association":"CONTRIBUTOR","body":"ping @merlimat @saandrews ","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293084829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293118763","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-293118763","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":293118763,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzExODc2Mw==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-11T00:51:26Z","updated_at":"2017-04-11T00:51:26Z","author_association":"CONTRIBUTOR","body":"@merlimat do you think is there any change in [secure-key](https://github.com/yahoo/pulsar/blob/master/.travis.yml#L39) or we can update if it has been changed.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293118763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293159363","html_url":"https://github.com/apache/pulsar/issues/342#issuecomment-293159363","issue_url":"https://api.github.com/repos/apache/pulsar/issues/342","id":293159363,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzE1OTM2Mw==","user":{"login":"saandrews","id":20527148,"node_id":"MDQ6VXNlcjIwNTI3MTQ4","avatar_url":"https://avatars.githubusercontent.com/u/20527148?v=4","gravatar_id":"","url":"https://api.github.com/users/saandrews","html_url":"https://github.com/saandrews","followers_url":"https://api.github.com/users/saandrews/followers","following_url":"https://api.github.com/users/saandrews/following{/other_user}","gists_url":"https://api.github.com/users/saandrews/gists{/gist_id}","starred_url":"https://api.github.com/users/saandrews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/saandrews/subscriptions","organizations_url":"https://api.github.com/users/saandrews/orgs","repos_url":"https://api.github.com/users/saandrews/repos","events_url":"https://api.github.com/users/saandrews/events{/privacy}","received_events_url":"https://api.github.com/users/saandrews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-11T06:04:25Z","updated_at":"2017-04-11T06:04:25Z","author_association":"CONTRIBUTOR","body":"1. Can we list down what actions(e.g: topic load/unload, new subscription, ledger rollover) will be impacted when we implement this change?\r\n2. If all of them are impacted, can we prioritize among them as to who can access zk? If we do this, would it indirectly address some of the benefits we would get if we had 2 zk clusters?\r\n3. Should we have different thresholds for read vs. write latency?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293159363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293426050","html_url":"https://github.com/apache/pulsar/issues/342#issuecomment-293426050","issue_url":"https://api.github.com/repos/apache/pulsar/issues/342","id":293426050,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzQyNjA1MA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-11T23:09:12Z","updated_at":"2017-04-11T23:09:12Z","author_association":"CONTRIBUTOR","body":"> Can we list down what actions(e.g: topic load/unload, new subscription, ledger rollover) will be impacted when we implement this change?\r\n\r\nfor now, we have mechanism to control concurrent topic-loading and lookup-request dynamically. So, for now, action could be changing throttling limits for topic-loading and lookup-request.\r\n\r\n> If all of them are impacted, can we prioritize among them as to who can access zk? If we do this, would it indirectly address some of the benefits we would get if we had 2 zk clusters?\r\n\r\nactually, we don't have any gate at broker which can be enabled dynamically to prioritize zk access. So, not sure what exactly we can do here. \r\n\r\n> Should we have different thresholds for read vs. write latency?\r\n\r\nyes, but considering write latency could be enough.?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293426050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293435438","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-293435438","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":293435438,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzQzNTQzOA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T00:08:39Z","updated_at":"2017-04-12T00:08:39Z","author_association":"CONTRIBUTOR","body":"I didn't do any change in the keys.. also the github oauth token permissions appears to be still correct. I don't understand why it doesn't upload anymore, even though from a build perspective it appears everything is successful. Even on the OAuth status, it says the token was used in the past 5 days.. when the last release was tagged..\r\n\r\nI will regenerate the token and upload it to try again. Though it will not work for already released tags anyway. For those, I think we should manually upload the release binaries for now, and verify that gets fixed in next releases.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293435438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293436607","html_url":"https://github.com/apache/pulsar/pull/348#issuecomment-293436607","issue_url":"https://api.github.com/repos/apache/pulsar/issues/348","id":293436607,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzQzNjYwNw==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T00:16:41Z","updated_at":"2017-04-12T00:16:41Z","author_association":"CONTRIBUTOR","body":"@saandrews - for pulsar it is a NOOP and for CMS the code is in *-pkg repo \"Auth.cc\"","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293436607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293443359","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-293443359","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":293443359,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzQ0MzM1OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T01:07:40Z","updated_at":"2017-04-12T01:07:40Z","author_association":"CONTRIBUTOR","body":"> For those, I think we should manually upload the release binaries for now, and verify that gets fixed in next releases.\r\n\r\nYes, I will upload them.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293443359/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293443990","html_url":"https://github.com/apache/pulsar/issues/340#issuecomment-293443990","issue_url":"https://api.github.com/repos/apache/pulsar/issues/340","id":293443990,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzQ0Mzk5MA==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T01:11:50Z","updated_at":"2017-04-12T01:11:50Z","author_association":"CONTRIBUTOR","body":"I have manually uploaded binaries to appropriate releases for now.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293443990/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293637872","html_url":"https://github.com/apache/pulsar/pull/322#issuecomment-293637872","issue_url":"https://api.github.com/repos/apache/pulsar/issues/322","id":293637872,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzYzNzg3Mg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T16:42:03Z","updated_at":"2017-04-12T16:42:03Z","author_association":"CONTRIBUTOR","body":"@merlimat @msb-at-yahoo @saandrews @rdhabalia - when you get time can you pls have a look and give a +1\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293637872/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293650912","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293650912","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293650912,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1MDkxMg==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T17:29:44Z","updated_at":"2017-04-12T17:29:44Z","author_association":"CONTRIBUTOR","body":"I add some more info, I grabbed a random consumer from a random topic which is currently active and find the following cursor info:\r\n```\r\ncursor info: cursorsLedgerId: 1085466\r\nmarkDeleteLedgerId: 1009812\r\nmarkDeleteEntryId: 6153\r\nindividualDeletedMessages {\r\n  lowerEndpoint {\r\n    ledgerId: 1009812\r\n    entryId: 6154\r\n  }\r\n  upperEndpoint {\r\n    ledgerId: 1083923\r\n    entryId: 44490\r\n  }\r\n}\r\nindividualDeletedMessages {\r\n  lowerEndpoint {\r\n    ledgerId: 1083923\r\n    entryId: 44491\r\n  }\r\n  upperEndpoint {\r\n    ledgerId: 1083923\r\n    entryId: 44495\r\n  }\r\n}\r\n```\r\n\r\nWhat about this is that ledger 1085466 is closed:\r\n```\r\nledgerID: 1085466\r\nBookieMetadataFormatVersion\t2\r\nquorumSize: 3\r\nensembleSize: 3\r\nlength: 50\r\nlastEntryId: 0\r\nstate: CLOSED\r\nsegment {\r\n  ensembleMember: \"10.64.102.126:3181\"\r\n  ensembleMember: \"10.64.103.151:3181\"\r\n  ensembleMember: \"10.64.103.68:3181\"\r\n  firstEntryId: 0\r\n}\r\nsegment {\r\n  ensembleMember: \"10.64.102.126:3181\"\r\n  ensembleMember: \"10.64.103.151:3181\"\r\n  ensembleMember: \"10.64.102.214:3181\"\r\n  firstEntryId: 1\r\n}\r\ndigestType: CRC32\r\npassword: \"\"\r\nackQuorumSize: 3\r\n```\r\n\r\nNow, if I get the internal-stats for that topic and consumer I get the following information:\r\n```\r\n    {\r\n      \"markDeletePosition\" : \"1218534:48417\",\r\n      \"readPosition\" : \"1352213:18774\",\r\n      \"waitingReadOp\" : true,\r\n      \"pendingReadOps\" : 0,\r\n      \"messagesConsumedCounter\" : 35121719,\r\n      \"cursorLedger\" : 1085466,\r\n      \"cursorLedgerLastEntry\" : 0,\r\n      \"individuallyDeletedMessages\" : \"[(1218534:48418‥1333786:41094], (1333786:41095‥1352213:18164], (1352213:18165‥1352213:18248], (1352213:18249‥1352213:18272], (1352213:18273‥1352213:18315], (1352213:18316‥1352213:18336], (1352213:18337‥1352213:18350], (1352213:18351‥1352213:18548], (1352213:18549‥1352213:18593], (1352213:18594‥1352213:18610], (1352213:18611‥1352213:18636], (1352213:18637‥1352213:18760], (1352213:18761‥1352213:18773]]\",\r\n      \"lastLedgerSwitchTimestamp\" : \"2017-04-01 06:17:54.742\",\r\n      \"state\" : \"NoLedger\"\r\n    }\r\n```\r\n\r\nIt would seem that the consumer somehow failed to open a new ledger but is never retrying or something of the sort.\r\nWhat's also strange is that there are no logs of the sort, and it seems that the broker is allowing markDeletes on the consumer but never persisting them.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293650912/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293653707","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293653707","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293653707,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1MzcwNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T17:39:58Z","updated_at":"2017-04-12T17:39:58Z","author_association":"CONTRIBUTOR","body":"By the way, @merlimat @rdhabalia is there any other communication channel you handle to contact you more quickly? this is rather critical","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293653707/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293655525","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293655525","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293655525,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1NTUyNQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T17:46:34Z","updated_at":"2017-04-12T17:46:34Z","author_association":"CONTRIBUTOR","body":"@sschepens The `NoLedger` state is the normal state after the cursor has been recovered, and before any new mark-delete has been issued.\r\n\r\nThe idea there is to defer the ZK writes for creating a new ledger and updating the cursor z-node until is needed.\r\n\r\nIn the log that you posted before, can you give the topic/subscription name for which you have added the internal stats?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293655525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293657185","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293657185","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293657185,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1NzE4NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T17:52:35Z","updated_at":"2017-04-12T17:52:35Z","author_association":"CONTRIBUTOR","body":"@merlimat the subscription is `8caa83e304674002a34f441f34f73f63-shipping-feed-orders` and the topic is `persistent://fury/global/cbead41f2a5849b5a5be64df0f3521d2-orders-orders/cbead41f2a5849b5a5be64df0f3521d2-orders-orders`, the information provided is specifically for partition 0 (`persistent://fury/global/cbead41f2a5849b5a5be64df0f3521d2-orders-orders/cbead41f2a5849b5a5be64df0f3521d2-orders-orders-partition-0`).\r\n\r\n> @sschepens The NoLedger state is the normal state after the cursor has been recovered, and before any new mark-delete has been issued.\r\n\r\nI understand that and I have read the code, but the state is still NoLedger and it has not changed, by the stats-internal it was last changed 11 days ago.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293657185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293658561","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293658561","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293658561,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1ODU2MQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T17:57:34Z","updated_at":"2017-04-12T17:57:34Z","author_association":"CONTRIBUTOR","body":"Adding some more info:\r\nThat consumer is apparently stuck on message `1218534:48418` and not acknowledging it, though that message was published `2017-04-06 23:00:29.200`, so the consumer should have already acknowledged messages between the ledger was last switched and message `1218534:48418`.\r\nAlso, we have a message expiration of 7 days.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293658561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293659845","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293659845","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293659845,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY1OTg0NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T18:02:17Z","updated_at":"2017-04-12T18:02:17Z","author_association":"CONTRIBUTOR","body":"In the log you attached I can only see `partition-2` of that topic. Can you reattach the log for `partition-0`?\r\n\r\nAny hints in logs why the TTL is failing to be enforced? There should be a log line printed every ~5min like : \r\n```java\r\nlog.info(\"[{}][{}] Starting message expiry check, ttl= {} seconds\", topicName, subName,\r\n                    messageTTLInSeconds);\r\n```\r\n\r\nIn addition if the suspicion of the issue is there,  can you enable debug level logs on `com.yahoo.pulsar.broker.service.persistent.PersistentMessageExpiryMonitor` ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293659845/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293661433","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293661433","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293661433,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY2MTQzMw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T18:08:25Z","updated_at":"2017-04-12T18:08:25Z","author_association":"CONTRIBUTOR","body":"@merlimat probably `partition-0` was not affected when I restarted those brokers, which is why the issue is currently present in it, I will check the stats for `partition-2`\r\n\r\n> Any hints in logs why the TTL is failing to be enforced?\r\n\r\nThe logs are being printend and there doesn't seem to be any failures, it just seems that in that period of time i took the logs there weren't any from PersistentMessageExpiryMonitor.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293661433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293662169","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293662169","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293662169,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY2MjE2OQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T18:11:15Z","updated_at":"2017-04-12T18:11:15Z","author_association":"CONTRIBUTOR","body":"Over the past 7 days, there seem to have been just a few warning of message expiry fails, for example:\r\n`2017-04-06 07:47:41,310 - WARN  - [BookKeeperClientWorker-18-1:PersistentMessageExpiryMonitor$1@106] - [persistent://fury/global/cbead41f2a5849b5a5be64df0f3521d2-orders-orders/cbead41f2a5849b5a5be64df0f3521d2-orders-orders-partition-7][cbead41f2a5849b5a5be64df0f3521d2-orders-buyingflow_notifications] Message expiry failed - mark delete failed`\r\n\r\nThough none seem to have been from this consumer","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293662169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293665807","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293665807","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293665807,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY2NTgwNw==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T18:24:57Z","updated_at":"2017-04-12T18:24:57Z","author_association":"CONTRIBUTOR","body":"@merlimat effectively, `partition-2` which was affected by the broker restart was 'fixed' and now contains an Open ledger.\r\nBut `partition-0` which wasn't affected has the issue of NoLedger state.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293665807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293685221","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293685221","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293685221,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY4NTIyMQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T19:38:56Z","updated_at":"2017-04-12T19:38:56Z","author_association":"CONTRIBUTOR","body":"So, `partition-0` is still running on the \"old\" broker without restart, correct?\r\n\r\nCan you post the logs for that partition? \r\n\r\nAlso, the info log with the `Starting message expiry check .. ` message should be printed any way every 5min. Is that happening?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293685221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293686932","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293686932","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293686932,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY4NjkzMg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T19:45:50Z","updated_at":"2017-04-12T19:45:50Z","author_association":"CONTRIBUTOR","body":"The other question is. Can you try to do the manual expiry operation on that partition/subscription ? \r\n\r\n```shell\r\n# for 1h expiry:\r\n$ bin/pulsar-admin persistent expire-messages $TOPIC --subscription $MY_SUB --expireTime 3600\r\n```\r\n\r\nAnd if this fails, it should be printing some error.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293686932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293698485","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293698485","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293698485,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzY5ODQ4NQ==","user":{"login":"sschepens","id":3072509,"node_id":"MDQ6VXNlcjMwNzI1MDk=","avatar_url":"https://avatars.githubusercontent.com/u/3072509?v=4","gravatar_id":"","url":"https://api.github.com/users/sschepens","html_url":"https://github.com/sschepens","followers_url":"https://api.github.com/users/sschepens/followers","following_url":"https://api.github.com/users/sschepens/following{/other_user}","gists_url":"https://api.github.com/users/sschepens/gists{/gist_id}","starred_url":"https://api.github.com/users/sschepens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sschepens/subscriptions","organizations_url":"https://api.github.com/users/sschepens/orgs","repos_url":"https://api.github.com/users/sschepens/repos","events_url":"https://api.github.com/users/sschepens/events{/privacy}","received_events_url":"https://api.github.com/users/sschepens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T20:31:06Z","updated_at":"2017-04-12T20:45:39Z","author_association":"CONTRIBUTOR","body":"> So, partition-0 is still running on the \"old\" broker without restart, correct?\r\n\r\nCorrect.\r\n\r\n> Also, the info log with the Starting message expiry check .. message should be printed any way every 5min. Is that happening?\r\n\r\nYes, the logs are being printed and expiry is not failing.\r\n\r\nI don't believe expiry is the issue here, when a Cursor is in a NoLedger state and a asyncDelete comes in, it should recreate the ledger, but that's not happening.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293698485/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293713040","html_url":"https://github.com/apache/pulsar/issues/346#issuecomment-293713040","issue_url":"https://api.github.com/repos/apache/pulsar/issues/346","id":293713040,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzcxMzA0MA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T21:28:15Z","updated_at":"2017-04-12T21:28:15Z","author_association":"CONTRIBUTOR","body":"> I don't believe expiry is the issue here, when a Cursor is in a NoLedger state and a asyncDelete comes in, it should recreate the ledger, but that's not happening.\r\n\r\nThat's correct and that's irrespective of any throttling, since the 1st request should anyway go through.\r\n\r\nWhich version of the code the `partition-0` broker is using? In the 1.17 code, https://github.com/yahoo/pulsar/blob/f572241537b958a8afda48b8af13ea768a7230f7/managed-ledger/src/main/java/org/apache/bookkeeper/mledger/impl/ManagedCursorImpl.java#L1494 the async delete should trigger the persistence of mark-delete even if there are unacked messages. Any chance to enable debug logs on `ManagedCursorImpl` for that broker? Or also a heap-dump might be helpful.\r\n\r\nDid you get to see any error line in log like `Metadata ledger creation failed` ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293713040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293738075","html_url":"https://github.com/apache/pulsar/pull/337#issuecomment-293738075","issue_url":"https://api.github.com/repos/apache/pulsar/issues/337","id":293738075,"node_id":"MDEyOklzc3VlQ29tbWVudDI5MzczODA3NQ==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-12T23:46:52Z","updated_at":"2017-04-12T23:46:52Z","author_association":"CONTRIBUTOR","body":"@jai1 The only reason to disable connection pooling was for testing purposes, to simulate multiple connections hitting broker. I don't see any other good reason to disable pooling.\r\n\r\nIf it's just for the test, then it may make more sense to enforce the pool to be always there (>=1) and if we want to test with many connections, just use a huge number of connections per host in the pool settings. What do you think?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293738075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293989859","html_url":"https://github.com/apache/pulsar/pull/354#issuecomment-293989859","issue_url":"https://api.github.com/repos/apache/pulsar/issues/354","id":293989859,"node_id":"MDEyOklzc3VlQ29tbWVudDI5Mzk4OTg1OQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-13T18:51:15Z","updated_at":"2017-04-13T18:51:15Z","author_association":"CONTRIBUTOR","body":"`AdminApiTest.testDeleteNamespace` is failing intermittently so, looking into it.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/293989859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294032122","html_url":"https://github.com/apache/pulsar/pull/353#issuecomment-294032122","issue_url":"https://api.github.com/repos/apache/pulsar/issues/353","id":294032122,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDAzMjEyMg==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-13T21:56:15Z","updated_at":"2017-04-13T21:56:15Z","author_association":"CONTRIBUTOR","body":"@merlimat - I was running tests on the old tag 17.1 hence faced this issue, I don't see the issue anymore after upgrade to 17.2 - The fix must be one of the many things fixed in loadManager.\r\nDo you want me to close the PR or does the check seem reasonable on its own?\r\n\r\n@saandrews - We return an error if we get an exception in fetching the loadReport from zk, but if the loadReport has null params then we just return that. Also the proto file suggests the same:\r\n\r\n```\r\n        optional string brokerServiceUrl      = 1; // Optional in case of error\r\n\toptional string brokerServiceUrlTls   = 2;\r\n```","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294032122/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294051084","html_url":"https://github.com/apache/pulsar/pull/353#issuecomment-294051084","issue_url":"https://api.github.com/repos/apache/pulsar/issues/353","id":294051084,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDA1MTA4NA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-13T23:58:45Z","updated_at":"2017-04-13T23:58:45Z","author_association":"CONTRIBUTOR","body":"> Do you want me to close the PR or does the check seem reasonable on its own?\r\n\r\nChange looks good","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294051084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294051905","html_url":"https://github.com/apache/pulsar/pull/353#issuecomment-294051905","issue_url":"https://api.github.com/repos/apache/pulsar/issues/353","id":294051905,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDA1MTkwNQ==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-14T00:05:25Z","updated_at":"2017-04-14T00:05:25Z","author_association":"CONTRIBUTOR","body":"Change looks good but we have two different methods in `Commands.java` : 1. with lookup response and 2. with error.\r\nSo, if we are calling lookup-response method then it assumes that we will have the serviceUrl, if not then we have to handle it at broker rather sending response with all null fields.\r\nSo, change looks good but not sure if it will be helpful.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294051905/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294058511","html_url":"https://github.com/apache/pulsar/pull/353#issuecomment-294058511","issue_url":"https://api.github.com/repos/apache/pulsar/issues/353","id":294058511,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDA1ODUxMQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-14T00:53:54Z","updated_at":"2017-04-14T00:53:54Z","author_association":"CONTRIBUTOR","body":"Found the issue - it was a bug in testing \r\nI was hitting the broker before the Pulsar Service had started - closing the PR as this will never happen in production since we register on the vip only after the service has started\r\n\r\n@rdhabalia - thanks for the help","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294058511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294375689","html_url":"https://github.com/apache/pulsar/pull/337#issuecomment-294375689","issue_url":"https://api.github.com/repos/apache/pulsar/issues/337","id":294375689,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDM3NTY4OQ==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-16T21:35:47Z","updated_at":"2017-04-16T21:35:47Z","author_association":"CONTRIBUTOR","body":"@merlimat - This looks ok?\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294375689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294382800","html_url":"https://github.com/apache/pulsar/pull/322#issuecomment-294382800","issue_url":"https://api.github.com/repos/apache/pulsar/issues/322","id":294382800,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDM4MjgwMA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-17T00:22:41Z","updated_at":"2017-04-17T00:22:41Z","author_association":"CONTRIBUTOR","body":"@msb-at-yahoo - Addressed all your comments\r\n","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294382800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294555148","html_url":"https://github.com/apache/pulsar/pull/357#issuecomment-294555148","issue_url":"https://api.github.com/repos/apache/pulsar/issues/357","id":294555148,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDU1NTE0OA==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-17T18:39:52Z","updated_at":"2017-04-17T18:39:52Z","author_association":"CONTRIBUTOR","body":"> c. BasicEndToEndTest.cc -> testResendViaSendCallback requires to simulate the timeout but min timeout I can set is 1ms - sometimes we get a response in 1 ms hence the test fails. I am working on trying to create mock methods for this test.\r\n\r\nThis seems to be missing. Is it intended?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294555148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294555638","html_url":"https://github.com/apache/pulsar/pull/357#issuecomment-294555638","issue_url":"https://api.github.com/repos/apache/pulsar/issues/357","id":294555638,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDU1NTYzOA==","user":{"login":"jai1","id":8659452,"node_id":"MDQ6VXNlcjg2NTk0NTI=","avatar_url":"https://avatars.githubusercontent.com/u/8659452?v=4","gravatar_id":"","url":"https://api.github.com/users/jai1","html_url":"https://github.com/jai1","followers_url":"https://api.github.com/users/jai1/followers","following_url":"https://api.github.com/users/jai1/following{/other_user}","gists_url":"https://api.github.com/users/jai1/gists{/gist_id}","starred_url":"https://api.github.com/users/jai1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jai1/subscriptions","organizations_url":"https://api.github.com/users/jai1/orgs","repos_url":"https://api.github.com/users/jai1/repos","events_url":"https://api.github.com/users/jai1/events{/privacy}","received_events_url":"https://api.github.com/users/jai1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-17T18:41:51Z","updated_at":"2017-04-17T18:41:51Z","author_association":"CONTRIBUTOR","body":"@merlimat - had made the changes but removed them later as per review comment - have updated the PR comment section. Will provide a fix for testResendViaSendCallback after some time in a different PR.","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294555638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294590272","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-294590272","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":294590272,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDU5MDI3Mg==","user":{"login":"merlimat","id":62500,"node_id":"MDQ6VXNlcjYyNTAw","avatar_url":"https://avatars.githubusercontent.com/u/62500?v=4","gravatar_id":"","url":"https://api.github.com/users/merlimat","html_url":"https://github.com/merlimat","followers_url":"https://api.github.com/users/merlimat/followers","following_url":"https://api.github.com/users/merlimat/following{/other_user}","gists_url":"https://api.github.com/users/merlimat/gists{/gist_id}","starred_url":"https://api.github.com/users/merlimat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/merlimat/subscriptions","organizations_url":"https://api.github.com/users/merlimat/orgs","repos_url":"https://api.github.com/users/merlimat/repos","events_url":"https://api.github.com/users/merlimat/events{/privacy}","received_events_url":"https://api.github.com/users/merlimat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-17T20:54:47Z","updated_at":"2017-04-17T20:54:47Z","author_association":"CONTRIBUTOR","body":"@rdhabalia can you redo the failover tests with this patch, using ~16 zk sessions to check the difference?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294590272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294627442","html_url":"https://github.com/apache/pulsar/pull/359#issuecomment-294627442","issue_url":"https://api.github.com/repos/apache/pulsar/issues/359","id":294627442,"node_id":"MDEyOklzc3VlQ29tbWVudDI5NDYyNzQ0Mg==","user":{"login":"rdhabalia","id":2898254,"node_id":"MDQ6VXNlcjI4OTgyNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2898254?v=4","gravatar_id":"","url":"https://api.github.com/users/rdhabalia","html_url":"https://github.com/rdhabalia","followers_url":"https://api.github.com/users/rdhabalia/followers","following_url":"https://api.github.com/users/rdhabalia/following{/other_user}","gists_url":"https://api.github.com/users/rdhabalia/gists{/gist_id}","starred_url":"https://api.github.com/users/rdhabalia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdhabalia/subscriptions","organizations_url":"https://api.github.com/users/rdhabalia/orgs","repos_url":"https://api.github.com/users/rdhabalia/repos","events_url":"https://api.github.com/users/rdhabalia/events{/privacy}","received_events_url":"https://api.github.com/users/rdhabalia/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-04-17T23:38:16Z","updated_at":"2017-04-17T23:38:16Z","author_association":"CONTRIBUTOR","body":"@merlimat I am not sure about which `failover tests` we should run ?","reactions":{"url":"https://api.github.com/repos/apache/pulsar/issues/comments/294627442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]