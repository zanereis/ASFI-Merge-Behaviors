[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892155060","html_url":"https://github.com/apache/iceberg/issues/2914#issuecomment-892155060","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2914","id":892155060,"node_id":"IC_kwDOCW7NX841LTS0","user":{"login":"dongjoon-hyun","id":9700541,"node_id":"MDQ6VXNlcjk3MDA1NDE=","avatar_url":"https://avatars.githubusercontent.com/u/9700541?v=4","gravatar_id":"","url":"https://api.github.com/users/dongjoon-hyun","html_url":"https://github.com/dongjoon-hyun","followers_url":"https://api.github.com/users/dongjoon-hyun/followers","following_url":"https://api.github.com/users/dongjoon-hyun/following{/other_user}","gists_url":"https://api.github.com/users/dongjoon-hyun/gists{/gist_id}","starred_url":"https://api.github.com/users/dongjoon-hyun/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dongjoon-hyun/subscriptions","organizations_url":"https://api.github.com/users/dongjoon-hyun/orgs","repos_url":"https://api.github.com/users/dongjoon-hyun/repos","events_url":"https://api.github.com/users/dongjoon-hyun/events{/privacy}","received_events_url":"https://api.github.com/users/dongjoon-hyun/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T20:47:45Z","updated_at":"2021-08-03T20:47:45Z","author_association":"MEMBER","body":"Thank you, @pvary, @kbendick, @aokolnychyi . For this issue, is there something we need to change in Apache ORC?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892155060/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892178217","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-892178217","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":892178217,"node_id":"IC_kwDOCW7NX841LY8p","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T21:28:12Z","updated_at":"2021-08-03T21:28:12Z","author_association":"CONTRIBUTOR","body":"I share the same concern as @rdblue. It seems to me that this impl basically have a single committer task/thread that reads all all rows from a CombinedScanTask (files batched by BaseRewriteDataFilesAction) and writes them out. How is different to just configure the StreamFileWriter with parallelism of 1?\r\n\r\nif we make it a truly parallel rewrite/compaction action, I am a little concerned about the complexity we are adding to the Flink streaming ingestion path.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892178217/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892197612","html_url":"https://github.com/apache/iceberg/pull/2922#issuecomment-892197612","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2922","id":892197612,"node_id":"IC_kwDOCW7NX841Ldrs","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T22:06:13Z","updated_at":"2021-08-03T22:06:13Z","author_association":"CONTRIBUTOR","body":"cc @RussellSpitzer @flyrain @raptond ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892197612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892207451","html_url":"https://github.com/apache/iceberg/pull/2887#issuecomment-892207451","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2887","id":892207451,"node_id":"IC_kwDOCW7NX841LgFb","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-03T22:27:33Z","updated_at":"2021-08-03T22:27:33Z","author_association":"CONTRIBUTOR","body":"The latest changes are only to Javadoc, so I'm going to merge this based on the test result for 34094f2.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892207451/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892309582","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-892309582","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":892309582,"node_id":"IC_kwDOCW7NX841L5BO","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T02:25:28Z","updated_at":"2021-08-04T02:27:21Z","author_association":"CONTRIBUTOR","body":"> How is different to just configure the StreamFileWriter with parallelism of 1?\r\n\r\n@stevenzwu \r\nI think there is twodifferent point: \r\n1.As i said before the compaction will not block handle data in flink job because the data channel will be not block just when snapshot function completed so for handle data that compaction is in parallel in this PR. So more parallelism of StreamFileWriter will benefit fast handle data in running time, but compaction just work in the time of notifyCheckpointComplete that not affect handle data.\r\n2. In the scene that produce little data in every checkpoint will generate small files, but if we compact files in every checkpoint will all the small files for the table as result.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892309582/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892311444","html_url":"https://github.com/apache/iceberg/pull/1963#issuecomment-892311444","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1963","id":892311444,"node_id":"IC_kwDOCW7NX841L5eU","user":{"login":"yyanyy","id":71906210,"node_id":"MDQ6VXNlcjcxOTA2MjEw","avatar_url":"https://avatars.githubusercontent.com/u/71906210?v=4","gravatar_id":"","url":"https://api.github.com/users/yyanyy","html_url":"https://github.com/yyanyy","followers_url":"https://api.github.com/users/yyanyy/followers","following_url":"https://api.github.com/users/yyanyy/following{/other_user}","gists_url":"https://api.github.com/users/yyanyy/gists{/gist_id}","starred_url":"https://api.github.com/users/yyanyy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yyanyy/subscriptions","organizations_url":"https://api.github.com/users/yyanyy/orgs","repos_url":"https://api.github.com/users/yyanyy/repos","events_url":"https://api.github.com/users/yyanyy/events{/privacy}","received_events_url":"https://api.github.com/users/yyanyy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T02:30:41Z","updated_at":"2021-08-04T02:30:41Z","author_association":"CONTRIBUTOR","body":"> Any update on this one, @yyanyy?\r\n\r\nApologies, didn't find a chance to update this. I'll make sure to allocate time to address the comments in the coming two weeks! ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892311444/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892373055","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-892373055","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":892373055,"node_id":"IC_kwDOCW7NX841MIg_","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T05:23:58Z","updated_at":"2021-08-04T05:23:58Z","author_association":"CONTRIBUTOR","body":"if the writers are parallel (like 100) and the compactor is single parallelism, it is likely the compactor can't keep up with the workload. Even though compaction is running asynchronously with snapshotState(), it will eventually back up/block the threads executing notifyCheckpointComplete().\r\n\r\nIn the streaming ingestion path, here are a few things we can do or improve to mitigate the small files\r\n1. writer parallelism\r\n2. for partitioned tables, we can use DistributionMode to improve data clustering so that we can avoid that every writer task write to many partitions at the same time. Right now, Flink writer only has support for HASH mode. In the future, RANGE or BINPACKING might be more useful and general. They can also improve query performance with better data clustering.\r\n\r\nEven with above changes, Flink streaming ingestion can still generate small files. The parallel compactors and 2nd committer that Ryan mentioned might be able to keep up with the throughput. However, personally I would rather not over-complicate the streaming ingestion path and make it less stable. Let's get the data into long-term data storage (like Iceberg tables) first.  Other optimizations (like compaction or sorting) can happen in the background with scheduled (Spark) batch jobs.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892373055/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892430909","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-892430909","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":892430909,"node_id":"IC_kwDOCW7NX841MWo9","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T07:26:58Z","updated_at":"2021-08-04T07:26:58Z","author_association":"NONE","body":"Thanks, @pvary  Seems I can't find any info about set iceberg.mr.catalog in official documentation. Could you share some more details about this configuration? such as what's the default value? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892430909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892459528","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-892459528","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":892459528,"node_id":"IC_kwDOCW7NX841MdoI","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T08:12:43Z","updated_at":"2021-08-04T08:12:43Z","author_association":"CONTRIBUTOR","body":"The documentation is updated for Iceberg 0.12 which is problematic since the released version is 0.11.1. I will ask around this on the dev list. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892459528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892464407","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-892464407","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":892464407,"node_id":"IC_kwDOCW7NX841Me0X","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T08:19:54Z","updated_at":"2021-08-04T08:19:54Z","author_association":"NONE","body":"@openinx @rdblue can you please help here\r\nI asked this question on [flink user mailing list too](https://lists.apache.org/thread.html/r3f08299bfa2b0408e83b1c425063a1094ad0ee10a5385f32acfa41fc%40%3Cuser.flink.apache.org%3E). \r\n\r\nThey have suggested that this might be related to Iceberg Flink connector implementation and connector memory configurations","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892464407/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892490663","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-892490663","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":892490663,"node_id":"IC_kwDOCW7NX841MlOn","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T09:01:17Z","updated_at":"2021-08-04T09:01:36Z","author_association":"CONTRIBUTOR","body":"@TangYan-1: @nastra suggested on the dev list that you can find the doc like this:\r\nhttps://github.com/apache/iceberg/blob/0.11.x/site/docs/hive.md\r\n\r\nI hope this helps","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892490663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892517896","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-892517896","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":892517896,"node_id":"IC_kwDOCW7NX841Mr4I","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T09:42:50Z","updated_at":"2021-08-04T09:42:50Z","author_association":"CONTRIBUTOR","body":"> it is likely the compactor can't keep up with the workload.\r\n\r\n@stevenzwu In theory it's will occur but the impl in this PR is similar with the custom policy in hive-commiter of flink. And user offen use custom policy to compact hive files so am i. But in my most scene there are no problem, and i am working for stress testing for this PR and not found cleraly errors up to now.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892517896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892750271","html_url":"https://github.com/apache/iceberg/pull/2372#issuecomment-892750271","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2372","id":892750271,"node_id":"IC_kwDOCW7NX841Nkm_","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T15:22:52Z","updated_at":"2021-08-04T15:22:52Z","author_association":"COLLABORATOR","body":"@openinx @rdblue Could you please take another look when you free?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892750271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892753150","html_url":"https://github.com/apache/iceberg/pull/2841#issuecomment-892753150","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2841","id":892753150,"node_id":"IC_kwDOCW7NX841NlT-","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T15:26:27Z","updated_at":"2021-08-04T15:26:27Z","author_association":"COLLABORATOR","body":"@RussellSpitzer @jackye1995 @yyanyy @openinx , I think we are on the same page now, can we merge this to continue rewrite actions?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892753150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892761389","html_url":"https://github.com/apache/iceberg/pull/2933#issuecomment-892761389","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2933","id":892761389,"node_id":"IC_kwDOCW7NX841NnUt","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T15:37:02Z","updated_at":"2021-08-04T15:37:02Z","author_association":"CONTRIBUTOR","body":"Thanks, @mayursrivastava! I found a few things to fix, but it should be mostly minor updates.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892761389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892796816","html_url":"https://github.com/apache/iceberg/issues/2914#issuecomment-892796816","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2914","id":892796816,"node_id":"IC_kwDOCW7NX841Nv-Q","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T16:24:24Z","updated_at":"2021-08-04T16:52:18Z","author_association":"CONTRIBUTOR","body":"First stab at the implementation of the ORC delete writers: #2935","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892796816/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892804416","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-892804416","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":892804416,"node_id":"IC_kwDOCW7NX841Nx1A","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T16:35:44Z","updated_at":"2021-08-04T16:35:44Z","author_association":"CONTRIBUTOR","body":"@ayush-san, is it possible to get a heap dump just after the GC completes or while the job is running steadily? My guess is that the full GC is needed and taking a long time because of an object leak or something. So it the GC needs to traverse a huge set of objects that are all still reachable. A heap dump could really help us know what is happening.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892804416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892811589","html_url":"https://github.com/apache/iceberg/pull/2924#issuecomment-892811589","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2924","id":892811589,"node_id":"IC_kwDOCW7NX841NzlF","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T16:46:52Z","updated_at":"2021-08-04T16:46:52Z","author_association":"CONTRIBUTOR","body":"Thanks for reviewing, @openinx @stevenzwu!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892811589/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892820096","html_url":"https://github.com/apache/iceberg/pull/2928#issuecomment-892820096","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2928","id":892820096,"node_id":"IC_kwDOCW7NX841N1qA","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T16:59:45Z","updated_at":"2021-08-04T17:01:09Z","author_association":"CONTRIBUTOR","body":"I think this skips checkstyle which is quite important, I would personally prefer to just exclude tests like what Ryan M. and Russell suggested, `-x test -x testSpark31 -x integrationTest -x spark31IntegrationTest`, not sure what others think.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892820096/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892837723","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-892837723","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":892837723,"node_id":"IC_kwDOCW7NX841N59b","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T17:26:12Z","updated_at":"2021-08-04T17:26:12Z","author_association":"CONTRIBUTOR","body":"cc @RussellSpitzer @rdblue @openinx @kbendick @jackye1995 @yyanyy @flyrain @karuppayya","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892837723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892846942","html_url":"https://github.com/apache/iceberg/issues/2914#issuecomment-892846942","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2914","id":892846942,"node_id":"IC_kwDOCW7NX841N8Ne","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T17:41:06Z","updated_at":"2021-08-04T17:41:06Z","author_association":"CONTRIBUTOR","body":"@dongjoon-hyun, I think we should have everything we need so far. Thanks for checking!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892846942/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892849264","html_url":"https://github.com/apache/iceberg/pull/2937#issuecomment-892849264","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2937","id":892849264,"node_id":"IC_kwDOCW7NX841N8xw","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T17:45:10Z","updated_at":"2021-08-04T17:45:10Z","author_association":"CONTRIBUTOR","body":"cc @openinx @RussellSpitzer @rdblue @jackye1995 @cwsteinbach\r\n\r\nWe can skip this from the release, of course.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892849264/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892865202","html_url":"https://github.com/apache/iceberg/pull/2937#issuecomment-892865202","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2937","id":892865202,"node_id":"IC_kwDOCW7NX841OAqy","user":{"login":"rymurr","id":2022305,"node_id":"MDQ6VXNlcjIwMjIzMDU=","avatar_url":"https://avatars.githubusercontent.com/u/2022305?v=4","gravatar_id":"","url":"https://api.github.com/users/rymurr","html_url":"https://github.com/rymurr","followers_url":"https://api.github.com/users/rymurr/followers","following_url":"https://api.github.com/users/rymurr/following{/other_user}","gists_url":"https://api.github.com/users/rymurr/gists{/gist_id}","starred_url":"https://api.github.com/users/rymurr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rymurr/subscriptions","organizations_url":"https://api.github.com/users/rymurr/orgs","repos_url":"https://api.github.com/users/rymurr/repos","events_url":"https://api.github.com/users/rymurr/events{/privacy}","received_events_url":"https://api.github.com/users/rymurr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T18:09:29Z","updated_at":"2021-08-04T18:09:29Z","author_association":"CONTRIBUTOR","body":"dont know if you saw https://github.com/apache/iceberg/pull/2826 @aokolnychyi but the 7.x PR looks awful close to being merged","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892865202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892870494","html_url":"https://github.com/apache/iceberg/pull/2937#issuecomment-892870494","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2937","id":892870494,"node_id":"IC_kwDOCW7NX841OB9e","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T18:17:09Z","updated_at":"2021-08-04T18:17:09Z","author_association":"MEMBER","body":"I would probably just do the 7.x pr instead :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892870494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892873114","html_url":"https://github.com/apache/iceberg/pull/2937#issuecomment-892873114","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2937","id":892873114,"node_id":"IC_kwDOCW7NX841OCma","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T18:21:04Z","updated_at":"2021-08-04T18:21:04Z","author_association":"CONTRIBUTOR","body":"Did not see that PR. Let's upgrade to 7.x instead.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892873114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892891638","html_url":"https://github.com/apache/iceberg/pull/2935#issuecomment-892891638","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2935","id":892891638,"node_id":"IC_kwDOCW7NX841OHH2","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T18:51:11Z","updated_at":"2021-08-04T18:51:11Z","author_association":"CONTRIBUTOR","body":"Let me do a pass.\r\n\r\nI think I agree with moving `GenericOrcXXX` classes to `orc` from `data` as we only had ORC classes in `data` before.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892891638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892907135","html_url":"https://github.com/apache/iceberg/pull/2928#issuecomment-892907135","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2928","id":892907135,"node_id":"IC_kwDOCW7NX841OK5_","user":{"login":"findepi","id":144328,"node_id":"MDQ6VXNlcjE0NDMyOA==","avatar_url":"https://avatars.githubusercontent.com/u/144328?v=4","gravatar_id":"","url":"https://api.github.com/users/findepi","html_url":"https://github.com/findepi","followers_url":"https://api.github.com/users/findepi/followers","following_url":"https://api.github.com/users/findepi/following{/other_user}","gists_url":"https://api.github.com/users/findepi/gists{/gist_id}","starred_url":"https://api.github.com/users/findepi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/findepi/subscriptions","organizations_url":"https://api.github.com/users/findepi/orgs","repos_url":"https://api.github.com/users/findepi/repos","events_url":"https://api.github.com/users/findepi/events{/privacy}","received_events_url":"https://api.github.com/users/findepi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T19:15:13Z","updated_at":"2021-08-04T19:15:13Z","author_association":"MEMBER","body":"i agree with you @jackye1995 that this would be better, provided it skips all the tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892907135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892920161","html_url":"https://github.com/apache/iceberg/pull/1963#issuecomment-892920161","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1963","id":892920161,"node_id":"IC_kwDOCW7NX841OOFh","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T19:35:11Z","updated_at":"2021-08-04T19:35:11Z","author_association":"CONTRIBUTOR","body":"Thanks, @yyanyy! No rush, I just wanted to check in.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892920161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892944791","html_url":"https://github.com/apache/iceberg/pull/2935#issuecomment-892944791","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2935","id":892944791,"node_id":"IC_kwDOCW7NX841OUGX","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T20:16:32Z","updated_at":"2021-08-04T20:16:32Z","author_association":"CONTRIBUTOR","body":"Thanks for working on this, @pvary! I think this is the right direction. I'd love to see this integrated in our Flink and Spark writer factories within this PR to ensure things work as expected.\r\n\r\nMy biggest question is around `DeleteWriter` in `GenericOrcWriters`. I'd align it with the equivalent path in Parquet.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892944791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892944975","html_url":"https://github.com/apache/iceberg/pull/2935#issuecomment-892944975","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2935","id":892944975,"node_id":"IC_kwDOCW7NX841OUJP","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T20:16:52Z","updated_at":"2021-08-04T20:16:52Z","author_association":"CONTRIBUTOR","body":"cc @openinx @edgarRd @shardulm94 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892944975/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892982158","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-892982158","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":892982158,"node_id":"IC_kwDOCW7NX841OdOO","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T21:19:39Z","updated_at":"2021-08-04T21:19:39Z","author_association":"MEMBER","body":"Do we have to worry about the Manifests Table? Or is it ok because we are always displaying in the context of the current spec?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892982158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892988608","html_url":"https://github.com/apache/iceberg/issues/2931#issuecomment-892988608","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2931","id":892988608,"node_id":"IC_kwDOCW7NX841OezA","user":{"login":"flyrain","id":1322359,"node_id":"MDQ6VXNlcjEzMjIzNTk=","avatar_url":"https://avatars.githubusercontent.com/u/1322359?v=4","gravatar_id":"","url":"https://api.github.com/users/flyrain","html_url":"https://github.com/flyrain","followers_url":"https://api.github.com/users/flyrain/followers","following_url":"https://api.github.com/users/flyrain/following{/other_user}","gists_url":"https://api.github.com/users/flyrain/gists{/gist_id}","starred_url":"https://api.github.com/users/flyrain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flyrain/subscriptions","organizations_url":"https://api.github.com/users/flyrain/orgs","repos_url":"https://api.github.com/users/flyrain/repos","events_url":"https://api.github.com/users/flyrain/events{/privacy}","received_events_url":"https://api.github.com/users/flyrain/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T21:30:59Z","updated_at":"2021-08-04T21:30:59Z","author_association":"CONTRIBUTOR","body":"The property is only used to delete the version files(*.metadata.json), not manifest list files and manifest files.  And, it still keep 100(configurable) version files, check https://github.com/apache/iceberg/blob/0480c8c8bae8df813225c132199e73d13352a59d/core/src/main/java/org/apache/iceberg/BaseMetastoreTableOperations.java#L339\r\n\r\nI would suggest to check what's inside the dir `metadata`, since it has 6.3G data. I doubt the version files occupy a big portion of it. Here are some ideas to reduce size of metadata. \r\n1. To expire snapshots and remove the orphan files\r\n2. To compact manifest files","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/892988608/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893047804","html_url":"https://github.com/apache/iceberg/pull/2841#issuecomment-893047804","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2841","id":893047804,"node_id":"IC_kwDOCW7NX841OtP8","user":{"login":"chenjunjiedada","id":3960228,"node_id":"MDQ6VXNlcjM5NjAyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/3960228?v=4","gravatar_id":"","url":"https://api.github.com/users/chenjunjiedada","html_url":"https://github.com/chenjunjiedada","followers_url":"https://api.github.com/users/chenjunjiedada/followers","following_url":"https://api.github.com/users/chenjunjiedada/following{/other_user}","gists_url":"https://api.github.com/users/chenjunjiedada/gists{/gist_id}","starred_url":"https://api.github.com/users/chenjunjiedada/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenjunjiedada/subscriptions","organizations_url":"https://api.github.com/users/chenjunjiedada/orgs","repos_url":"https://api.github.com/users/chenjunjiedada/repos","events_url":"https://api.github.com/users/chenjunjiedada/events{/privacy}","received_events_url":"https://api.github.com/users/chenjunjiedada/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-04T23:44:11Z","updated_at":"2021-08-04T23:44:11Z","author_association":"COLLABORATOR","body":"cc @rdblue @aokolnychyi ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893047804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893105327","html_url":"https://github.com/apache/iceberg/pull/2898#issuecomment-893105327","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2898","id":893105327,"node_id":"IC_kwDOCW7NX841O7Sv","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T02:04:23Z","updated_at":"2021-08-05T02:04:23Z","author_association":"CONTRIBUTOR","body":"ping @kbendick @openinx \r\ncc @rdblue @aokolnychyi @stevenzwu ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893105327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893145473","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-893145473","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":893145473,"node_id":"IC_kwDOCW7NX841PFGB","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T04:04:08Z","updated_at":"2021-08-05T04:04:08Z","author_association":"CONTRIBUTOR","body":"@hameizi can you try some setup like this for the stress testing with your auto compaction change here?\r\n- a simple job just read data from Kafka and writes to Iceberg (e.g. partitioned by ingestion/processing time). \r\n- writer: parallelism of 10 (higher can be better)\r\n- I would expect each of the 10 writer tasks probably can write data in the order of MBs/sec. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893145473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893146950","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-893146950","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":893146950,"node_id":"IC_kwDOCW7NX841PFdG","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T04:07:37Z","updated_at":"2021-08-05T04:07:37Z","author_association":"CONTRIBUTOR","body":"> his appears to be compacting all files to be ideally the target file size bytes, regardless of their existing size etc. In some cases, the cost of opening and rewriting provides less value than leaving the data as is.\r\n\r\nI would also echo @kbendick's comment above. Currently, we are reading everything in (regardless the file sizes). This assumes all/most files are small and can benefit from a compaction rewrite. But I am not sure if the assumption is valid for broad use cases","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893146950/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893181774","html_url":"https://github.com/apache/iceberg/pull/2886#issuecomment-893181774","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2886","id":893181774,"node_id":"IC_kwDOCW7NX841PN9O","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T05:45:14Z","updated_at":"2021-08-05T05:45:14Z","author_association":"CONTRIBUTOR","body":"@openinx please take another look. Thanks!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893181774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893229843","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-893229843","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":893229843,"node_id":"IC_kwDOCW7NX841PZsT","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T07:24:10Z","updated_at":"2021-08-05T07:24:10Z","author_association":"NONE","body":"@rdblue I enabled heapdump on the job with the following params\r\n```\r\n-XX:+HeapDumpOnOutOfMemoryError -XX:+HeapDumpBeforeFullGC -XX:+HeapDumpAfterFullGC -XX:HeapDumpPath=/tmp/heap.dump\r\n```\r\nIt generated 6 files of a total 15GB heap dump in 30mins. At this only young GC was happening and the job was running steadily. \r\n\r\nPFA heap dump of 2 files\r\n[heapReport-2021-08-05-12-49.pdf](https://github.com/apache/iceberg/files/6936752/heapReport-2021-08-05-12-49.pdf)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893229843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893244612","html_url":"https://github.com/apache/iceberg/pull/2867#issuecomment-893244612","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2867","id":893244612,"node_id":"IC_kwDOCW7NX841PdTE","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T07:50:39Z","updated_at":"2021-08-05T07:50:39Z","author_association":"CONTRIBUTOR","body":"> @hameizi can you try some setup like this for the stress testing with your auto compaction change here?\r\n> \r\n> * a simple job just read data from Kafka and writes to Iceberg (e.g. partitioned by ingestion/processing time).\r\n> * writer: parallelism of 10 (higher can be better)\r\n> * I would expect each of the 10 writer tasks probably can write data in the order of MBs/sec.\r\n\r\nI'm sorry that maybe my test can't up to the standard as you say. I can test one more later. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893244612/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893288369","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-893288369","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":893288369,"node_id":"IC_kwDOCW7NX841Pn-x","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T08:57:43Z","updated_at":"2021-08-05T08:57:43Z","author_association":"NONE","body":"@pvary  Thanks for your guide. I'm now trying to use iceberg with hadoop catalog. I created a iceberg table using spark job, and create an overlay in hive. When I use presto/trino to query that table, it show the below error. Do you have any ideas?\r\n1. spark3-shell --jars iceberg-spark3-runtime-0.11.1.jar \\\r\n    --conf spark.sql.catalog.hadoop_catalog=org.apache.iceberg.spark.SparkCatalog \\\r\n    --conf spark.sql.catalog.hadoop_catalog.type=hadoop \\\r\n    --conf spark.sql.catalog.hadoop_catalog.warehouse=/iceberg/warehouse\r\nspark.sql(\"CREATE TABLE hadoop_catalog.testdb.iceberg_table_in_hdfs (report string ,reporttime string,reporttype string, reportid string , reportversion bigint, day string ) USING iceberg PARTITIONED BY (day)\")\r\n2. beeline> CREATE EXTERNAL TABLE testdb.iceberg_table_in_hdfs (report string ,reporttime string,reporttype string, reportid string , reportversion bigint, day string )\r\nSTORED BY 'org.apache.iceberg.mr.hive.HiveIcebergStorageHandler' \r\nLOCATION '/iceberg/warehouse/testdb/iceberg_table_in_hdfs'\r\nTBLPROPERTIES (\r\n  'iceberg.mr.catalog'='hadoop', \r\n  'iceberg.mr.catalog.hadoop.warehouse.location'='/iceberg/warehouse');\r\n3. presto:testdb> select * from iceberg_table_in_hdfs;\r\nQuery 20210805_085251_00012_vs7zn failed: Table is missing [metadata_location] property: testdb.iceberg_table_in_hdfs\r\nio.prestosql.spi.PrestoException: Table is missing [metadata_location] property: testdb.iceberg_table_in_hdfs\r\n\tat io.prestosql.plugin.iceberg.HiveTableOperations.refresh(HiveTableOperations.java:151)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893288369/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893409615","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-893409615","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":893409615,"node_id":"IC_kwDOCW7NX841QFlP","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T12:12:46Z","updated_at":"2021-08-05T12:12:46Z","author_association":"CONTRIBUTOR","body":"@TangYan-1: I guess that this is now a presto question. I would guess that now Presto is trying to handle the table as a `HadoopTable` instead of `HadoopCatalog`. So again I suspect a catalog configuration issue. Sadly I am not sure how Presto catalog handling was working. What about trying to set the following properties in the Presto session?\r\n```\r\n'iceberg.mr.catalog'='hadoop',\r\n'iceberg.mr.catalog.hadoop.warehouse.location'='/iceberg/warehouse'\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893409615/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893416471","html_url":"https://github.com/apache/iceberg/pull/2877#issuecomment-893416471","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2877","id":893416471,"node_id":"IC_kwDOCW7NX841QHQX","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T12:23:54Z","updated_at":"2021-08-05T12:23:54Z","author_association":"MEMBER","body":"Closes #2783 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893416471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893532373","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-893532373","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":893532373,"node_id":"IC_kwDOCW7NX841QjjV","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:04:07Z","updated_at":"2021-08-05T15:04:07Z","author_association":"CONTRIBUTOR","body":"Thanks, @ayush-san!\r\n\r\n@openinx, @stevenzwu, the main thing that stands out from the memory report is that there are 1.78gb of `org.apache.flink.runtime.taskmanager.Task` objects held by `org.apache.flink.runtime.taskmanager.Task.TASK_THREADS_GROUP`. I'm not very familiar with Flink internals, but that seems like the issue to me. Does that help narrow down what the problem might be?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893532373/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893543773","html_url":"https://github.com/apache/iceberg/issues/2939#issuecomment-893543773","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2939","id":893543773,"node_id":"IC_kwDOCW7NX841QmVd","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:17:46Z","updated_at":"2021-08-05T15:17:46Z","author_association":"CONTRIBUTOR","body":"This can be reproduction  https://github.com/apache/iceberg/pull/2911/checks?check_run_id=3217746895#step:6:826","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893543773/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893544562","html_url":"https://github.com/apache/iceberg/issues/2931#issuecomment-893544562","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2931","id":893544562,"node_id":"IC_kwDOCW7NX841Qmhy","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:18:52Z","updated_at":"2021-08-10T11:40:35Z","author_association":"NONE","body":"@flyrain Earlier I used to run compaction and manifest rewrite daily. But we started getting duplicate rows due to this issue https://github.com/apache/iceberg/issues/2308\r\n\r\nBut I see that now it's been fixed, so I will wait for the new release and start using compaction and expire snapshot action again","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893544562/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893545625","html_url":"https://github.com/apache/iceberg/issues/1654#issuecomment-893545625","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1654","id":893545625,"node_id":"IC_kwDOCW7NX841QmyZ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:20:17Z","updated_at":"2021-08-05T15:20:17Z","author_association":"CONTRIBUTOR","body":"This is in the 0.12.0 release so I'll close this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893545625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893546408","html_url":"https://github.com/apache/iceberg/pull/2877#issuecomment-893546408","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2877","id":893546408,"node_id":"IC_kwDOCW7NX841Qm-o","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:21:20Z","updated_at":"2021-08-05T15:21:20Z","author_association":"CONTRIBUTOR","body":"Awesome work, @RussellSpitzer!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893546408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893566096","html_url":"https://github.com/apache/iceberg/pull/2877#issuecomment-893566096","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2877","id":893566096,"node_id":"IC_kwDOCW7NX841QryQ","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:47:57Z","updated_at":"2021-08-05T15:47:57Z","author_association":"MEMBER","body":"Thanks @rdblue for the discussion and review :) Onto the next one, https://github.com/apache/iceberg/pull/1744","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893566096/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893573295","html_url":"https://github.com/apache/iceberg/pull/1744#issuecomment-893573295","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1744","id":893573295,"node_id":"IC_kwDOCW7NX841Qtiv","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T15:58:20Z","updated_at":"2021-08-05T15:58:20Z","author_association":"MEMBER","body":"Yep, Seems close to the original plan we had here, i'll keep the new tests and work on rebuilding the original getId's/Project methods.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893573295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893575995","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-893575995","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":893575995,"node_id":"IC_kwDOCW7NX841QuM7","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:02:02Z","updated_at":"2021-08-05T16:40:05Z","author_association":"CONTRIBUTOR","body":"I am not surprised by `org.apache.flink.runtime.taskmanager.Task` as it is the worker thread. So that doesn't really help much here.\r\n\r\nI often found denominator tree from Eclipse MAT very useful to understand the memory footprint: https://www.eclipse.org/mat/about/dominator_tree.png\r\n\r\nReading the original description, I have some questions for this setup: \"We have combined all the tables of a single DB in one job.\" \r\n1. are tables partitioned by event time or ingestion time? or some other partition spec that can make writers append to multiple files concurrently?\r\n2. do you run multiple writer tasks/threads in the same core? E.g., assuming your DB has 10 tables, does each slot/core run 10 writers or only 1 writer? If each taskmanager has too many writer tasks, memory consumption by Parquet is going to be a problem.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893575995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893581393","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-893581393","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":893581393,"node_id":"IC_kwDOCW7NX841QvhR","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:08:59Z","updated_at":"2021-08-05T16:08:59Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer, somehow tests for `all_data_files` started to fail after #2877. It looks like we did not update that metadata table in the PR. Is that on purpose?\r\n\r\nChecking what is actually going on.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893581393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893583253","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-893583253","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":893583253,"node_id":"IC_kwDOCW7NX841Qv-V","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:11:28Z","updated_at":"2021-08-05T16:11:48Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer, I think simply using `schema()` instead of `fileSchema` in `AllDataFilesTable` fixes the problem.\r\nCould you check?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893583253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893583862","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-893583862","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":893583862,"node_id":"IC_kwDOCW7NX841QwH2","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:12:18Z","updated_at":"2021-08-05T16:12:18Z","author_association":"MEMBER","body":"@aokolnychyi Sounds good to me, I thought I mimicd the way we were doing it in the FilesTable using the \"fileSchema\" as the projected schema, if that isn't the scan.schema we should change it","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893583862/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893587555","html_url":"https://github.com/apache/iceberg/pull/2936#issuecomment-893587555","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2936","id":893587555,"node_id":"IC_kwDOCW7NX841QxBj","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:17:19Z","updated_at":"2021-08-05T16:17:19Z","author_association":"CONTRIBUTOR","body":"Well, I am not sure. I'll need your help to verify whether my assumption is correct. We are using the same `ManifestReadTask` in both but `AllDataFilesTable` still passes `fileSchema` instead of `schema()`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893587555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893595776","html_url":"https://github.com/apache/iceberg/pull/2877#issuecomment-893595776","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2877","id":893595776,"node_id":"IC_kwDOCW7NX841QzCA","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:28:21Z","updated_at":"2021-08-05T16:28:21Z","author_association":"CONTRIBUTOR","body":"Awesome work here! It's great to get rid of that ugly reflection call to create a Spark projection!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893595776/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893597475","html_url":"https://github.com/apache/iceberg/pull/2941#issuecomment-893597475","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2941","id":893597475,"node_id":"IC_kwDOCW7NX841Qzcj","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:30:49Z","updated_at":"2021-08-05T16:30:49Z","author_association":"CONTRIBUTOR","body":"FYI @rdblue ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893597475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893599113","html_url":"https://github.com/apache/iceberg/pull/2941#issuecomment-893599113","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2941","id":893599113,"node_id":"IC_kwDOCW7NX841Qz2J","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:33:23Z","updated_at":"2021-08-05T16:33:23Z","author_association":"CONTRIBUTOR","body":"I have a test that checks this in #2936.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893599113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893602102","html_url":"https://github.com/apache/iceberg/pull/2877#issuecomment-893602102","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2877","id":893602102,"node_id":"IC_kwDOCW7NX841Q0k2","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T16:38:07Z","updated_at":"2021-08-05T16:38:07Z","author_association":"COLLABORATOR","body":"Yea , great job @RussellSpitzer and @rdblue , thanks again !  ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893602102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893663936","html_url":"https://github.com/apache/iceberg/pull/2941#issuecomment-893663936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2941","id":893663936,"node_id":"IC_kwDOCW7NX841RDrA","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T17:52:22Z","updated_at":"2021-08-05T17:52:22Z","author_association":"CONTRIBUTOR","body":"Thanks, @RussellSpitzer!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893663936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893664709","html_url":"https://github.com/apache/iceberg/pull/2941#issuecomment-893664709","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2941","id":893664709,"node_id":"IC_kwDOCW7NX841RD3F","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T17:53:42Z","updated_at":"2021-08-05T17:53:42Z","author_association":"MEMBER","body":"Thanks! @aokolnychyi ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893664709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893712062","html_url":"https://github.com/apache/iceberg/pull/2942#issuecomment-893712062","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2942","id":893712062,"node_id":"IC_kwDOCW7NX841RPa-","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T19:04:20Z","updated_at":"2021-08-05T19:04:20Z","author_association":"CONTRIBUTOR","body":"cc @openinx @rdblue @jackye1995 @pvary @RussellSpitzer","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893712062/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893772869","html_url":"https://github.com/apache/iceberg/pull/2898#issuecomment-893772869","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2898","id":893772869,"node_id":"IC_kwDOCW7NX841ReRF","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T20:25:17Z","updated_at":"2021-08-05T20:25:17Z","author_association":"CONTRIBUTOR","body":"This PR should link to this issue: https://github.com/apache/iceberg/issues/2918","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893772869/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893819672","html_url":"https://github.com/apache/iceberg/issues/2934#issuecomment-893819672","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2934","id":893819672,"node_id":"IC_kwDOCW7NX841RpsY","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T21:25:26Z","updated_at":"2021-08-05T21:25:26Z","author_association":"CONTRIBUTOR","body":"Have you tried using the `lit` function to see if that handles it?\r\n\r\nAlso, correct me if I'm wrong, but there should be a `using iceberg` here in the create table DDL? https://github.com/cccs-br/spark-iceberg-issue/blob/main/src/test/java/IcebergTestUtil.java#L46","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893819672/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893820428","html_url":"https://github.com/apache/iceberg/issues/2934#issuecomment-893820428","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2934","id":893820428,"node_id":"IC_kwDOCW7NX841Rp4M","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T21:26:58Z","updated_at":"2021-08-05T21:26:58Z","author_association":"CONTRIBUTOR","body":"Looking at the linked code, it does appear like ByteBuffer is intentionally excluded. I'm guessing because there's no SQL syntax (at least in Spark) for representing byte buffers / byte arrays?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893820428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893899826","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-893899826","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":893899826,"node_id":"IC_kwDOCW7NX841R9Qy","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-05T23:52:49Z","updated_at":"2021-08-05T23:52:49Z","author_association":"CONTRIBUTOR","body":"cc @openinx @stevenzwu @RussellSpitzer @rdblue @cwsteinbach @danielcweeks @kbendick @karuppayya @flyrain @pvary @jackye1995 @yyanyy @szehon-ho @rymurr @jun-he \r\n\r\nThis PR is still work in progress but I'd like to get some early feedback. I've benchmarked new writers locally using async-profiler. I'll clean the benchmarking code later and push here. Once we agree on the APIs, I'll split the PR into smaller chunks and add tests.\r\n\r\nAs it is a large change, I'd advise to start with `Writer`, then `PartitionAwareWriter`, then `TaskWriter` and `DeltaTaskWriter`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893899826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893932685","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-893932685","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":893932685,"node_id":"IC_kwDOCW7NX841SFSN","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T01:20:47Z","updated_at":"2021-08-06T01:21:07Z","author_association":"NONE","body":"@pvary Thanks, I'll check in presto side. Here I have two more issues about iceberg.\r\n1. For set iceberg.mr.catalog=hive, how can I unset it in hive session? Seems when I set it to hive, the iceberg overlay table in hive can't be queried any more.\r\n2. NULLpointer exception in beeline agg query for the hadoop catalog iceberg tables.\r\n  1). create table using spark job and load data\r\nspark3-shell --jars iceberg-spark3-runtime-0.11.1.jar \\\r\n    --conf spark.sql.catalog.hadoop_catalog=org.apache.iceberg.spark.SparkCatalog \\\r\n    --conf spark.sql.catalog.hadoop_catalog.type=hadoop \\\r\n    --conf spark.sql.catalog.hadoop_catalog.warehouse=/iceberg/warehouse\r\nspark.sql(\"CREATE TABLE hadoop_catalog.testdb.iceberg_table_in_hdfs (report string ,reporttime string,reporttype string, reportid string , reportversion bigint, day string ) USING iceberg PARTITIONED BY (day)\")\r\n\r\n 2).  create overlay in hive beeline\r\nCREATE EXTERNAL TABLE testdb.iceberg_table_in_hdfs (report string ,reporttime string,reporttype string, reportid string , reportversion bigint, day string )\r\nSTORED BY 'org.apache.iceberg.mr.hive.HiveIcebergStorageHandler' \r\nLOCATION '/iceberg/warehouse/testdb/iceberg_table_in_hdfs'\r\nTBLPROPERTIES (\r\n  'iceberg.mr.catalog'='hadoop', \r\n  'iceberg.mr.catalog.hadoop.warehouse.location'='/iceberg/warehouse');\r\n 3) . query from hive beeline (select count(*) from testdb.iceberg_table_in_hdfs)\r\nError: java.io.IOException: java.lang.NullPointerException at org.apache.hadoop.hive.io.HiveIOExceptionHandlerChain.handleRecordReaderCreationException(HiveIOExceptionHandlerChain.java:97)\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893932685/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893958042","html_url":"https://github.com/apache/iceberg/pull/2932#issuecomment-893958042","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2932","id":893958042,"node_id":"IC_kwDOCW7NX841SLea","user":{"login":"wg1026688210","id":14267759,"node_id":"MDQ6VXNlcjE0MjY3NzU5","avatar_url":"https://avatars.githubusercontent.com/u/14267759?v=4","gravatar_id":"","url":"https://api.github.com/users/wg1026688210","html_url":"https://github.com/wg1026688210","followers_url":"https://api.github.com/users/wg1026688210/followers","following_url":"https://api.github.com/users/wg1026688210/following{/other_user}","gists_url":"https://api.github.com/users/wg1026688210/gists{/gist_id}","starred_url":"https://api.github.com/users/wg1026688210/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wg1026688210/subscriptions","organizations_url":"https://api.github.com/users/wg1026688210/orgs","repos_url":"https://api.github.com/users/wg1026688210/repos","events_url":"https://api.github.com/users/wg1026688210/events{/privacy}","received_events_url":"https://api.github.com/users/wg1026688210/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T02:34:29Z","updated_at":"2021-08-06T02:34:29Z","author_association":"CONTRIBUTOR","body":"cc @stevenzwu @openinx @rdblue \r\n\r\n> left one minor comment\r\n\r\nthanks for your concern, it's ready for review","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893958042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893960074","html_url":"https://github.com/apache/iceberg/issues/2939#issuecomment-893960074","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2939","id":893960074,"node_id":"IC_kwDOCW7NX841SL-K","user":{"login":"coolderli","id":38486782,"node_id":"MDQ6VXNlcjM4NDg2Nzgy","avatar_url":"https://avatars.githubusercontent.com/u/38486782?v=4","gravatar_id":"","url":"https://api.github.com/users/coolderli","html_url":"https://github.com/coolderli","followers_url":"https://api.github.com/users/coolderli/followers","following_url":"https://api.github.com/users/coolderli/following{/other_user}","gists_url":"https://api.github.com/users/coolderli/gists{/gist_id}","starred_url":"https://api.github.com/users/coolderli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coolderli/subscriptions","organizations_url":"https://api.github.com/users/coolderli/orgs","repos_url":"https://api.github.com/users/coolderli/repos","events_url":"https://api.github.com/users/coolderli/events{/privacy}","received_events_url":"https://api.github.com/users/coolderli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T02:41:25Z","updated_at":"2021-08-06T02:41:25Z","author_association":"CONTRIBUTOR","body":"cc @RussellSpitzer  @wypoon  Could you help me have a look at this problem, Thanks.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893960074/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893979874","html_url":"https://github.com/apache/iceberg/issues/2808#issuecomment-893979874","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2808","id":893979874,"node_id":"IC_kwDOCW7NX841SQzi","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T03:49:14Z","updated_at":"2021-08-06T03:58:33Z","author_association":"CONTRIBUTOR","body":"This is an interesting scenario.\r\n\r\nIcebergFileCommitter [does the check upon restore/restart](https://github.com/apache/iceberg/blob/master/flink/src/main/java/org/apache/iceberg/flink/sink/IcebergFilesCommitter.java#L148-L155).\r\n\r\nMaybe in this case, job didn't restart? Checkpoint should fail. But checkpoint failure doesn't necessarily cause job restart. Did you set this [Flink config](https://ci.apache.org/projects/flink/flink-docs-master/docs/deployment/config/#execution-checkpointing-tolerable-failed-checkpoints)?  \r\n\r\nIn the no-restart scenario, the next commit will commit a new set of files along with the old set of files (due to CommitStateUnknownException). Maybe when the next checkpoint and commit came, there was no new files. That could explain the scenario. This is one possible scenario that I can think of.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/893979874/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894005241","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894005241","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894005241,"node_id":"IC_kwDOCW7NX841SW_5","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T05:10:19Z","updated_at":"2021-08-06T05:10:19Z","author_association":"CONTRIBUTOR","body":"@TangYan-1:\r\n- `reset` might work for you, or starting a new session. See: https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=34838882\r\n- The full stack trace would be good, and the exact version for Hive and Iceberg as well.\r\n\r\nFYI: I will have a busy day today, and after that I will be offline for 2 weeks. Might not be able to come back to this issue for a while. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894005241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894012458","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894012458","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894012458,"node_id":"IC_kwDOCW7NX841SYwq","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T05:31:41Z","updated_at":"2021-08-06T05:31:41Z","author_association":"NONE","body":"Full stack is as below. Iceberg version: 0.11.1 Hive vesion: 2.1.1-cdh6.3.0\r\n2021-08-06 05:27:31,014 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : java.io.IOException: java.lang.NullPointerException\r\n\tat org.apache.hadoop.hive.io.HiveIOExceptionHandlerChain.handleRecordReaderCreationException(HiveIOExceptionHandlerChain.java:97)\r\n\tat org.apache.hadoop.hive.io.HiveIOExceptionHandlerUtil.handleRecordReaderCreationException(HiveIOExceptionHandlerUtil.java:57)\r\n\tat org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:298)\r\n\tat org.apache.hadoop.hive.ql.io.CombineHiveInputFormat.getRecordReader(CombineHiveInputFormat.java:685)\r\n\tat org.apache.hadoop.mapred.MapTask$TrackedRecordReader.<init>(MapTask.java:175)\r\n\tat org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:444)\r\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:349)\r\n\tat org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:174)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:422)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1875)\r\n\tat org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:168)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.iceberg.data.DeleteFilter.<init>(DeleteFilter.java:90)\r\n\tat org.apache.iceberg.data.GenericDeleteFilter.<init>(GenericDeleteFilter.java:33)\r\n\tat org.apache.iceberg.mr.mapreduce.IcebergInputFormat$IcebergRecordReader.open(IcebergInputFormat.java:275)\r\n\tat org.apache.iceberg.mr.mapreduce.IcebergInputFormat$IcebergRecordReader.initialize(IcebergInputFormat.java:197)\r\n\tat org.apache.iceberg.mr.mapred.MapredIcebergInputFormat$MapredIcebergRecordReader.<init>(MapredIcebergInputFormat.java:92)\r\n\tat org.apache.iceberg.mr.mapred.MapredIcebergInputFormat.getRecordReader(MapredIcebergInputFormat.java:78)\r\n\tat org.apache.iceberg.mr.hive.HiveIcebergInputFormat.getRecordReader(HiveIcebergInputFormat.java:82)\r\n\tat org.apache.hadoop.hive.ql.io.HiveInputFormat.getRecordReader(HiveInputFormat.java:295)\r\n\t... 9 more\r\n\r\nThanks for your reply. @pvary ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894012458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894014352","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-894014352","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":894014352,"node_id":"IC_kwDOCW7NX841SZOQ","user":{"login":"ayush-san","id":57655135,"node_id":"MDQ6VXNlcjU3NjU1MTM1","avatar_url":"https://avatars.githubusercontent.com/u/57655135?v=4","gravatar_id":"","url":"https://api.github.com/users/ayush-san","html_url":"https://github.com/ayush-san","followers_url":"https://api.github.com/users/ayush-san/followers","following_url":"https://api.github.com/users/ayush-san/following{/other_user}","gists_url":"https://api.github.com/users/ayush-san/gists{/gist_id}","starred_url":"https://api.github.com/users/ayush-san/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayush-san/subscriptions","organizations_url":"https://api.github.com/users/ayush-san/orgs","repos_url":"https://api.github.com/users/ayush-san/repos","events_url":"https://api.github.com/users/ayush-san/events{/privacy}","received_events_url":"https://api.github.com/users/ayush-san/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T05:37:52Z","updated_at":"2021-08-06T05:37:52Z","author_association":"NONE","body":"> are tables partitioned by event time or ingestion time? or some other partition spec that can make writers append to multiple files concurrently?\r\n\r\nThese are unpartitioned tables\r\n\r\n> do you run multiple writer tasks/threads in the same core? E.g., assuming your DB has 10 tables, does each slot/core run 10 writers or only 1 writer? If each taskmanager has too many writer tasks, memory consumption by Parquet is going to be a problem.\r\n\r\nCurrently, all the tables are sharing the same taskmanager and each has its own writer\r\n![flink (1)](https://user-images.githubusercontent.com/57655135/128461344-e6004fc5-fa62-4a7c-b6c9-cba704745d9c.png)\r\n\r\n\r\n> If each taskmanager has too many writer tasks, memory consumption by Parquet is going to be a problem.\r\n\r\n@stevenzwu Can you please give more detail on this issue? Why is this causing the problem? \r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894014352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894092335","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894092335","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894092335,"node_id":"IC_kwDOCW7NX841SsQv","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T08:21:06Z","updated_at":"2021-08-06T08:21:06Z","author_association":"CONTRIBUTOR","body":"The issue is here:\r\nhttps://github.com/apache/iceberg/blob/apache-iceberg-0.11.1/data/src/main/java/org/apache/iceberg/data/DeleteFilter.java#L90\r\n\r\nMaybe try selecting specific columns instead of `*`?\r\n\r\nJust a guess","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894092335/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894098552","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894098552","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894098552,"node_id":"IC_kwDOCW7NX841Stx4","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T08:31:17Z","updated_at":"2021-08-06T08:31:17Z","author_association":"NONE","body":"I have tried count(col), but no lucky, the same error.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894098552/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894127828","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894127828","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894127828,"node_id":"IC_kwDOCW7NX841S07U","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T09:20:05Z","updated_at":"2021-08-06T09:20:05Z","author_association":"CONTRIBUTOR","body":"What about `select col from testdb.iceberg_table_in_hdfs limit 10` just for testing.\r\nI have seen count working for our CDPD versions, and also we have unit tests which are running agains 2.8, and 3.1 Hive versions. Maybe some other fixes in Hive which are missing in the CDH version?\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894127828/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894129955","html_url":"https://github.com/apache/iceberg/issues/2927#issuecomment-894129955","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2927","id":894129955,"node_id":"IC_kwDOCW7NX841S1cj","user":{"login":"TangYan-1","id":76996884,"node_id":"MDQ6VXNlcjc2OTk2ODg0","avatar_url":"https://avatars.githubusercontent.com/u/76996884?v=4","gravatar_id":"","url":"https://api.github.com/users/TangYan-1","html_url":"https://github.com/TangYan-1","followers_url":"https://api.github.com/users/TangYan-1/followers","following_url":"https://api.github.com/users/TangYan-1/following{/other_user}","gists_url":"https://api.github.com/users/TangYan-1/gists{/gist_id}","starred_url":"https://api.github.com/users/TangYan-1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TangYan-1/subscriptions","organizations_url":"https://api.github.com/users/TangYan-1/orgs","repos_url":"https://api.github.com/users/TangYan-1/repos","events_url":"https://api.github.com/users/TangYan-1/events{/privacy}","received_events_url":"https://api.github.com/users/TangYan-1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T09:23:57Z","updated_at":"2021-08-06T09:23:57Z","author_association":"NONE","body":"Yes, 'select col from testdb.iceberg_table_in_hdfs limit 10' can pass. seems using agg function in select failed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894129955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894158512","html_url":"https://github.com/apache/iceberg/issues/1756#issuecomment-894158512","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1756","id":894158512,"node_id":"IC_kwDOCW7NX841S8aw","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T10:13:58Z","updated_at":"2021-08-06T10:13:58Z","author_association":"MEMBER","body":"@RussellSpitzer @chaiyuan2046 I am facing this issue as well with EMR spark (EMR 6.2, Spark 3.0.1). Create succeeds but the insert fails with the same exception. Could you please point the right set of confis? My configuration is as below.\r\n```\r\nspark-sql --packages org.apache.iceberg:iceberg-spark3-runtime:0.11.1\\\r\n    --conf spark.sql.extensions=org.apache.iceberg.spark.extensions.IcebergSparkSessionExtensions \\\r\n    --conf spark.sql.catalog.local=org.apache.iceberg.spark.SparkCatalog \\\r\n    --conf spark.sql.catalog.local.type=hadoop \\\r\n    --conf spark.sql.catalog.local.warehouse=$PWD/warehouse\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894158512/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894198772","html_url":"https://github.com/apache/iceberg/pull/2920#issuecomment-894198772","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2920","id":894198772,"node_id":"IC_kwDOCW7NX841TGP0","user":{"login":"xingbowu","id":12458911,"node_id":"MDQ6VXNlcjEyNDU4OTEx","avatar_url":"https://avatars.githubusercontent.com/u/12458911?v=4","gravatar_id":"","url":"https://api.github.com/users/xingbowu","html_url":"https://github.com/xingbowu","followers_url":"https://api.github.com/users/xingbowu/followers","following_url":"https://api.github.com/users/xingbowu/following{/other_user}","gists_url":"https://api.github.com/users/xingbowu/gists{/gist_id}","starred_url":"https://api.github.com/users/xingbowu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xingbowu/subscriptions","organizations_url":"https://api.github.com/users/xingbowu/orgs","repos_url":"https://api.github.com/users/xingbowu/repos","events_url":"https://api.github.com/users/xingbowu/events{/privacy}","received_events_url":"https://api.github.com/users/xingbowu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T11:33:48Z","updated_at":"2021-08-06T11:33:48Z","author_association":"CONTRIBUTOR","body":"@openinx could you help to take a look?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894198772/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894206886","html_url":"https://github.com/apache/iceberg/issues/1756#issuecomment-894206886","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1756","id":894206886,"node_id":"IC_kwDOCW7NX841TIOm","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T11:52:00Z","updated_at":"2021-08-06T11:52:00Z","author_association":"MEMBER","body":"Are your referring to your tables as local.database.table?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894206886/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894220115","html_url":"https://github.com/apache/iceberg/issues/1756#issuecomment-894220115","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1756","id":894220115,"node_id":"IC_kwDOCW7NX841TLdT","user":{"login":"codope","id":16440354,"node_id":"MDQ6VXNlcjE2NDQwMzU0","avatar_url":"https://avatars.githubusercontent.com/u/16440354?v=4","gravatar_id":"","url":"https://api.github.com/users/codope","html_url":"https://github.com/codope","followers_url":"https://api.github.com/users/codope/followers","following_url":"https://api.github.com/users/codope/following{/other_user}","gists_url":"https://api.github.com/users/codope/gists{/gist_id}","starred_url":"https://api.github.com/users/codope/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/codope/subscriptions","organizations_url":"https://api.github.com/users/codope/orgs","repos_url":"https://api.github.com/users/codope/repos","events_url":"https://api.github.com/users/codope/events{/privacy}","received_events_url":"https://api.github.com/users/codope/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T12:16:48Z","updated_at":"2021-08-06T12:16:48Z","author_association":"MEMBER","body":"> Are your referring to your tables as local.database.table?\r\n\r\n@RussellSpitzer Thank you so much. Your comment helped! I was actually referring to my tables as `local.db.table`. I changed that to `local.default.table` because `show current namespace` listed `default` as the database. It worked!\r\n\r\nI think this issue can be closed. For completeness, I will mention below the SQLs that worked with the configs I set.\r\n\r\n```\r\nCREATE TABLE local.default.t1 (id bigint, data string) USING iceberg;\r\nINSERT INTO local.default.t1 VALUES (1, 'a'), (2, 'b'), (3, 'c');\r\n```\r\n\r\nAfter this goto the location (specified in `spark.sql.catalog.local.warehouse`) on the namenode and the data as well as metadata should be visible under `$PWD/warehouse/default/t1`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894220115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894281419","html_url":"https://github.com/apache/iceberg/issues/2934#issuecomment-894281419","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2934","id":894281419,"node_id":"IC_kwDOCW7NX841TabL","user":{"login":"cccs-br","id":56260250,"node_id":"MDQ6VXNlcjU2MjYwMjUw","avatar_url":"https://avatars.githubusercontent.com/u/56260250?v=4","gravatar_id":"","url":"https://api.github.com/users/cccs-br","html_url":"https://github.com/cccs-br","followers_url":"https://api.github.com/users/cccs-br/followers","following_url":"https://api.github.com/users/cccs-br/following{/other_user}","gists_url":"https://api.github.com/users/cccs-br/gists{/gist_id}","starred_url":"https://api.github.com/users/cccs-br/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cccs-br/subscriptions","organizations_url":"https://api.github.com/users/cccs-br/orgs","repos_url":"https://api.github.com/users/cccs-br/repos","events_url":"https://api.github.com/users/cccs-br/events{/privacy}","received_events_url":"https://api.github.com/users/cccs-br/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T14:01:09Z","updated_at":"2021-08-06T14:27:55Z","author_association":"NONE","body":"Thanks for you suggestions.  But I added 'USING iceberg' to the create table sql.  And also added a test case that wraps the byte array with 'lit'.  As suspected, the issue remains.\r\n\r\nThe question is:\r\n\r\nwhy does this one work:\r\n\r\nhttps://github.com/cccs-br/spark-iceberg-issue/blob/f7811250608df8618fe264cbf340b5d40effba0d/src/test/java/IcebergTests.java#L40\r\n\r\n..and this one fails:\r\n\r\nhttps://github.com/cccs-br/spark-iceberg-issue/blob/f7811250608df8618fe264cbf340b5d40effba0d/src/test/java/IcebergTests.java#L50\r\n\r\nSo, it does appear like spark handles it, but going through iceberg, it fails.  [Spark3Util.java:654](https://github.com/apache/iceberg/blob/29cf712a821aa937e176f2d79a5593c4a1429e7f/spark3/src/main/java/org/apache/iceberg/spark/Spark3Util.java#L654)  is where the exception is explicitly thrown.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894281419/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894306826","html_url":"https://github.com/apache/iceberg/issues/2934#issuecomment-894306826","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2934","id":894306826,"node_id":"IC_kwDOCW7NX841TgoK","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T14:38:44Z","updated_at":"2021-08-06T14:38:44Z","author_association":"MEMBER","body":"Probably has to do with our supporters metric evaluators, I bet if you debugged the working one spark translates that into some other type. We had a similar issue with new date and local time objects which spark doesnt generate itself but you can pass through as literals\n\nSent from my iPhone\n\n> On Aug 6, 2021, at 9:01 AM, cccs-br ***@***.***> wrote:\n> \n> \n> Thanks for you suggestions. But I added 'USING iceberg' to the create table sql. And also added a test case that wraps the byte array with 'lit'. As suspected, the issue remains.\n> \n> The question is:\n> \n> why does this one work:\n> \n> https://github.com/cccs-br/spark-iceberg-issue/blob/f7811250608df8618fe264cbf340b5d40effba0d/src/test/java/IcebergTests.java#L40\n> \n> ..and this one fails:\n> \n> https://github.com/cccs-br/spark-iceberg-issue/blob/f7811250608df8618fe264cbf340b5d40effba0d/src/test/java/IcebergTests.java#L50\n> \n> \n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub, or unsubscribe.\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894306826/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894337944","html_url":"https://github.com/apache/iceberg/pull/2932#issuecomment-894337944","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2932","id":894337944,"node_id":"IC_kwDOCW7NX841ToOY","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T15:28:19Z","updated_at":"2021-08-06T15:28:19Z","author_association":"CONTRIBUTOR","body":"This looks valid to me. The action will clean up data files for any exception, but we should not do that when the commit state is unknown. FYI @RussellSpitzer.\r\n\r\n@wg1026688210, can you remove any unnecessary formatting and whitespace changes? It would also be great to update the description with the case that this fixes. Thanks for working on this!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894337944/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894340514","html_url":"https://github.com/apache/iceberg/pull/2932#issuecomment-894340514","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2932","id":894340514,"node_id":"IC_kwDOCW7NX841To2i","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T15:32:31Z","updated_at":"2021-08-06T15:32:31Z","author_association":"MEMBER","body":"Yeah this is definitely the right thing to do, we are handling this in the new code (https://github.com/apache/iceberg/blob/a1bd63d56751999ecee89b871992d7bac395fd52/core/src/main/java/org/apache/iceberg/actions/RewriteDataFilesCommitManager.java#L97-L109) as well and while this path is deprecated now I think we should definitely fix it to avoid causing issues while the path is still available. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894340514/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894383649","html_url":"https://github.com/apache/iceberg/issues/2900#issuecomment-894383649","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2900","id":894383649,"node_id":"IC_kwDOCW7NX841TzYh","user":{"login":"stevenzwu","id":1545663,"node_id":"MDQ6VXNlcjE1NDU2NjM=","avatar_url":"https://avatars.githubusercontent.com/u/1545663?v=4","gravatar_id":"","url":"https://api.github.com/users/stevenzwu","html_url":"https://github.com/stevenzwu","followers_url":"https://api.github.com/users/stevenzwu/followers","following_url":"https://api.github.com/users/stevenzwu/following{/other_user}","gists_url":"https://api.github.com/users/stevenzwu/gists{/gist_id}","starred_url":"https://api.github.com/users/stevenzwu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevenzwu/subscriptions","organizations_url":"https://api.github.com/users/stevenzwu/orgs","repos_url":"https://api.github.com/users/stevenzwu/repos","events_url":"https://api.github.com/users/stevenzwu/events{/privacy}","received_events_url":"https://api.github.com/users/stevenzwu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T16:45:35Z","updated_at":"2021-08-07T06:17:01Z","author_association":"CONTRIBUTOR","body":"@ayush-san let's assume if your taskmanager has 1 CPU and 4 GB of memory and you run 10 disjointed pipelines (each with parallelism of 1) in the same process, so you have 10 IcebergFileWriter tasks running in the same taskmanager. Each writer can use 128 MB for Parquet row group size. so the row group memory usage can add up to 1 GB. Actual number probably will be a few Xs of the 1 GB due to other memory overhead with Parquet writer.\r\n\r\nif you have the heap dump file, try it with Eclipse MAT. the denominator tree is quite useful to drill down the class holding on to the memory. Use the heap dump file generated by `-XX:+HeapDumpOnOutOfMemoryError`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894383649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894389836","html_url":"https://github.com/apache/iceberg/pull/2926#issuecomment-894389836","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2926","id":894389836,"node_id":"IC_kwDOCW7NX841T05M","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T16:57:35Z","updated_at":"2021-08-06T16:57:35Z","author_association":"COLLABORATOR","body":"@rdblue  thanks for the detailed review and catching those, updated","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894389836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894510805","html_url":"https://github.com/apache/iceberg/pull/2928#issuecomment-894510805","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2928","id":894510805,"node_id":"IC_kwDOCW7NX841USbV","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T20:48:34Z","updated_at":"2021-08-06T20:48:34Z","author_association":"COLLABORATOR","body":"I think there is still value for me to add this :). should we open a new PR with @jackye1995's suggestion?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894510805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894516083","html_url":"https://github.com/apache/iceberg/pull/2928#issuecomment-894516083","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2928","id":894516083,"node_id":"IC_kwDOCW7NX841UTtz","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:01:39Z","updated_at":"2021-08-06T21:01:39Z","author_association":"CONTRIBUTOR","body":"Yeah, let me do that","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894516083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894519099","html_url":"https://github.com/apache/iceberg/pull/2928#issuecomment-894519099","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2928","id":894519099,"node_id":"IC_kwDOCW7NX841UUc7","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:08:17Z","updated_at":"2021-08-06T21:08:17Z","author_association":"CONTRIBUTOR","body":"I will merge it once the CI steps are completed.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894519099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894521693","html_url":"https://github.com/apache/iceberg/pull/2922#issuecomment-894521693","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2922","id":894521693,"node_id":"IC_kwDOCW7NX841UVFd","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:14:42Z","updated_at":"2021-08-06T21:14:42Z","author_association":"CONTRIBUTOR","body":"Thanks for fixing this, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894521693/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894523829","html_url":"https://github.com/apache/iceberg/pull/2943#issuecomment-894523829","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2943","id":894523829,"node_id":"IC_kwDOCW7NX841UVm1","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:19:32Z","updated_at":"2021-08-06T21:19:32Z","author_association":"CONTRIBUTOR","body":"Thank you! This was definitely a miss, just a small question around the Flink test, otherwise it looks good to me","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894523829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894524778","html_url":"https://github.com/apache/iceberg/pull/2949#issuecomment-894524778","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2949","id":894524778,"node_id":"IC_kwDOCW7NX841UV1q","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:21:37Z","updated_at":"2021-08-06T21:21:37Z","author_association":"COLLABORATOR","body":"Thanks @jackye1995 !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894524778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894524869","html_url":"https://github.com/apache/iceberg/pull/2945#issuecomment-894524869","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2945","id":894524869,"node_id":"IC_kwDOCW7NX841UV3F","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T21:21:48Z","updated_at":"2021-08-06T21:21:48Z","author_association":"CONTRIBUTOR","body":"Here are some benchmark numbers for writing 2.5 million records (flat schema, 7 columns). I am using bucketing with 32 buckets on an int column for partitioned writes.\r\n\r\n```\r\nBenchmark                                                                       Mode  Cnt   Score   Error  Units\r\nTaskWriterParquetBenchmark.writePartitionedDataNewFanoutWriter                    ss    5  10.432  0.382   s/op\r\nTaskWriterParquetBenchmark.writePartitionedDataOldFanoutWriter                    ss    5  11.315  0.345   s/op\r\nTaskWriterParquetBenchmark.writePartitionedDataNewWriter                          ss    5  11.416  0.994   s/op\r\nTaskWriterParquetBenchmark.writePartitionedDataOldWriter                          ss    5  11.331  0.238   s/op\r\nTaskWriterParquetBenchmark.writePartitionedEqualityDeleteNewWriter                ss    5  11.795  1.553   s/op\r\nTaskWriterParquetBenchmark.writeUnpartitionedDataNewWriter                        ss    5  10.736  1.058   s/op\r\nTaskWriterParquetBenchmark.writeUnpartitionedDataOldWriter                        ss    5  10.501  2.084   s/op\r\nTaskWriterParquetBenchmark.writeUnpartitionedEqualityDeleteNewWriter              ss    5   9.935  0.166   s/op\r\nTaskWriterParquetBenchmark.writeUnpartitionedPositionDeleteWithoutRowNewWriter    ss    5   8.833  0.791   s/op\r\n```\r\n\r\nMemory-wise it is very similar. Here is an example.\r\n\r\n```\r\nTaskWriterParquetBenchmark.writePartitionedDataNewWriter:gc.alloc.rate                                            ss    5         177.302         17.914  MB/sec\r\nTaskWriterParquetBenchmark.writePartitionedDataNewWriter:gc.churn.G1_Eden_Space                                   ss    5         136.865         12.818  MB/sec\r\nTaskWriterParquetBenchmark.writePartitionedDataNewWriter:gc.churn.G1_Old_Gen                                      ss    5           5.411          0.646  MB/sec\r\nTaskWriterParquetBenchmark.writePartitionedDataOldWriter:gc.alloc.rate                                            ss    5         177.730         11.985  MB/sec\r\nTaskWriterParquetBenchmark.writePartitionedDataOldWriter:gc.churn.G1_Eden_Space                                   ss    5         137.768         21.407  MB/sec\r\nTaskWriterParquetBenchmark.writePartitionedDataOldWriter:gc.churn.G1_Old_Gen                                      ss    5           5.420          0.892  MB/sec\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894524869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894562404","html_url":"https://github.com/apache/iceberg/issues/2939#issuecomment-894562404","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2939","id":894562404,"node_id":"IC_kwDOCW7NX841UfBk","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T23:17:17Z","updated_at":"2021-08-06T23:17:17Z","author_association":"MEMBER","body":"My guess would be we are missing a reflective lookup somewhere for spark 3.0 - 3.1 compat","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894562404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894562777","html_url":"https://github.com/apache/iceberg/issues/2947#issuecomment-894562777","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2947","id":894562777,"node_id":"IC_kwDOCW7NX841UfHZ","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-06T23:18:53Z","updated_at":"2021-08-06T23:20:08Z","author_association":"MEMBER","body":"There was a discussion of using non utc boundaries, but I don't think it was ever made possible and we just decided that utc was fine.\r\n\r\nhttps://github.com/apache/iceberg/pull/1368","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894562777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894600066","html_url":"https://github.com/apache/iceberg/pull/2932#issuecomment-894600066","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2932","id":894600066,"node_id":"IC_kwDOCW7NX841UoOC","user":{"login":"wg1026688210","id":14267759,"node_id":"MDQ6VXNlcjE0MjY3NzU5","avatar_url":"https://avatars.githubusercontent.com/u/14267759?v=4","gravatar_id":"","url":"https://api.github.com/users/wg1026688210","html_url":"https://github.com/wg1026688210","followers_url":"https://api.github.com/users/wg1026688210/followers","following_url":"https://api.github.com/users/wg1026688210/following{/other_user}","gists_url":"https://api.github.com/users/wg1026688210/gists{/gist_id}","starred_url":"https://api.github.com/users/wg1026688210/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wg1026688210/subscriptions","organizations_url":"https://api.github.com/users/wg1026688210/orgs","repos_url":"https://api.github.com/users/wg1026688210/repos","events_url":"https://api.github.com/users/wg1026688210/events{/privacy}","received_events_url":"https://api.github.com/users/wg1026688210/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T03:55:37Z","updated_at":"2021-08-07T03:55:37Z","author_association":"CONTRIBUTOR","body":"> This looks valid to me. The action will clean up data files for any exception, but we should not do that when the commit state is unknown. FYI @RussellSpitzer.\r\n> \r\n> @wg1026688210, can you remove any unnecessary formatting and whitespace changes? It would also be great to update the description with the case that this fixes. Thanks for working on this!\r\n\r\nok","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894600066/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894600135","html_url":"https://github.com/apache/iceberg/pull/2932#issuecomment-894600135","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2932","id":894600135,"node_id":"IC_kwDOCW7NX841UoPH","user":{"login":"wg1026688210","id":14267759,"node_id":"MDQ6VXNlcjE0MjY3NzU5","avatar_url":"https://avatars.githubusercontent.com/u/14267759?v=4","gravatar_id":"","url":"https://api.github.com/users/wg1026688210","html_url":"https://github.com/wg1026688210","followers_url":"https://api.github.com/users/wg1026688210/followers","following_url":"https://api.github.com/users/wg1026688210/following{/other_user}","gists_url":"https://api.github.com/users/wg1026688210/gists{/gist_id}","starred_url":"https://api.github.com/users/wg1026688210/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wg1026688210/subscriptions","organizations_url":"https://api.github.com/users/wg1026688210/orgs","repos_url":"https://api.github.com/users/wg1026688210/repos","events_url":"https://api.github.com/users/wg1026688210/events{/privacy}","received_events_url":"https://api.github.com/users/wg1026688210/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T03:56:23Z","updated_at":"2021-08-07T03:56:23Z","author_association":"CONTRIBUTOR","body":"> Yeah this is definitely the right thing to do, we are handling this in the new code (\r\n> \r\n> https://github.com/apache/iceberg/blob/a1bd63d56751999ecee89b871992d7bac395fd52/core/src/main/java/org/apache/iceberg/actions/RewriteDataFilesCommitManager.java#L97-L109\r\n> \r\n> ) as well and while this path is deprecated now I think we should definitely fix it to avoid causing issues while the path is still available.\r\n\r\nlooking forward to using the new version rewrite","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894600135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894605415","html_url":"https://github.com/apache/iceberg/pull/2910#issuecomment-894605415","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2910","id":894605415,"node_id":"IC_kwDOCW7NX841Uphn","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T05:01:38Z","updated_at":"2021-08-07T05:01:38Z","author_association":"COLLABORATOR","body":"@rymurr @TGooch44  updated the PR to use module function.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894605415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894605553","html_url":"https://github.com/apache/iceberg/issues/2915#issuecomment-894605553","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2915","id":894605553,"node_id":"IC_kwDOCW7NX841Upjx","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T05:03:01Z","updated_at":"2021-08-07T05:03:01Z","author_association":"COLLABORATOR","body":" ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894605553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894633511","html_url":"https://github.com/apache/iceberg/pull/2782#issuecomment-894633511","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2782","id":894633511,"node_id":"IC_kwDOCW7NX841UwYn","user":{"login":"ayushchauhan0811","id":10010065,"node_id":"MDQ6VXNlcjEwMDEwMDY1","avatar_url":"https://avatars.githubusercontent.com/u/10010065?v=4","gravatar_id":"","url":"https://api.github.com/users/ayushchauhan0811","html_url":"https://github.com/ayushchauhan0811","followers_url":"https://api.github.com/users/ayushchauhan0811/followers","following_url":"https://api.github.com/users/ayushchauhan0811/following{/other_user}","gists_url":"https://api.github.com/users/ayushchauhan0811/gists{/gist_id}","starred_url":"https://api.github.com/users/ayushchauhan0811/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ayushchauhan0811/subscriptions","organizations_url":"https://api.github.com/users/ayushchauhan0811/orgs","repos_url":"https://api.github.com/users/ayushchauhan0811/repos","events_url":"https://api.github.com/users/ayushchauhan0811/events{/privacy}","received_events_url":"https://api.github.com/users/ayushchauhan0811/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-07T10:00:35Z","updated_at":"2021-08-07T10:00:35Z","author_association":"NONE","body":"@RussellSpitzer Need some help on how to change the test for delete files\r\n\r\nIn the current test, we are listing the files b/w the snapshots. So for a snapshot range with delete operation, a file can be repeated as it will be provided by append operation as well as delete operation. You can refer this test case https://github.com/apache/iceberg/blob/master/core/src/test/java/org/apache/iceberg/TestIncrementalDataTableScan.java#L175\r\n\r\nAfter my change it will return the `D` file twice, so should I annotate delete files like this `-D`. I was trying a way to annotate but didn't find anything. So how should I proceed with this? \r\n\r\n```\r\nfilesMatch(Lists.newArrayList(\"B\", \"C\", \"D\", \"D\", \"E\", \"I\"), dataBetweenScan(1, 8));\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/894633511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]