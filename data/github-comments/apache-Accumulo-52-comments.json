[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687971050","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-687971050","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":687971050,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk3MTA1MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T01:41:16Z","updated_at":"2020-09-07T01:41:16Z","author_association":"MEMBER","body":"> I did not see the test failure, did it happen during the checks? If so can you send a link? I thought all the checks passed.\r\n\r\nhttps://github.com/apache/accumulo/runs/1078818587\r\n\r\nIt happened with commit f4e3c51efed22f9c17185bf023883ecb1962e6e9 . It might just have been a transient issue with GitHub Actions containers, or an unrelated problem. It did not seem to reoccur with your latest commits.\r\n\r\nSpeaking of your commits. You don't need to force-push when update the PR. In fact, it actually makes it harder to review, because it GitHub sends notifications to followers showing the diff between the current code and the previous... but that link doesn't work on force-pushes, because the earlier commits are no longer present. When it comes time to merge, we'll squash it all down to one, anyway, so it's better to just add commits instead of force-pushing.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687971050/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687980505","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-687980505","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":687980505,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4MDUwNQ==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:11:16Z","updated_at":"2020-09-07T02:11:16Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Sorry about the force pushing, bad habits. I'll add the verify to my tests, thanks for the info, I'm not as familiar with EasyMock as I'd like to be.\r\n\r\nDid you see my comment about the prefix subset?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687980505/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687982527","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-687982527","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":687982527,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4MjUyNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:17:15Z","updated_at":"2020-09-07T02:17:15Z","author_association":"MEMBER","body":"> Did you see my comment about the prefix subset?\r\n\r\nI missed it the first time. I think I see what you're suggesting, but I don't think it's worth it. If you can show that it's a substantive performance advantage, then it might make sense... but I suspect it'd be a negligible difference, and just more code complexity to maintain, without real benefit.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687982527/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687987707","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-687987707","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":687987707,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk4NzcwNw==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T02:32:58Z","updated_at":"2020-09-07T02:32:58Z","author_association":"CONTRIBUTOR","body":"I agree with the complexity comment. I'm good to merge if you are.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687987707/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687999540","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-687999540","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":687999540,"node_id":"MDEyOklzc3VlQ29tbWVudDY4Nzk5OTU0MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T03:09:23Z","updated_at":"2020-09-07T03:09:23Z","author_association":"MEMBER","body":"Thanks for the PR @jkosh44 !\r\n\r\nI see you've contributed before, but you're not on our \"people\" page, listing contributors. If you wish to be added as a contributor to https://accumulo.apache.org/people/ , please open a pull request to add yourself at https://github.com/apache/accumulo-website/edit/master/pages/people.md and leave a reference to `apache/accumulo#1701` in your commit log.\r\n\r\nIf you intend to be a regular contributor to Accumulo projects, please consider subscribing to our developer mailing list (https://accumulo.apache.org/contact-us/) and introducing yourself. :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/687999540/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688008338","html_url":"https://github.com/apache/accumulo/pull/1701#issuecomment-688008338","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1701","id":688008338,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODAwODMzOA==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-07T03:35:05Z","updated_at":"2020-09-07T03:35:05Z","author_association":"CONTRIBUTOR","body":"Thanks for the review @ctubbsii! \r\nI'm not sure how regularly I plan on contributing, but I'll do all that now. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688008338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688842028","html_url":"https://github.com/apache/accumulo/issues/873#issuecomment-688842028","issue_url":"https://api.github.com/repos/apache/accumulo/issues/873","id":688842028,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg0MjAyOA==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T12:45:25Z","updated_at":"2020-09-08T12:45:25Z","author_association":"CONTRIBUTOR","body":"I will take a look at it. Question, how do I properly test to see the performance benefits if any?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688842028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688844056","html_url":"https://github.com/apache/accumulo/issues/873#issuecomment-688844056","issue_url":"https://api.github.com/repos/apache/accumulo/issues/873","id":688844056,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg0NDA1Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T12:49:32Z","updated_at":"2020-09-08T12:49:32Z","author_association":"MEMBER","body":"@tynyttie I believe we now have a continuous ingest bulk load test in the accumulo-testing repository, that you may be able to adapt. Or, you may need to experiment and devise your own performance testing for something like this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688844056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688845256","html_url":"https://github.com/apache/accumulo/issues/873#issuecomment-688845256","issue_url":"https://api.github.com/repos/apache/accumulo/issues/873","id":688845256,"node_id":"MDEyOklzc3VlQ29tbWVudDY4ODg0NTI1Ng==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T12:52:01Z","updated_at":"2020-09-08T12:52:01Z","author_association":"CONTRIBUTOR","body":"I understand. Thank you. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/688845256/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689049275","html_url":"https://github.com/apache/accumulo/pull/1702#issuecomment-689049275","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1702","id":689049275,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA0OTI3NQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:12:38Z","updated_at":"2020-09-08T18:12:38Z","author_association":"MEMBER","body":"I know this is a big PR, but most of this was done with very simple automated refactorings in the IDE... it just looks like a lot more was done, because KeyExtent is used in a lot of files.\r\n\r\nI think these changes are worth it, because they make dealing with KeyExtent a bit less error prone, especially with the various `Text` parameters that had different semantics in the overloaded constructors. Giving names to those overloaded constructors, and eliminating the setters makes this object safer to use.\r\n\r\nI'm currently running the full ITs on this before I'd consider merging.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689049275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689051236","html_url":"https://github.com/apache/accumulo/issues/1084#issuecomment-689051236","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1084","id":689051236,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTA1MTIzNg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-08T18:16:46Z","updated_at":"2020-09-08T18:16:46Z","author_association":"MEMBER","body":"@milleruntime What's the status of this?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689051236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689232327","html_url":"https://github.com/apache/accumulo/pull/1702#issuecomment-689232327","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1702","id":689232327,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTIzMjMyNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-09T00:54:53Z","updated_at":"2020-09-09T00:54:53Z","author_association":"MEMBER","body":"My run of the full ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689232327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689674473","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-689674473","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":689674473,"node_id":"MDEyOklzc3VlQ29tbWVudDY4OTY3NDQ3Mw==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-09T16:28:02Z","updated_at":"2020-09-09T16:28:02Z","author_association":"CONTRIBUTOR","body":"The IT's passed. I merged in the most recent changes to accumulo so hopefully everything is aligned. Most of these things are refactors and deletions of unused code. Not sure how wanted some of these things are so there is no rush for review. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/689674473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690360318","html_url":"https://github.com/apache/accumulo/issues/1643#issuecomment-690360318","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1643","id":690360318,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDM2MDMxOA==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T15:18:30Z","updated_at":"2020-09-10T15:18:30Z","author_association":"CONTRIBUTOR","body":"I have a couple questions on this. \r\n\r\n- Do we just want to change the method names or all references? \r\n- What about variable names, enum values, and constants? \r\n- Do we just care about public API methods are do we also want to change internal methods? \r\n- What about class names? For example `MasterClient`. One solution could be to refactor this to `ManagerClient`, then have a subclass called `MasterClient` that just delegates all methods to `ManagerClient`.\r\n- It looks like there are some files called master or that have the word master in it (https://github.com/apache/accumulo/blob/main/minicluster/src/main/java/org/apache/accumulo/cluster/standalone/StandaloneClusterControl.java#L56 for example). How should those be treated? It seems like renaming the file could break existing instances.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690360318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690379138","html_url":"https://github.com/apache/accumulo/issues/1643#issuecomment-690379138","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1643","id":690379138,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDM3OTEzOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T15:44:05Z","updated_at":"2020-09-10T15:44:05Z","author_association":"MEMBER","body":"@jkosh44 The main issue here is to address the user-facing public APIs, because require thoughtful consideration with a plan, and affect our versioning, and are not simple renames. Those should go through a deprecation cycle (with replacements), and be dropped on the next major version.\r\n\r\nTake a look at our public API definition at https://accumulo.apache.org/api/ for details on what is considered public API.\r\n\r\nThere are (at least) two separate, but related, steps that can be done also, but may be less risky, or at least, can be worked independently:\r\n\r\n1. User-facing non-API things like documentation, configuration properties, and configuration files, and the monitor\r\n2. Everything else that is internal-only, including things like `MasterClient`, field names (with careful consideration of serialization), and test cases, can probably be changed at any time, because they have no impact on the end user.\r\n\r\nThese tasks should be performed separately, and be made incrementally so as to reduce the risk of mistakes, and to not overwhelm reviewers (because the changes will be large).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690379138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690379493","html_url":"https://github.com/apache/accumulo/issues/1643#issuecomment-690379493","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1643","id":690379493,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDM3OTQ5Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T15:44:38Z","updated_at":"2020-09-10T15:44:38Z","author_association":"MEMBER","body":"For this issue, I would focus *only* on public API.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690379493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690382313","html_url":"https://github.com/apache/accumulo/issues/1643#issuecomment-690382313","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1643","id":690382313,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDM4MjMxMw==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T15:46:42Z","updated_at":"2020-09-10T15:46:42Z","author_association":"CONTRIBUTOR","body":"Ok, thanks for the clarification","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690382313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690607073","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-690607073","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":690607073,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDYwNzA3Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T18:34:55Z","updated_at":"2020-09-10T18:34:55Z","author_association":"MEMBER","body":"@Manno15 Thanks for this. I confirmed all the ITs passed for these changes, and am working through a code review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690607073/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690759487","html_url":"https://github.com/apache/accumulo/pull/1703#issuecomment-690759487","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1703","id":690759487,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDc1OTQ4Nw==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T22:12:22Z","updated_at":"2020-09-10T22:12:22Z","author_association":"CONTRIBUTOR","body":"> Looks great overall.\r\n> \r\n> Please add `@SuppressWarnings(\"removal\")` on the methods causing compiler warnings because of the use of the `MASTER` enum.\r\n\r\nPretty sure I got all of them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690759487/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690780895","html_url":"https://github.com/apache/accumulo/pull/1703#issuecomment-690780895","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1703","id":690780895,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDc4MDg5NQ==","user":{"login":"jkosh44","id":10800303,"node_id":"MDQ6VXNlcjEwODAwMzAz","avatar_url":"https://avatars.githubusercontent.com/u/10800303?v=4","gravatar_id":"","url":"https://api.github.com/users/jkosh44","html_url":"https://github.com/jkosh44","followers_url":"https://api.github.com/users/jkosh44/followers","following_url":"https://api.github.com/users/jkosh44/following{/other_user}","gists_url":"https://api.github.com/users/jkosh44/gists{/gist_id}","starred_url":"https://api.github.com/users/jkosh44/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jkosh44/subscriptions","organizations_url":"https://api.github.com/users/jkosh44/orgs","repos_url":"https://api.github.com/users/jkosh44/repos","events_url":"https://api.github.com/users/jkosh44/events{/privacy}","received_events_url":"https://api.github.com/users/jkosh44/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-10T23:17:10Z","updated_at":"2020-09-10T23:17:10Z","author_association":"CONTRIBUTOR","body":"Looks like the failed check is from a connection timeout download hadoop jars from maven. Can we re-run it?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690780895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690841290","html_url":"https://github.com/apache/accumulo/issues/1643#issuecomment-690841290","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1643","id":690841290,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDg0MTI5MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T02:50:11Z","updated_at":"2020-09-11T02:50:11Z","author_association":"MEMBER","body":"This is partially done. The final removal will need to occur in a 3.0.0 release, because of the API breakages.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690841290/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690841930","html_url":"https://github.com/apache/accumulo/pull/1703#issuecomment-690841930","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1703","id":690841930,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDg0MTkzMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T02:52:35Z","updated_at":"2020-09-11T02:52:35Z","author_association":"MEMBER","body":"@jkosh44 It occurred to me after I merged that it probably wasn't necessary to modify `Instance`, since that is already deprecated and ready to be removed in 3.0.0... the same time these newly deprecated methods would be removed. So, the deprecation cycle for `Instance` was already on track. I will do a partial revert of those changes, so as to limit the introduction of a new API in 2.1.0 in an already deprecated class, that can be removed in 3.0.0.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690841930/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690851241","html_url":"https://github.com/apache/accumulo/pull/1703#issuecomment-690851241","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1703","id":690851241,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MDg1MTI0MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T03:26:19Z","updated_at":"2020-09-11T03:26:19Z","author_association":"MEMBER","body":"@jkosh44 Please see #1704. I wouldn't mind having your review on that, if you have a chance to look, since it rolls back the changes you made (and I merged) here to `Instance`.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/690851241/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691217770","html_url":"https://github.com/apache/accumulo/issues/1351#issuecomment-691217770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1351","id":691217770,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTIxNzc3MA==","user":{"login":"cradal","id":20303105,"node_id":"MDQ6VXNlcjIwMzAzMTA1","avatar_url":"https://avatars.githubusercontent.com/u/20303105?v=4","gravatar_id":"","url":"https://api.github.com/users/cradal","html_url":"https://github.com/cradal","followers_url":"https://api.github.com/users/cradal/followers","following_url":"https://api.github.com/users/cradal/following{/other_user}","gists_url":"https://api.github.com/users/cradal/gists{/gist_id}","starred_url":"https://api.github.com/users/cradal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cradal/subscriptions","organizations_url":"https://api.github.com/users/cradal/orgs","repos_url":"https://api.github.com/users/cradal/repos","events_url":"https://api.github.com/users/cradal/events{/privacy}","received_events_url":"https://api.github.com/users/cradal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T17:21:10Z","updated_at":"2020-09-11T17:21:10Z","author_association":"CONTRIBUTOR","body":"Looking at this issue now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691217770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691252150","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-691252150","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":691252150,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTI1MjE1MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T18:38:07Z","updated_at":"2020-09-11T18:38:07Z","author_association":"MEMBER","body":"@Manno15 I updated the title to reflect what this code is trying to change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691252150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691274564","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-691274564","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":691274564,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTI3NDU2NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T19:30:01Z","updated_at":"2020-09-11T19:30:01Z","author_association":"MEMBER","body":"Okay, I was trying to track down this a bit, because it didn't make sense to me that the two methods that previously updated the `LAST` location would be doing that. I traced the code and saw that the two methods in `MasterMetadataUtil` that update `LocationType.LAST` are only ever called by `DatafileManager.bringMinorCompactionOnline` and `DatafileManager.bringMajorCompactionOnline`.\r\n\r\nSo, it seems that the original intent (prior to #1616) was to *only* update the `LAST` location if a file was successfully written locally on that server. So, `LAST` does *not* represent the last assignment, but the last server where data was written from a major or minor compaction. The intent, it seems, is that the initial assignments on startup should be based on where the data would be local, and not to preserve its previous assignment.\r\n\r\nThis insight also answers the questions I had in https://github.com/apache/accumulo/pull/1616#issuecomment-665412742 about the intent of the `LAST` field. Because, if the intent was to simply assign to the last location it was previously assigned to, then assigning it to the last `CURRENT` location that was written would be sufficient (because that is updated on assignment), and we wouldn't even need a `LAST` location at all. `LAST` does not mean \"last assignment\", it means \"last location where data was likely written locally\". This is about data locality, not (re)assignment thrashing.\r\n\r\nSo, we need to go back to the drawing board here, because I'm not sure #1616 even fixed a problem at all... it simply changed behavior to re-assign to a previously assigned location, rather than the last location written to. We need to figure out if the code works as intended *without* the changes in #1616. If it does, then we need to figure out whether we want to change the behavior or not. If we do, then we can probably change the code to eliminate the `LAST` field entirely, and just use the `CURRENT` field, if it exists. If we don't want to change the behavior, then we can revert #1616 and simply do the changes that get rid of some boilerplate by using Ample.\r\n\r\nDoes all this make sense, @Manno15 \r\nIf not, feel free to give me a call or ping me on Slack.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691274564/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691281245","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-691281245","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":691281245,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTI4MTI0NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T19:46:31Z","updated_at":"2020-09-11T19:46:31Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Yes, that makes sense. I misunderstood the intent when I was first working on this, my apologies. Thank you for taking a deeper look into it. I would like to set up a call for Monday if you are available. We can discuss how to proceed with both these issues. Again, my apologies. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691281245/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691292507","html_url":"https://github.com/apache/accumulo/issues/948#issuecomment-691292507","issue_url":"https://api.github.com/repos/apache/accumulo/issues/948","id":691292507,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTI5MjUwNw==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-11T20:15:31Z","updated_at":"2020-09-11T20:15:31Z","author_association":"CONTRIBUTOR","body":"There is also the [YieldingIerator](https://github.com/apache/accumulo/blob/main/test/src/main/java/org/apache/accumulo/test/functional/YieldingIterator.java)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691292507/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691387940","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-691387940","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":691387940,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MTM4Nzk0MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-12T02:38:25Z","updated_at":"2020-09-12T02:38:25Z","author_association":"MEMBER","body":"> @ctubbsii Yes, that makes sense. I misunderstood the intent when I was first working on this, my apologies. Thank you for taking a deeper look into it. I would like to set up a call for Monday if you are available. We can discuss how to proceed with both these issues. Again, my apologies.\r\n\r\nNo worries. It took me awhile to catch on to what was going on, because I didn't know what this `LAST` field was for until today. Even now, I'm only 90% certain. :smiley_cat: Monday would be great. Have a good weekend!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/691387940/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692194131","html_url":"https://github.com/apache/accumulo/pull/1616#issuecomment-692194131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1616","id":692194131,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjE5NDEzMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T17:14:48Z","updated_at":"2020-09-14T17:14:48Z","author_association":"MEMBER","body":"Reverted due to conclusions realized in https://github.com/apache/accumulo/pull/1653#issuecomment-691274564\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692194131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692198061","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-692198061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":692198061,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjE5ODA2MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-14T17:22:11Z","updated_at":"2020-09-14T17:22:11Z","author_association":"MEMBER","body":"I spoke with @Manno15 on Slack, and we came to the conclusion that #1616 should be reverted (which I have done) and that this PR can be rebase'd onto main and updated to reflect only the move to Ample to perform the updates (as well as removing any unneeded code that moving to Ample would obsolete, and updating Ample, as needed, to handle differently serialized port numbers and possibly to reuse a batch writer for updating multiple locations, if needed). I don't know if it is necessary to handle the RuntimeExceptions thrown by Ample and rewrapped as DistributedStoreException, or not... especially since Ample itself is written to wrap all checked exceptions and throw them through as RuntimeExceptions. If Ample doesn't think they should be handled, then maybe these stores shouldn't handle them either. I'm leaving that for @Manno15 to investigate further and come to their own conclusion.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692198061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692676955","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-692676955","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":692676955,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MjY3Njk1NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T12:17:47Z","updated_at":"2020-09-15T12:17:47Z","author_association":"CONTRIBUTOR","body":"@ctubbsii I believe I made all the necessary changes to this per our discussion yesterday. I am going to run the IT's now. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692676955/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692755389","html_url":"https://github.com/apache/accumulo/pull/1649#issuecomment-692755389","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1649","id":692755389,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mjc1NTM4OQ==","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T14:32:51Z","updated_at":"2020-09-15T14:32:51Z","author_association":"CONTRIBUTOR","body":"> This looks good, but why is default_any_running=1 but nothing in default large, medium or small? Is default_any a separate queue, or should it be the sum of all default_any_ ?\r\n\r\n@EdColeman do you still have the source for the test that emitted these metrics?  I would like to see the compaction config used in the test.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692755389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692790665","html_url":"https://github.com/apache/accumulo/pull/1649#issuecomment-692790665","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1649","id":692790665,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mjc5MDY2NQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T15:24:37Z","updated_at":"2020-09-15T15:24:37Z","author_association":"CONTRIBUTOR","body":"Not source code as such - the configuration would have been the defaults.\r\n\r\nWhat I do is hack one of the IT tests that use the slow compaction runner and then just insert a hard Thread.sleep(xxx) - I usually let the test fail because of timeout, so I have as much time as possible for things to report.  \r\n\r\nOne candidate would be in org.apache.accumulo.test.functional.FateConcurrencyIT.multipleCompactions() at line 496 - right before the compactions are cancelled.  The test starts 4 compactions with a slow iterator so there's plenty of time to have metrics reported.\r\n\r\nWhen the test is running, you can use jconsole to examine jmx - or use the metric file output - with this the should be multiple metrics measurements.  You may need to adjust the metrics config so that the metrics files are written - they will end up in the target directory of the ITs.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692790665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692992619","html_url":"https://github.com/apache/accumulo/pull/1705#issuecomment-692992619","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1705","id":692992619,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mjk5MjYxOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-15T21:35:53Z","updated_at":"2020-09-15T21:35:53Z","author_association":"MEMBER","body":"These are trivial changes, but I had them leftover from a previous working branch I had for unrelated changes, and figured I could get rid of that branch by just merging these in.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/692992619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693094109","html_url":"https://github.com/apache/accumulo/pull/1705#issuecomment-693094109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1705","id":693094109,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzA5NDEwOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-16T00:08:53Z","updated_at":"2020-09-16T00:08:53Z","author_association":"MEMBER","body":"> I did not see any issues with a quick first pass - however, with some of the lambda conversions the variable names are changed and I'd need to look at more than the diffs provided to convince myself that the behavior is the same. If these were IDE generated, then they are more likely to not have an error. If this is still open tomorrow I'll try to make time for additional review.\r\n\r\n@EdColeman Most of the changes here were automated IDE refactors, but a few were manual. I've examined them all very carefully, and most are trivial anyway. This change didn't break any tests, so I'm just going to merge and move on. Feel free to add additional review if you wish, but I'm content with the tests not being broken and my manual review. I did add the one comment you suggested, though. The other was... well... I replied to your suggestion above :smiley_cat:","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693094109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693586350","html_url":"https://github.com/apache/accumulo/pull/1653#issuecomment-693586350","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1653","id":693586350,"node_id":"MDEyOklzc3VlQ29tbWVudDY5MzU4NjM1MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-16T18:36:02Z","updated_at":"2020-09-16T18:36:02Z","author_association":"MEMBER","body":"All the ITs passed when I ran them today. So, I'll merge this now. Thanks @Manno15 !","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693586350/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693848838","html_url":"https://github.com/apache/accumulo/pull/1707#issuecomment-693848838","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1707","id":693848838,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Mzg0ODgzOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T04:56:36Z","updated_at":"2020-09-17T04:56:36Z","author_association":"MEMBER","body":"All ITs successfully passed with these changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/693848838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694359730","html_url":"https://github.com/apache/accumulo/issues/1664#issuecomment-694359730","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1664","id":694359730,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDM1OTczMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T16:45:49Z","updated_at":"2020-09-17T16:45:49Z","author_association":"MEMBER","body":"@Manno15 I know you made the batch size configurable in #1706, which is great. But, if you have any results/conclusions from your investigation with various batch sizes that you tested, it'd be good to mention them here. I'm going to close the issue (so I don't forget to later), but you can still comment with your results/conclusions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694359730/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694402054","html_url":"https://github.com/apache/accumulo/issues/1664#issuecomment-694402054","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1664","id":694402054,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQwMjA1NA==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T17:58:48Z","updated_at":"2020-09-17T17:58:48Z","author_association":"CONTRIBUTOR","body":"From my testing, I can see a clear correlation between the number of times it reaches the batch size limit to how long it takes for the collection cycle to complete. With the trial of never reaching the limit being the quickest. \r\n\r\nThe issues I faced were in getting the amount of delete candidates and more importantly the candidate length long enough without my cluster of computers crashing or running out of memory. I was never able to have a trial where the batch size limit greater than 12MB was reached. \r\n\r\nFrom my actual trials, with 75k delete candidates, a batch size of 12MB completed on average of 34 seconds. Which was the quickest. At the same amount of candidates, a batch size of 2 MB completed in 58 seconds. That's a decent amount of time difference for such a small difference in batch size. I would like to revisit this eventually and give it a full range of tests with batch sizes ranging from at least 12 MB to128 MB. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694402054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694412494","html_url":"https://github.com/apache/accumulo/issues/1664#issuecomment-694412494","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1664","id":694412494,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQxMjQ5NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T18:18:00Z","updated_at":"2020-09-17T18:18:00Z","author_association":"MEMBER","body":"@Manno15 I'm curious how you were generating gc candidates in the metadata table. I would have thought you'd be able to easily get over 12MB of candidates, even on modest hardware, by simply adding fake `~del` entries to the metadata table directly. Being configurable, though, should allow users to discover what is optimal for them.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694412494/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694415467","html_url":"https://github.com/apache/accumulo/pull/1707#issuecomment-694415467","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1707","id":694415467,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQxNTQ2Nw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T18:23:01Z","updated_at":"2020-09-17T18:23:01Z","author_association":"MEMBER","body":"Thanks for the review, @EdColeman ; I made a subsequent small change, if you want to take another look.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694415467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694431085","html_url":"https://github.com/apache/accumulo/issues/1664#issuecomment-694431085","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1664","id":694431085,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQzMTA4NQ==","user":{"login":"Manno15","id":29436247,"node_id":"MDQ6VXNlcjI5NDM2MjQ3","avatar_url":"https://avatars.githubusercontent.com/u/29436247?v=4","gravatar_id":"","url":"https://api.github.com/users/Manno15","html_url":"https://github.com/Manno15","followers_url":"https://api.github.com/users/Manno15/followers","following_url":"https://api.github.com/users/Manno15/following{/other_user}","gists_url":"https://api.github.com/users/Manno15/gists{/gist_id}","starred_url":"https://api.github.com/users/Manno15/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Manno15/subscriptions","organizations_url":"https://api.github.com/users/Manno15/orgs","repos_url":"https://api.github.com/users/Manno15/repos","events_url":"https://api.github.com/users/Manno15/events{/privacy}","received_events_url":"https://api.github.com/users/Manno15/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T18:51:46Z","updated_at":"2020-09-17T18:55:11Z","author_association":"CONTRIBUTOR","body":"It's definitely possible that I could have done things more optimal. I was told a good way to produce a lot of delete candidates was to create a pre-split table (I chose 75k), ingest some data, compact the table, clone and then delete one of them. From then on, I just had to compact the table to keep reproducing the delete candidates. This did work well but it did also take a decent amount of time between test runs. \r\n\r\nAnother part of the issue is a couple of the laptops in my cluster are very old hardware and have tendencies to crash even when they're idle. \r\n\r\nI haven't tried your method so maybe the way I did it is more convoluted and taxing on the machines. I can look into doing that tomorrow to see if I can get better results. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694431085/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694492194","html_url":"https://github.com/apache/accumulo/issues/1664#issuecomment-694492194","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1664","id":694492194,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDQ5MjE5NA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T20:48:57Z","updated_at":"2020-09-17T20:48:57Z","author_association":"MEMBER","body":"Thanks for the info on  your method. That way is clever, and should work, too. It is also more realistic as to how Accumulo actually operates (because there may or may not be candidates in use elsewhere in the metadata table, and because the files would actually exist). It's not a big deal. If we identify a better optimal default, we can change the default value, but I wouldn't spend a lot of time on it if I were you. `8M` is already pretty reasonable, I would think, because assuming around 100 chars per candidate, that's still up to 40,000 candidates per batch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694492194/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694500736","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694500736","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694500736,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDUwMDczNg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T21:08:16Z","updated_at":"2020-09-17T21:08:16Z","author_association":"CONTRIBUTOR","body":"(Using 1.10 code) when the tserver gets into a bad state, it looks like zooCache may be returning null in the Tables.exists() check (Tables - line 147).  \r\n\r\nIn TabletServerResourceManager - line 451 has a catch throwable and just a log statement.  The code is in a continuous loop and I believe the code after the error is correctly guarded, but the loop never will end.\r\n\r\nI don't think that killing the runnable would work - the tserver might never notice it lost the memory manager thread.  \r\n\r\nI think zookeeper is available - how bad would it be if on catching the exception, it just deleted the tablet server lock and thereby killed the server?  That would be preferable to writing corrupt data, but maybe there are other \"recoverable errors\"?\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694500736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694503117","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694503117","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694503117,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDUwMzExNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T21:13:37Z","updated_at":"2020-09-17T21:13:37Z","author_association":"MEMBER","body":"@EdColeman Can you provide an example patch of what changes you mean to propose? I'm having a hard time following the narrative.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694503117/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694516735","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694516735","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694516735,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDUxNjczNQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-17T21:47:42Z","updated_at":"2020-09-17T21:47:42Z","author_association":"CONTRIBUTOR","body":"Concept in https://github.com/apache/accumulo/pull/1709  (Not even sure if it will compile - I know the code is incorrect, but should be enough for the gist)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694516735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694603973","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694603973","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694603973,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDYwMzk3Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T02:02:18Z","updated_at":"2020-09-18T02:03:20Z","author_association":"MEMBER","body":"@EdColeman Thanks for the code in #1709. I get the gist of what you're proposing as a solution (to it's own lock and self-terminate). But, I still don't understand the problem from the above description. You said there's a `NullPointerException` being thrown, but it's not possible for it to be thrown in the code you updated... that's just where it is finally caught and handled... so it must be thrown somewhere in `LargestFirstMemoryManager.getMemoryManagementActions(...)` or something it calls, but it's not clear where that could be from the above description, without a stack trace.\r\n\r\nI'm suspicious of Tables.exists returning null (presumably, from line 180 in `LargestFirstMemoryManager`, looking at the 1.10 code), instead of an empty list of children. And, in any case, I don't see how the list can be empty in normal circumstances, because there should always be *some* children there. If there's abnormal circumstances, then I don't think your proposed fix is really going to solve much... because you're just fighting the symptom. If symptoms from ZooKeeper are **that** abnormal, other code is likely going to hit that same broken code path (and you can't handle it the same way everywhere ZooKeeper is used).\r\n\r\nI think what we need is a stack trace, in order to try to track down the actual underlying cause, and the specific code that threw the exception.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694603973/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694604569","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694604569","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694604569,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDYwNDU2OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T02:04:25Z","updated_at":"2020-09-18T02:04:25Z","author_association":"MEMBER","body":"Also, is this issue reproducible or was it a one-off thing you're trying to track down? It'd be great if it were reproducible on 2.x, so we can try to fix it there first.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694604569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694639463","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694639463","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694639463,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDYzOTQ2Mw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T04:13:57Z","updated_at":"2020-09-18T04:13:57Z","author_association":"CONTRIBUTOR","body":"It has occurred more than once, however, I'm not sure how to approach recreating it in a test environment.  It seems the trigger is that the dynamic classloader starts to thrash, continually reloading - I then suspect that this is consuming memory or other resources until things fail.  One thing that sets off the classloader is when new jars are deployed in hdfs for the system, but then its only one or two servers that get into this state.  On an another occasion, it was on a server restart.  \r\n\r\nI'd like to treat the classloader as a separate issue, The classloader issue may be a trigger, but the fact that the tserver can get into this state and write corrupt files probably should be addressed, even if that one trigger is eliminated, maybe there are others?\r\n\r\nThe stacktrace points to the NullPointer coming from the Tables.exists() call - I'll work on getting a more detailed representation of it.\r\n\r\nIts clear that the tserver is unhealthy, and I agree, I am skeptical of Tables.exits returning a null, but if things are that bad, then I was trying to see if there was an approach that, philosophically, would pull the plug to eliminate or at least greatly reduce the blast footprint.\r\n\r\nThe thing is that eventually the tserver does seem to die with a segfault - but only after a lengthy time (days) and the potential for corrupt files being written and causing data loss the whole time the tserver is in this state.  The bad files are only uncovered during the next compaction, so there is quite a delay between when the damage occurred and when Accumulo reports an issue other than in the tserver logs.  To find the problem, it is necessary to take the file reported as corrupt (it shows up in the UI error log) and then grep across all of the tserver log files looking for the compaction plan log message that created said file.\r\n\r\nOther than the corrupted files, the tserver seems to be operating normally - but that might not be a correct assumption - there are no other indications of errors - but that might be different than operating as intended. The delay for discovery does not help in answering this question.\r\n\r\nAs far as 2.x - 1) again, not sure how to reliably trigger this. 2) with 2.x there could be an entirely different approach. \r\n\r\nThere is an open issue - https://github.com/apache/accumulo/issues/946 that could be implemented to achieve this.  My thought was that if the tserver knew that it needed a memory manager thread and that thread dies, then the tserver could take action - to either re-spawn an new process or terminate itself.  If the tserver was aware, then throwing an exception that kills the thread would be appropriate.  As it is now, I think that if the memory manager thread dies, the tserver would not know and that seemed like a sub-optimal condition, so I was exploring if it could be appropriate to kill the server directly - and removing the lock was the most direct way that I thought of.\r\n\r\nImplementing critical thread monitoring and recovery would be more comprehensive and probably a better approach - but the changes would be significant enough that I would not call them a bug fix.  Being that this is happening on 1.9.3 and was not addressed in 1.10, I think a bug fix is appropriate and necessary. Being that this has the potential for data loss, having an fix in 1.10.1 would likely be suitable for people to back port and patch - and I suspect the desire for that is more immediate than could be achieved by starting with 2.x as the target.\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694639463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694666753","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694666753","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694666753,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDY2Njc1Mw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T05:46:03Z","updated_at":"2020-09-18T05:46:03Z","author_association":"MEMBER","body":"Ugh. Classloaders. If you can't trust your class loader, you can't trust anything. I don't know how we can reasonably protect against class loader problems... because those can cause problems *anywhere* in our code, including any code we write to try to guard against problems.\r\n\r\nAnother possible issue is the attempting to catch Throwable and handle it... which could include unrecoverable Errors. We may be causing more problems than we are solving by catching things like `OutOfMemoryError` and trying to do something to handle it. IMO, we should never catch Throwable, unless we're going to immediately halt the JVM. I can't help but wonder if there was an earlier `Error` thrown prior to the NPE.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694666753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694859786","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694859786","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694859786,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDg1OTc4Ng==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T13:12:56Z","updated_at":"2020-09-18T13:12:56Z","author_association":"CONTRIBUTOR","body":"Sample stack trace:\r\n\r\n`For version 1.9.3 \r\n\r\n```\r\n[time] [tserver.TableServerResourceManager] TabletServerResourceManager ERROR: Memory manager failed null\r\njava.lang.NullPointerException\r\n    at org.apache.accumulo.core.client.impl.Tables.exists(Tables.java:148)\r\n    at org.apache.accumulo.server.tabletserver.LargestFirstMemoryManager.tableExists(LargestFirstMemoryManager.java:153)\r\n    at org.apache.accumulo.server.tabletserver.LargestFirstMemoryManager.getMemoryManagementActions(LargestFirstMemoryManager.java:180)\r\n    at org.apache.accumulo.tserver.TabletServerResourceManager$MemoryManagementFramework.manageMemory(TabletServerResourceManager.java:440)\r\n    at org.apache.accumulo.tserver.TabletServerResourceManager$MemoryManagementFramework.access$400(TabletServerResourceManager.java:349)\r\n    at org.apache.accumulo.tserver.TabletServerResourceManager$MemoryManagementFramework.$2.run(TabletServerResourceManager.java:377)\r\n    at org.apache.accumulo.fate.util.LoggingRunnable.run(LoggingRunnable.java:35)\r\n    at java.lang.Thread.run(Thread.java:748)\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694859786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694880436","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-694880436","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":694880436,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDg4MDQzNg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T13:51:04Z","updated_at":"2020-09-18T13:51:04Z","author_association":"CONTRIBUTOR","body":"Timeline - maybe this helps to provide context, an abbreviated timeline of the messages logged:\r\n```\r\n16:34:20,453 - tserver started and looks to be normal assignments and no errors.\r\n16:41:04,036 - Rebuilding dynamic classloader using files...\r\n16:41:05,045 - [same]\r\n16:41:05,114 - [same]\r\n16:47:36,354 - [same]\r\n16:47:36,414 - [same] 452 times over the next 18 hrs.\r\n...\r\n16:51:02,398 - WARN loadTablet message from a master that does not hold the master lock\r\n...\r\n16:53:22,105 - ERROR: memory manager failed null.\r\n  these continued for the next 18 hrs - 2300 times.\r\n\r\nnext day\r\n10:05:29,983 - tserver dies with a segfault - Problematic frame: J 8944 java.util.HashSet.add(Ljava/lang/Object;)Z (20 bytes)\r\n\r\n\r\nThe only ERROR log messages reported:\r\n\r\n16:51:02,398 - bad master lock / loadTablet request.\r\n16:53:22,105 - First memory manager failed.\r\n19:18:01,855 - vfs.AccumuloReloadingVFSClassLoader ERROR: Invalid URI escape sequence\r\n\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694880436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694993657","html_url":"https://github.com/apache/accumulo/issues/1628#issuecomment-694993657","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1628","id":694993657,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NDk5MzY1Nw==","user":{"login":"tynyttie","id":8038703,"node_id":"MDQ6VXNlcjgwMzg3MDM=","avatar_url":"https://avatars.githubusercontent.com/u/8038703?v=4","gravatar_id":"","url":"https://api.github.com/users/tynyttie","html_url":"https://github.com/tynyttie","followers_url":"https://api.github.com/users/tynyttie/followers","following_url":"https://api.github.com/users/tynyttie/following{/other_user}","gists_url":"https://api.github.com/users/tynyttie/gists{/gist_id}","starred_url":"https://api.github.com/users/tynyttie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tynyttie/subscriptions","organizations_url":"https://api.github.com/users/tynyttie/orgs","repos_url":"https://api.github.com/users/tynyttie/repos","events_url":"https://api.github.com/users/tynyttie/events{/privacy}","received_events_url":"https://api.github.com/users/tynyttie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T17:31:38Z","updated_at":"2020-09-18T17:31:38Z","author_association":"CONTRIBUTOR","body":"I will look at it.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/694993657/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/695053928","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-695053928","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":695053928,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NTA1MzkyOA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-18T19:48:02Z","updated_at":"2020-09-18T19:48:02Z","author_association":"MEMBER","body":"Thanks, that helps a lot.\r\n\r\n> 16:51:02,398 - WARN loadTablet message from a master that does not hold the master lock\r\n\r\nHmm. Did a master get into a bad state first and fail over to a secondary? This seems weird. I wonder if the master was having issues also.\r\n\r\n> 19:18:01,855 - vfs.AccumuloReloadingVFSClassLoader ERROR: Invalid URI escape sequence\r\n\r\nWhat's this? This looks like it was triggered by a bad VFS classloader configuration. Maybe that'd be a good place to guard against. It'd be very hard to protect code against a bad classloader... because it could be doing bad things anywhere. But, it should be possible to protect the classloader from bad configuration / user error.\r\n\r\n> 16:53:22,105 - ERROR: memory manager failed null.\r\n> 16:53:22,105 - First memory manager failed.\r\n\r\nI don't recognize either of these two messages, and cannot find anything in the 1.9.3 code that looks like these messages. Are you sure you aren't seeing this error in some fork of Accumulo with custom code in these areas?\r\n\r\n> ```\r\n> [time] [tserver.TableServerResourceManager] TabletServerResourceManager ERROR: Memory manager failed null\r\n> java.lang.NullPointerException\r\n>     at org.apache.accumulo.core.client.impl.Tables.exists(Tables.java:148)\r\n>     at org.apache.accumulo.server.tabletserver.LargestFirstMemoryManager.tableExists(LargestFirstMemoryManager.java:153)\r\n> ```\r\n\r\nThis certainly looks like ZooKeeper returned null for the list of children on that entry. However, I can see no way that would be possible unless the ZooKeeper client threads were somehow also in a bad state. If that's the case, then while you saw this error occur in the memory manager... it could actually occur pretty much anywhere. I wonder: were the ZooKeeper jars being loaded via the reloading VFS classloader? If so, that might be a ready explanation for how the ZooKeeper code failed here as a consequence of a bug or failure condition in that classloader, and indicate that the underlying issue is that classloader, and that this stack trace might be a red herring.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/695053928/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696159392","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696159392","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696159392,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE1OTM5Mg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T14:39:39Z","updated_at":"2020-09-21T14:39:39Z","author_association":"CONTRIBUTOR","body":"The errors listed in the summary are my summary descriptions - the actual errors where in the stack trace.  \r\n\r\nThe Invalid URI error occurred hours after the memory manager failed, so it does not seem to indicate that would be the trigger.\r\n\r\nI do not know if the master lock / fail over is common to each occurrence - I noted it here in case it was significant, but I cannot say it was common.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696159392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696160463","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696160463","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696160463,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE2MDQ2Mw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T14:41:21Z","updated_at":"2020-09-21T14:41:21Z","author_association":"CONTRIBUTOR","body":"Zookeeper \"should\" not be reloading - I believe the jar that changes are custom iterators.  ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696160463/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696180404","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696180404","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696180404,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE4MDQwNA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T15:14:07Z","updated_at":"2020-09-21T15:14:07Z","author_association":"MEMBER","body":"> The errors listed in the summary are my summary descriptions - the actual errors where in the stack trace.\r\n\r\nSomehow my grep failed me. I see the message now in `TabletServerResourceManager`. :smiley_cat:\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696180404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696184454","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696184454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696184454,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE4NDQ1NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T15:20:31Z","updated_at":"2020-09-21T15:20:31Z","author_association":"CONTRIBUTOR","body":"The `WARN loadTablet message from a master that does not hold the master lock` does not seem common with occurrences of this situation. At least for the other occurrence that I have logs for, the error does not appear to be in the log.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696184454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696185641","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696185641","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696185641,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjE4NTY0MQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T15:22:26Z","updated_at":"2020-09-21T15:22:46Z","author_association":"MEMBER","body":"Is the VFS reloading common (with these kinds of errors)?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696185641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696323167","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696323167","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696323167,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjMyMzE2Nw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T19:27:48Z","updated_at":"2020-09-21T19:27:48Z","author_association":"CONTRIBUTOR","body":"Yes - each time the dynamic classloader starts rebuilding continuously.  After a time, the memory manager then starts throwing the null pointer.\r\n\r\nAnother thing pointer out today, sometimes the path passed to the classloader is invalid, I've found cases where its truncated, or has \"invalid characters\", its been plus signs, exclamation points and pound signs -  however, in the most recent case, none of the invalid paths show up until well after the reloaded death-cycle has started.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696323167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696328716","html_url":"https://github.com/apache/accumulo/pull/1676#issuecomment-696328716","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1676","id":696328716,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjMyODcxNg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T19:38:13Z","updated_at":"2020-09-21T19:38:13Z","author_association":"CONTRIBUTOR","body":"If you run `mvn clean verify javadoc:javadoc -DskipTests` that will execute most of the qa checks locally.  For example the file https://github.com/apache/accumulo/pull/1676/files#diff-e09bb0e400bc6c61f3735dce25aebc78 is missing the apache licence and the RAT checker will catch that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696328716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696407230","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696407230","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696407230,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQwNzIzMA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T22:14:57Z","updated_at":"2020-09-21T22:14:57Z","author_association":"MEMBER","body":"I'm pretty confident in saying that I don't think this is an Accumulo memory manager bug at all. Perhaps this is a hardware bug (it seems like some sort of memory/storage corruption).\r\n\r\nPerhaps it can be mitigated within the classloader, through detection of rapid change events? However, given the direction we're headed regarding the classloader changes (see mailing list for discussion about that), I'm not sure what changes to the existing classloader, if any, would be worth it at this time.\r\n\r\nRelated issue: we should really stop trying to catch `Throwable`... and limit ourselves to catching `Exception`, at most (preferably more narrow than that, if possible). In this code, and in lots of other places, it looks like we could have caught a `Throwable` (which includes `Error`s), assumed we could handle it, and possibly only logged (or failed to log) and moved on, when in fact, we have no chance of recovery (such as the case with `Error`s like `OutOfMemoryError`). According [to Oracle's troubleshooting guide](https://docs.oracle.com/javase/8/docs/technotes/guides/troubleshoot/memleaks002.html), this may be thrown when there's not enough native memory to load a class.... which is a situation that seems like it could cause the reloading behavior you saw, as well as other memory corruption issues, if we didn't just exit immediately and instead try to \"handle\" it and continue after hitting an `OutOfMemoryError`.\r\n\r\nWere there low-memory issues on the machine(s) where you saw this occur?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696407230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696422426","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696422426","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696422426,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQyMjQyNg==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T22:57:09Z","updated_at":"2020-09-21T22:57:09Z","author_association":"CONTRIBUTOR","body":"Looking at the log messages for server.GarbageCollectionLogger the collection times for ConcurrentMarkAndSweep are 0.11 and its reporting plenty of free memory.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696422426/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696434005","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696434005","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696434005,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQzNDAwNQ==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-21T23:30:23Z","updated_at":"2020-09-21T23:30:23Z","author_association":"CONTRIBUTOR","body":"Overall, there may be a difference in philosophy or focus.  I do not disagree with the premises of anything that you wrote - except I think I'm coming at it from a different angle.\r\n\r\nI'm aware of the classloader rework - that's one reason I was less focused on the \"how it got that way\" and am trying to address \"no matter how we got here, can we at least stop writing corrupt files\".\r\n\r\nWhatever the root cause, we should try to protect ourselves, and if we can't recover, then at least stop from corrupting data.  It seems very likely as this has unfolded that things are pointing to something external to Accumulo. But, I think its a bug that Accumulo keeps working (and working incorrectly).  It should be a given that the hardware works - but it is impossible to provide that guarantee - things go wrong.\r\n\r\nI agree that catching Throwable may not always be appropriate - in this case it is not - so, for this one case, is there an acceptable solution?  I've proposed one way.  \r\n\r\nA second, and more general way could be to leverage `Thread.UncaughtExceptionHandler` - using that, the tserver could create the threads and assign a handler that would do essentially the same thing - stop the tserver, either by deleting the lock or whatever the preferred mechanism is, if the underlying \"critical\" thread dies.  The we don't need to guard against unexpected exceptions - we let them kill the thread - and then decide to either kill the tserver or maybe spawn a new thread - if that could be determined to be appropriate and safe.  \r\n\r\n1) So, in general - for cases where we are catching `Throwable ` and that is causing issues, - would it be better if we stopped the tserver?\r\n\r\n2) If it is determined that we want to stop, is deleting the lock acceptable, or is there a preferred, alternate method.\r\n\r\nWhile the general issue of catching and swallowing Throwable is a bigger issue - for this one case where we can identify a case that this is not appropriate - can we fix that and then examine the larger issue as time allows or when other cases are identified?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696434005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696490968","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696490968","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696490968,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQ5MDk2OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T03:34:32Z","updated_at":"2020-09-22T03:34:32Z","author_association":"MEMBER","body":"> Overall, there may be a difference in philosophy or focus. I do not disagree with the premises of anything that you wrote - except I think I'm coming at it from a different angle.\r\n\r\nYour approach just feels to me like trying to protect against sun damage by applying sunscreen to burnt areas as they occur... rather than taking the time to set up an umbrella to stop the underlying cause.\r\n\r\n> 1. So, in general - for cases where we are catching `Throwable ` and that is causing issues, - would it be better if we stopped the tserver?\r\n\r\nYes, I think we should stop the tserver. We should let `Error` fall through and only catch regular `Throwable`s (`Exception`s), and we should set up an uncaught exception handler on all threads to and terminate if we see anything fall through, as we should write our code protectively so that this never happens unless there's an unrecoverable error.\r\n\r\n> 2. If it is determined that we want to stop, is deleting the lock acceptable, or is there a preferred, alternate method.\r\n\r\nI don't see much value in trying to remove the ZK lock. Leaving the tserver up long enough to try to connect to ZK is likely to leave it running long enough to do more harm than good, even if it works... which it may not. Remember, the failure scenario in the stack trace above showed ZK returning something that should have been impossible. If ZK is doing impossible things, what are the chances it's healthy enough to delete the lock? Not good, I think, and not worth the risk.\r\n\r\nI think it'd be better for the tserver to just die, and the lock to be released after it expires, as designed, and the master to reassign tablets after that. This is less code complexity, and won't leave the tserver running to do damage.\r\n\r\n> While the general issue of catching and swallowing Throwable is a bigger issue - for this one case where we can identify a case that this is not appropriate - can we fix that and then examine the larger issue as time allows or when other cases are identified?\r\n\r\nI don't see it as a tenable approach to chase these down one a time. The sunburn can occur anywhere. We should be setting up the umbrella, rather than patching with sunscreen after each burn.\r\n\r\nAlong with the above approaches for dealing with `Throwable`, I think people should understand that VFS class reloading, especially over a network from HDFS, is *not* a reliable method for deploying their code, and it has never quite worked reliably.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696490968/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696498232","html_url":"https://github.com/apache/accumulo/pull/1711#issuecomment-696498232","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1711","id":696498232,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjQ5ODIzMg==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T04:09:40Z","updated_at":"2020-09-22T04:09:40Z","author_association":"MEMBER","body":"All ITs are passing with this change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696498232/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696743454","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696743454","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696743454,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njc0MzQ1NA==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T14:04:07Z","updated_at":"2020-09-22T14:04:07Z","author_association":"CONTRIBUTOR","body":"Is there any recommendation on how to kill the tserver?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696743454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696755414","html_url":"https://github.com/apache/accumulo/issues/1689#issuecomment-696755414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1689","id":696755414,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njc1NTQxNA==","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T14:23:09Z","updated_at":"2020-09-22T14:23:09Z","author_association":"CONTRIBUTOR","body":"[1] is what is invoked when the TabletServer loses its lock. I think we\nshould create three issues for this:\n\n1. Remove / Replace the catching of Throwable in the code base\n2. Addition of [1] in server components that handle the case where\nexceptions are thrown in critical threads\n3. A solution to this particular problem, which may involve a little of\nboth, but can be easily backported to 1.10.\n\n[1]\nhttps://github.com/apache/accumulo/blob/530e3dec5361244118857789054e12a53d96d34b/server/tserver/src/main/java/org/apache/accumulo/tserver/TabletServer.java#L651\n[2]\nhttps://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Thread.UncaughtExceptionHandler.html\n\nOn Tue, Sep 22, 2020 at 10:04 AM EdColeman <notifications@github.com> wrote:\n\n> Is there any recommendation on how to kill the tserver?\n>\n> \n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/accumulo/issues/1689#issuecomment-696743454>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AAEKUZ5DIDTFD4CQ6EVK4Q3SHCVGTANCNFSM4QFKORWQ>\n> .\n>\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696755414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696757627","html_url":"https://github.com/apache/accumulo/pull/1709#issuecomment-696757627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1709","id":696757627,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njc1NzYyNw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T14:26:45Z","updated_at":"2020-09-22T14:26:45Z","author_association":"CONTRIBUTOR","body":"Closing this and will explore suggests from @dlmarion w.r.t. UnexpectedException handler in https://github.com/apache/accumulo/issues/1689","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696757627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696794340","html_url":"https://github.com/apache/accumulo/pull/1670#issuecomment-696794340","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1670","id":696794340,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njc5NDM0MA==","user":{"login":"cradal","id":20303105,"node_id":"MDQ6VXNlcjIwMzAzMTA1","avatar_url":"https://avatars.githubusercontent.com/u/20303105?v=4","gravatar_id":"","url":"https://api.github.com/users/cradal","html_url":"https://github.com/cradal","followers_url":"https://api.github.com/users/cradal/followers","following_url":"https://api.github.com/users/cradal/following{/other_user}","gists_url":"https://api.github.com/users/cradal/gists{/gist_id}","starred_url":"https://api.github.com/users/cradal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cradal/subscriptions","organizations_url":"https://api.github.com/users/cradal/orgs","repos_url":"https://api.github.com/users/cradal/repos","events_url":"https://api.github.com/users/cradal/events{/privacy}","received_events_url":"https://api.github.com/users/cradal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T15:25:22Z","updated_at":"2020-09-22T15:25:22Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Just a reminder that this PR is still available for review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696794340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696794553","html_url":"https://github.com/apache/accumulo/pull/1651#issuecomment-696794553","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1651","id":696794553,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njc5NDU1Mw==","user":{"login":"cradal","id":20303105,"node_id":"MDQ6VXNlcjIwMzAzMTA1","avatar_url":"https://avatars.githubusercontent.com/u/20303105?v=4","gravatar_id":"","url":"https://api.github.com/users/cradal","html_url":"https://github.com/cradal","followers_url":"https://api.github.com/users/cradal/followers","following_url":"https://api.github.com/users/cradal/following{/other_user}","gists_url":"https://api.github.com/users/cradal/gists{/gist_id}","starred_url":"https://api.github.com/users/cradal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cradal/subscriptions","organizations_url":"https://api.github.com/users/cradal/orgs","repos_url":"https://api.github.com/users/cradal/repos","events_url":"https://api.github.com/users/cradal/events{/privacy}","received_events_url":"https://api.github.com/users/cradal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T15:25:43Z","updated_at":"2020-09-22T15:25:43Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Just a reminder that this PR is still available for review.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696794553/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696837821","html_url":"https://github.com/apache/accumulo/issues/1631#issuecomment-696837821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1631","id":696837821,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjgzNzgyMQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T16:35:30Z","updated_at":"2020-09-22T16:35:30Z","author_association":"MEMBER","body":"I edited the original post to link to the JIRA issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696837821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696887705","html_url":"https://github.com/apache/accumulo/issues/1695#issuecomment-696887705","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1695","id":696887705,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njg4NzcwNQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T18:04:34Z","updated_at":"2020-09-22T18:04:34Z","author_association":"MEMBER","body":"@karthick-rn Any progress on this bug? No rush. Just curious.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696887705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696888770","html_url":"https://github.com/apache/accumulo/issues/1696#issuecomment-696888770","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1696","id":696888770,"node_id":"MDEyOklzc3VlQ29tbWVudDY5Njg4ODc3MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T18:06:27Z","updated_at":"2020-09-22T18:06:27Z","author_association":"MEMBER","body":"I think it's somewhat expected that the software will misbehave if the user sets the class path incorrectly by placing incompatible jars on it. So, I'm inclined to close this. Please comment further, or re-open if you think there is something more that can or should be done for this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696888770/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696930091","html_url":"https://github.com/apache/accumulo/issues/1695#issuecomment-696930091","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1695","id":696930091,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NjkzMDA5MQ==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-22T19:24:03Z","updated_at":"2020-09-22T19:24:03Z","author_association":"CONTRIBUTOR","body":"@ctubbsii Yes, this is on track in-fact I'm currently testing the fix that @keith-turner & I discussed few weeks ago. As we suspected, the issue is related to jcommander update. The previous version of jcommander(v1.48) seem to ignore empty arguments, this behaviour has been changed through https://github.com/cbeust/jcommander/pull/311 and jc no longer ignores empty arguments. I will PR this one soon. \r\nAlso, I'm working on updating `$ACCUMULO_HOME/bin/tool.sh` script to use `zookeeper-*.jar` files from `$ZOOKEEPER_HOME/lib` directory for ZK versions >= 3.5. This is another issue that we ran into whilst testing 1.10 RC2, at the time we manually copied the jar files out of the `/lib` directory. I'll create a separate issue for this and a separate PR. Also, I'll verify the `accumulo-testing` suite as well. Thanks","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/696930091/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697477864","html_url":"https://github.com/apache/accumulo/issues/1084#issuecomment-697477864","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1084","id":697477864,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzQ3Nzg2NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T14:48:02Z","updated_at":"2020-09-23T14:48:02Z","author_association":"CONTRIBUTOR","body":"> @milleruntime What's the status of this?\r\n\r\nA lot has changed in a year so I will have to re-run the ITs in Standalone mode.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697477864/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697614709","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-697614709","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":697614709,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzYxNDcwOQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T16:10:38Z","updated_at":"2020-09-23T16:10:38Z","author_association":"MEMBER","body":"This issue seems relates to https://github.com/apache/accumulo/issues/1695#issuecomment-696930091","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697614709/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697713348","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-697713348","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":697713348,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzcxMzM0OA==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T17:08:34Z","updated_at":"2020-09-23T17:08:34Z","author_association":"CONTRIBUTOR","body":"#1695 is mainly to address the empty arguments. I thought I'll create a separate issue to address the ZK directory problem. Let me know if I can club both the work in a single PR? If so, we can close this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697713348/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697938859","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-697938859","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":697938859,"node_id":"MDEyOklzc3VlQ29tbWVudDY5NzkzODg1OQ==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-23T19:56:01Z","updated_at":"2020-09-23T19:56:01Z","author_association":"MEMBER","body":"> #1695 is mainly to address the empty arguments. I thought I'll create a separate issue to address the ZK directory problem. Let me know if I can club both the work in a single PR? If so, we can close this issue.\r\n\r\nA single PR can close both issues. These are both pretty small changes, probably. I only linked to the other issue, for easy reference to related issues.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/697938859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698295516","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-698295516","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":698295516,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODI5NTUxNg==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T11:52:54Z","updated_at":"2020-09-24T11:52:54Z","author_association":"CONTRIBUTOR","body":"> > #1695 is mainly to address the empty arguments. I thought I'll create a separate issue to address the ZK directory problem. Let me know if I can club both the work in a single PR? If so, we can close this issue.\r\n> \r\n> A single PR can close both issues. These are both pretty small changes, probably. I only linked to the other issue, for easy reference to related issues.\r\n\r\nOk, makes sense. I'll close this issue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698295516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698314481","html_url":"https://github.com/apache/accumulo/issues/1084#issuecomment-698314481","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1084","id":698314481,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODMxNDQ4MQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T12:33:21Z","updated_at":"2020-09-24T12:33:21Z","author_association":"CONTRIBUTOR","body":"Based on commit 530e3dec5, I ran the Standalone ITs using Uno with the 32GX4 profile on a single m5d.2xlarge EC2 instance.  Saw the following ITs fail:\r\n\r\n- org.apache.accumulo.test.functional.ScanIteratorIT\r\n- org.apache.accumulo.test.functional.ReadWriteIT\r\n- org.apache.accumulo.test.functional.ScanIdIT\r\n- org.apache.accumulo.test.functional.ConcurrencyIT\r\n- org.apache.accumulo.test.functional.RestartStressIT\r\n- org.apache.accumulo.test.functional.FateConcurrencyIT\r\n- org.apache.accumulo.test.functional.MasterFailoverIT\r\n- org.apache.accumulo.test.functional.SessionBlockVerifyIT\r\n- org.apache.accumulo.test.functional.TimeoutIT\r\n- org.apache.accumulo.test.functional.WriteAheadLogIT\r\n- org.apache.accumulo.test.functional.CompactionIT\r\n- org.apache.accumulo.test.functional.WriteAheadLogEncryptedIT\r\n- org.apache.accumulo.test.functional.MasterMetricsIT\r\n- org.apache.accumulo.test.functional.DeleteRowsIT\r\n- org.apache.accumulo.test.functional.SummaryIT\r\n- org.apache.accumulo.test.functional.BulkSplitOptimizationIT\r\n- org.apache.accumulo.test.functional.ConstraintIT\r\n- org.apache.accumulo.test.functional.BigRootTabletIT\r\n- org.apache.accumulo.test.functional.DeleteIT\r\n- org.apache.accumulo.test.functional.TabletStateChangeIteratorIT\r\n- org.apache.accumulo.test.functional.ScannerIT\r\n- org.apache.accumulo.test.functional.StartIT\r\n- org.apache.accumulo.test.functional.RestartIT\r\n- org.apache.accumulo.test.functional.ManyWriteAheadLogsIT\r\n- org.apache.accumulo.test.functional.BinaryStressIT\r\n- org.apache.accumulo.test.functional.DeleteRowsSplitIT\r\n- org.apache.accumulo.test.functional.LargeRowIT\r\n- org.apache.accumulo.test.CleanWalIT\r\n- org.apache.accumulo.test.ScanFlushWithTimeIT\r\n- org.apache.accumulo.test.RecoveryCompactionsAreFlushesIT\r\n- org.apache.accumulo.test.YieldScannersIT\r\n- org.apache.accumulo.test.BadDeleteMarkersCreatedIT\r\n- org.apache.accumulo.test.SampleIT\r\n- org.apache.accumulo.test.TableOperationsIT\r\n- org.apache.accumulo.test.UserCompactionStrategyIT\r\n- org.apache.accumulo.test.IteratorEnvIT\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698314481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698382970","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-698382970","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":698382970,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODM4Mjk3MA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T14:31:38Z","updated_at":"2020-09-24T14:31:38Z","author_association":"MEMBER","body":"@karthick-rn It's okay if this is open. What I meant was: when the PR is made, it can address two issues, and it can be closed when that PR is merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698382970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698394686","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-698394686","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":698394686,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODM5NDY4Ng==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T14:50:20Z","updated_at":"2020-09-24T14:50:20Z","author_association":"MEMBER","body":"Is it possible these tests are no longer suitable for Standalone mode? I have not seen failures during a regular build. Perhaps they merely need to have their JUnit Category annotation updated?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698394686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698397425","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-698397425","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":698397425,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODM5NzQyNQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T14:54:35Z","updated_at":"2020-09-24T14:54:35Z","author_association":"CONTRIBUTOR","body":"> Is it possible these tests are no longer suitable for Standalone mode? I have not seen failures during a regular build. Perhaps they merely need to have their JUnit Category annotation updated?\r\n\r\nYes that's definitely possible.  I was thinking that looking at all the ITs now failing in #1084.  It looks like the contents of ```AccumuloClusterHarness``` are mainly for dealing with a Standalone cluster.  Perhaps a lot of the ITs could extend ```AccumuloITBase``` instead.  This may be a lot of work though.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698397425/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698560627","html_url":"https://github.com/apache/accumulo/issues/1574#issuecomment-698560627","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1574","id":698560627,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODU2MDYyNw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-24T20:04:33Z","updated_at":"2020-09-24T20:04:33Z","author_association":"MEMBER","body":"I recently got a matrix build of all our ITs running in GitHub Actions (on demand), and this IT is our only failure on my test run. It's also routinely failing on my laptop also. It might just be resource-constrained, because it rarely fails in my Jenkins instance, which is somewhat beefier than I imagine the GitHub Actions runners are, and certainly more so than my old laptop.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698560627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698679765","html_url":"https://github.com/apache/accumulo/issues/1574#issuecomment-698679765","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1574","id":698679765,"node_id":"MDEyOklzc3VlQ29tbWVudDY5ODY3OTc2NQ==","user":{"login":"arvindshmicrosoft","id":16342666,"node_id":"MDQ6VXNlcjE2MzQyNjY2","avatar_url":"https://avatars.githubusercontent.com/u/16342666?v=4","gravatar_id":"","url":"https://api.github.com/users/arvindshmicrosoft","html_url":"https://github.com/arvindshmicrosoft","followers_url":"https://api.github.com/users/arvindshmicrosoft/followers","following_url":"https://api.github.com/users/arvindshmicrosoft/following{/other_user}","gists_url":"https://api.github.com/users/arvindshmicrosoft/gists{/gist_id}","starred_url":"https://api.github.com/users/arvindshmicrosoft/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arvindshmicrosoft/subscriptions","organizations_url":"https://api.github.com/users/arvindshmicrosoft/orgs","repos_url":"https://api.github.com/users/arvindshmicrosoft/repos","events_url":"https://api.github.com/users/arvindshmicrosoft/events{/privacy}","received_events_url":"https://api.github.com/users/arvindshmicrosoft/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T02:07:23Z","updated_at":"2020-09-25T02:07:23Z","author_association":"MEMBER","body":"Ack. I will prioritize this once I get back to work next week. I was able to get a repro on a VM a while ago, and then unfortunately I just was sidetracked with other stuff.\r\n\r\nBTW, you probably already found [this info](https://docs.github.com/en/actions/reference/specifications-for-github-hosted-runners#cloud-hosts-for-github-hosted-runners) on the hosted runners, but in case you did not, GitHub runners have 2 vCPUs and 7 GiB of RAM.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/698679765/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699086452","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-699086452","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":699086452,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA4NjQ1Mg==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T18:31:40Z","updated_at":"2020-09-25T18:31:40Z","author_association":"CONTRIBUTOR","body":"I don't think its feasible to change the parent class of these ITs away from ```AccumuloClusterHarness```.  There is a lot of ```MiniAccumuloCluster``` baked into that type, everything is based on whether its a MINI or STANDALONE cluster type.  We may be able to just override the cluster type to MINI for ITs that we know won't run on a Standalone cluster.  I will look into that.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699086452/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699089984","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-699089984","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":699089984,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTA4OTk4NA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T18:39:25Z","updated_at":"2020-09-25T18:39:25Z","author_association":"CONTRIBUTOR","body":"Looks like we already have that power!  \r\nhttps://github.com/apache/accumulo/blob/618ba7a9f88342ea7c8d692ce19df34d88bf07c8/test/src/main/java/org/apache/accumulo/harness/AccumuloClusterHarness.java#L366","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699089984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699129586","html_url":"https://github.com/apache/accumulo/pull/1714#issuecomment-699129586","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1714","id":699129586,"node_id":"MDEyOklzc3VlQ29tbWVudDY5OTEyOTU4Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-25T20:06:05Z","updated_at":"2020-09-25T20:06:05Z","author_association":"CONTRIBUTOR","body":"FYI I accidentally pushed my branch to the upstream repo, which is what this PR is based on.  I don't know how to change the branch on the PR.  I can close this PR and open another against the branch in my fork but I don't think there will be much feedback for this change.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/699129586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700039843","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-700039843","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":700039843,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDAzOTg0Mw==","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T14:22:40Z","updated_at":"2020-09-28T14:22:40Z","author_association":"CONTRIBUTOR","body":"Some of those tests - MasterMetricsIT may be failing if the stand-alone is not configured to generate metrics (metrics prop file on the class path) ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700039843/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700231114","html_url":"https://github.com/apache/accumulo/issues/1084#issuecomment-700231114","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1084","id":700231114,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDIzMTExNA==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T19:19:48Z","updated_at":"2020-09-29T15:02:34Z","author_association":"CONTRIBUTOR","body":"Updated list after merging #1713 and copying the accumulo-test jar into lib directory of the running accumulo 21c7a0b9fea405b834f3c79b5df7de8fc80e184d. \r\n\r\n### Timeout failures\r\norg.apache.accumulo.test.functional.SessionBlockVerifyIT\r\norg.apache.accumulo.test.functional.ScanIteratorIT\r\norg.apache.accumulo.test.functional.ReadWriteIT\r\norg.apache.accumulo.test.functional.BulkSplitOptimizationIT\r\norg.apache.accumulo.test.functional.DeleteRowsSplitIT\r\norg.apache.accumulo.test.RecoveryCompactionsAreFlushesIT\r\n\r\n### Errors\r\norg.apache.accumulo.test.functional.LargeRowIT\r\n```\r\njava.lang.Exception: # of table splits points out of range, #splits=0 table=LargeRowIT_run0 min=4 max=36\r\n        at org.apache.accumulo.test.functional.FunctionalTestUtils.checkSplits(FunctionalTestUtils.java:120)\r\n        at org.apache.accumulo.test.functional.LargeRowIT.test1(LargeRowIT.java:151)\r\n        at org.apache.accumulo.test.functional.LargeRowIT.run(LargeRowIT.java:137)\r\n```\r\norg.apache.accumulo.test.functional.MasterMetricsIT\r\n```\r\njava.lang.IllegalStateException: File source update not received after 20 tries in 100 sec\r\n        at org.apache.accumulo.test.metrics.MetricsFileTailer.waitForUpdate(MetricsFileTailer.java:350)\r\n        at org.apache.accumulo.test.functional.MasterMetricsIT.compactionMetrics(MasterMetricsIT.java:147)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700231114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700246669","html_url":"https://github.com/apache/accumulo/issues/1713#issuecomment-700246669","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1713","id":700246669,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI0NjY2OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T19:52:21Z","updated_at":"2020-09-28T19:52:21Z","author_association":"CONTRIBUTOR","body":"I discovered that a lot of the ITs that were failing due to missing classes will run in standalone if you simply copy the test jar into the accumulo lib folder of the running instance.  This may allow some of these ITs to run in standalone mode.  I will have to re-run them with the test jar present. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700246669/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700291888","html_url":"https://github.com/apache/accumulo/pull/1716#issuecomment-700291888","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1716","id":700291888,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDI5MTg4OA==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-28T21:30:35Z","updated_at":"2020-09-28T21:31:06Z","author_association":"MEMBER","body":"Merged to main branch in b3cc58a5a3 (did not change anything, since tool.sh is gone there)","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700291888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700399333","html_url":"https://github.com/apache/accumulo/issues/1712#issuecomment-700399333","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1712","id":700399333,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDM5OTMzMw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T03:11:05Z","updated_at":"2020-09-29T03:11:05Z","author_association":"MEMBER","body":"I believe this is fixed by #1716 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700399333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700791682","html_url":"https://github.com/apache/accumulo/pull/1717#issuecomment-700791682","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1717","id":700791682,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDc5MTY4Mg==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T15:40:28Z","updated_at":"2020-09-29T15:40:28Z","author_association":"CONTRIBUTOR","body":"> ```shell\r\n> AUTH_OPT=()\r\n> [[ -n $VERIFY_AUTHS ]] && AUTH_OPT=('--auths' \"$VERIFY_AUTHS\")\r\n> \r\n> SCAN_OPT=('--offline')\r\n> [[ $SCAN_OFFLINE == 'false' ]] && SCAN_OPT=()\r\n> \r\n> \"$ACCUMULO_HOME/bin/tool.sh\" \"$SERVER_LIBJAR\" org.apache.accumulo.test.continuous.ContinuousVerify -Dmapreduce.job.reduce.slowstart.completedmaps=0.95 -libjars \"$SERVER_LIBJAR\" \"${AUTH_OPT[@]}\" -i \"$INSTANCE_NAME\" -z \"$ZOO_KEEPERS\" -u \"$USER\" -p \"$PASS\" --table \"$TABLE\" --output \"$VERIFY_OUT\" --maxMappers \"$VERIFY_MAX_MAPS\" --reducers \"$VERIFY_REDUCERS\" \"${SCAN_OPT[@]}\"\r\n> ```\r\n\r\n@ctubbsii This is neat & thanks for sharing. Originally I intended to fix this without removing the double quotes but then ran into several issues. Also never thought of using an array to overcome this problem. This is great. I'll change the description of the PR and push an update soon. \r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700791682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700814713","html_url":"https://github.com/apache/accumulo/pull/1670#issuecomment-700814713","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1670","id":700814713,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDgxNDcxMw==","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T16:17:22Z","updated_at":"2020-09-29T16:17:22Z","author_association":"MEMBER","body":"@keith-turner If you have a chance, would you mind taking a look at this, to see if it's reasonable?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700814713/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700870279","html_url":"https://github.com/apache/accumulo/issues/1719#issuecomment-700870279","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1719","id":700870279,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg3MDI3OQ==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T17:37:45Z","updated_at":"2020-09-29T17:37:45Z","author_association":"CONTRIBUTOR","body":"I did some research on the old monitor and it seems like the links that aren't working in the summary Table column were used to filter the Details table below.  The Table column links in the Details table has changed, it also used to filter the Details table where now it will take you to the Table page.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700870279/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700899266","html_url":"https://github.com/apache/accumulo/issues/1719#issuecomment-700899266","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1719","id":700899266,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDg5OTI2Ng==","user":{"login":"milleruntime","id":11872539,"node_id":"MDQ6VXNlcjExODcyNTM5","avatar_url":"https://avatars.githubusercontent.com/u/11872539?v=4","gravatar_id":"","url":"https://api.github.com/users/milleruntime","html_url":"https://github.com/milleruntime","followers_url":"https://api.github.com/users/milleruntime/followers","following_url":"https://api.github.com/users/milleruntime/following{/other_user}","gists_url":"https://api.github.com/users/milleruntime/gists{/gist_id}","starred_url":"https://api.github.com/users/milleruntime/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/milleruntime/subscriptions","organizations_url":"https://api.github.com/users/milleruntime/orgs","repos_url":"https://api.github.com/users/milleruntime/repos","events_url":"https://api.github.com/users/milleruntime/events{/privacy}","received_events_url":"https://api.github.com/users/milleruntime/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T18:28:42Z","updated_at":"2020-09-29T18:28:42Z","author_association":"CONTRIBUTOR","body":"I am thinking we should update the tables on the problems page to use the Datatables JavaScript.  It will be consistent with the other pages, we get all the benefits of Datatables and then won't have to worry about links for filtering the tables.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700899266/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700955341","html_url":"https://github.com/apache/accumulo/pull/1717#issuecomment-700955341","issue_url":"https://api.github.com/repos/apache/accumulo/issues/1717","id":700955341,"node_id":"MDEyOklzc3VlQ29tbWVudDcwMDk1NTM0MQ==","user":{"login":"karthick-rn","id":7976585,"node_id":"MDQ6VXNlcjc5NzY1ODU=","avatar_url":"https://avatars.githubusercontent.com/u/7976585?v=4","gravatar_id":"","url":"https://api.github.com/users/karthick-rn","html_url":"https://github.com/karthick-rn","followers_url":"https://api.github.com/users/karthick-rn/followers","following_url":"https://api.github.com/users/karthick-rn/following{/other_user}","gists_url":"https://api.github.com/users/karthick-rn/gists{/gist_id}","starred_url":"https://api.github.com/users/karthick-rn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/karthick-rn/subscriptions","organizations_url":"https://api.github.com/users/karthick-rn/orgs","repos_url":"https://api.github.com/users/karthick-rn/repos","events_url":"https://api.github.com/users/karthick-rn/events{/privacy}","received_events_url":"https://api.github.com/users/karthick-rn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-09-29T20:03:43Z","updated_at":"2020-09-29T20:03:43Z","author_association":"CONTRIBUTOR","body":"> Were you able to verify that this change fixed the issue and works with, and without, the auth opts or scan opts set?\r\n\r\n@ctubbsii Yes, I tested the change with & without the optional parameters set, in both cases the continuous verify script did not throw the reported error.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/700955341/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]