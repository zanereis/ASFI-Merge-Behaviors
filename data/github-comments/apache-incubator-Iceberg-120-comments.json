[{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949248636","html_url":"https://github.com/apache/iceberg/issues/3346#issuecomment-949248636","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3346","id":949248636,"node_id":"IC_kwDOCW7NX844lGJ8","user":{"login":"cvasani","id":1733507,"node_id":"MDQ6VXNlcjE3MzM1MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1733507?v=4","gravatar_id":"","url":"https://api.github.com/users/cvasani","html_url":"https://github.com/cvasani","followers_url":"https://api.github.com/users/cvasani/followers","following_url":"https://api.github.com/users/cvasani/following{/other_user}","gists_url":"https://api.github.com/users/cvasani/gists{/gist_id}","starred_url":"https://api.github.com/users/cvasani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cvasani/subscriptions","organizations_url":"https://api.github.com/users/cvasani/orgs","repos_url":"https://api.github.com/users/cvasani/repos","events_url":"https://api.github.com/users/cvasani/events{/privacy}","received_events_url":"https://api.github.com/users/cvasani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T03:04:55Z","updated_at":"2021-10-22T03:04:55Z","author_association":"NONE","body":"Thanks to RussellSpitzer . Tested with spark 3.0 and its working fine. Closing an issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949248636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949327568","html_url":"https://github.com/apache/iceberg/pull/3234#issuecomment-949327568","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3234","id":949327568,"node_id":"IC_kwDOCW7NX844lZbQ","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T06:36:28Z","updated_at":"2021-10-22T06:36:28Z","author_association":"COLLABORATOR","body":"@samredai  that's a great idea to have the formatting. We have an issue (https://github.com/apache/iceberg/issues/3282) for that. I agree that we should have it ASAP.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949327568/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949341427","html_url":"https://github.com/apache/iceberg/pull/3350#issuecomment-949341427","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3350","id":949341427,"node_id":"IC_kwDOCW7NX844lczz","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T06:56:55Z","updated_at":"2021-10-22T06:56:55Z","author_association":"COLLABORATOR","body":"cc @rdblue @pdames @samredai ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949341427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949378517","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949378517","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949378517,"node_id":"IC_kwDOCW7NX844ll3V","user":{"login":"hzxiongyinke","id":75288351,"node_id":"MDQ6VXNlcjc1Mjg4MzUx","avatar_url":"https://avatars.githubusercontent.com/u/75288351?v=4","gravatar_id":"","url":"https://api.github.com/users/hzxiongyinke","html_url":"https://github.com/hzxiongyinke","followers_url":"https://api.github.com/users/hzxiongyinke/followers","following_url":"https://api.github.com/users/hzxiongyinke/following{/other_user}","gists_url":"https://api.github.com/users/hzxiongyinke/gists{/gist_id}","starred_url":"https://api.github.com/users/hzxiongyinke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzxiongyinke/subscriptions","organizations_url":"https://api.github.com/users/hzxiongyinke/orgs","repos_url":"https://api.github.com/users/hzxiongyinke/repos","events_url":"https://api.github.com/users/hzxiongyinke/events{/privacy}","received_events_url":"https://api.github.com/users/hzxiongyinke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T07:54:03Z","updated_at":"2021-10-22T07:54:03Z","author_association":"NONE","body":"We used hive-2.1.1 for iceberg-0.10.0 , have a problem with getcontantSummary for quey iceberg table data location,which put a lot of pressure on Namenode.  I'm not sure if I should do getcontantSummary on the iceberg table","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949378517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949396398","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949396398","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949396398,"node_id":"IC_kwDOCW7NX844lqOu","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T08:18:40Z","updated_at":"2021-10-22T11:07:11Z","author_association":"CONTRIBUTOR","body":"@hzxiongyinke: I have seen several serious issues with 2.1.1 unrelated to this, so you still might have other issues, even if this was fixed. Could you try 2.3.8/9 instead?\r\n\r\nWe tried the `InputEstimator` way, and it was not helping. We had to set the basic stats and had to move forward with https://issues.apache.org/jira/browse/HIVE-24928\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949396398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949398591","html_url":"https://github.com/apache/iceberg/issues/3325#issuecomment-949398591","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3325","id":949398591,"node_id":"IC_kwDOCW7NX844lqw_","user":{"login":"rajarshisarkar","id":4561678,"node_id":"MDQ6VXNlcjQ1NjE2Nzg=","avatar_url":"https://avatars.githubusercontent.com/u/4561678?v=4","gravatar_id":"","url":"https://api.github.com/users/rajarshisarkar","html_url":"https://github.com/rajarshisarkar","followers_url":"https://api.github.com/users/rajarshisarkar/followers","following_url":"https://api.github.com/users/rajarshisarkar/following{/other_user}","gists_url":"https://api.github.com/users/rajarshisarkar/gists{/gist_id}","starred_url":"https://api.github.com/users/rajarshisarkar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rajarshisarkar/subscriptions","organizations_url":"https://api.github.com/users/rajarshisarkar/orgs","repos_url":"https://api.github.com/users/rajarshisarkar/repos","events_url":"https://api.github.com/users/rajarshisarkar/events{/privacy}","received_events_url":"https://api.github.com/users/rajarshisarkar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T08:21:41Z","updated_at":"2021-10-22T08:29:23Z","author_association":"CONTRIBUTOR","body":"@jackye1995 It seems like glue doesn't support parameters for partition columns. I am getting the below exception:\r\n\r\n```\r\nCaused by: software.amazon.awssdk.services.glue.model.InvalidInputException: Parameters not supported for partition columns (Service: Glue, Status Code: 400, Request ID: 45ff45a7-bd7f-4063-9d2b-b12d22c2c999, Extended Request ID: null)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleErrorResponse(CombinedResponseHandler.java:123)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handleResponse(CombinedResponseHandler.java:79)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:59)\r\n\tat software.amazon.awssdk.core.internal.http.CombinedResponseHandler.handle(CombinedResponseHandler.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:40)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.HandleResponseStage.execute(HandleResponseStage.java:30)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:73)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptTimeoutTrackingStage.execute(ApiCallAttemptTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:77)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.TimeoutExceptionHandlingStage.execute(TimeoutExceptionHandlingStage.java:39)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:50)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallAttemptMetricCollectionStage.execute(ApiCallAttemptMetricCollectionStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:64)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:34)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56)\r\n\tat software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:48)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallMetricCollectionStage.execute(ApiCallMetricCollectionStage.java:31)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37)\r\n\tat software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26)\r\n\tat software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:193)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:133)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:159)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.lambda$execute$1(BaseSyncClientHandler.java:112)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.measureApiCallSuccess(BaseSyncClientHandler.java:167)\r\n\tat software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:94)\r\n\tat software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45)\r\n\tat software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:55)\r\n\tat software.amazon.awssdk.services.glue.DefaultGlueClient.createTable(DefaultGlueClient.java:2312)\r\n\tat org.apache.iceberg.aws.glue.GlueTableOperations.persistGlueTable(GlueTableOperations.java:198)\r\n\tat org.apache.iceberg.aws.glue.GlueTableOperations.doCommit(GlueTableOperations.java:114)\r\n\t... 63 more\r\n```\r\n\r\nWould this imply we can't store the following fields mentioned in the proposal (as they are partition column specific):\r\n- `iceberg.content`, if it is equal to `partition-field` name\r\n- `iceberg.partition.transform`, storing partition transform string for `partition-field`, such as `bucket[16]`\r\n- `iceberg.partition.field-id`, storing field ID of the partition field\r\n- `iceberg.partition.source-id`, storing source ID of the partition field","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949398591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949412896","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949412896","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949412896,"node_id":"IC_kwDOCW7NX844luQg","user":{"login":"hzxiongyinke","id":75288351,"node_id":"MDQ6VXNlcjc1Mjg4MzUx","avatar_url":"https://avatars.githubusercontent.com/u/75288351?v=4","gravatar_id":"","url":"https://api.github.com/users/hzxiongyinke","html_url":"https://github.com/hzxiongyinke","followers_url":"https://api.github.com/users/hzxiongyinke/followers","following_url":"https://api.github.com/users/hzxiongyinke/following{/other_user}","gists_url":"https://api.github.com/users/hzxiongyinke/gists{/gist_id}","starred_url":"https://api.github.com/users/hzxiongyinke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzxiongyinke/subscriptions","organizations_url":"https://api.github.com/users/hzxiongyinke/orgs","repos_url":"https://api.github.com/users/hzxiongyinke/repos","events_url":"https://api.github.com/users/hzxiongyinke/events{/privacy}","received_events_url":"https://api.github.com/users/hzxiongyinke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T08:41:13Z","updated_at":"2021-10-22T08:41:13Z","author_association":"NONE","body":"ok,I will it ,Thanks !","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949412896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949444313","html_url":"https://github.com/apache/iceberg/issues/3342#issuecomment-949444313","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3342","id":949444313,"node_id":"IC_kwDOCW7NX844l17Z","user":{"login":"ashoksri0","id":14317595,"node_id":"MDQ6VXNlcjE0MzE3NTk1","avatar_url":"https://avatars.githubusercontent.com/u/14317595?v=4","gravatar_id":"","url":"https://api.github.com/users/ashoksri0","html_url":"https://github.com/ashoksri0","followers_url":"https://api.github.com/users/ashoksri0/followers","following_url":"https://api.github.com/users/ashoksri0/following{/other_user}","gists_url":"https://api.github.com/users/ashoksri0/gists{/gist_id}","starred_url":"https://api.github.com/users/ashoksri0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashoksri0/subscriptions","organizations_url":"https://api.github.com/users/ashoksri0/orgs","repos_url":"https://api.github.com/users/ashoksri0/repos","events_url":"https://api.github.com/users/ashoksri0/events{/privacy}","received_events_url":"https://api.github.com/users/ashoksri0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T09:21:29Z","updated_at":"2021-10-22T09:21:29Z","author_association":"NONE","body":"can I use spark.sql() delete query to delete records from a table without spark server using standalone java code","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949444313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949478198","html_url":"https://github.com/apache/iceberg/issues/3342#issuecomment-949478198","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3342","id":949478198,"node_id":"IC_kwDOCW7NX844l-M2","user":{"login":"ismailsimsek","id":6005685,"node_id":"MDQ6VXNlcjYwMDU2ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6005685?v=4","gravatar_id":"","url":"https://api.github.com/users/ismailsimsek","html_url":"https://github.com/ismailsimsek","followers_url":"https://api.github.com/users/ismailsimsek/followers","following_url":"https://api.github.com/users/ismailsimsek/following{/other_user}","gists_url":"https://api.github.com/users/ismailsimsek/gists{/gist_id}","starred_url":"https://api.github.com/users/ismailsimsek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ismailsimsek/subscriptions","organizations_url":"https://api.github.com/users/ismailsimsek/orgs","repos_url":"https://api.github.com/users/ismailsimsek/repos","events_url":"https://api.github.com/users/ismailsimsek/events{/privacy}","received_events_url":"https://api.github.com/users/ismailsimsek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T10:05:53Z","updated_at":"2021-10-22T10:10:13Z","author_association":"CONTRIBUTOR","body":"yes, here you can find examples doing delete/update/merge with spark sql. only problem is using spark with `standalone java code`(local mode) means it will run on single node and it will not be as  performant as clustered spark.  in the example above it runs spark on local mode.\r\n\r\nhttps://iceberg.apache.org/spark-writes/#delete-from","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949478198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949525086","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949525086","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949525086,"node_id":"IC_kwDOCW7NX844mJpe","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T11:07:44Z","updated_at":"2021-10-22T11:07:44Z","author_association":"CONTRIBUTOR","body":"Also you can try to turn off the estimation by setting `set hive.stats.estimate=false` as a workaround in the meantime","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949525086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949532847","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949532847","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949532847,"node_id":"IC_kwDOCW7NX844mLiv","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T11:17:34Z","updated_at":"2021-10-22T11:17:34Z","author_association":"CONTRIBUTOR","body":"Sorry for the many short comments (not too much time today), but let me summarise:\r\n- We should double check everything which I am stating here for Hive 2.3.8/9, and 3.1.2 - We were working on Hive 4.0.0 when considered stats.\r\n- We found that the estimation causes issues for tables with plenty of files. If we turn off `hive.stats.estimate` then we do not end up listing the directories recursively, so that could fix the planning performance issue\r\n- We found that if the `hive.stats.autogather` is true, then the statistics are collected, but there was problem with the `rowDataSize`. We fixed this in HIVE-24928 using the Iceberg table statistics where we propagate the Iceberg statistics to use as Hive statistics.\r\n- For automatic Column statistics we need: HIVE-25276\r\n- We still has to consider other engines writing these tables, and we have to invalidate column statistics, if other engine is update the table. For this we created this change: HIVE-25286\r\n\r\nI hope this finally helps 😄 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949532847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949533586","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-949533586","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":949533586,"node_id":"IC_kwDOCW7NX844mLuS","user":{"login":"pvary","id":19705742,"node_id":"MDQ6VXNlcjE5NzA1NzQy","avatar_url":"https://avatars.githubusercontent.com/u/19705742?v=4","gravatar_id":"","url":"https://api.github.com/users/pvary","html_url":"https://github.com/pvary","followers_url":"https://api.github.com/users/pvary/followers","following_url":"https://api.github.com/users/pvary/following{/other_user}","gists_url":"https://api.github.com/users/pvary/gists{/gist_id}","starred_url":"https://api.github.com/users/pvary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pvary/subscriptions","organizations_url":"https://api.github.com/users/pvary/orgs","repos_url":"https://api.github.com/users/pvary/repos","events_url":"https://api.github.com/users/pvary/events{/privacy}","received_events_url":"https://api.github.com/users/pvary/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T11:18:33Z","updated_at":"2021-10-22T11:18:33Z","author_association":"CONTRIBUTOR","body":"Oh... and if implementing the Estimator helps with older Hive releases, then I am not against merging it!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949533586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949605346","html_url":"https://github.com/apache/iceberg/issues/3355#issuecomment-949605346","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3355","id":949605346,"node_id":"IC_kwDOCW7NX844mdPi","user":{"login":"ajantha-bhat","id":5889404,"node_id":"MDQ6VXNlcjU4ODk0MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/5889404?v=4","gravatar_id":"","url":"https://api.github.com/users/ajantha-bhat","html_url":"https://github.com/ajantha-bhat","followers_url":"https://api.github.com/users/ajantha-bhat/followers","following_url":"https://api.github.com/users/ajantha-bhat/following{/other_user}","gists_url":"https://api.github.com/users/ajantha-bhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ajantha-bhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ajantha-bhat/subscriptions","organizations_url":"https://api.github.com/users/ajantha-bhat/orgs","repos_url":"https://api.github.com/users/ajantha-bhat/repos","events_url":"https://api.github.com/users/ajantha-bhat/events{/privacy}","received_events_url":"https://api.github.com/users/ajantha-bhat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T12:55:18Z","updated_at":"2021-10-22T12:55:18Z","author_association":"MEMBER","body":"I will explore this in my free time. Please assign to me. \r\ncc: @RussellSpitzer ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949605346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949666608","html_url":"https://github.com/apache/iceberg/issues/3355#issuecomment-949666608","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3355","id":949666608,"node_id":"IC_kwDOCW7NX844msMw","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T14:08:48Z","updated_at":"2021-10-22T14:08:48Z","author_association":"MEMBER","body":"Great idea! I forgot we did this internally without the procedure code. So this will be a great addition!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949666608/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949728489","html_url":"https://github.com/apache/iceberg/pull/3350#issuecomment-949728489","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3350","id":949728489,"node_id":"IC_kwDOCW7NX844m7Tp","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:20:37Z","updated_at":"2021-10-22T15:20:37Z","author_association":"CONTRIBUTOR","body":"Thanks, @jun-he!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949728489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949729583","html_url":"https://github.com/apache/iceberg/pull/3317#issuecomment-949729583","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3317","id":949729583,"node_id":"IC_kwDOCW7NX844m7kv","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:21:52Z","updated_at":"2021-10-22T15:21:52Z","author_association":"MEMBER","body":"Looking good, running tests (and one little nit)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949729583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949730228","html_url":"https://github.com/apache/iceberg/issues/3346#issuecomment-949730228","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3346","id":949730228,"node_id":"IC_kwDOCW7NX844m7u0","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:22:40Z","updated_at":"2021-10-22T15:22:40Z","author_association":"MEMBER","body":"We don't have a version matrix :( yet, but PR's are welcome!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949730228/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949732984","html_url":"https://github.com/apache/iceberg/pull/3354#issuecomment-949732984","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3354","id":949732984,"node_id":"IC_kwDOCW7NX844m8Z4","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:25:59Z","updated_at":"2021-10-22T15:25:59Z","author_association":"CONTRIBUTOR","body":"@openinx, what do you think about taking an approach similar to what we've done in Spark and building a module for each supported Flink version? That would help us add support for multiple versions of Scala as well.\r\n\r\nI don't think that should block this PR, but I'd like to have a good plan for supporting multiple Flink versions in parallel without having issues that are reported by users.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949732984/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949737596","html_url":"https://github.com/apache/iceberg/pull/3015#issuecomment-949737596","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3015","id":949737596,"node_id":"IC_kwDOCW7NX844m9h8","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:31:40Z","updated_at":"2021-10-22T15:31:40Z","author_association":"MEMBER","body":"I would have kept the column at the end just so we don't break anyone's position based indexing (even if we didn't doc it) but it sounds like @rdblue would rather have it in the middle. I'm good to merge if we are sure on that","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949737596/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949739370","html_url":"https://github.com/apache/iceberg/issues/3336#issuecomment-949739370","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3336","id":949739370,"node_id":"IC_kwDOCW7NX844m99q","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:33:48Z","updated_at":"2021-10-22T15:33:48Z","author_association":"MEMBER","body":"Is the a PR for this? I see you made changes to your fork but would you like to submit them for upstream? I'm not sure I understand the fix here but am always ready for any code that improves our lock/unlock behavior.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949739370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949740468","html_url":"https://github.com/apache/iceberg/issues/3327#issuecomment-949740468","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3327","id":949740468,"node_id":"IC_kwDOCW7NX844m-O0","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:35:08Z","updated_at":"2021-10-22T15:35:08Z","author_association":"MEMBER","body":"Specifically see \r\nhttps://github.com/apache/iceberg/blob/119d20d22e66655bce1590041e4ba25ae48874fb/spark/v3.0/spark3/src/test/java/org/apache/iceberg/spark/actions/TestNewRewriteDataFilesAction.java#L228-L230\r\n\r\nFor setting options like target file size","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949740468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949747196","html_url":"https://github.com/apache/iceberg/pull/1471#issuecomment-949747196","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1471","id":949747196,"node_id":"IC_kwDOCW7NX844m_38","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:43:33Z","updated_at":"2021-10-22T15:44:08Z","author_association":"MEMBER","body":"> In case of `S3FileIO`, default scheme is `s3://`. Writes happening from different clients, will have schemes based on `io-impl` property. The manifest might have mix of `s3://`, `s3a://` etc But the file listing(in DeleteOrphanFiles), will have only only a single prefix(which is determined by the Client Hadoop configuration). This will result in orphan files not being cleaned. When the user is aware that the scheme can be ignored, I think we should provide a configuration to do that.\r\n> \r\n> I am not able to come up with a concrete case for the authority(may be HDFS with and with authority), but that could also be a configuration.\r\n> \r\n> @RussellSpitzer @aokolnychyi @rdblue @flyrain @raptond Your thoughts on this?\r\n\r\nAs we've talked about this before offline, I am a strong believer that we should not delete files that we aren't sure about. So if for example a user has a files in\r\n```\r\nhdfs://earth/sgcommand \r\nhdfs://alphasite/sgcommand\r\n```\r\n\r\nAnd the metadata has any of the following\r\n```\r\na: hdfs:///sgcommand/\r\nor\r\nb: hdfs://alphasite/sgcommand/\r\nor\r\nc: hdfs://earth/sgcommand/\r\n```\r\n\r\nOur default behavior should be to not delete both original files. I think if we want we can add a optional flag for \"exact matches\"\r\nwhich would \r\n```\r\ncase a: delete both files\r\ncase b: delete only earth\r\ncase c: delete only alphasite\r\n```\r\n\r\nSo by default I believe we should only compare the `path` portion of any uri assuming that everything else can be strongly dependent on the FileSystem implementation actually doing the file listing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949747196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949751907","html_url":"https://github.com/apache/iceberg/issues/3344#issuecomment-949751907","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3344","id":949751907,"node_id":"IC_kwDOCW7NX844nBBj","user":{"login":"ismailsimsek","id":6005685,"node_id":"MDQ6VXNlcjYwMDU2ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6005685?v=4","gravatar_id":"","url":"https://api.github.com/users/ismailsimsek","html_url":"https://github.com/ismailsimsek","followers_url":"https://api.github.com/users/ismailsimsek/followers","following_url":"https://api.github.com/users/ismailsimsek/following{/other_user}","gists_url":"https://api.github.com/users/ismailsimsek/gists{/gist_id}","starred_url":"https://api.github.com/users/ismailsimsek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ismailsimsek/subscriptions","organizations_url":"https://api.github.com/users/ismailsimsek/orgs","repos_url":"https://api.github.com/users/ismailsimsek/repos","events_url":"https://api.github.com/users/ismailsimsek/events{/privacy}","received_events_url":"https://api.github.com/users/ismailsimsek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T15:49:27Z","updated_at":"2021-10-22T15:49:27Z","author_association":"CONTRIBUTOR","body":"solved it, converted `NestedField`  to `StructType` like below\r\n\r\n```\r\nTypes.NestedField field\r\nfield.type().asStructType() -- converts field to Types.StructType\r\nfield.type().asStructType().fields() -- returns its fields\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949751907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949776639","html_url":"https://github.com/apache/iceberg/issues/3282#issuecomment-949776639","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3282","id":949776639,"node_id":"IC_kwDOCW7NX844nHD_","user":{"login":"samredai","id":43911210,"node_id":"MDQ6VXNlcjQzOTExMjEw","avatar_url":"https://avatars.githubusercontent.com/u/43911210?v=4","gravatar_id":"","url":"https://api.github.com/users/samredai","html_url":"https://github.com/samredai","followers_url":"https://api.github.com/users/samredai/followers","following_url":"https://api.github.com/users/samredai/following{/other_user}","gists_url":"https://api.github.com/users/samredai/gists{/gist_id}","starred_url":"https://api.github.com/users/samredai/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samredai/subscriptions","organizations_url":"https://api.github.com/users/samredai/orgs","repos_url":"https://api.github.com/users/samredai/repos","events_url":"https://api.github.com/users/samredai/events{/privacy}","received_events_url":"https://api.github.com/users/samredai/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T16:19:44Z","updated_at":"2021-10-22T16:19:44Z","author_association":"CONTRIBUTOR","body":"Here's a suggestion for the tox.ini changes for black and isort! There's some conflict between flake8 and isort's opinions but adding `I100` and `I202` to flake8's ignore should get them in sync. This will also let us run `tox -e format` to reformat the source files accordingly before committing and pushing (maybe that's what the pre-commit hook can run?).\r\n```ini\r\n[testenv:format]\r\ndescription = reformat all source code\r\nbasepython = python3\r\ndeps =\r\n    black\r\n    isort\r\n    flake8\r\nskip_install = true\r\ncommands =\r\n    isort --recursive --project iceberg --profile black setup.py src tests\r\n    black setup.py src tests\r\n    flake8 setup.py src tests\r\n\r\n[testenv:linters]\r\nbasepython = python3\r\nskip_install = true\r\ndeps =\r\n    .\r\n    {[testenv:isort]deps}\r\n    {[testenv:black]deps}\r\n    {[testenv:flake8]deps}\r\n    {[testenv:bandit]deps}\r\n    {[testenv:mypy]deps}\r\ncommands =\r\n    {[testenv:isort]deps}\r\n    {[testenv:black]deps}\r\n    {[testenv:flake8]commands}\r\n    {[testenv:bandit]commands}\r\n    {[testenv:mypy]commands}\r\n\r\n[testenv:isort]\r\nbasepython = python3\r\nskip_install = true\r\ndeps =\r\n    isort\r\ncommands =\r\n    isort --recursive --project iceberg --profile black --check-only setup.py src tests\r\n\r\n[testenv:black]\r\nbasepython = python3\r\nskip_install = true\r\ndeps =\r\n    black\r\ncommands =\r\n    black --check --diff src setup.py tests\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949776639/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949843554","html_url":"https://github.com/apache/iceberg/pull/3203#issuecomment-949843554","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3203","id":949843554,"node_id":"IC_kwDOCW7NX844nXZi","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T17:49:57Z","updated_at":"2021-10-22T17:49:57Z","author_association":"CONTRIBUTOR","body":"@pan3793 you mentioned on the mailing list that you wanted to see this included in the 0.12.1 release. As it's been merged a while ago, can you check if this PR's concerns are still handled given that we've refactored the Spark module layout?\r\n\r\nE.g. that this is corrected in the current `spark/v3.0`? I believe that it is.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949843554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949869655","html_url":"https://github.com/apache/iceberg/pull/3352#issuecomment-949869655","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3352","id":949869655,"node_id":"IC_kwDOCW7NX844ndxX","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T18:28:22Z","updated_at":"2021-10-22T18:28:22Z","author_association":"CONTRIBUTOR","body":"Had some offline discussions, some conclusions:\r\n1. rename `iceberg.content` to `iceberg.field.usage`, options being `schema-column`, `schema-subfield`, `partition-field`.\r\n2. partition field and sub-field are also stored in schema, this is only for informational purpose. Because Glue does not support versioned partition spec, let's also put partition field in schema to avoid troubles when updating partition scheme.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949869655/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949887416","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-949887416","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":949887416,"node_id":"IC_kwDOCW7NX844niG4","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T18:55:10Z","updated_at":"2021-10-22T18:55:10Z","author_association":"CONTRIBUTOR","body":"@nssalian, looks like there are two tables, `iceberg_namespaces` and `namespace_properties`. Do we need two? It seems to me that we only need the properties table and a namespace exists if the properties exist or if a table exists.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949887416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949890090","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-949890090","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":949890090,"node_id":"IC_kwDOCW7NX844niwq","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T18:59:47Z","updated_at":"2021-10-22T18:59:47Z","author_association":"CONTRIBUTOR","body":"> @nssalian, looks like there are two tables, `iceberg_namespaces` and `namespace_properties`. Do we need two? It seems to me that we only need the properties table and a namespace exists if the properties exist or if a table exists.\r\n\r\nI think we can remove `iceberg_namespaces`. What would `createNamespace` evolve to if we don't have a separate table? Perhaps a single row in the `namespace_properties` or go back to the being Unsupported.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949890090/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949916609","html_url":"https://github.com/apache/iceberg/pull/3335#issuecomment-949916609","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3335","id":949916609,"node_id":"IC_kwDOCW7NX844npPB","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T19:45:57Z","updated_at":"2021-10-22T19:45:57Z","author_association":"CONTRIBUTOR","body":"Thanks @aokolnychyi! And thanks for reviewing, everyone!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949916609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949993037","html_url":"https://github.com/apache/iceberg/pull/3335#issuecomment-949993037","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3335","id":949993037,"node_id":"IC_kwDOCW7NX844n75N","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T22:25:56Z","updated_at":"2021-10-22T22:25:56Z","author_association":"CONTRIBUTOR","body":"Thanks, @wypoon @pan3793 @kbendick @rdblue!\r\n\r\nLet me know if anyone has time to pick up the Scala version parameterization. I guess Spark 3.2 supports 2.12 and 2.13.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/949993037/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950003011","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-950003011","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":950003011,"node_id":"IC_kwDOCW7NX844n-VD","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T22:57:57Z","updated_at":"2021-10-22T22:57:57Z","author_association":"CONTRIBUTOR","body":"Trying to catch up with the conversation...\r\n\r\n> it looks like this creates a generic table with catalog name, namespace name, and string blobs. Is that the right way to go? Why not use a namespace_properties table that has the schema catalog string, namespace string, key string, value string? A namespace would exist if there is a table with the namespace or if there is at least one property for the namespace. That seems like a better way to model the information than converting to and from JSON or base64 to me. \r\n\r\nYes that's actually the very original idea that we thought about in the initial PR. The schema in the current PR was from @miR172 's POC, and I overlooked the fact that it would break existing behavior, sorry for that. So we should switch to use 1 table for namespace properties and 1 table for just table information as you suggested, and we don't need another namespace table because everything can be modeled as key value pairs. `createNamespace` can be modeled as a `createdAt=1234567890` key value pair.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950003011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950003791","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-950003791","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":950003791,"node_id":"IC_kwDOCW7NX844n-hP","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T23:00:41Z","updated_at":"2021-10-22T23:00:41Z","author_association":"CONTRIBUTOR","body":"Thanks for the comment @jackye1995 . \r\nI'll update the implementation of createNamespace and then restore it to just one table for properties.\r\nDo we need two checks for namespaceExists? - table created with namespace and properties field exists?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950003791/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950008345","html_url":"https://github.com/apache/iceberg/pull/3335#issuecomment-950008345","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3335","id":950008345,"node_id":"IC_kwDOCW7NX844n_oZ","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T23:14:04Z","updated_at":"2021-10-22T23:14:04Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi I saw that in v3.2, quite a number of rules have been removed from `IcebergSparkSessionExtensions` (and the classes removed): `AlignRowLevelOperations`, `RowLevelOperationsPredicateCheck`, `OptimizeConditionsInRowLevelOperations`, `PullupCorrelatedPredicatesInRowLevelOperations`, `RewriteDelete`, `RewriteUpdate`, and `RewriteMergeInto`. I also saw that `TestCopyOnWriteDelete`, `TestCopyOnWriteMerge` and `TestCopyOnWriteUpdate` are all being skipped entirely. Do you plan follow up work rewriting support for delete/update/merge using Spark 3.2 features? As of this change, what functionality works in 3.0 but not in 3.2?\r\nI understand that some of the removed classes are things that are no longer needed because new API is now available in Spark 3.2 (some already in 3.1), e.g., `ExtendedBatchScanExec` and the dynamic file filter stuff. But I'd like to understand the delete/update/merge support situation (please pardon ignorance, I'm not familiar with this area yet).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950008345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950011653","html_url":"https://github.com/apache/iceberg/pull/3200#issuecomment-950011653","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3200","id":950011653,"node_id":"IC_kwDOCW7NX844oAcF","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-22T23:25:26Z","updated_at":"2021-10-22T23:25:26Z","author_association":"CONTRIBUTOR","body":"Overall we follow the convention of 1 blank line between all methods anyway. I think it does not work because what you are changing is the intellij style, which does not affect the actual check style. The correct file to change is https://github.com/apache/iceberg/blob/master/.baseline/checkstyle/checkstyle.xml#L39-L43, but it already disallows more than 1 consecutive blank lines.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950011653/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950026889","html_url":"https://github.com/apache/iceberg/pull/3257#issuecomment-950026889","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3257","id":950026889,"node_id":"IC_kwDOCW7NX844oEKJ","user":{"login":"jackye1995","id":29823233,"node_id":"MDQ6VXNlcjI5ODIzMjMz","avatar_url":"https://avatars.githubusercontent.com/u/29823233?v=4","gravatar_id":"","url":"https://api.github.com/users/jackye1995","html_url":"https://github.com/jackye1995","followers_url":"https://api.github.com/users/jackye1995/followers","following_url":"https://api.github.com/users/jackye1995/following{/other_user}","gists_url":"https://api.github.com/users/jackye1995/gists{/gist_id}","starred_url":"https://api.github.com/users/jackye1995/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jackye1995/subscriptions","organizations_url":"https://api.github.com/users/jackye1995/orgs","repos_url":"https://api.github.com/users/jackye1995/repos","events_url":"https://api.github.com/users/jackye1995/events{/privacy}","received_events_url":"https://api.github.com/users/jackye1995/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T00:31:36Z","updated_at":"2021-10-23T00:34:16Z","author_association":"CONTRIBUTOR","body":"It's still unclear to me how this would solve the merge conflict if you have 2 columns updated in different branches. For example, if I have branch `A` that added column `c1` as an int column, branch `B` also added column `c1` as a string column, even if they have different ID, it is unclear if the user's intention is to keep one `c1`  (and we don't know which one to keep), or keep both (which is not possible due to duplicated column name). ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950026889/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950033869","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-950033869","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":950033869,"node_id":"IC_kwDOCW7NX844oF3N","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T01:14:08Z","updated_at":"2021-10-23T01:14:08Z","author_association":"CONTRIBUTOR","body":"@jackye1995 @rdblue  addressed the feedback. Let me know if I can address anything else.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950033869/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950044015","html_url":"https://github.com/apache/iceberg/issues/3357#issuecomment-950044015","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3357","id":950044015,"node_id":"IC_kwDOCW7NX844oIVv","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T02:37:30Z","updated_at":"2021-10-23T02:39:16Z","author_association":"MEMBER","body":"https://github.com/apache/iceberg/issues/2319\r\n\r\nThe root cause is by default we let the Spark Catalog use a Caching catalog ([this can be disabled in config](https://iceberg.apache.org/spark-configuration/)) to prevent multiple references to the same table to change during the execution of a query.\r\n\r\nYou can work around this by disabling the cache or by manually refreshing the table.\r\n\r\n```\r\nspark.sql.catalog.catalog-name.cache-enabled | true or false | Whether to enable catalog cache, default value is true\r\n```\r\n\r\nor\r\n\r\n```sql\r\nREFRESH tableIdentifier\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950044015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950045042","html_url":"https://github.com/apache/iceberg/issues/3357#issuecomment-950045042","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3357","id":950045042,"node_id":"IC_kwDOCW7NX844oIly","user":{"login":"cvasani","id":1733507,"node_id":"MDQ6VXNlcjE3MzM1MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1733507?v=4","gravatar_id":"","url":"https://api.github.com/users/cvasani","html_url":"https://github.com/cvasani","followers_url":"https://api.github.com/users/cvasani/followers","following_url":"https://api.github.com/users/cvasani/following{/other_user}","gists_url":"https://api.github.com/users/cvasani/gists{/gist_id}","starred_url":"https://api.github.com/users/cvasani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cvasani/subscriptions","organizations_url":"https://api.github.com/users/cvasani/orgs","repos_url":"https://api.github.com/users/cvasani/repos","events_url":"https://api.github.com/users/cvasani/events{/privacy}","received_events_url":"https://api.github.com/users/cvasani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T02:47:07Z","updated_at":"2021-10-23T02:47:07Z","author_association":"NONE","body":"It seems explicit refresh is needed or session needs to disable cache :  --conf spark.sql.catalog.local.cache-enabled=false","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950045042/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950067005","html_url":"https://github.com/apache/iceberg/issues/3228#issuecomment-950067005","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3228","id":950067005,"node_id":"IC_kwDOCW7NX844oN89","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T05:09:31Z","updated_at":"2021-10-23T05:09:31Z","author_association":"CONTRIBUTOR","body":"@jun-he reason for closing this? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950067005/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950067848","html_url":"https://github.com/apache/iceberg/pull/3323#issuecomment-950067848","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3323","id":950067848,"node_id":"IC_kwDOCW7NX844oOKI","user":{"login":"Reo-LEI","id":17312872,"node_id":"MDQ6VXNlcjE3MzEyODcy","avatar_url":"https://avatars.githubusercontent.com/u/17312872?v=4","gravatar_id":"","url":"https://api.github.com/users/Reo-LEI","html_url":"https://github.com/Reo-LEI","followers_url":"https://api.github.com/users/Reo-LEI/followers","following_url":"https://api.github.com/users/Reo-LEI/following{/other_user}","gists_url":"https://api.github.com/users/Reo-LEI/gists{/gist_id}","starred_url":"https://api.github.com/users/Reo-LEI/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Reo-LEI/subscriptions","organizations_url":"https://api.github.com/users/Reo-LEI/orgs","repos_url":"https://api.github.com/users/Reo-LEI/repos","events_url":"https://api.github.com/users/Reo-LEI/events{/privacy}","received_events_url":"https://api.github.com/users/Reo-LEI/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T05:14:11Z","updated_at":"2021-10-23T05:14:11Z","author_association":"CONTRIBUTOR","body":"I this PR is ok, could you take a look of this? 😄 @rdblue @openinx @stevenzwu @jackye1995 @kbendick ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950067848/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950098038","html_url":"https://github.com/apache/iceberg/pull/3203#issuecomment-950098038","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3203","id":950098038,"node_id":"IC_kwDOCW7NX844oVh2","user":{"login":"pan3793","id":26535726,"node_id":"MDQ6VXNlcjI2NTM1NzI2","avatar_url":"https://avatars.githubusercontent.com/u/26535726?v=4","gravatar_id":"","url":"https://api.github.com/users/pan3793","html_url":"https://github.com/pan3793","followers_url":"https://api.github.com/users/pan3793/followers","following_url":"https://api.github.com/users/pan3793/following{/other_user}","gists_url":"https://api.github.com/users/pan3793/gists{/gist_id}","starred_url":"https://api.github.com/users/pan3793/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pan3793/subscriptions","organizations_url":"https://api.github.com/users/pan3793/orgs","repos_url":"https://api.github.com/users/pan3793/repos","events_url":"https://api.github.com/users/pan3793/events{/privacy}","received_events_url":"https://api.github.com/users/pan3793/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T06:13:43Z","updated_at":"2021-10-23T06:13:43Z","author_association":"MEMBER","body":"> @pan3793 you mentioned on the mailing list that you wanted to see this included in the 0.12.1 release. As it's been merged a while ago, can you check if this PR's concerns are still handled given that we've refactored the Spark module layout?\r\n> \r\n> E.g. that this is corrected in the current `spark/v3.0`? I believe that it is.\r\n\r\nThe refactor doesn't break this PR's change. Since the change only affects Spark 3.1, I have checked `PlanUtils`, it's correct in `spark/v3.0`. As for `spark/v3.2`, lots of code has been removed from `PlanUtils`, the PR's change affects nothing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950098038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950128695","html_url":"https://github.com/apache/iceberg/pull/3257#issuecomment-950128695","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3257","id":950128695,"node_id":"IC_kwDOCW7NX844odA3","user":{"login":"snazy","id":957468,"node_id":"MDQ6VXNlcjk1NzQ2OA==","avatar_url":"https://avatars.githubusercontent.com/u/957468?v=4","gravatar_id":"","url":"https://api.github.com/users/snazy","html_url":"https://github.com/snazy","followers_url":"https://api.github.com/users/snazy/followers","following_url":"https://api.github.com/users/snazy/following{/other_user}","gists_url":"https://api.github.com/users/snazy/gists{/gist_id}","starred_url":"https://api.github.com/users/snazy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/snazy/subscriptions","organizations_url":"https://api.github.com/users/snazy/orgs","repos_url":"https://api.github.com/users/snazy/repos","events_url":"https://api.github.com/users/snazy/events{/privacy}","received_events_url":"https://api.github.com/users/snazy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T10:12:08Z","updated_at":"2021-10-23T10:12:08Z","author_association":"MEMBER","body":"> It's still unclear to me how this would solve the merge conflict if you have 2 columns updated in different branches. For example, if I have branch `A` that added column `c1` as an int column, branch `B` also added column `c1` as a string column, even if they have different ID, it is unclear if the user's intention is to keep one `c1` (and we don't know which one to keep), or keep both (which is not possible due to duplicated column name).\r\n\r\nYes, that’s a known concern. It would have to lead in an merge conflict error. However, it could be resolved by the user by renaming one of those.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950128695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950171799","html_url":"https://github.com/apache/iceberg/issues/3356#issuecomment-950171799","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3356","id":950171799,"node_id":"IC_kwDOCW7NX844oniX","user":{"login":"deepeye","id":1631876,"node_id":"MDQ6VXNlcjE2MzE4NzY=","avatar_url":"https://avatars.githubusercontent.com/u/1631876?v=4","gravatar_id":"","url":"https://api.github.com/users/deepeye","html_url":"https://github.com/deepeye","followers_url":"https://api.github.com/users/deepeye/followers","following_url":"https://api.github.com/users/deepeye/following{/other_user}","gists_url":"https://api.github.com/users/deepeye/gists{/gist_id}","starred_url":"https://api.github.com/users/deepeye/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deepeye/subscriptions","organizations_url":"https://api.github.com/users/deepeye/orgs","repos_url":"https://api.github.com/users/deepeye/repos","events_url":"https://api.github.com/users/deepeye/events{/privacy}","received_events_url":"https://api.github.com/users/deepeye/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T15:52:02Z","updated_at":"2021-10-23T15:52:02Z","author_association":"NONE","body":"The problem has solved, TIMESTAMP(0) is replaced by TIMESTAMP!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950171799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950184903","html_url":"https://github.com/apache/iceberg/pull/3335#issuecomment-950184903","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3335","id":950184903,"node_id":"IC_kwDOCW7NX844oqvH","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T17:24:06Z","updated_at":"2021-10-23T17:24:06Z","author_association":"CONTRIBUTOR","body":"@wypoon, sure! Like I stated in the PR description, this change did not cover multiple Scala versions support and row-level commands. I am reworking row-level commands at this moment to also support merge-on-read and leverage native dynamic filtering in Spark. If I manage to make it work, then the implementation will be different and I did not want to invest time into porting existing extensions if we may rework them. To sum up, expect to see PRs for row-level commands and other 3.2 related things next week.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950184903/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950186402","html_url":"https://github.com/apache/iceberg/issues/3217#issuecomment-950186402","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3217","id":950186402,"node_id":"IC_kwDOCW7NX844orGi","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T17:35:02Z","updated_at":"2021-10-23T17:35:02Z","author_association":"CONTRIBUTOR","body":"Can I work on this?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950186402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950187936","html_url":"https://github.com/apache/iceberg/pull/3360#issuecomment-950187936","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3360","id":950187936,"node_id":"IC_kwDOCW7NX844oreg","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T17:46:43Z","updated_at":"2021-10-23T17:46:43Z","author_association":"CONTRIBUTOR","body":"This is what we discussed in #3335, @wypoon @pan3793 @kbendick @rdblue","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950187936/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950202860","html_url":"https://github.com/apache/iceberg/pull/3335#issuecomment-950202860","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3335","id":950202860,"node_id":"IC_kwDOCW7NX844ovHs","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T19:40:19Z","updated_at":"2021-10-23T19:40:19Z","author_association":"CONTRIBUTOR","body":"@aokolnychyi thanks for elaborating.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950202860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950211545","html_url":"https://github.com/apache/iceberg/pull/3360#issuecomment-950211545","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3360","id":950211545,"node_id":"IC_kwDOCW7NX844oxPZ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T20:33:42Z","updated_at":"2021-10-23T20:33:42Z","author_association":"CONTRIBUTOR","body":"Looks good. Thanks @aokolnychyi!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950211545/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950211875","html_url":"https://github.com/apache/iceberg/pull/3360#issuecomment-950211875","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3360","id":950211875,"node_id":"IC_kwDOCW7NX844oxUj","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T20:36:38Z","updated_at":"2021-10-23T20:36:38Z","author_association":"CONTRIBUTOR","body":"LGTM. I'm very much in favor of this move.\r\nQ. Is the name of the runtime jar determined by the project name? As in\r\n```\r\n  project(':iceberg-spark:spark-3.2-runtime').name = 'iceberg-spark-3.2-runtime'\r\n```\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950211875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950212251","html_url":"https://github.com/apache/iceberg/pull/3333#issuecomment-950212251","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3333","id":950212251,"node_id":"IC_kwDOCW7NX844oxab","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T20:40:07Z","updated_at":"2021-10-23T20:40:07Z","author_association":"CONTRIBUTOR","body":"Thanks, @kbendick!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950212251/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950214790","html_url":"https://github.com/apache/iceberg/pull/3351#issuecomment-950214790","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3351","id":950214790,"node_id":"IC_kwDOCW7NX844oyCG","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T21:02:19Z","updated_at":"2021-10-23T21:02:19Z","author_association":"CONTRIBUTOR","body":"> apache/parquet-mr@apache-parquet-1.12.0...apache-parquet-1.12.2\r\n\r\nThanks for this @nastra! I’m hesitant to include this for 0.12.1 (though it’s not up to me, I’m just release manager). But I definitely do think it’s a good idea to upgrade at least for the next major version. Particularly the closing of zstd decompressor will fix a memory leak I’ve dealt with before in reading zstd compressed files.\r\n\r\nI wonder if some of the changes to stats will affect any of our operations though? Especially things like add_files and other procedures (where changes in parquet have caused issues before).\r\n\r\nSuch as:\r\n- Change to column stats for min/max on binary types: https://github.com/apache/parquet-mr/commit/413d1dd4552dba5a7d66647747d17ef573d201c4\r\n- Changes of row group size from int to long: https://github.com/apache/parquet-mr/commit/aa132b3787b20170f3554cfeac214884cfecb820\r\n- Changing dictionary size from int to long (probably less of a concern): https://github.com/apache/parquet-mr/commit/7597c74c55c02980021eb9e8c5345ea0d86fa62a\r\n\r\nWe should see if we have tests or any invalid assumptions around binary type min / max size (and if the row group type change will be an issue). I think the row group type change to long is actually more in line with our own code (and there’s likely an unnecessary cast to `long` that can be removed, unless it was never added).\r\n\r\nHappy to help take a look at these things as time permits 🙂","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950214790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950217341","html_url":"https://github.com/apache/iceberg/pull/3358#issuecomment-950217341","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3358","id":950217341,"node_id":"IC_kwDOCW7NX844oyp9","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T21:18:43Z","updated_at":"2021-10-23T21:18:43Z","author_association":"CONTRIBUTOR","body":"Thanks for this contribution @Dam1029!\r\n\r\nAs the function you’ve changed in SnapshotUtil is used in other places, we should be sure that it’s being tested for more than just the scenario that your patch covers (though greatly appreciate you adding these tests!).\r\n\r\nI want to draw attention to the fact that a `null` snapshotId is a valid value, so we might want to handle this case elsewhere in the code. As the oldest ancestor could potentially be null (the start of the table).\r\n\r\nAlso, in the case of expired snapshots, we should think about what exactly the intended behavior should be. For example, if a user has `failOnDataLoss` as true, then some sort of exception might be expected. Though I definitely agree that an NPE is not a good exception in any case, and we should handle that more explicitly (even if we throw an exception still).\r\n\r\nOne other way I think an NPE or an indefinite read-loop could happen would be if somebody does a CreateOrReplace operation (replace table). As that also generates a `null` initial snapshot.\r\n\r\nI can try to add some unit tests around that if you don’t have the time. I think your patch potentially might fix that too (but would need to check).\r\n\r\nI’ll do my best to check out this patch and run some more extensive local tests over it too. It might be sufficient to return null (which is a valid snapshot id) and then reset to the initial offset - though I’m just thinking out loud here as I need to check this out and play around.\r\n\r\nAgain, thank you for your contribution!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950217341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950217860","html_url":"https://github.com/apache/iceberg/pull/3307#issuecomment-950217860","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3307","id":950217860,"node_id":"IC_kwDOCW7NX844oyyE","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T21:24:18Z","updated_at":"2021-10-23T21:24:18Z","author_association":"CONTRIBUTOR","body":"@nastra Have you (or anybody else in this discussion) seen the flakiness of this test recently in CI (especially since the change to running tests separately)?\r\n\r\nIf so, I think it’s a good idea to disable the test ASAP and copy this conversation to an issue or elsewhere.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950217860/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950226816","html_url":"https://github.com/apache/iceberg/pull/3353#issuecomment-950226816","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3353","id":950226816,"node_id":"IC_kwDOCW7NX844o0-A","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-23T22:33:57Z","updated_at":"2021-10-23T22:33:57Z","author_association":"CONTRIBUTOR","body":"> The idea is that we do `x.y.z-SNAPSHOT` releases whenever something is pushed to `master`. This requires that we have `MAVEN_USER` / `MAVEN_PASSWORD` secrets stored.\r\n\r\nThinking on this further, is it correct to say that a nightly build from the master branch is considered a 0.12.1 SNAPSHOT? For the patch release, I had expected we might cherry-pick certain commits and apply them on top of the 0.12.0 release (though I’m not entirely sure if that’s the case or not so please don’t quote me on that - just an assumption on my part).\r\n\r\nIf we don’t always build the next release (specifically point releases) from master, this might confuse some users, particularly those users who integrate Iceberg into their company’s systems and might try out SNAPSHOT releases before a RC is published.\r\n\r\nI definitely like the idea of publishing SNAPSHOT, but wondering if this will potentially be an issue.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950226816/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950252168","html_url":"https://github.com/apache/iceberg/pull/1972#issuecomment-950252168","issue_url":"https://api.github.com/repos/apache/iceberg/issues/1972","id":950252168,"node_id":"IC_kwDOCW7NX844o7KI","user":{"login":"yushuyao","id":8795651,"node_id":"MDQ6VXNlcjg3OTU2NTE=","avatar_url":"https://avatars.githubusercontent.com/u/8795651?v=4","gravatar_id":"","url":"https://api.github.com/users/yushuyao","html_url":"https://github.com/yushuyao","followers_url":"https://api.github.com/users/yushuyao/followers","following_url":"https://api.github.com/users/yushuyao/following{/other_user}","gists_url":"https://api.github.com/users/yushuyao/gists{/gist_id}","starred_url":"https://api.github.com/users/yushuyao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yushuyao/subscriptions","organizations_url":"https://api.github.com/users/yushuyao/orgs","repos_url":"https://api.github.com/users/yushuyao/repos","events_url":"https://api.github.com/users/yushuyao/events{/privacy}","received_events_url":"https://api.github.com/users/yushuyao/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T03:11:51Z","updated_at":"2021-10-24T03:11:51Z","author_association":"NONE","body":"@Fokko I see this has been open for a while. Wondering when do you plan to merge it? ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950252168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950256939","html_url":"https://github.com/apache/iceberg/pull/3358#issuecomment-950256939","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3358","id":950256939,"node_id":"IC_kwDOCW7NX844o8Ur","user":{"login":"Dam1029","id":26566636,"node_id":"MDQ6VXNlcjI2NTY2NjM2","avatar_url":"https://avatars.githubusercontent.com/u/26566636?v=4","gravatar_id":"","url":"https://api.github.com/users/Dam1029","html_url":"https://github.com/Dam1029","followers_url":"https://api.github.com/users/Dam1029/followers","following_url":"https://api.github.com/users/Dam1029/following{/other_user}","gists_url":"https://api.github.com/users/Dam1029/gists{/gist_id}","starred_url":"https://api.github.com/users/Dam1029/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dam1029/subscriptions","organizations_url":"https://api.github.com/users/Dam1029/orgs","repos_url":"https://api.github.com/users/Dam1029/repos","events_url":"https://api.github.com/users/Dam1029/events{/privacy}","received_events_url":"https://api.github.com/users/Dam1029/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T04:11:11Z","updated_at":"2021-10-24T04:12:59Z","author_association":"NONE","body":"> Thanks for this contribution @Dam1029!\r\n> \r\n> As the function you’ve changed in SnapshotUtil is used in other places, we should be sure that it’s being tested for more than just the scenario that your patch covers (though greatly appreciate you adding these tests!).\r\n> \r\n> I want to draw attention to the fact that a `null` snapshotId is a valid value, so we might want to handle this case elsewhere in the code. As the oldest ancestor could potentially be null (the start of the table).\r\n> \r\n> Also, in the case of expired snapshots, we should think about what exactly the intended behavior should be. For example, if a user has `failOnDataLoss` as true, then some sort of exception might be expected. Though I definitely agree that an NPE is not a good exception in any case, and we should handle that more explicitly (even if we throw an exception still).\r\n> \r\n> One other way I think an NPE or an indefinite read-loop could happen would be if somebody does a CreateOrReplace operation (replace table). As that also generates a `null` initial snapshot.\r\n> \r\n> I can try to add some unit tests around that if you don’t have the time. I think your patch potentially might fix that too (but would need to check).\r\n> \r\n> I’ll do my best to check out this patch and run some more extensive local tests over it too. It might be sufficient to return null (which is a valid snapshot id) and then reset to the initial offset - though I’m just thinking out loud here as I need to check this out and play around.\r\n> \r\n> Again, thank you for your contribution!\r\n\r\nThank you for you reply. I agree with you that null snapshotId is a valid value. The method oldestSnapshot() is used to return oldest and available snapshot. It only return null if there is no current snapshot in the table, such as empty table.\r\n\r\nWe suppose iceberg table have not executed expired snapshot action. Then the table's oldest snapshot_id is not null and the oldest parent_id is null. The method oldestSnapshot() can current return table's oldest snapshot. \r\n\r\nAfter do expired snapshots action, the both oldest snapshot_id and parent_id are not null. In the case, I think we should be return the oldest available snapshot but not null value.\r\n\r\nFinally, I really appreciate that you can help me double  check and run some more extensive local tests.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950256939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950259915","html_url":"https://github.com/apache/iceberg/issues/3340#issuecomment-950259915","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3340","id":950259915,"node_id":"IC_kwDOCW7NX844o9DL","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T04:50:44Z","updated_at":"2021-10-24T04:50:44Z","author_association":"CONTRIBUTOR","body":"> # Why the problem ?\r\n> Considering the following cases, each `AppendFiles` instance may hold a stale table metadata instance (referenced by `base` defined as a member variable in `SnapshotProducer`), because of some new snapshots committed by other threads or tasks:\r\n> \r\n> ```java\r\n> AppendFiles af1 = table.newAppend().addFile(thread-1.file);\r\n> AppendFiles af2 = table.newAppend().addFile(thread-2.file);\r\n> AppendFiles af3 = table.newAppend().addFile(thread-3.file);\r\n> ...\r\n> ```\r\n> \r\n> With so many `AppendFiles` existed, the referenced staled `TableMetadata` instances also won't be reclaimed by GC in time, and as we know that the size of TableMetadata instance is increased along with the number of snapshots, in consequence, the GC issues come, commonly seeing `GC overhead limited exceed` error.\r\n\r\nHi @fengguangyuan! Firstly, thank you for your contributions.\r\n\r\nI wanted to ask you about your comment here about the GC overhead limit exceeded and your concern with having too many snapshots (which definitely is valid in general, though there are configurations to rewrite snapshots after a certain number and table maintenance operations to keep snapshots at a healthy amount of your needs). I'm hoping you can help me understand more your practices: how you're using the library to achieve this additional parallelism (is this via `.par` to make a Scala parallel collection with Spark, do you have custom code, is it just a configuration property you've raised)? Also, what catalog are you using and what filestore are you writing to? And also (important but I understand if it's not easy to answer right away), at what rate are you accumulating additional snapshots based on the your incoming data (maybe how many files do you have per snapshot in general)? And also, how often are you calling `AppendFile` per commit (as you mentioned `AppendFile` so I'm wondering if you're using the library a bit more directly or what).\r\n\r\nI know this isn't necessarily a small ask, but you've given a very thorough description here, and I'd really like to better understand the problems that you're seeing arise as well as your usage of the library. I think it would be really valuable.\r\n\r\nAnything you can provide, starting with the basics of:\r\n- system you're using for writing (eg Flink, Spark, Trino, etc),\r\n- catalog you're using\r\n- iceberg version you're using\r\n- any non-default configuration values you're setting, particularly that would affect commit rate and snapshot production\r\n\r\nAlso, ideally:\r\n- How are you achieving this added parallelism (a config value, high level code in your job, code that you've written using the Iceberg library, etc)\r\n- If you've written your own code using the Java API, the relationship between commits and AppendaFile\r\n\r\nAnything you can share would greatly help in understanding your use case and the problems you're facing more. And there might be learnings to be had from your usage. 🙂\r\n\r\nThanks,\r\nKyle!","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950259915/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950262710","html_url":"https://github.com/apache/iceberg/issues/3228#issuecomment-950262710","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3228","id":950262710,"node_id":"IC_kwDOCW7NX844o9u2","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T05:24:13Z","updated_at":"2021-10-24T05:24:13Z","author_association":"COLLABORATOR","body":"Sorry, that was not intended. Reopened it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950262710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950264907","html_url":"https://github.com/apache/iceberg/issues/3217#issuecomment-950264907","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3217","id":950264907,"node_id":"IC_kwDOCW7NX844o-RL","user":{"login":"jun-he","id":12246263,"node_id":"MDQ6VXNlcjEyMjQ2MjYz","avatar_url":"https://avatars.githubusercontent.com/u/12246263?v=4","gravatar_id":"","url":"https://api.github.com/users/jun-he","html_url":"https://github.com/jun-he","followers_url":"https://api.github.com/users/jun-he/followers","following_url":"https://api.github.com/users/jun-he/following{/other_user}","gists_url":"https://api.github.com/users/jun-he/gists{/gist_id}","starred_url":"https://api.github.com/users/jun-he/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jun-he/subscriptions","organizations_url":"https://api.github.com/users/jun-he/orgs","repos_url":"https://api.github.com/users/jun-he/repos","events_url":"https://api.github.com/users/jun-he/events{/privacy}","received_events_url":"https://api.github.com/users/jun-he/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T05:50:48Z","updated_at":"2021-10-24T05:50:48Z","author_association":"COLLABORATOR","body":"Sure, I assigned it to you. But it depends on Transforms (https://github.com/apache/iceberg/issues/3218), which I am currently working on.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950264907/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950332598","html_url":"https://github.com/apache/iceberg/issues/3359#issuecomment-950332598","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3359","id":950332598,"node_id":"IC_kwDOCW7NX844pOy2","user":{"login":"ashoksri0","id":14317595,"node_id":"MDQ6VXNlcjE0MzE3NTk1","avatar_url":"https://avatars.githubusercontent.com/u/14317595?v=4","gravatar_id":"","url":"https://api.github.com/users/ashoksri0","html_url":"https://github.com/ashoksri0","followers_url":"https://api.github.com/users/ashoksri0/followers","following_url":"https://api.github.com/users/ashoksri0/following{/other_user}","gists_url":"https://api.github.com/users/ashoksri0/gists{/gist_id}","starred_url":"https://api.github.com/users/ashoksri0/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ashoksri0/subscriptions","organizations_url":"https://api.github.com/users/ashoksri0/orgs","repos_url":"https://api.github.com/users/ashoksri0/repos","events_url":"https://api.github.com/users/ashoksri0/events{/privacy}","received_events_url":"https://api.github.com/users/ashoksri0/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T14:14:10Z","updated_at":"2021-10-24T14:14:10Z","author_association":"NONE","body":"worngly created now everthing working fine ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950332598/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950348296","html_url":"https://github.com/apache/iceberg/issues/3228#issuecomment-950348296","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3228","id":950348296,"node_id":"IC_kwDOCW7NX844pSoI","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T15:51:07Z","updated_at":"2021-10-24T15:51:07Z","author_association":"CONTRIBUTOR","body":"Thanks @jun-he. I should have a PR ready sometime next week.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950348296/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950351465","html_url":"https://github.com/apache/iceberg/issues/2838#issuecomment-950351465","issue_url":"https://api.github.com/repos/apache/iceberg/issues/2838","id":950351465,"node_id":"IC_kwDOCW7NX844pTZp","user":{"login":"izchen","id":67534059,"node_id":"MDQ6VXNlcjY3NTM0MDU5","avatar_url":"https://avatars.githubusercontent.com/u/67534059?v=4","gravatar_id":"","url":"https://api.github.com/users/izchen","html_url":"https://github.com/izchen","followers_url":"https://api.github.com/users/izchen/followers","following_url":"https://api.github.com/users/izchen/following{/other_user}","gists_url":"https://api.github.com/users/izchen/gists{/gist_id}","starred_url":"https://api.github.com/users/izchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/izchen/subscriptions","organizations_url":"https://api.github.com/users/izchen/orgs","repos_url":"https://api.github.com/users/izchen/repos","events_url":"https://api.github.com/users/izchen/events{/privacy}","received_events_url":"https://api.github.com/users/izchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T16:11:35Z","updated_at":"2021-10-25T10:26:56Z","author_association":"CONTRIBUTOR","body":"I think this error will be thrown when we use byte, short, timestamp, date, and binary types.\r\n\r\nhttps://github.com/apache/iceberg/blob/24896d84c586c6339752a69773409219c0c0ac02/spark/v3.0/spark/src/main/java/org/apache/iceberg/spark/IcebergSpark.java#L33-L38\r\n\r\nMaybe we should modify `bucket::apply` to `value -> bucket.apply(SparkValueConvertet.convert(sourceIcebergType, value))`\r\n\r\nI will submit a PR to modify the code and add more ut to cover all the atomic types of Spark.\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950351465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950361187","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-950361187","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":950361187,"node_id":"IC_kwDOCW7NX844pVxj","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T17:18:34Z","updated_at":"2021-10-24T17:18:34Z","author_association":"CONTRIBUTOR","body":"Update: will add support for `setProperties`, `removeProperties` in the upcoming commits.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950361187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950381580","html_url":"https://github.com/apache/iceberg/pull/3307#issuecomment-950381580","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3307","id":950381580,"node_id":"IC_kwDOCW7NX844pawM","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T19:32:37Z","updated_at":"2021-10-24T19:32:37Z","author_association":"CONTRIBUTOR","body":"I strongly prefer fixing tests rather than disabling them. It sounds like we're close to a resolution here, although I can't say I understand the comments explaining the current theory. If that's the case, then let's find a way to fix the test.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950381580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950392422","html_url":"https://github.com/apache/iceberg/pull/3304#issuecomment-950392422","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3304","id":950392422,"node_id":"IC_kwDOCW7NX844pdZm","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T20:47:03Z","updated_at":"2021-10-24T20:48:59Z","author_association":"CONTRIBUTOR","body":"> > My biggest concern is that the benchmarks can take a while to run and the stability of the GH Action hosted runners is somewhat unknown (in regards to variability in performance runs)\r\n> \r\n> @kbendick I agree and I share the same concern. However, I think it it still better to have a hosted way of running benchmarks, rather than having people to run them locally as the variability in performance will be equally bad, since you most likely will be still doing dev work while you run benchmarks locally.\r\n> \r\n> One solution to that problem would be some dedicated GH runners with better CPUs and more memory. Would be interesting to know if that's possible to get from Apache INFRA\r\n\r\nI agree with your point here. And at least with time, the GH Actions env will hopefully have some sort of known variability (vs two different local dev envs that can be totally different in terms of available resources and what else the user is doing there).\r\n\r\nFor that reason, and the fact that this can / should be run in a fork, I think this is a good idea.\r\n\r\nIn my opinion, if / when we include this, we should:\r\n1) Ensure we document the input parameters well - Can be done in a follow up.\r\n2) Document that the benchmarks shouldn’t be taken as a great source of truth but rather something to help guide developer understanding of code changes (e.g. hopefully people don’t run these benchmarks, then run the same thing somewhere else that’s more stable with a different framework etc, and make production choices off of that). - Also can be a follow up.\r\n3) Look into what impact, if any, running GH Actions in forks has on the resource pool for the whole `Apache` GitHub account. I know all projects share a limited set of concurrent runners, but I don’t know whether or not a fork of those projects has the same concerns. - I don’t think that forks use up the ASF’s limited GH Action concurrency / resources, but I admittedly don’t know. I only bring it up as the benchmarks can take quite some time to run.\r\n4) Look into the possibility of hosted runners. I know that the Flink project has people run the test suite against Azure (and that the Azure account / resources are free). Possibly that’s an avenue worth exploring? I doubt ASF infra can provide us with much in the way of better guarantees on the GH Action runners. If they can, wonderful. But otherwise, taking a look at how the Flink project has devs set up Azure accounts that are free for running tests might be something to look into (maybe they just do this for free for open-source projects?).\r\n\r\nOverall, thanks for working on this. I’m always a little leery of providing much prominence to the JMH tests, but they’re much better than nothing and some power users make great use of them (i.e. - you 🙂). I’ve just switched jobs and so don’t have a ton of free cycles, but once I do possibly we can collaborate on a slightly more standardized performance benchmark? I’ve had a WIP / rough version of one I’ve been working with for a while but haven’t found time to get it over the finish line.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950392422/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950395901","html_url":"https://github.com/apache/iceberg/pull/3270#issuecomment-950395901","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3270","id":950395901,"node_id":"IC_kwDOCW7NX844peP9","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T21:12:12Z","updated_at":"2021-10-24T21:12:12Z","author_association":"CONTRIBUTOR","body":"> Per aliyun oss SDK documentation: https://help.aliyun.com/document_detail/32009.html,\r\n> jdk9 and its plus version, dependency includes jaxb-api, activation and jaxb-runtime.\r\n> This PR to package them into one single bundled JAR\r\n\r\nGiven that these are recommended dependencies for using the aliyun-oss package in general (from what I understand at least), is there a chance that the versions chosen here will conflict with the versions a user chose for other needs in their project (stemming from usage of aliyun or otherwise)?\r\n\r\nI agree with @rdblue that this seems like a case where a shaded jar with relocation of these packages seems like a good idea. If these packages are needed to make Iceberg run, then their inclusion makes sense. But it doesn’t seem in line with current practices in this repo and elsewhere for the Iceberg dependency to enforce a specific version for other components in the user’s package or to have users implicitly depending on Iceberg for packages that are needed for other parts of their application. Iceberg should really only handle the Iceberg dependencies, and then other commonly used dependencies should be relocated.\r\n\r\nAs an example, that’s why all of Iceberg’s usage of parquet goes through `org.apache.Iceberg.relocated.org.apache.parquet`.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950395901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950418510","html_url":"https://github.com/apache/iceberg/issues/3217#issuecomment-950418510","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3217","id":950418510,"node_id":"IC_kwDOCW7NX844pjxO","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-24T23:45:19Z","updated_at":"2021-10-24T23:45:19Z","author_association":"CONTRIBUTOR","body":"Thanks @jun-he ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950418510/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950435678","html_url":"https://github.com/apache/iceberg/pull/3294#issuecomment-950435678","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3294","id":950435678,"node_id":"IC_kwDOCW7NX844pn9e","user":{"login":"kbendick","id":9833362,"node_id":"MDQ6VXNlcjk4MzMzNjI=","avatar_url":"https://avatars.githubusercontent.com/u/9833362?v=4","gravatar_id":"","url":"https://api.github.com/users/kbendick","html_url":"https://github.com/kbendick","followers_url":"https://api.github.com/users/kbendick/followers","following_url":"https://api.github.com/users/kbendick/following{/other_user}","gists_url":"https://api.github.com/users/kbendick/gists{/gist_id}","starred_url":"https://api.github.com/users/kbendick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kbendick/subscriptions","organizations_url":"https://api.github.com/users/kbendick/orgs","repos_url":"https://api.github.com/users/kbendick/repos","events_url":"https://api.github.com/users/kbendick/events{/privacy}","received_events_url":"https://api.github.com/users/kbendick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T00:53:36Z","updated_at":"2021-10-25T00:53:36Z","author_association":"CONTRIBUTOR","body":"I agree that oveall this seems like a really nice thing to have. Thank you\n***@***.*** *for doing this. This will enable much more robust\ntesting and devolopment.\n\nI agree with Jack's suggestions. That sounds very reasonable to me.\nParticularly with implementations that are primarily meant for testing or\ndevelopment, I think simpler is better. Also, when it's simpler it's\nperhaps somewhat easier to override the behavior later on if need ever be\n(though maybe that's just me and my simple Java code 🙂🤷‍♂️).\n\nI'll take a look at your recent updates in the next day or so. Let us know\nwhen your changes are in and ready for rereview @mayursrivastava !\n\nOn Sun, Oct 24, 2021 at 5:43 PM mayursrivastava ***@***.***>\nwrote:\n\n> ***@***.**** commented on this pull request.\n> ------------------------------\n>\n> In\n> core/src/main/java/org/apache/iceberg/io/inmemory/InMemoryInputStream.java\n> <https://github.com/apache/iceberg/pull/3294#discussion_r735196903>:\n>\n> > +package org.apache.iceberg.io.inmemory;\n> +\n> +import java.io.ByteArrayInputStream;\n> +import java.io.IOException;\n> +import java.io.UncheckedIOException;\n> +import org.apache.iceberg.io.SeekableInputStream;\n> +\n> +final class InMemoryInputStream extends SeekableInputStream {\n> +\n> +  private static final class SeekableByteArrayInputStream extends ByteArrayInputStream {\n> +\n> +    SeekableByteArrayInputStream(byte[] buf) {\n> +      super(buf);\n> +    }\n> +\n> +    synchronized void seek(long newPos) {\n>\n> there's no strong reason to share these; I'll remove synchronized.\n>\n> —\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/apache/iceberg/pull/3294#discussion_r735196903>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ACLAXEWZ6GQVC6LKLH4Y5ATUISR4HANCNFSM5GASHPYQ>\n> .\n> Triage notifications on the go with GitHub Mobile for iOS\n> <https://apps.apple.com/app/apple-store/id1477376905?ct=notification-email&mt=8&pt=524675>\n> or Android\n> <https://play.google.com/store/apps/details?id=com.github.android&referrer=utm_campaign%3Dnotification-email%26utm_medium%3Demail%26utm_source%3Dgithub>.\n>\n>\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950435678/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950448341","html_url":"https://github.com/apache/iceberg/pull/3307#issuecomment-950448341","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3307","id":950448341,"node_id":"IC_kwDOCW7NX844prDV","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T01:28:37Z","updated_at":"2021-10-25T01:28:37Z","author_association":"MEMBER","body":"Let me publish a PR today to address this issue today,  sorry for the delay because of the my limited bandwidth  (I should provide PR when I left the https://github.com/apache/iceberg/pull/3307#issuecomment-946683261 so that others don't need to prepare PR again).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950448341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950465993","html_url":"https://github.com/apache/iceberg/pull/3328#issuecomment-950465993","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3328","id":950465993,"node_id":"IC_kwDOCW7NX844pvXJ","user":{"login":"hzxiongyinke","id":75288351,"node_id":"MDQ6VXNlcjc1Mjg4MzUx","avatar_url":"https://avatars.githubusercontent.com/u/75288351?v=4","gravatar_id":"","url":"https://api.github.com/users/hzxiongyinke","html_url":"https://github.com/hzxiongyinke","followers_url":"https://api.github.com/users/hzxiongyinke/followers","following_url":"https://api.github.com/users/hzxiongyinke/following{/other_user}","gists_url":"https://api.github.com/users/hzxiongyinke/gists{/gist_id}","starred_url":"https://api.github.com/users/hzxiongyinke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hzxiongyinke/subscriptions","organizations_url":"https://api.github.com/users/hzxiongyinke/orgs","repos_url":"https://api.github.com/users/hzxiongyinke/repos","events_url":"https://api.github.com/users/hzxiongyinke/events{/privacy}","received_events_url":"https://api.github.com/users/hzxiongyinke/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T02:13:04Z","updated_at":"2021-10-25T02:13:04Z","author_association":"NONE","body":"I will use the information you gave to explore, and then evaluate whether this pr is necessary","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950465993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950467892","html_url":"https://github.com/apache/iceberg/pull/3354#issuecomment-950467892","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3354","id":950467892,"node_id":"IC_kwDOCW7NX844pv00","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T02:17:21Z","updated_at":"2021-10-25T02:17:21Z","author_association":"MEMBER","body":"> what do you think about taking an approach similar to what we've done in Spark and building a module for each supported Flink version?\r\n\r\nThat's exactly what I'm planning to push forward in the next step.   Except to separate multiple flink versions in different module (if necessary),  other things are required to address:\r\n\r\n1. Make the flink+iceberg build against scala 2.11 & 2.12. Currently we use scala 2.12 to build flink runtime jar, but actually the official apache flink are now releasing both scala 2.11 & 2.12,  maybe it's good  to add a scala 2.11 release for iceberg-flink-runtime.jar because most flink users are still using the scala 2.11 by default. Anyway,  we will need to add the travis CI case to guarantee the  flink release bundled with scala 2.11 works fine with apache iceberg.\r\n2. Make both flink 1.12 & flink 1.13 works fine agains the iceberg in travis CI environment.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950467892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950479123","html_url":"https://github.com/apache/iceberg/issues/3336#issuecomment-950479123","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3336","id":950479123,"node_id":"IC_kwDOCW7NX844pykT","user":{"login":"fengguangyuan","id":10569747,"node_id":"MDQ6VXNlcjEwNTY5NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/10569747?v=4","gravatar_id":"","url":"https://api.github.com/users/fengguangyuan","html_url":"https://github.com/fengguangyuan","followers_url":"https://api.github.com/users/fengguangyuan/followers","following_url":"https://api.github.com/users/fengguangyuan/following{/other_user}","gists_url":"https://api.github.com/users/fengguangyuan/gists{/gist_id}","starred_url":"https://api.github.com/users/fengguangyuan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fengguangyuan/subscriptions","organizations_url":"https://api.github.com/users/fengguangyuan/orgs","repos_url":"https://api.github.com/users/fengguangyuan/repos","events_url":"https://api.github.com/users/fengguangyuan/events{/privacy}","received_events_url":"https://api.github.com/users/fengguangyuan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T02:50:38Z","updated_at":"2021-10-25T02:51:45Z","author_association":"NONE","body":"> Is the a PR for this? I see you made changes to your fork but would you like to submit them for upstream? I'm not sure I understand the fix here but am always ready for any code that improves our lock/unlock behavior.\r\n\r\nSure. A new PR #3337 had been submitted 4 days ago.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950479123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950493738","html_url":"https://github.com/apache/iceberg/pull/3204#issuecomment-950493738","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3204","id":950493738,"node_id":"IC_kwDOCW7NX844p2Iq","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T03:27:05Z","updated_at":"2021-10-25T03:27:05Z","author_association":"CONTRIBUTOR","body":"@rdblue Hello, is there any progress ?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950493738/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950577229","html_url":"https://github.com/apache/iceberg/pull/3307#issuecomment-950577229","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3307","id":950577229,"node_id":"IC_kwDOCW7NX844qKhN","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T06:39:17Z","updated_at":"2021-10-25T06:39:17Z","author_association":"CONTRIBUTOR","body":"definitely +1 for fixing the test. Closing this one then as it seems we're closing to having a fix with #2575 ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950577229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950578408","html_url":"https://github.com/apache/iceberg/pull/3351#issuecomment-950578408","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3351","id":950578408,"node_id":"IC_kwDOCW7NX844qKzo","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T06:41:35Z","updated_at":"2021-10-25T06:41:35Z","author_association":"CONTRIBUTOR","body":"> I’m hesitant to include this for 0.12.1\r\n\r\nI didn't want to go this into 0.12.1 as well :)\r\n\r\nI'll try and take a look at those assumptions as well. Thanks for reviewing.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950578408/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950588198","html_url":"https://github.com/apache/iceberg/pull/3353#issuecomment-950588198","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3353","id":950588198,"node_id":"IC_kwDOCW7NX844qNMm","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T07:00:21Z","updated_at":"2021-10-25T07:00:21Z","author_association":"CONTRIBUTOR","body":"> Thinking on this further, is it correct to say that a nightly build from the master branch is considered a 0.12.1 SNAPSHOT? For the patch release, I had expected we might cherry-pick certain commits and apply them on top of the 0.12.0 release (though I’m not entirely sure if that’s the case or not so please don’t quote me on that - just an assumption on my part).\r\n> \r\n\r\nGoing forward, we would probably have to maintain the **current** development version in a `version.txt` file. This is bumped to the next version whenever a release was done. So after a **0.12.1** release we would bump the version in `version.txt` to either **0.12.2** or **0.13.0** (whatever the next version would be). Therefore, we would always publish snapshots with the current development version\r\n\r\n> If we don’t always build the next release (specifically point releases) from master, this might confuse some users, particularly those users who integrate Iceberg into their company’s systems and might try out SNAPSHOT releases before a RC is published.\r\n\r\nI'm not entirely sure I can follow here. The latest SNAPSHOT release is whatever is there on `master` so people have a chance of trying to prepare integration much earlier into their systems. I think this is a big plus and we already had quite a lot occassions where we wished that there would be snapshots of the current version that's being developed :)\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950588198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950593362","html_url":"https://github.com/apache/iceberg/pull/3304#issuecomment-950593362","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3304","id":950593362,"node_id":"IC_kwDOCW7NX844qOdS","user":{"login":"nastra","id":271029,"node_id":"MDQ6VXNlcjI3MTAyOQ==","avatar_url":"https://avatars.githubusercontent.com/u/271029?v=4","gravatar_id":"","url":"https://api.github.com/users/nastra","html_url":"https://github.com/nastra","followers_url":"https://api.github.com/users/nastra/followers","following_url":"https://api.github.com/users/nastra/following{/other_user}","gists_url":"https://api.github.com/users/nastra/gists{/gist_id}","starred_url":"https://api.github.com/users/nastra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nastra/subscriptions","organizations_url":"https://api.github.com/users/nastra/orgs","repos_url":"https://api.github.com/users/nastra/repos","events_url":"https://api.github.com/users/nastra/events{/privacy}","received_events_url":"https://api.github.com/users/nastra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T07:07:27Z","updated_at":"2021-10-25T07:07:27Z","author_association":"CONTRIBUTOR","body":"> > > My biggest concern is that the benchmarks can take a while to run and the stability of the GH Action hosted runners is somewhat unknown (in regards to variability in performance runs)\r\n> > \r\n> > \r\n> > @kbendick I agree and I share the same concern. However, I think it it still better to have a hosted way of running benchmarks, rather than having people to run them locally as the variability in performance will be equally bad, since you most likely will be still doing dev work while you run benchmarks locally.\r\n> > One solution to that problem would be some dedicated GH runners with better CPUs and more memory. Would be interesting to know if that's possible to get from Apache INFRA\r\n> \r\n> I agree with your point here. And at least with time, the GH Actions env will hopefully have some sort of known variability (vs two different local dev envs that can be totally different in terms of available resources and what else the user is doing there).\r\n> \r\n> For that reason, and the fact that this can / should be run in a fork, I think this is a good idea.\r\n> \r\n> In my opinion, if / when we include this, we should:\r\n> \r\n> 1. Ensure we document the input parameters well - Can be done in a follow up.\r\n> 2. Document that the benchmarks shouldn’t be taken as a great source of truth but rather something to help guide developer understanding of code changes (e.g. hopefully people don’t run these benchmarks, then run the same thing somewhere else that’s more stable with a different framework etc, and make production choices off of that). - Also can be a follow up.\r\n> 3. Look into what impact, if any, running GH Actions in forks has on the resource pool for the whole `Apache` GitHub account. I know all projects share a limited set of concurrent runners, but I don’t know whether or not a fork of those projects has the same concerns. - I don’t think that forks use up the ASF’s limited GH Action concurrency / resources, but I admittedly don’t know. I only bring it up as the benchmarks can take quite some time to run.\r\n> 4. Look into the possibility of hosted runners. I know that the Flink project has people run the test suite against Azure (and that the Azure account / resources are free). Possibly that’s an avenue worth exploring? I doubt ASF infra can provide us with much in the way of better guarantees on the GH Action runners. If they can, wonderful. But otherwise, taking a look at how the Flink project has devs set up Azure accounts that are free for running tests might be something to look into (maybe they just do this for free for open-source projects?).\r\n> \r\n> Overall, thanks for working on this. I’m always a little leery of providing much prominence to the JMH tests, but they’re much better than nothing and some power users make great use of them (i.e. - you slightly_smiling_face). I’ve just switched jobs and so don’t have a ton of free cycles, but once I do possibly we can collaborate on a slightly more standardized performance benchmark? I’ve had a WIP / rough version of one I’ve been working with for a while but haven’t found time to get it over the finish line.\r\n\r\nI agree with your observations and I'm planning to look at all of those as follow-ups. I'd like to first get this merged so that we can experiment a bit more and see how stable things really are.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950593362/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950622794","html_url":"https://github.com/apache/iceberg/pull/3326#issuecomment-950622794","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3326","id":950622794,"node_id":"IC_kwDOCW7NX844qVpK","user":{"login":"harshm-dev","id":57615655,"node_id":"MDQ6VXNlcjU3NjE1NjU1","avatar_url":"https://avatars.githubusercontent.com/u/57615655?v=4","gravatar_id":"","url":"https://api.github.com/users/harshm-dev","html_url":"https://github.com/harshm-dev","followers_url":"https://api.github.com/users/harshm-dev/followers","following_url":"https://api.github.com/users/harshm-dev/following{/other_user}","gists_url":"https://api.github.com/users/harshm-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/harshm-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/harshm-dev/subscriptions","organizations_url":"https://api.github.com/users/harshm-dev/orgs","repos_url":"https://api.github.com/users/harshm-dev/repos","events_url":"https://api.github.com/users/harshm-dev/events{/privacy}","received_events_url":"https://api.github.com/users/harshm-dev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T07:48:37Z","updated_at":"2021-10-25T07:48:37Z","author_association":"CONTRIBUTOR","body":"@kbendick any further comments? \r\n\r\nI also need help with the next steps - \r\n`5 workflows awaiting approval\r\nFirst-time contributors need a maintainer to approve running workflows. Learn more.\r\n1 successful check`\r\nI was wondering if you'll be able to help me here.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950622794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950653689","html_url":"https://github.com/apache/iceberg/pull/3095#issuecomment-950653689","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3095","id":950653689,"node_id":"IC_kwDOCW7NX844qdL5","user":{"login":"MOBIN-F","id":11769953,"node_id":"MDQ6VXNlcjExNzY5OTUz","avatar_url":"https://avatars.githubusercontent.com/u/11769953?v=4","gravatar_id":"","url":"https://api.github.com/users/MOBIN-F","html_url":"https://github.com/MOBIN-F","followers_url":"https://api.github.com/users/MOBIN-F/followers","following_url":"https://api.github.com/users/MOBIN-F/following{/other_user}","gists_url":"https://api.github.com/users/MOBIN-F/gists{/gist_id}","starred_url":"https://api.github.com/users/MOBIN-F/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MOBIN-F/subscriptions","organizations_url":"https://api.github.com/users/MOBIN-F/orgs","repos_url":"https://api.github.com/users/MOBIN-F/repos","events_url":"https://api.github.com/users/MOBIN-F/events{/privacy}","received_events_url":"https://api.github.com/users/MOBIN-F/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T08:21:14Z","updated_at":"2021-10-25T08:40:56Z","author_association":"NONE","body":" @hameizi\r\nI merged this PR and did some testing and when I update a record, it actually inserts a new record\r\n\r\nFlink SQL> CREATE TABLE iceberg_table_upsert8(\r\n>     id   BIGINT,\r\n>     data STRING,\r\n>     PRIMARY KEY (id) NOT ENFORCED\r\n> ) WITH (\r\n>      'connector'='iceberg',\r\n>      'format-version' = '2',\r\n>      'catalog-name'='hive_prod',\r\n>      'catalog-type'='hive',\r\n>      'write.upsert.enable'='true',\r\n>      'uri'='thrift://localhost:9083',\r\n>      'warehouse'='file:///tmp/iceberg/'\r\n> );\r\n\r\nINSERT INTO iceberg_table_upsert8 VALUES(1,'qq');\r\n\r\nINSERT INTO iceberg_table_upsert8 VALUES(1,'aa');\r\n\r\nFlink SQL> SELECT * FROM iceberg_table_upsert8 /*+ OPTIONS('streaming'='true', 'monitor-interval'='1s')*/ ;\r\n+----+----------------------+--------------------------------+\r\n| op |                   id |                           data |\r\n+----+----------------------+--------------------------------+\r\n| -D |                    1 |                             qq |\r\n| +I |                    1 |                             qq |\r\n| -D |                    1 |                             aa |\r\n| +I |                    1 |                             aa |\r\n\r\nWhen I use Flink Batch query table ，it has tow records\r\nFlink SQL> select * from iceberg_table_upsert8;\r\n+----+----------------------+--------------------------------+\r\n| op |                   id |                           data |\r\n+----+----------------------+--------------------------------+\r\n| +I |                    1 |                             qq |\r\n| +I |                    1 |                             aa |\r\n+----+----------------------+--------------------------------+\r\nReceived a total of 2 rows","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950653689/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950659188","html_url":"https://github.com/apache/iceberg/pull/3095#issuecomment-950659188","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3095","id":950659188,"node_id":"IC_kwDOCW7NX844qeh0","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T08:26:43Z","updated_at":"2021-10-25T08:26:43Z","author_association":"CONTRIBUTOR","body":"@MOBIN-F It's true, this PR translate update to -D and +I. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950659188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950676190","html_url":"https://github.com/apache/iceberg/pull/3095#issuecomment-950676190","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3095","id":950676190,"node_id":"IC_kwDOCW7NX844qire","user":{"login":"MOBIN-F","id":11769953,"node_id":"MDQ6VXNlcjExNzY5OTUz","avatar_url":"https://avatars.githubusercontent.com/u/11769953?v=4","gravatar_id":"","url":"https://api.github.com/users/MOBIN-F","html_url":"https://github.com/MOBIN-F","followers_url":"https://api.github.com/users/MOBIN-F/followers","following_url":"https://api.github.com/users/MOBIN-F/following{/other_user}","gists_url":"https://api.github.com/users/MOBIN-F/gists{/gist_id}","starred_url":"https://api.github.com/users/MOBIN-F/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MOBIN-F/subscriptions","organizations_url":"https://api.github.com/users/MOBIN-F/orgs","repos_url":"https://api.github.com/users/MOBIN-F/repos","events_url":"https://api.github.com/users/MOBIN-F/events{/privacy}","received_events_url":"https://api.github.com/users/MOBIN-F/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T08:45:43Z","updated_at":"2021-10-25T08:45:43Z","author_association":"NONE","body":"> @MOBIN-F It's true, this PR translate update to -D and +I.\r\n\r\nIt will query the record(1,qq). but this record is from before the update,  Is that right?","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950676190/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950678633","html_url":"https://github.com/apache/iceberg/pull/3095#issuecomment-950678633","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3095","id":950678633,"node_id":"IC_kwDOCW7NX844qjRp","user":{"login":"hameizi","id":18445460,"node_id":"MDQ6VXNlcjE4NDQ1NDYw","avatar_url":"https://avatars.githubusercontent.com/u/18445460?v=4","gravatar_id":"","url":"https://api.github.com/users/hameizi","html_url":"https://github.com/hameizi","followers_url":"https://api.github.com/users/hameizi/followers","following_url":"https://api.github.com/users/hameizi/following{/other_user}","gists_url":"https://api.github.com/users/hameizi/gists{/gist_id}","starred_url":"https://api.github.com/users/hameizi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hameizi/subscriptions","organizations_url":"https://api.github.com/users/hameizi/orgs","repos_url":"https://api.github.com/users/hameizi/repos","events_url":"https://api.github.com/users/hameizi/events{/privacy}","received_events_url":"https://api.github.com/users/hameizi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T08:48:24Z","updated_at":"2021-10-25T08:48:24Z","author_association":"CONTRIBUTOR","body":"> > @MOBIN-F It's true, this PR translate update to -D and +I.\r\n> \r\n> It will query the record(1,qq). but this record is from before the update, Is that right?\r\n\r\nIf you don't query op of data, you will get only one result (1,aa).","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950678633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950864317","html_url":"https://github.com/apache/iceberg/issues/3303#issuecomment-950864317","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3303","id":950864317,"node_id":"IC_kwDOCW7NX844rQm9","user":{"login":"openinx","id":5028729,"node_id":"MDQ6VXNlcjUwMjg3Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/5028729?v=4","gravatar_id":"","url":"https://api.github.com/users/openinx","html_url":"https://github.com/openinx","followers_url":"https://api.github.com/users/openinx/followers","following_url":"https://api.github.com/users/openinx/following{/other_user}","gists_url":"https://api.github.com/users/openinx/gists{/gist_id}","starred_url":"https://api.github.com/users/openinx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/openinx/subscriptions","organizations_url":"https://api.github.com/users/openinx/orgs","repos_url":"https://api.github.com/users/openinx/repos","events_url":"https://api.github.com/users/openinx/events{/privacy}","received_events_url":"https://api.github.com/users/openinx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T12:14:58Z","updated_at":"2021-10-25T12:14:58Z","author_association":"MEMBER","body":"Hi @pvary , I see some people from the Chinese Iceberg group want to write CDC deletes into apache iceberg v2 table.  I think it's great to get this merged before the next release 0.13.0, so I prepared [PR](https://github.com/apache/iceberg/pull/3366) for this. Hope you don't mind I've picked this.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/950864317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951026400","html_url":"https://github.com/apache/iceberg/pull/3317#issuecomment-951026400","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3317","id":951026400,"node_id":"IC_kwDOCW7NX844r4Lg","user":{"login":"KnightChess","id":20125927,"node_id":"MDQ6VXNlcjIwMTI1OTI3","avatar_url":"https://avatars.githubusercontent.com/u/20125927?v=4","gravatar_id":"","url":"https://api.github.com/users/KnightChess","html_url":"https://github.com/KnightChess","followers_url":"https://api.github.com/users/KnightChess/followers","following_url":"https://api.github.com/users/KnightChess/following{/other_user}","gists_url":"https://api.github.com/users/KnightChess/gists{/gist_id}","starred_url":"https://api.github.com/users/KnightChess/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnightChess/subscriptions","organizations_url":"https://api.github.com/users/KnightChess/orgs","repos_url":"https://api.github.com/users/KnightChess/repos","events_url":"https://api.github.com/users/KnightChess/events{/privacy}","received_events_url":"https://api.github.com/users/KnightChess/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T15:09:51Z","updated_at":"2021-10-25T15:09:51Z","author_association":"CONTRIBUTOR","body":"the usage of ancestors_of has been added to the document","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951026400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951038942","html_url":"https://github.com/apache/iceberg/pull/3368#issuecomment-951038942","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3368","id":951038942,"node_id":"IC_kwDOCW7NX844r7Pe","user":{"login":"izchen","id":67534059,"node_id":"MDQ6VXNlcjY3NTM0MDU5","avatar_url":"https://avatars.githubusercontent.com/u/67534059?v=4","gravatar_id":"","url":"https://api.github.com/users/izchen","html_url":"https://github.com/izchen","followers_url":"https://api.github.com/users/izchen/followers","following_url":"https://api.github.com/users/izchen/following{/other_user}","gists_url":"https://api.github.com/users/izchen/gists{/gist_id}","starred_url":"https://api.github.com/users/izchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/izchen/subscriptions","organizations_url":"https://api.github.com/users/izchen/orgs","repos_url":"https://api.github.com/users/izchen/repos","events_url":"https://api.github.com/users/izchen/events{/privacy}","received_events_url":"https://api.github.com/users/izchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T15:22:22Z","updated_at":"2021-10-25T15:22:22Z","author_association":"CONTRIBUTOR","body":"Related issue: https://github.com/apache/iceberg/issues/2838","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951038942/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951040789","html_url":"https://github.com/apache/iceberg/pull/3368#issuecomment-951040789","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3368","id":951040789,"node_id":"IC_kwDOCW7NX844r7sV","user":{"login":"izchen","id":67534059,"node_id":"MDQ6VXNlcjY3NTM0MDU5","avatar_url":"https://avatars.githubusercontent.com/u/67534059?v=4","gravatar_id":"","url":"https://api.github.com/users/izchen","html_url":"https://github.com/izchen","followers_url":"https://api.github.com/users/izchen/followers","following_url":"https://api.github.com/users/izchen/following{/other_user}","gists_url":"https://api.github.com/users/izchen/gists{/gist_id}","starred_url":"https://api.github.com/users/izchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/izchen/subscriptions","organizations_url":"https://api.github.com/users/izchen/orgs","repos_url":"https://api.github.com/users/izchen/repos","events_url":"https://api.github.com/users/izchen/events{/privacy}","received_events_url":"https://api.github.com/users/izchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T15:24:22Z","updated_at":"2021-10-25T15:24:22Z","author_association":"CONTRIBUTOR","body":"@rdblue @RussellSpitzer  , could you help to review this PR? :)","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951040789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951054059","html_url":"https://github.com/apache/iceberg/pull/3204#issuecomment-951054059","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3204","id":951054059,"node_id":"IC_kwDOCW7NX844r-7r","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T15:38:59Z","updated_at":"2021-10-25T15:38:59Z","author_association":"CONTRIBUTOR","body":"I've been thinking about this case and I think that the right way to do this is to set the sequence number on individual files rather than at the snapshot level. I don't think that we should change the sequence number of the snapshot or manifest list. We should just set the sequence number of individual data files. Basically, I agree with @yyanyy's [comment](https://github.com/apache/iceberg/issues/2308#issuecomment-801330831):\r\n\r\n> I think there are two seqNum concepts here: seqNum for the table/commit and seqNum for the file. I think it's a reasonable approach to mark the rewritten files with the old seqNum, but I'm not sure if we necessarily need to use an old sequence number for the commit since they are stored as part of the snapshot, and suddenly have an old seqNum within the snapshot could be confusing even if there's no other implication.\r\n\r\nI think we need to set the file sequence numbers. That raises the question: what do we set them to? Ideally, we would use the latest, but the delete file commit has claimed that number so we need to go with the sequence number that is less than any other commits. That would be the sequence number that was current when rewrite operation started. It would be nice to find a way around reusing a sequence number from a different snapshot, but I don't see a good way to do that right now. We can possibly fix that up later by skipping sequence numbers.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951054059/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951071385","html_url":"https://github.com/apache/iceberg/pull/3368#issuecomment-951071385","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3368","id":951071385,"node_id":"IC_kwDOCW7NX844sDKZ","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T15:59:38Z","updated_at":"2021-10-25T15:59:38Z","author_association":"CONTRIBUTOR","body":"@izchen, could you fix just the latest version of Spark and then we'll port the changes to the other versions when after it is merged? That way we don't have a commit that affects all Spark versions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951071385/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951077140","html_url":"https://github.com/apache/iceberg/pull/3369#issuecomment-951077140","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3369","id":951077140,"node_id":"IC_kwDOCW7NX844sEkU","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T16:06:09Z","updated_at":"2021-10-25T16:06:09Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer @szehon-ho @flyrain @rdblue @kbendick @karuppayya, any thoughts? I think our current metadata-only delete implementation is very limited.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951077140/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951078308","html_url":"https://github.com/apache/iceberg/pull/3365#issuecomment-951078308","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3365","id":951078308,"node_id":"IC_kwDOCW7NX844sE2k","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T16:07:26Z","updated_at":"2021-10-25T16:07:26Z","author_association":"CONTRIBUTOR","body":"@openinx, why would a manifest merge be triggered? It seems like this should not happen, or should happen consistently. I don't understand why this could cause a test to be flaky.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951078308/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951079798","html_url":"https://github.com/apache/iceberg/pull/3287#issuecomment-951079798","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3287","id":951079798,"node_id":"IC_kwDOCW7NX844sFN2","user":{"login":"aokolnychyi","id":6235869,"node_id":"MDQ6VXNlcjYyMzU4Njk=","avatar_url":"https://avatars.githubusercontent.com/u/6235869?v=4","gravatar_id":"","url":"https://api.github.com/users/aokolnychyi","html_url":"https://github.com/aokolnychyi","followers_url":"https://api.github.com/users/aokolnychyi/followers","following_url":"https://api.github.com/users/aokolnychyi/following{/other_user}","gists_url":"https://api.github.com/users/aokolnychyi/gists{/gist_id}","starred_url":"https://api.github.com/users/aokolnychyi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aokolnychyi/subscriptions","organizations_url":"https://api.github.com/users/aokolnychyi/orgs","repos_url":"https://api.github.com/users/aokolnychyi/repos","events_url":"https://api.github.com/users/aokolnychyi/events{/privacy}","received_events_url":"https://api.github.com/users/aokolnychyi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T16:08:58Z","updated_at":"2021-10-25T16:08:58Z","author_association":"CONTRIBUTOR","body":"Let me take another look today.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951079798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951113629","html_url":"https://github.com/apache/iceberg/pull/3365#issuecomment-951113629","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3365","id":951113629,"node_id":"IC_kwDOCW7NX844sNed","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T16:49:29Z","updated_at":"2021-10-25T16:49:29Z","author_association":"COLLABORATOR","body":"@rdblue for context, the possible issue is that FlinkSinks have auto-commit , and so sometimes there is a commit between the two writes of the same record value and thus two files are created.  The test (checking that same records go to same file) was asserting only one file created.\r\n\r\nThanks @openinx for giving a try to fix it.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951113629/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951125658","html_url":"https://github.com/apache/iceberg/pull/3368#issuecomment-951125658","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3368","id":951125658,"node_id":"IC_kwDOCW7NX844sQaa","user":{"login":"izchen","id":67534059,"node_id":"MDQ6VXNlcjY3NTM0MDU5","avatar_url":"https://avatars.githubusercontent.com/u/67534059?v=4","gravatar_id":"","url":"https://api.github.com/users/izchen","html_url":"https://github.com/izchen","followers_url":"https://api.github.com/users/izchen/followers","following_url":"https://api.github.com/users/izchen/following{/other_user}","gists_url":"https://api.github.com/users/izchen/gists{/gist_id}","starred_url":"https://api.github.com/users/izchen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/izchen/subscriptions","organizations_url":"https://api.github.com/users/izchen/orgs","repos_url":"https://api.github.com/users/izchen/repos","events_url":"https://api.github.com/users/izchen/events{/privacy}","received_events_url":"https://api.github.com/users/izchen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:04:55Z","updated_at":"2021-10-25T17:04:55Z","author_association":"CONTRIBUTOR","body":"@rdblue done, could you help to review this PR again？","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951125658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951127796","html_url":"https://github.com/apache/iceberg/issues/3363#issuecomment-951127796","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3363","id":951127796,"node_id":"IC_kwDOCW7NX844sQ70","user":{"login":"szehon-ho","id":20555759,"node_id":"MDQ6VXNlcjIwNTU1NzU5","avatar_url":"https://avatars.githubusercontent.com/u/20555759?v=4","gravatar_id":"","url":"https://api.github.com/users/szehon-ho","html_url":"https://github.com/szehon-ho","followers_url":"https://api.github.com/users/szehon-ho/followers","following_url":"https://api.github.com/users/szehon-ho/following{/other_user}","gists_url":"https://api.github.com/users/szehon-ho/gists{/gist_id}","starred_url":"https://api.github.com/users/szehon-ho/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/szehon-ho/subscriptions","organizations_url":"https://api.github.com/users/szehon-ho/orgs","repos_url":"https://api.github.com/users/szehon-ho/repos","events_url":"https://api.github.com/users/szehon-ho/events{/privacy}","received_events_url":"https://api.github.com/users/szehon-ho/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:07:19Z","updated_at":"2021-10-25T17:07:53Z","author_association":"COLLABORATOR","body":"@pvary is this a Hive problem in 2.1.1?\r\n\r\nSeems we make a valid RetryingHiveMetastoreClient.getProxy call (ref: https://github.com/apache/hive/blob/rel/release-2.1.1/metastore/src/java/org/apache/hadoop/hive/metastore/RetryingMetaStoreClient.java#L86). Then it  internally it calls a method in HiveMetastoreClient that does not exist in this version?  That's strange.\r\n\r\nMaybe I can switch to call: https://github.com/apache/hive/blob/rel/release-2.1.1/metastore/src/java/org/apache/hadoop/hive/metastore/RetryingMetaStoreClient.java#L97","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951127796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951133690","html_url":"https://github.com/apache/iceberg/pull/3015#issuecomment-951133690","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3015","id":951133690,"node_id":"IC_kwDOCW7NX844sSX6","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:14:10Z","updated_at":"2021-10-25T17:14:10Z","author_association":"CONTRIBUTOR","body":"@RussellSpitzer what do you mean about breaking position-based indexing? I wouldn't expect anyone to be doing that... or they could continue to request a projection that matches what they used before. Is there a case where you think this is a risk? I think you should always expect the positions to match the schema that you requested, and there is no guarantee that the table schema won't change.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951133690/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951135459","html_url":"https://github.com/apache/iceberg/pull/3015#issuecomment-951135459","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3015","id":951135459,"node_id":"IC_kwDOCW7NX844sSzj","user":{"login":"RussellSpitzer","id":413025,"node_id":"MDQ6VXNlcjQxMzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/413025?v=4","gravatar_id":"","url":"https://api.github.com/users/RussellSpitzer","html_url":"https://github.com/RussellSpitzer","followers_url":"https://api.github.com/users/RussellSpitzer/followers","following_url":"https://api.github.com/users/RussellSpitzer/following{/other_user}","gists_url":"https://api.github.com/users/RussellSpitzer/gists{/gist_id}","starred_url":"https://api.github.com/users/RussellSpitzer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RussellSpitzer/subscriptions","organizations_url":"https://api.github.com/users/RussellSpitzer/orgs","repos_url":"https://api.github.com/users/RussellSpitzer/repos","events_url":"https://api.github.com/users/RussellSpitzer/events{/privacy}","received_events_url":"https://api.github.com/users/RussellSpitzer/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T17:16:21Z","updated_at":"2021-10-25T17:16:21Z","author_association":"MEMBER","body":"> @RussellSpitzer what do you mean about breaking position-based indexing? I wouldn't expect anyone to be doing that... or they could continue to request a projection that matches what they used before. Is there a case where you think this is a risk? I think you should always expect the positions to match the schema that you requested, and there is no guarantee that the table schema won't change.\r\n\r\nYep, I just know some times people do silly things. I think logically there is no issue with changing the internal ordering.\r\n\r\n","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951135459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951170389","html_url":"https://github.com/apache/iceberg/pull/3015#issuecomment-951170389","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3015","id":951170389,"node_id":"IC_kwDOCW7NX844sbVV","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T18:02:54Z","updated_at":"2021-10-25T18:02:54Z","author_association":"CONTRIBUTOR","body":"Looks good to me. @szehon-ho, can you rebase this? Also, should we do this for just one Spark version and port to the others afterward? That seems like a simpler way to manage multiple versions.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951170389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951201985","html_url":"https://github.com/apache/iceberg/pull/3056#issuecomment-951201985","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3056","id":951201985,"node_id":"IC_kwDOCW7NX844sjDB","user":{"login":"wypoon","id":3925490,"node_id":"MDQ6VXNlcjM5MjU0OTA=","avatar_url":"https://avatars.githubusercontent.com/u/3925490?v=4","gravatar_id":"","url":"https://api.github.com/users/wypoon","html_url":"https://github.com/wypoon","followers_url":"https://api.github.com/users/wypoon/followers","following_url":"https://api.github.com/users/wypoon/following{/other_user}","gists_url":"https://api.github.com/users/wypoon/gists{/gist_id}","starred_url":"https://api.github.com/users/wypoon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wypoon/subscriptions","organizations_url":"https://api.github.com/users/wypoon/orgs","repos_url":"https://api.github.com/users/wypoon/repos","events_url":"https://api.github.com/users/wypoon/events{/privacy}","received_events_url":"https://api.github.com/users/wypoon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T18:41:25Z","updated_at":"2021-10-25T18:41:25Z","author_association":"CONTRIBUTOR","body":"Support for Spark 3.2 has been added. I think the `purgeTable` support can be added to `SparkCatalog` in v3.2. Two versions for the new test can be added, one in v3.0 and another in v3.2, with different expected behavior.\r\nIf we add v3.1, then the `purgeTable` support can be added to `SparkCatalog` in v3.1 as well.","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951201985/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951257459","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-951257459","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":951257459,"node_id":"IC_kwDOCW7NX844swlz","user":{"login":"rdblue","id":87915,"node_id":"MDQ6VXNlcjg3OTE1","avatar_url":"https://avatars.githubusercontent.com/u/87915?v=4","gravatar_id":"","url":"https://api.github.com/users/rdblue","html_url":"https://github.com/rdblue","followers_url":"https://api.github.com/users/rdblue/followers","following_url":"https://api.github.com/users/rdblue/following{/other_user}","gists_url":"https://api.github.com/users/rdblue/gists{/gist_id}","starred_url":"https://api.github.com/users/rdblue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rdblue/subscriptions","organizations_url":"https://api.github.com/users/rdblue/orgs","repos_url":"https://api.github.com/users/rdblue/repos","events_url":"https://api.github.com/users/rdblue/events{/privacy}","received_events_url":"https://api.github.com/users/rdblue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T19:54:30Z","updated_at":"2021-10-25T19:54:46Z","author_association":"CONTRIBUTOR","body":"Looks like there are style check failures:\r\n\r\n```\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:563:56: ',' is not followed by whitespace. [WhitespaceAfter]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:567:69: WhitespaceAround: '{' is not preceded with whitespace. [WhitespaceAround]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:568:7: 'block' child has incorrect indentation level 6, expected level should be one of the following: 8, 10, 12. [Indentation]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:569:7: 'block' child has incorrect indentation level 6, expected level should be one of the following: 8, 10, 12. [Indentation]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:570:7: 'block' child has incorrect indentation level 6, expected level should be one of the following: 8, 10, 12. [Indentation]\r\nError: eckstyle] [ERROR] /home/runner/work/iceberg/iceberg/core/src/test/java/org/apache/iceberg/jdbc/TestJdbcCatalog.java:571:5: 'block rcurly' has incorrect indentation level 4, expected level should be one of the following: 6, 8. [Indentation]\r\n```","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951257459/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951261216","html_url":"https://github.com/apache/iceberg/pull/3275#issuecomment-951261216","issue_url":"https://api.github.com/repos/apache/iceberg/issues/3275","id":951261216,"node_id":"IC_kwDOCW7NX844sxgg","user":{"login":"nssalian","id":8526007,"node_id":"MDQ6VXNlcjg1MjYwMDc=","avatar_url":"https://avatars.githubusercontent.com/u/8526007?v=4","gravatar_id":"","url":"https://api.github.com/users/nssalian","html_url":"https://github.com/nssalian","followers_url":"https://api.github.com/users/nssalian/followers","following_url":"https://api.github.com/users/nssalian/following{/other_user}","gists_url":"https://api.github.com/users/nssalian/gists{/gist_id}","starred_url":"https://api.github.com/users/nssalian/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nssalian/subscriptions","organizations_url":"https://api.github.com/users/nssalian/orgs","repos_url":"https://api.github.com/users/nssalian/repos","events_url":"https://api.github.com/users/nssalian/events{/privacy}","received_events_url":"https://api.github.com/users/nssalian/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-25T19:59:56Z","updated_at":"2021-10-25T19:59:56Z","author_association":"CONTRIBUTOR","body":"Will fix. In the upcoming commits. ","reactions":{"url":"https://api.github.com/repos/apache/iceberg/issues/comments/951261216/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]