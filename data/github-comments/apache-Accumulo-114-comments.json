[{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601674344","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1601674344","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1601674344,"node_id":"IC_kwDOACaFSM5fd5xo","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-21T21:03:25Z","updated_at":"2023-06-21T21:03:25Z","author_association":"MEMBER","body":"> The reference in the documentation for creating \"empty\" files is under the Advanced Troubleshooting section - Data Corruption (https://accumulo.apache.org/docs/2.x/troubleshooting/advanced). (It was easiest to have an `empty.rf` file lying around and just use that)\r\n\r\nIn that example, the file is usually renamed to whatever the missing/corrupt file was. But I'm imagining cases where a user might perform surgery and not use our internal naming conventions (they shouldn't have to). It would be a surprising breakage.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601674344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601719571","html_url":"https://github.com/apache/accumulo/issues/3368#issuecomment-1601719571","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3368","id":1601719571,"node_id":"IC_kwDOACaFSM5feE0T","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-21T21:40:20Z","updated_at":"2023-06-21T21:40:20Z","author_association":"MEMBER","body":"A change was already released to address this in 2.1.1 (what was 2.1.1-RC2). Rather than introduce a bunch of confusion over the target/fix versions, I'm (re-)closing this, and creating a new issue, #3512 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601719571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601729135","html_url":"https://github.com/apache/accumulo/pull/3501#issuecomment-1601729135","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3501","id":1601729135,"node_id":"IC_kwDOACaFSM5feHJv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-21T21:50:20Z","updated_at":"2023-06-21T21:50:20Z","author_association":"MEMBER","body":"Closing based on last comment because #3509 is merged and the performance numbers look good on that PR. Can re-open to address this as follow-on, if still needed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601729135/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601803506","html_url":"https://github.com/apache/accumulo/issues/3495#issuecomment-1601803506","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3495","id":1601803506,"node_id":"IC_kwDOACaFSM5feZTy","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-21T23:06:05Z","updated_at":"2023-06-21T23:06:05Z","author_association":"MEMBER","body":"> I wonder if the endless loop was due to the password being wrong vs not being set I wonder if this issue exists in 2.1.0 with an incorrect password set and authTimeout occurring\r\n\r\nConfirmed that was the case. It seems to me that any time after the first failure, whether we're using a client config file or not, it should revert to an interactive password prompt. If the credentials are bad in the client config file, it's never going to work and you should be prompted, and if it's bad when interactively prompted the first time, then the retry is also going to be an interactive prompt. So, in both cases after the first attempt, it should retry using an interactive prompt.\r\n\r\nThe message could still be cleaned up in the re-authentication case when using the client config file, though. It seems weird to ask the user to re-authenticate, only to automatically have it happen for them... at the very least, a subsequent message could be shown that says it was done using the client config file, so the user doesn't just see a request to re-authenticate, followed by no prompt to actually do so.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1601803506/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1602548778","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1602548778","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1602548778,"node_id":"IC_kwDOACaFSM5fhPQq","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T12:26:23Z","updated_at":"2023-06-22T12:26:23Z","author_association":"CONTRIBUTOR","body":"We use the shell to do a lot of operations.  This bit us yet again today where we started getting spammed with error messages because of a null pointer exception when trying to create the compaction dispatcher.  The root cause was that the SimplyCompactionDispatcher could not be found in the classloader context that had been deleted but yet a cloned table was still pointing to it.  Please up the priority of working what I strongly consider to be a bug.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1602548778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1602957664","html_url":"https://github.com/apache/accumulo/issues/3500#issuecomment-1602957664","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3500","id":1602957664,"node_id":"IC_kwDOACaFSM5fizFg","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T16:16:47Z","updated_at":"2023-06-22T16:16:47Z","author_association":"CONTRIBUTOR","body":"Closed by #3509 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1602957664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603095186","html_url":"https://github.com/apache/accumulo/issues/3486#issuecomment-1603095186","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3486","id":1603095186,"node_id":"IC_kwDOACaFSM5fjUqS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T18:00:48Z","updated_at":"2023-06-22T18:00:48Z","author_association":"MEMBER","body":"For this test, it should probably be a unit test that mocks what ZK returns, rather than do a full minicluster IT for this, when all we're doing is verifying the implementation of each impl. Keeping ZK out of it will make the test much more stable, and avoiding a full minicluster will make it much faster to run.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603095186/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603309489","html_url":"https://github.com/apache/accumulo/issues/3515#issuecomment-1603309489","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3515","id":1603309489,"node_id":"IC_kwDOACaFSM5fkI-x","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T21:01:12Z","updated_at":"2023-06-22T21:01:29Z","author_association":"CONTRIBUTOR","body":"For compactions it would be good to consider root and metadata table for this change.  I opened #3518 as a general issue around getting the root and metadata table to support external compactions.  We will need those compacting in mini also.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603309489/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603315209","html_url":"https://github.com/apache/accumulo/issues/3517#issuecomment-1603315209","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3517","id":1603315209,"node_id":"IC_kwDOACaFSM5fkKYJ","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T21:05:45Z","updated_at":"2023-06-22T21:05:45Z","author_association":"CONTRIBUTOR","body":"In #3513 the compaction plugins do not retrieve compaction execution hints from the current config stored in ZK.  These will need to be retrieved from somewhere.  One nice thing about storing a ZK node per a user compaction is that the config will be immutable making it easier to cache in a caffine cache.  The way the config is currently stored its not easy to cache.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603315209/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603319446","html_url":"https://github.com/apache/accumulo/issues/3518#issuecomment-1603319446","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3518","id":1603319446,"node_id":"IC_kwDOACaFSM5fkLaW","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T21:09:19Z","updated_at":"2023-06-22T21:09:19Z","author_association":"CONTRIBUTOR","body":"FWIW I remember during 2.1 testing that at some point internal compactions were broken.  IIRC @milleruntime configured his local instance to perform all compactions externally and it worked.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603319446/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603341021","html_url":"https://github.com/apache/accumulo/issues/3521#issuecomment-1603341021","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3521","id":1603341021,"node_id":"IC_kwDOACaFSM5fkQrd","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T21:29:23Z","updated_at":"2023-06-22T21:29:23Z","author_association":"CONTRIBUTOR","body":"May be best to do this after #3522","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603341021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603366287","html_url":"https://github.com/apache/accumulo/issues/3525#issuecomment-1603366287","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3525","id":1603366287,"node_id":"IC_kwDOACaFSM5fkW2P","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T21:58:08Z","updated_at":"2023-06-22T21:58:08Z","author_association":"CONTRIBUTOR","body":"Some of the test in ExternalCompactionIT explicitly start compactor processes in mini, that will probably not be needed anymore. That could be cleaned up as part of this issue or as part of #3515 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603366287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603395119","html_url":"https://github.com/apache/accumulo/issues/3468#issuecomment-1603395119","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3468","id":1603395119,"node_id":"IC_kwDOACaFSM5fkd4v","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T22:34:13Z","updated_at":"2023-06-22T22:34:13Z","author_association":"CONTRIBUTOR","body":"In #3513 this plugin was called for user compaction.  However it may still need to be called for the case when this plugin is configured on a table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603395119/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603396532","html_url":"https://github.com/apache/accumulo/issues/3467#issuecomment-1603396532","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3467","id":1603396532,"node_id":"IC_kwDOACaFSM5fkeO0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T22:36:22Z","updated_at":"2023-06-22T22:36:22Z","author_association":"CONTRIBUTOR","body":"This was addressed in #3513, should be able to have multiple concurrent compactions running on a tablet after #3513.  The new requireSame call added to ample made this complex check easy to implement. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603396532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603398109","html_url":"https://github.com/apache/accumulo/issues/3518#issuecomment-1603398109","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3518","id":1603398109,"node_id":"IC_kwDOACaFSM5fkend","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T22:38:34Z","updated_at":"2023-06-22T22:38:34Z","author_association":"CONTRIBUTOR","body":"This is a duplicate of #3463.  \n\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603398109/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603398947","html_url":"https://github.com/apache/accumulo/issues/3518#issuecomment-1603398947","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3518","id":1603398947,"node_id":"IC_kwDOACaFSM5fke0j","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T22:39:47Z","updated_at":"2023-06-22T22:39:47Z","author_association":"CONTRIBUTOR","body":"> FWIW I remember during 2.1 testing that at some point internal compactions were broken. IIRC @milleruntime configured his local instance to perform all compactions externally and it worked.\n\nMaybe if we change the default config, it will always work now that we have the mini changes.  Fingers crossed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603398947/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603438131","html_url":"https://github.com/apache/accumulo/issues/3462#issuecomment-1603438131","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3462","id":1603438131,"node_id":"IC_kwDOACaFSM5fkoYz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T23:35:48Z","updated_at":"2023-06-22T23:36:15Z","author_association":"CONTRIBUTOR","body":"In #3513 user compactions were moved to the manager from the tablet server.  That change does not reliably refresh tablets either.  It was deferred intentionally  so that reliable refresh could be considered together for user and system compactions.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603438131/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603439618","html_url":"https://github.com/apache/accumulo/issues/3528#issuecomment-1603439618","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3528","id":1603439618,"node_id":"IC_kwDOACaFSM5fkowC","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T23:38:31Z","updated_at":"2023-06-22T23:43:55Z","author_association":"CONTRIBUTOR","body":"I think solving this problem is important.  If a user has overly aggressive compaction configuration that has caused many more jobs than they want to be queued and they change the config to be less aggressive then its important that the previously queued jobs go away ( w/o having to restart the manager).","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603439618/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603443727","html_url":"https://github.com/apache/accumulo/issues/3528#issuecomment-1603443727","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3528","id":1603443727,"node_id":"IC_kwDOACaFSM5fkpwP","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-22T23:45:20Z","updated_at":"2023-06-22T23:45:20Z","author_association":"CONTRIBUTOR","body":"Hopefully we can have an IT that tests this change when its made.  Not completely sure that is possible.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603443727/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603476512","html_url":"https://github.com/apache/accumulo/issues/3467#issuecomment-1603476512","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3467","id":1603476512,"node_id":"IC_kwDOACaFSM5fkxwg","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T00:34:25Z","updated_at":"2023-06-23T00:34:25Z","author_association":"MEMBER","body":"> This was addressed in #3513\r\n\r\nThat PR is still open. Linking the issue with the PR and re-opening this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603476512/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603621716","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1603621716","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1603621716,"node_id":"IC_kwDOACaFSM5flVNU","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T03:02:49Z","updated_at":"2023-06-23T03:02:49Z","author_association":"MEMBER","body":"@ivakegg It's not clear to me how changing the behavior of `createtable -cc` would have prevented the errors you described in your last comment. If the cloned table had a bad/out-of-date config, then copying it to a new table using `createtable -cc clonedTable newTable` would have copied over the bad configuration from the cloned table, in both the current behavior and the desired behavior, because the bad config was on the table's config itself and not inherited. If I'm mistaken on this, can you please elaborate as to where the config was stored, and what your desired behavior was?\r\n\r\n> Please up the priority of working what I strongly consider to be a bug.\r\n\r\nI will grant that there is a mismatch between the behavior of this flag and user expectations in some cases, and that the current behavior may make it unsuitable for certain use cases (such as the one described), but it's not a bug. It is still working as intended, copying over the effective table configuration.\r\n\r\nWe can try to support your use case better by adding new features for you, but the current code is not a bug.\r\n\r\nHave you tried, or at least considered trying, the alternative approach using a NewTableConfiguration as a table template, rather than using a pre-existing table? Or subtracting out the configs stored at the system level that you want to inherit after copying from another table?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1603621716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604257963","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1604257963","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1604257963,"node_id":"IC_kwDOACaFSM5fnwir","user":{"login":"alerman","id":119506,"node_id":"MDQ6VXNlcjExOTUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/119506?v=4","gravatar_id":"","url":"https://api.github.com/users/alerman","html_url":"https://github.com/alerman","followers_url":"https://api.github.com/users/alerman/followers","following_url":"https://api.github.com/users/alerman/following{/other_user}","gists_url":"https://api.github.com/users/alerman/gists{/gist_id}","starred_url":"https://api.github.com/users/alerman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alerman/subscriptions","organizations_url":"https://api.github.com/users/alerman/orgs","repos_url":"https://api.github.com/users/alerman/repos","events_url":"https://api.github.com/users/alerman/events{/privacy}","received_events_url":"https://api.github.com/users/alerman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T13:05:34Z","updated_at":"2023-06-23T13:05:34Z","author_association":"CONTRIBUTOR","body":"@ctubbsii The Table configuration was not bad, when the table was cloned. Here is the steps that cause this for us:\r\n\r\n1. System wide context is set to CONTEXTA (in 1.10 with table.classpath.context, in 2.1.0 with table.class.loader.context) -- This is _not_ set on the table itself\r\n2. Table SRCTABLE is cloned to DESTTABLE using `-cc`, which adds a table level setting for the above property\r\n3. CONTEXTB is added, and the property is updated (in 1.10 with table.classpath.context, in 2.1.0 with table.class.loader.context)\r\n4. After some time, CONTEXTA is deleted\r\n5. DESTTABLE now throws errors because CONTEXTA is gone\r\n\r\nAs the user, i have no idea that there is a table level property unless I go check. This isnt expected. SRCTABLE did not have a table level context set, so why does DESTTABLE. This didn't just copy the config, it added new table level properties which were not set on SRCTABLE when the create with copy config was run","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604257963/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604312581","html_url":"https://github.com/apache/accumulo/issues/3529#issuecomment-1604312581","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3529","id":1604312581,"node_id":"IC_kwDOACaFSM5fn94F","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T13:48:45Z","updated_at":"2023-06-23T13:48:45Z","author_association":"CONTRIBUTOR","body":"It really seems that isPropertySet is checking if the key exists, not necessarily that the property was set.  So far, it looks like any property that we have defined will return true - the check will climb the hierarchy and if not found, it will check the default - which will exist and return true.  This is even if the value is null or an empty string as the default value.\r\n\r\nThe only time that isPropertySet would seem to work as excepted would be for custom properties - if a custom property is set, it will return true.  If not, there will not be a default, so it will be false.  That still leaves the determination if the set value is valid or not up to the caller.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604312581/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604319936","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1604319936","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1604319936,"node_id":"IC_kwDOACaFSM5fn_rA","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T13:54:40Z","updated_at":"2023-06-23T14:07:18Z","author_association":"CONTRIBUTOR","body":"TL;DR Would adding a `overrides only` flag for the table clone config (`-cc`) command work as a solution?\r\n\r\n@alerman I made a visual based off your steps. \r\n\r\nOriginal State:\r\n| Tables | Table Properties | System Properties |\r\n| ------------- | ------------- | ------------- |\r\n| SRCTABLE  | N/A | table.class.loader.context=CONTEXT-A |\r\n\r\nAfter Table Clone using `-cc`:\r\n| Tables | Table Properties | System Properties |\r\n| ------------- | ------------- | ------------- |\r\n| SRCTABLE  | N/A | table.class.loader.context=CONTEXT-A |\r\n| DESTTABLE  | table.class.loader.context=CONTEXT-A | table.class.loader.context=CONTEXT-A |\r\n\r\nA new system context is created (CONTEXT-B) and the old context (CONTEXT-A) is deleted:\r\n| Tables | Table Properties | System Properties |\r\n| ------------- | ------------- | ------------- |\r\n| SRCTABLE  | N/A | table.class.loader.context=CONTEXT-B |\r\n| DESTTABLE  | table.class.loader.context=CONTEXT-A | table.class.loader.context=CONTEXT-B |\r\n\r\nDESTTABLE now throws errors due to the missing CONTEXT-A\r\n\r\nValidating the table config is time consuming as it is also a per-table check rather than a per-property check. \r\nThe `config -f table.class.loader.context` command doesn't show per-table property overrides unless a specific table name is also passed\r\n`config -t DESTTABLE -f table.class.loader.context`. \r\n\r\nAny table clone operation run would need a comparison of the `@override` results of both table configs. \r\n\r\n\r\nGiven that the overrides are probably the only desired parts of the table config in this scenario, is it possible to just selectively copy those out to the clone table?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604319936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604382317","html_url":"https://github.com/apache/accumulo/pull/3480#issuecomment-1604382317","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3480","id":1604382317,"node_id":"IC_kwDOACaFSM5foO5t","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T14:41:46Z","updated_at":"2023-06-23T14:41:46Z","author_association":"CONTRIBUTOR","body":"As part of the elasticity work we created a few tables (like this [one](https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=247828052)) and these were really helpful in thinking through things.  I was wondering if it would be useful to create a table for these range changes and was thinking about something like the following.\r\n\r\n Operation | Needs path | Needs range | updates tablet files\r\n -|-|-|-\r\nScan | Y | Y | N\r\nCompaction | Y | Y | N\r\nReplace volumes | Y | N | Y\r\nGC ref scan | Y | N | N\r\nSet property | N | N | N","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604382317/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604388898","html_url":"https://github.com/apache/accumulo/pull/3480#issuecomment-1604388898","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3480","id":1604388898,"node_id":"IC_kwDOACaFSM5foQgi","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T14:46:39Z","updated_at":"2023-06-23T14:46:39Z","author_association":"CONTRIBUTOR","body":"> As part of the elasticity work we created a few tables (like this [one](https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=247828052)) and these were really helpful in thinking through things. I was wondering if it would be useful to create a table for these range changes and was thinking about something like the following.\r\n> \r\n> Operation\tNeeds path\tNeeds range\tupdates tablet files\r\n> Scan\tY\tY\tN\r\n> Compaction\tY\tY\tN\r\n> Replace volumes\tY\tN\tY\r\n> GC ref scan\tY\tN\tN\r\n> Set property\tN\tN\tN\r\n\r\nA table like this is really helpful. It should make it much easier to verify correctness and to test if we document what needs to care about certain things. As I start to write tests I can reference this to make sure things look good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604388898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604464577","html_url":"https://github.com/apache/accumulo/pull/3531#issuecomment-1604464577","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3531","id":1604464577,"node_id":"IC_kwDOACaFSM5foi_B","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T15:42:24Z","updated_at":"2023-06-23T15:42:24Z","author_association":"CONTRIBUTOR","body":"Was there an issue with the previous implementation that this fixes? It looks like you just changed the name of the class and used a Supplier, but they are functionally equivalent. Are there other Singletons in the code that could be placed in this new class now?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604464577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604500010","html_url":"https://github.com/apache/accumulo/issues/3340#issuecomment-1604500010","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3340","id":1604500010,"node_id":"IC_kwDOACaFSM5foroq","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T16:10:00Z","updated_at":"2023-06-23T16:10:00Z","author_association":"CONTRIBUTOR","body":"PR #3532 adds the additional test alluded to in this ticket.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604500010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604523609","html_url":"https://github.com/apache/accumulo/pull/3533#issuecomment-1604523609","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3533","id":1604523609,"node_id":"IC_kwDOACaFSM5foxZZ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T16:32:41Z","updated_at":"2023-06-23T16:32:41Z","author_association":"CONTRIBUTOR","body":"I ran a bunch of the modified ITs and a lot of them succeeded. The ones that failed were failing due to something still not working in the elasticity branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604523609/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604617881","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1604617881","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1604617881,"node_id":"IC_kwDOACaFSM5fpIaZ","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T17:42:42Z","updated_at":"2023-06-23T17:42:42Z","author_association":"CONTRIBUTOR","body":"Before I continue on with any more updates should I go ahead and close this for now? The validation breaks some tests and @ctubbsii voiced concerns about doing this. Based on all the test failures I'm seeing and the issues @ctubbsii mentioned i'm hesitant to make this change now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604617881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604792392","html_url":"https://github.com/apache/accumulo/pull/3535#issuecomment-1604792392","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3535","id":1604792392,"node_id":"IC_kwDOACaFSM5fpzBI","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T19:38:28Z","updated_at":"2023-06-23T19:38:28Z","author_association":"MEMBER","body":"This fix is clearly correct, but it might break some metrics tests... if that happens, we can fix it as a subsequent commit. I'm going to merge it now.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604792392/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604805886","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1604805886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1604805886,"node_id":"IC_kwDOACaFSM5fp2T-","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T19:47:49Z","updated_at":"2023-06-23T19:47:49Z","author_association":"MEMBER","body":"> Before I continue on with any more updates should I go ahead and close this for now? The validation breaks some tests and @ctubbsii voiced concerns about doing this. Based on all the test failures I'm seeing and the issues @ctubbsii mentioned i'm hesitant to make this change now.\r\n\r\nI'm slightly opposed to this change (`-0`) for the reasons I mentioned, but I'm more interested in why those tests are failing. It seems this method might be expecting to receive full paths to files, not just the file part, as this PR had assumed. It's either that, or those tests are providing bad test cases, that this PR unintentionally caught.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604805886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604872799","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1604872799","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1604872799,"node_id":"IC_kwDOACaFSM5fqGpf","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T20:02:52Z","updated_at":"2023-06-23T20:02:52Z","author_association":"CONTRIBUTOR","body":"I can rerun and check the tests (it may just be the tests that need fixing) I haven't looked to closely into it yet but I don't think there's an issue with the actual code itself other than tests using weird names","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604872799/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604955414","html_url":"https://github.com/apache/accumulo/issues/3233#issuecomment-1604955414","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3233","id":1604955414,"node_id":"IC_kwDOACaFSM5fqa0W","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T20:56:43Z","updated_at":"2023-06-23T20:58:03Z","author_association":"MEMBER","body":"@alerman Thanks for the clarification. I misunderstood @ivakegg 's explanation, and thought the clone table's config was being copied. I now understand that the problem was in the cloned table itself, not a table created using it as a template.\r\n\r\n@ddanielr One quirk about the shell's `config` command is that you can't see overrides at all, unless they differ from the parent, because there is no public API to see only the properties set on a table, but ignoring stuff coming from underneath. So, the shell can only see these overrides after the system property has changed.\r\n\r\nBut yes, we absolutely could provide a flag, and a new public API to view the overrides, or view only the specific scoped properties, without showing the effective properties from the entire hierarchy, and we could also add a new `-cc`-like flag that only uses those properties as a template, instead of the effective properties.\r\n\r\n***\r\n\r\nHowever, there's a much simpler solution that is immediately available to the users impacted by the current behavior: just don't use the per-table property to specify the context the way you're doing it. Instead, use a custom property name that holds the URLs (or other context) that isn't a per-table property that gets copied, and use the table parameter as a context group reference that doesn't change. This merely takes a small bit of imagination to implement.\r\n\r\nFor example:\r\n\r\n```java\r\npublic class MyCustomClassLoaderContextFactory implements ContextClassLoaderFactory {\r\n\r\n  private ContextClassLoaderEnvironment env;\r\n  \r\n  @Override\r\n  public void init(ContextClassLoaderEnvironment env) {\r\n    this.env = env;\r\n  }\r\n\r\n  @Override\r\n  public ClassLoader getClassLoader(String contextGroup) {\r\n    // interpret context parameter as a \"context group\", but read current URLs from a different location\r\n    String urls = env.getConfiguration().get(\"general.custom.myclassloader.group.\" + contextGroup);\r\n    // ... create new URLClassLoader from urls and return that\r\n  }\r\n}\r\n```\r\n\r\nSo now, instead of changing the per-table property at the system level, you change this other property that is the actual context for that contextGroup by editing `general.custom.myclassloader.group.somegroupname` and `table.class.loader.context` just stays fixed at `somegroupname` and is set only on the table, not at the system (but even if it's set at the system, it's not a problem, if it's never changed).\r\n\r\nThis is actually way more powerful than what you are currently doing, because you can still get different classloaders for different groups of tables, whereas the way you're currently using the table property at the system config, your factory would necessarily give the same classloader to every table in the system.\r\n\r\nIn my example, the context you're changing is a set of URLs, but it could be something else, depending on your factory implementation. It could even be another redirect to a named URL set, if you want to stage different named URL sets in your config, and then just swap them out by name in your factory.\r\n\r\nThis is the power of the pluggable factory interface that we made, and one of the reasons we designed it this way... you are no longer bound to the limitations of our previous ways of doing per-table classloader contexts... you can use these contexts as indirect jumps to your mutable contexts. Your contexts on your tables can represent anything you wish. They no longer need represent mere paths.\r\n\r\n***\r\n\r\nSo, yes, we can add the API updates and flags to the shell command... but even if we didn't, you don't need to let this limitation affect you. You just need to use the new context and factory SPI a bit more effectively.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604955414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604974185","html_url":"https://github.com/apache/accumulo/pull/3531#issuecomment-1604974185","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3531","id":1604974185,"node_id":"IC_kwDOACaFSM5fqfZp","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T21:09:48Z","updated_at":"2023-06-23T21:09:48Z","author_association":"MEMBER","body":"> Was there an issue with the previous implementation that this fixes?\r\n\r\nNope. It just seems cleaner this way. I think it's less cumbersome to use like this. It's certainly shorter in the calling code. It was also slightly fewer lines to implement, except for the few lines I added to checkstyle to enforce the import style.\r\n\r\n> It looks like you just changed the name of the class and used a Supplier, but they are functionally equivalent.\r\n\r\nYep!\r\n\r\n> Are there other Singletons in the code that could be placed in this new class now?\r\n\r\nI couldn't immediately think of one, and didn't seek any out, but this change creates a nice foundation for adding them if we find any. The one I did previously think of was stuff pertaining to tracing with HTrace4, but we no longer use HTrace, so that's moot. Maybe SecureRandom?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604974185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604981438","html_url":"https://github.com/apache/accumulo/issues/3529#issuecomment-1604981438","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3529","id":1604981438,"node_id":"IC_kwDOACaFSM5fqhK-","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T21:16:15Z","updated_at":"2023-06-23T21:16:15Z","author_association":"MEMBER","body":"> It really seems that isPropertySet is checking if the key exists, not necessarily that the property was set. So far, it looks like any property that we have defined will return true - the check will climb the hierarchy and if not found, it will check the default - which will exist and return true. This is even if the value is null or an empty string as the default value.\r\n\r\nNo, the DefaultConfiguration returns false, not true. It only looks like it's checking of the key exists in the other implementations, because the presence of any key in those implementations means a user has configured it... the content of all those other implementations are empty by default, so any presence of a key there means the user was involved. But, the DefaultConfiguration always returns false at the bottom (or top? depending on your preferred orientation) of the hierarchy.\r\n\r\n> \r\n> The only time that isPropertySet would seem to work as excepted would be for custom properties - if a custom property is set, it will return true. If not, there will not be a default, so it will be false. That still leaves the determination if the set value is valid or not up to the caller.\r\n\r\nNo, it works fine for default values, too, because DefaultConfiguration.isPropertySet returns false, not true.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604981438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604995913","html_url":"https://github.com/apache/accumulo/issues/3529#issuecomment-1604995913","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3529","id":1604995913,"node_id":"IC_kwDOACaFSM5fqktJ","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T21:23:55Z","updated_at":"2023-06-23T21:23:55Z","author_association":"MEMBER","body":"Oh wait, for any fixed properties, there's always a value stored in RuntimeFixedProperties, so SystemConfiguration will always return `true` for those, even if they are using defaults. So, the situation I described initially is even simpler.... RuntimeFixedProperties always appear to be set, regardless of what the user has or hasn't done. Since the situation is actually simpler, I think we could probably store some extra information in RuntimeFixedProperties to easily detect the situation, and report the correct result. I'm going to open this issue and assign it to myself, because I think I can fix this behavior.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1604995913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605067358","html_url":"https://github.com/apache/accumulo/issues/3520#issuecomment-1605067358","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3520","id":1605067358,"node_id":"IC_kwDOACaFSM5fq2Je","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T22:37:53Z","updated_at":"2023-06-23T22:38:13Z","author_association":"CONTRIBUTOR","body":"Examined the rest of the code and did not find any places where it made sense to use this new call.  In #3513 it was already used in a few places outside the compaction code and those seemed to be it.  The location updates seems like a good candidate, however they did not have  TabletMetadata object handy.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605067358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605091285","html_url":"https://github.com/apache/accumulo/issues/3303#issuecomment-1605091285","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3303","id":1605091285,"node_id":"IC_kwDOACaFSM5fq7_V","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-23T23:05:49Z","updated_at":"2023-06-23T23:05:49Z","author_association":"CONTRIBUTOR","body":"@dlmarion - can this be closed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605091285/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605427648","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1605427648","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1605427648,"node_id":"IC_kwDOACaFSM5fsOHA","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-24T11:52:38Z","updated_at":"2023-06-24T11:52:38Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - So a good example of a test that breaks is `RFileClientTest`. This is simply due to the test itself. The test just creates temp files that don't match the expected prefix name, so it's just a test issue that would need to be fixed. That was the first one that broke, I'm not sure how many other tests create temp files that wouldn't validate without running the full suite but I'm going to go ahead and close this anyways I think.\r\n\r\nThe todo i guess could be removed in a separate small commit if you want as I know we didn't want to leave around TODOs.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605427648/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605428464","html_url":"https://github.com/apache/accumulo/pull/3511#issuecomment-1605428464","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3511","id":1605428464,"node_id":"IC_kwDOACaFSM5fsOTw","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-24T11:53:41Z","updated_at":"2023-06-24T11:53:41Z","author_association":"CONTRIBUTOR","body":"Closing for now based on the feedback in this PR, we can always re-open later.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1605428464/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1606337576","html_url":"https://github.com/apache/accumulo/issues/3499#issuecomment-1606337576","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3499","id":1606337576,"node_id":"IC_kwDOACaFSM5fvsQo","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-25T23:54:23Z","updated_at":"2023-06-25T23:59:28Z","author_association":"CONTRIBUTOR","body":"The results below use an updated tests branch implementing 1) multiple metadata-splits, 2) parameterized splits/files, and 3) multiple table splits. The tests show a few different implementations (including the original 2.1.1 baseline and version 1.10.3). I had been using #3501 for benchmarking during the week and included below. The profiler comparision on the updated 2.1.2-SNAPSHOT (latest) suggested there is some overhead with `Path()` and `validateFileName()` due to regex evaluation, which does not appear in #3501.\r\n\r\nThe parameterized splits/files affected the per operation output and resulted in an overall execution time. The per-operation metric was relocated to the `rfile/op` (in the data below). \r\n\r\nThe logic is currently on two separate branches (kept separate to avoid any impact to testing late last week):\r\nhttps://github.com/dtspence/accumulo-jmh-test/tree/gc-test-update\r\nhttps://github.com/dtspence/accumulo-jmh-test/tree/accumulo-1.10\r\n\r\n---\r\n**Accumulo 1.10:** The following details Accumulo 1.10.3 performance of `getReferenceIterator()` method. The test extracted the method located in SimpleGarbageCollector and executed in isolation. The test used multiple metadata tablets per t-server and included the other changes from the `gc-test-update` branch.\r\n\r\nLocation of method extracted:\r\nhttps://github.com/apache/accumulo/blob/1.10/server/gc/src/main/java/org/apache/accumulo/gc/SimpleGarbageCollector.java#L323\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.471 ±   0.143  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.005 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    2.936 ±   0.482  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.003 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   39.415 ±  11.400  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.004 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  357.505 ± 231.943  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.004 ±   0.002  ms/op\r\n```\r\n---\r\n\r\n**Accumulo 2.1.1:** The following is a baseline test of 2.1.1.\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt     Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3     2.377 ±   0.726  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3     0.024 ±   0.007  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    16.781 ±   8.778  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3     0.017 ±   0.009  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   137.649 ±  67.144  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3     0.014 ±   0.007  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  1207.793 ± 528.944  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3     0.012 ±   0.005  ms/op\r\n```\r\n\r\n**PR 3501:** The logic in #3501 resulted in the following times.\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    1.241 ±  0.559  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.012 ±  0.006  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    5.304 ±  3.251  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.005 ±  0.003  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   30.570 ± 11.835  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  201.415 ± 92.688  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±  0.001  ms/op\r\n\r\n```\r\n\r\n**Accumulo 2.1.2-SNAPSHOT:** The most recent GC changes from 2.1.2-SNAPSHOT. The removal of the `getParent()` calls helped a lot to improve performance. The profiler showed a couple of calls 1) `Path.init()` and 2) `validateFileName()` which contained additional regex calls. \r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    1.665 ±   0.211  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.017 ±   0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3   10.139 ±  16.299  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.010 ±   0.016  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   62.035 ±  24.129  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.006 ±   0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  521.994 ± 228.079  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.005 ±   0.002  ms/op\r\n```\r\n\r\n**Accumulo 2.1.2-SNAPSHOT (with Path(URI) and validateFileName()):** The following is based on the GC changes (from 2.1.2-SNAPSHOT) and makes a minor change to use the `Path(URI)` constructor (mentioned previously), avoiding a regex call. It also used the alternate `validateFileName()` described below.\r\n\r\nReference:\r\nhttps://github.com/apache/accumulo/blob/260fde4370c06a4059fd62b5658124d61532d729/core/src/main/java/org/apache/accumulo/core/metadata/StoredTabletFile.java#L47\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    1.346 ±   0.402  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.013 ±   0.004  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    6.318 ±   2.323  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.006 ±   0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   36.814 ±   2.904  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.004 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  244.694 ± 140.063  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±   0.001  ms/op\r\n```\r\n\r\n**Validate FileName:** Created an additional benchmark to experiment with a non-regex version of the check.  I looked through PR comments and could not find if it was specifically discussed.\r\n\r\n```\r\nBaseline (w/regex):\r\nBenchmark                                              Mode  Cnt  Score   Error  Units\r\nValidationUtilPerformanceIT.benchmarkValidateFileName  avgt    3  5.359 ± 0.572  ms/op\r\n\r\nCharacter comparison test:\r\nBenchmark                                              Mode  Cnt  Score   Error  Units\r\nValidationUtilPerformanceIT.benchmarkValidateFileName  avgt    3  0.216 ± 0.047  ms/op\r\n```\r\n```java \r\n    public static void validateFileName(String fileName) {\r\n        Objects.requireNonNull(fileName);\r\n        for (int i = 0; i < fileName.length(); i++) {\r\n            final char ch = fileName.charAt(i);\r\n            if (!(Character.isLetterOrDigit(ch) || ch == '-' || ch == '.' || ch == '_')) {\r\n                throw new IllegalArgumentException(\r\n                        \"Provided filename (\" + fileName + \") contains invalid characters.\");\r\n            }\r\n        }\r\n    }\r\n```\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1606337576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607268496","html_url":"https://github.com/apache/accumulo/issues/3515#issuecomment-1607268496","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3515","id":1607268496,"node_id":"IC_kwDOACaFSM5fzPiQ","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T11:26:03Z","updated_at":"2023-06-26T11:26:03Z","author_association":"CONTRIBUTOR","body":"Closed by #3533 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607268496/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607275870","html_url":"https://github.com/apache/accumulo/issues/3499#issuecomment-1607275870","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3499","id":1607275870,"node_id":"IC_kwDOACaFSM5fzRVe","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T11:31:00Z","updated_at":"2023-06-26T11:31:00Z","author_association":"CONTRIBUTOR","body":"@dtspence - do you want to put up a PR against the 2.1 branch with the Path(URI) and validateFileName changes? While not as fast as #3501, it's close and faster than 1.10.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607275870/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607479821","html_url":"https://github.com/apache/accumulo/pull/3482#issuecomment-1607479821","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3482","id":1607479821,"node_id":"IC_kwDOACaFSM5f0DIN","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T13:29:13Z","updated_at":"2023-06-26T13:29:13Z","author_association":"CONTRIBUTOR","body":"Closing in favor of the implementation in #3496 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607479821/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607482517","html_url":"https://github.com/apache/accumulo/pull/3496#issuecomment-1607482517","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3496","id":1607482517,"node_id":"IC_kwDOACaFSM5f0DyV","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T13:30:53Z","updated_at":"2023-06-26T13:30:53Z","author_association":"CONTRIBUTOR","body":"Follow-on tasks completed in https://github.com/dlmarion/accumulo/tree/3496-followon-rename-compactor-queue. Will create PR for elasticity branch once this merged.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607482517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607611909","html_url":"https://github.com/apache/accumulo/issues/3499#issuecomment-1607611909","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3499","id":1607611909,"node_id":"IC_kwDOACaFSM5f0jYF","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T14:29:29Z","updated_at":"2023-06-26T14:29:29Z","author_association":"CONTRIBUTOR","body":"> @dtspence - do you want to put up a PR against the 2.1 branch with the Path(URI) and validateFileName changes? While not as fast as #3501, it's close and faster than 1.10.\r\n\r\nYes, I will put up a PR with changes.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607611909/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607655850","html_url":"https://github.com/apache/accumulo/issues/3499#issuecomment-1607655850","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3499","id":1607655850,"node_id":"IC_kwDOACaFSM5f0uGq","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T14:53:24Z","updated_at":"2023-06-26T14:53:24Z","author_association":"CONTRIBUTOR","body":"I created #3543 which contains a small change from #3501 that was unrelated to the lazy evaluation. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607655850/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607831114","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1607831114","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1607831114,"node_id":"IC_kwDOACaFSM5f1Y5K","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T16:32:56Z","updated_at":"2023-06-26T16:35:15Z","author_association":"CONTRIBUTOR","body":"While examining the code looking for causes I found one possible candidate cause for this.  It may not be the cause of this problem, but it needs to be fixed.  Scan sessions register a cleanup call if the session is not accessed in a certain amount of time.  This cleanup code calls session.cleanUp which returns a boolean, however that return value is not checked.  When it returns false the session was not cleaned up and clean up needs to be attempted again later.  Below is the line where the return value was not checked.\r\n\r\nhttps://github.com/apache/accumulo/blob/260fde4370c06a4059fd62b5658124d61532d729/server/tserver/src/main/java/org/apache/accumulo/tserver/session/SessionManager.java#L285\r\n\r\nI will work on a fix for this.  When cleanUp returns false the session manager needs to attempt clean up again later, currently it does not.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1607831114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608117667","html_url":"https://github.com/apache/accumulo/issues/3494#issuecomment-1608117667","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3494","id":1608117667,"node_id":"IC_kwDOACaFSM5f2e2j","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T19:37:18Z","updated_at":"2023-06-26T19:37:18Z","author_association":"CONTRIBUTOR","body":"Hadoop 3.3.6 has been released. We could add this in 3.0.0 now","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608117667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608271428","html_url":"https://github.com/apache/accumulo/pull/3540#issuecomment-1608271428","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3540","id":1608271428,"node_id":"IC_kwDOACaFSM5f3EZE","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T21:11:58Z","updated_at":"2023-06-26T21:11:58Z","author_association":"MEMBER","body":"@cshannon merged this into 2.1, but I'll let you do the merge forward into main, because there are conflicts that I think you're better capable of fixing, as you've more recently touched this stuff.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608271428/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608272623","html_url":"https://github.com/apache/accumulo/pull/3540#issuecomment-1608272623","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3540","id":1608272623,"node_id":"IC_kwDOACaFSM5f3Erv","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-26T21:13:07Z","updated_at":"2023-06-26T21:13:07Z","author_association":"CONTRIBUTOR","body":"> @cshannon merged this into 2.1, but I'll let you do the merge forward into main, because there are conflicts that I think you're better capable of fixing, as you've more recently touched this stuff.\r\n\r\nSounds good I'll take care of it.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1608272623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609477220","html_url":"https://github.com/apache/accumulo/pull/3542#issuecomment-1609477220","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3542","id":1609477220,"node_id":"IC_kwDOACaFSM5f7qxk","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T13:10:33Z","updated_at":"2023-06-27T13:10:33Z","author_association":"CONTRIBUTOR","body":"How does a user know what a \"correct\" or \"better\" value would be over the default for tuning?  Is there a log statement (or a metric) that reports how long the the triggered action takes to run?\r\n\r\nIf the processing time is longer than what the user selects for the wait time - could it lead to an ever growing backlog of tasks - or could it lead to resource starvation because it never gets to pause and just runs continuously?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609477220/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609619071","html_url":"https://github.com/apache/accumulo/pull/3544#issuecomment-1609619071","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3544","id":1609619071,"node_id":"IC_kwDOACaFSM5f8NZ_","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T14:25:59Z","updated_at":"2023-06-27T14:25:59Z","author_association":"MEMBER","body":"> The fact that it's a SecureRandom vs. just a Random is expressed in the type, either way, so I don't think putting the `SECURE` in the name (or even just `S`) helps make the calling code any more readable over `RNG`\r\n\r\nI agree. I think that `RANDOM` and `RNG` are my top choices for renaming but I'm leaning towards `RANDOM` just so it is a bit clearer what the variables type is. Also it seems like when we created `SecureRandom` objects throughout the code, we often use \"random\" as the variable name so it would be more consistent with what is already present.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609619071/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609749764","html_url":"https://github.com/apache/accumulo/pull/3542#issuecomment-1609749764","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3542","id":1609749764,"node_id":"IC_kwDOACaFSM5f8tUE","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T15:27:26Z","updated_at":"2023-06-27T15:27:26Z","author_association":"CONTRIBUTOR","body":"> Is there a log statement (or a metric) that reports how long the the triggered action takes to run?\r\n\r\nA [message](https://github.com/apache/accumulo/blob/2.1/server/manager/src/main/java/org/apache/accumulo/manager/TabletGroupWatcher.java#L349) is printed to the log that it's waiting for some amount of time. This property just changes the the amount of wait time before the next check starts. A user could determine the time delta between these log statements to determine how long one iteration of the loop takes.\r\n\r\n> If the processing time is longer than what the user selects for the wait time - could it lead to an ever growing backlog of tasks\r\n\r\nYes, but that could happen right now too.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609749764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609851625","html_url":"https://github.com/apache/accumulo/issues/3546#issuecomment-1609851625","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3546","id":1609851625,"node_id":"IC_kwDOACaFSM5f9GLp","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T16:24:55Z","updated_at":"2023-06-27T19:44:04Z","author_association":"CONTRIBUTOR","body":"Should decided on #3547 before working on this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609851625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609870687","html_url":"https://github.com/apache/accumulo/issues/3546#issuecomment-1609870687","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3546","id":1609870687,"node_id":"IC_kwDOACaFSM5f9K1f","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T16:35:52Z","updated_at":"2023-06-27T16:37:55Z","author_association":"CONTRIBUTOR","body":"Need to consider the default compaction service config that defines default groups with the default compactor group name.  In #3496 this was set to `default`","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609870687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609979613","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1609979613","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1609979613,"node_id":"IC_kwDOACaFSM5f9lbd","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T17:59:42Z","updated_at":"2023-06-27T17:59:42Z","author_association":"MEMBER","body":"I can start looking into this. It seems like reasonable idea to me but am interested to hear others opinions on adding this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1609979613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610089646","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1610089646","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1610089646,"node_id":"IC_kwDOACaFSM5f-ASu","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T19:21:24Z","updated_at":"2023-06-27T19:21:24Z","author_association":"MEMBER","body":"The goal state is only a manager goal state. It doesn't impact other services. It seems reasonable to me that it should be associated only with the manager details, in order to avoid the confusing implication that it is somehow a system-wide thing. But, I can see the advantage of seeing the manager's goal state on other pages. Another thing to consider is that this concept of a manager safe mode is going to change dramatically with the elasticity branch, where there are expected to be multiple managers in future, so I'm hesitant to make a change to the current behavior that will train users to think about it now in a way that will be incorrect in future.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610089646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610091439","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1610091439","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1610091439,"node_id":"IC_kwDOACaFSM5f-Auv","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T19:22:59Z","updated_at":"2023-06-27T19:22:59Z","author_association":"MEMBER","body":"Perhaps we can put something in the nav menu \"stop lights\" next to the manager, so it's dot is yellow when in safe mode (and has the words SAFE MODE next to it in the menu), and that propagates up to a yellow dot when the menu is collapsed?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610091439/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610116534","html_url":"https://github.com/apache/accumulo/issues/3546#issuecomment-1610116534","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3546","id":1610116534,"node_id":"IC_kwDOACaFSM5f-G22","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T19:45:27Z","updated_at":"2023-06-27T19:45:27Z","author_association":"MEMBER","body":"I'm not caught up on all the details, but definitely shouldn't mix underscore\\_based naming conventions with dash-based naming conventions, as shown above.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610116534/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610121578","html_url":"https://github.com/apache/accumulo/pull/3544#issuecomment-1610121578","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3544","id":1610121578,"node_id":"IC_kwDOACaFSM5f-IFq","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T19:50:03Z","updated_at":"2023-06-27T19:50:03Z","author_association":"MEMBER","body":"> > The fact that it's a SecureRandom vs. just a Random is expressed in the type, either way, so I don't think putting the `SECURE` in the name (or even just `S`) helps make the calling code any more readable over `RNG`\r\n> \r\n> I agree. I think that `RANDOM` and `RNG` are my top choices for renaming but I'm leaning towards `RANDOM` just so it is a bit clearer what the variables type is. Also it seems like when we created `SecureRandom` objects throughout the code, we often use \"random\" as the variable name so it would be more consistent with what is already present.\r\n\r\nI'm fine with `RANDOM`, but if you wanted to, you could also go with `SRANDOM`, just to make it super clear. While the local uses may have not cared what type of random it was (they were probably just using SecureRandom to avoid a spotbugs warning), we have to also consider how the LazySingletons class presents itself, even when the callers don't necessarily care.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610121578/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610229619","html_url":"https://github.com/apache/accumulo/pull/3539#issuecomment-1610229619","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3539","id":1610229619,"node_id":"IC_kwDOACaFSM5f-idz","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T21:14:16Z","updated_at":"2023-06-27T21:14:16Z","author_association":"CONTRIBUTOR","body":"Rebased this after merging #3513 and took it out of draft","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610229619/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610246886","html_url":"https://github.com/apache/accumulo/pull/3538#issuecomment-1610246886","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3538","id":1610246886,"node_id":"IC_kwDOACaFSM5f-mrm","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T21:30:59Z","updated_at":"2023-06-27T21:30:59Z","author_association":"CONTRIBUTOR","body":"Rebased this after merging #3513 so taking out of draft.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610246886/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610338835","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1610338835","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1610338835,"node_id":"IC_kwDOACaFSM5f-9IT","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-27T23:09:45Z","updated_at":"2023-06-27T23:09:45Z","author_association":"MEMBER","body":"@dtspence I fixed the trivial JUnit5 imports so we could get the build checks going, but I'll leave my substantive suggestions there for your consideration/further discussion.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1610338835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611408888","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1611408888","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1611408888,"node_id":"IC_kwDOACaFSM5gDCX4","user":{"login":"dtspence","id":33552925,"node_id":"MDQ6VXNlcjMzNTUyOTI1","avatar_url":"https://avatars.githubusercontent.com/u/33552925?v=4","gravatar_id":"","url":"https://api.github.com/users/dtspence","html_url":"https://github.com/dtspence","followers_url":"https://api.github.com/users/dtspence/followers","following_url":"https://api.github.com/users/dtspence/following{/other_user}","gists_url":"https://api.github.com/users/dtspence/gists{/gist_id}","starred_url":"https://api.github.com/users/dtspence/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dtspence/subscriptions","organizations_url":"https://api.github.com/users/dtspence/orgs","repos_url":"https://api.github.com/users/dtspence/repos","events_url":"https://api.github.com/users/dtspence/events{/privacy}","received_events_url":"https://api.github.com/users/dtspence/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T13:25:06Z","updated_at":"2023-06-28T13:25:06Z","author_association":"CONTRIBUTOR","body":"> @dtspence I fixed the trivial JUnit5 imports so we could get the build checks going, but I'll leave my substantive suggestions there for your consideration/further discussion.\r\n\r\nThank you for updating the JUnit5 imports.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611408888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611617607","html_url":"https://github.com/apache/accumulo/issues/3474#issuecomment-1611617607","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3474","id":1611617607,"node_id":"IC_kwDOACaFSM5gD1VH","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T15:06:52Z","updated_at":"2023-06-28T15:06:52Z","author_association":"CONTRIBUTOR","body":"Added the following metrics: \r\n\r\n1. Number of Queues\r\n2. Size of Queue\r\n3. Number of Jobs in Queue\r\n4. Number of Jobs Rejected\r\n5. Number of Jobs Dequeued. \r\n\r\nI'm not sure how to best track job queue time as that starts making a LOT of time series metrics that are short lived. \r\nWe could work on adding telemetry exposing the job queue time there, but that's outside of metrics.\r\n\r\nWe could also expose a MaxWait metric per queue, but I'd love to actively track the wait time vs calculate it based on when the job leaves the queue.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611617607/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611811671","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1611811671","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1611811671,"node_id":"IC_kwDOACaFSM5gEktX","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T17:25:50Z","updated_at":"2023-06-28T17:26:13Z","author_association":"CONTRIBUTOR","body":"I may have been able to reproduce this. I was running the following in jshell because I suspected an issue with isolated scans.  I currently have a tablet stuck in close waiting on a scan. I am investigating the stuck tablet.\r\n\r\n```java\r\n        client.tableOperations().create(\"foo\");\r\n\r\n        try(var writer = client.createBatchWriter(\"foo\")) {\r\n            for(int i = 0; i < 1000000; i++) {\r\n                Mutation m = new Mutation(String.format(\"%08d\", i));\r\n                m.put(\"\",\"\",\"\");\r\n                writer.addMutation(m);\r\n            }\r\n        }\r\n\r\n        client.tableOperations().flush(\"foo\",null,null,true);\r\n\r\n        Runnable task = new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                while(true) {\r\n                    try (var scanner = new IsolatedScanner(client.createScanner(\"foo\"))) {\r\n                        // TODO maybe do not close scanner?  The following limit was placed on the stream to \r\n                        //  avoid reading all the data possibly leaving a scan session active on the tserver\r\n                        System.out.println(new Date()+\" \"+scanner.stream().limit(500000).count());\r\n                    } catch (Exception e) {\r\n                        e.printStackTrace();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        ExecutorService service = Executors.newFixedThreadPool(10);\r\n        for(int i =0; i< 10; i++){\r\n          service.execute(task);\r\n        };\r\n\r\n        // do periodic splits to force tablet to close.. TODO eventually splitting tablet we are not scanning above\r\n        for(int i = 0; i < 1000000; i+=1000) {\r\n            String split = String.format(\"%08d\", i);\r\n            client.tableOperations().addSplits(\"foo\", new TreeSet<>(List.of(new Text(split))));\r\n            System.out.println(new Date()+\" added split \"+split);\r\n            Thread.sleep(500);\r\n        }\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611811671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611923809","html_url":"https://github.com/apache/accumulo/issues/3552#issuecomment-1611923809","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3552","id":1611923809,"node_id":"IC_kwDOACaFSM5gFAFh","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T18:58:46Z","updated_at":"2023-06-28T18:58:46Z","author_association":"MEMBER","body":"Relates to #3512 ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611923809/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611964325","html_url":"https://github.com/apache/accumulo/pull/3550#issuecomment-1611964325","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3550","id":1611964325,"node_id":"IC_kwDOACaFSM5gFJ-l","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T19:20:09Z","updated_at":"2023-06-28T19:20:09Z","author_association":"MEMBER","body":"Full ITs passed.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1611964325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612123971","html_url":"https://github.com/apache/accumulo/issues/3553#issuecomment-1612123971","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3553","id":1612123971,"node_id":"IC_kwDOACaFSM5gFw9D","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T21:22:28Z","updated_at":"2023-06-28T21:22:28Z","author_association":"MEMBER","body":"@keith-turner In which version was this seen?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612123971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612126251","html_url":"https://github.com/apache/accumulo/issues/3553#issuecomment-1612126251","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3553","id":1612126251,"node_id":"IC_kwDOACaFSM5gFxgr","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T21:23:47Z","updated_at":"2023-06-28T21:23:47Z","author_association":"CONTRIBUTOR","body":"2.1.1 I think","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612126251/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612172012","html_url":"https://github.com/apache/accumulo/pull/3551#issuecomment-1612172012","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3551","id":1612172012,"node_id":"IC_kwDOACaFSM5gF8rs","user":{"login":"EdColeman","id":7047700,"node_id":"MDQ6VXNlcjcwNDc3MDA=","avatar_url":"https://avatars.githubusercontent.com/u/7047700?v=4","gravatar_id":"","url":"https://api.github.com/users/EdColeman","html_url":"https://github.com/EdColeman","followers_url":"https://api.github.com/users/EdColeman/followers","following_url":"https://api.github.com/users/EdColeman/following{/other_user}","gists_url":"https://api.github.com/users/EdColeman/gists{/gist_id}","starred_url":"https://api.github.com/users/EdColeman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdColeman/subscriptions","organizations_url":"https://api.github.com/users/EdColeman/orgs","repos_url":"https://api.github.com/users/EdColeman/repos","events_url":"https://api.github.com/users/EdColeman/events{/privacy}","received_events_url":"https://api.github.com/users/EdColeman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-28T22:05:35Z","updated_at":"2023-06-28T22:05:35Z","author_association":"CONTRIBUTOR","body":"In general - why are the metric changes being testing in BulkNewIT?  Would it be better if the test was a stand-alone test of the metrics?  If a package does not exist, in may be desirable to have a metrics specific sub-package for metric IT tests so that they are easier to find?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612172012/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612819859","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1612819859","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1612819859,"node_id":"IC_kwDOACaFSM5gIa2T","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T10:30:27Z","updated_at":"2023-06-29T10:54:48Z","author_association":"MEMBER","body":"For what it's worth, I got substantially wider error bars a few times when I ran the gc-test-update branch (at commit b27d9fa56b68e7ab58a9e6c4d9b894ae35724c80) locally. Each run took about 10 minutes (using `mvn clean verify -Dit.test=GarbageCollectorPerformanceIT -Dversion.accumulo=2.1.2-SNAPSHOT`), and all were very spammy with regard to hadoop log messages about decompressors.\r\n\r\nClick each to expand/collapse details.\r\n\r\n<details>\r\n<summary>Current 2.1.2-SNAPSHOT at 544ef01681e1b1080fa6afbb17a24721e20b638b:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.892 ±  0.181  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.009 ±  0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    6.250 ±  2.679  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.006 ±  0.003  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   39.701 ±  2.739  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.004 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  314.899 ± 34.392  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.003 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Current PR merged onto 2.1.2-SNAPSHOT at 544ef01681e1b1080fa6afbb17a24721e20b638b:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.812 ±   0.150  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.008 ±   0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.501 ±   2.058  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.005 ±   0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   28.047 ±  12.950  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  176.200 ± 289.206  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±   0.003  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Slight change to move the IntPredicate outside the method to a private static final variable at the top of the file:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.710 ±   0.083  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.007 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.269 ±   1.178  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.004 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   25.945 ±   6.227  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  177.723 ± 427.999  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±   0.004  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Ran that same one again, because the error bars looked crazy to me (`±428` is crazy for a value of 178... there must've been some kind of outlier due to some other activity on the box):</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.706 ±  0.186  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.007 ±  0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.315 ±  1.793  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.004 ±  0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   26.623 ± 12.256  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  168.236 ± 47.627  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Second slight change to use for loop with indexed pointer, keeping the predicate and calling `predicate.test(ch)`:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.713 ±  0.089  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.007 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.440 ±  1.746  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.004 ±  0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   27.450 ± 13.024  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  165.311 ± 68.361  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Third slight change to use for loop with indexed pointer, and getting rid of the predicate in favor of inlining the checks into the `if` statement's condition:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.714 ±  0.019  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.007 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.318 ±  0.779  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.004 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   27.488 ±  9.656  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  166.778 ± 60.033  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Fourth slight change to cover case where the string is empty (this case was initially omitted from this PR, even though the regex checked for it):</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score     Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.788 ±   0.658  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.008 ±   0.007  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.453 ±   2.814  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.004 ±   0.003  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   27.361 ±  12.971  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±   0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  168.248 ± 105.847  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±   0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Instead of doing the change in this PR, merely using a precompiled Pattern rather than calling `String.matches` results in:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.875 ±  0.162  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.009 ±  0.002  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    6.026 ±  0.598  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.006 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   38.700 ±  7.029  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.004 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  292.542 ± 44.951  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.003 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>Using the precompiled Pattern, I forgot to include the change to StoredTabletFile to use the URI-based constructor for Path. It seems that's a big part of the improvements here. If I include that change, using the precompiled Pattern results in:</summary>\r\n\r\n```\r\nBenchmark                                                   (splitsRfile)  Mode  Cnt    Score    Error  Units\r\nGarbageCollectorPerformanceIT.benchmarkReferences                   1,100  avgt    3    0.734 ±  0.148  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op          1,100  avgt    3    0.007 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                  10,100  avgt    3    4.509 ±  0.249  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op         10,100  avgt    3    0.005 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                 100,100  avgt    3   27.809 ±  8.549  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op        100,100  avgt    3    0.003 ±  0.001  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences                1000,100  avgt    3  176.476 ± 15.462  ms/op\r\nGarbageCollectorPerformanceIT.benchmarkReferences:rfile/op       1000,100  avgt    3    0.002 ±  0.001  ms/op\r\n```\r\n\r\n</details>\r\n\r\n\r\nSo, these lower numbers look promising, but the outliers that widen the error bars make me skeptical of how consistent these are, as they seem to show some sensitivity to the environment, even though I wasn't actively using my machine for much else while they ran.\r\n\r\nMy conclusions (changed after I saw the impact of the use of URI-based Path constructor):\r\n\r\n1. the for loop does not matter over the codePoints IntStream, so the current IntStream is fine\r\n2. the predicate object does not matter over inlining the `if` condition into the method, so the current use of the predicate is fine\r\n3. moving the predicate out of the method doesn't hurt or help, but is better code structure\r\n4. adding coverage for the empty string case is needed\r\n5. the regex pattern is just as good as using the custom predicate, and maybe slightly better (the error bars were certainly the narrowest with that run, leading to more confidence that it's going to perform better consistently)\r\n\r\nI'm going to open a separate PR for precompiling patterns in the couple of places we use them, and then I think this PR should be re-evaluated after that. At the very least, after that PR is merged in, we'll still want to keep the URI-based Path constructor in StoredTabletFile, and the ValidationUtilTest coverage.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612819859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612971185","html_url":"https://github.com/apache/accumulo/pull/3554#issuecomment-1612971185","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3554","id":1612971185,"node_id":"IC_kwDOACaFSM5gI_yx","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T11:38:07Z","updated_at":"2023-06-29T11:38:07Z","author_association":"MEMBER","body":"This should be merged before #3549, since it will enable that PR to be simplified.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1612971185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613052253","html_url":"https://github.com/apache/accumulo/issues/3553#issuecomment-1613052253","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3553","id":1613052253,"node_id":"IC_kwDOACaFSM5gJTld","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T12:15:52Z","updated_at":"2023-06-29T12:15:52Z","author_association":"CONTRIBUTOR","body":"I wrote a [test](https://github.com/dlmarion/accumulo/commit/c4110282a293387469a51ed98716af39d90fa161) that hangs.  On the Manager side, CompactionDriver.[isReady](https://github.com/apache/accumulo/blob/2.1/server/manager/src/main/java/org/apache/accumulo/manager/tableOps/compact/CompactionDriver.java#L110) will continue to return a non-zero wait time as long as there are tablets which have a compactID that is less than the compactID for `this` compaction. For those tablets, the CompactionDriver continues to call TabletClientHandler.compact(), which goes through the motion each time of initiating a compaction on that tablet. \r\n\r\nIn InternalCompactionExecutor.InternalJob.[run](https://github.com/apache/accumulo/blob/2.1/server/tserver/src/main/java/org/apache/accumulo/tserver/compactions/InternalCompactionExecutor.java#L91) I cannot find anything that checks the FAILED status (or the COMPLETED status for that matter). A `completionCallback` is invoked (line 97) on success, but nothing happens on the failure path.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613052253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613235858","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1613235858","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1613235858,"node_id":"IC_kwDOACaFSM5gKAaS","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T13:59:56Z","updated_at":"2023-06-29T13:59:56Z","author_association":"MEMBER","body":"I moved the new unit test to the correct package and pushed it to 2.1 in 2ec2321df8da0c90d2836561a2d16895e9bad0b5 so it can provide test coverage, regardless of what we want to do here.\r\n\r\nI updated the title of this PR since it's no longer about removing regexes, which perform similarly to the alternatives previously proposed in this PR according to the benchmarks, once the Pattern is compiled once, instead of each time it is evaluated. Of course, you can still update this PR to remove the regex now and replace it with one of the alternatives, but I don't think it's necessary anymore, and I dropped it when I resolved this PR's merge conflicts with the 2.1 branch after #3554 was merged.\r\n\r\nBased on the benchmarking, the main optimization that was included here was the use of the URI-based constructor for Path. So now, after resolving merge conflicts, that's the only thing left in this PR. I would have already merged that in, as well, but I am not sure about the TabletFile changes in 3.0, and this doesn't merge forward cleanly, since the TabletFile code changed. I'm not sure where this equivalent code moved to, if it even still applies to the main brnch. I don't want to merge it in to 2.1 until there's a plan for merging it forward into the main branch, even if that plan is to just make the change in 2.1, and do benchmarking and further changes separately for the main branch.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613235858/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613238764","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1613238764","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1613238764,"node_id":"IC_kwDOACaFSM5gKBHs","user":{"login":"jmark99","id":31573345,"node_id":"MDQ6VXNlcjMxNTczMzQ1","avatar_url":"https://avatars.githubusercontent.com/u/31573345?v=4","gravatar_id":"","url":"https://api.github.com/users/jmark99","html_url":"https://github.com/jmark99","followers_url":"https://api.github.com/users/jmark99/followers","following_url":"https://api.github.com/users/jmark99/following{/other_user}","gists_url":"https://api.github.com/users/jmark99/gists{/gist_id}","starred_url":"https://api.github.com/users/jmark99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jmark99/subscriptions","organizations_url":"https://api.github.com/users/jmark99/orgs","repos_url":"https://api.github.com/users/jmark99/repos","events_url":"https://api.github.com/users/jmark99/events{/privacy}","received_events_url":"https://api.github.com/users/jmark99/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T14:01:47Z","updated_at":"2023-06-29T14:01:47Z","author_association":"CONTRIBUTOR","body":"@keith-turner asked to see if others could replicate his error by running the code in the previous comment. I was able to do so. Afterward, he asked for checks to be put in the code when the session cleanup method was called. I added checks in three locations within the `SessionManager` and re-ran the test. Doing so indicated that the `session.close()` method returned false when called within `removeSession` around line 212.\r\n\r\nThe modified code was as follows:\r\n\r\n```\r\n      if (doCleanup) {\r\n        boolean cleanup = session.cleanup();\r\n        if (!cleanup) {\r\n          log.info(\">>>> session.cleanup() false around line 212\");\r\n        }\r\n      }\r\n```\r\n\r\nThe following line appears in tserver.log:\r\n\r\n`2023-06-29T09:35:30,313 [session.SessionManager] INFO : >>>> session.cleanup() false around line 212`\r\n\r\nI allowed the jshell session to run about 11 minutes before force quitting. The output was similar to the lines below:\r\n\r\n```\r\nThu Jun 29 09:35:29 EDT 2023 added split 00014000                                                                                                                          \r\nThu Jun 29 09:35:14 EDT 2023 500000                                                                                                                                        \r\nThu Jun 29 09:35:14 EDT 2023 500000                                                                                                                                        \r\n2023-06-29T09:37:31,344 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 5 failures.                   \r\n2023-06-29T09:37:38,735 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 50 failures.                  \r\n2023-06-29T09:37:45,736 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 100 failures.                 \r\n2023-06-29T09:37:52,872 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 150 failures.  \r\n...\r\n2023-06-29T09:45:58,101 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 3650 failures.\r\n2023-06-29T09:46:05,042 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 3700 failures.\r\n2023-06-29T09:46:12,024 [admin.TableOperations] WARN : Having difficulty locating hosting tabletserver for split 00015000 on table foo. Seen 3750 failures.\r\n\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613238764/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613632758","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1613632758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1613632758,"node_id":"IC_kwDOACaFSM5gLhT2","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T18:49:54Z","updated_at":"2023-06-29T18:51:21Z","author_association":"CONTRIBUTOR","body":"One way to fix this is to have single method like the following in SessionManager that is used for all session cleanup.\r\n\r\n```java\r\nvoid cleanup(Collection<Session> sessions){\r\n for(var session : sessions){\r\n    if(!session.cleanup()){\r\n        // Queue session for deferred clean up at later time.  This could be done by scheduling a \r\n        // task to run later or adding it a collection that is periodically inspected by a scheduled \r\n        // task.  The sweep() method in session manager method handles deferred cleanup for \r\n        // itself, this could be generalized for the entire class.  The sweep() method is already\r\n        // called periodically.\r\n   }\r\n}\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613632758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613677731","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1613677731","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1613677731,"node_id":"IC_kwDOACaFSM5gLsSj","user":{"login":"ivakegg","id":347158,"node_id":"MDQ6VXNlcjM0NzE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/347158?v=4","gravatar_id":"","url":"https://api.github.com/users/ivakegg","html_url":"https://github.com/ivakegg","followers_url":"https://api.github.com/users/ivakegg/followers","following_url":"https://api.github.com/users/ivakegg/following{/other_user}","gists_url":"https://api.github.com/users/ivakegg/gists{/gist_id}","starred_url":"https://api.github.com/users/ivakegg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivakegg/subscriptions","organizations_url":"https://api.github.com/users/ivakegg/orgs","repos_url":"https://api.github.com/users/ivakegg/repos","events_url":"https://api.github.com/users/ivakegg/events{/privacy}","received_events_url":"https://api.github.com/users/ivakegg/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T19:22:38Z","updated_at":"2023-06-29T19:22:38Z","author_association":"CONTRIBUTOR","body":"I like that idea @ctubbsii with a caviot.  Given it is common for some of the tservers to be down, then a yellow dot on the Servers menu would easily be ignored.  Perhaps the Servers menu can be expanded into the title bar so that manager, tservers, and gc are always visible.\r\n","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613677731/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613693499","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1613693499","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1613693499,"node_id":"IC_kwDOACaFSM5gLwI7","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T19:36:57Z","updated_at":"2023-06-29T19:36:57Z","author_association":"CONTRIBUTOR","body":"Looking at the implementations of `Session.cleanup()`, only `SingleScanSession` and `SummarySession` can return `false`. `SummarySession` just returns the return value of `Future.cancel(true)`, which I think in most cases will end cancelling the future. The `SingleScanSession` case is more complicated as it calls `Scanner.close` which will return `false` if it doesn't obtain a lock within 10ms.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613693499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613737878","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1613737878","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1613737878,"node_id":"IC_kwDOACaFSM5gL6-W","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T20:02:14Z","updated_at":"2023-06-29T20:02:14Z","author_association":"CONTRIBUTOR","body":"Should `Scanner.close` call `isolatedDataSource.interrupt()` before trying to obtain the `scannerSemaphore` ?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613737878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613770303","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1613770303","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1613770303,"node_id":"IC_kwDOACaFSM5gMC4_","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T20:28:38Z","updated_at":"2023-06-29T20:28:38Z","author_association":"CONTRIBUTOR","body":"@ctubbsii - For 3.0, I believe it's AbstractTabletFile and any descendents that create a Path without calling URI.create. @cshannon  - any thoughts on what changes need to be made in the merge to 3.0 for this change?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613770303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613829364","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1613829364","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1613829364,"node_id":"IC_kwDOACaFSM5gMRT0","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T21:25:55Z","updated_at":"2023-06-29T22:16:17Z","author_association":"CONTRIBUTOR","body":"> Should Scanner.close call isolatedDataSource.interrupt() before trying to obtain the scannerSemaphore ?\r\n\r\nI think the interruptFlag that Scanner.close() does set to true is also passed to the scanner data source when its created, so that should be the same.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613829364/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613916979","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1613916979","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1613916979,"node_id":"IC_kwDOACaFSM5gMmsz","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-29T23:27:50Z","updated_at":"2023-06-29T23:27:50Z","author_association":"MEMBER","body":"@ivakegg Expanding the menu into the title bar would be difficult to do without mangling the display, especially for smaller screens. But we could use a different icon that propagates up, so instead of a dot, it's something like https://icons.getbootstrap.com/icons/exclamation-triangle/ next to the rolled-up servers menu, and also next to the Manager link in that menu. And we could make sure that the icon is the same as the one shown on the manager page itself next to the message about being in safe mode, so it's intuitive that the icon in the menu is related to the message with the same icon on the manager page.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1613916979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614508706","html_url":"https://github.com/apache/accumulo/pull/3555#issuecomment-1614508706","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3555","id":1614508706,"node_id":"IC_kwDOACaFSM5gO3Ki","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T11:16:34Z","updated_at":"2023-06-30T11:16:34Z","author_association":"CONTRIBUTOR","body":"Full IT build passed","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614508706/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614549737","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1614549737","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1614549737,"node_id":"IC_kwDOACaFSM5gPBLp","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T11:57:53Z","updated_at":"2023-06-30T11:57:53Z","author_association":"CONTRIBUTOR","body":"> @ctubbsii - For 3.0, I believe it's AbstractTabletFile and any descendents that create a Path without calling URI.create. @cshannon - any thoughts on what changes need to be made in the merge to 3.0 for this change?\r\n\r\nI will take care of merging into main when this is in 2.1","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614549737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614560779","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1614560779","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1614560779,"node_id":"IC_kwDOACaFSM5gPD4L","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T12:08:14Z","updated_at":"2023-06-30T12:08:14Z","author_association":"CONTRIBUTOR","body":"So this actually merged pretty easily as the creation of the Path is still in StoredTabletFile and wasn't moved to AbstractTabletFile.\r\n\r\nThe only thing I noticed when going through the different implementations to check for Path creation was that ScanServerRefTabletFile [creates](https://github.com/apache/accumulo/blob/5174be131aa3818c5fe7c7f310fd1130ffef08dc/core/src/main/java/org/apache/accumulo/core/metadata/ScanServerRefTabletFile.java#L35) a Path as well so I am wondering if this change should be made there too.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614560779/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614562366","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1614562366","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1614562366,"node_id":"IC_kwDOACaFSM5gPEQ-","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T12:09:44Z","updated_at":"2023-06-30T12:09:44Z","author_association":"CONTRIBUTOR","body":"I should add the harder place to merge is in the no chop merge stuff since that redoes metadata to be Json but I will also handle that of course. ","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614562366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614564094","html_url":"https://github.com/apache/accumulo/pull/3549#issuecomment-1614564094","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3549","id":1614564094,"node_id":"IC_kwDOACaFSM5gPEr-","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T12:11:11Z","updated_at":"2023-06-30T12:11:11Z","author_association":"CONTRIBUTOR","body":"> The only thing I noticed when going through the different implementations to check for Path creation was that ScanServerRefTabletFile [creates](https://github.com/apache/accumulo/blob/5174be131aa3818c5fe7c7f310fd1130ffef08dc/core/src/main/java/org/apache/accumulo/core/metadata/ScanServerRefTabletFile.java#L35) a Path as well so I am wondering if this change should be made there too.\r\n\r\nCan you create a ticket for this in 2.1.2?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614564094/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614691549","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1614691549","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1614691549,"node_id":"IC_kwDOACaFSM5gPjzd","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T13:56:01Z","updated_at":"2023-06-30T13:56:01Z","author_association":"MEMBER","body":"What if instead of a collapsible server dropdown menu, the three servers had their own separate link in the nav bar next to one another?","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614691549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614729991","html_url":"https://github.com/apache/accumulo/issues/3448#issuecomment-1614729991","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3448","id":1614729991,"node_id":"IC_kwDOACaFSM5gPtMH","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T14:23:52Z","updated_at":"2023-06-30T14:23:52Z","author_association":"CONTRIBUTOR","body":"@ddanielr - I think this is something you can start working on if that sounds good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614729991/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614730311","html_url":"https://github.com/apache/accumulo/issues/3448#issuecomment-1614730311","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3448","id":1614730311,"node_id":"IC_kwDOACaFSM5gPtRH","user":{"login":"ddanielr","id":12480877,"node_id":"MDQ6VXNlcjEyNDgwODc3","avatar_url":"https://avatars.githubusercontent.com/u/12480877?v=4","gravatar_id":"","url":"https://api.github.com/users/ddanielr","html_url":"https://github.com/ddanielr","followers_url":"https://api.github.com/users/ddanielr/followers","following_url":"https://api.github.com/users/ddanielr/following{/other_user}","gists_url":"https://api.github.com/users/ddanielr/gists{/gist_id}","starred_url":"https://api.github.com/users/ddanielr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddanielr/subscriptions","organizations_url":"https://api.github.com/users/ddanielr/orgs","repos_url":"https://api.github.com/users/ddanielr/repos","events_url":"https://api.github.com/users/ddanielr/events{/privacy}","received_events_url":"https://api.github.com/users/ddanielr/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T14:24:08Z","updated_at":"2023-06-30T14:24:08Z","author_association":"CONTRIBUTOR","body":"Yep that works!","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614730311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614859026","html_url":"https://github.com/apache/accumulo/pull/3506#issuecomment-1614859026","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3506","id":1614859026,"node_id":"IC_kwDOACaFSM5gQMsS","user":{"login":"cshannon","id":123009,"node_id":"MDQ6VXNlcjEyMzAwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/123009?v=4","gravatar_id":"","url":"https://api.github.com/users/cshannon","html_url":"https://github.com/cshannon","followers_url":"https://api.github.com/users/cshannon/followers","following_url":"https://api.github.com/users/cshannon/following{/other_user}","gists_url":"https://api.github.com/users/cshannon/gists{/gist_id}","starred_url":"https://api.github.com/users/cshannon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cshannon/subscriptions","organizations_url":"https://api.github.com/users/cshannon/orgs","repos_url":"https://api.github.com/users/cshannon/repos","events_url":"https://api.github.com/users/cshannon/events{/privacy}","received_events_url":"https://api.github.com/users/cshannon/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T15:56:47Z","updated_at":"2023-06-30T15:56:47Z","author_association":"CONTRIBUTOR","body":"@dlmarion  and @ctubbsii - I just pushed up a new commit that adds a static validate method to `StoredTabletFile` so we don't need to construct the `StoredTabletFile` object just to throw it away in `MetadataConstraints`. This (currently) performs the same validation as inside the `StoredTabletFile` constructor, but the downside is that it is possible for the validation here to get out of sync with the constructor sync it's different code paths if someone only changed the constructor or the validate method. The constructor can't really use the validate method without more refactoring or we'd end up parsing the path twice.\r\n\r\nSo I don't know if this is ideal or if we should just keeping the previous change of just constructing the new `StoredTabletFile` object for validation so we always ensure we go through one code path.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614859026/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614880187","html_url":"https://github.com/apache/accumulo/pull/3539#issuecomment-1614880187","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3539","id":1614880187,"node_id":"IC_kwDOACaFSM5gQR27","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T16:14:33Z","updated_at":"2023-06-30T16:14:33Z","author_association":"CONTRIBUTOR","body":"Merged this as I am close to wrapping up #3462 and wanted to rebase that on top of this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614880187/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614881758","html_url":"https://github.com/apache/accumulo/pull/3538#issuecomment-1614881758","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3538","id":1614881758,"node_id":"IC_kwDOACaFSM5gQSPe","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T16:16:05Z","updated_at":"2023-06-30T16:16:05Z","author_association":"CONTRIBUTOR","body":"Merged this as I am close to wrapping up #3462 and want to rebase that work to include this.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614881758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614939061","html_url":"https://github.com/apache/accumulo/issues/3548#issuecomment-1614939061","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3548","id":1614939061,"node_id":"IC_kwDOACaFSM5gQgO1","user":{"login":"DomGarguilo","id":47725857,"node_id":"MDQ6VXNlcjQ3NzI1ODU3","avatar_url":"https://avatars.githubusercontent.com/u/47725857?v=4","gravatar_id":"","url":"https://api.github.com/users/DomGarguilo","html_url":"https://github.com/DomGarguilo","followers_url":"https://api.github.com/users/DomGarguilo/followers","following_url":"https://api.github.com/users/DomGarguilo/following{/other_user}","gists_url":"https://api.github.com/users/DomGarguilo/gists{/gist_id}","starred_url":"https://api.github.com/users/DomGarguilo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DomGarguilo/subscriptions","organizations_url":"https://api.github.com/users/DomGarguilo/orgs","repos_url":"https://api.github.com/users/DomGarguilo/repos","events_url":"https://api.github.com/users/DomGarguilo/events{/privacy}","received_events_url":"https://api.github.com/users/DomGarguilo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T17:08:56Z","updated_at":"2023-06-30T17:08:56Z","author_association":"MEMBER","body":"I made the following changes to the nav bar:\r\n\r\n![image](https://github.com/apache/accumulo/assets/47725857/6faa5e7c-8225-4917-8b21-0f9dcaf7feba)\r\n\r\nIt was mentioned in a previous comment about changing the color of the dot next to the manager server when it is in safe mode. Right now it does not change due to the manager being in safe mode but i can try adding that if what I have so far is looking good.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1614939061/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615005854","html_url":"https://github.com/apache/accumulo/issues/3559#issuecomment-1615005854","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3559","id":1615005854,"node_id":"IC_kwDOACaFSM5gQwie","user":{"login":"keith-turner","id":1268739,"node_id":"MDQ6VXNlcjEyNjg3Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1268739?v=4","gravatar_id":"","url":"https://api.github.com/users/keith-turner","html_url":"https://github.com/keith-turner","followers_url":"https://api.github.com/users/keith-turner/followers","following_url":"https://api.github.com/users/keith-turner/following{/other_user}","gists_url":"https://api.github.com/users/keith-turner/gists{/gist_id}","starred_url":"https://api.github.com/users/keith-turner/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith-turner/subscriptions","organizations_url":"https://api.github.com/users/keith-turner/orgs","repos_url":"https://api.github.com/users/keith-turner/repos","events_url":"https://api.github.com/users/keith-turner/events{/privacy}","received_events_url":"https://api.github.com/users/keith-turner/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:11:23Z","updated_at":"2023-06-30T18:16:40Z","author_association":"CONTRIBUTOR","body":"User compaction are currently driven by a fate operation, however those create ZK node that scale with the number of compaction request coming in via the API.  User compactions do not create ZK nodes for each tablet in a compaction request.  For example if a user initiated compaction has range that covers 100K tablets, then it will create a few ZK nodes but not N*100K ZK nodes.   The compaction commit process in #3462 is a pert tablet operation, so for it to use FATE it would need to create a FATE operation per a tablet.  This is why it was deemed too much for ZK.\r\n\r\nIts best to avoid placing any per tablet information in ZK as this assume that all tablet metadata can fit in memory on a single machine which is an assumption that Accumulo tries to avoid.  That does make the changes in #3382 to use FATE for per tablet splits kinds iffy, however that could be solved by putting a cap on the number of active split operations (which is not currently supported by FATE).  It may be ok for splits but not sure we would want to bottleneck the number of compactions that could concurrently commit in that way.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615005854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615011610","html_url":"https://github.com/apache/accumulo/issues/3559#issuecomment-1615011610","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3559","id":1615011610,"node_id":"IC_kwDOACaFSM5gQx8a","user":{"login":"ctubbsii","id":1280725,"node_id":"MDQ6VXNlcjEyODA3MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1280725?v=4","gravatar_id":"","url":"https://api.github.com/users/ctubbsii","html_url":"https://github.com/ctubbsii","followers_url":"https://api.github.com/users/ctubbsii/followers","following_url":"https://api.github.com/users/ctubbsii/following{/other_user}","gists_url":"https://api.github.com/users/ctubbsii/gists{/gist_id}","starred_url":"https://api.github.com/users/ctubbsii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ctubbsii/subscriptions","organizations_url":"https://api.github.com/users/ctubbsii/orgs","repos_url":"https://api.github.com/users/ctubbsii/repos","events_url":"https://api.github.com/users/ctubbsii/events{/privacy}","received_events_url":"https://api.github.com/users/ctubbsii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:14:56Z","updated_at":"2023-06-30T18:14:56Z","author_association":"MEMBER","body":"You tagged this with the elasticity project, but it seems to me that this could be an independent development effort. It doesn't seem strictly tied to the elasticity effort. Though, that effort would benefit from it. This could be done as an independent intermediate step towards the elasticity effort, rather than as something tightly coupled and interdependent on it.\r\n\r\nAlso, related to this idea, there was an idea to change the serialization of Fate storage to use Java 17 record types. That doesn't impact where we store the data... just how it's serialized when we do store it. But, if somebody were to work on this, they could take that proposed change into account, if they had to change how things were serialized to use the metadata table.","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615011610/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null},{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615022525","html_url":"https://github.com/apache/accumulo/issues/3512#issuecomment-1615022525","issue_url":"https://api.github.com/repos/apache/accumulo/issues/3512","id":1615022525,"node_id":"IC_kwDOACaFSM5gQ0m9","user":{"login":"dlmarion","id":567911,"node_id":"MDQ6VXNlcjU2NzkxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/567911?v=4","gravatar_id":"","url":"https://api.github.com/users/dlmarion","html_url":"https://github.com/dlmarion","followers_url":"https://api.github.com/users/dlmarion/followers","following_url":"https://api.github.com/users/dlmarion/following{/other_user}","gists_url":"https://api.github.com/users/dlmarion/gists{/gist_id}","starred_url":"https://api.github.com/users/dlmarion/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dlmarion/subscriptions","organizations_url":"https://api.github.com/users/dlmarion/orgs","repos_url":"https://api.github.com/users/dlmarion/repos","events_url":"https://api.github.com/users/dlmarion/events{/privacy}","received_events_url":"https://api.github.com/users/dlmarion/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-30T18:19:42Z","updated_at":"2023-06-30T20:02:16Z","author_association":"CONTRIBUTOR","body":"@keith-turner @jmark99 - I turned your jshell test into an IT in https://github.com/dlmarion/accumulo/commit/cfb428d8a7bc351720685fd6353d140171fff5ba. I was able to reproduce the tablet server shutting down, but I think the cause may be different. What I'm seeing in the logs is that the Manager requests that the root and test table tablet be unloaded from the tablet server. The TabletGroupWatcher for the metadata table however never requests that the metadata table tablet be unloaded. The TabletGroupWatcher for the metadata table appears to be waiting at MetadataTableScanner.hasNext(), possibly due to the root tablet being unloaded?\r\n\r\nAnyway, I'm not sure that what I'm seeing is related to this specific issue, but I wanted to provide the information just in case.\r\n\r\nEdit: I guess the one interesting thing here is that the IsolatedScanners in the test do not prevent the test table from being unloaded.\r\n\r\nUpdate: Did some further digging and I think there is an issue with the TabletGroupWatcher, specifically in the assigned / hosted accounting. In my test when I stop the one and only TabletServer, it sends unload messages to suspend all tables (root, metadata, test). The root and test tablets close with no issue, but the metadata tablet is stuck closing because the root tablet is closed. I took a couple of jstacks and all of them looked like:\r\n\r\n```\r\n\"Minor compacting !0;~<\" #306 daemon prio=5 os_prio=0 cpu=11.56ms elapsed=138.38s tid=0x00007fa2f009b000 nid=0x1ac34 in Object.wait()  [0x00007fa2178f6000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n        at java.lang.Object.wait(java.base@11.0.18/Native Method)\r\n        - waiting on <no object reference available>\r\n        at java.lang.Object.wait(java.base@11.0.18/Object.java:328)\r\n        at org.apache.accumulo.core.clientImpl.TabletServerBatchWriter.waitRTE(TabletServerBatchWriter.java:499)\r\n        at org.apache.accumulo.core.clientImpl.TabletServerBatchWriter.close(TabletServerBatchWriter.java:365)\r\n        - waiting to re-lock in wait() <0x00000000f8e443c0> (a org.apache.accumulo.core.clientImpl.TabletServerBatchWriter)\r\n        at org.apache.accumulo.core.clientImpl.BatchWriterImpl.close(BatchWriterImpl.java:58)\r\n        at org.apache.accumulo.server.metadata.TabletsMutatorImpl.close(TabletsMutatorImpl.java:81)\r\n        at org.apache.accumulo.server.metadata.TabletMutatorImpl.mutate(TabletMutatorImpl.java:41)\r\n        at org.apache.accumulo.server.util.ManagerMetadataUtil.updateTabletDataFile(ManagerMetadataUtil.java:249)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.updateTabletDataFile(Tablet.java:2053)\r\n        - locked <0x00000000f26b17f8> (a java.lang.Object)\r\n        at org.apache.accumulo.tserver.tablet.DatafileManager.bringMinorCompactionOnline(DatafileManager.java:362)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.minorCompact(Tablet.java:496)\r\n        at org.apache.accumulo.tserver.tablet.MinorCompactionTask.run(MinorCompactionTask.java:111)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.initiateClose(Tablet.java:955)\r\n        at org.apache.accumulo.tserver.tablet.Tablet.close(Tablet.java:895)\r\n        at org.apache.accumulo.tserver.UnloadTabletHandler.run(UnloadTabletHandler.java:93)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.18/ThreadPoolExecutor.java:1128)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.18/ThreadPoolExecutor.java:628)\r\n        at org.apache.accumulo.core.trace.TraceWrappedRunnable.run(TraceWrappedRunnable.java:52)\r\n        at java.lang.Thread.run(java.base@11.0.18/Thread.java:829)\r\n```","reactions":{"url":"https://api.github.com/repos/apache/accumulo/issues/comments/1615022525/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null}]